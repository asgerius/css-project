[{"tags": ["c", "arrays", "sorting", "pointers"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1469658315, "post_id": 38624138, "comment_id": 64633964, "body": "does that even compile? I bet the compiler is complaining big time at you"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1469658350, "post_id": 38624138, "comment_id": 64633981, "body": "What compiler warnings do you get? Assuming you have them enabled. But &quot;faster than other methods&quot;? Not unless you inline the function for a simple swap."}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469658425, "post_id": 38624138, "comment_id": 64633997, "body": "Yeah, it gives error.."}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469658500, "post_id": 38624138, "comment_id": 64634022, "body": "I was not able to call it in the right way: swap(array[c], array[d]); Therefore, the error is here"}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498009659, "post_id": 38624138, "comment_id": 76316410, "body": "@weatherVane. Please check and vote. thanks"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498010681, "post_id": 38624138, "comment_id": 76316655, "body": "I rollback to the revision 1 because the accepted answer was post and not modified from this revision."}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1498010726, "post_id": 38624138, "comment_id": 76316665, "body": "Ok, thanks. I appreciate."}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498010865, "post_id": 38624138, "comment_id": 76316694, "body": "@stargateur. How can vote up. I don&#39;t like this -2"}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498011061, "post_id": 38624138, "comment_id": 76316747, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/147218/discussion-between-eid-and-stargateur\">continue this discussion in chat</a>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498011147, "post_id": 38624138, "comment_id": 76316771, "body": "@Eid I could but you ask me explicitly, This is not good to ask for up vote. Look myself, my question has <code>-3</code>, don&#39;t worry about down vote."}], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469658608, "post_id": 38624213, "comment_id": 64634060, "body": "Yeah, that is true but How can I call it from the main function. Like I have done &quot;swap(array[c], array[d]);&quot;, which gives me error"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469658924, "post_id": 38624213, "comment_id": 64634178, "body": "@Eid - you can&#39;t possibly use array reference if you are passing an <code>int</code> to the function. You need to at least pass the reference to the function."}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469659545, "post_id": 38624213, "comment_id": 64634386, "body": "function definition : void swap(int array1[], int array2[])..... function call: swap(&amp;array[c],&amp;array[d]);.....Gives the same error"}, {"owner": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "edited": false, "score": 0, "creation_date": 1469659599, "post_id": 38624213, "comment_id": 64634403, "body": "function definition is still wrong:  void swap(int* val1, int* val2)  feel free to check the edit to my answer"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "edited": false, "score": 0, "creation_date": 1469661384, "post_id": 38624213, "comment_id": 64634842, "body": "@user3164339 You are mistaken if you think <code>void swap(int array1[], int array2[])</code> differs in functionality from <code>void swap(int *array1, int *array2)</code>.  There are the same.  See <a href=\"http://stackoverflow.com/questions/8424716/difference-between-int-and-int-as-function-arguments\" title=\"difference between int and int as function arguments\">stackoverflow.com/questions/8424716/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469661519, "post_id": 38624213, "comment_id": 64634870, "body": "@Eid &quot;Gives the same error&quot; --&gt; What exactly is that error?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1498013321, "post_id": 38624213, "comment_id": 76317288, "body": "@Eid I can only up vote a question once.  Recommend you do not ask for votes as that atrtacks down votes from others."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1469658699, "last_edit_date": 1469658699, "creation_date": 1469658481, "answer_id": 38624213, "question_id": 38624138, "link": "https://stackoverflow.com/questions/38624138/how-to-sort-an-array-by-passing-to-a-function-as-pointer-using-c/38624213#38624213", "title": "How to sort an array by passing to a function as pointer using c?", "body": "<p>1) Sorting only affected local contents.</p>\n\n<pre><code>    temp = aj;\n    aj = ai;\n    ai = temp;\n</code></pre>\n\n<p>Code needs to update values referenced by original pointers.</p>\n\n<pre><code>void swap(int array1[], int array2[]){\n  int ai = *array1;\n  int aj = *array2;\n  if (ai &gt; aj) {\n    *array1 = aj;\n    *array2 = ai;\n  }\n}\n</code></pre>\n\n<p>2) Code needs to call the <code>swap()</code> correctly.  It expect pointers, not <code>int</code>.  This implies compiler warnings are not fully enabled.  Be sure to do so - saves you time.</p>\n\n<pre><code>// swap(array[c], array[d]);\nswap(&amp;array[c], &amp;array[d]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469658733, "post_id": 38624251, "comment_id": 64634106, "body": "You are right, but the execution time will not be effected the way you have done. I want to access array elements using pointers"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469658790, "post_id": 38624251, "comment_id": 64634122, "body": "Perhaps <code>void swap(int *array, int idx1, int idx2);</code>?  (need *)"}, {"owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "edited": false, "score": 0, "creation_date": 1469659252, "post_id": 38624251, "comment_id": 64634311, "body": "calling function: swap(array, c, d); ....and the function definition....void swap(int *ar, int c, int d)...Still does not work"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1469659738, "post_id": 38624251, "comment_id": 64634444, "body": "you need to repost your code to show what you have now, and say whats &#39;not working&#39;"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1469658883, "last_edit_date": 1469658883, "creation_date": 1469658617, "answer_id": 38624251, "question_id": 38624138, "link": "https://stackoverflow.com/questions/38624138/how-to-sort-an-array-by-passing-to-a-function-as-pointer-using-c/38624251#38624251", "title": "How to sort an array by passing to a function as pointer using c?", "body": "<p>ok , you have declared swap as </p>\n\n<pre><code>void swap(int array1[], int array2[])\n</code></pre>\n\n<p>but you call it with</p>\n\n<pre><code>swap(array[c], array[d]);\n</code></pre>\n\n<p>so the declaration says it takes two int arrays as params but you pass it two ints.</p>\n\n<p>If you want swap (btw it should be called swap_if_needed) to excahnge 2 elements of the arrays then it needs to be declared as</p>\n\n<pre><code>void swap(int array, int idx1, int idx2);\n</code></pre>\n\n<p>and called by</p>\n\n<pre><code>swap(array,c,d);\n</code></pre>\n\n<p>I leave it to you to correct the body of swap</p>\n\n<p>If you want to do it like the book then you need to declare swal as</p>\n\n<pre><code>void swap(int *x, int * y);\n</code></pre>\n\n<p>and call it like this</p>\n\n<pre><code>swap(&amp;array[c], &amp;array[d]);\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 2684110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/629412d60572cfd6a20ca49ec56f26ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eid", "link": "https://stackoverflow.com/users/2684110/eid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2655, "favorite_count": 1, "accepted_answer_id": 38624213, "answer_count": 2, "score": -2, "last_activity_date": 1519141802, "creation_date": 1469657997, "last_edit_date": 1498010508, "question_id": 38624138, "link": "https://stackoverflow.com/questions/38624138/how-to-sort-an-array-by-passing-to-a-function-as-pointer-using-c", "title": "How to sort an array by passing to a function as pointer using c?", "body": "<p>Consider an array, which is passed to the function <code>swap()</code>, as illustrated in the following quote. I want to implemented a variant of this <code>swap()</code> function in order to sort my array.</p>\n\n<blockquote>\n  <p>These inefficiencies can be removed by an implementation as suggested bu the array concept of the C programming language. The idea is to access array elements through pointers. Another idea is to store addresses that are used multiple times.</p>\n\n<pre><code>void swap(int *p, int *q) {\n    int t, ai, aj;\n    ai &lt;- *p; aj &lt;- *q;\n    if (ai &gt; aj) {\n        t &lt;- aj;\n        *q &lt;- ai;\n        *p &lt;- t;\n    }\n}\n</code></pre>\n  \n  <p>Looking more closely at this new code reveals that the temporary variable <code>t</code> can be eliminated as well.</p>\n</blockquote>\n\n<p>I have done it in the following way, but fail to sort the array. Can you check for the error why it does not sort the array?</p>\n\n<pre><code>void swap(int array1[], int array2[])\n{\n    int temp, ai, aj;\n    ai = *array1;\n    aj = *array2;\n    if (ai &gt; aj) /* For decreasing order use &lt; */\n    {\n        temp = aj;\n        aj = ai;\n        ai = temp;\n    }\n}\n\nint main()\n{\n    int array[100], n, c, d, swap;\n\n    printf(\"Enter number of elements\\n\");\n    scanf(\"%d\", &amp;n);\n\n    printf(\"Enter %d integers\\n\", n);\n\n    for (c = 0; c &lt; n; c++)\n        scanf(\"%d\", &amp;array[c]);\n\n    for (c = 0; c &lt; (n - 1); c++)\n    {\n        for (d = 0; d &lt; n - c - 1; d++)\n        {\n            swap(array[c], array[d]);\n        }\n    }\n\n    printf(\"Sorted list in ascending order:\\n\");\n\n    for (c = 0; c &lt; n; c++)\n        printf(\"%d\\n\", array[c]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 3, "creation_date": 1469657394, "post_id": 38623968, "comment_id": 64633660, "body": "To start with you have a <code>*previous</code> member in your node but you never use it. Your code does not implement a doubly linked list ..."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1469657877, "post_id": 38623968, "comment_id": 64633834, "body": "Already answered, but as to not being able to &quot;weapons your head around it&quot;--get some paper and a pencil and play computer for a bit: work through the code until you understand it. Being able to digest existing code is a pretty important skill."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1469659100, "post_id": 38623968, "comment_id": 64634253, "body": "What would happen if your code try to use removeEntry with n1, in that case n1-&gt;previous should point to list_pointer, but list_pointer does not have  next pointer. For a removeEntry(&amp;n1), list_pointer should be updated to point to n2, and n2-&gt;previous should be set to null."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1469663879, "post_id": 38623968, "comment_id": 64635439, "body": "Same point, what about <code>insertEntry(addOn, n1)</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469678641, "post_id": 38623968, "comment_id": 64638431, "body": "Don&#39;t cast a null pointer constant. Use the <code>NULL</code> macro! C is not C++!"}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469658578, "post_id": 38624053, "comment_id": 64634048, "body": "I don&#39;t know what a node is, I haven&#39;t come across that in the book yet."}, {"owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "edited": false, "score": 2, "creation_date": 1469658649, "post_id": 38624053, "comment_id": 64634072, "body": "replace &#39;node&#39; with &#39;entry&#39; and this should make sense to you"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469658655, "post_id": 38624053, "comment_id": 64634074, "body": "@MattCleary I used node as another term for <code>entry</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469665659, "post_id": 38624053, "comment_id": 64635847, "body": "@gloopit: The code to &#39;remove&#39; and entry only sorts out one of the two pointers that needs to be adjusted.  You should have your printing code print both using the <code>next</code> pointer chain and the <code>prev</code> pointer chain.  If the two outputs aren&#39;t equivalent but reversed, you&#39;ve got problems."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 2, "last_activity_date": 1469658635, "last_edit_date": 1469658635, "creation_date": 1469657535, "answer_id": 38624053, "question_id": 38623968, "link": "https://stackoverflow.com/questions/38623968/doubly-linked-list-code-works-should-it-much-less-code-than-other-solution/38624053#38624053", "title": "Doubly-linked-list. Code works...should it? Much less code than other solution", "body": "<p>The code is different because your code does not successfully implement a double linked list. For example try inserting an entry into the middle of the list then print it from the end to the start, you will find the linked code works, but yours does not.</p>\n"}, {"comments": [{"owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469658786, "post_id": 38624249, "comment_id": 64634120, "body": "It&#39;s not a matter of sorry; its a matter of that&#39;s the difference. Figure out how to write a test that shows why your code is wrong, and figure out how to make it right."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 1, "creation_date": 1469660848, "post_id": 38624249, "comment_id": 64634739, "body": "@MattCleary There is no point being sorry for being wrong. Least of all being sorry to some anonymous person on the Internet who figured out why you&#39;re wrong."}, {"owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "edited": false, "score": 0, "creation_date": 1470075577, "post_id": 38624249, "comment_id": 64788777, "body": "As the anonymous person, I agree, no apology needed; I was just trying to point something out to help you in the process of learning and figuring this stuff out for yourself.  My aim is to help you figure out how to fish and not to just give you the fish. Think like a fisherman so to speak :-)"}], "tags": [], "owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "is_accepted": false, "score": 2, "last_activity_date": 1469658604, "creation_date": 1469658604, "answer_id": 38624249, "question_id": 38623968, "link": "https://stackoverflow.com/questions/38623968/doubly-linked-list-code-works-should-it-much-less-code-than-other-solution/38624249#38624249", "title": "Doubly-linked-list. Code works...should it? Much less code than other solution", "body": "<blockquote>\n  <p>Please keep in my mind that my code does exactly what I was trying to do, my printed output is:....</p>\n</blockquote>\n\n<p>This is the single most <strong>dangerous</strong> and <strong>naive</strong> thing new programmers say. It tells us absolutely nothing.  Programming is not a matter of the ends justify the means.  You can push the wrong buttons on a calculator and get the right answer no?  </p>\n\n<p>Your test consists of traversing in a single direction through your list.  A singly linked list would have passed that test.  </p>\n\n<p>Did you test reverse traversal? That is after all the key difference between a singly linked list and a doubly linked one.<br>\nDid you test insertion and removal from the middle and from the front and back?</p>\n\n<p>How about cycles? What happens if you add an element to the list that's already in the list?</p>\n"}], "owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 38624053, "answer_count": 2, "score": -1, "last_activity_date": 1469658635, "creation_date": 1469657115, "last_edit_date": 1495542154, "question_id": 38623968, "link": "https://stackoverflow.com/questions/38623968/doubly-linked-list-code-works-should-it-much-less-code-than-other-solution", "title": "Doubly-linked-list. Code works...should it? Much less code than other solution", "body": "<p>I'm working through the exercises in the 'Pointers' chapter of 'Programming in C' by Kochan.</p>\n\n<p>I have written a program that creates a doubly-linked-list. It first prints the values. It then proceeds to call a function to remove an entry. The values are printed again.</p>\n\n<p>Finally, an additional function is called to ADD an entry, followed by a print again.</p>\n\n<p>Right now, my code works. You can see it here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nstruct entry\n    {\n        int value;\n        struct entry *next;\n        struct entry *previous;\n    };\n\nvoid removeEntry(struct entry *start);\nvoid insertEntry(struct entry *addOn, struct entry *element);\n\nint main (void)\n{\n\n    //declarations\n    struct entry n1, n2, n3, addOn;\n    struct entry *list_pointer = &amp;n1;\n\n\n    //creates list values and links\n    n1.value = 100;\n    n1.next = &amp;n2;\n    n1.previous = list_pointer;\n\n    n2.value = 200;\n    n2.next = &amp;n3;\n    n2.previous = &amp;n1;\n\n    n3.value = 300;\n    n3.next = (struct entry *) 0;\n    n3.previous = &amp;n2;\n\n    //prints out all list values\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    printf(\"\\n\");\n\n    //resets list_pointer back to start\n    list_pointer = &amp;n1;\n\n    //calls function and removes n2 from list by directly linking n1 to n3\n    removeEntry(&amp;n2);\n\n    //print out amended list\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    printf(\"\\n\");\n\n    list_pointer = &amp;n1;\n    insertEntry(&amp;addOn, &amp;n3);\n\n    //print out amended list\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    return 0;\n}\n\nvoid removeEntry(struct entry *start)\n{\n    start-&gt;previous-&gt;next = start-&gt;next;\n}\n\nvoid insertEntry(struct entry *addOn, struct entry *element)\n{\n    element-&gt;next = addOn;\n    addOn-&gt;value = 400;\n    addOn-&gt;next = (struct entry *) 0;\n}\n</code></pre>\n\n<p>HOWEVER, once done, I wanted to check to see if any other solutions had been posted online, just in case I was missing anything.</p>\n\n<p>Well I found a question and answer <a href=\"https://stackoverflow.com/questions/33713395/remove-entry-and-insert-entry-in-linked-lists-functions-operating-on-the-wrong-e\">HERE</a> and there are considerable differences.</p>\n\n<p>Ignoring the difference in the format of how the values are printed, you can see that there is considerably more code written, especially in the functions. This is my remove function again:</p>\n\n<pre><code>void removeEntry(struct entry *start)\n{\n    start-&gt;previous-&gt;next = start-&gt;next;\n}\n</code></pre>\n\n<p>and this is theirs: </p>\n\n<pre><code>void RemoveEntry(struct Entry *EntryToRemove)\n{\n    if (EntryToRemove-&gt;Previous != NULL)\n    {\n        EntryToRemove-&gt;Previous-&gt;Next = EntryToRemove-&gt;Next;\n    }\n    if (EntryToRemove-&gt;Next != NULL)\n    {\n        EntryToRemove-&gt;Next-&gt;Previous = EntryToRemove-&gt;Previous;\n    }\n    EntryToRemove-&gt;Previous = NULL;\n    EntryToRemove-&gt;Next = NULL;\n}\n</code></pre>\n\n<p>Now I can see that there is a check for NULL, but aside from that, they are working with both <code>Previous</code> and <code>Next</code> values and have an if statement for each.</p>\n\n<p>Similarly, you can see my <code>insert</code> function here:</p>\n\n<pre><code>void insertEntry(struct entry *addOn, struct entry *element)\n{\n\n    element-&gt;next = addOn;\n    addOn-&gt;value = 400;\n    addOn-&gt;next = (struct entry *) 0;\n}\n</code></pre>\n\n<p>and theirs:</p>\n\n<pre><code>void InsertEntry(struct Entry *InsertPosition, struct Entry *EntryToInsert)\n{\n    EntryToInsert-&gt;Previous = InsertPosition-&gt;Previous;\n    EntryToInsert-&gt;Next = InsertPosition;\n    if (InsertPosition-&gt;Previous != NULL)\n    {\n        InsertPosition-&gt;Previous-&gt;Next = EntryToInsert;\n    }\n    InsertPosition-&gt;Previous = EntryToInsert;\n}\n</code></pre>\n\n<p>Please keep in my mind that my code does exactly what I was trying to do, my printed output is:</p>\n\n<pre><code>100\n200\n300\n\n100\n300\n\n100\n300\n400\n</code></pre>\n\n<p>Can you please attempt to explain this to me? I feel like an idiot for not being able to get my head around with this.</p>\n\n<p>This is their full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;vv\n\nstruct Entry\n{\n    int Value;\n    struct Entry *Previous;\n    struct Entry *Next;\n};\n\nvoid InsertEntry(struct Entry *InsertPosition, struct Entry *EntryToInsert);\nvoid RemoveEntry(struct Entry *EntryToRemove);\n\nint main()\n{\n    struct Entry N1, N2, N3, N4, N5, Insert, *Start = &amp;N1;\n\n    //set initial values\n    N1.Value = 10;\n    N2.Value = 20;\n    N3.Value = 20;\n    N4.Value = 30;\n    N5.Value = 40;\n    Insert.Value = 35;\n\n    //link the list\n\n    N1.Next = &amp;N2;\n    N2.Next = &amp;N3;\n    N3.Next = &amp;N4;\n    N4.Next = &amp;N5;\n    N5.Next = NULL;\n    //Link again\n\n    N1.Previous = NULL;\n    N2.Previous = &amp;N1;\n    N3.Previous = &amp;N2;\n    N4.Previous = &amp;N3;\n    N5.Previous = &amp;N4;\n\n    InsertEntry(&amp;N4, &amp;Insert);\n    RemoveEntry(&amp;N2);\n\n    //Display the Lists\n    while (Start != (struct Entry *) 0)\n    {\n        printf(\"Previous: \");\n        if (Start-&gt;Previous != NULL)\n        {\n            printf(\"%i\", Start-&gt;Previous-&gt;Value);\n        }\n        else\n        {\n            printf(\"NULL\");\n        }\n        printf(\", Current: %i, Next: \", Start-&gt;Value);\n        if (Start-&gt;Next != NULL)\n        {\n            printf(\"%i\", Start-&gt;Next-&gt;Value);\n        }\n        else\n        {\n            printf(\"NULL\");\n        }\n        printf(\"\\n\");\n        Start = Start-&gt;Next;\n    }\n\n    return 0;\n}\n\nvoid InsertEntry(struct Entry *InsertPosition, struct Entry *EntryToInsert)\n{\n    EntryToInsert-&gt;Previous = InsertPosition-&gt;Previous;\n    EntryToInsert-&gt;Next = InsertPosition;\n    if (InsertPosition-&gt;Previous != NULL)\n    {\n        InsertPosition-&gt;Previous-&gt;Next = EntryToInsert;\n    }\n    InsertPosition-&gt;Previous = EntryToInsert;\n\n}\n\nvoid RemoveEntry(struct Entry *EntryToRemove)\n{\n    if (EntryToRemove-&gt;Previous != NULL)\n    {\n        EntryToRemove-&gt;Previous-&gt;Next = EntryToRemove-&gt;Next;\n    }\n    if (EntryToRemove-&gt;Next != NULL)\n    {\n        EntryToRemove-&gt;Next-&gt;Previous = EntryToRemove-&gt;Previous;\n    }\n    EntryToRemove-&gt;Previous = NULL;\n    EntryToRemove-&gt;Next = NULL;\n}\n</code></pre>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["c", "arduino", "interrupt", "firmware"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1469661997, "post_id": 38623906, "comment_id": 64634984, "body": "How fast is this processor and how much code is in the interrupt handler? You might only be able to execute a handful of instructions in 10us - in which case the solution is &quot;do less stuff or get a faster processor&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6646936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZlrkFb_Ziqs/AAAAAAAAAAI/AAAAAAAAABY/oWdFn3_s3kk/photo.jpg?sz=128", "display_name": "Yifan Xing", "link": "https://stackoverflow.com/users/6646936/yifan-xing"}, "edited": false, "score": 0, "creation_date": 1469731198, "post_id": 38624808, "comment_id": 64671641, "body": "I tried to increase frequency to 31khz, but for some reason it doesnt work, any idea why?          int myEraser=7;              TCCR3B &amp;=~myEraser;         int myPrescaler=1;           TCCR3B |= myPrescaler;"}], "tags": [], "owner": {"reputation": 21, "user_id": 6570155, "user_type": "registered", "profile_image": "https://graph.facebook.com/1178270925573486/picture?type=large", "display_name": "Michael Yu", "link": "https://stackoverflow.com/users/6570155/michael-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1469662322, "creation_date": 1469662322, "answer_id": 38624808, "question_id": 38623906, "link": "https://stackoverflow.com/questions/38623906/interrupt-in-arduino/38624808#38624808", "title": "Interrupt in Arduino", "body": "<p>note that Ardunio board can not run that fast. For example, for analogRead, it takes about 100 microseconds to read an analog input (see : <a href=\"https://www.arduino.cc/en/Reference/AnalogRead\" rel=\"nofollow\">https://www.arduino.cc/en/Reference/AnalogRead</a>). For analogWrite, it generate a wave of approximately 490 Hz (2ms). And there may be more delays from other parts of the code that you did not show here.</p>\n"}, {"tags": [], "owner": {"reputation": 3127, "user_id": 729807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0a5932698c1775bf8d54e46478b6d6?s=128&d=identicon&r=PG", "display_name": "crlanglois", "link": "https://stackoverflow.com/users/729807/crlanglois"}, "is_accepted": false, "score": 0, "last_activity_date": 1470244796, "creation_date": 1470244796, "answer_id": 38750005, "question_id": 38623906, "link": "https://stackoverflow.com/questions/38623906/interrupt-in-arduino/38750005#38750005", "title": "Interrupt in Arduino", "body": "<p>In general it is best not to do much work in an interrupt, you didn't show your interrupt code here but with a 10uS rate you can't really do much anyway.  Which board are you using?  One solution might be to set a flag in your interrupt and then process the interrupt in your main loop but the fact remains that if the work you need to do every 10uS exceeds what your processor can accomplish in that time something needs to give.  Think about what part of your code should be deferred in the case of a timing conflict and structure your code that way, interrupts take priority over everything else.</p>\n"}], "owner": {"reputation": 21, "user_id": 6646936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZlrkFb_Ziqs/AAAAAAAAAAI/AAAAAAAAABY/oWdFn3_s3kk/photo.jpg?sz=128", "display_name": "Yifan Xing", "link": "https://stackoverflow.com/users/6646936/yifan-xing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1470244796, "creation_date": 1469656776, "question_id": 38623906, "link": "https://stackoverflow.com/questions/38623906/interrupt-in-arduino", "title": "Interrupt in Arduino", "body": "<p>I am working on a firmware code, I set interrupt time to 10us but now the loop is running every 5ms, which is much much slower. Any idea on how to speed up the loop is highly appreciate!</p>\n\n<pre><code>unsigned long lastTime;\ndouble BAT_I_FB, Output, Setpoint= 8 ;\ndouble errSum=0, lastErr,error=99;\ndouble kp=0.1, ki=15, kd=0;\ndouble KdVal,KpVal,KiVal,PID,BUS_V;\ndouble SampleTime = 10;\n\nvoid loop() {\n\nunsigned long now = micros();\n\nint timeChange = (now-lastTime);\n\nif(timeChange &gt;= SampleTime)\n{\n/*Compute all the working error variables*/\nBAT_I_FB = analogRead(pins[15].arduinoPinNumber);\nBAT_I_FB = float(BAT_I_FB * (5.0/1024)) * pins[15].multiplier;\n\n\nerror = Setpoint - BAT_I_FB;\nerrSum += error;\ndouble dErr = (error - lastErr);\n\nBUS_V = analogRead(pins[18].arduinoPinNumber);\nBUS_V = float(BUS_V * (5.0/1024)) * pins[18].multiplier;\n\n/*compute PID Output*/\n\nPID = kp * error +ki/10000 * errSum + kd * 1000 * dErr;\n\nOutput = (PID-100) * (-2.5);\n\nanalogWrite(2, Output);\n\n\n/*Remember some variable for next time*/\nlastErr = error;\nlastTime = now;\n\n}\n</code></pre>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469655850, "post_id": 38623690, "comment_id": 64633027, "body": "Check the <code>dataType</code> in order to know what kind of data you are getting.."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469656067, "post_id": 38623690, "comment_id": 64633135, "body": "dataType is 4, witch, I believe, stands for DWORD because I have a DWORD value in the registry subkey."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1469656092, "post_id": 38623690, "comment_id": 64633142, "body": "So why are you printing it as a string?"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1469656232, "post_id": 38623690, "comment_id": 64633200, "body": "Cool. Can you tell me what mistakes I have, so I can correct them? I&#39;m just trying to learn."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469656454, "post_id": 38623690, "comment_id": 64633307, "body": "@EugeneSh. If I print it with the %li (I think that&#39;s the right one) It shows me a value like 7338968. I know I have mistakes, that&#39;s why I am asking for help."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469656490, "post_id": 38623690, "comment_id": 64633319, "body": "It&#39;s a pointer. You have to dereference it before printing"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1469656566, "post_id": 38623690, "comment_id": 64633356, "body": "I tried that, but VS says &quot;Incomplete type is not allowed&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1469656641, "post_id": 38623690, "comment_id": 64633388, "body": "Because it is <code>void</code>. Cast it! I think you should start with simpler programs."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1469665528, "post_id": 38624187, "comment_id": 64635819, "body": "Um, the whole point of using <code>RegGetValue()</code> vs <code>RegQueryValueEx()</code> is that <code>RegGetValue()</code> null-terminates string data for you if it is not already null-terminated. You <i>do not</i> need to do it manually, like your example is doing (incorrectly, I might add).  And string data can be longer than 255 characters, <code>RegGetValue()</code> will fail if you try to read a value that is longer than your allocated buffer."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1469666297, "post_id": 38624187, "comment_id": 64635954, "body": "@RemyLebeau- yes, you right - when using RegGetValue not need check for 0 at the end. about data can be longer then 255(or any fixed size) - of course yes. but i simply minimal modify initial code, not try write perfect"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1469666637, "post_id": 38624187, "comment_id": 64636010, "body": "@Checho i little edit code for remove extra check for null-terminated string in case REG_SZ"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1469711572, "post_id": 38624187, "comment_id": 64657860, "body": "@RbMm: Thank you very much. I apologize for any bother. Have a last one question: why can&#39;t I use malloc to create the dataType variable pointer?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1469712337, "post_id": 38624187, "comment_id": 64658528, "body": "@Checho you of course can use malloc for allocate pkOpenResult, dataType. but why ?!? this is absolute senseless. also if you looking on your initial code - you not free dataType, call free for pkOpenResult from 3 place, when enough from one. you not check result of malloc. but main again : for what call  LPDWORD dataType = (LPDWORD)malloc(sizeof(DWORD)); use *dataType and finally free(dataType) when can simply use DWORD dataType; ?"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1469713377, "post_id": 38624187, "comment_id": 64659392, "body": "That was I wanted to know. I was using malloc just to see if it worked. Thanks again."}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 1, "last_activity_date": 1469666482, "last_edit_date": 1469666482, "creation_date": 1469658320, "answer_id": 38624187, "question_id": 38623690, "link": "https://stackoverflow.com/questions/38623690/showing-values-data-with-reggetvalue/38624187#38624187", "title": "Showing value&#39;s data with RegGetValue", "body": "<p>you must select wprintf format (%x, %s, ..) based on dataType</p>\n\n<blockquote>\n  <p>Can you tell me what mistakes I have, so I can correct them? I'm just\n  trying to learn</p>\n</blockquote>\n\n<p>try for begin code like this:</p>\n\n<pre><code>int wmain()\n{\n    HKEY hKey = HKEY_CURRENT_USER;\n    LPCWSTR subKey = L\"WinSide\\\\Config\";\n    DWORD options = 0;\n    REGSAM samDesired = KEY_READ;// | KEY_WRITE - need ?;\n\n    HKEY OpenResult;\n\n    LPCWSTR pValue = L\"MyValue\";\n    DWORD flags = RRF_RT_ANY;\n\n    //Allocationg memory for a DWORD value.\n    DWORD dataType;\n\n    WCHAR value[255];\n    PVOID pvData = value;\n\n    DWORD size = sizeof(value);// not 8192;\n\n    LONG err = RegOpenKeyEx(hKey, subKey, options, samDesired, &amp;OpenResult);\n\n    if (err != ERROR_SUCCESS)\n    {\n        wprintf(L\"The %s subkey could not be opened. Error code: %x\\n\", subKey, err);\n    }\n    else\n    {\n        wprintf(L\"Subkey opened!\\n\");\n        err = RegGetValue(OpenResult, NULL, pValue, flags, &amp;dataType, pvData, &amp;size);\n\n        if (err != ERROR_SUCCESS)\n        {\n            wprintf(L\"Error getting value. Code: %x\\n\", err);\n        }\n        else\n        {\n            switch (dataType)\n            {\n            case REG_DWORD:\n                wprintf(L\"Value data: %x\\n\", *(DWORD*)pvData);\n                break;\n            case REG_SZ:\n                //if ( !*((PWSTR)((PBYTE)pvData + size)-1) )\n                wprintf(L\"Value data: %s\\n\", (PWSTR)pvData);\n                break;\n                //...\n            }\n        }\n        RegCloseKey(OpenResult);// don't forget !\n    }\n\n    return err;   \n}\n</code></pre>\n\n<p>size != 8192; </p>\n\n<p>RegCloseKey - where ? </p>\n\n<pre><code>   //Allocationg memory for a DWORD value.\n    LPDWORD dataType = (LPDWORD)malloc(sizeof(DWORD));\n</code></pre>\n\n<p>horror</p>\n"}], "owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3888, "favorite_count": 0, "accepted_answer_id": 38624187, "answer_count": 1, "score": 2, "last_activity_date": 1469666482, "creation_date": 1469655747, "question_id": 38623690, "link": "https://stackoverflow.com/questions/38623690/showing-values-data-with-reggetvalue", "title": "Showing value&#39;s data with RegGetValue", "body": "<p>I am trying to understand how to use the PVOID data type in the WinApi, so I tried to show a value called MyValue (it is a DWORD value) using RegGetValue function, but It did not work for me. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>int wmain()\n{\n    LONG openKey;\n    HKEY hKey = HKEY_CURRENT_USER;\n    LPCWSTR subKey = L\"WinSide\\\\Config\";\n    DWORD options = 0;\n    REGSAM samDesired = KEY_READ | KEY_WRITE;\n\n    //Allocating memory for a HKEy value.\n    PHKEY pkOpenResult = (PHKEY)malloc(sizeof(HKEY));\n\n    //GetValue\n    LONG getValue;\n    LPCWSTR pValue = L\"MyValue\";\n    DWORD flags = RRF_RT_ANY;\n\n    //Allocationg memory for a DWORD value.\n    LPDWORD dataType = (LPDWORD)malloc(sizeof(DWORD));\n\n    WCHAR value[255];\n\n    PVOID pvData = (PVOID)value; //No idea if this is the rigth way.\n    DWORD size = 8192;\n    LPDWORD pcbData = &amp;size;\n\n    openKey = RegOpenKeyEx(hKey, subKey, options,\n                            samDesired, pkOpenResult);\n\n    if (openKey != ERROR_SUCCESS)\n    {\n        wprintf(L\"The %s subkey could not be opened. Error code: %li\\n\", subKey, openKey);\n        free(pkOpenResult);\n    }\n    else\n    {\n        wprintf(L\"Subkey opened!\\n\");\n        getValue = RegGetValue(*pkOpenResult, NULL, pValue, flags, dataType, pvData, pcbData);\n\n        if (getValue != ERROR_SUCCESS)\n        {\n            wprintf(L\"Error getting value. Code: %li\\n\", getValue);\n            free(pkOpenResult);\n        }\n        else\n        {\n            wprintf(L\"Value data: %s\\n\", pvData);\n            free(pkOpenResult);\n        }\n    }\n\n\n    return 0;   \n\n}\n</code></pre>\n\n<p>This is what the command prompt shows:</p>\n\n<blockquote>\n  <p>Subkey opened! Value data: ?</p>\n</blockquote>\n\n<p>No idea how I should declare and use the pvData value to show the rigth content. </p>\n\n<p>Can you help me? </p>\n\n<p>There were another similar posts, but I did not understand their code, so decided to show my own.</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c", "distance", "zlib", "string-length", "lz77"], "answers": [{"tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1469750837, "last_edit_date": 1469750837, "creation_date": 1469678401, "answer_id": 38626875, "question_id": 38623383, "link": "https://stackoverflow.com/questions/38623383/how-to-get-distance-length-pairs-from-zlib-compressor/38626875#38626875", "title": "how to get &lt;distance, length&gt; pairs from ZLIB compressor", "body": "<p>You can use <a href=\"https://github.com/madler/infgen\" rel=\"nofollow\">infgen</a> to disassemble a deflate stream. It will print the decoded symbols in a readable form, e.g. <code>match 41 105</code> indicating a string to copy of length 41, from a distance back of 105.</p>\n"}], "owner": {"reputation": 167, "user_id": 5217161, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/55647946bf7734d5da62c0a25196a9ec?s=128&d=identicon&r=PG&f=1", "display_name": "A. Arpi", "link": "https://stackoverflow.com/users/5217161/a-arpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 38626875, "answer_count": 1, "score": -1, "last_activity_date": 1469750837, "creation_date": 1469654420, "question_id": 38623383, "link": "https://stackoverflow.com/questions/38623383/how-to-get-distance-length-pairs-from-zlib-compressor", "title": "how to get &lt;distance, length&gt; pairs from ZLIB compressor", "body": "<p>I am compressing several long strings using ZLIB, which uses LZ77  representations of repeated substrings prior to encoding these representations using a Huffman tree.  I am interested in studying the sequence of  integer tuple representations themselves, and have been looking in the code to figure out where these are generated and how I could print them out one after another.  Unfortunately, I am not very strong in C, and it seems that the compressor handles distances as pointers, and not as ints.  Could somebody please tell me if there is a simple way to print out the sequence of  tuples as the algorithm runs, and point me to the appropriate location in the code. </p>\n"}, {"tags": ["c", "oop"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469654403, "post_id": 38623347, "comment_id": 64632351, "body": "C does not have built-in support for object-oriented programming or inheritance. You can try to follow similar design patterns anyway, and it is sometimes a good idea to do so, but you&#39;re not going to see answers like &quot;here&#39;s how to make one struct inherit from another&quot; or &quot;here&#39;s how to define a method&quot;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1469654492, "post_id": 38623347, "comment_id": 64632399, "body": "You will end up writing a C++ clone, but not as good. Use the right language for the job."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469655470, "post_id": 38623347, "comment_id": 64632847, "body": "Do some research on the gcc extension <code>-fplan9-extensions</code> plus anonymous <code>struct</code> members. They are very interesting if you are not stuck with standard C."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1469664450, "post_id": 38623347, "comment_id": 64635594, "body": "For an excellent article/tutorial on incomplete datatypes, encapsulation, data-hiding, dynamic linkage/late binding, opaque pointers and object oriented approaches to dynamic data-structures, see <a href=\"http://www.cs.rit.edu/~ats/books/ooc.pdf\" rel=\"nofollow noreferrer\"><b>Object Oriented Programming in ANSI-C</b></a>."}, {"owner": {"reputation": 1, "user_id": 6604656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e7a6a868a12bc990eaca1b8955b455?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6604656/meh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1469722911, "post_id": 38623347, "comment_id": 64666769, "body": "@WeatherVane I understand that, I&#39;m not really writing an entire OOP program in C. I think I wrote my question wrong, I was more interested in dynamically dispatching methods but I think I&#39;ve figured it out now."}], "owner": {"reputation": 1, "user_id": 6604656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e7a6a868a12bc990eaca1b8955b455?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6604656/meh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1469654905, "answer_count": 0, "score": 0, "last_activity_date": 1469654276, "creation_date": 1469654276, "question_id": 38623347, "link": "https://stackoverflow.com/questions/38623347/writing-object-oriented-code-in-c", "closed_reason": "Duplicate", "title": "Writing object oriented code in C", "body": "<p>Kind of confused as to how I should implement a simple entity hierarchy in OOP style C. For example, here's the equivalent C++ code:</p>\n\n<pre><code>class Entity {\nprotected:\n    float x, y;\n\n    Entity(float x, float y) : x(x), y(y) { }\n\n    virtual void update() = 0;\n    virtual void render() = 0;\n    virtual ~Entity() { }\n};\n\nclass Player : public Entity {\n    Player(float x, float y) : Entity(x, y) { } \n\n    void update() {\n\n    }\n\n    void render() {\n\n    }\n};\n</code></pre>\n\n<p>So right now I have a structure Entity that has two function pointers that will point to the update and render functions. Then I would have a Player structure which would have a pointer to the Entity structure so it can access the members. \nOne thing I'm kind of confused about is how allocation would work... would I have a new_entity function perhaps that allocates an Entity structure? Could I have a new_player function that allocates an Entity ptr, and returns the Player structure, and will set the functions to point to the player_update, play_render functions, etc?</p>\n"}, {"tags": ["c", "unix", "system-calls", "memset", "shellforge"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469653786, "post_id": 38623172, "comment_id": 64632017, "body": "Missing <code>#include &lt;string.h&gt;</code>"}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "edited": false, "score": 0, "creation_date": 1469653810, "post_id": 38623172, "comment_id": 64632035, "body": "include the string.h header file."}, {"owner": {"reputation": 325, "user_id": 4133231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i7ncS.jpg?s=128&g=1", "display_name": "Daniel Margosian", "link": "https://stackoverflow.com/users/4133231/daniel-margosian"}, "edited": false, "score": 1, "creation_date": 1469654102, "post_id": 38623172, "comment_id": 64632186, "body": "Why? OP doesn&#39;t include <code>memset</code> in his code. Regardless, OP doesn&#39;t have the include for <code>write</code> and <code>read</code>. Why would gcc not return an error for this? Why would shellforge then return an error for memset, but not this?"}, {"owner": {"reputation": 89, "user_id": 6641734, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/670776c9613b916ea6f48254312dbfc7?s=128&d=identicon&r=PG&f=1", "display_name": "surendra", "link": "https://stackoverflow.com/users/6641734/surendra"}, "edited": false, "score": 0, "creation_date": 1469654564, "post_id": 38623172, "comment_id": 64632432, "body": "adding string.h is giving other errors nw file:///home/ubuntu/Desktop/Screenshot%20(789).png"}, {"owner": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 0, "creation_date": 1469654709, "post_id": 38623172, "comment_id": 64632505, "body": "gcc is not required to issue errors for calling functions before declaring them for compatibility reasons to pre C89 code. If you use a function before declaring them, it assumes the function returns int and infers the types of the arguments based on the call. See <a href=\"http://stackoverflow.com/a/2575186/3914029\">stackoverflow.com/a/2575186/3914029</a>"}, {"owner": {"reputation": 89, "user_id": 6641734, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/670776c9613b916ea6f48254312dbfc7?s=128&d=identicon&r=PG&f=1", "display_name": "surendra", "link": "https://stackoverflow.com/users/6641734/surendra"}, "edited": false, "score": 0, "creation_date": 1469654815, "post_id": 38623172, "comment_id": 64632556, "body": "yes it works fine when I execute it using gcc but it gives error only when i am trying to execute it using shellforge"}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 1, "creation_date": 1469654954, "post_id": 38623172, "comment_id": 64632618, "body": "Which version of shellforge are you using? depending on the sflib version you&#39;re using, the memset() may be implicitly called under the system call wrappers defined in the shellforge include headers."}, {"owner": {"reputation": 89, "user_id": 6641734, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/670776c9613b916ea6f48254312dbfc7?s=128&d=identicon&r=PG&f=1", "display_name": "surendra", "link": "https://stackoverflow.com/users/6641734/surendra"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1469655292, "post_id": 38623172, "comment_id": 64632770, "body": "@threadp I am using v4"}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469661896, "post_id": 38623544, "comment_id": 64634953, "body": "Did this actually fix the issue?"}, {"owner": {"reputation": 89, "user_id": 6641734, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/670776c9613b916ea6f48254312dbfc7?s=128&d=identicon&r=PG&f=1", "display_name": "surendra", "link": "https://stackoverflow.com/users/6641734/surendra"}, "edited": false, "score": 0, "creation_date": 1469688325, "post_id": 38623544, "comment_id": 64642061, "body": "this anser indeed gave me hint and i have also added answer about what changes I had done."}], "tags": [], "owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "is_accepted": true, "score": 3, "last_activity_date": 1469655179, "creation_date": 1469655179, "answer_id": 38623544, "question_id": 38623172, "link": "https://stackoverflow.com/questions/38623172/undefined-reference-to-memset/38623544#38623544", "title": "Undefined reference to memset", "body": "<p>include <code>&lt;string.h&gt;</code>; <code>memset()</code> is usually a macro and not a symbol in the standard libraries.</p>\n\n<p>EDIT: although not called explicitly, the compiler might call it for <code>char user_name[IDLEN]=\"\";</code> and the other string variables.</p>\n\n<p>You should compile with '-W -Wall' to detect such issues.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 6641734, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/670776c9613b916ea6f48254312dbfc7?s=128&d=identicon&r=PG&f=1", "display_name": "surendra", "link": "https://stackoverflow.com/users/6641734/surendra"}, "is_accepted": false, "score": 1, "last_activity_date": 1469656695, "creation_date": 1469656695, "answer_id": 38623888, "question_id": 38623172, "link": "https://stackoverflow.com/questions/38623172/undefined-reference-to-memset/38623888#38623888", "title": "Undefined reference to memset", "body": "<p>I modified my code from</p>\n\n<pre><code>char user_name[IDLEN]=\"\";\nchar pass1[IDLEN]=\"\";\nchar pass2[IDLEN]=\"\";\n</code></pre>\n\n<p>to</p>\n\n<pre><code>char user_name[IDLEN];\nchar pass1[IDLEN];\nchar pass2[IDLEN];\n</code></pre>\n\n<p>and it worked like a charm! :)</p>\n"}], "owner": {"reputation": 89, "user_id": 6641734, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/670776c9613b916ea6f48254312dbfc7?s=128&d=identicon&r=PG&f=1", "display_name": "surendra", "link": "https://stackoverflow.com/users/6641734/surendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8398, "favorite_count": 0, "accepted_answer_id": 38623544, "answer_count": 2, "score": 2, "last_activity_date": 1469656695, "creation_date": 1469653519, "question_id": 38623172, "link": "https://stackoverflow.com/questions/38623172/undefined-reference-to-memset", "title": "Undefined reference to memset", "body": "<p>I wrote simple c program using system call and it worked fine when I compiled it with gcc. But when I tried to generate shell code (shellforge) using command</p>\n\n<pre><code>./sf.py username.c\n</code></pre>\n\n<p>I got error stating</p>\n\n<pre><code>Undefined reference to memset\n</code></pre>\n\n<p>How to resolve this? Here is my code</p>\n\n<pre><code>#define O_CREAT     0100\n#define O_WRONLY    01\n#define O_APPEND    02000\n#define IDLEN 100\nint main(void)\n{\n    char user_name[IDLEN]=\"\";\n    char pass1[IDLEN]=\"\";\n    char pass2[IDLEN]=\"\";\n    int fd,a,b,c;\n\n    //to give user direction\n    char user[]=\"Please type your username and hit enter:\\n\";\n    char p1[]=\"Please type password and hit enter:\\n\";\n    char p2[]=\"Please type password and hit enter:\\n\";\n\n    write(1,user,sizeof(user));\n    a=read(0,user_name,IDLEN);\n    user_name[a-1]='\\0';\n    while(1)\n    {\n        write(1,p1,sizeof(p1));\n        b=read(0,pass1,IDLEN);\n        pass1[b-1]='\\0';\n        write(1,p2,sizeof(p2));\n        c=read(0,pass2,IDLEN);\n        pass2[c-1]='\\0';\n\n        int temp=0;\n        while(pass1[temp] == pass2[temp])\n        {\n            if(pass1[temp] == '\\0' || pass2[temp] == '\\0')\n            {\n                break;\n            }\n            temp++;\n        }\n        if(pass1[temp] == '\\0' &amp;&amp; pass2[temp] == '\\0')\n        {\n            break;\n        }else{\n            char error[] = \"password does not match! please type your password again\";\n            write(1,error,sizeof(error));\n        }\n    }\n\n    fd = open(\"user.txt\",O_CREAT|O_WRONLY|O_APPEND,0666);\n    if(fd&lt;0)\n    {\n        return 1;\n    }\n\n    char file_user[]=\"\\nUsername:\";\n    char file_pass[]=\"\\nPassword:\";\n    write(fd,file_user,sizeof(file_user)-1);\n    write(fd,user_name,a-1);\n    write(fd,file_pass,sizeof(file_pass)-1);\n    write(fd,pass1,b-1);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user820304"}, "edited": false, "score": 2, "creation_date": 1469653327, "post_id": 38623084, "comment_id": 64631796, "body": "<code>I&#39;m not stupid enough to try, but I am very curious.</code> - Just try it. This does not replace a proper answer, but you&#39;re not going to cause any harm outside of your application if you&#39;re running on any major OS."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1469653332, "post_id": 38623084, "comment_id": 64631802, "body": "Yes, pointers are no more than just value containers, it will just flip. Your second line in the while body has a 100% UB chance though."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 4, "creation_date": 1469653358, "post_id": 38623084, "comment_id": 64631810, "body": "Undefined behavior ahoy"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1469653445, "post_id": 38623084, "comment_id": 64631850, "body": "&quot;I&#39;m not stupid enough to try, but I am very curious.&quot; This is what are VMs for! Just imagine the possibilities of having a computer simulated in which you can do <i>anything</i>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1469655016, "post_id": 38623084, "comment_id": 64632640, "body": "Go for it. Experimenting wildly with virtual memory has never killed anybody (Except for processes. Processes do tend to get killed when you scribble in inappropriate memory spots)"}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 6, "creation_date": 1469653920, "post_id": 38623158, "comment_id": 64632088, "body": "You are absolutely allowed to have a pointer point past an object."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1469654107, "post_id": 38623158, "comment_id": 64632188, "body": "@EOF Though more specifically only &quot;just&quot; past (the end of) an object."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1469654223, "post_id": 38623158, "comment_id": 64632250, "body": "@EOF: Quite right. My wording was clumsy to the point of being incorrect. I&#39;ve fixed it."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 10, "last_activity_date": 1482262893, "last_edit_date": 1482262893, "creation_date": 1469653454, "answer_id": 38623158, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623158#38623158", "title": "What happens when a pointer is too big?", "body": "<p>Undefined behavior.</p>\n\n<p>In fact, incrementing a pointer so it points to a location more than one element past the end of the object to which it originally pointed causes undefined behavior. (You're permitted to construct a pointer just past the end of an object, but not beyond that.) (The object in question is an array, with a non-array object being treated as an array with one element.)</p>\n\n<p>Which means that the language standard says nothing about what can happen.  It might \"work\", it might crash your program, it might result in any symptom that your program is capable of producing.</p>\n\n<p>In practice, the behavior is likely to vary from one system to another. It's likely that incrementing a pointer will do the same thing as incrementing an unsigned integer: update the value without causing any visible problems. If you try to dereference the pointer, the results depend on how your system manages memory.</p>\n\n<p>Bottom line: Undefined behavior is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1469653854, "last_edit_date": 1469653854, "creation_date": 1469653503, "answer_id": 38623169, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623169#38623169", "title": "What happens when a pointer is too big?", "body": "<p>Pointers are only valid to an object or \"1 pass\".</p>\n\n<pre><code>int x;\nint *p = &amp;x;\np++;\np++; // invalid\nint y[5];\np = &amp;y[4];\np = &amp;y[5];\np = &amp;y[6]; // invalid\n</code></pre>\n\n<p>Pointers may be assigned a null pointer value;</p>\n\n<pre><code>p = NULL;\n</code></pre>\n\n<p>Pointers can refer to a funciton.</p>\n\n<p>That's it.  Assigning a pointer to some other value is <strong>undefined behavior (UB)</strong> such as:</p>\n\n<pre><code>int* ptr = 0;\nptr += 1;  // UB  (NULL is not a pointer to a valid object, so \"1 pass\" is UB)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 2, "last_activity_date": 1469688333, "last_edit_date": 1469688333, "creation_date": 1469653595, "answer_id": 38623192, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623192#38623192", "title": "What happens when a pointer is too big?", "body": "<p>Accessing memory outside of what is allocated to you (by <code>new</code> or <code>malloc</code> etc.) is <em>undefined behavior</em> in C++, so don't expect anything to go well. </p>\n\n<p>In practice, incrementing a pointer outside of the physical limits is defined by the platform, for most platforms, it will eventually roll over; accessing it may result in a crash. </p>\n\n<p>For most modern OSes, attempting to read or write memory outside of what the process is allocated with result in an access violation or segmentation fault. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1469653942, "creation_date": 1469653942, "answer_id": 38623272, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623272#38623272", "title": "What happens when a pointer is too big?", "body": "<p>The C/C++ language is not defined for an existing system/machine, but an abstract black box (although it does not ignore reality). You are asking for undefined behavior (some existing systems/machines may do what you expect)</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1469654517, "creation_date": 1469654517, "answer_id": 38623411, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623411#38623411", "title": "What happens when a pointer is too big?", "body": "<p>On the common systems I'm aware of (which would be mainly/solely my system), pointers behave very much like <code>unsigned long</code>s:</p>\n\n<pre><code>int main(){\n    char* p = NULL;\n    printf(\"%p\\n\", p);\n    printf(\"%p\\n\", --p);\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>(nil)\n0xffffffffffffffff\n</code></pre>\n\n<p>But I guess all kinds of exotic stuff could happen, theoretically.</p>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 5962153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1d4c3412633b6f7d195a473f807ce6?s=128&d=identicon&r=PG&f=1", "display_name": "user5962153", "link": "https://stackoverflow.com/users/5962153/user5962153"}, "is_accepted": false, "score": 0, "last_activity_date": 1469660458, "creation_date": 1469660458, "answer_id": 38624553, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38624553#38624553", "title": "What happens when a pointer is too big?", "body": "<p>IMO, your pointer won't have any problem, there's nothing to happened if you just save the pointer, but when you try to dereference/access it i'm sure your code would ended up in access violation and crash your program.\nor if it's a valid pointer, it would modify something else data, possibly modified another variable content tho'</p>\n"}], "owner": {"reputation": 197, "user_id": 1748198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/T9CpJ.jpg?s=128&g=1", "display_name": "Timothy Eckstein", "link": "https://stackoverflow.com/users/1748198/timothy-eckstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 38623158, "answer_count": 6, "score": 2, "last_activity_date": 1482262893, "creation_date": 1469653204, "last_edit_date": 1469654618, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big", "title": "What happens when a pointer is too big?", "body": "<p>What happens, in C++ or C, if a pointer is set to a value so high that it goes out of the bounds of memory? Here's some code that would do such a thing:</p>\n\n<pre><code>int* ptr = 0;\nwhile (true) {\n    ptr += 1; // eventually this will go out of bounds of the memory ... unless there is an overflow.\n    *ptr = 10; // just give it a value, why not?\n}\n</code></pre>\n\n<p>What happens? Does the pointer -- when it gets out of the bounds of, let's say a 16 byte memory -- just flip from 0xF to 0x0? Does it keep counting up and the <code>*ptr = 10;</code> line crashes the computer?</p>\n\n<p>I'm not stupid enough to try, but I am very curious.</p>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "edited": false, "score": 0, "creation_date": 1469651185, "post_id": 38622559, "comment_id": 64630729, "body": "and I know this is related to <a href=\"http://stackoverflow.com/questions/5048112/use-gdb-to-debug-a-c-program-called-from-a-shell-script\">this</a> topic, but it didn&#39;t solve my problem"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1469651205, "post_id": 38622559, "comment_id": 64630740, "body": "Don&#39;t you need to pass gdb the name of the executable, not the object file?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1469651321, "post_id": 38622559, "comment_id": 64630802, "body": "@immibis Or just <code>gdb -p [pid]</code>"}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "edited": false, "score": 0, "creation_date": 1469651333, "post_id": 38622559, "comment_id": 64630805, "body": "It won&#39;t recognize my executable file: <code>not in executable format: File format not recognized</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469651388, "post_id": 38622559, "comment_id": 64630833, "body": "@afsafzal What commands did you run?"}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469651502, "post_id": 38622559, "comment_id": 64630886, "body": "if I do what @EOF said this happens: <code>(gdb) break median.c:10 No source file named median.c. Make breakpoint pending on future shared library load? (y or [n]) y Breakpoint 1 (median.c_trans.c:10) pending.</code> And it won&#39;t stop on the breakpoint"}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469651611, "post_id": 38622559, "comment_id": 64630940, "body": "@immibis <code>$gdb test-median.sh 27944</code> and then it will give me the error I mentioned"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469651656, "post_id": 38622559, "comment_id": 64630977, "body": "@afsafzal That&#39;s probably because <code>test-median.sh</code> is not the executable that&#39;s running, it&#39;s a shell script."}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469651750, "post_id": 38622559, "comment_id": 64631021, "body": "@immibis yes, and inside it it is executing <code>.&#47;median.o &lt; test</code>, that&#39;s why I tried <code>gdb median.o 27944</code> first."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469651812, "post_id": 38622559, "comment_id": 64631042, "body": "Okay. I was just asking because usually files with names ending in <code>.o</code> are object files ."}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469652014, "post_id": 38622559, "comment_id": 64631141, "body": "@immibis oh no, that&#39;s the executable file :)"}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 0, "creation_date": 1469668573, "post_id": 38622559, "comment_id": 64636366, "body": "@afsafzal While it might seem obvious with <a href=\"http://stackoverflow.com/users/3185968/eof\">EOF&#39;s</a> suggestion with <code>gdb -p [pid]</code>, you didn&#39;t include this information in your question so it is worth the shot.  Did you compile with the <code>-g</code> flag when using <code>gcc</code>?  I think it should be very feasible to attach the debugger to the process."}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "reply_to_user": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 0, "creation_date": 1469714476, "post_id": 38622559, "comment_id": 64660327, "body": "@iRove I updated my question."}], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "edited": false, "score": 0, "creation_date": 1469718157, "post_id": 38639565, "comment_id": 64663299, "body": "Thanks Tom. this is helpful. Modifying the source code is not an option here, so I cannot add a <code>sleep()</code> to <code>main</code>. The second suggestion seems more interesting. I tried it and it seems that gdb is attached to the child process but it sticks there, even if I don&#39;t set any breakpoints: <code>(gdb) run Starting program: &#47;bin&#47;sh test-median.sh [New process 28576] Reading symbols from &#47;usr&#47;lib&#47;debug&#47;lib&#47;x86_64-linux-gnu&#47;libc-2.19.so...done. Reading symbols from &#47;usr&#47;lib&#47;debug&#47;lib&#47;x86_64-linux-gnu&#47;ld-2.19.so...done.</code>"}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "edited": false, "score": 0, "creation_date": 1469719006, "post_id": 38639565, "comment_id": 64663926, "body": "I finally found a way to make it work. So in addition to what Tom suggested, I needed to switch inferior and send commands from <code>gdb</code> to the child process."}, {"owner": {"reputation": 111, "user_id": 4498356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwtud.jpg?s=128&g=1", "display_name": "mwater", "link": "https://stackoverflow.com/users/4498356/mwater"}, "reply_to_user": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "edited": false, "score": 0, "creation_date": 1597390727, "post_id": 38639565, "comment_id": 112122487, "body": "@afsafzal could you elaborate on what you did? I seem to be stuck at the same place <code>(gdb) run</code> as you were in your first comment."}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 5, "last_activity_date": 1469716766, "creation_date": 1469716766, "answer_id": 38639565, "question_id": 38622559, "link": "https://stackoverflow.com/questions/38622559/how-to-set-breakpoint-in-gdb-when-attach-to-another-process/38639565#38639565", "title": "How to set breakpoint in gdb when attach to another process", "body": "<p>This is a classic problem that people have with gdb.  It's so common that you'd think it would have a handy name!</p>\n\n<p>There are a few solutions to the problem, some time-tested and some relatively more experimental.</p>\n\n<ul>\n<li><p>If the program to debug (in gdb lingo, \"the inferior\") is long-running -- for example, a GUI or a server of some kind -- then the simplest way is to just run the script, wait for the inferior to start, and then attach to it.  You can attach using the PID, either with <code>gdb -p PID</code> or using <code>attach PID</code> at the gdb prompt.</p></li>\n<li><p>If the program is short-lived, then another classic approach is to add a call to <code>sleep</code> early in the program's startup; say as the first line of <code>main</code>.  Then, continue with the <code>attach</code> plan.</p></li>\n</ul>\n\n<p>Those are the classic ways.  But now let's talk about the more fun stuff.</p>\n\n<p>gdb has a multi-inferior mode, where it can debug multiple processes at once.  This mode, IME, is still a bit fragile, but I've had some success with it.</p>\n\n<p>First you put gdb into the correct mode:</p>\n\n<pre><code>set detach-on-fork off\nset non-stop off\nset pagination off\n</code></pre>\n\n<p>(If you have an older gdb you will also need <code>set target-async on</code>).</p>\n\n<p>Now you can debug the <em>shell</em>, something like:</p>\n\n<pre><code>$ gdb --args /bin/sh /path/to/my/script\n(gdb) [... set the mode as above ...]\n(gdb) break some_function_in_my_inferior\n</code></pre>\n\n<p>Now <code>run</code> should start the script, and automatically attach gdb to each child process that's created; eventually stopping at the breakpoint.</p>\n\n<p>There's still one more way.  A long time ago, there was a kernel patch to add \"global breakpoints\", plus a gdb patch to work with this feature.  As far as I know, none of this was ever merged.  But, I wrote a variant in my <a href=\"https://github.com/tromey/gdb-helpers\" rel=\"noreferrer\">gdb helpers</a> project.</p>\n\n<p>There is a new command there called <code>preattach</code>.  What it does is use SystemTap to watch for an <code>exec</code> of a specified program; then it pauses this program while gdb attaches to it.</p>\n"}], "owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5198, "favorite_count": 1, "accepted_answer_id": 38639565, "answer_count": 1, "score": 3, "last_activity_date": 1469716766, "creation_date": 1469651099, "last_edit_date": 1469714452, "question_id": 38622559, "link": "https://stackoverflow.com/questions/38622559/how-to-set-breakpoint-in-gdb-when-attach-to-another-process", "title": "How to set breakpoint in gdb when attach to another process", "body": "<p>I have a C program which a really complicated script is written to run it. I need to debug this program using <code>gdb</code>. I have tried to run the script and attach gdb to it's process, but then I'm not able to set breakpoints that I need:</p>\n\n<pre><code>$ gdb median.o 27944\nGNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from median.o...done.\nAttaching to program: median.o, process 27944\nReading symbols from /lib64/ld-linux-x86-64.so.2...Reading symbols from /usr/lib/debug//lib/x86_64-linux-gnu/ld-2.19.so...done.\ndone.\nLoaded symbols for /lib64/ld-linux-x86-64.so.2\n0x00007fc376e9cbfa in ?? ()\n(gdb) break median.c:10\nCannot access memory at address 0x40059d\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>$gdb -p 28303\nGNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\".\nAttaching to process 28303\nReading symbols from /bin/dash...(no debugging symbols found)...done.\nReading symbols from /lib/x86_64-linux-gnu/libc.so.6...Reading symbols from /usr/lib/debug//lib/x86_64-linux-gnu/libc-2.19.so...done.\ndone.\nLoaded symbols for /lib/x86_64-linux-gnu/libc.so.6\nReading symbols from /lib64/ld-linux-x86-64.so.2...Reading symbols from /usr/lib/debug//lib/x86_64-linux-gnu/ld-2.19.so...done.\ndone.\nLoaded symbols for /lib64/ld-linux-x86-64.so.2\n0x00007fe918e50bfa in wait4 () at ../sysdeps/unix/syscall-template.S:81\n81  ../sysdeps/unix/syscall-template.S: No such file or directory.\n(gdb) break median.c:10\nNo source file named median.c.\nMake breakpoint pending on future shared library load? (y or [n]) y\nBreakpoint 1 (median.c:10) pending.\n(gdb) continue\nContinuing.\nPlease enter 3 numbers separated by spaces &gt; 6 is the median\n[Inferior 1 (process 28303) exited normally]\n</code></pre>\n\n<p>So it continues without stopping at the breakpoint. It is worth mentioning that if I call <code>run median.o &lt; input</code> from gdb itself, it works.</p>\n\n<p>How can I set breakpoints on a C program which is being run by a script?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "freeze"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469650855, "post_id": 38622481, "comment_id": 64630530, "body": "Probably not, but you could possibly do it yourself - set a flag to true before waiting and set it to false after waiting?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1469651032, "post_id": 38622481, "comment_id": 64630636, "body": "When you say &quot;resource&quot; do you mean a pthread lock/mutex, or something else?"}, {"owner": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1469651379, "post_id": 38622481, "comment_id": 64630826, "body": "@JeremyFriesner Yes, when I say &quot;resource&quot;, I mean a pthread mutex."}], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 2, "last_activity_date": 1469651517, "creation_date": 1469651517, "answer_id": 38622657, "question_id": 38622481, "link": "https://stackoverflow.com/questions/38622481/detect-waiting-threads-in-c-pthread/38622657#38622657", "title": "Detect waiting threads in C Pthread", "body": "<p>I'm probably really old-fashioned, but I say just instrument your code and measure it yourself.  For example, add something like the following code (temporarily) to your program, and do a search-and-replace to change all your program's pthread_mutex_lock() calls to instrumented_pthread_mutex_lock().</p>\n\n<p>Then run your program with stdout redirected to a file.  Afterwards, you can look in the file and see which threads were waiting a long time for which mutexes.</p>\n\n<p>(Note that the printf() calls will change the timing of your program somewhat, but for this purpose I don't think it will matter much)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/times.h&gt;\n\nstatic unsigned long long GetCurrentClockTimeMicroseconds()\n{\n   static clock_t _ticksPerSecond = 0;\n   if (_ticksPerSecond &lt;= 0) _ticksPerSecond = sysconf(_SC_CLK_TCK);\n\n   struct tms junk; clock_t newTicks = (clock_t) times(&amp;junk);\n   return ((((unsigned long long)newTicks)*(1000000))/_ticksPerSecond);\n}\n\nint instrumented_pthread_mutex_lock(pthread_mutex_t * mtx)\n{\n   unsigned long long beforeTime = GetCurrentClockTimeMicroseconds();\n   int ret = pthread_mutex_lock(mtx);\n   unsigned long long afterTime = GetCurrentClockTimeMicroseconds();\n\n   unsigned long long elapsedTime = (afterTime-beforeTime);\n   if (elapsedTime &gt; 1000)  // or whatever threshold you like; I'm using 1 millisecond here\n   {\n      printf(\"Thread %li took %llu microseconds to acquire mutex %p\\n\", (long int) pthread_self(), elapsedTime, mtx);\n   }\n   return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469651517, "creation_date": 1469650782, "question_id": 38622481, "link": "https://stackoverflow.com/questions/38622481/detect-waiting-threads-in-c-pthread", "title": "Detect waiting threads in C Pthread", "body": "<p>I have a thread pool with about 100 threads. During testing, when I introduce some anomalous conditions, the overall process becomes very slow. Once I make the things normal, the process becomes fast again. Therefore, all threads are running.</p>\n\n<p>I want to detect which threads get slow in particular. For this, I want to write another thread whose responsibility will be to keep an eye on other threads, and report periodically which of them is waiting for a resource to get released. Is there a way (in Pthread) I can find which threads are waiting for some resource to get released, i.e. which threads are \"hung\" -- if it is a right term to use?</p>\n\n<p>System: C, Pthread, Linux</p>\n\n<p>PS: Please mention in comments if you need any other details.</p>\n"}, {"tags": ["c", "gcc", "mingw"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469650859, "post_id": 38622424, "comment_id": 64630534, "body": "What does the <code>df</code> command show you? (I&#39;m assuming Git Bash provides <code>df</code>.)"}, {"owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469651065, "post_id": 38622424, "comment_id": 64630660, "body": "I can&#39;t add formatting to this comment. I will put that information in the main post."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1469651176, "post_id": 38622424, "comment_id": 64630724, "body": "Can you check your windows <code>%TEMP%</code> folder and the drive it is located on? if temporary drive is full, you can get this error too. Also try to add verbose flags to the linker with this switch and post the output: <code>-Wl,--verbose</code>"}, {"owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "edited": false, "score": 0, "creation_date": 1469651316, "post_id": 38622424, "comment_id": 64630800, "body": "Where is the %TEMP% folder? How do I find its location?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1469651339, "post_id": 38622424, "comment_id": 64630808, "body": "in a DOS command: type <code>echo %TEMP%</code>"}, {"owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "edited": false, "score": 0, "creation_date": 1469651499, "post_id": 38622424, "comment_id": 64630884, "body": "I deleted a 4K file in \\AppData\\Local\\Temp and got the same gcc error"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1469652834, "post_id": 38622424, "comment_id": 64631568, "body": "Did you check all permissions? You could also do a general disk check on top. What about all of the anti-virus software?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469653010, "post_id": 38622424, "comment_id": 64631650, "body": "A 4K file is practically nothing."}, {"owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "edited": false, "score": 0, "creation_date": 1469653968, "post_id": 38622424, "comment_id": 64632117, "body": "I deleted some .png files and still nothing"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1469654424, "post_id": 38622424, "comment_id": 64632358, "body": "try to add verbose flags to the linker with this switch and post the output: <code>gcc -o myexe.exe -Wl,--verbose</code>"}], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "is_accepted": true, "score": 0, "last_activity_date": 1469655639, "creation_date": 1469655639, "answer_id": 38623667, "question_id": 38622424, "link": "https://stackoverflow.com/questions/38622424/gcc-on-windows-no-space-left-on-device/38623667#38623667", "title": "GCC on windows No space left on device", "body": "<p>I uninstalled GCC from the simple MinGW installer and installed the Codeblocks IDE. Codeblocks has an option to install the MinGW GCC. I do not understand what was wrong but this method works. The exact same command with the exact same C file compiles</p>\n\n<p>Here is a simple video that shows the process: <a href=\"https://www.youtube.com/watch?v=3B4hPHZNtNw\" rel=\"nofollow\">https://www.youtube.com/watch?v=3B4hPHZNtNw</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10508284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1792b7bc2b1f9853690df8a36a5476?s=128&d=identicon&r=PG&f=1", "display_name": "Anshuman Pandey", "link": "https://stackoverflow.com/users/10508284/anshuman-pandey"}, "is_accepted": false, "score": 0, "last_activity_date": 1585587962, "last_edit_date": 1585587962, "creation_date": 1585586752, "answer_id": 60935363, "question_id": 38622424, "link": "https://stackoverflow.com/questions/38622424/gcc-on-windows-no-space-left-on-device/60935363#60935363", "title": "GCC on windows No space left on device", "body": "<p>I had the same issue when I was running it on windows. It worked when I ran it with admin privileges. Try running it with sudo privileges:</p>\n\n<pre><code>sudo gcc file\n</code></pre>\n\n<p>If it still doesn't work, try changing the file permissions:</p>\n\n<pre><code>chmod 777 file\n</code></pre>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "accepted_answer_id": 38623667, "answer_count": 2, "score": 0, "last_activity_date": 1585587962, "creation_date": 1469650588, "last_edit_date": 1469651206, "question_id": 38622424, "link": "https://stackoverflow.com/questions/38622424/gcc-on-windows-no-space-left-on-device", "title": "GCC on windows No space left on device", "body": "<p>When using GCC to compile a simple hello world program, I get the following error:</p>\n\n<pre><code>c:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: final link failed: No space left on device\n</code></pre>\n\n<p>There is plenty of disk space and memory left. I am calling GCC from within the Git Bash command line. What is causing this problem and how do i fix it?</p>\n\n<p>Using df shows:</p>\n\n<pre><code>$ df\nFilesystem           1K-blocks      Used Available Use% Mounted on\nC:/Program Files/Git 975996924 171439984 804556940  18% /\nI:                   260614460 219965568  40648892  85% /i\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "malloc", "free"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1469650740, "post_id": 38622417, "comment_id": 64630471, "body": "You should probably worry about the undefined behavior due to out-of-bounds access before you worry about <code>free()</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1469650888, "post_id": 38622417, "comment_id": 64630549, "body": "Specifically <code>for(x = 1; x &lt;= num_nodes; x++)</code> you don&#39;t seem to be aware that arrays are indexed from <code>0</code> to <code>len-1</code>. Every other instance too."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1469650974, "post_id": 38622417, "comment_id": 64630598, "body": "Count how many <code>malloc()</code> do you use, that&#39;s how many <code>free()</code> you need. In reverse order."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1469651113, "post_id": 38622417, "comment_id": 64630689, "body": "Try <code>child1 = malloc(num_nodes * sizeof *child1);</code>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1469652121, "post_id": 38622417, "comment_id": 64631194, "body": "<i>&quot;...When I do child2=child1...&quot;</i> you are probably doing a <a href=\"http://stackoverflow.com/a/15278367/4944425\">shallow copy</a> while you (probably) need a deep copy."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6595789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0d437ded5b574a2fc15383aac7e425?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOLE", "link": "https://stackoverflow.com/users/6595789/j-dole"}, "edited": false, "score": 0, "creation_date": 1469653205, "post_id": 38622542, "comment_id": 64631743, "body": "Thanks, will do this."}], "tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 1, "last_activity_date": 1469651040, "creation_date": 1469651040, "answer_id": 38622542, "question_id": 38622417, "link": "https://stackoverflow.com/questions/38622417/how-to-properly-free-my-mallocs-in-c/38622542#38622542", "title": "How to properly free() my mallocs in c", "body": "<pre><code>child1 = malloc(num_nodes * sizeof(child1));\n</code></pre>\n\n<p>this is incorrect. You are allocating space for num_nodes pointers (child1 is a pointer to Chrom). You want to allocate space for num_nodes Chrom instances.\nChange it to </p>\n\n<pre><code>child1 = malloc(num_nodes * sizeof(*child1));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 6595789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0d437ded5b574a2fc15383aac7e425?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOLE", "link": "https://stackoverflow.com/users/6595789/j-dole"}, "edited": false, "score": 0, "creation_date": 1469653162, "post_id": 38622623, "comment_id": 64631724, "body": "yes it is working. You mentioned creating a space for Chrom structures, how can i go about doing that to provide space for child1[x].gene?"}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "reply_to_user": {"reputation": 9, "user_id": 6595789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0d437ded5b574a2fc15383aac7e425?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOLE", "link": "https://stackoverflow.com/users/6595789/j-dole"}, "edited": false, "score": 0, "creation_date": 1469654323, "post_id": 38622623, "comment_id": 64632305, "body": "The space for every child1[x].gene structure was done in the for loop after allocating the Chrom structures."}, {"owner": {"reputation": 9, "user_id": 6595789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0d437ded5b574a2fc15383aac7e425?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOLE", "link": "https://stackoverflow.com/users/6595789/j-dole"}, "edited": false, "score": 0, "creation_date": 1469655650, "post_id": 38622623, "comment_id": 64632927, "body": "I didnt make a mistake in declaring edge** gene. I wanted to be able to call child1[x].gene[i][j].label for example. Would I need to change it to:   for(x = 1; x &lt;= num_nodes; x++){child1[x].gene = (edge*)malloc(sizeof(struct Edge*)) }    for(x = 1; x &lt;= num_nodes; x++) for(y=1;y&lt;=num_nodes;y++){child1[x].gene[y] = (edge*)malloc(sizeof(struct Edge)) }?"}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "reply_to_user": {"reputation": 9, "user_id": 6595789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0d437ded5b574a2fc15383aac7e425?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOLE", "link": "https://stackoverflow.com/users/6595789/j-dole"}, "edited": false, "score": 0, "creation_date": 1469656365, "post_id": 38622623, "comment_id": 64633266, "body": "Just so I understand ... within each Chrom, you want an array of edges?"}], "tags": [], "owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "is_accepted": true, "score": 0, "last_activity_date": 1469659273, "last_edit_date": 1469659273, "creation_date": 1469651345, "answer_id": 38622623, "question_id": 38622417, "link": "https://stackoverflow.com/questions/38622417/how-to-properly-free-my-mallocs-in-c/38622623#38622623", "title": "How to properly free() my mallocs in c", "body": "<p>First of all, you allocate space for Chrom pointers, not the space for Chrom structures so I am surprised that child1[x].gene works without crashing but to only answer the questions posed as comments in your code, </p>\n\n<pre><code>free(child1);//can i free the memory like this?\nfree (child2);// will it automatically do all 'arrays'?\n</code></pre>\n\n<p>child1 is an array of pointers and each of those pointers points to allocated memory which will be lost when you free(child1). I would free each pointer child1[x].gene first and then free child1. Same thing for child2.</p>\n\n<p>This is probably close to what you want:</p>\n\n<pre><code>typedef struct Edge//per solution\n{\n  int label;//label\n  float weight;//energy of each edge\n} edge;\n\n// creating the chrom structure\ntypedef struct Chrom\n{\n  edge *gene;  // changed from edge**\n  float fitness_score;\n};\n\nint main(void)\n{\n  int num_nodes = 3;\n  int x;\n\n  struct Chrom* child1;\n\n  // if you want num_nodes Chrom entries\n\n  child1 = malloc(num_nodes * sizeof(struct Chrom));\n\n  // Allocating individual edges (I don't know why you declare edge** gene\n  // so I will assume that what you intended was edge* gene\n\n  for(x = 1; x &lt;= num_nodes; x++)\n  {\n     child1[x].gene = (edge*)malloc(sizeof(struct Edge));\n  }\n\n\n  // deallocate your memory\n\n  for(x = 1; x &lt;= num_nodes; x++)\n  {\n     free(child1[x].gene);\n  }\n\n  // free your array of Chroms\n\n  free(child1);\n\n  return 0;\n\n}\n</code></pre>\n\n<p>Here is what the code could be if you want a 2D array of edegs within each Chrom; Also, there is a bug in my previous answer; x should be initialized to zero in the for loop rather than to 1 because this will cause an array index out of bounds and use lower-than instead of lower-than-or-equal. (WARNING: I only tested it slightly):</p>\n\n<pre><code>typedef struct Edge//per solution\n{\n  int label;//label\n  float weight;//energy of each edge\n} edge;\n\n// creating the chrom structure\ntypedef struct Chrom\n{\n  edge **gene;  \n  float fitness_score;\n};\n\nint main(void)\n{\n  int num_nodes = 3;\n  int num_edges_x = 2;\n  int num_edges_y = 3;\n  int x, j;\n\n  struct Chrom* child1;\n\n  // if you want num_nodes Chrom entries\n\n  child1 = malloc(num_nodes * sizeof(struct Chrom));\n\n  // Allocating 2D array of edges for each Chrom\n  // USE zero-based indexing.\n\n  for(x=0; x &lt; num_nodes; x++)\n  {\n     child1[x].gene = (edge**)malloc(num_edges_x * sizeof(edge*));\n\n     // initialise you array of edges\n\n     for (j=0; j&lt;num_edges_x; j++)\n     {\n         child1[x].gene[j] = (edge*)malloc(num_edges_y * sizeof(edge));           \n     }\n  }\n\n  // Use a child1[x].gene[x][y]\n\n  child1[0].gene[0][0].label = 3;\n  child1[0].gene[0][0].weight = 7.2F;\n\n  printf(\"\\nlabel: %d - weight: %f\", child1[0].gene[0][0].label,   child1[0].gene[0][0].weight);\n\n  child1[1].gene[0][0].label = 1;\n  child1[1].gene[0][0].weight = 12.4F;\n\n  printf(\"\\nlabel: %d - weight: %f\", child1[1].gene[0][0].label,  child1[1].gene[0][0].weight);\n\n  child1[1].gene[1][0].label = 5;\n  child1[1].gene[1][0].weight = 112.6F;\n\n  printf(\"\\nlabel: %d - weight: %f\", child1[1].gene[1][0].label,      child1[1].gene[1][0].weight);\n\n  // deallocate your memory\n  for(x =0; x &lt; num_nodes; x++)\n  {\n\n     for (j=0; j&lt;num_edges_x; j++)\n     {\n        free(child1[x].gene[j]);\n     }\n\n     free(child1[x].gene);\n  }\n\n  free(child1);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6595789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0d437ded5b574a2fc15383aac7e425?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOLE", "link": "https://stackoverflow.com/users/6595789/j-dole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 38622623, "answer_count": 2, "score": -1, "last_activity_date": 1469748448, "creation_date": 1469650573, "last_edit_date": 1469748448, "question_id": 38622417, "link": "https://stackoverflow.com/questions/38622417/how-to-properly-free-my-mallocs-in-c", "title": "How to properly free() my mallocs in c", "body": "<p>I need to have a dynamic array so I have used malloc in my code...However I don't know how to successfully free the memory afterwards. Somewhere in my code I believe I have a pointer re-assignment which leads to dangling pointer error (when i do child2=child1). Does anyone know how to free my mallocs properly? Thanks in advance.</p>\n\n<p>My actual code is below:</p>\n\n<pre><code>typedef struct Edge//per solution\n{\nint label;//label\nfloat weight;//energy of each edge\n} edge;\n\n// creating the chrom structure\ntypedef struct Chrom\n{\nedge **gene;\nfloat fitness_score;\n}     \n</code></pre>\n\n<p>In one of my functions i have the following, where pop_size and num_nodes was previously calculated as 100 and 10 respectively.</p>\n\n<pre><code>Chrom* child1;\nChrom* child2;\n\n//allocate memory of child\nchild1 = malloc(num_nodes * sizeof(child1));\nchild2 = malloc(num_nodes * sizeof(child2));\nif(child1 == NULL||child2 == NULL)\n    printf(\"ERROR1: Memory allocation failed!\");\nfor(x = 1; x &lt;= num_nodes; x++)\n{\n    child1[x].gene = malloc(num_nodes * sizeof(edge*));\n    child2[x].gene = malloc(num_nodes * sizeof(edge*));\n    if(child1[x].gene == NULL||child2[x].gene == NULL)\n        printf(\"ERROR2: Memory allocation failed!\");\n    for(y = 0; y &lt; num_nodes; y++)\n    {\n        child1[x].gene[y] = malloc(num_nodes * sizeof(edge));\n        child2[x].gene[y] = malloc(num_nodes * sizeof(edge));\n        if(child1[x].gene[y] == NULL||child2[x].gene[y] == NULL)\n            printf(\"ERROR3: Memory allocation failed!\");\n    }\n}\n\n//do something...\n\nfor(i=0; i&lt;pop_size; i++)\n    for(x=0; x&lt;num_nodes; x++)\n        for(y=0;y&lt;num_nodes;y++)\n            child2[i].gene[x][y].label=child1[i].gene[x][y].label;\n\nfree(child1);//can i free the memory like this?\nfree (child2);// will it automatically do all 'arrays'?\n</code></pre>\n\n<p>Also, must I first check if memory was allocated properly before freeing it?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5202398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd4e565f37a468abd361fc3bb6034c2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel David", "link": "https://stackoverflow.com/users/5202398/daniel-david"}, "edited": false, "score": 0, "creation_date": 1469649913, "post_id": 38622145, "comment_id": 64630090, "body": "ohh shame me, it took me a while , thank you very much!!"}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 2, "last_activity_date": 1469649569, "creation_date": 1469649569, "answer_id": 38622145, "question_id": 38622099, "link": "https://stackoverflow.com/questions/38622099/trying-to-implement-rbtree-in-c/38622145#38622145", "title": "Trying to implement RBtree in C", "body": "<p><code>struct costumers_tree</code> was never defined; <code>struct costumer_tree</code> was.</p>\n"}], "owner": {"reputation": 3, "user_id": 5202398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd4e565f37a468abd361fc3bb6034c2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel David", "link": "https://stackoverflow.com/users/5202398/daniel-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1469687722, "accepted_answer_id": 38622145, "answer_count": 1, "score": 0, "last_activity_date": 1469649569, "creation_date": 1469649417, "question_id": 38622099, "link": "https://stackoverflow.com/questions/38622099/trying-to-implement-rbtree-in-c", "closed_reason": "Not suitable for this site", "title": "Trying to implement RBtree in C", "body": "<p>I tried to implement RB tree in C but the compiler always failed on specific error: \"dereferencing pointer to incomplete type\"</p>\n\n<p>I declared the following Struct:</p>\n\n<pre><code>`typedef struct costumer_tree  \n{\n    int id;\n    char lastName[100];\n    int color;\n    struct costumers_tree * left;\n    struct costumers_tree * right;\n    struct costumers_tree * parent;\n}\ncostumerTree;`\n</code></pre>\n\n<p>And use the RBfix function:</p>\n\n<pre><code>`treeInsertFixup(costumerTree *costumerTreeRoot, costumerTree *z)\n{\ncostumerTree *y;\nwhile (z-&gt;parent-&gt;color == 2)\n{\n...}`\n</code></pre>\n\n<p>But when i compile the code the compile always failed on the row:\n<code>while (z-&gt;parent-&gt;color == 2)</code>\nWith the error: \"dereferencing pointer to incomplete type\"</p>\n\n<p>Why am i missong?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1469649542, "post_id": 38622025, "comment_id": 64629905, "body": "What part of those lines are you having trouble understanding?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1469649848, "post_id": 38622025, "comment_id": 64630053, "body": "<i>&quot;what&#39;s the difference between the two different print statements?&quot;</i> The pointers no longer point to the base element of the arrays."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1469650617, "post_id": 38622025, "comment_id": 64630400, "body": "What actually is the point of this type of code, apart from chewing gum and asking if it retains the flavour?"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1469651602, "post_id": 38622025, "comment_id": 64630938, "body": "@WeatherVane this is likely an academic question. I&#39;ve unfortunately seen engineering exams myself where code like this is expected to be understood. It&#39;s an unfortunate teaching technique that professors who are out-of-touch with programming tend to use."}, {"owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 2, "creation_date": 1469651924, "post_id": 38622025, "comment_id": 64631098, "body": "@PatrickRoberts I disagree. To maintain/write C code, you need to know common C idioms. See my answer for a very classical example of <code>s++ = t++</code>. While no real code would want to do the specific shenanigans of OP&#39;s example, <i>any real C coder should be able to unravel them</i>."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "edited": false, "score": 0, "creation_date": 1469652907, "post_id": 38622025, "comment_id": 64631603, "body": "@tucuxi I think it&#39;s good to instill a solid understanding of order-of-operations, pointer logic, etc. but there&#39;s a fine line between teaching the concepts, and presenting completely nonsensical code such as this. I don&#39;t find this to be a useful teaching method."}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 6356497, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5a03a8133e4886683f3e90a88484fd26?s=128&d=identicon&r=PG&f=1", "display_name": "Revaz Shalikashvili", "link": "https://stackoverflow.com/users/6356497/revaz-shalikashvili"}, "is_accepted": false, "score": 1, "last_activity_date": 1469650510, "creation_date": 1469650510, "answer_id": 38622399, "question_id": 38622025, "link": "https://stackoverflow.com/questions/38622025/simple-c-pointer-confusion/38622399#38622399", "title": "Simple C pointer confusion", "body": "<p>Ok listen carefully :D \nthe problem is in the  <a href=\"http://www.tutorialspoint.com/cprogramming/c_pointer_arithmetic.htm\" rel=\"nofollow\">pointer arithmetics</a> (see these very good examples)</p>\n\n<pre><code>*p++ = *r--;\n</code></pre>\n\n<p>in this line , <code>p</code> and <code>r</code> CHANGE their values. ++ operator assigns it to <code>p+1</code> and then reads value in it which is <code>22</code>(<code>*</code> this operator reads value on given address. Like \"Hey give me what's inside the space where this pointer points to\")</p>\n\n<pre><code>*++q = *r--;\n</code></pre>\n\n<p>this line is same in character </p>\n\n<pre><code>--*p; ++*q; --*r;\n</code></pre>\n\n<p>here pointers don't change but their values do </p>\n\n<p>so in the end <code>p</code> <code>r</code> and <code>q</code> are not pointing the initial addresses\nand print results will be different </p>\n"}, {"tags": [], "owner": {"reputation": 1992, "user_id": 6483847, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YgXy3.png?s=128&g=1", "display_name": "Ayon Nahiyan", "link": "https://stackoverflow.com/users/6483847/ayon-nahiyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1469650623, "creation_date": 1469650623, "answer_id": 38622440, "question_id": 38622025, "link": "https://stackoverflow.com/questions/38622025/simple-c-pointer-confusion/38622440#38622440", "title": "Simple C pointer confusion", "body": "<p>This can be explained by operator precedence.</p>\n\n<p>Line 3:</p>\n\n<pre><code>*p = *r             a={33(p),22(q),33(r)}\np++,r--             a={33,22(p)(q)(r),33}\n</code></pre>\n\n<p>Line 4:</p>\n\n<pre><code>q++                 a={33,22(p)(r),33(q)}\n*q = *r             a={33,22(p)(r),22(q)}\nr--                 a={33(r),22(p),22(q)}\n</code></pre>\n\n<p>Line 5:</p>\n\n<pre><code>--*p                a={33(r),21(p),22(q)}\n++*q                a={33(r),21(p),23(q)}\n--*r                a={32(r),21(p),23(q)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1469650637, "creation_date": 1469650637, "answer_id": 38622443, "question_id": 38622025, "link": "https://stackoverflow.com/questions/38622025/simple-c-pointer-confusion/38622443#38622443", "title": "Simple C pointer confusion", "body": "<p>Just track the pointers.</p>\n\n<pre><code>int a[] = {11, 22, 33};\nint *p = a, *q = a + 1, *r = a + 2;\n</code></pre>\n\n<p>this points <code>p</code> at <code>a[0]</code>, <code>q</code> at <code>a[1]</code>, and <code>r</code> at <code>a[2]</code></p>\n\n<pre><code>*p++ = *r--;\n</code></pre>\n\n<p>this copies from <code>*r</code> to <code>*p</code> (setting <code>a[0]</code> to <code>33</code>), then increments <code>p</code> and decrements <code>r</code> (so both <code>p</code> and <code>r</code> end up pointing at <code>a[1]</code>)</p>\n\n<pre><code>*++q = *r--;\n</code></pre>\n\n<p>this increments <code>q</code> (moving it to <code>a[2]</code>), then copies from <code>*r</code> to <code>*q</code> (setting <code>a[2]</code> to <code>22</code>) and finally decrements <code>r</code> (making it point at <code>a[0]</code>)</p>\n\n<pre><code>--*p; ++*q; --*r;\n</code></pre>\n\n<p>This decrements the value pointed at by <code>p</code> (making <code>a[1]</code> 21), then increments <code>*q</code> (making <code>a[2]</code> 23), and finally decrements <code>*r</code> (making <code>a[0]</code> 32) </p>\n\n<pre><code>printf(\"%d %d %d\", a[0], a[1], a[2]);\nprintf(\"%d %d %d\", *p, *q, *r);\n</code></pre>\n\n<p>These print the 3 values in the array in different orders.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469654950, "post_id": 38622581, "comment_id": 64632616, "body": "Nice answer - however disagree with the ending <code>strcpy()&#47;strncpy()</code> advice.  Without clear explanation/examples, both suffer mis-use"}, {"owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469655602, "post_id": 38622581, "comment_id": 64632900, "body": "Explaining proper use of dynamic memory would require a <i>lot</i> of space. However, I felt that a minimum warning was warranted"}], "tags": [], "owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "is_accepted": true, "score": 3, "last_activity_date": 1469654822, "last_edit_date": 1469654822, "creation_date": 1469651168, "answer_id": 38622581, "question_id": 38622025, "link": "https://stackoverflow.com/questions/38622025/simple-c-pointer-confusion/38622581#38622581", "title": "Simple C pointer confusion", "body": "<p>A simple way to explain what each line does is to expand it into equivalent code that is easier to parse when you are not too familiar with pointers and pre/post increment:</p>\n\n<pre><code>// *p++ = *r--; \n*p = *r;  // copies value in r over to p\np = p+1;  // then increments p, so it now points to a+1\nr = r-1;  // and decrements r, so it points to a+1 too\n\n// *++q = *r--;\nq = q+1;  // q now points to a+2\n*q = *r;  // places value at a+1 in a+2\nr = r-1;  // decrements r, so it points to a+0\n\n// --*p; ++*q; --*r;\n*p = *p-1; // decrements value at p, that is, a+1\n*q = *q+1; // increments value at q, that is, a+2\n*r = *r+1; // decrements value at r, that is, a+0\n\n// displays values at a+0, a+1, and a+2\nprintf(\"%d %d %d\", a[0], a[1], a[2]);\n\n// displays values at a+1, a+2, and a+0\nprintf(\"%d %d %d\", *p, *q, *r);\n</code></pre>\n\n<p>If the pre increment/decrement is before the *, then you are modifying values at the position pointed by the pointer; if it is after the *, then you are changing where the pointer points to. In the case of post increment/decrement expressions, you need to use parenthesis if you want to modify values: <code>*p++</code> changes what <code>p</code> points to and evaluates to that value, <code>(*p)++</code> changes the value pointed-to by <code>p</code>.</p>\n\n<p>As a fun** exercise, the following code, from <a href=\"https://en.wikipedia.org/wiki/The_C_Programming_Language\" rel=\"nofollow\">The C Programming Language</a>, copies a zero-terminated string from location <code>t</code> to <code>s</code>: </p>\n\n<pre><code>void strcpy(char *s, char *t) {\n   while (*s++ = *t++);\n}\n</code></pre>\n\n<p>** your idea of fun may differ from K&amp;R's. Use of <code>strcpy</code> has been proven to cause buffer overflows and premature baldness - use <code>strncpy</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1469739717, "last_edit_date": 1469739717, "creation_date": 1469652403, "answer_id": 38622902, "question_id": 38622025, "link": "https://stackoverflow.com/questions/38622025/simple-c-pointer-confusion/38622902#38622902", "title": "Simple C pointer confusion", "body": "<p><kbd><code>int a[] = {11, 22, 33};                 //</code> a[0] \u2190 11, a[1] \u2190 22, a[2] \u2190 33\n<br><code>int *p = a, *q = a + 1, *r = a + 2;     //</code> p \u2192 &amp;a[0], q \u2192 &amp;a[1], r \u2192 &amp;a[2]\n<br><code>*p++ = *r--;                            //</code> a[0] \u2190 33, p \u2192 &amp;a[1], r \u2192 &amp;a[1]\n<br><code>*++q = *r--;                            //</code> q \u2192 &amp;a[2], a[2] \u2190 22, r \u2192 &amp;a[0]\n<br><code>--*p; ++*q; --*r;                       //</code> a[1] \u2190 21, a[2] \u2190 23, a[0] \u2190 32\n<br><code>printf(\"%d %d %d\\n\", a[0], a[1], a[2]); //</code> output is 32 21 23\n<br><code>printf(\"%d %d %d\\n\", *p, *q, *r);       //</code> output is 21 23 32\n</kbd></p>\n"}], "owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 38622581, "answer_count": 5, "score": -3, "last_activity_date": 1469739717, "creation_date": 1469649182, "last_edit_date": 1469649614, "question_id": 38622025, "link": "https://stackoverflow.com/questions/38622025/simple-c-pointer-confusion", "title": "Simple C pointer confusion", "body": "<p>I'm stuck with this question, and need to understand what's going on each line step-by-step. The first two lines I do understand, but the problem comes at line 3 and 4. Also, what's the difference between the two different print statements?</p>\n\n<pre><code>int a[] = {11, 22, 33};\nint *p = a, *q = a + 1, *r = a + 2;\n*p++ = *r--;\n*++q = *r--;\n--*p; ++*q; --*r;\nprintf(\"%d %d %d\", a[0], a[1], a[2]);\nprintf(\"%d %d %d\", *p, *q, *r);\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "fgetc"], "comments": [{"owner": {"reputation": 3401, "user_id": 1178267, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VvAW2.jpg?s=128&g=1", "display_name": "anhoppe", "link": "https://stackoverflow.com/users/1178267/anhoppe"}, "edited": false, "score": 3, "creation_date": 1469649025, "post_id": 38621938, "comment_id": 64629611, "body": "you have to allocate the ch array with malloc (if you are REALLY c) or new[]"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 4, "creation_date": 1469649059, "post_id": 38621938, "comment_id": 64629633, "body": "Allocate memory for that array, either statically (<code>char ch[1000]</code>) or dynamically (using <code>malloc()</code>). Also, <code>main</code> returns <code>int</code>."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 1, "creation_date": 1469649143, "post_id": 38621938, "comment_id": 64629676, "body": "You need to give your ch pointer an initial size and dynamically updating it when it&#39;s full. Make sure you free all of them in properly when leaving scope (roughly your code context)."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469651881, "post_id": 38622620, "comment_id": 64631072, "body": "Note: infinite loop with <code>while((ch[i] = fgetc(stdin)) != &#39;\\n&#39;)</code> should <code>fgetc()</code> return <code>EOF</code> for end-of-file."}, {"owner": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 1, "creation_date": 1469656333, "post_id": 38622620, "comment_id": 64633252, "body": "Note: <code>main</code> is expected to return <code>int</code>, and in case you do that realloc in a function, you&#39;ll be leaking memory. Best practice would be to add a <code>free(ch)</code> before <code>return</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1469668564, "post_id": 38622620, "comment_id": 64636362, "body": "Calling <code>realloc</code> for every character read is horribly wasteful. Allocate <code>128, 256, ... 1024</code> (or some reasonably expected number of characters) read until the limit is reached and then <code>realloc</code> some sane additional number of characters, then repeat..."}], "tags": [], "owner": {"reputation": 972, "user_id": 4046770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-YUJo3WFAoJs/AAAAAAAAAAI/AAAAAAAAD14/5Vaye50_iBg/photo.jpg?sz=128", "display_name": "Nayab Basha Sayed", "link": "https://stackoverflow.com/users/4046770/nayab-basha-sayed"}, "is_accepted": false, "score": 2, "last_activity_date": 1469696770, "last_edit_date": 1469696770, "creation_date": 1469651322, "answer_id": 38622620, "question_id": 38621938, "link": "https://stackoverflow.com/questions/38621938/using-fgetc-for-reading-into-an-array-in-c/38622620#38622620", "title": "Using fgetc() for reading into an array in C", "body": "<p>In <code>char *ch</code>, ch is a pointer and it's value should be a valid memory location to store data in that memory location. Allocating memory dynamically to ch using <code>malloc()</code> or <code>realloc()</code> (use realloc if ch points to <code>NULL</code> initially) is necessary before using that pointer. Otherwise ch might contain garbage value and accessing that memory location results in <code>Segmentation fault</code>. I made changes to your program and it might help you.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    char *ch = NULL;\n    int i = 0;\n    ch = realloc(ch, i+1);\n    while((ch[i] = fgetc(stdin)) != '\\n'){\n        ch = realloc(ch, i+1);\n        i++;\n    }\n    ch[i] = 0;\n    puts(ch);\n    free(ch);\n    return 0;\n}\n</code></pre>\n\n<p>As David C. Rankin said in the below comment:</p>\n\n<blockquote>\n  <p>Calling realloc for every character read is horribly wasteful.\n  Allocate 128, 256, ... 1024 (or some reasonably expected number of\n  characters) read until the limit is reached and then realloc some sane\n  additional number of characters, then repeat...</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 3878742, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/976e0193adf1fef776e1fa28dfffc022?s=128&d=identicon&r=PG&f=1", "display_name": "Shantia", "link": "https://stackoverflow.com/users/3878742/shantia"}, "edited": false, "score": 0, "creation_date": 1469685359, "post_id": 38626198, "comment_id": 64640562, "body": "Thanks a lot! Actually you answered a lots of my question, I appreciate it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 35, "user_id": 3878742, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/976e0193adf1fef776e1fa28dfffc022?s=128&d=identicon&r=PG&f=1", "display_name": "Shantia", "link": "https://stackoverflow.com/users/3878742/shantia"}, "edited": false, "score": 1, "creation_date": 1469689949, "post_id": 38626198, "comment_id": 64642949, "body": "Glad I could help. C is a very elegant language that provides more low level control over memory, hardware, etc.. than any other language your will find (other than assembly). With that much flexibility it takes a little longer to learn. One of the hurdles is learning dynamic memory allocation.  While this is a fairly simple bit of code, the allocate, track, reallocate, and free covers all of the basics of dynamic memory handling. So if you understand the what and why above, you have done well. Keep up the good work and good luck with your coding."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1469673037, "creation_date": 1469673037, "answer_id": 38626198, "question_id": 38621938, "link": "https://stackoverflow.com/questions/38621938/using-fgetc-for-reading-into-an-array-in-c/38626198#38626198", "title": "Using fgetc() for reading into an array in C", "body": "<p>While you can <code>realloc</code> for every character you read, that is a horribly inefficient way to allocate memory. A call to <code>malloc</code> is relatively expensive compared to an assignment of a character to an array element. It is far better to allocate some reasonably anticipated number of characters, read until your reach the limit, <code>realloc</code> at that point (updating the limit), and repeat until <code>EOF</code> (or whatever termination you choose).</p>\n\n<p>The implementation is straight forward, but there are a couple of subtleties to note. When reallocating, always assign the result of <code>realloc</code> to a <em>temporary pointer</em> so you can <em>validate</em> that <code>realloc</code> succeeded before proceeding. Why? If <code>realloc</code> fails, it returns <code>NULL</code>. If you just blindly assign the result to your original array, and <code>realloc</code> fails, (1) you have just lost the pointer to your original array; and (2) you have just created a memory leak because the original block is left untouched -- it is not freed or moved. </p>\n\n<p>With that in mind, you could read characters into an array, reallocating as needed, until <code>EOF</code> is reaches using something like the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define NCHAR 1024  /* must be at least 1 */\n\nint main (int argc, char **argv) {\n\n    int c;\n    size_t n = 0, nchar = NCHAR;\n    char *arr = malloc (sizeof *arr * nchar);\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n\n    if (!fp) {  /* validate file open for reading */\n        fprintf (stderr, \"error: file open failed '%s'.\\n\", argv[1]);\n        return 1;\n    }\n\n    if (!arr) { /* validate memory allocation succeeded */\n        fprintf (stderr, \"error: virtual memory exhausted.\\n\");\n        return 1;\n    }\n\n    while ((c = fgetc (fp)) != EOF) {  /* for each char in file */\n        arr[n++] = c;       /* assign char to array */\n\n        if (n == nchar) {   /* realloc preserving space for nul */\n            void *tmp = realloc (arr, nchar + NCHAR);\n            if (!tmp) {           /* validate realloc succeeded */\n                fprintf (stderr, \"realloc() error: memory exhausted.\\n\");\n                break; /* break read loop, using existing 'arr' */\n            }\n            arr = tmp;     /* assign reallocated pointer to arr */\n            nchar += NCHAR;        /* update the value of nchar */\n        }\n    }\n    arr[n] = 0;                  /* affirmatively nul-terminate */\n\n    if (fp != stdin) fclose (fp);    /* close file if not stdin */\n\n    for (size_t i = 0; i &lt; n; i++)   /* output arr */\n    putchar (arr[i]);\n\n    free (arr);   /* free allocated memory */\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> above, on failure, the read loop is exited, preserving all characters in <code>arr</code> read up to that point in time.)</p>\n\n<p>Lastly, in any code your write that dynamically allocates memory, you have 2 <em>responsibilities</em> regarding any block of memory allocated: (1) <em>always preserve a pointer to the starting address</em> for the block of memory so, (2) it can be <em>freed</em> when it is no longer needed.</p>\n\n<p>It is imperative that you use a memory error checking program to insure you haven't written beyond/outside your allocated block of memory, attempted to read or base a jump on an unintitialized value and finally to confirm that you have freed all the memory you have allocated. (For Linux <code>valgrind</code> is the normal choice.)</p>\n\n<p>A simple example (with <code>NCHAR</code> set to <code>2</code> to force multiple reallocations) would be:</p>\n\n<pre><code>$ valgrind ./bin/fgetc_realloc &lt;../dat/captnjack.txt\n==19710== Memcheck, a memory error detector\n==19710== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==19710== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==19710== Command: ./bin/fgetc_realloc\n==19710==\nThis is a tale\nOf Captain Jack Sparrow\nA Pirate So Brave\nOn the Seven Seas.\n==19710==\n==19710== HEAP SUMMARY:\n==19710==     in use at exit: 0 bytes in 0 blocks\n==19710==   total heap usage: 39 allocs, 39 frees, 1,560 bytes allocated\n==19710==\n==19710== All heap blocks were freed -- no leaks are possible\n==19710==\n==19710== For counts of detected and suppressed errors, rerun with: -v\n==19710== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1)\n</code></pre>\n\n<p>You want to find <em>All heap blocks were freed -- no leaks are possible</em> and <em>ERROR SUMMARY: 0 errors from 0 contexts</em> (noting: on some OS, valgrind will not report <code>0</code> due to incomplete memory exclusion files)</p>\n"}], "owner": {"reputation": 35, "user_id": 3878742, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/976e0193adf1fef776e1fa28dfffc022?s=128&d=identicon&r=PG&f=1", "display_name": "Shantia", "link": "https://stackoverflow.com/users/3878742/shantia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3833, "favorite_count": 0, "accepted_answer_id": 38626198, "answer_count": 2, "score": 0, "last_activity_date": 1469696770, "creation_date": 1469648875, "question_id": 38621938, "link": "https://stackoverflow.com/questions/38621938/using-fgetc-for-reading-into-an-array-in-c", "title": "Using fgetc() for reading into an array in C", "body": "<p>I wanna use <code>fgetc()</code> and put the input character in some array like <code>char *ch</code>. But apparently I can't put character (like 'M') in array and it has to be like \"M\", I mean with double quotation like a string.<br>\nThis is my code, after getting user input I got <code>Segmentation fault (core dumped)</code><br>\nSo I want to know if there is any way or trick that could do that.<br>\nThanks in advance. :)</p>\n\n<pre><code>void main(){\n    char *ch;\n    int i = 0;\n    while((ch[i] = fgetc(stdin)) != '\\n'){\n        i++;\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1469647725, "post_id": 38621579, "comment_id": 64628928, "body": "Where is <code>struct Deteccion</code> defined?  The function is declared to return a value of this type, but I don&#39;t see a <code>return</code> statement."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1469647809, "post_id": 38621579, "comment_id": 64628975, "body": "Which line did the compiler say? Since this is not a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>, you need to be specific about it."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1469647888, "post_id": 38621579, "comment_id": 64629025, "body": "@dbush I already edit. I forgot half of the code. Now is complete exacly as I have"}, {"owner": {"reputation": 410, "user_id": 6396592, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-NWst1DO1EMU/AAAAAAAAAAI/AAAAAAAAADY/_o2xOEnsyKA/photo.jpg?sz=128", "display_name": "Meik Vtune", "link": "https://stackoverflow.com/users/6396592/meik-vtune"}, "edited": false, "score": 0, "creation_date": 1469647896, "post_id": 38621579, "comment_id": 64629034, "body": "Please change the variable and function names to english, so we can actually read into the meaning of it."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1469647914, "post_id": 38621579, "comment_id": 64629047, "body": "@WeatherVane In line 17 appear the error"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1469647921, "post_id": 38621579, "comment_id": 64629053, "body": "Why is there an include guard anyway? Are you including a <i>.c</i> file? You should not do that. Also, why are there some many global variables that apparently don&#39;t need to be global? If you have a struct, you can encapsulate the global variables into the struct and then pass it across all functions that you need."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1469648153, "post_id": 38621579, "comment_id": 64629162, "body": "@JuanBravo you have <code>struct Deteccion</code> after you already have<code>#define Deteccion</code> in other words, a definition of nothing. Please never duplicate  identifiers, even it you believe they are &quot;local&quot;."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469679626, "post_id": 38621579, "comment_id": 64638688, "body": "the <code>pow()</code> function expects two <code>double</code> parameters and returns a <code>double</code> value.  The compiler will complain about the assignment of a double value into a <code>float</code> variable.  When compiling, always enable all the warnings, then fix those warnings"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469679737, "post_id": 38621579, "comment_id": 64638714, "body": "do NOT place a function body inside a header file.   It is a good practice to place function signatures inside a header file."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469679819, "post_id": 38621579, "comment_id": 64638737, "body": "for ease of readability and understanding: 1) consistently indent the code. Indent after every opening brace &#39;{&#39;. un-indent before every closing brace &#39;}&#39;. 2) it is considered good programming practice to write #define names in ALL_CAPS. 3) separate code blocks (for, if, else, while, do...while, switch, case, default) via a blank line.  4) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469680148, "post_id": 38621579, "comment_id": 64638829, "body": "variable names should indicate <code>content</code> or <code>usage</code> or better, both.  Even in the current context, these variable names are meaningless: <code>ax</code>, <code>ay</code>, <code>az</code>, <code>wz</code>"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1469648061, "last_edit_date": 1469648061, "creation_date": 1469647901, "answer_id": 38621654, "question_id": 38621579, "link": "https://stackoverflow.com/questions/38621579/defining-a-struct-function/38621654#38621654", "title": "Defining a struct function", "body": "<p>Since you are using <code>Deteccion</code> as the <em>header guard</em>, you may not use the same identifier for the <code>struct</code> tag. Preprocessor replaces <code>Deteccion</code> with blank space, so the compiler sees this:</p>\n\n<pre><code>struct // &lt;&lt;== Nothing\n{\n    int muestras;\n    int pasos;\n    float frecuencia;\n    float longitud;\n    float orientacion;\n};\n</code></pre>\n\n<p>To fix this problem use a different identifier for the header guard:</p>\n\n<pre><code>#ifndef Deteccion_H\n#define Deteccion_H\n</code></pre>\n\n<p><strong>Note:</strong> It looks like you are using header guard inside a file that has function implementation. This is highly unusual. Consider restructuring your code so that implementations and declarations are placed in different files.</p>\n"}, {"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 2, "last_activity_date": 1469647933, "creation_date": 1469647933, "answer_id": 38621663, "question_id": 38621579, "link": "https://stackoverflow.com/questions/38621579/defining-a-struct-function/38621663#38621663", "title": "Defining a struct function", "body": "<p>Because you have:</p>\n\n<pre><code>#define Deteccion\n</code></pre>\n\n<p>defining \"Deteccion\" to be nothing, the line</p>\n\n<pre><code>struct Deteccion Detectar(float ...\n</code></pre>\n\n<p>is actually</p>\n\n<pre><code>struct Detectar(float ...\n</code></pre>\n\n<p>which is an error.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1469648420, "last_edit_date": 1469648420, "creation_date": 1469647951, "answer_id": 38621670, "question_id": 38621579, "link": "https://stackoverflow.com/questions/38621579/defining-a-struct-function/38621670#38621670", "title": "Defining a struct function", "body": "<p>Problem is you have defined Deteccion as an empty macro first, which explains the compilation error. The compiler sees <code>struct Detectar(float</code> which is illegal.</p>\n\n<p>Funny enough, <code>struct Deteccion</code> definition works, just seen as an anonymous structure declaration. Although it is useless because not recallable.</p>\n\n<p>General advice: protect against multiple inclusion with that technique only in header files. It is useless in .c files, And use a distinctive naming rule like uppercase plus prefix.</p>\n\n<pre><code>#ifndef DETECCION_H\n#define DETECCION_H\n</code></pre>\n\n<p>As a convention, macros are generally full uppercase, which avoids problems like you had.</p>\n"}], "owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38621654, "answer_count": 3, "score": 0, "last_activity_date": 1469648420, "creation_date": 1469647613, "last_edit_date": 1469647822, "question_id": 38621579, "link": "https://stackoverflow.com/questions/38621579/defining-a-struct-function", "title": "Defining a struct function", "body": "<p>I have the next code, but qhen I compiled, it appear an erro: error: expected identifier or '(' before 'float'. But it is just exacly as other code i have and examples from Internet but I don't notice the error. </p>\n\n<pre><code>#ifndef Deteccion\n#define Deteccion\n#define acc_TH 12.74\nint cont=0;\nint pasos=0;\nfloat SF,SL,SLT;\n\nstruct Deteccion\n{\nint muestras;\nint pasos;\nfloat frecuencia;\nfloat longitud;\nfloat orientacion;\n};\n\nstruct Deteccion Detectar(float ax, float ay, float az, float wz)\n{\nfloat mag,longitud,frecuencia;\nint muestras;\nfloat sum_acc,sum_w,orientacion;\nmag=(ax*ax)+(ay*ay)+(az*az);\nmag=pow(mag,0.5); \nif(mag&gt;=acc_TH)\n{\n    muestras=muestras+1;\n    sum_acc=mag+sum_acc;\n    sum_w=wz+sum_w; \n}\nelse\n{\n    cont=cont+1; \n    if(muestras&lt;32)\n    {   \n        muestras=0;\n        sum_acc=0;\n        sum_w=0;\n    }\n}\nif(cont==4)\n{\n    pasos=pasos+1;\n    SF=50/muestras;\n    SL=sum_acc/muestras;\n    SL=pow(SL,0.333);\n    SL=0.22*SL;\n    SLT=SF+SL;\n    orientacion=(0.02*sum_w)+orientacion;\n    sum_w=0;\n    muestras=0;\n    sum_acc=0;\n}\n}\n#endif\n</code></pre>\n"}, {"tags": ["android", "ios", "c", "opengl-es", "egl"], "answers": [{"comments": [{"owner": {"reputation": 6020, "user_id": 4052193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6062c93ce987aa90ac59d06e758f03b6?s=128&d=identicon&r=PG&f=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/4052193/columbo"}, "edited": false, "score": 1, "creation_date": 1469655854, "post_id": 38622689, "comment_id": 64633030, "body": "I agree. I would add that GLKView tutorials are probably the thing to look for. It&#39;s roughly analogous to Android&#39;s GLSurfaceView in that it does most of the setup boiler plate for you and meets the needs of the vast majority of use cases."}], "tags": [], "owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "is_accepted": false, "score": 2, "last_activity_date": 1469708502, "last_edit_date": 1469708502, "creation_date": 1469651664, "answer_id": 38622689, "question_id": 38621546, "link": "https://stackoverflow.com/questions/38621546/how-to-integrate-egl-not-egal-with-ios-c-obj-c/38622689#38622689", "title": "How to integrate EGL (not EGAL) with iOS (C &amp; Obj-C)", "body": "<p>I think the short answer is \"you can't\" - EAGL is the iOS version of the EGL-like functionality, so you'll have to port to using EAGL on iOS.</p>\n\n<p>There are lots of iOS EAGL + OpenGL ES tutorials on the web which can teach you how to get started with the EAGL API; it's not simple enough to warrant an attempt at an answer here.</p>\n"}], "owner": {"reputation": 327, "user_id": 4789239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7cafa12a62a0f706156f9879e4381f41?s=128&d=identicon&r=PG&f=1", "display_name": "setzuiro", "link": "https://stackoverflow.com/users/4789239/setzuiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1469711375, "creation_date": 1469647495, "last_edit_date": 1469711375, "question_id": 38621546, "link": "https://stackoverflow.com/questions/38621546/how-to-integrate-egl-not-egal-with-ios-c-obj-c", "title": "How to integrate EGL (not EGAL) with iOS (C &amp; Obj-C)", "body": "<p>I'm currently working on an iOS port of an Android app built on top of a custom standard C library that uses what appears to be EGL, GLES, GLES2, OpenGL, OpenGL ES, OpenGL ES2.\nUnfortunately, I have no experience with working with the above technologies, particularly pertaining to EGL and OpenGL. I understand that EGL is the interface between OpenGL ES and the underlying native platform window system as well that iOS has adapted EGL into EAGL to support Cocoa's rules.</p>\n\n<p>The resources I've found mostly discuss EGL and android but does not mention much about EGL integration with C and iOS specifically, but a lot of it came back to obj-C and EAGL.</p>\n\n<ol>\n<li>How do I support EGL in C on an iOS (obj-C) platform? Is EGL even necessary for OpenGL?</li>\n<li>Where/which source can I retrieve the EGL library from? I have read that different vendors provide different versions (unfortunately for unknown reasons, the android version has #include  but the actual source file isn't found among the project files)</li>\n<li>If EGL cannot be supported on the iOS platform as a C-level integration, how would can I adapt EAGL for my use case?</li>\n</ol>\n\n<p>Below is some pieces of sample code that I'm working through, unfortunately a lot of the EGL references are undefined, and I have attempted to use this library here (<a href=\"https://github.com/davidandreoletti/libegl\" rel=\"nofollow\">https://github.com/davidandreoletti/libegl</a>) to fill the gaps, but apparently there are a lot of references still undefined else, such as eglChooseConfig, eglGetDisplay, eglinitialize.</p>\n\n<pre><code>//GraphicsDisplay.h\n#include &lt;EGL/egl.h&gt;\n#include &lt;GLES/gl.h&gt;\n#include &lt;GLES2/gl2.h&gt;\n#include &lt;OpenGLES/ES2/gl.h&gt;\n#include &lt;GLES2/gl2ext.h&gt;\n\n...\n\nstatic EGLDisplay eglDisplay\nstatic EGLSurface eglSurface\nstatic EGLContext eglContext\n</code></pre>\n\n\n\n<pre><code>//GraphicsDisplay.c\n#include \"GraphicsDisplay.h\"\n\nSTATUS_CODE getScreenSize(UNIT16 *width, UNIT16 *height) {\n  EGLint displayWidth;\n  EGLint displayHeight;\n\n  //check if there's a screen\n  if(eglDisplay == EGL_NO_DISPLAY &amp;&amp; eglSurface == EGL_NO_SURFACE) {\n    return OK;\n  }\n\n  if(eglQuerySurface(eglDisplay, eglSurface, EGL_WIDTH, displayWidth) == EGL_FALSE) {\n    return FAIL;\n  }\n\n  *width = (UNIT16)displayWidth;\n\n  if(eglQuerySurface(eglDisplay, eglSurface, EGL_HEIGHT, displayHeight) == EGL_FALSE) {\n    return FAIL;\n  }\n\n  *height = (UNIT16)displayHeight;\n\n  return OK;\n}\n\nSTATUS_CODE EGLInitialize() {\n  EGLint format;\n  EGLint numconfigs;\n  EGLConfig config;\n\n  EGLint attribs[] = { EGL_BLUE_SIZE, 4, EGL_GREEN_SIZE, 4, EGL_RED_SIZE, 4, EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT, EGL_NONE };\n  EGLint attribList[] = { EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE };\n\n  eglDisplay = eglGetDisplay(EGL_DEFAULT_DISPLAY);\n  eglInitialize(eglDisplay, 0, 0);\n\n  eglChooseConfig(eglDisplay, attribs, &amp;config, 1 &amp;numConfigs);\n  eglGetConfigAttrib(eglDisplay, config, EGL_NATIVE_VISUAL_ID, &amp;format);\n\n  ... etc...\n}\n</code></pre>\n\n<p>Any insights into this would help.<br>\nCode examples would be most comprehensive and appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "list", "dictionary", "hashtable"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1469647562, "post_id": 38621490, "comment_id": 64628843, "body": "Well ... you cannot assign to an array type. You probably want <code>memcpy</code> or <code>strcpy</code> (or their safe variants)."}, {"owner": {"reputation": 91, "user_id": 1636588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bfcc59da71f337055318acf7af195829?s=128&d=identicon&r=PG&f=1", "display_name": "user1636588", "link": "https://stackoverflow.com/users/1636588/user1636588"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1469647810, "post_id": 38621490, "comment_id": 64628977, "body": "I tried something like that earlier and got segmentation faults so thought I was on the wrong track"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1469677723, "post_id": 38621490, "comment_id": 64638202, "body": "<code>table[hashed_word]-&gt;word</code> is <code>NULL-&gt;word</code> because <code>table[hashed_word] == NULL</code> (also <code>node* table[500];</code> are not initialized)"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1636588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bfcc59da71f337055318acf7af195829?s=128&d=identicon&r=PG&f=1", "display_name": "user1636588", "link": "https://stackoverflow.com/users/1636588/user1636588"}, "edited": false, "score": 0, "creation_date": 1469735370, "post_id": 38623488, "comment_id": 64673801, "body": "Thank you very much. Could you please explain the final two lines(new_node-&gt;next = table[hashed_word]; and table[hashed_word] = new_node;). It looks to me like the new_node-&gt;next pointer is being pointed to the table at index hashed_word and then new_node is assigned to the table at index hashed_word. Dosen&#39;t that end up the in pointer of new_node pointing to new_node?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 91, "user_id": 1636588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bfcc59da71f337055318acf7af195829?s=128&d=identicon&r=PG&f=1", "display_name": "user1636588", "link": "https://stackoverflow.com/users/1636588/user1636588"}, "edited": false, "score": 0, "creation_date": 1469762308, "post_id": 38623488, "comment_id": 64682216, "body": "@user1636588: Those two lines put the new node on the front of the list at that index in the table.  So the table points at the new node and the new node points at whatever was formerly the head of the list in the table.  When the table is empty (at start) that will be NULL."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 2, "last_activity_date": 1469658054, "last_edit_date": 1469658054, "creation_date": 1469654928, "answer_id": 38623488, "question_id": 38621490, "link": "https://stackoverflow.com/questions/38621490/c-linked-list-hash-table-population-issue/38623488#38623488", "title": "C: Linked list hash table population issue", "body": "<p>You're creating a table of 500 pointers, but you're not initializing it to anything.  You then go and check elements to see if they are null, which they might or might not be (they are just garbage).</p>\n\n<p>When you try to add a word, you try to write it into a node already in a table, rather than just linking the newly allocated node into the table.</p>\n\n<p>Your table is also a local variable, so will be inaccessable after the <code>load</code> function returns.</p>\n\n<p>The easiest fix for all of the above is to make your table and <code>struct node</code> definition global:</p>\n\n<pre><code>typedef struct node\n{\n    char word[LENGTH + 1];\n    struct node* next;\n} node;\n\nnode *table[500] = { 0 };\n</code></pre>\n\n<p>and then use a loop to fill in the table;</p>\n\n<pre><code>bool load(const char* dictionary)\n{\n    char word[256];\n    FILE *fp = fopen(\"dictionaries/small\", \"r\");\n    if(fp == NULL)\n        return false;\n\n    while (fscanf(fp, \"%255s\", word) == 1) {\n        if (strlen(word) &gt; LENGTH)\n            continue;  // ignore words that are too long\n        int hashed_word = hash_function(word);\n        node* new_node = malloc(sizeof(node));\n        strcpy(new_node-&gt;word, word);\n        new_node-&gt;next = table[hashed_word];\n        table[hashed_word] = new_node;\n    }\n    fclose(fp);\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 1636588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bfcc59da71f337055318acf7af195829?s=128&d=identicon&r=PG&f=1", "display_name": "user1636588", "link": "https://stackoverflow.com/users/1636588/user1636588"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 38623488, "answer_count": 1, "score": 1, "last_activity_date": 1469658054, "creation_date": 1469647300, "question_id": 38621490, "link": "https://stackoverflow.com/questions/38621490/c-linked-list-hash-table-population-issue", "title": "C: Linked list hash table population issue", "body": "<p>I am new to C and am currently writing a spell checker. To do this I am first loading a dictionary of words into a hash table for easy referencing. Here is my code:</p>\n\n<pre><code>bool load(const char* dictionary)\n{\n    typedef struct node\n    {\n        char word[LENGTH + 1];\n        struct node* next;\n    }\n    node;\n\n    node* table[500];\n\n    FILE *fp;\n    fp = fopen(\"dictionaries/small\", \"r\");\n\n    if(fp == NULL)\n    {\n        return 0;\n    }\n\n    node* new_node = malloc(sizeof(node));\n    fscanf(fp, \"%s\", new_node-&gt;word);\n    int hashed_word = hash_function(new_node-&gt;word);\n\n    if(table[hashed_word] == NULL) //if the table has no value at the index\n    {\n        table[hashed_word]-&gt;word = new_node-&gt;word; //Issue here\n    }  \n    return 0;\n}\n</code></pre>\n\n<p>This code very simply reads the first line (word) of a file and then hashes it (the first word 'cat' gives a hash of 2). I then check that the table dosen't have a word at the index the hash function gives. </p>\n\n<p>I then want to start a linked list with the first link being the first word ('cat') and I'd build it from there. However when I run this code I get a problem here:</p>\n\n<pre><code>table[hashed_word]-&gt;word = new_node-&gt;word; //Issue here\n</code></pre>\n\n<p>and get this error:</p>\n\n<pre><code>dictionary.c:66:34: error: array type 'char [46]' is not assignable\n    table[hashed_word]-&gt;word = new_node-&gt;word;\n    ~~~~~~~~~~~~~~~~~~~~~~~~ ^\n1 error generated.\n</code></pre>\n\n<p>I thought this line would assign the 'word' part of table to be 'cat' (the word part of new_node) but it doesn't     </p>\n\n<p>Would someone please be able to tell me what I'm doing wrong? I imagine it's quite fundamental as pointers are confusing! I've been stuck on this for several days and am starting to get a bit disheartened so would love any help which could be offered.</p>\n"}, {"tags": ["c", "arrays", "heap-memory"], "comments": [{"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 1, "creation_date": 1469647043, "post_id": 38621377, "comment_id": 64628582, "body": "What about <code>*y = (SOME_DATA_TYPE[5]) {v1, v2, v3, v4, v5};</code>?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1469647054, "post_id": 38621377, "comment_id": 64628589, "body": "malloc just wants a size. calculate the size of your nested structure and ask for that many bytes."}, {"owner": {"reputation": 2277, "user_id": 4591810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/61e63df3db53ef926974e7a2dafd3cf7?s=128&d=identicon&r=PG&f=1", "display_name": "hazrmard", "link": "https://stackoverflow.com/users/4591810/hazrmard"}, "reply_to_user": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1469647099, "post_id": 38621377, "comment_id": 64628613, "body": "@DaBler The right side is interpreted as stack memory. I know this because <code>free(y)</code> then crashes my application."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469647223, "post_id": 38621377, "comment_id": 64628678, "body": "If you mean <code>x</code>: that is not an array! If it was an array, it would not be called &quot;pointer&quot;."}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 1, "creation_date": 1469647957, "post_id": 38621377, "comment_id": 64629071, "body": "Then you could use <code>memcpy(y, (SOME_DATA_TYPE[5]){v1, v2, v3, v4, v5}, sizeof(SOME_DATA_TYPE)*5);</code>..."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1469650636, "post_id": 38621377, "comment_id": 64630407, "body": "why do want to dab with one liners? It is better to use more than one line of code for clarity and maintainability."}, {"owner": {"reputation": 2277, "user_id": 4591810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/61e63df3db53ef926974e7a2dafd3cf7?s=128&d=identicon&r=PG&f=1", "display_name": "hazrmard", "link": "https://stackoverflow.com/users/4591810/hazrmard"}, "edited": false, "score": 0, "creation_date": 1469651513, "post_id": 38621377, "comment_id": 64630891, "body": "I find it convenient when I&#39;m testing out new code/features for the first time. Plus I&#39;d like to know if there is a maintainable/readable one-liner available out there. :)"}], "answers": [{"comments": [{"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1469648806, "post_id": 38621813, "comment_id": 64629504, "body": "This is a really nice solution!"}, {"owner": {"reputation": 410, "user_id": 6396592, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-NWst1DO1EMU/AAAAAAAAAAI/AAAAAAAAADY/_o2xOEnsyKA/photo.jpg?sz=128", "display_name": "Meik Vtune", "link": "https://stackoverflow.com/users/6396592/meik-vtune"}, "edited": false, "score": 0, "creation_date": 1469648976, "post_id": 38621813, "comment_id": 64629585, "body": "Sorry, but how what does type mean? I never used <code>...</code>as of right now, could you please briefly explain how it works?"}, {"owner": {"reputation": 41, "user_id": 6635726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/867be283f6c6320c9da2e4dfdafc4189?s=128&d=identicon&r=PG&f=1", "display_name": "Nawar Ismail", "link": "https://stackoverflow.com/users/6635726/nawar-ismail"}, "edited": false, "score": 0, "creation_date": 1469649739, "post_id": 38621813, "comment_id": 64629997, "body": "I modified  it to make it more clear. The ... represents a variable number of parameters. (You have to include &lt;stdarg&gt;) Check tutorialpoint it has a good reference."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1469649934, "post_id": 38621813, "comment_id": 64630096, "body": "<code>arr[i] = args[i];</code>?!?!  That doesn&#39;t even compile.  At best, that&#39;s non-standard.  You need to use <code>arr[i] = va_arg(args, int);</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1469663214, "post_id": 38621813, "comment_id": 64635288, "body": "<code>for (int i = 0; i &lt; length; i++;)</code> does not compile, its <code>va_arg</code>, not <code>va_args</code>, and it should be <code>va_end (args);</code> not <code>va_end</code>. (otherwise, nice function)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469666047, "post_id": 38621813, "comment_id": 64635911, "body": "<code>arr[i] = va_arg(args, void);</code> --&gt; ``void` is not the right type"}], "tags": [], "owner": {"reputation": 41, "user_id": 6635726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/867be283f6c6320c9da2e4dfdafc4189?s=128&d=identicon&r=PG&f=1", "display_name": "Nawar Ismail", "link": "https://stackoverflow.com/users/6635726/nawar-ismail"}, "is_accepted": false, "score": 3, "last_activity_date": 1469667049, "last_edit_date": 1469667049, "creation_date": 1469648458, "answer_id": 38621813, "question_id": 38621377, "link": "https://stackoverflow.com/questions/38621377/how-to-do-one-line-assignment-to-malloc-arrays-in-c/38621813#38621813", "title": "How to do one line assignment to malloc() arrays in C?", "body": "<p>You could define a function like so:</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stdlib.h&gt;\n\nint * intMallocInit (int length, ...) {\n   // Initialize Variable Arguments\n   va_list args;\n   va_start (args, length); \n\n    // Allocate Memory\n    int * arr = malloc (sizeof(int) * length);\n    if (arr == NULL) return NULL;\n\n    // Initialize Array\n    for (int i = 0; i &lt; length; i++) {\n        arr[i] = va_arg(args, int);\n    }\n\n    // Clean Up and Return\n    va_end(args)\n    return arr;\n}\n</code></pre>\n\n<p>And we could call it like so:</p>\n\n<pre><code>int len = 3;\nint * myArray = intMallocInit (len, 4, 5, 2);\nif (myArray == NULL) return 0; \n\nfor (int i = 0; i &lt; len; i++) {\n    printf(\"%d,\", myArray [i]);\n}\n</code></pre>\n\n<p><strong>Output:</strong> 4,5,2,</p>\n\n<p><strong>Note:</strong> We could also define floatMallocInit (), etc. simply by replacing every instance of \"int\" in the above function to \"float\"</p>\n\n<p>You could also use void pointers, or enum&amp; switch, but I wont go there.</p>\n\n<p><strong>Untested attempt at general function</strong>\nIm sure theres a clever work around fhe switchs but this is what I can come up with.</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stdlib.h&gt;\nenum {INT, FLOAT /* etc...*/}\n\n int getSize(int type) {\n     int typeSize = 0;\n     switch (type) {\n        case INT: \n             typeSize = sizeof (int);\n             break;\n        case FLOAT:\n             typeSize = sizeof (float);\n             break;\n        // Etc...\n        default:\n             return -1;\n    }\n    return typeSize;\n }\n\n\nvoid * mallocInit (int type, int length, ...) {\n   // Initialize Variable Arguments\n   va_list args;\n   va_start (args, length); \n\n    // Get Size of type\n    int typeSize = getSize(type);\n    if (typeSize == -1) return NULL;\n\n    // Allocate Memory\n    void * arr = malloc (typeSize * length);\n    if (arr == NULL) return NULL;\n\n    // Initialize Array, Maybe va_copy can be used? No good reference\n    for (int i = 0; i &lt; length; i++) {\n         switch(type) {\n            case INT:\n             arr[i] = va_args(args, int);\n             break;\n            // Etc..\n        }\n    }\n\n    // Clean Up and Return\n    va_end(args)\n    return arr;\n}\n</code></pre>\n\n<p>Called with</p>\n\n<pre><code>float myArray = mallocInit (FLOAT, 3, 1, 5, 7);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469655406, "post_id": 38621955, "comment_id": 64632820, "body": "This code is incorrect - it may call Handle_OutOfMemory() if the array size is zero."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469656914, "post_id": 38621955, "comment_id": 64633499, "body": "@TLW Good eye.  Yes, for a general test of the result of <code>malloc()</code>, code should use <code>if (y == NULL &amp;&amp; element_count &gt; 0) Handle_OutOfMemory();</code>  Of course, as OP wants &quot;initialize an array&quot;, an array size of 0 has other problems beyond <code>malloc()</code> like <code>SOME_DATA_TYPE[element_count]</code>.  I would have coded the <code>element_count &gt; 0</code> test had <code>element_count</code> been a variable."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1469665446, "post_id": 38621955, "comment_id": 64635801, "body": "It&#39;d be possible to check the malloc result in the one-liner with some abuse of the comma operator... certainly would take us out of the bounds of &quot;maintainable/readable&quot; though"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469665651, "post_id": 38621955, "comment_id": 64635846, "body": "@M.M Agreed.  Yet it sounds like OP is primary doing this for test purpose anyways, so many OOM it not a concern?"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1614740781, "last_edit_date": 1614740781, "creation_date": 1469648933, "answer_id": 38621955, "question_id": 38621377, "link": "https://stackoverflow.com/questions/38621377/how-to-do-one-line-assignment-to-malloc-arrays-in-c/38621955#38621955", "title": "How to do one line assignment to malloc() arrays in C?", "body": "<p>The first issue about &quot;initializing&quot; the result of <code>malloc()</code> is that the allocation may fail.  Here <code>y</code> is <em>initialized</em> to some pointer value.  The data referenced is still indeterminate.</p>\n<pre><code>#define  element_count  5\nSOME_DATA_TYPE *y = malloc(sizeof *y * element_count);\nif (y == NULL) Handle_OutOfMemory();\n</code></pre>\n<p>With C11, code can use <em>compound literals</em> to set, not <em>initialize</em>, the data pointed to by <code>y</code>.</p>\n<pre><code>memcpy(y, (SOME_DATA_TYPE[element_count]) {v1, v2, v3, v4, v5}, sizeof *y * element_count);\n</code></pre>\n<hr />\n<p>Using a <em>direct</em> one-liner without checking the allocation would not be robust programming.</p>\n<pre><code>// one-liner, but not robust code\nSOME_DATA_TYPE *y = memcpy(malloc(sizeof *y * element_count), \n    (SOME_DATA_TYPE[element_count]) {v1, v2, v3, v4, v5}, sizeof *y * element_count);\n</code></pre>\n<hr />\n<p>Notice code uses the <code>sizeof *pointer_variable * element_count</code> rather than <code>sizeof (pointer_variable_dereferenced_type) * element_count</code> as easier to code, less error prone, easier to review and maintain.  Either approach will work.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469657341, "post_id": 38622091, "comment_id": 64633638, "body": "Hmmm, good to know.  LSNED.   Perhaps could use a <code>#define MEMDUP(x) (memdup((x), sizeof (x)))</code> to simply the call to <code>MEMDUP((SOME_DATA_TYPE[5]) {v1, v2, v3, v4, v5})</code>?"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1469659725, "last_edit_date": 1469659725, "creation_date": 1469649393, "answer_id": 38622091, "question_id": 38621377, "link": "https://stackoverflow.com/questions/38621377/how-to-do-one-line-assignment-to-malloc-arrays-in-c/38622091#38622091", "title": "How to do one line assignment to malloc() arrays in C?", "body": "<p>One way to do it without getting too far away from the natural C memory management philosophy, is to use a <a href=\"http://man.cx/memdup(3)\" rel=\"nofollow\"><code>memdup</code></a>-like function. Since it is not standard, you might have to implement it yourself</p>\n\n<pre><code>SOME_DATA_TYPE *y = memdup(\n  (SOME_DATA_TYPE[5]) {v1, v2, v3, v4, v5},\n  5 * sizeof(SOME_DATA_TYPE)); \n</code></pre>\n"}], "owner": {"reputation": 2277, "user_id": 4591810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/61e63df3db53ef926974e7a2dafd3cf7?s=128&d=identicon&r=PG&f=1", "display_name": "hazrmard", "link": "https://stackoverflow.com/users/4591810/hazrmard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4275, "favorite_count": 0, "accepted_answer_id": 38621955, "answer_count": 3, "score": 7, "last_activity_date": 1614740781, "creation_date": 1469646900, "question_id": 38621377, "link": "https://stackoverflow.com/questions/38621377/how-to-do-one-line-assignment-to-malloc-arrays-in-c", "title": "How to do one line assignment to malloc() arrays in C?", "body": "<p>In C I can initialize an array on the stack like so:</p>\n\n<pre><code>SOME_DATA_TYPE* x = (SOME_DATA_TYPE[5]) {v1, v2, v3, v4, v5};\n</code></pre>\n\n<p>Is there a similar one-line method to assign values to a <code>malloc()</code>-ed array on the heap?  </p>\n\n<pre><code>SOME_DATA_TYPE* y = malloc(sizeof(SOME_DATA_TYPE)*5);  \n// what comes here?  \n</code></pre>\n\n<p>Or do I have to iterate over the array and assign values individually?</p>\n"}, {"tags": ["c", "data-structures", "singly-linked-list"], "comments": [{"owner": {"reputation": 5537, "user_id": 3059893, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fUOFo.png?s=128&g=1", "display_name": "JavaHopper", "link": "https://stackoverflow.com/users/3059893/javahopper"}, "edited": false, "score": 0, "creation_date": 1469648377, "post_id": 38621275, "comment_id": 64629262, "body": "in create(int num) function, your while loop makes the pointer temp1 land on NULL (end of the list). There after, temp1-&gt;next=ptr; causes error, because you are trying to access location NULL"}], "answers": [{"tags": [], "owner": {"reputation": 5537, "user_id": 3059893, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fUOFo.png?s=128&g=1", "display_name": "JavaHopper", "link": "https://stackoverflow.com/users/3059893/javahopper"}, "is_accepted": false, "score": 0, "last_activity_date": 1469647148, "creation_date": 1469647148, "answer_id": 38621450, "question_id": 38621275, "link": "https://stackoverflow.com/questions/38621275/linked-list-entering-node-at-end-each-time-while-get-input-from-user-but-somethi/38621450#38621450", "title": "Linked-list entering node at end each time while get input from user but something went wrong with any method", "body": "<p>This should help you!</p>\n\n<pre><code>void create(int num)\n{\n    printf(\"\\n\");\n    if(head==NULL)\n    {\n        node *temp=(node*)malloc(sizeof(node));\n        temp-&gt;data=num;\n        temp-&gt;next=head;\n        head=temp;\n\n\n    }\n\n    else\n    {\n        node *temp1=head;\n        //Modified the condition to traverse till the last node, not the end of it\n        while(temp1-&gt;next != NULL)\n        {\n            temp1=temp1-&gt;next;\n\n        }\n\n        node *ptr=(node*)malloc(sizeof(node));\n\n        ptr-&gt;data=num;\n        ptr-&gt;next=temp1-&gt;next;\n        temp1-&gt;next=ptr;\n\n\n    }\n\n}\n</code></pre>\n\n<p>(Note: there might be other issues in the program, I have not run it)</p>\n"}, {"tags": [], "owner": {"reputation": 2528, "user_id": 2844464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9f29e9facc25e69a329d36185d1f44?s=128&d=identicon&r=PG", "display_name": "Alex Santos", "link": "https://stackoverflow.com/users/2844464/alex-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1469647174, "creation_date": 1469647174, "answer_id": 38621459, "question_id": 38621275, "link": "https://stackoverflow.com/questions/38621275/linked-list-entering-node-at-end-each-time-while-get-input-from-user-but-somethi/38621459#38621459", "title": "Linked-list entering node at end each time while get input from user but something went wrong with any method", "body": "<p>I'm looking at this part of the <code>create</code> function</p>\n\n<pre><code>node *temp1=head;\nwhile(temp1!=NULL)\n{\n  temp1=temp1-&gt;next;\n}\n\nnode *ptr=(node*)malloc(sizeof(node));\n\nptr-&gt;data=num;\nptr-&gt;next=temp1-&gt;next;\ntemp1-&gt;next=ptr;\n</code></pre>\n\n<p>And it seems like you iterate over the list until you reach the end. At which point <code>temp1 == NULL</code>. But then you try to access <code>temp1-&gt;next</code> which should be an unaccessible memory (remember that you have just set it to <code>NULL</code> in the previous <code>while-loop</code>.</p>\n\n<p>A debugger can help you with this situations (or even printing some information around). A widely used debugger is <strong>gdb</strong>.</p>\n\n<p><em>(Note: there might be other issues in the program, I have not run it)</em></p>\n"}], "owner": {"reputation": 11, "user_id": 6511513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047d6a1553298eff23fe57beb51d2fd7?s=128&d=identicon&r=PG&f=1", "display_name": "R.Meon", "link": "https://stackoverflow.com/users/6511513/r-meon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469652022, "creation_date": 1469646527, "last_edit_date": 1469652022, "question_id": 38621275, "link": "https://stackoverflow.com/questions/38621275/linked-list-entering-node-at-end-each-time-while-get-input-from-user-but-somethi", "title": "Linked-list entering node at end each time while get input from user but something went wrong with any method", "body": "<p>While trying to append node at the end of the linked list for each input given by user, there is something wrong with this code. I'm not getting it why this is happening? Could someone please point out what the problem is? If any one knows, please suggest me something to fix this bug?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n//structure with two fields \nstruct node\n{\n    int data;\n    struct node *next;\n\n};\n// data type definition \ntypedef struct node node;\n//pointer to node which initially set to NULL\nnode *head=NULL;\n\n//fucntion create and display\nvoid create(int num);\nvoid display();\n\n\nmain()\n{\n    int n,i,num;\n\n    printf(\"enter the no of nodes : \");\n    scanf (\"%d\",&amp;n);\n    for(i=0;i&lt;n;++i)\n    {\n        printf(\"enter the data : \");\n        scanf(\"%d\",&amp;num);\n        create(num);\n\n    }\n    display();\n}\n</code></pre>\n\n<blockquote>\n  <p>//function create</p>\n</blockquote>\n\n<pre><code>void create(int num)\n{\n    printf(\"\\n\");\n    if(head==NULL)\n    {\n        node *temp=(node*)malloc(sizeof(node));\n        temp-&gt;data=num;\n        temp-&gt;next=head;\n        head=temp;\n\n\n    }\n\n    else\n    {\n        node *temp1=head;\n        while(temp1!=NULL)\n        {\n            temp1=temp1-&gt;next;\n\n        }\n\n        node *ptr=(node*)malloc(sizeof(node));\n\n        ptr-&gt;data=num;\n        ptr-&gt;next=temp1-&gt;next;\n        temp1-&gt;next=ptr;\n\n\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>//function display()</p>\n</blockquote>\n\n<pre><code>void display()\n{\n    node *temp;\n    temp=head;\n\n    printf(\"list is : \");\n    while(temp!=NULL)\n    {\n        printf(\"%d-&gt;\",temp-&gt;data);\n        temp=temp-&gt;next;\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "linked-list", "arguments"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1469645145, "post_id": 38620809, "comment_id": 64627535, "body": "Would you be able to solve the problem if the entries were in an array instead of a list? If so, imagine what that solution would look like."}, {"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1469645933, "post_id": 38620809, "comment_id": 64627996, "body": "No, I don&#39;t think that&#39;d be what they want me to do after the &#39;pointers&#39; chapter :)"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1469646905, "post_id": 38620809, "comment_id": 64628511, "body": "The point is to think about a similar you can solve, and look for similarities between that problem and the one you are trying to solve, and generalize the known solution."}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469646193, "post_id": 38620983, "comment_id": 64628135, "body": "You&#39;re a god, thank you. Can you please explain the need for the if statement? I see that the program works with just the body."}, {"owner": {"reputation": 367, "user_id": 4696140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee691a9a7e07e3a108af6d607eecbb59?s=128&d=identicon&r=PG", "display_name": "Pedro David", "link": "https://stackoverflow.com/users/4696140/pedro-david"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 1, "creation_date": 1469646290, "post_id": 38620983, "comment_id": 64628188, "body": "Try it with a entry that has a single element only ;) (or try calling it with &amp;n3)"}, {"owner": {"reputation": 367, "user_id": 4696140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee691a9a7e07e3a108af6d607eecbb59?s=128&d=identicon&r=PG", "display_name": "Pedro David", "link": "https://stackoverflow.com/users/4696140/pedro-david"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 1, "creation_date": 1469646437, "post_id": 38620983, "comment_id": 64628281, "body": "But a real explanation, if start-&gt;next is NULL it can&#39;t be converted to a &quot;struct entry&quot; so it doesn&#39;t have a &quot;next&quot; field. So if it doesn&#39;t have a &quot;next&quot;, you will have a nasty memory access doing start-&gt;next-&gt;next (because start-&gt;next is &quot;nothing&quot; and has no following &quot;-&gt;next&quot;)"}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "edited": false, "score": 0, "creation_date": 1469646896, "post_id": 38620983, "comment_id": 64628504, "body": "I got a segmentation fault testing this function by removing all 3 elements. I believe the reason is that at some point, list_pointer will be NULL and the start variable in the function will be the NULL pointer and when you test against start-&gt;next, you crash."}, {"owner": {"reputation": 367, "user_id": 4696140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee691a9a7e07e3a108af6d607eecbb59?s=128&d=identicon&r=PG", "display_name": "Pedro David", "link": "https://stackoverflow.com/users/4696140/pedro-david"}, "edited": false, "score": 0, "creation_date": 1469647258, "post_id": 38620983, "comment_id": 64628695, "body": "What do you mean? If you pass a NULL value yes, it will be a bad memory access, but that is the user fault. You could make an if case to guard against (start == NULL) but I don&#39;t usually do that. Maybe it&#39;s a bad practice from me"}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "edited": false, "score": 0, "creation_date": 1469647833, "post_id": 38620983, "comment_id": 64628990, "body": "I agree with you. My comment only applied to his code in the main function had he removed all 3 items. He only tested one case and the point was for his code to be more defensive. But what if you want to remove the last node? start-&gt;next of the last node is NULL, so it does not seem possible to remove the last node."}, {"owner": {"reputation": 367, "user_id": 4696140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee691a9a7e07e3a108af6d607eecbb59?s=128&d=identicon&r=PG", "display_name": "Pedro David", "link": "https://stackoverflow.com/users/4696140/pedro-david"}, "edited": false, "score": 0, "creation_date": 1469648114, "post_id": 38620983, "comment_id": 64629142, "body": "The exercise asked to remove the element after the one passed as argument, if you wan&#39;t to remove the last you have to pass the one before last. In this case it works and next will become NULL."}], "tags": [], "owner": {"reputation": 367, "user_id": 4696140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee691a9a7e07e3a108af6d607eecbb59?s=128&d=identicon&r=PG", "display_name": "Pedro David", "link": "https://stackoverflow.com/users/4696140/pedro-david"}, "is_accepted": true, "score": 1, "last_activity_date": 1469645473, "creation_date": 1469645473, "answer_id": 38620983, "question_id": 38620809, "link": "https://stackoverflow.com/questions/38620809/how-can-i-rewrite-my-removestring-function-with-only-one-argument/38620983#38620983", "title": "How can I rewrite my removeString function with only one argument?", "body": "<p>I think this is what you're looking for:</p>\n\n<pre><code>void removeEntry(entry *start){\n    if(start-&gt;next != NULL) {\n        start-&gt;next = start-&gt;next-&gt;next;\n    } \n    //else you can't really remove the next one, probably log or something then\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469646247, "post_id": 38621146, "comment_id": 64628164, "body": "Thank you, how does the double* work in this regard?"}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 1, "creation_date": 1469646349, "post_id": 38621146, "comment_id": 64628227, "body": "It is a pointer to a pointer variable, in other words, the address of the list_pointer variable; this is what enables you to change its value from within the function."}, {"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469646415, "post_id": 38621146, "comment_id": 64628265, "body": "I see! Thank you so much"}], "tags": [], "owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "is_accepted": false, "score": 1, "last_activity_date": 1469647209, "last_edit_date": 1469647209, "creation_date": 1469646019, "answer_id": 38621146, "question_id": 38620809, "link": "https://stackoverflow.com/questions/38620809/how-can-i-rewrite-my-removestring-function-with-only-one-argument/38621146#38621146", "title": "How can I rewrite my removeString function with only one argument?", "body": "<p>As an alternative, since your exercice is basically asking you to always delete the first element, you need only update your list pointer to point to the node following the node to be \"removed\". Your prototype:</p>\n\n<pre><code>void removeEntry(struct entry **start);\n</code></pre>\n\n<p>In main(), call:</p>\n\n<pre><code>removeEntry(&amp;list_pointer);\n</code></pre>\n\n<p>Your function passes the address of the list pointer (so it can be updated):</p>\n\n<pre><code>void removeEntry(struct entry **list)\n{\n    if (*list)\n        (*list) = (*list)-&gt;next;\n}\n</code></pre>\n\n<p>I should add that this assumes the list parameter is always a valid pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469646553, "post_id": 38621262, "comment_id": 64628344, "body": "I haven&#39;t done this with: <code>struct entry *list_pointer = &amp;n1;</code>?"}, {"owner": {"reputation": 231, "user_id": 5988148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c103a6234e60ea3c2c3fe3b54f0a12?s=128&d=identicon&r=PG&f=1", "display_name": "Have Compiler -- Will Travel", "link": "https://stackoverflow.com/users/5988148/have-compiler-will-travel"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469646928, "post_id": 38621262, "comment_id": 64628520, "body": "@MattCleary You don&#39;t have the dummy structure incorporated in the program."}, {"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469647141, "post_id": 38621262, "comment_id": 64628635, "body": "Exercise 3 asked me to create a dummy structure that points to the beginning of the list. That&#39;s what I&#39;ve done..."}, {"owner": {"reputation": 231, "user_id": 5988148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c103a6234e60ea3c2c3fe3b54f0a12?s=128&d=identicon&r=PG&f=1", "display_name": "Have Compiler -- Will Travel", "link": "https://stackoverflow.com/users/5988148/have-compiler-will-travel"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469647694, "post_id": 38621262, "comment_id": 64628911, "body": "@MattCleary Please post your answer to exercise 10.3 and point out the dummy structure."}, {"owner": {"reputation": 231, "user_id": 5988148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c103a6234e60ea3c2c3fe3b54f0a12?s=128&d=identicon&r=PG&f=1", "display_name": "Have Compiler -- Will Travel", "link": "https://stackoverflow.com/users/5988148/have-compiler-will-travel"}, "reply_to_user": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 1, "creation_date": 1469648857, "post_id": 38621262, "comment_id": 64629531, "body": "@MattCleary Exercise 10.3 calls for inserting a new entry at the front of the list. Your program for that exercise doesn&#39;t do that. You won&#39;t be able to complete exercise 10.4 until you work out exercise 10.3 correctly."}, {"owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "edited": false, "score": 0, "creation_date": 1469653537, "post_id": 38621262, "comment_id": 64631890, "body": "Apologies for my previous lack of appreciation, I was a little frustrated, not that that is an excuse. I&#39;ve looked it over with your recommendations and fixed it. Thank you very much!"}], "tags": [], "owner": {"reputation": 231, "user_id": 5988148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c103a6234e60ea3c2c3fe3b54f0a12?s=128&d=identicon&r=PG&f=1", "display_name": "Have Compiler -- Will Travel", "link": "https://stackoverflow.com/users/5988148/have-compiler-will-travel"}, "is_accepted": false, "score": 1, "last_activity_date": 1469646575, "last_edit_date": 1469646575, "creation_date": 1469646450, "answer_id": 38621262, "question_id": 38620809, "link": "https://stackoverflow.com/questions/38620809/how-can-i-rewrite-my-removestring-function-with-only-one-argument/38621262#38621262", "title": "How can I rewrite my removeString function with only one argument?", "body": "<p>You didn't include all the information the book states for this exercise.</p>\n\n<p>Exercise 10.4 from Stephen Kochan's <em>Programming in C, 4th edition</em> reads:</p>\n\n<blockquote>\n  <p>Write a function called removeEntry() to remove an entry from a linked \n  list. The sole argument to the procedure should be a pointer to the list.\n  Have the function remove the entry <em>after</em> the one pointed to by the\n  argument. (Why can't you remove the entry pointed to by the argument?) You\n  need to use the special structure you set up in exercise 3 to handle the\n  special case of removing the first element from the list.</p>\n</blockquote>\n\n<p>You need to use the dummy structure described in exercise 10.3 -- this is carefully explained in the book.</p>\n"}], "owner": {"reputation": 437, "user_id": 6557079, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7ade9a92d724b19b0c7cc35bb300fc7d?s=128&d=identicon&r=PG&f=1", "display_name": "gloopit", "link": "https://stackoverflow.com/users/6557079/gloopit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 38620983, "answer_count": 3, "score": 2, "last_activity_date": 1469648008, "creation_date": 1469644827, "last_edit_date": 1469648008, "question_id": 38620809, "link": "https://stackoverflow.com/questions/38620809/how-can-i-rewrite-my-removestring-function-with-only-one-argument", "title": "How can I rewrite my removeString function with only one argument?", "body": "<p>I'm working on an exercise in 'Programming with C'.</p>\n\n<p>I have to create a linked-list and then create a function that removes an entry.</p>\n\n<p>I have managed to do this without too many problems. However, the exercise specifically asks that I do this with just one argument. I cannot work out how to do this.</p>\n\n<p>This is the exercise: <em>\"Write a function called <code>removeEntry()</code> to remove an entry from a linked list. The sole argument to the procedure should be a pointer to the list. Have the function remove the entry after the one by the argument.\"</em></p>\n\n<p>My code is below, as you can see, I've made it work with two arguments. How can I possibly assign the next value in order to remove the one in the middle without using two? I've reread everything within the book, searched this site and used Google extensively and I still can't work this out.</p>\n\n<p>Thank you.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nstruct entry\n    {\n        int value;\n        struct entry *next;\n    };\n\n\nvoid removeEntry(struct entry *start, struct entry *remove);\n\n\nint main (void)\n{\n\n    //declarations\n    struct entry n1, n2, n3;\n    struct entry *list_pointer = &amp;n1;\n\n\n    //creates list values and links\n    n1.value = 100;\n    n1.next = &amp;n2;\n\n    n2.value = 200;\n    n2.next = &amp;n3;\n\n    n3.value = 300;\n    n3.next = (struct entry *) 0;\n\n    //prints out all list values\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    //resets list_pointer back to start\n    list_pointer = &amp;n1;\n\n    //calls function and removes n2 from list by directly linking n1 to n3\n    removeEntry(&amp;n1, &amp;n3);\n\n    //print out amended list\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    return 0;\n}\n\nvoid removeEntry(struct entry *start, struct entry *remove)\n{\n    start-&gt;next = remove;\n}\n</code></pre>\n\n<p>This is my code for exercise 10.3.</p>\n\n<p>The dummy structure is <code>struct entry *list_pointer = &amp;n1;</code> which is used to reference the start of the list throughout the program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct entry\n    {\n        int value;\n        struct entry *next;\n    };\n\nvoid insertEntry(struct entry *addOn, struct entry *element);\n\nint main (void)\n{\n\n\n    struct entry n1, n2, n3, addOn;\n    struct entry *list_pointer = &amp;n1;\n\n    n1.value = 100;\n    n1.next = &amp;n2;\n\n    n2.value = 200;\n    n2.next = &amp;n3;\n\n    n3.value = 300;\n    n3.next = (struct entry *) 0;\n\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    list_pointer = &amp;n1;\n    insertEntry(&amp;addOn, &amp;n1);\n    list_pointer = &amp;addOn;\n\n    while(list_pointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", list_pointer-&gt;value);\n        list_pointer = list_pointer-&gt;next;\n    }\n\n    return 0;\n}\n\nvoid insertEntry(struct entry *addOn, struct entry *element)\n{\n\n    //element-&gt;next = addOn;\n    addOn-&gt;value = 400;\n    addOn-&gt;next = element;\n    //addOn-&gt;next = (struct entry *) 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "algorithm", "input", "char"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1469644803, "post_id": 38620677, "comment_id": 64627328, "body": "You basically want the WinAPI equivalent of <code>curses</code>. Windows offers <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682010(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Consoles</a>."}, {"owner": {"reputation": 35, "user_id": 3794830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BHrdg.jpg?s=128&g=1", "display_name": "ThE411", "link": "https://stackoverflow.com/users/3794830/the411"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1469645245, "post_id": 38620677, "comment_id": 64627603, "body": "@jxh That doesn&#39;t really help."}, {"owner": {"reputation": 7246, "user_id": 4642485, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7b3310e1ab01e476e770241fb51a74cd?s=128&d=identicon&r=PG", "display_name": "Chris Gong", "link": "https://stackoverflow.com/users/4642485/chris-gong"}, "edited": false, "score": 0, "creation_date": 1469645363, "post_id": 38620677, "comment_id": 64627677, "body": "@ThE411 I pretty much expanded on user3121023&#39;s comment in my answer. I hope it&#39;s helpful."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1469645372, "post_id": 38620677, "comment_id": 64627684, "body": "I see, you are trying to manage cursor movement manually. Just don&#39;t move the cursor backwards if there wasn&#39;t any eraseable input provided."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469646042, "post_id": 38620677, "comment_id": 64628042, "body": "<code>stdin</code> is often <i>line buffered</i>.  Input functions like <code>getch()</code> do not receive any input until a line of input was entered."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469646438, "post_id": 38620677, "comment_id": 64628284, "body": "<code>goto</code> has its use-cases, but your code is none of them! Use a loop statement!"}, {"owner": {"reputation": 7246, "user_id": 4642485, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7b3310e1ab01e476e770241fb51a74cd?s=128&d=identicon&r=PG", "display_name": "Chris Gong", "link": "https://stackoverflow.com/users/4642485/chris-gong"}, "edited": false, "score": 0, "creation_date": 1469648996, "post_id": 38620677, "comment_id": 64629599, "body": "I agree that a loop would be more optimal here. Nevertheless OP, if you found the answer helpful please make sure to mark it as accepted Good luck coding!"}], "answers": [{"tags": [], "owner": {"reputation": 7246, "user_id": 4642485, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7b3310e1ab01e476e770241fb51a74cd?s=128&d=identicon&r=PG", "display_name": "Chris Gong", "link": "https://stackoverflow.com/users/4642485/chris-gong"}, "is_accepted": false, "score": 0, "last_activity_date": 1469645552, "last_edit_date": 1469645552, "creation_date": 1469645249, "answer_id": 38620920, "question_id": 38620677, "link": "https://stackoverflow.com/questions/38620677/stop-backspace-form-erasing-certain-output/38620920#38620920", "title": "Stop backspace form erasing certain output", "body": "<p>Keep a count variable to tell whether or not you should delete. For example, start the count at 0, and increment it everytime you type an actual character, and decrement it everytime you successfully delete a character. When count is 0, then you shouldn't be allowed to delete and nothing happens to the count variable. It should like this,</p>\n\n<pre><code>int main(void)\n{\n    int ch = 0;\n    int count = 0;\n    printf(\"Enter an integer:\\t\");\n    here: ch = getch();\n    if(ch == 8) // 8 is ASCII for a backspace\n    {\n        if(count &gt; 0)\n        {\n            ch = 0;\n            count--;\n            printf(\"\\b \\b\");\n        }\n        goto here;\n    }\n    else\n    {\n        printf(\"%c\",ch);\n        count++;\n        goto here;\n    }\n    //perhaps add an else-if statement here so that\n    //when the enter key is pressed, you don't execute 'goto here'\n\n// some output\n\nreturn 0;\n}\n</code></pre>\n\n<p>Also, I changed the location of <code>here</code> to <code>ch = getch();</code> because you don't want each backspace to reprint \"Enter an integer:\"</p>\n"}], "owner": {"reputation": 35, "user_id": 3794830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BHrdg.jpg?s=128&g=1", "display_name": "ThE411", "link": "https://stackoverflow.com/users/3794830/the411"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469646357, "creation_date": 1469644370, "last_edit_date": 1469646357, "question_id": 38620677, "link": "https://stackoverflow.com/questions/38620677/stop-backspace-form-erasing-certain-output", "title": "Stop backspace form erasing certain output", "body": "<p>I am using <em>getch()</em> to read input from the keyboard. But if the user enters a wrong number by mistake, they would naturally want to correct it. Pressing the backspace then makes <em>ch</em> equal to 0 again, and clears the wrongly entered number from the output (so you cannot see it anymore). I used the ASCII 8 character for a backspace as <em>getch()</em> works with ASCII numbers. The backspace now works, but it can now erase the entire output line, including 'Enter an integer:'. How can I go about making the 'Enter an integer:' part unerasable without putting the user's input on a newline? For example:</p>\n\n<pre><code>int main(void)\n{\n    int ch = 0;\n\n    here: printf(\"Enter an integer:\\t\");\n    ch = getch();\n    if(ch == 8) // 8 is ASCII for a backspace\n    {\n         ch = 0;\n         printf(\"\\b \\b\");\n         goto here;\n    } \n\n    // some output\n\n    return 0;\n}\n</code></pre>\n\n<p>I don't want \"Enter an integer:' and the numbers inputted by the user to be on 2 different lines in the output.</p>\n"}, {"tags": ["c", "file", "binary"], "comments": [{"owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "edited": false, "score": 1, "creation_date": 1469643996, "post_id": 38620560, "comment_id": 64626861, "body": "Do you want to know for C or for C++? Please remove the inappropriate tag."}, {"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "edited": false, "score": 0, "creation_date": 1469644115, "post_id": 38620560, "comment_id": 64626933, "body": "In C, you can take a look at the fread() function"}, {"owner": {"reputation": 778, "user_id": 1836540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4466fdeadf066a319e6afba5df630960?s=128&d=identicon&r=PG", "display_name": "Vyacheslav Napadovsky", "link": "https://stackoverflow.com/users/1836540/vyacheslav-napadovsky"}, "edited": false, "score": 0, "creation_date": 1469644208, "post_id": 38620560, "comment_id": 64626994, "body": "try fread / fwrite in C. In C++ there&#39;s ifstream, with second parameter ios::binary, as far as I remember."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1469644295, "post_id": 38620560, "comment_id": 64627039, "body": "You should check the result of <code>fopen</code> (seems the mode is wrong)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1469644349, "post_id": 38620560, "comment_id": 64627062, "body": "You are more likely to get help if you post the code you have tried, where you encounter problems, the output you expect to see, and the actual output you are seeing. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1469644763, "post_id": 38620560, "comment_id": 64627306, "body": "What does your code look like with <code>getc()</code>?  It shouldn&#39;t give you an early EOF on binary files..."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1469645673, "post_id": 38620560, "comment_id": 64627846, "body": "There is a common error in the use of <code>getc()</code> that can result in the appearance of an <code>EOF</code> before the actual end of the file. But we can&#39;t tell whether you made that error unless you show us your code."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 4615361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f33b7c498f1f0d76570dd0f43de1161?s=128&d=identicon&r=PG&f=1", "display_name": "slav", "link": "https://stackoverflow.com/users/4615361/slav"}, "is_accepted": false, "score": 0, "last_activity_date": 1469644494, "creation_date": 1469644494, "answer_id": 38620712, "question_id": 38620560, "link": "https://stackoverflow.com/questions/38620560/binary-file-read-operations-in-c/38620712#38620712", "title": "Binary file read operations in C?", "body": "<p>You can read using fread:</p>\n\n<pre><code>size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream);\n</code></pre>\n\n<p>see <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fread.htm\" rel=\"nofollow\">fread</a></p>\n"}, {"comments": [{"owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 0, "creation_date": 1469645015, "post_id": 38620754, "comment_id": 64627453, "body": "In C, is guaranteed that char is in the range 0-255, that is, is unsigned?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 1, "creation_date": 1469645106, "post_id": 38620754, "comment_id": 64627510, "body": "@AntonioGarrido Yes.  From the man page: <i><code>fgetc()</code> reads the next character from  stream  and  returns  it  as  an  <code>unsigned char</code> cast to an <code>int</code>, or <code>EOF</code> on end of file or error</i>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1469645598, "post_id": 38620754, "comment_id": 64627801, "body": "It should say &quot;converted&quot;, not &quot;cast&quot;."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1469645604, "last_edit_date": 1469645604, "creation_date": 1469644612, "answer_id": 38620754, "question_id": 38620560, "link": "https://stackoverflow.com/questions/38620560/binary-file-read-operations-in-c/38620754#38620754", "title": "Binary file read operations in C?", "body": "<p>Two things to consider:</p>\n\n<p>First, when opening a binary file for reading with <code>fopen</code>, use mode <code>\"rb\"</code>.  This opens the file in binary mode and therefore doesn't give special treatment to certain characters.  Note that on Linux this doesn't matter, but on Windows it does.</p>\n\n<p>Second, be aware that <code>fgetc</code> returns a character casted to a <code>int</code>.  This allows you to check for <code>EOF</code>.  If the result is not <code>EOF</code>, it is a character will a value from 0 to 255 (assuming of course <code>CHAR_BIT</code> is 8).</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 6646410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8eb017ba5d7bea781885751fd30a4e8?s=128&d=identicon&r=PG&f=1", "display_name": "Hoang Nguyen", "link": "https://stackoverflow.com/users/6646410/hoang-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1469647154, "creation_date": 1469647154, "answer_id": 38621453, "question_id": 38620560, "link": "https://stackoverflow.com/questions/38620560/binary-file-read-operations-in-c/38621453#38621453", "title": "Binary file read operations in C?", "body": "<p>In binary files, the process to read from files is usually made by function <code>fread</code>.Besides that if you want to iterate the process to the end of file. You can use  <code>while</code></p>\n\n<pre><code>while(!feof(fp)) // still not read to the end of file yet\nif (fread(buffer, sizeof(...),1,fp)==1) //put single variable to the array[]\n....\n</code></pre>\n\n<p>`</p>\n\n<p>. </p>\n"}], "owner": {"reputation": 11, "user_id": 5184942, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8zJm4zRbnx4/AAAAAAAAAAI/AAAAAAAAAco/CRJ1BwJBHmE/photo.jpg?sz=128", "display_name": "naveen sahukari", "link": "https://stackoverflow.com/users/5184942/naveen-sahukari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "closed_date": 1469687808, "answer_count": 3, "score": 0, "last_activity_date": 1469647154, "creation_date": 1469643963, "last_edit_date": 1469644277, "question_id": 38620560, "link": "https://stackoverflow.com/questions/38620560/binary-file-read-operations-in-c", "closed_reason": "Not suitable for this site", "title": "Binary file read operations in C?", "body": "<p>I am trying to read the contents of a binary file as a group of n bytes each time and place them in a character buffer and do some operations on the buffer. For the next iteration I have to read next n bytes from the file and place it in the buffer and so on until the end of the file. I can do the same using getc(fp) with normal text files. But with binary files, getc() is encountering with EOF before the entire contents from the file are read. How can I achieve it with binary file in C?</p>\n"}, {"tags": ["c++", "c", "visual-studio-2010"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1469643978, "post_id": 38620516, "comment_id": 64626845, "body": "There is no such thing as <code>bool</code> in <code>C</code> (89).  You want to compile <code>C</code> code using Visual Studio, then you gotta write <code>C</code> code, not <code>C++</code> code."}, {"owner": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 1, "creation_date": 1469644027, "post_id": 38620516, "comment_id": 64626884, "body": "Looks like <code>bool</code> is probably the problem: <a href=\"http://stackoverflow.com/a/18042253\">stackoverflow.com/a/18042253</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469646667, "post_id": 38620516, "comment_id": 64628403, "body": "@PaulMcKenzie: <code>bool</code> is a macro mapping to the <b>standard type</b> <code>_Bool</code>. and there are recommendations not to redefine <code>bool</code> etc. in the application. And C is not C89, but standard C, which is <b>only</b> C11."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469646853, "post_id": 38620516, "comment_id": 64628485, "body": "C and C++ are different languages. Don&#39;t compile C code as C++ and vice versa. If you want to use C, don&#39;t use MSVC, it is not standard compliant. It is stuck with the 27 year old outdated version C89/90. A modern C compiler like gcc or clang does support the standard (to use <code>bool</code>, you have to <code>#include &lt;stdbool.h&gt;</code> accortding to the standard."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469649027, "post_id": 38620516, "comment_id": 64629612, "body": "@Olaf Visual Studio was used, given the error message.  The <code>C</code> compiler that comes with Visual Studio is only C89 compliant."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469655182, "post_id": 38620516, "comment_id": 64632717, "body": "@PaulMcKenzie: That&#39;s why it should not be used for C projects. Even MISRA noticed there was a new version of the standard 17 years ago."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469646968, "post_id": 38620601, "comment_id": 64628545, "body": "The macro <code>bool</code> is not native, but it maps to the native type <code>_Bool</code> in that header by a macro (mandatory). That&#39;s because there is too much badly written C code in the wild which defines their own version of <code>bool</code> (you might be surprised how creative some ppl are how to define their own boolean type). So you can use <code>_Bool</code> as the native type (I don&#39;t recommend it though)."}, {"owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469647869, "post_id": 38620601, "comment_id": 64629011, "body": "@Keith My VS 2010 compiler supports C89/90, so I must look for another solution."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469655899, "post_id": 38620601, "comment_id": 64633059, "body": "@StephenWang That&#39;s what I mean, you need the header for the macro Olaf explained to be visible. Did you try it? Compiling on ideone.com failed without the include and succeeded with it."}, {"owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469710687, "post_id": 38620601, "comment_id": 64657130, "body": "@KeithM Correct, &lt;stdbool.h&gt; makes the _Bool macro visible.  The _Bool built-in type is only defined for C99 - see <a href=\"http://stackoverflow.com/questions/24602814/bool-data-type-of-c99-c\">bool-data-type-of-c99-c</a>.  So for installations of VS 2010, neither is &lt;stdbool.h&gt; installed nor is _Bool a built-in type."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469740734, "post_id": 38620601, "comment_id": 64676446, "body": "@StephenWang Ah, then if you think your question is not answered by the linked Duplicate, you should edit your question to explain why it is not a duplicate, and then request for it to be re-opened. :)"}, {"owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469766153, "post_id": 38620601, "comment_id": 64683027, "body": "@Keith It has - one of the later answers provided a workaround.  What is the best way to handle this as OP?"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469831171, "post_id": 38620601, "comment_id": 64717567, "body": "@StephenWang I&#39;m not sure I understand what you mean by &quot;handle this as OP.&quot;"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1470089786, "post_id": 38620601, "comment_id": 64795491, "body": "@StephenWang Edited based on your rejected edit. Thanks! In the future, leave a comment or new answer for drastic changes."}], "tags": [], "owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1470089719, "last_edit_date": 1495539860, "creation_date": 1469644089, "answer_id": 38620601, "question_id": 38620516, "link": "https://stackoverflow.com/questions/38620516/c-syntax-error-c2143-syntax-error-missing-before/38620601#38620601", "title": "C syntax - error C2143: syntax error : missing &#39;)&#39; before &#39;*&#39;", "body": "<p><code>bool</code> is not a native C type, but for those using C99, try adding the line <code>#include &lt;stdbool.h&gt;</code>, which contains a macro that defines <code>bool</code>.</p>\n\n<p>Since the C compiler in all Visual Studio/MSVC products uses C89, <code>bool</code> is not defined at all for you, as a native C type or otherwise. Workarounds include using <code>typedef</code> or <code>enum</code> to define <code>bool</code>. Examples are in the below link.</p>\n\n<p>For more information, see: <a href=\"https://stackoverflow.com/questions/1608318/is-bool-a-native-c-type\">Is bool a native C type?</a></p>\n"}], "owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1903, "favorite_count": 0, "closed_date": 1469644258, "accepted_answer_id": 38620601, "answer_count": 1, "score": 0, "last_activity_date": 1470089719, "creation_date": 1469643818, "question_id": 38620516, "link": "https://stackoverflow.com/questions/38620516/c-syntax-error-c2143-syntax-error-missing-before", "closed_reason": "Duplicate", "title": "C syntax - error C2143: syntax error : missing &#39;)&#39; before &#39;*&#39;", "body": "<p>Why am I getting a syntax error for my C header declaration?</p>\n\n<p>Here is my header file, viterbi.h:</p>\n\n<pre><code>#ifndef VITERBI_H\n#define VITERBI_H\nvoid vitdec(float* , int , int ,   bool* );\n#endif //VITERBI_H\n</code></pre>\n\n<p>And here is my implementation file, viterbi.c:</p>\n\n<pre><code>// viterbi.c   : Defines the entry point for the console application.\n//\n#include \"viterbi.h\"\n#include \"math.h\"\n//void vitdec(float* sd, int frameLen, int rate,   bool* hd);\n\nvoid vitdec(float* sd, int frameLen, int rate,   bool* hd)\n{\n    //... The rest of the function\n</code></pre>\n\n<p>The errors from the Visual Studio 2010 compiler read:</p>\n\n<pre><code>viterbi.h(4): error C2143: syntax error : missing ')' before '*'\nviterbi.h(4): error C2081: 'bool' : name in formal parameter list illegal\nviterbi.h(4): error C2143: syntax error : missing '{' before '*'\nviterbi.h(4): error C2059: syntax error : ')'\nviterbi.h(4): error C2059: syntax error : ';'\nviterbi.c(7): error C2065: 'bool' : undeclared identifier\nviterbi.c(7): error C2065: 'hd' : undeclared identifier\nviterbi.c(7): warning C4552: '*' : operator has no effect; expected operator with side-effect\n</code></pre>\n\n<p>As far as I have seen/can tell, this is valid syntax for a C declaration.  If I compile viterbi.c as C++ code (viterbi.cpp), then the errors disappear.  What is the syntax error?</p>\n"}, {"tags": ["java", "c", "memory-management", "jvm", "operating-system"], "comments": [{"owner": {"reputation": 34798, "user_id": 1362755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97aa8c37ffa60c4262955aefae56e605?s=128&d=identicon&r=PG", "display_name": "the8472", "link": "https://stackoverflow.com/users/1362755/the8472"}, "edited": false, "score": 0, "creation_date": 1469644729, "post_id": 38620166, "comment_id": 64627278, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/38605147/how-does-jvm-uses-native-stack-manually-for-java-function-call\">this question</a> and also <a href=\"https://stackoverflow.com/questions/16264118/how-jvm-stack-heap-and-threads-are-mapped-to-physical-memory-or-operation-syste?rq=1\">this one</a>"}, {"owner": {"reputation": 1100, "user_id": 4108078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ce4abd04c86b9c50e967e4222b69574d?s=128&d=identicon&r=PG&f=1", "display_name": "Rupsingh", "link": "https://stackoverflow.com/users/4108078/rupsingh"}, "edited": false, "score": 0, "creation_date": 1470123360, "post_id": 38620166, "comment_id": 64805430, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap\">What and where are the stack and heap?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 28630, "user_id": 1291492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f914cd02166793195d9d950503f8f739?s=128&d=identicon&r=PG", "display_name": "ControlAltDel", "link": "https://stackoverflow.com/users/1291492/controlaltdel"}, "is_accepted": false, "score": 3, "last_activity_date": 1469643786, "creation_date": 1469643786, "answer_id": 38620510, "question_id": 38620166, "link": "https://stackoverflow.com/questions/38620166/what-is-the-mapping-of-java-stack-with-native-memory/38620510#38620510", "title": "What is the Mapping Of Java Stack with Native memory.", "body": "<p>Conceptually, when java.exe starts, the program is given a block of memory by the OS. Part of that block of memory is used by java.exe itself. Another part is for string constants. The rest is for the heap. When a new Thread is started, that thread will be given memory out of the heap to use for its stack. In that way, the (thread) stack is conceptually no different than creating any other object on the heap.</p>\n\n<p>I hope this clears this up for you. </p>\n"}], "owner": {"reputation": 73, "user_id": 3690370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/79f227605fe62cf0afd8b1fe54a819a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3690370", "link": "https://stackoverflow.com/users/3690370/user3690370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1469643786, "creation_date": 1469642588, "question_id": 38620166, "link": "https://stackoverflow.com/questions/38620166/what-is-the-mapping-of-java-stack-with-native-memory", "title": "What is the Mapping Of Java Stack with Native memory.", "body": "<p>I understand how does JVM creates java heap out of available native heap provided by OS.</p>\n\n<p>For any native process like JVM(java.exe), OS allocates address space which is divided into multiple regions like heap, stack, data etc.'</p>\n\n<p>In somewhat same way JVM allocates some address space to the running java program(byecode) which include java heap, stack etc.</p>\n\n<p>I understood that java heap is portion of native heap(provided by OS to JVM(java.exe))</p>\n\n<p>But I am not able to understand where is this \"<strong>stack</strong>\" portion coming from.</p>\n\n<p>Is it the part of native heap? \nIs it part of native stack, just like java heap is part of native heap?</p>\n\n<p>Just like Java Heap vs Native Heap, aren't we having Java Stack vs native Stack?</p>\n\n<p>please help me. I am really struggling to understand stack memory in java.</p>\n"}, {"tags": ["c++", "c", "qt"], "comments": [{"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469644550, "post_id": 38620045, "comment_id": 64627175, "body": "In the answers I have noticed people listed different ways of converting QString (using toStdString() or using QByteArray). Which one would be preffered?"}, {"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469644778, "post_id": 38620045, "comment_id": 64627313, "body": "I would also like to have a clarification on how can I display the output of this function."}, {"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469739510, "post_id": 38620045, "comment_id": 64675860, "body": "Also how can I convert uint8_t to QString?"}], "answers": [{"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 2, "creation_date": 1469643555, "post_id": 38620422, "comment_id": 64626603, "body": "You might want to call toUTF8() instead, if you want to support Unicode characters outside the Latin-1 range."}], "tags": [], "owner": {"reputation": 151, "user_id": 4615361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f33b7c498f1f0d76570dd0f43de1161?s=128&d=identicon&r=PG&f=1", "display_name": "slav", "link": "https://stackoverflow.com/users/4615361/slav"}, "is_accepted": false, "score": 1, "last_activity_date": 1469643469, "creation_date": 1469643469, "answer_id": 38620422, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c/38620422#38620422", "title": "How to use C functions in Qt C++", "body": "<p>All you need to convert QString to char (or uint8_t):</p>\n\n<pre><code>QString passoword = \"password\";\nQByteArray ba = password.toLatin1();\nconst uint8_t *pw = (const uint8_t*)ba.data();\n</code></pre>\n\n<p>And you can use this pw in the function. The same for \"salt\". You can use \"iterations\" as it is. For \"out\" parameter, allocate uint8_t with any method you prefer, could be malloc.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "edited": false, "score": 0, "creation_date": 1469644126, "post_id": 38620517, "comment_id": 64626941, "body": "This holds for most platforms but keep in mind that C99 types (the ones with &#39;_t&#39;) are spec defined making them inherently more portable. &#39;unsigned int&#39; and the others following that format are compiler types making it up to the compiler implementation to define them. If you are writing code for a single platform or if your code does not need to know exactly what the underlying memory is, compiler types are fine."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 1, "last_activity_date": 1469643826, "creation_date": 1469643826, "answer_id": 38620517, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c/38620517#38620517", "title": "How to use C functions in Qt C++", "body": "<p><em>uint8_t</em> is a typedef for an unsigned 8-bit integer, or in other words an unsigned char.</p>\n\n<p><em>uint32_t</em> is a typedef for an unsigned 32-bit integer, or in other words an unsigned int.</p>\n\n<p>These typedefs are defined in <code>stdint.h</code>.  These types were introduced to have well-defined (width-wise) integer types for portability.</p>\n\n<p><em>size_t</em> is typically an unsigned integer type as well.  So the \nprototype:</p>\n\n<pre><code>void fastpbkdf2_hmac_sha256(const uint8_t *pw, size_t npw,\n                            const uint8_t *salt, size_t nsalt,\n                            uint32_t iterations,\n                            uint8_t *out, size_t nout)\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>void fastpbkdf2_hmac_sha256(const unsigned char* pw, unsigned int npw,\n                            const unsigned char* salt, unsigned int nsalt,\n                            unsigned int iterations,\n                            unsigned char* out, unsigned int nout);\n</code></pre>\n\n<p>Others have posted how to convert QString into a unsigned character array.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469738509, "post_id": 38620540, "comment_id": 64675382, "body": "This gives me the following <code>error: invalid conversion from &#39;const char*&#39; to &#39;const uint8_t* {aka const unsigned char*}</code>"}, {"owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "reply_to_user": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469889994, "post_id": 38620540, "comment_id": 64730072, "body": "Try <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">reinterpret_cast</a>&lt;uint8_t*&gt;() to trick the compiler since the underlying memory is identical."}], "tags": [], "owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "is_accepted": false, "score": -1, "last_activity_date": 1469643889, "creation_date": 1469643889, "answer_id": 38620540, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c/38620540#38620540", "title": "How to use C functions in Qt C++", "body": "<p>I am not too familiar with QT so I am looking at <a href=\"http://doc.qt.io/qt-4.8/qstring.html\" rel=\"nofollow\">this page</a> as a reference for a QString. It appears to be a managed string object while the function you want to call just wants a null terminated array of uint8_ts. I think it is wrapping std::string because there is a toStdString() member function. A std::string just manages a character array which is what your function wants so you can do this: password.toStdString().c_str() to get the char *.</p>\n\n<p>Most platforms will implicitly convert uint8_t and char since they are almost always straight up 1 byte of memory.</p>\n\n<p>There is also an output buffer and by the calling convention it looks like you have to manage that memory. From glancing at the docs of the github you linked it will output however much memory you tell it to using nout. In this example we create a 256 byte buffer for it to output to.</p>\n\n<pre><code>QString password = \"password\";\nQString salt = \"salt\";\nint iterations = 30000;\n\nconst size_t nout = 256;\nuint8_t * out = new uint8_t[nout];\n\nfastpbkdf2_hmac_sha256(password.toStdString().c_str(), password.toStdString().size(),\n   salt.toStdString().c_str(), salt.toStdString().size(),\n   iterations,\n   out, nout);\n\n// use out\n\ndelete[] out;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1469643889, "creation_date": 1469642132, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c", "title": "How to use C functions in Qt C++", "body": "<p>I am a web developer and I am new to C++. I am using Qt C++. I was looking a way to generate a PBKDF2 key in Qt, but could not find a way to do that in pure C++. So looking on internet I have found this small C implementation <a href=\"https://github.com/ctz/fastpbkdf2\" rel=\"nofollow\">https://github.com/ctz/fastpbkdf2</a>. I need to use the following function </p>\n\n<pre><code>void fastpbkdf2_hmac_sha256(const uint8_t *pw, size_t npw,\n                            const uint8_t *salt, size_t nsalt,\n                            uint32_t iterations,\n                            uint8_t *out, size_t nout)\n</code></pre>\n\n<p>In my C++ file, I have </p>\n\n<pre><code>QString password = \"password\";\nQString salt = \"salt\";\nint iterations = 30000;\n</code></pre>\n\n<p>I know I can directly call any C function in C++, but I am not sure about how can I call that function with those parameters from my C++ file. An explanation of data type conversions would also be appreciated. </p>\n"}, {"tags": ["c++", "c", "clang-format"], "comments": [{"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 8, "creation_date": 1483590594, "post_id": 38620019, "comment_id": 70160326, "body": "It appears that there is no such option. I&#39;m currently working on adding it as a new style option, AlignConsecutiveMacros. You can see it here on my fork <a href=\"https://github.com/eriknyquist/clang/tree/align_defines\" rel=\"nofollow noreferrer\">github.com/eriknyquist/clang/tree/align_defines</a>  (I won&#39;t post a direct link to the commit, since I am continually amending it. Just view the list of commits and pick the latest one)"}, {"owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 0, "creation_date": 1513073633, "post_id": 38620019, "comment_id": 82501081, "body": "do you plan to submit a pull request? Looks like a useful addition to me!"}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1523426594, "post_id": 38620019, "comment_id": 86550390, "body": "@ErikNyquist Thanks for your pull request. Any idea why it&#39;s still stuck at review ?"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1528664569, "post_id": 38620019, "comment_id": 88582362, "body": "(copy-pasting from another post where I just answered the same Q): There&#39;s just been a lot of churn, if you look over that link I posted to the review you&#39;ll see all the changes that have been requested (and that I have implemented). Then there was silence for a long, long time, and someone&#39;s just come back in the last month and essentially asked for the whole thing to be reworked, and I just don&#39;t have the time/energy anymore...."}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1529477545, "post_id": 38620019, "comment_id": 88881448, "body": "@ErikNyquist Thanks for the information. I&#39;ve built clang-format with your patch and we&#39;ve been using it for for months now, it&#39;s working well. Too bad for their lack of reactivity, it&#39;s obvious that many people want this feature..."}], "answers": [{"tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 0, "last_activity_date": 1529328391, "creation_date": 1529328391, "answer_id": 50910604, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/50910604#50910604", "title": "Can clang-format align a block of #defines for me?", "body": "<p>At a quick glance over the <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">style options</a> it looks like there is currently no option for this. The only option which deals with preprocessing that I see is <code>IndentPPDirectives</code> which deals with indentations of <code>#if</code> blocks.</p>\n"}, {"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1541084677, "post_id": 53102839, "comment_id": 93103173, "body": "You may not have noticed, that the pull request was done by OP one year ago after he asked this question. Still, the question is unanswered, so it would be best for @ErikNyquist to accept one answer."}, {"owner": {"reputation": 888, "user_id": 1122242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c94e800354854bafd803f7ff56239e0?s=128&d=identicon&r=PG", "display_name": "moveaway00", "link": "https://stackoverflow.com/users/1122242/moveaway00"}, "edited": false, "score": 0, "creation_date": 1557838620, "post_id": 53102839, "comment_id": 98893057, "body": "An update: It looks like the change has been accepted, and is ready to land! <a href=\"https://reviews.llvm.org/D28462?id=93341#1498067\" rel=\"nofollow noreferrer\">reviews.llvm.org/D28462?id=93341#1498067</a>"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1566425053, "post_id": 53102839, "comment_id": 101656586, "body": "and after ~2 years my patch was finally merged! at long last we have alignment for PP macros :) <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/ClangFormatStyleOptions.html</a>"}], "tags": [], "owner": {"reputation": 5167, "user_id": 4862613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1583232551699623/picture?type=large", "display_name": "Maldus", "link": "https://stackoverflow.com/users/4862613/maldus"}, "is_accepted": true, "score": 11, "last_activity_date": 1571654324, "last_edit_date": 1571654324, "creation_date": 1541080804, "answer_id": 53102839, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/53102839#53102839", "title": "Can clang-format align a block of #defines for me?", "body": "<p><strong>[UPDATE]</strong></p>\n\n<p>The op's pull request finally went through and as of clang version 9.0.0 is live. The functionality is enabled by the <code>AlignConsecutiveMacros: true</code> option.</p>\n\n<p><strong>[ORIGINAL]</strong></p>\n\n<p>Weirdly enough this feature is yet to be implemented in clang; the formatting option for consecutive macros is currently missing.</p>\n\n<p>Many developers are interested and there is a working pull request that has been waiting for approval for years: <a href=\"https://reviews.llvm.org/D28462?id=93341\" rel=\"noreferrer\">https://reviews.llvm.org/D28462?id=93341</a></p>\n\n<p>You can integrate it or just wait whether they add it on the official branch, but at this point I doubt they will.</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 881949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaa761f74bb8fd5aafbf4bca006bdd4?s=128&d=identicon&r=PG&f=1", "display_name": "takladev", "link": "https://stackoverflow.com/users/881949/takladev"}, "edited": false, "score": 0, "creation_date": 1568116021, "post_id": 56234250, "comment_id": 102165083, "body": "the latest clang-format supports aligning macros using <code>AlignConsecutiveMacros</code>"}], "tags": [], "owner": {"reputation": 3226, "user_id": 2929762, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/875979833128b726a51baf1814c9496f?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/2929762/martin"}, "is_accepted": false, "score": -1, "last_activity_date": 1558427578, "creation_date": 1558427578, "answer_id": 56234250, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/56234250#56234250", "title": "Can clang-format align a block of #defines for me?", "body": "<p>I couldn't find any option for this either. Clang has trashed all of my defines that have been automatically aligned by emacs.. </p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 881949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaa761f74bb8fd5aafbf4bca006bdd4?s=128&d=identicon&r=PG&f=1", "display_name": "takladev", "link": "https://stackoverflow.com/users/881949/takladev"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1566517308, "post_id": 57550043, "comment_id": 101691110, "body": "oh, I meant <code>AlignConsecutiveMacros: true</code> .. Cut-pasted the wrong line from my clang-format config. I will edit the post."}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 1, "creation_date": 1567115220, "post_id": 57550043, "comment_id": 101877779, "body": "Yes, I created a patch for that feature  &quot;AlignConsecutiveMacros&quot; myself when I found it didn&#39;t exist."}], "tags": [], "owner": {"reputation": 139, "user_id": 881949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaa761f74bb8fd5aafbf4bca006bdd4?s=128&d=identicon&r=PG&f=1", "display_name": "takladev", "link": "https://stackoverflow.com/users/881949/takladev"}, "is_accepted": false, "score": -1, "last_activity_date": 1566517417, "last_edit_date": 1566517417, "creation_date": 1566184166, "answer_id": 57550043, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/57550043#57550043", "title": "Can clang-format align a block of #defines for me?", "body": "<p>Note that clang-format-9 and above have an option of <code>AlignConsecutiveMacros: true</code> which can do the trick for you.</p>\n\n<p>To install clang-format-9 on ubuntu/Debian you need to check <code>http://apt.llvm.org/</code>.</p>\n\n<p>As an example, if you have Ubuntu 16.04/xenial, you need to do the following:</p>\n\n<pre><code>sudo sh -c 'echo \"deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-9 main\" &gt;&gt; /etc/apt/sources.list'\nsudo sh -c 'echo \"deb-src http://apt.llvm.org/xenial/ llvm-toolchain-xenial-9 main\" &gt;&gt; /etc/apt/sources.list'\nsudo apt update\nsudo apt install clang-format-9\n</code></pre>\n\n<p>Possible to handle Trusty/Ubuntu 14.04 the same way.</p>\n"}], "owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4189, "favorite_count": 8, "accepted_answer_id": 53102839, "answer_count": 4, "score": 25, "last_activity_date": 1571654324, "creation_date": 1469642027, "last_edit_date": 1483590812, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me", "title": "Can clang-format align a block of #defines for me?", "body": "<p>I have a source file containing some lines like this;</p>\n\n<pre><code>#define ARC_V2_LP_START         0x002\n#define ARC_V2_LP_END           0x003\n#define ARC_V2_STATUS32         0x00a\n</code></pre>\n\n<p>With all the values nicely aligned. Unfortunately clang-format does this;</p>\n\n<pre><code>#define ARC_V2_LP_START 0x002\n#define ARC_V2_LP_END 0x003\n#define ARC_V2_STATUS32 0x00a\n</code></pre>\n\n<p>I have found the AlignConsecutiveDeclarations and AlignConsecutiveAssignments options, but nothing that will align consecutive #defines. Is it possible to do this?</p>\n"}, {"tags": ["c", "programming-languages", "code-analysis", "semantics"], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 2, "creation_date": 1469641676, "post_id": 38619845, "comment_id": 64625532, "body": "What do you mean by &quot;It is upto the processor to chose the order of the function arguments&quot;? Why is it UB?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "edited": false, "score": 0, "creation_date": 1469641704, "post_id": 38619845, "comment_id": 64625544, "body": "I know, but why do you think it has undefined behavior?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1469641751, "post_id": 38619845, "comment_id": 64625573, "body": "Either <code>func(1,1)</code> or <code>func(0,0)</code> could be evaluated first... but since both have to be evaluated before the outer <code>func()</code> call, it&#39;ll still give infinite recursion (in C)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 3, "creation_date": 1469641816, "post_id": 38619845, "comment_id": 64625605, "body": "@Dmitri I think in standard &quot;C&quot; we have infinite loop, but not sure about the second part"}, {"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1469641923, "post_id": 38619845, "comment_id": 64625657, "body": "This is infinite recursion which will lead your program to crash, can&#39;t see why this is UB."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469642023, "post_id": 38619845, "comment_id": 64625705, "body": "No UB here, unless we consider stack overflow due to infinite recursion as UB. This looks like a wrong answer. Both parameters <i>are</i> evaluated upon entering the function according to C standard."}, {"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1469642164, "post_id": 38619845, "comment_id": 64625777, "body": "This is clearly not UB. This is unspecified, that just means it is up to the compiler and you can&#39;t rely on the order of evaluation. It also doesn&#39;t make any sense that it would be UB. this is perfectly defined."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1469642196, "post_id": 38619845, "comment_id": 64625792, "body": "@Polikdir It&#39;s not even unspecified. It is well defined."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1469642264, "post_id": 38619845, "comment_id": 64625844, "body": "@Polikdir : Unspecified means one cannot guarantee consistent results imho, so undefined behaviour."}, {"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469642323, "post_id": 38619845, "comment_id": 64625877, "body": "@EugeneSh. He was talking about the order of evaluation (which is unspecified acording to his quote) of the arguments, I commented on that. My last sentence on that comment also states (about the whole code) that this is perfectly defined :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1469642365, "post_id": 38619845, "comment_id": 64625904, "body": "@sjsam <i>All of the parameters are evaluated prior entering the function</i>. Function call is a sequence point.  The function doesn&#39;t have side effects, so the order doesn&#39;t matter. <i>No UB here</i>. Everything is well specified and defined."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469642771, "post_id": 38619845, "comment_id": 64626145, "body": "@EugeneSh : Indeed  i thought of this in terms of function side-effects(none here). I stand corrected. :) Will edit shortly."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 2, "creation_date": 1469643009, "post_id": 38619845, "comment_id": 64626294, "body": "You don&#39;t seem to address the second part of the question (call-by-need) at all."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "reply_to_user": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1469643140, "post_id": 38619845, "comment_id": 64626373, "body": "Sorry @Polikdir what do you mean by UB?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1469643181, "post_id": 38619845, "comment_id": 64626398, "body": "@SaraPhD <i>UB</i> is commonly used on SO to refer <i>undefined behavior</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469643404, "post_id": 38619845, "comment_id": 64626525, "body": "@EugeneSh. thanks so much. but I think UB is not related to infinite recursive calls..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469643504, "post_id": 38619845, "comment_id": 64626576, "body": "@SaraPhD It doesn&#39;t. It&#39;s consequences might indirectly relate. But your question is not about it."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469645881, "post_id": 38619845, "comment_id": 64627962, "body": "@sepp2k : I haven&#39;t come across, <code>call by need</code>. Your answer already addressed it, it seems :)"}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469657312, "post_id": 38619845, "comment_id": 64633628, "body": "&quot;Any order of evaluation of these arguments eventually leads to infinite recursion and so the program crashes due to depleted memory.&quot; Unless your compiler does tail-call optimization :)"}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": -1, "last_activity_date": 1469645610, "last_edit_date": 1469645610, "creation_date": 1469641424, "answer_id": 38619845, "question_id": 38619703, "link": "https://stackoverflow.com/questions/38619703/call-by-need-and-standard-c-output/38619845#38619845", "title": "Call by Need and Standard C Output?", "body": "<p>To address the first part,</p>\n\n<p>The C Draft, 6.5.2.2->10(Function calls) says</p>\n\n<blockquote>\n  <p>The order of evaluation of ... the actual arguments... is unspecified.</p>\n</blockquote>\n\n<p>and for such reason, something such as</p>\n\n<pre><code>printf(\"%d%d\",i++,++i); \n</code></pre>\n\n<p>has undefined behaviour, because </p>\n\n<ul>\n<li>both <code>++i</code> and <code>i++</code> has side-effects, ie incrementing the value of i by one. </li>\n<li>The comma inside printf is just a separator and NOT a <a href=\"https://en.wikipedia.org/wiki/Sequence_point\" rel=\"nofollow\">[ sequence point ]</a>.</li>\n<li>Even though function call itself is a sequence point, for the above reason, the order in which two modifications of <code>i</code> take place is not defined.</li>\n</ul>\n\n<p>In your case</p>\n\n<pre><code>func(func(1,1),func(0,0))\n</code></pre>\n\n<p>though, the arguments for outer <code>func</code> ie <code>func(1,1)</code> or <code>func(0,0)</code> have no bearing on each other contrary to the case shown above. Any order of evaluation of these arguments eventually leads to infinite recursion and so the program crashes due to depleted memory.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "edited": false, "score": 0, "creation_date": 1469643366, "post_id": 38620290, "comment_id": 64626497, "body": "So you means when we run it on standard C because of evaluation  before/after/simultaneous of argument, the behavior is undefined?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469643697, "post_id": 38620290, "comment_id": 64626675, "body": "@Sara PhD C does not defined the upper limit of recursion(it could be infinite  (stack frame re-used)), only that at least a minimum amount or recursion possible.  With <code>int main() { while (1); }</code>, we do not have undefined behavior UB.  It just never completes.  Like-wise, code or may/may not may hit a limit."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469643840, "post_id": 38620290, "comment_id": 64626746, "body": "Semantically the C program will just run for infinite time. In practice - we don&#39;t know. does it count undefined behavior?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469643920, "post_id": 38620290, "comment_id": 64626796, "body": "@Eugene Sh. The infinite time issue does not make it UB.  Too many recursions likely do - looking for cite."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469643999, "post_id": 38620290, "comment_id": 64626864, "body": "@chux It&#39;s unlikely you will find it, as C standard doesn&#39;t even have a notion of stack.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469644094, "post_id": 38620290, "comment_id": 64626920, "body": "@Eugene Sh. I was not looking for a C spec concerning &quot;stack&quot;, only recursion limit.  <a href=\"http://stackoverflow.com/a/10243313/2410359\">stackoverflow.com/a/10243313/2410359</a> does address this a bit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "edited": false, "score": 0, "creation_date": 1469644252, "post_id": 38620290, "comment_id": 64627015, "body": "I read all the comments again and your answer, can I conclude in (1) we encounter to infinite recursive call, in (2) the function print 0. isnt it?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469644356, "post_id": 38620290, "comment_id": 64627065, "body": "@SaraPhD That&#39;s the bottom line. Do you understand the reasoning?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469644481, "post_id": 38620290, "comment_id": 64627135, "body": "@Sara PhD (note: I am not finding a <i>minimum</i> supported recursion depth either.)  With 1) without analyzing the function, we have infinite recursion.  With 2) it depends on how smart an analysis and if infinite recursion can be consider an ignorable side effect.  As I see it it is not, so with 2) <code>func(0,0)</code> becomes 0, but <code>func(1,1)</code> still needs to be called and a return is not expected.  So a real good analyzer could replace the entire code with <code>int main() { while (1); }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469644532, "post_id": 38620290, "comment_id": 64627162, "body": "Not all, @EugeneSh. would you please add detail in one comment? I confused a litle."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "edited": false, "score": 0, "creation_date": 1469644643, "post_id": 38620290, "comment_id": 64627222, "body": "@chux really this is a Olympiad Question that took 3 month ago, answer sheet says in (1) we have infinite recursive calls, in (2) we have zero output. the answer sheet is written by TA."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469644655, "post_id": 38620290, "comment_id": 64627229, "body": "@SaraPhD Do you understand why <i>mathematically</i> the result of such a function is 0?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469644752, "post_id": 38620290, "comment_id": 64627295, "body": "@SaraPhD From a quasi-math/programming point-of-view,  in (2) we have zero output, <i>after an infinite amount of time</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "edited": false, "score": 0, "creation_date": 1469644821, "post_id": 38620290, "comment_id": 64627340, "body": "is there any link to study for quasi-math/orogramming point-of-view?"}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469644915, "post_id": 38620290, "comment_id": 64627395, "body": "@chux Why &quot;after an infinite amount of time&quot;? How isn&#39;t the result just 0 in O(1) time using call-by-need evaluation?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469645220, "post_id": 38620290, "comment_id": 64627592, "body": "@SaraPhD Because when looking at <code>func(func(1,1),func(0,0))</code> we can first evaluate <code>func(0,0)</code> which is <code>0</code>, as <code>b=0</code>. So the call is transforming into <code>func(func(1,1),0)</code>. Here <code>b</code> of the outer call is <code>0</code> as well, which is sufficient to conclude the final result is zero, without even evaluating <code>func(1,1)</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469645350, "post_id": 38620290, "comment_id": 64627668, "body": "@sepp2k Analysis of <code>func(1,1)</code> has the recursive call of <code>func(1,1)</code>.  Good code analysis will not exclude code that has <i>side-effects</i> of unknown impact.  Infinite recursion of  <code>func(1,1)</code> has a side effect of <i>unknown</i> consequence, thus it <i>should not</i> be ignored.  Replace <code>else return func(a,b);</code> with <code>else { putchar(&#39;x&#39;); return func(a,b);}</code>.  Certainly code cannot ignore the printing of <code>x</code>.  I suspect TA hand-waved that path as UB and reasoned anything goes, including ignoring it.  I disagree."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469645566, "post_id": 38620290, "comment_id": 64627782, "body": "@chux A lazy-evaluating compiler/interpreter given equivalent sequence will eventually terminate with a correct result, as <code>b</code> is checked <i>before</i> the recursive call. Languages like Haskell are relying on this here and there."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 1, "creation_date": 1469645612, "post_id": 38620290, "comment_id": 64627813, "body": "@chux I don&#39;t think you understand what call-by-need is."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469646158, "post_id": 38620290, "comment_id": 64628117, "body": "<code>call by need</code> is rather uncommon term. <code>Lazy evaluation</code> is the more common one.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469646421, "post_id": 38620290, "comment_id": 64628270, "body": "@sepp2k <a href=\"http://stackoverflow.com/help/be-nice\">Be nice</a>  Rather than <a href=\"http://stackoverflow.com/questions/38619703/call-by-need-and-standard-c-output/38620290?noredirect=1#comment64627813_38620290\">comment on the person</a>, better for comments/answers to focus on the comments/answers."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469646993, "post_id": 38620290, "comment_id": 64628556, "body": "@chux Sorry if I offended you. Your comment explaining why it&#39;d take infinite time to evaluate using call-by-need semantics, actually used strict semantics (evaluating the arguments first) and thus does not seem applicable to call-by-need."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469647703, "post_id": 38620290, "comment_id": 64628916, "body": "@sepp2k I suspect we are using different understandings of the implementation limits of <i>call by need</i>.  Since  &quot;call-by-need&quot; is not defined in <code>C</code>, as a C post, we are not contained to a single interpretation.  As this answer asserts, the infinite recursion of <code>func(1,1)</code> is not certainly UB and its side effect might not be ignorable.  Not much different from code <code>else while (1);</code>"}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469648565, "post_id": 38620290, "comment_id": 64629371, "body": "@chux (1) is a C question. (2) is about &quot;any language that has call by need property&quot; and thus not about C, so the fact that C has no concept of call-by-need does not matter with regards to (2)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469649698, "post_id": 38620290, "comment_id": 64629979, "body": "@sepp2k  C allows analyzabilty  C11dr &#167;L and so is not certainly excluded from optimizations using <i>call-by-need</i>.   This answer focuses within that context of how call-by-need applies to C.  Within a <i>any language</i> universe, we do not have a specification in order to arbitrate, so a correct call-by-need interpretation is subjective."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469650063, "post_id": 38620290, "comment_id": 64630152, "body": "@chux It is not subjective. As the name suggesting, it is the evaluation all and only the path required for obtaining the final result. But the point is that even the languages using the lazy evaluation, such as Haskell won&#39;t be able to do it if the program is not written in the right order of evaluation. Here, if we assume the right-to-left order, the program will terminate. If we assume left-to-right, it won&#39;t. (I suspect the true <i>call-by-need</i> evaluation is an undecidable problem)."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469650503, "post_id": 38620290, "comment_id": 64630346, "body": "@chux call-by-need isn&#39;t an optimization. It&#39;s a different evaluation order, it&#39;s different semantics. And this isn&#39;t a C question. C was just used as an example of a strict language. (2) is specifically not about C."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469651052, "post_id": 38620290, "comment_id": 64630652, "body": "@sepp2k Concerning &quot;this isn&#39;t a C question&quot;.  Post is tagged C.  So it certainly appears OP thinks it is a C question.  Suggest telling OP the tag is wrong then.  Sample codes does compile as C.  Call-by-need can be used for optimization in C, given that it does not violate C specification."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469651302, "post_id": 38620290, "comment_id": 64630794, "body": "@sepp2k Concerning 2) we are going over old ground. Post does not specifically exclude C.  Instead OP &quot;2) with any language that has call by need property&quot; and I maintain, using C and analyzability, code can optimize using <i>call-by-need</i> (within limits)"}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469651402, "post_id": 38620290, "comment_id": 64630840, "body": "@chux It&#39;s tagged as C because part (1) is about C (though it could just as well have been about any other strict language with similar syntax). (2) is not. The question is specifically about the difference between C (or strict languages in general) and languages with call-by-need semantics. And no, call-by-need is not an optimization. It&#39;s an evaluation order that is semantically different from strict semantics. You can have an optimization that acts like call-by-need in those cases where the semantics are the same (as-if rule), but this question is about a case where they&#39;re not."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469651530, "post_id": 38620290, "comment_id": 64630901, "body": "@chux Call-by-need is a strongly normalizing evaluation order. C is not strongly normalizing (otherwise the given code would not cause infinite recursion). Therefore C is obviously not a call-by-need language. You can&#39;t call it call-by-need because it might act like call-by-need in cases where the semantics are the same. A call-by-need language is one that acts like call-by-need particularly in those cases where the semantics differ."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1469651656, "post_id": 38620290, "comment_id": 64630976, "body": "@sepp2k Good we agree on &quot;can have an optimization that acts like call-by-need...&quot;."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": -1, "last_activity_date": 1469644914, "last_edit_date": 1469644914, "creation_date": 1469643037, "answer_id": 38620290, "question_id": 38619703, "link": "https://stackoverflow.com/questions/38619703/call-by-need-and-standard-c-output/38620290#38620290", "title": "Call by Need and Standard C Output?", "body": "<p>With C, in general, it is not defined the order of arguments <code>a</code> and <code>b</code> evaluation with a function like <code>int func(int a, int b)</code></p>\n\n<p>Obviously evaluating <code>func(1,1)</code> is problematic and the code suffers from that regardless if <code>func(1,1)</code> is evaluated before/after/simultaneous with <code>func(0,0)</code></p>\n\n<hr>\n\n<p>Analysis of <code>func(a,b)</code> based on need <em>may</em> conclude that if <code>b==0</code>, no need to call <code>func()</code> and then replace with 0.</p>\n\n<pre><code>printf(\"%d \\n\", func(func(1,1),func(0,0)));\n// functionally then becomes\nprintf(\"%d \\n\", func(func(1,1),0));\n</code></pre>\n\n<p>Applied again and </p>\n\n<pre><code>// functionally then becomes\nprintf(\"%d \\n\", 0);\n</code></pre>\n\n<p>Of course this conclusion is not certain as the analysis of <code>b != 0</code> and <code>else return func(a,b);</code> leads to infinite recursion.  Such code may have a useful desired side-effect (e.g. stack-overflow and system reset.)  So the analysis may need to be conservative and <em>not</em> assume <code>func(1,1)</code> will <em>ever</em> return and <em>not</em> optimize out the call even if it optimized out the <code>func(0,0)</code> call.</p>\n\n<hr>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "edited": false, "score": 1, "creation_date": 1469652550, "post_id": 38621003, "comment_id": 64631416, "body": "this site is very strange ! I ask a very good question, some time get down vote,  lots of nice answer get down vote.... I confused..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469653172, "post_id": 38621003, "comment_id": 64631728, "body": "@EugeneSh. what do you think about  the chux answer?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469653235, "post_id": 38621003, "comment_id": 64631758, "body": "@SaraPhD Read the comments there, they are informative."}], "tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 2, "last_activity_date": 1469774623, "last_edit_date": 1469774623, "creation_date": 1469645525, "answer_id": 38621003, "question_id": 38619703, "link": "https://stackoverflow.com/questions/38619703/call-by-need-and-standard-c-output/38621003#38621003", "title": "Call by Need and Standard C Output?", "body": "<p>1) In C (which uses <a href=\"https://en.wikipedia.org/wiki/Evaluation_strategy#Strict_evaluation\" rel=\"nofollow\">strict evaluation semantics</a>) we get infinite recursion because in strict evaluation arguments are evaluated before a function is called. So in <code>f(f(1,1), f(0,0))</code> <code>f(1,1)</code> and <code>f(0,0)</code> are evaluated before the outer <code>f</code> (which one of the two arguments is evaluated first is unspecified in C, but that does not matter). And since <code>f(1,1)</code> causes infinite recursion, we get infinite recursion.</p>\n\n<p>2) In a language using <a href=\"https://en.wikipedia.org/wiki/Evaluation_strategy#Non-strict_evaluation\" rel=\"nofollow\">non-strict evaluation</a> (be it call-by-name or call-by-need) arguments are substituted into the function body unevaluated and are only evaluated when and if they're needed. So the outer call to <code>f</code> is evaluated first as such:</p>\n\n<pre><code>if (f(0, 0) == 0)\nreturn 0;\nelse return f(f(1,1), f(0,0));\n</code></pre>\n\n<p>So when evaluating the <code>if</code>, we need to evaluate <code>f(0,0)</code>, which simply evaluates to 0. So we go into the then-branch of the <code>if</code> and never execute the else-branch. Since all calls to <code>f</code> are only used in the else-branch, they're never needed and thus never evaluated. So there's no recursion, infinite or otherwise, and we just get 0.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6336610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1469774623, "creation_date": 1469640851, "last_edit_date": 1469653122, "question_id": 38619703, "link": "https://stackoverflow.com/questions/38619703/call-by-need-and-standard-c-output", "title": "Call by Need and Standard C Output?", "body": "<p>The following code is here with keep the C Language Syntax:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint func(int a, int b){\nif (b==0)\nreturn 0;\nelse return func(a,b);\n}\n\nint main(){\nprintf(\"%d \\n\", func(func(1,1),func(0,0)));\nreturn 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>What is the output of this code at 1) run with standard C, 2) with any\n  language that has call by need property, Then:</p>\n  \n  <p>in (1) the programs loop into infinite call and in (2) we have ouptut zero !! this is an example solved by TA in programming language course, any idea to\n  describe it for me? thanks</p>\n</blockquote>\n"}, {"tags": ["c", "function", "gcc", "glibc"], "comments": [{"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1469639569, "post_id": 38619295, "comment_id": 64624304, "body": "Wouldn&#39;t it stand to reason you should post your glibc version?"}, {"owner": {"reputation": 183, "user_id": 6530287, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccf6de1e4e1ea515379c2538e46201ea?s=128&d=identicon&r=PG", "display_name": "Volumetricsteve", "link": "https://stackoverflow.com/users/6530287/volumetricsteve"}, "reply_to_user": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1469639673, "post_id": 38619295, "comment_id": 64624379, "body": "I&#39;m actually not sure that I can for work-related reasons, but know that it&#39;s older than 2.17.  Would that information impact how code should be rewritten?"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 6530287, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccf6de1e4e1ea515379c2538e46201ea?s=128&d=identicon&r=PG", "display_name": "Volumetricsteve", "link": "https://stackoverflow.com/users/6530287/volumetricsteve"}, "edited": false, "score": 0, "creation_date": 1469640238, "post_id": 38619456, "comment_id": 64624687, "body": "That&#39;s exactly what I was looking for.  Thank you!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 4, "last_activity_date": 1469639995, "creation_date": 1469639995, "answer_id": 38619456, "question_id": 38619295, "link": "https://stackoverflow.com/questions/38619295/what-way-can-code-be-written-so-libraries-dont-need-to-be-called-in-c/38619456#38619456", "title": "What way can code be written so libraries don&#39;t need to be called in C?", "body": "<p>The functions that you can call without mentioning a library are located in libc. The <code>-lc</code> option to link to this library is silently added for you.</p>\n\n<p>To call functions in other libraries, you must add the corresponding <code>-l</code> (and possibly <code>-L</code>) option to your linking command. This is normal, and you shouldn't feel like this means something is wrong.</p>\n\n<p>There is no rational explanation for which functions are included in libc and which ones aren't. It's just historical accident. Just be thankful to the nice people who write the man pages for putting the necessary linker options are right their at the top of the page so you don't have to hunt for them.</p>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 4606310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436961ae0a249d361e993c733e51c561?s=128&d=identicon&r=PG&f=1", "display_name": "Explorer09", "link": "https://stackoverflow.com/users/4606310/explorer09"}, "is_accepted": false, "score": 0, "last_activity_date": 1492665907, "creation_date": 1492665907, "answer_id": 43510884, "question_id": 38619295, "link": "https://stackoverflow.com/questions/38619295/what-way-can-code-be-written-so-libraries-dont-need-to-be-called-in-c/43510884#43510884", "title": "What way can code be written so libraries don&#39;t need to be called in C?", "body": "<p>clock_gettime() is a wrapper of the system call. If you are on a limited environment (where librt is not available), you may use syscall() directly to bypass the libc wrapper. You can see an example in <a href=\"https://git.busybox.net/busybox/tree/libbb/time.c#n233\" rel=\"nofollow noreferrer\">BusyBox libbb/time.c</a>.</p>\n"}], "owner": {"reputation": 183, "user_id": 6530287, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccf6de1e4e1ea515379c2538e46201ea?s=128&d=identicon&r=PG", "display_name": "Volumetricsteve", "link": "https://stackoverflow.com/users/6530287/volumetricsteve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 38619456, "answer_count": 2, "score": 2, "last_activity_date": 1492665907, "creation_date": 1469639468, "last_edit_date": 1469639614, "question_id": 38619295, "link": "https://stackoverflow.com/questions/38619295/what-way-can-code-be-written-so-libraries-dont-need-to-be-called-in-c", "title": "What way can code be written so libraries don&#39;t need to be called in C?", "body": "<p>I'm exploring high-precision time functions in C.  I came across clock_gettime and read about it here:</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/clock_gettime.2.html</a></p>\n\n<p>I notice it says:</p>\n\n<pre><code> Link with -lrt (only for glibc versions before 2.17).\n</code></pre>\n\n<p>I wonder why I can use lower-precision time functions without needing to add anything to my gcc compile line?  Is there a way for me to use the high-precision code differently so I don't need to add anything on my compile line?</p>\n\n<p>I understand my system is using an old....old version of glibc, which is why I have to do this in my case, but I'm asking for the sake of those (such as myself) who are unable to update glibc.</p>\n\n<p>Code in progress:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char **argv)\n{\n\n  int result;\n  struct timespec tp;\n  clockid_t clk_id;\n\n//  clk_id = CLOCK_REALTIME;\n  clk_id = CLOCK_MONOTONIC;\n//  clk_id = CLOCK_BOOTTIME;\n//  clk_id = CLOCK_PROCESS_CPUTIME_ID;\n\n  // int clock_gettime(clockid_t clk_id, struct timespec *tp);\n  result = clock_gettime(clk_id, &amp;tp);\n  printf(\"result: %i\\n\", result);\n  printf(\"tp.tv_sec: %lld\\n\", tp.tv_sec);\n  printf(\"tp.tv_nsec: %ld\\n\", tp.tv_nsec);\n\n  result = clock_getres(clk_id, &amp;tp);\n  printf(\"result: %i\\n\", result);\n  printf(\"tp.tv_sec: %lld\\n\", tp.tv_sec);\n  printf(\"tp.tv_nsec: %ld\\n\", tp.tv_nsec);\n\n}\n</code></pre>\n"}, {"tags": ["c", "syntax", "malloc"], "comments": [{"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469639234, "post_id": 38619199, "comment_id": 64624117, "body": "Are you writing in C?"}, {"owner": {"reputation": 7, "user_id": 6639622, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ygiQ3rMResw/AAAAAAAAAAI/AAAAAAAABQw/01W2qA-nQ-U/photo.jpg?sz=128", "display_name": "Kantshri Baronia", "link": "https://stackoverflow.com/users/6639622/kantshri-baronia"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469639311, "post_id": 38619199, "comment_id": 64624168, "body": "Yes I&#39;m writing in C."}, {"owner": {"reputation": 7, "user_id": 6639622, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ygiQ3rMResw/AAAAAAAAAAI/AAAAAAAABQw/01W2qA-nQ-U/photo.jpg?sz=128", "display_name": "Kantshri Baronia", "link": "https://stackoverflow.com/users/6639622/kantshri-baronia"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469639357, "post_id": 38619199, "comment_id": 64624189, "body": "Both usages have been used by Narsimha Karumanchi in his book..."}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469639406, "post_id": 38619199, "comment_id": 64624224, "body": "They work the same. See this link: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469639582, "post_id": 38619199, "comment_id": 64624316, "body": "I like the second usage (everywhere) because it requires less typing, and there&#39;s no need for the cast. You can&#39;t write those statements inside a structure anyway, so I&#39;m not sure what you mean in your latest edit."}, {"owner": {"reputation": 7, "user_id": 6639622, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ygiQ3rMResw/AAAAAAAAAAI/AAAAAAAABQw/01W2qA-nQ-U/photo.jpg?sz=128", "display_name": "Kantshri Baronia", "link": "https://stackoverflow.com/users/6639622/kantshri-baronia"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469639765, "post_id": 38619199, "comment_id": 64624425, "body": "Writing the code from the book as it is:  struct ArrayQueue *Queue(int size){ struct ArrayQueue *Q = malloc(sizeof(struct ArrayQueue)); }  The link you provided helped, though! :)"}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469640040, "post_id": 38619199, "comment_id": 64624573, "body": "OK, what you just typed is a function named Queue that returns a pointer to an ArrayQueue struct. It looks like you&#39;re declaring a structure at first, but you aren&#39;t. Inside the function, you declare a pointer to an ArrayQueue struct, name it Q, and set its value to the output of <code>malloc</code>. Anyway, none of this has an effect on whether you cast the output of <code>malloc</code>. I don&#39;t know why the author is being inconsistent, but you don&#39;t need to switch back and forth like that."}, {"owner": {"reputation": 7, "user_id": 6639622, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ygiQ3rMResw/AAAAAAAAAAI/AAAAAAAABQw/01W2qA-nQ-U/photo.jpg?sz=128", "display_name": "Kantshri Baronia", "link": "https://stackoverflow.com/users/6639622/kantshri-baronia"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1469640638, "post_id": 38619199, "comment_id": 64624940, "body": "ok...Thanks a lot @yellowantphil!!"}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 6162503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728c26563cbe578e47b823a84de4ad44?s=128&d=identicon&r=PG&f=1", "display_name": "Michel", "link": "https://stackoverflow.com/users/6162503/michel"}, "is_accepted": false, "score": 0, "last_activity_date": 1470368623, "creation_date": 1470368623, "answer_id": 38780741, "question_id": 38619199, "link": "https://stackoverflow.com/questions/38619199/what-is-the-difference-between/38780741#38780741", "title": "What is the difference between:", "body": "<p>By default the function malloc returns a void*. Although you do not have to explicitly cast to the type you want(the compiler will do that), there are programmers that like to make that clearer.</p>\n\n<p>That`s up to your coding style, both are acceptable.</p>\n"}], "owner": {"reputation": 7, "user_id": 6639622, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ygiQ3rMResw/AAAAAAAAAAI/AAAAAAAABQw/01W2qA-nQ-U/photo.jpg?sz=128", "display_name": "Kantshri Baronia", "link": "https://stackoverflow.com/users/6639622/kantshri-baronia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470368623, "creation_date": 1469639117, "last_edit_date": 1470368168, "question_id": 38619199, "link": "https://stackoverflow.com/questions/38619199/what-is-the-difference-between", "title": "What is the difference between:", "body": "<pre><code>struct ArrayQueue *Q = (struct ArrayQueue*)malloc(sizeof(struct ArrayQueue)); \n</code></pre>\n\n<p>vs</p>\n\n<pre><code>struct ArrayQueue *Q = malloc(sizeof(struct ArrayQueue));\n</code></pre>\n\n<p>I am bit confused as to what to use when and exactly what difference do they bear? Intuitively, I feel the first usage is when I'm writing within a function and the second would be when I'm writing within a structure.</p>\n"}, {"tags": ["c", "truetype", "pebble-watch", "pebble-sdk", "cloudpebble"], "comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1469638830, "post_id": 38618736, "comment_id": 64623901, "body": "Have you tried unicode directly? <code>01^\\U20AC</code> should import an euro sign. Not all symbols will be supported but it is fullwidth, that is <code>\\U0001F603</code> should result in a smiley, pardon, emoji if supported."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1469913827, "post_id": 38618736, "comment_id": 64736777, "body": "The code may work but those characters could not be present in the font. Check that first."}], "owner": {"reputation": 301, "user_id": 2125456, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/372ba3a1f71c9de56ea9262ad13b1565?s=128&d=identicon&r=PG", "display_name": "kjl", "link": "https://stackoverflow.com/users/2125456/kjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469637535, "creation_date": 1469637535, "question_id": 38618736, "link": "https://stackoverflow.com/questions/38618736/how-to-include-special-characters-in-a-pebble-font", "title": "How to include special characters in a pebble font?", "body": "<p>When pebble cloud imports a font resource, it gives the option to use a regular expression to specify the characters to import.</p>\n\n<p>It does not seem to recognize the characters that I'm trying to import.\nwhen I use [01\u00ac\u2022\u26ab\u25cb\u262f]\nI get the zero and the 1, but not the not sign or anything else.</p>\n\n<p>When I import without specifications it just gets the standard alpha numeric.</p>\n\n<p>I would be happy if I could get at least the not sign and the bullet.</p>\n"}, {"tags": ["c++", "c", "winapi", "sendmessage", "createwindow"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637672, "post_id": 38618726, "comment_id": 64623233, "body": "I am not sure if you have xaml in c++. But in Wpf C# I would put a StackPanel inside my Button using the xaml. Then inside the StackPanel I would put both Text control and Image control andthen play with their visibility On/Off from code behin."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1469637825, "post_id": 38618726, "comment_id": 64623317, "body": "Probably need to remove the <code>BS_BITMAP</code> style from the window."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469641928, "post_id": 38618726, "comment_id": 64625663, "body": "@firststep this is not wpf"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469643484, "post_id": 38618726, "comment_id": 64626565, "body": "@FirstStep: The Windows API is not the Windows Runtime is not .NET. But sure, you can access Direct2D from C++. Not that it&#39;s going to be helpful in solving this issue, but it&#39;s possible. And yes, you can use XAML in a C++ WinRT application. But that&#39;s a different XAML from WPF or Silverlight. Anyway, all of this is completely unrelated."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469643663, "post_id": 38618726, "comment_id": 64626656, "body": "Well I thought to give an idea of possibly doing this my way (To put both of them at the same time, and control their visibility). And I mentioned xaml because (I think) it is easier to see/understand the idea using xaml (wpf). Well thank you for informing me then I just wanted to help and now I learned something new :) @IInspectable"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1469643679, "post_id": 38618726, "comment_id": 64626666, "body": "@DavidHeffernan Thank you for pointing this out. I did not say it is a wpf."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1469643705, "post_id": 38618726, "comment_id": 64626679, "body": "That code is so wrong, it boggles the mind. You cannot create a <code>WS_CHILD</code> window, and then pass <code>NULL</code> as the parent. And its totally unclear, why you call <code>ShowWindow</code> and <code>UpdateWindow</code> every time you handle a message. Since you don&#39;t seem to know what you are doing, consider getting a book. Petzold&#39;s <a href=\"https://rads.stackoverflow.com/amzn/click/com/157231995X\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Programming Windows&#174;</a> is fine."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469646177, "post_id": 38618726, "comment_id": 64628129, "body": "@firststep so why are you talking about WPF and XAML then?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469671344, "post_id": 38619451, "comment_id": 64636898, "body": "I can add the bitmap image to the button but I also want to see the text on the image button"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469677355, "post_id": 38619451, "comment_id": 64638095, "body": "Remove <code>BS_BITMAP</code> from button style. Only use <code>SendMessage(... BM_SETIMAGE ...)</code> to assign the bitmap. Your code has more serious problems which I didn&#39;t notice before. See comments earlier about reading a tutorial on Windows programming."}, {"owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469681651, "post_id": 38619451, "comment_id": 64639238, "body": "I am so sorry, I removed BS_BITMAP after that It is removing the image from the button and adding text. but I need both image and text. However I just started learning the code from given books"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469682088, "post_id": 38619451, "comment_id": 64639344, "body": "Call <code>SendMessage(... BM_SETIMAGE ...)</code> to assign the bitmap. The button will show both bitmap and text (text will be to the right of bitmap). See the &quot;Remarks&quot; section in official <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761822(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> But first you have to create a window, then create a button inside the window."}, {"owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469684360, "post_id": 38619451, "comment_id": 64640161, "body": "Seems that I cant make it work, Need to learn from the scratch just for this  basic GUI code. I am afraid that I wont be submit my secure source code analyzer to the management. I am basically security tester and i develop background automation security scripts"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1469640705, "last_edit_date": 1469640705, "creation_date": 1469639988, "answer_id": 38619451, "question_id": 38618726, "link": "https://stackoverflow.com/questions/38618726/sending-text-to-button-after-adding-image-c/38619451#38619451", "title": "Sending text to button after adding image c++", "body": "<p>You do realize you have to create a window and then put the button inside the window?</p>\n\n<p>Chances are the program is looking for a file in the wrong directory. Use full path names and do error checking to make sure the bitmap is loaded. Example:</p>\n\n<pre><code>HANDLE hImg = LoadImageW(NULL, L\"c:\\\\fullpath\\\\Untitled.bmp\", IMAGE_BITMAP, 0, 0, \nLR_DEFAULTCOLOR | LR_DEFAULTSIZE | LR_LOADFROMFILE);\n\nif (!hImg)\n    report error...\n</code></pre>\n\n<p>Don't put <code>ShowWindow</code> and <code>UpdateWindow</code> in the message loop. Just show the window and then call the message loop. Example:</p>\n\n<pre><code>ShowWindow(hWnd, SW_SHOW);\nUpdateWindow(hWnd);\n\nwhile (GetMessage(&amp;msg, NULL, 0, 0))\n{\n    TranslateMessage(&amp;msg);\n    DispatchMessage(&amp;msg);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 752, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469640705, "creation_date": 1469637514, "last_edit_date": 1469640102, "question_id": 38618726, "link": "https://stackoverflow.com/questions/38618726/sending-text-to-button-after-adding-image-c", "title": "Sending text to button after adding image c++", "body": "<p>I am able to add image to the button as background but later I want to add text to the button as \"Weclome\", I tried all possible ways using Settext, SendmessageA.\nplease help</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\nint main()\n{\n    MSG msg;\n    HWND hWnd = CreateWindow(TEXT(\"button\"), TEXT(\"START\"), WS_VISIBLE | WS_POPUP | WS_CHILD | WS_TABSTOP | BS_BITMAP,\n        250, 250, 500, 500, NULL, NULL, NULL, NULL);\n    HANDLE hImg = LoadImageW(NULL, L\"Untitled.bmp\", IMAGE_BITMAP, 0, 0, LR_DEFAULTCOLOR | LR_DEFAULTSIZE | LR_LOADFROMFILE);\n    SendMessageW(hWnd, BM_SETIMAGE, IMAGE_BITMAP, (LPARAM)hImg);\n\n    SendMessageA(hWnd, WM_SETTEXT, 0, (LPARAM)\"Welcome\");\n    //SendMessageW(hWnd, WM_SETTEXT, (WPARAM) 256,NULL);\n\n\n    while (GetMessage(&amp;msg, NULL, 0, 0))\n    {\n        ShowWindow(hWnd, SW_SHOW);\n        UpdateWindow(hWnd);\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return (int)msg.wParam;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "edited": false, "score": 5, "creation_date": 1469637240, "post_id": 38618602, "comment_id": 64623027, "body": "Hey, I think you just spelled &#39;Reference&#39; wrong, or was that just a typo in the question?"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "edited": false, "score": 0, "creation_date": 1469637457, "post_id": 38618602, "comment_id": 64623130, "body": "@Matthew Hi. Sorry it was typing the question, in the code is just fine"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469637574, "post_id": 38618602, "comment_id": 64623185, "body": "then show your <i>full</i> code."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1469639673, "post_id": 38619109, "comment_id": 64624381, "body": "I think the error can be in the header file, because now it appear an error of missing parenthesis. (error: expected identifier or &#39;(&#39; before &#39;float&#39;). But the header file is just exacly as the post. I think that if i could correct this maybe the error of initializer dissapear"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1469713590, "post_id": 38619109, "comment_id": 64659574, "body": "@JuanBravo: can you post the contents of <code>main.c</code>?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1469638735, "creation_date": 1469638735, "answer_id": 38619109, "question_id": 38618602, "link": "https://stackoverflow.com/questions/38618602/invalid-initializer-in-struct-function/38619109#38619109", "title": "Invalid initializer in struct function", "body": "<p>The most plausible explanation for this error is the <code>struct Reference_XS Acc_G</code> must be defined at the global scope.  Initializers for global variables must be constant in C.</p>\n"}], "owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469638870, "creation_date": 1469637108, "last_edit_date": 1469638870, "question_id": 38618602, "link": "https://stackoverflow.com/questions/38618602/invalid-initializer-in-struct-function", "title": "Invalid initializer in struct function", "body": "<p>I have a function <code>Reference</code> that returns a struct as shown below:</p>\n\n<pre><code>struct Reference_XS {\n    float *mat_c;\n};\n\nstruct Reference_XS Reference(\n    float q0,\n    float q1,\n    float q2,\n    float q3,\n    float val1,\n    float val2,\n    float val3\n)  \n{\n    float mat_a[3][3] = {\n        (2*q0*q0)+(2*q1*q1)-1, (2*q1*q2)-(2*q0*q3), (2*q1*q3)+(2*q0*q1),\n        (2*q1*q2)+(2*q0*q3), (2*q0*q0+(2*q2*q2)-1), (2*q2*q3)-(2*q0*q1),\n        (2*q1*q3)-(2*q0*q2), (2*q2*q3)+(2*q0*q1), (2*q0*q0)+(2*q3*q3)-1\n    };\n\n    float mat_b[3][1] = { val1, val2, val3 };\n    static float Mat_c[3];\n    int i, k;\n    float temp = 0;\n\n    for (i = 0; i &lt; 3; i++) {\n        temp = 0;\n        for (k = 0; k &lt; 3; k++) {\n            temp = mat_a[i][k] * mat_b[k][0] + temp;\n            Mat_c[i] = temp;        \n        }\n    }\n\n    struct Reference_XS data = { Mat_c };\n    return data;\n}\n</code></pre>\n\n<p>But in the <code>main.c</code>, when I called it like</p>\n\n<pre><code>struct Reference_XS Acc_G = Reference(\n    q0_XS,\n    q1_XS,\n    q2_XS,\n    q3_XS,\n    acx_XS,\n    acy_XS,\n    acz_XS\n);\n</code></pre>\n\n<p>It shows the error <code>Invalid Initializer</code></p>\n"}, {"tags": ["c", "pointers", "memory"], "comments": [{"owner": {"reputation": 922, "user_id": 6239674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bo8qY.jpg?s=128&g=1", "display_name": "VatsalSura", "link": "https://stackoverflow.com/users/6239674/vatsalsura"}, "edited": false, "score": 3, "creation_date": 1469636852, "post_id": 38618506, "comment_id": 64622798, "body": "Because <code>C</code> compiler reads from right to left."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 5, "creation_date": 1469636891, "post_id": 38618506, "comment_id": 64622830, "body": "You invoked <i>undefined behaior</i> by passing data having wrong type to <code>printf()</code>. To print addresses, cast them to <code>void*</code> and use <code>%p</code> specifier. Also usage of <code>void main()</code>, which is illegal in C89 and implementation-defined in C99 or later, should be avoided and standard <code>int main(void)</code> should be used in hosted environment."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 11, "creation_date": 1469636900, "post_id": 38618506, "comment_id": 64622838, "body": "The compiler has no obligations to place variables in memory in any particular order. It could be 12054 and 999924 just as easily"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 6, "creation_date": 1469636989, "post_id": 38618506, "comment_id": 64622882, "body": "You seem surprised to see this. Can you elaborate a bit more about what you thought was going to happen and why?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1469637025, "post_id": 38618506, "comment_id": 64622909, "body": "<i>UB</i>, but obviously your implementation has a downward growing stack."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 3, "creation_date": 1469637074, "post_id": 38618506, "comment_id": 64622939, "body": "@dhke Typically stack won&#39;t be used because <code>i</code> and <code>j</code> have static storage duration."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1469637168, "post_id": 38618506, "comment_id": 64622994, "body": "@MikeCAT Ah, I overlooked that they where outside of <code>main()</code>. My bad."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469640775, "post_id": 38618850, "comment_id": 64625020, "body": "The output of an address need not even be integer numeric.  <i>Could</i> be &quot;ABD0:BEEF&quot; or &quot;red&quot;."}, {"owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469641313, "post_id": 38618850, "comment_id": 64625322, "body": "@chux Oh my mistake it&#39;s outside Main I thought it was inside. Well in that case where the compiler puts this in memory is completely arbitrary. It usually behaves in a similar fashion to how a function would build it&#39;s stack but that is completely arbitrary and probably not worth mentioning."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "edited": false, "score": 0, "creation_date": 1469643890, "post_id": 38618850, "comment_id": 64626777, "body": "@arduic: It&#39;s completely arbitrary regardless of where they&#39;re defined."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 5, "last_activity_date": 1469638361, "last_edit_date": 1469638361, "creation_date": 1469637904, "answer_id": 38618850, "question_id": 38618506, "link": "https://stackoverflow.com/questions/38618506/why-does-this-simple-c-code-print-the-addresses-in-the-reverse-order-for-ex/38618850#38618850", "title": "Why does this simple C code print the addresses in the reverse order ? (For Ex. 4214868 4214864)", "body": "<pre><code>#include&lt;stdio.h&gt;\nint i,j;\nvoid main()\n</code></pre>\n\n<p>This is wrong. (That's a slight oversimplification, but it's close enough.) The correct declaration is <code>int main(void)</code>.</p>\n\n<pre><code>{\n    printf(\"%u %u\",&amp;i,&amp;j); \n</code></pre>\n\n<p>The <code>\"%u\"</code> format requires an argument of type <code>unsigned int</code>. Passing an <code>int*</code> pointer value causes undefined behavior.  The correct way to print the addresses is:</p>\n\n<pre><code>printf(\"%p %p\\n\", (void*)&amp;i, (void*)&amp;j);\n</code></pre>\n\n<p>Note the <code>\\n</code>: a program's output should end with a newline.</p>\n\n<pre><code>    getch();\n</code></pre>\n\n<p>There is no <code>getch()</code> function declared in <code>&lt;stdio.h&gt;</code>. If you didn't get at least a warning on that call, you should find out how to enable better diagnostics in your compiler.</p>\n\n<p>You're probably trying to call the <code>getch()</code> function declared in the Windows (and DOS?) specific <code>&lt;conio.h&gt;</code> header. This makes your program unnecessarily non-portable.</p>\n\n<pre><code>}\n</code></pre>\n\n<p>As for the values it's printing, the C standard says nothing about the relative addresses of variables. The compiler is free to allocate them in any way it likes. And there's no good reason for you to <em>care</em> whether <code>i</code> is allocated before or after <code>j</code> in memory.</p>\n"}, {"comments": [{"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 1, "creation_date": 1469639297, "post_id": 38618883, "comment_id": 64624161, "body": "How does this answers the actual question or order?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1470221502, "last_edit_date": 1470221502, "creation_date": 1469638021, "answer_id": 38618883, "question_id": 38618506, "link": "https://stackoverflow.com/questions/38618506/why-does-this-simple-c-code-print-the-addresses-in-the-reverse-order-for-ex/38618883#38618883", "title": "Why does this simple C code print the addresses in the reverse order ? (For Ex. 4214868 4214864)", "body": "<p>You cannot print addresses with the format <code>%u</code>, it invokes undefined behavior.  One good reason for this is addresses might not be the same size as <code>unsigned int</code>.</p>\n\n<p>Change your code to use the <code>%p</code> format, which expects addresses as <code>void *</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint i, j;\nvoid main() {\n    printf(\"%p %p\\n\", (void*)&amp;i, (void*)&amp;j); \n    getch();\n}\n</code></pre>\n\n<p>If you absolutely want decimal output, you can convert the addresses to <code>uintptr_t</code>, as use macros from <code>&lt;inttypes.h&gt;</code> to convert the values to decimal format, provided your C library is C99 conformant:</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nint i, j;\nvoid main(void) {\n    printf(\"%\"PRIuPTR\" %\"PRIuPTR\"\\n\", (uintptr_t)&amp;i, (uintptr_t)&amp;j); \n    getchar();\n}\n</code></pre>\n\n<p>Note that your code exhibits a number of bad practices:</p>\n\n<ul>\n<li>defining global variables with short names such as <code>i</code> and <code>j</code> is <strong>very</strong> bad style, leads to confusion and bugs.</li>\n<li>the prototype for <code>main</code> is either <code>int main(void)</code> or <code>int main(int argc, char *argv[])</code> or equivalent.</li>\n<li><code>getch()</code> is not a standard function.  It is a pity your Windows hosted development environment does not keep the terminal window open for you to see your programs output.</li>\n<li>returning <code>0</code> from <code>main</code> is not strictly necessary, but considered good style.</li>\n</ul>\n\n<p>Regarding your question, the actual addresses at which global variables are set by the compiler/linker are not defined by the standard. No assumption should be made as to how they are determined nor in which order variables are stored in memory.  As a matter of fact, on some architectures such as OS/X, these addresses are randomized at runtime, so the output of your program can vary from one execution to another, running the same executable file, on the same machine.</p>\n"}], "owner": {"reputation": 43, "user_id": 6543489, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4lrHZn8EHZw/AAAAAAAAAAI/AAAAAAAAAZk/Jst2SmXaiMM/photo.jpg?sz=128", "display_name": "Ayush Shrivastava", "link": "https://stackoverflow.com/users/6543489/ayush-shrivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 38618850, "answer_count": 2, "score": 0, "last_activity_date": 1470221502, "creation_date": 1469636783, "last_edit_date": 1469640643, "question_id": 38618506, "link": "https://stackoverflow.com/questions/38618506/why-does-this-simple-c-code-print-the-addresses-in-the-reverse-order-for-ex", "title": "Why does this simple C code print the addresses in the reverse order ? (For Ex. 4214868 4214864)", "body": "<p>Prints the addresses of <code>i</code> and <code>j</code>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint i,j;\nvoid main()\n{\n    printf(\"%u %u\",&amp;i,&amp;j); \n    getch();\n}\n</code></pre>\n\n<hr>\n\n<p>Output:  </p>\n\n<pre><code>4214868 4214864\n</code></pre>\n"}, {"tags": ["c", "ubuntu", "filesystems"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1469637403, "post_id": 38618497, "comment_id": 64623105, "body": "I wouldn&#39;t do it at your current level of understanding (no offence intended, just warning)"}], "answers": [{"tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 2, "last_activity_date": 1469637633, "last_edit_date": 1469637633, "creation_date": 1469637205, "answer_id": 38618630, "question_id": 38618497, "link": "https://stackoverflow.com/questions/38618497/how-to-write-straight-to-disk-in-c/38618630#38618630", "title": "How to write straight to disk in c", "body": "<p>You most likely don't have permissions to open <code>/dev/sdb1</code>. Check the result of <code>fopen</code> (<code>fp</code>) before you try to use it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]){\n    FILE *fp = fopen(\"/dev/sdb1\", \"w\");\n    if(fp == NULL){\n        fprintf(stderr, \"Error opening /dev/sdb1: %s\\n\", \n                strerror(errno));\n        return EXIT_FAILURE;\n    }\n    /* Now you can use fp */\n    fwrite(0, 1, 1, fp);\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/c/io/fopen\" rel=\"nofollow\"><code>fopen</code></a> returns <code>NULL</code> when opening failed, and puts the reason in the global* variable <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow\"><code>errno</code></a>. <a href=\"http://man7.org/linux/man-pages/man3/strerror.3.html\" rel=\"nofollow\"><code>strerror</code></a> returns a descriptive string for that error code.</p>\n\n<p>You'll probably need to run your program as root to access the block devices. Needless to say, debug it very well before doing so, or you might ruin your system (especially if you're messing about with direct disk access).</p>\n"}], "owner": {"reputation": 3108, "user_id": 5288867, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-zd2wZZ4VrjY/AAAAAAAAAAI/AAAAAAAADiM/koENXn3dc8s/photo.jpg?sz=128", "display_name": "dangee1705", "link": "https://stackoverflow.com/users/5288867/dangee1705"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 38618630, "answer_count": 1, "score": 0, "last_activity_date": 1469637633, "creation_date": 1469636750, "question_id": 38618497, "link": "https://stackoverflow.com/questions/38618497/how-to-write-straight-to-disk-in-c", "title": "How to write straight to disk in c", "body": "<p>So I am trying to make a program that will wipe drives. After some research I found that all devices are stored under the /dev/ folder in Ubuntu. I tried the following...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]){\n    FILE *fp = fopen(\"/dev/sdb1\", \"w\");\n    fwrite(\"\\0\", 1, 1, fp);\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>But found that it returned</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>Why is this? Should I not be able just to write to the disk?</p>\n"}, {"tags": ["ios", "objective-c", "c", "opengl-es", "egl"], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 939193, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E0VJh.jpg?s=128&g=1", "display_name": "Sergei Vasilenko", "link": "https://stackoverflow.com/users/939193/sergei-vasilenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1482845458, "creation_date": 1482845458, "answer_id": 41346144, "question_id": 38618199, "link": "https://stackoverflow.com/questions/38618199/how-to-get-eglnativewindowtype-in-ios-platform/41346144#41346144", "title": "How to get EGLNativeWindowType in iOS platform?", "body": "<p>iOS uses EAGL as an interface between OpenGL ES and the underlying windowing system. EAGL need for iOS as EGL needs for Android to draw via OpenGL ES. So you can not use EGL API on iOS.</p>\n\n<p>Differences between them and how them works very good described in <a href=\"http://blog.db-in.com/khronos-egl-and-apple-eagl/\" rel=\"nofollow noreferrer\">an article</a>.</p>\n"}], "owner": {"reputation": 327, "user_id": 4789239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7cafa12a62a0f706156f9879e4381f41?s=128&d=identicon&r=PG&f=1", "display_name": "setzuiro", "link": "https://stackoverflow.com/users/4789239/setzuiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482845458, "creation_date": 1469635796, "last_edit_date": 1469637830, "question_id": 38618199, "link": "https://stackoverflow.com/questions/38618199/how-to-get-eglnativewindowtype-in-ios-platform", "title": "How to get EGLNativeWindowType in iOS platform?", "body": "<p>How can I obtain a <code>EGLNativeWindowType</code> object in the <b>iOS platform</b>? or achieve the equivalent of the following android code?</p>\n\n<p>To provide a bit more insight, I am currently porting a native android app to iOS which shares a single core C library, while the iOS project itself is written in Objective-C. The project is also using EGL and not EAGL.</p>\n\n<p>The existing <b>source code is standard C</b> but uses Android's NDK; a <code>EGLSurface</code> object is defined with <code>EGLAPI EGLSurface EGLAPIENTRY eglCreateWindowSurface(EGLDisplay dpy, EGLConfig config, EGLNativeWindowType win, const EGLint *attrib_list)</code></p>\n\n<pre><code>EGLNativeWindowType win = AndroidMainGetAndroidActivity()-&gt;app-&gt;window;\nEGLSurface eglSurface = eglCreateWindowSurface(e_eglDisplay, config, win, NULL);\n</code></pre>\n\n<p>I haven't found any documentation relating to <code>EGLNativeWindowType</code> and <b>iOS</b>.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1469634151, "post_id": 38617525, "comment_id": 64621081, "body": "You are trying to assign string literal to a variable of type <code>char</code>."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1469634332, "post_id": 38617525, "comment_id": 64621207, "body": "Did the compiler say anything like &quot;warning: assignment makes integer from pointer without a cast&quot;?"}, {"owner": {"reputation": 85, "user_id": 6565643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/747666002073/picture?type=large", "display_name": "Zen Mournster", "link": "https://stackoverflow.com/users/6565643/zen-mournster"}, "edited": false, "score": 0, "creation_date": 1469634366, "post_id": 38617525, "comment_id": 64621236, "body": "I don&#39;t even understand what that means."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 2, "creation_date": 1469635619, "post_id": 38617525, "comment_id": 64622057, "body": "@Kusalananda, <code>&#39;&#39;</code> isn&#39;t valid C"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1469635691, "post_id": 38617525, "comment_id": 64622093, "body": "@ikegami Gah! I meant with a space inside. Been doing too much shell programming lately..."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1469636442, "post_id": 38617525, "comment_id": 64622561, "body": "So <code>&#39; &#39;</code> (there is a space in the middle), not <code>&quot;&quot;</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470088880, "post_id": 38617525, "comment_id": 64795178, "body": "@ZenMournster: can you accept one of the answers by clicking on the grey checkmark below the answer score?"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6565643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/747666002073/picture?type=large", "display_name": "Zen Mournster", "link": "https://stackoverflow.com/users/6565643/zen-mournster"}, "edited": false, "score": 0, "creation_date": 1469634207, "post_id": 38617578, "comment_id": 64621115, "body": "Then I get error &quot;empty character constant&#39;, expected expression."}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 4, "creation_date": 1469634273, "post_id": 38617578, "comment_id": 64621161, "body": "You need to use <code>&#39;&lt;hit the spacebar here&gt;&#39;</code>, not <code>&#39;&#39;</code>"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1469635900, "last_edit_date": 1469635900, "creation_date": 1469633953, "answer_id": 38617578, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space/38617578#38617578", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p>Use single quotes</p>\n\n<pre><code>name[5]= ' ';\nname[6]= ' ';\n</code></pre>\n\n<p>Otherwise you need to move \" Blameson\" two positions left using standard C function <code>memmove</code>.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    char name [20] = \"Michael Blameson\";\n\n    printf( \"My name is %s\\n\", name );\n\n    name[0] = 'P';\n    name[1] = 'e';\n    name[2] = 't';\n    name[3] = 'e';\n    name[4] = 'r';\n\n    memmove( name + 5, name + 7, strlen( name + 7 ) + 1 );\n\n    printf( \"My name is %s\\n\", name );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is </p>\n\n<pre><code>My name is Michael Blameson\nMy name is Peter Blameson\n</code></pre>\n\n<p>Or if you do not want to use magic numbers then the program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    char name [20] = \"Michael Blameson\";\n\n    printf( \"My name is %s\\n\", name );\n\n    size_t i = 0;\n\n    name[i++] = 'P';\n    name[i++] = 'e';\n    name[i++] = 't';\n    name[i++] = 'e';\n    name[i++] = 'r';\n\n    size_t j = strchr( name, ' ' ) - name;\n\n    memmove( name + i, name + j, strlen( name + j ) + 1 );\n\n    printf( \"My name is %s\\n\", name );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is the same as shown above.</p>\n\n<pre><code>My name is Michael Blameson\nMy name is Peter Blameson\n</code></pre>\n\n<p>As for statements</p>\n\n<pre><code>name[5]=\"\";\nname[6]= \"\";\n</code></pre>\n\n<p>in your program then <code>\"\"</code> is a string literal (instead of character literal) that has type of array <code>char [1]</code> that initialized like <code>{ '\\0' }</code> and which in the expressions in the assignment statements is converted to pointer to its first and single element. The program should issue a message for these statements.</p>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "is_accepted": false, "score": 1, "last_activity_date": 1469634097, "creation_date": 1469634097, "answer_id": 38617631, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space/38617631#38617631", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p>Notice that you are using double quotes for your spaces (\" \").\nIn C, all characters for your char[] are indicated by single quotes ('') or integer ASCII values. In this case, your character is a space - ' ', and your ASCII integer is 32.</p>\n\n<p>Your \"\" is referring to a C string literal which is a constant global pointer created at runtime.</p>\n\n<p><a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/ASCII-Table-wide.svg/2000px-ASCII-Table-wide.svg.png\" rel=\"nofollow\">https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/ASCII-Table-wide.svg/2000px-ASCII-Table-wide.svg.png</a></p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1469634146, "creation_date": 1469634146, "answer_id": 38617651, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space/38617651#38617651", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p>The assignment <code>name[5]=\"\";</code> attempts to store the pointer to the beginning of an empty string into a <code>char</code> array element. Double quotes represent string literals in C, which are basically pointers to the first element of the <code>char</code> array holding the string.</p>\n\n<p>If you want to assign a space, use single quotes instead of double. Single quotes denote a character value. (Single quoted values can actually be used as a one-byte integer, but that is not advisable).</p>\n\n<pre><code>name[5] = ' ';\nname[6] = ' ';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "is_accepted": false, "score": 3, "last_activity_date": 1469634196, "creation_date": 1469634196, "answer_id": 38617670, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space/38617670#38617670", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p>You can't remove characters that way, they need to be replaced with other characters:</p>\n\n<pre><code>name[5] = ' ';\nname[6] = ' ';\n</code></pre>\n\n<p>Of course you will end up printing:</p>\n\n<pre>\nMy name is Peter   Blameson\n</pre>\n\n<p>Which is not ideal. Instead you have to move the remaining characters (using <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/memmove.html\" rel=\"nofollow\"><code>memmove</code></a>) up to fill in the space:</p>\n\n<pre><code>memmove(&amp;name[5], &amp;name[7], 10);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 4, "last_activity_date": 1469634224, "creation_date": 1469634224, "answer_id": 38617682, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space/38617682#38617682", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p><code>\"\"</code> is a string literal, which is unmodifiable array of <code>char</code>. It will be converted to a pointer pointing at its first element and since <code>name[5]</code> and <code>name[6]</code> are <code>char</code>, the pointer will be converted to an integer in implementation-defined manner.</p>\n\n<p>You cannot delete characters (elements) in <code>name</code> without shifting characters after the characters to be deleted. To change the characters to space, you can use space character <code>' '</code>. To shift elements, you can use <code>memmove()</code> (you cannot use <code>memcpy()</code> nor <code>strcpy()</code> because they won't work when the source and destination are overwrapped).</p>\n\n<pre><code>memmove(&amp;name[5], &amp;name[7], strlen(&amp;name[7]) + 1); /* +1 for terminating null-character */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1469634801, "creation_date": 1469634801, "answer_id": 38617866, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space/38617866#38617866", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p>Space characters are not represented as <code>\"\"</code>, which is an empty string literal, but as <code>' '</code> (space blank space). You might have misread your book.</p>\n\n<p>The modified code would be:</p>\n\n<pre><code>char name[20] = \"Michael Blameson\";\n\nprintf(\"My name is %s\\n\", name);\nname[0] = 'P';\nname[1] = 'e';\nname[2] = 't';\nname[3] = 'e';\nname[4] = 'r';\nname[5] = ' ';\nname[6] = ' ';\nprintf(\"My name is %s\\n\", name);\n</code></pre>\n\n<p>Running that produces output: <code>My name is Peter   Blameson</code>.</p>\n\n<p>To remove the 2 extra spaces between <code>Peter</code> and <code>Blameson</code>, you can use a <code>for</code> loop or a string library function:</p>\n\n<pre><code>for (int i = 6; i &lt; 18; i++) {\n    name[i] = name[i + 2];\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>memmove(name + 6, name + 8, 12);\n</code></pre>\n\n<p>Both of these methods will copy the contents of the array 2 positions to the left.  You cannot use <code>strcpy(name + 6, name + 8)</code> because <code>strcpy()</code> invokes undefined behavior if the source and destination arrays overlap.</p>\n"}], "owner": {"reputation": 85, "user_id": 6565643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/747666002073/picture?type=large", "display_name": "Zen Mournster", "link": "https://stackoverflow.com/users/6565643/zen-mournster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1469644198, "creation_date": 1469633833, "question_id": 38617525, "link": "https://stackoverflow.com/questions/38617525/whats-going-on-here-changing-values-in-arrays-to-blank-space", "title": "Whats going on here? Changing values in arrays to blank space", "body": "<p>I am self-learning C online and I wrote a test program to change the values within individual arrays thus:</p>\n\n<pre><code>char name [20] = \"Michael Blameson\";\n\nprintf(\"My name is %s\\n\", name);\nname[0]='P';\nname[1]='e';\nname[2]='t';\nname[3]='e';\nname[4]='r';\nname[5]=\"\";\nname[6]= \"\";\nprintf(\"My name is %s\\n\", name););\n</code></pre>\n\n<p>I am trying to leave the last two spaces blank,  so it reads \u201cMy name is Peter Blameson\u201d. However, when I run it, it reads \u201cMy name is Peter?? Blameson\u201d</p>\n\n<p>What\u2019s going on here?</p>\n"}, {"tags": ["c", "ubuntu", "graphics"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1469633124, "post_id": 38617188, "comment_id": 64620338, "body": "Did you read the documentation ? A quick google search showed up this: <a href=\"http://askubuntu.com/questions/525051/how-do-i-use-graphics-h-in-ubuntu\" title=\"how do i use graphics h in ubuntu\">askubuntu.com/questions/525051/&hellip;</a>"}, {"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "edited": false, "score": 0, "creation_date": 1507815826, "post_id": 38617188, "comment_id": 80368756, "body": "Use the X libraries, or OpenGL."}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "is_accepted": false, "score": -1, "last_activity_date": 1507816463, "last_edit_date": 1592644375, "creation_date": 1507816463, "answer_id": 46711456, "question_id": 38617188, "link": "https://stackoverflow.com/questions/38617188/set-window-size-in-graphics-h-on-ubuntu/46711456#46711456", "title": "Set window size in graphics.h on Ubuntu", "body": "<h1>Don't do this.</h1>\n<p>This library is ancient. I wouldn't be surprised if you found a system that doesn't support it.<br />\n<strong>Use any of:</strong></p>\n<ul>\n<li><a href=\"http://xfce.org\" rel=\"nofollow noreferrer\">X</a></li>\n<li><a href=\"http://libsdl.org/\" rel=\"nofollow noreferrer\">libSDL</a></li>\n<li><a href=\"http://gtk.org\" rel=\"nofollow noreferrer\">GTK+</a></li>\n<li><a href=\"http://doc.qt.io/qt-5/\" rel=\"nofollow noreferrer\">Qt</a></li>\n</ul>\n<p><sub><em>(Okay, you <a href=\"https://web.stanford.edu/class/archive/cs/cs106b/cs106b.1126/materials/cppdoc/graphics.html#Function:initGraphics\" rel=\"nofollow noreferrer\">can do this</a>, but please don't)</em></sub></p>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "is_accepted": false, "score": 1, "last_activity_date": 1507839086, "creation_date": 1507839086, "answer_id": 46718084, "question_id": 38617188, "link": "https://stackoverflow.com/questions/38617188/set-window-size-in-graphics-h-on-ubuntu/46718084#46718084", "title": "Set window size in graphics.h on Ubuntu", "body": "<p>I got my info from <a href=\"https://askubuntu.com/questions/525051/how-do-i-use-graphics-h-in-ubuntu\">https://askubuntu.com/questions/525051/how-do-i-use-graphics-h-in-ubuntu</a>...</p>\n\n<pre><code>/*  demo.c*/\n#include&lt;graphics.h&gt; \nint main()\n{\n   int gd = DETECT,gm,left=100,top=100,right=200,bottom=200,x= 300,y=150,radius=50;\n   initgraph(&amp;gd,&amp;gm,NULL);\n   rectangle(left, top, right, bottom);\n   circle(x, y, radius);\n   bar(left + 300, top, right + 300, bottom);\n   line(left - 10, top + 150, left + 410, top + 150);\n   ellipse(x, y + 200, 0, 360, 100, 50);\n   outtextxy(left + 100, top + 325, \"C Graphics Program\");\n\n   delay(5000);\n   closegraph();\n   return 0;\n}\n</code></pre>\n\n<p>This seems like <code>graphics.h</code> has a defined <code>DETECT</code> variable that I would assume would detect your default width / height. Look into that and I think you may find your answer.</p>\n"}], "owner": {"reputation": 165, "user_id": 3981676, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000654284140/picture?type=large", "display_name": "Aanchal Adhikari", "link": "https://stackoverflow.com/users/3981676/aanchal-adhikari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2625, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1507839086, "creation_date": 1469632905, "last_edit_date": 1507818939, "question_id": 38617188, "link": "https://stackoverflow.com/questions/38617188/set-window-size-in-graphics-h-on-ubuntu", "title": "Set window size in graphics.h on Ubuntu", "body": "<p><code>initwindow()</code> doesn't seem to work, nor does <code>initgraph()</code>.  </p>\n\n<p>How do I set the width and height of the window?</p>\n"}, {"tags": ["c", "artificial-intelligence", "tic-tac-toe", "minimax"], "comments": [{"owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "edited": false, "score": 0, "creation_date": 1469633231, "post_id": 38617131, "comment_id": 64620405, "body": "what is the definition of getBoardState?"}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "reply_to_user": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "edited": false, "score": 0, "creation_date": 1469633377, "post_id": 38617131, "comment_id": 64620514, "body": "@clarasoft-it it says that a few lines below."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1469634911, "post_id": 38617131, "comment_id": 64621606, "body": "What were you expecting?"}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1469635053, "post_id": 38617131, "comment_id": 64621704, "body": "@4386427 I expected that the corners should have a higher score. But it&#39;s not just with the initial board. If I put some moves in the <code>g_boardState</code>, it&#39;s not better. Oftentimes, it does not recommend me to block for example."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1469636064, "post_id": 38617131, "comment_id": 64622346, "body": "Why do you call <code>playerSwitch</code> in the function <code>printSocredBoards</code> ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469636110, "post_id": 38617131, "comment_id": 64622376, "body": "I would expect something like <code>if(isWon() == player)</code> rather than <code>if(isWon())</code>  <code>isWon()</code> returns non-zero (true) if <i>somebody</i> won."}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1469690259, "post_id": 38617131, "comment_id": 64643150, "body": "@4386427 because with the <code>printScoredBoards</code> I set every position on the board to <code>EPlayerO</code> one after the other. Thus I have to then give my <code>scoring</code> function the opposite player since it is no longer O&#39;s turn."}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469690425, "post_id": 38617131, "comment_id": 64643260, "body": "@chux <code>player</code> couldn&#39;t have the same value as <code>isWon()</code> though because the player previously has been switched. It is also easier that way since <code>scoring</code> is not dependent of what player started."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1469690019, "post_id": 38625235, "comment_id": 64642995, "body": "Shouldn&#39;t the score of the state you are describing be:         X    -10    -10     -10       0    -10     -10    -10    -10"}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1469691135, "post_id": 38625235, "comment_id": 64643725, "body": "Also, if I input the following state: <code>O  0  0  0  X  0  0  0  0</code>, shoudn&#39;t I get a score that suggests to put the next <code>O</code> in the bottom-right corner rather one that outputs all 0s?"}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1469709716, "post_id": 38625235, "comment_id": 64656305, "body": "Or was I just misunderstanding the purpose of this algorithm? Is it actually describing the outcome of a game if a player puts this mark on a position and both play perfectly from then on?"}, {"owner": {"reputation": 649, "user_id": 1165812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjbJL.jpg?s=128&g=1", "display_name": "tuckermi", "link": "https://stackoverflow.com/users/1165812/tuckermi"}, "reply_to_user": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1469834999, "post_id": 38625235, "comment_id": 64718598, "body": "For each possible play, you are computing the end result from optimal play (by both players). In the scenario you described above where O played first in upper left, then X played in center, there is no choice for O that subsequently leads to anything other than a draw (assuming optimal play), no?"}], "tags": [], "owner": {"reputation": 649, "user_id": 1165812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjbJL.jpg?s=128&g=1", "display_name": "tuckermi", "link": "https://stackoverflow.com/users/1165812/tuckermi"}, "is_accepted": true, "score": 1, "last_activity_date": 1469665419, "creation_date": 1469665419, "answer_id": 38625235, "question_id": 38617131, "link": "https://stackoverflow.com/questions/38617131/minimax-algorithm-with-tictactoe-not-working-properly/38625235#38625235", "title": "Minimax algorithm with TicTacToe not working properly", "body": "<p>I believe that the problem lies with this chunk of code from scoring where your cases are flipped from the correct return values:</p>\n\n<pre><code>if(mode == EMaximizing){\n    thisScore = -20;\n    if(isWon()) return 15-depth;\n}\nif(mode == EMinimizing){\n    thisScore = 20;\n    if(isWon()) return depth-15;\n}\n</code></pre>\n\n<p>Intuitively, the problem is that when <code>scoring</code> reaches this point in the code, the call to <code>isWon</code> is evaluating the result of the <em>previous</em> piece placement, which was made with the other choice for <code>mode</code>.</p>\n\n<p>For example, when scoring is called with <code>EMaximizing</code> and the board state is already won, then that implies that the player who is <code>EMinimizing</code> wins in this state and the returned score should reflect this (i.e. it should be negative). Since depth reaches a maximum of 8 your return value when <code>mode == EMaximizing</code> is always positive, which is not what you want.</p>\n\n<p>When the cases are reversed, your program outputs all zeroes, which seems more sensible as perfect players should always draw. I also tested the code with the following line added to the top of <code>printScoredBoards</code> to hard-code the first play to the top-left corner:</p>\n\n<pre><code>setBoardState(0, 0, playerSwitch(player));\n</code></pre>\n\n<p>This yields the following:</p>\n\n<pre><code> 0     10     10 \n10      0     10 \n10     10     10 \n</code></pre>\n\n<p>Correctly identifying both that the second player cannot choose the top-left and will lose if they play anything other than the center as their opening move.</p>\n"}], "owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "accepted_answer_id": 38625235, "answer_count": 1, "score": 1, "last_activity_date": 1469665419, "creation_date": 1469632730, "last_edit_date": 1495541693, "question_id": 38617131, "link": "https://stackoverflow.com/questions/38617131/minimax-algorithm-with-tictactoe-not-working-properly", "title": "Minimax algorithm with TicTacToe not working properly", "body": "<p>I already posted a similar question here in this forum but since the old post got a little long and I rewrote my algorithm I'm starting this new post.\nThe old post can be found <a href=\"https://stackoverflow.com/questions/38480187/tic-tac-toe-and-minimax-creating-an-imperfect-ai-on-a-microcontroller\">here</a>.</p>\n\n<hr>\n\n<p>So I'm simply trying to implement a minimax algorithm for my TicTacToe game, except it turned out to be quite hard and even after days of trying to find the mistake, I cannot find it. you can find my code below. First, I have a few definitions, typedefs and declarations:</p>\n\n<pre><code>typedef signed char s8;\ntypedef unsigned char u8;\ntypedef s8 score;\n\n#define STATE_00    getBoardState(0, 0)\n#define STATE_01    getBoardState(0, 1)\n#define STATE_02    getBoardState(0, 2)\n#define STATE_10    getBoardState(1, 0)\n#define STATE_11    getBoardState(1, 1)\n#define STATE_12    getBoardState(1, 2)\n#define STATE_20    getBoardState(2, 0)\n#define STATE_21    getBoardState(2, 1)\n#define STATE_22    getBoardState(2, 2)\n\ntypedef enum {\n    EPlayerX = 1,\n    EPlayerO\n} EPlayer;\n\ntypedef enum {\n    EMinimizing = 0,\n    EMaximizing\n} EMinMax;\n\nstatic u8 g_boardState[3][3] = {\n    {0, 0, 0,},\n    {0, 0, 0,},\n    {0, 0, 0,},\n};\n</code></pre>\n\n<p>These are followed by some functions:</p>\n\n<pre><code>u8 getBoardState(u8 row, u8 column);\n\nEPlayer isWon(void)\n{\n    EPlayer winningBoards[8][3] = {\n        {STATE_00, STATE_01, STATE_02},\n        {STATE_10, STATE_11, STATE_12},\n        {STATE_20, STATE_21, STATE_22},\n        {STATE_00, STATE_10, STATE_20},\n        {STATE_01, STATE_11, STATE_21},\n        {STATE_02, STATE_12, STATE_22},\n        {STATE_00, STATE_11, STATE_22},\n        {STATE_20, STATE_11, STATE_02},\n    };\n    u8 i;\n    for(i=0; i&lt;8; i++){\n        if( (winningBoards[i][0] != 0) &amp;&amp;\n            (winningBoards[i][0] == winningBoards[i][1]) &amp;&amp;\n            (winningBoards[i][0] == winningBoards[i][2])){\n                return winningBoards[i][0];\n        }\n    }\n    return 0;\n}\n\nu8 getBoardState(u8 row, u8 column)\n{\n    return g_boardState[row][column];\n}\n\nvoid setBoardState(u8 row, u8 column, u8 state)\n{\n    g_boardState[row][column] = state;\n}\n\nu8 isDraw(void)\n{\n    u8 i, j;\n    for(i=0; i&lt;3; i++){\n        for(j=0; j&lt;3; j++){\n            if(getBoardState(i, j) == 0){\n                return 0;\n            }\n        }\n    }\n    return 1;\n}\n\nvoid dumpTable(score table[3][3])\n{\n    int i, j;\n    for(i=0; i&lt;3; i++) {\n        printf(\"\\n\");\n        for(j=0; j&lt;3; j++){\n            printf(\"%6i \", table[i][j]);\n        }\n    }\n    printf(\"\\n\");\n}\n\nEPlayer playerSwitch(EPlayer player)\n{\n    if(player == EPlayerO) return EPlayerX;\n    if(player == EPlayerX) return EPlayerO;\n    return 0;\n}\n\nEMinMax modeSwitch(EMinMax mode)\n{\n    if(mode == EMaximizing) return EMinimizing;\n    if(mode == EMinimizing) return EMaximizing;\n    return 0;\n}\n</code></pre>\n\n<p>Then there is the actual minimax algorithm here called <code>scoring</code>:</p>\n\n<pre><code>score scoring(EMinMax mode, EPlayer player, u8 depth)\n{\n    score thisScore, tempScore;\n    if(mode == EMaximizing){\n        thisScore = -20;\n        if(isWon()) return 15-depth;\n    }\n    if(mode == EMinimizing){\n        thisScore = 20;\n        if(isWon()) return depth-15;\n    }\n    if(isDraw()){\n        return 0;\n    }\n\n    u8 i, j;\n    for(i=0; i&lt;3; i++){\n        for(j=0; j&lt;3; j++){\n            if(getBoardState(i, j) == 0){\n                setBoardState(i, j, player);\n                tempScore = scoring(modeSwitch(mode), playerSwitch(player), depth+1);\n                if((mode == EMaximizing) &amp;&amp; (tempScore &gt; thisScore)){\n                    thisScore = tempScore;\n                }\n                if((mode == EMinimizing) &amp;&amp; (tempScore &lt; thisScore)){\n                    thisScore = tempScore;\n                }\n                setBoardState(i, j, 0);\n            }\n        }\n    }\n\n    return thisScore;\n}\n</code></pre>\n\n<p>And finally a function printing the scores in a table as well as the <code>main</code>:</p>\n\n<pre><code>void printSocredBoards(EPlayer player)\n{   \n    score thisScore[3][3] = {\n        {STATE_00, STATE_01, STATE_02},\n        {STATE_10, STATE_11, STATE_12},\n        {STATE_20, STATE_21, STATE_22},\n    };\n    int i, j;\n    if((isWon() == 0) &amp;&amp; (isDraw() == 0)){\n        for(i=0; i&lt;3; i++){\n            for(j=0; j&lt;3; j++){\n                if(getBoardState(i, j) == 0){\n                    setBoardState(i, j, player);\n                    thisScore[i][j] = scoring(EMaximizing, playerSwitch(player), 0);\n                    setBoardState(i, j, 0);\n                }\n            }\n        }\n    }\n    dumpTable(thisScore);\n}\n\nint main(int argc, char **argv)\n{\n\n    printSocredBoards(EPlayerO);\n\n    return 0;\n}\n</code></pre>\n\n<p>As far as I know, this algorithm should work fine, however it gives me a nonsensical output:</p>\n\n<pre><code> 7      7      7 \n 7      0      7 \n 7      7      7 \n</code></pre>\n\n<p>What am I missing?\nThanks in advance for any help.</p>\n"}, {"tags": ["c", "sqlite", "segmentation-fault", "raspberry-pi"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469632035, "post_id": 38616768, "comment_id": 64619585, "body": "Given the lack of bounds checking, there is probably some undefined behavior in there."}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469632115, "post_id": 38616768, "comment_id": 64619642, "body": "Surely this would also stop me being able to run it when I compile it for use on my Desktop PC too though?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469632227, "post_id": 38616768, "comment_id": 64619725, "body": "There is no requirement for undefined behavior to be consistent. It&#39;s <i>undefined</i>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1469632270, "post_id": 38616768, "comment_id": 64619756, "body": "Debug it! You have all of the means to do it."}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "edited": false, "score": 0, "creation_date": 1469632348, "post_id": 38616768, "comment_id": 64619799, "body": "Oh should&#39;ve said, I attempted to cross-debug however the &quot;Segmentation Fault&quot; error results in it terminating before I see anything happen."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1469632414, "post_id": 38616768, "comment_id": 64619859, "body": "It doesn&#39;t make sense. It has to execute at least one instruction before failing."}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "edited": false, "score": 0, "creation_date": 1469632542, "post_id": 38616768, "comment_id": 64619932, "body": "When I begin to debug in eclipse it starts, then as soon as I &quot;step into&quot; for the first time the process terminates"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1469632576, "post_id": 38616768, "comment_id": 64619959, "body": "Eclipse? attach GDB to it if possible."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1469632589, "post_id": 38616768, "comment_id": 64619971, "body": "Use <code>si</code> in the <code>gdb</code> command line instead. &quot;Step into&quot; is not working well sometimes (you can do it from eclipse console)."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1469632752, "post_id": 38616768, "comment_id": 64620092, "body": "Is the sqlite lib correctly installed into target system?"}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1469632898, "post_id": 38616768, "comment_id": 64620199, "body": "@LPs I believe so, however I would be interested in checking, any idea as to how I can do that?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1469633018, "post_id": 38616768, "comment_id": 64620273, "body": "<code>cd &#47;usr&#47;lib</code> and <code>find . -name &quot;*sqlite*.*&quot;</code> and check the listed results"}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "edited": false, "score": 0, "creation_date": 1469633210, "post_id": 38616768, "comment_id": 64620390, "body": "./arm-linux-gnueabihf/libsqlite3.so.0                                                          ./arm-linux-gnueabihf/libsqlite3.so                                                            ./arm-linux-gnueabihf/libsqlite3.so.0.8.6 ./arm-linux-gnueabihf/libsqlite3.a ./arm-linux-gnueabihf/pkgconfig/sqlite3.pc ./arm-linux-gnueabihf/libsqlite3.la ./python2.7/lib-dynload/_sqlite3.so                                                                                                                                 that is the output from that search &quot;arm-linux-gnueabihf&quot; is my cross compiler"}, {"owner": {"reputation": 697, "user_id": 1020559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78516734de5c440b49559e47ab06e9ff?s=128&d=identicon&r=PG", "display_name": "DaV", "link": "https://stackoverflow.com/users/1020559/dav"}, "edited": false, "score": 0, "creation_date": 1469633393, "post_id": 38616768, "comment_id": 64620526, "body": "What does <code>ulimit -s</code> show on the Pi? You&#39;re putting a fair amount on the stack. I&#39;ve never programmed on a Pi but presumably the stack isn&#39;t huge."}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "reply_to_user": {"reputation": 697, "user_id": 1020559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78516734de5c440b49559e47ab06e9ff?s=128&d=identicon&r=PG", "display_name": "DaV", "link": "https://stackoverflow.com/users/1020559/dav"}, "edited": false, "score": 0, "creation_date": 1469633498, "post_id": 38616768, "comment_id": 64620611, "body": "@DaV - It shows 8192"}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1469633625, "post_id": 38616768, "comment_id": 64620707, "body": "@Shark Its in the eclipse debug environment however it is linked to gdb-multiarch to be able to crossdebug for the Pi"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1469633796, "post_id": 38616768, "comment_id": 64620828, "body": "I know what it is, and from experience - attaching GDB manually and doing things on your own yields <b>far, far</b> better/clearer results. Stick to Eclipse debugger for java :/"}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "edited": false, "score": 0, "creation_date": 1469633874, "post_id": 38616768, "comment_id": 64620897, "body": "is that just by using &quot;gdb .....&quot;?"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1469633900, "post_id": 38616768, "comment_id": 64620919, "body": "Also, another thing worth mentioning is - Raspberry Pi&#39;s integer isn&#39;t 4 bytes but only 2. The segfault could like in a place where you assumed it&#39;s variable types have the same bit width as on a normal system. EDIT: No, you&#39;re free to try any other debugger, the GDB is the first I thought of. Second one is LLDB, but since you&#39;re using GCC - GDB makes the most sense."}, {"owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "edited": false, "score": 1, "creation_date": 1469634108, "post_id": 38616768, "comment_id": 64621053, "body": "Sorry, bit inexperienced with gdb, just ran it and got the following output: Program received signal SIGSEGV, Segmentation fault. 0x000579da in ?? () where do I go from there? Is there an error log etc.?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1469635336, "post_id": 38616768, "comment_id": 64621872, "body": "@Shark there are clear benefits of using Eclipse as a front-end for <code>gdb</code>. Just know it&#39;s limitations."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 1, "creation_date": 1469642646, "post_id": 38616768, "comment_id": 64626079, "body": "@Shark The Raspberry Pi is an ARM machine. There are no 16-bit ARMs. The assertion that <code>int</code> is only 2 bytes on a Raspberry Pi is incorrect."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1469676373, "post_id": 38616768, "comment_id": 64637861, "body": "You got compiler warnings.        <code>gcc main.c -lsqlite3     main.c: In function \u2018main\u2019:     main.c:91:29: warning: format not a string literal and no format arguments [-Wformat-security]                  fprintf(stdout, message);                                  ^     main.c:99:29: warning: format not a string literal and no format arguments [-Wformat-security]                  fprintf(stdout, message);</code>"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469694154, "post_id": 38616768, "comment_id": 64645574, "body": "@EOF you&#39;re right, I confused it with Arduino. My mistake."}], "owner": {"reputation": 123, "user_id": 6626066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9e3fb7a16875b0cc9b6133b8d0cc2118?s=128&d=identicon&r=PG&f=1", "display_name": "Mst137", "link": "https://stackoverflow.com/users/6626066/mst137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469642889, "creation_date": 1469631855, "last_edit_date": 1469632377, "question_id": 38616768, "link": "https://stackoverflow.com/questions/38616768/segmentation-fault-when-cross-compiling-for-raspberry-pi", "title": "Segmentation Fault when Cross Compiling for Raspberry Pi", "body": "<p>I have written a simple piece of C code that uses sqlite3 to create a new database and add things to it that the user inputs. It compiles and runs fine when I compile it for x86 on my PC (changing the directory of the used db file), the problem occurs when I cross compile for use on a Raspberry Pi 2. It builds/compiles fine however when I try to run the executable on the Pi all I get in response is \"Segmentation fault\" and nothing more. </p>\n\n<p>Here is my code however I'm not convinced it's the code that's the problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sqlite3.h&gt;\n\n\n\nint main()\n{\n   sqlite3 *db;\n   int rc;\n   char *sql;\n   char *sql1;\n   char sql2[128];\n   char *zErrMsg = 0;\n   int DataToAdd = 1;\n   int TempID[64], TempReg[64], TempData[64];\n   int i = 0;\n   int j = 0;\n   char message[128];\n\n   rc = sqlite3_open(\"/home/testing/Basic.db\", &amp;db);\n\n   if( rc ){\n      fprintf(stderr, \"Can't open database: %s\\n\", sqlite3_errmsg(db));\n      return -1;\n   }else{\n      fprintf(stderr, \"Opened database successfully\\n\");\n   }\n\n\n\n\n       printf(\"Do you have data to add? (1=Y, 0=N)\\n\");\n       scanf(\"%d\", &amp;DataToAdd);\n\n       while(DataToAdd){\n\n           if (DataToAdd) {\n               printf(\"Enter Modbus Device ID\\n\");\n               scanf(\"%d\", &amp;TempID[i]);\n               printf(\"Enter Register Number\\n\");\n               scanf(\"%d\", &amp;TempReg[i]);\n               printf(\"Enter Data Value\\n\");\n               scanf(\"%d\", &amp;TempData[i]);\n\n           }else {\n               printf(\"No more data to add...\");\n               break;\n           }\n           i++;\n           printf(\"Do you have more data to add? (1=Y, 0=N)\\n\");\n           scanf(\"%d\", &amp;DataToAdd);\n       }\n\n   sql = \"DROP TABLE IF EXISTS MODBUS\";\n   rc = sqlite3_exec(db, sql, NULL, NULL, NULL);\n   if( rc ){\n\n       fprintf(stderr, \"SQL error: %s\\n\", zErrMsg);\n\n       sqlite3_free(zErrMsg);\n\n      }else{\n\n       fprintf(stdout, \"Table dropped successfully or was not present\\n\");\n\n      }\n\n   sql1 = \"CREATE TABLE MODBUS(ID INT NOT NULL, REG INT NOT NULL, DATA INT NOT NULL);\";\n   rc = sqlite3_exec(db, sql1, NULL, NULL, NULL);\n\n     if( rc ){\n\n       fprintf(stdout, \"Table not created\\n\");\n       fprintf(stderr, \"SQL error: %s\\n\", zErrMsg);\n\n       sqlite3_free(zErrMsg);\n\n     }else{\n\n       fprintf(stdout, \"Table created successfully\\n\");\n\n     }\n\n   for (j=0; j&lt;i; j++)\n   {\n       sprintf(sql2, \"INSERT INTO MODBUS(ID, REG, DATA) VALUES(%d, %d, %d);\", TempID[j], TempReg[j], TempData[j]);\n       rc = sqlite3_exec(db, sql2, NULL, NULL, NULL);\n\n         if( rc ){\n           sprintf(message, \"Item %d could not be added\\n\", (j+1));\n           fprintf(stdout, message);\n           fprintf(stderr, \"SQL error: %s\\n\", zErrMsg);\n           break;\n\n           sqlite3_free(zErrMsg);\n\n         }else{\n           sprintf(message, \"Item %d added successfully\\n\", (j+1));\n           fprintf(stdout, message);\n\n         }\n\n   }\n\n   sqlite3_close(db);\n\n   return 0;\n}\n</code></pre>\n\n<p>I then copy the build output executable to the raspberry Pi manually and change directories to its' location via SSH and try to run it. This is where the error occurs. I had a previous error with this where it was due to a lack of permissions on the executable and I have done to this file what fixed it for me previously to no avail, I have also changed permissions on the database file. Any ideas as what could be causing the fault this time?</p>\n\n<p>EDIT:: </p>\n\n<p>Oh should've said, I attempted to cross-debug however the \"Segmentation Fault\" error results in it terminating before I see anything happen. </p>\n"}, {"tags": ["c#", "c", "drm", "fairplay"], "comments": [{"owner": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "edited": false, "score": 0, "creation_date": 1469710773, "post_id": 38616637, "comment_id": 64657198, "body": "I have watched the FairPlay presentation and the presenter indicates that we can use whatever language we want."}], "answers": [{"comments": [{"owner": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "edited": false, "score": 0, "creation_date": 1471040215, "post_id": 38921624, "comment_id": 65211246, "body": "Thanks for the answer, I have started writing in C#. Hope to finish this week."}, {"owner": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "edited": false, "score": 0, "creation_date": 1471939563, "post_id": 38921624, "comment_id": 65538160, "body": "I know it is not acceptable to ask questions here in comments but could you please check my forum post? Thanks <a href=\"https://forums.developer.apple.com/message/171342\" rel=\"nofollow noreferrer\">forums.developer.apple.com/message/171342</a>"}, {"owner": {"reputation": 6313, "user_id": 56488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22d1cad677921dd4bea94bb549013e7a?s=128&d=identicon&r=PG", "display_name": "dar", "link": "https://stackoverflow.com/users/56488/dar"}, "edited": false, "score": 0, "creation_date": 1478287399, "post_id": 38921624, "comment_id": 68109098, "body": "I wrote my fairplay key server in go"}, {"owner": {"reputation": 1826, "user_id": 38947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c93c1f387dde3aa3f1a0688a7b37b5?s=128&d=identicon&r=PG", "display_name": "Tamas Kalman", "link": "https://stackoverflow.com/users/38947/tamas-kalman"}, "reply_to_user": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "edited": false, "score": 0, "creation_date": 1490863403, "post_id": 38921624, "comment_id": 73305322, "body": "@BarbarosAlp - were you able to finish your implementation? if so, please let me know, i would have a few questions."}, {"owner": {"reputation": 1826, "user_id": 38947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c93c1f387dde3aa3f1a0688a7b37b5?s=128&d=identicon&r=PG", "display_name": "Tamas Kalman", "link": "https://stackoverflow.com/users/38947/tamas-kalman"}, "reply_to_user": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "edited": false, "score": 0, "creation_date": 1497790012, "post_id": 38921624, "comment_id": 76216420, "body": "@BarbarosAlp thank you for your reply! we have our working implementation as well (in PHP). May I ask if you tried to implement offline playback as well?"}, {"owner": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "reply_to_user": {"reputation": 1826, "user_id": 38947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c93c1f387dde3aa3f1a0688a7b37b5?s=128&d=identicon&r=PG", "display_name": "Tamas Kalman", "link": "https://stackoverflow.com/users/38947/tamas-kalman"}, "edited": false, "score": 0, "creation_date": 1497868223, "post_id": 38921624, "comment_id": 76241766, "body": "@Tamas, yes we also implemented that."}, {"owner": {"reputation": 1826, "user_id": 38947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c93c1f387dde3aa3f1a0688a7b37b5?s=128&d=identicon&r=PG", "display_name": "Tamas Kalman", "link": "https://stackoverflow.com/users/38947/tamas-kalman"}, "reply_to_user": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "edited": false, "score": 0, "creation_date": 1497918761, "post_id": 38921624, "comment_id": 76269741, "body": "@BarbarosAlp everything works well in our implemetation (test vectors, encoding, playback etc), except offline streaming. Could you please help us how do you generate streams ready for offline streaming? What changes do you need to add in the m3u8 file (if any)?"}, {"owner": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "reply_to_user": {"reputation": 1826, "user_id": 38947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c93c1f387dde3aa3f1a0688a7b37b5?s=128&d=identicon&r=PG", "display_name": "Tamas Kalman", "link": "https://stackoverflow.com/users/38947/tamas-kalman"}, "edited": false, "score": 1, "creation_date": 1506946546, "post_id": 38921624, "comment_id": 80004394, "body": "@Tamas, you need to build proper ContentKeyDuration TLLV for persistent license. &quot;18f06048&quot; - PersistedRentalDuration, &quot;3df2d9fb&quot; persisted unlimited."}], "tags": [], "owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "is_accepted": true, "score": 4, "last_activity_date": 1506948511, "last_edit_date": 1506948511, "creation_date": 1471015993, "answer_id": 38921624, "question_id": 38616637, "link": "https://stackoverflow.com/questions/38616637/must-apple-fairplay-key-security-module-be-implemented-in-c/38921624#38921624", "title": "Must Apple &quot;FairPlay Key Security Module&quot; be implemented in C?", "body": "<p>I've written a Fairplay implementation in Python and specified an implementation for Java - it can be written in any language you choose as long as you have the necessary crypto libraries available (or know how to implement some of the required asymmetric cryptography).</p>\n"}], "owner": {"reputation": 6145, "user_id": 51734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IvUcn.jpg?s=128&g=1", "display_name": "Barbaros Alp", "link": "https://stackoverflow.com/users/51734/barbaros-alp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 1, "accepted_answer_id": 38921624, "answer_count": 1, "score": 0, "last_activity_date": 1506948511, "creation_date": 1469631576, "last_edit_date": 1471957565, "question_id": 38616637, "link": "https://stackoverflow.com/questions/38616637/must-apple-fairplay-key-security-module-be-implemented-in-c", "title": "Must Apple &quot;FairPlay Key Security Module&quot; be implemented in C?", "body": "<p>I am trying to figure out how to implement a Key Security Module (KSM) for Apple FairPlay into our Key Server but as far as I understand from the sample \"Server Reference Implementation\" project in Apple FairPlay SDK which is written in C, they want or they advice us to implement in C.</p>\n\n<p>But in one of their FairPlay slide, it says that:</p>\n\n<blockquote>\n  <ul>\n  <li>Implement KSM logic from scratch using protocol specification, or <br></li>\n  <li>Customize the C reference implementation in the SDK (language,\n  integration)</li>\n  </ul>\n</blockquote>\n\n<p>The first sentence tells us that we can implement it from scratch.<br>\nSo, does anyone implement Apple FairPlay Key Security Module in another language rather than C?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "visual-studio", "unit-testing", "mocking", "cmock"], "comments": [{"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1469631215, "post_id": 38615983, "comment_id": 64618981, "body": "<a href=\"http://stackoverflow.com/q/33790425/1488067\">This question</a> asked the specific thing about configuring the linker to wrap the functions, but I believe it&#39;s not possible in MSVC. Also, CMocka mentions this, but CMock doesn&#39;t mention this requirement at all."}, {"owner": {"reputation": 598, "user_id": 1295002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45fff7ac7f7069fd9a888b5683b46bd2?s=128&d=identicon&r=PG", "display_name": "mrAtari", "link": "https://stackoverflow.com/users/1295002/mratari"}, "edited": false, "score": 0, "creation_date": 1470121127, "post_id": 38615983, "comment_id": 64804024, "body": "Do you have to mock C-Style functions in a C++ environment, or do you have C environment only? If you can use C++, there is a very simple solution for your problem and I can provide an example."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 598, "user_id": 1295002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45fff7ac7f7069fd9a888b5683b46bd2?s=128&d=identicon&r=PG", "display_name": "mrAtari", "link": "https://stackoverflow.com/users/1295002/mratari"}, "edited": false, "score": 0, "creation_date": 1470131078, "post_id": 38615983, "comment_id": 64810231, "body": "@mrAtari: it&#39;s Visual Studio, so I can mix C++ and C, however there could be issues with certain C code not being compatible with C++ (check <a href=\"http://softwarerecs.stackexchange.com/q/34878/22983\">this similar question</a>, for example). However, it if works most of the time, please do provide an example anyway of how C++ would solve this - especially if it can avoid adding any testing-related preprocessor directives into the production code."}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 6162467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vgYuYCpKh-k/AAAAAAAAAAI/AAAAAAAAAZI/KawYWeYqfQI/photo.jpg?sz=128", "display_name": "Jeremy Thien", "link": "https://stackoverflow.com/users/6162467/jeremy-thien"}, "is_accepted": false, "score": 0, "last_activity_date": 1470057105, "creation_date": 1470057105, "answer_id": 38699853, "question_id": 38615983, "link": "https://stackoverflow.com/questions/38615983/mocking-c-functions-in-msvc-visual-studio/38699853#38699853", "title": "Mocking C functions in MSVC (Visual Studio)", "body": "<p>I have not dealt with the C mocking libraries or Visual Studio, but I have thought about this in my own project. The <a href=\"http://c2.com/cgi/wiki?WorkingEffectivelyWithLegacyCode\" rel=\"nofollow\">Feathers book</a> suggests the preprocessor seam or the link seam as a tool for dealing with this. You already mentioned the preprocessor seam, so I'll focus on the link seam.</p>\n\n<p>The link seam requires the mocked function to be in a library, and the mock function to be in a library. The test can link against the mock function library while the target application can link against the original library.</p>\n\n<p>Of course, as you mention, to mock MyFunc() you will have to create another library and a separate test application to link against it (or dynamically load and unload libraries in the test application).</p>\n\n<p>It sounds quite laborious which is why I am procrastinating adding tests in my own application!</p>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1470138722, "post_id": 38719036, "comment_id": 64815391, "body": "Thanks, I will check it in a moment, but can you explain the mechanism behind this? How does the call to <code>ParseStuff</code>in <code>myfunc.c</code> get redirected during the link phase? Well, I will take a look at the source code too, but I think it would be valuable to have this information. :)"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 1, "creation_date": 1470139165, "post_id": 38719036, "comment_id": 64815710, "body": "<a href=\"https://github.com/dascandy/hippomocks/blob/master/HippoMocks/hippomocks.h\" rel=\"nofollow noreferrer\">Holy mother of lord, what is this wizardry?</a> O_o"}, {"owner": {"reputation": 598, "user_id": 1295002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45fff7ac7f7069fd9a888b5683b46bd2?s=128&d=identicon&r=PG", "display_name": "mrAtari", "link": "https://stackoverflow.com/users/1295002/mratari"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1470143828, "post_id": 38719036, "comment_id": 64819121, "body": "@Lousy: The guy who wrote it, was a real wizard. :)))"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1470148139, "post_id": 38719036, "comment_id": 64822508, "body": "Ok, this seems cool. Do you have experience with any lightweight unit testing framework which would go well with HippoMocks? Something lightweight, prefrerrably with JUnit XML support?"}, {"owner": {"reputation": 598, "user_id": 1295002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45fff7ac7f7069fd9a888b5683b46bd2?s=128&d=identicon&r=PG", "display_name": "mrAtari", "link": "https://stackoverflow.com/users/1295002/mratari"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 1, "creation_date": 1470155580, "post_id": 38719036, "comment_id": 64827888, "body": "It is cool :)  A very lightweight testrunner is YAFFUT - comes with one header only and is much simpler to use as CppUnit for example.  In order to format the output in the right way, why don&#39;t you write a small script, which does the formatting stuff?"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1470170281, "post_id": 38719036, "comment_id": 64836278, "body": "Yes, you&#39;re right, I can probably format it myself. So far I&#39;ve tried Google Test because it&#39;s rather simple to use, supports automatic test registration and even has a plugin for Visual Studio. It&#39;s C++ too however, so I need to use <code>extern &quot;C&quot;</code> around header includes. Ok, thanks a lot, your answer solves most of my issues. I&#39;ll leave the bounty open for a couple of days, perhaps I can get some additional tips."}], "tags": [], "owner": {"reputation": 598, "user_id": 1295002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45fff7ac7f7069fd9a888b5683b46bd2?s=128&d=identicon&r=PG", "display_name": "mrAtari", "link": "https://stackoverflow.com/users/1295002/mratari"}, "is_accepted": true, "score": 2, "last_activity_date": 1470143779, "last_edit_date": 1470143779, "creation_date": 1470136878, "answer_id": 38719036, "question_id": 38615983, "link": "https://stackoverflow.com/questions/38615983/mocking-c-functions-in-msvc-visual-studio/38719036#38719036", "title": "Mocking C functions in MSVC (Visual Studio)", "body": "<p>Here's a simple and short solution with hippomocks:</p>\n\n<p>I created an empty Win32 console application with </p>\n\n<ul>\n<li>main.cpp</li>\n<li>myfunc.c + myfunc.h</li>\n<li>parsestuff.c, parsestuff.h</li>\n</ul>\n\n<p>and added the code from your example.</p>\n\n<p>With help of hippomocks, you can mock every C-Function. Here's how my main.cpp looks like:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"myfunc.h\"\n#include \"hippomocks.h\"\n\n\nextern \"C\" int ParseStuff(char* cmd);\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    MockRepository mocks;\n\n    mocks.ExpectCallFunc(ParseStuff).Return(4711);\n\n    char buf[10] = \"\";\n\n    int result = MyFunc(buf);\n\n    return result; //assert result is 4711\n}\n</code></pre>\n\n<p>HippoMocks is a free, simple and very powerful one-header framework and can be downloaded on GitHub.</p>\n\n<p>Hope I've earned the bounty :)</p>\n\n<p><strong>UPDATE, How it works:</strong></p>\n\n<ol>\n<li>HippoMocks gets the func pointer to ParseStuff</li>\n<li>HippoMocks builds a replacement func pointer to a template function with same signature and own implementation.</li>\n<li>Hippomocks patches the jmp opcode from the function call prologue in memory, so that it points to the replaced function.</li>\n<li>Replacement and memory patch are released after call or in destructor.</li>\n</ol>\n\n<p>Here's how it looks like on my machine:</p>\n\n<pre><code>@ILT+3080(_ParseStuff):\n00D21C0D  jmp HippoMocks::mockFuncs&lt;char,int&gt;::static_expectation1&lt;0,char *&gt; (0D21DB1h)  \n</code></pre>\n\n<p>If you watch the memory address 00D21C0D (may differ from run to run) in memory window, you will see, that  it gets patched after the call of ExpectCallFunc.</p>\n"}], "owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1408, "favorite_count": 0, "accepted_answer_id": 38719036, "answer_count": 2, "score": 3, "last_activity_date": 1470143779, "creation_date": 1469629995, "last_edit_date": 1469997377, "question_id": 38615983, "link": "https://stackoverflow.com/questions/38615983/mocking-c-functions-in-msvc-visual-studio", "title": "Mocking C functions in MSVC (Visual Studio)", "body": "<p>I am reading several articles on mocking C functions (like <a href=\"http://www.throwtheswitch.org/cmock/\" rel=\"nofollow\">CMock</a>, or <a href=\"https://lwn.net/Articles/558106/\" rel=\"nofollow\">CMocka</a>), but I am not sure how the actual functions are replaced with mocked functions in this process. For example, CMocka relies on automatic wrapping using a GNU compiler, which supports parameters like <code>--wrap</code> to append the <code>__wrap</code> prefix to function calls, or <em>weak symbols</em> which allow you to override any symbol you like.</p>\n\n<p>But how do you do this in Visual Studio, for pretty much all other frameworks?</p>\n\n<p>For example, <a href=\"http://www.throwtheswitch.org/cmock/\" rel=\"nofollow\">CMock has an example</a> similar to this (simplified a lot here):</p>\n\n<pre><code>// myfunc.c\n#include &lt;parsestuff.h&gt;\n\n// this is the function we would like to test\nint MyFunc(char* Command)\n{\n    // this is the call to the function we will mock\n    return ParseStuff(Command);\n}\n</code></pre>\n\n<p>There is also the actual implementation, which contains the actual function the linker should find in the actual application:</p>\n\n<pre><code>// parsestuff.c\n\nint ParseStuff(char* cmd)\n{\n    // do some actual work\n    return 42;\n}\n</code></pre>\n\n<p>Now, during testing the Ruby script creates mock functions like:</p>\n\n<pre><code>// MockParseStuff.c (auto created by cmock)\n\nint ParseStuff(char* Cmd);\nvoid ParseStuff_ExpectAndReturn(char* Cmd, int toReturn);\n</code></pre>\n\n<ol>\n<li><p>But if the VS project already includes <code>parsestuff.c</code>, how will it be possible that the call from <code>myfunc.c</code> ends up in <code>MockParseStuff.c</code>?</p></li>\n<li><p>Does this mean I cannot have <code>parsestuff.c</code> included in the unit testing project? But if this is the case, then it's also impossible to mock, for example, <code>MyFunc</code> from <code>myfunc.c</code> in any tests, since I already had to include the file it in order to test it?</p></li>\n</ol>\n\n<p><strong>(Update)</strong> I am also aware that I can include the <code>.c</code> file instead of the <code>.h</code> file, and then do some preprocessor stuff to replace the original call, like:</p>\n\n<pre><code>// replace ParseStuff with ParseStuff_wrap\n#define ParseStuff ParseStuff_wrap\n// include the source instead of the header\n#include &lt;myfunc.c&gt;\n#undef ParseStuff\n\nint ParseStuff_wrap(char* cmd) \n{\n    // this will get called from MyFunc,\n    // which is now statically included\n}\n</code></pre>\n\n<p>but this seems like a lot of plumbing, and I don't even see it mentioned anywhere.</p>\n"}, {"tags": ["c", "compiler-errors", "syntax-error", "declaration"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1469629761, "post_id": 38615812, "comment_id": 64617822, "body": "You mean to say, you have a function definition in a header file? I&#39;m out."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 3, "creation_date": 1469629818, "post_id": 38615812, "comment_id": 64617875, "body": "I haven&#39;t used C for 15 years, but that didn&#39;t stop me from noticing that your code appears to have a <code>for</code> loop inside a <code>struct</code>.  Can this possibly not be an error?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1469629846, "post_id": 38615812, "comment_id": 64617898, "body": "The <code>mat_a</code> has mismatched parentheses. I recommend breaking it down and factoring terms, i.e. preprocess so writing it is not so difficult."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1469629977, "post_id": 38615812, "comment_id": 64618018, "body": "not only mismatched parantheses, <code>mat_a</code> isn&#39;t even an array"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1469630349, "post_id": 38615812, "comment_id": 64618305, "body": "<code>struct Reference_XS data={mat_c};</code> is trying to initialize <code>data.Bytes</code> with a pointer to the first element of <code>mat_c</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1469630314, "post_id": 38616108, "comment_id": 64618274, "body": "... and it&#39;s a single float that can&#39;t be initialized by <code>{...}</code>"}, {"owner": {"reputation": 130, "user_id": 3407699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BlUUf.png?s=128&g=1", "display_name": "Codebrewer", "link": "https://stackoverflow.com/users/3407699/codebrewer"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1469631388, "post_id": 38616108, "comment_id": 64619129, "body": "@IngoLeonhardt Have seen that right after posting the answer and have edited my answer to include both errors :)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1469631984, "post_id": 38616108, "comment_id": 64619551, "body": "@Ingo Leonhardt: Everything in C can be initialized by <code>{...}</code>. But supplying the right number of initializers between <code>{...}</code> is essential."}], "tags": [], "owner": {"reputation": 130, "user_id": 3407699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BlUUf.png?s=128&g=1", "display_name": "Codebrewer", "link": "https://stackoverflow.com/users/3407699/codebrewer"}, "is_accepted": true, "score": 1, "last_activity_date": 1469631331, "last_edit_date": 1469631331, "creation_date": 1469630270, "answer_id": 38616108, "question_id": 38615812, "link": "https://stackoverflow.com/questions/38615812/error-declaring-a-function/38616108#38616108", "title": "Error declaring a function", "body": "<p>take a look at the initialization of your mat_a variable.</p>\n\n<p>The first mistake is, that your float mat_a variable is initialized using the initializer list but you have to forgot to add the array idientifier after mat_a. What you should to is float mat_a[N] where N is the number of elements you float array contains.</p>\n\n<p>The second error is a part of the statement where that an opening round bracket is missing. The bracket is missing after your second comma.</p>\n\n<pre><code>float mat_a={(2*q0*q0)+(2*q1*q1)-1, (2*q1*q2)-(2*q0*q3), (2*q1*q3)+(2*q0*q1), (2*q1*q2)+(2*q0*q3), (2*q0*q0+(2*q2*q2)-1), (2*q2*q3)-(2*q0*q1), (2*q1*q3)-(2*q0*q2), (2*q2*q3)+(2*q0*q1), (2*q0*q0)+(2*q3*q3)-1};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1469630584, "creation_date": 1469630584, "answer_id": 38616217, "question_id": 38615812, "link": "https://stackoverflow.com/questions/38615812/error-declaring-a-function/38616217#38616217", "title": "Error declaring a function", "body": "<p>In this statement</p>\n\n<pre><code>float mat_a={(2*q0*q0)+(2*q1*q1)-1, (2*q1*q2)-(2*q0*q3), 2*q1*q3)+(2*q0*q1), (2*q1*q2)+(2*q0*q3), (2*q0*q0+(2*q2*q2)-1), (2*q2*q3)-(2*q0*q1), (2*q1*q3)-(2*q0*q2), (2*q2*q3)+(2*q0*q1), (2*q0*q0)+(2*q3*q3)-1};\n</code></pre>\n\n<p>you are trying to initialize a scalar object with multiple initializers and moreover the third initializer dors not have the open parenthesis</p>\n\n<pre><code>2*q1*q3)+(2*q0*q1),\n</code></pre>\n\n<p>^^^</p>\n\n<p>It seems you wanted to define an array with the name mat_a   instead of the scalar object.</p>\n"}], "owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 38616108, "answer_count": 2, "score": 0, "last_activity_date": 1469631755, "creation_date": 1469629601, "last_edit_date": 1469631755, "question_id": 38615812, "link": "https://stackoverflow.com/questions/38615812/error-declaring-a-function", "title": "Error declaring a function", "body": "<p>This is a header file. But when I include it in the main.c it give me the next error: expected identifier or '(' before 'float'. I know it can be a very stupid error but i don't see it. The code is:</p>\n\n<pre><code>#ifndef Reference\n#define Reference\nfloat mat_a[3][3];\nstruct Reference_XS\n{\nint Bytes;\nunsigned char *Buffer_Lectura;\n};\nstruct Reference_XS Sist_Referecence(float q0,float q1,float q2,float q3,float val1,float val2,float val3)\n{\nfloat mat_a={(2*q0*q0)+(2*q1*q1)-1, (2*q1*q2)-(2*q0*q3), 2*q1*q3)+(2*q0*q1), (2*q1*q2)+(2*q0*q3), (2*q0*q0+(2*q2*q2)-1), (2*q2*q3)-(2*q0*q1), (2*q1*q3)-(2*q0*q2), (2*q2*q3)+(2*q0*q1), (2*q0*q0)+(2*q3*q3)-1};\nfloat mat_b[3][1]={val1,val2,val3};\nfloat mat_c[3][1];\nint i,k;\nfloat temp=0;\nfor(i=0;i&lt;3;i++) \n{\n    temp=0;\n    for(k=0;k&lt;3;k++) \n    {\n        temp=mat_a[i][k]*mat_b[k][0]+temp;\n        mat_c[i][0]=temp;       \n    }\n}\nstruct Reference_XS data={mat_c};\nreturn data;\n}\n#endif\n</code></pre>\n"}, {"tags": ["c", "linux", "device"], "comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1469629090, "post_id": 38615464, "comment_id": 64617253, "body": "Possible dublicate of <a href=\"http://stackoverflow.com/questions/13403866/how-to-get-a-device-partition-name-of-a-file\" title=\"how to get a device partition name of a file\">stackoverflow.com/questions/13403866/&hellip;</a>"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 2, "creation_date": 1469629702, "post_id": 38615464, "comment_id": 64617773, "body": "The duplicate has an answer regarding bash, while the answer posted here actually tells how to do this in C."}], "answers": [{"comments": [{"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1469629760, "post_id": 38615709, "comment_id": 64617821, "body": "Beat me by seconds:D Anyhow duuno why this was closed as a duplicate, your answer is correct regarding C, voting to reopen:)"}, {"owner": {"reputation": 3548, "user_id": 596794, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/by6yu.jpg?s=128&g=1", "display_name": "Mehdi Ijadnazar", "link": "https://stackoverflow.com/users/596794/mehdi-ijadnazar"}, "edited": false, "score": 0, "creation_date": 1469630678, "post_id": 38615709, "comment_id": 64618572, "body": "I know I should do the stat, but I don&#39;t know how to match the result to a device in /proc/partitions, could you edit your answer to cover that?"}, {"owner": {"reputation": 131, "user_id": 1757179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112338f4a8c18521e21679a21ae98ac9?s=128&d=identicon&r=PG", "display_name": "RichieSams", "link": "https://stackoverflow.com/users/1757179/richiesams"}, "edited": false, "score": 0, "creation_date": 1524691118, "post_id": 38615709, "comment_id": 87079055, "body": "Necro comment, but for future people browsing like me: this is how you iterate over /proc/mounts or /proc/partitions <a href=\"https://stackoverflow.com/questions/9280759/linux-function-to-get-mount-points\" title=\"linux function to get mount points\">stackoverflow.com/questions/9280759/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7242, "user_id": 109019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/266408e128b44b980a953eda085d38a2?s=128&d=identicon&r=PG", "display_name": "Salgar", "link": "https://stackoverflow.com/users/109019/salgar"}, "is_accepted": false, "score": 4, "last_activity_date": 1555157832, "last_edit_date": 1555157832, "creation_date": 1469629374, "answer_id": 38615709, "question_id": 38615464, "link": "https://stackoverflow.com/questions/38615464/how-to-get-device-name-on-which-a-file-is-located-from-its-path-in-c/38615709#38615709", "title": "How to get device name on which a file is located from its path in c?", "body": "<p>You need to use <a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\" title=\"stat\">stat</a> on the file path, and get the device ID <code>st_dev</code>  and match that to a device in <code>/proc/partitions</code></p>\n\n<p>Read this for how to interpret <code>st_dev</code>: <a href=\"https://web.archive.org/web/20171013194110/http://www.makelinux.net:80/ldd3/chp-3-sect-2\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20171013194110/http://www.makelinux.net:80/ldd3/chp-3-sect-2</a></p>\n"}, {"tags": [], "owner": {"reputation": 6976, "user_id": 236062, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/63c7436d6b05ba912a5cb0b0bf254c93?s=128&d=identicon&r=PG", "display_name": "Zibri", "link": "https://stackoverflow.com/users/236062/zibri"}, "is_accepted": false, "score": 2, "last_activity_date": 1606167646, "last_edit_date": 1606167646, "creation_date": 1549796435, "answer_id": 54615710, "question_id": 38615464, "link": "https://stackoverflow.com/questions/38615464/how-to-get-device-name-on-which-a-file-is-located-from-its-path-in-c/54615710#54615710", "title": "How to get device name on which a file is located from its path in c?", "body": "<p>I just needed that inside a program I am writing...</p>\n<p>So instead of running &quot;df&quot; and parsing the output, I wrote it from scratch.</p>\n<p>Feel free to contribute!</p>\n<p>To answer the question:</p>\n<p>You first find the device inode using stat() then iterate and parse /proc/self/mountinfo to find the inode and get the device name.</p>\n<pre><code>/*\nGet physical device from file or directory name.\nBy Zibri &lt;zibri AT zibri DOT org&gt;\nhttps://github.com/Zibri/get_device\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;libgen.h&gt;\n\nint get_device(char *name)\n{\n  struct stat fs;\n\n  if (stat(name, &amp;fs) &lt; 0) {\n    fprintf(stderr, &quot;%s: No such file or directory\\n&quot;, name);\n    return -1;\n  }\n\n  FILE *f;\n  char sline[256];\n  char minmaj[128];\n\n  sprintf(minmaj, &quot;%d:%d &quot;, (int) fs.st_dev &gt;&gt; 8, (int) fs.st_dev &amp; 0xff);\n\n  f = fopen(&quot;/proc/self/mountinfo&quot;, &quot;r&quot;);\n\n  if (f == NULL) {\n    fprintf(stderr, &quot;Failed to open /proc/self/mountinfo\\n&quot;);\n    exit(-1);\n  }\n\n  while (fgets(sline, 256, f)) {\n\n    char *token;\n    char *where;\n\n    token = strtok(sline, &quot;-&quot;);\n    where = strstr(token, minmaj);\n    if (where) {\n      token = strtok(NULL, &quot; -:&quot;);\n      token = strtok(NULL, &quot; -:&quot;);\n      printf(&quot;%s\\n&quot;, token);\n      break;\n    }\n\n  }\n\n  fclose(f);\n\n  return -1;\n}\n\nint main(int argc, char **argv)\n{\n\n  if (argc != 2) {\n    fprintf(stderr, &quot;Usage:\\n%s FILE OR DIRECTORY...\\n&quot;, basename(argv[0]));\n    return -1;\n  }\n  get_device(argv[1]);\n  return 0;\n}\n</code></pre>\n<p>output is just the device name.</p>\n<p>Example:</p>\n<pre><code>$ gcc -O3 getdevice.c -o gd -Wall\n$ ./gd .\n/dev/sda4\n$ ./gd /mnt/C\n/dev/sda3\n$ ./gd /mnt/D\n/dev/sdb1\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 1916016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908f0568006a40b14ffdcbd644d7e88f?s=128&d=identicon&r=PG", "display_name": "user1916016", "link": "https://stackoverflow.com/users/1916016/user1916016"}, "is_accepted": false, "score": 0, "last_activity_date": 1610878509, "last_edit_date": 1610878509, "creation_date": 1589103145, "answer_id": 61709828, "question_id": 38615464, "link": "https://stackoverflow.com/questions/38615464/how-to-get-device-name-on-which-a-file-is-located-from-its-path-in-c/61709828#61709828", "title": "How to get device name on which a file is located from its path in c?", "body": "<p>Use this command to print the partition path:</p>\n<pre><code>df -P &lt;pathname&gt; | awk 'END{print $1}'\n</code></pre>\n"}], "owner": {"reputation": 3548, "user_id": 596794, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/by6yu.jpg?s=128&g=1", "display_name": "Mehdi Ijadnazar", "link": "https://stackoverflow.com/users/596794/mehdi-ijadnazar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1945, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1610897840, "creation_date": 1469628761, "last_edit_date": 1610897840, "question_id": 38615464, "link": "https://stackoverflow.com/questions/38615464/how-to-get-device-name-on-which-a-file-is-located-from-its-path-in-c", "title": "How to get device name on which a file is located from its path in c?", "body": "<p>Let's say I have a file in Linux with this path:</p>\n<pre><code>/path/to/file/test.mp3\n</code></pre>\n<p>I want to know the path to its device. For example I want to get something like:</p>\n<pre><code>/dev/sdb1\n</code></pre>\n<p>How do I do this with the <em><strong>C programming language</strong></em>?</p>\n<p>I know the terminal command to do it, but I need C functions that will do the job.</p>\n<p><em><strong>EDIT:</strong></em>\nI have read <a href=\"https://stackoverflow.com/questions/13403866/how-to-get-a-device-partition-name-of-a-file\">this</a> question before asking mine. It doesn't concretly mention code in C, it's more related to bash than to the C language.</p>\n<p>Thanks.</p>\n"}, {"tags": ["c", "sql-server", "freetds", "sqsh"], "comments": [{"owner": {"reputation": 44067, "user_id": 3470178, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/655943089/picture?type=large", "display_name": "Juan Carlos Oropeza", "link": "https://stackoverflow.com/users/3470178/juan-carlos-oropeza"}, "edited": false, "score": 0, "creation_date": 1469629977, "post_id": 38615458, "comment_id": 64618017, "body": "I dont know the answer, but for your question not sure what of those two you need to fix."}], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 5036010, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e8973f3cc07bc272e6efa3b267cb1fbf?s=128&d=identicon&r=PG&f=1", "display_name": "Naga", "link": "https://stackoverflow.com/users/5036010/naga"}, "edited": false, "score": 0, "creation_date": 1469721486, "post_id": 38626671, "comment_id": 64665763, "body": "hey, I set environment variable LOCALE = &lt;&lt;mypath&gt;&gt;/locales.conf and modified date format as per my need but still no luck."}], "tags": [], "owner": {"reputation": 3496, "user_id": 2961734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f0229603e30b04fddc833d85afc9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Laughing Vergil", "link": "https://stackoverflow.com/users/2961734/laughing-vergil"}, "is_accepted": false, "score": 0, "last_activity_date": 1469676965, "creation_date": 1469676965, "answer_id": 38626671, "question_id": 38615458, "link": "https://stackoverflow.com/questions/38615458/freetds-dateformat-issues/38626671#38626671", "title": "FREETDS Dateformat issues", "body": "<p>Currently, the default date format returned by FreeTDS is configured in the <code>locales.conf</code> file. See <a href=\"http://www.freetds.org/userguide/locales.htm\" rel=\"nofollow\">http://www.freetds.org/userguide/locales.htm</a> for details.</p>\n"}, {"comments": [{"owner": {"reputation": 422, "user_id": 5036010, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e8973f3cc07bc272e6efa3b267cb1fbf?s=128&d=identicon&r=PG&f=1", "display_name": "Naga", "link": "https://stackoverflow.com/users/5036010/naga"}, "edited": false, "score": 0, "creation_date": 1470152893, "post_id": 38695546, "comment_id": 64826120, "body": "Thanks for that, but unfortunately I don&#39;t have access to /etc/freetds/, its restricted for my developer login. Any alternative to place the file in &lt;&lt;myowndir&gt;&gt;/freetds/locales.conf and use this directory."}], "tags": [], "owner": {"reputation": 8410, "user_id": 202553, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Clpiv.jpg?s=128&g=1", "display_name": "knb", "link": "https://stackoverflow.com/users/202553/knb"}, "is_accepted": false, "score": 3, "last_activity_date": 1470044300, "creation_date": 1470044300, "answer_id": 38695546, "question_id": 38615458, "link": "https://stackoverflow.com/questions/38615458/freetds-dateformat-issues/38695546#38695546", "title": "FREETDS Dateformat issues", "body": "<p>Here's what I just did on my ubuntu linux box:</p>\n\n<ol>\n<li><p>Type this command at the bash shell: <code>locale</code> My result (shortened): <code>LANG=en_US</code></p></li>\n<li><p>Copy locales.conf file to the config directory: <code>sudo cp /usr/share/doc/freetds-common/examples/locales.conf /etc/freetds/</code></p></li>\n<li>open the /etc/freetds/locales.conf file in an editor</li>\n<li>comment out the old date format defined in the locales.conf file (I've used \";\" as a comment char), copy the line</li>\n<li><p>Define a date format that you need in the corresponding section of the locales.conf file</p>\n\n<p><code>[en_US]</code></p>\n\n<p><code>;date format = %b %e %Y %I:%M:%S:%z%p</code></p>\n\n<p><code>date format = %Y-%m-%d %H:%M:%S</code>    </p></li>\n</ol>\n\n<p>Now I get from <code>sqsh</code>:</p>\n\n<pre><code>SELECT getdate();\n: 2016-08-01 11:37:45\n</code></pre>\n"}], "owner": {"reputation": 422, "user_id": 5036010, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e8973f3cc07bc272e6efa3b267cb1fbf?s=128&d=identicon&r=PG&f=1", "display_name": "Naga", "link": "https://stackoverflow.com/users/5036010/naga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1287, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1470044300, "creation_date": 1469628737, "last_edit_date": 1469629906, "question_id": 38615458, "link": "https://stackoverflow.com/questions/38615458/freetds-dateformat-issues", "title": "FREETDS Dateformat issues", "body": "<p>Below SQL statement </p>\n\n<pre><code>SELECT getdate()\ngo\n</code></pre>\n\n<p>When I run from SQL Server management studio it gives </p>\n\n<pre><code>\"Jul 27 2016 22:00:00.860\"\n</code></pre>\n\n<p>When I run the same from sqsh it gives </p>\n\n<pre><code>\"Jul 27 2016 10:00PM\"\n</code></pre>\n\n<p>sqsh uses freetds to connect to SQL server from my linux box. I have a C program which uses freetds and it will work fine when date is retrieved in 24hour format. </p>\n\n<p>I guess there are settings for freetds to get date in required format, can someone please suggest how to accomplish that by freetds settings.  </p>\n"}, {"tags": ["c++", "c", "null", "nullptr"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1469628828, "post_id": 38615436, "comment_id": 64617029, "body": "C11 draft standard n1570: <i>6.5.3.2 Address and indirection operators 3 The unary &amp; operator yields the address of its operand. If the operand has type \u2018\u2018type\u2019\u2019, the result has type \u2018\u2018pointer to type\u2019\u2019. If the operand is the result of a unary * operator, neither that operator nor the &amp; operator is evaluated and the result is as if both were omitted, except that the constraints on the operators still apply and the result is not an lvalue.</i>"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469629070, "post_id": 38615436, "comment_id": 64617232, "body": "I marked this as a duplicate, but be sure to read the discussion under the C++ answer, as well as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#232\" rel=\"nofollow noreferrer\">this discussion</a>, as this is not quite so explicit in the C++ standard."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1469629327, "post_id": 38615436, "comment_id": 64617464, "body": "I doubt this is duplicate as OP asks &quot;if dereferencing <code>nullptr</code> is UB how offesetof works&quot;"}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469629337, "post_id": 38615436, "comment_id": 64617476, "body": "Thank you @TartanLlama. I read that topic and will read it again. It was just not clear what question was asked and was the correct answer to that question. It looks more like discussion :-)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1469629590, "post_id": 38615436, "comment_id": 64617659, "body": "@TartanLlama Since I can&#39;t find an equivalent exemption for using <code>&amp;*NULL</code> in c++, I suspect this may be one of the points where the two languages diverge. The supposed duplicate can only stand if the <code>c</code>-tag is removed."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469629793, "post_id": 38615436, "comment_id": 64617848, "body": "@EOF I&#39;m not sure what you mean; that question has answers addressing C and C++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469629896, "post_id": 38615436, "comment_id": 64617936, "body": "The dupe is wrong.... Perhaps <a href=\"http://stackoverflow.com/q/7346634/560648\">stackoverflow.com/q/7346634/560648</a>? Depends on the language though. I wish the OP would bloomin&#39; pick one."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469629914, "post_id": 38615436, "comment_id": 64617962, "body": "@TartanLlama: If you read my first comment here, you&#39;ll notice that <b>there is no <code>NULL</code>-dereference</b> if the code is treated as C. Therefore, answers explaining undefinedness of <code>NULL</code>-dereference are not suitable as duplicates."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469630021, "post_id": 38615436, "comment_id": 64618046, "body": "@EOF Ah yes, my mistake, ignore my silliness."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1469630236, "post_id": 38615436, "comment_id": 64618216, "body": "@RaymondChen: Nope, that&#39;s not right either."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469630318, "post_id": 38615436, "comment_id": 64618276, "body": "@LightnessRacesinOrbit The problem is that OP asked four questions. OP should pick one question so people can give the answer to it."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1469630387, "post_id": 38615436, "comment_id": 64618340, "body": "@RaymondChen: And at least one of them, as far as I can tell, differs between C and C++, in contradiction to the OP&#39;s assertion that the answers would be similar for the two languages."}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "edited": false, "score": 0, "creation_date": 1469630973, "post_id": 38615436, "comment_id": 64618818, "body": "I am not sure why the question was marked as duplicate to the <a href=\"http://stackoverflow.com/questions/9383684/is-there-a-platform-or-situation-where-dereferencing-but-not-using-a-null-poin\">question</a>? I am wondering if my example is an undefined behavior (and how <code>offsetof</code> works if it is). The question above already <b>gives</b> an example of undefined behavior and is about the platform. These two questions are completely different. I think I am very specific in mine. How can I reformulate it?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469631360, "post_id": 38615436, "comment_id": 64619101, "body": "@Trula I think answer to your question is &quot;implementation of standard library does not have to be valid C or C++ code and discussing if implementation itself there is standard complaint is useless&quot;."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1469631505, "post_id": 38615436, "comment_id": 64619217, "body": "The identified duplicate does not answer this question."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1469632014, "post_id": 38615436, "comment_id": 64619570, "body": "The C standards, since the 1989 ANSI standard all specify that <code>&amp;*ptr</code> has well defined behaviour, since result (in such expression) effectively discards both the <code>&amp;</code> and the <code>*</code>.   Not sure, offhand, what the C++ standards have to say."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1469632218, "last_edit_date": 1592644375, "creation_date": 1469628930, "answer_id": 38615522, "question_id": 38615436, "link": "https://stackoverflow.com/questions/38615436/c-c-nullptr-dereference/38615522#38615522", "title": "C/C++ nullptr dereference", "body": "<p>TL;DR <code>&amp;(*(char*)0)</code> is well defined.</p>\n<p>The C++ standard doesn't say that indirection of null pointer by itself has UB. Current standard draft, <a href=\"http://eel.is/c++draft/expr.unary.op\" rel=\"nofollow noreferrer\">[expr.unary.op]</a></p>\n<blockquote>\n<ol>\n<li><p>The unary * operator performs indirection: the expression to which it is applied shall be a pointer to an object type, or a pointer to a function type and the result is an lvalue referring to the object or function to which the expression points. If the type of the expression is \u201cpointer to T\u201d, the type of the result is \u201cT\u201d. [snip]</p>\n</li>\n<li><p>The result of the unary &amp; operator is a pointer to its operand. The operand shall be an lvalue or a qualified-id. [snip]</p>\n</li>\n</ol>\n</blockquote>\n<p>There is no UB unless the lvalue of the indirection expression is converted to an rvalue.</p>\n<hr />\n<p>The C standard is much more explicit. C11 standard draft \u00a76.5.3.2</p>\n<blockquote>\n<ol start=\"3\">\n<li>The unary &amp; operator yields the address of its operand. If the operand has type &quot;type&quot;, the  result  has  type  &quot;pointer to type&quot;. <strong>If the  operand  is  the  result  of  a unary * operator, neither  that  operator  nor  the &amp; operator  is  evaluated  and  the  result  is  as  if  both  were omitted</strong>, except  that  the  constraints  on  the  operators  still  apply  and  the  result  is  not  an lvalue.  Similarly, if the operand is the result of a [] operator, neither the &amp; operator nor the  unary * that  is  implied  by  the [] is  evaluated  and  the  result  is  as  if  the\n&amp; operator were removed and the [] operator were changed to a + operator. Otherwise, the result is a pointer to the object or function designated by its operand.</li>\n</ol>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 1, "creation_date": 1469630285, "post_id": 38616085, "comment_id": 64618253, "body": "OP is referring to the macro from the link: #define OFFSETOF(type, field)    ((unsigned long) &amp;(((type *) 0)-&gt;field))"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 0, "creation_date": 1469630435, "post_id": 38616085, "comment_id": 64618380, "body": "@Byteventurer No reason to use a home-grown <code>offsetoff</code>, it results in compiler warnings. Use the standard  <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow noreferrer\"><code>offsetof</code></a>."}, {"owner": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 1, "creation_date": 1469630479, "post_id": 38616085, "comment_id": 64618413, "body": "I am not propagating the use of the macro, I am explaining what the OP is referring to when asking the question..."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 0, "creation_date": 1469630722, "post_id": 38616085, "comment_id": 64618608, "body": "@Byteventurer I think the OP is confusing <code>offsetof</code> with <code>OFFSETOF</code>. <code>offsetof</code> is an identifier reserved for the implementation, whereas <code>OFFSETOF</code> could be anything."}, {"owner": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 1, "creation_date": 1469630910, "post_id": 38616085, "comment_id": 64618768, "body": "Perhaps he is. Still, the question was about &amp;(*p) where p is a null pointer, not about offsetof itself, and the offsetof macro he linked to did just that. Before the edit, you missed the point of the question IMO."}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "edited": false, "score": 1, "creation_date": 1469631483, "post_id": 38616085, "comment_id": 64619200, "body": "@MaximEgorushkin, I am aware that <code>offsetof</code> and <code>OFFSETOF</code> are different. Nevertheless, the question was not about which one to use. <code>OFFSETOF</code> was just a simple example with <code>64</code> upvotes and marked as an accepted answer. I can give another <a href=\"http://lxr.free-electrons.com/source/include/linux/stddef.h\" rel=\"nofollow noreferrer\">example</a> if that would be more convenient ;-)"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1469630519, "last_edit_date": 1469630519, "creation_date": 1469630220, "answer_id": 38616085, "question_id": 38615436, "link": "https://stackoverflow.com/questions/38615436/c-c-nullptr-dereference/38616085#38616085", "title": "C/C++ nullptr dereference", "body": "<blockquote>\n  <p>If it is also an undefined behavior, how does <code>offsetof</code> work?</p>\n</blockquote>\n\n<p>Prefer using <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow\">the standard <code>offsetof</code> macro</a>. Home-grown versions result in compiler warnings. Moreover:</p>\n\n<blockquote>\n  <p><code>offsetof</code> is required to work as specified above, even if unary <code>operator&amp;</code> is overloaded for any of the types involved. This cannot be implemented in standard C++ and requires compiler support.</p>\n</blockquote>\n\n<p><code>offsetof</code> is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Offsetof.html\" rel=\"nofollow\">built-in function in gcc</a>.</p>\n"}], "owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2260, "favorite_count": 0, "closed_date": 1469630288, "accepted_answer_id": 38615522, "answer_count": 2, "score": 2, "last_activity_date": 1469633390, "creation_date": 1469628687, "last_edit_date": 1495542761, "question_id": 38615436, "link": "https://stackoverflow.com/questions/38615436/c-c-nullptr-dereference", "closed_reason": "Duplicate", "title": "C/C++ nullptr dereference", "body": "<p>Since de-referencing <code>nullptr</code> (<code>NULL</code>) is an undefined behavior both in <code>C</code> and <code>C++</code>, I am wondering if expression <code>&amp;(*ptr)</code> is a valid one if ptr is <code>nullptr</code> (<code>NULL</code>).</p>\n\n<p>If it is also an undefined behavior, how does <a href=\"https://stackoverflow.com/a/142023\">OFFSETOF</a> macro in the linked answer work?</p>\n\n<p>I always thought that <code>ptr-&gt;field</code> is a shorthand for <code>(*ptr).field</code></p>\n\n<p>I think the answer to my question is similar in C and C++.</p>\n"}, {"tags": ["c", "audio", "raspberry-pi2", "alsa"], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 1, "last_activity_date": 1474527302, "creation_date": 1474527302, "answer_id": 39632203, "question_id": 38615396, "link": "https://stackoverflow.com/questions/38615396/sound-recording-play-on-raspberry-pi-using-alsa-in-c/39632203#39632203", "title": "Sound Recording &amp; Play on Raspberry Pi Using ALSA in C", "body": "<p>Its just a basic thing, when you are trying <code>aplay sample.wav\"</code>  \"aplay\" will look for wave header and its not there in your file. So its playing with some other format (Sampling frequency,Channels, etc ..). That why your audio become noisy.</p>\n\n<p>But in <code>aplay -t raw -f S16_LE -c2 -r44100 sample.wav</code> you are providing all information needed and its working fine.</p>\n"}], "owner": {"reputation": 249, "user_id": 4940838, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10206662966672757/picture?type=large", "display_name": "Yanay Hollander", "link": "https://stackoverflow.com/users/4940838/yanay-hollander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1474527302, "creation_date": 1469628631, "question_id": 38615396, "link": "https://stackoverflow.com/questions/38615396/sound-recording-play-on-raspberry-pi-using-alsa-in-c", "title": "Sound Recording &amp; Play on Raspberry Pi Using ALSA in C", "body": "<p>I am trying to record sound and play it in a C program.\njust like using those terminal lines:</p>\n\n<pre><code>arecord -D plughw:0 -r 16000 sample.wav\n</code></pre>\n\n<p>for record, and later on</p>\n\n<pre><code>aplay sample.wav\n</code></pre>\n\n<p>to play the sound.</p>\n\n<p>I used this code:</p>\n\n<pre><code>/*\n\n\nThis example reads from the default PCM device\nand writes to standard output for 5 seconds of data.\n\n\n*/\n\n\n/* Use the newer ALSA API */\n#define ALSA_PCM_NEW_HW_PARAMS_API\n\n\n#include &lt;alsa/asoundlib.h&gt;\n\n\nint main() {\n  long loops;\n  int rc;\n  int size;\n  snd_pcm_t *handle;\n  snd_pcm_hw_params_t *params;\n  unsigned int val;\n  int dir;\n  snd_pcm_uframes_t frames;\n  char *buffer;\n\n\n  /* Open PCM device for recording (capture). */\n  rc = snd_pcm_open(&amp;handle, \"default\",\n                    SND_PCM_STREAM_CAPTURE, 0);\n  if (rc &lt; 0) {\n    fprintf(stderr,\n            \"unable to open pcm device: %s\\n\",\n            snd_strerror(rc));\n    exit(1);\n  }\n\n\n  /* Allocate a hardware parameters object. */\n  snd_pcm_hw_params_alloca(&amp;params);\n\n\n  /* Fill it in with default values. */\n  snd_pcm_hw_params_any(handle, params);\n\n\n  /* Set the desired hardware parameters. */\n\n\n  /* Interleaved mode */\n  snd_pcm_hw_params_set_access(handle, params,\n                      SND_PCM_ACCESS_RW_INTERLEAVED);\n\n\n  /* Signed 16-bit little-endian format */\n  snd_pcm_hw_params_set_format(handle, params,\n                              SND_PCM_FORMAT_S16_LE);                                 \n\n\n  /* Two channels (stereo) */\n  snd_pcm_hw_params_set_channels(handle, params, 2);                                 \n\n\n  /* 44100 bits/second sampling rate (CD quality) */\n  val = 44100;                                                     \n  snd_pcm_hw_params_set_rate_near(handle, params,\n                                  &amp;val, &amp;dir);\n\n\n  /* Set period size to 32 frames. */\n  frames = 32;\n  snd_pcm_hw_params_set_period_size_near(handle,\n                              params, &amp;frames, &amp;dir);\n\n\n  /* Write the parameters to the driver */\n  rc = snd_pcm_hw_params(handle, params);\n  if (rc &lt; 0) {\n    fprintf(stderr,\n            \"unable to set hw parameters: %s\\n\",\n            snd_strerror(rc));\n    exit(1);\n  }\n\n\n  /* Use a buffer large enough to hold one period */\n  snd_pcm_hw_params_get_period_size(params,\n                                      &amp;frames, &amp;dir);\n  size = frames * 4; /* 2 bytes/sample, 2 channels */\n  buffer = (char *) malloc(size);\n\n\n  /* We want to loop for 5 seconds */\n  snd_pcm_hw_params_get_period_time(params,\n                                         &amp;val, &amp;dir);\n  loops = 5000000 / val;\n\n\n  while (loops &gt; 0) {\n    loops--;\n    rc = snd_pcm_readi(handle, buffer, frames);\n    if (rc == -EPIPE) {\n      /* EPIPE means overrun */\n      fprintf(stderr, \"overrun occurred\\n\");\n      snd_pcm_prepare(handle);\n    } else if (rc &lt; 0) {\n      fprintf(stderr,\n              \"error from read: %s\\n\",\n              snd_strerror(rc));\n    } else if (rc != (int)frames) {\n      fprintf(stderr, \"short read, read %d frames\\n\", rc);\n    }\n    rc = write(1, buffer, size);\n    if (rc != size)\n      fprintf(stderr,\n              \"short write: wrote %d bytes\\n\", rc);\n  }\n\n\n  snd_pcm_drain(handle);\n  snd_pcm_close(handle);\n  free(buffer);\n\n\n  return 0;\n}\n</code></pre>\n\n<p>I compile this file this way:</p>\n\n<pre><code>gcc -o recorder -lasound recorder.c\n</code></pre>\n\n<p>and run it:</p>\n\n<pre><code>./recorder &lt; sample.wav\n</code></pre>\n\n<p>if I try to play this with \"aplay sample.wav\" it's making a terrible noisy sound.\nbut if I use \"aplay -t raw -f S16_LE -c2 -r44100 sample.wav\"\nit works good.</p>\n\n<p>what I do wrong and if there is an easy way to capture audio and play it on Raspberry Pi?</p>\n\n<p>Thank You for Your time.</p>\n"}, {"tags": ["c", "pointers", "dereference", "pre-increment"], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 4465685, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/230g0.jpg?s=128&g=1", "display_name": "Nikhil Verma", "link": "https://stackoverflow.com/users/4465685/nikhil-verma"}, "edited": false, "score": 0, "creation_date": 1469629056, "post_id": 38615480, "comment_id": 64617223, "body": "output is affected when i comment out this statement"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1675, "user_id": 4465685, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/230g0.jpg?s=128&g=1", "display_name": "Nikhil Verma", "link": "https://stackoverflow.com/users/4465685/nikhil-verma"}, "edited": false, "score": 1, "creation_date": 1469629118, "post_id": 38615480, "comment_id": 64617272, "body": "@NikhilVerma I&#39;m not asking to comment out the statement, remove the dereferences, use <code>++pp;</code> and you&#39;ll get the same result."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1469629577, "post_id": 38615480, "comment_id": 64617647, "body": "Of course it is affected, as <code>pp</code> is not incremented, if you comment it out."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1469629642, "last_edit_date": 1469629642, "creation_date": 1469628808, "answer_id": 38615480, "question_id": 38615393, "link": "https://stackoverflow.com/questions/38615393/pointer-to-pointer-dereference-with-pre-increment-operator/38615480#38615480", "title": "Pointer to pointer dereference with pre-increment operator", "body": "<p>In your code, <code>**++pp;</code> is the same as <code>* (* ( ++pp));</code>. It first increments the pointer, then deferences twice (<em>the first dereference result is of pointer type, to be elaborate</em>).</p>\n\n<p>However, the value obtained by dereferencing is not used. If you have compiler warnings enabled, you'll get to see something like</p>\n\n<blockquote>\n  <p>warning: value computed is not used</p>\n</blockquote>\n\n<p>You can remove the dereferencing, it's no use.</p>\n"}], "owner": {"reputation": 1675, "user_id": 4465685, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/230g0.jpg?s=128&g=1", "display_name": "Nikhil Verma", "link": "https://stackoverflow.com/users/4465685/nikhil-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 38615480, "answer_count": 1, "score": 0, "last_activity_date": 1469629642, "creation_date": 1469628613, "last_edit_date": 1469628985, "question_id": 38615393, "link": "https://stackoverflow.com/questions/38615393/pointer-to-pointer-dereference-with-pre-increment-operator", "title": "Pointer to pointer dereference with pre-increment operator", "body": "<p>The following program gives output as 17,29,45; I can't understand what does <code>**++pp;</code> mean. Can anyone explain the program in detail.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    int main() {\n        static int a[] = {10, 22, 17, 29, 45};\n        static int *p[] = {a, a + 2, a + 1, a + 4, a + 3};\n        int **pp = p;\n        **++pp;\n        printf(\"%d %d %d\", **pp, *pp[3], pp[0][2]);\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1469628110, "post_id": 38615106, "comment_id": 64616498, "body": "Undefined behavior for accessing beyond the bounds of an object in <code>memcpy(&amp;s3, &amp;s1, sizeof(s3));</code> since <code>sizeof(s1)</code> is less than <code>sizeof(s3)</code>."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1469628282, "post_id": 38615106, "comment_id": 64616624, "body": "Is this &#39;struct&#39; day or what?"}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 1453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7ab4c59c2e681453cfe50fbc89f6f3?s=128&d=identicon&r=PG", "display_name": "Rich Jahn", "link": "https://stackoverflow.com/users/1453694/rich-jahn"}, "edited": false, "score": 0, "creation_date": 1469628471, "post_id": 38615210, "comment_id": 64616753, "body": "I guess you&#39;d want: memcpy(&amp;s3, &amp;s1, sizeof(base)); rather than: memcpy(&amp;s3, &amp;s1, sizeof(extended)); ... in order to only copy the first 2 fields."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 305, "user_id": 1453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7ab4c59c2e681453cfe50fbc89f6f3?s=128&d=identicon&r=PG", "display_name": "Rich Jahn", "link": "https://stackoverflow.com/users/1453694/rich-jahn"}, "edited": false, "score": 0, "creation_date": 1469628558, "post_id": 38615210, "comment_id": 64616830, "body": "Yes, of course. If you only want to copy the contents of <code>s1</code> then don&#39;t tell it to copy <code>s1</code> plus whatever happens to be after it in memory!"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 0, "last_activity_date": 1469628517, "last_edit_date": 1469628517, "creation_date": 1469628172, "answer_id": 38615210, "question_id": 38615106, "link": "https://stackoverflow.com/questions/38615106/can-you-partially-copy-an-instance-of-a-struct-to-another-of-a-different-type-in/38615210#38615210", "title": "Can you partially copy an instance of a struct to another of a different type in one statement?", "body": "<pre><code>s2 = *(extended*)&amp;s1;\n</code></pre>\n\n<p>This has undefined behaviour, the object at <code>&amp;s1</code> is not of the correct type to be accessed through a pointer of type <code>extended*</code>.</p>\n\n<pre><code>memcpy(&amp;s3, &amp;s1, sizeof(s3));\n</code></pre>\n\n<p>This also has undefined behaviour, because you read <code>sizeof(extended)</code> bytes from an object that is only <code>sizeof(base)</code> bytes long.</p>\n\n<p>If you think about it, it obviously won't work as you expect. When you copy an <code>extended</code> structure the compiler reads three words (i.e. <code>sizeof(extended)</code>) from the source, and copies those three words to the destination. It doesn't copy less than three words and leave the last word unchanged. You told it to read <code>sizeof(extended)</code> bytes from the address <code>&amp;s1</code> so that's exactly what it does. And the last member gets set to a garbage value, because you read it from a memory location that isn't part of <code>s1</code> and contains some garbage value.</p>\n\n<p>Why do you expect the compiler to copy <code>sizeof(base)</code> bytes if you tell it to copy <code>sizeof(extended)</code> bytes? If you don't want it to copy more bytes then don't tell it to copy more bytes!</p>\n"}, {"tags": [], "owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "is_accepted": false, "score": 0, "last_activity_date": 1469629119, "creation_date": 1469629119, "answer_id": 38615607, "question_id": 38615106, "link": "https://stackoverflow.com/questions/38615106/can-you-partially-copy-an-instance-of-a-struct-to-another-of-a-different-type-in/38615607#38615607", "title": "Can you partially copy an instance of a struct to another of a different type in one statement?", "body": "<p>when you copy from one memory location to another using pointer casts you are basically 'taking matters into your own hands'</p>\n\n<p>These statements:</p>\n\n<pre><code>s2 = *(extended*)&amp;s1;\ns1 = *(base*)&amp;s2;\n</code></pre>\n\n<p>Are equivalent to these:</p>\n\n<pre><code>memcpy(&amp;s2, &amp;s1, sizeof(extended));\nmemcpy(&amp;s1, &amp;s2, sizeof(base));\n</code></pre>\n\n<p>I think it is clear why copying from <strong>base* source</strong> to <strong>extended* dest</strong> will overwrite only part of the data and the other way around can have disastrous consequences (you have an out of bounds memory access and might overwrite important data).</p>\n"}], "owner": {"reputation": 305, "user_id": 1453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7ab4c59c2e681453cfe50fbc89f6f3?s=128&d=identicon&r=PG", "display_name": "Rich Jahn", "link": "https://stackoverflow.com/users/1453694/rich-jahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1469629119, "creation_date": 1469627946, "question_id": 38615106, "link": "https://stackoverflow.com/questions/38615106/can-you-partially-copy-an-instance-of-a-struct-to-another-of-a-different-type-in", "title": "Can you partially copy an instance of a struct to another of a different type in one statement?", "body": "<p>With a partial copy I'd expect to set the matching fields with a copy, but leave the non-matching fields unset (i.e. retain their previous values).</p>\n\n<p>It doesn't seem to happen. I'm curious why and if this is some undefined behavior?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define print_base(s) printf(\"%d %d\\n\", s.a, s.b)\n#define print_extended(s) printf(\"%d %d %d\\n\", s.a, s.b, s.c)\n\ntypedef struct\n{\n    int a;\n    int b;\n} base;\n\ntypedef struct\n{\n    int a;\n    int b;\n    int c;\n} extended;\n\nint main()\n{\n    base s1 = {1,2};\n    extended s2 = {0};\n    extended s3 = {0};\n    extended s4 = {4,5,6};\n    extended s5 = {4,5,6};\n    extended s6 = {7,8,9};\n    base s7 = {0};\n\n    print_extended(s2);\n    s2 = *(extended*)&amp;s1;\n    print_extended(s2);\n\n    print_extended(s3);\n    memcpy(&amp;s3, &amp;s1, sizeof(s3));\n    print_extended(s3);\n\n    print_extended(s4);\n    s4 = *(extended*)&amp;s1;\n    print_extended(s4);\n\n    print_extended(s5);\n    memcpy(&amp;s5, &amp;s1, sizeof(s5));\n    print_extended(s5);\n\n    /* lossy copy */\n    print_base(s7);\n    s7 = *(base*)&amp;s6;\n    print_base(s7);\n\n    return 0;\n}\n\n/*\nActual  Expected\n0 0 0   0 0 0\n1 2 1   1 2 0\n0 0 0   0 0 0\n1 2 1   1 2 0\n4 5 6   4 5 6\n1 2 1   1 2 6\n4 5 6   4 5 6\n1 2 1   1 2 6\n0 0     0 0\n7 8     7 8\n*/\n</code></pre>\n"}, {"tags": ["c", "gcc", "clang"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469631370, "post_id": 38615091, "comment_id": 64619112, "body": "You didn&#39;t set your compilers to optimize, so clang didn&#39;t optimize. Shocking."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1469631632, "post_id": 38615091, "comment_id": 64619296, "body": "@EOF How is that relevant? Surely, if told to use a builtin, it should use a builtin - not &#39;use a builtin in a more optimising mode, maybe, if you can be bothered&#39;. Is <code>builtin</code> just an optional request like <code>inline</code>? If so, can you link us to the bit in the Clang documentation that specifies that?"}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1469631665, "post_id": 38615091, "comment_id": 64619330, "body": "@EOF FYI I compiled with <code>-O3</code> and the assembly is a lot shorter, but still contains a <code>jmp _strlen</code>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 1, "creation_date": 1469631788, "post_id": 38615091, "comment_id": 64619410, "body": "@Siguza: My gcc 4.8.4 only creates different code for calling <code>strlen()</code> and <code>__builtin_strlen()</code> when not optimizing (<code>-O0</code>), at all other optimization levels it produces identical code for both. Sometimes it inlines (<code>-O1</code>, <code>-Os</code>), sometimes it calls the library (<code>-O2</code>, <code>-O3</code>)."}, {"owner": {"reputation": 3436, "user_id": 1520878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/6822b07182b8c0ae366325f2ae4fab4f?s=128&d=identicon&r=PG", "display_name": "brooks94", "link": "https://stackoverflow.com/users/1520878/brooks94"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469633293, "post_id": 38615091, "comment_id": 64620454, "body": "@EOF, I don&#39;t think this is about optimization, it&#39;s about the documentation for the GCC builtins that mention &quot;GCC built-in functions are always expanded inline&quot;.  Admittedly I can&#39;t find any equivalent language for Clang, but I thought in the absence of documentation otherwise clang was supposed to be functionally equivalent to GCC."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1469637768, "post_id": 38615091, "comment_id": 64623288, "body": "@brooks94: You missed the rest of the sentence. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">&quot;<b>With the exception of built-ins that have library equivalents such as the standard C library functions discussed below, or that expand to library calls,</b> GCC built-in functions are always expanded inline...&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469655847, "post_id": 38618725, "comment_id": 64633023, "body": "&quot;I strongly advise against rolling your own implementations of standard library functions&quot; - Any particular reason other than performance?  Note that it&#39;s easy enough to have a debug mode whereby you run both functions and check that they output the same thing."}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "reply_to_user": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 1, "creation_date": 1469660377, "post_id": 38618725, "comment_id": 64634625, "body": "@TLW Bugs and conformance to the specification. Basic functionality isn&#39;t too hard to get right or debug, but edge cases can be hard to spot. And even simple functions can get complicated if you&#39;re trying to optimise performance. And if they come in contact with user input, just <a href=\"https://github.com/struct/mms/blob/master/Modern_Memory_Safety_In_C_CPP.pdf\" rel=\"nofollow noreferrer\">so many memory errors are exploitable</a>. In contrast to that, C standard library functions have been audited for decades."}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469665413, "post_id": 38618725, "comment_id": 64635793, "body": "@Siguza - Good answer, although AFL / UBSAN / Valgrind, + a comparison with the standard library behavior, can get you pretty far."}], "tags": [], "owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "is_accepted": false, "score": 6, "last_activity_date": 1469639167, "last_edit_date": 1469639167, "creation_date": 1469637513, "answer_id": 38618725, "question_id": 38615091, "link": "https://stackoverflow.com/questions/38615091/builtins-in-clang-not-so-builtin/38618725#38618725", "title": "Builtins in Clang not so builtin?", "body": "<p>Just to get optimisation out of the way:</p>\n\n<p>With <code>clang -O0</code>:</p>\n\n<pre><code>t.o:\n(__TEXT,__text) section\n_call_strlen:\n0000000000000000    pushq   %rbp\n0000000000000001    movq    %rsp, %rbp\n0000000000000004    subq    $0x10, %rsp\n0000000000000008    movq    %rdi, -0x8(%rbp)\n000000000000000c    movq    -0x8(%rbp), %rdi\n0000000000000010    callq   _strlen\n0000000000000015    movl    %eax, %ecx\n0000000000000017    movl    %ecx, %eax\n0000000000000019    addq    $0x10, %rsp\n000000000000001d    popq    %rbp\n000000000000001e    retq\n</code></pre>\n\n<p>With <code>clang -O3</code></p>\n\n<pre><code>t.o:\n(__TEXT,__text) section\n_call_strlen:\n0000000000000000    pushq   %rbp\n0000000000000001    movq    %rsp, %rbp\n0000000000000004    popq    %rbp\n0000000000000005    jmp _strlen\n</code></pre>\n\n<hr>\n\n<p>Now, onto the problem:</p>\n\n<p>The clang documentation claims that clang support all GCC-supported builtins.<br>\nHowever, the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"noreferrer\">GCC documentation</a> seems to treat builtin functions and the names of their library equivalents as synonyms:</p>\n\n<blockquote>\n  <p>Both forms have the same type (including prototype), the same address (when their address is taken), and the same meaning as the C library functions [...].</p>\n</blockquote>\n\n<p>Also it does not guarantee a builtin function with a library equivalent (as is the case with <code>strlen</code>) to indeed get optimised:</p>\n\n<blockquote>\n  <p>Many of these functions are only optimized in certain cases; if they are not optimized in a particular case, a call to the library function is emitted.</p>\n</blockquote>\n\n<p>Further, the <a href=\"https://github.com/llvm-mirror/clang/blob/4ab9d6e02b29c24ca44638cc61b52cde2df4a888/docs/InternalsManual.rst#extensions\" rel=\"noreferrer\">clang internals manual</a> mentions <code>__builtin_strlen</code> only once:</p>\n\n<blockquote>\n  <ul>\n  <li><code>__builtin_strlen</code> and <code>strlen</code>: These are constant folded as integer constant expressions if the argument is a string literal.</li>\n  </ul>\n</blockquote>\n\n<p>Other than that they seem to make no promises.</p>\n\n<p>Since in your case the argument to <code>__builtin_strlen</code> is not a string literal, and since the GCC documentation allows for calls to builtin functions to be converted to library function calls, clang's behaviour seems perfectly valid.</p>\n\n<p>A <a href=\"http://clang-developers.42468.n3.nabble.com/Patch-for-review-enhancement-to-builtin-strlen-td4024850.html\" rel=\"noreferrer\">\"patch for review\" on the clang developers mailing list</a> also says:</p>\n\n<blockquote>\n  <p>[...] It will still fall back to runtime use of library strlen, if \n  compile-time evaluation is not possible/required [...].</p>\n</blockquote>\n\n<p>That was in 2012, but the text indicates that at least back then, only compile-time evaluation was supported.</p>\n\n<p>Now, I see two options:</p>\n\n<ul>\n<li>If you only need to compile the program yourself and then use and/or distribute it, I suggest you simply use gcc.</li>\n<li>If you need others to be able to compile your code under both gcc and clang, I suggest adding a C library as a dependency for static linking.</li>\n</ul>\n\n<p>I strongly advise <strong>against</strong> rolling your own implementations of standard library functions, even for seemingly simple cases (if you disagree, try writing up your own <code>strlen</code> implementation, then compare it to <a href=\"https://github.com/lattera/glibc/blob/master/string/strlen.c\" rel=\"noreferrer\">the glibc one</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1469644952, "last_edit_date": 1495539862, "creation_date": 1469644952, "answer_id": 38620843, "question_id": 38615091, "link": "https://stackoverflow.com/questions/38615091/builtins-in-clang-not-so-builtin/38620843#38620843", "title": "Builtins in Clang not so builtin?", "body": "<p>Neither GCC nor Clang promises to inline this builtin. <a href=\"https://stackoverflow.com/questions/38615091/builtins-in-clang-not-so-builtin#comment64620454_38615091\">You quoted</a> some GCC documentation seeming to make such a promise:</p>\n\n<blockquote>\n  <p>...GCC built-in functions are always expanded inline...</p>\n</blockquote>\n\n<p>but this is a sentence fragment pulled out of context. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">The complete sentence</a> is</p>\n\n<blockquote>\n  <p><strong>With the exception of built-ins that have library equivalents</strong> such as the standard C library functions discussed below, <strong>or that expand to library calls,</strong> GCC built-in functions are always expanded inline and thus do not have corresponding entry points and their address cannot be obtained. </p>\n</blockquote>\n\n<p><code>__builtin_strlen</code> has the library equivalent <code>strlen</code>, so this sentence makes no promises about whether it gets inlined.</p>\n"}], "owner": {"reputation": 3436, "user_id": 1520878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/6822b07182b8c0ae366325f2ae4fab4f?s=128&d=identicon&r=PG", "display_name": "brooks94", "link": "https://stackoverflow.com/users/1520878/brooks94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1915, "favorite_count": 0, "answer_count": 2, "score": 9, "last_activity_date": 1469644952, "creation_date": 1469627910, "last_edit_date": 1469629088, "question_id": 38615091, "link": "https://stackoverflow.com/questions/38615091/builtins-in-clang-not-so-builtin", "title": "Builtins in Clang not so builtin?", "body": "<p>If I have the following in <code>strlen.c</code>:</p>\n\n<pre><code>int call_strlen(char *s) {\n  return __builtin_strlen(s);\n}\n</code></pre>\n\n<p>And then compile it with both gcc and clang like this:</p>\n\n<pre><code>gcc -c -o strlen-gcc.o strlen.c\n\nclang -c -o strlen-clang.o strlen.c\n</code></pre>\n\n<p>I am surprised to see that strlen-clang.o contains a reference to \"strlen\", whereas gcc has expectedly inlined the function and has no such reference.  (see objdumps below).  Is this a bug in clang?  I have tested it in several versions of the clang compiler, including 3.8.</p>\n\n<p>Edit: the reason this is important for me is that I'm linking with <code>-nostdlib</code>, and the clang-compiled version gives me a link error that strlen is not found.</p>\n\n<p><strong>Clang</strong></p>\n\n<pre><code>@&gt; objdump -d strlen-clang.o \n\nstrlen-clang.o:     file format elf64-x86-64\n\n\nDisassembly of section .text:\n\n0000000000000000 &lt;call_strlen&gt;:\n   0: 55                    push   %rbp\n   1: 48 89 e5              mov    %rsp,%rbp\n   4: 48 83 ec 10           sub    $0x10,%rsp\n   8: 48 89 7d f8           mov    %rdi,-0x8(%rbp)\n   c: 48 8b 7d f8           mov    -0x8(%rbp),%rdi\n  10: e8 00 00 00 00        callq  15 &lt;call_strlen+0x15&gt;\n  15: 89 c1                 mov    %eax,%ecx\n  17: 89 c8                 mov    %ecx,%eax\n  19: 48 83 c4 10           add    $0x10,%rsp\n  1d: 5d                    pop    %rbp\n  1e: c3                    retq   \n\n\n@&gt; objdump -t strlen-clang.o \n\nstrlen-clang.o:     file format elf64-x86-64\n\nSYMBOL TABLE:\n0000000000000000 l    df *ABS*  0000000000000000 strlen.c\n0000000000000000 l    d  .text  0000000000000000 .text\n0000000000000000 l    d  .data  0000000000000000 .data\n0000000000000000 l    d  .bss 0000000000000000 .bss\n0000000000000000 l    d  .comment 0000000000000000 .comment\n0000000000000000 l    d  .note.GNU-stack  0000000000000000 .note.GNU-stack\n0000000000000000 l    d  .eh_frame  0000000000000000 .eh_frame\n0000000000000000 g     F .text  000000000000001f call_strlen\n0000000000000000         *UND*  0000000000000000 strlen\n</code></pre>\n\n<p><strong>GCC</strong></p>\n\n<pre><code>@&gt; objdump -d strlen-gcc.o \n\nstrlen-gcc.o:     file format elf64-x86-64\n\n\nDisassembly of section .text:\n\n0000000000000000 &lt;call_strlen&gt;:\n   0:   55                      push   %rbp\n   1:   48 89 e5                mov    %rsp,%rbp\n   4:   48 89 7d f8             mov    %rdi,-0x8(%rbp)\n   8:   48 8b 45 f8             mov    -0x8(%rbp),%rax\n   c:   48 c7 c1 ff ff ff ff    mov    $0xffffffffffffffff,%rcx\n  13:   48 89 c2                mov    %rax,%rdx\n  16:   b8 00 00 00 00          mov    $0x0,%eax\n  1b:   48 89 d7                mov    %rdx,%rdi\n  1e:   f2 ae                   repnz scas %es:(%rdi),%al\n  20:   48 89 c8                mov    %rcx,%rax\n  23:   48 f7 d0                not    %rax\n  26:   48 83 e8 01             sub    $0x1,%rax\n  2a:   5d                      pop    %rbp\n  2b:   c3                      retq   \n\n@&gt; objdump -t strlen-gcc.o \n\nstrlen-gcc.o:     file format elf64-x86-64\n\nSYMBOL TABLE:\n0000000000000000 l    df *ABS*  0000000000000000 strlen.c\n0000000000000000 l    d  .text  0000000000000000 .text\n0000000000000000 l    d  .data  0000000000000000 .data\n0000000000000000 l    d  .bss 0000000000000000 .bss\n0000000000000000 l    d  .note.GNU-stack  0000000000000000 .note.GNU-stack\n0000000000000000 l    d  .eh_frame  0000000000000000 .eh_frame\n0000000000000000 l    d  .comment 0000000000000000 .comment\n0000000000000000 g     F .text  000000000000002c call_strlen\n</code></pre>\n"}, {"tags": ["c", "gdb"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469627669, "post_id": 38614898, "comment_id": 64616160, "body": "How did you compile this?"}, {"owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469628480, "post_id": 38614898, "comment_id": 64616762, "body": "gcc program.c -g -o program"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1469628583, "post_id": 38614898, "comment_id": 64616850, "body": "What happens if you use <code>start</code> in gdb instead of setting a breakpoint? Also, can you provide the entire code?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469628604, "post_id": 38614898, "comment_id": 64616868, "body": "You seriously called the executable the same name as the source file?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469628655, "post_id": 38614898, "comment_id": 64616903, "body": "How do you set the breakpoint?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469628800, "post_id": 38614898, "comment_id": 64617015, "body": "@EOF he didn&#39;t, or it would&#39;ve failed <code>gcc: fatal error: input file \u2018program.c\u2019 is the same as output file</code>"}, {"owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1469636373, "post_id": 38614898, "comment_id": 64622522, "body": "@Ishay Peled already put the entire code there, sorry i was kinda in a hurry. If i use start it throws the same error when i use the &quot;x/24s $esp&quot;."}, {"owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469636384, "post_id": 38614898, "comment_id": 64622532, "body": "@EOF read the comment again."}, {"owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469636388, "post_id": 38614898, "comment_id": 64622537, "body": "@Eugene i used &quot;break main&quot; or &quot;break <i>line of main()</i>&quot;"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1469638209, "post_id": 38614898, "comment_id": 64623513, "body": "Note that <code>x&#47;24s $esp</code> will take the low-order 32 bits of $rsp, sign extend it to 64 bits, and print out the NUL-terminated character string at that address. Is that what you intended?"}, {"owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1469651086, "post_id": 38614898, "comment_id": 64630672, "body": "@Mark Plotnick my idea was to see the stack without initializing the main()"}], "answers": [{"comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1469656712, "post_id": 38623553, "comment_id": 64633422, "body": "Very very nice catch!"}, {"owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "edited": false, "score": 0, "creation_date": 1469660225, "post_id": 38623553, "comment_id": 64634583, "body": "@Mark Plotnick Yeah, you are correct. I completely forgot about that and yeah i&#39;m doing exercises from a old book..i&#39;m analyzing  the differences between the x86_x64 architecture and x86 but i completely forgot to try &quot;$rsp&quot; instead of &quot;$esp&quot;. Thanks and thanks for the explanation it helped a lot"}], "tags": [], "owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "is_accepted": true, "score": 1, "last_activity_date": 1469660002, "last_edit_date": 1469660002, "creation_date": 1469655222, "answer_id": 38623553, "question_id": 38614898, "link": "https://stackoverflow.com/questions/38614898/gdb-breakpoint-in-main-cannot-access-memory/38623553#38623553", "title": "GDB breakpoint in main() cannot access memory", "body": "<pre><code>(gdb) x/24s $esp\n0xffffffffffffe550: &lt;error: Cannot access memory at address 0xffffffffffffe550&gt;\n</code></pre>\n\n<p>On an x86-64 target, <code>$rsp</code> should be used. Using <code>$esp</code> will lead to incorrect results.</p>\n\n<p><code>$esp</code> is taken from the bottom 32 bits of the 64-bit <code>$rsp</code> register, and gdb treats it as type <code>int32_t</code>. <code>$rsp</code> in your example was probably <code>0x7fffffffe550</code>. Gdb's <code>x</code> command, which wants to use a 64-bit address, will take the bottom 32 bits of <code>$rsp</code>, <code>0xffffe550</code>, and sign-extend that to <code>0xffffffffffffe550</code>. That's almost certainly an invalid address; typical user-space addresses on Linux don't go above <code>0x7ffffffff000</code> or so.</p>\n\n<p>Try <code>x/24s $rsp</code>. If you're trying to follow exercises out of an old book, you may be able to duplicate their 32-bit examples by giving gcc the <code>-m32</code> option, if it supports it. Then you can use <code>$esp</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 3944478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45bdcfbeb396c5aafb008b01dea301a5?s=128&d=identicon&r=PG&f=1", "display_name": "Nhull", "link": "https://stackoverflow.com/users/3944478/nhull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1831, "favorite_count": 0, "accepted_answer_id": 38623553, "answer_count": 1, "score": 0, "last_activity_date": 1469660002, "creation_date": 1469627446, "last_edit_date": 1469636683, "question_id": 38614898, "link": "https://stackoverflow.com/questions/38614898/gdb-breakpoint-in-main-cannot-access-memory", "title": "GDB breakpoint in main() cannot access memory", "body": "<p>My question is why when i set a breakpoint in main() with GDB i receive the error</p>\n\n<pre><code>    &lt;0xffffffffffffe550: Cannot access memory at address 0xffffffffffffe550&gt;\n</code></pre>\n\n<p>I wanted to set a breakpoint in main() so i could examine the memory in the stack. My disassembled code is this:</p>\n\n<pre><code>0x00000000004008e8 &lt;+0&gt;:     push   %rbp\n0x00000000004008e9 &lt;+1&gt;:     mov    %rsp,%rbp\n0x00000000004008ec &lt;+4&gt;:     add    $0xffffffffffffff80,%rsp\n0x00000000004008f0 &lt;+8&gt;:     mov    %edi,-0x74(%rbp)\n0x00000000004008f3 &lt;+11&gt;:    mov    %rsi,-0x80(%rbp)\n=&gt;  0x00000000004008f7 &lt;+15&gt;:    movl   $0x1,-0x4(%rbp)\n0x00000000004008fe &lt;+22&gt;:    cmpl   $0x1,-0x74(%rbp)\n0x0000000000400902 &lt;+26&gt;:    jle    0x400920 &lt;main+56&gt;\n0x0000000000400904 &lt;+28&gt;:    mov    -0x80(%rbp),%rax\n0x0000000000400908 &lt;+32&gt;:    add    $0x8,%rax\n0x000000000040090c &lt;+36&gt;:    mov    (%rax),%rdx\n0x000000000040090f &lt;+39&gt;:    lea    -0x70(%rbp),%rax\n0x0000000000400913 &lt;+43&gt;:    mov    %rdx,%rsi\n0x0000000000400916 &lt;+46&gt;:    mov    %rax,%rdi\n0x0000000000400919 &lt;+49&gt;:    callq  0x400670 &lt;strcpy@plt&gt;\n0x000000000040091e &lt;+54&gt;:    jmp    0x400924 &lt;main+60&gt;\n0x0000000000400920 &lt;+56&gt;:    movb   $0x0,-0x70(%rbp)\n0x0000000000400924 &lt;+60&gt;:    callq  0x4006a0 &lt;getuid@plt&gt;\n0x0000000000400929 &lt;+65&gt;:    mov    %eax,-0x8(%rbp)\n0x000000000040092c &lt;+68&gt;:    mov    $0x0,%esi\n0x0000000000400931 &lt;+73&gt;:    mov    $0x400c6e,%edi\n0x0000000000400936 &lt;+78&gt;:    mov    $0x0,%eax\n0x000000000040093b &lt;+83&gt;:    callq  0x400720 &lt;open@plt&gt;\n0x0000000000400940 &lt;+88&gt;:    mov    %eax,-0xc(%rbp)\n0x0000000000400943 &lt;+91&gt;:    cmpl   $0xffffffff,-0xc(%rbp)\n0x0000000000400947 &lt;+95&gt;:    jne    0x40096b &lt;main+131&gt;\n0x0000000000400949 &lt;+97&gt;:    mov    $0x400c80,%edi\n0x000000000040094e &lt;+102&gt;:   callq  0x400856 &lt;fatal&gt;\n0x0000000000400953 &lt;+107&gt;:   jmp    0x40096b &lt;main+131&gt;\n0x0000000000400955 &lt;+109&gt;:   lea    -0x70(%rbp),%rdx\n0x0000000000400959 &lt;+113&gt;:   mov    -0x8(%rbp),%ecx\n0x000000000040095c &lt;+116&gt;:   mov    -0xc(%rbp),%eax\n0x000000000040095f &lt;+119&gt;:   mov    %ecx,%esi\n0x0000000000400961 &lt;+121&gt;:   mov    %eax,%edi\n0x0000000000400963 &lt;+123&gt;:   callq  0x40098c &lt;print_notes&gt;\n0x0000000000400968 &lt;+128&gt;:   mov    %eax,-0x4(%rbp)\n0x000000000040096b &lt;+131&gt;:   cmpl   $0x0,-0x4(%rbp)\n0x000000000040096f &lt;+135&gt;:   jne    0x400955 &lt;main+109&gt;\n0x0000000000400971 &lt;+137&gt;:   mov    $0x400cb0,%edi\n0x0000000000400976 &lt;+142&gt;:   callq  0x400680 &lt;puts@plt&gt;\n0x000000000040097b &lt;+147&gt;:   mov    -0xc(%rbp),%eax\n0x000000000040097e &lt;+150&gt;:   mov    %eax,%edi\n0x0000000000400980 &lt;+152&gt;:   callq  0x4006e0 &lt;close@plt&gt;\n0x0000000000400985 &lt;+157&gt;:   mov    $0x0,%eax\n0x000000000040098a &lt;+162&gt;:   leaveq \n0x000000000040098b &lt;+163&gt;:   retq   \n</code></pre>\n\n<p>And the code until my main is this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include \"usefullfuncs.h\"\n\n#define FILENAME \"/var/notes\"\n\nint print_notes(int, int, char *);\nint find_user_note(int,int);\nint search_note(char *, char *);\n\nint main(int argc, char *argv[]){\n    int userid,printing=1,fd;\n    char searchstring[100];\n\n    if(argc&gt;1)\n        strcpy(searchstring,argv[1]);\n    else\n        searchstring[0] = 0;\n\n    userid = getuid();\n\n    fd = open(FILENAME,O_RDONLY);\n    if(fd == -1)\n        fatal(\"in main() while opening file for reading\");\n\n    while(printing)\n        printing = print_notes(fd,userid,searchstring);\n    printf(\"-------[ end of note data ]-------\\n\");\n    close(fd);\n}\n\nint print_notes(int fd,int uid,char *searchstring){\n    int note_lenght;\n    char note_buffer[100];\n\n    note_lenght = find_user_note(fd,uid);\n\n    if(note_lenght == -1)\n        return 0;\n\n    read(fd,note_buffer,note_lenght);\n    note_buffer[note_lenght] = 0;\n\n    if(search_note(note_buffer,searchstring))\n        printf(note_buffer);\n    return 1;\n}\n\nint find_user_note(int fd,int user_uid){\n    int note_uid=-1;\n    unsigned char byte;\n    int lenght;\n\n    while(note_uid != user_uid){\n        if(read(fd,&amp;note_uid,4)!=4)\n            return -1;\n        if(read(fd,&amp;byte,1)!=1) \n            return -1;\n\n        byte = lenght = 0;\n\n        while(byte != '\\n'){ \n            if(read(fd,&amp;byte,1)!=1) \n                return -1;\n            lenght++;\n        }\n    }\n\n    lseek(fd,lenght*-1,SEEK_CUR);\n\n    printf(\"[DEBUG] found a %d byte note for user id %d\\n\",lenght,note_uid);\n    return lenght;\n}\n\nint search_note(char *note, char *keyword){\n    int i,keyword_lenght,match=0;\n\n    keyword_lenght = strlen(keyword);\n\n    if(keyword_lenght == 0)\n        return 1;\n\n    for(i=0;i &lt; strlen(note);i++){\n        if(note[i] == keyword[match])\n            match++;\n        else{\n            if(note[i] == keyword[0])\n                match = 1;\n            else\n                match = 0;\n        }\n        if(match == keyword_lenght)\n            return 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "gcc", "constants"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1469627336, "post_id": 38614727, "comment_id": 64615900, "body": "Interesting question. I doubt it is possible. But smells like XY-problem to me."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1469627878, "post_id": 38614727, "comment_id": 64616324, "body": "If you want to use the character in a case label, you&#39;ll need an <a href=\"http://port70.net/~nsz/c/c99/n1256.html#6.6\" rel=\"nofollow noreferrer\">integer constant expression</a>."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1469628074, "post_id": 38614727, "comment_id": 64616472, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14069737/switch-case-error-case-label-does-not-reduce-to-an-integer-constant\">switch case: error: case label does not reduce to an integer constant</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469628149, "post_id": 38614727, "comment_id": 64616533, "body": "Just use <code>if-else if-else</code> way. You can write a fancy macro to wrap it into a <code>switch</code>-like structure if you really want."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "reply_to_user": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 1, "creation_date": 1469628349, "post_id": 38614727, "comment_id": 64616667, "body": "@jweyrich This question is not a duplicate of that one. OP is aware of the problem discussed there and seeks for a workaround in the particular case described in this question."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1469628953, "post_id": 38614727, "comment_id": 64617122, "body": "@Hans: Why would you want to use a <code>switch-case</code> when it&#39;s always going to match  the same case? Can you show us an example?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 1, "creation_date": 1469629099, "post_id": 38614727, "comment_id": 64617260, "body": "@jweyrich Why is that? He might have <code>MY_STRING</code> to contain an alphabet or whatever, and test the expression against different letters of it. But yeah, the intended use would be interesting to see."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1469631401, "post_id": 38614727, "comment_id": 64619137, "body": "According to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.0.2/cpp_3.html#SEC17\" rel=\"nofollow noreferrer\">gcc 3.0.2 documentation</a>: <i>&quot;There is no way to convert a macro argument into a character constant.&quot;</i>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1469634264, "post_id": 38614727, "comment_id": 64621156, "body": "According to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.1.0/cpp/Stringification.html#Stringification\" rel=\"nofollow noreferrer\">gcc 6.1.0 documentation</a>: <i>&quot;There is no way to convert a macro argument into a character constant.&quot;</i>"}, {"owner": {"reputation": 61, "user_id": 4727067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d98a16d843afcff04cd8f7d16374939?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/4727067/hans"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1469649460, "post_id": 38614727, "comment_id": 64629864, "body": "@pmg I think you have the final answer, It is impossible to extract a character constant from a constant string."}, {"owner": {"reputation": 1039, "user_id": 1722117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Mw4zy.jpg?s=128&g=1", "display_name": "Arnaud Ali&#232;s", "link": "https://stackoverflow.com/users/1722117/arnaud-ali%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1471333999, "post_id": 38614727, "comment_id": 65292678, "body": "seems like you are trying to do micro/premature optimisations, keep in mind you wont even be able to see the difference (with most tools) on such &quot;optimisations&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1469627614, "post_id": 38614925, "comment_id": 64616110, "body": "Can it be used in a <code>switch</code> statement? People, read the question before answering!"}], "tags": [], "owner": {"reputation": 3, "user_id": 6638798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9488853d93220bae3f3c3fb7dabd3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill Saidov", "link": "https://stackoverflow.com/users/6638798/kirill-saidov"}, "is_accepted": false, "score": -4, "last_activity_date": 1469628402, "last_edit_date": 1469628402, "creation_date": 1469627519, "answer_id": 38614925, "question_id": 38614727, "link": "https://stackoverflow.com/questions/38614727/how-can-i-automatically-get-the-first-character-of-a-constant-string-as-a-consta/38614925#38614925", "title": "How can I automatically get the first character of a constant string as a constant character?", "body": "<pre><code>#define MY_STRING \"Hello\"\n\nconst char var[] = MY_STRING;\n\nswitch(var[0]) {\n    case 'H':\n    break;\n    case 'A':\n    break;\n}\n</code></pre>\n\n<p>This should solve it.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 4727067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d98a16d843afcff04cd8f7d16374939?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/4727067/hans"}, "edited": false, "score": 0, "creation_date": 1469652545, "post_id": 38617975, "comment_id": 64631413, "body": "Oooops, I saw this after I added my similar but uglier example to the original post. Your solution is more elegant."}, {"owner": {"reputation": 61, "user_id": 4727067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d98a16d843afcff04cd8f7d16374939?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/4727067/hans"}, "edited": false, "score": 2, "creation_date": 1469653666, "post_id": 38617975, "comment_id": 64631953, "body": "My ugly solution didn&#39;t specify the string length explicitly, but it seems that the constant &#39;5&#39; can be removed also from your code."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 3, "last_activity_date": 1469702451, "last_edit_date": 1469702451, "creation_date": 1469635157, "answer_id": 38617975, "question_id": 38614727, "link": "https://stackoverflow.com/questions/38614727/how-can-i-automatically-get-the-first-character-of-a-constant-string-as-a-consta/38617975#38617975", "title": "How can I automatically get the first character of a constant string as a constant character?", "body": "<p>You can do that with writing each symbol once ... but on different definitions</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define COMMAND_LIST_FIRST_CHAR   'l'\n#define COMMAND_LIST              (char[]){ COMMAND_LIST_FIRST_CHAR, 'i', 's', 't', 0 }\n\nint main(void) {\n    char received_command_string[] = \"list\";\n    switch (received_command_string[0]) {\n        case COMMAND_LIST_FIRST_CHAR:\n            printf(\"Doing the \\\"list\\\" stuff for '%s'\\n\", COMMAND_LIST);\n            break;\n        default:\n            break;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 1, "creation_date": 1469642800, "post_id": 38618233, "comment_id": 64626153, "body": "This code lacks the sought efficiency compared to the <code>switch</code>-based approach which would work in O(1) time. Whether the performance of that code really matters that much, only OP can tell."}, {"owner": {"reputation": 5249, "user_id": 2622924, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f9f68788b6306c3089134242c690748?s=128&d=identicon&r=PG", "display_name": "greydet", "link": "https://stackoverflow.com/users/2622924/greydet"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1469697582, "post_id": 38618233, "comment_id": 64647831, "body": "@Leon I don&#39;t agree with your statement. From a performance point of view, you have to take compiler optimizations into account. With the above code, any modern compiler configured for performance optimizations would perform loop unrolling that will make the resulting binary code almost the same as a simple switch/case. It is very often a bad idea to sacrifice code readability to make early optimizations that the compiler could do better than you."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1469697817, "post_id": 38618233, "comment_id": 64648015, "body": "Loop unrolling can&#39;t achieve performance of constant time lookup through a table. What about readability vs performance, I concur with you, and my first comment contains an indication of that."}, {"owner": {"reputation": 61, "user_id": 4727067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d98a16d843afcff04cd8f7d16374939?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/4727067/hans"}, "edited": false, "score": 0, "creation_date": 1469806527, "post_id": 38618233, "comment_id": 64706064, "body": "@greydet I think you assume that the switch-case construct will compile to the same code as a series of if-else statements. The compiler is allowed to generate such code, but the intention with the switch-case construct is that it should be possible for the compiler to use a lookup table, which is much faster if there are many cases. This is why every case expression must calculate into an &quot;integer constant expression&quot; at compile time. It seems impossible to extract such a constant from a character in a constant string. I see it as a limitation of the preprocessor."}], "tags": [], "owner": {"reputation": 5249, "user_id": 2622924, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f9f68788b6306c3089134242c690748?s=128&d=identicon&r=PG", "display_name": "greydet", "link": "https://stackoverflow.com/users/2622924/greydet"}, "is_accepted": false, "score": 1, "last_activity_date": 1469635906, "creation_date": 1469635906, "answer_id": 38618233, "question_id": 38614727, "link": "https://stackoverflow.com/questions/38614727/how-can-i-automatically-get-the-first-character-of-a-constant-string-as-a-consta/38618233#38618233", "title": "How can I automatically get the first character of a constant string as a constant character?", "body": "<p>Why do you absolutely want to use a switch case? </p>\n\n<p>Instead you could use a mapping table that match your string and the handling function. Then you simply have to iterate over the table.</p>\n\n<pre><code>typedef struct {\n    char * key;\n    void (func*)(void);\n} MAP_ENTRY;\n\nMAP_ENTRY map [] = {\n    {\"list\", listHandler},\n    {\"change\", changeHandler},\n    {\"exit\", exitHandler},\n};\n\nfor (i = 0; i &lt; sizeof(map)/sizeof(map[0]); i++) {\n    if (map[i].key[0] == received_command_string[0]) {\n        map[i].func();\n        break;\n    }\n}\n</code></pre>\n\n<p>Then you just have to move the processing code from your switch/case into the corresponding handler function</p>\n"}], "owner": {"reputation": 61, "user_id": 4727067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d98a16d843afcff04cd8f7d16374939?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/4727067/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1471322632, "creation_date": 1469627052, "last_edit_date": 1471322632, "question_id": 38614727, "link": "https://stackoverflow.com/questions/38614727/how-can-i-automatically-get-the-first-character-of-a-constant-string-as-a-consta", "title": "How can I automatically get the first character of a constant string as a constant character?", "body": "<p>Is it possible to rewrite following so I only have to change in one place if the string changes?</p>\n\n<pre><code>#define MY_STRING \"Foo bar\"\n#define MY_STRING_FIRST_CHAR 'F'\n</code></pre>\n\n<p>The following is not acceptable since it refers to a char in a memory location, so it can't be used as a case in a <code>switch</code> statement:</p>\n\n<pre><code>#define MY_STRING_FIRST_CHAR MY_STRING[0]\n\nswitch (something) {\n    case MY_STRING_FIRST_CHAR:\n        break;\n}\n</code></pre>\n\n<p>The purpose is to efficiently parse a received string by looking at one character. In my case all strings have one unique character. The following is not my actual code, but a very simple example to show the principle:</p>\n\n<pre><code>#define COMMAND_LIST              \"list\"\n#define COMMAND_LIST_FIRST_CHAR   'l'\n#define COMMAND_CHANGE            \"change\"\n#define COMMAND_CHANGE_FIRST_CHAR 'c'\n#define COMMAND_EXIT              \"exit\"\n#define COMMAND_EXIT_FIRST_CHAR   'e'\n\nswitch(received_command_string[0]){\n  case COMMAND_LIST_FIRST_CHAR:\n    // Do the \"list\" stuff\n    break;\n  case COMMAND_CHANGE_FIRST_CHAR:\n    // Do the \"change\" stuff\n    break;\n  case COMMAND_EXIT_FIRST_CHAR:\n    // Do the \"exit\" stuff\n    break;\n}\n</code></pre>\n\n<p>User \"pmg\" found this in the gcc documentation:\n\"There is no way to convert a macro argument into a character constant.\"</p>\n\n<p>I wanted the definitions to be in an include file that can be shared by several source files. This is as close as I can get while only have every character defined in one place:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define CH0 'F'\n#define CH1 'o'\n#define CH2 'o'\n#define CH3 ' '\n#define CH4 'b'\n#define CH5 'a'\n#define CH6 'r'\nstatic char MY_STRING[] = { CH0, CH1, CH2, CH3, CH4, CH5, CH6, '\\0'};\n#define MY_STRING_FIRST_CHAR CH0\n\nvoid main(void){\n  printf(\"The string is %s, the first char is %c\\n\", MY_STRING, MY_STRING_FIRST_CHAR);\n}\n</code></pre>\n\n<p>I will not do it that way. The original question was if it is possible to share one definition to get both a string constant and a character constant. By wasting clock cycles at run-time there are several solutions to my problem.</p>\n"}, {"tags": ["c++", "c", "parsing", "astyle"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469625903, "post_id": 38614248, "comment_id": 64614831, "body": "Maybe clang-format can do this?"}, {"owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469626138, "post_id": 38614248, "comment_id": 64615010, "body": "@EOF maybe it can, but I&#39;d prefer to stick with Astyle, if possible. Our program is quite large already even without other packages."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 6494569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a3570cf34be544d5471ad582d850f7?s=128&d=identicon&r=PG&f=1", "display_name": "mikr", "link": "https://stackoverflow.com/users/6494569/mikr"}, "is_accepted": true, "score": 0, "last_activity_date": 1469631632, "creation_date": 1469631632, "answer_id": 38616660, "question_id": 38614248, "link": "https://stackoverflow.com/questions/38614248/astyle-how-to-format-condition-without-braces-to-1tbs/38616660#38616660", "title": "Astyle - how to format condition without braces to 1TBS", "body": "<p>This may seem a bit convoluted but if you have a lot of sources\nand adding braces is an operation that you just need once,\nthe following scheme might work.</p>\n\n<p>You can stick with astyle but you need <a href=\"https://github.com/uncrustify/uncrustify\" rel=\"nofollow\">uncrustify</a> temporarily\nas well as a script I wrote called <a href=\"https://github.com/mikr/whatstyle\" rel=\"nofollow\">whatstyle</a>.</p>\n\n<p>In the following steps replace <code>test1.c</code> with your sources and keep a backup\nof your sources as they will be modified.</p>\n\n<h1>Teach astyle the current style of your sources</h1>\n\n<pre><code>whatstyle.py -f astyle --mode resilient --output astylerc test1.c\n</code></pre>\n\n<h1>Teach uncrustify the current style of your sources</h1>\n\n<pre><code>whatstyle.py -f uncrustify --output uncrustify.cfg test1.c\n</code></pre>\n\n<h1>Tell uncrustify to always add braces to ifs</h1>\n\n<pre><code>( egrep -v mod_full_brace_if &lt; uncrustify.cfg ; echo \"mod_full_brace_if = force\" ) \\\n  &gt; uncrustify_addbrace.cfg\n</code></pre>\n\n<h1>Reformat your sources with as little style changes as possible with uncrustify</h1>\n\n<pre><code>uncrustify --replace -c uncrustify_addbrace.cfg test1.c\n</code></pre>\n\n<h1>The braces have been added now retransform into the original style with astyle.</h1>\n\n<pre><code>ARTISTIC_STYLE_OPTIONS=astylerc astyle test1.c\n</code></pre>\n\n<p>Now your sources should look almost the same as before except for the added braces\nalthough there might be more changes by the back-and-forth style transformation.</p>\n"}], "owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 38616660, "answer_count": 1, "score": 1, "last_activity_date": 1469631632, "creation_date": 1469625788, "question_id": 38614248, "link": "https://stackoverflow.com/questions/38614248/astyle-how-to-format-condition-without-braces-to-1tbs", "title": "Astyle - how to format condition without braces to 1TBS", "body": "<p>I have a program which uses Astyle to format the code into 1TBS. So, if I have a code like this</p>\n\n<pre><code>if(condition)\n    func(a, b);\n</code></pre>\n\n<p>it changes to this</p>\n\n<pre><code>if(condition) {\n    func(a, b);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>The problem</strong> is, when parameters in the called function are broken into multiple lines, like this:</p>\n\n<pre><code>if(condition)\n    func(a, \n         b);\n</code></pre>\n\n<p>Then Astyle is not able to add braces even if I try to force him with <code>--add-brackets</code>. Is it possible to do it some other way?</p>\n\n<p>My command now looks like this:</p>\n\n<pre><code>astyle --style=1tbs --add-brackets  test.c\n</code></pre>\n"}, {"tags": ["mysql", "c", "linux", "udf"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 3926072, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/527177476/picture?type=large", "display_name": "Charles-Ugo Brouillard", "link": "https://stackoverflow.com/users/3926072/charles-ugo-brouillard"}, "is_accepted": false, "score": 1, "last_activity_date": 1469637397, "creation_date": 1469637397, "answer_id": 38618689, "question_id": 38613708, "link": "https://stackoverflow.com/questions/38613708/mysql-udf-return-int-instead-of-string/38618689#38618689", "title": "mysql UDF return INT instead of STRING", "body": "<p>In case anyone is interested, a quick \"patch\" is to cast to string :</p>\n\n<pre><code>SELECT CAST(PHPParse(`serialized_infos`, '22')  AS CHAR CHARACTER SET utf8) as date1 FROM invoices \n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 3926072, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/527177476/picture?type=large", "display_name": "Charles-Ugo Brouillard", "link": "https://stackoverflow.com/users/3926072/charles-ugo-brouillard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469637397, "creation_date": 1469624390, "question_id": 38613708, "link": "https://stackoverflow.com/questions/38613708/mysql-udf-return-int-instead-of-string", "title": "mysql UDF return INT instead of STRING", "body": "<p>I am having a problem using a User Defined Function in mysql 5.7.13 (Linux) :</p>\n\n<p>This function is defined in mysql using :</p>\n\n<pre><code>CREATE FUNCTION PHPParse RETURNS STRING SONAME 'php_parser.so'\n</code></pre>\n\n<p>The C (&amp; C++) file are the following :</p>\n\n<pre><code>my_bool PHPParse_init(UDF_INIT *initid, UDF_ARGS *args, char *message);\nvoid PHPParse_deinit(UDF_INIT *initid);\nchar* PHPParse(UDF_INIT *initid, UDF_ARGS *args, char *result, unsigned long *length, char *is_null, char *error);\n\n\nmy_bool PHPParse_init(UDF_INIT *initid, UDF_ARGS *args, char *message)\n{\n  initid-&gt;maybe_null = 1;\n  if (args-&gt;arg_count != 2 || args-&gt;arg_type[0] != STRING_RESULT || args-&gt;arg_type[1] != STRING_RESULT)\n  {\n    strcpy(message,\"PHPParse (p_field_name, p_php_parser_string)\");\n    return 1;\n  }\n  initid-&gt;max_length=256;\n  return 0;\n}\n\n\nchar* PHPParse(UDF_INIT *initid MY_ATTRIBUTE((unused)), UDF_ARGS *args, char *result, unsigned long *length,char *is_null, char *error MY_ATTRIBUTE((unused)))\n{\n    *is_null = 0;\n    memcpy(result,\"begginning\",10);\n    *length= (unsigned long)(10);\n    return result;\n}\n</code></pre>\n\n<p>If I use the following SQL Query :</p>\n\n<pre><code>SELECT PHPParse('hello','222') as `date` FROM invoices ;\n</code></pre>\n\n<p>I get this result :</p>\n\n<pre><code>date:\n62656767696e6e696e67\n62656767696e6e696e67\n62656767696e6e696e67\n62656767696e6e696e67\netc...\n</code></pre>\n\n<p>While it would be supposed to return \n    begginning</p>\n\n<p>Where am i wrong ?</p>\n\n<p>P.S\nCompile command :</p>\n\n<pre><code>g++  -std=c++11 -fPIC  -shared -I/usr/include/mysql -o /usr/lib64/mysql/plugin/php_parser.so  include/PHPSerializedDataLoader.cpp PHPParse.cc\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 964, "user_id": 1508798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4dd134924379f58de8559cdf19dc24c6?s=128&d=identicon&r=PG", "display_name": "jcxz", "link": "https://stackoverflow.com/users/1508798/jcxz"}, "edited": false, "score": 1, "creation_date": 1469629519, "post_id": 38613419, "comment_id": 64617602, "body": "What do you mean with checking may be done in additional test code ? Do you want to have control over placing the assertion in your code ? Otherwise you could just define a function (similar to what @Dutow suggested) combined with your static assert implementation for each new struct that you want to have compile time checked."}, {"owner": {"reputation": 2346, "user_id": 2056545, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c802f6f0c6ca5e775a808ff6c4567410?s=128&d=identicon&r=PG", "display_name": "michael_s", "link": "https://stackoverflow.com/users/2056545/michael-s"}, "reply_to_user": {"reputation": 964, "user_id": 1508798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4dd134924379f58de8559cdf19dc24c6?s=128&d=identicon&r=PG", "display_name": "jcxz", "link": "https://stackoverflow.com/users/1508798/jcxz"}, "edited": false, "score": 0, "creation_date": 1469637821, "post_id": 38613419, "comment_id": 64623315, "body": "&quot;checking may be done in additional test code&quot; just means, that the check (also static assert) may be done in additional c or cpp files that are not part of the released code base or the actual product (e.g. using additional compiler flags or something that should not be part of the actual release)"}], "answers": [{"comments": [{"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 0, "creation_date": 1469624096, "post_id": 38613420, "comment_id": 64613347, "body": "You can avoid the namespace by using a nested struct."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 0, "creation_date": 1469624660, "post_id": 38613420, "comment_id": 64613832, "body": "@Dutow which doesn&#39;t help with C compatibility, because structs don&#39;t have a scope in C"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1469631418, "post_id": 38613420, "comment_id": 64619153, "body": "Alternatively, <code>#define uneven packed_uneven #include &quot;MyData.h&quot; #undef uneven</code>."}], "tags": [], "owner": {"reputation": 2346, "user_id": 2056545, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c802f6f0c6ca5e775a808ff6c4567410?s=128&d=identicon&r=PG", "display_name": "michael_s", "link": "https://stackoverflow.com/users/2056545/michael-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1469623619, "creation_date": 1469623619, "answer_id": 38613420, "question_id": 38613419, "link": "https://stackoverflow.com/questions/38613419/check-in-c-that-a-struct-is-well-aligned-or-contains-gaps/38613420#38613420", "title": "Check in C++ that a struct is well aligned or contains gaps", "body": "<p>I found one (somehow nasty and very tricky) solution for the problem that only works with C++, not C.</p>\n\n<pre><code>#define StaticAssert(cond, msg) switch(0){case 0:case cond:;}\n\n#pragma pack(push, 1)\nnamespace packed\n{\n#include \"MyData.h\"\n}\n#pragma pack(pop)\n\n#undef MYDATA_H_ // force re-including \"MyData.h\"\n#include \"MyData.h\"\n\nvoid checkSizes()\n{\n  StaticAssert(sizeof(packed::uneven) == sizeof(uneven), \"uneven contains gaps\");\n}\n</code></pre>\n\n<p>This <code>StaticAssert</code>macro fails for the given uneven struct data - as the packed version's size is of 7 bytes and the unpacked (normal) version is 8 bytes. If an additional <code>char</code>is added at the end of the struct the test succeeds - both versions have 8 bytes then.</p>\n"}, {"comments": [{"owner": {"reputation": 2346, "user_id": 2056545, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c802f6f0c6ca5e775a808ff6c4567410?s=128&d=identicon&r=PG", "display_name": "michael_s", "link": "https://stackoverflow.com/users/2056545/michael-s"}, "edited": false, "score": 0, "creation_date": 1469626565, "post_id": 38613971, "comment_id": 64615332, "body": "this is great - and so much easier! :) - unfortunately it is gcc specific. Instead of -Wpadded directly in the makefile (to prevent checking of system includes) I would use     <code>#pragma GCC diagnostic push</code>      <code>#pragma GCC diagnostic error &quot;-Wpadded&quot;</code>      .... code with structs      <code>#pragma GCC diagnostic pop</code>"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1469625045, "creation_date": 1469625045, "answer_id": 38613971, "question_id": 38613419, "link": "https://stackoverflow.com/questions/38613419/check-in-c-that-a-struct-is-well-aligned-or-contains-gaps/38613971#38613971", "title": "Check in C++ that a struct is well aligned or contains gaps", "body": "<p>A compiler specific solution that works for both C and C++: GCC has a warning option <code>-Wpadded</code>, that produces a warning for every definition that change size due to alignment.</p>\n"}, {"comments": [{"owner": {"reputation": 2346, "user_id": 2056545, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c802f6f0c6ca5e775a808ff6c4567410?s=128&d=identicon&r=PG", "display_name": "michael_s", "link": "https://stackoverflow.com/users/2056545/michael-s"}, "edited": false, "score": 0, "creation_date": 1469639843, "post_id": 38614168, "comment_id": 64624472, "body": "I adapted the solution from Dutow to match my example code - I think this is quite the hack, but I&#39;d go with this common solution if it wasn&#39;t for the compiler warning -Wpadded (see <a href=\"http://stackoverflow.com/a/38613971/2056545\">link</a>)"}], "tags": [], "owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "is_accepted": true, "score": 4, "last_activity_date": 1469639668, "last_edit_date": 1469639668, "creation_date": 1469625553, "answer_id": 38614168, "question_id": 38613419, "link": "https://stackoverflow.com/questions/38613419/check-in-c-that-a-struct-is-well-aligned-or-contains-gaps/38614168#38614168", "title": "Check in C++ that a struct is well aligned or contains gaps", "body": "<p>You could use a function instead of a namespace (<a href=\"https://ideone.com/bPyGMq\" rel=\"nofollow\">on ideone</a>):</p>\n\n<p>This solution also works in C</p>\n\n<p>Header File:</p>\n\n<pre><code>typedef struct\n{\n  int bla_u32;\n  short bla_u16;\n  char bla_u8;\n\n  /* &lt;-- this gap will be filled in the unpacked version */\n}  uneven;\n</code></pre>\n\n<p>Source File:</p>\n\n<pre><code>#include \"MyData.h\"\n\n#define StaticAssert(cond, msg) switch(0){case 0:case cond:;}\n\nvoid checkSizes()\n{\n  uneven unpacked_uneven;\n#pragma pack(push, 1)\n  #undef MYDATA_H_ // force re-including \"MyData.h\"\n  #include \"MyData.h\"\n#pragma pack(pop)\n  uneven packed_uneven;\n  StaticAssert(sizeof(unpacked_uneven) == sizeof(packed_uneven), \"uneven contains gaps\");\n}\n</code></pre>\n\n<p>You can place your <code>StaticAssert</code> into the function for a compile time error.</p>\n"}], "owner": {"reputation": 2346, "user_id": 2056545, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c802f6f0c6ca5e775a808ff6c4567410?s=128&d=identicon&r=PG", "display_name": "michael_s", "link": "https://stackoverflow.com/users/2056545/michael-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 1, "accepted_answer_id": 38614168, "answer_count": 3, "score": 13, "last_activity_date": 1469639668, "creation_date": 1469623619, "question_id": 38613419, "link": "https://stackoverflow.com/questions/38613419/check-in-c-that-a-struct-is-well-aligned-or-contains-gaps", "title": "Check in C++ that a struct is well aligned or contains gaps", "body": "<p>I have a problem that a struct shall be checked - at compile time - if it is well aligned or if it contains gaps.\nThe checking may be done in additional test code, but I don't want \"packed\" data in the real implementation code.</p>\n\n<p>This is an example header file (MyData.h) with the typical include guards:</p>\n\n<pre><code>#ifndef MYDATA_H_\n#define MYDATA_H_\n\nstruct uneven\n{\n  int bla_u32;\n  short bla_u16;\n  char bla_u8;\n  /* &lt;-- this gap will be filled in the unpacked version */\n};\n\n#endif // MYDATA_H\n</code></pre>\n\n<p>I found one possible solution - see below.</p>\n\n<p><strong>Questions:</strong></p>\n\n<ul>\n<li><p>Is there an elegant way to check if the struct <code>uneven</code> contains a different number of bytes compared to its unpacked counterpart at <em>compile time</em>? </p></li>\n<li><p>Is there maybe even a solution that will work in C (without using a namespace)?</p></li>\n</ul>\n"}, {"tags": ["c", "linux", "bluetooth", "bluetooth-lowenergy"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6644672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e1bfe9150e32e38856bfe42fb3142a?s=128&d=identicon&r=PG&f=1", "display_name": "HallMark", "link": "https://stackoverflow.com/users/6644672/hallmark"}, "edited": false, "score": 0, "creation_date": 1469698386, "post_id": 38616176, "comment_id": 64648449, "body": "Basically I want my bluetooth in listen mode always so any mobile application can see it in it&#39;s list and using mobile application it gets connect/pair with RPi and then it press any button on mobile application and it will Turn ON and OFF Relay/Fan/Light."}, {"owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "reply_to_user": {"reputation": 103, "user_id": 6644672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e1bfe9150e32e38856bfe42fb3142a?s=128&d=identicon&r=PG&f=1", "display_name": "HallMark", "link": "https://stackoverflow.com/users/6644672/hallmark"}, "edited": false, "score": 0, "creation_date": 1469699660, "post_id": 38616176, "comment_id": 64649353, "body": "Well, I don&#39;t really know anything about Bluetooth on Android/iOS, but the part on your RPi will have to be like I described. Activate the right link mode, activate LE advertising, open a L2CAP socket and wait for the connection from the kernel."}, {"owner": {"reputation": 103, "user_id": 6644672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e1bfe9150e32e38856bfe42fb3142a?s=128&d=identicon&r=PG&f=1", "display_name": "HallMark", "link": "https://stackoverflow.com/users/6644672/hallmark"}, "edited": false, "score": 0, "creation_date": 1469870875, "post_id": 38616176, "comment_id": 64724961, "body": "Ok, I think that should workout. Let me try to get if any library for the same is available then it would be more reliable communication."}], "tags": [], "owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1469634721, "last_edit_date": 1469634721, "creation_date": 1469630478, "answer_id": 38616176, "question_id": 38613207, "link": "https://stackoverflow.com/questions/38613207/ble-bridge-mode-in-linux-example/38616176#38616176", "title": "BLE Bridge Mode in Linux example", "body": "<p>You can set the name of your device like this:</p>\n\n<pre><code>hciconfig name \"foo\"\n</code></pre>\n\n<p>and check your name with:</p>\n\n<pre><code>hciconfig name\n</code></pre>\n\n<p>You also have to enable Low Energy advertising for your device to be found by others:</p>\n\n<pre><code>hciconfig leadv\n</code></pre>\n\n<p>You can configure your device to accept incoming connections like this (lm for link mode):</p>\n\n<pre><code>hciconfig lm MASTER,ACCEPT\n</code></pre>\n\n<p>This way the kernel will accept a connection, even if there are no listening sockets.</p>\n\n<p>Considering you want to do actual communication, you would need to write a program, accepting the connection and sending/receiving data. Just putting your device in a mode where other devices can connect to it isn't really worth anything (because you can't communicate).</p>\n\n<p>The basic principle is to open up an L2CAP socket, with the Channel ID of 4 (for Low Energy), then do standard bind/listen/accept. I suggest you look at the source code of Bluez and the examples.</p>\n"}], "owner": {"reputation": 103, "user_id": 6644672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e1bfe9150e32e38856bfe42fb3142a?s=128&d=identicon&r=PG&f=1", "display_name": "HallMark", "link": "https://stackoverflow.com/users/6644672/hallmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469778418, "creation_date": 1469623060, "last_edit_date": 1469778418, "question_id": 38613207, "link": "https://stackoverflow.com/questions/38613207/ble-bridge-mode-in-linux-example", "title": "BLE Bridge Mode in Linux example", "body": "<p>I want to use Bluetooth(4.0) on my board to transmit it's Name so any Mobile Application can see it's name and Mobile application initiates the pairing and connection with my Bluetooth.</p>\n\n<p>I have seen some examples of Bluetooth(4.0) scanning nearby devices; For example:- It does scan for Bluetooth Mouser/Keyboard, but in this case Bluetooth(4.0) is in mode where it chooses the device it want to connect while I want it reverse so Any mobile application can see my Bluetooth and gets connect with it and does communication.</p>\n\n<p>How can I put my Bluetooth(4.0) in such mode in Linux? Is there any C library using which I can put Bluetooth(4.0) is the mode where it goes in Bridge mode instead of scanning nearby devices?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1469620432, "post_id": 38612115, "comment_id": 64610608, "body": "Please indent your code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469620937, "post_id": 38612115, "comment_id": 64610951, "body": "Don&#39;t cast a null pointer constant like represented by the <code>NULL</code> macro."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 6, "last_activity_date": 1505341077, "last_edit_date": 1505341077, "creation_date": 1469620371, "answer_id": 38612199, "question_id": 38612115, "link": "https://stackoverflow.com/questions/38612115/uncertainty-in-a-program-using-struct-and-pointer-c-language-program/38612199#38612199", "title": "Uncertainty in a program using Struct and pointer (C language program)", "body": "<p>Although the cast in this line</p>\n\n<pre><code>WFC_STRUCT *ptr = (WFC_STRUCT*) NULL;\n</code></pre>\n\n<p>is useless, the actual problem is in the next line:</p>\n\n<pre><code>ptr-&gt;a=10; /* This is equivalent to: (*ptr).a=10; */\n</code></pre>\n\n<p>where, you dereference a NULL pointer. It's <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behaviour</em></a>. Basically, <code>ptr</code> should be pointing at valid/writable memory location. But in your code, it isn't.</p>\n"}, {"comments": [{"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1469620684, "post_id": 38612222, "comment_id": 64610784, "body": "why not <code>malloc(sizeof(WFC_STRUCT))</code> ?"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1469621032, "post_id": 38612222, "comment_id": 64611009, "body": "@artm <code>malloc(sizeof *ptr)</code> is binding in nature.. You don&#39;t have to count the stars when having  <code>pointer to pointer</code> and so. So less chance of error.."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1469621331, "post_id": 38612222, "comment_id": 64611239, "body": "I always use <code>sizeof(struct)</code>, but you are probably correct too"}, {"owner": {"reputation": 381, "user_id": 5654696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATr2W.jpg?s=128&g=1", "display_name": "Canatto Filipe", "link": "https://stackoverflow.com/users/5654696/canatto-filipe"}, "edited": false, "score": 1, "creation_date": 1469621480, "post_id": 38612222, "comment_id": 64611338, "body": "@sjsam Thanks for explanation."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1469621762, "post_id": 38612222, "comment_id": 64611565, "body": "@artm : Kindly check <a href=\"http://stackoverflow.com/a/605858/1620779\">&#91; this &#93;</a> which gives a nice explanation."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 1, "creation_date": 1469621932, "post_id": 38612222, "comment_id": 64611682, "body": "@sjsam I remember not to cast, but didn&#39;t notice the <code>sizeof(*pointer)</code> style ;) cheers"}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": true, "score": 2, "last_activity_date": 1469622550, "last_edit_date": 1495540025, "creation_date": 1469620437, "answer_id": 38612222, "question_id": 38612115, "link": "https://stackoverflow.com/questions/38612115/uncertainty-in-a-program-using-struct-and-pointer-c-language-program/38612222#38612222", "title": "Uncertainty in a program using Struct and pointer (C language program)", "body": "<pre><code>WFC_STRUCT *ptr = (WFC_STRUCT*) NULL; // cast is unnessesary\n//moreover you have no memory alloacted\n\nWFC_STRUCT *ptr = malloc(sizeof *ptr); // allocates memory, if this is done\n//then you can do below\nptr-&gt;a=10;\n</code></pre>\n\n<hr>\n\n<p><sup>Do check <a href=\"https://stackoverflow.com/a/605858/1620779\">[ this ]</a> answer on how to use pointers</sup></p>\n"}, {"comments": [{"owner": {"reputation": 381, "user_id": 5654696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATr2W.jpg?s=128&g=1", "display_name": "Canatto Filipe", "link": "https://stackoverflow.com/users/5654696/canatto-filipe"}, "edited": false, "score": 0, "creation_date": 1469621502, "post_id": 38612243, "comment_id": 64611352, "body": "Thanks for explanation."}], "tags": [], "owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "is_accepted": false, "score": 0, "last_activity_date": 1469620831, "last_edit_date": 1469620831, "creation_date": 1469620511, "answer_id": 38612243, "question_id": 38612115, "link": "https://stackoverflow.com/questions/38612115/uncertainty-in-a-program-using-struct-and-pointer-c-language-program/38612243#38612243", "title": "Uncertainty in a program using Struct and pointer (C language program)", "body": "<p><code>WFC_STRUCT *ptr = (WFC_STRUCT*) NULL;</code>  is simply assigning address 0 (which is value of <code>NULL</code>) to <code>ptr</code>.  It is common practice to assign <code>NULL</code> to a newly created pointer.</p>\n\n<p>Now, accessing values using a pointer which points to <code>0th</code> address is not allowed on most operating systems, hence the program is breaking.</p>\n\n<p>If you really want to assign value to <code>ptr-&gt;a</code> then <code>ptr</code> should point to proper memory location.</p>\n\n<pre><code>WFC_STRUCT *ptr = (WFC_STRUCT*) malloc(sizeof(WFC_STRUCT));\nptr-&gt;a = 10;\nfree(ptr); // remember to free the allocated memory\nptr = NULL;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 1, "last_activity_date": 1469622044, "creation_date": 1469622044, "answer_id": 38612803, "question_id": 38612115, "link": "https://stackoverflow.com/questions/38612115/uncertainty-in-a-program-using-struct-and-pointer-c-language-program/38612803#38612803", "title": "Uncertainty in a program using Struct and pointer (C language program)", "body": "<p>A <code>pointer</code> is a variable that holds the location of, literally the address-of, a variable stored in computer memory. Dereferencing a pointer means getting the value stored in the memory at the address which the pointer \u201cpoints\u201d to.</p>\n\n<p>So, to access structure individual members using a pointer to that structure, your pointer variable should point to some valid memory address at which memory is allocated to a structure variable. </p>\n\n<p>But <code>ptr</code> pointer to structure <code>WFC_STRUCT</code> in your program doesn't point to a valid structure variable of type <code>WFC_STRUCT</code> in the valid memory address space. So, there is no point to access structure variable using <code>ptr</code>.</p>\n\n<p>Also, <code>WFC_STRUCT *ptr = (WFC_STRUCT*) NULL</code> cast is unnessesary. </p>\n\n<p>If you want to access a structure variable using pointer, you can do this in two ways:</p>\n\n<pre><code>WFC_STRUCT *ptr = malloc(sizeof(WFC_STRUCT));\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>WFC_STRUCT *ptr;\nWFC_STRUCT var;\n\nptr = &amp;var;\nptr-&gt;a = 20;\n</code></pre>\n\n<p>Remenber, if you allocate some memory space using <code>malloc</code> function call, you need to call <code>free</code> function to deallocate the memory space when it is not needed anymore. However, in the second method, as variables are created over stack, all the <code>automatic</code> variable will be destroyed as function returns.</p>\n"}], "owner": {"reputation": 381, "user_id": 5654696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATr2W.jpg?s=128&g=1", "display_name": "Canatto Filipe", "link": "https://stackoverflow.com/users/5654696/canatto-filipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1470558352, "accepted_answer_id": 38612222, "answer_count": 4, "score": 0, "last_activity_date": 1505341077, "creation_date": 1469620096, "last_edit_date": 1469621622, "question_id": 38612115, "link": "https://stackoverflow.com/questions/38612115/uncertainty-in-a-program-using-struct-and-pointer-c-language-program", "closed_reason": "Needs details or clarity", "title": "Uncertainty in a program using Struct and pointer (C language program)", "body": "<p>Consider the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n\ntypedef struct WFC_STRUCT {\nint a;\nint b;\n} WFC_STRUCT;\n\nWFC_STRUCT *ptr = (WFC_STRUCT*) NULL;\n\nptr-&gt;a=10;\n\n\nreturn(0);\n\n}\n</code></pre>\n\n<p>I would like to understand what is happening at instruction:</p>\n\n<pre><code>WFC_STRUCT *ptr = (WFC_STRUCT*) NULL;\n</code></pre>\n\n<p>Why the program is breaking? In what cases the instruction above is used?.</p>\n"}, {"tags": ["c", "arm", "embedded", "keil"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 9, "creation_date": 1469619451, "post_id": 38611865, "comment_id": 64609911, "body": "Modifying a string literal is undefined behavior."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1469619863, "post_id": 38611865, "comment_id": 64610228, "body": "See <a href=\"http://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c\" title=\"what is the difference between char s and char s in c\">stackoverflow.com/questions/1704407/&hellip;</a>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1469619885, "post_id": 38611865, "comment_id": 64610244, "body": "@Notlikethat: In C, string literals are <b>not</b> of type <code>char const *</code>. You&#39;re thinking of c++."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1469620091, "post_id": 38611865, "comment_id": 64610370, "body": "Or another one : <a href=\"http://stackoverflow.com/questions/480555/modifying-c-string-constants\">Modifying C string constants?</a> (it&#39;s last, I stop to search other same question)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1469620134, "post_id": 38611865, "comment_id": 64610398, "body": "@Garf365: One unfortunate problem with those Q&amp;A&#39;s is that the answers focus on the observed behavior, rather than clarifying that the behavior is <i>undefined</i>. In particular, in this case there is no segfault."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469620210, "post_id": 38611865, "comment_id": 64610456, "body": "@EOF it&#39;s on embedded device, string is certainly stored in flash, so read-only"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1469620355, "post_id": 38611865, "comment_id": 64610556, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/118427/discussion-between-eof-and-garf365\">continue this discussion in chat</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469620774, "post_id": 38611865, "comment_id": 64610838, "body": "@EOF: Formally correct. But they are nevertheless immutable and in typical implementations technically identical with <code>const char []</code>. They are never <code>const char * </code> nor <code>char *</code> which are pointers. Neither in C nor C++."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469621133, "post_id": 38611865, "comment_id": 64611080, "body": "@Olaf If they <i>were</i> of type (or &quot;technically identical to&quot;, whatever that would mean to you) <code>char const []</code>, you could not convert them to <code>char *</code> by assignment."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469621488, "post_id": 38611865, "comment_id": 64611341, "body": "@EOF: That&#39;s why I wrote &quot;technically&quot;. gcc e.g. puts them into <code>.rodata</code> section - the same it puts <code>const char []</code> into. The assignment to a <code>char *</code> is some legacy not to break &quot;problematic&quot; code. That this works with a pointer is the standard automatic conversion of an array to a &quot;pointer to the first element&quot;."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1469621678, "post_id": 38611865, "comment_id": 64611489, "body": "@Olaf: Nothing &quot;technically&quot; about it. String literals <i>do not have</i> type <code>char const[]</code>. If they <i>did</i>, the compiler could catch this kind of problem, <i>but they do not</i>. This is important. Teach people to understand C&#39;s type system, or they&#39;ll be perpetually confused."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469621765, "post_id": 38611865, "comment_id": 64611567, "body": "@EOF: Types are semantical, not technical. Where exactly did I write a string literal has <code>const char []</code>? They are not <code>const char *</code> nor <code>char *</code> either, but <code>char []</code> in C and <code>const char []</code> in C++! Anyway, either I cannot make clear what I mean or you don&#39;t want to understand. Either way, this is useless."}], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "is_accepted": false, "score": 3, "last_activity_date": 1505363955, "last_edit_date": 1505363955, "creation_date": 1469619666, "answer_id": 38611951, "question_id": 38611865, "link": "https://stackoverflow.com/questions/38611865/c-is-ignoring-byte-assignment/38611951#38611951", "title": "C is ignoring byte assignment?", "body": "<p>You must not modify a string literal (which is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>). You should use an array initialized with a string literal.</p>\n\n<p>This way, your code should be:</p>\n\n<pre><code>uint8_t at_ss_data[] = \"\\n\\rAT$SS=AA AA\\n\\r\";\nat_ss_data[12] = 0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1469620769, "post_id": 38612043, "comment_id": 64610831, "body": "<i>you are allocating memory on the stack</i>.... It depends on the scope of the array."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469643901, "post_id": 38612043, "comment_id": 64626784, "body": "FWIW, it is undefined behaviour, probably made so because string literals <i>often</i> reside in read-only memory, so you should treat them as such. But they do not always reside in read-only memory."}], "tags": [], "owner": {"reputation": 91, "user_id": 4153134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06fa5e7aec92de047710f905bcf4a086?s=128&d=identicon&r=PG&f=1", "display_name": "rj99999", "link": "https://stackoverflow.com/users/4153134/rj99999"}, "is_accepted": false, "score": 2, "last_activity_date": 1469621101, "last_edit_date": 1469621101, "creation_date": 1469619920, "answer_id": 38612043, "question_id": 38611865, "link": "https://stackoverflow.com/questions/38611865/c-is-ignoring-byte-assignment/38612043#38612043", "title": "C is ignoring byte assignment?", "body": "<p>at_ss_data is pointing to read-only memory, you can't change string literal like this. This behavior is undefined.\ninstead you may try something like this:</p>\n\n<pre><code>uint8_t at_ss_data[] = \"\\n\\rAT$SS=AA AA\\n\\r\";\n</code></pre>\n\n<p>This array is now writable.</p>\n"}], "owner": {"reputation": 31, "user_id": 3272028, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001460052754/picture?type=large", "display_name": "MarcelH", "link": "https://stackoverflow.com/users/3272028/marcelh"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1469620691, "answer_count": 2, "score": -3, "last_activity_date": 1505363955, "creation_date": 1469619419, "last_edit_date": 1469627136, "question_id": 38611865, "link": "https://stackoverflow.com/questions/38611865/c-is-ignoring-byte-assignment", "closed_reason": "Duplicate", "title": "C is ignoring byte assignment?", "body": "<p>Im doing something wrong. </p>\n\n<p>This is the piece of code from ARM code (Keil5 IDE): </p>\n\n<pre><code>uint8_t * at_ss_data = (uint8_t *)(\"\\n\\rAT$SS=AA AA\\n\\r\");\nat_ss_data[12] = 0;\n</code></pre>\n\n<p>but the 12th index (the last <code>A</code>) does not change in the variable when the code is pushed to the ARM embedded board.</p>\n\n<p>My goal is to change the <code>AA AA</code> substring in the <code>at_ss_data</code> array to <code>00 00</code></p>\n"}, {"tags": ["c", "c99", "sequence-points"], "comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469619780, "post_id": 38611816, "comment_id": 64610166, "body": "Feel free to downvote it if you think it is appropiate. But note this isn&#39;t just another homwork question. I encountered something that seemed weird to me, I did quiet some decent research about it and made a clear point of my confusion and why it is diferent from other questions about this. If you still think I missed something or did not make enough effort, please let me atleast know why you think so."}], "answers": [{"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469619451, "post_id": 38611844, "comment_id": 64609912, "body": "Can you elaborate for what cases those sequence points between the assoicated actions are even relevant for if that is the case? Or should I ask that as seperate question?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469619544, "post_id": 38611844, "comment_id": 64609976, "body": "It should be obvious for things like <code>scanf</code>. There might be some format specifiers where it could make a different for <code>printf</code>, but I can&#39;t think of any. Maybe someone else can."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1469619775, "post_id": 38611844, "comment_id": 64610161, "body": "Specifically the format specifier <code>%n</code> which writes the number of chars printed so far into the given address."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469619957, "post_id": 38611844, "comment_id": 64610289, "body": "Can you also make clear in your answer, if my understanding was right and the problem isn&#39;t that this is undefined behavior, as the output <code>2, 2, 0</code> let me assume, but as this is a expectable well defined outcome due to printf just beeing a wrapper to the varg c functions, or if this is undefined behavior? As your last edit adding the snippet made me unsure about this."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469620072, "post_id": 38611844, "comment_id": 64610357, "body": "@Zaibis It&#39;s UB. You broke the rule you cited in your first quote. There&#39;s no right thing for it to do. There&#39;s no reason to expect <code>2, 2, 0</code>. Why would you expect the parameters to be calculated in that order as opposed to some other order?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1469620528, "post_id": 38611844, "comment_id": 64610674, "body": "@DavidSchwartz: that I wasn&#39;t sure about and as you didn&#39;t make it clear, I asked you, before breaking my had on to the &quot;why?&quot;. So the second rule I cited is just related to operations directly &quot;performed by the specifier&quot; as @P.P. &#39;s example of <code>%n</code> would modify a value. So one could do <code>printf(&quot;te%dst%n&quot;, i, &amp;(x++));</code>?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469623069, "post_id": 38611844, "comment_id": 64612543, "body": "@Zaibis Yes. And the <code>x++</code> would take place before the <code>%d</code> or <code>%n</code>."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1469623259, "post_id": 38611844, "comment_id": 64612704, "body": "Because of the <code>()</code> or even without them? Wow... so much new I learned today &#39;^.^ Anyway I still would welcome it seeing it added itno your answer."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1469623482, "post_id": 38611844, "comment_id": 64612862, "body": "@Zaibis Just because a function&#39;s arguments have to be computed before the function can be called."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1469619484, "last_edit_date": 1469619484, "creation_date": 1469619360, "answer_id": 38611844, "question_id": 38611816, "link": "https://stackoverflow.com/questions/38611816/why-printf-ddd-i-i-i-is-undefined-behavior/38611844#38611844", "title": "Why printf (&quot;%d%d%d&quot;, ++i, i, i++) is undefined behavior?", "body": "<p>The issue isn't with the actions associated with the specifiers. The issue is with the calculation of the parameters to the <code>printf</code> function which is finished before the first specifier performs any actions.</p>\n\n<p>Imagine if the code was:</p>\n\n<pre><code>void foo (int i1, int i2, int i3)\n{\n     printf(\"%d, %d, %d\", i1, i2, i2);\n}\n\nfoo (++i, i, i++);\n</code></pre>\n\n<p>Here it would be quite clear. And the wrapper doesn't change anything.</p>\n"}], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 38611844, "answer_count": 1, "score": -1, "last_activity_date": 1469712274, "creation_date": 1469619265, "last_edit_date": 1469712274, "question_id": 38611816, "link": "https://stackoverflow.com/questions/38611816/why-printf-ddd-i-i-i-is-undefined-behavior", "title": "Why printf (&quot;%d%d%d&quot;, ++i, i, i++) is undefined behavior?", "body": "<p>ISO/IEC 9899(TC2) \u00a76.5 \u2014 2 Expressions tells us:</p>\n\n<blockquote>\n  <p>Between the previous and next sequence point an object shall have its stored value modified at most once by the evaluation of an expression. Furthermore, the prior value shall be read only to determine the value to be stored.</p>\n</blockquote>\n\n<p>This is what I kept in mind, remembered and would have told anyone asking me why the line from the title gives unexpected outputs.</p>\n\n<p>But today I just discovered this line:</p>\n\n<p>\u00a77.19.6 \u2014 1 Formatted input/output functions:</p>\n\n<blockquote>\n  <p>The formatted input/output functions shall behave as if there is a sequence point after the actions associated with each specifier.</p>\n</blockquote>\n\n<p>Which made me assume:</p>\n\n<p>While</p>\n\n<pre><code>int i = 0;\nprintf (\"%d, %d\", ++i, i++);\n</code></pre>\n\n<p>should be undefined, the next example should be ok by the mentioned clause:</p>\n\n<pre><code>int i = 0;\nprintf (\"%d, %d, %d\", ++i, i, i++);\n</code></pre>\n\n<p>But the output is: </p>\n\n<pre><code>2, 2, 0\n</code></pre>\n\n<p>I never had seen a better example for this indicating undefined behavior.</p>\n\n<p>But why?\nIf the clause is true </p>\n\n<blockquote>\n  <p>\"[...]behave as if there is a sequence point after the actions associated with each specifier.\"</p>\n</blockquote>\n\n<p>then applying the rule under \u00a76.5 \u2014 2 onto each of the actiosn associated with the specifier doesn't let us cross that rule as in:</p>\n\n<p>(SP representing a relevant sequence point)</p>\n\n<p>SP<sup>1</sup><code>++i</code> SP<sup>2</sup><code>i</code>SP<sup>3</sup><code>i++</code></p>\n\n<p>From SP1 in the given range between the previous and the next SP,  <code>++i</code> is the only modification of <code>i</code>'s stored value.</p>\n\n<p>From SP2 what is in the range between the previous and the next SP is: <code>++i</code> and <code>i</code> where <code>++i</code> still is the only modification of that value.</p>\n\n<p>If we now take SP3 all that is going on between the previous SP (SP2) and the next SP(end of the invocation) is:</p>\n\n<p><code>i</code> and <code>i++</code> still just a single modification of <code>i</code> in the whole range between the previous and the next SP.</p>\n\n<p>So what am I interpreting here wrong about the way sequence points work?</p>\n"}, {"tags": ["c", "embedded", "freertos", "flash-memory"], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 4947646, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320cd2cf0199f26e85d79fd7705fb0c0?s=128&d=identicon&r=PG&f=1", "display_name": "fedi ", "link": "https://stackoverflow.com/users/4947646/fedi"}, "is_accepted": true, "score": 1, "last_activity_date": 1469638859, "creation_date": 1469638859, "answer_id": 38619140, "question_id": 38611527, "link": "https://stackoverflow.com/questions/38611527/atmel-uc3a0512-fat-api-problems-after-defining-freertos-used-symbol/38619140#38619140", "title": "Atmel UC3A0512 FAT API problems after defining FREERTOS_USED symbol", "body": "<p>You forgot to initialize the <code>ctrl_access_semphr</code>, \nyou have to use the function <code>ctrl_access_init</code> defined in <code>ctrl_access.c</code>. </p>\n\n<pre><code>#ifdef FREERTOS_USED\n\nbool ctrl_access_init(void)\n{\n // If the handle to the protecting semaphore is not valid,\n if (!ctrl_access_semphr)\n {\n   // try to create the semaphore.\n   vSemaphoreCreateBinary(ctrl_access_semphr);\n\n   // If the semaphore could not be created, there is no backup solution.\n   if (!ctrl_access_semphr) return false;\n  }\n\n return true;\n}\n#endif\n</code></pre>\n\n<p>Your function should look like :</p>\n\n<pre><code>int read_Flash_Data()\n{\n  /* initialize FSACCESS mutex and navigators */\n  if (b_fsaccess_init())\n  {   \n    usart_write_line((&amp;AVR32_USART0), \" b_fsaccess_init return true \\r\\n\");   \n  }\n\n  /* initialize ctrl_access semaphore */\n  if (ctrl_access_init())\n  {\n    usart_write_line((&amp;AVR32_USART0), \" ctrl_access_init return true \\r\\n\");\n  }\n  //......\n</code></pre>\n"}], "owner": {"reputation": 808, "user_id": 6644375, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6c70e82e4e69a7ffc24b7e269cbff6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Mouin", "link": "https://stackoverflow.com/users/6644375/mouin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 38619140, "answer_count": 1, "score": 0, "last_activity_date": 1469713070, "creation_date": 1469618432, "last_edit_date": 1469713070, "question_id": 38611527, "link": "https://stackoverflow.com/questions/38611527/atmel-uc3a0512-fat-api-problems-after-defining-freertos-used-symbol", "title": "Atmel UC3A0512 FAT API problems after defining FREERTOS_USED symbol", "body": "<p>I'am using <a href=\"http://www.atmel.com/images/doc7824.pdf\" rel=\"nofollow\">FAT API</a> provided by ASF to read data from the flash, </p>\n\n<p>The FAT API uses a global variable <code>fs_g_status</code> to help debugging the problems, but it seems that  <code>fs_g_status</code> takes \nmeaningless values:</p>\n\n<p>Possible values for fs_g_status :</p>\n\n<pre><code>#define  FS_ERR_HW               (FAIL+0)    //!&lt; Hardware driver error\n#define  FS_ERR_NO_FORMAT        (FAIL+1)    //!&lt; The selected drive isn't formated\n#define  FS_ERR_NO_PART          (FAIL+2)    //!&lt; The selected partition doesn't existed\n#define  FS_ERR_NO_SUPPORT_PART  (FAIL+3)    //!&lt; The selected partition isn't supported\n#define  FS_ERR_TOO_FILE_OPEN    (FAIL+4)    //!&lt; The navigation have already opened a file\n#define  FS_ERR_END_OF_DRIVE     (FAIL+5)    //!&lt; There are not other driver\n#define  FS_ERR_BAD_POS          (FAIL+6)    //!&lt; The position is over the file\n#define  FS_ERR_FS               (FAIL+7)    //!&lt; File system error\n#define  FS_ERR_NO_FIND          (FAIL+8)    //!&lt; File no found\n#define  FS_ERR_ENTRY_EMPTY      (FAIL+9)    //!&lt; File entry empty\n#define  FS_ERR_ENTRY_BAD        (FAIL+10)   //!&lt; File entry bad\n#define  FS_ERR_ENTRY_BADTYPE    (FAIL+11)   //!&lt; File entry type don't corresponding\n#define  FS_ERR_NO_DIR           (FAIL+12)   //!&lt; The selected file isn't a directory\n#define  FS_ERR_NO_MOUNT         (FAIL+13)   //!&lt; The partition isn't mounted\n#define  FS_ERR_NO_FILE_SEL      (FAIL+14)   //!&lt; There are no selected file\n#define  FS_NO_LAST_LFN_ENTRY    (FAIL+15)   //!&lt; The file entry isn't the last long file entry\n\n#define  FS_ERR_ID_FILE          (FAIL+17)   //!&lt; The file identifier is bad\n#define  FS_ERR_NO_FILE          (FAIL+18)   //!&lt; The selected file entry isn't a file\n#define  FS_LUN_WP               (FAIL+19)   //!&lt; Drive is in read only mode\n#define  FS_ERR_READ_ONLY        (FAIL+20)   //!&lt; File is on read access only\n#define  FS_ERR_NAME_INCORRECT   (FAIL+21)   //!&lt; The name don't corresponding at the filter name\n//...\n</code></pre>\n\n<p>with </p>\n\n<pre><code>#define FAIL      1\n</code></pre>\n\n<p>This is the function i use to read data from flash</p>\n\n<pre><code>int read_Flash_Data()\n{\n  /* initialize FSACCESS mutex and navigators */\n  if (b_fsaccess_init())\n  { \n    usart_write_line((&amp;AVR32_USART0), \" b_fsaccess_init return true \\r\\n\");   \n  }\n  //fs_g_status = 0x00 OK\n\n  /* Try to init data flash */\n  if (at45dbx_mem_check())\n  {\n    /* display message */\n    usart_write_line((&amp;AVR32_USART0), \" at45dbx_mem_check return true \\r\\n\");\n}\nelse\n{\n    /* display error message */\n    usart_write_line((&amp;AVR32_USART0),\"  at45dbx_mem_check return false\\r\\n\");\n    return (-1);\n}\n//fs_g_status = 0x00 OK\n\nif (nav_drive_set(LUN_ID_1) == false)\n{\n    usart_write_line((&amp;AVR32_USART0),\" nav_drive_set return false \\r\\n\");\n    return (-1);\n}\n//fs_g_status = 0x01 ==&gt; Hardware driver error NOK , but the nav_drive_set(LUN_ID_1) return true !!!!\n\nif( !nav_partition_mount() ) \n{\n    usart_write_line((&amp;AVR32_USART0),\"nav_partition_mount return false \\r\\n\");\n    return (-1);\n}\n//fs_g_status = 0x04 ==&gt; The navigation have already opened a file, but the nav_partition_mount() return true !!!!\n\nif ((ret = open(ACTUAL_CONFIG_FILE_PATH, O_RDONLY)) &lt; 0)\n{\n    usart_write_line((&amp;AVR32_USART0),\"Opening file failed \\r\\n\");\n    return (-1);\n}\n//fs_g_status = 0x10 ==16(decimal) open return true !!!!\n//...\n}\n</code></pre>\n\n<p>I think that this is not logic, <code>fs_g_status</code> should only be set if the functions return false.\nOK let's say that there is minor problems and major ones that lead the functions to fail and the comments are not good enough.</p>\n\n<p>Now this function is used in a freeRTOS task and i have to define the symbol FREERTOS_USED in the compilation to protect flash in concurent access, in the description above the symbol wasn't defined.\nand now <code>nav_partition_mount()</code> return false and <code>fs_g_status = 0x01</code>.</p>\n\n<p>Does anyone encounter the problem i can't seem to find ways  to debug the problem, any suggestion is welcome.</p>\n"}, {"tags": ["c", "algorithm", "loops", "diff"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1469618408, "post_id": 38611511, "comment_id": 64609188, "body": "Did you mean <code>second string: &quot;Hello&quot;</code>?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 2, "creation_date": 1469618435, "post_id": 38611511, "comment_id": 64609204, "body": "And what is the question?"}, {"owner": {"reputation": 1115, "user_id": 6544408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f30b2ea793e58029995eea15b4fc2c4?s=128&d=identicon&r=PG&f=1", "display_name": "yobro97", "link": "https://stackoverflow.com/users/6544408/yobro97"}, "edited": false, "score": 0, "creation_date": 1469618452, "post_id": 38611511, "comment_id": 64609215, "body": "@Dumitru Srelet,....&quot;Helllo&quot;?......not &quot;Hello&quot;?"}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "edited": false, "score": 0, "creation_date": 1469618532, "post_id": 38611511, "comment_id": 64609263, "body": "Sorry, my bad, and yes, I mean &quot;hello&quot; not &quot;helllo&quot;"}, {"owner": {"reputation": 18017, "user_id": 1627055, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yDnmH.jpg?s=128&g=1", "display_name": "Vesper", "link": "https://stackoverflow.com/users/1627055/vesper"}, "edited": false, "score": 0, "creation_date": 1469618583, "post_id": 38611511, "comment_id": 64609298, "body": "What if your strings are &quot;foo&quot; and &quot;bar&quot;? What should the algorithm output?"}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "edited": false, "score": 0, "creation_date": 1469618593, "post_id": 38611511, "comment_id": 64609310, "body": "How I can to do this?"}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "edited": false, "score": 0, "creation_date": 1469618638, "post_id": 38611511, "comment_id": 64609346, "body": "it will output &quot;fobar&quot;"}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "edited": false, "score": 0, "creation_date": 1469618718, "post_id": 38611511, "comment_id": 64609397, "body": "this is more examples: &quot;rien&quot; &quot;cette phrase ne cache rien&quot; will output: rienct phas"}, {"owner": {"reputation": 18017, "user_id": 1627055, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yDnmH.jpg?s=128&g=1", "display_name": "Vesper", "link": "https://stackoverflow.com/users/1627055/vesper"}, "edited": false, "score": 1, "creation_date": 1469618892, "post_id": 38611511, "comment_id": 64609515, "body": "Then the hello world example sohuld output &quot;Wrd&quot; instead of &quot;World&quot;. Re-phrase the question and define &quot;difference&quot; strictly."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1469619636, "post_id": 38611511, "comment_id": 64610045, "body": "@DumitruStrelet you really should explain what <i>exactly</i> your algorithm is supposed to display. It&#39;s hard (or even impossible) to understand that from the samples you have provided in the comments. Please edit your question and elaborate <i>and</i> provide at least 4-5 examples."}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "edited": false, "score": 0, "creation_date": 1469620639, "post_id": 38611511, "comment_id": 64610760, "body": "Write a program that takes two strings and displays, without doubles, the characters that appear in either one of the strings.  The display will be in the order characters appear in the command line, and will be followed by a \\n.  If the number of arguments is not 2, the program displays \\n."}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1469620902, "post_id": 38611511, "comment_id": 64610923, "body": "@MichaelWalz. like that?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1469620932, "post_id": 38611511, "comment_id": 64610943, "body": "@DumitruStrelet that&#39;s better, now put some samples at it will almost be perfect."}, {"owner": {"reputation": 18017, "user_id": 1627055, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yDnmH.jpg?s=128&g=1", "display_name": "Vesper", "link": "https://stackoverflow.com/users/1627055/vesper"}, "edited": false, "score": 0, "creation_date": 1469622558, "post_id": 38611511, "comment_id": 64612144, "body": "Also, why no boolean? Do you have to be limited with something? Anyway, you need to keep track of symbols already output, and skip the current char if it was outputted once already."}, {"owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "edited": false, "score": 0, "creation_date": 1469622696, "post_id": 38611511, "comment_id": 64612253, "body": "I want to this more hardcore. And I cant using more syntax than while, for etc.."}, {"owner": {"reputation": 18017, "user_id": 1627055, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yDnmH.jpg?s=128&g=1", "display_name": "Vesper", "link": "https://stackoverflow.com/users/1627055/vesper"}, "edited": false, "score": 0, "creation_date": 1469622845, "post_id": 38611511, "comment_id": 64612376, "body": "Please use &quot;@username&quot; syntax to respond to someone, so they would be notified about your message. Can you change the input strings?"}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 1, "creation_date": 1469625702, "post_id": 38611511, "comment_id": 64614681, "body": "It&#39;s a subject from the school 42."}], "answers": [{"tags": [], "owner": {"reputation": 18017, "user_id": 1627055, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yDnmH.jpg?s=128&g=1", "display_name": "Vesper", "link": "https://stackoverflow.com/users/1627055/vesper"}, "is_accepted": true, "score": -1, "last_activity_date": 1469623350, "last_edit_date": 1469623350, "creation_date": 1469621157, "answer_id": 38612469, "question_id": 38611511, "link": "https://stackoverflow.com/questions/38611511/make-the-difference-between-two-strings-using-only-loops/38612469#38612469", "title": "Make the difference between two strings using only loops", "body": "<pre><code>void twodiff(char* s1,char* s2) {\n    bool[256] set1; // screw mallocs\n    bool[256] set2;\n    int i;\n    for (i=0;i&lt;256;i++) {\n        set1[i]=false;\n        set2[i]=false;\n    }\n    int l1=strlen(s1);\n    int l2=strlen(s2);\n    for (i=0;i&lt;l1;i++) set1[s1[i]]=true;\n    for (i=0;i&lt;l2;i++) set2[s2[i]]=true;\n    for (i=0;i&lt;256;i++) set1[i]=set1[i]^set2[i]; // combine sets by xor\n    for (i=0;i&lt;l1;i++) {\n        if (set1[s1[i]]) {\n            set1[s1[i]]=false;\n            printf(\"%c\",s1[i]);\n        }\n    }\n    for (i=0;i&lt;l2;i++) {\n        if (set1[s2[i]]) {\n            set1[s2[i]]=false;\n            printf(\"%c\",s2[i]);\n        }\n    }\n}\n</code></pre>\n\n<p>This assumes you want characters tht appear in s1 XOR s2, that is, in ONLY one OR the other string. If you need \"s1 OR s2\", change the combine condition.</p>\n\n<p>UPDATE: Assuming you can change the passed strings, you can plain replace all symbols that you've already output by a symbol that'll be skipped in the processing. This isn't a good thing to do, but with these constraints it'll be the easiest approach.</p>\n\n<pre><code>void manglestr(char* s1, char* s2) {\n    char mangler;\n    int i;\n    int j;\n    int l1=strlen(s1);\n    int l2=strlen(s2);\n    if (0==l1) mangler=s2[0]; else mangler=s1[0];\n    printf(\"%c\",mangler);\n    for (i=0;i&lt;l1;i++) {\n        if (s1[i]!=mangler) {\n            printf(\"%c\",s1[i]);\n            for (j=i1+1;j&lt;l1;j++) if (s1[j]==s1[i]) s1[j]=mangler;\n            for (j=0;j&lt;l2;j++) if (s2[j]==s1[i]) s2[j]=mangler;\n        } // this will ensure we mangle all characters we send to output\n    }\n    for (i=0;i&lt;l2;i++) {\n        if (s2[i]!=mangler) {\n            printf(\"%c\",s2[i]);\n            for (j=i1+1;j&lt;l2;j++) if (s2[j]==s2[i]) s2[j]=mangler;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6184193, "user_type": "registered", "profile_image": "https://graph.facebook.com/874124426043866/picture?type=large", "display_name": "Dumitru Strelet", "link": "https://stackoverflow.com/users/6184193/dumitru-strelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1469646238, "accepted_answer_id": 38612469, "answer_count": 1, "score": -2, "last_activity_date": 1469624515, "creation_date": 1469618364, "last_edit_date": 1469624515, "question_id": 38611511, "link": "https://stackoverflow.com/questions/38611511/make-the-difference-between-two-strings-using-only-loops", "closed_reason": "Needs details or clarity", "title": "Make the difference between two strings using only loops", "body": "<p>Write a program that takes two strings and displays, without doubles, the\ncharacters that appear in either one of the strings.</p>\n\n<p>The display will be in the order characters appear in the command line, and\nwill be followed by a <code>\\n</code>.</p>\n\n<p>in short, I want to do something like that:</p>\n\n<pre><code>first string: \"zpadinton\"\nsecond string: \"paqefwtdjetyiytjneytjoeyjnejeyj\"\n</code></pre>\n\n<p>and  output will be:</p>\n\n<pre><code>output: \"zpadintoqefwjy\"\n</code></pre>\n\n<p>other examples:</p>\n\n<pre><code>string1: \"rien\" \nstring2: \"cette phrase ne cache rien\"\noutput: \"rienct phas\"\n\nstring1: \"ddf6vewg64f\"\nstring2: \"gtwthgdwthdwfteewhrtag6h4ffdhsd\"\noutput: \"df6vewg4thras\"\n</code></pre>\n\n<p>I'm trying to do something like that:</p>\n\n<pre><code>  char et(char *str, char *str2)\n{\n    int i;\n    int current;\n    int check;\n    char tmp[strlen(*str) + strlen(*str2)];\n\n    i = 0;\n    current = 0;\n    check = 0;\n    while(*str)\n    {\n        check = 0;\n        while (check != current){\n            if (tmp[check] == *str)\n                return (0);\n            check++;\n        }\n        if (check == current)\n        {\n            printf(\"%c\", *str);\n            tmp[current] = *str;\n            ++check;\n        }\n        str++;\n    }\n    while(*str2)\n    {\n        check = 0;\n        while (check != current){\n            if (tmp[check] == *str2)\n                return (0);\n            check++;\n        }\n        if (check == current)\n        {\n            printf(\"%c\", *str2);\n            tmp[current] = *str2;\n            ++check;\n        }\n        str2++;\n    }\n    return (0);\n}   \n</code></pre>\n\n<p>But this not working.\nHow I cat do this?</p>\n\n<p>P.S: I want do to this without using function <code>strcmp</code> <code>strcpy</code> or <code>boolean type of date</code>, or something like that.</p>\n"}, {"tags": ["c", "opengl", "3d", "2d", "sdl"], "comments": [{"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1469632207, "post_id": 38611423, "comment_id": 64619714, "body": "What type of projection are you using? I would Switch to a orthographie one for the ui."}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "reply_to_user": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1469633283, "post_id": 38611423, "comment_id": 64620448, "body": "@BDL I don&#39;t really know what you mean with projection since I&#39;m a beginner in OpenGL, but you can probably see what type of projection I&#39;m using in the code. If not, you can tell me how to find out."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1469680633, "post_id": 38611423, "comment_id": 64638938, "body": "There is an identity projection (perspective proj was set with <code>gluPerspective</code>, but then immediately dropped with <code>glLoadIdentity</code>). I see no obvious mistakes in second code (first one is a different story - there is no way it would work), but as GL is a state machine there may be a lot of changed states that happened before given code and affects its execution (like backface culling). I suggest posting minimal complete example that illustrates your problem. Better solution would be using e.g. apitrace to debug your problem."}], "answers": [{"tags": [], "owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "is_accepted": true, "score": 0, "last_activity_date": 1470130120, "creation_date": 1470130120, "answer_id": 38716647, "question_id": 38611423, "link": "https://stackoverflow.com/questions/38611423/draw-2d-and-3d-in-the-same-opengl-window/38716647#38716647", "title": "Draw 2D and 3D in the same OpenGL window", "body": "<p>The second code works by adding the following right before drawing the 2D button:</p>\n\n<pre><code>glLoadIdentity();\nglMatrixMode(GL_PROJECTION);\nglDisable(GL_DEPTH_TEST);\nglLoadIdentity();\n</code></pre>\n\n<p>and the following code right after drawing the 2D button:</p>\n\n<pre><code>glEnable(GL_DEPTH_TEST);\ngluPerspective(70,(double)640/480,0.5,INFINITE);   //These parameters have to be the same as the ones used for gluPerspective when initializing the 3D\ngluLookAt(0,0,3,1,0,3,0,0,0.01);    //Where you want to position the camera and where you want to look at\nglMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\n</code></pre>\n\n<p>Here is the complete code that works:</p>\n\n<pre><code>void openMainWindow(){\n    //Everything before the while loop is the same as in the other code\n    int continue = 1;\n    while(continue){\n        SDL_PollEvent(&amp;event);\n        switch(event.type){\n            //Events\n        }\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glBegin(GL_QUADS);\n            //Draw a square\n        glEnd();\n        //Draw more things the same way\n        glLoadIdentity();\n        glMatrixMode(GL_PROJECTION);\n        glDisable(GL_DEPTH_TEST);\n        glLoadIdentity();\n        glBegin(GL_QUADS);    //Draw the button\n            glColor3ub(50,50,50);\n            glVertex2d(-0.5,-0.5);\n            glVertex2d(-0.5,0.5);\n            glVertex2d(0.5,0.5);\n            glVertex2d(0.5,-0.5);\n        glEnd();\n        glEnable(GL_DEPTH_TEST);\n        gluPerspective(70,(double)640/480,0.5,INFINITE);   //These parameters have to be the same as the ones used for gluPerspective when initializing the 3D\n        gluLookAt(0,0,3,1,0,3,0,0,0.01);    //Where you want to position the camera and where you want to look at\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n        glFlush();\n        SDL_GL_SwapBuffers();\n    }\n    SDL_Quit();\n}\n</code></pre>\n"}], "owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "accepted_answer_id": 38716647, "answer_count": 1, "score": 0, "last_activity_date": 1470130120, "creation_date": 1469618138, "question_id": 38611423, "link": "https://stackoverflow.com/questions/38611423/draw-2d-and-3d-in-the-same-opengl-window", "title": "Draw 2D and 3D in the same OpenGL window", "body": "<p>I'm creating a 3D game with OpenGL and I would like to make a toolbar in the top of the window. For that, I tried to use SDL to draw the buttons and OpenGL to draw the actual game. Here is the relevant part of my code:</p>\n\n<pre><code>void openMainWindow(){\n    SDL_Surface *screen;\n    SDL_Event event;\n    SDL_Rect position;\n    SDL_Init(SDL_INIT_VIDEO);\n    putenv(\"SDL_VIDEO_CENTERED=center\");\n    SDL_WM_SetCaption(\"Example\",NULL);\n    SDL_WM_SetIcon(IMG_Load(\"icon.png\"),NULL);\n    screen = SDL_SetVideoMode(832,487,32,SDL_HWSURFACE | SDL_OPENGL);\n    glLoadIdentity();\n    gluPerspective(70,(double)832/487,1,1000);\n    //Some things to initialize the window\n    int continue = 1;\n    while(continue){\n        SDL_PollEvent(&amp;event);\n        switch(event.type){\n            //Events\n        }\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glBegin(GL_QUADS);\n            //Draw a square\n        glEnd();\n        //Draw more things the same way\n        glFlush();\n        SDL_GL_SwapBuffers();\n        SDL_Surface *button1 = SDL_CreateRGBSurface(SDL_HWSURFACE,50,50,32,0,0,0,0);\n        SDL_FillRect(button1,NULL,SDL_MapRGB(screen-&gt;format,50,50,50);\n        position.x = 8;\n        position.y = 8;\n        SDL_BlitSurface(button1,NULL,screen,&amp;position);\n        SDL_Flip(screen);\n    }\n    SDL_Quit();\n}\n</code></pre>\n\n<p>The problem with this is that when this function is called, the process ends and returns 3 (which means that there is an error). So I tried to draw the buttons with OpenGL like this:</p>\n\n<pre><code>void openMainWindow(){\n    //Everything before the while loop is the same as in the other code\n    int continue = 1;\n    while(continue){\n        SDL_PollEvent(&amp;event);\n        switch(event.type){\n            //Events\n        }\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glBegin(GL_QUADS);\n            //Draw a square\n        glEnd();\n        //Draw more things the same way\n        glDisable(GL_DEPTH_TEST);\n        glLoadIdentity();\n        glBegin(GL_QUADS);    //Draw the button\n            glColor3ub(50,50,50);\n            glVertex2d(-0.5,-0.5);\n            glVertex2d(-0.5,0.5);\n            glVertex2d(0.5,0.5);\n            glVertex2d(0.5,-0.5);\n        glEnd();\n        glEnable(GL_DEPTH_TEST);\n        glFlush();\n        SDL_GL_SwapBuffers();\n    }\n    SDL_Quit();\n}\n</code></pre>\n\n<p>I know that the second code should center the button in the window, but I use this code just to test if it works (and it doesn't, that's why I'm posting this question).</p>\n\n<p>With the second code, the 3D things appear in the window as they should, but I can't see any button. How do I put 2D buttons in a 3D OpenGL window?</p>\n"}, {"tags": ["c", "unix", "printf", "ld-preload"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1469619019, "post_id": 38611331, "comment_id": 64609602, "body": "If you are calling printf with a string literal then the compiler optmises it out to puts() call. Try with something that requires format string parsing (e.g. <code>int x=5; printf(&quot;%d\\n&quot;, x*x);</code>. You still call vfprintf with stdout? Have you verified your preloaded library is actually loaded (try with simple <code>write(1, &quot;hi&quot;, 2);</code> in your hook)?"}, {"owner": {"reputation": 522, "user_id": 5472899, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/906d78201e3d2cdf72b9ca471f77a568?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Sanford", "link": "https://stackoverflow.com/users/5472899/josh-sanford"}, "edited": false, "score": 0, "creation_date": 1469622454, "post_id": 38611331, "comment_id": 64612048, "body": "Is it okay to redirect everything from <code>stdout</code> to <code>stderr</code>?  If so and if you are using bash, just write <code>myprog arg1 arg2 argN 1&gt;&amp;2</code>.  That last <code>1&gt;&amp;2</code> part will redirect <code>stdout</code> to <code>stderr</code>.  See <a href=\"http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1469648820, "post_id": 38611331, "comment_id": 64629515, "body": "Why not just <code>fprintf(stderr, ....)</code>? Trying to write a replacement function for a library function is not always as simple as just writing a same-named function..."}], "answers": [{"tags": [], "owner": {"reputation": 3224, "user_id": 1852723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1311bb0d8cdbac11997aa8598913302?s=128&d=identicon&r=PG&f=1", "display_name": "Drunix", "link": "https://stackoverflow.com/users/1852723/drunix"}, "is_accepted": false, "score": 1, "last_activity_date": 1471598984, "last_edit_date": 1471598984, "creation_date": 1469620007, "answer_id": 38612075, "question_id": 38611331, "link": "https://stackoverflow.com/questions/38611331/ld-preload-printf-to-use-stderr-instead-of-stdout/38612075#38612075", "title": "ld_preload printf to use stderr instead of stdout", "body": "<p>According to ISO/IEC 9899:201x redefining an reserved identifier like <code>printf</code> results in undefined behaviour:</p>\n\n<blockquote>\n  <p>7.1.3.2 ... If  the  program  declares  or  defines  an  identifier  in  a context  in  which  it  is  reserved  (other  than  as  allowed \n  by  7.1.4),  or  defines  a  reserved identifier as a macro name, the\n  behavior is undefined.</p>\n</blockquote>\n\n<p>So like P.P. pointed out it is totally legal for the compiler to optimize certain calls to <code>printf</code> by replacing them with <code>puts</code> because the observable behaviour is the same if <code>printf</code> is not redefined and UB rules (meaning anything can happen) apply if you redefine it.</p>\n"}, {"tags": [], "owner": {"reputation": 1365, "user_id": 5015819, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10206823051636543/picture?type=large", "display_name": "Shaniqwa", "link": "https://stackoverflow.com/users/5015819/shaniqwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1469641785, "last_edit_date": 1495539865, "creation_date": 1469641785, "answer_id": 38619951, "question_id": 38611331, "link": "https://stackoverflow.com/questions/38611331/ld-preload-printf-to-use-stderr-instead-of-stdout/38619951#38619951", "title": "ld_preload printf to use stderr instead of stdout", "body": "<p>so I figured it out.. the code above was fine, the preload was fine, and as I said for some reason puts was called instead of printf. The simple Hello World program that demonstrated LD_PRELOAD looked like this: </p>\n\n<pre><code>printf(\"Hello World\\n\");\n</code></pre>\n\n<p>when I removed the \\n it worked fine, and puts was not called! \nmore about this issue can be found here: <a href=\"https://stackoverflow.com/questions/1576689/problems-on-injecting-into-printf-using-ld-preload-method\">Problems on injecting into printf using LD_PRELOAD method</a></p>\n"}], "owner": {"reputation": 1365, "user_id": 5015819, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10206823051636543/picture?type=large", "display_name": "Shaniqwa", "link": "https://stackoverflow.com/users/5015819/shaniqwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1471598984, "creation_date": 1469617903, "last_edit_date": 1469619003, "question_id": 38611331, "link": "https://stackoverflow.com/questions/38611331/ld-preload-printf-to-use-stderr-instead-of-stdout", "title": "ld_preload printf to use stderr instead of stdout", "body": "<p>I am trying to hook <code>printf</code> function in c and implement a very similar function only that it prints to <code>stderr</code> stream.  </p>\n\n<p>printf code: </p>\n\n<pre><code>int printf (const char *format, ...)\n{\n   va_list arg;\n   int done;\n\n   va_start (arg, format);\n   done = vfprintf (stdout, format, arg);\n   va_end (arg);\n\n   return done;\n}\n</code></pre>\n\n<p>I changed stdout to stderr but when running with <code>&gt; /dev/null</code> (which redirects <code>stdout</code> to null) I still don't see the output. When running ltrace I can see it calls puts instead of printf, I think this is the problem. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 1, "creation_date": 1469615310, "post_id": 38610257, "comment_id": 64607079, "body": "Probably because your <code>main()</code> doesn&#39;t return anything meaningful. And process exit code becomes undefined. Declare <code>main()</code> in proper way and put <code>return 0;</code> statement at the end."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 2, "creation_date": 1469615510, "post_id": 38610257, "comment_id": 64607220, "body": "There is no need of <b>return 0</b> . Since C99 is implicit."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1469615566, "post_id": 38610257, "comment_id": 64607262, "body": "Try changing <code>main()</code> to <code>int main(void)</code>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 2, "creation_date": 1469616015, "post_id": 38610257, "comment_id": 64607581, "body": "@Michi C99 also requires you to specify the return type of functions, which wasn&#39;t done here. So the code above is probably compiled as C89, where <code>main</code> doesn&#39;t return 0 by default."}, {"owner": {"reputation": 29, "user_id": 6644094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/594530114005258/picture?type=large", "display_name": "Chetan Pujar", "link": "https://stackoverflow.com/users/6644094/chetan-pujar"}, "edited": false, "score": 0, "creation_date": 1469769182, "post_id": 38610257, "comment_id": 64683809, "body": "Thank you! I got it right!"}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 6510186, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e883a7cd35b122b66991b4a3142fe4e?s=128&d=identicon&r=PG&f=1", "display_name": "fornit", "link": "https://stackoverflow.com/users/6510186/fornit"}, "is_accepted": false, "score": 0, "last_activity_date": 1469615648, "creation_date": 1469615648, "answer_id": 38610520, "question_id": 38610257, "link": "https://stackoverflow.com/questions/38610257/how-to-rectify-error-1d-returned-1-exit-status-c/38610520#38610520", "title": "how to rectify error 1d returned 1 exit status, c", "body": "<p>You didn't specify what return value <code>main</code> should have. So it defaults to an <code>int</code>. But you didn't provide any <code>return</code> statement.</p>\n"}], "owner": {"reputation": 29, "user_id": 6644094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/594530114005258/picture?type=large", "display_name": "Chetan Pujar", "link": "https://stackoverflow.com/users/6644094/chetan-pujar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 608, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469615648, "creation_date": 1469614970, "question_id": 38610257, "link": "https://stackoverflow.com/questions/38610257/how-to-rectify-error-1d-returned-1-exit-status-c", "title": "how to rectify error 1d returned 1 exit status, c", "body": "<p>I wanted to know why I get the \"error 1d returned 1 exit status\" for this basic code in my Codeblocks ide.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nmain()\n{\n    printf(\"This is the first statement \\n\");\n    printf(\"This is the second statement \\n\");\n    printf(\"This is the third statement \\n\");\n    printf(\"This is the third statement \\n\");\n    goto end;\n    printf(\"This is the fourth statement \\n\");\n    end: printf(\"This is th fifth statement \\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "wcf"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 3982282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HTq3p.jpg?s=128&g=1", "display_name": "RobinsonIT", "link": "https://stackoverflow.com/users/3982282/robinsonit"}, "edited": false, "score": 0, "creation_date": 1469627102, "post_id": 38611940, "comment_id": 64615747, "body": "Sorry, I&#39;m a newbie in this field, please tell me clearly base on my code. please.."}], "tags": [], "owner": {"reputation": 21656, "user_id": 6265620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/uf6qO.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6265620/edward"}, "is_accepted": false, "score": 0, "last_activity_date": 1469619630, "creation_date": 1469619630, "answer_id": 38611940, "question_id": 38610107, "link": "https://stackoverflow.com/questions/38610107/errors-in-add-wcf-service-references/38611940#38611940", "title": "Errors in add WCF service references?", "body": "<p>You can specify an absolute address for each endpoint associated with the service or you can provide a base address for the ServiceHost of a service and then specify an address for each endpoint associated with this service that is defined relative to this base address.<br>\nWhen hosting with IIS, you do not manage the ServiceHost instance yourself. The base address is always the address specified in the .svc file for the service when hosting in IIS. So you must use relative endpoint addresses for IIS-hosted service endpoints.<br>\nSo \"<a href=\"http://MyIPAddress/BKKService/BService.svc\" rel=\"nofollow\">http://MyIPAddress/BKKService/BService.svc</a>\" would not work, you need to use the .svc file address. If you use IIS express, the address for adding service reference should be the url when you browse the svc file. If you use IIS, it is the address specified for .svc file in IIS.</p>\n"}], "owner": {"reputation": 9, "user_id": 3982282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HTq3p.jpg?s=128&g=1", "display_name": "RobinsonIT", "link": "https://stackoverflow.com/users/3982282/robinsonit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469619630, "creation_date": 1469614565, "question_id": 38610107, "link": "https://stackoverflow.com/questions/38610107/errors-in-add-wcf-service-references", "title": "Errors in add WCF service references?", "body": "<p>My WCF project is OK, no errors, I try browse SVC file, it works well.\nBut when I add this WCF references, it throw errors :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>There was an error downloading 'http://MyIPAddress/BKKService/BService.svc/_vti_bin/ListData.svc/$metadata'.\r\nThe request failed with HTTP status 404: Not Found.\r\nMetadata contains a reference that cannot be resolved: 'http://MyIPAddress/BKKService/BService.svc'.\r\nThere was no endpoint listening at http://MyIPAddress/BKKService/BService.svc that could accept the message.</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Please help me to solve this issue.</p>\n\n<p>This is my web.config file </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;services&gt;\r\n      &lt;service name=\"BKKService.BService\"&gt;\r\n        &lt;endpoint address=\"BKKService\" binding=\"basicHttpBinding\" \r\n                  bindingConfiguration=\"basicHttp\" contract=\"BKKService.IBService\"/&gt;\r\n        &lt;host&gt;\r\n          &lt;baseAddresses&gt;\r\n            &lt;add baseAddress=\"http://MyIPAddress/BKKService/BService.svc\"/&gt;\r\n          &lt;/baseAddresses&gt;\r\n        &lt;/host&gt;\r\n      &lt;/service&gt;\r\n    &lt;/services&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "bit-shift", "disassembly"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 5, "creation_date": 1469614532, "post_id": 38609995, "comment_id": 64606530, "body": "<a href=\"http://ideone.com/TE1IO2\" rel=\"nofollow noreferrer\">Both seem ok to me</a>. What is wrong in your second solution? What is the output?"}, {"owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "edited": false, "score": 1, "creation_date": 1469614864, "post_id": 38609995, "comment_id": 64606762, "body": "What type is shifted?"}, {"owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "edited": false, "score": 0, "creation_date": 1469614938, "post_id": 38609995, "comment_id": 64606821, "body": "I added the output of second snippet."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 2, "creation_date": 1469615050, "post_id": 38609995, "comment_id": 64606897, "body": "Code is alright. I am sure problem is somewhere else. You can try comparing the assembly generated for both versions."}, {"owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "reply_to_user": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "edited": false, "score": 0, "creation_date": 1469615106, "post_id": 38609995, "comment_id": 64606933, "body": "@NejcGalof Sorry, I forgot to paste it here. It&#39;s <code>uint32_t</code>. Edited the question."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1469615161, "post_id": 38609995, "comment_id": 64606975, "body": "Maybe your printout is deferred after the posted code, and something else corrupt your array. try to post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1469615223, "post_id": 38609995, "comment_id": 64607022, "body": "Yes @LPs show that works. Show your printout dataArray."}, {"owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "edited": false, "score": 0, "creation_date": 1469615544, "post_id": 38609995, "comment_id": 64607251, "body": "Edited the question, I&#39;m not printing it but observing it at the debug mode."}, {"owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "edited": false, "score": 0, "creation_date": 1469615566, "post_id": 38609995, "comment_id": 64607263, "body": "Do you have any compiler optimization turned on? That&#39;s always the first thing I&#39;m looking at, especially for embedded devices."}, {"owner": {"reputation": 64226, "user_id": 1898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e222c924e06cc579a6866f6d7588ca66?s=128&d=identicon&r=PG", "display_name": "Skizz", "link": "https://stackoverflow.com/users/1898/skizz"}, "edited": false, "score": 1, "creation_date": 1469615609, "post_id": 38609995, "comment_id": 64607301, "body": "What does the dissembly look like?"}, {"owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "edited": false, "score": 0, "creation_date": 1469615850, "post_id": 38609995, "comment_id": 64607464, "body": "Print in loop with this: <code>printf(&quot;0x%02X\\n&quot;, dataArray[j]);</code> and then we see if you have problem in code or is problem in watch from debug mode."}, {"owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "edited": false, "score": 0, "creation_date": 1469616147, "post_id": 38609995, "comment_id": 64607664, "body": "I can not use <code>printf</code> as this is an embedded program :/ I tried disabling compiler optimization but that didn&#39;t work. I&#39;m attaching assemblies to the post."}, {"owner": {"reputation": 1389, "user_id": 4914757, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xIqlJ.png?s=128&g=1", "display_name": "A.B.", "link": "https://stackoverflow.com/users/4914757/a-b"}, "edited": false, "score": 0, "creation_date": 1469616244, "post_id": 38609995, "comment_id": 64607717, "body": "What compiler and debugger are you using for this code? What processor is it? Like Motorolla etc.?"}, {"owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "reply_to_user": {"reputation": 1389, "user_id": 4914757, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xIqlJ.png?s=128&g=1", "display_name": "A.B.", "link": "https://stackoverflow.com/users/4914757/a-b"}, "edited": false, "score": 0, "creation_date": 1469616498, "post_id": 38609995, "comment_id": 64607885, "body": "@A.B. Edited the question for the compiler versions."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469616920, "post_id": 38609995, "comment_id": 64608155, "body": "You realize that this is simply the little-endian representation?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1469617075, "post_id": 38609995, "comment_id": 64608263, "body": "Where did you put your breakpoint to stop the program and see the memory content?"}, {"owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1469617495, "post_id": 38609995, "comment_id": 64608557, "body": "@LPs Wow, I transported the breakpoint to 3 lines down and the value which was wrong just got true. I don&#39;t know why but I was already putting my breakpoint to a place where I&#39;m sure that the for loop has been finished. It works well now. Thanks!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469618949, "post_id": 38609995, "comment_id": 64609558, "body": "Optimisation is bad for debugging. Even <code>-Og</code> can be too much for stepping."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1469631644, "post_id": 38609995, "comment_id": 64619310, "body": "Bad to put an answer in the post.  Instead, revert post, add your own answer below and accept it."}], "answers": [{"tags": [], "owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "is_accepted": true, "score": 0, "last_activity_date": 1469697258, "creation_date": 1469697258, "answer_id": 38631995, "question_id": 38609995, "link": "https://stackoverflow.com/questions/38609995/bitwise-shifting-issue-in-c/38631995#38631995", "title": "Bitwise Shifting Issue in C", "body": "<p>Problem solved: Thanks to @LPs,  </p>\n\n<p>I transported the breakpoint to 3 lines down and the value which was wrong just got true. I don't know why but I was already putting my breakpoint to a place where I'm sure that the for loop has been finished. It works well now. </p>\n"}], "owner": {"reputation": 523, "user_id": 5182362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7849cb91e69e91e3ff0ce012e53bf484?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah cinar", "link": "https://stackoverflow.com/users/5182362/abdullah-cinar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "accepted_answer_id": 38631995, "answer_count": 1, "score": 7, "last_activity_date": 1469697258, "creation_date": 1469614296, "last_edit_date": 1469697239, "question_id": 38609995, "link": "https://stackoverflow.com/questions/38609995/bitwise-shifting-issue-in-c", "title": "Bitwise Shifting Issue in C", "body": "<p>I have a 32-bit number and I want to create 4 pieces of 8-bit numbers from it. For example:</p>\n\n<p>If the 32-bit number is <code>0xABCD1234</code>,\nthe 8-bit array must be like this:</p>\n\n<p><code>dataArray[0] = 0x34;\n dataArray[1] = 0x12;\n dataArray[2] = 0xCD;\n dataArray[3] = 0xAB;</code></p>\n\n<p>So I figured out that I can implement it by shifting the 32-bit value and masking the LSB part. Below snippet works well:</p>\n\n<pre><code>uint32_t uniquenumber = 0xABCD1234; \nuint8_t  dataArray[8];\nint      j;\nuint32_t  shifted = 0;\n\nfor(j=0;j&lt;4;j++)\n{\n    shifted = (uniquenumber&gt;&gt;(j*8));\n    dataArray[j] = shifted &amp; (0xFF);\n}\n</code></pre>\n\n<p>But if I try to shorten it by removing the <code>shifted</code> variable and transporting its calculation directly to the main calculation, it does not work. I couldn't figure out the difference, why does it not work. Here is the edited snippet which does not work.</p>\n\n<pre><code>uint32_t uniquenumber = 0xABCD1234; \nuint8_t  dataArray[8];\nint      j;\n\nfor(j=0;j&lt;4;j++)\n{\n    dataArray[j] = (uniquenumber&gt;&gt;(j*8)) &amp; (0xFF);\n}\n</code></pre>\n\n<p>The output of this second snippet is here:</p>\n\n<p><code>dataArray[0] = 0x34;\n dataArray[1] = 0x12;\n dataArray[2] = 0x00; //False.\n dataArray[3] = 0xAB;</code></p>\n\n<p>By the way, this is an embedded program working on a microcontroller. I don't think it is a printing issue because I'm not observing it by a printing operation. I'm observing it using a <code>Watch</code> in debug mode. Also, I can observe the first snippet at the same window and values are correct.</p>\n\n<p>Update: Here are the dissamblies for both ways.</p>\n\n<p>For first snippet:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zutGR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zutGR.png\" alt=\"enter image description here\"></a></p>\n\n<p>And for the second snippet:</p>\n\n<p><a href=\"https://i.stack.imgur.com/79t67.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/79t67.png\" alt=\"enter image description here\"></a></p>\n\n<p>Compiler: ARM GCC 4.9-2015-q1-update</p>\n\n<p>Debugger: Cypress PSoC Creator 3.3</p>\n\n<p>MCU: CYBLE-022001</p>\n\n<p>I will make a contact with Cypress, I guess they can give a hint about this. I will post the answer if we solve it.</p>\n"}, {"tags": ["c", "freeradius"], "comments": [{"owner": {"reputation": 23243, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 0, "creation_date": 1603217414, "post_id": 38608783, "comment_id": 113965459, "body": "This seems like a nice opportunity to learn and test out <a href=\"https://www.joyfulbikeshedding.com/blog/2019-01-31-full-system-dynamic-tracing-on-linux-using-ebpf-and-bpftrace.html\" rel=\"nofollow noreferrer\">bpftrace</a>. I have no experience myself, but would assume this is the right tool to attack this with."}], "owner": {"reputation": 136, "user_id": 2018921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd42966dc9ec2a0b04d4ed80e76c645a?s=128&d=identicon&r=PG", "display_name": "ASu", "link": "https://stackoverflow.com/users/2018921/asu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1469613940, "creation_date": 1469611158, "last_edit_date": 1469613940, "question_id": 38608783, "link": "https://stackoverflow.com/questions/38608783/reading-a-zlog-c-logging-library-log-file-with-tail-f-makes-program-run-4x", "title": "Reading a zlog (c logging library) log file with &quot;tail -f&quot; makes program run 4x faster", "body": "<p>I have a bit of a strange problem with <code>zlog</code>. Let me just describe the application first. It's a freeradius module written in c which uses <code>zlog</code> as a logging library. The system is Linux mint 17.3 x64, ext4, kernel 3.19.0.</p>\n\n<p>Now when I use command <code>tail -f log.log</code> on the log file while the program is running, the program starts to run 4x faster. When monitoring I also notice a lot bigger processor usage on freeradius + of course on the bash terminal where <code>tail</code> is ran. There is about 16.000 log writes per second, when tail is running.</p>\n\n<p>There is nothing fancy happening in the source code, just the standard:</p>\n\n<pre><code>zlog_get_category(...);\nzlog_debug(zc, \"....\");\n</code></pre>\n\n<p>etc.</p>\n\n<p>So the question is, what could be the cause of this behaviour, it seems very unusual, if anything running freeradius with tail running at the same time should be slower?</p>\n"}, {"tags": ["c", "clang", "llvm", "polly"], "owner": {"reputation": 21, "user_id": 6643698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65070d78c32927a627ae11875f1f0628?s=128&d=identicon&r=PG&f=1", "display_name": "francy", "link": "https://stackoverflow.com/users/6643698/francy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1469631769, "creation_date": 1469610632, "last_edit_date": 1469631769, "question_id": 38608590, "link": "https://stackoverflow.com/questions/38608590/llvm-polly-4-0-auto-openmp-for-median-filter", "title": "LLVM-Polly 4.0, Auto-OpenMP for median filter", "body": "<p>I tried to compile the following simple code with llvm and polly.</p>\n\n<pre><code>main() {\n  ...\n  for(i=1; i&lt;N-1; i++) {\n    for(j=1; j&lt;N-1; j++) {\n      B[i][j] = median(i,j);\n    }\n  }\n  ...\n}\n\nint median(int i, int j) {\n  float median_v[9];\n  int di, dj, m;\n  m=0;\n  for(di=-1; di&lt;=1; di++) {\n    for(dj=-1; dj&lt;=1; dj++) {\n      median_v[m++] = A[i+di][j+dj];\n    }\n  }      \n  qsort(median_v, 9, sizeof(float), cmp);\n  return median_v[4];    \n}\n</code></pre>\n\n<p>Using:</p>\n\n<pre><code>&gt; clang -O3 -mllvm -polly -mllvm -polly-parallel -lgomp median.c\n</code></pre>\n\n<p>But the execution time is 12s with 99% cpu time (N=5000). </p>\n\n<p>Instead, if compiled with gcc or clang forcing OpenMP pragma on principal for cycle:</p>\n\n<pre><code>...\n#pragma omp parallel for collapse(2)\nfor(i=1; i&lt;N-1; i++) {\n...\n</code></pre>\n\n<p>the execution time drops to 3s with 330% cpu time.</p>\n\n<p>Why is not Polly able to parallelize the main cycle?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 2, "creation_date": 1469610382, "post_id": 38608431, "comment_id": 64603610, "body": "Start by learning C. What do you think this line is doing? <code>signed long int max,n,d,a,arrayNum[n]; </code>"}], "answers": [{"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1469610593, "post_id": 38608503, "comment_id": 64603749, "body": "This is better suited for comment not answer."}, {"owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1469610787, "post_id": 38608503, "comment_id": 64603883, "body": "I agree this would be better suited for comment if the question was something like &quot;why does it crash&quot; or &quot;where is my segfault&quot;. But the question here is &quot;how to resolve the segfault ?&quot;. Following those steps will resolve the segfault. That was I decided to post it as an answer (but it was a touchy choice)."}], "tags": [], "owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "is_accepted": false, "score": 0, "last_activity_date": 1469610400, "creation_date": 1469610400, "answer_id": 38608503, "question_id": 38608431, "link": "https://stackoverflow.com/questions/38608431/how-to-resolve-the-segmentation-fault-error-in-the-given-c-program/38608503#38608503", "title": "how to resolve the segmentation fault error in the given c program", "body": "<p>To resolve a segmentation fault, the best way is to:</p>\n\n<ol>\n<li>Understand what you do (do you really get what each line of your program does ?).</li>\n<li>Fix the errors and warnings given by the compiler.</li>\n<li>Compile with debug symbols (<code>-g</code> or <code>-g3</code>) and use a debugger (<strong>gdb</strong> for example) to find where is your segmentation fault.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1469610508, "creation_date": 1469610508, "answer_id": 38608539, "question_id": 38608431, "link": "https://stackoverflow.com/questions/38608431/how-to-resolve-the-segmentation-fault-error-in-the-given-c-program/38608539#38608539", "title": "how to resolve the segmentation fault error in the given c program", "body": "<p>First you should check your code indentation, make it more clear for us to read.</p>\n\n<p>Then, give us more information about your segfault : where does it occurs ? You can use tools like Valgrind (on Linux) to find this kind of informations. You just have to build your program with debugging flags (-g on GCC) and run the program with GCC.</p>\n\n<p>The problem here is <code>arrayNum[n]</code> which have the size of a non-initialized variable (n). So this array does not have any allocated space. The access to <code>arrayNum</code> through <code>scanf()</code> create this segfault.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1469612369, "creation_date": 1469612369, "answer_id": 38609244, "question_id": 38608431, "link": "https://stackoverflow.com/questions/38608431/how-to-resolve-the-segmentation-fault-error-in-the-given-c-program/38609244#38609244", "title": "how to resolve the segmentation fault error in the given c program", "body": "<pre><code>int main(){\n  signed long int max,n,d,a,arrayNum[n];  //&lt;&lt; the problem is here,\n                                          //   the content of n is indeterminate\n                                          //   at that state\n  signed long int  max_count; scanf(\"%ld\",&amp;n);\n  ...\n</code></pre>\n\n<p><code>arrayNum[n]</code> is declared <em>before</em> the value of <code>n</code> is entered by the user.</p>\n\n<p>Just change your code to something like that:</p>\n\n<pre><code>int main(){\n  signed long int max,n,d,a;\n  signed long int max_count;\n\n  scanf(\"%ld\",&amp;n);\n  signed long arrayNum[n];\n  ...\n</code></pre>\n\n<p>There may be other issues though.</p>\n\n<p>And as already stated by others: fix the code indentation. Correctly indentend/formatted code is essential so your code can be understood by others (and even more important by yourself).</p>\n"}], "owner": {"reputation": 1, "user_id": 6587887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e31109bd0e1001f8bca6c586ae8af9fa?s=128&d=identicon&r=PG&f=1", "display_name": "user6587887", "link": "https://stackoverflow.com/users/6587887/user6587887"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1469612369, "creation_date": 1469610184, "last_edit_date": 1469610560, "question_id": 38608431, "link": "https://stackoverflow.com/questions/38608431/how-to-resolve-the-segmentation-fault-error-in-the-given-c-program", "title": "how to resolve the segmentation fault error in the given c program", "body": "<p>this is a program to find the maximum occurrence of the largest number in an array.\nhow to resolve the segmentation fault error in this?  hackerrank problem</p>\n\n<pre><code> /* given:\n 1&lt;n&lt;10^5\n 1&lt;arrayNum[n] &lt;10^7 */\n\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\nint main(){\nsigned long int max,n,d,a,arrayNum[n]; \nsigned long int  max_count; scanf(\"%ld\",&amp;n);\nfor( a=0; a &lt; n; a++)\n    {   \n\n       scanf(\"%ld\",&amp;arrayNum[a]);\n    }\n\n\nmax = arrayNum[0];\nmax_count = 1;\nfor (int a = 0; a &lt; n; ++a)\n{\n    if (arrayNum[a] == max)\n      max_count++;\n    else if (arrayNum[a] &gt; max)\n   {\n       max_count = 1;\n       max = arrayNum[a];\n   }\n   }d=max_count;\n   printf(\"%ld\",d);\n     return 0;}\n</code></pre>\n"}, {"tags": ["c++", "c", "attributes", "memory-alignment"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1469608984, "post_id": 38607968, "comment_id": 64602621, "body": "Alignment, most importantly."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1469609044, "post_id": 38607968, "comment_id": 64602665, "body": "There&#39;s no such thing as &quot;ISO C/C++&quot;. Even though the colloquialism &quot;C/C++&quot; is rampant and often understandable, when you&#39;re asking specifically about standardisation I would expect attention to such details."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1469609210, "post_id": 38607968, "comment_id": 64602784, "body": "@KerrekSB Here it appears to be short for &quot;ISO C and/or ISO C++&quot;. This is perfectly ordinary English usage... I just used the word &quot;and/or&quot; but you wouldn&#39;t complain that there&#39;s no logical operator called &quot;and/or&quot;."}, {"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 10, "creation_date": 1469609271, "post_id": 38607968, "comment_id": 64602839, "body": "@KerrekSB &quot;Why aren&#39;t ISO/IEC JTC1/SC22/WG21 committee and ISO/IEC JTC1/SC22/WG14 committee considering to include it in their responsible specs?&quot; Are you satisfied?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469610391, "post_id": 38607968, "comment_id": 64603614, "body": "@nodakai: Why should they? Packing structures does not make much sense in general nowadays, unles you have a very space-limited systrem and even those often have alignment requirements. Enforcing packing would inclrease code/run time which often is even less desirable on such platforms. It is better to manually pack by ordering the members in the declaration from larger to smaller. For marshalling packing alone is insufficient, as it does not care about encoding or endianess."}, {"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1469610987, "post_id": 38607968, "comment_id": 64604030, "body": "@Olaf &quot;Packing structures does not make much sense in general nowadays&quot; If your life is OK without it, I&#39;d not urge you to use it... But it is still <i>very</i> important for applications like TCP packet inspector."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1469612612, "post_id": 38607968, "comment_id": 64605127, "body": "@nodakai: Yes, but it seems arbitrarily pointless to ask for the joint opinion of two largely unrelated bodies. It&#39;s like asking &quot;why don&#39;t my girlfriend and your boss like sushi?&quot;."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469612802, "post_id": 38607968, "comment_id": 64605254, "body": "@Olaf You want a common, standard way of allocating data in memory, using a struct to partition the data is the simplest way of doing that. Ordering the data from large to small is completely irrelevant to this discussion (consider s struct contating uint32_t:2, uint32_t:2). If you still don&#39;t understand why it&#39;s needed, think about a register length of 128bit that has to be written entirely and correctly. What would be easier than representing this with a packed struct? In any case, I don&#39;t see how your comment is relevant to this question, if you don&#39;t see why use it, don&#39;t use it"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469617139, "post_id": 38607968, "comment_id": 64608310, "body": "@nodakai: No it is not. As I wrote, there ae better and implementation-independent ways to marshl/unmarshal serialised data. I had enough rubbish code relying <b>unneccessarily</b> on such hacks. (I don&#39;t talk about systems you have to squench every clock cycle out of the CPU, these need additional compiler-specifics anyway.)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1469617324, "post_id": 38607968, "comment_id": 64608429, "body": "@IshayPeled: Did I miss they removed <code>struct</code>s from the C standard? This is about adding implementation-specific stuff to a general standard successfully aimed at a plethora of very different platforms. There is more to C than x86 or ARM!"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1469617837, "post_id": 38607968, "comment_id": 64608795, "body": "An ISO committee is just not up to a task like this, its role is to make the stake holders equally unhappy.  Everybody solved this common need a different way, equal unhappiness is only achieved by adding a <a href=\"https://xkcd.com/927/\" rel=\"nofollow noreferrer\">10th way to do it</a>.  A &quot;benevolent dictator&quot; can do this sort of thing, no good candidates in C and C++ land."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1469625658, "post_id": 38607968, "comment_id": 64614653, "body": "@HansPassant Maybe Olaf it up to the job (;"}], "answers": [{"tags": [], "owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1469628416, "creation_date": 1469628416, "answer_id": 38615294, "question_id": 38607968, "link": "https://stackoverflow.com/questions/38607968/what-prevents-attribute-packed-from-getting-into-iso-c-c/38615294#38615294", "title": "What prevents __attribute__((packed)) from getting into ISO C/C++?", "body": "<blockquote>\n  <p>Why isn't the committee considering to support it officially?</p>\n</blockquote>\n\n<p>Because nobody proposed it. The closest thing to such a proposal was <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3986.pdf\" rel=\"nofollow\">N3986 (PDF)</a>, which only works for bitfields. The <a href=\"https://cplusplus.github.io/EWG/ewg-active.html#122\" rel=\"nofollow\">comments from the discussion</a> suggest that the committee would be interested, but they want to understand what existing practice does before trying to move forward on standardizing it.</p>\n\n<p>Since then, whomever was responsible for that proposal decided not to continue to pursue it.</p>\n"}], "owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 38615294, "answer_count": 1, "score": 8, "last_activity_date": 1469628416, "creation_date": 1469608892, "last_edit_date": 1495541321, "question_id": 38607968, "link": "https://stackoverflow.com/questions/38607968/what-prevents-attribute-packed-from-getting-into-iso-c-c", "title": "What prevents __attribute__((packed)) from getting into ISO C/C++?", "body": "<p>This is one of the most important reasons for me to use C/C++ in writing some classes of system software, but it's been nothing more than a compiler extension which happens to be very common.\nWhy isn't the committee considering to support it officially? Was it incompatible with any clauses in the existing spec, such as <a href=\"https://stackoverflow.com/questions/36149462/does-public-and-private-have-any-influence-on-the-memory-layout-of-an-object\">Does public and private have any influence on the memory layout of an object?</a></p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 6, "creation_date": 1469607994, "post_id": 38607575, "comment_id": 64601980, "body": "<code>sizeof(data)</code> is evaluated at <i>compile time</i> to the size of the <code>int</code> type. It has nothing to do with how many numbers your input line has."}, {"owner": {"reputation": 446, "user_id": 2380402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/006504c689dc4b57b82883f1e93cda9f?s=128&d=identicon&r=PG", "display_name": "AdiechaHK", "link": "https://stackoverflow.com/users/2380402/adiechahk"}, "edited": false, "score": 0, "creation_date": 1469608111, "post_id": 38607575, "comment_id": 64602056, "body": "You must have some trigger point to end your input and then you can count them and show the count."}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1469608128, "post_id": 38607575, "comment_id": 64602063, "body": "<code>sizeof(data)</code> is constant the size of the type of data (int) maybe 4. So your loop will run 4 times, no matter what you type as input."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 5, "creation_date": 1469608726, "post_id": 38607575, "comment_id": 64602466, "body": "Why should <code>1 2 65 3 4 7</code> give the output 8 ?"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 3, "last_activity_date": 1469611700, "last_edit_date": 1469611700, "creation_date": 1469608091, "answer_id": 38607698, "question_id": 38607575, "link": "https://stackoverflow.com/questions/38607575/how-to-find-the-length-of-an-input/38607698#38607698", "title": "How to find the length of an input", "body": "<p>You are printing <code>i</code> which have no relation to the input at all. So no matter what your input is, you'll get <code>1234</code></p>\n\n<p><code>sizeof(data)</code> is the same as <code>sizeof(int)</code>, i.e. a constant with value 4 on your system.</p>\n\n<p>If you want to count the number of numbers and don't care about the value of the individual number, you could do:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void) {\n    char s[1024];\n    char* p;\n    int i = 0;   \n    fgets(s, 1024, stdin);\n    p=s;\n\n    while (*p != '\\0')\n    {\n        if (!isdigit(*p))\n        {\n            p++;\n        }\n        else\n        {\n            i++;  // Found new number\n\n            // Search for a delimiter, i.e. skip all digits\n            p++;\n            while (*p != '\\0' &amp;&amp; isdigit(*p))\n            {\n                p++;\n            }\n        }   \n    }\n\n    printf(\"We found %d numbers\", i);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>We found 6 numbers\n</code></pre>\n\n<p>Notice that this code will accept any non-digit input as delimiter.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 3795294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d2a3eb03d0f48be1ffb686741c235?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lymphater", "link": "https://stackoverflow.com/users/3795294/a-lymphater"}, "is_accepted": false, "score": 1, "last_activity_date": 1469608294, "creation_date": 1469608294, "answer_id": 38607757, "question_id": 38607575, "link": "https://stackoverflow.com/questions/38607575/how-to-find-the-length-of-an-input/38607757#38607757", "title": "How to find the length of an input", "body": "<p>put the scanf before the while-loop and move the printf after the while-loop. </p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1469609000, "post_id": 38607798, "comment_id": 64602634, "body": "This is not what the OP was asking. He just wants to enter some numbers separated by space on one line and count the number of numbers entered."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1469609042, "post_id": 38607798, "comment_id": 64602663, "body": "SO is not a Tutorial Site."}], "tags": [], "owner": {"reputation": 446, "user_id": 2380402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/006504c689dc4b57b82883f1e93cda9f?s=128&d=identicon&r=PG", "display_name": "AdiechaHK", "link": "https://stackoverflow.com/users/2380402/adiechahk"}, "is_accepted": false, "score": -1, "last_activity_date": 1469608411, "creation_date": 1469608411, "answer_id": 38607798, "question_id": 38607575, "link": "https://stackoverflow.com/questions/38607575/how-to-find-the-length-of-an-input/38607798#38607798", "title": "How to find the length of an input", "body": "<p>I'm also providing solution according to my openion.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n    int data = 1;\n    int i = 0;   \n    // here data != 0 is trigger point for end input,\n    // once you done with your inputs you need to last add 0 to terminate\n    while (data != 0) {\n        scanf(\"%d\", &amp;data)\n        printf(\"Collected Data: %d\", data);\n        i++;\n    }\n    printf(\"Total number of inputs are %d.\", i);\n}\n</code></pre>\n\n<p>Hope this solution helps you.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1469613915, "post_id": 38608239, "comment_id": 64606087, "body": "SO is not a Tutorial Site."}], "tags": [], "owner": {"reputation": 3, "user_id": 6638798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9488853d93220bae3f3c3fb7dabd3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill Saidov", "link": "https://stackoverflow.com/users/6638798/kirill-saidov"}, "is_accepted": false, "score": -1, "last_activity_date": 1469609650, "creation_date": 1469609650, "answer_id": 38608239, "question_id": 38607575, "link": "https://stackoverflow.com/questions/38607575/how-to-find-the-length-of-an-input/38608239#38608239", "title": "How to find the length of an input", "body": "<p>Here is my solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int i = 0;\n    int data[100]; // creating an array\n\n    while(1) { // the loop will run forever\n        scanf(\"%d\", &amp;data[i]);\n\n        if (data[i] == -1) { //unless data[i] = -1\n            break; // exit while-loop\n        }\n\n        i++;\n    }\n\n    printf(\"%d\\n\", data[2]); // print 2nd integer in data[]\n\n    return 0;\n}\n</code></pre>\n\n<p>Do not forget to hit enter once you entered an int. Output of the program:</p>\n\n<pre><code>2\n56\n894\n34\n6\n12\n-1\n\n894\n</code></pre>\n\n<p>Hope that helps. :)</p>\n"}], "owner": {"reputation": 247, "user_id": 3912684, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a87dad1c5b5b9a57f0623ceeb869584a?s=128&d=identicon&r=PG&f=1", "display_name": "Moh&#39;d H", "link": "https://stackoverflow.com/users/3912684/mohd-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1469611700, "creation_date": 1469607744, "question_id": 38607575, "link": "https://stackoverflow.com/questions/38607575/how-to-find-the-length-of-an-input", "title": "How to find the length of an input", "body": "<p>i am trying to measure how many numbers my input has.\nif i input the following line: <code>1 2 65 3 4 7</code>,\ni want the output to be <code>8</code>.but what I'm getting is 1 2 3 4.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n    int data;\n    int i = 1;   \n    while (i &lt;= sizeof(data)) {\n        scanf(\"%d\", &amp;data)\n        printf(\"%d\", i);\n        i++;\n    }\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "c", "networking"], "comments": [{"owner": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "edited": false, "score": 1, "creation_date": 1469609882, "post_id": 38607425, "comment_id": 64603274, "body": "You should probably check to see if the .c file is even being compiled by Xcode.  if you put a line of garbage code into the <code>getdefaultgateway</code> function, does Xcode stop compiling and throw an error there?"}, {"owner": {"reputation": 531, "user_id": 3423040, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/1673363602/picture?type=large", "display_name": "Jongers", "link": "https://stackoverflow.com/users/3423040/jongers"}, "reply_to_user": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "edited": false, "score": 0, "creation_date": 1469610502, "post_id": 38607425, "comment_id": 64603675, "body": "Yup , I just checked it and .c gets compiled. Maybe it has to do something with my class having .mm extensions? I had problems before when my class doesn&#39;t accept automatic casting."}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 3423040, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/1673363602/picture?type=large", "display_name": "Jongers", "link": "https://stackoverflow.com/users/3423040/jongers"}, "edited": false, "score": 0, "creation_date": 1469610942, "post_id": 38608618, "comment_id": 64603997, "body": "That&#39;s great bro! Where did you learn that? I tried adding codes that I think of to make something work like casting, etc. but I probably couldn&#39;t think of doing that. High five!"}], "tags": [], "owner": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1469610708, "last_edit_date": 1495540979, "creation_date": 1469610708, "answer_id": 38608618, "question_id": 38607425, "link": "https://stackoverflow.com/questions/38607425/undefined-symbols-for-architecture-arm64-getdefaultgatewayunsigned-int/38608618#38608618", "title": "Undefined symbols for architecture arm64: &quot;getdefaultgateway(unsigned int*)&quot;", "body": "<p>Yes.  <code>.mm</code> was my next question to you.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3789340/combining-c-and-c-how-does-ifdef-cplusplus-work\">You're running into C++ name mangling issues</a>.</p>\n\n<p>In whichever .h file where you define and ultimately include/import the <code>getdefaultgateway</code> function, add this before:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n</code></pre>\n\n<p>and after:</p>\n\n<pre><code>#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 3423040, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/1673363602/picture?type=large", "display_name": "Jongers", "link": "https://stackoverflow.com/users/3423040/jongers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 38608618, "answer_count": 1, "score": 0, "last_activity_date": 1469610708, "creation_date": 1469607253, "last_edit_date": 1495535359, "question_id": 38607425, "link": "https://stackoverflow.com/questions/38607425/undefined-symbols-for-architecture-arm64-getdefaultgatewayunsigned-int", "title": "Undefined symbols for architecture arm64: &quot;getdefaultgateway(unsigned int*)&quot;", "body": "<p>I'm trying to get the gateway ip address of the wifi I'm connected to. I'm using the answer in this <a href=\"https://stackoverflow.com/questions/4872196/how-to-get-the-wifi-gateway-address-on-the-iphone/9173849#9173849\">question</a> but I'm getting an error on the codes.</p>\n\n<p>When I use this in my project</p>\n\n<pre><code>- (NSString *)getGatewayIP {\n    NSString *ipString = nil;\n    struct in_addr gatewayaddr;\n    int r = getdefaultgateway(&amp;(gatewayaddr.s_addr));\n    if(r &gt;= 0) {\n        ipString = [NSString stringWithFormat: @\"%s\",inet_ntoa(gatewayaddr)];\n        NSLog(@\"default gateway : %@\", ipString );\n    } else {\n        NSLog(@\"getdefaultgateway() failed\");\n    }\n\n    return ipString;\n}\n</code></pre>\n\n<p>I get this error when I try to build my project:</p>\n\n<p><code>Undefined symbols for architecture arm64: \"getdefaultgateway(unsigned int*)\"</code></p>\n\n<p>Here is the <code>getgateway.c</code></p>\n\n<pre><code>int getdefaultgateway(in_addr_t * addr)\n{\n    int mib[] = {CTL_NET, PF_ROUTE, 0, AF_INET,\n        NET_RT_FLAGS, RTF_GATEWAY};\n    size_t l;\n    char * buf, * p;\n    struct rt_msghdr * rt;\n    struct sockaddr * sa;\n    struct sockaddr * sa_tab[RTAX_MAX];\n    int i;\n    int r = -1;\n    if(sysctl(mib, sizeof(mib)/sizeof(int), 0, &amp;l, 0, 0) &lt; 0) {\n        return -1;\n    }\n    if(l&gt;0) {\n        buf = malloc(l);\n        if(sysctl(mib, sizeof(mib)/sizeof(int), buf, &amp;l, 0, 0) &lt; 0) {\n            return -1;\n        }\n        for(p=buf; p&lt;buf+l; p+=rt-&gt;rtm_msglen) {\n            rt = (struct rt_msghdr *)p;\n            sa = (struct sockaddr *)(rt + 1);\n            for(i=0; i&lt;RTAX_MAX; i++) {\n                if(rt-&gt;rtm_addrs &amp; (1 &lt;&lt; i)) {\n                    sa_tab[i] = sa;\n                    sa = (struct sockaddr *)((char *)sa + ROUNDUP(sa-&gt;sa_len));\n                } else {\n                    sa_tab[i] = NULL;\n                }\n            }\n\n            if( ((rt-&gt;rtm_addrs &amp; (RTA_DST|RTA_GATEWAY)) == (RTA_DST|RTA_GATEWAY))\n               &amp;&amp; sa_tab[RTAX_DST]-&gt;sa_family == AF_INET\n               &amp;&amp; sa_tab[RTAX_GATEWAY]-&gt;sa_family == AF_INET) {\n\n\n                if(((struct sockaddr_in *)sa_tab[RTAX_DST])-&gt;sin_addr.s_addr == 0) {\n                    char ifName[128];\n                    if_indextoname(rt-&gt;rtm_index,ifName);\n\n                    if(strcmp(\"en0\",ifName)==0){\n\n                        *addr = ((struct sockaddr_in *)(sa_tab[RTAX_GATEWAY]))-&gt;sin_addr.s_addr;\n                        r = 0;\n                    }\n                }\n            }\n        }\n        free(buf);\n    }\n    return r;\n}\n</code></pre>\n\n<p>Do I need to add frameworks? I've got no idea how to make it work.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 0, "creation_date": 1469607326, "post_id": 38607373, "comment_id": 64601527, "body": "parser is a type, not a variable. Remove typedef in the first piece of code."}, {"owner": {"reputation": 15, "user_id": 6146126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f72129ab230b9ebb2ea186e427259d?s=128&d=identicon&r=PG&f=1", "display_name": "astonished", "link": "https://stackoverflow.com/users/6146126/astonished"}, "reply_to_user": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 0, "creation_date": 1469607383, "post_id": 38607373, "comment_id": 64601560, "body": "@AntonioGarrido Yes sorry"}, {"owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 0, "creation_date": 1469607396, "post_id": 38607373, "comment_id": 64601572, "body": "I am not sure about the question... Are you looking for something like: <code>int strategy= (parser-&gt;buffer_push_strategy == buffer_push_strategy1) ? 1 : 2;</code>"}, {"owner": {"reputation": 15, "user_id": 6146126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f72129ab230b9ebb2ea186e427259d?s=128&d=identicon&r=PG&f=1", "display_name": "astonished", "link": "https://stackoverflow.com/users/6146126/astonished"}, "reply_to_user": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 0, "creation_date": 1469607517, "post_id": 38607373, "comment_id": 64601657, "body": "Yes @AntonioGarrido, something like that, in my test I write something like <code>REQUIRE(parser-&gt;buffer_push_strategy == buffer_push_strategy1)</code> when <code>some_cond</code> is <code>true</code>;"}, {"owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "edited": false, "score": 0, "creation_date": 1469607601, "post_id": 38607373, "comment_id": 64601711, "body": "Your new code still has the same problem. Again, you are defining the type parser"}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 2139056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656bbf7ba2db699cbdb0413bc283595a?s=128&d=identicon&r=PG", "display_name": "mooncheese", "link": "https://stackoverflow.com/users/2139056/mooncheese"}, "is_accepted": false, "score": 0, "last_activity_date": 1469607691, "creation_date": 1469607691, "answer_id": 38607560, "question_id": 38607373, "link": "https://stackoverflow.com/questions/38607373/checking-function-pointers-type/38607560#38607560", "title": "Checking function pointers type", "body": "<p>You can compare function pointers</p>\n\n<pre><code>if(p.buffer_push_strategy == buffer_push_strategy1)\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/QQzL1c\" rel=\"nofollow\">https://ideone.com/QQzL1c</a></p>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "is_accepted": true, "score": 0, "last_activity_date": 1469607832, "creation_date": 1469607832, "answer_id": 38607605, "question_id": 38607373, "link": "https://stackoverflow.com/questions/38607373/checking-function-pointers-type/38607605#38607605", "title": "Checking function pointers type", "body": "<p>parser is a variable:</p>\n\n<pre><code>struct parserT {\n    int (*buffer_push_strategy)();\n    int (*escape_buffer_push_strategy)();\n    int (*do_callback_strategy)();\n} parser;\n</code></pre>\n\n<p>If you want to know which the strategy is, you could use:</p>\n\n<pre><code>int strategy= (parser-&gt;buffer_push_strategy == buffer_push_strategy1) ? 1 : 2;\n</code></pre>\n\n<p>Perhaps, you prefer to store the strategy number:</p>\n\n<pre><code>int parser_init() {    \n    if (some_condition) {\n        parser-&gt;buffer_push_strategy = buffer_push_strategy1;\n        parser-&gt;escape_buffer_push_strategy = escape_buffer_push_strategy1;\n        parser-&gt;do_callback_strategy = do_callback_strategy1;\n        return 1;\n    }\n    else {\n        parser-&gt;buffer_push_strategy = buffer_push_strategy2;\n        parser-&gt;escape_buffer_push_strategy = escape_buffer_push_strategy2;\n        parser-&gt;do_callback_strategy = do_callback_strategy2;\n        return 2;\n    }\n}\n</code></pre>\n\n<p>Then, you could init the parser as:</p>\n\n<pre><code>const int STRATEGY= parser_init();\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6146126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f72129ab230b9ebb2ea186e427259d?s=128&d=identicon&r=PG&f=1", "display_name": "astonished", "link": "https://stackoverflow.com/users/6146126/astonished"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 38607605, "answer_count": 2, "score": 1, "last_activity_date": 1469607832, "creation_date": 1469607124, "last_edit_date": 1469607449, "question_id": 38607373, "link": "https://stackoverflow.com/questions/38607373/checking-function-pointers-type", "title": "Checking function pointers type", "body": "<p>Let define a structure <code>parser</code>  :</p>\n\n<pre><code>struct parser {\n    int (*buffer_push_strategy)();\n    int (*escape_buffer_push_strategy)();\n    int (*do_callback_strategy)();\n};\n</code></pre>\n\n<p>I have an initialization function :</p>\n\n<pre><code>int parser_init() {    \n    if (some_condition) {\n        parser-&gt;buffer_push_strategy = buffer_push_strategy1;\n        parser-&gt;escape_buffer_push_strategy = escape_buffer_push_strategy1;\n        parser-&gt;do_callback_strategy = do_callback_strategy1;\n    }\n    else {\n        parser-&gt;buffer_push_strategy = buffer_push_strategy2;\n        parser-&gt;escape_buffer_push_strategy = escape_buffer_push_strategy2;\n        parser-&gt;do_callback_strategy = do_callback_strategy2;\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>where the strategy functions are defined somewhere.</p>\n\n<p>Ok, so my interest is to determine which strategy has been used when I write the unit tests. Any idea how to accomplish that? </p>\n\n<p>I saw something on internet about <code>is_pointer</code> function from <code>C++ 11</code>, but I don`t think this would help me.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1469604028, "post_id": 38606183, "comment_id": 64599385, "body": "What is the declaration of the <code>pair_t</code> type? It looks like <code>pair_t.data</code> is <code>void*</code>, not <code>WebPage*</code>."}, {"owner": {"reputation": 41, "user_id": 6612852, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8d3RRBOWPt0/AAAAAAAAAAI/AAAAAAAAAAA/vf0WtdzXDsY/photo.jpg?sz=128", "display_name": "dirtyb", "link": "https://stackoverflow.com/users/6612852/dirtyb"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469604319, "post_id": 38606183, "comment_id": 64599589, "body": "Oh, you&#39;re right, pair_t.data is void*. So how could I cast data to be of type WebPage?"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1469604340, "creation_date": 1469604340, "answer_id": 38606452, "question_id": 38606183, "link": "https://stackoverflow.com/questions/38606183/pointer-error-when-trying-to-free-structure-element/38606452#38606452", "title": "Pointer error when trying to free structure element", "body": "<p>As the error message says, <code>temp-&gt;data</code> is <code>void*</code>, so you can't use <code>temp-&gt;data-&gt;html</code> and <code>temp-&gt;data-&gt;url</code>. You need to cast it to <code>WebPage*</code> to access these members.</p>\n\n<pre><code>free(((WebPage*)temp-&gt;data)-&gt;html);\nfree(((WebPage*)temp-&gt;data)-&gt;url);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6612852, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8d3RRBOWPt0/AAAAAAAAAAI/AAAAAAAAAAA/vf0WtdzXDsY/photo.jpg?sz=128", "display_name": "dirtyb", "link": "https://stackoverflow.com/users/6612852/dirtyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 38606452, "answer_count": 1, "score": -1, "last_activity_date": 1469604457, "creation_date": 1469603651, "last_edit_date": 1469604125, "question_id": 38606183, "link": "https://stackoverflow.com/questions/38606183/pointer-error-when-trying-to-free-structure-element", "title": "Pointer error when trying to free structure element", "body": "<p>I am having an issue freeing the memory associated with an element of an instance of a structure defined as follows:</p>\n\n<pre><code>typedef struct WebPage {\n  char *url;                               // url of the page\n  char *html;                              // html code of the page\n  size_t html_len;                         // length of html code\n  int depth;                               // depth of crawl\n} WebPage;\n</code></pre>\n\n<p>I attempt to free it using:</p>\n\n<pre><code>static void setDestroy(set_t *set){\n\n  pair_t *temp2;\n\n  if(set!=NULL&amp;&amp;set-&gt;head!=NULL){\n    //store the head in a temporary pair\n    pair_t *temp = set-&gt;head;\n    //cycle through LL items, freeing contents and then structure instances\n    while(temp!=NULL){\n      temp2 = temp-&gt;next;\n      free(temp-&gt;data-&gt;url);\n      free(temp-&gt;data-&gt;html);\n      free(temp-&gt;data);\n      free(temp-&gt;key);\n      free(temp);\n      temp = temp2;\n    }\n    set-&gt;head = NULL;\n  }\n\n  free(set);\n  return;\n\n}\n</code></pre>\n\n<p>However I get this error:</p>\n\n<pre><code>gcc -Wall -pedantic -std=c11 -ggdb   -c -o crawler.o crawler.c\ncrawler.c: In function \u2018setDestroy\u2019:\ncrawler.c:428:22: warning: dereferencing \u2018void *\u2019 pointer\n       free(temp-&gt;data-&gt;url);\n                      ^\ncrawler.c:428:22: error: request for member \u2018url\u2019 in something not a structure or union\ncrawler.c:429:22: warning: dereferencing \u2018void *\u2019 pointer\n       free(temp-&gt;data-&gt;html);\n                      ^\ncrawler.c:429:22: error: request for member \u2018html\u2019 in something not a structure or union\n&lt;builtin&gt;: recipe for target 'crawler.o' failed\n</code></pre>\n\n<p>Any ideas on what I might be doing incorrectly? I tried to cast temp->data->url as a string to no avail.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "console-output"], "comments": [{"owner": {"reputation": 2873, "user_id": 1719755, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/EGRbw.jpg?s=128&g=1", "display_name": "lordkain", "link": "https://stackoverflow.com/users/1719755/lordkain"}, "edited": false, "score": 0, "creation_date": 1469600521, "post_id": 38605120, "comment_id": 64597288, "body": "can u use function usleep, here you can pass arguments in miliseconds instead of seconds. Also look at <a href=\"http://stackoverflow.com/questions/14818084/what-is-the-proper-include-for-the-function-sleep-in-c\" title=\"what is the proper include for the function sleep in c\">stackoverflow.com/questions/14818084/&hellip;</a>"}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 3, "creation_date": 1469600562, "post_id": 38605120, "comment_id": 64597319, "body": "use <a href=\"http://linux.die.net/man/3/fflush\" rel=\"nofollow noreferrer\"><code>fflush</code></a> after putchar"}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1469600556, "creation_date": 1469600556, "answer_id": 38605189, "question_id": 38605120, "link": "https://stackoverflow.com/questions/38605120/getting-text-to-print-character-by-character-in-c/38605189#38605189", "title": "getting text to print character by character in C", "body": "<p>That's because the standard output is line buffered by default.</p>\n\n<p>Flush the output after each character like this:</p>\n\n<pre><code>putchar(words[i]);\nfflush(stdout);  //&lt;---\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1469607090, "post_id": 38605190, "comment_id": 64601392, "body": "You forgot to <code>#include &lt;string.h&gt;</code> and <code>#include &lt;unistd.h&gt;</code> in your answer."}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 4, "last_activity_date": 1469601791, "last_edit_date": 1469601791, "creation_date": 1469600560, "answer_id": 38605190, "question_id": 38605120, "link": "https://stackoverflow.com/questions/38605120/getting-text-to-print-character-by-character-in-c/38605190#38605190", "title": "getting text to print character by character in C", "body": "<p><code>stdio</code> is buffered to make it more efficient, writing a single character isn't enough to get it to write it's buffer to the console. You need to flush stdout:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int i;\n    char words[] = \"Hello this is text.\\n\";\n    for(i = 0; i &lt; strlen(words); i++) {\n        sleep(1);\n        putchar(words[i]);\n        fflush(stdout);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4013772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vXvSf.jpg?s=128&g=1", "display_name": "Mr.Prime", "link": "https://stackoverflow.com/users/4013772/mr-prime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1469604035, "creation_date": 1469600329, "question_id": 38605120, "link": "https://stackoverflow.com/questions/38605120/getting-text-to-print-character-by-character-in-c", "title": "getting text to print character by character in C", "body": "<pre><code>int main() {\n    int i;\n    char words[] = \"Hello this is text.\\n\";\n    for(i = 0; i &lt; strlen(words); i++) {\n        sleep(1);\n        putchar(words[i]);\n    }\n}\n</code></pre>\n\n<p>I've been attempting to have the program output the text slowly, character by character into the console (to look like someone is typing it). However instead when I run this code I get one massive pause, and then it prints the whole string at once. How do I get this to work. </p>\n\n<p>(also no C++ solutions please)</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1469597440, "post_id": 38604278, "comment_id": 64595869, "body": "Which platform?  That&#39;s normal on Mac OS X, for example.  Also, how did you use the functions from <code>&lt;math.h&gt;</code>?  If the values could be computed by the compiler, then they probably were and the functions needn&#39;t be called in the executable, so the linking wouldn&#39;t notice that you didn&#39;t link with the maths library."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1469597962, "post_id": 38604278, "comment_id": 64596075, "body": "Add a <code>-v</code> to your command line and you&#39;ll immediately see what&#39;s going on."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 2, "creation_date": 1469601150, "post_id": 38604278, "comment_id": 64597620, "body": "Is that a copy-paste of the exact code you&#39;re using? Because <code>sqrt()</code> only takes one argument, not two."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469601353, "post_id": 38604278, "comment_id": 64597742, "body": "gcc fixed this bug a while ago"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469601701, "post_id": 38604278, "comment_id": 64597936, "body": "@M.M Which bug? Not having to <code>-lm</code>? Or <code>sqrt()</code> not taking two arguments ;-)"}, {"owner": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469605954, "post_id": 38604278, "comment_id": 64600652, "body": "sorry I added 3.0 for some reason"}], "answers": [{"comments": [{"owner": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469599131, "post_id": 38604546, "comment_id": 64596557, "body": "Nope even with the -fno-builtin and -Wall flags it still compiles without an error"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469599199, "post_id": 38604546, "comment_id": 64596594, "body": "Please reduce your program to the shortest possible program that still demonstrates your question. Please copy-paste that program into your question. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more info."}, {"owner": {"reputation": 12946, "user_id": 6064933, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zto2h.jpg?s=128&g=1", "display_name": "jdhao", "link": "https://stackoverflow.com/users/6064933/jdhao"}, "edited": false, "score": 0, "creation_date": 1607605966, "post_id": 38604546, "comment_id": 115329021, "body": "I was able to reproduce the above error with the option <code>-fno-builtin</code>. Without it, the program compiles even if I haven&#39;t specified the <code>-lm</code> option to gcc."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 12946, "user_id": 6064933, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zto2h.jpg?s=128&g=1", "display_name": "jdhao", "link": "https://stackoverflow.com/users/6064933/jdhao"}, "edited": false, "score": 0, "creation_date": 1607629665, "post_id": 38604546, "comment_id": 115340128, "body": "@jdhao - That is precisely the same behavior I describe in my answer."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 3, "last_activity_date": 1469601250, "last_edit_date": 1469601250, "creation_date": 1469597949, "answer_id": 38604546, "question_id": 38604278, "link": "https://stackoverflow.com/questions/38604278/c-libm-a-not-needed-to-be-linked-when-compiling/38604546#38604546", "title": "C libm.a not needed to be linked when compiling", "body": "<p>The math functions you call are implemented by compiler built-in functions. Try the following if you want to see an error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc -fno-builtin -Wall filename.c -o executablename\n</code></pre>\n\n<p>For example, on my platform (Ubuntu 14.04.3 LTS), I get this error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat x.c\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    double x = sqrt(2.0);\n    printf (\"The sqrt of 2 is: %f\\n\", x);\n    return 0;\n}\n$ gcc -fno-builtin x.c\n/tmp/ccpjG2Pb.o: In function `main':\nx.c:(.text+0x1c): undefined reference to `sqrt'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469599862, "post_id": 38604951, "comment_id": 64596937, "body": "What if I&#39;m using gcc on cygwin"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "reply_to_user": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469601299, "post_id": 38604951, "comment_id": 64597699, "body": "@hemel Check what libraries are linked against your compiled executable. On an ordinary Unix system, this would be done with <code>ldd a.out</code>. You might spot <code>libm</code> in there.  It&#39;s never <i>wrong</i> to link with <code>-lm</code> when you use math functions... and since this has to do with linking rather than compiling, I don&#39;t think <code>-Wall</code> would do very much in terms of reporting (since it mainly deals with code issues, not linking issues)."}], "tags": [], "owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "is_accepted": false, "score": 0, "last_activity_date": 1469599655, "creation_date": 1469599655, "answer_id": 38604951, "question_id": 38604278, "link": "https://stackoverflow.com/questions/38604278/c-libm-a-not-needed-to-be-linked-when-compiling/38604951#38604951", "title": "C libm.a not needed to be linked when compiling", "body": "<p>Some compilers, like the current <code>clang</code> on OS X (which masquerades as <code>gcc</code>) do not need to be told to link your executable with the math library.</p>\n\n<p>The <code>clang</code> on OS X will link your executable with <code>/usr/lib/libSystem.B.dylib</code> (and only this for a simple program).  This library in turn uses the library <code>/usr/lib/system/libsystem_m.dylib</code> which is the math library.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1469602733, "post_id": 38605759, "comment_id": 64598558, "body": "Another historical reason for the separate maths library was that some machines didn&#39;t have hardware floating point and so needed a software emulation library, while others did have hardware floating point and didn&#39;t need the emulation.  This was easier to manage if the two libraries were separate."}, {"owner": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469603119, "post_id": 38605759, "comment_id": 64598793, "body": "Does that mean that libc.a may support functions of libm.a?"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "reply_to_user": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469604174, "post_id": 38605759, "comment_id": 64599481, "body": "@hemel The <code>libc</code> (or whatever the system chooses to call it) can contain everything, including math, cryptographic, networking and graphics rendering routines if it makes sense on a particular platform."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "edited": false, "score": 0, "creation_date": 1469604277, "post_id": 38605759, "comment_id": 64599562, "body": "@hemel, I suppose you mean if it can contain functions from <code>&lt;math.h&gt;</code>? Yes. How the linking is done is not part of the C standard."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 0, "last_activity_date": 1469602492, "creation_date": 1469602492, "answer_id": 38605759, "question_id": 38604278, "link": "https://stackoverflow.com/questions/38604278/c-libm-a-not-needed-to-be-linked-when-compiling/38605759#38605759", "title": "C libm.a not needed to be linked when compiling", "body": "<p>The functions in <code>&lt;math.h&gt;</code> (or the preferable <code>&lt;tgmath.h&gt;</code>) are part of the C library just as many other functions. It is platform dependent if all the functions in the C library are actually linked in one single library or separately in multiple chunks.</p>\n\n<p>In ancient times the size of the libraries was a problem for link time, the larger a library was, the longer it took to link executables that had many unresolved symbols. These times are long gone, but the separation on some platforms into <code>libc.a</code> and <code>libm.a</code> prevails.</p>\n\n<p>If your platform doesn't need <code>-lm</code> for linking it should have a dummy (empty) version of <code>libm.a</code> just that there is no error when you have that on your link command line. This is for example the case for the <a href=\"http://www.musl-libc.org/\" rel=\"nofollow\">musl</a> C library that is at the base of Alpine Linux.</p>\n"}], "owner": {"reputation": 564, "user_id": 6233826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef6264cd8c555f353eaa65df94ef136a?s=128&d=identicon&r=PG&f=1", "display_name": "dannyjee", "link": "https://stackoverflow.com/users/6233826/dannyjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4457, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1469605966, "creation_date": 1469596748, "last_edit_date": 1469605966, "question_id": 38604278, "link": "https://stackoverflow.com/questions/38604278/c-libm-a-not-needed-to-be-linked-when-compiling", "title": "C libm.a not needed to be linked when compiling", "body": "<p>I was trying to compile a source file that includes <code>&lt;math.h&gt;</code>. \nHowever I succeeded in creating an executable, no error without linking to <code>libm.a</code>. </p>\n\n<p>The command I typed was <code>gcc -Wall filename.c -o executablename</code></p>\n\n<p>I was told to link to the external libraries (i.e/ libraries other than libc.a)</p>\n\n<p>What's going on? </p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    double x = sqrt(2.0);\n    printf (\"The sqrt of 2 is: %f\\n\", x);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1469592954, "post_id": 38603550, "comment_id": 64594432, "body": "Inside a loop <code>scanf(&quot;%d&quot;,%x);</code> would work fine . As soon as new line in encountered <code>fgets</code> will return. Or else to read line by line put <code>fgets</code> inside a <code>while</code> loop."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469593678, "post_id": 38603550, "comment_id": 64594623, "body": "You could call <code>fgets</code> more than once? <code>fgets</code> reads one line."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1469594877, "creation_date": 1469594877, "answer_id": 38603932, "question_id": 38603550, "link": "https://stackoverflow.com/questions/38603550/how-to-read-an-indefinite-number-of-variables-from-scanf-separated-by-space-or/38603932#38603932", "title": "How to read an indefinite number of variables from scanf (separated by space or new lines)", "body": "<p>Instead of using <code>fgets</code> and then <code>sscanf</code>, you can just use <code>fscanf/scanf</code> in a <code>while</code> loop.</p>\n\n<pre><code>int main(){\n    int a;\n    while ( fscanf(stdin, \"%d\", &amp;a) == 1 )\n    {\n       while(a-- &gt; 0){\n          printf(\"*\");\n       }\n       printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1469595155, "post_id": 38603933, "comment_id": 64595115, "body": "<code>fgets</code> will return <code>NULL</code> on error or EOF , so instead of comparing with <code>0</code> use <code>NULL</code>. And instead of comparing <code>sscanf</code>&#39;s return with <code>EOF</code>, you could use the number of arguments it correctly matches . So it could be <code>sscanf(...) == 2;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1469632026, "post_id": 38603933, "comment_id": 64619581, "body": "@ameyCU &quot;it could be <code>sscanf(...) == 1;</code>&quot;  <code>&quot;%n&quot;</code> does not contribute to the return value."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469632402, "post_id": 38603933, "comment_id": 64619847, "body": "Although OP mentioned numeric input, with non-numeric import this answer will exhibit undefined behavior (UB): (<code>j</code> used before iniitalized).  Recommend <code>sscanf(buffer+i,&quot;%d %n&quot;,&amp;a,&amp;j) == 1</code>"}], "tags": [], "owner": {"reputation": 58, "user_id": 6622777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b336d6de12f884ad7d7fa4e66d500840?s=128&d=identicon&r=PG&f=1", "display_name": "BobWanghz", "link": "https://stackoverflow.com/users/6622777/bobwanghz"}, "is_accepted": true, "score": 1, "last_activity_date": 1469594877, "creation_date": 1469594877, "answer_id": 38603933, "question_id": 38603550, "link": "https://stackoverflow.com/questions/38603550/how-to-read-an-indefinite-number-of-variables-from-scanf-separated-by-space-or/38603933#38603933", "title": "How to read an indefinite number of variables from scanf (separated by space or new lines)", "body": "<p>Your code is to read a line input number,and then <code>printf</code> the number of <code>#</code>.You just call <code>fgets</code> once,so it only reads the first line of the input.You can use <code>while</code> :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    char buffer[1000];\n    while (fgets(buffer, sizeof(buffer), stdin) != 0){\n        int i,j,a;\n        for(i=0; sscanf(buffer+i,\"%d%n\",&amp;a,&amp;j)!=EOF; i+=j){\n            while(a--&gt;0){\n                printf(\"#\");\n            }\n            printf(\"\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>By the way,<code>scanf</code> is just for learning,it have little usefull in real programe,so do not spent to much time in it.</p>\n"}], "owner": {"reputation": 21, "user_id": 6642680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a3ba89bbd69205b70c68c8677bbdca4b?s=128&d=identicon&r=PG&f=1", "display_name": "Mil3d", "link": "https://stackoverflow.com/users/6642680/mil3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 38603933, "answer_count": 2, "score": 0, "last_activity_date": 1469594877, "creation_date": 1469592439, "last_edit_date": 1469592878, "question_id": 38603550, "link": "https://stackoverflow.com/questions/38603550/how-to-read-an-indefinite-number-of-variables-from-scanf-separated-by-space-or", "title": "How to read an indefinite number of variables from scanf (separated by space or new lines)", "body": "<p>I want to write a program that reads an arbitrary number of positive integer values from stdin (separated by new lines or space) and outputs the corresponding number of #'s in new lines. Example:</p>\n\n<pre><code>Input:\n5 4 3 2 1\n\nOutput:\n#####\n####\n###\n##\n#\n\nInput:\n16\n0\n4\n12\n\nOutput:\n################\n\n####\n############\n\nInput:\n1 1 3 \n2 1\n\nOutput:\n#\n#\n###\n##\n#\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    char buffer[1000];\n    if (fgets(buffer, sizeof(buffer), stdin) != 0){\n        int i,j,a;\n        for(i=0; sscanf(buffer+i,\"%d%n\",&amp;a,&amp;j)!=EOF; i+=j){\n            while(a--&gt;0){\n                printf(\"*\");\n            }\n            printf(\"\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It works perfectly fine for the first two examples, but what should I do with the third one, when inputs are in different lines? My program only outputs \"#\" in the third example, meaning that it only reads the first line of the output.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469595420, "post_id": 38603549, "comment_id": 64595192, "body": "You&#39;re &quot;number x&quot; for the variable elements seems redundant. You already <i>have</i> a member to store that: <code>int number_elements</code>, whose name is nothing if not self-explanatory. Are you trying to ask if there is a better way to manage <i>capacity</i> vs <i>size</i> (which are not always the same; capacity &gt;= size, and once size reaches or is about to exceed capacity you then expand)? If so, then honestly this is the most straightforward way to do this (though I would choose a considerably more descriptive name than <code>x</code>)."}, {"owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469649595, "post_id": 38603549, "comment_id": 64629926, "body": "x was only for showing my example...i usually name my variables differently..  No I just asked basically if this is the way how &quot;most&quot; people do it, as I am just teaching myself C and have no clue... Are they maybe some good books for C where I can see and read such stuff?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469653057, "post_id": 38603549, "comment_id": 64631672, "body": "Puting <code>[c] books</code> in the search box of this site yields the following: <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">The Definitive C Book Guide and List</a>. I concur with RSahu, however. Learn the basic language from some of those books, then work on data structures and modelling once you&#39;re more comfortable."}], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "edited": false, "score": 0, "creation_date": 1469649668, "post_id": 38604029, "comment_id": 64629966, "body": "Ok seeing it from that point I guess it makes sense..I was just not sure if this is the way to do, so thanks. I have already asked in another comment, but do you maybe have some C books where I could read such stuff, so I don&#39;t bother asking these things?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "edited": false, "score": 0, "creation_date": 1469650872, "post_id": 38604029, "comment_id": 64630540, "body": "@malajedala, it&#39;s less a C language issue than a data modeling issue. You can search for books using &quot;data modeling&quot;"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1469595406, "creation_date": 1469595406, "answer_id": 38604029, "question_id": 38603549, "link": "https://stackoverflow.com/questions/38603549/two-dimensional-pointers-as-structure/38604029#38604029", "title": "Two-dimensional pointers as structure", "body": "<blockquote>\n  <p>So my question is, is there a nice or common way this number x can be hidden, because like this I store in the structure a variable for the number of elements in it and another variable for the actual number of elements allocated, and this is just ugly. </p>\n</blockquote>\n\n<p>It is not ugly. The value of <code>x</code> has to be stored somewhere. It's best to put it with the <code>struct</code> itself as a member since two instances of the <code>struct</code> can have different values of <code>x</code>. Looked at from that point of view, having <code>x</code> as a member of the <code>struct</code> is the most elegant solution, quite the opposite of what you think.</p>\n"}], "owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 38604029, "answer_count": 1, "score": -1, "last_activity_date": 1469595406, "creation_date": 1469592436, "question_id": 38603549, "link": "https://stackoverflow.com/questions/38603549/two-dimensional-pointers-as-structure", "title": "Two-dimensional pointers as structure", "body": "<p>I am a beginner into C programming so I have a basic question, in a lot of places in my code, I use some structures which have two-dim. pointer arrays as a variable, like in this example:</p>\n\n<pre><code>typedef struct example\u00a0{\n\n   char** elements;\n   int number_elements;\n   int x;\n} example;\n</code></pre>\n\n<p>So how I did it usually is that I allocate memory for the structure and a number x for the variable elements, </p>\n\n<pre><code>  example* e = malloc(sizeof(example);\n  if (e == NULL) exit(EXIT_FAILURE);\n\n  e-&gt;elements = malloc(sizeof(char*) * x); \n  if (e-&gt;elements == NULL) //throw error\n\n  for (int i=0; i&lt;x; i++) {\n     e-&gt;elements[i] = malloc(sizeof(char)*1024);\n     if (e-&gt;elements[i] == NULL) //throw error\n  }\n</code></pre>\n\n<p>So I am adding elements to the 2nd dimension dynamically. So if the 2.nd dimension gets full, I reallocate and update x. </p>\n\n<p>So my question is, is there a nice or common way this number x can be hidden, because like this I store in the structure a variable for the number of elements in it and another variable for the actual number of elements allocated, and this is just ugly.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469588400, "post_id": 38602962, "comment_id": 64593362, "body": "<code>Stack *stack = malloc(size*sizeof(node));</code>. That&#39;s a local variable. It has no relation to <code>try</code> in <code>main</code>. Why do you think it would? Most beginners make the mistake of doing <code>S = stack</code>. That is also wrong because <code>S</code> is local to the function.  But you aren&#39;t even doing that so not sure how you expect that <code>stack</code> would get back to <code>main</code>."}, {"owner": {"reputation": 25, "user_id": 6642490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0391865f478108383a0d7d40789f356?s=128&d=identicon&r=PG&f=1", "display_name": "Justin S.", "link": "https://stackoverflow.com/users/6642490/justin-s"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469588693, "post_id": 38602962, "comment_id": 64593411, "body": "I previously had it as &#39;S&#39; instead of stack, but it didn&#39;t change anything in main either. Looking at it now it doesn&#39;t make any sense, how do I relate try to the function?"}], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469588707, "post_id": 38603005, "comment_id": 64593416, "body": "&quot;You are trying to change a pointer that you pass to the function&quot;. Nit pick. OP is not doing even that."}, {"owner": {"reputation": 25, "user_id": 6642490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0391865f478108383a0d7d40789f356?s=128&d=identicon&r=PG&f=1", "display_name": "Justin S.", "link": "https://stackoverflow.com/users/6642490/justin-s"}, "edited": false, "score": 0, "creation_date": 1469589011, "post_id": 38603005, "comment_id": 64593509, "body": "Thank you so much for the help, really appreciate it!"}, {"owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "edited": false, "score": 0, "creation_date": 1469589491, "post_id": 38603005, "comment_id": 64593620, "body": "You don&#39;t need to change the function signature.  <code>Stack **S</code> implies you have a list of <code>Stack *</code>s.  Besides, you&#39;re using the parameter <code>&amp;try</code> to make the <code>Stack *</code> to a <code>Stack **</code>.  It just complicates things."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "edited": false, "score": 1, "creation_date": 1469589620, "post_id": 38603005, "comment_id": 64593652, "body": "@kamoroso94 You do need to change the signature. It wouldn&#39;t work without it."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1469588824, "last_edit_date": 1469588824, "creation_date": 1469588616, "answer_id": 38603005, "question_id": 38602962, "link": "https://stackoverflow.com/questions/38602962/how-to-change-the-value-of-data-inside-a-struct-through-a-function/38603005#38603005", "title": "How to change the value of data inside a struct through a function?", "body": "<p>You are trying to change a pointer that you pass to the function, so you need an extra level of indirection, i.e. a pointer to pointer. In addition, you need to assign to dereferenced parameter instead of a local variable:</p>\n\n<pre><code>void Stack_Init(Stack **S, int size){\n    //                 ^\n    //                 |\n    //        Extra asterisk here\n    *S = malloc(size*sizeof(node)); \n//  ^\n//  |\n// Dereference the pointer passed into the function\n    (*S)-&gt;top = NULL;\n    (*S)-&gt;size = size;\n}\n</code></pre>\n\n<p>The call to the function needs to look like this:</p>\n\n<pre><code>Stack_Init(&amp;try,size);\n//         ^\n//         |\n// Pass a pointer to a pointer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1469589805, "post_id": 38603097, "comment_id": 64593692, "body": "Thanks for bringing this to my attention.  You&#39;re quite right."}, {"owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1469590268, "post_id": 38603097, "comment_id": 64593817, "body": "Very true.  I modified the function to reflect that and make it more similar to the code in the question."}], "tags": [], "owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "is_accepted": false, "score": 0, "last_activity_date": 1469590223, "last_edit_date": 1469590223, "creation_date": 1469589257, "answer_id": 38603097, "question_id": 38602962, "link": "https://stackoverflow.com/questions/38602962/how-to-change-the-value-of-data-inside-a-struct-through-a-function/38603097#38603097", "title": "How to change the value of data inside a struct through a function?", "body": "<p>Your <code>Stack_Init</code> function has a couple problems with it.  You are modifying a local variable instead of the argument passed to the function, and you're assigning the memory incorrectly.  Try this instead.</p>\n\n<pre><code>void Stack_Init(Stack **S,int size) {\n    Stack *stack = (Stack*)malloc(sizeof(Stack));\n    stack-&gt;top = NULL;\n    stack-&gt;size = size;\n    *S = stack;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6642490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0391865f478108383a0d7d40789f356?s=128&d=identicon&r=PG&f=1", "display_name": "Justin S.", "link": "https://stackoverflow.com/users/6642490/justin-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38603005, "answer_count": 2, "score": 2, "last_activity_date": 1469590223, "creation_date": 1469588284, "question_id": 38602962, "link": "https://stackoverflow.com/questions/38602962/how-to-change-the-value-of-data-inside-a-struct-through-a-function", "title": "How to change the value of data inside a struct through a function?", "body": "<p>first time posting here, any help would be appreciated. I'm trying to change the value \"size\" inside my stack called \"try\", by putting it through my function called Stack_Init. If I print out the value of \"stack->size\" inside the function, it gives me the correct value for size (being 4). If I were to print\n<code>try-&gt;size</code> after executing my function (at the end of the code), it would give me a value of 0. </p>\n\n<pre><code>struct intnode {\n    int data;\n    struct intnode *next; \n}; typedef struct intnode node; \n\nstruct stack {\n    node *top;     \n    int size;\n}; typedef struct stack Stack;\n\nvoid Stack_Init(Stack *S, int size){\n    Stack *stack = malloc(size*sizeof(node)); \n    stack-&gt;top = NULL;\n    stack-&gt;size = size;//for some reason, this doesn't change try-&gt;size\n}\nint main(){\n    Stack *try;\n    int size = 4;\n    Stack_Init(try,size);\n    printf(\"%d %d \", try-&gt;size, try-&gt;top);\n</code></pre>\n\n<p>Thanks for reading! </p>\n"}, {"tags": ["c", "file", "text", "null"], "comments": [{"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 1, "creation_date": 1469587870, "post_id": 38602804, "comment_id": 64593225, "body": "There are several issues with your code. I recommend you to check this: <a href=\"http://stackoverflow.com/documentation/c/507/files-and-i-o-streams/3468/open-and-write-to-file#t=201607270249425731337\">stackoverflow.com/documentation/c/507/files-and-i-o-streams/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1469588356, "post_id": 38602804, "comment_id": 64593350, "body": "You create <i>an array of 100 pointers to char</i> with <code>char *fileName[100];</code>, <code>char fileName[100] = &quot;&quot;;</code> is sufficient."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1469596900, "post_id": 38602804, "comment_id": 64595675, "body": "The first problem is that <code>scanf_s()</code> requires an explicit length argument for the string variable and you&#39;ve not supplied it.  You need <code>if (scanf_s(&quot;%99s&quot;, fileName, sizeof(fileName)) != 1) { \u2026report error and do not continue\u2026 }</code>, but you also need to fix the type to <code>char fileName[100];</code> (100 characters, not 100 character pointers).  The problems continue after that\u2026"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6458053, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-42AkhNqkA3E/AAAAAAAAAAI/AAAAAAAAABw/93N95NWZ2Ig/photo.jpg?sz=128", "display_name": "Wojtek Krzyzosiak", "link": "https://stackoverflow.com/users/6458053/wojtek-krzyzosiak"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1469589642, "post_id": 38602948, "comment_id": 64593655, "body": "@RetiredNinja Damn. My Bad. Corrected."}], "tags": [], "owner": {"reputation": 1, "user_id": 6458053, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-42AkhNqkA3E/AAAAAAAAAAI/AAAAAAAAABw/93N95NWZ2Ig/photo.jpg?sz=128", "display_name": "Wojtek Krzyzosiak", "link": "https://stackoverflow.com/users/6458053/wojtek-krzyzosiak"}, "is_accepted": false, "score": 0, "last_activity_date": 1469589658, "last_edit_date": 1469589658, "creation_date": 1469588199, "answer_id": 38602948, "question_id": 38602804, "link": "https://stackoverflow.com/questions/38602804/trying-to-create-a-txt-file-but-says-cannot-open-file/38602948#38602948", "title": "Trying to create a txt file but says cannot open file", "body": "<p>According to the MSDN documentation fopen_s takes an argument of form FILE** rather than FILE*. It also returns an error code rather than the file handle, which is not the return value of the function. So what you've done in this code is overwritten your file handle with some irrelevant integer. If you store your error code in a different variable it should resolve that issue.</p>\n\n<p>More information on fopen_s can be found here: <a href=\"https://msdn.microsoft.com/en-us/library/z5hh6ee9.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/z5hh6ee9.aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1469593920, "last_edit_date": 1469593920, "creation_date": 1469593528, "answer_id": 38603699, "question_id": 38602804, "link": "https://stackoverflow.com/questions/38602804/trying-to-create-a-txt-file-but-says-cannot-open-file/38603699#38603699", "title": "Trying to create a txt file but says cannot open file", "body": "<p>The most important thing you can do in learning C is to -- <em>slow down.</em> There is a lot to learn and you have to take it one step at a time. There is no use in guessing, compiling, seeing if anything changes, changing something else and (repeat). <em>Look it up.</em></p>\n\n<p>That said, you are interested in basic input/output to/from <code>stdin</code>/<code>stdout</code> and to a file opened for <em>writing</em>. It is unclear whether you are working on windows with <code>scanf_s</code> or using the non <code>_s</code> version as they are mixed and matched below. Regardless, the primary difference there will be the required parameters.</p>\n\n<p>In C, you declare the arrays to hold your <em>filename</em> and <em>inputtext</em> to hold <code>100</code> characters. When working with strings, each string requires a <em>nul-terminating</em> character at the end (<code>'\\0'</code>... or just <code>0</code>, numerically the same). That means you can store a <em>maximum</em> of <code>99</code> characters <code>+1</code> <em>nul-terminating</em> character in either <code>filename</code> or <code>inputtext</code> (side note: C generally avoids mixed-case variable names in favor of all lower-case, but that is up to you)</p>\n\n<p>To protect against writing beyond the end of your <code>filename</code> or <code>inputtext</code>, you need to insure that you <em>limit</em> the number of characters you attempt to store in either. You do that with the <em>field-width</em> option to the <em>format specifier</em>. e.g.,</p>\n\n<pre><code>scanf (\"%99s\", inputtext);\n</code></pre>\n\n<p>or for the windows <code>_s</code> version:</p>\n\n<pre><code>scanf_s (\"%99s\", inputtext, 100u);\n</code></pre>\n\n<p>However, using a format specifier of <code>\"%99s\"</code> does not allow the input to include <em>whitespace</em> as the <code>%s</code> <em>format specifier</em> will read up to the first <em>whitespace</em> or <em>newline</em>. Second, it does NOT read (or in anyway handle) the <code>'\\n'</code> at the end of user-input generated as the result of pressing <kbd>[Enter]</kbd>. This will cause problems if your next input is character input as <code>scanf</code> will happily accept <code>'\\n'</code> as the next character to be read. Now <code>%s</code> will skip leading whitespace (<code>'\\n'</code> being whitespace) should not present a problem, but this is the level of thought process you must go through in forming something as simple as your <code>scanf</code> <em>format string</em>. </p>\n\n<p>Get in the habit of accounting for <em>all characters</em> in the input stream every time. That way you are not caught off-guard with some error you cannot explain.</p>\n\n<p>To allow your input to contain whitespace, you can use a <em>character class</em> format specifier for <code>scanf</code>. For instance you could use <code>\"%99[^\\n]\"</code> as the format string. However the character class does not automatically ignore leading whitespace, but you can provide that flexibility by leaving a <code>space</code> before the <code>%</code> beginning the format specifier, e.g. <code>\" %99[^\\n]\"</code>. It is important. (it is also why <code>fgets</code> or POSIX <code>getline</code> are generally preferred over <code>scanf</code> for handling user-input.</p>\n\n<p>Now how do you handle the <code>'\\n'</code> you left in the input buffer (e.g. <code>stdin</code> here)? In addition to leaving the <code>space</code>, you can make use of the <em>assignment suppression operator</em> within the format string. <code>\" %99[^\\n]%*c\"</code> The <code>%*c</code> is a format specifier for reading a character <code>%c</code>, but by including the <code>'*'</code> (assignment suppression operator), you tell <code>scanf</code> to <em>read and discard</em> the character.</p>\n\n<p>It is not enough to simply provide the correct <em>format specifier</em> when taking user-input. You must <em>VALIDATE</em> that you have actually received the input you expect. With any of the input routines, that, at minimum, means checking the return for <code>scanf</code> (or <code>fgets</code> or <code>getline</code>, etc..). For <code>scanf</code>, the return is the  \"<em>match count</em>\", which is the <em>number of successful conversions performed according the the format string</em>. e.g. the <code>%s</code> (or <code>%[^\\n]</code>) constitute a request for a single conversion. (any conversion associated with the assignment suppression operator is NOT included in the match count) So your anticipated return is the number of conversions in your format string. Putting that together, you could handle your <code>inputtext</code> with:</p>\n\n<pre><code>    printf (\"What should be written in the text file? \"); /* prompt */\n    /* validate user input -- limit to 99 chars (+1 for nul char)  */\n    if (scanf (\" %99[^\\n]%*c\", inputtext) != 1) {\n        fprintf (stderr, \"error: invalid input (inputtext).\\n\");\n        return 1;\n    }\n</code></pre>\n\n<p>Wouldn't the same thing also work for <code>filename</code>? Answer: <strong>No.</strong> Why? You plan on appending <code>\".txt\"</code> to <code>filename</code> after entered by the user, right? How many characters are in <code>\".txt\"</code>? Answer: <code>4</code> (you will only have <code>1</code> <em>nul-terminating</em> char for the combined string). So what must you limit <code>filename</code> to? <code>\" %95[^\\n]%*c\"</code></p>\n\n<p>To do file I/O, you have several choices. By far the <em>fstream</em> buffered I/O functions are the most common for basic text I/O. In order to read from, or write to, a file, you must first open a <code>FILE</code> stream. You do that by declaring a <code>FILE *pointer</code> and then calling <code>fopen</code> and then checking the return (the value of <code>pointer</code>) to validate your file was successfully opened. The same rules, format specifiers, etc.. apply to reading/writing to a file (on disk), just as they do to writing to <code>stdin</code> or <code>stdout</code> as all are simply files from C's perspective. </p>\n\n<p>With that in mind, you could do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nenum { MAXC = 100 };\n\nint main (void) {\n\n    /* declare and initialize variables */\n    char filename[MAXC] = \"\", inputtext[MAXC] = \"\";\n    FILE *fp = NULL;\n\n    printf (\"What is the .txt file name? \");    /* prompt */\n\n    /* validate user input -- limit to 95 chars */\n    if (scanf (\" %95[^\\n]%*c\", filename) != 1) {\n        fprintf (stderr, \"error: invalid input (filename).\\n\");\n        return 1;\n    }\n    strcat (filename, \".txt\");  /* +4 chars = 99 chars */\n\n    /* open file/validate file open for reading */\n    if (!(fp = fopen (filename, \"w\"))) {\n        fprintf (stderr, \"error: file open failed '%s'.\\n\", filename);\n        return 1;\n    }\n\n    printf (\"What should be written in the text file? \"); /* prompt */\n    /* validate user input -- limit to 99 chars (+1 for nul char)  */\n    if (scanf (\" %99[^\\n]%*c\", inputtext) != 1) {\n        fprintf (stderr, \"error: invalid input (inputtext).\\n\");\n        return 1;\n    }\n\n    /* output status to stdout &amp; inputtext to fp */\n    printf (\"\\nwriting to '%s'\\n%s\\n\", filename, inputtext);\n    fprintf (fp, \"%s\\n\", inputtext);\n\n    if (fclose (fp))    /* close file - validate stream close */\n        fprintf (stderr, \"error: on file stream close.\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>note:</strong> after <em>writing</em> to a file, it is important to check the return of <code>fclose</code> to insure a stream error did not occur during the write. (for closing streams you read from, that concern isn't there)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/inputtext\nWhat is the .txt file name? dat/inputtext\nWhat should be written in the text file? A quick brown fox jumps over the lazy dog.\n\nwriting to 'dat/inputtext.txt'\nA quick brown fox jumps over the lazy dog.\n</code></pre>\n\n<p>Check the file contents:</p>\n\n<pre><code>$ cat dat/inputtext.txt\nA quick brown fox jumps over the lazy dog.\n</code></pre>\n\n<p>Look the code over and let me know if you have any questions <em>regarding any character</em> in the code. Everyone needs a little help getting started, and the most important thing I can convey is to slow down and understand every character you code, read and understand your compiler warnings (fix every one), and if you are not sure about what you are doing, look it up. Either <code>man function</code> on Linux/Unix, or search MSDN for windows (e.g. <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow\"><strong>scanf_s,...</strong></a>). They tell you in reasonably clear term what type and requirements there are for every parameter to every function (and a lot provide examples).</p>\n\n<p>Good luck with your coding.</p>\n"}], "owner": {"reputation": 3, "user_id": 6592506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e544c9bf3f04b799e05faf852a029d?s=128&d=identicon&r=PG&f=1", "display_name": "jwry", "link": "https://stackoverflow.com/users/6592506/jwry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 38603699, "answer_count": 2, "score": -4, "last_activity_date": 1469593920, "creation_date": 1469587111, "last_edit_date": 1469587594, "question_id": 38602804, "link": "https://stackoverflow.com/questions/38602804/trying-to-create-a-txt-file-but-says-cannot-open-file", "title": "Trying to create a txt file but says cannot open file", "body": "<p>Very new to programming. I am trying to create a txt file that asks the user for a file name and then text for the file. At first I got an error about a null so I put an if statement and it seems like the code cannot open the file with that name. Tried to do some research and ended up making some changes but still resulted in the same error.</p>\n\n<pre><code>include &lt;stdio.h&gt;;\ninclude &lt;stdlib.h&gt;;\n\nint main()\n\n{\n\n    char *fileName[100];\n    char inputText[100];\n\n\n    printf(\"What is the .txt file name? \\n\");\n    scanf_s(\"%123s\", &amp;fileName);\n\n    strcat(fileName, \".txt\");\n\n    FILE *textFile;\n\n    textFile = fopen_s(&amp;textFile, fileName, \"w\");\n\n    if (textFile != 0)\n    {\n        printf(\"Cannot get file\");\n        return -1;\n    }\n\n\n    printf(\"What should be written in the text file? \\n\");\n    scanf_s(\"%123s\", &amp;inputText);\n\n\n    fprintf(textFile, \"%s\", inputText);\n\n\n    fclose(textFile);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "system", "raspbian"], "comments": [{"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 1, "creation_date": 1469589543, "post_id": 38602692, "comment_id": 64593635, "body": "Running commands with system is not the same as typing them in an interactive shell session."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6642346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5dbc5fe425eb43ca6ad229b2fa164e1?s=128&d=identicon&r=PG&f=1", "display_name": "Litoy N", "link": "https://stackoverflow.com/users/6642346/litoy-n"}, "edited": false, "score": 0, "creation_date": 1469628424, "post_id": 38605910, "comment_id": 64616726, "body": "Ah OK I didn&#39;t realize each call of <code>system</code> is independent like that, thank you.   As far as using a shell script instead of C: I need to use the GPIO pins and am already familiar with using wiringPi libraries for that. What would be the advantages of using a shell script? Is it generally a bad idea for some reason to use <code>system</code>?"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 1, "last_activity_date": 1469602929, "creation_date": 1469602929, "answer_id": 38605910, "question_id": 38602692, "link": "https://stackoverflow.com/questions/38602692/why-arent-these-xset-commands-working-from-system-in-c-program-on-raspberry/38605910#38605910", "title": "Why aren&#39;t these &#39;xset&#39; commands working from system() in C program on Raspberry Pi Raspbian?", "body": "<p>The different invocations of <code>system</code> will run different incarnations of your shell. They are independent of each other and in particular setting an environment variable makes no sense at all: the effect is over as soon as the <code>system</code> call ends.</p>\n\n<p>From all that I can see your code makes not much sense to be implemented in C. You are better off with a shell script.</p>\n"}], "owner": {"reputation": 1, "user_id": 6642346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5dbc5fe425eb43ca6ad229b2fa164e1?s=128&d=identicon&r=PG&f=1", "display_name": "Litoy N", "link": "https://stackoverflow.com/users/6642346/litoy-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469630982, "creation_date": 1469586218, "last_edit_date": 1469630982, "question_id": 38602692, "link": "https://stackoverflow.com/questions/38602692/why-arent-these-xset-commands-working-from-system-in-c-program-on-raspberry", "title": "Why aren&#39;t these &#39;xset&#39; commands working from system() in C program on Raspberry Pi Raspbian?", "body": "<p>I am working on a Raspberry Pi running Raspbian and am trying to write a C program to turn the monitor off and on by using an ultrasonic sensor. I have been getting the behavior I want by using these commands manually from Bash:</p>\n\n<pre><code>#First, I export the display variable\nexport DISPLAY=:0.0\n\n#To turn off the monitor:\nsudo /opt/vc/bin/tvservice -o\n\n#To turn on the monitor:\nsudo /opt/vc/bin/tvservice -p\nxset dpms force on\n</code></pre>\n\n<p>I want to execute these from within my C program by using the system() function, but am having issues with the xset commands.</p>\n\n<pre><code>system(\"echo $DISPLAY\");\nsystem(\"export DISPLAY=:0.0\");\nsystem(\"sudo /opt/vc/bin/tvservice -p &amp;&amp; xset dpms force on\");\n</code></pre>\n\n<p>Gives the output:</p>\n\n<pre><code>:0.0\nPowering on HDMI with preferred settings\nNo protocol specified\nxset: unable to open display \":0.0\"\n</code></pre>\n\n<p>Even this:</p>\n\n<pre><code>system(\"xset -q\");\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>xset: unable to open display \":0.0\"\n</code></pre>\n\n<p>I have seen several examples of people suggesting using the system() function to execute xset commands just like I'm trying to do and haven't seen anyone else mention having these exact same issues. It should also be noted that I am accessing the Pi through PuTTY. I'm not even sure if my problems are arising from a misunderstanding of xset, of the system() function, or something else. Any leads are appreciated!</p>\n\n<h1><strong>Updated question</strong></h1>\n\n<p>One important thing pointed out is that <code>system</code> actually uses a new shell each time it is called, so even if setting <code>DISPLAY</code> variable had been productive, it would have no effect on the next invocation of `system'.</p>\n\n<p>That helped me to understand how <code>system</code> actually works and to believe it should work the way I was using it. So I ran my C program directly on the Pi and not through SSH, and it actually works fine. For my current purposes, my problem is effectively solved because I don't actually need to work through SSH.</p>\n\n<p>I do want to know why I was having the problems I had, and I think that is mainly connected to not understanding the X window system. I will read up on this more but if anyone has a hint to get me to the root of my particular problem, I would appreciate it. Currently I'm suspecting something to do with X forwarding...</p>\n"}, {"tags": ["c++", "c", "file-io", "fopen", "fwrite"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1469586179, "post_id": 38602652, "comment_id": 64592855, "body": "The first thing to do would be to check the return value of <code>fseek</code> and even <code>fclose</code>."}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469586416, "post_id": 38602652, "comment_id": 64592921, "body": "@kaylum I did. They all returned 0 in the two invocations."}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469586958, "post_id": 38602652, "comment_id": 64593035, "body": "@kaylum Checking return value of fclose makes sense. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 1, "creation_date": 1469606620, "post_id": 38606978, "comment_id": 64601085, "body": "But as always checking if there is enough space then doing your operation creates a race condition where another program might have already used the free space before you get to it. See <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20160714-00/?p=93875\" rel=\"nofollow noreferrer\">this post</a> for a solution for windows on how to pre-allocate the space without having to write to the file."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1469606742, "post_id": 38606978, "comment_id": 64601175, "body": "@RedX: I mentioned that race condition, and I also mentioned why preallocation might not be the best way forward in the first place."}, {"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1469606884, "post_id": 38606978, "comment_id": 64601269, "body": "Sorry, I missed the very important sentence in parenthesis. The link I provide is to a post that details how to reserve space under windows without having to write to the file. I tried to clarify it in my first comment."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1469609251, "post_id": 38606978, "comment_id": 64602816, "body": "POSIX statvfs will give you a rough guess, based on the filesystem reserves (e.g. root hold-back that is part of the filesystem, but are not reflective of any further system resources held back. If an exact number of the remaining blocks/size is needed, you will need any OS limits as well."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1469609468, "post_id": 38606978, "comment_id": 64602970, "body": "@DavidC.Rankin: Since the filesystem could conceivably be <i>compressing</i>, and there are other processes using and releasing diskspace all the time, a rough guess is all you will get anyway..."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1469609733, "post_id": 38606978, "comment_id": 64603178, "body": "That is a good point as well that I hadn&#39;t considered. I took a quick look on my laptop (<code>640G</code> drive). <code>statvfs</code> reports <code>425G user available</code> while <code>df</code> says <code>417</code> (that&#39;s only <code>8G</code> off, but that a pretty big deal if you need an exact number)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1469609780, "post_id": 38606978, "comment_id": 64603205, "body": "Bottom line -- attempt the write, check the result."}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "reply_to_user": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1469609809, "post_id": 38606978, "comment_id": 64603224, "body": "I prefer to use <code>boost::filesystem::space(...)</code> to check free amount of a directory. However, as mentioned by @RedX we may face to race conditions"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 1, "creation_date": 1469610137, "post_id": 38606978, "comment_id": 64603450, "body": "@duong_dajgja: I did not bring up Boost as you tagged the question &quot;C&quot;. But yes, that&#39;s a convenient wrapper for the OS-specific functions... with all their drawbacks."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": true, "score": 2, "last_activity_date": 1469606356, "last_edit_date": 1469606356, "creation_date": 1469605920, "answer_id": 38606978, "question_id": 38602652, "link": "https://stackoverflow.com/questions/38602652/how-to-detect-insufficient-disk-space-when-using-stdio-file-operations-in-c-c/38606978#38606978", "title": "How to detect insufficient disk space when using stdio file operations in C/C++?", "body": "<blockquote>\n  <p>How can I be learn if the disk space is sufficient to handle correctly?</p>\n</blockquote>\n\n<p>The standard library has no functions for this. Seeking forward (like you did) is not guaranteed to fail, as the filesystem is at liberty to delay the actual allocation of disk space until that space is actually needed (because you are writing data to it). You only write one character, so only space for that one character (and some metainformation) is actually needed at this point.</p>\n\n<p>To be really sure you will have enough space (even when considering other processes that might take up space after you checked), you would have to write random data of the desired size, then overwrite that with your actual data -- which is not an efficient way to do things.</p>\n\n<p>Standard practice is to just attempt the write (without preallocation), and check that write operation for success. This also avoids a process termination leaving some \"pre-reserved\" but useless files lying around.</p>\n\n<p>To check available disk space beforehand, you have to rely on OS specific functionality.</p>\n\n<p>For POSIX systems, there is <a href=\"http://man7.org/linux/man-pages//man2/statvfs.2.html\" rel=\"nofollow\">statvfs()</a>.</p>\n\n<p>For WinAPI, there is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364935(v=vs.85).aspx\" rel=\"nofollow\">GetDiskFreeSpace()</a>.</p>\n"}], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "accepted_answer_id": 38606978, "answer_count": 1, "score": 4, "last_activity_date": 1469609979, "creation_date": 1469585885, "last_edit_date": 1469609979, "question_id": 38602652, "link": "https://stackoverflow.com/questions/38602652/how-to-detect-insufficient-disk-space-when-using-stdio-file-operations-in-c-c", "title": "How to detect insufficient disk space when using stdio file operations in C/C++?", "body": "<p>I am making a small program as follows:</p>\n\n<pre><code>void reserve_file_space(char* file_path, size_t amount)\n{\n    FILE* fp = fopen(file_path, \"w+b\");\n    if(!fp)\n    {\n        printf(\"could not create a new file\\n\");\n        return;\n    }\n\n    int fseek_ret = fseek(fp, amount, SEEK_SET);\n    if(fseek_ret != 0)\n    {\n        printf(\"could not seek to the desired position\\n\");\n        fclose(fp);\n        return;\n    }\n\n    char garbage = 1;\n    size_t ret = fwrite(&amp;garbage, 1, 1, fp);\n    if(ret != 1)\n    {\n        printf(\"could not write the garbage character\\n\");\n    }\n\n    fclose(fp);\n}\n\nint main(int argc, char* argv[])\n{\n    reserve_file_space(\"C:\\\\Users\\\\SysPart\\\\Desktop\\\\test.bin\", 1 &lt;&lt; 30);\n    return 0;\n}\n</code></pre>\n\n<p>The free disk space on my PC is around 500 MBs. In the <code>main()</code> if I invokes <code>reserve_file_space(\"C:\\\\Users\\\\SysPart\\\\Desktop\\\\test.bin\", 1 &lt;&lt; 28 /*256 MB*/);</code> it outputs a file created with exact size of 256 MB. However if I invokes <code>reserve_file_space(\"C:\\\\Users\\\\SysPart\\\\Desktop\\\\test.bin\", 1 &lt;&lt; 30 /*1 GB*/);</code> it produces the output file with size of 0 and without printing out any error notice.</p>\n\n<p>How can I learn if the disk space is sufficient to handle correctly?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "edited": false, "score": 0, "creation_date": 1469598779, "post_id": 38603370, "comment_id": 64596418, "body": "I got the &quot; error : request for member \u2018a\u2019 in something not a structure or union x-&gt;a=b; &quot; during compilation. is the &quot;x[][]&quot; here represent &quot;identity[][]&quot; i mention in the OP?"}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "reply_to_user": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "edited": false, "score": 0, "creation_date": 1469648684, "post_id": 38603370, "comment_id": 64629437, "body": "whoops, sorry, i forgot to add the array indices. that should have read x[i][j] = b, where i and j are some iter vars"}], "tags": [], "owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "is_accepted": false, "score": 0, "last_activity_date": 1469591150, "creation_date": 1469591150, "answer_id": 38603370, "question_id": 38602610, "link": "https://stackoverflow.com/questions/38602610/static-member2d-array-of-structure-2d-array-in-c/38603370#38603370", "title": "static member(2d array) of structure (2d array) in C", "body": "<p>If you only want a member of the struct to be static, your best option will be to make a static type in the function, which in your case would be a static 2D array, and do the assignment to the [stack] structure when the function is called. </p>\n\n<p>Eg:</p>\n\n<pre><code>.. function(...)\n{\n  static int b[2][2]\n  typedef struct { int a[2][2] } struct1;\n  struct1 x[2][2];\n  x-&gt;a = b;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "edited": false, "score": 0, "creation_date": 1469624695, "post_id": 38608181, "comment_id": 64613857, "body": "Actually I want to group a series of objects (2D arrays of structures) that hold their own properties(members of structure), some of them are matrixes(thats is the reason of 2D array member) that need to keep their values for subsequent calls, some are constants and some are temporal variables. No problem if it is better to separate out the static member from other. I am just trying to organize the data group as an object with identity so that i can access or manage them easily later. I had tried your method and it works with some weird behaviors. I&#39;ll post it in the answer here."}], "tags": [], "owner": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "is_accepted": true, "score": 0, "last_activity_date": 1469609517, "last_edit_date": 1495535326, "creation_date": 1469609517, "answer_id": 38608181, "question_id": 38602610, "link": "https://stackoverflow.com/questions/38602610/static-member2d-array-of-structure-2d-array-in-c/38608181#38608181", "title": "static member(2d array) of structure (2d array) in C", "body": "<p>You have defined a 2d array of structs, which is really hard to statically initialize because each struct contains matrices of ints. Also, you can't have only a member of a struct static, <strong>the whole structure has to be defined static</strong>.</p>\n\n<p>The easiest way I can think of doing what you want is defining an static matrix of mystructs and a helper variable to initialize it just on the first call, ie,</p>\n\n<pre><code>//in function.c\n#include &lt;stdbool.h&gt;\n\nint function(int rowNUM)\n{\n    typedef struct {\n        int member[5][5];\n        int y[5][5];\n        int forg;\n    } mystruct;\n\n    // helper flag    \n    static bool first_call = true;\n\n    // this is a matrix of (row x cols) mystructs\n    static mystruct identity[row][col];\n\n    if (first_call) {\n        /* initialize the matrix however you want\n           BUT remember to set first_call to false!\n        */\n        first_call = false;\n    }\n\n    // rest of function ...\n}\n</code></pre>\n\n<p>If you don't want to keep the values of the <code>y</code> and <code>forg</code> members (what does forg stand for? is it a typo?), you should split the struct in two, but I can't see why would you want to keep some values of the struct and discard others unless they are temporal variables.</p>\n\n<p>If <code>y</code> and <code>forg</code> are temporal varaibles, you <strong>should definitely split your struct definition in two</strong>.</p>\n\n<p>Another way of doing that is passing the pointer to the matrix as a parameter to your function, so you can maintain state without using a static variable</p>\n\n<pre><code>int function(int rowNUM, mystruct **identity)\n</code></pre>\n\n<p>But note that, although most of the times arrays decay to pointers (you can find more information in similar questions to <a href=\"https://stackoverflow.com/questions/1641957/is-an-array-name-a-pointer-in-c\">this one</a>), they are not the same <a href=\"https://stackoverflow.com/questions/12674094/array-to-pointer-decay-and-passing-multidimensional-arrays-to-functions\">thing</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 0, "creation_date": 1469653854, "post_id": 38614485, "comment_id": 64632052, "body": "Yes, you have to declare it <code>static</code>: it tells the compiler to put the variables in global memory instead of the stack (those global variables are only accesible from that function). printf is probably not using enough stack variables for you to have different values in the memory region they sit when the function is called. This also depends on the order you declare your stack variables. Notice that you have declared first <code>c</code>, <code>d</code> and <code>columnNUM</code>. If you print <code>c</code>, <code>d</code> or <code>columnNUM</code> before initializing them, you&#39;ll probably see random values each time."}, {"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "reply_to_user": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 0, "creation_date": 1469666400, "post_id": 38614485, "comment_id": 64635969, "body": "without static : printf before intitizlize , c , d show huge random number for the first call to the function and back to normal number for second and third call. With static , every call shows huge random number. The structure array values remain good for both case. Will this cause trouble on the array&#39;s values, let say if the program grow longer and more variables declared before or after the static declaration? I am not really understand the memory allocation when declaring the variables. Hope to know more in detail about this..@miravalls"}, {"owner": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 0, "creation_date": 1469686203, "post_id": 38614485, "comment_id": 64640951, "body": "Ok, so in a C program there are several memory regions: the global read only (constants), the global shared variables, the stack and the heap. When you declare a <code>static</code> variable, it is placed in the global memory, but it&#39;s only defined in the scope you placed it (a variable can only be used within it&#39;s scope). The stack is a shared array of bytes that the compiler uses to store the return address of functions, the function parameters and the local variables of a function. When you start a function, the stack variables are allocated in the stack but are not initialized"}, {"owner": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 0, "creation_date": 1469687141, "post_id": 38614485, "comment_id": 64641416, "body": "...so their initial values are somewhat random: it could be the previous value, or it could be parameters of a previous function call, or it could be random because those bytes have never been initialized, or maybe some of the bytes have been used for shorter stack variables... there are a lot of combinations. There are a lot of sources which you can check for more indepth explanations. I&#39;d recommend you checking <a href=\"http://c.learncodethehardway.org\" rel=\"nofollow noreferrer\">c.learncodethehardway.org</a> (exercises 17 and 22) or chapter 4 of &quot;The C programming language&quot; from Kernighan and Ritchie."}, {"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "reply_to_user": {"reputation": 170, "user_id": 3914029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2lS3.jpg?s=128&g=1", "display_name": "miravalls", "link": "https://stackoverflow.com/users/3914029/miravalls"}, "edited": false, "score": 0, "creation_date": 1469709003, "post_id": 38614485, "comment_id": 64655745, "body": "Thanks @miravalls. Your explanation and suggestion are very helpful."}], "tags": [], "owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1469626372, "creation_date": 1469626372, "answer_id": 38614485, "question_id": 38602610, "link": "https://stackoverflow.com/questions/38602610/static-member2d-array-of-structure-2d-array-in-c/38614485#38614485", "title": "static member(2d array) of structure (2d array) in C", "body": "<pre><code>void function(int rowNUM){\n\nint c;\nint d;\nint columnNUM;\n\n\n\ntypedef struct {\nint member[3][3];\n}mystruct;\n\nmystruct identity[ROW][COLUMN];\nstatic bool first_call = true;\nif (first_call) {\n// INTIALIZE each element of member array to 1 \nfor (columnNUM=0;columnNUM&lt;COLUMN;columnNUM++)//total cell\n{\nfor (c=0;c&lt;3;c++)\n   {\nfor(d=0;d&lt;3;d++){\n   identity[rowNUM][columnNUM].member[c][d]=1;\n//printf(\"identity[%d][%d].member[%d][%d]=%d\\n\",rowNUM,columnNUM,c,d,identity[rowNUM][columnNUM].member[c][d]);\n       }\n    }\n}\nfirst_call = false;\n    }\n\n\n\nidentity[0][0].member[0][0]=identity[0][0].member[0][0]+3;\nprintf(\"%d\\n\", identity[0][0].member[0][0]);\nidentity[0][0].member[0][1]=identity[0][0].member[0][1]+1;\nprintf(\"%d\\n\", identity[0][0].member[0][1]);\n\n\n\n}\n</code></pre>\n\n<p>The above code produce:\n first call= <code>4 2</code> second call= <code>7 3</code> third call= <code>10 4</code>\nWork perfectly fine,nice. But it works fine either I declare  </p>\n\n<pre><code>mystruct identity[ROW][COLUMN];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>static mystruct identity[ROW][COLUMN];\n</code></pre>\n\n<p>Does it mean I dont need to declare static at all? </p>\n"}], "owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "accepted_answer_id": 38608181, "answer_count": 3, "score": 0, "last_activity_date": 1469626372, "creation_date": 1469585620, "last_edit_date": 1469587154, "question_id": 38602610, "link": "https://stackoverflow.com/questions/38602610/static-member2d-array-of-structure-2d-array-in-c", "title": "static member(2d array) of structure (2d array) in C", "body": "<p>I got a question regarding to static member of structure\nHere is the scenario:</p>\n\n<ul>\n<li><p>Need 2d array variable to retain its values even after exited from the function in another C files. Subsequent call from main()-in another C file, to the function will use that last value and continue to do calculation to produce and update new values(retained also). So, I I think I need to use static for that array.</p></li>\n<li><p>The 2D array is member of an 2D structure. I need 2D structure for identity purposes for the 2d array. Lets say I got identity[row][column] with member[5][5], I need statically define the member throughout the call from main(). But static for structure member is not allowed in C as I notice.</p></li>\n</ul>\n\n<p>code i am trying on:</p>\n\n<pre><code>//in function.h\n\n #define row 2\n #define column 5\n int function(int rowNUM);\n\n  //in function.c\nint function(int rowNUM)\n{\ntypedef struct {\n    static int member[5][5];\n    int y[5][5];\n    int forg;\n} mystruct;\n\nmystruct identity[row][column];// declare the identity as structure array\n\nint columnNUM;\nint c;\nint d;\n\n//----try to initialize member to 1\nfor (columnNUM=0;columnNUM&lt;column;columnNUM++)\n{\nfor (c=0;c&lt;5;c++)\n   {\nfor(d=0;d&lt;5;d++){\n   identity[rowNUM][columnNUM].member[c][d]=1;\n       }\n    }\n}\n\n\n//----try to update member--- The values should retain for subsequent call from main\nfor (columnNUM=0;columnNUM&lt;column;columnNUM++)\n{\nfor (c=0;c&lt;5;c++)\n   {\nfor(d=0;d&lt;5;d++){\n   identity[rowNUM][columnNUM].member[c][d]=1+identity[rowNUM][columnNUM].member[c][d]; // to update member new value\n       }\n    }\n}\n}\n\n\n// in main.c\n\nmain()\n{\nfunction(1);\nfunction(2);// member here is in different identity from function (1)\nfunction(1);//member should retain its value from function(1)\nfunction(2);//member should retain its value from function(2)\n}\n</code></pre>\n\n<p>Any other suggestion is welcomed if this is not the way to achieve the goal.\nI am quite new in programing Please help me on this.</p>\n"}, {"tags": ["c", "assembly", "x86", "x86-64", "mmap"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1469586787, "post_id": 38602525, "comment_id": 64592996, "body": "A link to somewhere outside SO is just a dead link waiting to happen, so is discouraged.  And the values may be operating system dependent so you really need to just find them.  Since the compiler can find them on your computer, you can too."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1469586856, "post_id": 38602525, "comment_id": 64593015, "body": "if you are aiming for using assembly, then just disassemble some C code that makes these calls and see what values the compiler is generating, if you can write assembly you can read it, true?"}, {"owner": {"reputation": 119, "user_id": 2460434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a46cd77114d95704a9fc5aee25dab4cb?s=128&d=identicon&r=PG", "display_name": "k3v", "link": "https://stackoverflow.com/users/2460434/k3v"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1469587105, "post_id": 38602525, "comment_id": 64593067, "body": "@dwelch Yeah you are right."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1469588383, "post_id": 38602525, "comment_id": 64593358, "body": "find the include directory and try grep -r MAP_PRIVATE *  see what you see..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 2, "creation_date": 1469588617, "post_id": 38602525, "comment_id": 64593399, "body": "you can use gcc --help ton find gcc -print-search-dirs and that may give you an idea where to start looking for headers.  On linux you dont need that go to /usr/include  grep for map private finds it instantly   #define MAP_PRIVATE\t0x02 then go to that file that has that define and probably find more."}, {"owner": {"reputation": 119, "user_id": 2460434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a46cd77114d95704a9fc5aee25dab4cb?s=128&d=identicon&r=PG", "display_name": "k3v", "link": "https://stackoverflow.com/users/2460434/k3v"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1469588832, "post_id": 38602525, "comment_id": 64593453, "body": "@dwelch Thanks a lot for your help! I found the file. I didn&#39;t know everything would be in usr/include. &quot;sys/mann.h&quot;"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1469621709, "post_id": 38602525, "comment_id": 64611516, "body": "Note that is where it is on your operating system.  It is elsewhere on mine, same define for that value but elswhere.  Thus the grep.  I like Alden&#39;s answer very much too, I didnt know about that gcc feature, now I do."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469597106, "post_id": 38602598, "comment_id": 64595740, "body": "You can just <code>printf &#39;%s\\n&#39; &#39;#include &lt;sys&#47;mman.h&gt;&#39; MAP_PRIVATE | gcc -E - | tail</code> or something.  Or just <code>-dM</code> to dump macro defs.  See also my answer"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1469598917, "post_id": 38602598, "comment_id": 64596472, "body": "Note that this is not a gcc option, <code>-E</code> is a standard POSIX option every C compiler should have."}], "tags": [], "owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "is_accepted": true, "score": 4, "last_activity_date": 1469585527, "creation_date": 1469585527, "answer_id": 38602598, "question_id": 38602525, "link": "https://stackoverflow.com/questions/38602525/looking-for-mmap-flag-values/38602598#38602598", "title": "Looking for mmap flag values", "body": "<p>Using the <code>-E</code> option with gcc allows you to see the output of a source file after the preprocessor. Using <code>gcc -E test.c</code> on the following source file</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n\nint main() {\n        return MAP_PRIVATE;\n}\n</code></pre>\n\n<p>outputs </p>\n\n<pre><code>...\n# 2 \"asdf.c\" 2\n\nint main() {\n\n return 0x02;\n}\n</code></pre>\n\n<p>which shows that <code>MAP_PRIVATE</code> is equal to <code>0x02</code> on my system. This may not be true on all systems, however.</p>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 5, "last_activity_date": 1469597012, "creation_date": 1469597012, "answer_id": 38604334, "question_id": 38602525, "link": "https://stackoverflow.com/questions/38602525/looking-for-mmap-flag-values/38604334#38604334", "title": "Looking for mmap flag values", "body": "<p>To find the right file in the first place: two options:</p>\n\n<ul>\n<li>google the macro, and look at the documentation to see what headers it says to include.  e.g. the <code>mmap</code> man page only mentions <code>sys/mman.h</code>.</li>\n<li>Or: learn where your system keeps header files, and recursive-grep there.  (Or use <a href=\"http://beyondgrep.com/\" rel=\"noreferrer\"><code>ack</code>, because it knows not to search binary files and is generally good for this sort of thing</a>).  e.g. on my GNU/Linux system,<br>\n<code>ack --hh MAP_PRIVATE /usr/include/ /usr/lib/gcc/x86_64-linux-gnu/5/</code> will search only <code>.h</code> files (<code>--hh</code>) under those two directories, which is where all the system headers live.</li>\n</ul>\n\n<p>To find where your system keeps headers in the first place, cpp output (without <code>-dM</code>) includes current-line-number setting lines which tell you which headers got included.  e.g.<br>\n<code># 216 \"/usr/lib/gcc/x86_64-linux-gnu/5/include/stddef.h\" 3 4</code></p>\n\n<hr>\n\n<h3>Use the C preprocessor to dump macro values.</h3>\n\n<p><code>gcc -E -dM</code> prints <em>only</em> <code>#define</code> lines with the final values of all macros at the end of processing, instead of the preprocessed source.  <code>-</code> tells it to read from stdin, so you can pipe a code fragment into it with <code>echo</code>.</p>\n\n<pre><code>echo '#include &lt;sys/mman.h&gt;' | gcc -E - -dM | less\n</code></pre>\n\n<p>In <code>less</code>, you can of course search with <code>/</code>.  <strong>You can also filter with <code>&amp;</code></strong>, hiding lines that don't match the regex.  So you can type <kbd>&amp;MAP_</kbd> to get just the MAP_ macro definitions.</p>\n\n<hr>\n\n<p>On x86-64 GNU/Linux, I get:</p>\n\n<pre><code>#define MAP_32BIT 0x40\n#define MAP_TYPE 0x0f\n#define MAP_EXECUTABLE 0x01000\n#define MAP_FAILED ((void *) -1)\n#define MAP_PRIVATE 0x02\n...\n</code></pre>\n\n<hr>\n\n<h3>Maybe using this in a build system instead of hard-coding your search results</h3>\n\n<p>If you're writing some actual asm code that wants these macro definitions, remember that <code>gcc -c foo.S</code> runs <code>.S</code> files through the C preprocessor before assembling.  However, <code>sys/mman.h</code> contains lines other than macro definitions (like <code>typedef unsigned char __u_char;</code>) which aren't valid asm syntax.</p>\n\n<p><strong>The most future-proof / portable way to do this</strong> might be for your build scripts / Makefile to use <code>gcc -E -dM</code> to create a local macro-only version of the system headers you need.  Then your <code>.S</code> files could <code>#include \"system_macros/mman.h\"</code> and so on.</p>\n\n<p>However, note the <code>((void *) -1)</code> definition for <code>MAP_FAILED</code>: that syntax won't assemble, so this doesn't always work for writing portable asm that works on different systems with the same ABI but different constants and syscall numbers.</p>\n\n<p>For syscall numbers, the system <code>asm/unistd.h</code> usually only has macros, not prototypes or typedefs.</p>\n\n<hr>\n\n<p><strong>Your asm source should look like this</strong>:</p>\n\n<pre><code># 4th arg (flags) goes in r10 for the syscall ABI, vs. rcx for function calls\nmov   $(MAP_PRIVATE | MAP_ANONYMOUS | MAP_HUGETLB), %r10d\n</code></pre>\n\n<p>Or for NASM, use something like <code>sed</code> to turn the cpp macros into NASM <code>.equ</code> definitions:</p>\n\n<pre><code>mov   r10d,  MAP_PRIVATE | MAP_ANONYMOUS | MAP_HUGETLB\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2460434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a46cd77114d95704a9fc5aee25dab4cb?s=128&d=identicon&r=PG", "display_name": "k3v", "link": "https://stackoverflow.com/users/2460434/k3v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 2, "accepted_answer_id": 38602598, "answer_count": 2, "score": 3, "last_activity_date": 1469597012, "creation_date": 1469585015, "question_id": 38602525, "link": "https://stackoverflow.com/questions/38602525/looking-for-mmap-flag-values", "title": "Looking for mmap flag values", "body": "<p>I was wondering where I could find mmap flag values on os x. The manpages for mmap say to use MAP_PRIVATE, MAP_... and such, but if you are dealing with assembly you have to know the actual values to make the syscall. I tried looking for the header files that defined these constants but I could not find it. Could someone link it possibly?</p>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1469584616, "post_id": 38602460, "comment_id": 64592519, "body": "<code>*(b + 1)</code> is not really printing out 1. And you are not printing <code>b[1]</code> anywhere. Check your <code>printf</code> format string more carefully. Count the format specifiers and count the arguments. See the problem?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6288471"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1469585112, "post_id": 38602460, "comment_id": 64592624, "body": "So sizeof b/sizeof b[0] is printing out 1 since b is  a pointer?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1469585151, "post_id": 38602460, "comment_id": 64592630, "body": "Yes, precisely. On your platform size of pointer divided by size of <code>int</code> happens to produce 1."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1469585235, "post_id": 38602460, "comment_id": 64592645, "body": "Also, don&#39;t use <code>%d</code> to <code>printf</code> values of type <code>size_t</code>. The proper format is <code>%zu</code>, not <code>%d</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6288471"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1469585293, "post_id": 38602460, "comment_id": 64592660, "body": "b[1] is printing out 3.Why? I said *(b+1)= 3 and b= a.I just tested."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1469585347, "post_id": 38602460, "comment_id": 64592674, "body": "Um... <code>b[1]</code> and <code>*(b+1)</code> are the same thing. If you did <code>*(b+1)= 3</code>, then <code>b[1]</code> <i>should</i> be <code>3</code>. Why do you find it surprising?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6288471"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1469585531, "post_id": 38602460, "comment_id": 64592705, "body": "I see it now, sorry."}], "owner": {"user_type": "does_not_exist", "display_name": "user6288471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1469584536, "answer_count": 0, "score": 0, "last_activity_date": 1469585325, "creation_date": 1469584401, "last_edit_date": 1469585325, "question_id": 38602460, "link": "https://stackoverflow.com/questions/38602460/same-sizeof-operation-giving-different-output-when-passed-in-as-function-paramet", "closed_reason": "Duplicate", "title": "Same sizeof operation giving different output when passed in as function parameter", "body": "<p>I am learning c programming with previous Java experience.I have been playing with the following code snippet.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define N 5\n\n\nint d[7];\n\nvoid fcn(int b[]) {\n  printf(\"%d\\n\", sizeof b/sizeof b[0]);\n  printf(\"%d\\n\", sizeof d/sizeof d[0]);\n}\n\nint main(int argc, char *argv[]) {\n\n  int a[] = { 5, 6, 7, 8, 9 };\n  int *b;\n  int c[10];\n  char cmd[20] = \"hello\";\n  char cmd2[20];\n  strcpy(cmd2, cmd);\n  printf(\"%d\\n\", sizeof a);\n  printf(\"%d\\n\", sizeof cmd);\n  printf(\"%d\\n\", sizeof a/sizeof a[0] );\n  fcn(a);\n  fcn(d);\n  b = a;\n  //b++;b--;b--;\n\n  //  b = 3;\n  *(b+1) = 3;\n\n  printf(\"N %d %d %d\\n\", sizeof b/sizeof b[0], *(b + 1), b[1] );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>20\n20\n5\n1\n7\n1\n7\nN 1 3 3\n</code></pre>\n\n<p>However, when I call  <code>printf(\"%d\\n\", sizeof a/sizeof a[0] );</code> inside main method that gives me <code>5</code> as expected but when I give it in the <code>void fcn(int b[])</code> function parameter it gives me <code>1</code> for the same operation.Why?Also I'm not understanding why <code>*(b + 1)</code> printing out <code>1</code> and <code>b[1]</code>  printing out <code>3</code>. Since I said <code>b = a;</code>, shouldn't it give me <code>a[1]</code> when I said <code>b[1]</code>, i.e. <code>6</code>?</p>\n"}, {"tags": ["c", "function", "sorting"], "comments": [{"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 3, "creation_date": 1469584506, "post_id": 38602459, "comment_id": 64592504, "body": "why don&#39;t you call it and see yourself?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1469584597, "post_id": 38602459, "comment_id": 64592515, "body": "Stack Overflow is not a substitute for testing and debugging. &quot;Does my code work&quot; is not an appropriate question for this site."}, {"owner": {"reputation": 6124, "user_id": 5627983, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/696f780ea286896dd41a92459152fbb3?s=128&d=identicon&r=PG&f=1", "display_name": "s952163", "link": "https://stackoverflow.com/users/5627983/s952163"}, "edited": false, "score": 0, "creation_date": 1469584732, "post_id": 38602459, "comment_id": 64592544, "body": "Maybe better move to <a href=\"http://codereview.stackexchange.com/\">Code Review</a>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469584754, "post_id": 38602459, "comment_id": 64592548, "body": "&quot;I just wanna know if the following code works correctly&quot;. Luckily for you there is a well known way to achieve that. It&#39;s called &quot;testing&quot;."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 6124, "user_id": 5627983, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/696f780ea286896dd41a92459152fbb3?s=128&d=identicon&r=PG&f=1", "display_name": "s952163", "link": "https://stackoverflow.com/users/5627983/s952163"}, "edited": false, "score": 0, "creation_date": 1469584805, "post_id": 38602459, "comment_id": 64592559, "body": "@s952163 No, Code Review is not an appropriate place for this question. Code Review very specifically only allows code that is already working. So it is a &quot;how to improve&quot; site, not a &quot;is this working&quot; site."}, {"owner": {"reputation": 757, "user_id": 3338710, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002832955814/picture?type=large", "display_name": "Jace", "link": "https://stackoverflow.com/users/3338710/jace"}, "edited": false, "score": 0, "creation_date": 1469585334, "post_id": 38602459, "comment_id": 64592671, "body": "I want to believe what you meant to say was &quot;is this a solid algorithm for sorting integers(ie. is there a commonly used method that outperforms this one.&quot; If you really meant to say &quot;will you see if this works for me&quot;, you&#39;ll need to give a really good reason as to why the above criticism is not justified."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1469585243, "creation_date": 1469585243, "answer_id": 38602562, "question_id": 38602459, "link": "https://stackoverflow.com/questions/38602459/does-this-function-sort-integers-from-smallest-to-largest/38602562#38602562", "title": "Does this function sort integers from smallest to largest?", "body": "<p>No, the code posted does not sort integers from smallest to largest, it does exactly the opposite, it sorts the array <code>list-&gt;value</code> from largest to smallest and performs the same permutation on the array <code>list-&gt;move</code> to keep it in sync.</p>\n\n<p>Note that this sort implementation is stable, but inefficient: time-complexity of <strong>O(N<sup>2</sup>)</strong></p>\n\n<p>To perform the sort by increasing order, change this:</p>\n\n<pre><code>if (list-&gt;value[j] &gt; best_value) {\n</code></pre>\n\n<p>into this:</p>\n\n<pre><code>if (list-&gt;value[j] &lt; best_value) {\n</code></pre>\n\n<p>Also note that instead of shifting the array contents, you could just swap the entries at index <code>i</code> and <code>best_index</code>.  It would be faster, but would break the stability of the sort.</p>\n"}], "owner": {"reputation": 27, "user_id": 6397695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6a337a2675e66f9fe570143c509c77b?s=128&d=identicon&r=PG&f=1", "display_name": "Lyesmith", "link": "https://stackoverflow.com/users/6397695/lyesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1469646231, "accepted_answer_id": 38602562, "answer_count": 1, "score": -4, "last_activity_date": 1469585243, "creation_date": 1469584401, "question_id": 38602459, "link": "https://stackoverflow.com/questions/38602459/does-this-function-sort-integers-from-smallest-to-largest", "closed_reason": "Not suitable for this site", "title": "Does this function sort integers from smallest to largest?", "body": "<p>I just wanna know if the following code works correctly for sorting a linked list of integers from smallest to largest value.</p>\n\n<pre><code>void list_sort(list_t * list) {\n\n   int i, j;\n   int best_index, best_move, best_value;\n\n   ASSERT(list_is_ok(list));\n\n   for (i = 0; i &lt; list-&gt;size-1; i++) {\n\n      best_index = i;\n      best_value = list-&gt;value[i];\n\n      for (j = i+1; j &lt; list-&gt;size; j++) {\n         if (list-&gt;value[j] &gt; best_value) {\n            best_index = j;\n            best_value = list-&gt;value[j];\n         }\n      }\n\n      if (best_index != i) {\n\n         best_move = list-&gt;move[best_index];\n         ASSERT(best_value==list-&gt;value[best_index]);\n\n         for (j = best_index; j &gt; i; j--) {\n            list-&gt;move[j] = list-&gt;move[j-1];\n            list-&gt;value[j] = list-&gt;value[j-1];\n         }\n\n         list-&gt;move[i] = best_move;\n         list-&gt;value[i] = best_value;\n      }\n   }\n</code></pre>\n\n<p>I just wanna know if the following code works correctly for sorting a linked list of integers from smallest to largest value.</p>\n"}, {"tags": ["c", "type-conversion", "language-lawyer"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469579734, "post_id": 38601780, "comment_id": 64591566, "body": "The way I read section 6 is that whether your example is equivalent. With the <code>memcpy()</code> the value is the same since you assign the <code>double</code> then do a <code>memcpy()</code> to the <code>uint64_t</code> so the value copied is of type <code>double</code>. Similarly with the <code>union</code> you assign a value to the <code>double</code> part of the union so the value in the memory area is of type <code>double</code> and you access it via the <code>uint64_t</code>. Either way there is no type conversion of the actual value. So no conversion from <code>double</code> to <code>uint64_t</code>. <code>memcpy()</code> copies the specified number of bytes. Why do you think the two examples would be different?"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 1, "creation_date": 1469580200, "post_id": 38601780, "comment_id": 64591660, "body": "I&#39;m no expert on the C standard, but there&#39;s an important difference between the two. The <code>union</code> version ensures alignment restrictions of both fields are met by the starting address of <code>u</code>. The <code>memcpy</code> version doesn&#39;t guarantee that <code>bits</code> is positioned on a <code>double</code> boundary. It could fail if <code>double</code> alignment was more restrictive than <code>uint64_t</code>, e.g. with a bus error when <code>printf</code> attempts to compute the <code>double</code> string representation of <code>bits</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469580673, "post_id": 38601780, "comment_id": 64591755, "body": "@RichardChambers: I am aware that no actual type conversion occurs, merely a reinterpretation of the bitwise representation of <code>double</code> as a <code>uint64_t</code>. I am perplexed by the wording of paragraph 6, especially regarding the copy done via <code>memcpy</code>.  I tough it should be safe, but other savvy C experts differ."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 3, "creation_date": 1469580869, "post_id": 38601780, "comment_id": 64591790, "body": "@Gene: I don&#39;t see any alignment issues: <code>memcpy</code> is explicitly safe to copy between non aligned blocks and the values passed to <code>printf</code> are read from their effective types."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469581750, "post_id": 38601780, "comment_id": 64591954, "body": "I can understand being perplexed by the wording of para 6. It has that lawyerly rhythm and construction that is not truly accessible to mere mortals. When I read it, my impression is that it is the same thing and should be safe. Like a <code>union</code>, using <code>memcpy()</code> copies a value from a memory location whose value is of a particular type and puts it in a different location and the value is still the same type. However when accessed through an lvalue of a different type, the value is retrieved as the type of the lvalue and not the original type."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1469582480, "post_id": 38601780, "comment_id": 64592134, "body": "@RichardChambers: <i>However when accessed through an lvalue of a different type, the value is retrieved as the type of the lvalue and not the original type.</i> which is exactly the definition of type punning and the purpose of the above code.  So is your answer: <i>yes, <code>memcpy</code> can be used for type punning.</i>"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469584087, "post_id": 38601780, "comment_id": 64592427, "body": "I would consider <code>memcpy()</code> safe for type punning. And actually I have seen a lot of embedded code that depends on it with <code>memcpy()</code> used to divide up <code>struct</code> objects with offset address calculations and really weird stuff. The <code>struct</code> were defined with <code>pragma</code> for byte alignment so it all works. That was not C11 but older C98 and some of it old K&amp;R C. This might actually be an improvement in the spec to actually specify the behavior that has been canonized as the defacto behavior for years."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469584221, "post_id": 38601780, "comment_id": 64592449, "body": "@RichardChambers: can you write an answer?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469586099, "post_id": 38601780, "comment_id": 64592838, "body": "I put together an answer. probably a bit too wordy as that is a problem I have. &lt;laughter&gt;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469587646, "post_id": 38601780, "comment_id": 64593175, "body": "Note: Difference in <code>union</code> v <code>memcpy()</code> should <code>sizeof double  != sizeof uint64_t</code> - but I take their equal size is taken as a given."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469588546, "post_id": 38601780, "comment_id": 64593387, "body": "@chux, in the <code>memcpy()</code> the number of bytes specified is the <code>sizeof</code> the destination so the max number of bytes copied depends on the size of the destination. If the source type is different in a <code>union</code> you will still have the same issue of interpretation of the bytes when you access the bytes using a type different from the type used to store those bytes."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1469592877, "post_id": 38601780, "comment_id": 64594414, "body": "@chqrlie Of course the <code>memcpy</code> is safe. But for a compiler pushing a <code>uint64_t</code> on the stack for <code>printf</code> to know it should be aligned on a <code>double</code> boundary, it would have to inspect the format string, push every varargs argument at the lcm of all alignment boundaries, or dynamically check each <code>printf</code> argument for alignment and copy as needed on the fly. All that seems very un-C-like. But as I said, I&#39;m not an expert."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469606851, "post_id": 38601780, "comment_id": 64601254, "body": "The part about <code>memcpy()</code> in paragraph 6 doesn&#39;t apply in this situation, since <code>uint64_t bits</code> <b>has a declared type</b>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469610548, "post_id": 38601780, "comment_id": 64603712, "body": "@EOF: good point.  I edited the question."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1469616137, "post_id": 38601780, "comment_id": 64607657, "body": "Relevant: <a href=\"http://blog.regehr.org/archives/959\" rel=\"nofollow noreferrer\">blog.regehr.org/archives/959</a>  John Regehr says that in some cases, <code>memcpy</code> is his preferred way of doing it and enables the majority of compilers to generate optimal object code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469630588, "post_id": 38601780, "comment_id": 64618501, "body": "Suggest <code>uint64_t bits = *pi;</code> --&gt; <code>uint64_t bits = *pbits;</code>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1469630678, "post_id": 38601780, "comment_id": 64618571, "body": "@ChrisBeck: What would facilitate optimal code would be if the Standard were to require that if a pointer cast from one specific type to another, then all accesses made via the cast pointer which precede any other accesses to the same storage must be recognized as potential accesses of either the old or new type.  The simplest way of achieving on traditional compilers would be to say that if e.g. an <code>int*</code> is cast to a <code>short*</code> then any cached <code>int</code> values which might be identified by that pointer must be flushed.  Code reordering complicates things, but the proper remedy for that would be..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1469631007, "post_id": 38601780, "comment_id": 64618839, "body": "...to use things like <code>restrict</code>.  I really doubt that most of the people voting for the languages in the standard would expect that quality compilers would not recognize that something like <code>((uint16_t*)someUint32Ptr)[IS_BIG_ENDIAN];</code> might modify a value of type <code>uint32_t</code> [and might be the most efficient way to clear the lower half of it], or would think that optimization is furthered by requiring programmers to write code that would force a compiler to assume a pointer might alias almost anything, anywhere, of any type."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469578958, "post_id": 38601848, "comment_id": 64591384, "body": "Hence the question: <i>Why would it not?</i>  Paragraph 6 is obscure to me.  Can someone explain?  What if <code>memcpy()</code> is implemented as reading and writing bytes, does the last item in paragraph 7 save the day?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1469587064, "post_id": 38601848, "comment_id": 64593057, "body": "@chqrlie: The behavior was historically 100% reliable, but major compiler writers are so desperate to eke an extra percentage point or two out of benchmark performance that they&#39;re willing to throw decades of precedent out the window (and force programmers who aren&#39;t writing benchmarks to write less efficient code) to do it."}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": 1, "last_activity_date": 1469578793, "creation_date": 1469578793, "answer_id": 38601848, "question_id": 38601780, "link": "https://stackoverflow.com/questions/38601780/can-memcpy-be-used-for-type-punning/38601848#38601848", "title": "Can memcpy be used for type punning?", "body": "<p>It <em>might</em> give the same result, but the compiler does not need to guarantee it. So you simply cannot rely on it.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1469608374, "post_id": 38602654, "comment_id": 64602224, "body": "I wish your interpretation is correct, but If paragraph 6 says the effective type of the representation at the destination of <code>memcpy</code> is that of the source, paragraph 7 says accessing it with the type of the destination is not one of the enumerated cases, because the type of the lvalue expression, <code>uint64_t</code>, is not compatible with the effective type of the object whose value is stored, namely <code>double</code>, and is not a character type."}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 2, "last_activity_date": 1469585919, "creation_date": 1469585919, "answer_id": 38602654, "question_id": 38601780, "link": "https://stackoverflow.com/questions/38601780/can-memcpy-be-used-for-type-punning/38602654#38602654", "title": "Can memcpy be used for type punning?", "body": "<p>I read paragraph 6 as saying that using the <code>memcpy()</code> function to copy a series of bytes from one memory location to another memory location can be used for type punning just as using a <code>union</code> with two different types can be used for type punning.</p>\n\n<p>The first mention of using <code>memcpy()</code> indicates that if it copies the specified number of bytes and that those bytes will have the same type as the variable at the source destination when that variable (lvalue) was used to store the bytes there.</p>\n\n<p>In other words if you have a variable <code>double d;</code> and you then assign a value to this variable (lvalue) the type of the data stored in that variable is type <code>double</code>. If you then use the <code>memcpy()</code> function to copy those bytes to another memory location, say a variable <code>uint64_t bits;</code> the type of those copied bytes is still <code>double</code>.</p>\n\n<p>If you then access the copied bytes through the destination variable (lvalue), the <code>uint64_t bits;</code> in the example, then the type of that data is seen as the type of the lvalue used to retrieve the data bytes from that destination variable. So the bytes are interpreted (not converted but interpreted) as the destination variable type rather than the type of the source variable.</p>\n\n<p>Accessing the bytes through a different type means the bytes are now interpreted as the new type <em>even though the bytes have not actually changed in any way</em>.</p>\n\n<p>This is also the way a <code>union</code> works. A <code>union</code> does not do any kind of conversion. You store bytes into a <code>union</code> member which is of one type and then you pull the same bytes back out through a different <code>union</code> member. The bytes are the same however the interpretation of the bytes depends on the type of the <code>union</code> member that is used to access the memory area.</p>\n\n<p>I have seen the <code>memcpy()</code> function used in older C source code to help divide up a <code>struct</code> into pieces by using <code>struct</code> member offset along with the <code>memcpy()</code> function to copy portions of the <code>struct</code> variable into other <code>struct</code> variables.</p>\n\n<p>Because the type of the source location used in the <code>memcpy()</code> is the type of the bytes stored there the same kinds of problems that you can run into with the use of a <code>union</code> for punning also apply to using <code>memcpy()</code> in this way such as the <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow\">Endianness</a> of the data type.</p>\n\n<p>The thing to remember is that whether using a <code>union</code> or using the <code>memcpy()</code> approach the type of the bytes copied are the type of the source variable and when you then access the data as another type, whether through a different member of a <code>union</code> or through the destination variable of the <code>memcpy()</code> the bytes are interpreted as the type of the destination lvalue. However the actual bytes are not changed.</p>\n"}, {"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469588959, "post_id": 38602777, "comment_id": 64593484, "body": "not sure what this has to do with the question. there are two memory copying functions available, <code>memcpy()</code> for non-overlapping memory regions and <code>memmov()</code> for possibly overlapping memory regions. I assume this is to allow library optimizations for non-overlapping memory regions which are dangerous for overlapping memory regions. <a href=\"http://stackoverflow.com/questions/4415910/memcpy-vs-memmove\">stackoverflow.com/questions/4415910/memcpy-vs-memmove</a>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1469629940, "post_id": 38602777, "comment_id": 64617988, "body": "@RichardChambers: If the destination of a memcpy or memmove does not have a declared type, a compiler is allowed to regard as unreachable any code which would try to read the destination using any type which differs from the source; a compiler can also do that if it thinks data is being copied as a character array (whatever that means).  If data is copied as a sequence of totally-unrelated character operations, however, a compiler is not allowed to make such an inference, but the Standard isn&#39;t clear how unrelated the operations must be."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 2, "last_activity_date": 1474558883, "last_edit_date": 1474558883, "creation_date": 1469586888, "answer_id": 38602777, "question_id": 38601780, "link": "https://stackoverflow.com/questions/38601780/can-memcpy-be-used-for-type-punning/38602777#38602777", "title": "Can memcpy be used for type punning?", "body": "<p><strong>CHANGED--SEE BELOW</strong></p>\n\n<p>While I have never observed a compiler to interpret a memcpy of non-overlapping source and destination as doing anything that would not be equivalent to reading all of the bytes of the source as a character type and then writing all of the bytes of the destination as a character type (meaning that if the destination had no declared type, it would be left with no effective type), the language of the Standard would allow obtuse compilers to make \"optimizations\" which--in those rare instances where a compiler would be able to identify and exploit them--would be more likely to break code which would otherwise work (and would be well-defined if the Standard were better written) than to actually improve efficiency.</p>\n\n<p>As to whether that means that it's better to use memcpy or a manual byte-copy loop whose purpose is sufficiently well-disguised as to be unrecognizable as \"copying an array of character type\", I have no idea.  I would posit that the sensible thing would be to shun anyone so obtuse as to suggest that a good compiler should generate bogus code absent such obfuscation, but since behavior that would have been considered obtuse in years past is presently fashionable, I have no idea whether <code>memcpy</code> will be the next victim in the race to break code which compilers had for decades treated as \"well-defined\".</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>GCC as of 6.2 will sometimes omit memmove operations in cases where it sees that the destination and source identify the same address, even if they are pointers of different types.  If storage which had been written as the source type is later read as the destination type, gcc will assume that the latter read cannot identify the same storage as the earlier write.  Such behavior on gcc's part is justifiable only because of the language in the Standard which allows the compiler to copy the Effective Type through the <code>memmove</code>.  It's unclear whether that was an intentional interpretation of the rules regarding <code>memcpy</code>, however, given that gcc will also make a similar optimization in some cases where it is clearly <em>not</em> allowed by the Standard, e.g. when a union member of one type (e.g. 64-bit <code>long</code>) is copied to a temporary and from there to a member of a different type with the same representation (e.g. 64-bit <code>long long</code>).  If gcc sees that the destination will be bit-for-bit identical to the temporary, it will omit the write, and consequently fail to notice that the effective type of the storage was changed.</p>\n"}, {"comments": [{"owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "edited": false, "score": 0, "creation_date": 1552224885, "post_id": 38610554, "comment_id": 96921275, "body": "Is <code>memcpy</code> used for type-punning concerned about the source type? Can the source have no declared type (<code>m&#47;c&#47;re&#47;alloc</code>ed) providing that we know its <i>effective</i> type?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "edited": false, "score": 1, "creation_date": 1552384031, "post_id": 38610554, "comment_id": 96978348, "body": "@SomeName Considering that the act of <i>storing</i> to an object causes it to have an effective type for further (reading) accesses, even if it had no effective type before, the only way to copy <i>from</i> an object without an effective type would be to access an object that is neither initialized nor written to, which would make its value indeterminate and the read of it undefined behavior."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1601153316, "post_id": 38610554, "comment_id": 113318828, "body": "@EOF: The Effective Type rules as written only appear simple because they make no effort to avoid creating ambiguous and unworkable corner cases.  Further, they use an abstraction model which is bears no relation to the things compilers actually care about.  The situations where blind allowance for aliasing would be needlessly expensive are generally those where storage is accessed via one type, accessed via pointer that has no discernible relationship with that type, and then accessed <i>again</i> as the first type using a pointer with no discernible relationship to any other type."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1601153554, "post_id": 38610554, "comment_id": 113318874, "body": "@EOF: If a compiler which is processing an access of the intermediate type doesn&#39;t know about both preceding and following accesses using some other type, it wouldn&#39;t have any reason to care about how such accesses might have affected the object&#39;s &quot;Effective Type&quot;.  In cases where it does know about such accesses, but a pointer is converted from the earlier type to another type between the last access using the earlier type and the first with the new one, treating the conversion as a barrier to the consolidation of loads using the original type would be unlikely..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1601153725, "post_id": 38610554, "comment_id": 113318914, "body": "...to impede useful optimizations.  When one factors in questions about interactions involving things like <code>memcpy</code>, direct operations on struct and union member lvalues, and use of address-of on such lvalues, pretending that storage holds Effective Types ends up being a far less useful model than would be one based upon the sequences of actions that access storage or derive pointers to it."}], "tags": [], "owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "is_accepted": false, "score": 11, "last_activity_date": 1548040439, "last_edit_date": 1548040439, "creation_date": 1469615767, "answer_id": 38610554, "question_id": 38601780, "link": "https://stackoverflow.com/questions/38601780/can-memcpy-be-used-for-type-punning/38610554#38610554", "title": "Can memcpy be used for type punning?", "body": "<p>There are two cases to consider: <code>memcpy()</code>ing into an object that <em>has</em> a declared type, and <code>memcpy()</code>ing into an object that does not.</p>\n\n<p>In the second case,</p>\n\n<pre><code>double d = 1234.5678;\nvoid *p = malloc(sizeof(double));\nassert(p);\nuint64_t *pbits = memcpy(p, &amp;d, sizeof(double));\nuint64_t bits = *pbits;\nprintf(\"the representation of %g is %08\"PRIX64\"\\n\", d, bits);\n</code></pre>\n\n<p>The behavior is indeed undefined, since the effective type of the object pointed to by <code>p</code> will become <code>double</code>, and accessing an object of effective type <code>double</code> though an lvalue of type <code>uint64_t</code> is undefined.</p>\n\n<p>On the other hand, </p>\n\n<pre><code>double d = 1234.5678;\nuint64_t bits;\nmemcpy(&amp;bits, &amp;d, sizeof bits);\nprintf(\"the representation of %g is %08\"PRIX64\"\\n\", d, bits);\n</code></pre>\n\n<p>is <em>not</em> undefined. C11 draft standard n1570:</p>\n\n<blockquote>\n  <p>7.24.1 String function conventions<br>\n  3 For all functions in this subclause, each character shall be interpreted as if it had the type\n  unsigned char (and therefore every possible object representation is\n  valid and has a different value).</p>\n</blockquote>\n\n<p>And </p>\n\n<blockquote>\n  <p>6.5 Expressions<br>\n  7 An object shall have its stored value accessed only by an lvalue expression that has one of the following types: 88) </p>\n  \n  <blockquote>\n    <p>\u2014 a type compatible with the effective type of the object,<br>\n    \u2014 a qualified version of a type compatible with the effective type of the object,<br>\n    \u2014 a type that is the signed or unsigned type corresponding to the effective type of the object,<br>\n    \u2014 a type that is the signed or unsigned type corresponding to a qualified version of the\n    effective type of the object,<br>\n    \u2014 an aggregate or union type that includes one of the aforementioned types \n    among its members (including, recursively, a member of a subaggregate or contained union), or<br>\n    \u2014 a character type.</p>\n  </blockquote>\n  \n  <p>Footnote 88) The intent of this list is to specify those circumstances in which an object may or may not be aliased.</p>\n</blockquote>\n\n<p>So the <code>memcpy()</code> itself is well-defined.</p>\n\n<p>Since <code>uint64_t bits</code> <em>has a declared type</em>, it retains its type even though its object representation was copied from a <code>double</code>.</p>\n\n<p>As chqrlie points out, <code>uint64_t</code> cannot have trap representations, so accessing <code>bits</code> after the <code>memcpy()</code> is <em>not</em> undefined, provided <code>sizeof(uint64_t) == sizeof(double)</code>. However, the <em>value</em> of <code>bits</code> will be implementation-dependent (for example due to endianness).</p>\n\n<p><strong>Conclusion</strong>: <code>memcpy()</code> <em>can</em> be used for type-punning, provided that the destination of the <code>memcpy()</code> does have a declared type, i.e. is not allocated by <code>[m/c/re]alloc()</code> or equivalent.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469616012, "post_id": 38610576, "comment_id": 64607580, "body": "The <code>union</code> case is explicitly (but sadly non-normatively) documented to be implementation-defined in C11 draft standard n1570 <i>6.5.2.3 Structure and union members [Footnote] 95 If the member used to read the contents of a union object is not the same as the member last used to store a value in the object, the appropriate part of the object representation of the value is reinterpreted as an object representation in the new type as described in 6.2.6 (a process sometimes called \u2018\u2018type punning\u2019\u2019). This might be a trap representation.</i>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469620312, "post_id": 38610576, "comment_id": 64610528, "body": "The one part that is missing here now is that the behavior is explicitly <i>undefined</i> in the <code>memcpy()</code> variant if the object that is copied to is allocated by <code>[m&#47;c&#47;re]alloc()</code>. Have a look at my answer for why that is."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469621078, "post_id": 38610576, "comment_id": 64611049, "body": "@EOF: I agree with you but it is a different problem, that I see as loosely related to xalloc. If I change your example to <code>void *p = malloc(sizeof(double)); uint64_t *pbits = p; *pbits = 0 &#47;&#47; effective type is now uint64_t; memcpy(p, &amp;d, sizeof(double));</code>, I am only left with the implementation defined behaviour because of possible trap representation. Once an allocated variable receives a type it keeps it until it is released."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469621301, "post_id": 38610576, "comment_id": 64611214, "body": "No. Remember that C11 draft standard n1570 : <i>6.5 Expressions 6 [...]If a value is copied into an object having no declared type using memcpy or memmove, or is copied as an array of character type, then the effective type of the modified object for that access</i> <b>and for subsequent accesses that do not modify the value</b> <i>is the effective type of the object from which the value is copied, if it has one.</i> The <code>memcpy()</code> <i>does</i> modify the value, so the effective type of the object <i>changes again</i>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469621943, "post_id": 38610576, "comment_id": 64611684, "body": "Actually, the relevant part for your specific example is a sentence earlier: <i>If a value is stored into an object having no declared type through an lvalue having a type that is not a character type, then the type of the lvalue becomes the effective type of the object for that access and for</i> <b><i>subsequent accesses that do not modify the stored value.</i></b> <i>[...]</i> , but the point is the same."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469622318, "post_id": 38610576, "comment_id": 64611934, "body": "In the rationale for the C99 standard <i>3. Terms and definitions The definition of object does not employ the notion of type. Thus an object has no type in and of itself. However, since an object may only be designated by an lvalue (see &#167;6.3.2.1), the phrase \u201cthe type of an object\u201d is taken to mean, here and in the Standard, \u201cthe type of the lvalue designating this object,\u201d and \u201cthe value of an object\u201d means \u201cthe contents of the object interpreted as a value of the type of the lvalue designating the object.\u201d</i> Thus an object&#39;s lifetime is not bound to its type."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469622394, "post_id": 38610576, "comment_id": 64612004, "body": "@EOF: That&#39;s an interesting question, because the standard says nothing on how an allocated object can be built. I&#39;ve recently asked a <a href=\"http://stackoverflow.com/q/38515179/3545273\">question</a> on this and 6 days later proposed an answer. Please read it and comment either the question or the answer if you can sched some light on that. But for what remains, I&#39;ve now understood your point and linked to your answer."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469636938, "post_id": 38610576, "comment_id": 64622851, "body": "The problem is not trap representations.  As a matter of fact, <code>uint64_t</code> cannot have trap representations since the representation must be 64 value bits and no padding bits.  The problem is whether the compiler is smart/obnoxious enough to assume that <code>bits</code> was not changed since it was last read or written, assumption that could be supported by the absence of any write access to it through an appropriate type.  <code>memcpy</code> obviously <b>must</b> be assumed to modify <code>bits</code> since a non const pointer to it is passed to <code>memcpy</code>, converted to <code>void*</code>."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 5, "last_activity_date": 1469622448, "last_edit_date": 1495542847, "creation_date": 1469615822, "answer_id": 38610576, "question_id": 38601780, "link": "https://stackoverflow.com/questions/38601780/can-memcpy-be-used-for-type-punning/38610576#38610576", "title": "Can memcpy be used for type punning?", "body": "<p>You propose 3 ways which all have different problems with C standard.</p>\n\n<ol>\n<li><p>standard library <code>memcpy</code></p>\n\n<pre><code>double d = 1234.5678;\nuint64_t bits;\nmemcpy(&amp;bits, &amp;d, sizeof bits);\nprintf(\"the representation of %g is %08\"PRIX64\"\\n\", d, bits);\n</code></pre>\n\n<p>The <code>memcpy</code> part is legal (provided in your implementation <code>sizeof(double) == sizeof(uint64_t)</code> which is <strong>not</strong> guaranteed per standard): you access two objects through char pointers. </p>\n\n<p>But the <code>printf</code> line is not. The representation in <code>bits</code> is now a double. it might be a trap representation for an <code>uint64_t</code>, as defined in 6.2.6.1 General \u00a75</p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the object type. If the stored\n  value of an object has such a representation and is read by an lvalue expression that does\n  not have character type, the behavior is undefined. If such a representation is produced\n  by a side effect that modifies all or any part of the object by an lvalue expression that\n  does not have character type, the behavior is undefined. Such a representation is called\n  a trap representation.</p>\n</blockquote>\n\n<p>And 6.2.6.2 Integer types says explicitely</p>\n\n<blockquote>\n  <p>For unsigned integer types other than unsigned char, the bits of the object\n  representation shall be divided into two groups: value bits and padding bits ... The values of any padding bits are unspecified.<sup>53</sup></p>\n</blockquote>\n\n<p>With note 53 saying:</p>\n\n<blockquote>\n  <p>Some combinations of padding bits might generate trap representations,</p>\n</blockquote>\n\n<p>If you know that in your implementation there are no padding bits (still never seen one...) every representation is a valid value, and the <code>print</code> line becomes valid again. But it is only <em>implementation dependant</em> and can be undefined behaviour in the general case</p></li>\n<li><p>union</p>\n\n<pre><code>union { double d; uint64_t i; } u;\nu.d = 1234.5678;\nprintf(\"the representation of %g is %08\"PRIX64\"\\n\", d, u.i);\n</code></pre>\n\n<p>The members of the union do not share a common subsequence, and you are accessing a member which is not the last value written. Ok common implementation will give expected results but <em>per standard</em> it is not explicitely defined what should happen. A footnote in 6.5.2.3 Structure and union members \u00a73 says that if leads to same problems as previous case:</p>\n\n<blockquote>\n  <p>If the member used to access the contents of a union object is not the same as the member last used to\n  store a value in the object, the appropriate part of the object representation of the value is reinterpreted\n  as an object representation in the new type as described in 6.2.6 (a process sometimes called \"type\n  punning\"). This might be a trap representation.</p>\n</blockquote></li>\n<li><p>custom <code>memcpy</code></p>\n\n<p>Your implementation only does character accesses which is always allowed. It is exactly the same thing as the first case: implementation defined.</p></li>\n</ol>\n\n<p>The only way that would be explicitely defined per standard would be to store the representation of the <code>double</code> in an char array of the correct size, and then display the bytes values of the char array:</p>\n\n<pre><code>double d = 1234.5678;\nunsigned char bits[sizeof(d)];\nmemcpy(&amp;bits, &amp;d, sizeof(bits));\nprintf(\"the representation of %g is \", d);\nfor(int i=0; i&lt;sizeof(bits); i++) {\n    printf(\"%02x\", (unsigned int) bits[i]);\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>And the result will only be useable if the implementation uses exactly 8 bits for a <code>char</code>. But it would be visible because it would display more than 8 hexa digits if one of the <em>bytes</em> had a value greater than 255.</p>\n\n<hr>\n\n<p>All of the above is only valid because <code>bits</code> has a declared type. Please see <a href=\"https://stackoverflow.com/a/38610554/3545273\">@EOF's answer</a> to understand why it would be different for an allocated object</p>\n"}], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2064, "favorite_count": 2, "answer_count": 5, "score": 16, "last_activity_date": 1548042103, "creation_date": 1469578254, "last_edit_date": 1592644375, "question_id": 38601780, "link": "https://stackoverflow.com/questions/38601780/can-memcpy-be-used-for-type-punning", "title": "Can memcpy be used for type punning?", "body": "<p>This is a quote from the C11 Standard:</p>\n<blockquote>\n<p><strong>6.5 Expressions</strong><br />\n...</p>\n<p>6  The <em>effective type</em> of an object for an access to its stored value is the declared type of the object, if any. If a value is stored into an object having no declared type through an lvalue having a type that is not a character type, then the type of the lvalue becomes the effective type of the object for that access and for subsequent accesses that do not modify the stored value. If a value is copied into an object having no declared type using <code>memcpy</code> or <code>memmove</code>, or is copied as an array of character type, then the effective type of the modified object for that access and for subsequent accesses that do not modify the value is the effective type of the object from which the value is copied, if it has one. For all other accesses to an object having no declared type, the effective type of the object is simply the type of the lvalue used for the access.</p>\n<p>7 An object shall have its stored value accessed only by an lvalue expression that has one of the following types:</p>\n<p>\u2014 a type compatible with the effective type of the object,<br />\n\u2014 a qualified version of a type compatible with the effective type of the object,<br />\n\u2014 a type that is the signed or unsigned type corresponding to the effective type of the object,<br />\n\u2014 a type that is the signed or unsigned type corresponding to a qualified version of the effective type of the object,<br />\n\u2014 an aggregate or union type that includes one of the aforementioned types among its members (including, recursively, a member of a subaggregate or contained union), or<br />\n\u2014 a character type.</p>\n</blockquote>\n<p>Does this imply that <code>memcpy</code> cannot be used for type punning this way:</p>\n<pre><code>double d = 1234.5678;\nuint64_t bits;\nmemcpy(&amp;bits, &amp;d, sizeof bits);\nprintf(&quot;the representation of %g is %08&quot;PRIX64&quot;\\n&quot;, d, bits);\n</code></pre>\n<p>Why would it not give the same output as:</p>\n<pre><code>union { double d; uint64_t i; } u;\nu.d = 1234.5678;\nprintf(&quot;the representation of %g is %08&quot;PRIX64&quot;\\n&quot;, d, u.i);\n</code></pre>\n<p>What if I use my version of <code>memcpy</code> using character types:</p>\n<pre><code>void *my_memcpy(void *dst, const void *src, size_t n) {\n    unsigned char *d = dst;\n    const unsigned char *s = src;\n    for (size_t i = 0; i &lt; n; i++) { d[i] = s[i]; }\n    return dst;\n}\n</code></pre>\n<hr />\n<p><strong>EDIT:</strong> EOF commented that <em>The part about <code>memcpy()</code> in paragraph 6 doesn't apply in this situation, since <code>uint64_t bits</code> has a declared type.</em>  I agree, but, unfortunately, this does not help answer the question whether <code>memcpy</code> can be used for type punning, it just makes paragraph 6 irrelevant to assess the validity of the above examples.</p>\n<p>Here here is another attempt at type punning with <code>memcpy</code> that I believe would be covered by paragraph 6:</p>\n<pre><code>double d = 1234.5678;\nvoid *p = malloc(sizeof(double));\nif (p != NULL) {\n    uint64_t *pbits = memcpy(p, &amp;d, sizeof(double));\n    uint64_t bits = *pbits;\n    printf(&quot;the representation of %g is %08&quot;PRIX64&quot;\\n&quot;, d, bits);\n}\n</code></pre>\n<p>Assuming <code>sizeof(double) == sizeof(uint64_t)</code>, Does the above code have defined behavior under paragraph 6 and 7?</p>\n<hr />\n<p><strong>EDIT:</strong> Some answers point to the potential for undefined behavior coming from reading a trap representation.  This is not relevant as the C Standard explicitly excludes this possibility:</p>\n<blockquote>\n<p><strong>7.20.1.1 Exact-width integer types</strong></p>\n<p>1 The typedef name <code>int</code><em>N</em><code>_t</code> designates a signed integer type with width <em>N</em>, no padding bits, and a two\u2019s complement representation. Thus, <code>int8_t</code> denotes such a signed integer type with a width of exactly 8 bits.</p>\n<p>2 The typedef name <code>uint</code><em>N</em><code>_t</code> designates an unsigned integer type with width <em>N</em> and no padding bits. Thus, <code>uint24_t</code> denotes such an unsigned integer type with a width of exactly 24 bits.</p>\n<p>These types are optional. However, if an implementation provides integer types with widths of 8, 16, 32, or 64 bits, no padding bits, and (for the signed types) that have a two\u2019s complement representation, it shall define the corresponding typedef names.</p>\n</blockquote>\n<p>Type <code>uint64_t</code> has exactly 64 value bits and no padding bits, thus there cannot be any trap representations.</p>\n"}, {"tags": ["c", "string-formatting", "scanf"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1469580516, "post_id": 38601747, "comment_id": 64591726, "body": "btw <code>{ NULL }</code> should be <code>{ 0 }</code> or <code>{ &#39;\\0&#39; }</code>. <code>NULL</code> is a pointer that has the value 0. Assigning it to a character should be giving you a <i>&quot;incompatible pointer to integer conversion&quot;</i> warning."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1469582134, "post_id": 38601747, "comment_id": 64592045, "body": "@user3386109: Unfortunately, it very likely won&#39;t produce a warning. <code>NULL</code> expands to an implementation-defined null pointer constant, and is commonly <code>0</code>. (And yes, the fact that a <i>null pointer constant</i> is not necessarily an expression of pointer type is exactly as counterintuitive as you think it is.)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1469582141, "post_id": 38601747, "comment_id": 64592046, "body": "@user3386109: Even though defining <code>NULL</code> as <code>(void *) 0</code> is a very popular practice in C standard library implementations, <code>NULL</code> is not guaranteed/required to be a pointer. It could be an integer <code>0</code>, which will make this code valid. However, your point still stands. <code>NULL</code> has no business being there. <code>NULL</code> should be reserved to pointer contexts only."}], "answers": [{"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1469578411, "post_id": 38601789, "comment_id": 64591282, "body": "Nice catch on the &quot;too small by 1&quot; bug!"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1469582108, "post_id": 38601789, "comment_id": 64592041, "body": "@dasblinkenlight: Good bug candidate, but no consequences in this particular case since the input string has a maximum length of 79."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469583170, "post_id": 38601789, "comment_id": 64592256, "body": "@AnT:  The definition: <code>char szInline[80];</code>  If <code>szInline</code> is not a proper string (does not contain a null byte), the code invokes undefined behavior.  We all assume the fragment omits the initialization of <code>szInline</code>, but an ellipsis <code>...</code> would make it more obvious."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469613567, "post_id": 38601789, "comment_id": 64605840, "body": "@chqrlie That&#39;s a bit optimistic. To me, it looks like the <code>%80</code> is intended to compensate for the string being potentially <i>not</i> properly terminated."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1469635093, "post_id": 38601789, "comment_id": 64621732, "body": "@Potatoswatter: that would be insufficient of course. I don&#39;t believe the OP had such a contorted case in mind.  He may have been taught how to avoid overflowing the destination array, and was caught by the quirky semantics if the <code>sscanf()</code> function."}], "tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 4, "last_activity_date": 1469578295, "creation_date": 1469578295, "answer_id": 38601789, "question_id": 38601747, "link": "https://stackoverflow.com/questions/38601747/what-does-the-string-format-80-mean-in-c/38601789#38601789", "title": "What does the string format %80[^,] mean in C?", "body": "<p>Read at most 80 chars up to the next <code>,</code> comma.</p>\n\n<p>Btw, the <code>szDescription</code> buffer is too small by 1.</p>\n"}, {"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1469582305, "post_id": 38602200, "comment_id": 64592088, "body": "Is there a way to make scanf match up to 80 non-comma characters optionally so that ,1 would also be successful?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1469582951, "last_edit_date": 1469582951, "creation_date": 1469581987, "answer_id": 38602200, "question_id": 38601747, "link": "https://stackoverflow.com/questions/38601747/what-does-the-string-format-80-mean-in-c/38602200#38602200", "title": "What does the string format %80[^,] mean in C?", "body": "<p>Here are the steps for <code>sscanf(szInline, \"%80[^,], %f\", szDescription, &amp;fCost)</code>: </p>\n\n<ul>\n<li><code>sscanf</code> will parse between <code>1</code> and <code>80</code> characters different from <code>,</code> into array <code>szDescription</code>,</li>\n<li>if successful, it then expects to match a <code>,</code> character ;</li>\n<li>if found, it then ignores any whitespace characters (including <code>'\\n'</code>) ;</li>\n<li>if finally tries and converts a floating point number representation into variable <code>fCost</code> of type <code>float</code>.</li>\n<li>It will return the number of successful conversions or <code>EOF</code> is case of an early failure.</li>\n</ul>\n\n<p>There are potential problems in there:</p>\n\n<ul>\n<li>the destination array <code>szDescription</code> is too short for 80 characters plus a <code>'\\0'</code> terminator, but luckily, the input array <code>szInline</code> also has a length of 80.  If it contains a proper string, at most <code>79</code> characters will be matched by <code>sscanf</code>, so no overflow can occur.  The size specifier is actually not needed in this particular case.</li>\n<li>the space after the <code>,</code> is redundant. <code>%f</code> always ignores leading whitespace.</li>\n</ul>\n\n<p>Beware that <code>sscanf()</code> will return <code>EOF</code> on this input: <code>,1</code> as there are <strong>no</strong> characters different from <code>,</code> to be parsed from the start of the input string.  This special case is commonly overlooked by even advanced C programmers.</p>\n\n<p>If you want to accept a possibly empty string before the <code>,</code>, you cannot use <code>sscanf()</code> directly, but you can use this:</p>\n\n<pre><code>/* compute the length of the initial sequence upto `,` if any */\nsize_t len = strcspn(szInline, \",\");\n/* len &lt; 80 because sizeof(szInline) == 80 */\n/* copying the initial string */\nmemcpy(szDescription, szInline, len);\nszDescription[len] = '\\0';\nif (sscanf(szInline + len, \",%f\", &amp;fCost) != 1) {\n    /* conversion error: no `,` or no number past it */\n    ...\n}\n</code></pre>\n\n<p><code>sscanf()</code> has many quirks, it is notoriously difficult to use properly for anything but the most trivial parsing tasks. Seldom used standard functions <code>strspn()</code> and <code>strcspn()</code> are useful alternatives.</p>\n"}], "owner": {"reputation": 43, "user_id": 6639842, "user_type": "registered", "profile_image": "https://graph.facebook.com/815205238615076/picture?type=large", "display_name": "Jack Welch", "link": "https://stackoverflow.com/users/6639842/jack-welch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 38601789, "answer_count": 2, "score": 3, "last_activity_date": 1469582951, "creation_date": 1469577938, "question_id": 38601747, "link": "https://stackoverflow.com/questions/38601747/what-does-the-string-format-80-mean-in-c", "title": "What does the string format %80[^,] mean in C?", "body": "<p>Given the following lines: </p>\n\n<pre><code>char szInline[80];\nchar szDescription[80] = { NULL };\nfloat fCost = 0;\nsscanf (szInline, \"%80[^,], %f\", szDescription, &amp;fCost);\n</code></pre>\n\n<p>What does the %80[^,] do?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1469577283, "post_id": 38601517, "comment_id": 64591029, "body": "The fact that the correct line has length 21 indicates that your sample file and terminal uses UTF-8. The likely reason why it fails with your literals is that your source file is saved in a pre-UTF-8 encoding. If you want to do it right, you need to be aware of what encoding each input file, output file, terminal, data structure and string literal contains or expects, and convert accordingly. If you don&#39;t care and just want it to appear to work right now on your terminal, use hex escapes."}, {"owner": {"reputation": 4039, "user_id": 1397919, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/90c6f9c74ae14b8d63092782bd285ae7?s=128&d=identicon&r=PG", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/1397919/dinesh"}, "edited": false, "score": 0, "creation_date": 1469577745, "post_id": 38601517, "comment_id": 64591130, "body": "have you tried <code>wcscpy</code>?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469578074, "post_id": 38601517, "comment_id": 64591198, "body": "Perhaps a source file encoding issue?"}, {"owner": {"reputation": 574, "user_id": 3049983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Tebxd.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/3049983/rohit"}, "reply_to_user": {"reputation": 4039, "user_id": 1397919, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/90c6f9c74ae14b8d63092782bd285ae7?s=128&d=identicon&r=PG", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/1397919/dinesh"}, "edited": false, "score": 0, "creation_date": 1469578366, "post_id": 38601517, "comment_id": 64591271, "body": "@Dinesh: <code>wcscpy</code> fails during compilation for special spanish character. The error is <code>kc760.c:1354:17: error: converting to execution character set: Invalid or incomplete multibyte or wide character</code>"}, {"owner": {"reputation": 574, "user_id": 3049983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Tebxd.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/3049983/rohit"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1469631744, "post_id": 38601517, "comment_id": 64619373, "body": "@thatotherguy : You hit the right spot. I converted the source into UTF-8 but lost all special characters which had tick on the top of it. I had to insert those chars again. After build it worked. You might want to post your comment in the answer section. But I still don&#39;t understand why a character which is correctly visible in the non-UTF-8 encoding is turned into junk when compiled and run. Do you have any idea?"}], "owner": {"reputation": 574, "user_id": 3049983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Tebxd.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/3049983/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469576943, "creation_date": 1469576252, "last_edit_date": 1469576943, "question_id": 38601517, "link": "https://stackoverflow.com/questions/38601517/proc-junk-printed-while-trying-to-print-spanish-characters-from-a-specific-pro", "title": "pro*c: junk printed while trying to print spanish characters from a specific program", "body": "<p>Before I begin, I would like to say that this is not an issue with pro*c. I have tested this tiny program below and it works.</p>\n\n<p>Source:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main(int argc, char **argv)\n{\n        char string[100];\n        char str1[100];\n        sprintf(string, \"\u00e1, \u00e9, \u00ed, \u00f3, \u00fa\");\n        strcpy(str1, \"C\u00f3digo_de_la_unidad\");\n        printf(\"[%s]\\n\", string);\n        printf(\"[%s]\\n\", str1);\n        return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>rk248c:/opt/app/capm/users/rk248c/Rel1604_MX/src/batch/cycle&gt; ./test\n[\u00e1, \u00e9, \u00ed, \u00f3, \u00fa]\n[C\u00f3digo_de_la_unidad]\n</code></pre>\n\n<p>Now my issue is here.\nWhen I use the same chunk of codes in another program kc760.pc (which is a very large program and I cannot paste all of it here), it prints junk in the place of special characters.</p>\n\n<p>kc760.pc's source (only the useful part):</p>\n\n<pre><code>     char out_record[100];\n     char tips_out_record[121];\n     int  debug = 0;\n\nchar *countryLoc;\n\nint main(int argc, char **argv)\n\n{\n/*==================================================================\n//      Local Variables Defined\n==================================================================*/\n        char string[100];\n        char str1[100];\n\n        sprintf(string, \"\u00e1, \u00e9, \u00ed, \u00f3, \u00fa\");\n        strcpy(str1, \"C\u00f3digo_de_la_unidad\");\n        printf(\"[%s]\\n\", string);\n        printf(\"[%s]\\n\", str1);\n\n        char * line = NULL;\n        size_t len = 0;\n        ssize_t read;\n        FILE *sam = fopen(\"/opt/app/capm/users/rk248c/Rel1604_MX/src/batch/cycle/sample\", \"r\");\n        while ((read = getline(&amp;line, &amp;len, sam)) != -1) {\n        printf(\"Retrieved line of length %zu :\\n\", read);\n        printf(\"%s\", line);\n    }\n\n        exit(0);\n\n    int report_seq_counter;\n    int header_switch;\n    int rc;\n\n    countryLoc = getenv(\"LOCATION\");\n\n    if(countryLoc == NULL){\n        printf(\"The env variable LOCATION is not set. Exiting !!\\n\");\n        exit(1);\n    }\n</code></pre>\n\n<p>kc760's output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uhnzI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uhnzI.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please focus on the first two lines in the output. They are printed due to strcpy/ sprintf operation. <strong>it prints junk</strong>. Now, please focus on the last four lines of the output and you will find that the special spanish characters are getting printed just fine (which is achieved by reading them from a file).</p>\n\n<p>Please see the content of the file also which is read by this program:</p>\n\n<pre><code>rk248c:/opt/app/capm/users/rk248c/Rel1604_MX/src/batch/cycle&gt; cat sample\n[\u00e1, \u00e9, \u00ed, \u00f3, \u00fa]\n[C\u00f3digo_de_la_unidad]\nrk248c:/opt/app/capm/users/rk248c/Rel1604_MX/src/batch/cycle&gt;\n</code></pre>\n\n<p>Can you please help me to understand what possibly is causing this issue.\nPlease note that this program has been in use for almost 2 decades and this is the first time I observed this issue while implementing spanish characters. </p>\n\n<p>Please let me know if I can help with more information.</p>\n"}, {"tags": ["c", "glibc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575145, "post_id": 38601363, "comment_id": 64590457, "body": "Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it\u2019s hard to tell exactly what you&#39;re asking. See the How to Ask page for help clarifying this question."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575193, "post_id": 38601363, "comment_id": 64590467, "body": "why are you always downvoting my questions I am trying to understand we don&#39;t have the same brain and the way of thinking !"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469575266, "post_id": 38601363, "comment_id": 64590489, "body": "You&#39;ve pasted in an explanation of exactly what <code>I</code> does. If you don&#39;t understand that then please describe specifically which part of that explanation you don&#39;t understand so that someone can address your specific gap."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575269, "post_id": 38601363, "comment_id": 64590490, "body": "I have edited my question @Olaf thanks for clarifying !"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1469575301, "post_id": 38601363, "comment_id": 64590498, "body": "@RondinoManou <i>&quot;why are you always downvoting my questions&quot;</i> Read about reasons <a href=\"http://meta.stackoverflow.com/questions/252677/when-is-it-justifiable-to-downvote-a-question\">When is it justifiable to downvote a question?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469575391, "post_id": 38601363, "comment_id": 64590522, "body": "@RondinoManou: If you address me, use the proper markdown tags! Take the <a href=\"https://stackoverflow.com/tour\">tour</a>. Re your complain: I&#39;m apparently not the only. Did it come into your mind it might be your questions?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1469575428, "post_id": 38601363, "comment_id": 64590532, "body": "@user3386109: I don&#39;t think so ... It is a glibc-specific flag (no conversion modifier/specifier)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575697, "post_id": 38601363, "comment_id": 64590625, "body": "Your question is not clearer. What other than what the quotation already strates do you expect? Maybe you need to do some research about locales to understand it? (no offence!)"}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "edited": false, "score": 0, "creation_date": 1469575733, "post_id": 38601363, "comment_id": 64590638, "body": "I feel like my question will be deleted soon can anyone please give at least a quick answer explaining it with simple words and in what did I misunderstand the glibc-specific flag !"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575738, "post_id": 38601363, "comment_id": 64590640, "body": "@user3386109: And I do repeat: Please read the glibc <code>printf</code> manpage and you will see!"}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575778, "post_id": 38601363, "comment_id": 64590649, "body": "It is okay @Olaf I am used to that tense !"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575845, "post_id": 38601363, "comment_id": 64590671, "body": "@Olaf Hmm, that&#39;s bad news for <a href=\"https://stackoverflow.com/questions/14201612/parse-objective-c-printf-format-strings\">this guy</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1469576056, "post_id": 38601363, "comment_id": 64590724, "body": "@user3386109: I don&#39;t get what you mean. He is up for some ObjC stuff, not explicitly <code>printf</code>. According to the C standard illegal &quot;tokens&quot; in the format string are UB, thus the implementaion is free to use it for its own purposes. I&#39;m a bit ambivalent about this, but then glibc addresses a relevant issue, there are more locale-issues than in the western languages."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469576231, "post_id": 38601363, "comment_id": 64590767, "body": "what do you mean by <code>research about locales</code> @Olaf. To be honest it is the first time I hear such term in C !"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469576379, "post_id": 38601363, "comment_id": 64590809, "body": "@RondinoManou: Please use the grey matter in your head:-)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469576486, "post_id": 38601363, "comment_id": 64590842, "body": "In simplistic terms the locale determines country specific settings. In this case <code>I</code> will change how numbers are printed out based on the locale/country setting (not every country uses the same numeral system)."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469576676, "post_id": 38601363, "comment_id": 64590884, "body": "@kaylum so if I well understood I will almost never need it while programming. thanks !"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469576698, "post_id": 38601363, "comment_id": 64590887, "body": "@RondinoManou: And you can&#39;t even google for <code>glibc locales</code>? Just a well meant (honestly!) note: you will not get far in programming (especially C) if you don&#39;t start putting the pieces together yourself."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469576759, "post_id": 38601363, "comment_id": 64590905, "body": "Well, you will need it if you ever write any code to be run not only in the US and on EN_US locale computers!"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469576761, "post_id": 38601363, "comment_id": 64590906, "body": "@RondinoManou: kaylum gave you a good one. %Id is specific in glibc, for some countries which display numbers differently than %d does."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469576788, "post_id": 38601363, "comment_id": 64590917, "body": "@RudyVelthuis: That is not <code>%ld</code>, but <code>%Id</code>! And no, that is not the point. <code>%d</code> is fine for the <b>standard</b> format of the locale. (Notice the word &quot;alternative&quot; in the quotation)"}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "edited": false, "score": 0, "creation_date": 1469576880, "post_id": 38601363, "comment_id": 64590931, "body": "I will do my best next time but since I don&#39;t even know about that I cannot figure out what I am searching exactly anyway thanks guys !"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469576918, "post_id": 38601363, "comment_id": 64590938, "body": "I did not say it would be easy. It is more of a general attitude."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469576946, "post_id": 38601363, "comment_id": 64590945, "body": "@Olaf: I wrote %Id (capital eye dee). This iPad has no backticks, so I can not make them fixed width font, sorry."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "edited": false, "score": 0, "creation_date": 1469577060, "post_id": 38601363, "comment_id": 64590974, "body": "Do I need to delete my question ?"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469577360, "post_id": 38601363, "comment_id": 64591047, "body": "@Rondino: you could have tried to google the meaning of the words you did not know (like &quot;locale&quot;) in the description. Help yourself and people will be glad to help you if you still have the occasional problem."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469577447, "post_id": 38601363, "comment_id": 64591063, "body": "@RudyVelthuis I will try promise but I am still a beginner !"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469577478, "post_id": 38601363, "comment_id": 64591072, "body": "@RudyVelthuis: Hmm, maybe you need a better keyboard-app then ;-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469577513, "post_id": 38601363, "comment_id": 64591085, "body": "@RondinoManou: Ignorantia legis non excusat ... (That be my last comment on that subject:-)."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469577653, "post_id": 38601363, "comment_id": 64591105, "body": "@Rondino: Everyone was a beginner once, me too. But I always tried very hard to find a solution by myself. There was no Stack Overflow, no Internet, etc. There was no one I could ask. Just some tips from a few magazines about programming. And books. I used to read a lot. But you can use Google, etc. That&#39;s heaven. And simply don&#39;t give up if you don&#39;t immediately find what you want."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469577912, "post_id": 38601363, "comment_id": 64591162, "body": "you lived in the Golden age you are lucky ! @RudyVelthuis"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 2, "creation_date": 1469578028, "post_id": 38601363, "comment_id": 64591187, "body": "@Rondino: You live in the golden age. You have many more sources of information at yor disposal. <b>Use them!</b> I started programming in the stone age."}, {"owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469632826, "post_id": 38601363, "comment_id": 64620141, "body": "Trust me I still prefer your age ! You grow up with the internet together ! that&#39;s why ! @RudyVelthuis"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1469582256, "last_edit_date": 1469582256, "creation_date": 1469580225, "answer_id": 38602015, "question_id": 38601363, "link": "https://stackoverflow.com/questions/38601363/what-exactly-does-id-mean-uppercase-i-lowercase-d/38602015#38602015", "title": "What exactly does &#39;%Id&#39; mean? (uppercase I, lowercase d)", "body": "<p><code>printf</code> format option <code>I</code> is a glibC extension to select a locale representation for numbers.  It is not defined by the C Standard and should not be used in portable code.</p>\n\n<p>If the locale is properly selected and supported by your C library, calling <code>printf(\"%Id\", 1);</code> might produce a string encoding the Unicode code point U+0661 <code>\u0661</code> that is the representation of the digit one in arabic.</p>\n\n<p>See <a href=\"http://www.fileformat.info/info/unicode/char/0661/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/0661/index.htm</a></p>\n\n<p>Conversely, <code>printf(\"%d\", 1);</code> always prints <code>1</code>, the western representation of number one.</p>\n\n<p>To make matters even more confusing, <code>1</code> is called an <em>arabic numeral</em>, as opposed to <em>roman numeral</em> <code>I</code>... unrelated to the <code>I</code> in <code>%Id</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 6569654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb1da582435e380a1257c0f9dc8f689?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Batista", "link": "https://stackoverflow.com/users/6569654/julio-batista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 0, "closed_date": 1469646224, "accepted_answer_id": 38602015, "answer_count": 1, "score": -2, "last_activity_date": 1470846625, "creation_date": 1469575099, "last_edit_date": 1470846625, "question_id": 38601363, "link": "https://stackoverflow.com/questions/38601363/what-exactly-does-id-mean-uppercase-i-lowercase-d", "closed_reason": "Needs details or clarity", "title": "What exactly does &#39;%Id&#39; mean? (uppercase I, lowercase d)", "body": "<p>I'm asking about <code>%Id</code>, not <code>%ld</code>.</p>\n\n<p>Can anyone please explain to me what does \"I\" exactly do:</p>\n\n<blockquote>\n  <p><code>I</code>      For decimal integer conversion (<code>i</code>, <code>d</code>, <code>u</code>) the output uses the\n  locale's alternative output digits, if any.  For\n            example, since glibc 2.2.3 this will give Arabic-Indic digits in the Persian (<code>\"fa_IR\"</code>) locale.</p>\n</blockquote>\n\n<p>As an example:</p>\n\n<pre><code>printf(\"%Id\",1);\n</code></pre>\n\n<p>In other words what is the difference between <code>%d</code> and <code>%Id</code> ?</p>\n\n<p>can anyone please explain it with simple words and simple example stating the difference ? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 3, "creation_date": 1469575123, "post_id": 38601345, "comment_id": 64590447, "body": "This code does not compile."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575220, "post_id": 38601345, "comment_id": 64590478, "body": "Don&#39;t confuse <i>numbers</i> and <i>digits</i>. And provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1469575234, "post_id": 38601345, "comment_id": 64590480, "body": "<code>char pin [4+1] ;&#47;* +1 for terminator *&#47;  scanf(&quot;%4s&quot; , pin);</code> (Execution statement written in the function)"}, {"owner": {"reputation": 1, "user_id": 6642054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885db78e19650c01382a69d2ec5a6026?s=128&d=identicon&r=PG&f=1", "display_name": "Bast1988", "link": "https://stackoverflow.com/users/6642054/bast1988"}, "edited": false, "score": 0, "creation_date": 1469575474, "post_id": 38601345, "comment_id": 64590549, "body": "why should  char pin [5] ; ?  it works fine with 4"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1469575608, "post_id": 38601345, "comment_id": 64590595, "body": "<code>pin[0]</code> is the first character, <code>pin[1]</code> is the second character, etc. Does that help? You can also use something like <a href=\"http://linux.die.net/man/3/strtol\" rel=\"nofollow noreferrer\"><code>strtol</code></a> to convert the entire string to a <code>long</code>. <code>strtol</code> will fail if it can&#39;t parse the string into a long."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1469575815, "post_id": 38601345, "comment_id": 64590657, "body": "@Bast1988 &quot;it works fine with 4&quot;. No it doesn&#39;t. Just because it doesn&#39;t exhibit any visible bad behaviour when you ran it a few times does not mean that it &quot;works&quot;. <code>pin</code> does not have enough space to hold the terminating NUL. So it is not a valid string and using string operations like <code>strlen</code> on it is Undefined Behaviour. Which means your program behaviour is unpredictable and can fail at any time (the worst type of bug)."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1469576424, "post_id": 38601345, "comment_id": 64590824, "body": "<code>while( strlen(pin)!=4 || !isdigit(pin[0]) || !isdigit(pin[1]) || !isdigit(pin[2]) || !isdigit(pin[3]) ) {</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1469575981, "last_edit_date": 1469575981, "creation_date": 1469575572, "answer_id": 38601432, "question_id": 38601345, "link": "https://stackoverflow.com/questions/38601345/how-to-use-isdigit-for-a-pin-while-loop/38601432#38601432", "title": "How to use isdigit() for a pin while loop", "body": "<p>There are so many issues with this code I may not have covered every one of them in this answer:</p>\n\n<ol>\n<li><p>Where is your main function? You can't have code outside a function; that doesn't work. C code other than global variable declarations, assignments to constant values, typedefs, struct and enum definitions, <em>must go in a function</em>.  In your case you probably want the <code>main</code> function to house the code starting at line 6.</p></li>\n<li><p>When calling <code>scanf</code> with a string argument, don't take the address of the string - the array is a reference in and of itself.</p></li>\n<li><p>Calling <code>strlen(pin)</code> before any value has been copied into <code>pin</code> is 100% undefined behavior.  Since the memory is uninitialized the <code>strlen</code> function will keep looking for a null character and possibly go out of the array bounds.</p></li>\n<li><p>C strings are null-terminated. When you declare a string intended to hold <em>n</em> characters, you need to declare the array with a size of <em>n+1</em> to have room for the null character.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 48983, "user_id": 314028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408552a8101c1b9d466dcc5f104b1619?s=128&d=identicon&r=PG", "display_name": "Chris Taylor", "link": "https://stackoverflow.com/users/314028/chris-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1469576458, "creation_date": 1469576458, "answer_id": 38601539, "question_id": 38601345, "link": "https://stackoverflow.com/questions/38601345/how-to-use-isdigit-for-a-pin-while-loop/38601539#38601539", "title": "How to use isdigit() for a pin while loop", "body": "<p>First to answer your question</p>\n\n<p>I would write a helper function 'validatePin' which would check the pin length and validate that the pin is a numeric pin, you can extend this function to do any other validation you require. It might look something like the following</p>\n\n<pre><code>const int PIN_OK = 0;\nconst int PIN_INVALID_LEN = -1;\nconst int PIN_INVALID_CHARS = -2;\n\nint validatePin(const char *pin)\n{\n    // Valdiate PIN length\n    if (strlen(pin) != 4) return PIN_INVALID_LEN;\n\n    // Validate PIN is numeric\n    for (int i = 0; i &lt; 4; ++i)\n    {\n        if (!isdigit(pin[i])) return PIN_INVALID_CHARS;\n    }\n    return PIN_OK;\n}\n</code></pre>\n\n<p>Then you can adjust your while loop to look something like the following</p>\n\n<pre><code>while (validatePin(pin) != PIN_OK)\n{\n    ....   \n}\n</code></pre>\n\n<p>Other points regarding your code.</p>\n\n<ul>\n<li>Your char buffer used for scanf does not account for the null terminator. You need to increase the buffer size.</li>\n<li>The char array is already giving you the address of the buffer, there is no need to use &amp; to take the address of the char array in scanf.</li>\n</ul>\n\n<p>I have not run your code, so there might be other issues that I missed at first glance. </p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1469577084, "last_edit_date": 1469577084, "creation_date": 1469576710, "answer_id": 38601582, "question_id": 38601345, "link": "https://stackoverflow.com/questions/38601345/how-to-use-isdigit-for-a-pin-while-loop/38601582#38601582", "title": "How to use isdigit() for a pin while loop", "body": "<p>There are a number of ways to go about doing what you need to do. You can either check your input length, or just validate what it is you have read, your choice. One approach would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nenum { TRIES = 3, NPIN };\n\nint main (void) {\n\n    char pin[NPIN+1] = \"\";\n    size_t tries = 0, pinok = 0;\n\n    for (; tries &lt; TRIES; tries++) {            /* 3 tries */\n        printf (\"Please enter your pin : \");\n        if (scanf (\" %4[^\\n]%*c\", pin) == 1) {  /* read pin */\n            pinok = 1;\n            size_t i;\n            for (i = 0; i &lt; NPIN; i++)  /* validate all digits */\n                if (!isdigit (pin[i]))\n                    pinok = 0;\n            if (pinok)                  /* if pin good, break */\n                break;\n        }\n    }\n\n    if (!pinok) {   /* if here and not OK, call bank */\n        fprintf (stderr, \"Sorry you can't continue, Please contact \"\n                        \"your bank for assistance.\\n\") ;\n        return 1;\n    }\n\n    printf (\"\\n correct pin : %s\\n\\n\", pin);    /* your pin */\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> to protect against an excessively long string entered at one time, you should empty <code>stdin</code> at the end of the outer <code>for</code> loop each iteration)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>Failed case:</p>\n\n<pre><code>$ ./bin/pin\nPlease enter your pin : a555\nPlease enter your pin : 555a\nPlease enter your pin : 55a5\nSorry you can't continue , Please contact your bank for assistance.\n</code></pre>\n\n<p>Successful case:</p>\n\n<pre><code>$ ./bin/pin\nPlease enter your pin : 2345\n\n correct pin : 2345\n</code></pre>\n\n<p>Look it over an let me know if you have any questions.</p>\n"}], "owner": {"reputation": 1, "user_id": 6642054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885db78e19650c01382a69d2ec5a6026?s=128&d=identicon&r=PG&f=1", "display_name": "Bast1988", "link": "https://stackoverflow.com/users/6642054/bast1988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1829, "favorite_count": 0, "closed_date": 1469581455, "answer_count": 3, "score": -5, "last_activity_date": 1469577084, "creation_date": 1469574970, "last_edit_date": 1469575846, "question_id": 38601345, "link": "https://stackoverflow.com/questions/38601345/how-to-use-isdigit-for-a-pin-while-loop", "closed_reason": "Not suitable for this site", "title": "How to use isdigit() for a pin while loop", "body": "<p>This program accepts any four digit number as the pin , so i used a <code>strlen()</code> to find out whether the pin is has four characters, but I need to make sure that user enters four numbers, how do I use <code>isdigit()</code> before the loop and for the loop condition?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nchar pin [4];\n\nprintf(\"Please enter your pin :    \\n\") ;\nscanf(\"%4s\" , &amp;pin) ;\nsystem(\"cls\") ;\n\nwhile (strlen(pin) != 4) {\n    count = count + 1 ;\n    if(count &lt; 3){\n        printf(\"Invalid Pin \\n\") ;\n        printf(\"Please enter your pin again \\n\") ;\n        scanf(\"%4s\", &amp;pin) ;\n        system(\"cls\");\n    }\n    else if (count == 3){\n        printf(\"Sorry you can't continue , Please contact your bank for assistance !\") ;\n        return 0 ;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469572327, "post_id": 38600896, "comment_id": 64589571, "body": "Posting declaration of <code>payperhour[]</code> would help.  Perhaps it is as simple as <code>for (p = 0; p &lt; 4; p)</code>  <code>&lt;</code>, not <code>&lt;=</code>.  The problem may exist in code not posted."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1469572441, "post_id": 38600896, "comment_id": 64589614, "body": "<code>&amp;hoursworked[p]</code> would be the address of a particular value in that array, unless that&#39;s an array of arrays, why are you then doing <code>hoursworked[p]</code> inside the function? you delcared the param as a pointer to a float, not an array."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469572621, "post_id": 38600896, "comment_id": 64589668, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469572756, "post_id": 38600896, "comment_id": 64589711, "body": "<code>calculate</code> - what?? You can use almost any name and there is no more self-explanatory? It is pretty clear that functions do some calculations, so use a less redundant name which describes what the function does. Helps you and others a lot to understand what you want."}, {"owner": {"reputation": 1471, "user_id": 4248850, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yz2Zn.jpg?s=128&g=1", "display_name": "Sam Daniel", "link": "https://stackoverflow.com/users/4248850/sam-daniel"}, "edited": false, "score": 0, "creation_date": 1469572978, "post_id": 38600896, "comment_id": 64589778, "body": "What is the expected value and what values are ypu getting? Perhaps, it might help if you post the test data for both successful ones and failure ones.."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469578794, "post_id": 38600896, "comment_id": 64591354, "body": "Do not <i>state</i> <code>i</code> or <code>p</code> in the loop statement increment part.  place the increment there and remove it from the body of the loop."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469676878, "post_id": 38600896, "comment_id": 64637959, "body": "although the visual studio will allow the return type from <code>main()</code> to be <code>void</code> that is not standard C.   There are only two valid ways to write the signature for the <code>main()</code> function (ignoring the &#39;environment&#39; variations) 1) <code>int main( void )</code> 2) <code>int main( int argc, char *argv[] )</code>   Strongly suggest you correct that problem."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469677272, "post_id": 38600896, "comment_id": 64638072, "body": "for ease of understanding and readability, 1) consistently indent the code.  Indent after every opening brace &#39;{&#39;.  un-indent before every closing brace &#39;}&#39;.  2) separate code blocks (for, if, else, while, do...while, switch, case, default) via a blank line"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469677392, "post_id": 38600896, "comment_id": 64638100, "body": "the posted code contains several &#39;magic&#39; numbers.  &#39;magic&#39; numbers are numbers with no basis.  in this case 4,5,10.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, maintain.  Suggest using a <code>enum</code> statement or <code>#define</code> statements to give those magic numbers meaningful names and using those meaningful names throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469677927, "post_id": 38600896, "comment_id": 64638250, "body": "this line: <code>scanf_s(&quot; %[^\\n]s %d&quot;, &amp;employee[i], 10);</code> 1) should not compile as <code>employee[i]</code> is the beginning of an array and in C, referencing an array results in the address of the first byte of that array.  2) allows the user to enter up to 10 characters for each <code>employee</code>, but a scanf will always append a NUL byte to the user&#39;s entry for a &#39;%s&#39; format specifier, so if the user enters 10 characters, the scanf will place the NUL byte into the first byte of the next employee. (cont)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1469677964, "post_id": 38600896, "comment_id": 64638257, "body": "(cont)  3) this format string: <code>%[^\\n]s %d</code> will a) input everything upto, but not including the newline sequence, then will fail because the next char to be input is not an <code>s</code>.  4) when calling any of the <code>scanf</code> family of functions, always check the returned value (not the parameter value) to assure the operation was successful."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574024, "post_id": 38601045, "comment_id": 64590116, "body": "I have to pass the function as a reference. Would this still be doing that?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574055, "post_id": 38601045, "comment_id": 64590127, "body": "@Searim your question makes no sense: 1) C doesn&#39;t let you pass functions anywhere, and 2) C doesn&#39;t have references."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574272, "post_id": 38601045, "comment_id": 64590200, "body": "@Searim: C is strict pass by value. There are no references in C!"}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574358, "post_id": 38601045, "comment_id": 64590221, "body": "my homework assignment literally says &quot;use parameter passing, and pass by reference&quot; so did my teacher write it wrong?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574643, "post_id": 38601045, "comment_id": 64590322, "body": "@Searim It says &quot;pass by reference&quot;, not &quot;pass the function as a reference&quot;. Yes, technically it&#39;s wrong because C doesn&#39;t have pass by reference. They probably meant to pass a pointer."}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575146, "post_id": 38601045, "comment_id": 64590458, "body": "@immibis thank you for clarifying that to me so technically if i run the above mentioned code (the answer we&#39;re commenting on) then i won&#39;t be passing pointers... if i am correct"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575184, "post_id": 38601045, "comment_id": 64590465, "body": "@Searim You will be, because <code>payperhour</code> acts like <code>&amp;payperhour[0]</code> (this quirk is known as <i>decay</i>)"}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575553, "post_id": 38601045, "comment_id": 64590573, "body": "@immibis how will this run the code for all of my arrays though? if i don&#39;t include the [p] after the parameter input then it will just run the same one multiple times wont it? sorry if i am asking noob questions"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469575652, "post_id": 38601045, "comment_id": 64590611, "body": "Well the <code>[p]</code> is inside the function isn&#39;t it? And what do you mean &quot;all of my arrays&quot;? You have 4 arrays and you are passing pointers to all of them to the function."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575689, "post_id": 38601045, "comment_id": 64590623, "body": "@Searim: since you pass different values of <code>p</code> and <code>calculate</code> uses the <code>p</code>th elements, it should work fine."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 2, "last_activity_date": 1469573086, "creation_date": 1469573086, "answer_id": 38601045, "question_id": 38600896, "link": "https://stackoverflow.com/questions/38600896/putting-an-array-into-a-function-and-odd-numbers-of-the-array-dont-work/38601045#38601045", "title": "putting an array into a function and odd numbers of the array don&#39;t work", "body": "<p>You're passing <code>&amp;payperhour[p]</code> as <code>payperhour</code> and then using <code>payperhour[p]</code>.</p>\n\n<p>Note that <code>(&amp;payperhour[p])[p]</code> is the same as <code>payperhour[p+p]</code> or <code>payperhour[p*2]</code>.</p>\n\n<p>It looks like you want to call the function like this:</p>\n\n<pre><code>calculate(payperhour, hoursworked, wage, overtime, p);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574573, "post_id": 38601258, "comment_id": 64590298, "body": "as far as the p++ going at the end of the for statement i tried that and my code didn&#39;t work, so i tried moving it to the end and it immediately worked i know that i shouldn&#39;t do that, but it worked when it didn&#39;t otherwise"}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574669, "post_id": 38601258, "comment_id": 64590329, "body": "also if i try to take p out of the parameters of the function it states that my function does not have enough input"}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469575256, "post_id": 38601258, "comment_id": 64590486, "body": "@chqrlie ok so there is a logical flaw in calculate that is messing it up?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575605, "post_id": 38601258, "comment_id": 64590594, "body": "@Searim: indeed, there is, read my answer, but all these errors do not explain the symptoms you observe.  Post a complete compilable example that exhibits the problem."}, {"owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469590823, "post_id": 38601258, "comment_id": 64593937, "body": "@Searim Have you recognised that you are indexing the arrays (using square brackets <code>[</code> and <code>]</code>) in <i><b>both</b></i> the call to <code>calculate(...)</code> <i><b>and</b></i> inside <code>calculate(...)</code> itself? That is where you&#39;re going wrong. <code>calculate(...)</code> calculates ONE person&#39;s wage. You shouldn&#39;t be passing the WHOLE array in, and ALSO passing in which <code>p</code> to use. Re-read my answer: I changed BOTH the call to your <code>calculate(...)</code> function and the list of parameters (I removed the <code>, int p</code> at the end). If you only changed the call, then the compiler was right to complain about &quot;not enough input&quot;"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1469608717, "post_id": 38601258, "comment_id": 64602461, "body": "@JohnBurger: my bad.  I&#39;m afraid I the allusion was too subtile for a casual reader to catch, especially for a newbie, but I may be wrong."}], "tags": [], "owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "is_accepted": false, "score": 1, "last_activity_date": 1469574318, "creation_date": 1469574318, "answer_id": 38601258, "question_id": 38600896, "link": "https://stackoverflow.com/questions/38600896/putting-an-array-into-a-function-and-odd-numbers-of-the-array-dont-work/38601258#38601258", "title": "putting an array into a function and odd numbers of the array don&#39;t work", "body": "<p>You're confusing a few different things here. First, the calling loop:</p>\n\n<pre><code>for (p = 0; p &lt;= 4; p)\n{\n    calculate(&amp;payperhour[p], &amp;hoursworked[p], &amp;wage[p], &amp;overtime[p], p);\n    p++;\n}\n</code></pre>\n\n<p>This steps through the individual people, and passes their details to <code>calculate(...)</code>. There is no need to pass <code>p</code> in - you've already used it to get the data from the arrays. Note that the <code>p++</code> should be moved to the final part of the <code>for</code>:</p>\n\n<pre><code>for (p = 0; p &lt;= 4; p++)\n{\n    calculate(&amp;payperhour[p], &amp;hoursworked[p], &amp;wage[p], &amp;overtime[p]);\n}\n</code></pre>\n\n<p>The problem with it skipping entries is because you are repeating the <code>[p]</code> inside <code>calculate(...)</code> after it has already been applied in the call. So <code>calculate(...)</code> needs to be completely rewritten - not the logic, but the variable references:</p>\n\n<pre><code>void calculate(float *payperhour, float *hoursworked, float *wage, float *overtime)\n{\n    if (*hoursworked &gt; 40)\n        *overtime = ((*hoursworked - 40) * *payperhour * 1.5);\n    *wage = *overtime + (*payperhour * 40);\n    if (*hoursworked &lt;= 40)\n        *wage = *hoursworked * *payperhour;\n    *overtime = 0;\n}\n</code></pre>\n\n<p>But also note that some of the passed-in variables are only used as inputs to calculations, while others are output. You should distinguish between the two: only pass the values for \"input-only\" variables, and the addresses into pointer variables for \"input/output\" variables:</p>\n\n<pre><code>void calculate(float payperhour, float hoursworked, float *wage, float *overtime)\n{\n    if (hoursworked &gt; 40)\n        *overtime = ((hoursworked - 40) * payperhour * 1.5);\n    *wage = *overtime + (payperhour * 40);\n    if (hoursworked &lt;= 40)\n        *wage = hoursworked * payperhour;\n    *overtime = 0;\n}\n\nfor (p = 0; p &lt;= 4; p++)\n{\n    calculate(payperhour[p], hoursworked[p], &amp;wage[p], &amp;overtime[p]);\n}\n</code></pre>\n\n<p>Note I have also changed your indenting - perhaps you need braces (<code>{</code> and <code>}</code>) around the statements in the <code>if</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469574877, "post_id": 38601302, "comment_id": 64590386, "body": "thank you with help for the if else, but it still gives me the wrong output on running"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575129, "post_id": 38601302, "comment_id": 64590449, "body": "@Searim: did you also fix the invocation code?  How large are your arrays? Are you sure about the <code>&lt;= 4</code> ?"}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575345, "post_id": 38601302, "comment_id": 64590506, "body": "yeah my array is 5 maximum and the weird issue is that arrays [0][2] [4] work correctly but [1] and [3] dont"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575422, "post_id": 38601302, "comment_id": 64590529, "body": "@Searim: post a complete verifiable compilable example, there must be another problem elsewhere."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469575866, "post_id": 38601302, "comment_id": 64590677, "body": "@Searim: read my updated answer, I have the explanation for the odd skipping bug."}, {"owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469576341, "post_id": 38601302, "comment_id": 64590799, "body": "i had this program running without using a function and only using for loops now i have to include a function as soon as i included a function it stopped incrementing my p values so i altered it to simply state p at the end of the for loop condition then included p++ at the end of the loop and it worked. why? i have no idea."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "edited": false, "score": 0, "creation_date": 1469578693, "post_id": 38601302, "comment_id": 64591333, "body": "@Searim:  I updated my answer again.  You did not apply the fixes correctly."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1469578664, "last_edit_date": 1469578664, "creation_date": 1469574624, "answer_id": 38601302, "question_id": 38600896, "link": "https://stackoverflow.com/questions/38600896/putting-an-array-into-a-function-and-odd-numbers-of-the-array-dont-work/38601302#38601302", "title": "putting an array into a function and odd numbers of the array don&#39;t work", "body": "<p>Since <code>calculate</code> reads the <code>p</code>th entries of the arrays, the base address of the arrays should be passed. It should be invoked as:</p>\n\n<pre><code>calculate(payperhour, hoursworked, wage, overtime, p);\n</code></pre>\n\n<p>The syntax in your loop is confusing and likely incorrect:</p>\n\n<pre><code>for (p = 0; p &lt;= 4; p) {\n    calculate(&amp;payperhour[p], &amp;hoursworked[p], &amp;wage[p], &amp;overtime[p], p);\n    p++;\n}\n</code></pre>\n\n<p>If the arrays have <code>4</code> elements, you should stop the loop with <code>i &lt; 4</code> as the valid index values are <code>0</code>, <code>1</code>, <code>2</code> and <code>3</code>.  Also increment the index in the <code>for</code> statement, not at the end of the loop body:</p>\n\n<pre><code>for (p = 0; p &lt; 4; p++) {\n    calculate(payperhour, hoursworked, wage, overtime, p);\n}\n</code></pre>\n\n<p>Furthermore, there is also a <strong>major</strong> problem in <code>calculate</code>:  Your post's indentation is bogus. With correct indentation it looks like this:</p>\n\n<pre><code>void calculate(float *payperhour, float *hoursworked, float *wage, float *overtime, int p) {\n    if (hoursworked[p] &gt; 40)\n        overtime[p] = ((hoursworked[p] - 40) * payperhour[p] * 1.5);\n    wage[p] = overtime[p] + (payperhour[p] * 40);\n    if (hoursworked[p] &lt;= 40)\n        wage[p] = hoursworked[p] * payperhour[p];\n    overtime[p] = 0;\n}\n</code></pre>\n\n<p>which is incorrect as <code>overtime</code> is not necessarily <code>0</code> upon entering the function, and should not be forces to <code>0</code> before returning.</p>\n\n<p>The function should be written this way:</p>\n\n<pre><code>void calculate(const float *payperhour, const float *hoursworked, float *wage, float *overtime, int p) {\n    if (hoursworked[p] &gt; 40) {\n        overtime[p] = ((hoursworked[p] - 40) * payperhour[p] * 1.5);\n        wage[p] = overtime[p] + (payperhour[p] * 40);\n    } else {\n        overtime[p] = 0;\n        wage[p] = hoursworked[p] * payperhour[p];\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> After re-reading your code, indexing both in the calling sequence and in the function <strong>does</strong> explain the observed behavior: you are only accessing even indices, as explained by immibis.  Apply the corrections explained above to correct both bugs and the program should work correctly.</p>\n"}], "owner": {"reputation": 1, "user_id": 6641981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65854dbc30ca3710e7777d6d16e1c527?s=128&d=identicon&r=PG&f=1", "display_name": "Searim", "link": "https://stackoverflow.com/users/6641981/searim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1469578664, "creation_date": 1469572218, "last_edit_date": 1469576050, "question_id": 38600896, "link": "https://stackoverflow.com/questions/38600896/putting-an-array-into-a-function-and-odd-numbers-of-the-array-dont-work", "title": "putting an array into a function and odd numbers of the array don&#39;t work", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid calculate(float *payperhour, float *hoursworked, float *wage, float *overtime,int p)\n{\nif (&amp;hoursworked[p] &gt; 40)\n    overtime[p] = ((hoursworked[p] - 40) * payperhour[p] * 1.5);\n    wage[p] = overtime[p] + (payperhour[p] * 40);\nif (hoursworked[p] &lt;= 40)\n    overtime[p] = 0;\n    wage[p] = hoursworked[p] * payperhour[p];\n}\n\n\n\nvoid main(void)\n{\nint i = 0;\nchar employee[5][10];\nfloat payperhour[10];\nfloat hoursworked[10];\nfloat wage[10];\nfloat overtime[10];\nint p = 0;\n// establish the variables needed to run the formulas for pay\n\n\n\n\nfor (i = 0; i &lt;= 4; i)\n{\n    printf(\"Give me an Employees name.\\n\");\n    scanf_s(\" %[^\\n]s %d\", &amp;employee[i], 10);\n    if (strcmp(employee[i], \"-1\") == 0)\n        break;\n    printf(\"What is this Employees wage per hour?\\n\");\n    scanf_s(\"%f\", &amp;payperhour[i]);\n    if (payperhour[i] == -1)\n        break;\n    printf(\"How many hours did this employee work?\\n\");\n    scanf_s(\"%f\", &amp;hoursworked[i]);\n    if (hoursworked[i] == -1)\n        break;\n    i++;\n}\n//for loop that assigns all the variables needed to figure out pay\nfor (p = 0; p &lt;= 4; p)\n{\n    calculate(&amp;payperhour[p], &amp;hoursworked[p], &amp;wage[p], &amp;overtime[p], p);\n    p++;\n}\n//actualy equation that computes all the pay that everyone is receiving\nfor (p = 0; p &lt; i; p)\n{\n    printf(\"Employee %s:\\n\", employee[p]);\n    printf(\"Pay per hour:\\n %.2f\\n\", payperhour[p]);\n    printf(\"Hours Worked:\\n %.2f\\n\", hoursworked[p]);\n    printf(\"Gross Pay:\\n %.2f\\n\", wage[p]);\n    printf(\"Overtime pay:\\n %.2f\\n\", overtime[p]);\n    printf(\"Pay after taxes:\\n %.2f\\n\", wage[p] * .8);\n    p++;\n    //finishes the application by giving the user the information that was computed\n}\nsystem(\"pause\");\n}\n</code></pre>\n\n<p>This is my code I am currently taking C programming and have been stuck on this problem. When you input a user into array spot 0 (on all arrays) it works fine. But if you input information into spot 1 or 3 it does not produce a proper wage or overtime for that information. I cannot figure out why it would work on even arrays, but not on even numbers.</p>\n\n<p>the wage and overtime for [1] are always coming out as numbers in the millions but the wage and overtime for [0] is working correctly</p>\n\n<p>ps i know the code is not even near perfect, but i am trying to fix this problem and cannot for the life of me figure out anything or get any information on the problem that i am having.</p>\n\n<p>i have edited to include the entirety of the code as it is being asked for</p>\n"}, {"tags": ["c", "sockets", "protocols", "primitive-types"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1469571218, "post_id": 38600697, "comment_id": 64589197, "body": "&quot;I get all kinds of wrong outputs &quot; --&gt; what was your input, output and expected output."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1469571319, "post_id": 38600697, "comment_id": 64589235, "body": "Not all bit patterns possible with 2 <code>uint32_t</code> may make for a valid/distinct <code>double</code>.  It depends on <code>double</code> format and potential not-a-numbers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1469571383, "post_id": 38600697, "comment_id": 64589254, "body": "&quot;is there a better way to handle the socket header parsing?&quot; Post the code  you have tried to get good feedback, else this is just too broad."}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469571402, "post_id": 38600697, "comment_id": 64589258, "body": "You&#39;re running up against padding problems. First, double-check that your uint32 -&gt; uint64 conversion is working."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469572116, "post_id": 38600697, "comment_id": 64589493, "body": "Looks like just another version of undefined behaviour. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469573077, "post_id": 38600697, "comment_id": 64589806, "body": "@olaf This is implementation defined territory, not UB."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1469573323, "post_id": 38600697, "comment_id": 64589896, "body": "@DietrichEpp: I seem to have missread something. Not sure why OP uses a <code>union</code> anyway. For conversion it is absolutely useless to have both members with the same type."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1469573327, "post_id": 38600697, "comment_id": 64589898, "body": "You can&#39;t take a uint64_t and assign it to a double because the computer will change the bit pattern - what you have done is no different than saying <code>uint64_t j = 4630192998146113536LL; double i = j;</code> because both items in your union are doubles.  The way I used to do it was to set up a uint64_t variable and static cast it&#39;s pointer to a double* and then dereference it: <code>uint64_t j = 4630192998146113536; double i = *(double*)&amp;j;</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469573423, "post_id": 38600697, "comment_id": 64589924, "body": "That is a bad approach. Define a proper transfer protocol and use proper conversion functions e.g. using shift/masking or - better for debugging, etc. - convert to/from a textual format. Note that your use of the term &quot;protocol&quot; does not sound correct. There are no two &quot;protocols&quot; you use the sockets between, but two sockets you use a <b>single</b> and well-defined protocol. Using well established terms wrongly is a guarantee for confusion."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469574021, "post_id": 38600697, "comment_id": 64590115, "body": "Note: As an integer <code>4630192998146113536</code> --&gt; <code>0x4041C00000000000</code> which happens to be the bit pattern for 35.5 in IEEE-754 Floating-Point.  See <a href=\"http://babbage.cs.qc.cuny.edu/IEEE-754.old/64bit.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469574534, "post_id": 38600697, "comment_id": 64590278, "body": "@olaf The suggestion to use a textual protocol\u2014while its often a good idea, it is going too far to say this is a &quot;bad approach&quot;. Modern computers use IEEE 64-bit doubles almost exclusively, and using a union is one of only two ways to reinterpret bit patterns in C. Serializing floating point numbers by writing them directly to disk or network is so mind-numbingly common that I&#39;m surprised that this is even in dispute here. Again, text protocols are great, but it&#39;s inappropriate to say that a binary protocol is a &quot;bad approach&quot; without more fully understanding the problem it is trying to solve."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1469574768, "post_id": 38600697, "comment_id": 64590356, "body": "@DietrichEpp: I did not state a binary approach is bad as such! Just the way OP leaves issues like endianess to the implementation. I&#39;m the first to accept a well-defined binary protocol. And IEEE floats are not that universally used as you might think. In embedded systems (keyword: IoT), there are a lot of systems with other encodings or - at best - partial implementation of the IEEE format, especially <code>double</code> (ARM-Cortex-M4/7F e.g. supports 32 bit <code>float</code> only in hardware)."}, {"owner": {"reputation": 117, "user_id": 6621840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7b9rh.jpg?s=128&g=1", "display_name": "KKsan", "link": "https://stackoverflow.com/users/6621840/kksan"}, "edited": false, "score": 0, "creation_date": 1469585500, "post_id": 38600697, "comment_id": 64592699, "body": "Thank you all for these inputs! Definitely helpful! Sorry for being newbie :("}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469625295, "post_id": 38600697, "comment_id": 64614343, "body": "@Olaf: That&#39;s an excellent comment, which clearly expresses potential issues with OP&#39;s approach."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469575036, "post_id": 38601022, "comment_id": 64590428, "body": "Not in the mood to check, but there is something in the standard (or a defect report) that the <code>union</code> approach very well is guaranteed to work. The <code>memcpy</code> approach OTOH violates the effective type rule like a cast."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1469575643, "post_id": 38601022, "comment_id": 64590605, "body": "I found it:  <a href=\"http://stackoverflow.com/questions/11373203/accessing-inactive-union-member-undefined-behavior\" title=\"accessing inactive union member undefined behavior\">stackoverflow.com/questions/11373203/&hellip;</a>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469576724, "post_id": 38601022, "comment_id": 64590895, "body": "@Olaf: I am surprised <code>memcpy</code> violates the effective type rule: it uses a <code>void*</code> and could be implemented as reading and writing <code>unsigned char*</code> which are an special case IIRC."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469577082, "post_id": 38601022, "comment_id": 64590977, "body": "@chqrlie: I&#39;m not. Because <code>memcpy</code> is the same as the cast/assignment basically. See 6.5p6++. There&#39;s still the union left (6.5.2.3, footnote 95)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469577094, "post_id": 38601022, "comment_id": 64590980, "body": "@Olaf: so you are referring to 6.5p6 on effective type and copying with <code>memcpy</code>.  This paragraph is quite obscure to me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469577295, "post_id": 38601022, "comment_id": 64591033, "body": "And p7. And yes, at least to me as ESL, it really is hard to comprehend in all its aspects. But I hopefully figured it out now (with a lot of discussions here over the last year or so). It is imo one of the most relevant sections  in the standard, too."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469579382, "post_id": 38601022, "comment_id": 64591477, "body": "@Olaf: English is actually my fourth language, but somehow I don&#39;t feel ashamed to admit I cannot make sense of paragraph 6. These are the relevant sections, but I&#39;m not relieved."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1469576576, "last_edit_date": 1469576576, "creation_date": 1469572994, "answer_id": 38601022, "question_id": 38600697, "link": "https://stackoverflow.com/questions/38600697/c-combine-two-uint32-t-to-a-double/38601022#38601022", "title": "C - combine two uint32_t to a double", "body": "<p>Your union definition is incorrect, you want <code>i</code> to be defined as <code>uint64_t</code>:</p>\n\n<pre><code>double outputSampleRate = ((union { uint64_t i; double d; })\n    { .i = ((uint64_t)buffer[6] &lt;&lt; 32 | (uint64_t)buffer[7])}).d;\n</code></pre>\n\n<p>You might also be running into an endianness issue. Try little endian:</p>\n\n<pre><code>double outputSampleRate = ((union { unt64_t i; double d; })\n    { .i = ((uint64_t)buffer[7] &lt;&lt; 32) | (uint64_t)buffer[6]}).d;\n</code></pre>\n\n<p>Reinterpreting the bits of the representation via a <code>union</code> is actually supported by the C Standard and is known as type punning. It is not guaranteed to work if the bits represent a trap value for the destination type.</p>\n\n<p>You could try other casts and tricks: test your luck and use a pointer cast:</p>\n\n<pre><code>double outputSampleRate = *(uint64_t*)&amp;buffer[6];\n</code></pre>\n\n<p>Another way to force type punning is to use the <code>memcpy</code> function:</p>\n\n<pre><code>double outputSampleRate;\nuint64_t temp = ((uint64_t)buffer[7] &lt;&lt; 32) | (uint64_t)buffer[6];\nmemcpy(&amp;outputSampleRate, &amp;temp, sizeof(outputSampleRate));\n</code></pre>\n\n<p>Or simply:</p>\n\n<pre><code>double outputSampleRate;\nmemcpy(&amp;outputSampleRate, &amp;buffer[6], sizeof(outputSampleRate));\n</code></pre>\n\n<p>But it does not seem guaranteed to work either, although I have seen some instances of both of the above in production code.</p>\n"}, {"tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 1, "last_activity_date": 1469573841, "last_edit_date": 1469573841, "creation_date": 1469573540, "answer_id": 38601133, "question_id": 38600697, "link": "https://stackoverflow.com/questions/38600697/c-combine-two-uint32-t-to-a-double/38601133#38601133", "title": "C - combine two uint32_t to a double", "body": "<p>Reinterpreting bit patterns through a union requires that the union elements have the right type.  Your union has two <code>doubles</code>, so when you read from one, it will have the same value as the other.  The conversion from <code>uint32_t</code> to <code>double</code> will be one that preserves numeric results, explaining the \"garbage\", which is really just the <code>double</code> reinterpreted as an integer.  You will also need to use the correct byte order (low word first? high word first?) and the easiest way to do this is by avoiding bit shifting altogether.</p>\n\n<pre><code>double outputSampleRate = ((union { uint32_t i[2]; double d; })\n    { .i = { buffer[6], buffer[7] } }).d;\n</code></pre>\n\n<p>You could use <code>uint64_t i</code> but... why bother?</p>\n\n<p>You could also use <code>memcpy()</code> to copy the bytes...</p>\n\n<pre><code>double outputSampleRate;\nmemcpy(&amp;outputSampleRate, &amp;buffer[6], sizeof(outputSampleRate));\n</code></pre>\n\n<p>The usual caveats apply: while these solutions are <em>relatively</em> portable, they do not take endian issues into account, and they will not work on systems that violate your assumptions about e.g. how big a <code>double</code> is, but it is generally safe to make these assumptions.</p>\n"}], "owner": {"reputation": 117, "user_id": 6621840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7b9rh.jpg?s=128&g=1", "display_name": "KKsan", "link": "https://stackoverflow.com/users/6621840/kksan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 38601133, "answer_count": 2, "score": 0, "last_activity_date": 1469576576, "creation_date": 1469571039, "last_edit_date": 1469572673, "question_id": 38600697, "link": "https://stackoverflow.com/questions/38600697/c-combine-two-uint32-t-to-a-double", "title": "C - combine two uint32_t to a double", "body": "<p>Hi I'm working on socket translation between two protocols. I read from a binary file and store the parsed header into an array of type uint32_t. Then I grab the fields out of the array and convert them into respective types. So far <code>uint32_t</code>/<code>int32_t</code>/<code>uint16_t</code> to <code>int32_t</code> works fine. </p>\n\n<p>However, I get all kinds of wrong outputs when trying to combine two uint32_t (append one after the other) and then converting this 64bit long data into a double.</p>\n\n<p>Being a newbie to C programming, I'm struggling with the computer methodology of <code>double</code> / <code>float</code> representation.</p>\n\n<p>Basically what I want to do is: without altering the bit pattern of the two <code>uint32_t</code>, <strike>concast</strike> concatenate one after the other to make a 64-bit data, then convert the data as a <code>double</code>. The most important thing is not to alter the bit pattern as that part of the bit stream is supposed to be a <code>double</code>.</p>\n\n<p>The following is part of the code:</p>\n\n<pre><code>uint32_t* buffer = (uint32_t*) malloc (arraySize * sizeof(uint32_t));\n\n...\n\ndouble outputSampleRate = ((union { double i; double outputSampleRate; })\n    { .i = ((uint64_t)buffer[6] &lt;&lt; 32 | (uint64_t)buffer[7])}).outputSampleRate;\n</code></pre>\n\n<p>Data in input file:  </p>\n\n<pre><code>35.5\n</code></pre>\n\n<p>value after my code:</p>\n\n<pre><code>4630192998146113536.000000\n</code></pre>\n\n<p>Also, is there a better way to handle the socket header parsing?</p>\n"}, {"tags": ["c", "arrays", "function", "2d"], "comments": [{"owner": {"reputation": 13, "user_id": 6579856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4ea20d265e8c10c6628f003613351d?s=128&d=identicon&r=PG&f=1", "display_name": "ctelchi", "link": "https://stackoverflow.com/users/6579856/ctelchi"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1469567011, "post_id": 38599711, "comment_id": 64587608, "body": "Nope, that&#39;s not the issue. It seems to be opening just fine @user3121023"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1469567294, "post_id": 38599711, "comment_id": 64587726, "body": "at <code>getScore</code> : <code>array[month-1][game-1]=score;</code> --&gt; <code>score = array[month-1][game-1];</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1469567500, "post_id": 38599711, "comment_id": 64587822, "body": "at : <code>getMonthAvg</code> : <code>array[i][j]=num;</code> --&gt; <code>num = array[i][j];</code>, <code>avg=(sum&#47;k);</code> --&gt; <code>avg=(float)sum&#47;k;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1469567562, "post_id": 38599711, "comment_id": 64587842, "body": "at <code>toursMissed</code> : <code>int i,j,k;</code> --&gt; <code>int i,j,k = 0;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1469567737, "post_id": 38599711, "comment_id": 64587931, "body": "at <code>processRequest</code> : <code>int f1,f2,f3,f4,f5,f6,f7,f8;</code> --&gt; <code>int f1,f2,f4,f6,f7,f8;float f3, f5;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1469567910, "post_id": 38599711, "comment_id": 64588000, "body": "at <code>getMonthMax</code> and  <code>getYearMax</code> : <code>max</code> is uninitialized."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1469568026, "post_id": 38599711, "comment_id": 64588045, "body": "at <code>printArray</code> : <code>printf(&quot;%d\\t&quot;,&amp;array[i][j]);</code> --&gt; <code>printf(&quot;%d\\t&quot;, array[i][j]);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1469568342, "post_id": 38599711, "comment_id": 64588185, "body": "at <code>getYearAvg</code> :  same mistake as <code>getMonthAvg</code> and <code>k</code> isn&#39;t initialize."}, {"owner": {"reputation": 13, "user_id": 6579856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4ea20d265e8c10c6628f003613351d?s=128&d=identicon&r=PG&f=1", "display_name": "ctelchi", "link": "https://stackoverflow.com/users/6579856/ctelchi"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1469569008, "post_id": 38599711, "comment_id": 64588435, "body": "Thanks @BLUEPIXY I fixed all of those things, but for some reason the array still isn&#39;t working as it should. It&#39;s like it&#39;s just not reading the file, even though it definitely is. I need to go to work now, so I&#39;ll be available later. Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6579856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4ea20d265e8c10c6628f003613351d?s=128&d=identicon&r=PG&f=1", "display_name": "ctelchi", "link": "https://stackoverflow.com/users/6579856/ctelchi"}, "edited": false, "score": 0, "creation_date": 1469585356, "post_id": 38600867, "comment_id": 64592676, "body": "Thank you SO MUCH!! After adjusting the &amp;array everything was solved. Thank you so so much! I also adjusted everything else."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1469572830, "last_edit_date": 1469572830, "creation_date": 1469572029, "answer_id": 38600867, "question_id": 38599711, "link": "https://stackoverflow.com/questions/38599711/main-wont-properly-call-on-function-makearray/38600867#38600867", "title": "Main won&#39;t properly call on function &quot;makeArray&quot;", "body": "<p>There are multiple issues in your code:</p>\n\n<ul>\n<li><p>The main problem is you cannot tell if the array was read properly because the dump code in function <code>printArray()</code> is incorrect: <code>printf(\"%d\\t\", &amp;array[i][j]);</code> should read <code>printf(\"%d\\t\", array[i][j]);</code></p></li>\n<li><p>function <code>makeArray</code> takes a <code>FILE *infile</code> argument whose value is ignored. You should either make this argument a local variable or open the file in the caller and pass the <code>FILE*</code> or possibly pass the file name as an argument.</p></li>\n<li><p>You do not test any of the return values for correct completion: <code>fopen</code> can return <code>NULL</code> if the file cannot be opened.  Using a <code>NULL</code> stream pointer will invoke undefined behavior in most standard I/O functions.</p></li>\n<li><p>You do not test the return values of <code>scanf()</code> not <code>fscanf()</code>.  If incorrect input if provided, the program will invoke undefined behavior and the user will be clueless as to where to look for an explanation.  Check all return values and produce clear documented error messages.</p></li>\n<li><p>Function <code>getScore</code> is incorrect.  It should read:</p>\n\n<pre><code>int getScore(int array[][8], int month, int game) {\n    return array[month - 1][game - 1];\n}\n</code></pre></li>\n<li><p>defining <code>COL</code> is useless if you hardcode the value of <code>COL</code> to 8 in your functions: the arrays are defined with the explicit constant instead of the <code>COL</code> macro.</p></li>\n<li><p>functions <code>getYearAvg()</code> and <code>getMonthAvg()</code> store <code>num</code> into the array instead of reading it from the array.  Furthermore, <code>avg</code> is not initialized to <code>0.0</code>.</p></li>\n<li><p><code>k</code> is not initalized to <code>0</code> in <code>toursMissed()</code> not <code>getYearAvg()</code>.</p></li>\n<li><p>max should be initialized to <code>array[0][0]</code> in <code>getYearMax()</code> and <code>getMonthMax()</code></p></li>\n</ul>\n\n<p>In the end, <code>makeArray()</code> is the only function that will not fail, provided correct input.</p>\n"}], "owner": {"reputation": 13, "user_id": 6579856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4ea20d265e8c10c6628f003613351d?s=128&d=identicon&r=PG&f=1", "display_name": "ctelchi", "link": "https://stackoverflow.com/users/6579856/ctelchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 38600867, "answer_count": 1, "score": 0, "last_activity_date": 1469573513, "creation_date": 1469566476, "last_edit_date": 1469573513, "question_id": 38599711, "link": "https://stackoverflow.com/questions/38599711/main-wont-properly-call-on-function-makearray", "title": "Main won&#39;t properly call on function &quot;makeArray&quot;", "body": "<p>I'm not quite sure what the issue is, but my function <code>makeArray</code> won't store values when reading the file, and so the array just spits out garbage instead of the values I need. </p>\n\n<p>Here is my function</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define ROW 12\n#define COL 8\n\nvoid makeArray(FILE *infile, int array[][8]) {\n    int i, j;\n    infile = fopen(\"scores.txt\", \"r\");\n\n    for (i = 0; i &lt; ROW; i++) {\n        for (j = 0; j &lt; COL; j++) {\n            fscanf(infile, \"%d\", &amp;array[i][j]);\n        }\n    }\n    fclose(infile);\n}\n</code></pre>\n\n<p>Here is main:</p>\n\n<pre><code>int main() {\n    int choice, array[ROW][COL] = { 0 };\n    FILE *infile;\n\n    makeArray(infile, array);\n\n    do {\n        displayMenu();\n        scanf(\"%d\", &amp;choice);\n        processRequest(array, choice);\n    } while (choice != 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>This entire code is below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ROW 12\n#define COL 8\n\nvoid makeArray(FILE *infile, int array[][8]) {\n    int i, j;\n\n    infile = fopen(\"scores.txt\", \"r\");\n\n    for (i = 0; i &lt; ROW; i++) {\n        for (j = 0; j &lt; COL; j++) {\n            fscanf(infile, \"%d\", &amp;array[i][j]);\n        }\n    }\n    fclose(infile);\n}\n\nint getScore(int array[][8], int month, int game) {\n\n    int score;\n\n    array[month-1][game-1] = score;\n\n    return score;\n}\n\nint getMonthMax(int array[][8], int month) {\n\n    int i, max;\n\n    for (i = 0; i &lt; COL; i++) {\n        if (array[month - 1][i] &gt; max) {\n            max = array[month - 1][i];\n        }\n    }   \n    return max;     \n}\n\nint getYearMax(int array[][8]) {\n\n    int i, j, max;\n\n    for (i = 0; i &lt; ROW; i++) {\n        for (j = 0; j &lt; COL; j++) {\n            if (array[i][j] &gt; max) {\n                max = array[i][j];\n            }\n        }\n    }\n    return max;\n}\n\nfloat getMonthAvg(int array[][8], int month) {\n\n    int i, sum = 0, num = 0, j = 0;\n    float avg;\n\n    for (i = 0; i &lt; COL; i++) {\n        array[month - 1][i] = num;\n        sum += num;\n        j++;    \n    }\n    avg = (sum / j);\n    return avg;\n}\n\nfloat getYearAvg(int array[][8]) {\n\n    int i, j, k, sum = 0, num;\n    float avg;\n\n    for (i = 0; i &lt; ROW; i++) {\n        for (j = 0; j &lt; COL; j++) {\n            array[i][j] = num;\n            sum += num;\n            k++;\n        }\n    }\n    avg = (sum / k);\n    return avg;\n}\n\nint toursMissed(int array[][8]) {\n\n    int i, j, k;\n\n    for (i = 0; i &lt; ROW; i++) {\n        for (j = 0; j &lt; COL; j++){\n            if (array[i][j] == 0)\n                k++;\n        }\n    }\n    return k;\n}\n\nvoid displayMenu() {\n\n    int i, com;\n\n    printf(\"What would you like to do?\\n\");\n    for (i = 0; i &lt; 40; i++) {\n        printf(\"-\");\n    }\n    printf(\"\\nSelect from option 1-7 or 0 to stop\\n\");\n    printf(\"Select 1 to get the score for a specific game\\n\");\n    printf(\"Select 2 to get the max score for a specific month\\n\");\n    printf(\"Select 3 to get the average score for a specific month\\n\");\n    printf(\"Select 4 to get the max score for the year\\n\");\n    printf(\"Select 5 to get the average score for the year\\n\");\n    printf(\"Select 6 to get the number of tournamnets missed for the year\\n\");\n    printf(\"Select 7 to print all scores for the year\\n\");\n    printf(\"Select 0 to stop\\n\");\n    for (i = 0; i &lt; 40; i++) {\n        printf(\"-\");\n    }\n    printf(\"\\n\");\n\n}\n\nvoid printArray(int array[][8]) {\n\n    int i, j;\n\n    for (i = 0; i &lt; ROW; i++) {\n        for (j = 0; j &lt; COL; j++) {\n            printf(\"%d\\t\", &amp;array[i][j]);   \n        }\n        printf(\"\\n\");\n    }\n}\n\nvoid processRequest(int array[][8], int integer) {\n\n    int f1, f2, f3, f4, f5, f6, f7, f8;\n    int mont, gam;\n\n\n    if (integer == 0) {\n        printf(\"\\nThank you!  Goodbye\\n\");\n    }\n    if (integer == 1) {\n        printf(\"\\nPlease enter the month and the game\\n\");\n        scanf(\"%d%d\", &amp;mont, &amp;gam);\n        f1 = getScore(array, mont, gam);\n        printf(\"\\nThe score for Tournament %d is %d\", gam, f1);\n    }\n    if (integer == 2) {\n        printf(\"\\nPlease enter the month\\n\");\n        scanf(\"%d\", &amp;mont);\n        f2 = getMonthMax(array, mont);\n        printf(\"\\nThe max score for month %d was %d\\n\", mont, f2);\n    }\n    if (integer == 3) {\n        printf(\"\\nPlease enter the month\\n\");\n        scanf(\"%d\", &amp;mont);\n        f3 = getMonthAvg(array, mont);\n        printf(\"\\nThe average score for month %d is %4.2f\\n\", mont, f3);\n    }\n    if (integer == 4) {\n        f4 = getYearMax(array);\n        printf(\"\\nThe max score for the year is %d\\n\", f4);\n    }\n    if (integer == 5) {\n        f5 = getYearAvg(array);\n        printf(\"\\nThe average score for the year is %4.2f\\n\", f5);\n    }\n    if (integer == 6) {\n        f6 = toursMissed(array);\n        printf(\"\\nThe number of tournaments missed for the year is %d\\n\", f6);\n    }\n    if (integer == 7) {\n        printf(\"\\nThe scores for the year are:\\n\");\n        printArray(array);\n    }\n}\n\nint main() {\n\n    int choice, array[ROW][COL] = { 0 };\n    FILE *infile;\n\n    makeArray(infile, array);\n\n    do {\n        displayMenu();\n        scanf(\"%d\", &amp;choice);\n        processRequest(array, choice);\n    } while (choice != 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>Not sure if it's necessary to have all of that information available, but it's available now. </p>\n"}, {"tags": ["c", "cookies", "openssl", "httpresponse"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469565901, "post_id": 38599514, "comment_id": 64587021, "body": "Don&#39;t post images of text, less links thereof!"}, {"owner": {"reputation": 576, "user_id": 6172242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ze7SW.png?s=128&g=1", "display_name": "thanhdx", "link": "https://stackoverflow.com/users/6172242/thanhdx"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469568112, "post_id": 38599514, "comment_id": 64588092, "body": "Thank you so much. I am newbie :)."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 1, "creation_date": 1469572533, "post_id": 38599514, "comment_id": 64589645, "body": "Instead of <code>printf()</code>, could you please try to store the results in a file (with <code>fprintf()</code> or so) and update your answer with the file contents?"}, {"owner": {"reputation": 576, "user_id": 6172242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ze7SW.png?s=128&g=1", "display_name": "thanhdx", "link": "https://stackoverflow.com/users/6172242/thanhdx"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 1, "creation_date": 1469573984, "post_id": 38599514, "comment_id": 64590103, "body": "@threadp Yeah. By your way, I found the error. At the end of each Set-Cookie have a character new line &#39;\\n&#39;. I have to overwrite it by other character. So I just need change to <code>cookie[length+i-1] = &#39;;&#39;</code> and <code>length += i</code>. Thanks for your help :)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469576059, "post_id": 38599514, "comment_id": 64590726, "body": "Are you sure your terminal isn&#39;t just doing word-wrapping?"}], "owner": {"reputation": 576, "user_id": 6172242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ze7SW.png?s=128&g=1", "display_name": "thanhdx", "link": "https://stackoverflow.com/users/6172242/thanhdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469566042, "creation_date": 1469565782, "last_edit_date": 1469566042, "question_id": 38599514, "link": "https://stackoverflow.com/questions/38599514/get-cookie-from-https-response-message-in-c-terminal-ubuntu-16-04lts", "title": "Get cookie from HTTPS response message in C - Terminal Ubuntu 16.04LTS", "body": "<p>I have a problem when handling the HTTPS response message. I want to get cookie's content from Set-Cookie fields in response header I received.<br>\nThis is my function:</p>\n\n<pre><code>void Get_cookie(char *ck, char *message) {\n\nconst int COOKIE_SIZE = 102400;\nint i, j, length = 0;\nchar temp[] = \"Set-Cookie: \";\nchar cookie[COOKIE_SIZE];\nchar *start = NULL;\nchar *msg = NULL;\nchar *st = NULL;\n\nmsg = strstr(message, temp);                        // find set-cookie in message\nif (msg == NULL){                                   // not found\n    strcpy(ck, \"null\");                             // return null\n    return;\n}\nstart = (char *) malloc(COOKIE_SIZE*sizeof(char));\nstrcpy(start, msg);                                 // copy msg to start\ndo {\n    st = strstr(start, temp);                       // find set-cookie in start\n    if (st == NULL) break;                          // don't have anymore =&gt; break\n    st += strlen(temp);                             // move st pointer to content of feild\n    i = 0;\n    while (st[i] != '\\n') i++;                      // find the character endline '\\n'\n    for (j = 0; j &lt; i; j++) {                       // copy content to cookie\n        cookie[length+j] = st[j];\n    }\n    cookie[length+i] = ';';                         // add ;\n    length += (i + 1);\n    start += (strlen(temp) + i + 1);                // move start pointer to next feild\n} while (st != NULL);\ncookie[length] = '\\0';\nstrcpy(ck, cookie);                 // return via ck\nprintf(\"Cookie: \\n%s\\n\", cookie);\n\n}\n</code></pre>\n\n<p>Where message is the response message I received. When I call the function, I received a result with characters <code>';'</code> are at the head of each line (unexpected), like this:</p>\n\n<p>Before resize terminal:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OqgBn.png\" /></p>\n\n<p>But the strange thing is, when I resize the terminal and run the program again, I received the result that all the character <code>';'</code> are still at the head each line again. Like this</p>\n\n<p>After resize terminal:</p>\n\n<p><img src=\"https://i.stack.imgur.com/zltt3.png\" /></p>\n\n<p>I don't know what worked wrong? My code or terminal. Help me please.</p>\n"}, {"tags": ["c++", "c", "windows"], "comments": [{"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 1, "creation_date": 1469560086, "post_id": 38597935, "comment_id": 64583901, "body": "You could look into the source code of mimikatz, for example, it does just that"}, {"owner": {"reputation": 31, "user_id": 6641416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ae993d3b7347786988715394ae34aa?s=128&d=identicon&r=PG&f=1", "display_name": "zstmigwt", "link": "https://stackoverflow.com/users/6641416/zstmigwt"}, "reply_to_user": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 0, "creation_date": 1469560171, "post_id": 38597935, "comment_id": 64583952, "body": "I wasn&#39;t aware of that; Thank you."}], "owner": {"reputation": 31, "user_id": 6641416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ae993d3b7347786988715394ae34aa?s=128&d=identicon&r=PG&f=1", "display_name": "zstmigwt", "link": "https://stackoverflow.com/users/6641416/zstmigwt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1469559781, "creation_date": 1469559781, "question_id": 38597935, "link": "https://stackoverflow.com/questions/38597935/retrieving-ntlm-hash", "title": "Retrieving NTLM hash", "body": "<p>How do I retrieve the NTLM hash of the current logged in user? Do I have to inject into lsass.exe? If so, what is the process for obtaining the hashes? Sorry if this is a duplicate but I couldn't find what steps to take after injecting into lsass.exe.</p>\n"}, {"tags": ["c", "function", "header", "global-variables", "global"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469559775, "post_id": 38597924, "comment_id": 64583710, "body": "Add <code>int b;</code> to your <code>foo.h</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469560157, "post_id": 38597924, "comment_id": 64583945, "body": "Compiler doesn&#39;t know anything about <code>b</code> when compiling <code>foo.c</code>. Tell him something."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469560219, "post_id": 38597924, "comment_id": 64583980, "body": "@EOF I would rather say <code>extern int b;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6542423"}, "edited": false, "score": 0, "creation_date": 1469560658, "post_id": 38597924, "comment_id": 64584221, "body": "so I have to declare the variable b twice?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469560701, "post_id": 38597924, "comment_id": 64584251, "body": "@EugeneSh. Looking at C11 draft standard n1570, <i>6.9.2 External object definitions</i> it seems it will have external linkage. It may nevertheless be a good idea to make this explicit."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469560820, "post_id": 38597924, "comment_id": 64584312, "body": "@EOF AFAIK the tentative definitions are working in the current translation unit only: &quot;<i>A tentative definition becomes a full definition if the end of the translation unit is reached and no definition has appeared with an initializer for the identifier</i>&quot;. So It wont be tentative, but full."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1469561014, "post_id": 38597924, "comment_id": 64584415, "body": "@PintoDoido It would be a good idea for you to learn a bit about how compiler and linker are working together. Specifically read about <code>extern</code> keyword and wht it does."}], "owner": {"user_type": "does_not_exist", "display_name": "user6542423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1469560275, "answer_count": 0, "score": 0, "last_activity_date": 1469559724, "creation_date": 1469559724, "question_id": 38597924, "link": "https://stackoverflow.com/questions/38597924/invoking-global-variables-cause-errors-in-function-defined-in-c-file", "closed_reason": "Duplicate", "title": "Invoking global variables cause errors in function defined in .c file", "body": "<p>In a C program, when I have a set of global variables defined in the main.c file, how do I use their values in functions defined in different .c files? For example, the following files, when compiled using <strong><em>gcc -o my_prog main.c foo.c</em></strong> throws the following error:</p>\n\n<pre><code>foo.c: In function \u2018foo\u2019:\nfoo.c:5:9: error: \u2018b\u2019 undeclared (first use in this function)\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"foo.h\" \n\nint b=4;\n\nint main(void)\n{\n    int y = foo(3);  /* Use the function here */\n    printf(\"%d\\n\", y);\n    return 0;\n}\n</code></pre>\n\n<p>foo.c</p>\n\n<pre><code>#include \"foo.h\"  \n\nint foo(int x)    /* Function definition */\n{\n    return x + b;\n}\n</code></pre>\n\n<p>foo.h</p>\n\n<pre><code>#ifndef FOO_H_   /* Include guard */\n#define FOO_H_\n\nint foo(int x);  /* An example function declaration */\n\n#endif // FOO_H_\n</code></pre>\n\n<p>How do we get around this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1455, "user_id": 5339966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0897e935d50e040875b9ea61d8c0851c?s=128&d=identicon&r=PG&f=1", "display_name": "mszymborski", "link": "https://stackoverflow.com/users/5339966/mszymborski"}, "edited": false, "score": 0, "creation_date": 1469559281, "post_id": 38597771, "comment_id": 64583420, "body": "<code>&amp;a</code> returns a pointer to the variable a. it&#39;s not expectiong <code>int*</code>, it was given it."}, {"owner": {"reputation": 1455, "user_id": 5339966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0897e935d50e040875b9ea61d8c0851c?s=128&d=identicon&r=PG&f=1", "display_name": "mszymborski", "link": "https://stackoverflow.com/users/5339966/mszymborski"}, "edited": false, "score": 0, "creation_date": 1469559341, "post_id": 38597771, "comment_id": 64583464, "body": "@Carcigenicate - C automatically merges multiline strings like that. It&#39;s really neat."}, {"owner": {"reputation": 823, "user_id": 3407841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb5d2d69fa2669def7490ac607e0515?s=128&d=identicon&r=PG&f=1", "display_name": "leetibbett", "link": "https://stackoverflow.com/users/3407841/leetibbett"}, "edited": false, "score": 0, "creation_date": 1469559343, "post_id": 38597771, "comment_id": 64583465, "body": "You don&#39;t need &amp; before your int variables."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 823, "user_id": 3407841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb5d2d69fa2669def7490ac607e0515?s=128&d=identicon&r=PG&f=1", "display_name": "leetibbett", "link": "https://stackoverflow.com/users/3407841/leetibbett"}, "edited": false, "score": 0, "creation_date": 1469559393, "post_id": 38597771, "comment_id": 64583487, "body": "@leetibbett The preprocessor concatenates  adjacent string literals."}, {"owner": {"reputation": 823, "user_id": 3407841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb5d2d69fa2669def7490ac607e0515?s=128&d=identicon&r=PG&f=1", "display_name": "leetibbett", "link": "https://stackoverflow.com/users/3407841/leetibbett"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469559477, "post_id": 38597771, "comment_id": 64583532, "body": "@EOF cool I will revise that comment."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1469563639, "post_id": 38597771, "comment_id": 64585921, "body": "<code>man printf</code> is your friend."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 6636545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6deffeaf852079fe73cffe59d1dc24e3?s=128&d=identicon&r=PG&f=1", "display_name": "pjcognetta", "link": "https://stackoverflow.com/users/6636545/pjcognetta"}, "is_accepted": false, "score": 2, "last_activity_date": 1469564519, "last_edit_date": 1469564519, "creation_date": 1469559783, "answer_id": 38597937, "question_id": 38597771, "link": "https://stackoverflow.com/questions/38597771/i-dont-know-why-i-it-does-not-work-format-d-expects/38597937#38597937", "title": "i don&#39;t know why i it does not work, format %d expects", "body": "<p><code>&amp;variable</code> is a memory address. You are using an <code>int</code> pointer (<code>int *</code>) when it expects an <code>int</code>. To pass an <code>int</code> as an argument simply use the variable name, for example <code>a</code> instead of <code>&amp;a</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "is_accepted": false, "score": 0, "last_activity_date": 1469559949, "creation_date": 1469559949, "answer_id": 38597980, "question_id": 38597771, "link": "https://stackoverflow.com/questions/38597771/i-dont-know-why-i-it-does-not-work-format-d-expects/38597980#38597980", "title": "i don&#39;t know why i it does not work, format %d expects", "body": "<p>When you call </p>\n\n<pre><code>printf(\"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e, &amp;f);\n</code></pre>\n\n<p><code>&amp;</code> symbol means, that you're taking an address of variable. Since the type of variables is <code>int</code>, what you get is an <code>int *</code>. What you have to write is</p>\n\n<pre><code>printf(\"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\"\n        \"%d\\n\", a, b, c, d, e, f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6547748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c70855c496be4379b049570584583533?s=128&d=identicon&r=PG&f=1", "display_name": "Shridhar410", "link": "https://stackoverflow.com/users/6547748/shridhar410"}, "is_accepted": false, "score": 1, "last_activity_date": 1469560319, "creation_date": 1469560319, "answer_id": 38598086, "question_id": 38597771, "link": "https://stackoverflow.com/questions/38597771/i-dont-know-why-i-it-does-not-work-format-d-expects/38598086#38598086", "title": "i don&#39;t know why i it does not work, format %d expects", "body": "<p>&amp;(variable) provides the address of a variable. To print values you can directly use the integer variable name. </p>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1469564908, "post_id": 38598233, "comment_id": 64586570, "body": "When you ask a question and get helpful answers instead of posting answer , please select the most relevent answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 5767182, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhsQ19QfF-4/AAAAAAAAAAI/AAAAAAAAAjw/AhB18UlW8gw/photo.jpg?sz=128", "display_name": "David ", "link": "https://stackoverflow.com/users/5767182/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1469560874, "creation_date": 1469560874, "answer_id": 38598233, "question_id": 38597771, "link": "https://stackoverflow.com/questions/38597771/i-dont-know-why-i-it-does-not-work-format-d-expects/38598233#38598233", "title": "i don&#39;t know why i it does not work, format %d expects", "body": "<p>removing the &amp; symbols works \nthanks for the help</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1469569137, "last_edit_date": 1469569137, "creation_date": 1469562624, "answer_id": 38598727, "question_id": 38597771, "link": "https://stackoverflow.com/questions/38597771/i-dont-know-why-i-it-does-not-work-format-d-expects/38598727#38598727", "title": "i don&#39;t know why i it does not work, format %d expects", "body": "<p><code>printf</code> and <code>scanf</code> expect two different things, which may be contributing to why you are having this error.</p>\n\n<p><code>int*</code> (a pointer to an integer or the address of an integer) is what you get when you take the address of (&amp;) an integer variable. Simply change <code>&amp;a, &amp;b</code>, ... to <code>a, b</code> ... for a solution. For using the same variable in both input/output though, keep using <code>&amp;a</code> in any scanfs, but use <code>a</code> in any printfs. </p>\n"}], "owner": {"reputation": 1, "user_id": 5767182, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhsQ19QfF-4/AAAAAAAAAAI/AAAAAAAAAjw/AhB18UlW8gw/photo.jpg?sz=128", "display_name": "David ", "link": "https://stackoverflow.com/users/5767182/david"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1469566747, "answer_count": 5, "score": -5, "last_activity_date": 1469571150, "creation_date": 1469559194, "last_edit_date": 1469571150, "question_id": 38597771, "link": "https://stackoverflow.com/questions/38597771/i-dont-know-why-i-it-does-not-work-format-d-expects", "closed_reason": "Not suitable for this site", "title": "i don&#39;t know why i it does not work, format %d expects", "body": "<p>i get the following error:\nformat '%d' expects argument of type 'int', but argument 2 has type 'int *'\ni don't know why it is expecting a int *, can someone please explain it to me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(void)\n{\n\n    int wisselgeld = 70;\n    int a = 0, b = 0, c = 0, d = 0, e = 0, f = 0;\n\n    a = wisselgeld / 200;\n    b = (wisselgeld - (a * 200)) / 100;\n    c = (wisselgeld - (a * 200) - (b * 100)) / 50;\n    d = (wisselgeld - (a * 200) - (b * 100) - (c * 50)) / 20;\n    e = (wisselgeld - (a * 200) - (b * 100) - (c * 50) - (d * 20)) / 10;\n    f = (wisselgeld - (a * 200) - (b * 100) - (c * 50) - (d * 20) - (e * 10)) / 5;\n\n    printf(\"%d\\n\"\n       \"%d\\n\"\n       \"%d\\n\"\n       \"%d\\n\"\n       \"%d\\n\"\n       \"%d\\n\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e, &amp;f);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1469559001, "post_id": 38597565, "comment_id": 64583267, "body": "If this is <a href=\"https://troydhanson.github.io/tpl/\" rel=\"nofollow noreferrer\"><code>tpl</code></a>, then I&#39;d recommend following the <a href=\"https://troydhanson.github.io/tpl/userguide.html#_build_and_install\" rel=\"nofollow noreferrer\">installation guide</a> for that."}, {"owner": {"reputation": 1, "user_id": 6616298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad51b904159331c498bdb68b87ba38?s=128&d=identicon&r=PG&f=1", "display_name": "dchin2", "link": "https://stackoverflow.com/users/6616298/dchin2"}, "edited": false, "score": 0, "creation_date": 1469561694, "post_id": 38597565, "comment_id": 64584832, "body": "It is.  I tried following the guide, by putting tpl.c and tpl.h into the same folder as my main program.  When I build, I get an error saying: undefined reference to (a function in tpl)."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1469565937, "post_id": 38597565, "comment_id": 64587045, "body": "As said, you need to link against TPL code than, and add the <code>NOLIB</code> flag mentioned in the instructions. should work"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1469558420, "creation_date": 1469558420, "answer_id": 38597565, "question_id": 38597420, "link": "https://stackoverflow.com/questions/38597420/how-to-add-libraries-to-a-make-file/38597565#38597565", "title": "how to add libraries to a make file", "body": "<p>Libraries are usually first built and installed to your system, so you can later add them to what seems to be <code>LIBS</code> in your Makefile (let's say your library's called \"foo\", <code>-lfoo</code>). </p>\n\n<p>So you've got two options:</p>\n\n<ol>\n<li>The \"this actually deserves the name library\" path: Find or write a Makefile to turn foo.c into a libfoo.so, install that, and then use <code>LIBS= -lbsapi -lfoo</code>, or</li>\n<li>The \"I'm including the source code in my source code and hope that everything builds correctly\" path: add foo.o to the things that <code>Biometry</code> needs, and add a recipe on how to build <code>foo.o</code> from <code>foo.c</code>, and add <code>foo.c</code> to your sources:</li>\n</ol>\n\n<pre>\nCPPFLAGS = -I../../include\nCFLAGS = \nLDFLAGS = -L../../lib -L../../lib64\nLIBS = -lbsapi\n\nBiometry: main.c foo.o\n    $(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) main.c foo.o -o Biometry $(LIBS)\n\nfoo.o: foo.c\n     $(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) foo.c -o foo.o $(LIBS)\n</pre>\n"}], "owner": {"reputation": 1, "user_id": 6616298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad51b904159331c498bdb68b87ba38?s=128&d=identicon&r=PG&f=1", "display_name": "dchin2", "link": "https://stackoverflow.com/users/6616298/dchin2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13631, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1550386925, "creation_date": 1469557899, "question_id": 38597420, "link": "https://stackoverflow.com/questions/38597420/how-to-add-libraries-to-a-make-file", "title": "how to add libraries to a make file", "body": "<p>I'm editing an example file already in a library.  Inside the directory of the example, there is a Makefile that I have been using to compile and run the example.  I now want to add an additional library to this make file, I have tried copy and pasting the header and .c file into the library folder specified in the Makefile, but it is not finding it. Here is the Makefile code:</p>\n\n<pre><code>CPPFLAGS = -I../../include\nCFLAGS = \nLDFLAGS = -L../../lib -L../../lib64\nLIBS = -lbsapi\n\nBiometry: main.c\n    $(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) main.c -o Biometry $(LIBS)\n</code></pre>\n\n<p>The library that I wanted to add came with a .h file and a .c file.  I have added those to the ../../include directory and made sure to add this to my code right below the previous #include</p>\n\n<pre><code>#include &lt;tpl.h&gt;\n</code></pre>\n\n<p>I am not sure what I am missing? The program ran properly before the addition of this library.</p>\n"}, {"tags": ["c++", "c", "printf", "implicit-conversion", "undefined-behavior"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 37, "creation_date": 1469557459, "post_id": 38597274, "comment_id": 64582384, "body": "<code>printf</code> is expecting a <code>double</code>, and you&#39;re giving it an <code>int</code>. <code>float</code> and <code>int</code> may be the same size on your machine, but <code>0.0f</code> is actually converted to a <code>double</code> when pushed into a variadic argument list (and <code>printf</code> expects that). In short, you&#39;re not fulfilling your end of the bargain with <code>printf</code> based on the specifiers your using and the arguments you&#39;re providing."}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1469557489, "post_id": 38597274, "comment_id": 64582409, "body": "most probably because the size of int is not equal to the size of double"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 22, "creation_date": 1469557552, "post_id": 38597274, "comment_id": 64582446, "body": "Varargs-functions don&#39;t automatically convert function arguments to the type of the corresponding parameter, because they can&#39;t. The necessary information is not available to the compiler, unlike non-varargs functions with a prototype."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 3, "creation_date": 1469557772, "post_id": 38597274, "comment_id": 64582562, "body": "Oooh... &quot;variadics.&quot; I just learned a new word ..."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1469558021, "post_id": 38597274, "comment_id": 64582712, "body": "@self: The difference in size might explain why the OP is seeing &quot;random values&quot; (actually arbitrary, not random), but the sizes have nothing to do with the fact that the behavior is undefined."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1469558096, "post_id": 38597274, "comment_id": 64582767, "body": "@MikeRobinson: Be aware that it&#39;s only a colloquialism."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469558745, "post_id": 38597274, "comment_id": 64583124, "body": "You used the &quot;implicit-cast&quot; tag. You might want to read the <a href=\"https://stackoverflow.com/questions/tagged/implicit-cast\">tag wiki</a>. (I changed the tag to &quot;implicit-conversion&quot;, though there actually is no implicit conversion on <code>printf(&quot;%f\\n&quot;, 0)</code>."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1469558771, "post_id": 38597274, "comment_id": 64583137, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/23287222/can-printf-result-in-undefined-behavior\"><b>Can printf result in undefined behavior?</b></a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469558921, "post_id": 38597274, "comment_id": 64583218, "body": "Detail: <code>0</code>, <code>0.0</code> in C, are an <i>integer constant</i> and a <i>floating point constant</i>.  Not <i>literal</i>.  C does have <i>string literals</i> and <i>compound literal</i>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469559098, "post_id": 38597274, "comment_id": 64583316, "body": "@FirstStep Not really. The references mentioned here are fairly better than in the proposed dupe."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469559229, "post_id": 38597274, "comment_id": 64583395, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Oh .. well thank you for pointing that out. I posted it before my page reloads so I just saw all these comments and answers.. or I just wanted to be part of this.. I don&#39;t know yet."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469559236, "post_id": 38597274, "comment_id": 64583400, "body": "That&#39;s not a reason it&#39;s not a dupe. The reason it&#39;s not a dupe is because the types and values are different."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1469559801, "post_id": 38597274, "comment_id": 64583730, "body": "@Lightness <i>&quot;is because the types and values are different&quot;</i> Well, we often expect the ability of abstraction to extrapolate such stuff  from the OP, when marking dupes. But I&#39;d not going to mark as a dupe if I see that there are already better answers at the current question (may be better vice versa)."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1469564878, "post_id": 38597274, "comment_id": 64586552, "body": "The next thing to try is to pass a <code>(uint64_t)0</code> instead of <code>0</code> and see whether you still get random behavior (assuming <code>double</code> and <code>uint64_t</code> have the same size and alignment). Chances are the output will still be random on some platforms (e.g. x86_64) due to different types being passed in different registers."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469566741, "post_id": 38597274, "comment_id": 64587461, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: In this case, the value is absolutely core to the question."}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1469622282, "post_id": 38597274, "comment_id": 64611909, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/27543489/why-printf-isnt-outputting-this-integer-as-float-number\">Why printf() isn&#39;t outputting this integer as float number?</a>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1469624138, "post_id": 38597274, "comment_id": 64613388, "body": "@IanAbbott Passing arguments in registers to printf? Possible but unlikely."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469628085, "post_id": 38597274, "comment_id": 64616480, "body": "@PeterA.Schneider That&#39;s the way its done for x86-64. The commonly used calling conventions (Microsoft x64 and System V AMD64) both use registers for the first few arguments, and the registers used depend on whether the arguments are floating point or not. See <a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions\" rel=\"nofollow noreferrer\">x86-64 calling conventions</a>."}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 2, "creation_date": 1469628088, "post_id": 38597274, "comment_id": 64616482, "body": "<code>gcc -Wall</code> would actually tell the reason immediately: <code>warning: format &#39;%f&#39; expects argument of type &#39;double&#39;, but argument 2 has type &#39;int&#39; [-Wformat=] </code>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1469631624, "post_id": 38597274, "comment_id": 64619291, "body": "@IanAbbott When type and number of args are known, sure. For variadic functions, too? That should be part of the run time lib, i.e. how va_arg() and friends are implemented. Of course printf can be an intrinsic anyway etc... perhaps somebody has the time to check the assembler on one of the free compiler sites."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469635155, "post_id": 38597274, "comment_id": 64621766, "body": "@PeterA.Schneider Yes, for variadic functions too. The way Microsoft x64 handles variadic arguments is for the callee function to copy the registers holding variadic arguments into the 32-byte shadow space on the stack. This space is followed in memory by the remaining arguments on the stack, so <code>va_arg</code> sees all the arguments in order. Although floating point arguments are usually passed in separate registers, the caller also copies them to the corresponding non-floating point registers if the parameter type is unknown (as is the case for variadic arguments)."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1469650572, "post_id": 38597274, "comment_id": 64630383, "body": "For even more variadic argument fun try using a literal <code>0</code> to zero-terminate a list of pointers. On a machine where <code>int</code> and <code>void*</code> are not the same size."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1469691312, "post_id": 38597274, "comment_id": 64643861, "body": "&quot;However, the statement printf(&quot;%f\\n&quot;,0); prints random values. &quot; - really? Shouldn&#39;t it print one value only? Or are you running it in a loop (which is not specified in your question)?"}, {"owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1469711975, "post_id": 38597274, "comment_id": 64658203, "body": "@Thomas  Sorry, that wasn&#39;t clear.  It created arbitrary values each time I ran the program."}, {"owner": {"reputation": 1696, "user_id": 3762855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091d4d0c3abe99847befd5ba66dbaa86?s=128&d=identicon&r=PG", "display_name": "Ciro Corvino", "link": "https://stackoverflow.com/users/3762855/ciro-corvino"}, "edited": false, "score": 0, "creation_date": 1470231856, "post_id": 38597274, "comment_id": 64864539, "body": "@TrevorHickey Hi, the problem, I think depends by a cast carried by arg_va macro from a pointer at int type to double and consequent dereferencing.. see my answer for details"}], "answers": [{"comments": [{"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469557642, "post_id": 38597315, "comment_id": 64582494, "body": "I would say calling a format string modifer <code>f</code> and then expecting a <b>d</b>ouble instead of a <b>f</b>loat would explain the confusion. Just one of those little things."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 3, "creation_date": 1469557672, "post_id": 38597315, "comment_id": 64582517, "body": "@Voo: That format string modifier <i>is</i> unfortunately named, but I still don&#39;t see why you&#39;d think that an <code>int</code> would be acceptable here."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469557881, "post_id": 38597315, "comment_id": 64582635, "body": "The way I understand the question was that the OP assumed that the format string modifier took a float and then wondering why data with the same bit width (which would also qualify as a valid float pattern) would cause weird results. I mean passing a long (assuming 8byte longs on the architecture) would still be UB and result in weird behavior since longs and doubles are passed via different registers on many architectures, so no change there."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1469557952, "post_id": 38597315, "comment_id": 64582678, "body": "@Voo: <i>&quot;(which would also qualify as a valid float pattern)&quot;</i> Why would an <code>int</code> qualify as a valid float pattern? Two&#39;s complement and various floating-point encodings have almost nothing in common."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469558077, "post_id": 38597315, "comment_id": 64582750, "body": "We already established that this is UB, but in practice pretty much every architecture (yes I know the IBM exceptions and co) uses IEEE-754 for floats and 32 0s is a valid representation of 0.0f then. The reason this still causes troubles might be interesting to some, since usually passing <code>0</code> for a double works perfectly fine."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1469558078, "post_id": 38597315, "comment_id": 64582752, "body": "It&#39;s confusing because, for <i>most</i> library functions, providing the integer literal <code>0</code> to an argument typed <code>double</code> will do the Right Thing.  It is not obvious to a beginner that the compiler doesn&#39;t do that same conversion for <code>printf</code> argument slots addressed by <code>%[efg]</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469558195, "post_id": 38597315, "comment_id": 64582826, "body": "@Voo: But 32 zeroes doesn&#39;t take up <i>64</i>-bits, and the function is expecting a <code>double</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1469558267, "post_id": 38597315, "comment_id": 64582873, "body": "@zwol: Okay, perhaps. I thought the OP had pre-indicated comprehension of this in the question (so my answer was predicated on that level of knowledge), but re-reading the question that&#39;s actually not clear. Still, a quick glance at the documentation would sort it."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469558283, "post_id": 38597315, "comment_id": 64582886, "body": "@Lightness Yes, but even if you did pass 0L chances would still be that it wouldn&#39;t work as expected which would be the more interesting case (actually I don&#39;t know - do calling conventions for x86/64 pass the first few arguments for variadic functions on the stack or do they use registers as well? If they&#39;re all passed on the stack in practice 0L would even work..)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469558356, "post_id": 38597315, "comment_id": 64582924, "body": "@Voo Point is it doesn&#39;t really matter. UB is UB is UB and <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633\" rel=\"nofollow noreferrer\">you could time travel</a> before observing any of these implementation-specific happenstances."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469558439, "post_id": 38597315, "comment_id": 64582963, "body": "I knew it was Raymond&#39;s post before even looking at the URL.. Yes yes we established UB, I doubt even the OP didn&#39;t know it was UB. Doesn&#39;t mean seeing the practical behavior of compilers isn&#39;t interesting, because that actually does teach you something interesting.#"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1469558627, "post_id": 38597315, "comment_id": 64583070, "body": "@Voo: If you&#39;re interested in how horribly wrong this can go, consider that on x86-64 SysV ABI, floating-point arguments are passed in a different register-set than integer arguments."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469558720, "post_id": 38597315, "comment_id": 64583112, "body": "@EOF I&#39;d assume that even on x64 the float parameters are passed via MMX registers or similar, but I don&#39;t know. And that&#39;s exactly what I mean with &quot;teach you something interesting&quot; :-)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469558843, "post_id": 38597315, "comment_id": 64583173, "body": "@Voo Well, the point is that even if the integer you pass has a representation that also works as a floating-point, <code>printf()</code> doesn&#39;t even <i>look</i> at those bits. It instead uses whatever garbage is left in the floating-point registers (or the stack)."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469558998, "post_id": 38597315, "comment_id": 64583264, "body": "@Eof I know (I did work on compilers for a living), my point is that just saying &quot;It&#39;s UB, nothing interesting to see here&quot; is selling the question short. Yes you want to mention that it&#39;s UB, but then you can go into all those way more interesting topics such as how variadic functions pass parameters and the different calling conventions and where parameters are stored."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469559173, "post_id": 38597315, "comment_id": 64583358, "body": "Not on a question broadly tagged <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>, you can&#39;t. If you want to ask about a specific implementation then fine, but that&#39;s not what this question is."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1469559434, "post_id": 38597315, "comment_id": 64583510, "body": "@LightnessRacesinOrbit I think it&#39;s <i>always</i> appropriate to discuss <i>why</i> something is UB, which usually involves talking about what implementation latitude is allowed and what actually happens in common cases."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469561016, "post_id": 38597315, "comment_id": 64584416, "body": "@Lightness If you would like to open a meta post asking all those c++ optimization questions to be closed since performance is not specified anywhere by the standard (could someone please say &quot;it&#39;s nonsense to talk about performance of a language, that&#39;s about the implementation&quot;?), be my guest. But up to now, questions that go over the standard have been perfectly acceptable here and I don&#39;t see that changing any time soon."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469566617, "post_id": 38597315, "comment_id": 64587397, "body": "@Voo: I completely agree. Such questions are more than welcome. This just isn&#39;t one of them."}, {"owner": {"reputation": 12675, "user_id": 636009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIQJV.jpg?s=128&g=1", "display_name": "David Conrad", "link": "https://stackoverflow.com/users/636009/david-conrad"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1469609442, "post_id": 38597315, "comment_id": 64602955, "body": "@Voo on many systems <code>0L</code> is still 32 bits, and you would need <code>0LL</code>."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 9, "last_activity_date": 1469557558, "creation_date": 1469557558, "answer_id": 38597315, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38597315#38597315", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>I'm not sure what's confusing.</p>\n\n<p>Your format string expects a <code>double</code>; you provide instead an <code>int</code>.</p>\n\n<p>Whether the two types have the same bit width is utterly irrelevant, except that it may help you avoid getting hard memory violation exceptions from broken code like this.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 13, "creation_date": 1469558074, "post_id": 38597324, "comment_id": 64582746, "body": "A couple of excellent core points here. First, that it&#39;s <code>double</code> not <code>float</code> so the OP&#39;s width assumption may not (probably doesn&#39;t) hold. Second, the assumption that integer zero and floating-point zero have the same bit pattern also does not hold. Good work"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 1, "creation_date": 1469563516, "post_id": 38597324, "comment_id": 64585847, "body": "Your answer begs the question so I&#39;ll just add the link here: <a href=\"http://stackoverflow.com/questions/28097564/why-does-printf-promote-a-float-to-a-double\">Why does printf() promote a float to a double?</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 2, "creation_date": 1469563885, "post_id": 38597324, "comment_id": 64586037, "body": "@LucasTrzesniewski: Ok, but I don&#39;t see how my answer begs the question. I did state that <code>float</code> is promoted to <code>double</code> without explaining why, but that wasn&#39;t the main point."}, {"owner": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1469576980, "post_id": 38597324, "comment_id": 64590955, "body": "Keith, i&#39;ll beg the question with @LucasTrzesniewski.  <code>printf()</code> is a function, <b>not</b> integral to the C language.  are you saying that the C compiler has special hooks in it to watch out for <code>printf()</code> and then examine the first argument which is the control string?  my C knowledge is a little old (post K&amp;R ANSI) but i always that it was <code>%lf</code> for <code>double</code> and <code>%f</code> for single-precision <code>float</code>.  but nonetheless, when the OP puts <code>0</code> in the argument, he is pushing an <code>int</code> onto the stack (or &quot;passing&quot; an <code>int</code> to the function). then <code>printf</code> examines the control string."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "edited": false, "score": 2, "creation_date": 1469577196, "post_id": 38597324, "comment_id": 64591005, "body": "@robertbristow-johnson: Compilers don&#39;t need to have special hooks for <code>printf</code>, though gcc, for example, does have some so it can diagnose errors (<i>if</i> the format string is a literal). The compiler can see the declaration of <code>printf</code> from <code>&lt;stdio.h&gt;</code>, which tells it that the first parameter is a <code>const char*</code> and the rest are indicated by <code>, ...</code>. No, <code>%f</code> is for <code>double</code> (and <code>float</code> is promoted to <code>double</code>), and <code>%lf</code> is for <code>long double</code>. The C standard says nothing about a stack. It specifies the behavior of <code>printf</code> only when it&#39;s called correctly."}, {"owner": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "edited": false, "score": 0, "creation_date": 1469581274, "post_id": 38597324, "comment_id": 64591861, "body": "in the olden daze, it was called &quot;lint&quot;.  i understand (i think best as an option) a lexigraphical and syntactical function that might tell you that you&#39;re not using <code>printf()</code> correctly (or any other stdlib function).  but <b>normally</b> the C compiler is the only thing that knows that a <code>float</code> was passed to the function.  the only way the function (like <code>sprintf()</code> or <code>vprintf()</code>) knows what species of animal is passed to it is through the control string that is the first argument."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "edited": false, "score": 2, "creation_date": 1469581623, "post_id": 38597324, "comment_id": 64591930, "body": "@robertbristow-johnson: In the olden daze, &quot;lint&quot; often performed some of the extra checking that gcc now performs. A <code>float</code> passed to <code>printf</code> is promoted to <code>double</code>; there&#39;s nothing magical about that, it&#39;s just a language rule for calling variadic functions. <code>printf</code> itself knows via the format string what the caller <i>claimed</i> to pass to it; if that claim is incorrect, the behavior is undefined."}, {"owner": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "edited": false, "score": 0, "creation_date": 1469597949, "post_id": 38597324, "comment_id": 64596067, "body": "so you&#39;re just saying that <code>printf()</code> requires doubles to be passed for <code>%f</code> in the control string.  and if you pass a 4-byte integer, <code>printf()</code> wouldn&#39;t know, right?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "edited": false, "score": 0, "creation_date": 1469598170, "post_id": 38597324, "comment_id": 64596161, "body": "@robertbristow-johnson: Right. Or an integer of any size."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 1, "creation_date": 1469605695, "post_id": 38597324, "comment_id": 64600485, "body": "@KeithThompson I felt the &quot;why&quot; part was interesting enough to warrant a link to an explanation, as it&#39;s not a behavior you would expect to occur intuitively (I mean it&#39;s documented but without the reasoning behind it). Sure, it&#39;s not the main point of the question, but it&#39;s a major reason why the UB in this case doesn&#39;t appear to &quot;just work&quot;."}, {"owner": {"reputation": 174367, "user_id": 1011995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1", "display_name": "Daniel Fischer", "link": "https://stackoverflow.com/users/1011995/daniel-fischer"}, "reply_to_user": {"reputation": 154, "user_id": 3856245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBB3z.jpg?s=128&g=1", "display_name": "robert bristow-johnson", "link": "https://stackoverflow.com/users/3856245/robert-bristow-johnson"}, "edited": false, "score": 2, "creation_date": 1469647741, "post_id": 38597324, "comment_id": 64628935, "body": "Small correction: the <code>l</code> length modifier &quot;has no effect on a following <code>a</code>, <code>A</code>, <code>e</code>, <code>E</code>, <code>f</code>, <code>F</code>, <code>g</code>, or <code>G</code> conversion specifier&quot;, the length modifier for a <code>long double</code> conversion is <code>L</code>. (@robertbristow-johnson might also be interested)"}, {"owner": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 0, "creation_date": 1470245115, "post_id": 38597324, "comment_id": 64873925, "body": "Floating point arguments might be passed using different registers than integer registers, so might behave differently than if you passed the int <code>reinterpret_cast</code>ed to float. (E.g. In windows 64 it&#39;s <code>rcx</code> for integers and <code>xmm0</code> for floating point types)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 0, "creation_date": 1470245809, "post_id": 38597324, "comment_id": 64874323, "body": "@Dani: Does that apply to variadic functions? If so, the <code>va_arg()</code> macro would have some extra work to do, since it would have to use type information to determine which register to grab. Which is certainly possible, but passing variadic functions on the stack would probably make things easier."}, {"owner": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 0, "creation_date": 1470246470, "post_id": 38597324, "comment_id": 64874693, "body": "@KeithThompson: I checked linux gcc and it does apply: <a href=\"https://godbolt.org/g/CxPttG\" rel=\"nofollow noreferrer\">godbolt.org/g/CxPttG</a>"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 122, "last_activity_date": 1580331122, "last_edit_date": 1580331122, "creation_date": 1469557577, "answer_id": 38597324, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38597324#38597324", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>The <code>\"%f\"</code> format requires an argument of type <code>double</code>. You're giving it an argument of type <code>int</code>. That's why the behavior is undefined.</p>\n\n<p>The standard does not guarantee that all-bits-zero is a valid representation of <code>0.0</code> (though it often is), or of any <code>double</code> value, or that <code>int</code> and <code>double</code> are the same size (remember it's <code>double</code>, not <code>float</code>), or, even if they are the same size, that they're passed as arguments to a variadic function in the same way.</p>\n\n<p>It might happen to \"work\" on your system. That's the worst possible symptom of undefined behavior, because it makes it difficult to diagnose the error.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">N1570</a> 7.21.6.1 paragraph 9:</p>\n\n<blockquote>\n  <p>... If any argument is not the correct type for the corresponding\n  conversion specification, the behavior is undefined.</p>\n</blockquote>\n\n<p>Arguments of type <code>float</code> are promoted to <code>double</code>, which is why <code>printf(\"%f\\n\",0.0f)</code> works. Arguments of integer types narrower than <code>int</code> are promoted to <code>int</code> or to <code>unsigned int</code>. These promotion rules (specified by N1570 6.5.2.2 paragraph 6) do not help in the case of <code>printf(\"%f\\n\", 0)</code>.</p>\n\n<p>Note that if you pass a constant <code>0</code> to a non-variadic function that expects a <code>double</code> argument, the behavior is well defined, assuming the function's prototype is visible. For example, <code>sqrt(0)</code> (after <code>#include &lt;math.h&gt;</code>) implicitly converts the argument <code>0</code> from <code>int</code> to <code>double</code> -- because the compiler can see from the declaration of <code>sqrt</code> that it expects a <code>double</code> argument. It has no such information for <code>printf</code>. Variadic functions like <code>printf</code> are special, and require more care in writing calls to them.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1469557837, "post_id": 38597340, "comment_id": 64582597, "body": "Some particular implementations of <code>printf</code> might work that way (except that the items passed are values, not addresses). The C standard doesn&#39;t specify <i>how</i> <code>printf</code> and other variadic functions work, it just specifies their behavior. In particular, there is no mention of stack frames."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469558631, "post_id": 38597340, "comment_id": 64583073, "body": "A small quibble: <code>printf</code> does have <i>one</i> typed parameter, the format string, which is of type <code>const char*</code>. BTW, the question is tagged both C and C++, and C is really more relevant; I probably wouldn&#39;t have used <code>reinterpret_cast</code> as an example."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1469559297, "post_id": 38597340, "comment_id": 64583427, "body": "Just an interesting observation: Same undefined behaviour, and most likely due to identical mechanism, but with a small difference in detail: Passing an int as in the question, the UB happens <i>within</i> printf when trying to interprete the int as double - in your example, it happens already <i>outside</i> when dereferencing pf..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1469559487, "post_id": 38597340, "comment_id": 64583539, "body": "@Aconcagua Added clarification."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1519184680, "post_id": 38597340, "comment_id": 84801185, "body": "This code sample is UB for strict aliasing violation, an entirely different problem to what the question is asking about.  For example you completely ignore the possibility that floats are passed in different registers to integers."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 13, "last_activity_date": 1469560144, "last_edit_date": 1469560144, "creation_date": 1469557633, "answer_id": 38597340, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38597340#38597340", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<blockquote>\n  <p>Why does using an integer literal instead of a float literal cause this behavior?</p>\n</blockquote>\n\n<p>Because <code>printf()</code> doesn't have typed parameters besides the <code>const char* formatstring</code> as the 1st one. It uses a c-style ellipsis (<code>...</code>) for all the rest. </p>\n\n<p>It's just decides how to interpret the values passed there according to the formatting types given in the format string.</p>\n\n<p>You would have the same kind of undefined behavior as when trying</p>\n\n<pre><code> int i = 0;\n const double* pf = (const double*)(&amp;i);\n printf(\"%f\\n\",*pf); // dereferencing the pointer is UB\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 4, "creation_date": 1469557898, "post_id": 38597358, "comment_id": 64582644, "body": "Also, <code>printf()</code> <i>in particular</i> is designed so that its arguments could be of any type. You must know which type is expected by each element in the format-string, and you must provide it correctly."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1469605635, "post_id": 38597358, "comment_id": 64600456, "body": "@MikeRobinson: Well, any primitive C type. Which is a very, very small subset of all possible types."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 13, "last_activity_date": 1469557688, "creation_date": 1469557688, "answer_id": 38597358, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38597358#38597358", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>Ordinarily when you call a function that expects a <code>double</code>, but you provide an <code>int</code>, the compiler will automatically convert to a <code>double</code> for you. That doesn't happen with <code>printf</code>, because the types of the arguments aren't specified in the function prototype - the compiler doesn't know that a conversion should be applied.</p>\n"}, {"comments": [{"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 1, "creation_date": 1469560820, "post_id": 38597778, "comment_id": 64584309, "body": "Are there any architectures that use registers for variadic functions, even among those that use them for normal functions? I thought that was the reason that variadic functions are required to be properly declared even though other functions [except those with float/short/char arguments] can be declared with <code>()</code>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 3, "creation_date": 1469561358, "post_id": 38597778, "comment_id": 64584608, "body": "@Random832 Nowadays, the only difference between a variadic and a normal function&#39;s calling convention is that there <i>may</i> be some extra data supplied to a variadic, such as a count of the true number of arguments supplied.  Otherwise everything goes in exactly the same place it would for a normal function.  See for instance section 3.2 of <a href=\"http://www.x86-64.org/documentation/abi.pdf\" rel=\"nofollow noreferrer\">x86-64.org/documentation/abi.pdf</a> , where the only special treatment for variadics is a hint passed in <code>AL</code>.  (Yes, this means the implementation of <code>va_arg</code> is much more complicated than it used to be.)"}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1469605005, "post_id": 38597778, "comment_id": 64600059, "body": "@Random832: I always thought the reason was that on some architectures functions with a known number and type of arguments could be implemented more efficiently, by using special instructions."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 0, "creation_date": 1469629259, "post_id": 38597778, "comment_id": 64617414, "body": "@celtschk You might be thinking of the &quot;register windows&quot; on SPARC and IA64, which were supposed to accelerate the common case of function calls with a <i>small number</i> of arguments (alas, in practice, they do just the opposite).  They don&#39;t require the compiler to treat variadic function calls specially, because the number of arguments <i>at any one call site</i> is always a compile-time constant, regardless of whether the callee is variadic."}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 0, "creation_date": 1469632598, "post_id": 38597778, "comment_id": 64619975, "body": "@zwol: No, I was thinking of the <code>ret n</code> instruction of the 8086, where <code>n</code> was a hard-coded integer, which therefore was not applicable for variadic functions. However I don&#39;t know if any C compiler actually took advantage of it (non-C compilers certainly did)."}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 0, "creation_date": 1469632925, "post_id": 38597778, "comment_id": 64620216, "body": "Err ... s/hard-coded/compile-time/ \u2014 the constant was given as part of the instruction itself."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 0, "creation_date": 1469643377, "post_id": 38597778, "comment_id": 64626504, "body": "@celtschk Oh, right, that.  If I remember correctly, the original 16-bit Windows compiler did use that, and the 32-bit compiler may have as well, ... but, in both cases, only for <code>__stdcall</code> functions, which (also IIRC) could not be variadic.  Callee-pops-arguments is a space win with a simple compiler, but with a smarter compiler it winds up being a net lose (look at the disassembly of what GCC does when you call several functions in a row, reusing some of the arguments)."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 58, "last_activity_date": 1469560842, "last_edit_date": 1469560842, "creation_date": 1469559226, "answer_id": 38597778, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38597778#38597778", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>First off, as touched on in several other answers but not, to my mind, spelled out clearly enough: It <em>does</em> work to provide an integer in <em>most</em> contexts where a library function takes a <code>double</code> or <code>float</code> argument.  The compiler will automatically insert a conversion.  For instance, <code>sqrt(0)</code> is well-defined and will behave exactly as <code>sqrt((double)0)</code>, and the same is true for any other integer-type expression used there.</p>\n\n<p><code>printf</code> is different.  It's different because it takes a variable number of arguments.  Its function prototype is</p>\n\n<pre><code>extern int printf(const char *fmt, ...);\n</code></pre>\n\n<p>Therefore, when you write</p>\n\n<pre><code>printf(message, 0);\n</code></pre>\n\n<p>the compiler does not have any information about what type <code>printf</code> <em>expects</em> that second argument to be.  It has only the type of the argument expression, which is <code>int</code>, to go by.  Therefore, unlike most library functions, it is on you, the programmer, to make sure the argument list matches the expectations of the format string.</p>\n\n<p>(Modern compilers <em>can</em> look into a format string and tell you that you've got a type mismatch, but they're not going to start inserting conversions to accomplish what you meant, because better your code should break now, when you'll notice, than years later when rebuilt with a less helpful compiler.)</p>\n\n<p>Now, the other half of the question was: Given that (int)0 and (float)0.0 are, on most modern systems, both represented as 32 bits all of which are zero, why doesn't it work anyway, by accident?  The C standard just says \"this isn't required to work, you're on your own\", but let me spell out the two most common reasons why it wouldn't work; that will probably help you understand <em>why</em> it's not required.</p>\n\n<p>First, for historical reasons, when you pass a <code>float</code> through a variable argument list it gets <em>promoted</em> to <code>double</code>, which, on most modern systems, is <em>64</em> bits wide.  So <code>printf(\"%f\", 0)</code> passes only 32 zero bits to a callee expecting 64 of them.</p>\n\n<p>The second, equally significant reason is that floating-point function arguments may be passed in a different <em>place</em> than integer arguments.  For instance, most CPUs have separate register files for integers and floating-point values, so it might be a rule that arguments 0 through 4 go in registers r0 through r4 if they are integers, but f0 through f4 if they are floating-point.  So <code>printf(\"%f\", 0)</code> looks in register f1 for that zero, but it's not there at all.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 12, "last_activity_date": 1469564832, "last_edit_date": 1469564832, "creation_date": 1469559401, "answer_id": 38597827, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38597827#38597827", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>Using a mis-matched <code>printf()</code> specifier <code>\"%f\"</code>and type <code>(int) 0</code> leads to undefined behavior.</p>\n\n<blockquote>\n  <p>If a conversion specification is invalid, the behavior is undefined. C11dr \u00a77.21.6.1 9</p>\n</blockquote>\n\n<p>Candidate causes of UB.</p>\n\n<ol>\n<li><p>It is UB per spec and the compile is ornery - 'nuf said.</p></li>\n<li><p><code>double</code> and <code>int</code> are of different sizes.  </p></li>\n<li><p><code>double</code> and <code>int</code> may pass their values using different stacks  (general vs. <a href=\"https://en.wikipedia.org/wiki/Floating-point_unit\">FPU</a> stack.)</p></li>\n<li><p>A <code>double 0.0</code> <em>might</em> not be defined by an all zero bit pattern. (rare)</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 4, "last_activity_date": 1469562836, "creation_date": 1469562836, "answer_id": 38598781, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38598781#38598781", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p><code>\"%f\\n\"</code> guarantees predictable result only when the second <code>printf()</code> parameter has type of <code>double</code>. Next, an extra arguments of variadic functions are subject of default argument promotion. Integer arguments fall under integer promotion, which never results in floating-point typed values. And <code>float</code> parameters are promoted to <code>double</code>.</p>\n\n<p>To top it off: standard allows the second argument to be or <code>float</code> or <code>double</code> and nothing else.</p>\n"}, {"tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": false, "score": 4, "last_activity_date": 1469603673, "creation_date": 1469603673, "answer_id": 38606192, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38606192#38606192", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>Why it is formally UB has now been discussed in several answers.</p>\n\n<p>The reason why you get specifically this behaviour is platform-dependent, but probably is the following:</p>\n\n<ul>\n<li><code>printf</code> expects its arguments according to standard vararg propagation. That means a <code>float</code> will be a <code>double</code> and anything smaller than an <code>int</code> will be an <code>int</code>.</li>\n<li>You are passing an <code>int</code> where the function expects a <code>double</code>. Your <code>int</code> is probably 32 bit, your <code>double</code> 64 bit. That means that the four stack bytes starting at the place where the argument is supposed to sit are <code>0</code>, but the following four bytes have arbitrary content. That's what is used for constructing the value which is displayed.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 3942165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8423a7e8fd00d04ff8c6146fdfece2?s=128&d=identicon&r=PG&f=1", "display_name": "wyrm", "link": "https://stackoverflow.com/users/3942165/wyrm"}, "is_accepted": false, "score": 10, "last_activity_date": 1469634398, "creation_date": 1469634398, "answer_id": 38617737, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38617737#38617737", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>This is one of those great opportunities to learn from your compiler warnings.</p>\n\n<pre><code>$ gcc -Wall -Wextra -pedantic fnord.c \nfnord.c: In function \u2018main\u2019:\nfnord.c:8:2: warning: format \u2018%f\u2019 expects argument of type \u2018double\u2019, but argument 2 has type \u2018int\u2019 [-Wformat=]\n  printf(\"%f\\n\",0);\n  ^\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ clang -Weverything -pedantic fnord.c \nfnord.c:8:16: warning: format specifies type 'double' but the argument has type 'int' [-Wformat]\n        printf(\"%f\\n\",0);\n                ~~    ^\n                %d\n1 warning generated.\n</code></pre>\n\n<p>So, <code>printf</code> is producing undefined behavior because you are passing it an incompatible type of argument.</p>\n"}, {"tags": [], "owner": {"reputation": 1696, "user_id": 3762855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091d4d0c3abe99847befd5ba66dbaa86?s=128&d=identicon&r=PG", "display_name": "Ciro Corvino", "link": "https://stackoverflow.com/users/3762855/ciro-corvino"}, "is_accepted": false, "score": 0, "last_activity_date": 1470250218, "last_edit_date": 1495542259, "creation_date": 1470221649, "answer_id": 38741563, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior/38741563#38741563", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>The main cause of this \"undetermined value\" issue stands in the cast of the pointer at the <code>int</code> value passed to the <code>printf</code> variable parameters section to a pointer at <code>double</code> types that <code>va_arg</code> macro carries out. </p>\n\n<p>This causes a referencing to a memory area that was not completely initialized with value passed as parameter to the printf, because <code>double</code> size memory buffer area is greater than <code>int</code> size. </p>\n\n<p>Therefore, when this pointer is dereferenced, it is returned an undetermined value, or better a \"value\" that contains in part the value passed as parameter to <code>printf</code>, and for the remaining part could came from another stack buffer area or even a code area (raising a memory fault exception),  <strong>a real buffer overflow</strong>.\n<br><br><br>\n<em>It can consider these specific portions of semplificated code implementations of \"printf\" and \"va_arg\"...</em>\n<br><br>\n<strong>printf</strong> </p>\n\n<pre><code>va_list arg;\n....\ncase('%f')\n      va_arg ( arg, double ); //va_arg is a macro, and so you can pass it the \"type\" that will be used for casting the int pointer argument of printf..\n.... \n</code></pre>\n\n<p><br></p>\n\n<blockquote>\n  <p><em>the real implementation in vprintf (considering gnu impl.) of double value parameters code case\n  management is:</em></p>\n\n<pre><code>if (__ldbl_is_dbl)\n{\n   args_value[cnt].pa_double = va_arg (ap_save, double);\n   ...\n}\n</code></pre>\n</blockquote>\n\n<p><br><br>\n<strong>va_arg</strong></p>\n\n<pre><code>char *p = (double *) &amp;arg + sizeof arg;  //printf parameters area pointer\n\ndouble i2 = *((double *)p); //casting to double because va_arg(arg, double)\n   p += sizeof (double);\n</code></pre>\n\n<p><br><br></p>\n\n<blockquote>\n  <p><strong><em>references</em></strong></p>\n</blockquote>\n\n<ol>\n<li><a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c;h=fc370e8cbc4e9652a2ed377b1c6f2324f15b1bf9;hb=3321010338384ecdc6633a8b032bb0ed6aa9b19a\" rel=\"nofollow noreferrer\">gnu project glibc implementation of \"printf\"(vprintf))</a></li>\n<li><a href=\"http://www.firmcodes.com/write-printf-function-c/\" rel=\"nofollow noreferrer\">example of semplification code of printf</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12371450/how-are-variable-arguments-implemented-in-gcc\">example of semplification code of va_arg</a></li>\n</ol>\n"}], "owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7486, "favorite_count": 11, "accepted_answer_id": 38597324, "answer_count": 10, "score": 87, "last_activity_date": 1580331122, "creation_date": 1469557390, "last_edit_date": 1513866413, "question_id": 38597274, "link": "https://stackoverflow.com/questions/38597274/why-does-printff-0-give-undefined-behavior", "title": "Why does printf(&quot;%f&quot;,0); give undefined behavior?", "body": "<p>The statement</p>\n\n<pre><code>printf(\"%f\\n\",0.0f);\n</code></pre>\n\n<p>prints 0.</p>\n\n<p>However, the statement</p>\n\n<pre><code>printf(\"%f\\n\",0);\n</code></pre>\n\n<p>prints random values.  </p>\n\n<p>I realize I'm exhibiting some kind of undefined behaviour, but I can't figure out why specifically.  </p>\n\n<p>A floating point value in which all the bits are 0 is still a valid <code>float</code> with value of 0.<br>\n<code>float</code> and <code>int</code> are the same size on my machine (if that is even relevant).  </p>\n\n<p>Why does using an integer literal instead of a floating point literal in <code>printf</code> cause this behavior?</p>\n\n<p>P.S. the same behaviour can be seen if I use</p>\n\n<pre><code>int i = 0;\nprintf(\"%f\\n\", i);\n</code></pre>\n"}]