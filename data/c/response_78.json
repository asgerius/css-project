[{"tags": ["c", "mutex", "semaphore", "consumer", "producer"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1467850924, "post_id": 38235576, "comment_id": 63893210, "body": "What output are you expecting?"}, {"owner": {"reputation": 11, "user_id": 6558407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957a68ff42e74224d8703dd5a9dd3a6f?s=128&d=identicon&r=PG&f=1", "display_name": "nojames", "link": "https://stackoverflow.com/users/6558407/nojames"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1467851312, "post_id": 38235576, "comment_id": 63893302, "body": "Ahh my mistake, the Expected output is for the numbers to increment starting from the 4 parameter taken in at the start       producer 12323112 produced 7        producer 12312310 produced 8        consumer 1321312 consumed 7      producer ...9        consumer ..... consumed 8`"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1467851696, "post_id": 38235576, "comment_id": 63893396, "body": "As is, each (producer) thread starts with its own <code>item</code> variable, initialised to <code>START_NUMBER</code>.  Since they each use and increment their own local copy, you&#39;ll get as many copies of each number as you have producers... displayed twice each, once when produced and once when consumed -- so eight times for four producer threads."}, {"owner": {"reputation": 11, "user_id": 6558407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957a68ff42e74224d8703dd5a9dd3a6f?s=128&d=identicon&r=PG&f=1", "display_name": "nojames", "link": "https://stackoverflow.com/users/6558407/nojames"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1467851726, "post_id": 38235576, "comment_id": 63893402, "body": "Sorry for the poor formatting, i am almost brand new to this site, basically what it would say is.... produced 7  newline produced 8 newline consumed 7 newline produced 9 newline consumed 8 newline..... and then loop infinitely"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1467852017, "post_id": 38235576, "comment_id": 63893464, "body": "If you don&#39;t want the repeats, maybe the producers should use a global variable as a counter instead of their own local <code>item</code> variables."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6558407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957a68ff42e74224d8703dd5a9dd3a6f?s=128&d=identicon&r=PG&f=1", "display_name": "nojames", "link": "https://stackoverflow.com/users/6558407/nojames"}, "is_accepted": true, "score": 1, "last_activity_date": 1467853940, "creation_date": 1467853940, "answer_id": 38236216, "question_id": 38235576, "link": "https://stackoverflow.com/questions/38235576/not-able-to-get-mutex-locks-to-prevent-threads-from-accessing-a-function/38236216#38236216", "title": "Not able to get mutex locks to prevent threads from accessing a function", "body": "<p>Thanks for the help Dmitri, after moving around the lines you told me about and some discussion with one of my friends I finally got it to start outputting the right numbers!</p>\n\n<p><a href=\"http://i.stack.imgur.com/ZN4Se.png\" rel=\"nofollow\">This is the output i have been looking for</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\ntypedef int buffer_item;\n#define BUFFER_SIZE 5\n#define TRUE 1\n\n\nbuffer_item START_NUMBER;\nbuffer_item item; \nint counter;\nint insert_item(buffer_item item);\nint remove_item(buffer_item *item);  \nbuffer_item buffer[BUFFER_SIZE];\nvoid* producer(void *ptr);\nvoid* consumer(void *ptr);  \npthread_cond_t condc, condp;\npthread_mutex_t mutex;\nint sleepTime, producerThreads, consumerThreads, a, item;\npthread_attr_t attr;\nsem_t full, empty;\n\nint insert_item(buffer_item item)\n{\n   if(counter &lt; BUFFER_SIZE) {\n      buffer[counter] = item;\n      counter++;\n      return 0;\n   }\n   else { \n      return -1;\n   }\n}\nint remove_item(buffer_item *item)\n{\n   if(counter &gt; 0) {\n      *item = buffer[(counter-1)];\n      printf(\"consumer%u consumed %d\\n\", (unsigned int)pthread_self(),buffer[counter-1]);\n      counter--;\n      return 0;\n   }\n   else { \n      return -1;\n   }\n}\n\nvoid* producer(void *ptr) {     \n   while(TRUE) {\n      sleep(sleepTime);     \n      sem_wait(&amp;empty);\n      pthread_mutex_lock(&amp;mutex);    \n      if(insert_item(START_NUMBER)) {\n         fprintf(stderr, \"error \\n\");\n      }\n      else {\n        printf(\"producer%u produced %d\\n\", (unsigned int)pthread_self(),START_NUMBER);\n        START_NUMBER++;\n      }     \n      pthread_mutex_unlock(&amp;mutex);\n      sem_post(&amp;full);\n  }\n }\n\nvoid* consumer(void *ptr) {\n   while(TRUE) {\n      sleep(sleepTime);\n      sem_wait(&amp;full);\n      pthread_mutex_lock(&amp;mutex);\n      if(remove_item(&amp;item)) {\n         fprintf(stderr, \"error \\n\");\n      }\n      else {\n        // printf(\"consumer%u consumed %d\\n\", (unsigned int)pthread_self(),&amp;START_NUMBER);\n      }\n      pthread_mutex_unlock(&amp;mutex);\n      sem_post(&amp;empty);\n\n   }\n}\nvoid initializeData() {\n   pthread_mutex_init(&amp;mutex, NULL);\n   sem_init(&amp;full, 0, 0);\n    sem_init(&amp;empty, 0, BUFFER_SIZE);\n   pthread_attr_init(&amp;attr);\n   counter = 0;\n}\n\nint main(int argc, char **argv) {\n\n    sleepTime = atoi(argv[1]);\n    producerThreads = atoi(argv[2]);\n    consumerThreads = atoi(argv[3]);\n    START_NUMBER = atoi(argv[4]);\n    item = START_NUMBER;\n    initializeData();\n    pthread_t pro, con;\n\n\n    pthread_mutex_init(&amp;mutex, NULL);\n    pthread_cond_init(&amp;condc, NULL); \n    pthread_cond_init(&amp;condp, NULL); \n\n   for(a=0; a&lt; consumerThreads;a++)\n    pthread_create(&amp;con, NULL, consumer, NULL);\n    for(a=0;a&lt;producerThreads;a++)\n    pthread_create(&amp;pro, NULL, producer, NULL);\n\n\n    pthread_join(con, NULL);\n    pthread_join(pro, NULL);\n\n\n    pthread_mutex_destroy(&amp;mutex); \n    pthread_cond_destroy(&amp;condc); \n    pthread_cond_destroy(&amp;condp); \n    sleep(sleepTime);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6558407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957a68ff42e74224d8703dd5a9dd3a6f?s=128&d=identicon&r=PG&f=1", "display_name": "nojames", "link": "https://stackoverflow.com/users/6558407/nojames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 38236216, "answer_count": 1, "score": 0, "last_activity_date": 1467853940, "creation_date": 1467848766, "question_id": 38235576, "link": "https://stackoverflow.com/questions/38235576/not-able-to-get-mutex-locks-to-prevent-threads-from-accessing-a-function", "title": "Not able to get mutex locks to prevent threads from accessing a function", "body": "<p>Working on the Producer and Consumer problem for a class and having trouble just putting on the final touches. The problem I am encountering is that i think my mutex locks are not locking my threads out of the function. For example if I run the program and pass it the parameters 2 4 4 7 it would print 8 7's and then 2 seconds later it will print 8 8's and then 8 9's and so on. I have tried using trylock and moving around the semaphores but to no avail. Is there something that I am missing when that is causing none of the threads to be locked out?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\ntypedef int buffer_item;\n#define BUFFER_SIZE 5\n#define TRUE 1\n\n\nbuffer_item START_NUMBER;\nint counter;\nint insert_item(buffer_item item);\nint remove_item(buffer_item *item);  \nbuffer_item buffer[BUFFER_SIZE];\nvoid* producer(void *ptr);\nvoid* consumer(void *ptr);  \npthread_cond_t condc, condp;\npthread_mutex_t mutex;\nint sleepTime, producerThreads, consumerThreads,a;\npthread_attr_t attr;\nsem_t full, empty;\n\nint insert_item(buffer_item item)\n{\n   if(counter &lt; BUFFER_SIZE) {\n      buffer[counter] = item;\n      counter++;\n      return 0;\n   }\n   else { \n      return -1;\n   }\n}\nint remove_item(buffer_item *item)\n{\n   if(counter &gt; 0) {\n      *item = buffer[(counter-1)];\n      counter--;\n      return 0;\n   }\n   else { \n      return -1;\n   }\n}\n\nvoid* producer(void *ptr) {\n     buffer_item item;\n     item = START_NUMBER;\n   while(TRUE) {\n      sleep(sleepTime);     \n      sem_wait(&amp;empty);\n      pthread_mutex_lock(&amp;mutex);    \n      if(insert_item(item)) {\n         fprintf(stderr, \"error \\n\");\n      }\n      else {\n         printf(\"producer%u produced %d\\n\", (unsigned int)pthread_self(),item);\n         item++;\n      }     \n      pthread_mutex_unlock(&amp;mutex);\n      sem_post(&amp;full);\n   }\n        }\nvoid* consumer(void *ptr) {\n   buffer_item item;\n   while(TRUE) {\n      sleep(sleepTime);\n      sem_wait(&amp;full);\n      pthread_mutex_lock(&amp;mutex);\n      if(remove_item(&amp;item)) {\n         fprintf(stderr, \"error \\n\");\n      }\n      else {\n         printf(\"consumer%u consumed %d\\n\", (unsigned int)pthread_self(),item);\n      }\n      pthread_mutex_unlock(&amp;mutex);\n      sem_post(&amp;empty);\n\n   }\n}\nvoid initializeData() {\n   pthread_mutex_init(&amp;mutex, NULL);\n   sem_init(&amp;full, 0, 0);\n    sem_init(&amp;empty, 0, BUFFER_SIZE);\n   pthread_attr_init(&amp;attr);\n   counter = 0;\n}\n\nint main(int argc, char **argv) {\n\n    sleepTime = atoi(argv[1]);\n    producerThreads = atoi(argv[2]);\n    consumerThreads = atoi(argv[3]);\n    START_NUMBER = atoi(argv[4]);\n    initializeData();\n    pthread_t pro, con;\n\n\n    pthread_mutex_init(&amp;mutex, NULL);\n    pthread_cond_init(&amp;condc, NULL); \n    pthread_cond_init(&amp;condp, NULL); \n\n   for(a=0; a&lt; consumerThreads;a++)\n    pthread_create(&amp;con, NULL, consumer, NULL);\n    for(a=0;a&lt;producerThreads;a++)\n    pthread_create(&amp;pro, NULL, producer, NULL);\n\n\n    pthread_join(con, NULL);\n    pthread_join(pro, NULL);\n\n\n    pthread_mutex_destroy(&amp;mutex); \n    pthread_cond_destroy(&amp;condc); \n    pthread_cond_destroy(&amp;condp); \n    sleep(sleepTime);\n\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1467847911, "post_id": 38235424, "comment_id": 63892399, "body": "I don&#39;t see a <code>LList_init</code> function. And if there is no such function, then I&#39;d need to see a <code>main</code> function. See <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467848457, "post_id": 38235424, "comment_id": 63892557, "body": "top node is <code>list-&gt;next</code> (<code>node-&gt;next=list-&gt;next;  list-&gt;next=node;</code>) at <code>LList_push_front</code> but <code>list</code>  (<code>temp=list;         if(temp!=NULL){         while(temp!=NULL){           printf(&quot;%d,%d&quot;,temp-&gt;data-&gt;x...</code> at <code>LList_print</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467848698, "post_id": 38235424, "comment_id": 63892618, "body": "at <code>LList_print</code> : <code>while(temp!=NULL) { ... temp=temp-&gt;next;}         temp-&gt;next = (struct LList *)malloc(sizeof(struct LList));</code> &lt;- <code>temp-&gt;next</code> is <code>NULL-&gt;next</code>."}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 0, "creation_date": 1467850222, "post_id": 38235424, "comment_id": 63893044, "body": "try this: <code>node-&gt;data = (struct LList_data *)malloc(sizeof(struct LList_data));</code> before you start using data."}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 0, "creation_date": 1467850549, "post_id": 38235424, "comment_id": 63893113, "body": "Also, <code>node-&gt;data = data;</code> is not valid. you are dereferencing the data member of node, which is a STRUCT LLIST and then assigning a variable of type STRUCT LLIST * to it. The correct syntax if you want to go that route should be <code>node.data=data</code>"}, {"owner": {"reputation": 395, "user_id": 6505628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84aae402113911f642697ec19a65f924?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowfen", "link": "https://stackoverflow.com/users/6505628/shadowfen"}, "edited": false, "score": 0, "creation_date": 1467851599, "post_id": 38235424, "comment_id": 63893369, "body": "Since you don&#39;t include the code where the list gets created, I can only guess that when you create the list - you might not be initializing list-&gt;next to NULL before the first item is added to it."}, {"owner": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "edited": false, "score": 0, "creation_date": 1467853762, "post_id": 38235424, "comment_id": 63893849, "body": "Oh man, I forgot to add the list create function"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1467858751, "post_id": 38235424, "comment_id": 63894925, "body": "bad menu system.  <code>void menu(void){ \tchar choice; \tstruct LList * list; list = LList_create();</code> : create list each call <code>menu()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "edited": false, "score": 0, "creation_date": 1467863232, "post_id": 38237072, "comment_id": 63895739, "body": "Thank you for your time, I really appreciate this. This was our first assignment with pointers and data structures and I was very lost."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "edited": false, "score": 0, "creation_date": 1467865182, "post_id": 38237072, "comment_id": 63896105, "body": "You&#39;re welcome. I sensed that. Also, you had made an honest effort [and your code wasn&#39;t <i>that</i> bad overall]. You just &quot;got stuck&quot;--it happens to a lot of OPs here sometimes. IMO, people learn more from seeing the &quot;whole solution&quot; vs. just doling out &quot;hints&quot; in a game of &quot;whack-a-mole&quot; (e.g. &quot;try this&quot;, &quot;now try this&quot;, etc.). Also, merely listing suggestions for fixes would have taken more effort (and <i>verbiage</i>) than just fixing things. IMO, <i>analyzing</i> working source code is the best teacher--it&#39;s how I learned."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 0, "last_activity_date": 1467861507, "creation_date": 1467861507, "answer_id": 38237072, "question_id": 38235424, "link": "https://stackoverflow.com/questions/38235424/segmentation-fault-with-linked-list-c/38237072#38237072", "title": "Segmentation Fault with Linked List C", "body": "<p>A few things ...</p>\n\n<p>Recursively calling <code>menu</code> from the sub-functions (e.g. <code>p</code>) is not a good thing. Much better to loop on <code>menu</code> in <code>main</code></p>\n\n<p>The print function was adding new elements?!</p>\n\n<p>The find function just returned 0/1 but never returned a pointer to the \"found\" element.</p>\n\n<p>I've annotated and fixed [most of] the bugs. When I did so (where possible), I left your original code in an <code>#if 0</code> and the corrected code in the corresponding <code>#else</code> section. The annotations have more detail about what some of the problems were. I hope that comparing the original and modified code will be instructive.</p>\n\n<p>I had to change some of the linked list function arguments/return values so that they made sense.</p>\n\n<p>Anyway, here's the code, which I merged into a single file for simplicity [please pardon the gratuitous style cleanup]:</p>\n\n<pre><code>//#include \"llist.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct LList_data {\n    int x;\n    int y;\n};\n\nstruct LList {\n    struct LList_data *data;\n    // data=(struct LList_data *)malloc(sizeof(struct LList_data));\n    struct LList *next;\n};\n\nstruct LList *\nLList_create()\n{\n    struct LList *list;\n\n    list = (struct LList *) malloc(sizeof(struct LList));\n    list-&gt;next = NULL;\n\n    return list;\n}\n\nvoid\nLList_push_front(struct LList *list, struct LList_data newdata)\n{\n    struct LList *node;\n    struct LList_data *data;\n\n#if 0\n    node = (struct LList *) malloc(sizeof(struct LList));\n    data = (struct LList_data *) malloc(sizeof(struct LList_data));\n#else\n    node = malloc(sizeof(*node));\n    data = malloc(sizeof(*data));\n#endif\n\n    node-&gt;data = data;\n\n    node-&gt;data-&gt;x = newdata.x;\n    node-&gt;data-&gt;y = newdata.y;\n\n    node-&gt;next = list-&gt;next;\n    list-&gt;next = node;\n\n    return;\n}\n\n#if 0\nint\nLList_find(struct LList *list, int x, struct LList_data *data)\n{\n    struct LList *node;\n\n    // if(list == NULL)\n    // printf(\"list empty\");\n    // if(!list-&gt;next==NULL)\n    // printf(\"list next empty\");\n\n    // NOTE/BUG: this entire function is just to _find_ a node [to be used by\n    // other functions], so it should _not_ try to change anything\n\n    for (node = list-&gt;next; node != NULL; node = node-&gt;next) {\n        // NOTE/BUG: this replaces node-&gt;data without freeing it first (i.e.\n        // this is a memory leak)\n        if (x == node-&gt;data-&gt;x) {\n            node-&gt;data = data;\n            return 1;\n        }\n    }\n\n    return 0;\n}\n\n#else\nstruct LList_data *\nLList_find(struct LList *list, int x)\n{\n    struct LList *node;\n    struct LList_data *data;\n\n    data = NULL;\n    for (node = list-&gt;next; node != NULL; node = node-&gt;next) {\n        if (x == node-&gt;data-&gt;x) {\n            data = node-&gt;data;\n            break;\n        }\n    }\n\n    return data;\n}\n#endif\n\nint\nLList_update(struct LList *list, struct LList_data newData)\n{\n    struct LList *node;\n\n    node = list-&gt;next;\n    while (node) {\n        // NOTE/BUG: newData is on the _stack_ and when this function returns\n        // newData will go out of scope (i.e. node-&gt;data will become invalid)\n#if 0\n        if (node-&gt;data-&gt;x == newData.x) {\n            node-&gt;data = &amp;newData;\n            return 1;\n        }\n#else\n        // NOTE/FIX: reuse the existing data cell and populate with new data\n        if (node-&gt;data-&gt;x == newData.x) {\n            *node-&gt;data = newData;\n            return 1;\n        }\n#endif\n        node = node-&gt;next;\n    }\n    return 0;\n}\n\nint\nLList_remove(struct LList *list, /*-int x,-*/ struct LList_data *data)\n{\n    struct LList *node;\n    struct LList *next;\n    struct LList *prev;\n\n    prev = NULL;\n\n    // NOTE: passing \"x\" really not required since \"data\" points to the node\n    // to be removed\n\n    for (node = list-&gt;next;  node != NULL;  node = next) {\n        next = node-&gt;next;\n        if (node-&gt;data == data)\n            break;\n        prev = node;\n    }\n\n    if (node != NULL) {\n        if (prev != NULL)\n            prev-&gt;next = next;\n        else\n            list-&gt;next = next;\n        free(node-&gt;data);\n        free(node);\n    }\n}\n\nvoid\nLList_destroy(struct LList *list)\n{\n    struct LList *temp = list-&gt;next;\n    struct LList *next;\n\n#if 0\n    // NOTE/BUG: this does _not_ free the data associated with each list\n    // element (i.e. a memory leak)\n    while (temp) {\n        next = temp-&gt;next;\n        free(temp);\n        temp = next;\n    }\n#else\n    while (temp) {\n        next = temp-&gt;next;\n\n        free(temp-&gt;data);\n        free(temp);\n\n        temp = next;\n    }\n#endif\n\n    free(list);\n}\n\nvoid\nLList_print(struct LList *list)\n{\n    struct LList *temp;\n\n    // NOTE/BUG: a list print function has no need to add to or change the\n    // list\n#if 0\n    temp = list;\n    if (temp != NULL) {\n        while (temp != NULL) {\n            printf(\"%d,%d\", temp-&gt;data-&gt;x, temp-&gt;data-&gt;y);\n            temp = temp-&gt;next;\n        }\n        temp-&gt;next = (struct LList *) malloc(sizeof(struct LList));\n        temp-&gt;next = NULL;\n    }\n#else\n    for (temp = list-&gt;next;  temp != NULL;  temp = temp-&gt;next)\n        printf(\"%d,%d\\n\", temp-&gt;data-&gt;x, temp-&gt;data-&gt;y);\n#endif\n}\n\nvoid menu(void);\nvoid a(struct LList *list);\nstruct LList *c(struct LList *list);\nvoid f(struct LList *list);\nvoid r(struct LList *list);\nvoid p(struct LList *list);\n\nstruct LList *mainlist;\n\nint\nmain()\n{\n\n    mainlist = LList_create();\n\n    while (1) {\n        menu();\n    }\n\n    return 0;\n}\n\nvoid\nmenu(void)\n{\n    struct LList *list;\n    char choice;\n\n    list = mainlist;\n\n    printf(\"a -- a new element\\n\");\n    printf(\"c -- recreate empty list\\n\");\n    printf(\"f -- find list element and increment\\n\");\n    printf(\"r -- remove element from list\\n\");\n    printf(\"p -- print list\\n\");\n    printf(\"menu&gt; \");\n    fflush(stdout);\n\n    scanf(\" %c\", &amp;choice);\n\n    switch (choice) {\n    case 'a':\n    case 'A':\n        a(list);\n        break;\n\n    case 'C':\n    case 'c':\n        mainlist = c(list);\n        //return;\n        break;\n\n    case 'f':\n    case 'F':\n        f(list);\n        //return;\n        break;\n\n    case 'r':\n    case 'R':\n        r(list);\n        //return;\n        break;\n\n    case 'p':\n    case 'P':\n        p(list);\n        //return;\n        break;\n\n    default:\n        fprintf(stderr, \"Invalid choice \\n\");\n#if 0\n        menu();\n        return;\n#endif\n        break;\n    }\n}\n\nvoid\na(struct LList *list)\n{\n    int x;\n    struct LList_data data;\n\n    printf(\" Enter value to add: \");\n    fflush(stdout);\n    scanf(\" %d\", &amp;x);\n\n    data.x = x;\n    data.y = 0;\n\n    LList_push_front(list, data);\n\n    printf(\"%d,%d \\n\", data.x, data.y);\n\n#if 0\n    menu();\n    return;\n#endif\n}\n\nstruct LList *\nc(struct LList *list)\n{\n\n    LList_destroy(list);\n\n    // NOTE/BUG: \"list\" goes out of scope, so recreating it here has no useful\n    // effect without returning the value\n    list = LList_create();\n\n#if 0\n    menu();\n    return;\n#endif\n\n    return list;\n}\n\nvoid\nf(struct LList *list)\n{\n    int x;\n\n    struct LList_data *data;\n\n    data = NULL;\n\n    printf(\" Enter value to find/increment: \");\n    fflush(stdout);\n    scanf(\" %d\", &amp;x);\n\n    data = LList_find(list, x);\n    if (data != NULL) {\n        data-&gt;y += 1;\n        printf(\"%d,%d\\n\", data-&gt;x, data-&gt;y);\n    }\n\n#if 0\n    menu();\n    return;\n#endif\n}\n\nvoid\nr(struct LList *list)\n{\n    int x;\n    struct LList_data *data;\n\n    printf(\" Enter value to remove: \");\n    fflush(stdout);\n    scanf(\" %d\", &amp;x);\n\n    data = NULL;\n\n    // NOTE/BUG: \"data\" will always be null because LList_find never set it\n    // to anything\n#if 0\n    LList_find(list, x, data);\n    printf(\"%d,%d\\n\", data-&gt;x, data-&gt;y);\n#else\n    data = LList_find(list, x);\n    if (data != NULL) {\n        printf(\"%d,%d\\n\", data-&gt;x, data-&gt;y);\n        LList_remove(list, data);\n    }\n#endif\n\n#if 0\n    menu();\n    return;\n#endif\n}\n\nvoid\np(struct LList *list)\n{\n    LList_print(list);\n\n#if 0\n    menu();\n    return;\n#endif\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 38237072, "answer_count": 1, "score": 1, "last_activity_date": 1467861507, "creation_date": 1467847759, "last_edit_date": 1467855540, "question_id": 38235424, "link": "https://stackoverflow.com/questions/38235424/segmentation-fault-with-linked-list-c", "title": "Segmentation Fault with Linked List C", "body": "<p>I am creating a linked list for a class but I keep getting segmentation faults when searching and printing. I think it has to do with the data struct not getting malloced correctly but I've tried many things and I get the same error. Any help would be great</p>\n\n<pre><code>    struct LList_data {\n        int x;\n        int y;\n    }\n\n    struct LList {\n        struct LList_data * data;\n        // data=(struct LList_data *)malloc(sizeof(struct LList_data));\n        struct LList * next;\n    }\n\nstruct LList * LList_create()\n{\n        struct LList * list;\n        list = (struct LList *)malloc(sizeof(struct LList));\n        list-&gt;next = NULL;\n        return list;\n}\n    void LList_push_front(struct LList * list, struct LList_data newdata)\n    {\n        struct LList * node;\n        struct LList_data * data;\n        node = (struct LList *)malloc(sizeof(struct LList));\n        data = (struct LList_data *)malloc(sizeof(struct LList_data));\n\n        node-&gt;data = data;\n\n        node-&gt;data-&gt;x = newdata.x;\n        node-&gt;data-&gt;y = newdata.y;\n\n        node-&gt;next=list-&gt;next;\n        list-&gt;next=node;\n        return;\n    }\n\n    int LList_find(struct LList * list, int x, struct LList_data * data)\n    {\n            struct LList * node;\n\n    //      if(list == NULL)\n    //      printf(\"list empty\");\n    //      if(!list-&gt;next==NULL)\n    //      printf(\"list next empty\");\n\n            for(node=list-&gt;next; node!= NULL; node=node-&gt;next){\n              if(x == node-&gt;data-&gt;x){\n                node-&gt;data=data;\n                return 1;\n                }\n            }\n\n            return 0;\n    }\n\n    int LList_update(struct LList * list, struct LList_data newData)\n    {\n            struct LList * node;\n\n            node = list-&gt;next;\n            while(node)\n            {\n              if(node-&gt;data-&gt;x == newData.x)\n              {\n              node-&gt;data = &amp;newData;\n              return 1;\n              }\n              node=node-&gt;next;\n            }\n            return 0;\n    }\n\n    int LList_remove(struct LList * list, int x, struct LList_data * data)\n    {\n            struct LList * node;\n            struct LList * prev;\n            node = list-&gt;next;\n\n            while(node)\n            {\n              prev = node;\n              node = node-&gt;next;\n            }\n            if(node == NULL)\n              return 0;\n\n            prev-&gt;next = node-&gt;next;\n            return 1;\n    }\n\n    void LList_destroy(struct LList * list)\n    {\n            struct LList * temp = list-&gt;next;\n            struct LList * next;\n\n            while(temp)\n            {\n              next = temp-&gt;next;\n              free(temp);\n              temp = next;\n            }\n            free(list);\n    }\n\n    void LList_print(struct LList * list)\n    {\n            struct LList * temp;\n            temp=list;\n            if(temp!=NULL){\n            while(temp!=NULL)\n              {\n              printf(\"%d,%d\",temp-&gt;data-&gt;x, temp-&gt;data-&gt;y);\n              temp=temp-&gt;next;\n              }\n            temp-&gt;next = (struct LList *)malloc(sizeof(struct LList));\n            temp-&gt;next = NULL;\n            }\n    }\n</code></pre>\n\n<p>And here is what uses the list</p>\n\n<pre><code>#include\"llist.h\"\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid menu();\nvoid a(struct LList * list);\nvoid c(struct LList * list);\nvoid f(struct LList * list);\nvoid r(struct LList * list);\nvoid p(struct LList * list);\n\nint main(){\n        menu();\n        return 0;\n}\n\n\nvoid menu()\n{\n        char choice;\n        struct LList * list;\n\n        list = LList_create();\n\n        scanf(\" %c\", &amp;choice);\n\n        switch(choice){\n          case 'a':\n          case 'A':\n                a(list);\n                break;\n          case 'C':\n          case 'c':\n                c(list);\n                return;\n                break;\n          case 'f':\n          case 'F':\n                f(list);\n                return;\n                break;\n          case 'r':\n          case 'R':\n                r(list);\n                return;\n                break;\n          case 'p':\n          case 'P':\n                p(list);\n                return;\n                break;\n          default:\n                fprintf(stderr, \"Invalid choice \\n\");\n                menu();\n                return;\n        }\n}\n\nvoid a(struct LList * list)\n{\n        int x;\n        struct LList_data data;\n\n        scanf(\" %d\", &amp;x);\n        data.x = x;\n        data.y = 0;\n\n        LList_push_front(list,data);\n\n        printf(\"%d,%d \\n\", data.x,data.y);\n\n        menu();\n        return;\n}\nvoid c(struct LList * list)\n{\n        LList_destroy(list);\n        list =  LList_create();\n\n        menu();\n        return;\n\n}\n\nvoid f(struct LList * list)\n{\n        int x;\n\n        struct LList_data * data;\n        data=NULL;\n\n        scanf(\" %d\", &amp;x);\n\n        LList_find(list, x, data);\n\n        data-&gt;y += 1;\n\n        printf(\"%d,%d\", data-&gt;x,data-&gt;y);\n\n        menu();\n        return;\n}\n\nvoid r(struct LList * list)\n{\n        int x;\n        struct LList_data * data;\n        scanf(\" %d\", &amp;x);\n\n        data=NULL;\n\n        LList_find(list, x, data);\n\n        printf(\"%d,%d\", data-&gt;x,data-&gt;y);\n\n        LList_remove(list, x, data);\n\n        menu();\n       return;\n}\nvoid p(struct LList * list)\n{\n        LList_print(list);\n\n        menu();\n        return;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1467846806, "post_id": 38235228, "comment_id": 63892093, "body": "So you wounder why <b>undefined behaviour</b> behaves - well - undefined. VTC because of &quot;no problem at all&quot;"}, {"owner": {"reputation": 141, "user_id": 3726788, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/EX7s7.jpg?s=128&g=1", "display_name": "BMAC", "link": "https://stackoverflow.com/users/3726788/bmac"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1467858045, "post_id": 38235228, "comment_id": 63894773, "body": "Not really sure what you&#39;re saying. This isn&#39;t my C code. I think most exploitDB exploits are verified before they are let on to the site. If this is undefined it would imply the code is unfinished."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1467863271, "post_id": 38235228, "comment_id": 63895747, "body": "You should learn what &quot;undefined behaviour&quot; means. Don&#39;t try expert coding without knowing what that is!"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 3726788, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/EX7s7.jpg?s=128&g=1", "display_name": "BMAC", "link": "https://stackoverflow.com/users/3726788/bmac"}, "edited": false, "score": 0, "creation_date": 1467847771, "post_id": 38235329, "comment_id": 63892375, "body": "when I try this I get several other errors: 4.4.0-kali1-common/include In file included from /usr/src/linux-headers-4.4.0-kali1-common/include/uapi/asm-g&zwnj;&#8203;eneric/signal.h:4:0,                  from /usr/src/linux-headers-4.4.0-kali1-common/include/asm-generi&zwnj;&#8203;c/signal.h:4,                  from 10613.c:8:"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1467863330, "post_id": 38235329, "comment_id": 63895764, "body": "This is more a comment than an answer."}, {"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "edited": false, "score": 0, "creation_date": 1467924900, "post_id": 38235329, "comment_id": 63931311, "body": "It is more a comment, but as it addressed at the time what was the stated problem OP had, it was the best answer that could have been possible under the circumstances."}], "tags": [], "owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "is_accepted": false, "score": -2, "last_activity_date": 1467847066, "last_edit_date": 1495535332, "creation_date": 1467847066, "answer_id": 38235329, "question_id": 38235228, "link": "https://stackoverflow.com/questions/38235228/having-issues-compiling-an-exploit-using-gcc/38235329#38235329", "title": "Having issues compiling an exploit using GCC", "body": "<p>Please give a usable and compilable example: <a href=\"https://stackoverflow.com/help/mcve\">https://stackoverflow.com/help/mcve</a></p>\n\n<p>Based on the errors, it looks like <code>-I/usr/src/linux-headers-4.4.0-kali1-common/include/uapi/linux/</code> should actually probably be <code>-I/usr/src/linux-headers-4.4.0-kali1-common/include</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 3726788, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/EX7s7.jpg?s=128&g=1", "display_name": "BMAC", "link": "https://stackoverflow.com/users/3726788/bmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467847224, "creation_date": 1467846486, "last_edit_date": 1467847224, "question_id": 38235228, "link": "https://stackoverflow.com/questions/38235228/having-issues-compiling-an-exploit-using-gcc", "title": "Having issues compiling an exploit using GCC", "body": "<p>I was trying to compile a C exploit for a security class I'm in and was struggling to get GCC to perform. The issue is that my /usr/include folder is missing folders that GCC is looking for to handle the includes of the file. The first error below describes a folder that doesn't exist. </p>\n\n<blockquote>\n  <p>asm/page.h: No such file or directory</p>\n</blockquote>\n\n<p>What I've tried so far:</p>\n\n<ol>\n<li>Symlink it with my /usr/src/linux-headers-4.4.0-kali1-common/include/* folders, but files within that folder start throwing errors that they in turn can't find other files.</li>\n<li>Using GCC's -I parameter to manually specify each folder to look in for my includes but this also doesn't work. (Below)</li>\n</ol>\n\n<blockquote>\n  <p>gcc 10613.c -o workdamnit-I/usr/src/linux-headers-4.4.0-kali1-common/include/asm-generic/  -I/usr/src/linux-headers-4.4.0-kali1-common/include/linux/ -I/usr/src/linux-headers-4.4.0-kali1-common/include/uapi/asm-generic/ -I/usr/src/linux-headers-4.4.0-kali1-common/include/uapi/linux/</p>\n  \n  <p>ERROR: In file included from /usr/include/stdio.h:33:0,\n                   from 10613.c:2:\n  /usr/src/linux-headers-4.4.0-kali1-common/include/linux/stddef.h:4:31: fatal error: uapi/linux/stddef.h: No such file or directory\n  compilation terminated.</p>\n</blockquote>\n\n<ol start=\"3\">\n<li><p>I updated the import statement to use page.h from my kali linux common headers. When I tried to run this, I received the below error:</p>\n\n<blockquote>\n  <p>'PAGE_SIZE' undeclared (first use in this function). </p>\n</blockquote></li>\n<li><p>Lastly, I tried to compile with wine gcc but this particular exploit uses a socket library that I guess can't be compiled on a windows machine. </p></li>\n</ol>\n\n<p>GCC version: 5.3.1\nLink to exploit: <a href=\"https://www.exploit-db.com/exploits/10613/\" rel=\"nofollow\">https://www.exploit-db.com/exploits/10613/</a></p>\n\n<p>My knowledge of C and its compilation requirements is very limited. Any assistance would be greatly appreciated.</p>\n"}, {"tags": ["c", "linux", "debian", "dbus", "beagleboneblack"], "comments": [{"owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "edited": false, "score": 0, "creation_date": 1467890057, "post_id": 38235134, "comment_id": 63908913, "body": "Did you check if there are any signals sent by wpa_supplicant at all? You could check with dbus-monitor. You could also check if your add_match calls are correct that way."}], "owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1467845852, "creation_date": 1467845852, "last_edit_date": 1495542155, "question_id": 38235134, "link": "https://stackoverflow.com/questions/38235134/d-bus-in-beaglebone-black", "title": "D-BUS in BeagleBone Black", "body": "<p><strong>My goal</strong>: Is to monitor the state of my network interface (mainly wireless) from my firmware (in C) by monitoring the wpa_supplicant through the D-Bus interfaces. <em>I would like to stick with C and low-level API of D-bus.</em> </p>\n\n<h1>What I have so far</h1>\n\n<ol>\n<li>I've written a small program in C, copied most of the code as is from <a href=\"https://stackoverflow.com/questions/8521661/d-bus-tutorial-in-c-to-communicate-with-wpa-supplicant?lq=1\">this</a> SO user.   </li>\n<li>I've gone through all possible tutorials on D-Bus and wpa_supplicant</li>\n<li>My program compiles and works properly. However it does not produce the expected output. </li>\n</ol>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;                                                                                                                                                                                  \n#include &lt;dbus/dbus.h&gt;\n\n#define WPAS_DBUS_SERVICE   \"fi.epitest.hostap.WPASupplicant\"\n#define WPAS_DBUS_PATH      \"/fi/epitest/hostap/WPASupplicant\"\n#define WPAS_DBUS_INTERFACE \"fi.epitest.hostap.WPASupplicantAAA\"\n\n#define WPAS_DBUS_PATH_INTERFACES   WPAS_DBUS_PATH \"/Interfaces\"\n#define WPAS_DBUS_IFACE_INTERFACE   WPAS_DBUS_INTERFACE \".Interfaces\"\n\n#define WPAS_DBUS_NETWORKS_PART \"Networks\"\n#define WPAS_DBUS_IFACE_NETWORK WPAS_DBUS_INTERFACE \".Network\"\n\n#define WPAS_DBUS_BSSIDS_PART   \"BSSIDs\"\n#define WPAS_DBUS_IFACE_BSSID   WPAS_DBUS_INTERFACE \".BSSID\"\n\nint ret;\nchar signalDesc[1024];     // Signal description as string\n\n// Signal handling\nsignal(SIGKILL, stopLoop);\nsignal(SIGTERM, stopLoop);\n\nvoid loop(DBusConnection* conn)\n\n{\nDBusMessage* msg;\nDBusMessageIter args;\nDBusMessageIter subArgs;\nint argType;\nint i;\nint buffSize = 1024;\nchar strValue[buffSize];\nconst char* member = 0;\n\n\nwhile (1)\n{\n// non blocking read of the next available message\ndbus_connection_read_write(conn, 0);\nmsg = dbus_connection_pop_message(conn);\n\n// loop again if we haven't read a message\nif (!msg)\n{\nprintf(\"No message received, waiting a little ...\\n\");\nsleep(1);\ncontinue;\n}\nelse printf(\"Got a message, will analyze it ...\\n\");\n\n// Print the message member\nprintf(\"Got message for interface %s\\n\",\ndbus_message_get_interface(msg));\nmember = dbus_message_get_member(msg);\nif(member) printf(\"Got message member %s\\n\", member);\n\n// Check has argument\n\nif (!dbus_message_iter_init(msg, &amp;args))\n{       \nprintf(\"Message has no argument\\n\");\ncontinue;\n}\nelse\n{\n// Go through arguments\nwhile(1)\n{\nargType = dbus_message_iter_get_arg_type(&amp;args);\n\nif (argType == DBUS_TYPE_STRING)\n{\nprintf(\"Got string argument, extracting ...\\n\");\nchar* str = NULL;\ndbus_message_iter_get_basic(&amp;args, &amp;str);\nprintf(\"Received string: \\n %s \\n\",str);\n\n}   \nelse\nprintf(\"Arg type not implemented yet !\\n\");\n\nif(dbus_message_iter_has_next(&amp;args))\ndbus_message_iter_next(&amp;args);\nelse break;\n}   \nprintf(\"No more arguments!\\n\");\n}\n\n// free the message\ndbus_message_unref(msg);\n}       \n}           \n\nint main()\n{\n\nDBusConnection *connection;\n\nDBusError error;\n\nchar *name = \"org.share.linux\";\n\ndbus_error_init(&amp;error);\n\nconnection = dbus_bus_get(DBUS_BUS_SYSTEM, &amp;error);\n\nif ( dbus_error_is_set(&amp;error) )\n\n{\n\nprintf(\"Error connecting to the daemon bus: %s\",error.message);\n\ndbus_error_free(&amp;error);\n\nreturn 1;\n\n}\n\n// request a name on the bus\n\nret = dbus_bus_request_name(connection, WPAS_DBUS_SERVICE, 0, &amp;error);\nif (dbus_error_is_set(&amp;error))\n{\nprintf(stderr, \"Name Error (%s)\\n\", error.message);\ndbus_error_free(&amp;error);\n}\n\n/* Connect to signal */\n// Interface signal ..\nprintf(signalDesc, \"type='signal',interface='%s'\",WPAS_DBUS_IFACE_INTERFACE);\ndbus_bus_add_match(connection, signalDesc, &amp;error);\ndbus_connection_flush(connection);\nif (dbus_error_is_set(&amp;error))\n{\nfprintf(stderr, \"Match Error (%s)\\n\", error.message);\nreturn 1;\n}\n\n// Do main loop\nloop(connection);\ndbus_connection_close(connection);\n\nreturn 0;\n\n}  \n</code></pre>\n\n<h1>List of D-bus services on my BBB</h1>\n\n<p><a href=\"https://i.stack.imgur.com/7LezQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7LezQ.png\" alt=\"enter image description here\"></a></p>\n\n<h1>Output</h1>\n\n<p><a href=\"https://i.stack.imgur.com/cVeGH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cVeGH.png\" alt=\"enter image description here\"></a></p>\n\n<h1>Some pointers</h1>\n\n<ol>\n<li>I would like to catch the signals as shown in the <a href=\"https://w1.fi/wpa_supplicant/devel/dbus.html\" rel=\"nofollow noreferrer\">D-Bus API</a> of wpa_supplicant. </li>\n<li>Some things I would like to do -- see when a wireless interface say <code>wlan0</code> is enabled, connects to access point etc. Also capability to set AP and stuff.</li>\n<li>Its catching signal from other interfaces for which no match has been added.</li>\n<li>I run this program and change the state of the networking interfaces but I dont get any signals. Also, I dont know if requesting name on the bus is necessary as I'm just listening. </li>\n</ol>\n\n<p>What's the possible issue here? Any pointers will be really helpful. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1467845949, "post_id": 38235128, "comment_id": 63891810, "body": "I guess you are into code that is both unreadable and difficult to maintain"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1467846140, "post_id": 38235128, "comment_id": 63891869, "body": "<code>p = function1();</code> --&gt; <code>p = function1;</code>"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1467846147, "post_id": 38235128, "comment_id": 63891872, "body": "<code>p = function1;</code> Drop the parantheses (unless <code>function1</code> itself returns a function pointer). <code>Can we say for sure that All function calls are resolved at compiler time in C?</code>. Define what you mean by <code>calls are resolved at compile time</code>."}, {"owner": {"reputation": 145, "user_id": 6558325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MLdj.jpg?s=128&g=1", "display_name": "Adnan", "link": "https://stackoverflow.com/users/6558325/adnan"}, "edited": false, "score": 0, "creation_date": 1467846170, "post_id": 38235128, "comment_id": 63891881, "body": "It is not the exact code. take it as an algorithm instead of a code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1467846187, "post_id": 38235128, "comment_id": 63891885, "body": "Well post your <b><i>exact</i></b> code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1467846394, "post_id": 38235128, "comment_id": 63891962, "body": "Your edit shows why we ask for the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> which shows what you have tried: you are shifting the code as we comment."}, {"owner": {"reputation": 145, "user_id": 6558325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MLdj.jpg?s=128&g=1", "display_name": "Adnan", "link": "https://stackoverflow.com/users/6558325/adnan"}, "edited": false, "score": 0, "creation_date": 1467846395, "post_id": 38235128, "comment_id": 63891961, "body": "There is no exact code. It is more like a theoretical confusion instead of a real code."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1467847322, "post_id": 38235128, "comment_id": 63892238, "body": "The compiler is free to implement the code any way it likes, provided that the observable output is correct."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1467847918, "post_id": 38235128, "comment_id": 63892403, "body": "@EdHeal this is a fairly typical use of function pointers , assuming the real code has other things going on too"}, {"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "edited": false, "score": 0, "creation_date": 1467847956, "post_id": 38235128, "comment_id": 63892415, "body": "There&#39;s no real &quot;function resolution&quot; here.  It&#39;s a function pointer assignment and dereference.  It doesn&#39;t need to resolve anything when you give it an address and then tell it to execute that address.  If there is no exact code, and you have a question about what the compiler is going to do, try it out and look at the assembly.  I wouldn&#39;t imagine a function call to a non-const function pointer would be inlined in any case.  Compilers are smart, but that seems quite  abit over the top."}, {"owner": {"reputation": 145, "user_id": 6558325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MLdj.jpg?s=128&g=1", "display_name": "Adnan", "link": "https://stackoverflow.com/users/6558325/adnan"}, "edited": false, "score": 0, "creation_date": 1467848302, "post_id": 38235128, "comment_id": 63892515, "body": "I tried it, and the program is working fine. I just wanted to compare it with the polymorphism property and see whether polymorphism can be achieved without <code>virtual</code>"}, {"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "edited": false, "score": 1, "creation_date": 1467848432, "post_id": 38235128, "comment_id": 63892548, "body": "You marked this C.  Do you mean C++ virtual?  Function lookup is done with a vtable in C++.  If you want to do more research on true C polymorphism and OO design, you may want to read up on gobject and how it works."}, {"owner": {"reputation": 145, "user_id": 6558325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MLdj.jpg?s=128&g=1", "display_name": "Adnan", "link": "https://stackoverflow.com/users/6558325/adnan"}, "edited": false, "score": 0, "creation_date": 1467848651, "post_id": 38235128, "comment_id": 63892605, "body": "I mean C without OOPS. I&#39;ll take a look at gobject though"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467849113, "post_id": 38235128, "comment_id": 63892738, "body": "@M.M - IMHO it is best to avoid function pointers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1467850953, "post_id": 38235128, "comment_id": 63893217, "body": "@EdHeal There are plenty of cases where a function pointer is the tidiest solution"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6558325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MLdj.jpg?s=128&g=1", "display_name": "Adnan", "link": "https://stackoverflow.com/users/6558325/adnan"}, "edited": false, "score": 0, "creation_date": 1467848006, "post_id": 38235421, "comment_id": 63892429, "body": "Thanks for the thorough explanation. I don&#39;t think we can assume this code to be a weak form of polymorphism, can we?"}, {"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "edited": false, "score": 0, "creation_date": 1467848353, "post_id": 38235421, "comment_id": 63892528, "body": "No.  It&#39;s a function pointer, and it behaves exactly like a function pointer should, without polymorphism.  &quot;polymorphism&quot; depends on a degree of transparency, and using, assigning, and declaring a function pointer are not transparent."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1467848486, "post_id": 38235421, "comment_id": 63892564, "body": "I&#39;d rather say it&#39;s the way (some of) dynamic polymorphism is implemented, but we have an interface here (a function taking no parameters and returning an <code>int</code>) with different possible behavior, so I guess you could stretch the definition and name it that way. But better just call it for what it is: a function pointer."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 0, "last_activity_date": 1467847732, "creation_date": 1467847732, "answer_id": 38235421, "question_id": 38235128, "link": "https://stackoverflow.com/questions/38235128/runtime-function-resolution-in-c/38235421#38235421", "title": "Runtime function resolution in C?", "body": "<pre><code>int (*function_pointer)(void); /* Define a pointer variable. */\nscanf(\"%d\", &amp;user_input);\nif (user_input != 0) {\n  function_pointer = &amp;function1; /* Set the value of that variable\n                                    depending on some user input. */\n} else {\n  function_pointer = &amp;function2;\n}\nint result = function_pointer(); /* Use the value by calling the\n                                    function. */\n</code></pre>\n\n<blockquote>\n  <p>Here, the function resolution is dependent on the value [..]</p>\n</blockquote>\n\n<p>No. There are two functions, <code>function1</code> and <code>function2</code>. Both are resolved just like other used functions (probably) during linking (more detail below). What this actually does is determining <em>the addresses</em> to which control flow needs to be transferred when the function is called.</p>\n\n<p>Only which function * actually gets called* depends on the user input. Very much the same as in this code snippet:</p>\n\n<pre><code>scanf(\"%d\", &amp;user_input);\nint result;\nif (user_input != 0) {\n  result = function1();\n} else {\n  result = function2();\n}\n</code></pre>\n\n<p>And since the above snippet has the same observable behavior as your original code a compiler could actually implement it that way. And if <code>function1</code> and/or <code>function2</code> matches the metric of the optimizer for inlining, then, yes, both functions could be inlined.</p>\n\n<blockquote>\n  <p>Can we say for sure that All function calls are resolved at compiler time in C?</p>\n</blockquote>\n\n<p>No, because some references to functions (or variables) will be resolved during link time (other translation units, static libraries), some during load time (shared libraries) and some during run time (<code>dlopen</code>).</p>\n"}], "owner": {"reputation": 145, "user_id": 6558325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MLdj.jpg?s=128&g=1", "display_name": "Adnan", "link": "https://stackoverflow.com/users/6558325/adnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 38235421, "answer_count": 1, "score": -5, "last_activity_date": 1467847732, "creation_date": 1467845822, "last_edit_date": 1467846272, "question_id": 38235128, "link": "https://stackoverflow.com/questions/38235128/runtime-function-resolution-in-c", "title": "Runtime function resolution in C?", "body": "<p>Suppose this is a C code:</p>\n\n<pre><code>int (*p)();\nscanf(\"%d\",&amp;a);\nif(a){\n    p = function1;\n}else{\n    p=function2;\n}\nint b=(*p)();\n</code></pre>\n\n<p>Here, the function resolution is dependent on the value of <code>a</code>, so can this be considered as run time function resolution? or will the compiler simply make the <code>function1</code> and <code>function2</code> inline?\nCan we say for sure that All function calls are resolved at compiler time in C?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "setjmp"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1467842945, "post_id": 38234546, "comment_id": 63890862, "body": "There is no language C/C++. Only the different languages C and C++. C (which you tagged) has no exceptions. About the question: This is no consulting service. Your question is far too broad. What is confusing is that embedded MCUs typically don&#39;t have the standard library and no keyboard, so there is no <code>ctrl-C</code>. And handling timeouts with <code>setjmp</code> looks like a bad design to me."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1467845533, "post_id": 38234546, "comment_id": 63891674, "body": "You <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">can not safely call non-async-signal-safe functions such as <code>printf()</code> or <code>exit()</code></a> from within a signal handler."}, {"owner": {"reputation": 925, "user_id": 3585723, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9ce5f73efc080109a6715e23efb5999b?s=128&d=identicon&r=PG&f=1", "display_name": "ssinfod", "link": "https://stackoverflow.com/users/3585723/ssinfod"}, "edited": false, "score": 0, "creation_date": 1467857788, "post_id": 38234546, "comment_id": 63894707, "body": "The original code was in C and using setjmp/longjmp. It was on a Freescale MCU (16 bits) which contains a CodeWarrior C standard library. The CTRLC was coming from the UART. I want a similar behavior but in C++ with thread. (hopefully removing the setjmp)."}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 3585723, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9ce5f73efc080109a6715e23efb5999b?s=128&d=identicon&r=PG&f=1", "display_name": "ssinfod", "link": "https://stackoverflow.com/users/3585723/ssinfod"}, "edited": false, "score": 0, "creation_date": 1467858529, "post_id": 38234725, "comment_id": 63894875, "body": "The snippet was just an example. In my project, the thread is doing more work than just a simple nanosleep. Otherwise, I agree that timer_create would be better."}, {"owner": {"reputation": 925, "user_id": 3585723, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9ce5f73efc080109a6715e23efb5999b?s=128&d=identicon&r=PG&f=1", "display_name": "ssinfod", "link": "https://stackoverflow.com/users/3585723/ssinfod"}, "edited": false, "score": 0, "creation_date": 1467860640, "post_id": 38234725, "comment_id": 63895283, "body": "Can we call longjmp from a signal handler ?  In which thread is the signal handler running ? Is this random (because it is asynchronous) ? Would it be  a solution to use pthread_kill to send the signal to a specific thread and then perform the longjmp ?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 925, "user_id": 3585723, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9ce5f73efc080109a6715e23efb5999b?s=128&d=identicon&r=PG&f=1", "display_name": "ssinfod", "link": "https://stackoverflow.com/users/3585723/ssinfod"}, "edited": false, "score": 0, "creation_date": 1467871712, "post_id": 38234725, "comment_id": 63897992, "body": "Longjmp is not advised from a signal handler (see my remark about about siglongjmp+ link). For signal and threads see <a href=\"http://stackoverflow.com/q/11679568/3723423\">stackoverflow.com/q/11679568/3723423</a>"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 7, "last_activity_date": 1467846317, "last_edit_date": 1495539853, "creation_date": 1467843554, "answer_id": 38234725, "question_id": 38234546, "link": "https://stackoverflow.com/questions/38234546/setjmp-longjmp-between-threads-to-handle-timeout/38234725#38234725", "title": "setjmp/longjmp between threads to handle timeout", "body": "<p><a href=\"http://www.cplusplus.com/reference/csetjmp/setjmp/\" rel=\"nofollow noreferrer\"><code>setjmp()</code></a> saves the information required to restore the calling environment.  <a href=\"http://www.cplusplus.com/reference/csetjmp/longjmp/\" rel=\"nofollow noreferrer\"><code>longjmp()</code></a> can then restore this environment, but only within the same thread.      </p>\n\n<p>The C11 standard is explicit about the constraint of having the same thread:  </p>\n\n<blockquote>\n  <p><strong>7.13.2.1/2</strong>   If there has been no such invocation <em>(i.e: of a previous setjmp)</em>, or if the invocation was <strong>from  another thread of\n  execution</strong>, or if the function containing the invocation of the\n  setjmp macro has terminated execution in the interim, or if the\n  invocation of the setjmp macro was within the scope of an identifier\n  with variably modified type and execution has left that scope in the\n  interim, <strong>the behavior is undefined.</strong></p>\n</blockquote>\n\n<p>In fact, setjmp/longjmp are generally implemented by saving the stack pointer so that restoring it makes sense only int the same execution context.  </p>\n\n<h3>Alternative</h3>\n\n<p>Unless I've missed something, you use the second thread only to act as a timer. You could instead get rid of your POSIX <code>pthread</code>, and use a timer signal activated with POSIX <a href=\"http://man7.org/linux/man-pages/man2/timer_create.2.html\" rel=\"nofollow noreferrer\"><code>timer_create()</code></a>. </p>\n\n<p>But be aware that using <code>setjmp/longjmp</code> from a signal handler (so already in your original code for <kbd>CTRL+C</kbd>) is tricky, as explained in this <a href=\"https://stackoverflow.com/a/1715477/3723423\">SO answer</a>. So you'd consider <a href=\"http://linux.die.net/man/3/siglongjmp\" rel=\"nofollow noreferrer\"><code>sigsetjmp/siglongjmp</code></a>.  </p>\n\n<h3>For the records: C or C++ ?</h3>\n\n<p>Your question is tagged C. But you mention c++ try and catch. So for the sake of completeness: </p>\n\n<ul>\n<li>in C++ <code>setjmp</code> should be replaced by a <code>try/catch</code> and the <code>longjmp</code> by throwing an exception.  <code>setjmp/longjmp</code> are supported in C++ only if unwinding the stack  wouldn't require invocation of any non-trivial destructor (see C++ standard, 18.10/4).</li>\n<li>the exceptions are not propagated across the threads, unless catched and explicitely rethrown using <a href=\"http://en.cppreference.com/w/cpp/error/rethrow_exception\" rel=\"nofollow noreferrer\"><code>std::rethrow_exception()</code></a>.  It's delicate, so refer to <a href=\"https://stackoverflow.com/q/233127/3723423\">this SO question</a> for for additional details. But it's possible and could solve your issue.  </li>\n</ul>\n"}], "owner": {"reputation": 925, "user_id": 3585723, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9ce5f73efc080109a6715e23efb5999b?s=128&d=identicon&r=PG&f=1", "display_name": "ssinfod", "link": "https://stackoverflow.com/users/3585723/ssinfod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1707, "favorite_count": 0, "accepted_answer_id": 38234725, "answer_count": 1, "score": 3, "last_activity_date": 1467990226, "creation_date": 1467842635, "last_edit_date": 1467990226, "question_id": 38234546, "link": "https://stackoverflow.com/questions/38234546/setjmp-longjmp-between-threads-to-handle-timeout", "title": "setjmp/longjmp between threads to handle timeout", "body": "<p>I'm porting a software from an embedded computer to a Linux machine. (Ubuntu 14.04 or Raspbian (raspberry pi))</p>\n\n<p>The original program was using setjmp/longjmp to handle timeout and CTRL+C event. It was running on a Microcontroller with a single main (one thread).</p>\n\n<p>I'm trying to have a similar behaviour while using threads (pthreads).</p>\n\n<p>The idea is that I want either a timeout or a CTRL+C to restart an infinite loop.</p>\n\n<p>The original code was doing something like the code below. I don't mind to drop the setjmp/longjmp by something else.  (ex: try/catch or signal or pthread_kill, conditional variable, etc..)</p>\n\n<p>Any idea how to implement similar behavior with C/C++ ?</p>\n\n<p>Here is the code which seems to partially work and is probably not recommended/broken:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;setjmp.h&gt;\n\n// Define\n#define TICK_NS_TIME (10000000)                                                 // 0.01 sec = 10 ms (100 times per second)\n#define NS_PER_SEC   (1000000000)                                               // Nano sec per second.\n#define TICK_PER_SEC (NS_PER_SEC/TICK_NS_TIME)                                  // Number of tick per second (Ex:100)\n#define TIMEOUT_COUNT (30*TICK_PER_SEC)                                         // 30 seconds timeout (with 100 tick per second)\n\n// Env set/long jmp\n#define ENV_SZ (2)\n#define ENV_TIMEOUT (0)\n#define ENV_CTRLC (1)\nstatic jmp_buf env[ENV_SZ];\n\n// Variables\nint timeout_val;\n\n\n// sig handler.\nvoid signal_handler(int signo)\n{\n    pthread_t self = pthread_self();\n    printf(\"Thread %lu in signal handler\\n\", (long)self);\n    if (signo == SIGINT) {\n        longjmp(env[ENV_CTRLC], 1);                                             // Q?: Is it in the same thread ? (Never, Always, Sometimes?)\n    }\n    else \n    {\n        printf(\"Other signal received..quitting.\");                             // Ex: kill -9 pid\n        exit(0);\n    }\n}\n\n// thread timer function\nvoid* timer_function(void* in_param)\n{\n    // Loop approx 100x per second.\n    for (;;) {\n        nanosleep((const struct timespec[]){{0, TICK_NS_TIME }}, NULL);         // Sleep 10 ms seconds.\n        if (timeout_val) {\n            if (!--timeout_val) {\n                longjmp(env[ENV_TIMEOUT], 1);                                   // longjmp when timer reaches 0. (Q?: Is this valid with multithread?)\n            }\n        }\n    }\n}\n\n// main\nint main(int argc, char **argv)\n{\n    int i;\n    int val;\n    struct sigaction actions;\n    pthread_t thread;\n    setvbuf (stdout, NULL, _IONBF, 0);                                          // Make sure stdout is not buffered (ex:printf, etc.)\n    printf(\"[Program started]\\r\\n\");\n\n    memset(&amp;actions, 0, sizeof(actions));\n    sigemptyset(&amp;actions.sa_mask);\n    actions.sa_flags = 0;\n    actions.sa_handler = signal_handler;\n    val = sigaction(SIGINT, &amp;actions, NULL);  \n    pthread_create(&amp;thread, NULL, timer_function, NULL);                        // timer thread for example\n    printf(\"[Timer thread started]\\r\\n\");\n\n    // setting env.\n    val = setjmp(env[ENV_TIMEOUT]);\n    if (val!=0){ printf(\"[JMP TIMEOUT]\\r\\n\"); }\n\n    val = setjmp(env[ENV_CTRLC]);\n    if (val!=0){ printf(\"[JMP CTRLC]\\r\\n\"); }\n\n    // main loop\n    timeout_val = TIMEOUT_COUNT;\n    i = 0;\n    for (;;)\n    {\n        i++;\n        if (i &gt; 10){ i = 0; printf(\"[%d]\", timeout_val/TICK_PER_SEC); }         // Number of seconds before time out.\n        sleep(1);\n        printf(\".\");\n    }\n    printf(\"Main completed\\n\");\n    return 0;\n}\n//Compile: g++ -pthread main.cpp -o main\n</code></pre>\n\n<p>Suggestion for alternative implementation would be great since I'm new to programming with threads !</p>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467842100, "post_id": 38234379, "comment_id": 63890464, "body": "Can you display the rectangle? Can you display it at an angle (from the camera)? Can you display it statically in a sine-wave pattern? Take step by step to achieve the last, then you&#39;re only one step away from actually animating the flag."}, {"owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467842179, "post_id": 38234379, "comment_id": 63890513, "body": "I can display the flag statically right now."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467842373, "post_id": 38234379, "comment_id": 63890596, "body": "Then try and show the flag distorted using some kind of sine-wave, statically (i.e. not animated) along the Y-axis. Then the last step is to get that &quot;distortion&quot; to become animated, by adjusting the sine-wave effect in your <code>idle</code> function. To be honest I&#39;ve never done it before myself, but that&#39;s how I would do it."}, {"owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467842994, "post_id": 38234379, "comment_id": 63890875, "body": "yeah, i tried that but i cant make the colors right"}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1467843018, "post_id": 38234379, "comment_id": 63890890, "body": "@Coder123: A waving flag is about vertex positions (and normals), not colors."}, {"owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "edited": false, "score": 0, "creation_date": 1467843200, "post_id": 38234379, "comment_id": 63890947, "body": "can you maybe point me how can i make the possitions so they will fit my flag?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1467843314, "post_id": 38234379, "comment_id": 63890983, "body": "Done properly, you would not have to bother about the colors. Thinking a little about it I was wrong with my previous comment: If I would do something like this, I would do it in a vertex shader, modulating the <i>z</i> axis of the <i>object</i> in a sine wave. Then I would just let normal shadow and lighting handle the lightening/darkening areas of the flag. But like I said, I haven&#39;t done this personally, there might be better ways of handling this."}, {"owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "edited": false, "score": 0, "creation_date": 1467843431, "post_id": 38234379, "comment_id": 63891039, "body": "I will try it. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "is_accepted": true, "score": 1, "last_activity_date": 1467878113, "last_edit_date": 1467878113, "creation_date": 1467877631, "answer_id": 38240113, "question_id": 38234379, "link": "https://stackoverflow.com/questions/38234379/waving-flag-in-opengl-c/38240113#38240113", "title": "Waving flag in openGL (C)", "body": "<p>You can play with colors, making some of them darker, something like that (sorry beucause it's a spagetti code, you will have to adjust and optimize it):\n<code></p>\n\n<pre><code>void idle()\n{\n    static float count = 0.0;\n\n    int i,j;\n    count += 0.05;\n    offset-=0.14;\n\n    for(i=0;i&lt;200;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            matrix[i][j][0] = 0; // red\n            matrix[i][j][1] = 200 + 55 * sin(count + j * 0.02); // green\n            matrix[i][j][2] = 0; // blue\n        }\n\n    for(i=200;i&lt;400;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            matrix[i][j][0] = 200 + 55 * sin(count + j * 0.02); // red\n            matrix[i][j][1] = 200 + 55 * sin(count + j * 0.02); // green\n            matrix[i][j][2] = 200 + 55 * sin(count + j * 0.02); // blue\n        }\n\n    for(i=400;i&lt;600;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            matrix[i][j][0] = 0; // red\n            matrix[i][j][1] = 0; // green\n            matrix[i][j][2] = 200 + 55 * sin(count + j * 0.02); // blue\n        }\n\n    glutPostRedisplay();\n}\n</code></pre>\n\n<p></code></p>\n"}], "owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3478, "favorite_count": 1, "accepted_answer_id": 38240113, "answer_count": 1, "score": 0, "last_activity_date": 1467899857, "creation_date": 1467841832, "last_edit_date": 1467899857, "question_id": 38234379, "link": "https://stackoverflow.com/questions/38234379/waving-flag-in-opengl-c", "title": "Waving flag in openGL (C)", "body": "<p>I am trying to make a waving New Zealand flag using openGL and c (or c++),\ni made the flag using a matrix but i dont know how to make the wave effect,\nhere is my whole code, i tried changing the parameters of the matrix in the idle function but i cant make the effect (it changes my whole flag to other shades which I am changing there:</p>\n\n<pre><code>#include \"GLUT.H\"\n#include &lt;math.h&gt;\n\n#define HEIGHT 600\n#define WIDTH 600\n\nunsigned char matrix[HEIGHT][WIDTH][3]; // r,g,b\ndouble offset=0;\n\nvoid init()\n{\n    int i,j;\n\n    for(i=0;i&lt;200;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            matrix[i][j][0] = 0; // red\n            matrix[i][j][1] = 255; // green\n            matrix[i][j][2] = 0; // blue\n        }\n\n    for(i=200;i&lt;400;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            matrix[i][j][0] = 255; // red\n            matrix[i][j][1] = 255; // green\n            matrix[i][j][2] = 255; // blue\n        }\n\n    for(i=400;i&lt;600;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            matrix[i][j][0] = 0; // red\n            matrix[i][j][1] = 0; // green\n            matrix[i][j][2] = 255; // blue\n        }\n\n    glClearColor(0,0,0.4,0);\n    glOrtho(-1,1,-1,1,-1,1);\n}\n\nvoid display()\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n    glDrawPixels(WIDTH,HEIGHT,GL_RGB,GL_UNSIGNED_BYTE,matrix);\n    glutSwapBuffers();\n}\n\nvoid idle()\n{\n    int i,j;\n    double dist;\n    offset-=0.14;\n\n    for(i=0;i&lt;HEIGHT;i++)\n        for(j=0;j&lt;WIDTH;j++)\n        {\n            dist = sqrt((double)(i-HEIGHT/2)*(i-HEIGHT/2)+(j-WIDTH/2)*(j-WIDTH/2));\n            //matrix[i][j][0] = 0;//int(255*(1+sin((2*j)*0.03+offset))/2); // red\n            //matrix[i][j][1] = dist;//int(255*(1+sin((2*dist)*0.03+offset))/2); // green\n            //matrix[i][j][2] = 0;//int(255*(1+sin((j)*0.03+offset))/2); // blue\n        }\n\n\n    glutPostRedisplay();\n}\n\n\nvoid main( int argc, char* argv[])\n{\n    glutInit(&amp;argc,argv);\n    glutInitDisplayMode(GLUT_RGBA|GLUT_DOUBLE);\n    glutInitWindowSize(WIDTH,HEIGHT);\n    glutInitWindowPosition(100,100);\n    glutCreateWindow(\"ok\");\n    glutDisplayFunc(display);\n    glutIdleFunc(idle);\n    init();\n    glutMainLoop();\n}\n</code></pre>\n\n<p>Any ideas\\suggestions\\solution(lol) how i can make it wave?</p>\n\n<p>p.s: I will need to add some star to it in middle also (also clueless how to draw it so it will wave)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1467841085, "post_id": 38234189, "comment_id": 63890010, "body": "Why is this tagged with <code>python</code> and <code>C++</code>? It looks like standard C and no Python."}, {"owner": {"reputation": 380, "user_id": 6539852, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/546677b859edbb509b2973eadd5ff49f?s=128&d=identicon&r=PG&f=1", "display_name": "pokemon", "link": "https://stackoverflow.com/users/6539852/pokemon"}, "edited": false, "score": 0, "creation_date": 1467841146, "post_id": 38234189, "comment_id": 63890055, "body": "Before trying to understand any code, try using beautifier, just google for &quot;c code beautifier&quot; and you will get it."}, {"owner": {"reputation": 57, "user_id": 6407396, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/90b18952fe55d6bff17bc46e1109df95?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Pedro", "link": "https://stackoverflow.com/users/6407396/joao-pedro"}, "edited": false, "score": 0, "creation_date": 1467841268, "post_id": 38234189, "comment_id": 63890101, "body": "My mistake. I changed the tag to c"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 3, "creation_date": 1467841293, "post_id": 38234189, "comment_id": 63890114, "body": "This code doesn&#39;t output anything."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467841299, "post_id": 38234189, "comment_id": 63890117, "body": "@JoaoPedro So what you&#39;re not understanding in particular? What&#39;s the context of this code is used? Your code snipped doesn&#39;t provide any output BTW, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1467841324, "post_id": 38234189, "comment_id": 63890132, "body": "try rewrite it with more lines"}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1467841358, "post_id": 38234189, "comment_id": 63890146, "body": "I think this is somewhat outside the scope of SO, which aimed at more specific programming questions, there are many resources on the internet which provide introductory courses and other materials which you should consult. <a href=\"http://www.tutorialspoint.com/\" rel=\"nofollow noreferrer\">TutorialsPoint.com</a> and <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">cppreference.com</a> just to name a few."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1467841361, "post_id": 38234189, "comment_id": 63890149, "body": "@BenjaminLindley It does modify the content of <code>plaintxt</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1467841450, "post_id": 38234189, "comment_id": 63890188, "body": "@BryanChen Does that produce the output as claimed?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1467841612, "post_id": 38234189, "comment_id": 63890262, "body": "How to understand code: Learn the language that the code is written in."}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 6, "last_activity_date": 1467898770, "last_edit_date": 1467898770, "creation_date": 1467846153, "answer_id": 38235176, "question_id": 38234189, "link": "https://stackoverflow.com/questions/38234189/how-to-understand-code/38235176#38235176", "title": "How to Understand Code", "body": "<p>It would help to know what <em>specific</em> questions you have.  </p>\n\n<p>In short, this code is taking a string and encrypting/encoding it using a key value.  The line</p>\n\n<pre><code>*plaintxt^ = (key=(key*13)+37);\n</code></pre>\n\n<p>is a very dense way of writing</p>\n\n<pre><code>*plaintxt = *plaintxt ^ (key * 13 + 37);\nkey = key * 13 + 37;\n</code></pre>\n\n<p>with the caveat that the exact order in which <code>key</code> and <code>*plaintxt</code> are updated isn't specified (IOW, in the original code <code>key</code> may be updated before or after <code>*plaintxt</code> is updated).  </p>\n\n<p>The <code>^</code> operator is the bitwise-XOR operator; each bit in <code>*plaintext</code> is XOR'd against each bit in <code>key</code>.</p>\n\n<p>The line</p>\n\n<pre><code> *(plaintxt++) +=3;\n</code></pre>\n\n<p>is a dense way of writing</p>\n\n<pre><code> *plaintxt = *plaintxt + 3;\n plaintxt = plaintxt + 1;\n</code></pre>\n\n<p>with the same caveat that the exact order in which <code>*plaintxt</code> and <code>plaintxt</code> are updated isn't specified.  This line is adding <code>3</code> to <code>*plaintext</code>, and then advancing the pointer to point to the next character in the string.  </p>\n\n<p>In C, strings are sequences of character values terminated by a <code>0</code>.  <code>plaintext</code> is a pointer to the first character of the string.  The <code>while</code> loop is checking to see that we haven't reached the end of the string by testing the value of <code>*plaintxt</code>; <code>while ( *plaintext )</code> is the same as <code>while ( *plaintext != 0 )</code>.  </p>\n\n<p>So, let's suppose <code>plaintext</code> is pointing to the string <code>\"test\"</code><sup>1</sup>:</p>\n\n<pre><code>           +---+              +----+\nplaintext: |   | ----&gt; \"test\" | 74 |    Assumes ASCII, all values in hex\n           +---+              +----+\n                              | 65 |\n           +----+             +----+\n      key: |  1 |             | 75 |\n           +----+             +----+\n                              | 74 |\n                              +----+\n                              |  0 |\n                              +----+\n</code></pre>\n\n<p>and that <code>key</code> is initially 1.  </p>\n\n<p>At the start of the loop, <code>plaintext</code> is pointing to the first <code>t</code> in <code>\"test\"</code> (ASCII <code>0x74</code>).  We XOR this with the result of <code>key * 13 + 37</code>, which is 50 in decimal, or 0x32 in hex:</p>\n\n<pre><code>  0x74 ^ 0x32 == 0x46\n</code></pre>\n\n<p>We write this value back to <code>*plaintext</code>, and then add 3 to it, giving us 0x49.  We save 0x32 to <code>key</code>.  We then advance <code>plaintext</code> to point to the next character in the string, giving us:</p>\n\n<pre><code>           +---+              +----+\nplaintext: |   | --+   \"Iest\" | 49 |    \n           +---+   |          +----+\n                   +-------&gt;  | 65 |\n           +----+             +----+\n      key: | 32 |             | 75 |\n           +----+             +----+\n                              | 74 |\n                              +----+\n                              |  0 |\n                              +----+\n</code></pre>\n\n<p>Now we do the same thing with the <code>e</code>:</p>\n\n<pre><code>key = 50 * 13 + 37 == 687 % 255 == 177 == 0xb1\n</code></pre>\n\n<p><code>unsigned char</code> can only store values from 0 to 2<sup>CHAR_BIT</sup>-1, which on most modern systems is 255; 687 is too large to store in <code>key</code>, so it \"wraps around\" back to 177, or 0xb1<sup>2</sup>.  </p>\n\n<pre><code>0x65 ^ 0xb1 == 0xd4\n0xd4 + 3    == 0xd7\n</code></pre>\n\n<p>After that's all done, we have</p>\n\n<pre><code>           +---+              +----+\nplaintext: |   | --+   \"I?st\" | 49 |    \n           +---+   |          +----+\n                   |          | d7 |  \n           +----+  |          +----+\n      key: | b1 |  +--------&gt; | 75 |\n           +----+             +----+\n                              | 74 |\n                              +----+\n                              |  0 |\n                              +----+\n</code></pre>\n\n<p>Lather, rinse, repeat.  This will continue until <code>plaintext</code> points to the memory cell containing 0. </p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>Technically, it's pointing to an <em>array</em> that contains the string `\"test\"`, not to the <em>string literal</em> `\"test\"`.  String literals may not have their contents modified; attempting to do so invokes undefined behavior.\n<li>This is only true for <em>unsigned</em> integral types; overflow on signed integral types is not well-defined, and may not behave as expected.\n</ol>\n\n<p></sup></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7933976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5adae7b1c87dc56dfae7a6f0d925d98f?s=128&d=identicon&r=PG&f=1", "display_name": "hypersoniq", "link": "https://stackoverflow.com/users/7933976/hypersoniq"}, "is_accepted": false, "score": 0, "last_activity_date": 1493335869, "creation_date": 1493335869, "answer_id": 43669541, "question_id": 38234189, "link": "https://stackoverflow.com/questions/38234189/how-to-understand-code/43669541#43669541", "title": "How to Understand Code", "body": "<p>I know it's a bit late, and whatever security conference you got that card from is long over (Raytheon Game Of Pwns)... but let me save you some frustration.\nYou won't find a better description of what the code is doing than what appears above, but you do not need to recreate this code at all to solve the cipher.\nYou don't even need to know C.\nin whichever language you choose, you can generate the key to crack this code easily. \nGiven that there are only 256 possible values for the initial key (0-255), you can brute force it, but you can solve this with an educated guess to get the first value of the key.</p>\n\n<p>The Game Of Pwns card contains keys, which you probably noticed from solving the binary encoded ASCII message that resolved to Key=2EZ01. You can guess that the first character is probably an uppercase K (0x4B).\nThe fun fact about an XOR operation is that it can be used to reverse itself.\nLet's take the premise that the first character is indeed a K, and we already know that the first output element is 0x0F (which is really 0x0C). this tells us that\nFlag ^ key = (output-3)\nthe trick is that \n(output-3) ^ Flag = key !\nbased on that assumption, we can obtain the first result of <code>((key*13)+37)</code>which would be 0x0C ^ 0x4B = 0x47.</p>\n\n<p>two important notes,the 13 and 37 in the code are indeed decimal values, not hex and the flag is incremented by 3 before indexing to the next char in the array.</p>\n\n<p>With the first key, you can generate the rest of the keys in whatever language you choose by creating a loop to give you the next 13 keys using\n<code>((key*13)+37)%256)</code>\nThe %256 mimics the wraparound behavior of the unsigned char in C.\nWhen you have the 14 keys, simply XOR each key in the list with it's corresponding original output (-3) to get the encoded message, which is clear... it begins Key=\nIf you also got the other card from Raytheon with similar looking code, all of the ciphers on that card begin with Flag=, so you can simply apply what you learned here about XOR to crack that one easily as well.</p>\n"}], "owner": {"reputation": 57, "user_id": 6407396, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/90b18952fe55d6bff17bc46e1109df95?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Pedro", "link": "https://stackoverflow.com/users/6407396/joao-pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 2, "score": -8, "last_activity_date": 1493335869, "creation_date": 1467841005, "last_edit_date": 1467841233, "question_id": 38234189, "link": "https://stackoverflow.com/questions/38234189/how-to-understand-code", "title": "How to Understand Code", "body": "<p>I was given this code recently that I am having a hard  time understanding. I am very new to programming overall and am still learning. Any information about this would be greatly appreciated. This is the code as it appears: </p>\n\n<pre><code>void enc(char* plaintxt, unsigned char key) \n{ \n    while(*plaintxt)\n    { \n        *plaintxt^ = (key=(key*13)+37);\n        *(plaintxt++) +=3;\n    }\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>0F A8 9F FE 7A D6 E2 08 AE 2B 5F 53 25 9A\n</code></pre>\n"}, {"tags": ["c", "linux", "file", "binary", "writing"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1467841008, "post_id": 38234160, "comment_id": 63889978, "body": "<code>fclose(file);</code>, then <code>fwrite</code> on the now-defunct <code>FILE* file</code> is not a good plan. Post minimal, <i>real</i>, and <i>complete</i> code that exhibits your problem. If the code in your question can&#39;t be cut/paste to a text file, compiled, linked, and run to reproduce your symptoms, it isn&#39;t enough."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1467841052, "post_id": 38234160, "comment_id": 63889997, "body": "... and what does <code>loop()</code> do ?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1467841150, "post_id": 38234160, "comment_id": 63890056, "body": "what do you mean by &#39;writing binary&#39;?. As far as C is concerned that simply means &quot;dont add any extra line termination characters&quot;, I suspect that you are expecting the data to be transformed somehow.Sounds like you actually want a hex dump of a file"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 2, "creation_date": 1467841291, "post_id": 38234160, "comment_id": 63890111, "body": "Basically you are always writing binary in unix.  Some other environments make a distinction between text and binary files based on the fact that MS-DOS legacy line-ends are two characters, and plays games to make a linefeed into a carriage_return+linefeed..  Linux isn&#39;t one of them"}, {"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "edited": false, "score": 0, "creation_date": 1467841521, "post_id": 38234160, "comment_id": 63890221, "body": "I pasted code from a couple different modules, which is why it originally showed me doing fclose() then an fwrite(). I&#39;ve corrected that now. loop() runs a subroutine, and was included in between, which isn&#39;t important (and I&#39;ll probably remove now). Yes, I&#39;m trying to get C to write a hex dump; perhaps I wasn&#39;t using the right terminology."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1467841643, "post_id": 38234160, "comment_id": 63890277, "body": "<code>if (!fwrite(...))</code> is not the complete detection of <code>fwrite()</code> failure."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467841868, "post_id": 38234160, "comment_id": 63890367, "body": "&quot;I&#39;ve corrected that now.&quot; is not good SO etiquette.  It makes your post a moving target and negates the first comments.  Suggest rolling back to before your &quot;fix&quot;."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1467842147, "post_id": 38234160, "comment_id": 63890498, "body": "I will point out that <code>xxd</code> and <code>hexdump</code> are utilities that take files that may not be human readable, and expresses them into a hexadecimal representation that can be interpreted.  That&#39;s  the opposite of writing a binary file.  Perhaps you&#39;re looking for the <code>%x</code> format of <code>printf</code>?"}, {"owner": {"reputation": 340, "user_id": 3055695, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006197287599/picture?type=large", "display_name": "JMercer", "link": "https://stackoverflow.com/users/3055695/jmercer"}, "edited": false, "score": 0, "creation_date": 1467842188, "post_id": 38234160, "comment_id": 63890519, "body": "What exactly are you attempting to do? <code>file_buffer</code> is an uninitialized array, and writing it to a file will just write junk memory to it.  You say you want to produce a binary file, what do you want in it? If by binary, you mean executable, then the file you are producing must either be interpreted by another program or compiled down to machine code.  A bmp image is a binary file that follows a specific format, give us an example of how you plan to use this/what you want to achieve and we may be able to help."}, {"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467842342, "post_id": 38234160, "comment_id": 63890584, "body": "@chux Fair enough, but data is being written to the file, just not the hex dump (which is where I&#39;m probably doing something wrong)."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1467842720, "post_id": 38234160, "comment_id": 63890768, "body": "Justin, I want to reiterate here that you may be using the wrong vocabulary.  While hex dumps are often used as a tool for dealing with binary files, they are not the binary file being discussed themselves.  Its just a way to put binary bits into a format that can be read as numbers.  If you want to make hex dumps, you are actually going to be making a text file of hexadecimal digits for output"}, {"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1467844034, "post_id": 38234160, "comment_id": 63891238, "body": "@infixed I apologize if I&#39;m using the wrong terminology. What I want is something along the lines of the &quot;xxd&quot; command on Linux, which I believe is a hex dump. I have a bash script which does this, but I was just wondering if there&#39;s an easy way of doing this using C."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1467844296, "post_id": 38234160, "comment_id": 63891312, "body": "try a line <code>printf(&quot;Dump = %02x %02x %02x %02x\\n&quot;, 1, 2, 3, 15);</code> and see if that gets you started in the right direction"}], "answers": [{"tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": false, "score": 1, "last_activity_date": 1467842367, "creation_date": 1467842367, "answer_id": 38234489, "question_id": 38234160, "link": "https://stackoverflow.com/questions/38234160/writing-binary-file-in-c/38234489#38234489", "title": "writing binary file in C", "body": "<p>A file contents are series of bytes. Now, it is the application which is trying to read a file that interprets what type of file it is depending on the values of those bytes.</p>\n\n<p>For example if your file contains bytes whose values are all within printable ASCII values, then applications will treat that file as an ASCII file. </p>\n\n<p>You can write any value to a byte in file. For example the program below:</p>\n\n<pre><code>/* main: write a new filej */\nint main(void)\n{\n    unsigned char c;\n    FILE *fp;\n\n    /* open a file to write */\n    fp = fopen(\"test_file\", \"w\");\n    if (fp == NULL) {\n             printf(\"Open Error\\n\");\n             return 1;\n    }\n\n    /* write some data to file  */\n    for (c=0; c &lt; 200; c++)\n            fputc(c, fp);\n\n    /* close file */\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p>will write 200 bytes to <code>test_file</code>. Out of those 200 bytes are some characters which are human readable, and some are non-human-readable, as seen below.</p>\n\n<pre><code>[05:52 PM] $ wc test_file \n1   1 200 test_file\n[05:52 PM] $ cat test_file \n !\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd[05:52 PM] $ \n</code></pre>\n\n<p>So, you can write anything into a file. It is then the applicaton which reads the file interpret it of some type. For example, lets use <code>file</code> application used coomnly in linux:</p>\n\n<pre><code>[05:55 PM] $ file test_file \ntest_file: Targa image data - RGBA (1027-1541) 3340 x 3854 x 16 +2312 +2826 - 1-bit alpha - right\n[05:55 PM]\n</code></pre>\n\n<p><code>file</code> utility is treating this file as some image data file. </p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "edited": false, "score": 0, "creation_date": 1467843880, "post_id": 38234586, "comment_id": 63891187, "body": "My apologies for not including every bit of my code. I actually do populate file_buffer, I just don&#39;t show it here because that part is working correctly (and most likely isn&#39;t relevant to the problem I have at hand). I also made the correction you suggested, but the output file was the same."}, {"owner": {"reputation": 395, "user_id": 6505628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84aae402113911f642697ec19a65f924?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowfen", "link": "https://stackoverflow.com/users/6505628/shadowfen"}, "reply_to_user": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "edited": false, "score": 0, "creation_date": 1467844215, "post_id": 38234586, "comment_id": 63891286, "body": "Try using perror () then to get a human readable error message from the fwrite failure."}], "tags": [], "owner": {"reputation": 395, "user_id": 6505628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84aae402113911f642697ec19a65f924?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowfen", "link": "https://stackoverflow.com/users/6505628/shadowfen"}, "is_accepted": false, "score": 2, "last_activity_date": 1467844117, "last_edit_date": 1467844117, "creation_date": 1467842845, "answer_id": 38234586, "question_id": 38234160, "link": "https://stackoverflow.com/questions/38234160/writing-binary-file-in-c/38234586#38234586", "title": "writing binary file in C", "body": "<p>One problem that you have is that you are not actually putting any data in your file_buffer, so what you would be writing to your file is random garbage found in memory.</p>\n\n<p>The real problem that you have is that: </p>\n\n<pre><code>if ( !fwrite( &amp;file_buffer, 1, sizeof(file_buffer), file ) )\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>if ( !fwrite( file_buffer, 1, sizeof(file_buffer), file ) )\n</code></pre>\n\n<p>You are passing in a pointer to a pointer, not the simple pointer to char fwrite was expecting.</p>\n"}], "owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4233, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1467844117, "creation_date": 1467840885, "last_edit_date": 1467841759, "question_id": 38234160, "link": "https://stackoverflow.com/questions/38234160/writing-binary-file-in-c", "title": "writing binary file in C", "body": "<p>I realize this question has been asked a ton, and I've searched through (most) of the articles, but I just can't seem to write a file in binary. I can open the file and write in human-readable format, but what I want is non-human-readable data written to the file (like hex). I'm aware of the \"xxd\" command on Linux, but I'm wondering how I can mimic that using C. The relevant code I have so far is as follows (the opening of the file followed by the writing of the file:</p>\n\n<pre><code>extern FILE* file;\nstatic char file_buffer[16384];\nfile = fopen(\"audit_log\", \"wb\");\n\nif ( !file )\n{\n    printf(\"failed to open file\");\n    exit(1);\n}\n\n\nif ( !fwrite( &amp;file_buffer, 1, sizeof(file_buffer), file ) )\n    printf(\"fwrite failed\\n\");\n\nfclose(file)\n</code></pre>\n\n<p>I've done my research and my testing and used all different kinds of modes for fopen() using the \"b\" parameter, paired with fwrite(), but none of these methods have aided me in writing a binary file to C. Am I missing something trivial? I can't seem to figure out why I can't write a simple file in binary. Thanks! </p>\n"}, {"tags": ["c", "string", "cmake", "c-preprocessor", "token"], "comments": [{"owner": {"reputation": 3629, "user_id": 631615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8774bd471bec0899483c832ea428436?s=128&d=identicon&r=PG", "display_name": "librik", "link": "https://stackoverflow.com/users/631615/librik"}, "edited": false, "score": 0, "creation_date": 1467841240, "post_id": 38234111, "comment_id": 63890089, "body": "I hope you aren&#39;t actually using &quot;smart quotes&quot; in CMakeLists.txt, although your example shows them: <code>-DSTRING=\u201ctest\u201d</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7747, "user_id": 1937270, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XpiU6.jpg?s=128&g=1", "display_name": "syb0rg", "link": "https://stackoverflow.com/users/1937270/syb0rg"}, "edited": false, "score": 0, "creation_date": 1467842233, "post_id": 38234420, "comment_id": 63890544, "body": "Those quotes I used are what my Mac types out, how do you suggest changing them to your quote style?"}, {"owner": {"reputation": 3246, "user_id": 6410484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TtFQRjuFni4/AAAAAAAAAAI/AAAAAAAAALs/MvnswTqvKe0/photo.jpg?sz=128", "display_name": "chema989", "link": "https://stackoverflow.com/users/6410484/chema989"}, "reply_to_user": {"reputation": 7747, "user_id": 1937270, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XpiU6.jpg?s=128&g=1", "display_name": "syb0rg", "link": "https://stackoverflow.com/users/1937270/syb0rg"}, "edited": false, "score": 0, "creation_date": 1467842476, "post_id": 38234420, "comment_id": 63890643, "body": "An option just is copy and paste this <code>&quot;</code>."}, {"owner": {"reputation": 10223, "user_id": 592182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fu0me.jpg?s=128&g=1", "display_name": "forsvarir", "link": "https://stackoverflow.com/users/592182/forsvarir"}, "reply_to_user": {"reputation": 7747, "user_id": 1937270, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XpiU6.jpg?s=128&g=1", "display_name": "syb0rg", "link": "https://stackoverflow.com/users/1937270/syb0rg"}, "edited": false, "score": 2, "creation_date": 1467843010, "post_id": 38234420, "comment_id": 63890888, "body": "@syb0rg probably depends on your editor, looks like it&#39;s a common feature... <a href=\"https://www.macissues.com/2014/11/03/how-to-disable-smart-quotes-in-os-x/\" rel=\"nofollow noreferrer\">macissues.com/2014/11/03/how-to-disable-smart-quotes-in-os-x</a>"}, {"owner": {"reputation": 3246, "user_id": 6410484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TtFQRjuFni4/AAAAAAAAAAI/AAAAAAAAALs/MvnswTqvKe0/photo.jpg?sz=128", "display_name": "chema989", "link": "https://stackoverflow.com/users/6410484/chema989"}, "edited": false, "score": 0, "creation_date": 1467843646, "post_id": 38234420, "comment_id": 63891118, "body": "Maybe can be the configuration of your keyboard: <a href=\"http://apple.stackexchange.com/questions/120486/quotes-problem-in-mavericks-or-textedit\" title=\"quotes problem in mavericks or textedit\">apple.stackexchange.com/questions/120486/&hellip;</a>"}, {"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "edited": false, "score": 1, "creation_date": 1467846425, "post_id": 38234420, "comment_id": 63891979, "body": "That&#39;s not a &quot;workaround&quot;.  The problem is with your keyboard or whatever application you&#39;re using for editing, not with Cmake."}], "tags": [], "owner": {"reputation": 3246, "user_id": 6410484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TtFQRjuFni4/AAAAAAAAAAI/AAAAAAAAALs/MvnswTqvKe0/photo.jpg?sz=128", "display_name": "chema989", "link": "https://stackoverflow.com/users/6410484/chema989"}, "is_accepted": true, "score": 3, "last_activity_date": 1467842233, "last_edit_date": 1467842233, "creation_date": 1467842061, "answer_id": 38234420, "question_id": 38234111, "link": "https://stackoverflow.com/questions/38234111/stringify-cmake-preprocessor-token/38234420#38234420", "title": "Stringify CMake preprocessor token", "body": "<p>You are using the characters <code>\u201c</code> and <code>\u201d</code> that are not valid in C:</p>\n\n<pre><code>error: expected expression\n        puts(STRING);\n         ^\n&lt;command line&gt;:1:16: note: expanded from here\n#define STRING \u201ctest\u201d\n           ^\n1 error generated.\n</code></pre>\n\n<p>You must change <code>\u201c</code> and <code>\u201d</code> for <code>\"</code> in your CMakeLists.txt and your program will compile.</p>\n"}], "owner": {"reputation": 7747, "user_id": 1937270, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XpiU6.jpg?s=128&g=1", "display_name": "syb0rg", "link": "https://stackoverflow.com/users/1937270/syb0rg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 38234420, "answer_count": 1, "score": 3, "last_activity_date": 1467842233, "creation_date": 1467840652, "question_id": 38234111, "link": "https://stackoverflow.com/questions/38234111/stringify-cmake-preprocessor-token", "title": "Stringify CMake preprocessor token", "body": "<p>I'm using CMake to compile this example program:</p>\n\n<p><strong>CMakeLists.txt</strong>:</p>\n\n<pre><code>cmake_minimum_required (VERSION 3.0.0)\nset(PROJECT_NAME Main)\nproject(${PROJECT_NAME})\n\nadd_definitions(-DSTRING=\u201ctest\u201d)\n\nadd_executable(${PROJECT_NAME} main.c)\n</code></pre>\n\n<p><strong>main.c</strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    puts(STRING);\n}\n</code></pre>\n\n<hr>\n\n<p>Compiling gives me the following error:</p>\n\n<blockquote>\n<pre><code>error: expected expression\n    puts(STRING);\n         ^\n&lt;command line&gt;:1:16: note: expanded from here\n#define STRING \"test\"\n</code></pre>\n</blockquote>\n\n<p>How can I stringify this preprocessor token <em>without modifying</em> <code>main.c</code>?</p>\n"}, {"tags": ["java", "c++", "c", "arrays"], "comments": [{"owner": {"reputation": 3880, "user_id": 2136603, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/dbc89f5e7d4fd2af89766ad7067df747?s=128&d=identicon&r=PG", "display_name": "Mubin", "link": "https://stackoverflow.com/users/2136603/mubin"}, "edited": false, "score": 1, "creation_date": 1468010999, "post_id": 38233852, "comment_id": 63969691, "body": "Yes, it is possible. Try it and come back with your efforts :-)"}, {"owner": {"reputation": 1219, "user_id": 4333514, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7213d3f97037113330f793d2aa96efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4333514/denis"}, "edited": false, "score": 1, "creation_date": 1468011475, "post_id": 38233852, "comment_id": 63969908, "body": "Share your code if you have tried and it&#39;s not working."}, {"owner": {"reputation": 9, "user_id": 6451742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83e687f8f98be089c3345ede854d8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Athavan", "link": "https://stackoverflow.com/users/6451742/athavan"}, "edited": false, "score": 1, "creation_date": 1468012968, "post_id": 38233852, "comment_id": 63970460, "body": "I don&#39;t have any code, working on it."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1468261903, "last_edit_date": 1468261903, "creation_date": 1468234974, "answer_id": 38305288, "question_id": 38233852, "link": "https://stackoverflow.com/questions/38233852/matrix-get-value-from-given-matrix/38305288#38305288", "title": "Matrix : get value from given matrix", "body": "<p>To my understanding, the problem can be solved with the following helper function which calculates the indices of the next entry. The syntax is C#, but should work similar in Java, where <code>m</code> and <code>n</code> are supposed to be the respective matrix dimensions. The idea is to check whether the desired main direction is down-left or up-right; if the edge of the matrix is reached, which has to be checked beforehand, this is modified to right and down, respectively. The implementation assumes zero-based indexing of the rows and columns.</p>\n\n<pre><code>public struct Cell\n{\n    public int Row;\n    public int Col;\n}\n\npublic static Cell GetNext(Cell iCell)\n{\n    Cell Result;\n    if (( iCell.Row + iCell.Col ) % 2 == 0)\n    {\n        if (iCell.Col == n - 1)\n            Result = new Cell { Row = iCell.Row + 1, Col = n - 1 };\n        else if (iCell.Row == 0)                    \n            Result = new Cell { Row = 0, Col = iCell.Col + 1 };\n        else\n            Result = new Cell { Row = iCell.Row - 1, Col = iCell.Col + 1 };\n    }\n    else\n    {\n        if (iCell.Row == m - 1)\n            Result = new Cell { Row = m - 1, Col = iCell.Col + 1 };\n        else if (iCell.Col == 0)\n            Result = new Cell { Row = iCell.Row + 1, Col = 0 };\n        else\n            Result = new Cell { Row = iCell.Row + 1, Col = iCell.Col - 1 };\n    }\n    return Result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4661, "user_id": 1692706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GyaAv.png?s=128&g=1", "display_name": "Debosmit Ray", "link": "https://stackoverflow.com/users/1692706/debosmit-ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1468309153, "creation_date": 1468309153, "answer_id": 38322716, "question_id": 38233852, "link": "https://stackoverflow.com/questions/38233852/matrix-get-value-from-given-matrix/38322716#38322716", "title": "Matrix : get value from given matrix", "body": "<p>Personally, I like @Codor's approach more. I thought I would throw this Java function in the mix too. </p>\n\n<p><em>[Note: I have not compiled or run this. But, I think it should work (mostly). Let me know. :)]</em></p>\n\n<pre><code>public static int[] getTraversedArray(int[][] arr) {\n     if (arr == null || arr.length == 0) \n        return null;\n\n    # matrix need not be `nxn`\n    int l = arr.length - 1, w = arr[0].length - 1;\n\n    # all indices need to be visited\n    int[] out = new int[(l + 1) * (w + 1)];\n\n    int indx = 0;\n    for (int i = 0; i &lt;= l + w; i++) {\n        # \"even\" index\n        if (i % 2 == 0) {\n            for (int x = i; x &gt;= 0; x--) {\n                # if it is a \"valid index\", set the value\n                # in the output array\n                if ((x &lt;= l) &amp;&amp; (i - x &lt;= w)) {\n                    out[indx] = arr[x][i - x];\n                    indx++;\n                }\n            }\n        } \n        # \"odd\" index\n        else {\n            for (int x = 0; x &lt;= i; x++) {\n                # if it is a \"valid index\", set the value\n                # in the output array\n                if ((x &lt;= l) &amp;&amp; (i - x &lt;= w)) {\n                    out[indx] = arr[x][i - x];\n                    indx++;\n                }\n            }\n        }\n    }\n    return out;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6451742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83e687f8f98be089c3345ede854d8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Athavan", "link": "https://stackoverflow.com/users/6451742/athavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1469168731, "answer_count": 2, "score": 0, "last_activity_date": 1468881614, "creation_date": 1467839550, "last_edit_date": 1468881614, "question_id": 38233852, "link": "https://stackoverflow.com/questions/38233852/matrix-get-value-from-given-matrix", "closed_reason": "Needs details or clarity", "title": "Matrix : get value from given matrix", "body": "<p>It's possible to print a matrix values as per below image</p>\n\n<p><img src=\"https://i.stack.imgur.com/DHjTZ.png\" alt=\"The Matrix\"></p>\n"}, {"tags": ["c", "graphics", "accelerometer", "sensors", "gyroscope"], "comments": [{"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1467838997, "post_id": 38233680, "comment_id": 63889062, "body": "This question could be of use: <a href=\"http://stackoverflow.com/questions/1701728/graphics-library-in-c\">stackoverflow.com/questions/1701728/graphics-library-in-c</a>. I think you&#39;re looking for a graphics library. Perhaps you can link those variables to properties of some shapes, including their position and rotation."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1467839067, "post_id": 38233680, "comment_id": 63889111, "body": "Quite seriously, have you tried typing a reasonable subset of your question into a search engine? That would be an excellent starting point."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1467841347, "post_id": 38233680, "comment_id": 63890140, "body": "Yes, you can use a C program to draw graphics on a screen.  There are innumerable ways."}], "owner": {"reputation": 15, "user_id": 1757421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27910ccf9c6138a3882bdf7e1d40d44?s=128&d=identicon&r=PG", "display_name": "NewbieNumber6990", "link": "https://stackoverflow.com/users/1757421/newbienumber6990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467838749, "creation_date": 1467838749, "question_id": 38233680, "link": "https://stackoverflow.com/questions/38233680/visual-representation-of-calculated-angles", "title": "Visual representation of calculated angles", "body": "<p>OK so I don't even know how to research my problem because I don't know any terms to describe it. So here it is:</p>\n\n<p>I am using an IMU to measure the lying angle and bed inclination for bedbound patients. Is there a way for me to show these results graphically? I mean, is it possible to have a dummy on the screen in a way that I can control his lying angle using C? </p>\n\n<p>I would greatly appreciate it if you let me know if you have any knowledge about possible ways to do it.</p>\n"}, {"tags": ["c", "vigenere", "cs50"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467837922, "post_id": 38233381, "comment_id": 63888547, "body": "Show definition of <code>string</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1467838119, "post_id": 38233381, "comment_id": 63888628, "body": "Off topic: you don&#39;t need semicolons after closing curly braces. In other words <code>};</code> should be <code>}</code>"}, {"owner": {"reputation": 216, "user_id": 6505636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a27908f90ab615c3e506982867b762?s=128&d=identicon&r=PG&f=1", "display_name": "MacedonZero", "link": "https://stackoverflow.com/users/6505636/macedonzero"}, "edited": false, "score": 0, "creation_date": 1467838522, "post_id": 38233381, "comment_id": 63888820, "body": "chux, the cs50 library included defines string.  It is just typedef of char* <a href=\"http://mirror.cs50.net/library50/c/cs50-library-c-3.0/cs50.h\" rel=\"nofollow noreferrer\">mirror.cs50.net/library50/c/cs50-library-c-3.0/cs50.h</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 216, "user_id": 6505636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a27908f90ab615c3e506982867b762?s=128&d=identicon&r=PG&f=1", "display_name": "MacedonZero", "link": "https://stackoverflow.com/users/6505636/macedonzero"}, "edited": false, "score": 0, "creation_date": 1467839541, "post_id": 38233381, "comment_id": 63889361, "body": "@MacedonZero Thanks for <code>typedef char *string;</code>  For a long time I thought a <i>string</i> was a pointer in C - much like that <code>typedef</code>.  Instead C defines a <i>string</i> as an array of characters up to the null character.  That more correct definition solved a lot of problems and improved understanding.  <code>typedef char *string_ptr;</code> would be more educational."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1467838274, "creation_date": 1467838274, "answer_id": 38233576, "question_id": 38233381, "link": "https://stackoverflow.com/questions/38233381/whats-wrong-with-my-vigenere-cypher-cs50/38233576#38233576", "title": "What&#39;s wrong with my Vigenere Cypher CS50", "body": "<p><code>strlen(key)</code> is invalid in later code as earlier code was injecting null characters in <code>key[]</code> whenever an <code>'a'</code> or <code>'A'</code> was used:</p>\n\n<pre><code>if(islower(key[i])) {\n  key[i] = key[i] - 'a';\n</code></pre>\n\n<p>Find the string length of <code>key[]</code> before changing its contents and use that</p>\n\n<pre><code> int n = strlen(key);\n ...\n // k = j % strlen(key);\n k = j % n;\n</code></pre>\n"}], "owner": {"reputation": 1728, "user_id": 6557958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QosUa.jpg?s=128&g=1", "display_name": "Yudhishthir Singh", "link": "https://stackoverflow.com/users/6557958/yudhishthir-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "closed_date": 1500189013, "accepted_answer_id": 38233576, "answer_count": 1, "score": -1, "last_activity_date": 1469847270, "creation_date": 1467837548, "last_edit_date": 1469847270, "question_id": 38233381, "link": "https://stackoverflow.com/questions/38233381/whats-wrong-with-my-vigenere-cypher-cs50", "closed_reason": "Not suitable for this site", "title": "What&#39;s wrong with my Vigenere Cypher CS50", "body": "<p>My code for <a href=\"https://manual.cs50.net/library/\" rel=\"nofollow\">CS50</a> pset2 Vigenere cypher is as follows. Please help me find the bug. This code basically does nothing when the key includes the letter 'a'. It says \"Floating Point Exception\". I don't know what that means. Please go through the code and tell me what the bug is.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;cs50.h&gt;\n#include&lt;ctype.h&gt;\n#include&lt;string.h&gt;\n\nint main(int argc, string argv[])\n{\n    //check if there are only two command line arguments//\n\n    if (argc!=2)\n    {\n        printf(\"Please enter a valid input!\\n\");\n        return 1;\n    };\n\n    string key = argv[1];\n\n    for(int i=0, n=strlen(key); i &lt; n; i++)\n    {\n        //check if there is any number in the key//\n\n        if(!isalpha(key[i]))\n        {\n            printf(\"Invalid Key!\\n\");\n            return 1;\n        };\n\n        //converting the key into ints.//\n\n        if(islower(key[i]))\n        {\n            key[i] = key[i] - 'a';\n        }\n        else if(isupper(key[i]))\n        {\n            key[i] = key[i] - 'A';\n        };\n    };\n\n    //prompt user for the string//\n\n    string s = GetString();\n\n    int c;\n    int k;\n    int stln = strlen(s);\n    int kyln = strlen(key);          \n\n    for(int j = 0, m = strlen(s); j &lt; m; j++)\n    {\n        if(islower(s[j]))\n        {\n            s[j] = s[j] - 'a';\n\n            //for wrapping around the key//\n\n            if(stln &gt; kyln)\n            {\n                k = j % strlen(key);\n                c = (s[j] + key[k]) % 26;\n                s[j] = 'a' + c;\n            } \n            else\n            {\n                c = (s[j] + key[j]) % 26;\n                s[j] = 'a' + c;\n            };\n         } \n         else if (isupper(s[j]))\n         {\n             s[j] = s[j] - 'A';\n\n             //for wrapping around the key//\n\n             k = j % strlen(key);\n\n             if(stln &gt; kyln)\n             {\n                 c = (s[j] + key[k]) % 26;\n                 s[j] = 'A' + c;\n             } \n             else\n             {\n                 c = (s[j] + key[j]) % 26;\n                 s[j] = 'A' + c;\n             };\n         };\n\n    };\n\n    printf(\"%s\\n\", s);\n\n};\n</code></pre>\n"}, {"tags": ["c", "arrays", "fortran"], "comments": [{"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1467836564, "post_id": 38233076, "comment_id": 63887821, "body": "New to programming?  New to Fortran and C and pointers and malloc and free?  That&#39;s a lot to ask."}, {"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 2, "creation_date": 1467845785, "post_id": 38233076, "comment_id": 63891754, "body": "Probably a duplicate of <a href=\"http://stackoverflow.com/questions/27582715/passing-a-two-dimentional-array-from-fortran-to-c\" title=\"passing a two dimentional array from fortran to c\">stackoverflow.com/questions/27582715/&hellip;</a>"}, {"owner": {"reputation": 5062, "user_id": 1280439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18afee2ca2391bf36237de79d765eca4?s=128&d=identicon&r=PG", "display_name": "Ian Bush", "link": "https://stackoverflow.com/users/1280439/ian-bush"}, "edited": false, "score": 2, "creation_date": 1467921673, "post_id": 38233076, "comment_id": 63929671, "body": "Seriously if you are new to programming learn to walk before you can jog. Learn how to pass arguments/parameters within the languages of choice, then learn how to pass entities between C and Fortran, and only then add CUDA to the mix. This will save you much pain in the long run."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6557932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554226cb5e30815bee071fa343fc1b88?s=128&d=identicon&r=PG&f=1", "display_name": "LeeVining", "link": "https://stackoverflow.com/users/6557932/leevining"}, "edited": false, "score": 0, "creation_date": 1468350015, "post_id": 38317621, "comment_id": 64087926, "body": "Hey clarasoft-it, Thanks for the help. I ended up posting my solution as well. From what I have learned, Fortran values are passed by reference so pointers are necessary. Also the underscore is required after the function name becuase that&#39;s what the internet told me to do :) Thanks again!"}], "tags": [], "owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "is_accepted": false, "score": 0, "last_activity_date": 1468278738, "creation_date": 1468278738, "answer_id": 38317621, "question_id": 38233076, "link": "https://stackoverflow.com/questions/38233076/transferring-fortran-multid-arrays-to-c/38317621#38317621", "title": "Transferring Fortran multiD arrays to C", "body": "<p>Why is the function name in the FORTRAN program not the same? I would use the same name in both programs but perhaps this is FORTRAN-related. I will use the C function name you wrote for this answer and yes, I agree that this is quite a task for a beginner. This will not be a complete solution but should steer you in the right direction (hopefully). First... arrays in C have fixed dimensions determined at compile time. So your function declaration will not compile. If your intention is to dereference the dimension pointers in the array dimention parameters, this will not work because it's not executable code; those are parameter declarations used only for compilation.</p>\n\n<p>Second, it seems like you want to pass arrays that can have different dimensions from one call to another or that you don't know in advance how many elements will be in your arrays. Assuming this, you need only pass the address of your arrays (assuming your dimensions are always the right ones). Your function prototype could then be: </p>\n\n<pre><code>void cuda_(int *idim, int *jdim, int *kdim, float *U, float* V, float* W);\n</code></pre>\n\n<p>Your function could be implemented as follow (so to show you the pointer arithmetic):</p>\n\n<pre><code>void cuda_(int *idim, int *jdim, int *kdim, float* U, float* V, float* W)\n{\n  int i, j, k;\n\n  // Assuming you want to process each individual array \n  // items one after the other; this to show pointer arithmetic\n\n  for (i=0; i&lt;*idim; i++)  {\n\n    for (j=0; j&lt;*jdim; j++)  {\n\n      for (k=0; k&lt;*kdim; k++)  {\n\n          // Do whatever with the i,j,kth element;   \n          // We assign unique values so you can check \n          // that this example accesses the right array elements            \n\n          *(U + i * sizeof(float) + j * sizeof(float) + k) = i + j + k;        \n          *(V + i * sizeof(float) + j * sizeof(float) + k) = 2*i + 2*j + 2*k;\n          *(W + i * sizeof(float) + j * sizeof(float) + k) = 3*i + 3*j + 3*k;\n\n      }\n\n    }\n\n  }\n\n  return;\n}\n</code></pre>\n\n<p>Of course, you need to test this example thoroughly to make sure that this is what you really intend on doing and that I did map the 3D array properly (I mapped it over a one-dimentional array assuming that this is how it is implemented in your FORTRAN program; otherwise, you will have to come up with the proper pointer arithmitic but the principle will be the same as in the examples). I did very superficial testing of this code and be warned that pointer manipulation is tricky and error prone! Good luck.</p>\n\n<p>Now, and this is of secondary importance but I feel the point should be made. I don't see why you want to pass the array dimensions as pointers; perhaps it's a requirement for FORTRAN (that is maybe you cannot pass parameters by value/copy). If you can pass parameters by copy (as opposed to by reference), then I suggest the following change:</p>\n\n<pre><code>// Prototype:\n\nvoid cuda_(int idim, int jdim, int kdim, float* U, float* V, float* W);\n\n// Implementation:\n\nvoid cuda_(int idim, int jdim, int kdim, float* U, float* V, float* W)\n{\n  int i, j, k;\n\n\n  for (i=0; i&lt;idim; i++)  {\n\n    for (j=0; j&lt;jdim; j++)  {\n\n      for (k=0; k&lt;kdim; k++)  {\n\n          *(U + i * sizeof(float) + j * sizeof(float) + k) = i + j + k;        \n          *(V + i * sizeof(float) + j * sizeof(float) + k) = 2*i + 2*j + 2*k;\n          *(W + i * sizeof(float) + j * sizeof(float) + k) = 3*i + 3*j + 3*k;\n\n      }\n\n    }\n\n  }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6557932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554226cb5e30815bee071fa343fc1b88?s=128&d=identicon&r=PG&f=1", "display_name": "LeeVining", "link": "https://stackoverflow.com/users/6557932/leevining"}, "is_accepted": false, "score": 0, "last_activity_date": 1468350562, "last_edit_date": 1468350562, "creation_date": 1468349934, "answer_id": 38336895, "question_id": 38233076, "link": "https://stackoverflow.com/questions/38233076/transferring-fortran-multid-arrays-to-c/38336895#38336895", "title": "Transferring Fortran multiD arrays to C", "body": "<p>The easiest way I could figure out to do this was to pass the array as a 1D array. Then in the c function to create new 3D arrays with the proper dimensions and the then fill them using the 1 D arrays that were passed. I set the modified arrays to be referenced in the same way as the FORTRAN array to hopefully make accessing the array easier. I will attach my C solution below: </p>\n\n<pre><code>extern \"C\" void cuda_(double *ptr_u, double *ptr_v, double *ptr_w, int *nx, int *ny, int *nz)\n{\n\n\n     //Creating new arrays for U,V,W\n     int i,j,k,imax,jmax,kmax,ct=0;\n     imax = *nx;\n     jmax = *ny;\n     kmax = *nz;\n\n     double V[imax][jmax][kmax], W[imax][jmax][kmax], U[imax][jmax][kmax];\n\n     for (k = 0; k &lt; kmax; k++)\n     {\n          for (j = 0; j &lt; jmax; j++)\n          {\n               for (i = 0; i &lt; imax; i++)\n               {\n                    U[i][j][k] = ptr_u[ct];\n                    V[i][j][k] = ptr_v[ct];\n                    W[i][j][k] = ptr_w[ct];\n                    ct++;\n               }\n          }\n     }\n</code></pre>\n\n<p>If anyone has any comments on this solution, feel free to comment. I'm sure there is a better way of doing this somewhere out there!</p>\n"}], "owner": {"reputation": 1, "user_id": 6557932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554226cb5e30815bee071fa343fc1b88?s=128&d=identicon&r=PG&f=1", "display_name": "LeeVining", "link": "https://stackoverflow.com/users/6557932/leevining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468350562, "creation_date": 1467836493, "question_id": 38233076, "link": "https://stackoverflow.com/questions/38233076/transferring-fortran-multid-arrays-to-c", "title": "Transferring Fortran multiD arrays to C", "body": "<p>I am having issues transferring 3D arrays from Fortran to C. I have variables which represent the size of the array (idim, jdim, kdim) but I am having a tough time writing a C code to receive arrays that have size of these values. I will attach the Fortran &amp; C code I have right now.</p>\n\n<p>FORTRAN:</p>\n\n<pre><code>  ! Transfer u,v,w to CPU\n\n  idim = imax_ - imin_\n  jdim = jmax_ - jmin_\n  kdim = kmax_ - kmin_\n  CALL CUDA(idim,jdim,kdim,u,v,w)\n</code></pre>\n\n<p>and C:</p>\n\n<pre><code>extern \"C\" void cuda_(int *idim, int *jdim, int *kdim, float U[*kdim][*jdim][*idim], float V[*kdim][*jdim][*idim], float W[*kdim][*jdim][*idim])\n{\n</code></pre>\n\n<p>I am working on accelerating an already existing code with GPU programming, but am still relatively new to programming, so please take that into consideration.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c", "linux", "qprocess"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467835944, "post_id": 38232863, "comment_id": 63887487, "body": "The <code>popen()</code> function takes two arguments: the command string and either <code>&quot;r&quot;</code> or <code>&quot;w&quot;</code> depending on whether you want to write to the standard input or read from the standard output of the command that&#39;s run.  The partial error message you show is giving you that information \u2014 command and mode.  If you want to relay your program&#39;s standard input to the command you run, you&#39;ll need to loop, reading data from standard input and writing to the successfully opened <code>f</code> file stream.  And you should consider using <code>&lt;cstdio&gt;</code> in place of <code>&lt;stdio.h&gt;</code>; your existing code is C code (as well as C++)."}, {"owner": {"reputation": 148, "user_id": 6199569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLXw3.jpg?s=128&g=1", "display_name": "Matias Barone", "link": "https://stackoverflow.com/users/6199569/matias-barone"}, "edited": false, "score": 0, "creation_date": 1467836044, "post_id": 38232863, "comment_id": 63887536, "body": "I have something similar, in my case I use shared memory. In the shared memory I have a command buffer that one of the process writes in and the other read from."}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 1, "creation_date": 1467836642, "post_id": 38232863, "comment_id": 63887861, "body": "popen( &quot;mpg321 -R ewqe&quot;, &quot;w&quot; )"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467841785, "post_id": 38234315, "comment_id": 63890327, "body": "Is it in c++?  because I am aiming for c++ code. When I tried to run it.. i.e. #include &lt;QProcess&gt; It is showing : fatal error: QProcess: No such file or directory Can you help me with this"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842541, "post_id": 38234315, "comment_id": 63890672, "body": "I am trying using sudo apt-get install build-essential libgl1-mesa-dev But still its showing same error."}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842655, "post_id": 38234315, "comment_id": 63890738, "body": "Can you suggest me how to install QT in my linux (raspberry)"}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842846, "post_id": 38234315, "comment_id": 63890820, "body": "QProcess is part of the Qt Framework. You will need to install the Qt headers. Maybe something like this: apt-get install qt-dev-tools"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842921, "post_id": 38234315, "comment_id": 63890849, "body": "Sure.. I il try and let you know"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467843872, "post_id": 38234315, "comment_id": 63891184, "body": "apt-get install qt-dev-tools  and sudo apt-get install qtcreator Still not working..same error"}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467844295, "post_id": 38234315, "comment_id": 63891311, "body": "Your project is in CMake? Use find_package(Qt5 COMPONENTS QTCORE) in you CMakeLists"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467845201, "post_id": 38234315, "comment_id": 63891562, "body": "No..i am just creating a small code.  and compiling using g++ test.cpp -o test    Stil not working."}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467845644, "post_id": 38234315, "comment_id": 63891702, "body": "It&#39;s a lot of work manually build. See: <a href=\"http://resources.esri.com/help/9.3/arcgisengine/com_cpp/Cpp/programming/qt/makeqt.htm\" rel=\"nofollow noreferrer\">resources.esri.com/help/9.3/arcgisengine/com_cpp/Cpp/&hellip;</a> Recommend you use QMake or CMake to it."}], "tags": [], "owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "is_accepted": false, "score": 0, "last_activity_date": 1467841559, "creation_date": 1467841559, "answer_id": 38234315, "question_id": 38232863, "link": "https://stackoverflow.com/questions/38232863/qprocess-working-example-c/38234315#38234315", "title": "QProcess working example - C++", "body": "<p>Try this:</p>\n\n<pre><code>QProcess subprocess;\nsubprocess.start(\"mpg321\", QStringList()  &lt;&lt; \"-R\" &lt;&lt; \"anyword\");\nif (!subprocess.waitForStarted())\n    return false;\n\nsubprocess.write(\"LOAD test.mp3\\n\");\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2956, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1467841559, "creation_date": 1467835669, "last_edit_date": 1467839739, "question_id": 38232863, "link": "https://stackoverflow.com/questions/38232863/qprocess-working-example-c", "title": "QProcess working example - C++", "body": "<p>I am trying to start external programs and to communicate with them.</p>\n\n<p>I want to run this application in background using QProcess. And also pass commands as well from this code to this process.</p>\n\n<p>Can someone throw light on this and direct me accordingly to execute commands as well when code is running.</p>\n\n<p>Something like this in python but for c++ using QProcess</p>\n\n<pre><code>p = subprocess.Popen(['mpg321', '-R', 'anyword'], stdin=PIPE)\np.stdin.write('LOAD test.mp3\\n')\n</code></pre>\n"}, {"tags": ["c", "prompt"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467833177, "post_id": 38232190, "comment_id": 63886006, "body": "The <code>gets()</code> function from <code>stdio.h</code> gets <code>stdin</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1467833313, "post_id": 38232190, "comment_id": 63886073, "body": "OT: @EliSadoff <code>gets()</code> isn&#39;t C any more for good reasons, do <b>not</b> use it! Use <code>fgets()</code> instead."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 5, "creation_date": 1467833361, "post_id": 38232190, "comment_id": 63886102, "body": "@EliSadoff <code>gets</code> is so vile and evil it is no longer part of the standard library, and should be avoided with extreme prejudice."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467833438, "post_id": 38232190, "comment_id": 63886148, "body": "There is no simple answer. The user interface is an entire topic in itself, often at least equal to the actual task in hand."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1467837825, "post_id": 38232190, "comment_id": 63888503, "body": "No magic, <i>prompt</i>, <i>read input</i>, <i>validate input</i>, <i>handle error condition as required</i>. It just depends on your requirements. The most general would be <i>prompt</i>, then <i>while (read invalid) repeat..*</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 0, "creation_date": 1467838467, "post_id": 38232789, "comment_id": 63888786, "body": "ooooh.... the GoF police are gonna get you for that. :)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1467839050, "post_id": 38232789, "comment_id": 63889100, "body": "To be fair, some of the very same people who would claim -- not without justification -- that using globals is poor form would also claim that using the Singleton pattern is poor form.  Indeed, several of the same reasons apply.  I am all for thinking for yourself, but I&#39;m also for benefiting from experience, both mine and others&#39;.  Design pattern usage is not inherently a reasonable measure of code quality, but design patterns, thoughtfully chosen and applied, <i>can</i> help you write quality code."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1467864010, "post_id": 38232789, "comment_id": 63895872, "body": "@JohnBollinger Design patterns, like any other tool in the toolbox (e.g. globals) have their uses. To use one or not, should be decided with care (i.e. not slavishly). I use object pools a lot, because I find them useful. I also create a singleton [of sorts] that combines a bunch of items [that would otherwise be globals]. Any technique being used, should be evaluated in the particular context: Why are we using it? What value does it provide in this particular instance? What issues does it solve [or potentially create]?"}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 2, "last_activity_date": 1467835398, "creation_date": 1467835398, "answer_id": 38232789, "question_id": 38232190, "link": "https://stackoverflow.com/questions/38232190/are-there-well-established-design-patterns-on-implementing-a-user-prompt/38232789#38232789", "title": "Are there well-established design patterns on implementing a user prompt?", "body": "<p>No, there is no \"design pattern\" for a user prompt.</p>\n\n<p>Design patterns are of marginal value, at best.  They were created in arm-flapping response to the evident catastrophe that most programmers are unable to think for themselves.  Consequently, they are given a lengthy catalogue of previous thoughts, along with finely detailed instructions about how to map their thoughts to these cast-in-stone homologues.</p>\n\n<p>Here's a brilliant example of a \"design pattern\": it's somehow EVIL to use a global variable.  So, instead, instantiate a Singleton class (which--if you're not careful--will require you to employ the brokered services of a SingletonFactory [but I digress]) and provide \"getter\" and \"setter\" methods that access the encapsulated datum.  Result: instead of one line of code that's out there, on the ledge, provide fifteen lines of code that are out there, on the ledge.  HOGWASH!</p>\n\n<p>Many will take offense at this statement.  If they but thought about it, they would realize that they have fallen victim to a sham.  Design patterns are like rubrics in a \"Common Core\" English essay assignment: assume that the student is utterly unable to generate creative, properly structured English by himself, and so provide ridiculously detailed \"guidance\" on just what to say and just how to say it.</p>\n\n<p>Think for yourself.  That's the best advice anyone can give you, anywhere, ever.</p>\n"}], "owner": {"reputation": 635, "user_id": 3787646, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b69f4bba40b8924b4dd789d0d3be9a53?s=128&d=identicon&r=PG&f=1", "display_name": "Multisync", "link": "https://stackoverflow.com/users/3787646/multisync"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1467841371, "answer_count": 1, "score": -1, "last_activity_date": 1467835398, "creation_date": 1467833081, "question_id": 38232190, "link": "https://stackoverflow.com/questions/38232190/are-there-well-established-design-patterns-on-implementing-a-user-prompt", "closed_reason": "Not suitable for this site", "title": "Are there well-established design patterns on implementing a user prompt?", "body": "<p>I'm working on a embedded project which reads a joystick and moves an actuator within a 3d space accordingly. Now I would like to provide a user prompt available over serial line as an alternative option as user input. User input will be G-Code.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/G-code\" rel=\"nofollow\">https://en.wikipedia.org/wiki/G-code</a>.</p>\n\n<p>I'm not unexperienced with creating C code, however, I never had to deal with text input before. Are there any well established design patterns on how software of this kind is implemented in a easy-to-read/maintanable way?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 9, "creation_date": 1467832639, "post_id": 38232049, "comment_id": 63885737, "body": "<code>scanf(&quot;%d&quot;,&amp;c)</code> is not an overflow or underflow; it is Undefined Behavior, period."}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1467832979, "post_id": 38232049, "comment_id": 63885917, "body": "To further complete @aschepler, the most likely outcome is clobbering 3 more bytes after the c variable, perhaps even messing with the return address itself. Assuming the compiler (optimizer) doesn&#39;t mess with stuff and it behaves similar to the manual intuitive translation."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6541764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b47bb181e799ca7204f1db19ee6565c?s=128&d=identicon&r=PG&f=1", "display_name": "bigguy", "link": "https://stackoverflow.com/users/6541764/bigguy"}, "edited": false, "score": 0, "creation_date": 1467837531, "post_id": 38232164, "comment_id": 63888340, "body": "can you explain me what is an undefined behavior and what is the difference between overflows?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 51, "user_id": 6541764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b47bb181e799ca7204f1db19ee6565c?s=128&d=identicon&r=PG&f=1", "display_name": "bigguy", "link": "https://stackoverflow.com/users/6541764/bigguy"}, "edited": false, "score": 0, "creation_date": 1467906566, "post_id": 38232164, "comment_id": 63921009, "body": "@bigguy: You might like to have a look here: <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Undefined_behavior</a> or here <a href=\"http://stackoverflow.com/a/18420754/694576\">stackoverflow.com/a/18420754/694576</a> or here <a href=\"https://www.google.com/search?q=what+is+undefined+behaviour\" rel=\"nofollow noreferrer\">google.com/search?q=what+is+undefined+behaviour</a>"}], "tags": [], "owner": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "is_accepted": false, "score": 6, "last_activity_date": 1467837079, "last_edit_date": 1467837079, "creation_date": 1467832977, "answer_id": 38232164, "question_id": 38232049, "link": "https://stackoverflow.com/questions/38232049/overflows-and-underflows-in-c-language/38232164#38232164", "title": "Overflows and underflows in C language", "body": "<p><code>scanf</code>'s <code>%d</code> expects an <code>int</code>, so giving it anything else is undefined behavior.<br>\nYou should do this:</p>\n\n<pre><code>int d;\nscanf(\"%d\", &amp;d);\nwhatevertype c = (whatevertype)d;\n</code></pre>\n\n<p>However, signed integer overflow is undefined. But if you use unsigned types, like</p>\n\n<pre><code>unsigned char c = (unsigned char)d;\n</code></pre>\n\n<p>Then <code>c</code> is guaranteed to be <code>d</code> modulus 2 to the power of the number of bits in an <code>unsigned char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 5777040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7de14ea61424d14535ecaed5d91beae6?s=128&d=identicon&r=PG&f=1", "display_name": "shaul boyer", "link": "https://stackoverflow.com/users/5777040/shaul-boyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1467843750, "creation_date": 1467843750, "answer_id": 38234753, "question_id": 38232049, "link": "https://stackoverflow.com/questions/38232049/overflows-and-underflows-in-c-language/38234753#38234753", "title": "Overflows and underflows in C language", "body": "<p>Every compiler is running on a specific machine, on a specific hardware. </p>\n\n<p>Say for example that our machine/processor signed integer is in the range of 16 bits. This means that MAX_INT will be 0x7fff hex value, which is 32767 decimal value and MIN_INT will be 0x8000 hex vale, which is -32768 decimal value. </p>\n\n<p>Most machines has ALU control register that defines how signed integers will behave in case of an overflow. This register generally has a saturation flag.</p>\n\n<p><strong>Overflow Example:</strong>\nIf the saturation flag is set, than in case that the result of the last signed integer ALU operation is bigger than MAX_INT, the result will be set to MAX_INT.\nfor example if the last operation was adding 0x7ffe to 0x2 than the result will be 0x7fff.</p>\n\n<p>If the saturation flag is not set, than in case that the result of the last signed integer ALU operation is bigger than MAX_INT, the result will probably be set to the lower 16 bits of the correct result. In our case 0x7ffe+0x2=0x8000, which is the minimum integer.</p>\n\n<p>In case of unsigned integers the compiler guarantees as that the result will be according to the definition of unsigned int addition in C.</p>\n\n<p><strong>Underflow example:</strong>\nEvery machine has MIN_FLOAT definition. And again if the saturation flag is set than a result that is smaller than MIN_FLOAT will be rounded to MIN_FLOAT. other wise the result will be according to the operation of the processor. (Search in the internet to understand the terms Mantissa and exponent if you are interested to know on floating point representation and operations).</p>\n"}, {"tags": [], "owner": {"reputation": 3092, "user_id": 6330448, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/MeC1c.png?s=128&g=1", "display_name": "tryKuldeepTanwar", "link": "https://stackoverflow.com/users/6330448/trykuldeeptanwar"}, "is_accepted": false, "score": 0, "last_activity_date": 1467877586, "creation_date": 1467877586, "answer_id": 38240098, "question_id": 38232049, "link": "https://stackoverflow.com/questions/38232049/overflows-and-underflows-in-c-language/38240098#38240098", "title": "Overflows and underflows in C language", "body": "<p>The Reason you are getting a Overflow in the first printf statement is because you have defined the char as a signed char and if You print them in an %d format which is integer You'll get a range from <strong>0-127</strong> and <strong>-1 to -128</strong> because as we all know char consume one byte in memory and by assigning them as signed character you'll divide them in positive and negative values in simple words a unsigned byte ranges from <strong>0 to 255</strong> and soo a signed character will give you both positive as well as negative value range from 0-127 and -1 to -128.</p>\n"}], "owner": {"reputation": 51, "user_id": 6541764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b47bb181e799ca7204f1db19ee6565c?s=128&d=identicon&r=PG&f=1", "display_name": "bigguy", "link": "https://stackoverflow.com/users/6541764/bigguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1467877586, "creation_date": 1467832507, "last_edit_date": 1467837385, "question_id": 38232049, "link": "https://stackoverflow.com/questions/38232049/overflows-and-underflows-in-c-language", "title": "Overflows and underflows in C language", "body": "<p>Can you guy explain me how overflows and underflows works for <code>signed char</code> and <code>unsigned char</code>?</p>\n\n<pre><code>int main () {\n    signed char c;\n\n    scanf(\"%d\",&amp;c);\n    printf(\"%d\\n\",c);\n    printf(\"%c\\n\",c);\n\nreturn 0;\n}\n</code></pre>\n\n<p>In this case, if thanks to <code>scanf</code>, I put <code>c=200</code> there is an overflow and this is showed by the first <code>printf</code>.  </p>\n\n<p>The second <code>printf</code> gives me the same ASCII symbol of 200...<br>\nWhy?</p>\n"}, {"tags": ["c", "struct", "hmac", "memory-layout"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1467832210, "post_id": 38231852, "comment_id": 63885515, "body": "There is no truly portable way to do this, and in some cases, no way to do it <i>at all</i>. OS/400, for example, <i>requires</i> pointer variables, including structure members, reside on a 16-byte paragraph boundary, and will enforce this with extreme prejudice regardless of how much, or what form, of packing you request for a struct type containing members of that ilk."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1467832241, "post_id": 38231852, "comment_id": 63885529, "body": "Why not just calculate HMAC on the <code>sizeof(instance_of_structure)</code>. If you&#39;d prefer to use a pointer, then <code>sizeof(*ptr_to_struct)</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1467832257, "post_id": 38231852, "comment_id": 63885539, "body": "@WhozCraig and it is really frustrating as it is a <i>very</i> common problem.."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1467832290, "post_id": 38231852, "comment_id": 63885559, "body": "@user590028 OP is trying to avoid possibly indeterminate content of padding bits."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1467832295, "post_id": 38231852, "comment_id": 63885561, "body": "@user590028 Because this size will be different on different compilers, which the OP sees as a problem"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1467832476, "post_id": 38231852, "comment_id": 63885659, "body": "The only portable way would be to manually copy the fields into a memory buffer one by one."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1467832498, "post_id": 38231852, "comment_id": 63885674, "body": "Ahh -- you mean you OP want&#39;s to calculate platform independent HMAC that disregards structure packing?"}, {"owner": {"reputation": 4002, "user_id": 49561, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/67750c14e5134a187229d619d8a4342e?s=128&d=identicon&r=PG", "display_name": "cdecker", "link": "https://stackoverflow.com/users/49561/cdecker"}, "edited": false, "score": 1, "creation_date": 1467832573, "post_id": 38231852, "comment_id": 63885711, "body": "The best solution I came up with so far is to have a buffer field with all the data and then also have pointers in the struct that point into that buffer at the appropriate places, but it&#39;s a bit tricky to ensure these pointers always point to the correct location."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 1, "creation_date": 1467832711, "post_id": 38231852, "comment_id": 63885774, "body": "The best approach is Eugene Sh&#39;s suggestion."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1467833095, "post_id": 38231852, "comment_id": 63885971, "body": "But even given the theory above, the most common (and very deprecated, but mostly working) approach is still to rely on the <code>packed</code> attribute :D (Disclaimer - I am not advocating it by any means)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1467839897, "post_id": 38231852, "comment_id": 63889521, "body": "@cdecker <i>The best solution I came up with so far is to have a buffer field with all the data and then also have pointers in the struct that point into that buffer at the appropriate places</i>  That won&#39;t work in general.  The object you&#39;re pointing to might not be properly aligned for the architecture you&#39;re running on.  For example, <a href=\"https://docs.oracle.com/cd/E19205-01/819-5265/bjbbi/index.html\" rel=\"nofollow noreferrer\">simple <code>long</code> values on SPARC hardware</a>.  See <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\" title=\"what is the strict aliasing rule\">stackoverflow.com/questions/98650/&hellip;</a>"}], "owner": {"reputation": 4002, "user_id": 49561, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/67750c14e5134a187229d619d8a4342e?s=128&d=identicon&r=PG", "display_name": "cdecker", "link": "https://stackoverflow.com/users/49561/cdecker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467831768, "creation_date": 1467831768, "question_id": 38231852, "link": "https://stackoverflow.com/questions/38231852/ensuring-a-specific-memory-layout-for-a-c-struct", "title": "Ensuring a specific memory layout for a C struct", "body": "<p>I'm trying to build a struct that holds various fields, of varying size. Since I'd like to also compute an HMAC over the concatenated fields I thought it might be nice to just be able to pass a pointer to the struct instance to the HMAC function. However, I'm fearing that some compilers may add padding to between the struct fields, which would lead to inconsistent HMAC results.</p>\n\n<p>Is there a portable way to ensure that the compiler does not add padding between the fields?</p>\n"}, {"tags": ["c", "gcc", "segmentation-fault", "pthreads", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1467831636, "post_id": 38231616, "comment_id": 63885192, "body": "OT: <code>(void*)0</code> is expected to be the same as <code>NULL</code>."}, {"owner": {"reputation": 93, "user_id": 2669989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55041c968d1eafac726713deaf09580b?s=128&d=identicon&r=PG", "display_name": "jdp", "link": "https://stackoverflow.com/users/2669989/jdp"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1467831673, "post_id": 38231616, "comment_id": 63885207, "body": "@alk: Thanks for your input, Its already there but I wanted to rule out any un-expected problem like segmentation fault. This may be in my util program also."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1467831729, "post_id": 38231616, "comment_id": 63885245, "body": "OT^2: Thou shalt not printf from signal handlers."}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 0, "creation_date": 1467839005, "post_id": 38231616, "comment_id": 63889067, "body": "@OP Do a <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man 7 signal</a> and look for the list of signal safe functions."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467859086, "post_id": 38231616, "comment_id": 63894990, "body": "the posted code does NOT cleanly compile.  So your first step is to correct all the messages output by the compiler.  As a hint: in the <code>main()</code> function, the <code>argc</code> and <code>argv</code> parameters are not used, so the signature for <code>main()</code> should be: <code>int main( void )</code>.   for other functions: if a parameter is not used, then the first statement in the body of the function should be something similar to: <code>(void)data;</code>   There are unused variables.  There are variables set but not used like <code>ret</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467859256, "post_id": 38231616, "comment_id": 63895022, "body": "when calling system functions, like <code>pthread_create()</code>, always check the returned value to assure the function was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467862681, "post_id": 38231616, "comment_id": 63895630, "body": "DO NOT call <code>printf()</code> from inside a signal handler However, <code>write()</code> is acceptable"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 2669989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55041c968d1eafac726713deaf09580b?s=128&d=identicon&r=PG", "display_name": "jdp", "link": "https://stackoverflow.com/users/2669989/jdp"}, "edited": false, "score": 0, "creation_date": 1467831816, "post_id": 38231771, "comment_id": 63885298, "body": "Ohhh. Nice catch. I was overlooking it and concentrating on signal handler. You resolved my one of two concern <code>Thread1 cancelled</code> raising this question. Thanks."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 3, "last_activity_date": 1467831466, "creation_date": 1467831466, "answer_id": 38231771, "question_id": 38231616, "link": "https://stackoverflow.com/questions/38231616/segmentation-fault-while-system-function-call/38231771#38231771", "title": "Segmentation fault while system function call", "body": "<p>This was just a \"typo\" bug.</p>\n\n<p>Change:</p>\n\n<pre><code>    pthread_create(&amp;thread1, NULL, thread1_worker, (void*) NULL);\n    pthread_create(&amp;thread1, NULL, thread2_worker, (void*) NULL);\n    pthread_create(&amp;thread1, NULL, thread3_worker, (void*) NULL);\n</code></pre>\n\n<p>Into:</p>\n\n<pre><code>    pthread_create(&amp;thread1, NULL, thread1_worker, (void*) NULL);\n    pthread_create(&amp;thread2, NULL, thread2_worker, (void*) NULL);\n    pthread_create(&amp;thread3, NULL, thread3_worker, (void*) NULL);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 2669989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55041c968d1eafac726713deaf09580b?s=128&d=identicon&r=PG", "display_name": "jdp", "link": "https://stackoverflow.com/users/2669989/jdp"}, "edited": false, "score": 0, "creation_date": 1467909770, "post_id": 38237036, "comment_id": 63922926, "body": "Thanks for your response. Actually <code>util</code> is stored on device <code>&#47;usr&#47;bin</code> so in the reference code above its like that. One point I want to mention here as you suspect the <code>util</code> might have the actual problem, <code>util</code> is also handling same number of signals as the <code>testapp</code>. I have shared the link to the <code>util</code> program in my original question."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1467862594, "last_edit_date": 1467862594, "creation_date": 1467861243, "answer_id": 38237036, "question_id": 38231616, "link": "https://stackoverflow.com/questions/38231616/segmentation-fault-while-system-function-call/38237036#38237036", "title": "Segmentation fault while system function call", "body": "<p>correcting the code, per the comments results in:</p>\n\n<pre><code>/*******  testapp.c  *****************/\n/* gcc testapp.c -o testapp -pthread */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n\n#define SLEEP1  250\n#define SLEEP2  250\n#define SLEEP3  250\n\npthread_t   thread1;\npthread_t   thread2;\npthread_t   thread3;\n\nstatic volatile sig_atomic_t isRunning = 1;\n\nvoid signal_handler(int signal)\n{\n    int rc = 0;\n    char buffer[1024];\n\n    switch (signal)\n    {\n        case SIGINT:\n        case SIGTERM:\n        case SIGQUIT:\n            write( 1, \"Signal generated, cancelling threads...\\n\");\n            // Graceful shutdown\n            //isRunning = 0; //commented to see the segmentation fault issue\n            rc = pthread_cancel(thread1);\n            if( rc )\n            {\n                write(1, \"signal_handler:pthread_cancel-1 failed\\n\" ):\n            }\n\n            write( 1, \"Thread1 cancelled\\n\");\n\n\n            rc = pthread_cancel(thread2);\n            if( rc )\n            {\n                write( 1, \"signal_handler:pthread_cancel-2 failed\\n\");\n            }\n\n            write( 1, \"Thread2 cancelled\\n\");\n\n\n            rc = pthread_cancel(thread3);\n            if( rc )\n            {\n                write( 1, \"signal_handler:pthread_cancel-3 failed\\n\");\n            }\n\n            \"Thread3 cancelled\\n\");\n            break;\n\n        default:\n            break;\n    } // end switch\n} // end function: signal_handler\n\n\nvoid* thread1_worker(void* data)\n{\n    struct timeval timeout;\n    int ret = 0;\n\n    (void)data;\n\n    do\n    {\n        printf(\"Requesting cmd1\\n\");\n        ret = system(\"util -c:cmd1 -v 2&gt;&gt; /tmp/stderr.log\");\n        if( ret )\n        {\n            perror( \"system-util result\" );\n        }\n\n        timeout.tv_sec  = 0;\n        timeout.tv_usec = SLEEP1 * 1000;  //milliseconds\n        select(0, NULL, NULL, NULL, &amp;timeout);\n    } while(isRunning);\n\n    printf(\"Exiting thread1...\\n\");\n    pthread_exit( NULL );\n} // end function: thread1_worker\n\n\nvoid* thread2_worker(void* data)\n{\n    struct timeval timeout;\n    int ret = 0;\n\n    (void)data;\n\n    do\n    {\n        printf(\"Requesting cmd2\\n\");\n        ret = system(\"util -c:cmd2 -v 2&gt;&gt; /tmp/stderr.log\");\n        if( ret )\n        {\n            perror( \"system-util result\" );\n        }\n\n        timeout.tv_sec  = 0;\n        timeout.tv_usec = SLEEP2 * 1000;  //milliseconds\n        select(0, NULL, NULL, NULL, &amp;timeout);\n    }while(isRunning);\n\n    printf(\"Exiting thread2...\\n\");\n    pthread_exit((void*)0);\n} // end function: thread2_worker\n\n\nvoid* thread3_worker(void* data)\n{\n    struct timeval timeout;\n    int ret = 0;\n\n    (void)data;\n\n    do\n    {\n        printf(\"Requesting cmd3\\n\");\n        ret = system(\"util -c:cmd3 -v 2&gt;&gt; /tmp/stderr.log\");\n        if( ret )\n        {\n            perror( \"system-util result\" );\n        }\n\n        timeout.tv_sec  = 0;\n        timeout.tv_usec = SLEEP3 * 1000;  //milliseconds\n        select(0, NULL, NULL, NULL, &amp;timeout);\n    }while(isRunning);\n\n    printf(\"Exiting thread3...\\n\");\n    pthread_exit((void*)0);\n} // end function: thread3_worker\n\n\nint main( void )\n{\n    signal(SIGTERM, signal_handler);\n    signal(SIGINT, signal_handler);\n    signal(SIGQUIT, signal_handler);\n\n    printf(\"Starting threads...\\n\");\n    pthread_create(&amp;thread1, NULL, thread1_worker, (void*) NULL);\n    pthread_create(&amp;thread2, NULL, thread2_worker, (void*) NULL);\n    pthread_create(&amp;thread3, NULL, thread3_worker, (void*) NULL);\n\n    pthread_join(thread1, NULL);\n    pthread_join(thread2, NULL);\n    pthread_join(thread3, NULL);\n    return 0;\n} // end function: main\n</code></pre>\n\n<p>when the code is run the following output is typical: (which continues to repeat with slight variations on the order of the statements:</p>\n\n<pre><code>system-util result: Success\nsystem-util result: Success\nsystem-util result: Success\nRequesting cmd3\nRequesting cmd2\nRequesting cmd1\n</code></pre>\n\n<p>Then, since I have no <code>util</code> function the <code>/tmp/stderr.log</code> contains repeating statements of the following:</p>\n\n<pre><code>sh: 1: util: not found\nsh: 1: util: not found\nsh: 1: util: not found\nsh: 1: util: not found\nsh: 1: util: not found\nsh: 1: util: not found\nsh: 1: util: not found\nsh: 1: util: not found\n</code></pre>\n\n<p>and, unless the <code>util</code> function is marked <code>executable</code> AND is in the same directory at this program, it will fail.</p>\n\n<p>changing <code>util</code> to <code>./util</code> will work, if in the same directory without having to mark it as <code>executable</code></p>\n\n<p>The seg fault event is most likely from the <code>util</code> function rather than from the posted code.</p>\n\n<p>further consideration should be given to calling the function: <code>signal()</code>, which per the man page is unreliable.  The man page strongly suggests using: <code>sigaction()</code> instead.</p>\n"}], "owner": {"reputation": 93, "user_id": 2669989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55041c968d1eafac726713deaf09580b?s=128&d=identicon&r=PG", "display_name": "jdp", "link": "https://stackoverflow.com/users/2669989/jdp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467865784, "creation_date": 1467830943, "last_edit_date": 1495541778, "question_id": 38231616, "link": "https://stackoverflow.com/questions/38231616/segmentation-fault-while-system-function-call", "title": "Segmentation fault while system function call", "body": "<p>I am trying to find the cause of a segmentation fault error which is happening when I try to generate Signal (^C) when System function is involved.</p>\n\n<p>Also I am trying to understand why I see only one print <code>Thread1 cancelled</code> and not 3 prints for all three threads? <em>[<code>Corrected the code for this point</code>]</em></p>\n\n<p>Below is the code for the testapp.c. This is a kind of stress test app I have made to test <a href=\"https://stackoverflow.com/questions/37980466/wait-until-the-previous-instance-of-process-finish\">my utility program</a>. The utility program is not the actual program which I am using but to demonstrate the use of semaphore used in it. It is executing my utility program using <code>system()</code> function.</p>\n\n<p>Source code and output is listed below,</p>\n\n<pre><code>/*******  testapp.c  *****************/\n/* gcc testapp.c -o testapp -pthread */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n\n#define SLEEP1  250\n#define SLEEP2  250\n#define SLEEP3  250\npthread_t   thread1;\npthread_t   thread2;\npthread_t   thread3;\nstatic volatile sig_atomic_t isRunning = 1;\n\nvoid signal_handler(int signal)\n{\n    int rc = 0;\n    switch (signal)\n    {\n        case SIGINT:\n        case SIGTERM:\n        case SIGQUIT:\n            printf(\"Signal generated, cancelling threads...\");\n            // Graceful shutdown\n            //isRunning = 0; //commented to see the segmentation fault issue\n            rc = pthread_cancel(thread1);\n            if(rc != 0){\n                printf(\"signal_handler:pthread_cancel-1 failed - %d (%m)\\n\", errno);\n            }\n            printf(\"Thread1 cancelled\\n\");\n            rc = pthread_cancel(thread2);\n            if(rc != 0){\n                printf(\"signal_handler:pthread_cancel-2 failed - %d (%m)\\n\", errno);\n            }\n            printf(\"Thread2 cancelled\\n\");\n            rc = pthread_cancel(thread3);\n            if(rc != 0){\n                printf(\"signal_handler:pthread_cancel-3 failed - %d (%m)\\n\", errno);\n            }\n            printf(\"Thread3 cancelled\\n\");\n            break;\n        default:\n            break;\n    }\n}\n\nvoid* thread1_worker(void* data)\n{\n    struct timeval timeout;\n    int ret = 0;\n    do\n    {\n        printf(\"Requesting cmd1\\n\");\n        ret = system(\"util -c:cmd1 -v 2&gt;&gt; /tmp/stderr.log\");\n\n        timeout.tv_sec  = 0;\n        timeout.tv_usec = SLEEP1 * 1000;  //milliseconds\n        ret = select(0, NULL, NULL, NULL, &amp;timeout);\n    }while(isRunning);\n\n    printf(\"Exiting thread1...\");\n    pthread_exit((void*)0);\n}\n\nvoid* thread2_worker(void* data)\n{\n    struct timeval timeout;\n    int ret = 0;\n    do\n    {\n        printf(\"Requesting cmd2\\n\");\n        ret = system(\"util -c:cmd2 -v 2&gt;&gt; /tmp/stderr.log\");\n\n        timeout.tv_sec  = 0;\n        timeout.tv_usec = SLEEP2 * 1000;  //milliseconds\n        int ret = select(0, NULL, NULL, NULL, &amp;timeout);\n    }while(isRunning);\n\n    printf(\"Exiting thread2...\");\n    pthread_exit((void*)0);\n}\n\nvoid* thread3_worker(void* data)\n{\n    struct timeval timeout;\n    int ret = 0;\n    do\n    {\n        printf(\"Requesting cmd3\\n\");\n        ret = system(\"util -c:cmd3 -v 2&gt;&gt; /tmp/stderr.log\");\n\n        timeout.tv_sec  = 0;\n        timeout.tv_usec = SLEEP3 * 1000;  //milliseconds\n        int ret = select(0, NULL, NULL, NULL, &amp;timeout);\n    }while(isRunning);\n\n    printf(\"Exiting thread3...\");\n    pthread_exit((void*)0);\n}\n\nint main(int argc, char **argv){\n    signal(SIGTERM, signal_handler);\n    signal(SIGINT, signal_handler);\n    signal(SIGQUIT, signal_handler);\n\n    printf(\"Starting threads...\\n\");\n    pthread_create(&amp;thread1, NULL, thread1_worker, (void*) NULL);\n    pthread_create(&amp;thread2, NULL, thread2_worker, (void*) NULL);\n    pthread_create(&amp;thread3, NULL, thread3_worker, (void*) NULL);\n\n    pthread_join(thread1, NULL);\n    pthread_join(thread2, NULL);\n    pthread_join(thread3, NULL);\n    return 0;\n}\n</code></pre>\n\n<p>Output is below, The prints in the square brackets is the actual output of the program and not the util program above,</p>\n\n<pre><code>root@mydevice:~$ testapp \nStarting threads...\nRequesting cmd1\nRequesting cmd2\nRequesting cmd3\ncmd2:[05 05]\ncmd1:[0]\ncmd3:[00 00 00 00 00 ]\nRequesting cmd2\nRequesting cmd1\ncmd2:[05 05]\nRequesting cmd3\ncmd1:[1]\ncmd3:[00 00 00 00 00 ]\nRequesting cmd2\nRequesting cmd1\ncmd2:[05 05]\nRequesting cmd3\ncmd1:[2]\ncmd3:[00 00 00 00 00 ]\nRequesting cmd2\nRequesting cmd1\ncmd2:[05 05]\nRequesting cmd3\ncmd1:[3]\ncmd3:[00 00 00 00 00 ]\nRequesting cmd2\nRequesting cmd1\ncmd2:[05 05]\nRequesting cmd3\n^Ccmd1:[4]\nsh: line 1:   964 Segmentation fault      util -c:cmd3 -v 2&gt;&gt; /tmp/stderr.log\nRequesting cmd2\ncmd2:[05 05]\nRequesting cmd1\nRequesting cmd3\ncmd1:[5]\ncmd3:[00 00 00 00 00 ]\nRequesting cmd2\ncmd2:[05 05]\nRequesting cmd1\nRequesting cmd3\ncmd3:[00 00 00 00 00 ]\nRequesting cmd2\ncmd1:[84213760]\nRequesting cmd3\n^Ccmd2:[00 00]  -----------------------------------------------&gt; Signal\ncmd3:[00 00 00 00 00 ]\nRequesting cmd1\ncmd1:[7]\nRequesting cmd2\nRequesting cmd3\ncmd2:[05 05]\ncmd3:[00 00 00 00 00 ]\nRequesting cmd1\ncmd1:[8]\n^CSignal generated, cancelling threads...Thread1 cancelled ----&gt;Signal\nSegmentation fault\nroot@mydevice:~$ \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2905, "user_id": 2229538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dLCR9.png?s=128&g=1", "display_name": "Misaz", "link": "https://stackoverflow.com/users/2229538/misaz"}, "edited": false, "score": 2, "creation_date": 1467830863, "post_id": 38231512, "comment_id": 63884698, "body": "You don&#39;t call <code>srand</code> function. Include <code>time.h</code> and call <code>srand(time(NULL));</code> after variables declaration."}, {"owner": {"reputation": 241, "user_id": 1171313, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3c895772e2bef39548426085de1932e3?s=128&d=identicon&r=PG", "display_name": "Rajat Shah", "link": "https://stackoverflow.com/users/1171313/rajat-shah"}, "edited": false, "score": 2, "creation_date": 1467831077, "post_id": 38231512, "comment_id": 63884835, "body": "Missing <code>&amp;</code> while reading: <code>scanf(&quot;%d&quot;, &amp;userin);</code> instead of <code>scanf(&quot;%d&quot;, userin);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467839077, "post_id": 38231512, "comment_id": 63889119, "body": "Interesting that code generates the random number after user input.  Of course the order is not that important - it just seems like the code is cheating with knowing user input first.  Could simply code  <code>puts(&quot;Guess a number from 1 to 10&quot;); scanf(&quot;*%s&quot;); puts(rand()%10 == 0 ? &quot;you are right&quot; : &quot;Try again&quot;);</code>  Is a compare to proper user input really needed? User win 1/10 of the time in either case."}], "answers": [{"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 5, "last_activity_date": 1467830922, "creation_date": 1467830922, "answer_id": 38231611, "question_id": 38231512, "link": "https://stackoverflow.com/questions/38231512/random-number-generator-game-in-c/38231611#38231611", "title": "Random number generator game in C", "body": "<p>In your code, <code>r</code> will be a random number from 0 to 10. For a random number between 1 and 10, do this:</p>\n\n<pre><code>int r = rand() % 10 + 1;\n</code></pre>\n\n<p>Also, you should call </p>\n\n<pre><code>srand(time(NULL)); \n</code></pre>\n\n<p>at the beginning of <code>main</code> to seed the random number generator. If you don't seed the generator, it always generates the same sequence.</p>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": false, "score": 2, "last_activity_date": 1467831156, "creation_date": 1467831156, "answer_id": 38231664, "question_id": 38231512, "link": "https://stackoverflow.com/questions/38231512/random-number-generator-game-in-c/38231664#38231664", "title": "Random number generator game in C", "body": "<p>There is issue in your <code>scanf</code> statement as well.</p>\n\n<p>You should use </p>\n\n<pre><code>scanf(\"%d\", &amp;userin); \n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>scanf(\"%d\", userin); /* wrong - you need to use &amp;userin */\n</code></pre>\n\n<p><code>scanf</code> needs the address of variables at which it will store the value. For a variable, this is given by the prefexing the variable with <code>&amp;</code>, as in <code>&amp;userin</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467839858, "post_id": 38231704, "comment_id": 63889507, "body": "Suggest re-wording &quot;and rand()%11 would produce any number from 0 to 10 but not but not from 0 to 10&quot;"}], "tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": true, "score": 0, "last_activity_date": 1467841139, "last_edit_date": 1592644375, "creation_date": 1467831275, "answer_id": 38231704, "question_id": 38231512, "link": "https://stackoverflow.com/questions/38231512/random-number-generator-game-in-c/38231704#38231704", "title": "Random number generator game in C", "body": "<p><strong>Problems :</strong></p>\n<pre><code>scanf(&quot;%d&quot;, userin); //you are sending variable \n</code></pre>\n<ul>\n<li>This is not right as you need to send <strong>address</strong> of the <code>variable</code> as argument to the <code>scanf()</code> not the <code>variable</code></li>\n</ul>\n<p>so instead change it to :</p>\n<pre><code>scanf(&quot;%d&quot;, &amp;userin); //ypu need to send the address instead\n</code></pre>\n<hr />\n<p>and <code>rand()%11</code> would produce any number from <code>0</code> to <code>10</code> but not from <code>1</code> to <code>10</code></p>\n<p>as other answer suggests, use :</p>\n<pre><code>(rand()%10)+1 //to produce number from 1 to 10 \n</code></pre>\n<hr />\n<p><strong>Solution :</strong></p>\n<p>And also include <code>time.h</code> function to use <code>srand(time(NULL)); </code></p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\n    srand(time(NULL));\n\n    int userin;\n\n    printf(&quot;Guess a number from 1 to 10\\n&quot;);\n    scanf(&quot;%d&quot;, &amp;userin);\n    int r = (rand() % 10)+1;\n\n    if (r==userin)\n    {\n        printf (&quot;you are right&quot;);\n    }\n    else\n    {\n        printf(&quot;Try again&quot;);\n    }\n\n    return 0;\n}\n</code></pre>\n<hr />\n<blockquote>\n<p><strong>Why use <code>srand(time(NULL))</code> ?</strong></p>\n<ul>\n<li><p><code>rand()</code> isn't random at all, it's just a function which produces a sequence of numbers which are superficially random and repeat themselves over a period.</p>\n</li>\n<li><p>The only thing you can change is the seed, which changes your start position in the sequence.</p>\n</li>\n</ul>\n<p>and, <code>srand(time(NULL))</code> is used for this very reason</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467877438, "post_id": 38231907, "comment_id": 63900998, "body": "Thanks for your suggestion, @chux, really a good programming habit: one shouldn&#39;t ignore <code>scanf()</code> return value. (-:"}], "tags": [], "owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "is_accepted": false, "score": 2, "last_activity_date": 1467877266, "last_edit_date": 1495540354, "creation_date": 1467831990, "answer_id": 38231907, "question_id": 38231512, "link": "https://stackoverflow.com/questions/38231512/random-number-generator-game-in-c/38231907#38231907", "title": "Random number generator game in C", "body": "<p>There are few issues in your code.</p>\n\n<ol>\n<li>not reading into the address <code>&amp;</code> of your variable using <code>scanf</code></li>\n<li>not considering \"legitimate\" values of input, result of <code>rand()%11</code> can also be <code>0</code></li>\n<li>not checking against \"illegal\" input values, which can \"alias\" the result.</li>\n<li>not properly initializing <strong>seed</strong> of the pseudo-random <code>rand()</code> function, so it always returns the same result.</li>\n</ol>\n\n<p>Using <code>printf</code> for debugging your code, as in the following example, based on your code can help a lot:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#define DEBG 1\n\nint main (void)\n{\n    time_t t;\n    int userin;\n    printf(\"Guess a number from 1 to 10\\n\");\n    if(scanf(\"%d\", &amp;userin) != 1){  // read into the variable's address\n        printf(\"Conversion failure or EOF\\n\");\n        return 1;\n    }\n\n    if(userin &lt; 1 || userin &gt; 10){  // check against \"illegal\" input\n        printf(\"Offscale, try again\\n\");\n        return 1;\n    }\n\n    srand(time(NULL));              // initialize the seed value\n    int r = 1 + rand() % 10;        // revise the formula\n\n    if (DEBG) printf(\"%d\\t%d\\t\", r, userin);  //debug print\n\n    if (r==userin){\n        printf (\"you are right\\n\");\n    }else{\n        printf(\"Try again\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Please, also consult <a href=\"https://stackoverflow.com/questions/822323/how-to-generate-a-random-number-in-c\">this SO post</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 216, "user_id": 6505636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a27908f90ab615c3e506982867b762?s=128&d=identicon&r=PG&f=1", "display_name": "MacedonZero", "link": "https://stackoverflow.com/users/6505636/macedonzero"}, "is_accepted": false, "score": 0, "last_activity_date": 1467839849, "creation_date": 1467839849, "answer_id": 38233913, "question_id": 38231512, "link": "https://stackoverflow.com/questions/38231512/random-number-generator-game-in-c/38233913#38233913", "title": "Random number generator game in C", "body": "<p>This should work </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;time.h&gt;\n\n    int main ()\n  {\n        int userIn = 0; //I like to initialize\n        printf(\"Guess a number from 1 to 10\\n\");\n        scanf(\"%d\", &amp;userIn);\n\n        srand(time(NULL)); //seed your randum number with # of seconds since the Linux Epoch\n\n        int r = (rand()%10)+1; //rand%11 gives values 0-10 not 1-10.  rand%10 gives 0-9, +1 makes sure it's 1-10\n\n        if (r == userIn)\n        {\n        printf (\"you are right\\n\");\n        }\n        else\n        {\n        printf(\"Try again\\n\");\n        }\n        return 0;\n   }\n</code></pre>\n\n<p>Edit: You may want to implement code to verify that the user input is in fact an integer.</p>\n"}], "owner": {"reputation": 11, "user_id": 4031492, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hZxw45wNY4Q/AAAAAAAAAAI/AAAAAAAAAPI/xQZV7bzREYw/photo.jpg?sz=128", "display_name": "Prajwal Nellogi", "link": "https://stackoverflow.com/users/4031492/prajwal-nellogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 2, "accepted_answer_id": 38231704, "answer_count": 5, "score": 0, "last_activity_date": 1467891078, "creation_date": 1467830625, "last_edit_date": 1467891078, "question_id": 38231512, "link": "https://stackoverflow.com/questions/38231512/random-number-generator-game-in-c", "title": "Random number generator game in C", "body": "<p>I have started C recently and am having trouble make the computer think of a random number.\nThis is the code so far. I need help!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main ()\n{\n    time_t t;\n    int userin;\n    printf(\"Guess a number from 1 to 10\\n\");\n    scanf(\"%d\", userin);\n    int r = rand() % 11;\n\n    if (r == userin)\n    {\n        printf (\"you are right\");\n    }\n    else\n    {\n        printf(\"Try again\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thx a lot guys it worked out!!!!</p>\n"}, {"tags": ["c++", "c", "gcc", "standards"], "comments": [{"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1467828586, "post_id": 38230856, "comment_id": 63883377, "body": "Are you sure you don&#39;t <code>volatile</code> the pointer with that declaration? Try <code>unsigned char * volatile bytePtr</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1467828589, "post_id": 38230856, "comment_id": 63883379, "body": "IMHO using <code>volatile</code> is a bug unless proven otherwise. But most likely a bug. <code>volatile</code> is so underspecified as to be dangerous - just don&#39;t use it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1467828598, "post_id": 38230856, "comment_id": 63883384, "body": "[OT] Why not use <a href=\"http://en.cppreference.com/w/cpp/string/byte/memset\" rel=\"nofollow noreferrer\"><code>memset</code></a>?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 20, "creation_date": 1467828626, "post_id": 38230856, "comment_id": 63883402, "body": "@JesperJuhl: No, <code>volatile</code> is appropriate in this case."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 9, "creation_date": 1467828653, "post_id": 38230856, "comment_id": 63883417, "body": "@NathanOliver: That won&#39;t work, because compilers can optimize out dead stores even if they use <code>memset</code>.  The problem is that compilers know exactly what <code>memset</code> does."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1467828763, "post_id": 38230856, "comment_id": 63883472, "body": "@DietrichEpp Oops.  I need to read further: <i>std::memset may be optimized away (under the as-if rules) if the object modified by this function is not accessed again for the rest of its lifetime. For that reason, this function cannot be used to scrub memory</i>"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1467828773, "post_id": 38230856, "comment_id": 63883473, "body": "What about calling an external function (from a different compilation unit), passing pointer and size to it, and having that function to only do <code>memset</code>?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 9, "creation_date": 1467828778, "post_id": 38230856, "comment_id": 63883477, "body": "@PaulStelian: That would make a <code>volatile</code> pointer, we want a pointer to <code>volatile</code> (we don&#39;t care whether <code>++</code> is strict, but whether <code>*p = 0</code> is strict)."}, {"owner": {"reputation": 2300, "user_id": 353094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2ef00cd1457bcdc46f506983384f57e?s=128&d=identicon&r=PG", "display_name": "leetNightshade", "link": "https://stackoverflow.com/users/353094/leetnightshade"}, "edited": false, "score": 2, "creation_date": 1467829003, "post_id": 38230856, "comment_id": 63883616, "body": "<a href=\"http://www.daemonology.net/blog/2014-09-04-how-to-zero-a-buffer.html\" rel=\"nofollow noreferrer\">daemonology.net/blog/2014-09-04-how-to-zero-a-buffer.html</a> The final conclusion here is already added as an answer, use <code>memset_s</code>."}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 7, "creation_date": 1467829352, "post_id": 38230856, "comment_id": 63883793, "body": "@JesperJuhl: There&#39;s nothing under-specified about volatile."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1467830451, "post_id": 38230856, "comment_id": 63884461, "body": "@cooky451 I have a feeling that <code>SecureZeroMemory</code> goes beyond what <code>memset_s</code> is specified to do. Writing a zero to a memory address is only guaranteed to affect the first level cache. You still have more levels of cache and the main memory to deal with. So I expect that <code>SecureZeroMemory</code> contains cache flushing code. And although that may be the intent for <code>memset_s</code>, it&#39;s not explicitly specified."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1467832861, "post_id": 38230856, "comment_id": 63885856, "body": "what if you do *bytePtr++ -= *bytePtr; ?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1467835274, "post_id": 38230856, "comment_id": 63887159, "body": "@GManNickG: Would you prefer to say that C lacks directives to provide guarantees about memory ordering which some kinds of program need and which all implementations should be able to uphold without forcing the programmer to jump through hoops?"}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 1, "creation_date": 1467844468, "post_id": 38230856, "comment_id": 63891360, "body": "@mvidelgauz - and then someone has LTO enabled..."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1467850342, "post_id": 38230856, "comment_id": 63893067, "body": "@fassl That&#39;s UB because there&#39;s no sequence point between the postincrement and the other side, so anything can happen. Please don&#39;t do &#39;clever&#39; things like that. See: <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\" title=\"undefined behavior and sequence points\">stackoverflow.com/questions/4176328/&hellip;</a>"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467856494, "post_id": 38230856, "comment_id": 63894424, "body": "@underscore_d ok then just increment it afterwards: *bytePtr -= *bytePtr; bytePtr++; since the compiler can not assume any value for this memory it cannot optimize it out and thats what was asked in this question iirc?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 3, "creation_date": 1467857758, "post_id": 38230856, "comment_id": 63894698, "body": "@fassl What&#39;s your point? (pretending <i>yes</i> to the seemingly open question of whether a <code>volatile</code> pointer can confer <code>volatile</code>ity upon a declared-non-<code>volatile</code> referent, then) The original code here would still perform volatile writes, which also can&#39;t be skipped or reordered, but with the benefit that the code states what it&#39;s doing (<code>= 0</code>), rather than pointlessly obfuscating itself for no benefit (<code>self = self - self</code>, I mean c&#39;mon). Most people reading such a piece of code would conclude that the writer was trying way too hard to look clever - and not succeeding."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1467862895, "post_id": 38230856, "comment_id": 63895672, "body": "whats your point underscore_d? &quot;always zeros memory and doesn&#39;t get optimized away&quot; value = value - value translates into value = 0 except that the compiler cannot assume the value you are setting, at least it didnt when i tried it in the compiler link that was posted in the question"}, {"owner": {"reputation": 4344, "user_id": 988870, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b91462071f7b1d4d77c8ca5e1883d1a8?s=128&d=identicon&r=PG", "display_name": "Jarrod Smith", "link": "https://stackoverflow.com/users/988870/jarrod-smith"}, "edited": false, "score": 0, "creation_date": 1467871597, "post_id": 38230856, "comment_id": 63897937, "body": "The nuclear option: <a href=\"http://stackoverflow.com/a/2220565\">stackoverflow.com/a/2220565</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 1, "creation_date": 1467885347, "post_id": 38230856, "comment_id": 63905906, "body": "@fassl Let me rephrase that, then. The point here is that the Standard does not specify, or <i>underspecifies</i>, whether access to a declared non-<code>volatile</code> object through a <code>volatile</code> pointer/reference confers volatility on said object during such accesses. If it <i>did</i>, the simple <code>= 0</code> would work perfectly and doesn&#39;t look totally absurd. But this it doesn&#39;t <i>seem</i> to be required - or compilers act like it isn&#39;t - anything can happen here. So you just found a hack that seems to do it on one particular compiler. That&#39;s not portable, so it&#39;s not a good idea, and it doesn&#39;t mean the code is clever"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467889107, "post_id": 38230856, "comment_id": 63908330, "body": "@cooky451 Re your original assumption and what I perceive as a lot of uncertainty about whether or not it was valid, I&#39;ve opened a <code>language-lawyer</code> question on whether <code>volatile</code> pointers/reference are supposed to confer <code>volatile</code> semantics upon their referents: <a href=\"http://stackoverflow.com/questions/38243501/does-accessing-a-declared-non-volatile-object-through-a-volatile-reference-point\" title=\"does accessing a declared non volatile object through a volatile reference point\">stackoverflow.com/questions/38243501/&hellip;</a> All thoughts welcome. Thanks for the inspiration! And the lack of sleep!"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467893205, "post_id": 38230856, "comment_id": 63911146, "body": "@underscore_d are you telling me a simple subtraction is a hack and not portable? to achieve what was asked in the question one has to read from a volatile value, not just write to a volatile value. it even does work for the case of the second code example with gcc 6.1 which cooky451 posted"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 2, "creation_date": 1467893536, "post_id": 38230856, "comment_id": 63911363, "body": "@fassl I&#39;ll rephrase again. What I&#39;m telling you is it&#39;s unnecessary. And it&#39;s a &quot;hack&quot; because the Standard doesn&#39;t seem to guarantee either piece of code will produce the expected result, thus making your workaround highly context-sensitive and unreliable. Where the Standard <i>does</i> explicitly guarantee <code>volatile</code> behaviour, <i>only a write is needed</i>; read source doesn&#39;t matter. In such cases, the Standard requires <code>= 0</code> to write 0 each time. But when the underlying object isn&#39;t <code>volatile</code>, only your pointer/reference, there&#39;s no (strong) guarantee. You&#39;re probably just confusing the optimiser"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467935017, "post_id": 38230856, "comment_id": 63934778, "body": "@underscore_d: If one casts the pointer to <code>uintptr_t</code>, xors it with a <code>volatile</code>-qualified value which happens to always be zero, and then converts back to a pointer, that should pretty well eliminate the possibility of the compiler figuring out that it can optimize things away, without adding per-loop overhead or introducing potentially thread-unsafe behaviors."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467969689, "post_id": 38230856, "comment_id": 63945900, "body": "@supercat Sure, but if that&#39;s the case, it seems extraordinarily flimsy to rely on code that&#39;s in no way guaranteed to prevent optimisation, but which is just currently &#39;confusing enough&#39; to do so. What if, as is likely, they strengthen optimisation in the next release? Bad times ahead! We&#39;d either have to painstakingly check ASM each time, or never upgrade the compiler, or something in between. As I&#39;m sure is the same for you, I&#39;d vastly prefer that the Standard specifically defined a proper <i>guaranteed</i> way for people to be able to do such things. I just can&#39;t recommend hacks that &#39;work now&#39;"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467992869, "post_id": 38230856, "comment_id": 63960848, "body": "@underscore_d: If the &quot;always_zero&quot; symbol is exported such that a compiler can&#39;t know what references might exist, the only way a compiler could assume that the indicated operation couldn&#39;t make the pointer point anywhere in the universe would be if it read the always_zero volatile, checked if it was zero, and then had different code paths for the zero and non-zero cases.  While it would be theoretically possible for a compiler to do that, I can&#39;t think of any circumstance where that would be more efficient than regarding it as a full memory and causality barrier."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467993089, "post_id": 38230856, "comment_id": 63960964, "body": "@underscore_d: Besides, any compiler that wants to be that obtuse while remaining standards-compliant could just as easily do either of the following: (1) try to allocate an extra 5 petabytes of stack frame for any function whose source text contains the letter &quot;z&quot; and behave arbitrarily if the space is unavailable; (2) as above, but for functions that don&#39;t contain the letter &quot;z&quot;.  Since no program can be expected to work on an obtuse-but-compliant implementation, programmers shouldn&#39;t be expected to write code that&#39;s proof against all forms of obtuseness."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 1, "creation_date": 1468351094, "post_id": 38230856, "comment_id": 64088548, "body": "<a href=\"http://stackoverflow.com/a/28655297/3404097\">Requirements for behavior of pointer-to-volatile pointing to non-volatile object</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1487622575, "post_id": 38230856, "comment_id": 71857962, "body": "^ I can&#39;t express enough how much people need to read <a href=\"http://stackoverflow.com/a/28655297/3404097\">the link directly above this comment</a> &amp; @philipxy&#39;s answer to <a href=\"http://stackoverflow.com/questions/38243501\">my question linked earlier</a>. That recent Defect Report indicates that indeed it looks like C&#39;s original intent was that volatile semantics were a property of <i>lvalues</i>, not their referred objects (only) - &amp; that such semantics are what the C++ Standard &amp; all extant C compilers have been doing all along! Result!"}], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 4, "creation_date": 1467828957, "post_id": 38230939, "comment_id": 63883587, "body": "Note: This is part of the C11 standard, and is not available in all toolchains yet."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 5, "creation_date": 1467828988, "post_id": 38230939, "comment_id": 63883606, "body": "One should note that interestingly, this function is standardized for C11 but not for C++11, C++14 or C++17. So technically it&#39;s not a solution for C++, but I agree that this seems like the best option from a practical perspective. At this point I do wonder though if the behavior from GCC is conforming or not. Edit: Actually, VS 2015 doesn&#39;t have memset_s, so it&#39;s not all that portable yet."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 2, "creation_date": 1467829422, "post_id": 38230939, "comment_id": 63883842, "body": "@cooky451 I thought <a href=\"http://stackoverflow.com/a/38060437/3484570\">C++17 pulls the C11 standard library in by reference</a> (see second Misc)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1467829442, "post_id": 38230939, "comment_id": 63883853, "body": "As far as I know, <i>only</i> recent versions of OSX provide <code>memset_s</code>.  There are about five different competing names for this function; the only one that is provided by more than one C library is <code>explicit_bzero</code>, which is in <i>both</i> FreeBSD and OpenBSD, and possibly also musl libc.  And I&#39;m trying to get it into glibc, in my copious free time."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 14, "creation_date": 1467829569, "post_id": 38230939, "comment_id": 63883917, "body": "Also, describing <code>memset_s</code> as C11-standard is an overstatement.  It is part of Annex K, which is optional in C11 (and therefore also optional in C++).  Basically all implementors, <i>including</i> Microsoft, whose idea it was in the first place (!), have declined to pick it up; last I heard they were talking about scrapping it in C-next."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1467829812, "post_id": 38230939, "comment_id": 63884062, "body": "@zwol Why Microsoft wouldn&#39;t pick it up considering that they&#39;d just have to call SecureZeroMemory is beyond me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467831059, "post_id": 38230939, "comment_id": 63884823, "body": "@cooky451 So write your code with <code>SecureZeroMemory()</code> instead of <code>memset_s()</code>.  Hmm, maybe that makes code less portable away from MS.  smells like <a href=\"https://en.wikipedia.org/wiki/Embrace,_extend_and_extinguish\" rel=\"nofollow noreferrer\">Embrace, extend and extinguish</a>"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 8, "creation_date": 1467831126, "post_id": 38230939, "comment_id": 63884870, "body": "@cooky451 In certain circles, Microsoft is notorious for forcing stuff into the C standard over basically everyone else&#39;s objections and then not bothering to implement it themselves.  (The most egregious example of this is C99&#39;s relaxation of the rules for what the underlying type of <code>size_t</code> is allowed to be.  The Win64 ABI is not conformant with C90.  That would have been ... not <i>ok</i>, but not terrible ... if MSVC had actually picked up C99 things like <code>uintmax_t</code> and <code>%zu</code> in a timely fashion, but they <i>didn&#39;t</i>.)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1467832375, "post_id": 38230939, "comment_id": 63885607, "body": "@nwp - C++17 refers to C11, but at the same time excludes some of the C headers and the *_s functions in Annex K. See <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0063r2.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0063r2.html</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467849229, "post_id": 38230939, "comment_id": 63892769, "body": "The paper that introduced <code>memset_s()</code>, N1381, seems to imply - at least by omitting to mention any requirement about the original declaration - that it was already defined that using a <code>volatile</code> pointer to alter non-volatile data should respect the qualifier of the pointer, regardless of that of the data, and that compilers not doing this &quot;violate the standard by not always respecting the <code>volatile</code>&quot; qualifier. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf</a> Does that make the accepted answer incorrect?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531949025, "post_id": 38230939, "comment_id": 89793857, "body": "The authors of the C89, where <code>volatile</code> was introduced, recognize in the Rationale that it is possible for an implementation to be of such poor quality as to be unsuitable for any purpose, but this shouldn&#39;t be a problem if people make a bona fide effort to produce useful implementations.  If a particular behavior would be useful when writing some kind of code for a particular platform, someone seeking to write a quality implementation suitable for processing such code on that platform should support it if practical regardless of whether the Standard would require it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531949848, "post_id": 38230939, "comment_id": 89794203, "body": "I find it really sad that compiler writers have completely failed to recognize that when the Standard fails to mandate something, that means failure to do it will not render an implementation non-conforming.  It says nothing about whether such failure would make the implementation less suitable for various purposes than it otherwise would be."}], "tags": [], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": false, "score": 15, "last_activity_date": 1467829522, "last_edit_date": 1467829522, "creation_date": 1467828750, "answer_id": 38230939, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/38230939#38230939", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<blockquote>\n  <p>I need a function that (like SecureZeroMemory from the WinAPI) always zeros memory and doesn't get optimized away,</p>\n</blockquote>\n\n<p>This is what the standard function <code>memset_s</code> is for.</p>\n\n<hr>\n\n<p>As to whether this behavior with volatile is conforming or not, that's a bit hard to say, and volatile has been <a href=\"http://blog.regehr.org/archives/503\">said</a> to have long been plagued with bugs.</p>\n\n<p>One issue is that the specs say that \"Accesses to volatile objects are evaluated strictly according to the rules of the abstract machine.\" But that only refers to 'volatile objects', not accessing a non-volatile object via a pointer that has had volatile added. So apparently if a compiler can tell that you're not really accessing a volatile object then it's not required to treat the object as volatile after all.</p>\n"}, {"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 6, "creation_date": 1467829738, "post_id": 38231071, "comment_id": 63884019, "body": "That&#39;s interesting... I&#39;d be interested in seeing a reference to the committee&#39;s comments."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 10, "creation_date": 1467830412, "post_id": 38231071, "comment_id": 63884438, "body": "How does this square with 6.7.3(7)&#39;s definition of <code>volatile</code> as <i>[...] Therefore any expression referring to such an object shall be evaluated strictly according to the rules of the abstract machine, as described in 5.1.2.3. <b>Furthermore, at every sequence point the value last stored in the object shall agree with that prescribed by the abstract machine</b>, except as modified by the unknown factors mentioned previously. What constitutes an access to an object that has volatile-qualified type is implementation-defined.</i> ?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 15, "creation_date": 1467830997, "post_id": 38231071, "comment_id": 63884781, "body": "@IwillnotexistIdonotexist The key word in that passage is <i>object</i>.  <code>volatile sig_atomic_t flag;</code> is a volatile <i>object</i>.  <code>*(volatile char *)foo</code> is merely an <i>access through a volatile-qualified lvalue</i> and the standard does not require that to have any special effects."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 2, "creation_date": 1467831035, "post_id": 38231071, "comment_id": 63884806, "body": "What about GCC using memset in the &quot;raw&quot; function? Memset will likely use 16, 8 or 4 byte stores, doesn&#39;t that have the potential to mess with memory-mapped registers?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467831408, "post_id": 38231071, "comment_id": 63885051, "body": "@cooky451 Yes. Hmm, that might actually genuinely be a bug."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467831688, "post_id": 38231071, "comment_id": 63885219, "body": "@cooky451 My copies of GCC 5.4 and 6.1 do not compile your <code>volatileZeroMemory</code>, in isolation, to call <code>memset</code>.  I&#39;m not sure what&#39;s going on with godbolt."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467832827, "post_id": 38231071, "comment_id": 63885835, "body": "@zwol Hm, I don&#39;t have access to GCC 6.1 outside of godbolt sadly. Is your GCC 6.1 generating the same code as 5.3 on godbolt?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467833060, "post_id": 38231071, "comment_id": 63885954, "body": "@cooky451 Looks the same to me, yes.  Anyhow it is definitely a loop writing one byte at a time in forward order, and not a call to any library function."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1467834861, "post_id": 38231071, "comment_id": 63886942, "body": "Your use of VLAIS (VLA in struct) is a very bad idea because it is actively not supported on non-gcc compilers that otherwise implement gcc extensions. Instead of <code>&quot;m&quot;</code> constraint with a complex type, just use <code>&quot;r&quot;</code> constraint with the address of the memory, and a <code>&quot;memory&quot;</code> clobber. Then the compiler cannot make any assumptions about what the asm does with the pointed-to object (or any other reachable memory) and thus cannot optimize it out."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1467835204, "post_id": 38231071, "comment_id": 63887115, "body": "@R.. The answer already points out that VLAIS only works with GCC and only in C.  As for your alternative, we have discussed that more than once already, but I might not have said this sufficiently baldly: I do not think either gcc or &quot;non-gcc compilers that otherwise implement gcc extensions&quot; can be counted on to interpret it the way you think it should be interpreted."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1467840890, "post_id": 38231071, "comment_id": 63889929, "body": "@zwol: They can be counted on to interpret it as that, and they do. The compiler must assume asm can read any memory whose address is available to it in any way (this includes any address that&#39;s escaped the compiler&#39;s ability to analyze the extent of its visibility), and if the asm block has a <code>&quot;memory&quot;</code> clobber, that the asm might also modify any such address."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467841589, "post_id": 38231071, "comment_id": 63890255, "body": "@zwol I edited some experiments into the question, might be interesting to you. For example, does your GCC 6.1 also remove the stores if you remove the memory fence?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 3, "creation_date": 1467844062, "post_id": 38231071, "comment_id": 63891247, "body": "The Standard says what criteria something must meet to be a &quot;compliant&quot; implementation.  It makes no effort to describe what criteria an implementation on a given platform must meet to be a &quot;good&quot; implementation or a &quot;usable&quot; one.  GCC&#39;s treatment of <code>volatile</code> may be sufficient to make it a &quot;compliant&quot; implementation, but that doesn&#39;t mean it&#39;s sufficient to be &quot;good&quot; or &quot;useful&quot;.  For many kinds of systems programming it should be regarded as woefully deficient in those regards."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467847925, "post_id": 38231071, "comment_id": 63892406, "body": "@cooky451 Please ask a new question about memory fences, etc."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1467847967, "post_id": 38231071, "comment_id": 63892416, "body": "@R.. I believe you are wrong about that, but I&#39;m not interested in discussing it any further here.  If I ever get around to bringing this back up on the gcc and/or clang mailing lists, that would be a much more appropriate venue."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1467848291, "post_id": 38231071, "comment_id": 63892513, "body": "@DietrichEpp Sorry for the delay.  The clearest statements I&#39;m aware of will be found by searching the C99 Rationale for &quot;volatile&quot;.  (Interestingly, there is one sentence in there that implies that the committee <i>meant</i> for <code>*(volatile T*)x</code> to force that one access to <code>x</code> to be treated as volatile; but the actual wording of the standard does not achieve this.) (I regret to say I do not know where to find an online+freely available copy of the Rationale.)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467849133, "post_id": 38231071, "comment_id": 63892747, "body": "@zwol N1381, at least by omitting the condition, seems to claim it&#39;s defined that using a <code>volatile</code> pointer to alter non-volatile data should respect the qualifier of the pointer, regardless of that of the data, and that compilers not doing this &quot;violate the standard by not always respecting the <code>volatile</code>&quot; qualifier. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf</a> Either this doc is wrong or haphazardly worded, or your answer is on the wrong track - albeit understandably as you&#39;re presuming a mirror of the same &#39;original declaration&#39; rule we use for <code>const_cast</code>. What do you think?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1467849632, "post_id": 38231071, "comment_id": 63892878, "body": "From n1548 &#167;6.7.3 &#182;6 the standard uses the phrase &quot;object defined with a volatile-qualified type&quot; to distinguish it from &quot;lvalue with volatile-qualified type&quot;.  It&#39;s unfortunate that this &quot;object defined with&quot; versus &quot;lvalue&quot; distinction does not carry forward, and the standard then uses &quot;object that has volatile-qualified type&quot;, and says that &quot;what constitutes access to an object that has volatile-qualified type is implementation-defined&quot; (which could have said &quot;lvalue&quot; or &quot;object defined with&quot; for clarity).  Oh well."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467853678, "post_id": 38231071, "comment_id": 63893828, "body": "@underscore_d You may be right; I&#39;m afraid I haven&#39;t enough brain right now to parse standardese carefully enough to tell.  I suggest you write up a new [language-lawyer] question specifically about this and hopefully some other people will chime in.  (It may also be the case that the rules changed in C11 or post-C11 drafts; I don&#39;t recognize the N-numbers you&#39;re quoting, and I have never close-read C11 to the extent that I did C99 back when C compilers were my actual job.)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467854086, "post_id": 38231071, "comment_id": 63893927, "body": "@zwol You and me both! Brain cannot live on C++ alone (sleep would help). The thought of opening <a href=\"http://stackoverflow.com/questions/38235112/why-is-a-volatile-local-variable-optimised-differently-from-a-volatile-argument\">another</a> question fills me with horror at present but is definitely a worthwhile enterprise for another day. Of course, let me know if you have any revelations before then!"}, {"owner": {"reputation": 1557, "user_id": 1156377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0tsJk.jpg?s=128&g=1", "display_name": "Mark K Cowan", "link": "https://stackoverflow.com/users/1156377/mark-k-cowan"}, "edited": false, "score": 0, "creation_date": 1467888887, "post_id": 38231071, "comment_id": 63908215, "body": "Excellent, especially the note about register usage at the end!"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467888927, "post_id": 38231071, "comment_id": 63908237, "body": "@zwol Here&#39;s the suggested <code>language-lawyer</code> question: <a href=\"http://stackoverflow.com/questions/38243501/does-accessing-a-declared-non-volatile-object-through-a-volatile-reference-point\" title=\"does accessing a declared non volatile object through a volatile reference point\">stackoverflow.com/questions/38243501/&hellip;</a> All thoughts welcome."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467903445, "post_id": 38231071, "comment_id": 63918838, "body": "@underscore_d I have edited my answer to express uncertainty about whether GCC is conformant, and add links to your followup(s).  Thanks for writing them up."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467904340, "post_id": 38231071, "comment_id": 63919463, "body": "@zwol You&#39;re welcome, and thanks for the great edit and linking back! However, I&#39;m not sure the GCC threads are relevant, as that just seems to be an corner-case bug in the optimiser, not contingent on the uncertain intention of the Standard. But if you still want to include them somewhere, that&#39;s very kind!"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1467904780, "post_id": 38231071, "comment_id": 63919784, "body": "C vs. C++:  <a href=\"https://godbolt.org/g/NHfMYY\" rel=\"nofollow noreferrer\">godbolt&#39;s gcc6.1 will actually generate the stores</a> to zero <code>arr[]</code> if you use <code>-xc</code> and declare it as <code>volatile char arr[4];</code>.  If either of those are omitted, the object never exists at all (which seems valid in this case where no reference to it escapes the function, and the function never stores anything there)."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 3, "creation_date": 1467911431, "post_id": 38231071, "comment_id": 63923930, "body": "The C spec also rather directly says <i>&quot;An actual implementation need not evaluate part of an expression if it can deduce that its value is not used and that no needed side effects are produced (<b>including any caused by calling a function or accessing a volatile object</b>).&quot;</i> (emphasize mine)."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1467911495, "post_id": 38231071, "comment_id": 63923965, "body": "This would allow even optimizing away a read from a global <code>volatile</code> if the compiler &quot;can deduce that its value is not used&quot;?"}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1467919662, "post_id": 38231071, "comment_id": 63928611, "body": "@JohannesSchaub-litb &quot;and that no needed side effects are produced&quot; is probably the key part there. Volatile reads are <i>a</i> side effect, so if you have <code>volatile char* x = 0x40;  *x;</code>, the compiler cannot deduce that the side effect isn&#39;t needed, and has to preserve it. But if it can deduce that the side effect isn&#39;t needed, it can probably eliminate it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1467922471, "post_id": 38231071, "comment_id": 63930072, "body": "@zwol: The Standard very makes quite clear that standard-compliance does not imply quality, and that it&#39;s entirely possible for an implementation to be standard-compliant and useless.  I would suggest that saying that the effects of volatile access are &quot;implementation-defined&quot; would mean that a compiler which documented that the qualifier had no effect whatsoever would fall into the &quot;compliant but useless&quot; category.  The people at gcc should be less interested in what is mandated by the Standard and more interested in what is necessary to make something useful."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467923117, "post_id": 38231071, "comment_id": 63930356, "body": "@supercat I don&#39;t hack on GCC anymore, and I write these answers from the pragmatic perspective that, even if the GCC devs make everything <i>perfect</i> in the next release, we&#39;ll still be working around the older versions for years to come.  Your regular complaints about it would be better directed at the GCC mailing lists.  Or you might consider teaming up with John Regehr on his &quot;Friendly C&quot; project."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467934432, "post_id": 38231071, "comment_id": 63934623, "body": "@zwol: It has long been apparent that the authors of gcc are interested in processing programs that could be efficiently handled without using features that can be cheaply supported on only 99.9% of the platforms upon which C implementations exist, rather than in efficiently handling programs that could benefit from such features.  I am still puzzled, however, by the mentality that seems to think there&#39;s some confusion about what a programmer might mean when writing code that stores to a volatile-qualified pointer.  On all the platforms I&#39;ve seen, the answer would be pretty obvious."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467934553, "post_id": 38231071, "comment_id": 63934656, "body": "@supercat What part of &quot;Your regular complaints about [this] would be better directed at the GCC mailing lists&quot; was unclear?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467934729, "post_id": 38231071, "comment_id": 63934713, "body": "@zwol: My point is that I don&#39;t think there&#39;s anything I could tell the authors of gcc that they don&#39;t already know."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1467937344, "post_id": 38231071, "comment_id": 63935326, "body": "@supercat OK, but you&#39;re not telling <i>me</i> anything I don&#39;t already know either, and there&#39;s absolutely nothing <i>I</i> can do about it.  So unless you have actual suggestions for changes to make to the answer, can we please drop it?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1467976010, "post_id": 38231071, "comment_id": 63949698, "body": "In C++ (no idea about how status is for C++17 which has cleanup quite a bit), it is also unclear whether a write with a differently qualified lvalue than the current object type is considered to &quot;reuse&quot; that object memory and create a new object with volatile qualified type. For const qualifier, this issue doesn&#39;t exist because you can&#39;t write with it, but for volatile the question arises."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1467976215, "post_id": 38231071, "comment_id": 63949813, "body": "If you want to be certain there, you can use placement new to force a volatile object at a particular location. For C, I believe rules are clearer because of its &quot;effective types&quot; where objects don&#39;t really posess types themselfs, but only when they are accesses by lvalues are thes considered to have an &quot;effective type&quot; for access purposes. For C, when you first do a volatile write, will it not change the effective type to be volatile qualified and therefore the write would count to be observable?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1467977302, "post_id": 38231071, "comment_id": 63950397, "body": "@JohannesSchaub-litb Interesting questions! As indicated by my thread about this, I&#39;d like to think your last point would be true, whether or not it results from that exact wording (ideally not, since as you indicated, said wording would conflict with C++&#39;s abstract notion of whether a specific object&#39;s lifetime has begun in a piece of memory). But the C Standard itself doesn&#39;t ever address that scenario, far as I can see."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1467993413, "post_id": 38231071, "comment_id": 63961137, "body": "@JohannesSchaub-litb: From the point of view of the Standard, using a non-qualified pointer to access a <code>volatile</code>-qualified object is UB.  Except when the compiler writer knows all of the useful semantics supported by the execution platform, I see no disadvantage to a compiler regarding as defined behavior situations in which the last write prior to an object becoming observable outside the compiler&#39;s control is volatile, and likewise the first read after an an object changes outside the compiler&#39;s control, but the Standard leaves it undefined to allow for those few implementations..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467993449, "post_id": 38231071, "comment_id": 63961156, "body": "...where the compiler and execution platform are under the control of the same entity, on the presumption that implementations for platforms with additional useful semantics will behave in a way that makes sense on those platforms."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1590987946, "post_id": 38231071, "comment_id": 109877319, "body": "The standard has nothing to say about object code. <b>&quot;Volatile access&quot;</b> although observable behaviour <b>is implementation defined</b>. So if people want things manifested in object code <b>they must use an implementation that says that the volatile behaviour they want is manifested as they want in object code</b>. This is chronically forgotten in Qs &amp; As re volatile accesses &amp; observable behaviour. Answers should make this clear. Volatile is &quot;reliable for&quot; nothing except per implementation documentation."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 82, "last_activity_date": 1487966685, "last_edit_date": 1487966685, "creation_date": 1467829249, "answer_id": 38231071, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/38231071#38231071", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>GCC's behavior <em>may</em> be conforming, and even if it isn't, you should not rely on <code>volatile</code> to do what you want in cases like these.  The C committee designed <code>volatile</code> for memory-mapped hardware registers and for variables modified during abnormal control flow (e.g. signal handlers and <code>setjmp</code>).  <strong>Those are the only things it is reliable for.</strong>  It is not safe to use as a general \"don't optimize this out\" annotation.</p>\n\n<p>In particular, the standard is unclear on a key point.  (I've converted your code to C; there <em>shouldn't</em> be any divergence between C and C++ here. I've also manually done the inlining that would happen before the questionable optimization, to show what the compiler \"sees\" at that point.)</p>\n\n<pre><code>extern void use_arr(void *, size_t);\nvoid foo(void)\n{\n    char arr[8];\n    use_arr(arr, sizeof arr);\n\n    for (volatile char *p = (volatile char *)arr;\n         p &lt; (volatile char *)(arr + 8);\n         p++)\n      *p = 0;\n}\n</code></pre>\n\n<p>The memory-clearing loop accesses <code>arr</code> through a volatile-qualified lvalue, but <code>arr</code> itself is <em>not</em> declared <code>volatile</code>.  It is, therefore, at least arguably allowed for the C compiler to infer that the stores made by the loop are \"dead\", and delete the loop altogether.  There's text in the C Rationale that implies that the committee <strong>meant</strong> to require those stores to be preserved, but the standard itself does not actually make that requirement, as I read it.</p>\n\n<p>For more discussion of what the standard does or does not require, see <a href=\"https://stackoverflow.com/questions/38235112/why-is-a-volatile-local-variable-optimised-differently-from-a-volatile-argument\">Why is a volatile local variable optimised differently from a volatile argument, and why does the optimiser generate a no-op loop from the latter?</a>, <a href=\"https://stackoverflow.com/questions/38243501/does-accessing-a-declared-non-volatile-object-through-a-volatile-reference-point\">Does accessing a declared non-volatile object through a volatile reference/pointer confer volatile rules upon said accesses?</a>, and <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71793\" rel=\"nofollow noreferrer\">GCC bug 71793</a>.</p>\n\n<p>For more on what the committee <em>thought</em> <code>volatile</code> was for, search the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf\" rel=\"nofollow noreferrer\">C99 Rationale</a> for the word \"volatile\". John Regehr's paper \"<a href=\"https://www.cs.utah.edu/~regehr/papers/emsoft08-preprint.pdf\" rel=\"nofollow noreferrer\">Volatiles are Miscompiled</a>\" illustrates in detail how programmer expectations for <code>volatile</code> may not be satisfied by production compilers. The LLVM team's series of essays \"<a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior</a>\" does not touch specifically on <code>volatile</code> but will help you understand how and why modern C compilers are <em>not</em> \"portable assemblers\".</p>\n\n<hr>\n\n<p>To the <strong>practical</strong> question of how to implement a function that does what you wanted <code>volatileZeroMemory</code> to do:  Regardless of what the standard requires or was meant to require, it would be wisest to assume that you can't use <code>volatile</code> for this.  There <em>is</em> an alternative that can be relied on to work, because it would break far too much other stuff if it didn't work:</p>\n\n<pre><code>extern void memory_optimization_fence(void *ptr, size_t size);\ninline void\nexplicit_bzero(void *ptr, size_t size)\n{\n   memset(ptr, 0, size);\n   memory_optimization_fence(ptr, size);\n}\n\n/* in a separate source file */\nvoid memory_optimization_fence(void *unused1, size_t unused2) {}\n</code></pre>\n\n<p>However, you must make absolutely sure that <code>memory_optimization_fence</code> is not inlined under any circumstances.  It must be in its own source file and it must not be subjected to link-time optimization.</p>\n\n<p>There are other options, relying on compiler extensions, that may be usable under some circumstances and can generate tighter code (one of them appeared in a previous edition of this answer), but none are universal.</p>\n\n<p>(I recommend calling the function <code>explicit_bzero</code>, because it is available under that name in more than one C library.  There are at least four other contenders for the name, but each has been adopted only by a single C library.)</p>\n\n<p>You should also know that, even if you can get this to work, it may not be enough.  In particular, consider</p>\n\n<pre><code>struct aes_expanded_key { __uint128_t rndk[16]; };\n\nvoid encrypt(const char *key, const char *iv,\n             const char *in, char *out, size_t size)\n{\n    aes_expanded_key ek;\n    expand_key(key, ek);\n    encrypt_with_ek(ek, iv, in, out, size);\n    explicit_bzero(&amp;ek, sizeof ek);\n}\n</code></pre>\n\n<p>Assuming hardware with AES acceleration instructions, if <code>expand_key</code> and <code>encrypt_with_ek</code> are inline, the compiler may be able to keep <code>ek</code> entirely in the vector register file -- until the call to <code>explicit_bzero</code>, which forces it to <em>copy the sensitive data onto the stack</em> just to erase it, and, worse, doesn't do a darn thing about the keys that are still sitting in the vector registers!</p>\n"}, {"comments": [{"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 1, "creation_date": 1467837703, "post_id": 38233312, "comment_id": 63888435, "body": "This doesn&#39;t work at all... just look at the code that is being generated."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467838687, "post_id": 38233312, "comment_id": 63888913, "body": "@cooky451 It looks like it generates the accesses to me. Which version isn&#39;t working?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467840057, "post_id": 38233312, "comment_id": 63889597, "body": "Having read my generated ASM mo&#39; better, it seems to inline the function call and retain the looping, but not do any storing to <code>*ptr</code> during that loop, or actually <i>anything at all</i>... just looping. wtf, there goes my brain."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1467840336, "post_id": 38233312, "comment_id": 63889711, "body": "@underscore_d It&#39;s because it&#39;s optimizing away the store while preserving the read of the volatile."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467840554, "post_id": 38233312, "comment_id": 63889808, "body": "Yeah, and it dumps the result to an unchanging <code>edx</code>: I get this: <code>.L16: subq $1, %rax; movzbl -1(%rsp), %edx; jne .L16</code>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467840871, "post_id": 38233312, "comment_id": 63889921, "body": "If I change the function to allow passing an arbitrary <code>volatile unsigned char const</code> fill byte... <i>it doesn&#39;t even read it</i>. The generated inlined call to <code>volatileFill()</code> is just <code>[load RAX with sizeof] .L9: subq $1, %rax; jne .L9</code>. Why does the optimiser (A) not re-read the fill byte and (B) bother preserving the loop where it doesn&#39;t do anything?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467842629, "post_id": 38233312, "comment_id": 63890721, "body": "^ that only happens if passing the argument by value, which of course can&#39;t possibly be affected by any other code. Passing by reference produces the same effective result as declaring in-body. But then you realise my 1st sentence here applies equally to a locally declared variable in the function, so why isn&#39;t that trashed too? I feel a question coming on..."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467843803, "post_id": 38233312, "comment_id": 63891164, "body": "@underscore_d I believe that&#39;s because volatile is ignored for parameters."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467844662, "post_id": 38233312, "comment_id": 63891398, "body": "@DKrueger I&#39;m not finding any source for that online, and searching N3797 is... tricky. Could you point me at the relevant clause of the Standard? This answer mentions that it&#39;s ignored for <i>overloading</i> - <a href=\"http://stackoverflow.com/a/10242660/2757035\">stackoverflow.com/a/10242660/2757035</a> - but then so is <code>const</code>, and yet that still affects behaviour... or rather compilation. Even if you&#39;re right, why does the optimiser not then elide the loop, since it&#39;s now a no-op? I think I&#39;ll still ask a question about that as it&#39;s totally perplexing."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467845151, "post_id": 38233312, "comment_id": 63891535, "body": "@underscore_d It&#39;s discussed here: <a href=\"http://stackoverflow.com/questions/3303660/volatile-variables-as-argument-to-function\" title=\"volatile variables as argument to function\">stackoverflow.com/questions/3303660/&hellip;</a> but no chapter and verse"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467845450, "post_id": 38233312, "comment_id": 63891648, "body": "@DKrueger I found that and don&#39;t see how it&#39;s relevant. It discusses <i>pointers to</i> <code>volatile</code>, not by-value arguments declared <code>volatile</code>. Which are, yeah, pretty pointless, but I would presume would behave the same as &#39;real&#39; local variables declared <code>volatile</code>. And yet they don&#39;t. I&#39;m aware <code>volatile</code> is an implementation-defined mess, so the question is probably really for GCC, not the Standard. But there&#39;s clearly <i>something</i> odd going on."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467847630, "post_id": 38233312, "comment_id": 63892329, "body": "Interesting edit - FWIW, works for me, on my current compiler, with the current wind direction and alignment of celestial bodies. The logic <i>seems</i> sound. One might assume that popular implementations of &#39;volatile fill&#39; do something much like this, at least within the safe confines of their own implementation-defined behaviour."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467934561, "post_id": 38233312, "comment_id": 63934660, "body": "@underscore_d: Would not <code>volatile</code> qualifiers on received parameters be meaningful and important in situations where code modifies the values stored therein between a <code>setjmp</code> and the corresponding <code>longjmp</code>, and then accesses those values following the <code>longjmp</code>?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467969429, "post_id": 38233312, "comment_id": 63945730, "body": "@supercat I originally couldn&#39;t imagine much point to <code>volatile</code> locals, but then I thought about inline ASM making anything possible (in a very implementation &amp; ABI-dependent way, but any time we use <code>volatile</code> we&#39;re already there) - though surely in most cases it&#39;d be possible/better to allocate pre-call &amp; pass a <code>volatile</code> ref, documenting intended sharing. But good point about <code>jmp</code>s. So there are definitely hypothetical use-cases for <code>volatile</code> qualifying local (incl <code>static</code>) variables. Hard for me to imagine in practical use though. Could you recommend good examples using such methods?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1553538433, "post_id": 38233312, "comment_id": 97413327, "body": "@underscore_d: A function which uses <code>setjmp</code> for the purposes of giving nested functions an &quot;escape path&quot;, and then calls such functions within a loop, would need to declare the loop index <code>volatile</code> if it would need to find out the value of the index when the called function exited via <code>longjmp</code>.  Absent a <code>volatile</code> qualifier, a compiler would likely generate code for e.g. <code>for (int i=0; i&lt;10; i++) doSomething(i);</code> that would keep <code>i</code> in a caller-saved register whose value would get lost if <code>getSomething</code> doesn&#39;t return normally."}], "tags": [], "owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "is_accepted": false, "score": 0, "last_activity_date": 1467843577, "last_edit_date": 1467843577, "creation_date": 1467837329, "answer_id": 38233312, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/38233312#38233312", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>It should be possible to write a portable version of the function by using a volatile object on the right-hand side and forcing the compiler to preserve the stores to the array.</p>\n\n<pre><code>void volatileZeroMemory(void* ptr, unsigned long long size)\n{\n    volatile unsigned char zero = 0;\n    unsigned char* bytePtr = static_cast&lt;unsigned char*&gt;(ptr);\n\n    while (size--)\n    {\n        *bytePtr++ = zero;\n    }\n\n    zero = static_cast&lt;unsigned char*&gt;(ptr)[zero];\n}\n</code></pre>\n\n<p>The <code>zero</code> object is declared <code>volatile</code> that ensures the compiler can make no assumptions about its value even though it always evaluates as zero. </p>\n\n<p>The final assignment expression reads from a volatile index in the array and stores the value in a volatile object. Since this read cannot be optimized, it ensures that the compiler must generate the stores specified in the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1531950826, "post_id": 39903342, "comment_id": 89794607, "body": "If accesses to the object after the function executes would invoke UB, that would mean that such accesses could yield the values the object held before it was &quot;cleared&quot;.  How is that not the opposite of security?"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1481053379, "last_edit_date": 1481053379, "creation_date": 1475778902, "answer_id": 39903342, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/39903342#39903342", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>I offer this version as portable C++ (although the semantics are subtly different):</p>\n\n<pre><code>void volatileZeroMemory(volatile void* const ptr, unsigned long long size)\n{\n    volatile unsigned char* bytePtr = new (ptr) volatile unsigned char[size];\n\n    while (size--)\n    {\n        *bytePtr++ = 0;\n    }\n}\n</code></pre>\n\n<p>Now you have write accesses to a <em>volatile object</em>, not merely accesses to a non-volatile object made through a volatile view of the object.</p>\n\n<p>The semantic difference is that it now formally ends the lifetime of whatever object(s) occupied the memory region, because the memory has been reused.  So access to the object after zeroing its contents is now surely undefined behavior (formerly it would have been undefined behavior in most cases, but some exceptions surely existed).</p>\n\n<p>To use this zeroing during an object's lifetime instead of at the end, the caller should use placement <code>new</code> to put a new instance of the original type back again.</p>\n\n<p>The code can be made shorter (albeit less clear) by using value initialization:</p>\n\n<pre><code>void volatileZeroMemory(volatile void* const ptr, unsigned long long size)\n{\n    new (ptr) volatile unsigned char[size] ();\n}\n</code></pre>\n\n<p>and at this point it is a one-liner and barely warrants a helper function at all.</p>\n"}], "owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5128, "favorite_count": 14, "accepted_answer_id": 38231071, "answer_count": 4, "score": 89, "last_activity_date": 1487966685, "creation_date": 1467828458, "last_edit_date": 1467892983, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>I need a function that (like SecureZeroMemory from the WinAPI) always zeros memory and doesn't get optimized away, even if the compiler thinks the memory is never going to accessed again after that. Seems like a perfect candidate for volatile. But I'm having some problems actually getting this to work with GCC. Here is an example function:</p>\n\n<pre><code>void volatileZeroMemory(volatile void* ptr, unsigned long long size)\n{\n    volatile unsigned char* bytePtr = (volatile unsigned char*)ptr;\n\n    while (size--)\n    {\n        *bytePtr++ = 0;\n    }\n}\n</code></pre>\n\n<p>Simple enough. But the code that GCC actually generates if you call it varies wildly with the compiler version and the amount of bytes you're actually trying to zero. <a href=\"https://godbolt.org/g/cMaQm2\">https://godbolt.org/g/cMaQm2</a></p>\n\n<ul>\n<li>GCC 4.4.7 and 4.5.3 never ignore the volatile.</li>\n<li>GCC 4.6.4 and 4.7.3 ignore volatile for array sizes 1, 2, and 4.</li>\n<li>GCC 4.8.1 until 4.9.2 ignore volatile for array sizes 1 and 2.</li>\n<li>GCC 5.1 until 5.3 ignore volatile for array sizes 1, 2, 4, 8.</li>\n<li>GCC 6.1 just ignores it for any array size (bonus points for consistency).</li>\n</ul>\n\n<p>Any other compiler I have tested (clang, icc, vc) generates the stores one would expect, with any compiler version and any array size. So at this point I'm wondering, is this a (pretty old and severe?) GCC compiler bug, or is the definition of volatile in the standard that imprecise that this is actually conforming behavior, making it essentially impossible to write a portable \"SecureZeroMemory\" function?</p>\n\n<p>Edit: Some interesting observations.</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstring&gt;\n#include &lt;atomic&gt;\n\nvoid callMeMaybe(char* buf);\n\nvoid volatileZeroMemory(volatile void* ptr, std::size_t size)\n{\n    for (auto bytePtr = static_cast&lt;volatile std::uint8_t*&gt;(ptr); size-- &gt; 0; )\n    {\n        *bytePtr++ = 0;\n    }\n\n    //std::atomic_thread_fence(std::memory_order_release);\n}\n\nstd::size_t foo()\n{\n    char arr[8];\n    callMeMaybe(arr);\n    volatileZeroMemory(arr, sizeof arr);\n    return sizeof arr;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/v8lMjG\">The possible write from callMeMaybe() will make all GCC versions except 6.1 generate the expected stores.</a> Commenting in the memory fence will also make GCC 6.1 generate the stores, although only in combination with the possible write from callMeMaybe().</p>\n\n<p>Someone has also suggested to flush the caches. <a href=\"http://codepad.org/1yC7a8J8\">Microsoft does <strong>not</strong> try to flush the cache at all in \"SecureZeroMemory\".</a> The cache is likely going to be invalidated pretty fast anyway, so this is probably not be a big deal. Also, if another program was trying to probe the data, or if it was going to be written to the page file, it would always be the zeroed version.</p>\n\n<p>There are also some concerns about GCC 6.1 using memset() in the standalone function. The GCC 6.1 compiler on godbolt might a broken build, as GCC 6.1 seems to generate a normal loop (like 5.3 does on godbolt) for the standalone function for some people. (Read comments of zwol's answer.)</p>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1467831352, "post_id": 38230854, "comment_id": 63885015, "body": "<a href=\"http://perldoc.perl.org/POSIX.html#MATH\" rel=\"nofollow noreferrer\">perldoc.perl.org/POSIX.html#MATH</a> search for lgamma."}], "answers": [{"comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1467915826, "post_id": 38231047, "comment_id": 63926425, "body": "for some reason, my laptop doesn&#39;t like Inline::C, it says that it successfully installed but it won&#39;t load.  Perhaps there is a module-free way of doing this?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 1, "creation_date": 1467918044, "post_id": 38231047, "comment_id": 63927764, "body": "you&#39;d have to write pure XS code... what error are you getting?"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1467829484, "last_edit_date": 1467829484, "creation_date": 1467829178, "answer_id": 38231047, "question_id": 38230854, "link": "https://stackoverflow.com/questions/38230854/import-c-function-into-perl-program/38231047#38231047", "title": "Import C function into Perl program", "body": "<p>Here's an example using <a href=\"https://metacpan.org/pod/distribution/Inline-C/lib/Inline/C.pod\" rel=\"nofollow\">Inline::C</a>, while calling a function from <code>math.h</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Inline 'C';\n\nmy $num = c_function(5, 5);\n\nprint \"$num\\n\";\n\n__END__\n__C__\n\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble c_function(int x, int y){\n    return pow(x, y);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3125\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1467915470, "post_id": 38231754, "comment_id": 63926194, "body": "I&#39;ve successfully installed Inline (at least according to &quot;make test&quot;) and its 4 dependencies:  but I cannot run the script at all (part of the errors:)  &quot;/usr/bin/perl&quot; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- c_in_perl_pl_8ee2.bs blib/arch/auto/c_in_perl_pl_8ee2/c_in_perl_pl_8ee2.bs 644 &quot;/usr/bin/perl&quot; &quot;/usr/local/share/perl/5.22.1/ExtUtils/xsubpp&quot;  -typemap &quot;/usr/share/perl/5.22/ExtUtils/typemap&quot;   c_in_perl_pl_8ee2.xs &gt; c_in_perl_pl_8ee2.xsc"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1467919209, "post_id": 38231754, "comment_id": 63928385, "body": "You&#39;re not showing your Perl/C code so I can&#39;t speculate what the problem is. From your suggested edit it says <code>FILE</code> is not defined. Maybe you didn&#39;t <code>#include &lt;stdio.h&gt;</code>?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 5, "last_activity_date": 1467832290, "last_edit_date": 1467832290, "creation_date": 1467831425, "answer_id": 38231754, "question_id": 38230854, "link": "https://stackoverflow.com/questions/38230854/import-c-function-into-perl-program/38231754#38231754", "title": "Import C function into Perl program", "body": "<p>The tricky part of this question is passing arrays of doubles from Perl to C.</p>\n\n<p>One approach is to use two steps. Converting a Perl array (<code>AV*</code> in C) to a double array, and then calling your function. The perl functions and macros used here are documented in <a href=\"http://metacpan.org/pod/perlguts\"><code>perlguts</code></a></p>\n\n<pre><code>use Inline 'C';\n@a = (1,2,3,4,5);\n@b = (19,42);\n$x = c_function(\\@a,\\@b);\nprint \"Result: $x\\n\";\n__END__\n__C__\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\ndouble *AV_to_doubleptr(AV *av, int *len)\n{\n    *len = av_len(av) + 1;\n    double *array = malloc(sizeof(double) * *len);\n    int i;\n    for (i=0; i&lt;*len; i++)\n        array[i] = SvNV( *av_fetch(av, i, 0) );\n    return array;  /* returns length in len as side-effect */\n}\n\ndouble the_real_function(const double *x1, int n1, const double *x2, int n2)\n{\n    ...\n}\n\ndouble c_function(AV *av1, AV *av2)\n{\n    int n1, n2;\n    double *x1 = AV_to_doubleptr(av1, &amp;n1);\n    double *x2 = AV_to_doubleptr(av2, &amp;n2);\n    double result = the_real_function(x1,n1, x2,n2);\n    free(x2);\n    free(x1);\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1467832290, "creation_date": 1467828441, "question_id": 38230854, "link": "https://stackoverflow.com/questions/38230854/import-c-function-into-perl-program", "title": "Import C function into Perl program", "body": "<p>I'd like to import a C function I wrote</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble function (const double *restrict ARRAY1, const size_t ARRAY1_SIZE, const double *restrict ARRAY2, const size_t ARRAY2_SIZE) {//calculate a p-value based on an array\n....\n}\nint main(){\n....\n}\n</code></pre>\n\n<p>into a perl script, I've seen Inline::C and XS but I don't see how to use them, I can't work through the examples, and I also need the lgamma function.\nThe function takes 2 arrays as input.</p>\n\n<p>Would anyone be able to provide an example of how I could import this into a perl script while importing C's math.h as well?</p>\n"}, {"tags": ["c++", "c", "memory-management", "error-handling", "lua"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467832372, "post_id": 38230748, "comment_id": 63885605, "body": "The identifier: <code>[-1, +(2|0), e]</code> says that the function may throw errors. Check the source: <a href=\"https://www.lua.org/source/5.3/lapi.c.html#lua_next\" rel=\"nofollow noreferrer\">lua.org/source/5.3/lapi.c.html#lua_next</a>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467834411, "post_id": 38230748, "comment_id": 63886677, "body": "Right, so this is the meat of it: <a href=\"https://www.lua.org/source/5.3/ltable.c.html#luaH_next\" rel=\"nofollow noreferrer\">lua.org/source/5.3/ltable.c.html#luaH_next</a> What in here is potentially causing a dynamic allocation? To my knowledge, <code>lua_next</code> cannot trigger metamethod lookup."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467834523, "post_id": 38230748, "comment_id": 63886757, "body": "Does <code>lua_next</code> only produce an error if I start it off with a bad key or something? I mean clearly there is an error call in here: <a href=\"https://www.lua.org/source/5.3/ltable.c.html#findindex\" rel=\"nofollow noreferrer\">lua.org/source/5.3/ltable.c.html#findindex</a>"}, {"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467837030, "post_id": 38230748, "comment_id": 63888070, "body": "There are also possible errors raised in <a href=\"https://www.lua.org/source/5.3/lapi.c.html#index2addr\" rel=\"nofollow noreferrer\">lua.org/source/5.3/lapi.c.html#index2addr</a>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467838372, "post_id": 38230748, "comment_id": 63888746, "body": "I see, but so long as there actually is a table I think none of that will throw"}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467851818, "post_id": 38230748, "comment_id": 63893423, "body": "AFAICS, <code>findindex</code> is the only place where <code>lua_next</code> can raise an error. And that should only happen when you pass in a key that&#39;s not in the table, or when you modify the table while iterating. Remember that <code>lua_tostring</code>/<code>lua_tonumber</code>/<code>lua_isnumber</code> may change the type of a value on the stack (which could then result in a non-existent key). Anyway, why not use <code>lua_pcall</code> to be safe?!"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1467866589, "post_id": 38230748, "comment_id": 63896419, "body": "I guess I find the &quot;cpcall&quot; idiom to be ugly. But now that has made me think that I just need a generic implementation so that it doesn&#39;t require so much boilerplate. Anyways I think it&#39;s a reasonable question, you don&#39;t want to make more pcall than necessary. Before this I thought there was no way to inspect a table at all really if you are in &quot;out of memory&quot;, but now I have learned that there is"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467872906, "post_id": 38230748, "comment_id": 63898523, "body": "@siffiejoe: If I just put a <code>pcall</code> everywhere I wasn&#39;t sure then I would have a very large number of <code>pcall</code>. This question is about whether I actually need those <code>pcall</code> in a particular case I guess."}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467885523, "post_id": 38230748, "comment_id": 63906041, "body": "@ChrisBeck: You only need to use pcall in places where you want to do something <i>immediately</i> when an error is raised. That&#39;s not that often. Alternatively, you can put a userdata with a finalizer on the Lua stack and let the GC call it unless you disarm it first in the no-error case."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467886951, "post_id": 38230748, "comment_id": 63907010, "body": "@siffiejoe: It depends on what exactly you are doing in the C api. If you are just writing callbacks that you push to lua, then its okay for them to signal lua errors -- lua itself will catch them and signal them to the script as an error in the callback function. But when there is no callback, when you are just writing C api calls from your application to control the VM, lua error means that the program is terminated -- <code>lua_panic</code> follows, and unless you do squirrelly things with the panic handler thats it. So knowing exactly what commands can error in what cases matters alot to me."}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 1, "creation_date": 1467902362, "post_id": 38230748, "comment_id": 63918020, "body": "Since any Lua function call can raise a memory error, omitting the initial <code>lua_pcall</code>/<code>lua_cpcall</code> is asking for trouble."}], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467829669, "creation_date": 1467828098, "last_edit_date": 1467829669, "question_id": 38230748, "link": "https://stackoverflow.com/questions/38230748/lua-c-api-how-to-traverse-a-table-with-no-possibility-of-lua-error-lua-panic", "title": "lua C api: How to traverse a table with no possibility of lua_error / lua panic?", "body": "<p>In the lua 5.2 manual they have <a href=\"https://www.lua.org/manual/5.2/manual.html#lua_next\" rel=\"nofollow\">some documentation</a> regarding <code>lua_next</code>, the function used to iterate over a table.</p>\n\n<blockquote>\n  <p>A typical traversal looks like this:</p>\n</blockquote>\n\n<pre><code> /* table is in the stack at index 't' */\n lua_pushnil(L);  /* first key */\n while (lua_next(L, t) != 0) {\n   /* uses 'key' (at index -2) and 'value' (at index -1) */\n   printf(\"%s - %s\\n\",\n          lua_typename(L, lua_type(L, -2)),\n          lua_typename(L, lua_type(L, -1)));\n   /* removes 'value'; keeps 'key' for next iteration */\n   lua_pop(L, 1);\n }\n</code></pre>\n\n<p>According to the manual, none of the C api calls in this example can cause a lua error (<code>lua_type</code>, <code>lua_typename</code>, <code>lua_pushnil</code>, <code>lua_pop</code>) EXCEPT for <code>lua_next</code>.</p>\n\n<p>As I understand, <code>lua_next</code> can only cause an error in the case that it fails to allocate memory, so this is really only an issue in programs in which you hope to recover from memory allocation failures.</p>\n\n<p>However, suppose that I am writing such a program. Is there a way that I can avoid putting the above iteration code in a protected call if I want to be able to recover from such an error?</p>\n\n<p>As I understand, the <code>lua_next</code> should not actually be copying anything. The memory on the stack is already allocated and assigning atomic values to a stack position does not cause lua to allocate more memory. In the case of strings, lua is copy-on-write. In the case of reference values, it just increments a reference counter and doesn't need a dynamic allocation.</p>\n\n<p>Suppose I put <code>lua_checkstack(L, 2)</code> first to ensure that there is stack space for the two entries (<code>key</code> and <code>value</code>). Is that enough to guarantee that I won't have a lua error, and so can avoid putting this in a protected context? (Forgetting what the manual says.) What exactly are the dynamic allocations that lua needs to do here?</p>\n"}, {"tags": ["c++", "c", "algorithm", "math"], "answers": [{"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467828621, "post_id": 38230808, "comment_id": 63883399, "body": "The dependency on nvr is missing"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467828814, "post_id": 38230808, "comment_id": 63883503, "body": "@Veridian what kind of dependency? Ultimately you&#39;re going to use <code>nvr % nr</code> value, right?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1467829092, "last_edit_date": 1467829092, "creation_date": 1467828296, "answer_id": 38230808, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38230808#38230808", "title": "How to turn for loop into a math equation?", "body": "<p>In your second loop, the condition check has the <code>nr-1</code> as abound.</p>\n\n<p>If i understood your problem correctly, you can express it like</p>\n\n<blockquote>\n  <p><code>array[i] = array[i] + 1 , i = nvr % nr ,...,(nr-2)</code></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467828927, "post_id": 38230874, "comment_id": 63883566, "body": "Thanks actually, I think I can do this:    array[i] = nepr + (i &lt; j); i = 0,...,(nr-1); j = nvr % nr"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832434, "post_id": 38230874, "comment_id": 63885639, "body": "Assuming positive is needed. Code does fail with <code>nvr = 7; nr = -3;</code>"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832447, "post_id": 38230874, "comment_id": 63885643, "body": "@chux Right. I edited the answer to spell out the positiveness assumption."}], "tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 1, "last_activity_date": 1467832373, "last_edit_date": 1467832373, "creation_date": 1467828506, "answer_id": 38230874, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38230874#38230874", "title": "How to turn for loop into a math equation?", "body": "<p>Not entirely clear that's what you are asking, but the following does the same thing in a single loop.</p>\n\n<pre><code>for (int i = 0, j = nvr % nr; i &lt; nr; i++) {\n    array[i] = nepr + (i &lt; j);\n}\n</code></pre>\n\n<p><hr>\n[EDIT] In casual language without any loops the above is equivalent to...</p>\n\n<blockquote>\n  <p>Let <code>j = nvr % nr</code>. Assuming positive <code>nr</code> and <code>nvr</code>, <code>0 &lt;= j &lt; nr</code> and:</p>\n  \n  <ul>\n  <li><code>array[i] = nepr + 1</code> for <code>i = 0 ... j-1</code></li>\n  <li><code>array[i] = nepr</code> for <code>i = j ... nr-1</code> </li>\n  </ul>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467829830, "post_id": 38231171, "comment_id": 63884071, "body": "I believe your notation doesn&#39;t take into account that x is discretely valued. Your equations are for x being continuous. Correct me if I&#39;m wrong."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467829927, "post_id": 38231171, "comment_id": 63884137, "body": "@Veridian That&#39;s not directly necessary, the equations are still valid.  If you want to express that x must be an integer, just state it separately."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832246, "post_id": 38231171, "comment_id": 63885532, "body": "@chux It seems likely that nvr is always positive, but I changed it anyway."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832609, "post_id": 38231171, "comment_id": 63885724, "body": "Yes, assuming <code>nvr, nr</code> positive does simplify the problem.  Doubt if OP wants a full range <code>int</code> solution."}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 3, "last_activity_date": 1467832189, "last_edit_date": 1467832189, "creation_date": 1467829568, "answer_id": 38231171, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38231171#38231171", "title": "How to turn for loop into a math equation?", "body": "<p>Just express it as a <a href=\"https://en.wikipedia.org/wiki/Piecewise\" rel=\"nofollow\">piecewise-defined function</a>:</p>\n\n<pre><code> f(x) = {nepr + 1 if x &lt;  (nvr % xr)}  \n        {nepr     if x &gt;= (nvr % xr)}\n</code></pre>\n\n<p>You can also define it in terms of the <a href=\"https://en.wikipedia.org/wiki/Heaviside_step_function\" rel=\"nofollow\">Heaviside step function</a>:</p>\n\n<pre><code> f(x) = nepr + H((nxr % xr) - x)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1467830312, "post_id": 38231294, "comment_id": 63884378, "body": "Probably you should add i \u2208 N"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1467830345, "post_id": 38231294, "comment_id": 63884395, "body": "@Logman that seems inherent in the fact that i is used as an index into array"}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1467830523, "post_id": 38231294, "comment_id": 63884504, "body": "@GuyGreer but let&#39;s stay formal ;)"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1467829955, "last_edit_date": 1486653058, "creation_date": 1467829955, "answer_id": 38231294, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38231294#38231294", "title": "How to turn for loop into a math equation?", "body": "<p>Here it is in LaTeX. To see or edit the LaTeX, click on the equation.</p>\n\n<p><a href=\"http://www.codecogs.com/eqnedit.php?latex=%5Cmathrm%7Barray%7D_i:=&space;%5Cbegin%7Bcases%7D&space;n_%5Cmathrm%7Bepr%7D&plus;1,&amp;%5Ctext%7Bfor&space;%7D0&lt;i&lt;(n_%7Bvr%7D%5Cmod&space;n_r)%5C%5C&space;n_%5Cmathrm%7Bepr%7D&amp;%5Ctext%7Bfor&space;%7Dn_%7Bvr%7D%5Cle&space;i&lt;n_r&space;%5Cend%7Bcases%7D\" rel=\"nofollow noreferrer\"><img src=\"https://latex.codecogs.com/png.latex?%5Cmathrm%7Barray%7D_i:=&space;%5Cbegin%7Bcases%7D&space;n_%5Cmathrm%7Bepr%7D&plus;1,&amp;%5Ctext%7Bfor&space;%7D0&lt;i&lt;(n_%7Bvr%7D%5Cmod&space;n_r)%5C%5C&space;n_%5Cmathrm%7Bepr%7D&amp;%5Ctext%7Bfor&space;%7Dn_%7Bvr%7D%5Cle&space;i&lt;n_r&space;%5Cend%7Bcases%7D\" alt=\"latex equation\"></a></p>\n\n<p>The <code>:=</code> symbol expresses assignment. You could also write it in functional fashion by replacing <code>array_i</code> with <code>array(i)</code>, a function defined on an open range of integers.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1467833182, "last_edit_date": 1495539923, "creation_date": 1467833182, "answer_id": 38232215, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38232215#38232215", "title": "How to turn for loop into a math equation?", "body": "<p>Thought I would try to post a full <code>int</code> range soukltion base on <a href=\"https://stackoverflow.com/a/38230874/2410359\">@dxiv</a> fine answer which works well when <code>nr, nvr</code> are positive - the usual case.</p>\n\n<p>Assume <code>nr, nvr</code> are <code>int</code>.</p>\n\n<pre><code>assert(nr != 0);\nassert(nr != -1 || nvr &gt;= -INT_MAX);  // avoid -2147483648 % -1\nint j = nvr % nr;\nint ij = max(i,j);\nfor (int i = 0; i &lt; ij; i++) {\n    array[i] = nepr + (i &lt; j);\n}\n</code></pre>\n"}], "owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 38230874, "answer_count": 5, "score": 1, "last_activity_date": 1467833182, "creation_date": 1467828080, "last_edit_date": 1467831400, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation", "title": "How to turn for loop into a math equation?", "body": "<p>I have the following two loops in my program and I am trying to write them out as math equations, but I'm having some difficulty finding a concise way to do so:</p>\n\n<pre><code>// Loop1\nfor (int i = 0; i &lt; nr; i++) {\n    array[i] = nepr;\n}\n\n// Loop2\nfor (int i = 0; i &lt; (nvr % nr); i++) {\n    array[i]++;\n}\n</code></pre>\n\n<p>The code is completely function, but I'm trying to express these loops in a document I'm writing. </p>\n\n<blockquote>\n  <p>Any help would be very much appreciated.</p>\n</blockquote>\n\n<p>So far I have this:</p>\n\n<pre><code>array[i] = nepr, i = 0,...,(nr-1)\n</code></pre>\n\n<p>but I'm not sure how to incorporate the second loop into the equation, or write a second equation for it.</p>\n"}, {"tags": ["c", "arrays", "enums", "int", "structure"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467827814, "post_id": 38230521, "comment_id": 63882966, "body": "Typos: <code>s2=grade(s1, 94, 0);</code> and the next 3 lines should read <code>s2=grade(s2 ...</code> and simillary the 4 <code>s3 = </code> lines."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1467827870, "post_id": 38230521, "comment_id": 63882996, "body": "add the grades and divide....what&#39;s the problem?"}, {"owner": {"reputation": 107, "user_id": 5824265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/018aab3800e473f7ea3179ebc79b00fa?s=128&d=identicon&r=PG&f=1", "display_name": "user1049876", "link": "https://stackoverflow.com/users/5824265/user1049876"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1467827940, "post_id": 38230521, "comment_id": 63883039, "body": "@WeatherVane I just changed it, thanks"}, {"owner": {"reputation": 107, "user_id": 5824265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/018aab3800e473f7ea3179ebc79b00fa?s=128&d=identicon&r=PG&f=1", "display_name": "user1049876", "link": "https://stackoverflow.com/users/5824265/user1049876"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1467827976, "post_id": 38230521, "comment_id": 63883060, "body": "@SouravGhosh How do I have the computer do that?"}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "edited": false, "score": 0, "creation_date": 1467828062, "post_id": 38230521, "comment_id": 63883128, "body": "@user1049876 Your question is unclear? Do you mean you want to calculate the average grade for each student? In that case you can add a new member in <code>student</code> struct called <code>average</code>, like <code>double average;</code>. Then you can define a function <code>double calc_average(student st)</code> which will calculate the average and return it back. You can call that function like this , <code>stdent1.average = calc_average(student1);</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1467828075, "post_id": 38230521, "comment_id": 63883133, "body": "what do you mean how to? You know how to add variables and divide, what&#39;s stopping you? Sorry, I&#39;m really not clear with your problem...."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 6539370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iw1Sp0Mg98o/AAAAAAAAAAI/AAAAAAAAAVk/eXGiEmNks1s/photo.jpg?sz=128", "display_name": "ivyraveneve", "link": "https://stackoverflow.com/users/6539370/ivyraveneve"}, "is_accepted": false, "score": -2, "last_activity_date": 1467827859, "creation_date": 1467827859, "answer_id": 38230669, "question_id": 38230521, "link": "https://stackoverflow.com/questions/38230521/making-an-average-of-grades-in-c/38230669#38230669", "title": "Making an Average of Grades in C", "body": "<p>You can hardcore the average perhaps as for example s3.scores[3]</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1467828963, "post_id": 38230876, "comment_id": 63883592, "body": "You&#39;ll also need a member saying <i>how many</i> scores. OP&#39;s code only entered 4 of the 5 possible scores."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467829205, "post_id": 38230876, "comment_id": 63883730, "body": "Yes,  I saw that in OP&#39;s code too :). Thats why I wrote <code>once you add all the scores for a student</code>, by which I meant OP would add all 5 scores."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467829601, "post_id": 38230876, "comment_id": 63883942, "body": "Well if you are adding new struct members, you could add <code>int numscores</code> and remove the last argument of function <code>grade()</code>."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467830224, "post_id": 38230876, "comment_id": 63884317, "body": "@WeatherVane Which function <code>grade()</code>, you mean <code>calc_average()</code>? There I am passing only one argument. But just in case you want to improve the answer, you can edit it for good :)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467834618, "post_id": 38230876, "comment_id": 63886807, "body": "Passing by value of this 130+ byte <code>student</code> is not so  great, better to pass   a pointer to it."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467834876, "post_id": 38230876, "comment_id": 63886946, "body": "@chux true... i just didnt want to bring pointers into picture.. seemed to me like OP was not able to calculate average of 5 numbers, and given this background, i thought pointers would make it difficult for OP to understand ..."}], "tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": false, "score": 1, "last_activity_date": 1467828516, "creation_date": 1467828516, "answer_id": 38230876, "question_id": 38230521, "link": "https://stackoverflow.com/questions/38230521/making-an-average-of-grades-in-c/38230876#38230876", "title": "Making an Average of Grades in C", "body": "<p>Add a new member to <code>student structure</code> like this:</p>\n\n<pre><code>typedef struct{\n    char name[100];\n    int age;\n    int scores[5];\n    double average;   /* new member */\n} student;\n</code></pre>\n\n<p>Define a new function to calculate average for a student and return it back, like this:</p>\n\n<pre><code>double calc_average(student st)\n{\n    int i;\n    double sum = 0.0;\n\n    /* Calculate sum of 5 scores */\n    for (i = 0; i &lt; 5; i++)\n        sum = sum + st.scores[i];\n\n    /* Return average */\n    return sum / 5;\n}\n</code></pre>\n\n<p>Then in <code>main</code>  - (once you add all the scores for a student) - , you can call this function to get the average score, like this:</p>\n\n<pre><code>student1.average = calc_average(student1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": true, "score": 2, "last_activity_date": 1468064551, "last_edit_date": 1468064551, "creation_date": 1467828954, "answer_id": 38230992, "question_id": 38230521, "link": "https://stackoverflow.com/questions/38230521/making-an-average-of-grades-in-c/38230992#38230992", "title": "Making an Average of Grades in C", "body": "<p>You could create a <strong>function to know the average of grades of sent structure</strong> this way:</p>\n\n<pre><code>float average(student st, int no_of_grades)\n{\n    float sum=0;\n    for(int num=0 ; num &lt; no_of_grades ; num++)\n    {\n        sum += st.scores[num];\n    }\n\n    return sum/no_of_grades;\n}\n</code></pre>\n\n<p>Here the arguments are the structure and number of grades entered for student.</p>\n\n<hr>\n\n<p>After printing all the grades of the student in <code>main()</code>, add this statement:</p>\n\n<pre><code>printf(\"average of %s : %f\",s1.name,average(s1,4)); //average(structure,  no of grades)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Name: Student1  Age: 20\nGrade: 100\nGrade: 96\nGrade: 99\nGrade: 100\naverage of Student1 : 98.750000\n</code></pre>\n\n<hr>\n\n<p><strong>Suggestions:</strong></p>\n\n<ul>\n<li>Don't use <code>int main()</code>, instead use <code>int main(void)</code> as no arguments are being sent into <code>main()</code> function. But, in first case that is <code>int main()</code>, any number of arguments can be sent into <code>main()</code> function.</li>\n</ul>\n"}], "owner": {"reputation": 107, "user_id": 5824265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/018aab3800e473f7ea3179ebc79b00fa?s=128&d=identicon&r=PG&f=1", "display_name": "user1049876", "link": "https://stackoverflow.com/users/5824265/user1049876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 1, "accepted_answer_id": 38230992, "answer_count": 3, "score": 1, "last_activity_date": 1468064551, "creation_date": 1467827371, "last_edit_date": 1467829976, "question_id": 38230521, "link": "https://stackoverflow.com/questions/38230521/making-an-average-of-grades-in-c", "title": "Making an Average of Grades in C", "body": "<p><strong>Note: I am a beginner and am just learning.</strong></p>\n\n<p>I have student structure with 5 names, their grades, their ages, and an their grades. I would like to know how to write and call a function that will calculate the average of their grades, and then print it. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct{\n    char name[100];\n    int age;\n    int scores[5];\n} student;\n\nstudent grade(student st, int grade, int num) {\n    st.scores[num]=grade;\n    return st;\n}\n\nint main(){\n    student s1;\n    strcpy(s1.name, \"Student1\");\n\n    s1.age = 20;\n\n    //printf(\"Size: %d\\n\", sizeof(s1));\n    printf(\"Name: %s\\tAge: %d\\n\", s1.name, s1.age);\n\n    s1=grade(s1, 100, 0);\n    s1=grade(s1, 96, 1);\n    s1=grade(s1, 99, 2);    \n    s1=grade(s1, 100, 3);\n\n    printf(\"Grade: %d\\n\", s1.scores[0]);\n    printf(\"Grade: %d\\n\", s1.scores[1]);\n    printf(\"Grade: %d\\n\", s1.scores[2]);\n    printf(\"Grade: %d\\n\", s1.scores[3]);\n\n    printf(\"\\n\");\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "constants"], "comments": [{"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 1, "creation_date": 1467826940, "post_id": 38230358, "comment_id": 63882461, "body": "Are you really worried by enum base type being longer than 1 byte?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1467827061, "post_id": 38230358, "comment_id": 63882548, "body": "Smart people are suggesting consts over <code>#define</code>s everywhere it is possible."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "edited": false, "score": 0, "creation_date": 1467827134, "post_id": 38230358, "comment_id": 63882589, "body": "You can <code>undef</code> the <code>#define</code>, where you decide that you are done with that value ..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1467827159, "post_id": 38230358, "comment_id": 63882607, "body": "Whether <code>static const</code> is less efficient than <code>#define</code>s is entirely implementation dependent."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1467827160, "post_id": 38230358, "comment_id": 63882608, "body": "@Eugene Sh.: It is significantly less possible in C (than, say, in C++), which is why in C it is either <code>#define</code> or <code>enum</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467827257, "post_id": 38230358, "comment_id": 63882650, "body": "The chief point is to define the value in one place where you have control over the whole code, unless the &quot;magic number&quot; is of the kind that is better defined with such as <code>&#39;A&#39;</code> instead of <code>65</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 1, "creation_date": 1467830568, "post_id": 38230358, "comment_id": 63884534, "body": "&quot;(The processor would do a 32 bit(?) compare instead of an 8 bit compare).&quot; Doesn&#39;t matter. If an implementation uses a 32-bit for enums while it could have been 8 bits, there&#39;s probably a very good reason for it. Fun fact: 8-bit comparison could be slower, and would still use the full 32-bits for storing the operands. So feel free to use <code>enum</code> and forget about your completely imaginary problem. When thinking about performance, always keep this in mind: <b>it&#39;s not a problem until you can measure it.</b> (Also, the <code>_t</code> suffix is reserved for POSIX, so don&#39;t use it for your own stuff.)"}], "answers": [{"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 0, "last_activity_date": 1467955224, "last_edit_date": 1467955224, "creation_date": 1467827318, "answer_id": 38230508, "question_id": 38230358, "link": "https://stackoverflow.com/questions/38230358/what-to-use-instead-of-magic-numbers-in-c/38230508#38230508", "title": "What to use instead of magic numbers in C", "body": "<p><code>enum</code> is guaranteed by the standard to support up to <code>unsigned int</code> width.</p>\n\n<p>If you use <code>#define</code> there is no implicit specification of the width because the pre-compiler will just replace the symbol with the number (or whatever else was defined), so you can append L to the end of your number and guarantee <code>long</code> values.</p>\n\n<p>Frankly, I never had use for enums larger than integers myself...</p>\n\n<p><a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf\" rel=\"nofollow\">http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf</a></p>\n\n<blockquote>\n  <p>6.7.2.2 Enumeration specifiers<br>\n  [...]<br>\n  Constraints<br>\n  The expression that defines the value of an enumeration constant shall be an integer constant expression that has a value representable as an int.<br>\n  [...]<br>\n  Each enumerated type shall be compatible with char, a signed integer type, or an unsigned integer type. The choice of type is implementation-defined, but shall be capable of representing the values of all the members of the enumeration.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1467827832, "post_id": 38230531, "comment_id": 63882973, "body": "Can you back this up. As far as I remember, gcc places constant in the .text section"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 1, "creation_date": 1467827928, "post_id": 38230531, "comment_id": 63883031, "body": "@doron: It is not about where the compiler places them. It is about the fact that in C language <code>const</code> entities do not qualify as language &quot;constants&quot;. You are not allowed to use <code>const</code> entities in <code>case</code> labels, bit-field widths, non-VLA array sizes etc. The language prohibits it and the code simply will not compile. The topic is already well-covered by answers linked in the comments. The OP used a non-representative example with an <code>if</code>, which doesn&#39;t  require a constant. But if they used a <code>switch&#47;case</code> statement instead, the problem with <code>const</code> would immediately become apparent."}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1467838027, "post_id": 38230531, "comment_id": 63888588, "body": "Thanks for that. This is an unexpected difference in C and C++ for me."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1467828036, "last_edit_date": 1467828036, "creation_date": 1467827410, "answer_id": 38230531, "question_id": 38230358, "link": "https://stackoverflow.com/questions/38230358/what-to-use-instead-of-magic-numbers-in-c/38230531#38230531", "title": "What to use instead of magic numbers in C", "body": "<p>In C language <code>const</code> entities are not constants at language level, which significantly limits the usability of <code>const</code> for defining manifest constants. Note that this is not about the efficiency of the generated code, it's about the basic validity (\"compilability\") of the code: in C language <code>const</code> entities are simply not allowed in contexts that require constants.</p>\n\n<p>For this reason in C language the only truly universal and versatile approach to defining manifest constants is C preprocessor (i.e. <code>#define</code>), with <code>enum</code> being another vialble alternative, but only where it is applicable (a significant drawback of <code>enum</code> constants in C is the fact that they unconditionally have signed <code>int</code> type).</p>\n\n<p>Just use <code>#define</code> and don't attempt to \"scope\" the constants. There's rearely any point in doing so. But if for some reason you need to restrict the scope of <code>#define</code>'d constant, you can always use <code>#undef</code> for that purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 0, "last_activity_date": 1467827489, "creation_date": 1467827489, "answer_id": 38230557, "question_id": 38230358, "link": "https://stackoverflow.com/questions/38230358/what-to-use-instead-of-magic-numbers-in-c/38230557#38230557", "title": "What to use instead of magic numbers in C", "body": "<p>This will all be compiler and platform specific. And unless you really need to sqeeze a few bytes out to fit in a ROM, does not really matter.\nUsing the compiler is almost always less error prone than the preprocessor so stick with the consts.</p>\n\n<p>Also bear in mind that the compiler is always allowed to inline if it makes more sense.</p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 1949090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98436b9ed87b6023ece76f0ddc7ea5b1?s=128&d=identicon&r=PG", "display_name": "tad", "link": "https://stackoverflow.com/users/1949090/tad"}, "is_accepted": true, "score": 3, "last_activity_date": 1467827513, "creation_date": 1467827513, "answer_id": 38230565, "question_id": 38230358, "link": "https://stackoverflow.com/questions/38230358/what-to-use-instead-of-magic-numbers-in-c/38230565#38230565", "title": "What to use instead of magic numbers in C", "body": "<p>I think in all cases, the compiler, at least with -O2 turned on, will generate the same code.  It has gotten pretty hard to trick compilers into doing stupid things.  </p>\n\n<p>Typically, magic numbers are defined in a common header and used as needed throughout the code.   </p>\n\n<p>The bigger question for you is, does it matter?  Is this something that is in the critical path of your code, and something you are going to be doing a very high percentage of the time?  Given the name, I'd guess not.</p>\n\n<p>Moving the definition to a header file will make your code less distracting.  In <code>checkInvalidResponse</code>, the reader couldn't care less exactly what is represented by <code>INVALID_RESPONSE</code>, only that the test passes or fails.</p>\n"}], "owner": {"reputation": 63, "user_id": 5472291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0aa5f805e64a0ddfca42bd847db172?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnan", "link": "https://stackoverflow.com/users/5472291/krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 0, "closed_date": 1467830951, "accepted_answer_id": 38230565, "answer_count": 4, "score": 6, "last_activity_date": 1467955224, "creation_date": 1467826857, "last_edit_date": 1495540739, "question_id": 38230358, "link": "https://stackoverflow.com/questions/38230358/what-to-use-instead-of-magic-numbers-in-c", "closed_reason": "Duplicate", "title": "What to use instead of magic numbers in C", "body": "<p>I am currently using static const in my code instead of using 'magic numbers'as mentioned in <a href=\"https://stackoverflow.com/questions/1674032/static-const-vs-define-vs-enum\">&quot;static const&quot; vs &quot;#define&quot; vs &quot;enum&quot;</a>.</p>\n\n<pre><code>void checkInvalidResponse (uint8_t response)\n{\n    static const uint8_t INVALID_RESP = 0xFF;\n\n    if (response == INVALID_RESP)\n    {\n        /* Code for invalid response */\n    }\n}\n</code></pre>\n\n<p>I, however, think that using static const would consume memory in the compiled code for INVALID_RESP. The statement would also translate to machine code that does a LOAD from the memory followed by the compare, instead of comparing with a value provided as part of the instruction. Is this correct? If so, then this solution would not be optimal in terms of speed and memory right?</p>\n\n<p>I am currently changing the code to use #defines</p>\n\n<pre><code>void checkInvalidResponse (uint8_t response)\n{\n    #define INVALID_RESP 0xFF\n\n    if (response == INVALID_RESP)\n    {\n        /* Code for invalid response */\n    }\n}\n</code></pre>\n\n<p>However, since #define does not have a scope, would the behavior of the cut-and-paste aspect of #define be consistent across multiple compilers? For example, if INVALID_RESP is re-defined later, would any code in lines following the redefinition use the new value?</p>\n\n<p>Another approach I have looked at is to use enumerations. </p>\n\n<pre><code>void checkInvalidResponse (uint8_t response)\n{\n    typedef enum\n    {\n        INVALID_RESP = 0xFF\n    } resp_t;\n\n    if ((resp_t)response == INVALID_RESP)\n    {\n        /* Code for invalid response */\n    }\n}\n</code></pre>\n\n<p>However, the typecasting to an enum would allocate more memory than needed (The processor would do a 32 bit(?) compare instead of an 8 bit compare).</p>\n\n<p>What is the best method to use instead of using magic numbers in code?</p>\n"}, {"tags": ["c", "testing", "decoder", "flac", "fuzzing"], "comments": [{"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "edited": false, "score": 1, "creation_date": 1467825754, "post_id": 38229838, "comment_id": 63881778, "body": "It is intended to work in a streaming framework, like that of ffmpeg, and everything is done using callbacks in an event loop -- where is your implementation of <code>write_callback</code> and <code>error_callback</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6469612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051139aaaeaf0bc8216f0d21c83c2cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Marso", "link": "https://stackoverflow.com/users/6469612/marso"}, "edited": false, "score": 0, "creation_date": 1467829164, "post_id": 38230263, "comment_id": 63883707, "body": "Thank you. I added callback functions. Now I&#39;m having problem how to use data argument. It should be void *client_data but my function is giving me uint8_t"}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "reply_to_user": {"reputation": 13, "user_id": 6469612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051139aaaeaf0bc8216f0d21c83c2cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Marso", "link": "https://stackoverflow.com/users/6469612/marso"}, "edited": false, "score": 0, "creation_date": 1467832042, "post_id": 38230263, "comment_id": 63885423, "body": "The data argument is not the actual flac data, but the <code>client_data</code> that is show in the call-back signatures, which is just a way of parsing auxiliary configuration data to your plugin"}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "reply_to_user": {"reputation": 13, "user_id": 6469612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051139aaaeaf0bc8216f0d21c83c2cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Marso", "link": "https://stackoverflow.com/users/6469612/marso"}, "edited": false, "score": 0, "creation_date": 1467832084, "post_id": 38230263, "comment_id": 63885451, "body": "Have a careful read of the example code I linked in the answer."}], "tags": [], "owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "is_accepted": true, "score": 0, "last_activity_date": 1467826567, "creation_date": 1467826567, "answer_id": 38230263, "question_id": 38229838, "link": "https://stackoverflow.com/questions/38229838/decoding-data-with-libflac-using-c/38230263#38230263", "title": "Decoding data with libFLAC using C", "body": "<p>You typically need to implement a event processing framework, similar to what is done with <a href=\"https://ffmpeg.org/\" rel=\"nofollow\">ffmpeg</a> where the flac library hooks into the event processing using the callbacks.  What you have implemented so far looks like the (minimal) initialization part of the flow graph, but you are missing all the processing elements.</p>\n\n<p>Shamefully just looking at what somebody else have done <a href=\"http://hg.libsdl.org/SDL_mixer/file/7e59d684b070/load_flac.c\" rel=\"nofollow\">here</a> and <a href=\"http://hg.libsdl.org/SDL_mixer/file/7e59d684b070/music_flac.c\" rel=\"nofollow\">here</a> you will need to implement the callback functions with signatures like </p>\n\n<p>write callback example:</p>\n\n<pre><code> static FLAC__StreamDecoderWriteStatus flac_write_music_cb(\n                                   const FLAC__StreamDecoder *decoder,\n                                   const FLAC__Frame *frame,\n                                   const FLAC__int32 *const buffer[],\n                                   void *client_data)\n</code></pre>\n\n<p>error callback example:</p>\n\n<pre><code> static void flac_error_music_cb(\n                const FLAC__StreamDecoder *decoder,\n                FLAC__StreamDecoderErrorStatus status,\n                void *client_data)\n</code></pre>\n\n<p>You should also look at how the flac data is read, and implement the supporting function as as well.</p>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 5147302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d040251491d69502f8819f528cf53e44?s=128&d=identicon&r=PG&f=1", "display_name": "AlexDarkVoid", "link": "https://stackoverflow.com/users/5147302/alexdarkvoid"}, "is_accepted": false, "score": 0, "last_activity_date": 1524713368, "creation_date": 1524713368, "answer_id": 50034396, "question_id": 38229838, "link": "https://stackoverflow.com/questions/38229838/decoding-data-with-libflac-using-c/50034396#50034396", "title": "Decoding data with libFLAC using C", "body": "<p>Since you used <code>extern \"C\"</code>, then you must be actually compiling it as C++ code. Now, in C++ you need to use <code>const_cast&lt;&gt;</code> in order to pass <code>const uint8_t*</code> argument where a non-constant one (i.e. <code>void*</code>) is expected.</p>\n"}], "owner": {"reputation": 13, "user_id": 6469612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051139aaaeaf0bc8216f0d21c83c2cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Marso", "link": "https://stackoverflow.com/users/6469612/marso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1036, "favorite_count": 1, "accepted_answer_id": 38230263, "answer_count": 2, "score": 1, "last_activity_date": 1524713368, "creation_date": 1467825151, "last_edit_date": 1467829041, "question_id": 38229838, "link": "https://stackoverflow.com/questions/38229838/decoding-data-with-libflac-using-c", "title": "Decoding data with libFLAC using C", "body": "<p>My purpose is to decode flac data for testing purposes. I'm going to create a small stub that has a function that takes data and size as input arguments. There is no need to make anykind of output file because I'm only going to make test for decoding. I have read some examples and api documentation from libflac page (<a href=\"https://xiph.org/flac/api/\" rel=\"nofollow\">https://xiph.org/flac/api/</a>).</p>\n\n<p>Now this is giving me :ERROR: initializing decoder: (null) because FLAC__stream_decoder_init_stream is commented. Reason it is commented is that I don't know how to properly use it and get decoding work. Any advice and comments that could help me to get decoding work?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"share/compat.h\"\n#include \"FLAC/stream_decoder.h\"\n\nstatic void error_callback(const FLAC__StreamDecoder *decoder, FLAC__StreamDecoderErrorStatus status, void *data);\nstatic FLAC__StreamDecoderWriteStatus write_callback(const FLAC__StreamDecoder *decoder, const FLAC__Frame *frame, const FLAC__int32 * const buffer[], void *data);\nstatic FLAC__StreamDecoderReadStatus read_callback(const FLAC__StreamDecoder *decoder, FLAC__byte buffer[], size_t *bytes, void *data);\n\nextern \"C\" int LLVMFuzzerTestOneInput(const uint8_t *data, size_t size) {\n  FLAC__bool ok = true;\n  FLAC__StreamDecoder *decoder = 0;\n  FLAC__StreamDecoderInitStatus init_status;\n\n  // init decoder\n  if((decoder = FLAC__stream_decoder_new()) == NULL) {\n        fprintf(stderr, \"ERROR: allocating decoder\\n\");\n        return 1;\n    }\n\n  (void)FLAC__stream_decoder_set_md5_checking(decoder, true);\n\n  init_status = FLAC__stream_decoder_init_stream (  decoder, read_callback, /*seek_callback*/ NULL, /*tell_callback*/ NULL, /*length_callback*/ NULL, /*eof_callback*/ NULL, write_callback, /*metadata_callback*/ NULL, error_callback, data);\n\n  if(init_status != FLAC__STREAM_DECODER_INIT_STATUS_OK) {\n    fprintf(stderr, \"ERROR: initializing decoder: %s\\n\", FLAC__StreamDecoderInitStatusString[init_status]);\n    ok = false;\n  }\n\n  if(ok) {\n    ok = FLAC__stream_decoder_process_until_end_of_stream(decoder);\n    fprintf(stderr, \"decoding: %s\\n\", ok? \"succeeded\" : \"FAILED\");\n    fprintf(stderr, \"   state: %s\\n\", FLAC__StreamDecoderStateString[FLAC__stream_decoder_get_state(decoder)]);\n  }\n\n  FLAC__stream_decoder_delete(decoder);\n\n  return 0;\n}\n\nvoid error_callback(const FLAC__StreamDecoder *decoder, FLAC__StreamDecoderErrorStatus status, void *data)\n{\n  (void)decoder, (void)data;\n  fprintf(stderr, \"Got error callback: %s\\n\", FLAC__StreamDecoderErrorStatusString[status]);\n}\n</code></pre>\n\n<p>Update:\nAfter adding callback functions I get this error:</p>\n\n<pre><code>flac_fuzzer.c:23:16: error: no matching function for call to 'FLAC__stream_decoder_init_stream'\ninit_status = FLAC__stream_decoder_init_stream (        decoder,\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ninclude/FLAC/stream_decoder.h:1073:40: note: candidate function not viable: no known conversion from 'const uint8_t *'\n(aka 'const unsigned char *') to 'void *' for 10th argument; take the address of the argument with &amp;\nFLAC_API FLAC__StreamDecoderInitStatus FLAC__stream_decoder_init_stream(\n                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n"}, {"tags": ["c", "input", "printf", "output", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1467825189, "post_id": 38229827, "comment_id": 63881427, "body": "nothing standard, you have to roll your own."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467825274, "post_id": 38229827, "comment_id": 63881488, "body": "Well getting input from <code>stdin</code> <i>is</i> blocking so using any standard input function that reads from <code>stdin</code> (like scanf` or <code>fgets</code> from `stdin) will in fact &quot;freeze&quot; your program."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467825353, "post_id": 38229827, "comment_id": 63881533, "body": "Or do you mean that your program is continuously outputting text, and you want to detect when the user attempts to input anything? Then that&#39;s operating system dependent, and you need to tell us your operating system or we can&#39;t answer this question."}, {"owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "edited": false, "score": 0, "creation_date": 1467825388, "post_id": 38229827, "comment_id": 63881559, "body": "What is &quot;freezing&quot; an input line?  Does it mean that your program does not run while waiting for input?  Does this mean that what a person types is not displayed?  Or something else?"}, {"owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467825407, "post_id": 38229827, "comment_id": 63881576, "body": "@JoachimPileborg The latter. My program is reading a stream from a serial and continuously getting info from that. I want to be able to send it commands to start streams, stop them, set different parameters, etc."}, {"owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "reply_to_user": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "edited": false, "score": 0, "creation_date": 1467825501, "post_id": 38229827, "comment_id": 63881630, "body": "@user31264 I want the program to have a line that is at the bottom of the console, and as it prints output data it can accept input from that bottom line. That&#39;s what I mean when freezing, like have all the input print above a line that is designated for input only."}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 5, "creation_date": 1467825943, "post_id": 38229827, "comment_id": 63881903, "body": "If you are on linux/mac, you could use <a href=\"http://invisible-island.net/ncurses/ncurses-intro.html\" rel=\"nofollow noreferrer\">ncurses</a>. I think there exists some kind of curses for windows. If you are using some kind of terminal program and your target is generating the output, you will probably just need to emit some VT100 escapes to erase the bottom line and move the cursor to the beginning of the line after each command. I don&#39;t think anybody can really help without knowing more about your system."}, {"owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "reply_to_user": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 1, "creation_date": 1467826073, "post_id": 38229827, "comment_id": 63881989, "body": "@evaitl I am using linux, I&#39;ll take a look at <code>ncurses</code> thanks!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467826473, "post_id": 38229827, "comment_id": 63882206, "body": "For those readers on Windows, here is a <a href=\"http://stackoverflow.com/questions/15770853/how-to-use-setconsolecursorposition-func\">previous question</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1467827304, "post_id": 38229827, "comment_id": 63882685, "body": "On POSIX systems (like Linux) you can use <code>select</code> to poll if reading from <code>stdin</code> (or rather <code>STDIN_FILENO</code>) will block or not. If <code>select</code> says that <code>STDIN_FILENO</code> can be read without blocking, then at least one character are ready to be read, and you can halt your output (possibly buffering it in the background) and read input from the user."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "edited": false, "score": 0, "creation_date": 1467832255, "post_id": 38231572, "comment_id": 63885537, "body": "Very nice! Thanks!"}], "tags": [], "owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "is_accepted": true, "score": 1, "last_activity_date": 1467830820, "creation_date": 1467830820, "answer_id": 38231572, "question_id": 38229827, "link": "https://stackoverflow.com/questions/38229827/freezing-an-input-line-in-console-and-printing-on-the-lines-above-it/38231572#38231572", "title": "&quot;Freezing&quot; an input line in console and printing on the lines above it?", "body": "<p>This will work on most terminals (specifically in an xterm) and I think it is easier than setting up curses: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;termios.h&gt;\n\nint main(){\n    int lineno=1;\n    int c;\n    struct termios old_tio;\n    struct termios new_tio;\n    tcgetattr(STDIN_FILENO,&amp;old_tio);\n    new_tio=old_tio;\n    new_tio.c_lflag &amp;= (~ICANON&amp;~ECHO);\n    tcsetattr(STDIN_FILENO,TCSANOW,&amp;new_tio);\n    setvbuf(stdout,NULL,_IONBF,0);\n    while(1){\n        printf(\"%4d Enter a command: \",lineno);\n        c=getchar();\n        printf(\"\\033[2K\\033[50D%4d Command was %c\\n\",lineno++, c);\n        if(c=='q'){\n            break;\n        }\n    }\n    tcsetattr(STDIN_FILENO,TCSANOW,&amp;old_tio);\n    return 0;\n}\n</code></pre>\n\n<p>Output looks what OP wanted:</p>\n\n<pre><code>evaitl@evbb ~/se $ ./foo \n   1 Command was a\n   2 Command was b\n   3 Command was c\n   4 Command was d\n   5 Command was q\n   6 Enter a command: \n</code></pre>\n\n<p>Refs: <a href=\"http://shtrom.ssji.net/skb/getc.html\" rel=\"nofollow\">unbuffered IO</a></p>\n\n<p><a href=\"http://fossies.org/linux/splitvt/escapes/vt102.codes\" rel=\"nofollow\">vt102 escapes</a></p>\n"}, {"tags": [], "owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1467831175, "creation_date": 1467831175, "answer_id": 38231674, "question_id": 38229827, "link": "https://stackoverflow.com/questions/38229827/freezing-an-input-line-in-console-and-printing-on-the-lines-above-it/38231674#38231674", "title": "&quot;Freezing&quot; an input line in console and printing on the lines above it?", "body": "<p>Assuming your terminal allows <a href=\"http://www.ccs.neu.edu/research/gpc/MSim/vona/terminal/VT100_Escape_Codes.html\" rel=\"nofollow\">VT100 escape codes</a>, you can try this:</p>\n\n<pre><code>printf(\"OutputLine1\\n\");\nprintf(\"OutputLine2\\n\");\nprintf(\"OutputLine3\\n\");\nprintf(\"Enter a command: \");\n// wait for input or more output\n\n// if more output is ready, clear prompt\nprintf(\"\\033[2K\"); // VT100 clearline escape code (^[[2K)\nprintf(\"\\r\");      // Carriage return to return cursor to beginning of line\nprintf(\"OutputLine4\\n\");\n// print prompt again\nprintf(\"Enter a command: \");\n// wait for input or more output\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 38231572, "answer_count": 2, "score": 2, "last_activity_date": 1467831175, "creation_date": 1467825131, "question_id": 38229827, "link": "https://stackoverflow.com/questions/38229827/freezing-an-input-line-in-console-and-printing-on-the-lines-above-it", "title": "&quot;Freezing&quot; an input line in console and printing on the lines above it?", "body": "<p>I was wondering if there was a way to \"freeze\" an input line in order to separate input and output from each other in c. For instance, my console output is currently something like this:</p>\n\n<pre><code>1 OutputLine1\n2 OutputLine2\n</code></pre>\n\n<p>But I'd like it to be something like this:</p>\n\n<pre><code>1 OutputLine1\n2 OutputLine2\n3 Enter a Command:\n</code></pre>\n\n<p>and I'd like for it to be able to change as the program receives a stream of data. So as it runs it would be something like this</p>\n\n<pre><code>1 OutputLine1\n2 OutputLine2\n3 OutputLine3\n4 Enter a Command:\n</code></pre>\n\n<p>To change to this:</p>\n\n<pre><code>1 OutputLine1\n2 OutputLine2\n3 OutputLine3\n4 OutputLine4\n5 Enter a Command:\n</code></pre>\n\n<p>I'm currently using printf() for all my output, but it doesn't seem like that would work in this situation. Are there any other printing/input libraries I can use? </p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["c", "pointers", "function-pointers"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1467823441, "post_id": 38229296, "comment_id": 63880399, "body": "Maybe you should emphasize the problem you are actually having and trying to solve? Please read about <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">the XY problem</a>."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1467823568, "post_id": 38229296, "comment_id": 63880492, "body": "only depends on target CPU architecture - 32 or 64 bits (on some older systems it was 20, 16)"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1467824404, "post_id": 38229296, "comment_id": 63880966, "body": "it&#39;s the same like your void pointer - 32 or 64 bits depending on for what system your are compiling - can be determined at compile time. There are pre-defined compiler <code>#define</code>s for it. What compiler are you using?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 2, "creation_date": 1467824450, "post_id": 38229296, "comment_id": 63880989, "body": "Are you familiar with <code>sizeof</code> or perhaps <code>PTRDIFF_MAX</code>?"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1467824779, "post_id": 38229296, "comment_id": 63881184, "body": "Related: <a href=\"http://stackoverflow.com/questions/3941793/what-is-guaranteed-about-the-size-of-a-function-pointer\">What is guaranteed about the size of a function pointer?</a>."}, {"owner": {"reputation": 724, "user_id": 2744342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e46375ea8161701c62f0a0e0cde23f0?s=128&d=identicon&r=PG&f=1", "display_name": "Alok--", "link": "https://stackoverflow.com/users/2744342/alok"}, "edited": false, "score": 1, "creation_date": 1467824863, "post_id": 38229296, "comment_id": 63881231, "body": "Relevant: <a href=\"http://stackoverflow.com/questions/1473935/can-the-size-of-pointers-vary-between-data-and-function-pointers\" title=\"can the size of pointers vary between data and function pointers\">stackoverflow.com/questions/1473935/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/916051/are-there-any-platforms-where-pointers-to-different-types-have-different-sizes\" title=\"are there any platforms where pointers to different types have different sizes\">stackoverflow.com/questions/916051/&hellip;</a>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1467825303, "post_id": 38229296, "comment_id": 63881503, "body": "Why do you need to know this?"}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1467825710, "post_id": 38229296, "comment_id": 63881752, "body": "@mvidelgauz gcc could you please provide any refernce to support your answer."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467825712, "post_id": 38229296, "comment_id": 63881754, "body": "If you work in IBM iSeries machines, I believe you&#39;ll find that function pointers are 128-bit values, even though data pointers are 64-bit values.  Odd modes for Intel 80286 can have different sizes for data and function pointers in some modes (small data, large code; or large data, small code; etc.)"}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467825725, "post_id": 38229296, "comment_id": 63881761, "body": "@2501 What has it got to do with the question asked? sizeof can specify the size of function pointer after I run the code. Is it possible to tell the size without running the code?"}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1467825755, "post_id": 38229296, "comment_id": 63881781, "body": "@Martin R I&#39;ve already read the link and the question I&#39;ve asked is different"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1467825818, "post_id": 38229296, "comment_id": 63881819, "body": "@rango: you can look at the compiler manual \u2014 or you can run code that evaluates <code>sizeof(void (*)(void))</code> or similar.  Main two choices.  The other one is hear-say from the programmers working on the machine too, but they&#39;re apt to have slightly blinkered perspectives."}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467825831, "post_id": 38229296, "comment_id": 63881827, "body": "@JonathanLeffler Do you mean to say that they are always fixed for a fixed architecture type irrespective of the arguments or return type passed?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467825988, "post_id": 38229296, "comment_id": 63881925, "body": "It&#39;s a reasonable inference.  A pointer to function can be converted from one type to another type and then back again without loss of information.  ISO/IEC 9899:2011 &#167;6.2.3.2 &#182;8 <i>A pointer to a function of one type may be converted to a pointer to a function of another type and back again; the result shall compare equal to the original pointer. If a converted pointer is used to call a function whose type is not compatible with the referenced type, the behavior is undefined.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1467825551, "post_id": 38229867, "comment_id": 63881661, "body": "<i>A pointer has only one size.</i> <a href=\"http://stackoverflow.com/questions/916051/are-there-any-platforms-where-pointers-to-different-types-have-different-sizes\">No.</a>"}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "edited": false, "score": 0, "creation_date": 1467825946, "post_id": 38229867, "comment_id": 63881906, "body": "@Bruce Please read the following post. <a href=\"http://stackoverflow.com/questions/1473935/can-the-size-of-pointers-vary-between-data-and-function-pointers\" title=\"can the size of pointers vary between data and function pointers\">stackoverflow.com/questions/1473935/&hellip;</a>"}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 0, "last_activity_date": 1467825233, "creation_date": 1467825233, "answer_id": 38229867, "question_id": 38229296, "link": "https://stackoverflow.com/questions/38229296/what-are-the-parameters-on-which-size-of-a-function-pointer-depends/38229867#38229867", "title": "What are the parameters on which size of a function pointer depends?", "body": "<p>A pointer has only one size.  It does not matter what it points to.  It is large enough to hold the address of a location in the process's virtual memory that can be accessed.  This is typically 64 bits (8 bytes) on current CPUs and 32 bits on older ones.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467826034, "post_id": 38230066, "comment_id": 63881957, "body": "That&#39;s called a &#39;link-only&#39; answer and isn&#39;t popular.  And <code>__SIZEOF_POINTER__</code> is a GCC-specific feature; it is not a general feature of standard C."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467826097, "post_id": 38230066, "comment_id": 63882002, "body": "@JonathanLeffler I changed to line of code and link"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467826146, "post_id": 38230066, "comment_id": 63882022, "body": "Agreed \u2014 you changed it.  You didn&#39;t explain what it does, what it&#39;s for, or what its limitations are.  (And, JFTR, not my down-vote \u2014 yet, at any rate.)"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467826167, "post_id": 38230066, "comment_id": 63882034, "body": "@JonathanLeffler Please read comment, OP asked for GCC"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1467826234, "post_id": 38230066, "comment_id": 63882063, "body": "The question doesn&#39;t mention GCC.  If the OP commented about GCC (not seen it yet, but I assume it is there), then the OP needs to update the question to say so (tag and content)."}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "edited": false, "score": 0, "creation_date": 1467826271, "post_id": 38230066, "comment_id": 63882086, "body": "@mvidelgauz <a href=\"http://stackoverflow.com/questions/3941793/what-is-guaranteed-about-the-size-of-a-function-pointer\" title=\"what is guaranteed about the size of a function pointer\">stackoverflow.com/questions/3941793/&hellip;</a> The top answer states that &quot;no guarantee that a void * can hold a function pointer. &quot;"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1467826322, "post_id": 38230066, "comment_id": 63882118, "body": "JFTR I don&#39;t care about down-votes, I think OP got their answer - that what is important"}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "edited": false, "score": 1, "creation_date": 1467826454, "post_id": 38230066, "comment_id": 63882201, "body": "@mvidelgauz I stated that I used gcc. I didn&#39;t intend this question to be gcc specific. Apologies if it meant to you that way."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "edited": false, "score": 0, "creation_date": 1467826484, "post_id": 38230066, "comment_id": 63882212, "body": "@rango you asked about <b>size of pointer</b>, where does my answer imply that void* can hold function pointer?"}, {"owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "edited": false, "score": 0, "creation_date": 1467826697, "post_id": 38230066, "comment_id": 63882331, "body": "@mvidelgauz Even if you meant to imply that <b>SIZE_OF_POINTER</b> is equal to number of bytes of void *, its gcc specific. For other compilers it&#39;s not always true. <a href=\"http://stackoverflow.com/questions/1473935/can-the-size-of-pointers-vary-between-data-and-function-pointers\" title=\"can the size of pointers vary between data and function pointers\">stackoverflow.com/questions/1473935/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "is_accepted": false, "score": 2, "last_activity_date": 1467878253, "last_edit_date": 1467878253, "creation_date": 1467825925, "answer_id": 38230066, "question_id": 38229296, "link": "https://stackoverflow.com/questions/38229296/what-are-the-parameters-on-which-size-of-a-function-pointer-depends/38230066#38230066", "title": "What are the parameters on which size of a function pointer depends?", "body": "<p>Rango, look <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html#Common-Predefined-Macros\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>__SIZEOF_POINTER__ // Pre-defined GCC macro\n</code></pre>\n\n<p>and for MS Visual C/C++ compiler you can check macro <code>_WIN64</code>, <code>_M_IX86</code> and others that indicate target processor architecture. Full list <a href=\"https://msdn.microsoft.com/en-us/library/b0084kay.aspx\" rel=\"nofollow\">here</a>.  </p>\n\n<p>P.S. After some thinking I have to admit that my statement that function pointer will have the same size as <code>void*</code> was wrong (I can imagine architectures where memory for data and for code may be addressed differently). Anyway, as for the question <em>\"Is it possible to determine the size of a function pointer\"</em> and taking into account clarification I got in the comment that OP works with gcc, <code>__SIZEOF_POINTER__</code> may serve as an answer. Although answer provided by @2501 in their comment is much better - <code>sizezeof(fptr)</code> should work with any compiler</p>\n"}, {"tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 1, "last_activity_date": 1467826768, "creation_date": 1467826768, "answer_id": 38230324, "question_id": 38229296, "link": "https://stackoverflow.com/questions/38229296/what-are-the-parameters-on-which-size-of-a-function-pointer-depends/38230324#38230324", "title": "What are the parameters on which size of a function pointer depends?", "body": "<p>In any one program, all function pointers in C have the same size.  A function pointer need not have the same size as <code>void *</code> according to the C standard.  For that reason, you can't portably assign a function pointer to <code>void *</code>.  However, Posix in effect does require that the two have the same size, else <code>dlopen(2)</code> wouldn't work.  </p>\n\n<blockquote>\n  <p>what is the size I'm expected to get</p>\n</blockquote>\n\n<p>That depends on what you expect?  Pointer size -- data or function -- is up to the compiler (and its options).  If you're programming on a popular, general-purpose platform, likely pointer size will be <code>sizeof(size_t)</code>.  But if you're doing something specialized, the only safe answer is RTFM.  </p>\n"}], "owner": {"reputation": 191, "user_id": 2780015, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/k55aI.jpg?s=128&g=1", "display_name": "rango", "link": "https://stackoverflow.com/users/2780015/rango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 1, "closed_date": 1467826791, "answer_count": 3, "score": 0, "last_activity_date": 1467878253, "creation_date": 1467823349, "last_edit_date": 1467824238, "question_id": 38229296, "link": "https://stackoverflow.com/questions/38229296/what-are-the-parameters-on-which-size-of-a-function-pointer-depends", "closed_reason": "Duplicate", "title": "What are the parameters on which size of a function pointer depends?", "body": "<p>I just wanted to know the various reasons that might affect the size of a function pointer from memory perspective.</p>\n\n<p>I'd like to emphasize that my question isn't about how functions pointers could be used and how they could be type-cast. It's just about if I declare a function pointer like</p>\n\n<pre><code> int (*fptr)(int, int);\n</code></pre>\n\n<p>and create a variable of it</p>\n\n<pre><code>fptr fun1;\n</code></pre>\n\n<p>what is the size I'm expected to get if I run it on a 32/64 bit machine?</p>\n\n<p>Is it possible to determine the size of a function pointer simply by looking at its declaration, like I could tell a void pointer would size 4 bytes on a 32-bit machine.</p>\n"}, {"tags": ["c", "output"], "answers": [{"comments": [{"owner": {"reputation": 5801, "user_id": 2586392, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d89d4072afb4457b0c49131d8d258f5?s=128&d=identicon&r=PG", "display_name": "rpadovani", "link": "https://stackoverflow.com/users/2586392/rpadovani"}, "edited": false, "score": 0, "creation_date": 1467824698, "post_id": 38229603, "comment_id": 63881133, "body": "@2501 wrong. The code <b>works</b> (if you compile it without any flag), but the behavior is undefined."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1467824733, "post_id": 38229603, "comment_id": 63881159, "body": "The code compiles, but it doesn&#39;t &#39;work&#39; if you don&#39;t want undefined behavior."}, {"owner": {"reputation": 5801, "user_id": 2586392, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d89d4072afb4457b0c49131d8d258f5?s=128&d=identicon&r=PG", "display_name": "rpadovani", "link": "https://stackoverflow.com/users/2586392/rpadovani"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467824942, "post_id": 38229603, "comment_id": 63881274, "body": "@2501 well, okay, it depends what you mean by &#39;work&#39; - the main ends without any error and the program doesn&#39;t crash at runtime. The behavior is wrong (like there is a bug), but IMO you can&#39;t say a program doesn&#39;t work because there is a bug. But this is more a philosophical difference. Since the question is <code>i wonder why this program is able to run and i don&#39;t see any error even though i haven&#39;t closed the statement.</code> I think my answer is correct, I explain why there isn&#39;t any error and why the program runs."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1467825056, "post_id": 38229603, "comment_id": 63881351, "body": "Undefined behavior - b is both used and modified in the same statement."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467825059, "post_id": 38229603, "comment_id": 63881353, "body": "<i>you can&#39;t say a program doesn&#39;t work because there is a bug.</i> I disagree with that statement."}, {"owner": {"reputation": 5801, "user_id": 2586392, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d89d4072afb4457b0c49131d8d258f5?s=128&d=identicon&r=PG", "display_name": "rpadovani", "link": "https://stackoverflow.com/users/2586392/rpadovani"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1467825170, "post_id": 38229603, "comment_id": 63881417, "body": "@2501 yes, I understood that and I agree we disagree :) Anyway, the question is &#39;why does it run and why I don&#39;t see any error&#39;, and well, the explanation is my answer"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 1, "creation_date": 1467825225, "post_id": 38229603, "comment_id": 63881458, "body": "The code exhibits UB (undefined behavior), twice. <code>a</code> is used without having been initialized, and <code>b</code> is modified and used without an intermediate sequence point. UB doesn&#39;t guarantee a crash, but that doen&#39;t mean the code <i>works</i>."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 4440, "user_id": 4964136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4RUpd.jpg?s=128&g=1", "display_name": "Vishwa Ratna", "link": "https://stackoverflow.com/users/4964136/vishwa-ratna"}, "edited": false, "score": 0, "creation_date": 1467825684, "post_id": 38229603, "comment_id": 63881736, "body": "@vishwaratna The code compiles because it is syntactically correct in <code>C</code>, as pointed out in the answer above. On the other hand, the code exhibits UB so <i>anything</i> can happen when you run it. What you see is one possible outcome of UB."}], "tags": [], "owner": {"reputation": 5801, "user_id": 2586392, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d89d4072afb4457b0c49131d8d258f5?s=128&d=identicon&r=PG", "display_name": "rpadovani", "link": "https://stackoverflow.com/users/2586392/rpadovani"}, "is_accepted": false, "score": 1, "last_activity_date": 1467824398, "creation_date": 1467824398, "answer_id": 38229603, "question_id": 38229262, "link": "https://stackoverflow.com/questions/38229262/statement-even-working-and-executing-fine-without-the-semicolon/38229603#38229603", "title": "statement even working and executing fine without the semicolon", "body": "<p>Your code works because <code>printf()</code> returns an int (the number of characters printed), so your operation is </p>\n\n<pre><code>a = (b--) - (printf(\"a = %d, b = %d\", a, b));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 1, "last_activity_date": 1467825484, "creation_date": 1467825484, "answer_id": 38229935, "question_id": 38229262, "link": "https://stackoverflow.com/questions/38229262/statement-even-working-and-executing-fine-without-the-semicolon/38229935#38229935", "title": "statement even working and executing fine without the semicolon", "body": "<p>Unary minus and unary decrement DO NOT have the same precedence.  Unary decrement is higher.  Were unary minus higher, the decrement could not be applied, as its argument would be an expression but not an lvalue, and only an lvalue can be decremented.</p>\n\n<p>I have no idea what \"haven't closed the statement\" means.  Do you mean the function definition that ends with '}'?</p>\n\n<p><strong><em>// strange here , because program run without semicolon here.</em></strong> ?  First of all, it wouldn't COMPILE without the semicolon, let alone run.  Also, you don't use <strong>*//</strong> to begin a comma, so that wouldn't compile either.  It runs because a previous version without these errors compiled and linked successfully and generated an a.out; you are, without question, re-executing this old a.out.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 1, "creation_date": 1467826360, "post_id": 38230002, "comment_id": 63882139, "body": "@CherubimAnand as you know - that&#39;s why I initialised <code>a</code>. But is the usage of <code>b</code> undefined? The question asked why the program compiles."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1467827882, "post_id": 38230002, "comment_id": 63883003, "body": "ya i do understand why it compiles, but i think the behavior is defined, please have a look at this : <a href=\"https://ideone.com/xXID9d\" rel=\"nofollow noreferrer\">ideone.com/xXID9d</a> , <b>it&#39;s just the value of</b> <code>a</code> <b>that&#39;s indeterminate I think.</b>"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 1, "creation_date": 1467827963, "post_id": 38230002, "comment_id": 63883055, "body": "<code>is the usage of b undefined?</code> I think it&#39;s technically <code>undetermined</code> since <code>C</code> doesn&#39;t guarantee an order of evaluation in this case. So the output could be <code>= 120</code> or <code>= 119</code> but nothing else."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 1, "creation_date": 1467828501, "post_id": 38230002, "comment_id": 63883339, "body": "@CherubimAnand sorry I meant the <i>printed</i> value of <code>b</code>. Obviously the original value of <code>a</code> was undefined in OP&#39;s code, and in my snippet, the final value of <code>a</code> could also be undefined, especially if <code>int b=100</code> when the return value from <code>printf</code> could be undefined depending on whether it prints <code>b</code> as <code>99</code> or <code>100</code>."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1467825710, "creation_date": 1467825710, "answer_id": 38230002, "question_id": 38229262, "link": "https://stackoverflow.com/questions/38229262/statement-even-working-and-executing-fine-without-the-semicolon/38230002#38230002", "title": "statement even working and executing fine without the semicolon", "body": "<p>Your second code (after removing the syntax error caused by the comment) reads</p>\n\n<pre><code>a = b-- - printf(\"a = %d, b = %d\", a, b);\n</code></pre>\n\n<p>Since <code>printf</code> returns a value, that is valid code. When I initialise</p>\n\n<pre><code>int a = 0;\n</code></pre>\n\n<p>the program output is </p>\n\n<pre><code>a = 0, b = 120\n</code></pre>\n\n<p>In C end-of-line does not mean end-of-statement.</p>\n"}], "owner": {"reputation": 4440, "user_id": 4964136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4RUpd.jpg?s=128&g=1", "display_name": "Vishwa Ratna", "link": "https://stackoverflow.com/users/4964136/vishwa-ratna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 38230002, "answer_count": 3, "score": -5, "last_activity_date": 1544529542, "creation_date": 1467823242, "last_edit_date": 1544529542, "question_id": 38229262, "link": "https://stackoverflow.com/questions/38229262/statement-even-working-and-executing-fine-without-the-semicolon", "title": "statement even working and executing fine without the semicolon", "body": "<p>so i just wrote below mentioned program:</p>\n\n<pre><code> #include&lt;stdio.h&gt;\nint main()\n{\n    int a, b = 120;\n    a = -b--;\n    printf(\"a = %d, b = %d\", a, b);\n    return 0;\n}\n</code></pre>\n\n<p>the output is a = -120, b = 119 , which is fine for me , but when i run the above program with slight modification it gives some strange results.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\nint main()\n{\n    int a, b = 120;\n    a = b---      *// strange here , because program run without semicolon here.*\n    printf(\"a = %d, b = %d\", a, b);\n    return 0;\n}\n</code></pre>\n\n<p>i wonder why this program is able to run and i don't see any error even though i haven't closed the statement.</p>\n\n<p>Edit: If there is no semicolon then for compiler it means the same statement until unless it sees a semicolon.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1467822794, "post_id": 38229095, "comment_id": 63880020, "body": "Whoever says that global or static variables in C or C++ would be indetermined or &quot;luckily&quot; set to zero but not necessarily doesn&#39;t have a clue what they are talking about. Someone who puts it into writing left evidence of stupidity."}, {"owner": {"reputation": 47447, "user_id": 1172428, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/240fe123035f1c6e184f59da2f1465d9?s=128&d=identicon&r=PG", "display_name": "FatalError", "link": "https://stackoverflow.com/users/1172428/fatalerror"}, "edited": false, "score": 0, "creation_date": 1467822808, "post_id": 38229095, "comment_id": 63880034, "body": "Your book is correct."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1467822814, "post_id": 38229095, "comment_id": 63880040, "body": "In C, otherwise uninitialized global variables are initialized to &quot;zero&quot; (whatever &quot;zero&quot; means for the specific type). Local non-static variables are not initialized, unless explicitly initialized in the code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1467823007, "post_id": 38229095, "comment_id": 63880148, "body": "@gnasher729 If speaking strictly of the <code>C</code> as per standard - you are right. But people might be referring to the fact that it&#39;s often up to the startup code to initialize the BSS."}, {"owner": {"reputation": 47447, "user_id": 1172428, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/240fe123035f1c6e184f59da2f1465d9?s=128&d=identicon&r=PG", "display_name": "FatalError", "link": "https://stackoverflow.com/users/1172428/fatalerror"}, "edited": false, "score": 0, "creation_date": 1467823298, "post_id": 38229095, "comment_id": 63880311, "body": "How it happens is a matter of implementation.  The fact is, when you access them, they will be 0."}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1467823317, "post_id": 38229095, "comment_id": 63880323, "body": "so it is useless to initialize global values to their Default?"}, {"owner": {"reputation": 47447, "user_id": 1172428, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/240fe123035f1c6e184f59da2f1465d9?s=128&d=identicon&r=PG", "display_name": "FatalError", "link": "https://stackoverflow.com/users/1172428/fatalerror"}, "edited": false, "score": 0, "creation_date": 1467823353, "post_id": 38229095, "comment_id": 63880341, "body": "Being explicit isn&#39;t a bad thing, either.  It&#39;s just not required."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1467823357, "post_id": 38229095, "comment_id": 63880343, "body": "What&#39;s &quot;Default&quot;? If it is different from <code>0</code>, it&#39;s not useless."}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1467823431, "post_id": 38229095, "comment_id": 63880391, "body": "for example if I declare an <code>int</code>, it would Zero if I dont initilize to Zero."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 47447, "user_id": 1172428, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/240fe123035f1c6e184f59da2f1465d9?s=128&d=identicon&r=PG", "display_name": "FatalError", "link": "https://stackoverflow.com/users/1172428/fatalerror"}, "edited": false, "score": 0, "creation_date": 1467823497, "post_id": 38229095, "comment_id": 63880443, "body": "@FatalError Actually it might be sometimes harmful. I remember having a bug in a startup code that was discovered thanks to the main code assuming globals zero, which apparently weren&#39;t."}, {"owner": {"reputation": 6792, "user_id": 254343, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YEat6.png?s=128&g=1", "display_name": "amn", "link": "https://stackoverflow.com/users/254343/amn"}, "edited": false, "score": 0, "creation_date": 1467823553, "post_id": 38229095, "comment_id": 63880481, "body": "Are you asking <i>why</i> the first kind is set to zero while the second kind is not, or are you asking &quot;which [case] is true&quot;? Or both?"}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467825476, "post_id": 38229095, "comment_id": 63881620, "body": "The reason for the difference has to do with <i>where</i> the data is stored. Global variables are in the so-called &quot;BSS&quot; section, which is allocated by the program-loader separately, and set to all-zeros by the loader. Local variables exist on the so-called &quot;stack,&quot; which is constantly being re-used. Programming languages customarily do not &quot;scrub the stack&quot; (although some security-enhancement options <i>do)</i>."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 1, "creation_date": 1467825630, "post_id": 38229095, "comment_id": 63881702, "body": "As a matter of routine, I suggest: <i>&quot;Never assume. Never assume ...&quot;</i> If you want a particular variable to be zero, <i>set it</i> to zero. The nano-seconds that you&#39;ll spend doing this will be repaid by hours of time <i>not</i> spent debugging extremely-difficult(!) problems! (Non-existent statistics show that &quot;garbage in memory&quot; is the number-one cause of hair loss among computer programmers ...) <b>;-)</b>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467826081, "post_id": 38229095, "comment_id": 63881997, "body": "&quot;... is useless to initialize global values to their Default?&quot; --&gt; Functionally it has no value, but from a coding style <code>int foo = 0;</code> it conveys explicit intent on the coders part that <code>foo</code> should be 0.  Perhaps in a later code evolution it be will 42."}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "reply_to_user": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467838651, "post_id": 38229095, "comment_id": 63888892, "body": "@MikeRobinson +1 for <code>hair loss</code> precaution."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467848121, "post_id": 38229095, "comment_id": 63892451, "body": "<b>:-D</b> &quot;Fortunately, quite-unlike my older brother, I somehow still have some ...&quot;"}], "owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "closed_date": 1467822940, "answer_count": 0, "score": 0, "last_activity_date": 1467823495, "creation_date": 1467822644, "last_edit_date": 1495541686, "question_id": 38229095, "link": "https://stackoverflow.com/questions/38229095/why-global-variables-in-c-are-initialized-to-zero-while-local-ones-are-not", "closed_reason": "Duplicate", "title": "Why global variables in C are initialized to zero while local ones are not?", "body": "<p>The book \"Programming in C\" by Stephan Kochan (3rd Edition 2004), states:</p>\n\n<blockquote>\n  <p>One final thing about global variables. They do have default initial values: zero. So, in the global declaration\n  <pre><code>int gData[100];</code></pre>\n  all 100 elements of the <code>gData</code> array are set to zero when the program begins execution. So remember that while global variables have default initial values of zero, local variables have no default initial value and so must be explicitly initialized by the program.</p>\n</blockquote>\n\n<p>On the other hand, discussions on the Internet say global variables would be indetermined or may be luckily set to zero but not necessarily. </p>\n\n<p>Which is true? </p>\n\n<p>Related question: \n<a href=\"https://stackoverflow.com/questions/21152138/local-variable-initialized-to-zero-in-c\">local variable initialized to zero in C</a></p>\n"}, {"tags": ["c", "double"], "comments": [{"owner": {"reputation": 43, "user_id": 6316140, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dea8eeb86927bd5b12e1f8411f67c7b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bobotic", "link": "https://stackoverflow.com/users/6316140/bobotic"}, "reply_to_user": {"reputation": 1425, "user_id": 6304349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c4a1ce11469805ba79d576fa2f013c?s=128&d=identicon&r=PG", "display_name": "dorukayhan", "link": "https://stackoverflow.com/users/6304349/dorukayhan"}, "edited": false, "score": 0, "creation_date": 1467825299, "post_id": 38228889, "comment_id": 63881499, "body": "@dorukayhan Yes, this is c"}, {"owner": {"reputation": 916, "user_id": 5830500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FAqMC.jpg?s=128&g=1", "display_name": "Wael Alshabani", "link": "https://stackoverflow.com/users/5830500/wael-alshabani"}, "edited": false, "score": 0, "creation_date": 1471034384, "post_id": 38228889, "comment_id": 65209248, "body": "Please next time try to tag you questions with the name of the language you are asking about. You will get more help."}, {"owner": {"reputation": 2735, "user_id": 446252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/3fWRI.jpg?s=128&g=1", "display_name": "Adam Trhon", "link": "https://stackoverflow.com/users/446252/adam-trhon"}, "edited": false, "score": 0, "creation_date": 1471036994, "post_id": 38228889, "comment_id": 65210270, "body": "Also the error message is very helpfull"}], "answers": [{"tags": [], "owner": {"reputation": 1404, "user_id": 3444805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046cb56c96a5e463eaca8c3e63206821?s=128&d=identicon&r=PG&f=1", "display_name": "hcs", "link": "https://stackoverflow.com/users/3444805/hcs"}, "is_accepted": false, "score": 0, "last_activity_date": 1471059171, "creation_date": 1471059171, "answer_id": 38928923, "question_id": 38228889, "link": "https://stackoverflow.com/questions/38228889/convert-a-double-array-to-unsigned-short/38928923#38928923", "title": "Convert a double array to unsigned short?", "body": "<p>You need to explicitly convert each value:</p>\n\n<pre><code>unsigned short * doubleToUShort(double * Prob_double, size_t N) {\n  unsigned short * Prob = malloc(sizeof(unsigned short) * N);\n  size_t i = 0;\n\n  for (i = 0; i &lt; N; i++) {\n     Prob[i] = Prob_double[i];\n  }\n\n  return Prob;\n}\n</code></pre>\n\n<p>That will round towards zero. If you instead want to round to the nearest you can use <code>#include &lt;math.h&gt;</code> and change that loop to</p>\n\n<pre><code>for (i = 0; i &lt; N; i++) {\n  Prob[i] = round(Prob_double[i]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1471068093, "creation_date": 1471068093, "answer_id": 38929750, "question_id": 38228889, "link": "https://stackoverflow.com/questions/38228889/convert-a-double-array-to-unsigned-short/38929750#38929750", "title": "Convert a double array to unsigned short?", "body": "<p>The biggest issue you face is for those double values that exceed <code>USHRT_MAX</code>. Secondarily, you need to address rounding. A simple approach that addresses both and sets rounding at <code>.5</code> could look something like the following where the function <code>array_dbl2short</code> returns the number of double values successfully converted to <code>unsigned short</code>:</p>\n\n<pre><code>size_t array_dbl2short (unsigned short *usa, double *da, size_t n)\n{\n    if (!usa || !da || !n) return 0;\n    register size_t i, ncnvt = 0;\n\n    for (i = 0; i &lt; n; i++) {\n        if (da[i] &lt; 0 || (unsigned long long)(da[i] + 0.5) &gt; USHRT_MAX)\n            fprintf (stderr, \"error: %lf outside range for conversion.\\n\",\n                    da[i]);\n        else\n            usa[ncnvt++] = (unsigned short)(da[i] + 0.5);\n    }\n\n    return ncnvt;\n}\n</code></pre>\n\n<p>A short example of its use would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nsize_t array_dbl2short (unsigned short *usa, double *da, size_t n);\n\nint main (void) {\n\n    double arr[] = { 1.49, 1.5, 65535.49, 65535.5, -1.9, 25671.8 };\n    size_t i, n, nelem = sizeof arr/sizeof *arr;\n    unsigned short usarr[nelem];\n\n    if ((n = array_dbl2short (usarr, arr, nelem))) {\n        printf (\"\\n unsigned short array:\\n\\n\");\n        for (i = 0; i &lt; n; i++)\n            printf (\"  usarr[%zu] : %hu\\n\", i, usarr[i]);\n    }\n\n    return 0;\n}\n\nsize_t array_dbl2short (unsigned short *usa, double *da, size_t n)\n{\n    if (!usa || !da || !n) return 0;\n    register size_t i, ncnvt = 0;\n\n    for (i = 0; i &lt; n; i++) {\n        if (da[i] &lt; 0 || (unsigned long long)(da[i] + 0.5) &gt; USHRT_MAX)\n            fprintf (stderr, \"error: %lf outside range for conversion.\\n\",\n                    da[i]);\n        else\n            usa[ncnvt++] = (unsigned short)(da[i] + 0.5);\n    }\n\n    return ncnvt;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> the <em>real-part</em> of the <code>double</code> values must be capable of being expressed as an <code>unsigned long long</code> for the conversion validations to work properly)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/dbl2ushort\nerror: 65535.500000 outside range for conversion.\nerror: -1.900000 outside range for conversion.\n\n unsigned short array:\n\n  usarr[0] : 1\n  usarr[1] : 2\n  usarr[2] : 65535\n  usarr[3] : 25672\n</code></pre>\n\n<p>This solution doesn't address all possible rounding and conversion issues. You can also use the function in <code>math.h</code> (e.g. <code>modf</code>, <code>round</code>, etc) to preform the real-part and rounding. Let me know if you have further questions.</p>\n"}], "owner": {"reputation": 43, "user_id": 6316140, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dea8eeb86927bd5b12e1f8411f67c7b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bobotic", "link": "https://stackoverflow.com/users/6316140/bobotic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1471068093, "creation_date": 1467821981, "last_edit_date": 1471036814, "question_id": 38228889, "link": "https://stackoverflow.com/questions/38228889/convert-a-double-array-to-unsigned-short", "title": "Convert a double array to unsigned short?", "body": "<pre><code>  Prob = *((unsigned short*)(Prob));\n\n  Prob = (unsigned short)(Prob);\n</code></pre>\n\n<p>This didn't work for me. How to convert it correctly?</p>\n"}, {"tags": ["c", "arduino", "atmega"], "answers": [{"tags": [], "owner": {"reputation": 3127, "user_id": 729807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0a5932698c1775bf8d54e46478b6d6?s=128&d=identicon&r=PG", "display_name": "crlanglois", "link": "https://stackoverflow.com/users/729807/crlanglois"}, "is_accepted": true, "score": 0, "last_activity_date": 1467823374, "last_edit_date": 1467823374, "creation_date": 1467823020, "answer_id": 38229203, "question_id": 38228860, "link": "https://stackoverflow.com/questions/38228860/arduino-code-wire-ported-to-atmel-xplained-mini-to-communicate-with-ds3231/38229203#38229203", "title": "Arduino code Wire ported to Atmel Xplained Mini to communicate with DS3231", "body": "<p>Arduino has an existing wiring library that facilitates I2C communication, most professional development frameworks aren't quite so simple but are also more full-featured.  I'm assuming you are using Atmel Studio, you'll want to look at the TWI (two-wire interface) documentation for doing I2C communication.</p>\n\n<p><a href=\"http://www.atmel.com/Images/Atmel-2564-Using-the-TWI-Module-as-I2C-Master_ApplicationNote_AVR315.pdf\" rel=\"nofollow\">AVR315: Using the TWI Module as I2C Master</a></p>\n\n<p>You can copy TWI_Master.c and TWI_Master.h to your project and use these for I2C communication.  That is what I've typically done in the past.</p>\n\n<p>The demo code that goes with this app note can be found here, main.c has an example of the usage of this I2C driver:</p>\n\n<p><a href=\"http://www.atmel.com/images/Atmel-2564-Using-the-TWI-Module-as-I2C-Master_ApplicationNote_AVR315.zip\" rel=\"nofollow\">AVR315 Demo Code</a></p>\n"}], "owner": {"reputation": 13, "user_id": 6556932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/911c4e2fe1b1ee1cd6c5cd9895c24c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Legs", "link": "https://stackoverflow.com/users/6556932/legs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "accepted_answer_id": 38229203, "answer_count": 1, "score": 1, "last_activity_date": 1467823374, "creation_date": 1467821911, "question_id": 38228860, "link": "https://stackoverflow.com/questions/38228860/arduino-code-wire-ported-to-atmel-xplained-mini-to-communicate-with-ds3231", "title": "Arduino code Wire ported to Atmel Xplained Mini to communicate with DS3231", "body": "<p>I am taking Arduino Prototype code used for a DS3231 RTC and taking it to an embedded platform that does not directly support Arduino code (right now that is the Atmel Xplained Mini). Is there a way for me to create an equivalent program without writing an entire I2C protocol and the entire data communication from scratch? There must be an overlapping library/header/code block that I can adapt to my purpose.</p>\n\n<p>As an example I am looking to make the code  <a href=\"http://tronixstuff.com/2014/12/01/tutorial-using-ds1307-and-ds3231-real-time-clock-modules-with-arduino/\" rel=\"nofollow\">here</a> work on the Atmel Xplained Board. The code should be pretty simple, what I need is for the DS3231 to tell the MCU the time when it asks for it. I can do the manipulation of the date/time myself, it is getting that information on a non-Arduino platform that is the road block for me. </p>\n"}, {"tags": ["c", "static"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1467821954, "creation_date": 1467821954, "answer_id": 38228876, "question_id": 38228800, "link": "https://stackoverflow.com/questions/38228800/unique-ids-using-a-static-variable-in-c/38228876#38228876", "title": "Unique ids using a static variable in C", "body": "<p>Yes, it will work as expected. </p>\n"}, {"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": true, "score": 2, "last_activity_date": 1467821965, "creation_date": 1467821965, "answer_id": 38228879, "question_id": 38228800, "link": "https://stackoverflow.com/questions/38228800/unique-ids-using-a-static-variable-in-c/38228879#38228879", "title": "Unique ids using a static variable in C", "body": "<p>This will work for single-threaded programs. For multi-threaded programs, you need to use <code>_Atomic</code>.</p>\n\n<p>That said, I recommend refactoring it out to a separate function.</p>\n\n<p>Alternatively, consider moving the counter from a global variable to a member of the tree root itself.</p>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 38228879, "answer_count": 2, "score": 1, "last_activity_date": 1467821965, "creation_date": 1467821777, "question_id": 38228800, "link": "https://stackoverflow.com/questions/38228800/unique-ids-using-a-static-variable-in-c", "title": "Unique ids using a static variable in C", "body": "<p>I need to give certain nodes in my tree unique ids as they are recursively added. I wrote code like this to solve the problem:</p>\n\n<pre><code>  } else if (deapTree[0] == -1){\n    static int const_idx;\n    //bla bla bla\n    root-&gt;idx = const_idx;\n    //bla bla bla\n    const_idx++; \n  } else {\n</code></pre>\n\n<p>Will this work as I intend? Meaning <code>const_idx</code> will start at 0, and then every time that branch of the <code>if</code> is reached it'll get incremented by 1.</p>\n"}, {"tags": ["c", "gcc", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1467820382, "post_id": 38228079, "comment_id": 63878539, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1467820448, "post_id": 38228079, "comment_id": 63878602, "body": "I don&#39;t know if this solves it, but I would remove the <code>++j</code> from both of the <code>for</code> loops, and place them right after the places where you have written into <code>s2[j]</code>, or better, use <code>s2[j++]</code>."}, {"owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467821148, "post_id": 38228079, "comment_id": 63879061, "body": "@WeatherVane That worked! Any ideas why?"}, {"owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1467821218, "post_id": 38228079, "comment_id": 63879090, "body": "@PaulR Thank you. I will look into debuggers for c. I have used the one built into netbeans before, but haven&#39;t done so for c."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467821244, "post_id": 38228079, "comment_id": 63879100, "body": "As the answer said. My suggestion was to increment the index <i>at the point of use</i> not elsewhere to make you grapple with the logic. @dbush also mentioned the <code>i+=2</code> before I got to it. You must skip 2 characters, not one (the third is dealt with in the <code>for</code> loop."}, {"owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 0, "creation_date": 1467821745, "post_id": 38228079, "comment_id": 63879386, "body": "The i+=2 won&#39;t work for cases like <code>a-h-k</code>. I realize another modeification needs to be made, but that was something that I put in the backseat, since this problem was more pressing."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 1, "creation_date": 1467821536, "post_id": 38228522, "comment_id": 63879267, "body": "The i needs to only increment by one, so that cases like <code>a-b-c</code> work. The rest is correct. It works, and I understand why it&#39;s not working. If you remove that part, I will mark this answer as correct."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1467820881, "creation_date": 1467820881, "answer_id": 38228522, "question_id": 38228079, "link": "https://stackoverflow.com/questions/38228079/kr-programming-in-c-ex-3-3/38228522#38228522", "title": "K&amp;R Programming in C: EX 3.3", "body": "<p>After your inner <code>for</code> loop, <code>j</code> is one past where it should be, so you skip writing to one position.  If that position happens to contain the value 0, it terminates the string and you don't see anything after it.</p>\n\n<p>Also, <code>i</code> is one before where it should be.</p>\n\n<p>Replace this:</p>\n\n<pre><code>        for(char c = s1[i]; c &lt;= s1[i+2]; ++c, ++j){\n            s2[j] = c;\n        }\n        ++i;\n</code></pre>\n\n<p>With this:</p>\n\n<pre><code>        for(char c = s1[i]; c &lt;= s1[i+2]; ++c, ++j){\n            s2[j] = c;\n        }\n        i+=2;\n        j--;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 0, "creation_date": 1467822074, "post_id": 38228888, "comment_id": 63879564, "body": "Thank you. I realized and made this change after @dbush&#39;s answer didn&#39;t work for those cases."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 0, "creation_date": 1467822332, "post_id": 38228888, "comment_id": 63879724, "body": "There is one more issue, with this code however, try input <code>a-g-</code>, this wont work ... I am trying to fix it, I had tried only your test inputs before I posted the answer"}, {"owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 0, "creation_date": 1467822611, "post_id": 38228888, "comment_id": 63879895, "body": "Don&#39;t bother. It&#39;s my problem. I&#39;m still not entirely done. I came here after I realized that I was stuck.  Also, in your answer, you say <code>c &lt; s1[i+1]</code> but I think you mean <code>c &lt; s1[1+2]</code>."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 0, "creation_date": 1467822888, "post_id": 38228888, "comment_id": 63880083, "body": "yes i meant  <code>c &lt; s1[i+2]</code>, as could be seen in the code ."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "edited": false, "score": 0, "creation_date": 1467823680, "post_id": 38228888, "comment_id": 63880548, "body": "This problem is nice one. I can suggest you some good inputs here. Some of them are &#39;abc-Def&#39;, &#39;abc-456&#39;, &#39;abc--def&#39; apart from usual ones... The code above fails .. Hope you will fix them, and in case you need any pointers you can msg back here ...."}], "tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": true, "score": 1, "last_activity_date": 1467824250, "last_edit_date": 1467824250, "creation_date": 1467821980, "answer_id": 38228888, "question_id": 38228079, "link": "https://stackoverflow.com/questions/38228079/kr-programming-in-c-ex-3-3/38228888#38228888", "title": "K&amp;R Programming in C: EX 3.3", "body": "<p>As, suggested by dbush, you need to do one <code>j--</code>, but for cases like <code>a-c-g</code> to work you need to change your inner <code>for</code> condition too. Instead of checking <code>c &lt;= s1[i+2]</code>, you need to check only till <code>c &lt; s1[i+2]</code></p>\n\n<pre><code>void expand(char s1[], char s2[]){\n    int i; // index for first string\n    int j; // index for 2nd string\n\n    for(i = 0, j = 0; s1[i] != '\\0'; ++i, ++j){\n            if(isalnum(s1[i]) &amp;&amp; s1[i+1] == '-'){\n                    char c = s1[i];\n                    /* Do it c &lt; instead of c&lt;= */\n                    for(char c = s1[i]; c &lt; s1[i+2]; ++c, ++j){\n                            s2[j] = c;\n                    }\n                    --j;  /* Decrement j once */\n                    ++i; \n            } else {\n                    s2[j] = s1[i];\n            }\n    }\n    s2[j] = '\\0';\n}\n</code></pre>\n\n<p>P.S: This code solves OP's immediate issues at hand (i.e the inputs that was shown in the original post). But, this code fails for inputs like <code>a-b-c-</code>. Also additional code is needed for inputs like <code>abc-DEF</code>, <code>abc--def</code>, <code>abc-456</code>, etc. However, as seen in comments (of this answer) OP wants to solve those issues himself.</p>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 0, "last_activity_date": 1467824452, "creation_date": 1467824452, "answer_id": 38229612, "question_id": 38228079, "link": "https://stackoverflow.com/questions/38228079/kr-programming-in-c-ex-3-3/38229612#38229612", "title": "K&amp;R Programming in C: EX 3.3", "body": "<p>As sps and dbush already made it work, let me add my two cent, too.</p>\n\n<p>You should keep your stuff simple and readable if possible. For example: you load too much into your loops, its not the <a href=\"http://www.ioccc.org/\" rel=\"nofollow\">IOCCC</a>. Increment/decrement only the index you defined in the first part of the for-loop. That would be the variables <code>i</code> and <code>c</code> in your case. The iterations over the vectors <code>s1</code> and <code>s2</code> should be done as close as possible to the vectors.</p>\n\n<p>That gives:</p>\n\n<pre><code>void expand(char s1[], char s2[]){\n    int i;\n    int j;\n    char c;\n    for(i = 0, j = 0; s1[i] != '\\0'; i++){\n        if(isalnum(s1[i]) &amp;&amp; s1[i+1] == '-'){\n            for(c = s1[i]; c &lt; s1[i+2]; c++){\n                s2[j++] = c;\n            }\n            i++;\n        } else{\n            s2[j++] = s1[i];\n        }\n    }\n    s2[j] = '\\0';\n}\n</code></pre>\n\n<p>Doing it that way gets rid of the otherwise necessary correction <code>j--</code></p>\n\n<p>Test it:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\nint main(int argc, char **argv)\n{\n  char s[200];\n  char s2[200];\n  int i;\n  memset(s,0,200);\n  memset(s2,0,200);\n  // put some spaces in between the arguments\n  for(i=1;i&lt;argc;i++){\n    // counting ommitted!\n    strcat(s2,argv[i]);\n    s2[strlen(s2)] = ' ';\n  }\n  printf(\"In:  %s\\n\",s2);\n  expand(s2,s);\n  printf(\"Out: %s\\n\",s);\n  exit(EXIT_SUCCESS);\n}\n\n$ gcc -W -Wall -std=c11  expand.c -o expand\n./expand 0-9 ASD a-z QWE a-ch-r\nIn:  0-9 ASD a-z QWE a-c-r \nOut: 0123456789 ASD abcdefghijklmnopqrstuvwxyz QWE abchijklmnopqr\n</code></pre>\n\n<p>Oh, and the <code>++i</code> et al. in the third part of the for loops: we have 2016 now.</p>\n"}], "owner": {"reputation": 89, "user_id": 4303777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-A3K6I0BOmTw/AAAAAAAAAAI/AAAAAAAAFyE/5yNCUcdFpPI/photo.jpg?sz=128", "display_name": "Fazer", "link": "https://stackoverflow.com/users/4303777/fazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 38228888, "answer_count": 3, "score": 4, "last_activity_date": 1467824452, "creation_date": 1467819603, "last_edit_date": 1467820331, "question_id": 38228079, "link": "https://stackoverflow.com/questions/38228079/kr-programming-in-c-ex-3-3", "title": "K&amp;R Programming in C: EX 3.3", "body": "<p>EX 3.3: Write a function <code>expand(s1,s2)</code> that expands shorthand notations like a-z in the string s1 into the equivalent complete list <code>abc...xyz in s2</code>  Allow for letters of either case and digits, and be prepared to handle cases like <code>a-b-c</code> and <code>a-z0-9</code> and <code>-a-z</code>. Arrange that a leading or trailing - is taken literally.</p>\n\n<p>I'm trying to solve exercise 3.3 in K&amp;R and this is what I have:</p>\n\n<pre><code>void expand(char s1[], char s2[]){\n    int i; // index for first string\n    int j; // index for 2nd string\n\n    for(i = 0, j = 0; s1[i] != '\\0'; ++i, ++j){\n        if(isalnum(s1[i]) &amp;&amp; s1[i+1] == '-'){\n            char c = s1[i];\n            for(char c = s1[i]; c &lt;= s1[i+2]; ++c, ++j){\n                s2[j] = c;\n            }\n            ++i;\n        } else{\n            s2[j] = s1[i];\n        }\n    }\n    s2[j] = '\\0';\n}\n</code></pre>\n\n<p>It succesfully expands any range, as long as it is not after any other range, ie. it doesn't add anything to s2 after the first range is finished. If I put this statement:</p>\n\n<pre><code>printf(\"%c\\n\", c);\n</code></pre>\n\n<p>in the second for loop, it prints out the right characters, but it doesn't add it to s2.</p>\n\n<p>Sample inputs &amp; outputs:</p>\n\n<pre><code>In: akls aldio a-h 19 aodk                                                 \nOut: akls aldio abcdefgh\n\nIn: 0-6 a-c lol                                                              \nOut: 0123456\n\nIn: a-c-g 1okd 2-4                                                           \nOut: abc\n</code></pre>\n\n<p>Can anybody point me in the right direction to fix my mistake?<br>\nThank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467819283, "post_id": 38227875, "comment_id": 63877792, "body": "compile it for an arch that uses little endian... and you also have to take care of alignment."}], "answers": [{"tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": -1, "last_activity_date": 1467819430, "last_edit_date": 1495541296, "creation_date": 1467819308, "answer_id": 38227962, "question_id": 38227875, "link": "https://stackoverflow.com/questions/38227875/compile-c-struct-to-bin-file/38227962#38227962", "title": "Compile c struct to bin file", "body": "<p>Probably </p>\n\n<pre><code>objcopy -O binary\n</code></pre>\n\n<p>is what you are looking for.See <a href=\"https://stackoverflow.com/a/1647405/2878070\">[ this ]</a> SO answer.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1467820026, "creation_date": 1467820026, "answer_id": 38228213, "question_id": 38227875, "link": "https://stackoverflow.com/questions/38227875/compile-c-struct-to-bin-file/38228213#38228213", "title": "Compile c struct to bin file", "body": "<p>Though, Little-Endian is the default for all standard configurations. A otherwise configured compiler toolkit can use this switch to fetch desired format.</p>\n\n<pre><code>    gcc file.c -mlittle-endian\n</code></pre>\n\n<p>There you go.. </p>\n"}, {"tags": [], "owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "is_accepted": false, "score": 0, "last_activity_date": 1467820542, "creation_date": 1467820542, "answer_id": 38228400, "question_id": 38227875, "link": "https://stackoverflow.com/questions/38227875/compile-c-struct-to-bin-file/38228400#38228400", "title": "Compile c struct to bin file", "body": "<p>I guess tying together the other answers. On a little endian machine (x86): </p>\n\n<pre><code>evaitl@evbb ~/se $ cat foo.c \n#include &lt;stdint.h&gt;\n\ntypedef struct {\n  uint32_t m1;\n  uint16_t m2;\n} TStruct;\n\nTStruct s = {\n  1,\n  2\n};\nevaitl@evbb ~/se $ gcc -c foo.c \nevaitl@evbb ~/se $ objcopy -O binary foo.o  foo\nevaitl@evbb ~/se $ hexdump -C foo\n00000000  01 00 00 00 02 00 00 00                           |........|\n00000008\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6548290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d761060681bae9733661375006a0b1d?s=128&d=identicon&r=PG&f=1", "display_name": "gaminn", "link": "https://stackoverflow.com/users/6548290/gaminn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467820542, "creation_date": 1467819034, "question_id": 38227875, "link": "https://stackoverflow.com/questions/38227875/compile-c-struct-to-bin-file", "title": "Compile c struct to bin file", "body": "<p>I have a C file:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\ntypedef struct {\n  uint32_t m1;\n  uint16_t m2;\n} TStruct;\n\nTStruct s = {\n  1,\n  2\n};\n</code></pre>\n\n<p>How to compile this file with gcc to produce little endian binary file?</p>\n\n<pre><code>0x01 0x00 0x00 0x00 0x02 0x00\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 7, "creation_date": 1467817427, "post_id": 38227333, "comment_id": 63876555, "body": "TL/DR:<code>#define</code> is visible in each compilation unit from the point it is defined downwards until <code>#undef</code>-ed."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1467919234, "post_id": 38227333, "comment_id": 63928399, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6379489/scope-of-define-preprocessor-in-c\">Scope of #define preprocessor in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3127, "user_id": 729807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0a5932698c1775bf8d54e46478b6d6?s=128&d=identicon&r=PG", "display_name": "crlanglois", "link": "https://stackoverflow.com/users/729807/crlanglois"}, "is_accepted": false, "score": 3, "last_activity_date": 1467817607, "creation_date": 1467817607, "answer_id": 38227413, "question_id": 38227333, "link": "https://stackoverflow.com/questions/38227333/what-is-the-scope-of-a-define/38227413#38227413", "title": "What is the scope of a #define?", "body": "<p>source1.c is compiled separately from source2.c therefore your defines are processed for source1 as it is compiled and then as an independent action they are processed for source2 as it is compiled.</p>\n\n<p>Hopefully this is a clear explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1467818056, "creation_date": 1467818056, "answer_id": 38227542, "question_id": 38227333, "link": "https://stackoverflow.com/questions/38227333/what-is-the-scope-of-a-define/38227542#38227542", "title": "What is the scope of a #define?", "body": "<p>Yes, you are right!! \nCompilation of a file, in it self, is merely, just a process under execution. One process can not interfare with another unless explicitly done. The c pre-processors are just literal substitution mechanism, performed in a dumb way. Whatever conditional checking are performed, are confined to ongoing instance of pre-processor only, nothing gets carry forward once execution (compilation) comes to end. Pre-processors do not \"configure\" compiler, their scope is limited till \"their own compilation\"</p>\n"}, {"tags": [], "owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "is_accepted": false, "score": 1, "last_activity_date": 1467964786, "last_edit_date": 1467964786, "creation_date": 1467924196, "answer_id": 38254929, "question_id": 38227333, "link": "https://stackoverflow.com/questions/38227333/what-is-the-scope-of-a-define/38254929#38254929", "title": "What is the scope of a #define?", "body": "<p>Preprocessor macros do not have \"scope\" as such, they just define a piece of text that should replace the macro in the code.</p>\n\n<p>This means that the compiler never sees the strings <code>CONSTANT_1</code> and <code>CONSTANT_2</code> but instead gets the source in a preprocessed form with these macros replaced with their expansions (<code>1</code> and <code>2</code> respectively).</p>\n\n<p>You may inspect this preprocessed source by calling <code>gcc</code> with the <code>-E</code> flag, or with whatever flag only does preprocessing on your particular compiler.</p>\n"}], "owner": {"reputation": 3336, "user_id": 2649384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07fcf64005a81f4b34618c50a15f2b20?s=128&d=identicon&r=PG", "display_name": "Izzo", "link": "https://stackoverflow.com/users/2649384/izzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2184, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1467964786, "creation_date": 1467817348, "last_edit_date": 1467918986, "question_id": 38227333, "link": "https://stackoverflow.com/questions/38227333/what-is-the-scope-of-a-define", "title": "What is the scope of a #define?", "body": "<p>What is the scope of a #define?</p>\n\n<p>I have a question regarding the scope of a #define for C/C++ and am trying to bet understand the preprocessor. </p>\n\n<p>Let's say I have a project containing multiple source and header files. Let's say I have a header file that has the following:</p>\n\n<pre><code>// header_file.h\n\n#ifndef __HEADER_FILE\n#define __HEADER_FILE\n\n#define CONSTANT_1          1\n#define CONSTANT_2          2\n\n#endif\n</code></pre>\n\n<p>Let's then say I have two source files that are compiled in the following order:</p>\n\n<pre><code>// source1.c\n\n#include header_file.h\n\nvoid funct1(void)\n{\n    int var = CONSTANT_1;\n}\n\n\n// source2.c    \n\n#include header_file.h\n\nvoid funct2(void)\n{\n    int var = CONSTANT_2;\n}\n</code></pre>\n\n<p>Assuming I have included all the other necessary overhead, this code should compile fine. However, I'm curious as to what #defines are remembered between compilations. When I compile the above code, are the contents of each #include actually included, or are the include guards actually implemented?</p>\n\n<p>TLDR: Do #defines carry over from one compilation unit to the next? Or do #define only exist within a single compilation unit?</p>\n\n<p>As I type this out, I believe I'm answering my own question and I will state my believed answer. #defines are constrained to a single compilation unit (.c). The preprocessor essentially forgets any #defines when it goes from one compilation unit to the next. Thus in the above example I listed, the include guards do not come into play. Am I correct in this belief?</p>\n"}, {"tags": ["c", "recursion", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 735, "user_id": 2568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/2aDtk.jpg?s=128&g=1", "display_name": "dear_tzvi", "link": "https://stackoverflow.com/users/2568434/dear-tzvi"}, "edited": false, "score": 1, "creation_date": 1467816970, "post_id": 38227155, "comment_id": 63876244, "body": "Please edit the question so indentation will be presented correctly"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 735, "user_id": 2568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/2aDtk.jpg?s=128&g=1", "display_name": "dear_tzvi", "link": "https://stackoverflow.com/users/2568434/dear-tzvi"}, "edited": false, "score": 0, "creation_date": 1467817019, "post_id": 38227155, "comment_id": 63876284, "body": "@dear_tzvi I don&#39;t understand what you mean."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467817078, "post_id": 38227155, "comment_id": 63876332, "body": "Probably they meant: indent your code properly so it isn&#39;t an unreadable mess."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467817196, "post_id": 38227155, "comment_id": 63876400, "body": "@Lundin I don&#39;t see any mess here. everything has been added to the post properly and clearly."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1467817219, "post_id": 38227155, "comment_id": 63876425, "body": "@Ilan Aizelman WS  What does this function do?"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1467817232, "post_id": 38227155, "comment_id": 63876435, "body": "@VladfromMoscow That is what I&#39;m trying to analyze."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1467817305, "post_id": 38227155, "comment_id": 63876476, "body": "@Ilan Aizelman WS  The function should have a description."}, {"owner": {"reputation": 735, "user_id": 2568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/2aDtk.jpg?s=128&g=1", "display_name": "dear_tzvi", "link": "https://stackoverflow.com/users/2568434/dear-tzvi"}, "edited": false, "score": 0, "creation_date": 1467817367, "post_id": 38227155, "comment_id": 63876516, "body": "Did you check - <a href=\"http://stackoverflow.com/questions/8183985/recursive-insertion-of-bst\" title=\"recursive insertion of bst\">stackoverflow.com/questions/8183985/recursive-insertion-of-b&zwnj;&#8203;st</a>"}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1467817860, "post_id": 38227155, "comment_id": 63876833, "body": "@VladfromMoscow This function is trying to see if there is any path (root to a leaf node) whose sum of values is equal to <code>sum</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467818176, "post_id": 38227155, "comment_id": 63877030, "body": "@IlanAizelmanWS are you misreading the code? Your statement <code>returns subTree = sum = 0</code> is incorrect, it is <code>returns subTree = sum == 0</code>"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467818836, "post_id": 38227155, "comment_id": 63877500, "body": "@WeatherVane I think you are mistaken Weather. my code is fine."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467818888, "post_id": 38227155, "comment_id": 63877543, "body": "@IlanAizelmanWS I did not mean your code is wrong, I mean you are mis-reading what it does. The statement at the bottom where you tried to understand, says it should return 0. Apart from that I have no idea what the question is asking. You said you think it should return 0."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1467819109, "post_id": 38227155, "comment_id": 63877664, "body": "Yes. If I&#39;ve read the sum == 0 more carefully, I would understand that it will actually return 1."}], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1467818791, "post_id": 38227394, "comment_id": 63877462, "body": "Thank you very much sps!"}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 1, "creation_date": 1467819155, "post_id": 38227394, "comment_id": 63877707, "body": "wc. Also, one more thing to note. The reasoning you gave at the end of your question (for return value being 0) shows that you are confused about when this function can return 0. For this funciton to return 0, it should traverse <code>each and every</code> path. That is because you have <code>return func_3(node-&gt;left, subSum) || func_3(node-&gt;right, subSum)</code>, so you can see, if <code>1</code> is not returned from <code>func_3(node-&gt;left, subSum)</code>, then <code>func_3(node-&gt;right, subSum)</code> is called. So you see that for a <code>0</code> to be returned <code>every</code> path is traversed."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1467819261, "post_id": 38227394, "comment_id": 63877773, "body": "Excellent explanation! I understand it even better now. Thank you <code>sps</code> !"}], "tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": true, "score": 1, "last_activity_date": 1467818780, "last_edit_date": 1467818780, "creation_date": 1467817533, "answer_id": 38227394, "question_id": 38227155, "link": "https://stackoverflow.com/questions/38227155/how-does-this-function-work-bst-recursion/38227394#38227394", "title": "How does this function work? (BST recursion)", "body": "<p>This function returns <code>1</code> if there is a path (<code>root node</code> to a <code>leaf node</code>) whose sum of values is equal to <code>sum</code>. </p>\n\n<p>In your function call <code>func_3(root, 9)</code> in main, what you are trying to do is check if there is any path in your binary tree, such that the sum of values of all the nodes in that path is equal to 9. </p>\n\n<p>There is such path, which is the leftmost path (5->3->1), so your function will return 1.</p>\n\n<p>This is how it is returning 1. First call is </p>\n\n<pre><code>func_3(node, 9)\n</code></pre>\n\n<p>where <code>node</code> is pointing to root node of this tree, i.e. root node with value <code>5</code>.</p>\n\n<p>Here node is not null. So,</p>\n\n<p>subSum = 9 - 5 = 4.</p>\n\n<p>Next call is </p>\n\n<pre><code>func3(node, 4)\n</code></pre>\n\n<p>where <code>node</code> is pointing to node with value <code>3</code> (left child of node of previous call)</p>\n\n<p>Here again node is not null, So,</p>\n\n<p>subSum = 4 - 3 = 1</p>\n\n<p>Next call is </p>\n\n<pre><code>func3(node, 1)\n</code></pre>\n\n<p>where <code>node</code> is pointing to node with value <code>1</code> (left child of node of previous call)</p>\n\n<p>Here again node is not null, So,</p>\n\n<p>subSum = 1 - 1 = 0</p>\n\n<p>Next call is </p>\n\n<pre><code>func_3(node, 0)\n</code></pre>\n\n<p>where <code>node</code> is pointing to <code>NULL</code> (left child of node of previous call)</p>\n\n<p>However this time <code>node</code> is <code>NULL</code>, and since <code>sum == 0</code> is true, it will return <code>1</code>, And this return value is returned all the way up the recursion and finally to <code>main</code>.</p>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 38227394, "answer_count": 1, "score": 0, "last_activity_date": 1467818780, "creation_date": 1467816863, "last_edit_date": 1467817206, "question_id": 38227155, "link": "https://stackoverflow.com/questions/38227155/how-does-this-function-work-bst-recursion", "title": "How does this function work? (BST recursion)", "body": "<p>Didn't find a suitable title, forgive me for that,\nanyways</p>\n\n<p>Im trying to analyze a recursion function of BST, which returns 1.</p>\n\n<p>After my bad calculations, I got return value of 0, I want to understand what am I doing here wrong.</p>\n\n<p>We call the function like that from <code>main.c</code>: <code>func_3(root, 9);</code></p>\n\n<p>So <strong>sum = 9</strong></p>\n\n<p><strong>Here's the block of code:</strong></p>\n\n<pre><code>int func_3(struct node* node, int sum)\n {\n        if (node == NULL) \n              return(sum == 0);\n        else \n        {\n            int subSum = sum - node-&gt;data;\n            return (func_3(node-&gt;left, subSum) ||  func_3(node-&gt;right, subSum));\n\n         }\n }\n</code></pre>\n\n<p><strong>Here's the BST:</strong>\n<a href=\"https://i.stack.imgur.com/RGMUA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RGMUA.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>My calculations:</strong>\nfunc(5,9) -> func3(3,4) -> func(1,1) -> returns subTree = sum = 0.</p>\n"}, {"tags": ["c", "ubuntu", "networking", "libnet"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1467815954, "post_id": 38226747, "comment_id": 63875472, "body": "Please include the exact error messages that your compiler gives you, and please also include the output of <code>libnet-config --defines</code>."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 1, "creation_date": 1467815996, "post_id": 38226747, "comment_id": 63875504, "body": "You probably also want <code>libnet-config --cflags</code> instead of <code>--defines</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6556616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da6f521c0e9c235295e87249ff8ae7a?s=128&d=identicon&r=PG&f=1", "display_name": "S.Saliba", "link": "https://stackoverflow.com/users/6556616/s-saliba"}, "is_accepted": false, "score": 0, "last_activity_date": 1467906732, "creation_date": 1467906732, "answer_id": 38250010, "question_id": 38226747, "link": "https://stackoverflow.com/questions/38226747/undefined-reference-to-libnet-1-0-2a-functions-linux-c/38250010#38250010", "title": "undefined reference to libnet-1.0.2a functions, Linux C", "body": "<p>Actually i solved the problem. What was wrong is that my compiler was linking to the version 1.1 whereas my code was written with the 1.0 version. That is because i installed the two versions by mistake and they don't coexist. What i had to do was to delete the two libraries and install the new version exclusively. And than i converted all my codes to the new version which is way simpler. </p>\n"}], "owner": {"reputation": 1, "user_id": 6556616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da6f521c0e9c235295e87249ff8ae7a?s=128&d=identicon&r=PG&f=1", "display_name": "S.Saliba", "link": "https://stackoverflow.com/users/6556616/s-saliba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467906732, "creation_date": 1467815761, "last_edit_date": 1467815922, "question_id": 38226747, "link": "https://stackoverflow.com/questions/38226747/undefined-reference-to-libnet-1-0-2a-functions-linux-c", "title": "undefined reference to libnet-1.0.2a functions, Linux C", "body": "<p>i'm using Ubuntu and i'm actually trying to install libnet v.1.0.2a in order to build and write network packets. i'm aware that i'm installing the older version but i'd rather stick with it since it suits me well. the problem is that when i write code and try to compile it, \"undefined reference\" error is showing up on all the functions of libnet library. i checked /usr/include and the header files containing declarations are all present. on my compiling command i wrote:</p>\n\n<pre><code>$sudo gcc $(libnet-config --defines) -o aa aa.c -lnet\n</code></pre>\n\n<p>but it is still coming with undefined references. can someone help me please?</p>\n"}, {"tags": ["c", "file", "fseek"], "answers": [{"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 6, "last_activity_date": 1467815850, "creation_date": 1467815850, "answer_id": 38226779, "question_id": 38226713, "link": "https://stackoverflow.com/questions/38226713/fseekf-0-2-how-does-this-work-without-seek-cur-seek-set-or-seek-end/38226779#38226779", "title": "fseek(f,0,2); How does this work without SEEK_CUR / SEEK_SET or SEEK_END?", "body": "<p><code>SEEK_SET</code>/<code>SEEK_CUR</code>/<code>SEEK_END</code> are 0/1/2 respectively, you can use the number or definition.</p>\n\n<p>See definitions here: <a href=\"http://unix.superglobalmegacorp.com/BSD4.4/newsrc/sys/unistd.h.html\" rel=\"noreferrer\">http://unix.superglobalmegacorp.com/BSD4.4/newsrc/sys/unistd.h.html</a></p>\n\n<pre><code>/* whence values for lseek(2) */\n#define SEEK_SET    0   /* set file offset to offset */\n#define SEEK_CUR    1   /* set file offset to current plus offset */\n#define SEEK_END    2   /* set file offset to EOF plus offset */\n</code></pre>\n\n<p>Of course, it is bad practice to directly use these numbers as it may change in future implementations (not likely though)</p>\n"}, {"tags": [], "owner": {"reputation": 389, "user_id": 6494804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12737fef0c31cdd0bc25d4212619858b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexi", "link": "https://stackoverflow.com/users/6494804/alexi"}, "is_accepted": false, "score": 2, "last_activity_date": 1467816096, "creation_date": 1467816096, "answer_id": 38226861, "question_id": 38226713, "link": "https://stackoverflow.com/questions/38226713/fseekf-0-2-how-does-this-work-without-seek-cur-seek-set-or-seek-end/38226861#38226861", "title": "fseek(f,0,2); How does this work without SEEK_CUR / SEEK_SET or SEEK_END?", "body": "<p>Because SEEK_XXX are macros and have a certain value, in this case, SEEK_END is equal to 2, so it's the same fseek(f,0,SEEK_END) that fseek(f,0,2), but you should use always the macros. You can see this values for example in the notes of <a href=\"http://man7.org/linux/man-pages/man2/lseek.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/lseek.2.html</a> (at the end).</p>\n"}, {"tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 2, "last_activity_date": 1467816146, "creation_date": 1467816146, "answer_id": 38226880, "question_id": 38226713, "link": "https://stackoverflow.com/questions/38226713/fseekf-0-2-how-does-this-work-without-seek-cur-seek-set-or-seek-end/38226880#38226880", "title": "fseek(f,0,2); How does this work without SEEK_CUR / SEEK_SET or SEEK_END?", "body": "<p>Look into your <code>stdio.h</code>:</p>\n\n<pre><code>#define SEEK_END    2   /* Seek from end of file.  */\n</code></pre>\n\n<p>So after preprocessing your <code>fseek(f, 0, SEEK_END)</code> becames <code>fseek(f, 0, 2)</code> and compiler will see <code>2</code> instead of meaningful name. As result we can avoid this name at all and put numerical value right now. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467821463, "post_id": 38228049, "comment_id": 63879227, "body": "The C11  says <code>SEEK_CUR, SEEK_END, SEEK_SET</code> are distinct values.  It does not <i>specify</i> them as 0,1,2."}, {"owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467821718, "post_id": 38228049, "comment_id": 63879379, "body": "@chux, yes, they are distinct. Thats why they are three. Its an operational parameter, precisely function bound."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467821967, "post_id": 38228049, "comment_id": 63879494, "body": "This answers says &quot;There are three possible values for it 0,1 and 2&quot;.  My comment points out that is not supported by the C spec.  Although common, a compliant compiler could use other distinct values or a different order."}, {"owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467822346, "post_id": 38228049, "comment_id": 63879735, "body": "Exactly, that&#39;s why I am calling it function bound. Whoever defines this function (compiler/library vendor), the fate of these values hang in their hands. ;)"}], "tags": [], "owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "is_accepted": false, "score": -1, "last_activity_date": 1467821550, "last_edit_date": 1467821550, "creation_date": 1467819524, "answer_id": 38228049, "question_id": 38226713, "link": "https://stackoverflow.com/questions/38226713/fseekf-0-2-how-does-this-work-without-seek-cur-seek-set-or-seek-end/38228049#38228049", "title": "fseek(f,0,2); How does this work without SEEK_CUR / SEEK_SET or SEEK_END?", "body": "<p>fseek() takes three parameters.</p>\n\n<p>First one is the FILE * it will seek</p>\n\n<p>Second is the int Record size, the value, it is expected to hop in one jump. Notice, it can be a negative value as well.</p>\n\n<p>Third parameter is the offset value from where this hopping is to be done. There are three possible values for it 0,1 and 2.\n0 represents beginning of the file\n1 represents current location\nAnd, 2 represents the end of file.</p>\n\n<p>The SEEK_END, SEEK_CUR or,the SEEK_SET are merely the Macro Expansions with values of 2,1 and 0 respectively. So when a user uses these macro Expansions rather that using the real values underneath, the pre-processors replaces every such usage with its respective value and compilation goes on as usual.</p>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1499875005, "creation_date": 1499875005, "answer_id": 45062555, "question_id": 38226713, "link": "https://stackoverflow.com/questions/38226713/fseekf-0-2-how-does-this-work-without-seek-cur-seek-set-or-seek-end/45062555#45062555", "title": "fseek(f,0,2); How does this work without SEEK_CUR / SEEK_SET or SEEK_END?", "body": "<p>In <code>stdio.h</code>,</p>\n\n<pre><code>#ifndef SEEK_SET\n#define SEEK_SET    0   /* set file offset to offset */\n#endif\n#ifndef SEEK_CUR\n#define SEEK_CUR    1   /* set file offset to current plus offset */\n#endif\n#ifndef SEEK_END\n#define SEEK_END    2   /* set file offset to EOF plus offset */\n#endif\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5539389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1aae68778654a8c58b2af9f02f5e383?s=128&d=identicon&r=PG&f=1", "display_name": "Jeries Haddad", "link": "https://stackoverflow.com/users/5539389/jeries-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7471, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1499875005, "creation_date": 1467815666, "question_id": 38226713, "link": "https://stackoverflow.com/questions/38226713/fseekf-0-2-how-does-this-work-without-seek-cur-seek-set-or-seek-end", "title": "fseek(f,0,2); How does this work without SEEK_CUR / SEEK_SET or SEEK_END?", "body": "<p>I'm not being able to understand it, aren't we supposed to have SEEK_CUR / SEEK_SET or SEEK_END in the whence? Why does it have 2 and how does it work like this?</p>\n"}, {"tags": ["java", "c", "jar"], "comments": [{"owner": {"reputation": 4094, "user_id": 424830, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/34d846748637f6f486da3314edff0a26?s=128&d=identicon&r=PG", "display_name": "Shriram", "link": "https://stackoverflow.com/users/424830/shriram"}, "edited": false, "score": 1, "creation_date": 1467815510, "post_id": 38226605, "comment_id": 63875157, "body": "Executing a java application is not possible without a jre."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 1, "creation_date": 1467815571, "post_id": 38226605, "comment_id": 63875209, "body": "Does java.exe + bunch of dlls very differs from normal JRE?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1467815673, "post_id": 38226605, "comment_id": 63875276, "body": "JRE is a <i>runtime environment</i> as the name suggests. It is the environment the java program is running in. It can&#39;t run outside of it."}, {"owner": {"reputation": 2098, "user_id": 3656963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C3JMv.jpg?s=128&g=1", "display_name": "Revive", "link": "https://stackoverflow.com/users/3656963/revive"}, "edited": false, "score": 0, "creation_date": 1467815676, "post_id": 38226605, "comment_id": 63875278, "body": "You can grab a portable JRE here <a href=\"http://portableapps.com/apps/utilities/java_portable\" rel=\"nofollow noreferrer\">portableapps.com/apps/utilities/java_portable</a> and you could run this without an install."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1467815690, "post_id": 38226605, "comment_id": 63875290, "body": "And of course it won&#39;t work without standard java classes, which should be distributed too."}, {"owner": {"reputation": 896, "user_id": 6468937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/G4VPe.png?s=128&g=1", "display_name": "N.J.Dawson", "link": "https://stackoverflow.com/users/6468937/n-j-dawson"}, "edited": false, "score": 0, "creation_date": 1467816052, "post_id": 38226605, "comment_id": 63875550, "body": "Requiring a JRE be installed would be the more practical approach - could I ask for clarification as to why you don&#39;t want to require this? Is it for ease of use, or something else?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6538026"}, "edited": false, "score": 0, "creation_date": 1467816198, "post_id": 38226605, "comment_id": 63875655, "body": "@ N.J.Dawson, Just don&#39;t want to get the user mixed in these ..."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468651207, "post_id": 38226605, "comment_id": 64225308, "body": "You need to investigate Java Web Start."}], "answers": [{"tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1502365035, "last_edit_date": 1502365035, "creation_date": 1467815596, "answer_id": 38226688, "question_id": 38226605, "link": "https://stackoverflow.com/questions/38226605/steps-for-installing-jre-to-users-pc-manually/38226688#38226688", "title": "Steps for installing JRE to users&#39; pc manually", "body": "<p>Why do you think those other companies want you to pay money for their product?</p>\n\n<p>Hint: because it ain't that easy.</p>\n\n<p>The point is that not only need <strong>your</strong> JAR file. You need to make each and any class that your code will be using available to the JVM you are starting up.</p>\n\n<p>You know, exactly that other stuff that those commercial tools are <strong>backing</strong> into their EXE files; the stuff that you think makes their EXE files so big and slow. That is the stuff that you need to run your java classes ...</p>\n\n<p>The JRE alone comes with megabytes and megabytes of java classes, packaged up in various JARs. And any 3rd party library that you are using will be required too.</p>\n\n<p>So, of course, when you are able to find <strong>all</strong> classes that will be loaded when your code is executed, then you could manually package that into a single JAR. But as said: if that would be an easy undertaking, those other people wouldn't have much of a business case. And of course: as soon as reflection and <code>Class.forName()</code> kicks in, you are completely broken. Because you can't predict at all, which classes will be used at runtime then.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6538026"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502365035, "creation_date": 1467815387, "last_edit_date": 1468651066, "question_id": 38226605, "link": "https://stackoverflow.com/questions/38226605/steps-for-installing-jre-to-users-pc-manually", "title": "Steps for installing JRE to users&#39; pc manually", "body": "<p>I am currently working on a jar file and I am going to distribute it soon. I was looking forward to distributing it for user without him needing installing JRE to run my app. I am well aware of tools like <a href=\"http://www.jar2exe.com/\" rel=\"nofollow\">Jar2Exe</a> but those tools inject some additional content to the executable and I am not going to buy license for that! So I am working on a solution. And I have the idea, So I will create a C file with this content ( I am using C Language power in nativity! ) : </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nint main() {\n    system(\"java -jar test.jar\");\n    return 0;\n}\n</code></pre>\n\n<p>And I will put the jar file and the compiled file of the C file above and java.exe located in my JRE installation dir in a same directory and this should work but surely there are a bunch of dlls that <code>java.exe</code> depends on them! A list of those dependencies to put them all in a directory and make the idea work will be very helpful:)</p>\n\n<p><strong>Please Note</strong> : I don't want to create an executable from the JAR file, I only want the user need not <strong>INSTALL</strong> JRE.</p>\n\n<p><strong>EDIT</strong></p>\n\n<hr/>\n\n<p>I realized the above approach isn't practical, so I am going to install JRE behind the scenes ( my only goal is that the user doesn't find out whats going on in the installation process ) I am going to copy required files to <code>ProgramFiles/jre_version</code> but what in addition should I do? In the other words what does the JRE installer do under the hood?</p>\n"}, {"tags": ["c", "vector"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1467814948, "post_id": 38226369, "comment_id": 63874703, "body": "So you read the wrong material. Try a basic <code>C</code> language book instead. The section about structures."}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1467815128, "post_id": 38226369, "comment_id": 63874847, "body": "Yes, I believe you are mistaken about the terminology. Your code shows a struct, not a vector. Are you trying to create an object of that type, or create a vector of structs?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1467815184, "post_id": 38226369, "comment_id": 63874899, "body": "@rtmh op refers to a ds that describes a vector, not a C++ vector (;"}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1467815301, "post_id": 38226369, "comment_id": 63874997, "body": "@Ishay Peled, ahhh, haha! My mistake, I&#39;ve been buried in a lot of (c++) vectors myself lately, so definitely jumped to conclusions! :P"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6275794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d127323240da1e952c23ff9dc8d10e5?s=128&d=identicon&r=PG&f=1", "display_name": "bcpermafrost", "link": "https://stackoverflow.com/users/6275794/bcpermafrost"}, "edited": false, "score": 1, "creation_date": 1467815179, "post_id": 38226458, "comment_id": 63874891, "body": "Since the person is new, id explicitly format the numbers as floating point since the struct is 3 doubles."}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 1, "creation_date": 1467815385, "post_id": 38226458, "comment_id": 63875067, "body": "Shorter: <code>struct vector {double x, y, z;} v = {3.0f, 4.0f, 5.0f};</code>"}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1467815562, "post_id": 38226458, "comment_id": 63875201, "body": "@AndrejsCainikovs Wow! I&#39;ve never seen that. Does that have to do with a deafult constrcutor or how does that work? Is this related to C++11&#39;s initializer lists?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1467815725, "post_id": 38226458, "comment_id": 63875315, "body": "@AndrejsCainikovs of course you could! But judging by this question, op is kinda beginner in C and I don&#39;t want to confuse"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "reply_to_user": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 1, "creation_date": 1467815759, "post_id": 38226458, "comment_id": 63875335, "body": "@rtmh No, this is pure C. Also, since C99 you can use this syntax as well: <code>vector v2 = {.x = 3.0f, .z = 5.0f}; &#47;* y = 0.0f *&#47;</code>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1467816059, "post_id": 38226458, "comment_id": 63875555, "body": "@AndrejsCainikovs <code>f</code> suffix is for <code>float</code> not <code>double</code>."}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1467816102, "post_id": 38226458, "comment_id": 63875582, "body": "@MaximEgorushkin Yeah. Just noticed."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1467816312, "post_id": 38226458, "comment_id": 63875751, "body": "@AndrejsCainikovs thanks, fixed in answer as well. Easy to overlook (;"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1467816585, "post_id": 38226458, "comment_id": 63875948, "body": "@IshayPeled No, for printing doubles you use <code>%f</code>, since there is no format specifier for double. If you use scientific format <code>%e</code>, you will get this type of output: <code>1.500000E+00</code>."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": true, "score": 3, "last_activity_date": 1467816880, "last_edit_date": 1467816880, "creation_date": 1467815014, "answer_id": 38226458, "question_id": 38226369, "link": "https://stackoverflow.com/questions/38226369/using-custom-vectors-in-c/38226458#38226458", "title": "Using Custom Vectors in C", "body": "<p><code>typedef</code> is used extensively in C to refer to <code>struct</code> variables without specifying the <code>struct</code> prefix, for example if I had:</p>\n\n<pre><code>struct vector {\n    double x;\n    double y;\n    double z;\n};\n</code></pre>\n\n<p>than to initialize it I'd have to do:</p>\n\n<pre><code>struct vector vector1;\nvector1.x = 1.11;\nvector1.y = 1.22;\nvector1.z = 1.33;\n</code></pre>\n\n<p>But if I used a <code>typedef</code> in the declaration:</p>\n\n<pre><code>typedef struct vector {\n        double x;\n        double y;\n        double z;\n    } vector_type;\n</code></pre>\n\n<p>than I could simplify this initialization like so (note the struct prefix is not needed now):</p>\n\n<pre><code>vector_type vector1;\nvector1.x = 1.11;\nvector1.y = 1.22;\nvector1.z = 1.33;\n</code></pre>\n\n<p>Of course, I could still use the full <code>struct vector</code> initialization in this case as well</p>\n\n<p>So in your case:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct crt8 {\n    double x;\n    double y;\n    double z;\n} CART8;\n\nint main(int argc, char** argv)\n{\n    CART8 vector1;\n    vector1.x = 2.526;\n    vector1.y = 3.416;\n    vector1.z = 4.32;\n    printf(\"%f %f %f\\n\", vector1.x, vector1.y, vector1.z);\n}\n</code></pre>\n\n<p>Alternatively, you can always resort to the original struct definition:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct crt8 {\n    double x;\n    double y;\n    double z;\n} CART8;\n\nint main(int argc, char** argv)\n{\n\n    struct crt8 x;\n    x.x = 2.341;\n    x.y = 3.43;\n    x.z = 4.521;\n    printf(\"%f %f %f\\n\", x.x, x.y, x.z);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1467815634, "post_id": 38226576, "comment_id": 63875246, "body": "@KMulier No Problem, it&#39;s not like I don&#39;t mind the rep!"}], "tags": [], "owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "is_accepted": false, "score": 3, "last_activity_date": 1467815503, "last_edit_date": 1467815503, "creation_date": 1467815299, "answer_id": 38226576, "question_id": 38226369, "link": "https://stackoverflow.com/questions/38226369/using-custom-vectors-in-c/38226576#38226576", "title": "Using Custom Vectors in C", "body": "<p>You wrote:</p>\n\n<pre><code>typedef struct crt8 {\n    double x;\n    double y;\n    double z;\n} CART8;\n</code></pre>\n\n<p>This defined a new 'type'. The 'typename' is <code>struct crt8</code> or the alias you defined <code>CART8</code>. This is how you instantiate an object from that type in C:</p>\n\n<pre><code>    struct crt8 myVector;\n</code></pre>\n\n<p>or you can use the alias 'CART8' that you've defined:</p>\n\n<pre><code>    CART8 myVector;\n</code></pre>\n\n<p>Either way, this is how you populate the 'members' of your object:</p>\n\n<pre><code>    CART8 x; // Creation of object\n    x.x = 100;\n    x.y = 101;\n    x.z = 102;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1467816422, "last_edit_date": 1467816422, "creation_date": 1467815982, "answer_id": 38226821, "question_id": 38226369, "link": "https://stackoverflow.com/questions/38226369/using-custom-vectors-in-c/38226821#38226821", "title": "Using Custom Vectors in C", "body": "<p>Here is a demonstrative program that shows various ways how objects of the structure can be created, initialized, and used.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct crt8 {\n    double x;\n    double y;\n    double z; } CART8;\n\nint main( void ) \n{\n    CART8 vector1 = { 1.1, 2.2, 3.3 };\n\n    CART8 vector2 = { .x = 1.1, .y = 2.2, .z = 3.3 };\n\n    CART8 vector3;\n    vector3.x = 1.1;\n    vector3.y = 2.2;\n    vector3.z = 3.3;\n\n    CART8 vector4 = vector1;\n\n    CART8 vector5 = { vector1.x + vector2.z, vector1.y + vector2.y, vector1.z + vector2.x };\n\n    printf( \"vector5 = { %lf, %lf, %lf }\\n\", vector5.x, vector5.y, vector5.z );\n\n    printf( \"Magnitude = %lf\", sqrt( pow( vector1.x, 2 ) + pow( vector1.y, 2 ) + pow( vector1.z, 2 ) ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>vector5 = { 4.400000, 4.400000, 4.400000 }\nMagnitude = 4.115823\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5450966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f98093f7e043737a0d7e04029bb101?s=128&d=identicon&r=PG&f=1", "display_name": "user5450966", "link": "https://stackoverflow.com/users/5450966/user5450966"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 38226458, "answer_count": 3, "score": 1, "last_activity_date": 1467816880, "creation_date": 1467814799, "question_id": 38226369, "link": "https://stackoverflow.com/questions/38226369/using-custom-vectors-in-c", "title": "Using Custom Vectors in C", "body": "<p>I'm fairly new to C/C++, but I'm trying to debug some code. It uses a vector that someone had called CART8 and is structured as such:</p>\n\n<pre><code>typedef struct crt8 {\n    double x;\n    double y;\n    double z; } CART8;\n</code></pre>\n\n<p>Now my question is this. How do I create and populate an instance of an vector of type CART8 called vector1? I've read through a lot of material, and even found a site that indicate how you would create the vector...as indicated above, but no information on HOW to actually use it.</p>\n"}, {"tags": ["c", "recursion", "tree", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 1, "creation_date": 1467815149, "post_id": 38226493, "comment_id": 63874872, "body": "I got it now. Thank you 2501!"}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 1, "last_activity_date": 1467815084, "creation_date": 1467815084, "answer_id": 38226493, "question_id": 38226362, "link": "https://stackoverflow.com/questions/38226362/how-does-this-function-compute-the-number-of-nodes-in-binary-tree/38226493#38226493", "title": "How does this function compute the number of nodes in binary tree", "body": "<p>Take a look at the leaf node 7. </p>\n\n<p>When <code>func_1</code> is called with the value of the node 7, the if statement will branch into the else part, since the pointer to this node is valid. </p>\n\n<p>Then <code>func_1</code> will be called twice once for the left child and once for the right child. In both cases the functions return 0, since left and right child are NULL. The function will return 1:</p>\n\n<pre><code>return func_1(node-&gt;left) + 1 + func_1(node-&gt;right);\n</code></pre>\n\n<p>equivalent to:</p>\n\n<pre><code>return func_1(NULL) + 1 + func_1(NULL);\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>return 0 + 1 + 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1467815195, "creation_date": 1467815195, "answer_id": 38226541, "question_id": 38226362, "link": "https://stackoverflow.com/questions/38226362/how-does-this-function-compute-the-number-of-nodes-in-binary-tree/38226541#38226541", "title": "How does this function compute the number of nodes in binary tree", "body": "<p>Look at this statement</p>\n\n<pre><code>return func_1(node-&gt;left) + 1 + func_1(node-&gt;right);\n                          ^^^^^\n</code></pre>\n\n<p>if a node is not equal to NULL it counts itself plus the number of nodes in the left and right sub trees relative to this node. </p>\n\n<p>So you will get a result that is equal to the number of nodes that are not equal to NULL.</p>\n"}, {"comments": [{"owner": {"reputation": 242, "user_id": 3521385, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/unLde.jpg?s=128&g=1", "display_name": "Module", "link": "https://stackoverflow.com/users/3521385/module"}, "edited": false, "score": 1, "creation_date": 1467815429, "post_id": 38226592, "comment_id": 63875104, "body": "This was going to be my exact explanation! Clear and to the point."}, {"owner": {"reputation": 13906, "user_id": 1187220, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AwroB.jpg?s=128&g=1", "display_name": "Michel Keijzers", "link": "https://stackoverflow.com/users/1187220/michel-keijzers"}, "edited": false, "score": 0, "creation_date": 1467816118, "post_id": 38226592, "comment_id": 63875594, "body": "For your clarity I added some rationale about recursion."}], "tags": [], "owner": {"reputation": 13906, "user_id": 1187220, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AwroB.jpg?s=128&g=1", "display_name": "Michel Keijzers", "link": "https://stackoverflow.com/users/1187220/michel-keijzers"}, "is_accepted": true, "score": 3, "last_activity_date": 1467816090, "last_edit_date": 1467816090, "creation_date": 1467815344, "answer_id": 38226592, "question_id": 38226362, "link": "https://stackoverflow.com/questions/38226362/how-does-this-function-compute-the-number-of-nodes-in-binary-tree/38226592#38226592", "title": "How does this function compute the number of nodes in binary tree", "body": "<p>Semantically it takes the number of left nodes + 1 (the current node) + the number of right nodes.</p>\n\n<p>with func_1(x) I mean calling the function on that specific node.</p>\n\n<p>So the complete calculation is</p>\n\n<ul>\n<li>func_1(8) + 1 + func_1(14) </li>\n<li>(func_1(7) + 1 + func_1(9)) + 1 + func_1(14)</li>\n<li>(1 + 1 + 1) + 1 + (0 + 1 + func_1(17)</li>\n<li>3 + 1 + (0 + 1 + (0 + 1 + func_1(18))</li>\n<li>3 + 1 + (1 + (1 + (0 + 1 + 0)</li>\n<li>results in 7</li>\n</ul>\n\n<p>This principle is used very often in recursion:</p>\n\n<ul>\n<li>first do the calculation for the 'current' item (the current node), in this case the number of nodes for the 'node itself' is 1.</li>\n<li>than add the calculation of the other items in a recursive way, in this case the number of nodes left of the current node, and the number of nodes right of the current node. For ordering reasons in this case the +1 for the current node (number of nodes) is put in the middle.</li>\n</ul>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 38226592, "answer_count": 3, "score": 1, "last_activity_date": 1467816090, "creation_date": 1467814773, "question_id": 38226362, "link": "https://stackoverflow.com/questions/38226362/how-does-this-function-compute-the-number-of-nodes-in-binary-tree", "title": "How does this function compute the number of nodes in binary tree", "body": "<p>I've a function that I'm trying to analyze which its output is 7:</p>\n\n<p><strong>Given this block of code:</strong></p>\n\n<pre><code>int func_1(struct node* node)\n{\n    if (node == NULL)\n        return 0;\n    else\n        return func_1(node-&gt;left) + 1 + func_1(node-&gt;right);\n}\n</code></pre>\n\n<p><strong>And this Binary Search Tree:</strong>\n<a href=\"https://i.stack.imgur.com/xh34e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xh34e.png\" alt=\"enter image description here\"></a></p>\n\n<p>The return value is 7.</p>\n\n<p>I know recursion and it's kinda simple here, I tried to follow up and I can not understand how it returned 7. I calculated that it just goes left, left, then one time right, and that's it. which will return 3. And even if it goes 3 times right, after the root, it will still return 6 and not 7.</p>\n\n<p>Can you guys help me out please?</p>\n"}, {"tags": ["c", "multithreading", "signals"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1467813741, "post_id": 38225884, "comment_id": 63873752, "body": "The <code>SIGUSR</code> signal is likely delivered before the child thread has blocked all signals and reached <code>sigwait()</code>."}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1467814211, "post_id": 38225884, "comment_id": 63874079, "body": "@AndrewHenle Thanks for your reply. But the main thread will send the signal in the while(1) loop forever, even if the first one signal is lost, the rest are still delivered, right?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1467814441, "post_id": 38225884, "comment_id": 63874273, "body": "@HuangJie If this is indeed what happened, your program has already crashed after the first signal was sent"}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1467814605, "post_id": 38225884, "comment_id": 63874397, "body": "@IshayPeled Thanks for your reply. Yes, I think so. I add some print in the while(1) loop. However, the program terminates after the main function executes pthread_kill for the first time."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1467814781, "post_id": 38225884, "comment_id": 63874558, "body": "That explains it, what happens is that you send the signal once, the other thread has not set block yet and that causes your application to crash"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1467814846, "post_id": 38225884, "comment_id": 63874627, "body": "I personally avoid using signals for communication, there are much nicer mechanisms depending on what you want to do"}], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 0, "last_activity_date": 1467814583, "creation_date": 1467814583, "answer_id": 38226292, "question_id": 38225884, "link": "https://stackoverflow.com/questions/38225884/pthread-signal-does-not-work/38226292#38226292", "title": "pthread signal does not work", "body": "<p>Currently nothing is preventing the main function from calling <code>pthread_kill</code> before the created thread sets up its signal handling. Make sure the calls to <code>sigfillset</code>, etc... complete before the main function calls: <code>int err = sigwait(&amp;sigmask, &amp;sig);</code>. </p>\n\n<p>Since you're already using pthreads, use a mutex and a shared flag variable:</p>\n\n<p>The easiest solution is to move the signal handling, from the function <code>thread</code>  into <code>main</code>, before the call to pthread_create.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1467818320, "post_id": 38226837, "comment_id": 63877121, "body": "Related: <a href=\"http://stackoverflow.com/questions/6326290/about-the-ambiguous-description-of-sigwait\" title=\"about the ambiguous description of sigwait\">stackoverflow.com/questions/6326290/&hellip;</a>"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1467816035, "creation_date": 1467816035, "answer_id": 38226837, "question_id": 38225884, "link": "https://stackoverflow.com/questions/38225884/pthread-signal-does-not-work/38226837#38226837", "title": "pthread signal does not work", "body": "<p>You're doing it wrong.  You explicitly arrange for <code>SIGUSR1</code> to be unblocked in the thread, but that is precisely the wrong thing to do.  Some documentation does not make it clear (e.g. the Linux manpage for <code>sigwait()</code>), but <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigwait.html\" rel=\"nofollow\">POSIX says</a>:</p>\n\n<blockquote>\n  <p>The signals defined by <code>set</code> <strong>shall have been blocked</strong> at the time of the call to <code>sigwait()</code>; otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p>(Emphasis added.)</p>\n\n<p>Do not overlook @AndrewHenle's and @2501's comments about a race condition, however.  You have that too.  I agree with @2501 that the easiest way to solve that is to set up the signal mask in the main thread, so that the other inherits it.  Do not fail to restore the main thread's signal mask after launching the other thread, however, else you may find your program hard to kill.</p>\n"}], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 38226837, "answer_count": 2, "score": 1, "last_activity_date": 1467820372, "creation_date": 1467813550, "last_edit_date": 1467820372, "question_id": 38225884, "link": "https://stackoverflow.com/questions/38225884/pthread-signal-does-not-work", "title": "pthread signal does not work", "body": "<p>In my program, I expected thread A to periodically send <code>SIGUSR1</code> to  thread B. In thread B, it will block at <code>sigwait</code>. As for what to do when <code>SIGUSR1</code> is received, I am not defining it yet. Below is my code. However, the program terminates at once, and the output is <code>User defined signal 1</code>.</p>\n\n<pre><code>void usr1_handler();\n\nint main(int argc, char const *argv[])\n{\n   pthread_t tid;\n   pthread_attr_t attr_obj;\n   void *thread(void *);\n\n   pthread_attr_init(&amp;attr_obj);\n   pthread_attr_setdetachstate(&amp;attr_obj, PTHREAD_CREATE_DETACHED);\n   pthread_create(&amp;tid, &amp;attr_obj, thread, (void *)NULL);\n\n   while(1)\n   {\n    int ret = pthread_kill(tid, SIGUSR1);\n    sleep(5);\n   }\n    return 0;\n}\n\nvoid *thread(void *dummy)\n{\n    int sig;\n   sigset_t sigmask;                 \n   struct sigaction action;\n\n   /* set up signal mask to block all in main thread */\n   sigfillset(&amp;sigmask);\n   pthread_sigmask(SIG_BLOCK, &amp;sigmask, (sigset_t *)0);\n\n   for (;;)\n   {\n    int err = sigwait(&amp;sigmask, &amp;sig);\n      /* define what to do with sig here */\n    printf(\"sig is %d\\n\", sig);\n   }\n\n   pthread_exit((void *)NULL);\n}\n</code></pre>\n"}, {"tags": ["sql", "c", "sqlite"], "comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1467813557, "post_id": 38225689, "comment_id": 63873618, "body": "As far as I know this is not supported in the C api. You have two options: either you modify the C API to include support for what you&#39;re asking or wrap the select/update/insert/delete commands with your own implementation that keeps track of them. I don&#39;t think it&#39;s that ugly (;"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1467825094, "post_id": 38225689, "comment_id": 63881378, "body": "What do you need this information for?"}, {"owner": {"reputation": 686, "user_id": 494512, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5e73fefa7e309ae1cf32ef494c56b756?s=128&d=identicon&r=PG", "display_name": "David Saltares", "link": "https://stackoverflow.com/users/494512/david-saltares"}, "edited": false, "score": 0, "creation_date": 1467886491, "post_id": 38225689, "comment_id": 63906727, "body": "I&#39;m using sqlite in memory dbs to provide testing mocks for classes that talk to actual disk dbs. I have a wrapper around sqlite3 that implements my DB interface. This interface provides a common execute method but then allows to query the num of inserted/updated/deleted columns separately, it can tell the difference."}], "owner": {"reputation": 686, "user_id": 494512, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5e73fefa7e309ae1cf32ef494c56b756?s=128&d=identicon&r=PG", "display_name": "David Saltares", "link": "https://stackoverflow.com/users/494512/david-saltares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467812916, "creation_date": 1467812916, "question_id": 38225689, "link": "https://stackoverflow.com/questions/38225689/get-last-type-of-executed-query-in-sqlite3", "title": "Get last type of executed query in sqlite3", "body": "<p>I'm using the sqlite3 C API and would like to know if it's possible to know the type of the last executed statement (select/update/insert/delete).</p>\n\n<p>The ugly alternative is to keep track of the last statement and process it myself to figure out which kind it is.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "pointers", "char"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1467812480, "post_id": 38225500, "comment_id": 63872836, "body": "<code>*a=&quot;(a+b)&quot;</code> - you can&#39;t do that (the third line from the bottom, the declaration is fine). Assigning <code>char*</code> to <code>char</code>. Also <code>a</code> points to a read-only memory."}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "edited": false, "score": 1, "creation_date": 1467812650, "post_id": 38225500, "comment_id": 63872964, "body": "You need to compile your program with warnings enabled. If you have a question about a specific warning, please ask here."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1467812752, "post_id": 38225500, "comment_id": 63873038, "body": "The code also has possible undefined behaviour because you increment <i>both</i> <code>a</code> and <code>i</code>, it is possible to skip over the 0 byte depending on the length of the string."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1467814174, "post_id": 38225500, "comment_id": 63874059, "body": "This question is too broad, since there&#39;s too much wrong in this code to give a short answer. Incorrect use of string literals, not understanding pointers, not understanding strings and string copy/assignment Also wrong printf specifier for printing a pointer, and the bug pointed out by Antti above. You are essentially asking for the whole chapters about arrays, pointers and strings in your beginner-level C programming book."}], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 6556191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MyJo1Q3LdzM/AAAAAAAAAAI/AAAAAAAAAaU/X7r8S8-m0OU/photo.jpg?sz=128", "display_name": "Dharaneesh Vrd", "link": "https://stackoverflow.com/users/6556191/dharaneesh-vrd"}, "edited": false, "score": 0, "creation_date": 1467893414, "post_id": 38225957, "comment_id": 63911278, "body": "Thank you!! i am clear now"}], "tags": [], "owner": {"reputation": 91, "user_id": 6275794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d127323240da1e952c23ff9dc8d10e5?s=128&d=identicon&r=PG&f=1", "display_name": "bcpermafrost", "link": "https://stackoverflow.com/users/6275794/bcpermafrost"}, "is_accepted": true, "score": 1, "last_activity_date": 1467813708, "creation_date": 1467813708, "answer_id": 38225957, "question_id": 38225500, "link": "https://stackoverflow.com/questions/38225500/char-pointer-value-reassignment/38225957#38225957", "title": "char pointer value reassignment", "body": "<p>The reason your third line is failing is because youre trying to de-refrence and reassign a value to a \"string\" value on the stack. ( which is very very bad, please never do this if it ever lets you )</p>\n\n<p>If you do want it to work, the compiler has to create a new string value and reassign the pointer so you would have to change the code to this.</p>\n\n<pre><code>a = \"(a+b)\";\n</code></pre>\n\n<p>This will create a new value on the stack and reassign the pointer to the beginning of that string.</p>\n\n<p>However if you are going to use strings like that. PLEASE use const char *. Its ultimately safer and saves you a lot of headaches.</p>\n"}], "owner": {"reputation": 122, "user_id": 6556191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MyJo1Q3LdzM/AAAAAAAAAAI/AAAAAAAAAaU/X7r8S8-m0OU/photo.jpg?sz=128", "display_name": "Dharaneesh Vrd", "link": "https://stackoverflow.com/users/6556191/dharaneesh-vrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "closed_date": 1467873787, "accepted_answer_id": 38225957, "answer_count": 1, "score": -5, "last_activity_date": 1467813708, "creation_date": 1467812422, "question_id": 38225500, "link": "https://stackoverflow.com/questions/38225500/char-pointer-value-reassignment", "closed_reason": "Needs details or clarity", "title": "char pointer value reassignment", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main()\n{\n    int i=0;\n    char *b,*a=\"a(a+b))\";\n    b=a;\n    printf(\"%s\",b);\n    printf(\"%d\",a);\n    while(a[i]!='\\0')\n    {\n        a++;\n        i++;\n    }\n    *a=\"(a+b)\";\n    printf(\"%s\",a);\n}\n</code></pre>\n\n<p>initialy  i am assigning a value to that char pointer\nafter moving it to the end using null comparision\ncan i again assign a value to that char pointer?\nCan i do like this? \nwhat is wrong here? can anyone please explain??</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 2, "creation_date": 1467811099, "post_id": 38225033, "comment_id": 63871930, "body": "You quote the answer: <i>A declaration of a parameter as \u2018\u2018array of type\u2019\u2019 shall be adjusted to \u2018\u2018qualified pointer to type\u2019\u2019</i> The rule talking about <code>static</code> doesn&#39;t change this."}, {"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467811293, "post_id": 38225033, "comment_id": 63872080, "body": "@2501 yup, I just had the feeling that if you specify the static size it will behave differently (ie: copy the array to the stack), due to: &quot;shall provide access to the first element of an array with at least as many elements as specified by the size expression&quot; although indeed it does not really specify that."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467811561, "post_id": 38225033, "comment_id": 63872256, "body": "Arrays can&#39;t be copied and will always decay to a pointer."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467812152, "post_id": 38225033, "comment_id": 63872592, "body": "The question was therefore answered, right?"}, {"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1467881442, "post_id": 38225033, "comment_id": 63903362, "body": "@2501 yes, it was!"}], "owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1467811045, "answer_count": 0, "score": 1, "last_activity_date": 1467810968, "creation_date": 1467810968, "last_edit_date": 1592644375, "question_id": 38225033, "link": "https://stackoverflow.com/questions/38225033/about-sizeof-and-its-variable-length-array-parameter-in-a-function", "closed_reason": "Duplicate", "title": "About sizeof and its variable length array parameter in a function", "body": "<p>Let's consider the following code:</p>\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct B\n{\n    int a;\n};\n\nstruct B* func(int size, struct B a[static size])\n{\n    printf(&quot;sizeof a=%lu\\n&quot;, sizeof a);\n    return malloc(sizeof a);\n}\n\nint main()\n{\n    struct B a[12];\n    struct B* c = func(12, a);\n\n    int s = 12;\n    struct B x[s];\n    printf(&quot;sizeof x=%lu\\n&quot;, sizeof x);\n\n    free(c);\n}\n</code></pre>\n<p>With the output:</p>\n<pre><code>sizeof a=8\nsizeof x=48\n</code></pre>\n<p>Now, if I'm aware, the following from the C99 standard (<a href=\"http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf</a>) is still valid:</p>\n<blockquote>\n<p>6.5.3.4/2</p>\n<p>The sizeof operator yields the size (in bytes) of its operand, which may be an expression or the parenthesized name of a type. The size is determined from the type of the operand. The result is an integer. If the type of the operand is a variable length array type, the operand is evaluated; otherwise, the operand is not evaluated and the result is an integer constant.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>6.7.5.3 Function declarators (including prototypes)</p>\n<p>7 A declaration of a parameter as \u2018\u2018array of type\u2019\u2019 shall be adjusted to \u2018\u2018qualified pointer to type\u2019\u2019, where the type qualifiers (if any) are those specified within the [ and ] of the array type derivation. If the keyword static also appears within the [ and ] of the array type derivation, then for each call to the function, the value of the corresponding actual argument shall provide access to the first element of an array with at least as many elements as specified by the size expression.</p>\n</blockquote>\n<p>In case I did <strong>not</strong> misunderstand something in my code or in the two standard extracts, the <code>a</code> parameter of <code>func</code> is a variable sized array, of length 12, holding <code>B</code> structures, each having and <code>int</code> in them (on my platform 4 bytes) so I would have expected that <code>sizeof a</code> would be 12*4,\nhowever it seems, that regardless of the static size specifier, the compiler treats it as a pointer (<a href=\"https://stackoverflow.com/questions/5573310/difference-between-passing-array-and-array-pointer-into-function-in-c\">Difference between passing array and array pointer into function in C</a>) .</p>\n<p>So now comes the question:</p>\n<p>Did I misunderstood the standard and regardless the static size specifier the array is still passed in as a pointer?</p>\n"}, {"tags": ["c", "debugging", "gdb", "output", "codeblocks"], "comments": [{"owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "edited": false, "score": 0, "creation_date": 1467811019, "post_id": 38225030, "comment_id": 63871866, "body": "The project is a console application"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1467812282, "post_id": 38225030, "comment_id": 63872690, "body": "This warning is harmless and normal. If you are not seeing something that you expect to see you will need to explain much better."}, {"owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1467812602, "post_id": 38225030, "comment_id": 63872922, "body": "this happens for the default program that only print &#39;Hello world&#39; and for every code that has an output inside; if I only compile and run it the output appears in the proper way... what kind of info would be usefull? thanks in advance"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1467814709, "post_id": 38225030, "comment_id": 63874492, "body": "Have you set any breakpoints in the program? If not then console will close when the debugger exits, i.e. almost immediately"}, {"owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1467815881, "post_id": 38225030, "comment_id": 63875414, "body": "I set it, and the console remains opened, but there is no output on it"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1467816241, "post_id": 38225030, "comment_id": 63875692, "body": "Sorrry, can&#39;t help then. Works fine for me."}, {"owner": {"reputation": 101, "user_id": 1236798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa628ca2c8eb8580c7af30a55215b81?s=128&d=identicon&r=PG", "display_name": "Frank Schrijver", "link": "https://stackoverflow.com/users/1236798/frank-schrijver"}, "edited": false, "score": 0, "creation_date": 1476007056, "post_id": 38225030, "comment_id": 67165148, "body": "im having the same problem when i switch to other terminals. are you using xterm as your program to launch console programs? (Settings-&gt;Environment). xterm works for me, other gnome-terminal(used to work) or konsole dont work."}], "owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478611007, "creation_date": 1467810950, "question_id": 38225030, "link": "https://stackoverflow.com/questions/38225030/codeblocks-debug-output-missing", "title": "codeblocks debug output missing", "body": "<p>I'm using ubuntu. When I compile a c file it works fine, but when I debug it show <code>warning gdb failed to set controlling terminal operation not permitted</code> and the output of the debug doesn't appear.\nHow can I fix this? </p>\n"}, {"tags": ["c", "labwindows", "24-bit"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1467811316, "post_id": 38224801, "comment_id": 63872091, "body": "Are you sure the program that came with the hardware computes correct negative results?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2460, "user_id": 3919009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836c238f05fe7faac08b593d2bace718?s=128&d=identicon&r=PG", "display_name": "Gustavo Morales", "link": "https://stackoverflow.com/users/3919009/gustavo-morales"}, "edited": false, "score": 1, "creation_date": 1467811473, "post_id": 38224801, "comment_id": 63872190, "body": "@MoralesBatovski, the question is not &quot;why isn&#39;t this code working?&quot;, it is &quot;what is this black box program doing?&quot;."}, {"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "edited": false, "score": 3, "creation_date": 1467811474, "post_id": 38224801, "comment_id": 63872194, "body": "the &quot;know values&quot; look very odd, where did you get them from? i doubt it&#39;s a conversion problem, sometimes they&#39;re less than 2-complent, sometimes higher"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1467812632, "post_id": 38224801, "comment_id": 63872951, "body": "The correspondences you give are not jointly consistent with any single integer format in which the sign bit and each value bit has a consistent place value.  I am therefore inclined to guess that the program performing the conversions is losing precision for some reason."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467857435, "post_id": 38224801, "comment_id": 63894618, "body": "what mode is the code setting the ubox to?  Is the communication protocol set to the: NEMA. UBX, time pulse, just what?  What baud rate is your software set to use?     You really need to post your code, so we can have any realistic chance to answer your question."}, {"owner": {"reputation": 21, "user_id": 6555639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86a556f8a5cb82b2dba39b0e2b5da07?s=128&d=identicon&r=PG&f=1", "display_name": "prohi the magnificent", "link": "https://stackoverflow.com/users/6555639/prohi-the-magnificent"}, "edited": false, "score": 0, "creation_date": 1467879716, "post_id": 38224801, "comment_id": 63902371, "body": "Well my program is 3800 lines, so I don&#39;t want to post it. I&#39;m not sure if the other program is giving the correct results, and yeah, I noticed that it is not consistent with any integer format as I have been trying to understand it for 2 days now."}, {"owner": {"reputation": 21, "user_id": 6555639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86a556f8a5cb82b2dba39b0e2b5da07?s=128&d=identicon&r=PG&f=1", "display_name": "prohi the magnificent", "link": "https://stackoverflow.com/users/6555639/prohi-the-magnificent"}, "edited": false, "score": 0, "creation_date": 1467880239, "post_id": 38224801, "comment_id": 63902660, "body": "It is set to UBX protocol, and I&#39;m polling ESF messages to get the gyro and accelero data, but it gives me the data in bitfield format for some reason I don&#39;t completely understand."}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 4, "creation_date": 1467812881, "post_id": 38225070, "comment_id": 63873118, "body": "But how does this answer OPs question?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467812929, "post_id": 38225070, "comment_id": 63873151, "body": "@2501: Actually CHAR_BIT &gt;= 8, because of the post-shift masks applied. Maybe let the function return a int32_t as well."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1467812985, "post_id": 38225070, "comment_id": 63873200, "body": "Division by 256 is well-defined, but the cast to <code>int32_t</code> has implementation-defined behavior if the value being converted is not representable as an <code>int32_t</code>.  You are relying on a particular choice of that implementation-defined behavior."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467813023, "post_id": 38225070, "comment_id": 63873229, "body": "@datenwolf Hmm, I think you&#39;re right."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1467813181, "post_id": 38225070, "comment_id": 63873330, "body": "@JohnBollinger: Yes, there&#39;s always some implementation defined behaviour involved if you want to avoid a conditional <code>if( (unsigned)x &gt; 0x7fffff)</code> and the whole thing relies completely on the machine to be 2s complement and that being passed through by the compiler."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1467813205, "post_id": 38225070, "comment_id": 63873355, "body": "Also the data being converted by this program are not the data the OP presents."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1467813291, "post_id": 38225070, "comment_id": 63873422, "body": "@JohnBollinger: Yes, OPs initial &quot;known&quot; values don&#39;t match up with 2s complement in the first place. Hence the whole first section converting the decimal representation of the assumed values to cross check."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1467813319, "post_id": 38225070, "comment_id": 63873440, "body": "if you are ok with implementation defined, then why not left shift 8 then right shift 8?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1467813815, "post_id": 38225070, "comment_id": 63873808, "body": "@datenwolf, the OP already acknowledges that the known values don&#39;t match up with 2s complement.  That seems to be the whole point of the question."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1467812954, "last_edit_date": 1467812954, "creation_date": 1467811082, "answer_id": 38225070, "question_id": 38224801, "link": "https://stackoverflow.com/questions/38224801/24-bit-signed-data-type/38225070#38225070", "title": "24 bit signed data type", "body": "<p>First things first the \"known\" values you have there are not what you think they are:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic void p24(int x)\n{\n    printf(\"%8d = 0x%06X\\n\", x, (0x00ffffff &amp; (unsigned)x));\n}\n\nint main(int argc, char *argv[])\n{\n    p24(-57);\n    p24(-214528);\n    p24(-54215);\n    p24(-1462);\n    return 0;\n}\n</code></pre>\n\n<p>Compiling and running on a 2s complement machine prints</p>\n\n<pre><code>     -57 = 0xFFFFC7\n -214528 = 0xFCBA00\n  -54215 = 0xFF2C39\n   -1462 = 0xFFFA4A\n</code></pre>\n\n<p>When converting to 2s complement you'll have of course to pad to the full length of the target datatype you're working with, so that the sign is properly carried over. Then you divide the signed data type down to the designed number of bits.</p>\n\n<p>Ex:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n/* 24 bits big endian */\nstatic char const m57[]     = {0xFF, 0xFF, 0xC7};\nstatic char const m214528[] = {0xFC, 0xBA, 0x00};\nstatic char const m54215[]  = {0xFF, 0x2C, 0x39};\nstatic char const m1462[]   = {0xFF, 0xFA, 0x4A};\n\nstatic\nint32_t i_from_24b(char const *b)\n{\n    return (int32_t)(\n        (((uint32_t)b[0] &lt;&lt; 24) &amp; 0xFF000000)\n      | (((uint32_t)b[1] &lt;&lt; 16) &amp; 0x00FF0000)\n      | (((uint32_t)b[2] &lt;&lt;  8) &amp; 0x0000FF00)\n    ) / 256;\n}\n\nint main(int argc, char *argv[])\n{\n    printf(\"%d\\n\", i_from_24b(m57) );\n    printf(\"%d\\n\", i_from_24b(m214528) );\n    printf(\"%d\\n\", i_from_24b(m54215) );\n    printf(\"%d\\n\", i_from_24b(m1462) );\n    return 0;\n}\n</code></pre>\n\n<p>Will print</p>\n\n<pre><code>-57\n-214528\n-54215\n-1462\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6555639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86a556f8a5cb82b2dba39b0e2b5da07?s=128&d=identicon&r=PG&f=1", "display_name": "prohi the magnificent", "link": "https://stackoverflow.com/users/6555639/prohi-the-magnificent"}, "edited": false, "score": 0, "creation_date": 1467880869, "post_id": 38226182, "comment_id": 63903015, "body": "Exactly this! All these years spent learning calculus and stuff, and I still didn&#39;t think of range of precision!"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1467814289, "last_edit_date": 1495540739, "creation_date": 1467814289, "answer_id": 38226182, "question_id": 38224801, "link": "https://stackoverflow.com/questions/38224801/24-bit-signed-data-type/38226182#38226182", "title": "24 bit signed data type", "body": "<p>OP's information is inconsistent and likely <a href=\"https://stackoverflow.com/questions/38224801/24-bit-signed-data-type#comment63872951_38224801\">@John Bollinger</a> comment applies: \" ... program performing the conversions is losing precision ...\"</p>\n\n<p>OP needs to review and post more information/code.</p>\n\n<pre><code>OP's        OP's    2's comp.   Diff\nHex         Dec     \n0xFFFFC8    -57     -56        -1\n0xFCB9FE    -214528 -214530     2\n0xFF2C3B    -54215  -54213     -2\n0xFFFA48    -1462   -1464       2\n</code></pre>\n\n<p>Due to complexity of this comment, posted as an answer</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6555639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86a556f8a5cb82b2dba39b0e2b5da07?s=128&d=identicon&r=PG&f=1", "display_name": "prohi the magnificent", "link": "https://stackoverflow.com/users/6555639/prohi-the-magnificent"}, "is_accepted": false, "score": 0, "last_activity_date": 1467880721, "creation_date": 1467880721, "answer_id": 38240977, "question_id": 38224801, "link": "https://stackoverflow.com/questions/38224801/24-bit-signed-data-type/38240977#38240977", "title": "24 bit signed data type", "body": "<p>Thanks everyone for trying to help, but I just realised that I'm retarded and even more retarded! The program I got the \"known values\" from shows the scaled values of the measured data and it seems that +-1 +-2 deviation is in the range of the same 0.001 precision shown value after the conversion, so it indeed uses 2s complement. </p>\n\n<p>Sorry for your lost time everyone! (SO is awesome tho)</p>\n"}], "owner": {"reputation": 21, "user_id": 6555639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86a556f8a5cb82b2dba39b0e2b5da07?s=128&d=identicon&r=PG&f=1", "display_name": "prohi the magnificent", "link": "https://stackoverflow.com/users/6555639/prohi-the-magnificent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 0, "closed_date": 1467880955, "answer_count": 3, "score": 0, "last_activity_date": 1467880721, "creation_date": 1467810362, "question_id": 38224801, "link": "https://stackoverflow.com/questions/38224801/24-bit-signed-data-type", "closed_reason": "Not suitable for this site", "title": "24 bit signed data type", "body": "<p>I am recieving data from a ublox GPS module in 24 bit long bitfields (3 bytes of a 4 byte message), and I need to convert these 24 bit data fields to signed decimal values, but I can't find the description of how to do this in the specification. Also I know certain values from another program that came with the module. </p>\n\n<p>For positive values, it seems that it just simply converts the 24 bit binary number to dec and that's it, e.g. <code>0x000C19 = 3097</code> and <code>0x000BD0 = 3024</code> , but for negative numbers I'm in trouble. 2's complement doesn't seem to work. Here are some known values: <code>0xFFFFC8 = -57</code>, <code>0xFCB9FE = -214528</code>, <code>0xFF2C3B = -54215</code> and <code>0xFFFA48 = -1462</code>. Using 2's complement, the conversion is a few numbers off every time ( -56,  -214530, -54213, -1464, respectively). (Hex numbers are used to avoid having to write 24 digits every time.) </p>\n\n<p>Thanks for your help in advance! </p>\n"}, {"tags": ["c", "linux", "process", "pipe", "fork"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1467810143, "post_id": 38224325, "comment_id": 63871259, "body": "You can&#39;t. But you could read the data from the pipe and write it to a regular file, which would allow you to seek.  Or you could read the data and write it into two different pipes.  A good exercise might be to write the odd numbers into a pipe that you will read in the same thread...you will wind up blocking yourself when you have too much data, and it&#39;s a good exercise to understand that issue and figure out a resolution."}, {"owner": {"reputation": 85, "user_id": 4516787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1541147449/picture?type=large", "display_name": "Giulio Paoli", "link": "https://stackoverflow.com/users/4516787/giulio-paoli"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1467810552, "post_id": 38224325, "comment_id": 63871536, "body": "That&#39;s quite upsetting. I&#39;m studying for an exam and it is explicitly written to use the same pipe and not other things like files etc. I think it could be an assignment error. Thank you by the way for your fast answer."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1467813291, "post_id": 38224325, "comment_id": 63873421, "body": "Perhaps the intent of the exercise is to have you store the odd numbers in memory, and  dynamically grow that memory."}, {"owner": {"reputation": 85, "user_id": 4516787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1541147449/picture?type=large", "display_name": "Giulio Paoli", "link": "https://stackoverflow.com/users/4516787/giulio-paoli"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1467886773, "post_id": 38224325, "comment_id": 63906895, "body": "The exercise should be all about pipes.... Well, never mind, I will try to figure out with my professor what should I do with this assignment. Thank  you, again."}], "answers": [{"comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1467898925, "post_id": 38230087, "comment_id": 63915246, "body": "Duping the underlying file descriptors is a terrible idea!  Without proper flushing, you&#39;re going to end up with messages going to the wrong place."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1468456556, "post_id": 38230087, "comment_id": 64139803, "body": "Your use of <code>dup()</code> instead of <code>dup2()</code> to specify the number of the newly-created fd assumes the process is single-threaded (or else I think an <code>open</code> in another thread could take fd 1, besides the fact that another thread might print to stdout while you&#39;re doing this), and that <code>stdin</code> isn&#39;t closed.  (<code>.&#47;a.out &lt;&amp;-</code> to run a program with its stdin closed)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1468456714, "post_id": 38230087, "comment_id": 64139843, "body": "<code>dup2</code> also closes the old fd1 for you.  So in summary, <code>dup2(2,1)</code> would be much better, but still an ugly hack that you shouldn&#39;t use."}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 1, "last_activity_date": 1467825994, "creation_date": 1467825994, "answer_id": 38230087, "question_id": 38224325, "link": "https://stackoverflow.com/questions/38224325/reading-in-two-steps-from-the-same-pipe/38230087#38230087", "title": "Reading in two steps from the same pipe", "body": "<p>No seeking on a pipe.  End of story.</p>\n\n<p>Please do not deliver error messages to standard output by using printf().  If using stdio.h, use fprintf and direct them to stderr.  Otherwise, temporarily switch out standard output for standard error, printf(), and restore:</p>\n\n<blockquote>\n  <p>&nbsp;&nbsp;&nbsp;&nbsp;int   save_stdout;<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;save_stdout = dup( 1 );<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;close( 1 );<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;dup( 2 );</p>\n  \n  <p>&nbsp;&nbsp;&nbsp;&nbsp;printf( . . . );   </p>\n  \n  <p>&nbsp;&nbsp;&nbsp;&nbsp;close( 1 );<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;dup(\n  save_stdout );</p>\n</blockquote>\n"}], "owner": {"reputation": 85, "user_id": 4516787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1541147449/picture?type=large", "display_name": "Giulio Paoli", "link": "https://stackoverflow.com/users/4516787/giulio-paoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467825994, "creation_date": 1467808993, "question_id": 38224325, "link": "https://stackoverflow.com/questions/38224325/reading-in-two-steps-from-the-same-pipe", "title": "Reading in two steps from the same pipe", "body": "<p>So, basically I have a piece of code where a parent process prints numbers     to the pipe: </p>\n\n<pre><code>    for(i=0;i&lt;n;i++)\n            {\n                j=i+1;\n                nwrite=write(pa[1],&amp;j,sizeof(j));\n                if (nwrite==-1)\n                        {\n                    printf(\"\\nWrite error,pipe closed\\n\");\n                    exit(-1);\n                        }\n                if (nwrite==0)\n                        {\n                    printf(\"\\nWrote 0!\\n\");\n                    break;\n                        }\n            }\n</code></pre>\n\n<p>and a child that reads from this pipe in two different steps: \nIt first reads all the even numbers and writes them to the pipe <code>pb</code>: </p>\n\n<pre><code>    for(i=0;i&lt;n;i++)\n            { \n                nread=read(pa[0],&amp;num,sizeof(num));\n                if (nread==0)\n                {\n                    printf(\"\\nNothing to read!\\n\");\n                    break;\n                }\n                if (nread==-1)\n                {\n                    printf(\"\\nRead error!\\n\");\n                    exit(-1);\n                }\n                if (num%2==0)\n               {\n                        printf(\"\\nPrinting on pipe pb: %d\\n\",num);\n                        nwrite=write(pb[1],&amp;num,sizeof(num));\n                        if (nwrite==0)\n                        {\n                            printf(\"\\nNothing to write!\\n\");\n                            break;\n                        }\n                        if (nwrite==-1)\n                        {\n                            printf(\"\\nwrite error!\\n\");\n                            exit(-1);\n                        }\n                }\n            }\n</code></pre>\n\n<p>then it goes in <code>pause()</code> and waits for another process to send a <code>signal(SIGUSR1,handler);</code>\nAfter receiving the signal, it continues its execution\nreading all the odd numbers from the pipe and writing them to the <code>pb</code> pipe: </p>\n\n<pre><code>          for(i=0;i&lt;n;i++)\n            { \n                nread=read(pa[0],&amp;num,sizeof(num));\n                if (nread==0)\n                {\n                    printf(\"\\nNothing to read!\\n\");\n                    break;\n                }\n                if (nread==-1)\n                {\n                    printf(\"\\nRead error!\\n\");\n                    exit(-1);\n                }\n                if (num%2==1)\n                {\n                        printf(\"\\nPrinting on pipe pb: %d\\n\",num);\n                        nwrite=write(pb[1],&amp;num,sizeof(num));\n                        if (nwrite==0)\n                        {\n                            printf(\"\\nNothing to write!\\n\");\n                            break;\n                        }\n                        if (nwrite==-1)\n                        {\n                            printf(\"\\nwrite error!\\n\");\n                            exit(-1);\n                        }\n                 }\n            }\n</code></pre>\n\n<p>The thing is, the first <code>read</code> call to the pipe <code>pa</code> (where I get even numebrs) reads all the pipe content. Thereafter, the second <code>read</code> call from the pipe <code>pa</code>  returns 0 because all the numbers have been read.I would like to read just the even numbers in the first step and then the odd numbers in the second step,and I can't do that making the parent write only even numbers.\nAny tip? Thank you all.</p>\n\n<p><code>I am really sorry for my bad indenting, I'm trying my best to solve this issue with my coding style.</code></p>\n"}, {"tags": ["mysql", "c", "linux"], "comments": [{"owner": {"reputation": 1096, "user_id": 2436859, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ac93344f8743c4577c1fe1bafdf2c905?s=128&d=identicon&r=PG", "display_name": "Taegost", "link": "https://stackoverflow.com/users/2436859/taegost"}, "edited": false, "score": 0, "creation_date": 1467810018, "post_id": 38224219, "comment_id": 63871169, "body": "What happens when you try?  Is there an error?"}, {"owner": {"reputation": 5, "user_id": 6185308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0g9m-xGwiyw/AAAAAAAAAAI/AAAAAAAAGD0/Ga9rChYKzm4/photo.jpg?sz=128", "display_name": "Onur Tural\u0131", "link": "https://stackoverflow.com/users/6185308/onur-tural%c4%b1"}, "reply_to_user": {"reputation": 1096, "user_id": 2436859, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ac93344f8743c4577c1fe1bafdf2c905?s=128&d=identicon&r=PG", "display_name": "Taegost", "link": "https://stackoverflow.com/users/2436859/taegost"}, "edited": false, "score": 0, "creation_date": 1467843191, "post_id": 38224219, "comment_id": 63890944, "body": "Not an error, just nothing."}], "answers": [{"comments": [{"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1467813387, "post_id": 38224377, "comment_id": 63873496, "body": "Downvoted, because this has problems with sql injection. mysql has api for passing in values - it&#39;s prepared statements: <a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-stmt-execute.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.7/en/mysql-stmt-execute.html</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1467813657, "post_id": 38224377, "comment_id": 63873692, "body": "@viraptor Well, surely all kind of code performed with literal strings can be easily hacked. BTW I don&#39;t think it is the case for OP with such a simple/basic code."}, {"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1467814854, "post_id": 38224377, "comment_id": 63874635, "body": "The strings may be literal at the moment, but possibly not in the future. What&#39;s the better option &quot;this is ok right now&quot;, or &quot;this is ok even if you change parameters&quot;? It&#39;s 2016 and people still constantly fail to fix issues like this. Let&#39;s at least keep insecure examples off of SO. If Onur has issues with basics like this, I&#39;d rather he learned about injection as soon as possible."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1467815615, "post_id": 38224377, "comment_id": 63875235, "body": "@viraptor Well, I totally agree. My fault. Hope my edits are good."}, {"owner": {"reputation": 5, "user_id": 6185308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0g9m-xGwiyw/AAAAAAAAAAI/AAAAAAAAGD0/Ga9rChYKzm4/photo.jpg?sz=128", "display_name": "Onur Tural\u0131", "link": "https://stackoverflow.com/users/6185308/onur-tural%c4%b1"}, "edited": false, "score": 0, "creation_date": 1467846693, "post_id": 38224377, "comment_id": 63892057, "body": "I&#39;m beginner mysql programming in C. It was so easy in C# but this is so hard. And thank you for answer, I&#39;m working on it."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 2, "last_activity_date": 1467837373, "last_edit_date": 1467837373, "creation_date": 1467809159, "answer_id": 38224377, "question_id": 38224219, "link": "https://stackoverflow.com/questions/38224219/how-do-i-insert-data-into-mysql-table/38224377#38224377", "title": "How do I insert data into mysql table?", "body": "<p>You must prepare you C-string before query creation.</p>\n\n<p>You can use <a href=\"http://linux.die.net/man/3/snprintf\" rel=\"nofollow\">snprintf</a> to do so:</p>\n\n<pre><code>#define MAX_STRING 128\nchar query[MAX_STRING] = {0};\nint id = 5;\nchar name[] = \"jack\";\n\nsnprintf(query, MAX_STRING, \"INSERT INTO users (id, name) VALUES (%d, '%s')\", id, name);\n\nmysql_query(conn, query);\n</code></pre>\n\n<p>As @viraptor pointed out <strong>the solution above has problems with sql injection.</strong>\nYou should use mysql api (coded to be totally safe) to do the job:</p>\n\n<pre><code>#define INSERT_QUERY = \"INSERT INTO users (id, name) VALUES (?,?)\";\n\nint id = 5;\nchar name[] = \"jack\";\nsize_t str_length = strlen(name);\n\nMYSQL_STMT *stmt = mysql_stmt_init(mysql);\nif (!stmt)\n{\n   fprintf(stderr, \" mysql_stmt_init(), out of memory\\n\");\n     exit(0);\n}\nif (mysql_stmt_prepare(stmt, INSERT_QUERY, strlen(INSERT_QUERY)))\n{\n   fprintf(stderr, \" mysql_stmt_prepare(), INSERT failed\\n\");\n   fprintf(stderr, \" %s\\n\", mysql_stmt_error(stmt));\n   exit(0);\n}\n\nMYSQL_BIND bind[2];\n\n/* INTEGER PARAM */\n/* This is a number type, so there is no need\n   to specify buffer_length */\nbind[0].buffer_type= MYSQL_TYPE_LONG;\nbind[0].buffer= (char *)&amp;id;\nbind[0].is_null= 0;\nbind[0].length= 0;\n\n/* STRING PARAM */\nbind[1].buffer_type= MYSQL_TYPE_STRING;\nbind[1].buffer= (char *)name;\nbind[1].buffer_length= str_length+1;\nbind[1].is_null= 0;\nbind[1].length= &amp;str_length;\n\n/* Bind the buffers */\nif (mysql_stmt_bind_param(stmt, bind))\n{\n  fprintf(stderr, \" mysql_stmt_bind_param() failed\\n\");\n  fprintf(stderr, \" %s\\n\", mysql_stmt_error(stmt));\n  exit(0);\n}\n\n/* Execute the INSERT statement - 2*/\nif (mysql_stmt_execute(stmt))\n{\n  fprintf(stderr, \" mysql_stmt_execute, 2 failed\\n\");\n  fprintf(stderr, \" %s\\n\", mysql_stmt_error(stmt));\n  exit(0);\n}\n\n/* Get the total rows affected */\nmy_ulonglong affected_rows= mysql_stmt_affected_rows(stmt);\nfprintf(stdout, \" total affected rows(insert 2): %lu\\n\",\n                (unsigned long) affected_rows);\n\nif (affected_rows != 1) /* validate affected rows */\n{\n  fprintf(stderr, \" invalid affected rows by MySQL\\n\");\n  exit(0);\n}\n\n/* Close the statement */\nif (mysql_stmt_close(stmt))\n{\n  fprintf(stderr, \" failed while closing the statement\\n\");\n  fprintf(stderr, \" %s\\n\", mysql_stmt_error(stmt));\n  exit(0);\n}\n</code></pre>\n\n<p>You can find reference for this code <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-stmt-execute.html\" rel=\"nofollow\">at this link</a></p>\n"}, {"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467813806, "post_id": 38225867, "comment_id": 63873801, "body": "Not the DV, but this answer seems to fall into <i>link only answer</i>"}, {"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467814687, "post_id": 38225867, "comment_id": 63874473, "body": "@LPs The example is 30+ lines long. I tried to sum up the functions involved so they&#39;re easy to look up. If you can make a shorter example that will make sense here, feel free to propose an edit, or answer yourself :)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467815568, "post_id": 38225867, "comment_id": 63875206, "body": "I edited my answer. Take a look if something is wrong. Ty."}, {"owner": {"reputation": 5, "user_id": 6185308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0g9m-xGwiyw/AAAAAAAAAAI/AAAAAAAAGD0/Ga9rChYKzm4/photo.jpg?sz=128", "display_name": "Onur Tural\u0131", "link": "https://stackoverflow.com/users/6185308/onur-tural%c4%b1"}, "edited": false, "score": 0, "creation_date": 1467846912, "post_id": 38225867, "comment_id": 63892121, "body": "In your first link, is it too long? It&#39;s just inserting data, it is can&#39;t be so long and complicated."}, {"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "reply_to_user": {"reputation": 5, "user_id": 6185308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0g9m-xGwiyw/AAAAAAAAAAI/AAAAAAAAGD0/Ga9rChYKzm4/photo.jpg?sz=128", "display_name": "Onur Tural\u0131", "link": "https://stackoverflow.com/users/6185308/onur-tural%c4%b1"}, "edited": false, "score": 0, "creation_date": 1467886011, "post_id": 38225867, "comment_id": 63906389, "body": "@OnurTural\u0131 It is a bit verbose. But they do all the error checking you want to do anyway. And the structures for bind parameters are defined in the code itself, but you can define them at the top of file like <code>MYSQL_BIND params[] = {{.buffer_type=..., .is_null=...}, {.buffer_type=..., ...}</code> which makes it a bit more condensed."}], "tags": [], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "is_accepted": false, "score": 1, "last_activity_date": 1467813503, "creation_date": 1467813503, "answer_id": 38225867, "question_id": 38224219, "link": "https://stackoverflow.com/questions/38224219/how-do-i-insert-data-into-mysql-table/38225867#38225867", "title": "How do I insert data into mysql table?", "body": "<p>Have a look at examples at <a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-stmt-execute.html\" rel=\"nofollow\">https://dev.mysql.com/doc/refman/5.7/en/mysql-stmt-execute.html</a> for information how to do this.</p>\n\n<p>In summary, you create a prepared statement, initialize it with <code>mysql_stmt_prepare</code>, then pass the values via <code>mysql_stmt_bind_param</code>.</p>\n\n<p>You could also construct the text version of the query with values quoted by <a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-real-escape-string-quote.html\" rel=\"nofollow\">https://dev.mysql.com/doc/refman/5.7/en/mysql-real-escape-string-quote.html</a> but in that case it's easy to accidentally skip some elements.</p>\n"}], "owner": {"reputation": 5, "user_id": 6185308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0g9m-xGwiyw/AAAAAAAAAAI/AAAAAAAAGD0/Ga9rChYKzm4/photo.jpg?sz=128", "display_name": "Onur Tural\u0131", "link": "https://stackoverflow.com/users/6185308/onur-tural%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2591, "favorite_count": 0, "accepted_answer_id": 38224377, "answer_count": 2, "score": 0, "last_activity_date": 1467837373, "creation_date": 1467808669, "last_edit_date": 1467813010, "question_id": 38224219, "link": "https://stackoverflow.com/questions/38224219/how-do-i-insert-data-into-mysql-table", "title": "How do I insert data into mysql table?", "body": "<p>I am trying to insert data into a mysql database. The connection and the displaying of data works. </p>\n\n<p>But I don't know how to use the <code>INSERT INTO table</code> command in C code. </p>\n\n<p>I've tried reading strings with <code>scanf</code>/<code>getchar</code> to the values in the mysql command, but it didn't work. </p>\n\n<p>How do I insert data into the mysql table after I read the data in my program?</p>\n\n<p>I'm working in Linux.</p>\n\n<p>This is my source code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mysql/mysql.h&gt;\n\nstatic char *host = \"localhost\";\nstatic char *user = \"root\";\nstatic char *pass = \"PASSWORD\";\nstatic char *dbname = \"tutorial\";\n\nunsigned int port = 3306;\nstatic char *unix_socket = NULL;\nunsigned int flag = 0;\n\nint main()\n{\nMYSQL *conn;\nMYSQL_RES * res;\nMYSQL_ROW row;\nconn = mysql_init(NULL);\n\nif(!(mysql_real_connect(conn, host, user, pass, dbname, port, unix_socket, flag)))\n{\n    fprintf(stderr, \"Error: %s[%d]\", mysql_error(conn), mysql_errno(conn));\n    exit(1);\n}\n\nmysql_query(conn, \"SELECT * FROM users\");\nres = mysql_store_result(conn);\n\n\nwhile(row = mysql_fetch_row(res))\n{\n    printf(\"%s\\t%s\\n\", row[0], row[1]);\n}\n\nmysql_free_result(res);\nmysql_close(conn);\n\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>...\nint id[1] = 5;\nchar name[8] = \"Jack\";\n...\nmysql_query(conn, INSERT INTO users(id, name) VALUES(id, name);\n...\n</code></pre>\n"}, {"tags": ["c", "gdb"], "comments": [{"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "edited": false, "score": 0, "creation_date": 1467826978, "post_id": 38224033, "comment_id": 63882487, "body": "This isn&#39;t actually a question about NetBSD -- it&#39;s a question about GDB (and somewhat about C)."}], "answers": [{"comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1467834637, "post_id": 38224242, "comment_id": 63886815, "body": "For what it is worth, this is the classic implementation of the C macro <code>offsetof</code> (casting it to <code>size_t</code>, of course)."}], "tags": [], "owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "is_accepted": true, "score": 4, "last_activity_date": 1467808757, "creation_date": 1467808757, "answer_id": 38224242, "question_id": 38224033, "link": "https://stackoverflow.com/questions/38224033/printing-structure-element-in-gdb/38224242#38224242", "title": "printing structure element in gdb", "body": "<p>Here you get the address of a member of a structure which is located at address 0 (the <code>((pcm_pkt_t*)0)</code>). So you have the <strong>offset</strong> of this member inside the structure (member offset is address of the member - start address of the structure which is 0 here).</p>\n"}], "owner": {"reputation": 49, "user_id": 1660014, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b78c299d57607f50a5341f6df8e5058a?s=128&d=identicon&r=PG", "display_name": "paavaanan", "link": "https://stackoverflow.com/users/1660014/paavaanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 38224242, "answer_count": 1, "score": 1, "last_activity_date": 1467833625, "creation_date": 1467808165, "last_edit_date": 1467833625, "question_id": 38224033, "link": "https://stackoverflow.com/questions/38224033/printing-structure-element-in-gdb", "title": "printing structure element in gdb", "body": "<pre><code>(gdb) p/d &amp;(((pcm_pkt_t*)0)-&gt;rx_timestamp)\n$12 = 236\n</code></pre>\n\n<p>What does it actually print? Does it print the size of the <code>rx_timestamp</code> or its value?\nThis is from offline analysis from netbsd kernel.</p>\n"}, {"tags": ["c", "gcc", "makefile", "parallel-processing", "pattern-matching"], "comments": [{"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 1, "creation_date": 1467807867, "post_id": 38223912, "comment_id": 63869807, "body": "What compiler do you use ? I actually use both gcc3 and gcc4, with gcc3 the parallel build fails whereas it works correctly with gcc4. It&#39;s a custom cross-compiler but I think the gcc3 one was based on Cygwin. Could you also provide your Makefile ?"}, {"owner": {"reputation": 11, "user_id": 6556071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23a06eb300bb3771018a557630fb2bc?s=128&d=identicon&r=PG&f=1", "display_name": "pizzamanstan", "link": "https://stackoverflow.com/users/6556071/pizzamanstan"}, "reply_to_user": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1467808120, "post_id": 38223912, "comment_id": 63869950, "body": "I use version 5.3 of GCC (with Cygwin). Unfortunately, I cannot provide the makefile (company-confidentiality purposes), which I understand may make things more difficult."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 2, "creation_date": 1467808183, "post_id": 38223912, "comment_id": 63869997, "body": "Nobody is asking you for the actual makefile. You need to write a minimal example that reproduces the issue."}, {"owner": {"reputation": 11, "user_id": 6556071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23a06eb300bb3771018a557630fb2bc?s=128&d=identicon&r=PG&f=1", "display_name": "pizzamanstan", "link": "https://stackoverflow.com/users/6556071/pizzamanstan"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467808542, "post_id": 38223912, "comment_id": 63870225, "body": "@2501 Actually the first comment was"}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1467808606, "post_id": 38223912, "comment_id": 63870267, "body": "Well that&#39;s right but an MCVE will be fine too ! Just the basic structure, the kind of rule and target, not the details and names your company is using. Could you also try with another compiler ?"}, {"owner": {"reputation": 2460, "user_id": 3919009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836c238f05fe7faac08b593d2bace718?s=128&d=identicon&r=PG", "display_name": "Gustavo Morales", "link": "https://stackoverflow.com/users/3919009/gustavo-morales"}, "edited": false, "score": 0, "creation_date": 1467809192, "post_id": 38223912, "comment_id": 63870627, "body": "Questions seeking debugging help (<b>&quot;why isn&#39;t this code working?&quot;</b>) must include <i>the desired behavior</i>, <i>a specific problem or error</i> and <i>the shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without <b>a clear problem statement</b> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 11, "user_id": 6556071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23a06eb300bb3771018a557630fb2bc?s=128&d=identicon&r=PG&f=1", "display_name": "pizzamanstan", "link": "https://stackoverflow.com/users/6556071/pizzamanstan"}, "edited": false, "score": 0, "creation_date": 1467809512, "post_id": 38223912, "comment_id": 63870842, "body": "This question probably could have been worded better, I am sorry for that. I was trying to ask in a more general/theoretical sense if pattern-rules were considered thread safe, (as I know that the compiler has to figure out dependencies on its own in this case). The reason I spoke so much about the makefile I was working with was because that is what sparked my curiosity, I am asking more in terms of all makefiles that utilize this"}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1467810226, "post_id": 38223912, "comment_id": 63871315, "body": "Well I think you should try at least one of these things : 1. Same Makefile and sources, other compiler, or 2. Same compiler, other Makefile and project (i.e. any easy project with very simple and basic Makefile but a dozen source files to compile). Then you&#39;ll know if it&#39;s a compiler or Makefile issue. Also see this thread and try to relate with your Makefile : <a href=\"http://stackoverflow.com/questions/2367284/how-does-the-make-j-option-actually-work\" title=\"how does the make j option actually work\">stackoverflow.com/questions/2367284/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6556071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23a06eb300bb3771018a557630fb2bc?s=128&d=identicon&r=PG&f=1", "display_name": "pizzamanstan", "link": "https://stackoverflow.com/users/6556071/pizzamanstan"}, "edited": false, "score": 0, "creation_date": 1467810438, "post_id": 38223912, "comment_id": 63871458, "body": "Good idea, I will try this. Thank you!"}, {"owner": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "edited": false, "score": 2, "creation_date": 1467813632, "post_id": 38223912, "comment_id": 63873675, "body": "When parallel make fails, but works with repeated reruns the most common problem is missing dependencies.  You should try to capture the build error, which probably relates to some dependency not being ready yet.  Then figure out which part of the makefile is consuming the dependency, and which part generates the dependency.  Changing the compiler proves very little.  The failure will almost certainly be a race condition and a slower or faster compiler will simply hide the missing makefile rule"}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "reply_to_user": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "edited": false, "score": 0, "creation_date": 1467817623, "post_id": 38223912, "comment_id": 63876670, "body": "@Andrew I agree however in my (very specific) case the compiler was the problem. Anyway we have to few details to tell more about the nature of this issue."}], "answers": [{"tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": false, "score": 0, "last_activity_date": 1467837609, "creation_date": 1467837609, "answer_id": 38233402, "question_id": 38223912, "link": "https://stackoverflow.com/questions/38223912/why-might-a-makefile-build-work-serially-but-not-in-parallel-and-would-patter/38233402#38233402", "title": "Why might a (makefile) build work serially but not in parallel, and would pattern matching cause such an issue?", "body": "<p>To be clear, make is not multithreaded.  It's single-threaded, it just invokes multiple programs simultaneously to get parallel job support.</p>\n\n<p>The short answer is, no, there's nothing about pattern rules themselves that is problematic for parallel builds.</p>\n\n<p>If your build works serially but fails when run in parallel, and <em>particularly</em> if it works if you keep running it over and over, then the only reason for this is that your makefiles are wrong: there are dependencies between one or more of your targets which you haven't encoded in your makefile, so make doesn't know about them, as @Andrew says.</p>\n\n<p>The way to fix it is look at which file failed to compile, and see why it failed (what file was missing that caused the compile failure), then make sure that this file is listed as a prerequisite of the target that need it.  Wash, rinse, and repeat.</p>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1467839055, "last_edit_date": 1467839055, "creation_date": 1467838617, "answer_id": 38233648, "question_id": 38223912, "link": "https://stackoverflow.com/questions/38223912/why-might-a-makefile-build-work-serially-but-not-in-parallel-and-would-patter/38233648#38233648", "title": "Why might a (makefile) build work serially but not in parallel, and would pattern matching cause such an issue?", "body": "<p>If your <code>Makefile</code> fails to build under <code>-jN</code>, <code>N</code> > 1, it means that it contains race conditions, and is not parallelizable in its current state.</p>\n\n<p>What this means is that the build steps contain hidden inter-dependencies which are not expressed as Make dependencies in the rules.</p>\n\n<p><strong>Tip:</strong> Sometimes this happens due to assumptions of left-to-right evaluation among the prerequisites of a rule. That is to say:</p>\n\n<pre><code>  z: x0 x1 x2 x3\n</code></pre>\n\n<p>Suppose <code>x2</code> doesn't correctly build unless <code>x1</code> is fully updated, and that is precisely why <code>x1</code> appears to the left of <code>x2</code>. If such a situation exists, we may be able to inform Make by adding:</p>\n\n<pre><code>  x2: x1\n</code></pre>\n\n<p>This is tricky, though, because now if a rebuild of <code>x2</code> is happens to be triggered because <code>x1</code> is newer, <code>x1</code> will appear as the list of prerequisites. That means that when the special <code>$^</code> variable is used in the rule that updates <code>x2</code>, it potentially contains <code>x1</code>. The rules have to avoid this being a problem.</p>\n\n<p>So that's one tool for addressing these hidden dependencies. It's another matter to actually find them. I don't know of any tools which do this automatically. Empirical testing is time consuming; you may find that a build works 19 times and breaks on the 20th attempt. Then the logs are the only clue about what build recipes are racing against each other. (E.g rule X complains that a certain file is not found, and that file is produced by rule Y. Aha, Y must be ordered before X.)</p>\n\n<p>You can inspect a <code>Makefile</code> for potential problems. As a rule of thumb \"purely functional\" build steps aren't a problem: by that I mean build steps which operate on the prerequisites and produce the target.   The problem rules are the ones which have additional effects, such as implicitly depending on files produced by some other rules, where these files are not listed as prerequisites. Or producing additional files in addition to the target (and these additional files are referenced elsewhere).</p>\n\n<p>Example: Yacc implementation produce <code>y.tab.c</code> but also a <code>y.tab.h</code>. You might have a dependency on <code>y.tab.h</code> somewhere, but it's the Yacc rule doesn't encode the fact that it produces <code>y.tab.h</code>. It just so happens that in the non-threaded operation of Make, the Yacc rule always gets run first and so <code>y.tab.h</code> is there when the other rules fire which need it. And that could happen because of the order of the object files. <code>fooprog</code> depends on <code>y.tab.o</code> and <code>main.o</code>.  And <code>main.o</code> depends on <code>y.tab.h</code>. But <code>main.o</code> is to the right of <code>y.tab.o</code>, and <code>y.tab.h</code> is implicitly updated whenever <code>y.tab.o</code> is updated, because that happens only whenever <code>y.tab.c</code> is updated, which regenerates <code>y.tab.h</code> also. So <code>main.o</code> will sometimes be rebuilt because it is older than <code>y.tab.h</code>, but it will never run into the problem that <code>y.tab.h</code> is missing and there is \"no rule to create target <code>y.tab.h</code>\".</p>\n\n<p>That problem will be exposed under parallel mode, though, over a clean tree. Make will try to update <code>y.tab.o</code> and <code>main.o</code> in parallel and, oops, <code>main.o</code> depends on <code>y.tab.h</code>. <code>y.tab.h</code> doesn't exist unless the <code>y.tab.o</code> rule wins the race and sneaks it in just before the <code>main.o</code> rule processing checks for its existence. And <code>y.tab.h</code> not only doesn't exist, but there is no rule to create it.</p>\n"}], "owner": {"reputation": 11, "user_id": 6556071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23a06eb300bb3771018a557630fb2bc?s=128&d=identicon&r=PG&f=1", "display_name": "pizzamanstan", "link": "https://stackoverflow.com/users/6556071/pizzamanstan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467839055, "creation_date": 1467807803, "question_id": 38223912, "link": "https://stackoverflow.com/questions/38223912/why-might-a-makefile-build-work-serially-but-not-in-parallel-and-would-patter", "title": "Why might a (makefile) build work serially but not in parallel, and would pattern matching cause such an issue?", "body": "<p>Essentially, I have a very large project that ordinarily takes an incredible amount of time to build. For this reason, it is much better to use the -j option and divide it into a bunch of jobs, speeding up the process. But it seems that when I do do this, the build will crash at seemingly random times. If I keep trying, eventually the build will work. I am not too experienced with Makefiles (I have worked with them before, but none as large as this), so I am at a loss as to why it fails.</p>\n\n<p>The only thing I can think of as to why this would happen is that the makefile is made almost completely out of pattern based rules. (If I am not using the terminology correctly, I mean a rule that looks like this...)</p>\n\n<hr>\n\n<p>$(OUTDIR)/%.o: $(EXAMPLEDIR)/%.c</p>\n\n<p>...</p>\n\n<p>...</p>\n\n<hr>\n\n<p>So would this result in problems with the -j option? Am I on the right track or am I completely wrong (if so what would cause these types of problems)?</p>\n\n<p>Thank you in advanced for reading this</p>\n"}, {"tags": ["c++", "c", "fortify-source"], "comments": [{"owner": {"reputation": 224, "user_id": 1237778, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/161e80b97cf20454fc40e117004d2fa6?s=128&d=identicon&r=PG", "display_name": "Ginswich", "link": "https://stackoverflow.com/users/1237778/ginswich"}, "edited": false, "score": 0, "creation_date": 1467811777, "post_id": 38223221, "comment_id": 63872351, "body": "It appears that it is related to the fact that I am doing static linking. With dynamic linking, it works correctly (no *_chk symbols are included in the ELF). So I assume that these symbols are &quot;inherited&quot; through some of the statically linked libraries (any way to determine which library is using them?). Probably, building those libraries with -U_FORTIFY_SOURCE and -fno-stack-protector will solve the issue."}], "owner": {"reputation": 224, "user_id": 1237778, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/161e80b97cf20454fc40e117004d2fa6?s=128&d=identicon&r=PG", "display_name": "Ginswich", "link": "https://stackoverflow.com/users/1237778/ginswich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467809409, "creation_date": 1467805528, "last_edit_date": 1495541296, "question_id": 38223221, "link": "https://stackoverflow.com/questions/38223221/un-fortifying-rippled", "title": "Un-fortifying rippled", "body": "<p>I want to compile <a href=\"https://github.com/ripple/rippled\" rel=\"nofollow noreferrer\">rippled</a> without source code hardening (specifically, I want to avoid the *_chk functions). </p>\n\n<p>As far as I have been able to determine, gcc/g++ do this hardening with <a href=\"https://stackoverflow.com/tags/fortify-source/info\">FORTIFY_SOURCE</a> and <a href=\"https://idea.popcount.org/2013-08-15-fortify_source/\" rel=\"nofollow noreferrer\">-fstack-protector</a>, and in order to disable it, either <a href=\"https://stackoverflow.com/tags/fortify-source/info\">-U_FORTIFY_SOURCE or -D_FORTIFY_SOURCE=0</a> and <a href=\"https://stackoverflow.com/questions/12201625/disable-using-sprintf-chk?lq=1\">-fno-stack-protector</a> should be used.</p>\n\n<p>However, for some reason this is not working for me with rippled. I have modified the SConstruct file so that the above mentioned defines and switches are added, and I see during the build process that they are actually being passed to the compiler and linker. However, when I run <code>readelf -sW rippled | egrep chk</code>, I obtain several lines like:</p>\n\n<pre><code>     3: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND __printf_chk@GLIBC_2.3.4 (2)\n    38: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND __vfprintf_chk@GLIBC_2.3.4 (2)\n    96: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND __sprintf_chk@GLIBC_2.3.4 (2)\n   100: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND __snprintf_chk@GLIBC_2.3.4 (2)\n   107: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND __fread_chk@GLIBC_2.7 (14)\n</code></pre>\n\n<p>So I am guessing that the problem is not with the switches and defines. But in that case, what may I be missing? Why are these symbols still being included in the ELF?</p>\n\n<p>PS: I am aware that <a href=\"https://stackoverflow.com/questions/12201625/disable-using-sprintf-chk?lq=1\">parenthesizing</a> calls to \"_chk\"-able  functions is an alternative to -U_FORTIFY_SOURCE and -fno-stack-protector, but I am just discarding that option, as I do not want to modify rippled's code (and, however, that would only affect a subset of the functions, as far as I can tell).</p>\n"}, {"tags": ["c", "file-io", "fread"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1467801716, "post_id": 38221937, "comment_id": 63866205, "body": "Why? Because that&#39;s exactly what is in the file. The newline character (<code>\\n</code>) needs to be there to denote, well, a <i>new line</i>. And there are many ways to get rid of the newline. The best way depends on what you are trying to achieve. See for example <a href=\"http://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input\">Removing trailing newline character from fgets() input</a>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1467801725, "post_id": 38221937, "comment_id": 63866213, "body": "Please show the exact contents of your file."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1467802444, "post_id": 38221937, "comment_id": 63866642, "body": "Also, why aren&#39;t you using <code>LEN</code>, which you defined specifically instead of typing out the number in your <code>fread()</code>call?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1467802609, "post_id": 38221937, "comment_id": 63866735, "body": "DOS newline is CR+LF"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1467802949, "post_id": 38221937, "comment_id": 63866928, "body": "<code>fread</code> is not intended to be used for reading text, <code>fgets</code> is the better option."}], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 3, "last_activity_date": 1468747223, "last_edit_date": 1468747223, "creation_date": 1467802938, "answer_id": 38222441, "question_id": 38221937, "link": "https://stackoverflow.com/questions/38221937/why-does-fread-in-c-read-extra-newlines-characters/38222441#38222441", "title": "Why does fread() in c read extra &#39;#newlines&#39; characters?", "body": "<p>Calling ftell on a stream opened in text mode, such as in your example is not meaningful<sup>1</sup>.</p>\n\n<p>The usage of the function <code>fread</code> is not correct, the size and count arguments are switched. This means that the read is always partial, since your file doesn't have 5000000 characters in them. Thus the values of elements in the array after the call, have indeterminate<sup>2</sup> values. (The logical element in your case being a single element of size 5000000.)</p>\n\n<p>The results you're seeing aren't meaningful. Reading indeterminate values can cause undefined behavior.</p>\n\n<p>The correct way to read your file is to pass correct parameters to fread and use the return value to determine the number of successfully read characters:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;assert.h&gt;\n\nint main()\n{\n    unsigned char in[500] = { 0 } ;\n    FILE *f=fopen(\"in.txt\",\"r\");\n    assert( f ) ;\n\n    const size_t read = fread(in,1,500,f);\n    printf( \"read: %zu\\n\" , read );\n\n    for( size_t index = 0 ; index &lt; read ; index++ )\n    {\n        printf( \"%hhu \" , in[index] );\n    }\n\n    fclose( f );\n}\n</code></pre>\n\n<p>Using this correct program, when the file has the content (dots aren't a part of the file):</p>\n\n<pre><code>.\n1\n2\n3\n\n.\n</code></pre>\n\n<p>will read and print correct values:</p>\n\n<pre><code>read: 7\n49 10 50 10 51 10 10\n</code></pre>\n\n<p>One newline character, represented<sup>3</sup> by the value <code>10</code>, for each number, and an additional one at the end. </p>\n\n<hr>\n\n<p><sup>1</sup> (Quoted from: ISO:IEC 9899:201x 7.21.9.4 The ftell function 2)<br>\nFor a text stream, its file position indicator contains unspecified\ninformation, usable by the fseek function for returning the file position indicator for the\nstream to its position at the time of the ftell call; the difference between two such\nreturn values is not necessarily a meaningful measure of the number of characters written or read.</p>\n\n<p><sup>2</sup> (Quoted from: ISO:IEC 9899:201x 7.21.8.1 The fread function 2)<br>\nIf a partial element is read, its value is indeterminate.</p>\n\n<p><sup>3</sup> In windows files, a newline is represented by two characters: 13, 10. A carriage return and a line feed. But when reading the file in text mode, a newline is always just the line feed character: 10. You saw the character 13 because of the behavior of your program wasn't meaningful. If you (correctly) opened and read the file in binary mode, you would see the newline represented by both characters.</p>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 4617334, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/GwUnw.jpg?s=128&g=1", "display_name": "Madhusoodan P", "link": "https://stackoverflow.com/users/4617334/madhusoodan-p"}, "is_accepted": false, "score": -2, "last_activity_date": 1467803629, "creation_date": 1467803629, "answer_id": 38222666, "question_id": 38221937, "link": "https://stackoverflow.com/questions/38221937/why-does-fread-in-c-read-extra-newlines-characters/38222666#38222666", "title": "Why does fread() in c read extra &#39;#newlines&#39; characters?", "body": "<p>If you are using windows and edited the file in.txt using some editor which attaches CR-LF  (Carriage-Return, LINE-FEED) ((ASCII)  13, 10) to each newline this will surely happen. Try writing the in.txt by a program  and then read it. It will be do as expected. Or use a editor which doesn't attach a CR-LF to eol (end of line). sorry I don't know no such editor [But some linux editors will work.].</p>\n"}], "owner": {"reputation": 67, "user_id": 5406307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d84ad323fc79472fc7ca1a9b583783?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5406307/phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3890, "favorite_count": 0, "accepted_answer_id": 38222441, "answer_count": 2, "score": 3, "last_activity_date": 1468747223, "creation_date": 1467801342, "last_edit_date": 1467801976, "question_id": 38221937, "link": "https://stackoverflow.com/questions/38221937/why-does-fread-in-c-read-extra-newlines-characters", "title": "Why does fread() in c read extra &#39;#newlines&#39; characters?", "body": "<p>while I am trying to copy a file into string using <strong>fread()</strong> ,I am getting extra characters from file which is exactly equal to number of new lines. \nHere is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define LEN 5000000\n\nint main()\n{\n   char *in = (char*) malloc(LEN);\n   FILE *f=fopen(\"in.txt\",\"r\");\n   fread(in,5000000,1,f);\n   printf(\"%ld\\n\", ftell(f)); \n   in[ftell(f)]=0;\n   int l;\n   for(l=0;true;l++)\n   {\n      if(in[l]&lt;10)\n        break;\n      printf(\"%d \",in[l]);\n   }\n   printf(\"\\n\");\n}\n</code></pre>\n\n<p>Input for this program is:</p>\n\n<pre><code>1  \n2  \n&lt;newline&gt;\n</code></pre>\n\n<p>link for input : <a href=\"https://paste.fedoraproject.org/388281/46780193/\" rel=\"nofollow\">https://paste.fedoraproject.org/388281/46780193/</a><br>\nFor output i am printing ASCII values of characters read:</p>\n\n<pre><code>6  \n49 10 50 10 13 10  \n</code></pre>\n\n<p>if Input is:</p>\n\n<pre><code>1  \n2  \n3  \n&lt;newline&gt;  \n</code></pre>\n\n<p>link for input: <a href=\"https://paste.fedoraproject.org/388280/\" rel=\"nofollow\">https://paste.fedoraproject.org/388280/</a><br>\nthen output is:</p>\n\n<pre><code>9  \n49 10 50 10 51 10 51 13 10  \n</code></pre>\n\n<p>I saw some other test cases.In every test case extra number of characters are always number of new lines.<br>\nI have few questions:<br>\n-why the pattern is like this?<br>\n-How is this this related to the fact that new line take 2 bytes in windows?<br>\n-How to get rid of those extra characters?<br>\nI googled for similar questions ,but didn't find answer.Please somebody explain?</p>\n"}, {"tags": ["c", "struct", "initialization", "warnings"], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467801741, "post_id": 38221802, "comment_id": 63866224, "body": "Alternatively, <code>parser</code> could be a flexible array member of type <code>const char* parser[]</code>. There are very few cases where pointer-to-pointer variable declarations make sense."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467802147, "post_id": 38221802, "comment_id": 63866439, "body": "@Lundin Yes, with VLA <code>parser</code> should be last member of struct, shouldn&#39;t it?"}, {"owner": {"reputation": 103, "user_id": 4632496, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb557b2ceab2b53c705c0d97098929ff?s=128&d=identicon&r=PG&f=1", "display_name": "GURKE", "link": "https://stackoverflow.com/users/4632496/gurke"}, "edited": false, "score": 0, "creation_date": 1467802304, "post_id": 38221802, "comment_id": 63866533, "body": "Thank you! Sometimes its easier than you think ;)"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 5, "last_activity_date": 1467800898, "creation_date": 1467800898, "answer_id": 38221802, "question_id": 38221668, "link": "https://stackoverflow.com/questions/38221668/warning-with-struct-initialization/38221802#38221802", "title": "Warning with struct initialization", "body": "<p>You can use <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3/gcc/Compound-Literals.html\">compound literals</a>, so change init to</p>\n\n<pre><code>struct ChangeIntItem ChangeIntItemTypeBoolean = { .unit = \"\", .minimum = 0, .maximum = 1, .parser = (const char *[]){\"off\", \"on\"}};\n</code></pre>\n\n<p>Test </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nstruct ChangeIntItem\n{\n    char *unit;\n    const char **parser;\n    int *changevalue;\n    uint16_t *change_eeprom_value;\n    int maximum;\n    int minimum;\n};\n\nint main()\n{\n    struct ChangeIntItem ChangeIntItemTypeBoolean = { .unit = \"\", .minimum = 0, .maximum = 1, .parser = (const char *[]){\"off\", \"on\"}};\n\n    printf (\"%s - %s\\n\", ChangeIntItemTypeBoolean.parser[0], ChangeIntItemTypeBoolean.parser[1]);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>off - on\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467801256, "post_id": 38221812, "comment_id": 63865942, "body": "@LPs No, it is a pointer. Phrase <i>pointer of pointers</i> doesn&#39;t have any meaning."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 4, "last_activity_date": 1467800926, "creation_date": 1467800926, "answer_id": 38221812, "question_id": 38221668, "link": "https://stackoverflow.com/questions/38221668/warning-with-struct-initialization/38221812#38221812", "title": "Warning with struct initialization", "body": "<p>Member <code>parser</code> is a pointer. </p>\n\n<p>Change it to an array of pointers, so the initialization can be kept the same:</p>\n\n<pre><code> const char *parser[2];\n</code></pre>\n\n<p>Or use a compound literal or another variable:</p>\n\n<pre><code>.parser = ( const char*[]){\"off\", \"on\"}\n\nconst char* array[2] = {\"off\", \"on\"};\n.parser = array\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 4632496, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb557b2ceab2b53c705c0d97098929ff?s=128&d=identicon&r=PG&f=1", "display_name": "GURKE", "link": "https://stackoverflow.com/users/4632496/gurke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1652, "favorite_count": 0, "accepted_answer_id": 38221802, "answer_count": 2, "score": 0, "last_activity_date": 1467800926, "creation_date": 1467800471, "question_id": 38221668, "link": "https://stackoverflow.com/questions/38221668/warning-with-struct-initialization", "title": "Warning with struct initialization", "body": "<p>I have this struct:</p>\n\n<pre><code>struct ChangeIntItem\n{\n    char *unit;\n    const char **parser;\n    int *changevalue;\n    uint16_t *change_eeprom_value;\n    int maximum;\n    int minimum;\n};\n</code></pre>\n\n<p>I want to initialize other variables with this struct-Variable:</p>\n\n<pre><code>struct ChangeIntItem ChangeIntItemTypeBoolean = { .unit = \"\", .minimum = 0, .maximum = 1, .parser = {\"off\", \"on\"}};\n</code></pre>\n\n<p>It is working fine but I get some warnings:</p>\n\n<pre><code>Severity    Code    Description Project File    Line\nWarning     braces around scalar initializer    Handsteuerung   C:\\Users\\...    11\n\nSeverity    Code    Description Project File    Line\nWarning     (near initialization for 'ChangeIntItemTypeBoolean.parser') Handsteuerung   C:\\Users\\...    11\n\nSeverity    Code    Description Project File    Line\nWarning     initialization from incompatible pointer type   Handsteuerung   C:\\Users\\...    11\n\nSeverity    Code    Description Project File    Line\nWarning     (near initialization for 'ChangeIntItemTypeBoolean.parser') Handsteuerung   C:\\Users\\...    11\n\nSeverity    Code    Description Project File    Line\nWarning     excess elements in scalar initializer   Handsteuerung   C:\\Users\\...    11\n\nSeverity    Code    Description Project File    Line\nWarning     (near initialization for 'ChangeIntItemTypeBoolean.parser') Handsteuerung   C:\\Users\\...    11\n</code></pre>\n\n<p>In another case I wrote a function which sets the variables of the struct to default-values but I prefer this method because its much shorter.</p>\n\n<p>All mistakes where caused by '.parser = {\"off\", \"on\"}' but I don't get my mistake...</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467796418, "post_id": 38220177, "comment_id": 63863171, "body": "&quot;Note that I would rather have just one structure, rather than one for each group of 3&quot;  So why don&#39;t you make a structure containing an array of 3 items?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 3, "creation_date": 1467796742, "post_id": 38220177, "comment_id": 63863339, "body": "Without a <i>much</i> more specific use-case, we can only guess to what the most useful goal is and how to get there."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1467797671, "post_id": 38220177, "comment_id": 63863872, "body": "Values of indices for all usages of potential <code>GetItem()</code> are known at compile time? I.e. it looks like <code>GetItem(1), GetItem(10)</code> or it will be variables?"}, {"owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1467801088, "post_id": 38220177, "comment_id": 63865854, "body": "@Serhio yes, they will be known at compile time"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1467801302, "post_id": 38220177, "comment_id": 63865965, "body": "You can&#39;t &quot;encapsulate&quot; macros."}], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 6270435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-QLPpgzDpiY8/AAAAAAAAAAI/AAAAAAAADtg/oHEaw-Ykeak/photo.jpg?sz=128", "display_name": "Trantor", "link": "https://stackoverflow.com/users/6270435/trantor"}, "edited": false, "score": 0, "creation_date": 1467802571, "post_id": 38221876, "comment_id": 63866711, "body": "In C++, using macros is bad style. Try using inline functions instead."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 741, "user_id": 6270435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-QLPpgzDpiY8/AAAAAAAAAAI/AAAAAAAADtg/oHEaw-Ykeak/photo.jpg?sz=128", "display_name": "Trantor", "link": "https://stackoverflow.com/users/6270435/trantor"}, "edited": false, "score": 0, "creation_date": 1467802818, "post_id": 38221876, "comment_id": 63866846, "body": "@Trantor Yes, it is not a very elegant solution, but you can try to solve problem with templates or/and inline functions. I&#39;m not sure that it will be easier than simple macro."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 1, "last_activity_date": 1467801125, "creation_date": 1467801125, "answer_id": 38221876, "question_id": 38220177, "link": "https://stackoverflow.com/questions/38220177/best-way-to-group-defines/38221876#38221876", "title": "Best way to group #defines", "body": "<p>I'm not 100% sure that this is what you really want, but you can get access interface similar to you described with next macro:</p>\n\n<pre><code>#define GET(kind, idx) ( \\\n        (idx) == 0 ? CFG_ ## kind ## 0 \\\n      : (idx) == 1 ? CFG_ ## kind ## 1 \\\n      : (idx) == 2 ? CFG_ ## kind ## 2 \\\n      :  -1 /* or you can assert() here*/ )\n</code></pre>\n\n<p>And usage looks like:</p>\n\n<pre><code>GET(FILT, 0);\nGET(DELTA, 2);\n</code></pre>\n\n<p>Of course such approach has some drawbacks, at least it is multiple evaluation of <code>idx</code>, some blowing of generated machine code, but nonetheless it may be useful for some cases.</p>\n\n<p>And if indices are constants it becomes even simpler</p>\n\n<pre><code>#define GET(kind, idx) CFG_ ## kind ## idx\n</code></pre>\n\n<p>This version has no memory / code overheads at all.</p>\n"}], "owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467801125, "creation_date": 1467796075, "question_id": 38220177, "link": "https://stackoverflow.com/questions/38220177/best-way-to-group-defines", "title": "Best way to group #defines", "body": "<p>I have a bunch of <code>#define</code>, generated by Visual Studio, whose values I can not control. They are paired in groups of 3, e.g</p>\n\n<pre><code>CFG_FILT0\nCFG_FILT1\nCFG_FILT2\nCFG_DELTA0\nCFG_DELTA1\nCFG_DELTA2\n...\n</code></pre>\n\n<p>In the current class I am working with I would like to have a local (<code>private</code> and <code>const</code>) structure, which encapsulates all of these <code>#define</code>. Then, some functions of this class will need to read these values, <strong>but only in the before mentioned groups of 3</strong>. The potentiall structure (<code>myStruct</code>) should allow for something like this:</p>\n\n<pre><code>for (int idx = 0; chIdx &lt; 3; idx++)\n{\n    GetItem(myStruct[idx].filt)\n    GetItem(myStruct[idx].delta)\n    ...\n}\n</code></pre>\n\n<p>What is the best way to define such a structure, in terms of readability and memory usage?</p>\n\n<p>Note that I would rather have just one structure, rather than one for each group of 3 <code>#define</code> (e.g. <code>myStructFilt</code>, <code>myStructDelta</code> in the above example)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1467795956, "post_id": 38220075, "comment_id": 63862951, "body": "You can&#39;t, the array decays to a pointer when passed to another function. You can get the size only within the scope of declaration (function-scope in the case of a local array, and file-scope in the case of a global array)."}, {"owner": {"reputation": 673, "user_id": 4520565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0qisO.jpg?s=128&g=1", "display_name": "al-eax", "link": "https://stackoverflow.com/users/4520565/al-eax"}, "edited": false, "score": 0, "creation_date": 1467796003, "post_id": 38220075, "comment_id": 63862974, "body": "strlen(a); returns the size of the string, but not the whole array"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467796262, "post_id": 38220075, "comment_id": 63863095, "body": "See <a href=\"http://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array\">How to find the &#39;sizeof&#39;(a pointer pointing to an array)?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1467796005, "post_id": 38220122, "comment_id": 63862975, "body": "Or <code>size_t</code>, used pretty-much throughout the standard libraries for describing magnitude of object sequences."}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467796135, "post_id": 38220122, "comment_id": 63863037, "body": "@WhozCraig Good call."}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": true, "score": 3, "last_activity_date": 1467796125, "last_edit_date": 1495542780, "creation_date": 1467795946, "answer_id": 38220122, "question_id": 38220075, "link": "https://stackoverflow.com/questions/38220075/how-can-i-get-char-array-size-in-function-language-c/38220122#38220122", "title": "how can I get char array size in function (language c)?", "body": "<p>You cannot. You will have to pass the size as an additional parameter. Probably of type <code>unsigned int</code> because a size cannot possibly be negative.</p>\n\n<pre><code>void test(char* a, unsigned int size)\n{\n    // ...\n}\n</code></pre>\n\n<p>Although it's the same end result, it would be even better to make your second argument a <a href=\"https://stackoverflow.com/questions/2550774/what-is-size-t-in-c\">size_t</a>, because that's the convention.</p>\n\n<pre><code>void test(char* a, size_t size)\n{\n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 797, "user_id": 3695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9a774368758472af716b807db6eb45?s=128&d=identicon&r=PG&f=1", "display_name": "majk", "link": "https://stackoverflow.com/users/3695740/majk"}, "edited": false, "score": 0, "creation_date": 1467796150, "post_id": 38220144, "comment_id": 63863045, "body": "It is worth noting that the <code>sizeof a &#47; sizeof a[0]</code> trick works only in <code>main</code> function, as <code>a</code> is of array type, whereas it doesn&#39;t work in <code>test</code>, as the global <code>a</code> is shadowed by the parameter <code>a</code>, that is of a pointer type."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 797, "user_id": 3695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9a774368758472af716b807db6eb45?s=128&d=identicon&r=PG&f=1", "display_name": "majk", "link": "https://stackoverflow.com/users/3695740/majk"}, "edited": false, "score": 0, "creation_date": 1467796209, "post_id": 38220144, "comment_id": 63863068, "body": "Yes, that trick should be applied only to arrays, not to the pointers."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1467796278, "post_id": 38220144, "comment_id": 63863101, "body": "More to the point, it &quot;works&quot; it both places, but once converted to pointer-to-type (such as the case of a parameter), it certainly won&#39;t &quot;work&quot; like you want it to. It has been the bane of many-an-engineer in such cases, since <i>both</i> cases will compile without error or even warning."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 3, "last_activity_date": 1467796304, "last_edit_date": 1467796304, "creation_date": 1467795996, "answer_id": 38220144, "question_id": 38220075, "link": "https://stackoverflow.com/questions/38220075/how-can-i-get-char-array-size-in-function-language-c/38220144#38220144", "title": "how can I get char array size in function (language c)?", "body": "<p>You should pass it explicitly along with pointer to the first element.</p>\n\n<pre><code>char a[255];\nvoid test(char* a, size_t num_elem){\n    /* do smth */\n}\n\nint main() {\n   test(a, sizeof a / sizeof a[0]);\n   return 0;\n}\n</code></pre>\n\n<p>And <code>sizeof a / sizeof a[0]</code> gives you a number of elements inside array, note that this trick won't work properly with pointers but only with arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 797, "user_id": 3695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9a774368758472af716b807db6eb45?s=128&d=identicon&r=PG&f=1", "display_name": "majk", "link": "https://stackoverflow.com/users/3695740/majk"}, "is_accepted": false, "score": 0, "last_activity_date": 1467796040, "creation_date": 1467796040, "answer_id": 38220161, "question_id": 38220075, "link": "https://stackoverflow.com/questions/38220075/how-can-i-get-char-array-size-in-function-language-c/38220161#38220161", "title": "how can I get char array size in function (language c)?", "body": "<p>You cannot do that. <code>a</code> is of type <code>char*</code>, and that does not have associated size with it. This is why most of the standard library methods to output to a buffer have an extra parameter for specifying the buffer size (see <a href=\"http://www.cplusplus.com/reference/cstring/strncpy/\" rel=\"nofollow\">strncpy</a>).</p>\n"}], "owner": {"reputation": 1178, "user_id": 1049667, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e199336f6a7124ec7372b2893a56c626?s=128&d=identicon&r=PG", "display_name": "zszen", "link": "https://stackoverflow.com/users/1049667/zszen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1467796069, "accepted_answer_id": 38220122, "answer_count": 3, "score": -1, "last_activity_date": 1467796304, "creation_date": 1467795793, "last_edit_date": 1467795899, "question_id": 38220075, "link": "https://stackoverflow.com/questions/38220075/how-can-i-get-char-array-size-in-function-language-c", "closed_reason": "Duplicate", "title": "how can I get char array size in function (language c)?", "body": "<pre><code>char a[255];\nvoid test(char* a){\n    printf(\"%d %d %d \\n\",sizeof(a),sizeof(*a),sizeof(&amp;a));\n}\n</code></pre>\n\n<p>all of those don't get the real size of variable 'a';</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 2, "creation_date": 1467794528, "post_id": 38219585, "comment_id": 63862156, "body": "I recommend you write your code, comments, and var/names/etc in English instead of your main language, it will be easier to share, maintain, reuse later. Sorry for the unrelated comment though."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1467794532, "post_id": 38219585, "comment_id": 63862161, "body": "<code>t_Grilles[inc] = *grille;</code> --&gt; <code>memcpy(&amp;t_Grilles[inc], grille, sizeof(Grille));</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1467794663, "post_id": 38219585, "comment_id": 63862226, "body": "and are you sure that <code>inc &lt; NBGRILLE</code>? I guess it isn&#39;t and you go out of bounds of array that corrupt other main local scoped varables."}, {"owner": {"reputation": 151, "user_id": 5084994, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1132f5e80d48d71e95bc56ebd494dde0?s=128&d=identicon&r=PG&f=1", "display_name": "MickMRCX", "link": "https://stackoverflow.com/users/5084994/mickmrcx"}, "reply_to_user": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1467794976, "post_id": 38219585, "comment_id": 63862380, "body": "@TimF This code is not mean to be shared, only in this case for the help."}, {"owner": {"reputation": 151, "user_id": 5084994, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1132f5e80d48d71e95bc56ebd494dde0?s=128&d=identicon&r=PG&f=1", "display_name": "MickMRCX", "link": "https://stackoverflow.com/users/5084994/mickmrcx"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467795140, "post_id": 38219585, "comment_id": 63862488, "body": "@Lps ... I put a warning to update the value NBGRILLE if the file &quot;fichierPar&quot; changed. I didn&#39;t update the value. I hate myself. Thanks. Could you create a short answer so I can validate it ?"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467797198, "post_id": 38220209, "comment_id": 63863586, "body": "That <code>memcpy</code> is unnecessary. The OP is performing direct structure assignment, which is supported in C. On the other hand, the dynamic allocation of <code>grille</code> and <code>ligne</code> make little sense in the first place; both are more than reasonable to be simple locals."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467797400, "post_id": 38220209, "comment_id": 63863702, "body": "@WhozCraig I didn&#39;t emphasize the <code>memcpy</code> change because I did it for my clearness. I agree, local variable are more than  enough."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 2, "last_activity_date": 1467796498, "last_edit_date": 1467796498, "creation_date": 1467796178, "answer_id": 38220209, "question_id": 38219585, "link": "https://stackoverflow.com/questions/38219585/allocated-variable-inaccessible/38220209#38220209", "title": "allocated variable inaccessible", "body": "<p>The problem you are facing is probably caused by accessing <code>t_Grilles</code> array out of bounds into <code>chargerGrilles</code> function. Accessing it out with <code>index &gt; NBGRILLE</code> invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a> and, in your case, corrupt other main local scoped variables.</p>\n\n<p>You must ensure that the loop <code>while(fgets(ligne, 100, fdParam))</code> takes care of <code>t_Grilles</code> size.</p>\n\n<p>So a solution can be:</p>\n\n<pre><code> while((fgets(ligne, 100, fdParam)) &amp;&amp; (inc &lt;NBGRILLE)) {\n    if(verifierCommentaire(ligne) != 0){\n\n        remplirGrille(grille, ligne);\n        t_Grilles[inc] = *grille;\n\n        inc++;\n    }\n}\n</code></pre>\n\n<p>Best, from my point of view, is to add a parameter to function to pass array size.</p>\n\n<pre><code>void chargerGrilles(char *fichierPar, Grille t_Grilles[], size_t size)\n{\n    FILE *fdParam;\n    char *ligne;\n    Grille *grille;\n    size_t inc = 0;\n\n    grille = malloc(sizeof(Grille));\n\n    ligne = malloc(sizeof(char) * 100);\n\n    if ((grille != NULL) &amp;&amp; (ligne != NULL))\n    {\n       fdParam = fopen(fichierPar, \"rb\");\n       verifierOuverture(fdParam, fichierPar);\n\n       while((fgets(ligne, 100, fdParam)) &amp;&amp; (inc &lt; size)){\n          if(verifierCommentaire(ligne) != 0){\n\n            remplirGrille(grille, ligne);\n            memcpy(&amp;t_Grilles[inc], grille, sizeof(Grille));\n\n            inc++;\n          }\n       }\n    }\n\n    free(ligne);\n    free(grille);\n    fclose(fdParam);\n}\n</code></pre>\n\n<p>and call it by</p>\n\n<pre><code>chargerGrilles(fichierPar, t_Grilles, sizeof(t_Grilles)/sizeof(t_Grilles[0]));\n</code></pre>\n\n<p>As you can see I also added check for <code>malloc</code>ated variable. You <strong>always have to</strong> check <code>malloc</code> return value. Otherwise you can invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a>.</p>\n\n<p>Finally you must <code>free</code> <code>malloc</code>ated memory or you will see memory leaks.</p>\n"}], "owner": {"reputation": 151, "user_id": 5084994, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1132f5e80d48d71e95bc56ebd494dde0?s=128&d=identicon&r=PG&f=1", "display_name": "MickMRCX", "link": "https://stackoverflow.com/users/5084994/mickmrcx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 38220209, "answer_count": 1, "score": 0, "last_activity_date": 1467796498, "creation_date": 1467794212, "question_id": 38219585, "link": "https://stackoverflow.com/questions/38219585/allocated-variable-inaccessible", "title": "allocated variable inaccessible", "body": "<p>I'm working on a script which means to put a text at the end of a PostScript file before converting it into a pdf file.</p>\n\n<pre><code>int main(int argc, char *argv[]){\n    // D\u00e9claration des variables\n\n    // Fichier source\n    char *source;\n    // Extension du fichier source\n    char *extension;\n    // Fichier de parametre\n    char *fichierPar;\n    // Numero et Type de folio du fichier\n    char *numeroFolio;\n    char *typeFolio;\n\n    // Tableaux contenant les types de folio a scanner\n    // suivant le numero de folio\n    char **t_F000 = NULL;\n\n    // Allocation des espaces m\u00e9moires n\u00e9cessaires aux variables\n    source = malloc(sizeof(char) * strlen(argv[1]));\n    fichierPar = malloc(sizeof(char) * strlen(argv[2]));\n    extension = malloc(sizeof(char) * 5);\n    typeFolio = malloc(sizeof(char) * 4);\n    numeroFolio = malloc(sizeof(char) * 4);\n\n    // Grille de parametre\n    // AJUSTER LA TAILLE DU TABLEAU AVEC LE FICHIER DE LOGO.PAR\n    // DANS verification.h\n    Grille t_Grilles[NBGRILLE];\n\n    // On copie les arguments dans des varibles plus explicites\n    strcpy(source, argv[1]);\n    strcpy(fichierPar, argv[2]);\n\n    // GetFolio appel getNumeroFolio qui appel getTypeFolio\n    // Ces deux fonctions extraient du nom de fichier\n    // le numero et le type de folio\n    getFolio(source, numeroFolio, typeFolio);\n\n    printf(\"strlen : %d\\n\", strlen(numeroFolio));\n    fflush(stdout);\n    printf(\"numero : %s\\n\", numeroFolio);\n    fflush(stdout);\n\n    // Lecture du fichier LOGO.PAR et enregistrement en m\u00e9moire\n    chargerGrilles(fichierPar, t_Grilles);\n\n    printf(\"bonjour\\n\");\n    fflush(stdout);\n\n    printf(\"strlen : %d\\n\", strlen(numeroFolio));\n    fflush(stdout);\n\n    printf(\"numero : %s\", numeroFolio);\n    fflush(stdout);\n</code></pre>\n\n<p>The work doesn't stop there but I'm blocking on this point.<br>\nHere is the code of ChargerGrille();</p>\n\n<pre><code>void chargerGrilles(char *fichierPar, Grille t_Grilles[]){\n    FILE *fdParam;\n    char *ligne;\n    Grille *grille;\n    int inc = 0;\n\n    grille = malloc(sizeof(Grille));\n\n    ligne = malloc(sizeof(char) * 100);\n\n    fdParam = fopen(fichierPar, \"rb\");\n    verifierOuverture(fdParam, fichierPar);\n\n    while(fgets(ligne, 100, fdParam)){\n        if(verifierCommentaire(ligne) != 0){\n\n            remplirGrille(grille, ligne);\n            t_Grilles[inc] = *grille;\n\n            inc++;\n        }\n    }\n    fclose(fdParam);\n}\n\nvoid remplirGrille(Grille *grille, char *ligne){\n    char *split;\n\n    // Separation sur les espaces\n    split = malloc(strlen(ligne));\n    split = strtok(ligne, \" \");\n    strcpy(grille-&gt;nom, split);\n    split = NULL;\n    free(split);\n\n    split = malloc(strlen(ligne));\n    split = strtok(NULL, \" \");\n    grille-&gt;posX = strtof(split, NULL);\n    split = NULL;\n    free(split);\n\n    split = malloc(strlen(ligne));\n    split = strtok(NULL, \" \");\n    grille-&gt;posY = strtof(split, NULL);\n    split = NULL;\n    free(split);\n\n    split = malloc(strlen(ligne));\n    split = strtok(NULL, \" \");\n    grille-&gt;longX = strtof(split, NULL);\n    split = NULL;\n    free(split);\n\n    split = malloc(strlen(ligne));\n    split = strtok(NULL, \" \");\n    grille-&gt;hautY = strtof(split, NULL);\n    split = NULL;\n    free(split);\n\n    split = malloc(strlen(ligne));\n    split = strtok(NULL, \" \");\n    strcpy(grille-&gt;logo, split);\n    split = NULL;\n    free(split);\n\n    printf(\"Hello World !\\n\");\n    fflush(stdout);\n}\n</code></pre>\n\n<p>There is my declaration of my struct : </p>\n\n<pre><code>struct Grille{\n    // Nom du tableau\n    char nom[4];\n\n    // Position du point inferieur gauche\n    long int posX;\n    long int posY;\n\n    // Longueur X\n    long int longX;\n    // HAUTEUR Y\n    long int hautY;\n\n    // Nom du fichier logo.jpg\n    char logo[50];\n};\n\ntypedef struct Grille Grille;\n</code></pre>\n\n<p>In gdb i can print \"source\", \"extension\", \"fichierPar\", 'numeroFolio\" and \"typeFolio\" just before the call to chargerGrilles(fichierPar, t_Grilles); after that it won't be accessible.</p>\n\n<pre><code>108             chargerGrilles(fichierPar, t_Grilles);\n(gdb) print source\n$7 = 0x604010 \"F290390001_SCH001-2.POS\"\n(gdb) print numeroFolio\n$8 = 0x604090 \"001\"\n(gdb) n\nHello World !\nHello World !\nHello World !\nHello World !\n110             printf(\"bonjour\\n\");\n(gdb) n\nbonjour\n111             fflush(stdout);\n(gdb) print source\n$9 = 0x303732 &lt;error: Cannot access memory at address 0x303732&gt;\n(gdb) print numeroFolio\n$10 = 0x53 &lt;error: Cannot access memory at address 0x53&gt;\n</code></pre>\n\n<p>If I put a watch on numeroFolio, gdb stop on this line :</p>\n\n<pre><code>t_Grilles[inc] = *grille;\n</code></pre>\n\n<p>What happened to the allocated memory ? Why the variables' addresses change ?</p>\n\n<hr>\n\n<p>PS : Do not take care of the many printf/fflush, It's how I try to spot where is the segFault</p>\n"}, {"tags": ["c", "gradle"], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1467794373, "creation_date": 1467794373, "answer_id": 38219653, "question_id": 38219569, "link": "https://stackoverflow.com/questions/38219569/strange-behavior-of-macro-file-with-gradle/38219653#38219653", "title": "Strange behavior of macro __FILE__ with gradle", "body": "<p>The behaviour of <code>__FILE__</code> is clear: it is a macro that expands to the name of the current input file, in the form of a C string constant.</p>\n\n<p>It is the path used by the preprocessor to open the file.</p>\n\n<p>The fact that you get the whole path is to be expected.</p>\n"}, {"tags": [], "owner": {"reputation": 797, "user_id": 3695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9a774368758472af716b807db6eb45?s=128&d=identicon&r=PG&f=1", "display_name": "majk", "link": "https://stackoverflow.com/users/3695740/majk"}, "is_accepted": false, "score": 3, "last_activity_date": 1467795025, "creation_date": 1467795025, "answer_id": 38219837, "question_id": 38219569, "link": "https://stackoverflow.com/questions/38219569/strange-behavior-of-macro-file-with-gradle/38219837#38219837", "title": "Strange behavior of macro __FILE__ with gradle", "body": "<p>Unfortunately due to way how gradle invokes the compiler, this is expected. If you want to get just the relative project path, you can do something like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(void)\n{\n    printf(\"%s\\n\", __FILE__ + PROJECT_PATH_LEN);\n}\n</code></pre>\n\n<p>and then add an appropriate define of <code>PROJECT_PATH_LEN</code> to <code>file(\"./\").absolutePath.length</code> (see <a href=\"https://docs.gradle.org/current/userguide/native_software.html#N18C89\" rel=\"nofollow\">gradle documentation on how to add defines</a>).</p>\n"}], "owner": {"reputation": 136, "user_id": 5120589, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6tg_iNJV-Qs/AAAAAAAAAAI/AAAAAAAAAnA/1Gq0wiQo9qw/photo.jpg?sz=128", "display_name": "Kurokawa Masato", "link": "https://stackoverflow.com/users/5120589/kurokawa-masato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1467795025, "creation_date": 1467794169, "question_id": 38219569, "link": "https://stackoverflow.com/questions/38219569/strange-behavior-of-macro-file-with-gradle", "title": "Strange behavior of macro __FILE__ with gradle", "body": "<p>As you know, macro__FILE__ in c/c++ contain a path to file, from where it was compiled.\nFor example:</p>\n\n<pre><code>gcc test.c -o test\n./test\ntest.c\n\ngcc myFolder/test.c -o test\n./test\nmyFolder/test.c\n</code></pre>\n\n<p>But when I try to compile with gradle, it output the full path to my file, like:</p>\n\n<pre><code>home/usr/myFolder/test.c.\n</code></pre>\n\n<p>I want to precompile macro__FILE__ contain only interior project path but not full.</p>\n\n<p>Gradle File:</p>\n\n<pre><code>apply plugin: 'c'\n\nmodel {\n    components {\n            main(NativeExecutableSpec) {\n                    sources {\n                        c {\n                            source {\n                                srcDir \"./\"\n                                include \"*.c\"\n                            }\n                        }\n                    }\n            }\n    }\n}\n</code></pre>\n\n<p>test.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(void)\n{\n    printf(\"%s\\n\", __FILE__);\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "simd", "neon"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6554916, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2f8e7e3977e77c306b3a122caf821003?s=128&d=identicon&r=PG&f=1", "display_name": "maofu", "link": "https://stackoverflow.com/users/6554916/maofu"}, "edited": false, "score": 1, "creation_date": 1467796254, "post_id": 38219811, "comment_id": 63863090, "body": "Thank you!That is helpful."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 3, "last_activity_date": 1467796690, "last_edit_date": 1467796690, "creation_date": 1467794948, "answer_id": 38219811, "question_id": 38219436, "link": "https://stackoverflow.com/questions/38219436/neon-intrinsic-compile-error-argument-must-be-a-constant-when-using-vshr-n-u3/38219811#38219811", "title": "NEON intrinsic, compile error &quot;argument must be a constant&quot; when using vshr_n_u32", "body": "<p>The shift in <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0472j/chr1360928374486.html\" rel=\"nofollow\">vshr_n_u32</a> has to be a compile-time literal constant, as the shift value is encoded as part of the ARM instruction itself. Since you only have a few possible shift values then you might want to use a <code>switch</code> statement to handle each case. Or you could just use <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0472j/chr1360928374486.html\" rel=\"nofollow\">vshl_u32</a> with a negative shift (you pass a second <code>int32x2_t</code> parameter containing the shift values).</p>\n"}], "owner": {"reputation": 139, "user_id": 6554916, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2f8e7e3977e77c306b3a122caf821003?s=128&d=identicon&r=PG&f=1", "display_name": "maofu", "link": "https://stackoverflow.com/users/6554916/maofu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1485, "favorite_count": 2, "accepted_answer_id": 38219811, "answer_count": 1, "score": 1, "last_activity_date": 1467796690, "creation_date": 1467793649, "last_edit_date": 1467795383, "question_id": 38219436, "link": "https://stackoverflow.com/questions/38219436/neon-intrinsic-compile-error-argument-must-be-a-constant-when-using-vshr-n-u3", "title": "NEON intrinsic, compile error &quot;argument must be a constant&quot; when using vshr_n_u32", "body": "<p>I got a compile error \"argument must be a constant\" when using NEON intrinsic <code>vshr_n_u32</code>. The function prototype is:</p>\n\n<pre><code>__extension__ static __inline uint32x2_t __attribute__ ((__always_inline__))\nvshr_n_u32 (uint32x2_t __a, const int __b)\n{\n  return (uint32x2_t)__builtin_neon_vshr_nv2si ((int32x2_t) __a, __b, 0);\n}\n</code></pre>\n\n<p>And here is my function:</p>\n\n<pre><code>uint32x2_t shift_func(int index)\n{\n    int shift_bit[] = {2, 4, 5, 6, 7, 8, 9, 10};\n    int n_val = shift_bit[index];\n\n    uint32x2_t src_reg = {16, 32};\n    return vshr_n_u32(src_reg, n_val);\n}\n</code></pre>\n\n<p>The value of <code>n_val</code> only can be known at run-time. But according to compile error, it seems that the value of <code>n_val</code> should be known at compile-time. Although the type of <code>__b</code> is <code>const int</code>, I think it should be right to input an int variable.</p>\n\n<p>How to remove the compile error? Or how to use <code>vshr_n_u32</code> in this function?</p>\n"}, {"tags": ["c", "regex", "pcre", "lighttpd"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1467797230, "post_id": 38219093, "comment_id": 63863604, "body": "a good search engine is your friend <a href=\"http://www.mitchr.me/SS/exampleCode/AUPG/pcre_example.c.html\" rel=\"nofollow noreferrer\">mitchr.me/SS/exampleCode/AUPG/pcre_example.c.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1467798011, "last_edit_date": 1467798011, "creation_date": 1467793950, "answer_id": 38219515, "question_id": 38219093, "link": "https://stackoverflow.com/questions/38219093/how-to-use-pcre-library-to-match-url-in-c-program/38219515#38219515", "title": "how to use pcre library to match url in c program", "body": "<p>quick shot from the hip (but without pcre), bare C ( small state machine )</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint isMatch( char *url, char *p ) {\n    int state= 0;\n    while ( *url != 0 ) {\n        switch (state) {\n            // first state: char must be '/'\n            case 0: \n               if (*url != '/') return 0;\n               state=1;\n               url++;\n               break;\n            // only characters and numbers are valid, another '/' ends this\n            case 1: \n               if (isalpha(*url) || isdigit(*url)) { *p++=*url; url++; break; }\n               if (*url == '/') { url++; state=2; break; }\n               return 0; // not alhanum nor '/' --&gt; not valid;\n               break;\n           case 2:\n               *p++=0;\n               if (strcmp(url, \"phpmyadmin\")==0) return 1;\n               return 0;\n           }\n   }\n   return 0;\n}\n\nint main() {\n    char part[256];\n\n    char *x1 = \"/019sasA/phpmyadmin\";\n    int matches = isMatch(x1, part);\n    printf (\"%s, %i --&gt; %s \\n\", x1, matches , matches ? part : \"\");\n\n    char *x2 = \"/019sasA/phpadmin\";\n    matches = isMatch(x2, part);\n    printf (\"%s, %i --&gt; %s \\n\", x2, matches , matches ? part : \"\");\n\n    char *x3 = \"/019sa,sA/phpmyadmin\";\n    matches = isMatch(x3, part);\n    printf (\"%s, %i --&gt; %s \\n\", x3, matches , matches ? part : \"\");\n}\n</code></pre>\n\n<p>possible issues: <br>\n\"//phpmyadmin\" is valid (could be easily fixed with one more state, where the first state only accepts isdigit() and isnumber(), no '/')<br>\n\"/phpmyadmin\" is invalid<br></p>\n"}], "owner": {"reputation": 297, "user_id": 2555802, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b21de390d4b7eba52df7d5dd5efea0a?s=128&d=identicon&r=PG&f=1", "display_name": "Surjit Sidhu", "link": "https://stackoverflow.com/users/2555802/surjit-sidhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467798011, "creation_date": 1467792404, "last_edit_date": 1467792731, "question_id": 38219093, "link": "https://stackoverflow.com/questions/38219093/how-to-use-pcre-library-to-match-url-in-c-program", "title": "how to use pcre library to match url in c program", "body": "<p>how to match url <code>/[a-z0-9]/phpmyadmin/</code> ?\nif url matches regex = <code>/^\\/([a-z0-9])+\\/phpmyadmin/g</code>\nhow to capture groups to char for further operation?</p>\n\n<p>for example, i have this</p>\n\n<pre><code>char *url = \"/zs0099/phpmyadmin\";\n</code></pre>\n\n<p>I want to match it against regex <code>/^\\/([a-z0-9])+\\/phpmyadmin/g</code>\nif it matches then</p>\n\n<pre><code>char *token = \"zs0099\"; //(how to get this value to assigned here)\n</code></pre>\n"}, {"tags": ["c", "ffmpeg"], "comments": [{"owner": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 0, "creation_date": 1467806784, "post_id": 38218956, "comment_id": 63869092, "body": "You&#39;ll have to inspect the <a href=\"https://github.com/FFmpeg/FFmpeg/blob/master/libavfilter/af_atempo.c\" rel=\"nofollow noreferrer\">source code</a> to discover that. Workaround is to chain multiple atempo filters to get resulting ratio."}, {"owner": {"reputation": 11, "user_id": 2814134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b495cdb14cd97ebb99c2b83b61b02f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Tian", "link": "https://stackoverflow.com/users/2814134/theo-tian"}, "reply_to_user": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 0, "creation_date": 1467856611, "post_id": 38218956, "comment_id": 63894452, "body": "Thx a lot. this helpful"}], "answers": [{"tags": [], "owner": {"reputation": 813, "user_id": 6051408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be87c5a58eef94871786a7d9be6e996?s=128&d=identicon&r=PG&f=1", "display_name": "jdek", "link": "https://stackoverflow.com/users/6051408/jdek"}, "is_accepted": false, "score": 4, "last_activity_date": 1470690871, "creation_date": 1470690871, "answer_id": 38838641, "question_id": 38218956, "link": "https://stackoverflow.com/questions/38218956/why-must-ffmpegs-af-atempo-filter-be-in-the-0-5-2-0-range/38838641#38838641", "title": "Why must FFmpeg&#39;s af_atempo filter be in the [0.5, 2.0] range?", "body": "<p>The reason that the <code>af_atempo</code> filter requires between 0.5 and 2.0 (inclusive) is because of it's underlying algorithm. <code>af_atempo</code> uses the 'WSOLA' algorithm (Waveform Similarity Based Overlap-Add) to change the audio's timescale without changing pitch, and those limits are as a result of the algorithm itself.</p>\n"}, {"comments": [{"owner": {"reputation": 5370, "user_id": 2964379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/scgat.png?s=128&g=1", "display_name": "0101100101", "link": "https://stackoverflow.com/users/2964379/0101100101"}, "edited": false, "score": 0, "creation_date": 1561941452, "post_id": 50900872, "comment_id": 100210380, "body": "Seems there&#39;s no other option! And you&#39;re right, truly inefficient. This means to slow it down for example by 100 times, <code>atempo</code> has to be applied 7 times (\u256f&#176;\u25a1&#176;)\u256f\ufe35 \u253b\u2501\u253b"}], "tags": [], "owner": {"reputation": 9346, "user_id": 1192761, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZukkV.jpg?s=128&g=1", "display_name": "Kirill Kulakov", "link": "https://stackoverflow.com/users/1192761/kirill-kulakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1529273413, "creation_date": 1529273413, "answer_id": 50900872, "question_id": 38218956, "link": "https://stackoverflow.com/questions/38218956/why-must-ffmpegs-af-atempo-filter-be-in-the-0-5-2-0-range/50900872#50900872", "title": "Why must FFmpeg&#39;s af_atempo filter be in the [0.5, 2.0] range?", "body": "<p>An easy, but inefficient workaroun is cascading multiple tempo filter, here is an example that speeds video and audio by 4</p>\n\n<pre><code>ffmpeg -i input.MP4 -filter_complex \"[0:v]setpts=0.25*PTS[v];[0:a]atempo=2.0,atempo=2.0[a]\" -map \"[v]\" -map \"[a]\" output.mp4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2662, "user_id": 5634769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aadff15bb5cec395bce83aa41a2c758a?s=128&d=identicon&r=PG&f=1", "display_name": "gpasch", "link": "https://stackoverflow.com/users/5634769/gpasch"}, "edited": false, "score": 0, "creation_date": 1607975154, "post_id": 50918170, "comment_id": 115435485, "body": "the atempto has problems but Im not gonna go through the register process - just noting it - it produces artifacts at the beginning."}, {"owner": {"reputation": 85949, "user_id": 1109017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX561.png?s=128&g=1", "display_name": "llogan", "link": "https://stackoverflow.com/users/1109017/llogan"}, "reply_to_user": {"reputation": 2662, "user_id": 5634769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aadff15bb5cec395bce83aa41a2c758a?s=128&d=identicon&r=PG&f=1", "display_name": "gpasch", "link": "https://stackoverflow.com/users/5634769/gpasch"}, "edited": false, "score": 0, "creation_date": 1607979830, "post_id": 50918170, "comment_id": 115437327, "body": "@gpasch You may get better results with the <a href=\"https://ffmpeg.org/ffmpeg-filters.html#rubberband\" rel=\"nofollow noreferrer\">rubberband filter</a> (or the standalone <code>rubberband</code> tool)."}], "tags": [], "owner": {"reputation": 85949, "user_id": 1109017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX561.png?s=128&g=1", "display_name": "llogan", "link": "https://stackoverflow.com/users/1109017/llogan"}, "is_accepted": false, "score": 4, "last_activity_date": 1529360173, "creation_date": 1529360173, "answer_id": 50918170, "question_id": 38218956, "link": "https://stackoverflow.com/questions/38218956/why-must-ffmpegs-af-atempo-filter-be-in-the-0-5-2-0-range/50918170#50918170", "title": "Why must FFmpeg&#39;s af_atempo filter be in the [0.5, 2.0] range?", "body": "<p>The <a href=\"https://ffmpeg.org/ffmpeg-filters.html#atempo\" rel=\"nofollow noreferrer\">atempo</a> filter now has a range of 0.5-100:</p>\n\n<p><a href=\"https://git.videolan.org/gitweb.cgi/ffmpeg.git/?a=commit;h=29cddc99cd8302e462bbae572e885e88f63d6dc3\" rel=\"nofollow noreferrer\">lavfi/atempo: raise max tempo limit</a></p>\n"}], "owner": {"reputation": 11, "user_id": 2814134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b495cdb14cd97ebb99c2b83b61b02f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Tian", "link": "https://stackoverflow.com/users/2814134/theo-tian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1529360173, "creation_date": 1467791935, "last_edit_date": 1470701359, "question_id": 38218956, "link": "https://stackoverflow.com/questions/38218956/why-must-ffmpegs-af-atempo-filter-be-in-the-0-5-2-0-range", "title": "Why must FFmpeg&#39;s af_atempo filter be in the [0.5, 2.0] range?", "body": "<p>When I tried to use this filter with FFmpeg, I found the audio tempo argument must be in this range [0.5, 2.0].</p>\n\n<p>But I don't understand why the audio tempo filter's argument has to be in this range.</p>\n\n<p>Why does it have to be in this range?</p>\n"}, {"tags": ["c", "cmake", "raspberry-pi"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4299193, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/80d48f2aab0f6f5fac88e37d2f407041?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4299193/mex"}, "edited": false, "score": 0, "creation_date": 1467793209, "post_id": 38219177, "comment_id": 63861428, "body": "Thank you very much!! that was the problem, now it works! what I do not understand is why even the wrong way on my laptop runs quietly"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 137, "user_id": 4299193, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/80d48f2aab0f6f5fac88e37d2f407041?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4299193/mex"}, "edited": false, "score": 0, "creation_date": 1467793530, "post_id": 38219177, "comment_id": 63861609, "body": "Probably, your laptop has different <code>FindGLIB.cmake</code> script, which does not define imported targets but variables instead. Unlike to targets, redefinition of variables is not an error on CMake."}, {"owner": {"reputation": 137, "user_id": 4299193, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/80d48f2aab0f6f5fac88e37d2f407041?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4299193/mex"}, "edited": false, "score": 0, "creation_date": 1467793770, "post_id": 38219177, "comment_id": 63861734, "body": "The FindGLIB.cmake script is the same for raspberry and laptop, I copied all the project files, maybe on arm does things differently?, boh, anyway, thanks again!"}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1467792687, "creation_date": 1467792687, "answer_id": 38219177, "question_id": 38218838, "link": "https://stackoverflow.com/questions/38218838/cmake-not-compile-on-raspberry/38219177#38219177", "title": "CMake not compile on raspberry", "body": "<p>You call twice</p>\n\n<pre><code>find_package(GLIB REQUIRED)\n</code></pre>\n\n<p>First time it is called from  top-level <code>CMakeLists.txt</code> and defines <code>glib-2.0</code> target. Second time it is called from <code>librerie/CMakeLists.txt</code> and attempt to create <code>glib-2.0</code> again. That is why you see that error message: the target is already defined in this scope.</p>\n\n<p>Possible workaround is to step into library subdirectory first, and only then call <code>find_package()</code> in top-level <em>CMakeLists.txt</em>:</p>\n\n<pre><code>add_subdirectory (librerie)\n\nfind_package(GLIB REQUIRED)\nfind_package(MHD REQUIRED)\n</code></pre>\n\n<p>Because <em>IMPORTED</em> targets has local visibility, <code>glib-2.0</code> target defined by <code>find_package(GLIB)</code> call from subdirectory <em>librerie/</em> will not be visible after returning from this subdirectory. So the second call from top-level directory will succeed.</p>\n"}], "owner": {"reputation": 137, "user_id": 4299193, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/80d48f2aab0f6f5fac88e37d2f407041?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4299193/mex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 38219177, "answer_count": 1, "score": 0, "last_activity_date": 1467792687, "creation_date": 1467791468, "question_id": 38218838, "link": "https://stackoverflow.com/questions/38218838/cmake-not-compile-on-raspberry", "title": "CMake not compile on raspberry", "body": "<p>I'm new with cmake.\nWith cmake I was able to compile my project on my laptop, but on the raspberry is not working.</p>\n\n<p>This is the error i get on raspberry:</p>\n\n<pre><code>-- The C compiler identification is GNU 4.9.2\n-- The CXX compiler identification is GNU 4.9.2\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"0.28\") \n-- checking for one of the modules 'glib-2.0'\n-- Found GLib: /usr/lib/arm-linux-gnueabihf/libglib-2.0.so (found   version \"2.42.1\") \n-- Found mhd: /usr/include  \nCMake Error at cmake/FindGLIB.cmake:39 (add_library): add_library cannot create imported target \"glib-2.0\" because another target with the same name already exists.\nCall Stack (most recent call first):librerie/CMakeLists.txt:2 (find_package)\n\n-- Found GLib: /usr/lib/arm-linux-gnueabihf/libglib-2.0.so (found version \"2.42.1\") \n-- Configuring incomplete, errors occurred!\nSee also \"/home/pi/pl1/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n\n<p>This is my project structure:</p>\n\n<pre><code>src-&gt;\n---- CMakeLists.txt\n---- main.c\n---- librerie-&gt;\n-------------- CMakeLists.txt\n-------------- cJSON.c\n-------------- cJSON.h\n-------------- config.c\n-------------- config.h\n-------------- server_web.c\n-------------- server_web.h\n-------------- funzioni_thread.c\n-------------- funzioni_thread.h\n---- cmake-&gt;\n-------------- FindGLIB.cmake\n-------------- FindMHD.cmake\n</code></pre>\n\n<p>This is First CMakeLists :</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.6)\nproject (TestPL)\n\ninclude_directories(\"${PROJECT_BINARY_DIR}\")\nlist(APPEND CMAKE_MODULE_PATH \"${CMAKE_CURRENT_LIST_DIR}/cmake\")\n\nfind_package(GLIB REQUIRED)\nfind_package(MHD REQUIRED)\n\nadd_subdirectory (librerie)\nset (EXTRA_LIBS ${EXTRA_LIBS} librerie)\n\ninclude_directories (${GLib_INCLUDE_DIRS} ${EXTRA_LIBS})\n\n# add the executable\nadd_executable(TestPL main.c)\ntarget_link_libraries (TestPL ${GLib_LIBRARY} ${MHD_LIBRARY} ${EXTRA_LIBS} m)\n</code></pre>\n\n<p>This is CMakeLists in librerie directory:</p>\n\n<pre><code>find_package(GLIB REQUIRED)\nfind_package(MHD REQUIRED)\ninclude_directories (${GLib_INCLUDE_DIRS} ${EXTRA_LIBS})\n\nadd_library (librerie cJSON.c config.c generic.c server_web.c  funzioni_thread.c)\ntarget_link_libraries (librerie ${GLib_LIBRARY} ${MHD_LIBRARY})\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "switch-statement", "case"], "comments": [{"owner": {"reputation": 1149, "user_id": 1697008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c5c26c404a765ed2e55e3ab0c1c65d?s=128&d=identicon&r=PG", "display_name": "daf", "link": "https://stackoverflow.com/users/1697008/daf"}, "edited": false, "score": 4, "creation_date": 1467791481, "post_id": 38218812, "comment_id": 63860434, "body": "It may be left in error (as you suggest) -- it also may be a reminder to the original dev to come back to that point as the value 2 might be a value which crops up in regular execution. The effect on runtime decisions is nothing -- indeed, a good compiler should chuck out the case."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1467791819, "post_id": 38218812, "comment_id": 63860650, "body": "Code is not just for compiling. Code is mostly for reading. Code like that shows the intent that this is a case worth considering on its own even though its implementation happens to match the default."}, {"owner": {"reputation": 1473, "user_id": 6517894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0511b1daef16fed51233f70c4370dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Realtime Rik", "link": "https://stackoverflow.com/users/6517894/realtime-rik"}, "edited": false, "score": 1, "creation_date": 1467792001, "post_id": 38218812, "comment_id": 63860756, "body": "Possibly could have been done to make it clear that x=2 causes the default action."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1467792405, "post_id": 38218812, "comment_id": 63860948, "body": "How simplified your example is? is <code>x</code> an enum?"}, {"owner": {"reputation": 1304, "user_id": 2286108, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a361bd6dc11a613f3f1cc258f0343bdc?s=128&d=identicon&r=PG", "display_name": "Thomas B&#246;hm", "link": "https://stackoverflow.com/users/2286108/thomas-b%c3%b6hm"}, "edited": false, "score": 0, "creation_date": 1467792440, "post_id": 38218812, "comment_id": 63860966, "body": "No, x is an int, but can get only some values according to the program. It is simplified by removing cases, and change the values, to 1 and 2."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467794218, "post_id": 38218812, "comment_id": 63861997, "body": "It documents that the person intended case 2 to have the same behaviour as the default case; and they didn&#39;t just forget about it"}, {"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "edited": false, "score": 0, "creation_date": 1467794245, "post_id": 38218812, "comment_id": 63862011, "body": "some coding guides force people to always have a &quot;default&quot; in a switch statement, so even if there&#39;s only case 1 and case 2 possible, the &quot;default&quot; is set to act the same way case 2 does"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467792272, "creation_date": 1467792272, "answer_id": 38219051, "question_id": 38218812, "link": "https://stackoverflow.com/questions/38218812/c-empty-case-before-default-useless/38219051#38219051", "title": "C: Empty case before default, useless?", "body": "<p>There is no reason for it. The explicit <code>case 2</code> could be an attempt of writing self-documenting code, but here it doesn't really add anything, as the code lacks meaningful comments that explain what's unique with case 2. </p>\n\n<p>Sometimes you could write code like this to explicitly document to the reader that you have considered all possible values that a variable can have. For example such self-documenting code might make sense with enums.</p>\n\n<p>In this case, it really just looks like it is code still in development. Or it's some sloppily written left-overs that made it to the production code.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467794448, "post_id": 38219175, "comment_id": 63862110, "body": "MISRA only enforces the default clause. And the reason is defensive programming, it is not there for writing self-documenting code. Although I suppose defensive programming and self-documenting code are often related."}], "tags": [], "owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "is_accepted": false, "score": 0, "last_activity_date": 1467792679, "creation_date": 1467792679, "answer_id": 38219175, "question_id": 38218812, "link": "https://stackoverflow.com/questions/38218812/c-empty-case-before-default-useless/38219175#38219175", "title": "C: Empty case before default, useless?", "body": "<p>Last time I used MISRA C (embedded C rules for vehicles), all switch statements had to have a default clause.  Potentially, this could be a reason for what you are seeing, as this would mean that ALL values passed into the switch would do something.  Admittedly, that would mean the case 2 is redundant, but it might make things clearer when reading the code as a whole.  It could also be some sort of embedded compiler optimisation (sometimes embedded compilers generate more efficient code when given a switch, rather than several ifs).</p>\n"}], "owner": {"reputation": 1304, "user_id": 2286108, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a361bd6dc11a613f3f1cc258f0343bdc?s=128&d=identicon&r=PG", "display_name": "Thomas B&#246;hm", "link": "https://stackoverflow.com/users/2286108/thomas-b%c3%b6hm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "accepted_answer_id": 38219051, "answer_count": 2, "score": -1, "last_activity_date": 1467792679, "creation_date": 1467791341, "last_edit_date": 1467791572, "question_id": 38218812, "link": "https://stackoverflow.com/questions/38218812/c-empty-case-before-default-useless", "title": "C: Empty case before default, useless?", "body": "<p>In a program, I saw code like this (simplyfied):</p>\n\n<pre><code>switch (x){\n    case 1:\n        //dostuff\n        break;\n\n    /*___________________*/\n    //Here it is important\n    case 2:\n    default:\n        //dostuff\n        break;\n}\n</code></pre>\n\n<p>Now I was wondering why someone writes a case and leaves it empty before the default case.</p>\n\n<p>(Clearly it would make sense before another <code>case</code>).</p>\n\n<p>I know that in C, there is a fallthrough if there is no <code>break</code>, so if <code>x</code> is 2, the program runs in the <code>case 2:</code> part, and directly falls through to the default-case.</p>\n\n<p>So is the <code>case 2:</code>-case useless, since there is no code in it, and <code>default</code> will be done also without the label, so the same things are done with and without the case?</p>\n\n<p>Is there a reason to write code like this (like easier modification when maintaining, but in my opinion not really relevant), or did the programmer just not remove it by mistake?</p>\n\n<p>I have used <code>switch</code> several times in different languages, but never would have needed such code...</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467790246, "post_id": 38218397, "comment_id": 63859740, "body": "If i tell the program i need to give back 25 cents the program tells me I have to give the person 7 coins, but it should just tell me I have to give him one coin... a quarter."}, {"owner": {"reputation": 353, "user_id": 6539759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e25a62b34601d1e9a6a948752f7d700?s=128&d=identicon&r=PG&f=1", "display_name": "M. Timtow", "link": "https://stackoverflow.com/users/6539759/m-timtow"}, "edited": false, "score": 0, "creation_date": 1467790512, "post_id": 38218397, "comment_id": 63859895, "body": "No matter the number of cent you deduce, you keep increasing <code>coin_count</code> whithout making a distinction between the value of the coins, C variables don&#39;t have a unit, you must create a different variable for each type of coin."}, {"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "reply_to_user": {"reputation": 353, "user_id": 6539759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e25a62b34601d1e9a6a948752f7d700?s=128&d=identicon&r=PG&f=1", "display_name": "M. Timtow", "link": "https://stackoverflow.com/users/6539759/m-timtow"}, "edited": false, "score": 0, "creation_date": 1467790920, "post_id": 38218397, "comment_id": 63860124, "body": "But in the end each coin (not mattering what size it is) is one coin. so shoudldn&#39;t  it not matter if I only have one counter counting all the coins? Like not making a distinction between pennies and quarters so forth?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1467790921, "post_id": 38218397, "comment_id": 63860126, "body": "<code>while (cent_count &gt; 25)</code> --&gt; <code>while (cent_count &gt;= 25)</code> and <code>while (cent_count &gt; 10)</code> --&gt; <code>while (cent_count &gt;= 10)</code>"}, {"owner": {"reputation": 353, "user_id": 6539759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e25a62b34601d1e9a6a948752f7d700?s=128&d=identicon&r=PG&f=1", "display_name": "M. Timtow", "link": "https://stackoverflow.com/users/6539759/m-timtow"}, "edited": false, "score": 0, "creation_date": 1467791490, "post_id": 38218397, "comment_id": 63860443, "body": "Ok, I think I misunderstood your problem, forget my comment."}, {"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467792356, "post_id": 38218397, "comment_id": 63860919, "body": "ok ok thanks anyway ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467791294, "post_id": 38218742, "comment_id": 63860337, "body": "ok ok yeah thanks I didn&#39;t see that ;) but it still spits out wrong answers :/ Like someof them are correct but some are wrong"}, {"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467791508, "post_id": 38218742, "comment_id": 63860454, "body": "like if i say the person gave 20 dollars it gives the right answer of saying i have to give the person 80 coins (80 quarters). But if I put a more complex one like saying the person need 41 cents change the program says I have to give them 8 coins (when the answer should be 4 coins)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467791636, "post_id": 38218742, "comment_id": 63860533, "body": "So your code is supposed to count the minimum number of coins that can express the input value. If so your code is quite far away from the goal.... Actually is giving the number of coins with priority to 25 cent, then evaluate 10 cent and at the end checks for 1 cent. So the 8 coins is the correct answer of your actual algorithm <code>41</code> = <code>25x1</code> + <code>10x1</code> + <code>1x6</code>"}, {"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467791851, "post_id": 38218742, "comment_id": 63860673, "body": "Oh i&#39;m sorry it was working after that fix... just that the thing that was checking the answers wanted them written differently"}, {"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467791936, "post_id": 38218742, "comment_id": 63860721, "body": "yeah yeah I was just checking and saw that 8 was the actual answer I&#39;m sorry I didn&#39;t see that thanks a lot :)"}, {"owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467792018, "post_id": 38218742, "comment_id": 63860763, "body": "But so are you saying that the code is not correct? Like I am actually calculating something different?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "edited": false, "score": 0, "creation_date": 1467793287, "post_id": 38218742, "comment_id": 63861472, "body": "No. I&#39;m saying that the algorithm is working correctly giving you 8. But if your goal is to have the minum number of coins needed the code is wrong. I mean if your aim is to have <code>5</code> as answer to <code>41</code> (<code>10x4</code> + <code>1x1</code>) this is not the way you can achieve it."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 0, "last_activity_date": 1467791150, "creation_date": 1467791150, "answer_id": 38218742, "question_id": 38218397, "link": "https://stackoverflow.com/questions/38218397/cs50-pset1-greedy-not-working/38218742#38218742", "title": "CS50 pset1 Greedy not working", "body": "<p>Your first 2 loops don't take care of value <code>25</code> and <code>10</code>.</p>\n\n<p>In fact your algorithm is giving you 7, that is: <code>2 coins</code> of <code>10 cent</code>, and <code>5 coins</code> of <code>1 cent</code>.</p>\n\n<p>You must check for them, so:</p>\n\n<pre><code> while (cent_count &gt;= 25)\n {\n     coin_count++;\n     cent_count -= 25;\n }\n while (cent_count &gt;= 10)\n {\n     coin_count++;\n     cent_count -= 10;\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6495999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tN4RI.jpg?s=128&g=1", "display_name": "SirFoxington", "link": "https://stackoverflow.com/users/6495999/sirfoxington"}, "is_accepted": false, "score": 0, "last_activity_date": 1472592298, "creation_date": 1472592298, "answer_id": 39237319, "question_id": 38218397, "link": "https://stackoverflow.com/questions/38218397/cs50-pset1-greedy-not-working/39237319#39237319", "title": "CS50 pset1 Greedy not working", "body": "<p>Here's my code:</p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\nfloat input = -1.00;\nint n = 0;\nint c = 0;\n\nprintf(\"O hai! How much change is owed?: \");\ndo\n{\ninput = GetFloat();\nif(input &lt; 0)\nprintf(\"Positive number, please!: \");\n}\nwhile (input &lt; 0);\nc = roundf(input * 100);\n\nwhile(c &gt;= 25)\n{ \n    c = c - 25;\n    n++;\n}\nwhile (c &gt;= 10)\n{\n    c = c - 10;\n    n++;\n}\nwhile (c &gt;= 5)\n{\n    c = c - 5;\n    n++;\n}\nn = n + c;\n\nprintf(\"%i\\n\", n);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6554915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vb2Q9giHpeI/AAAAAAAAAAI/AAAAAAAABKY/8izGF1TgKxI/photo.jpg?sz=128", "display_name": "Vincent Worsfold", "link": "https://stackoverflow.com/users/6554915/vincent-worsfold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 38218742, "answer_count": 2, "score": -3, "last_activity_date": 1472592298, "creation_date": 1467790051, "last_edit_date": 1469848266, "question_id": 38218397, "link": "https://stackoverflow.com/questions/38218397/cs50-pset1-greedy-not-working", "title": "CS50 pset1 Greedy not working", "body": "<p>Like others here, I am trying to make a program called greedy that will tell me the least amount of coins that I have to give someone as change for a given amount of money. I made this but it gives me the wrong amount of coins and I don't know why :( </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;cs50.h&gt;\n #include &lt;math.h&gt;\n\n int main(void)\n\n {\n     float given_amount;\n     int cent_count;\n     int coin_count = 0; \n\n     do\n     {\n        printf(\"What is the amount of change I owe you?\\n\");\n        given_amount = GetFloat();\n     }\n     while (given_amount &lt; 0);\n\n     cent_count = (int)round(given_amount * 100);\n\n     while (cent_count &gt; 25)\n     {\n         coin_count++;\n         cent_count -= 25;\n     }\n     while (cent_count &gt; 10)\n     {\n         coin_count++;\n         cent_count -= 10;\n     }\n     while (cent_count &gt;= 1)\n     {\n         coin_count++;\n         cent_count -= 1;\n     }\n\n     printf(\"Take these %d coins\\n\", coin_count);\n\n }\n</code></pre>\n\n<p>If I tell the program I need to give back <code>25 cents</code> the program tells me I have to give the person <code>7 coins</code>, but it should just tell me I have to give him <code>one coin... a quarter</code>.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "edited": false, "score": 0, "creation_date": 1467789624, "post_id": 38218224, "comment_id": 63859414, "body": "Does your while loop has only char array[]? or does it have any other variables?"}, {"owner": {"reputation": 19, "user_id": 6554875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0bd38593eac54a2130e75041a3af64?s=128&d=identicon&r=PG&f=1", "display_name": "Harsha R", "link": "https://stackoverflow.com/users/6554875/harsha-r"}, "reply_to_user": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "edited": false, "score": 0, "creation_date": 1467789893, "post_id": 38218224, "comment_id": 63859554, "body": "It has only a character array"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467790168, "post_id": 38218224, "comment_id": 63859700, "body": "No problem as far array has fixed size. <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a> is a different story."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1467789875, "creation_date": 1467789875, "answer_id": 38218355, "question_id": 38218224, "link": "https://stackoverflow.com/questions/38218224/a-static-array-is-initialised-in-a-while-loop-can-stack-overflow-happen-in-this/38218355#38218355", "title": "A static array is initialised in a while loop. can stack overflow happen in this case", "body": "<p>The scope of <code>array</code> is limited to a particular iteration of the loop.</p>\n\n<p>So yes, conceptually, a new <code>array</code> is created on each iteration, although a good compiler may well optimise this out if there are no side effects.</p>\n\n<p>Whatever happens, there's no danger of a stack overflow error due to the repeated declaration and initialisation of <code>array</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 3, "last_activity_date": 1467790010, "creation_date": 1467790010, "answer_id": 38218386, "question_id": 38218224, "link": "https://stackoverflow.com/questions/38218224/a-static-array-is-initialised-in-a-while-loop-can-stack-overflow-happen-in-this/38218386#38218386", "title": "A static array is initialised in a while loop. can stack overflow happen in this case", "body": "<p>The lifetime of an object with automatic storage duration is the block in which it was defined. The block in this case starts at the beginning of the while loop and ends at the end of it. So theoretically the object is reallocated every time we enter the loop.</p>\n\n<p>In practice though, the compiler will just allocate enough space on the stack before the loop or even at the beginning of the function and just use that each time.</p>\n\n<p>No chance of stack overflow.</p>\n"}], "owner": {"reputation": 19, "user_id": 6554875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0bd38593eac54a2130e75041a3af64?s=128&d=identicon&r=PG&f=1", "display_name": "Harsha R", "link": "https://stackoverflow.com/users/6554875/harsha-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467790010, "creation_date": 1467789360, "last_edit_date": 1467789540, "question_id": 38218224, "link": "https://stackoverflow.com/questions/38218224/a-static-array-is-initialised-in-a-while-loop-can-stack-overflow-happen-in-this", "title": "A static array is initialised in a while loop. can stack overflow happen in this case", "body": "<pre><code>while(true)\n{\n   char array[1024] = {0};\n   ....\n   .....\n\n}\n</code></pre>\n\n<p>I just want to know does stack over flow can happen in the above strip of code, or does the stack unwinds in every loop. Thanks in advance. </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 1, "creation_date": 1467788835, "post_id": 38218073, "comment_id": 63858991, "body": "Please format your code"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1467789430, "post_id": 38218073, "comment_id": 63859310, "body": "Which one of the two programs you don&#39;t understand?"}, {"owner": {"reputation": 71, "user_id": 4780181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/169ffcb1b4e9909f450c42304d70abfa?s=128&d=identicon&r=PG&f=1", "display_name": "SHUBHAM TANDAN", "link": "https://stackoverflow.com/users/4780181/shubham-tandan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1467789602, "post_id": 38218073, "comment_id": 63859402, "body": "Both of them @MichaelWalz"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467789695, "post_id": 38218073, "comment_id": 63859456, "body": "See <a href=\"http://stackoverflow.com/questions/204476/\">What should <code>main()</code> return in C and C++</a> \u2014 though this is tangential to the issue being discussed in the question."}, {"owner": {"reputation": 71, "user_id": 4780181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/169ffcb1b4e9909f450c42304d70abfa?s=128&d=identicon&r=PG&f=1", "display_name": "SHUBHAM TANDAN", "link": "https://stackoverflow.com/users/4780181/shubham-tandan"}, "edited": false, "score": 0, "creation_date": 1467789901, "post_id": 38218073, "comment_id": 63859561, "body": "Actually i&#39;m having problem in understanding the double pointer used  in the first program .what is the main difference between these two program ?"}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1467790148, "post_id": 38218073, "comment_id": 63859692, "body": "<code>&amp;var</code> passes the address of <code>var</code> and Change uses double pointer because, <code>var</code> is pointing to address of <code>a</code>. So, Derefrencing single pointer on <code>&amp;var</code> (address of var) will point to the value stored in <code>var</code> i.e., <code>a</code>&#39;s address, so again derefrencing it, will point to the value 30."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1467790190, "post_id": 38218073, "comment_id": 63859709, "body": "What output did you expect, and why?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1467790488, "post_id": 38218073, "comment_id": 63859882, "body": "The more interesting case is where you dynamically allocate storage for <code>var</code> in <code>Change</code>. Then the pointer/double-pointer distinction, and why?, becomes instantly clear."}, {"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "edited": false, "score": 0, "creation_date": 1467790998, "post_id": 38218073, "comment_id": 63860170, "body": "take a look here: [<a href=\"http://stackoverflow.com/questions/5580761/why-use-double-pointer-or-why-use-pointers-to-pointers]\" title=\"why use double pointer or why use pointers to pointers%5d\">stackoverflow.com/questions/5580761/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "edited": false, "score": 1, "creation_date": 1467791274, "post_id": 38218410, "comment_id": 63860325, "body": "they are equivalent. But: in the first, you could change *ptr to point to a different int, and get a printf like &quot; 30 40 &quot;, which is not possible in the second program, where the 2 values printf&#39;ed will always be the same, since in Change() you always work on a"}], "tags": [], "owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "is_accepted": true, "score": 2, "last_activity_date": 1467790096, "creation_date": 1467790096, "answer_id": 38218410, "question_id": 38218073, "link": "https://stackoverflow.com/questions/38218073/difficulty-in-understanding-the-pointers-output/38218410#38218410", "title": "Difficulty in understanding the pointers output", "body": "<p>Both programs are equivalent. In first one, you passing pointer to pointer (i.e. address of pointer variable), and then dereferencing it twice. In second one, you are are just passing pointer (i.e. address of actual variable) and dereferencing it once.</p>\n"}, {"tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 1, "last_activity_date": 1467790126, "creation_date": 1467790126, "answer_id": 38218422, "question_id": 38218073, "link": "https://stackoverflow.com/questions/38218073/difficulty-in-understanding-the-pointers-output/38218422#38218422", "title": "Difficulty in understanding the pointers output", "body": "<p>The output is the same because you write <code>40</code> via the same pointer to <code>int</code>. In the second case you pass pointer-to-int, which you successfully dereference with <code>*</code> operator and obtain lvalue with type <code>int</code>, to which you then write <code>40</code>. In the first case you pass pointer-to-pointer-to-int. And then you do double dereferencing: <code>**ptr</code> or the same as <code>*(*ptr)</code>. Inner <code>*</code> is applied first and makes the expression with type pointer-to-int inside braces, and that pointer-to-int is the same as was passed to <code>Change()</code> in the second case. And at the end - outer <code>*</code> works just like for the second case.</p>\n"}, {"tags": [], "owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "is_accepted": false, "score": 1, "last_activity_date": 1467790188, "creation_date": 1467790188, "answer_id": 38218438, "question_id": 38218073, "link": "https://stackoverflow.com/questions/38218073/difficulty-in-understanding-the-pointers-output/38218438#38218438", "title": "Difficulty in understanding the pointers output", "body": "<p><code>&amp;var</code> passes the address of <code>var</code> and <code>Change</code> uses double pointer because, <code>var</code> is pointing to address of <code>a</code>. So, Derefrencing single pointer on <code>&amp;var</code> (address of var) will point to the value stored in <code>var</code> i.e., <code>a</code>'s address, so again derefrencing it, will point to the value of <code>a</code> i.e., <code>30</code>.</p>\n\n<p>For single pointer <code>Change</code>, I think, you should figure that out now from the above details.</p>\n"}, {"tags": [], "owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "is_accepted": false, "score": 2, "last_activity_date": 1467790503, "creation_date": 1467790503, "answer_id": 38218536, "question_id": 38218073, "link": "https://stackoverflow.com/questions/38218073/difficulty-in-understanding-the-pointers-output/38218536#38218536", "title": "Difficulty in understanding the pointers output", "body": "<p>It seems to me you need the following illustration to get the answer on your q:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0kita.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0kita.png\" alt=\"Pointers Diagram\"></a></p>\n"}], "owner": {"reputation": 71, "user_id": 4780181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/169ffcb1b4e9909f450c42304d70abfa?s=128&d=identicon&r=PG&f=1", "display_name": "SHUBHAM TANDAN", "link": "https://stackoverflow.com/users/4780181/shubham-tandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 38218410, "answer_count": 4, "score": 0, "last_activity_date": 1467790503, "creation_date": 1467788773, "last_edit_date": 1467790327, "question_id": 38218073, "link": "https://stackoverflow.com/questions/38218073/difficulty-in-understanding-the-pointers-output", "title": "Difficulty in understanding the pointers output", "body": "<p>Please have a look at code below  :    </p>\n\n<pre><code>#include &lt;stdio.h&gt;   \nvoid main()\n{\n    int a=30;\n    int *var=&amp;a;\n    Change(&amp;var);\n    printf(\"%d %d\",*var,a);\n}\n\nint Change(int**ptr)\n{\n    **ptr=40;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n    int a=30;\n    int *var=&amp;a;\n    Change(var);\n    printf(\"%d %d\",*var,a);\n}\n\nint Change( int *ptr)\n{\n    *ptr=40;\n}\n</code></pre>\n\n<p>The output from both programs is <code>40 40</code></p>\n\n<p>We are passing the copy of address of var so why it is reflected in actual main function and producing output <code>40 40</code>?</p>\n\n<p>Why both of these programs are producing same output?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1467788699, "post_id": 38218024, "comment_id": 63858931, "body": "<i>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example.</i>"}, {"owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "edited": false, "score": 0, "creation_date": 1467788810, "post_id": 38218024, "comment_id": 63858979, "body": "Added the code part"}, {"owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "edited": false, "score": 0, "creation_date": 1467789008, "post_id": 38218024, "comment_id": 63859082, "body": "than how can i fix it?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1467790741, "post_id": 38218024, "comment_id": 63860033, "body": "@Thebaron At which line <i>exactly</i> do you get thbe error ?"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1467789199, "post_id": 38218164, "comment_id": 63859195, "body": "funny how they don&#39;t support VLA in C99 which mandates VLA support, and they do support it in C++ which forbids it"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467789371, "post_id": 38218164, "comment_id": 63859282, "body": "@M.M <code>while(Microsoft == !StandardC)</code> is and infinite loop... ;)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467789560, "post_id": 38218164, "comment_id": 63859383, "body": "@M.M Was an implementation opting out of VLA support by defining <code>__STDC_NO_VLA__</code> not added until later than C99 ? Genuinely curious, as I don&#39;t know when it became optional, and whether MS actually defines that macro where they don&#39;t support it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467789647, "post_id": 38218164, "comment_id": 63859425, "body": "@WhozCraig Became optional in C11 (probably due to MS lobbying of the standards committee)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467789689, "post_id": 38218164, "comment_id": 63859451, "body": "@WhozCraig <a href=\"http://newsgroups.derkeiler.com/Archive/Comp/comp.std.c/2012-08/msg00105.html\" rel=\"nofollow noreferrer\">For reference</a>"}, {"owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "edited": false, "score": 0, "creation_date": 1467790916, "post_id": 38218164, "comment_id": 63860122, "body": "hmm i tried your solution but now when i check text it contain only one char"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "edited": false, "score": 1, "creation_date": 1467790986, "post_id": 38218164, "comment_id": 63860160, "body": "@Thebaron I&#39;m not getting you. How do you check it and at what point of your code?"}, {"owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "edited": false, "score": 0, "creation_date": 1467791542, "post_id": 38218164, "comment_id": 63860479, "body": "<a href=\"http://zetcode.com/gui/winapi/controls/\" rel=\"nofollow noreferrer\">zetcode.com/gui/winapi/controls</a>   check Edit control"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467793740, "post_id": 38218164, "comment_id": 63861717, "body": "Ok, but for example, if you check the value with Visual Studio variable debugger after it&#39;s allocation you can see garbage, due to the memory content. It is visualized as string and it stop showing value at the first 0 found into your &quot;array&quot;."}, {"owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "edited": false, "score": 0, "creation_date": 1467798788, "post_id": 38218164, "comment_id": 63864557, "body": "well than im pretty lost :/ im trying to make a gui for my program and it get messy... could you help me?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1467799010, "post_id": 38218164, "comment_id": 63864693, "body": "You should isolate you problems and post different questions for each one. SO people will give you a hand, surely."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1467803205, "post_id": 38218164, "comment_id": 63867077, "body": "In C99, VLAs were mandatory; C11 relaxed it to make VLAs optional. However, Microsoft&#39;s C compiler supports only C89/C90. VLAs were not introduced until C99, which Microsoft does not support and have not ever promised to support. I doubt Microsoft did any lobbying of the C standards committee. They are only concerned with C++. The only C99 features they are supporting are those that are also required by C++ language specifications, and those are only supported by the C++ compiler (not the C compiler)."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 3, "last_activity_date": 1467791441, "last_edit_date": 1467791441, "creation_date": 1467789095, "answer_id": 38218164, "question_id": 38218024, "link": "https://stackoverflow.com/questions/38218024/c-error-expression-must-have-a-constant-value-windows-code-example/38218164#38218164", "title": "C error: expression must have a constant value (windows code example)", "body": "<p>While C99 support <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow\">VLA</a> Microsoft doesn't support them.</p>\n\n<p>That means that</p>\n\n<pre><code>wchar_t text[len];\n</code></pre>\n\n<p>is not valid with Visual Studio 2013 c compiler.</p>\n\n<p>You can use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_malloc.htm\" rel=\"nofollow\">malloc</a> to do so:</p>\n\n<pre><code>wchar_t *text = malloc(sizeof(wchar_t)*len);\nif (text != NULL)\n{\n    // STUFF\n}\nfree(text);\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Take note that <code>malloc</code>ated memory is not initialized, as with VLAs that are stack allocated, so memory must be inited if needed using:</p>\n\n<pre><code>memset(text, 0, sizeof(whar_t)*len);\n</code></pre>\n\n<p>or using <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_calloc.htm\" rel=\"nofollow\">calloc</a> instead of malloc:</p>\n\n<pre><code>wchar_t *text = calloc(len, sizeof(wchar_t));\nif (text != NULL)\n{\n    // STUFF\n}\nfree(text);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1593, "favorite_count": 0, "closed_date": 1467803535, "answer_count": 1, "score": -2, "last_activity_date": 1468279114, "creation_date": 1467788600, "last_edit_date": 1468279114, "question_id": 38218024, "link": "https://stackoverflow.com/questions/38218024/c-error-expression-must-have-a-constant-value-windows-code-example", "closed_reason": "Duplicate", "title": "C error: expression must have a constant value (windows code example)", "body": "<p>I have been trying to compile the code \"Edit control\"</p>\n\n<p>from here:  <a href=\"http://zetcode.com/gui/winapi/controls/\" rel=\"nofollow\">http://zetcode.com/gui/winapi/controls/</a></p>\n\n<p>now my compiler (VS2013) wont let me compile this code while giving me that error: Error    574 error C2057: expected constant expression</p>\n\n<p>code part: </p>\n\n<pre><code>    if (HIWORD(wParam) == BN_CLICKED) {\n\n            int len = GetWindowTextLengthW(hwndEdit) + 1;\n            wchar_t text[len];\n\n            GetWindowTextW(hwndEdit, text, len);\n            SetWindowTextW(hwnd, text);\n        }\n</code></pre>\n\n<p>edit: </p>\n\n<p>i have used this code to fix the problem: </p>\n\n<pre><code>wchar_t *text = calloc(len, sizeof(wchar_t));\nif (text != NULL)\n{\n    // STUFF\n}\nfree(text);\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "is_accepted": true, "score": 3, "last_activity_date": 1467788593, "last_edit_date": 1467788593, "creation_date": 1467787680, "answer_id": 38217775, "question_id": 38217734, "link": "https://stackoverflow.com/questions/38217734/macro-argument-in-the-middle-of-a-variable-name/38217775#38217775", "title": "Macro argument in the middle of a variable name?", "body": "<p>Try the concatenation operator (##):</p>\n\n<p><code>#define TESTMACRO(name, exc) void* jt_ ## name[exc];int jtix_ ## name = 0;</code></p>\n"}], "owner": {"reputation": 805, "user_id": 3618509, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2ebf555307f721af722397544de00285?s=128&d=identicon&r=PG&f=1", "display_name": "JavaProphet", "link": "https://stackoverflow.com/users/3618509/javaprophet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 38217775, "answer_count": 1, "score": 0, "last_activity_date": 1467919011, "creation_date": 1467787483, "last_edit_date": 1467919011, "question_id": 38217734, "link": "https://stackoverflow.com/questions/38217734/macro-argument-in-the-middle-of-a-variable-name", "title": "Macro argument in the middle of a variable name?", "body": "<p>The macro:</p>\n\n<pre><code>#define TESTMACRO(name, exc) void* jt_name[exc];int jtix_name = 0;\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>TESTMACRO(testname, 2)\n</code></pre>\n\n<p>translates to</p>\n\n<pre><code>void* jt_name[2];int jtix_name = 0;\n</code></pre>\n\n<p>How could I make it say jt_testname instead?</p>\n\n<p>I tried using a hashtag(#) before names, but that did not do what I wanted. Having spaces isn't an option because it's mid variable name.</p>\n"}, {"tags": ["c", "string", "pointers", "char"], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "is_accepted": false, "score": 1, "last_activity_date": 1467787630, "last_edit_date": 1495541776, "creation_date": 1467787630, "answer_id": 38217764, "question_id": 38217712, "link": "https://stackoverflow.com/questions/38217712/why-the-char-has-to-be-a-pointer-instead-of-a-type-of-char/38217764#38217764", "title": "Why the char has to be a pointer instead of a type of char?", "body": "<p>This has to do with format specifiers you've in <code>printf</code> function. <code>%s</code> tries to output the string (reads a portion of memory), <code>%d</code> interprets everything in gets like an integer, thus even a pointer sort of works, however, you shouldn't to that, it's undefined behavior.</p>\n\n<p>I suggest you to read some good books on C to get a good grasp on such things, a good list is here <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">The Definitive C Book Guide and List</a></p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1467788121, "last_edit_date": 1467788121, "creation_date": 1467787641, "answer_id": 38217766, "question_id": 38217712, "link": "https://stackoverflow.com/questions/38217712/why-the-char-has-to-be-a-pointer-instead-of-a-type-of-char/38217766#38217766", "title": "Why the char has to be a pointer instead of a type of char?", "body": "<blockquote>\n  <p><em>but no matter the age's type is int or a pointer, it always works fine.</em></p>\n</blockquote>\n\n<p>That's undefined behaviour.</p>\n\n<p>To elaborate, a double-quote delimited string (as seen above) is a <em>string literal</em>, and when used as an initializer, it basically gives you a pointer to the starting of the literal thereby it needs a pointer variable to be stored. So, <code>name</code> has to be a pointer.</p>\n\n<p>OTOH, the initializer <code>27</code> is an integer literal (integer constant) and it needs to be stored into an <code>int</code> variable , not an <code>int *</code>. If you use <code>27</code> to initialize an <code>int *</code> and use that, it <em>works</em> (rather, seem to work) because that way, it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> later, by attempting to use invalid memory location.</p>\n\n<p>FWIW, if you try something like</p>\n\n<pre><code>typedef struct {\n    char * name;\n    int *age;\n} person;\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>john.age = 27;  //incompatible assigment\n</code></pre>\n\n<p>compiler will warn you about wrong conversion from integer to pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "is_accepted": false, "score": 2, "last_activity_date": 1467787844, "creation_date": 1467787844, "answer_id": 38217815, "question_id": 38217712, "link": "https://stackoverflow.com/questions/38217712/why-the-char-has-to-be-a-pointer-instead-of-a-type-of-char/38217815#38217815", "title": "Why the char has to be a pointer instead of a type of char?", "body": "<p><code>char</code> type is short for character and can hold one character.  C has no <code>string</code> type, instead a string in C is an array of <code>char</code> terminated with <code>'\\0'</code> - the null character (null terminated strings).</p>\n\n<p>Thus to use a string you need a pointer to memory that contains lots of characters.  So why does it work for an <code>int</code> with or without the <code>*</code>.  Well we can either have the age as an <code>int</code> or we can have a pointer to memory that stores the age.  Either works well.  But we can't store a string in one character.</p>\n"}, {"tags": [], "owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "is_accepted": false, "score": 0, "last_activity_date": 1467788846, "last_edit_date": 1467788846, "creation_date": 1467788515, "answer_id": 38217988, "question_id": 38217712, "link": "https://stackoverflow.com/questions/38217712/why-the-char-has-to-be-a-pointer-instead-of-a-type-of-char/38217988#38217988", "title": "Why the char has to be a pointer instead of a type of char?", "body": "<p><code>char *name</code>: <code>name</code> is a pointer to type <code>char</code>. Now, when you make it to point to <code>\"John\"</code>, the compiler stores the <code>John\\0</code> i.e., 5 chars to some memory and returns you the starting address of that memory. So, when you try to read using <code>%s</code> (string format specifier), the <code>name</code> variable returns you the whole string reading till <code>\\0</code>.</p>\n\n<p><code>char name</code> : Here <code>name</code> is just one char having 1 byte of memory. So, you can't store anything more than one char. Also, when you would try to read, you should always read just one char (<code>%c</code>) because trying to read more than that will take you to the memory region which is not assigned to you and hence, will invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a>.</p>\n\n<p><code>int age</code> : <code>age</code> is allocated 4 bytes, so you can store an integer to this memory and read as well, <code>printf(\"%d\", age);</code></p>\n\n<p><code>int *age</code> : <code>age</code> is a pointer to type int and it stores the address of some memory. Unlike strings, you do not read integers using address (loosely saying, just for the sake of avoiding complexity). You have to dereference it. So first, you need to allocate some memory, store any integer into it and return the address of this memory to <code>age</code>. Or else, if you don't want to allocate memory, you can use compiler's help by assigning a value to <code>age</code> like this, <code>*age = 27</code>. In this case, compiler will store <code>27</code> to some random memory and will return the address to <code>age</code> which can be dereferenced using <code>*age</code>, like <code>printf(\"%d\", *age);</code></p>\n"}], "owner": {"reputation": 21, "user_id": 6374500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487134aa89fb7929bc427561622361c7?s=128&d=identicon&r=PG&f=1", "display_name": "ABeginner", "link": "https://stackoverflow.com/users/6374500/abeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1467788936, "creation_date": 1467787378, "last_edit_date": 1467788936, "question_id": 38217712, "link": "https://stackoverflow.com/questions/38217712/why-the-char-has-to-be-a-pointer-instead-of-a-type-of-char", "title": "Why the char has to be a pointer instead of a type of char?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct {\n    char * name;\n    int age;\n} person;\n\nint main() {\n    person john;\n\n    /* testing code */\n    john.name = \"John\";\n    john.age = 27;\n    printf(\"%s is %d years old.\", john.name, john.age);\n}\n</code></pre>\n\n<p>This a well-working code, I just got a small question.\nIn the struct part, after I delete the <code>*</code> before <code>name</code>, this code no longer works, but no matter the <code>age</code>'s type is, int or a pointer, it always works fine. So can anyone tell me why <code>name</code> has to be a pointer rather than just a type of char?</p>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 3, "creation_date": 1467787408, "post_id": 38217674, "comment_id": 63858328, "body": "Please provide implementation of <code>robo1</code>, <code>robo2</code>, <code>find5</code>, <code>find0</code>. Runtime errors mean that you possibly go out of bounds in any of these functions, but without the code it&#39;s hard to tell"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 1, "creation_date": 1467787736, "post_id": 38217674, "comment_id": 63858482, "body": "To me it&#39;s not clear what the approach is. Are you aware of <a href=\"https://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow noreferrer\">depth first search</a>?"}, {"owner": {"reputation": 3873, "user_id": 2185825, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NReIt.jpg?s=128&g=1", "display_name": "shole", "link": "https://stackoverflow.com/users/2185825/shole"}, "reply_to_user": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 0, "creation_date": 1467788560, "post_id": 38217674, "comment_id": 63858858, "body": "The problem is most probably in <code>robo*</code> and <code>find*</code>, so please post it as @buld0zzr said.  The logic here I think it&#39;s alright (though it&#39;s not the &quot;best&quot; ) as it is basically a brute force bi-direction BFS"}], "answers": [{"comments": [{"owner": {"reputation": 3873, "user_id": 2185825, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NReIt.jpg?s=128&g=1", "display_name": "shole", "link": "https://stackoverflow.com/users/2185825/shole"}, "edited": false, "score": 0, "creation_date": 1467789025, "post_id": 38217792, "comment_id": 63859093, "body": "Good example to show the algorithm itself (implementation I suppose) is not working!"}, {"owner": {"reputation": 1115, "user_id": 6544408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f30b2ea793e58029995eea15b4fc2c4?s=128&d=identicon&r=PG&f=1", "display_name": "yobro97", "link": "https://stackoverflow.com/users/6544408/yobro97"}, "edited": false, "score": 0, "creation_date": 1467792939, "post_id": 38217792, "comment_id": 63861248, "body": "Thanks.....I had gone through some approaches like DFS and A* which are much effective than the above approach.....just wanted to know the defects in this approach"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": true, "score": 5, "last_activity_date": 1467787757, "creation_date": 1467787757, "answer_id": 38217792, "question_id": 38217674, "link": "https://stackoverflow.com/questions/38217674/solving-a-maze-in-2d-array/38217792#38217792", "title": "Solving a maze in 2d array", "body": "<p>The general idea should almost work, but of course everything is in the details.</p>\n\n<p>One case in which your approach will not work even if implemented correctly is however this:</p>\n\n<pre><code>  2 1 0 0 0\n  1 1 0 1 1 \n  0 0 0 1 3\n</code></pre>\n\n<p>i.e. if both 2 and 3 are \"closed\" by walls but there are 0s in the room. Your loop will never end because despite having 0s around neither of the two robo function will change anything.</p>\n\n<p>A simple solution is returning 0/1 from robos if they actually changed at least a value in the matrix and quitting when this doesn't happen.</p>\n\n<p>Note that this is not a very efficient way of solving a maze (your code will keep checking the same cells over and over many times).</p>\n"}], "owner": {"reputation": 1115, "user_id": 6544408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f30b2ea793e58029995eea15b4fc2c4?s=128&d=identicon&r=PG&f=1", "display_name": "yobro97", "link": "https://stackoverflow.com/users/6544408/yobro97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "accepted_answer_id": 38217792, "answer_count": 1, "score": 3, "last_activity_date": 1467787757, "creation_date": 1467787211, "question_id": 38217674, "link": "https://stackoverflow.com/questions/38217674/solving-a-maze-in-2d-array", "title": "Solving a maze in 2d array", "body": "<p>I had referred to many articles and questions that answered how to solve a maze effectively but here I want to confirm what's going wrong in my code. Consider the maze:</p>\n\n<pre><code>2 1 0 0 3\n0 1 0 1 1\n0 1 0 0 1\n0 1 1 0 0\n0 0 0 0 0\n</code></pre>\n\n<p>where the 1's represent the walls and 0's represent the path.(source is 2 and destination is 3).\nI have to output whether there is a path or not.</p>\n\n<pre><code>int y=0;\n        while(y==0)\n        {\n            robo1(n,m,maze);//this function adds 2 to any '0'/'3' in (i,j+1),(i+1,j),(i-1,j),(i,j-1) (if exists),where (i,j) is 2\n            robo2(n,m,k2,maze);//this function adds 3 to any '0'/'2' in (i,j+1),(i+1,j),(i-1,j),(i,j-1) (if exists), where (i,j) is 3\n            if(find5(n,m,maze)==1)//this function returns 1 if there is '5' in the maze\n                y++;\n            if(find0(n,m,maze)==0)//this function returns 0 if there are no '0' in the maze\n                break;\n        }\n        if(find0(n,m,maze)==0 &amp;&amp; y==0)\n            printf(\"-1\\n\");//no path\n        else\n            printf(\"1\\n\");//there is a path\n</code></pre>\n\n<p>My idea is that if after any number of loops a five is found in the maze, then it would mean there is a path. \nBut while implementing this function in code I get wrong answers and sometimes run-time errors.\nIs there any flaw in the above logic?</p>\n"}, {"tags": ["c", "function", "long-integer", "factorial"], "comments": [{"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 1, "creation_date": 1467787267, "post_id": 38217599, "comment_id": 63858263, "body": "Could you please elaborate the problem that you face?  The factorial output is correct: <a href=\"http://cpp.sh/8twwh\" rel=\"nofollow noreferrer\">cpp.sh/8twwh</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3022012"}, "edited": false, "score": 0, "creation_date": 1467787438, "post_id": 38217599, "comment_id": 63858338, "body": "Hi, using long long will also result in overflow of long range. if you really wanted to learn go through this.  <a href=\"http://www.geeksforgeeks.org/factorial-large-number/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/factorial-large-number</a> Or  <a href=\"https://discuss.codechef.com/questions/7349/computing-factorials-of-a-huge-number-in-cc-a-tutorial\" rel=\"nofollow noreferrer\" title=\"computing factorials of a huge number in cc a tutorial\">discuss.codechef.com/questions/7349/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1467788142, "last_edit_date": 1467788142, "creation_date": 1467787493, "answer_id": 38217737, "question_id": 38217599, "link": "https://stackoverflow.com/questions/38217599/long-format-handling-while-calculating-factorial/38217737#38217737", "title": "Long format handling while calculating factorial", "body": "<p>You have problems with your <code>printf</code> formats:</p>\n\n<p>All <code>printf</code> that prints the returned value of myFactorial must use <code>%lld</code> format, for <code>long long int</code></p>\n\n<p><code>printf</code> that prints the HEX value must use <code>%llX</code> to print the correct value</p>\n\n<pre><code>//Calculate factorial and print it in three ways\nprintf(\"Factorial of %d is %lld!\\n\",yourNumber,myFactorial(yourNumber));\nprintf(\"Using long format, factorial of %d is %lld!\\n\",yourNumber,myFactorial(yourNumber));\nprintf(\"In hex: %#016llX!\",myFactorial(yourNumber));\n\n// Here on, second part of my code begins\n\n// Calculate and print factorials of numbers from 1 to 20 in %d format\nprintf(\"\\n\\n\\nLet's see more d's!\\n\\n\");\nfor (i = 1; i&lt;21; i++)   printf(\"%lld\\n\", myFactorial(i));\n\n// Calculate and print factorials of numbers from 1 to 20 in %lld format\nprintf(\"\\n\\n\\nNow let's see more lld's!\\n\\n\");\nfor (i = 1; i&lt;21; i++)   printf(\"%lld\\n\", myFactorial(i));\n</code></pre>\n\n<p>You can simply find those kind of error adding <code>-Wall</code> option when compile with gcc. It will show you</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:84:5: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018long long int\u2019 [-Wformat=]\n     printf(\"Factorial of %d is %d!\\n\",yourNumber,myFactorial(yourNumber));\n     ^\ntest.c:86:5: warning: format \u2018%X\u2019 expects argument of type \u2018unsigned int\u2019, but argument 2 has type \u2018long long int\u2019 [-Wformat=]\n     printf(\"In hex: %#08X!\",myFactorial(yourNumber));\n     ^\ntest.c:94:5: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018long long int\u2019 [-Wformat=]\n     for (i = 1; i&lt;21; i++)   printf(\"%d\\n\", myFactorial(i));\n</code></pre>\n\n<p>Best adding all following option: <code>-Wall -Wextra -pedantic</code></p>\n\n<blockquote>\n  <p>Take note that your code can work correctly as far as the factorial is less then <code>9223372036854775807</code> that is the maximum allowed for <code>long long int</code></p>\n</blockquote>\n\n<p>That means you can calculate the factorial where <code>x &lt;= 20</code></p>\n"}], "owner": {"reputation": 21, "user_id": 6550962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165da60bd30d1f6217393e8bd334b07e?s=128&d=identicon&r=PG&f=1", "display_name": "BaranD", "link": "https://stackoverflow.com/users/6550962/barand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467790735, "creation_date": 1467786905, "last_edit_date": 1467790735, "question_id": 38217599, "link": "https://stackoverflow.com/questions/38217599/long-format-handling-while-calculating-factorial", "title": "Long format handling while calculating factorial", "body": "<p>I wrote a code that calculates factorial after creating a myFactorial function however I messed it up when I tried to handle greater numbers. </p>\n\n<p>I am trying to deal with numbers above 16 using long format but the results are irrelevant and things get weirder in the second part of the code. \nWhile the results should not change with input, they do change!</p>\n\n<p>I share my code with comments below:</p>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main()\n{\n    int yourNumber;\n    int i;\n\n    //Take the input\n    printf(\"I highly recommend you to make the command window fullscreen. Otherwise, the complete output will not be seen.\\n\");\n    printf(\"Enter a positive integer and I will tell you its factorial.\\n\");\n    scanf(\"%d\", &amp;yourNumber);\n\n    //Calculate factorial and print it in three ways\n    printf(\"Factorial of %d is %d!\\n\",yourNumber,myFactorial(yourNumber));\n    printf(\"Using long format, factorial of %d is %lld!\\n\",yourNumber,myFactorial(yourNumber));\n    printf(\"In hex: %#08X!\",myFactorial(yourNumber));\n\n\n\n\n    // Here on, second part of my code begins\n\n\n    // Calculate and print factorials of numbers from 1 to 20 in %d format\n    printf(\"\\n\\n\\nLet's see more d's!\\n\\n\");\n    for (i = 1; i&lt;21; i++)   printf(\"%d\\n\", myFactorial(i));\n\n    // Calculate and print factorials of numbers from 1 to 20 in %lld format\n    printf(\"\\n\\n\\nNow let's see more lld's!\\n\\n\");\n    for (i = 1; i&lt;21; i++)   printf(\"%lld\\n\", myFactorial(i));\n\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>myfactorial.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nlong long int myFactorial(int bar) {\n    long long out = 1;\n    int i;\n    for (i=1; i&lt;=bar; i++)\n    {\n        out *= i;\n    }\n    return out;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5945525, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b7f7dd8b97713d76b9f9d0a0ba53b3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Best_Name", "link": "https://stackoverflow.com/users/5945525/best-name"}, "edited": false, "score": 0, "creation_date": 1467786195, "post_id": 38217422, "comment_id": 63857828, "body": "So &quot;()&quot; is a cast operator,right?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 121, "user_id": 5945525, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b7f7dd8b97713d76b9f9d0a0ba53b3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Best_Name", "link": "https://stackoverflow.com/users/5945525/best-name"}, "edited": false, "score": 1, "creation_date": 1467786283, "post_id": 38217422, "comment_id": 63857854, "body": "@Best_Name No, <code>()</code> is the function call expression, <code>(type)</code> is a cast. Just writing <code>() expression</code> is not valid, it will give you a compiler error."}, {"owner": {"reputation": 121, "user_id": 5945525, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b7f7dd8b97713d76b9f9d0a0ba53b3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Best_Name", "link": "https://stackoverflow.com/users/5945525/best-name"}, "edited": false, "score": 0, "creation_date": 1467786369, "post_id": 38217422, "comment_id": 63857898, "body": "so (int),(float),(sometypeidefined) are operators right?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 121, "user_id": 5945525, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b7f7dd8b97713d76b9f9d0a0ba53b3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Best_Name", "link": "https://stackoverflow.com/users/5945525/best-name"}, "edited": false, "score": 0, "creation_date": 1467786548, "post_id": 38217422, "comment_id": 63857965, "body": "@Best_Name If placed in front of another expression, those are all type-cast operators."}, {"owner": {"reputation": 121, "user_id": 5945525, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b7f7dd8b97713d76b9f9d0a0ba53b3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Best_Name", "link": "https://stackoverflow.com/users/5945525/best-name"}, "edited": false, "score": 0, "creation_date": 1467786750, "post_id": 38217422, "comment_id": 63858046, "body": "Thank you so much!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467817799, "post_id": 38217422, "comment_id": 63876790, "body": "To add to the first line: also  <code>(struct foos)</code>, <code>(union foou)</code>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1467786229, "last_edit_date": 1467786229, "creation_date": 1467786121, "answer_id": 38217422, "question_id": 38217364, "link": "https://stackoverflow.com/questions/38217364/cast-operator-in-c-or-int/38217422#38217422", "title": "Cast operator in C : () or (int)?", "body": "<p>Type-casting is done through <code>(type)</code>, where <code>type</code> is either a native type like <code>int</code> or <code>char *</code>, <em>or</em> a type-alias created through <code>typedef</code>.</p>\n\n<p>Function-calling is done through the <code>()</code> operator.</p>\n\n<p>They might look similar, but are very different, and are of course placed at different places. For example <code>(type) expression</code> is a type-cast, while <code>expression()</code> is a function call. You can of course combine the cast and the call operators like <code>(type) expression()</code> which means that you call a function and then cast the <em>returned value</em> of the function.</p>\n\n<p>If you're wondering about the last, the mixed casting and call expression, it's because function calling have higher <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">operator precedence</a> than casting, so the call will happen first.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467817513, "post_id": 38217568, "comment_id": 63876610, "body": "Disagree with &quot;() is only valid in combination with a function name before it, is is a function call expression (an empty one, meaning you call the function with no parameters)&quot;  Other uses: <code>inf foo2();</code> declares a function with no information about its parameters.  <code>()</code> also used in casting to function pointers. <code>(int (*)())</code>. Also variable declarations <code>int *z()</code>, where z is not a function, but a <a href=\"http://cdecl.ridiculousfish.com/?q=int+%2Az%28%29\" rel=\"nofollow noreferrer\">function pointer</a>."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1467786786, "creation_date": 1467786786, "answer_id": 38217568, "question_id": 38217364, "link": "https://stackoverflow.com/questions/38217364/cast-operator-in-c-or-int/38217568#38217568", "title": "Cast operator in C : () or (int)?", "body": "<p>() is only valid in combination with a function name before it, is is a function call expression (an empty one, meaning you call the function with no parameters)</p>\n\n<p>Like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\nint bar = foo(); // foo is called with no parameters\nprintf(\"bar:%d\",bar);\nreturn 0;\n}\n\nint foo(void) {\nreturn 3;\n}\n</code></pre>\n\n<p>Casting however is done by using a Type expression inside brackets (either a native type or one defined via <code>typedef</code>), like for instance in this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\nint foo = (int) 19.21;\nprintf(\"foo = %d\", foo); // Will print 19 because 19.21 (double literal) was cast to int\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467816614, "post_id": 38217633, "comment_id": 63875969, "body": "&quot;There is only one cast operator for all types.&quot; sounds like there is one universal cast operator.  <code>(int)</code> <code>(double)</code> <code>(foo_T)</code> look like 3 different operators to me.  Perhaps re-word to express your intent more clearly?"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467787026, "creation_date": 1467787026, "answer_id": 38217633, "question_id": 38217364, "link": "https://stackoverflow.com/questions/38217364/cast-operator-in-c-or-int/38217633#38217633", "title": "Cast operator in C : () or (int)?", "body": "<p>C is a bit confusing here, as there are several operators that use the same syntax but have different meaning depending on context. To make things even worse, the same syntax could be used for things that aren't even operators. This is particularly true for <code>()</code>, which is used all over the C language.</p>\n\n<p><code>()</code> could mean one of the following:</p>\n\n<ul>\n<li>A parenthesized expression. This is a so-called primary expression, which is the fancy word for basic stuff that make precedence over all operators. </li>\n<li>The cast operator. There is only one cast operator for all types. You cannot re-define the meaning of operators in C (but you can in C++, through operator overloading).</li>\n<li>The function call operator.</li>\n<li>Part of a compound literal declaration.</li>\n<li>Or it could be part of a statement, a function declaration, function-like macro declaration/call, part of certain variable declarations etc etc. It is simply part of the core language syntax and appears here and there.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 142, "user_id": 5866803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6427de186ee5c8353d7e98a2df9de36?s=128&d=identicon&r=PG&f=1", "display_name": "ashwini", "link": "https://stackoverflow.com/users/5866803/ashwini"}, "is_accepted": false, "score": 1, "last_activity_date": 1467816790, "last_edit_date": 1467816790, "creation_date": 1467789090, "answer_id": 38218161, "question_id": 38217364, "link": "https://stackoverflow.com/questions/38217364/cast-operator-in-c-or-int/38218161#38218161", "title": "Cast operator in C : () or (int)?", "body": "<p>This is used for calling the function and declaring function for type casting also.<br>\nFunction example:</p>\n\n<pre><code>public void show(){\n  printf(\"this is function\");\n}\n</code></pre>\n\n<p>... in type casting  </p>\n\n<pre><code>float a= 1.22;\nin b = (int)a;\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 5945525, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b7f7dd8b97713d76b9f9d0a0ba53b3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Best_Name", "link": "https://stackoverflow.com/users/5945525/best-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "closed_date": 1467804329, "answer_count": 4, "score": -3, "last_activity_date": 1467816790, "creation_date": 1467785787, "last_edit_date": 1592644375, "question_id": 38217364, "link": "https://stackoverflow.com/questions/38217364/cast-operator-in-c-or-int", "closed_reason": "Needs details or clarity", "title": "Cast operator in C : () or (int)?", "body": "<p>I'm reading The C Programming Language II and in the operator precedence table they show the cast operator as <code>(type)</code>, so it make me bothered.</p>\n<blockquote>\n<p>Is the cast operator just <code>()</code> like a function operator or it includes the types as a whole like <code>(int)</code>, <code>(float)</code> ...?</p>\n<p>And if so, does it mean that I can declare a new operator by myself with <code>typedef</code>?</p>\n</blockquote>\n"}, {"tags": ["c", "complement"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467785847, "post_id": 38217033, "comment_id": 63857716, "body": "You need to enable compiler warnings."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1467784117, "creation_date": 1467784117, "answer_id": 38217052, "question_id": 38217033, "link": "https://stackoverflow.com/questions/38217033/1s-complement-operator-in-c/38217052#38217052", "title": "1&#39;s complement operator in C", "body": "<p>Because you don't save the result of the complement operation anywhere.</p>\n\n<p>If you do e.g.</p>\n\n<pre><code>a = ~a;\n</code></pre>\n\n<p>then you should get a different result.</p>\n\n<p>Or you could simply print the result of the operation:</p>\n\n<pre><code>printf(\"complement :  %d\\n\", ~a);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6359267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467784679, "creation_date": 1467784021, "last_edit_date": 1467784679, "question_id": 38217033, "link": "https://stackoverflow.com/questions/38217033/1s-complement-operator-in-c", "title": "1&#39;s complement operator in C", "body": "<p>In the program below, why is <code>~a</code> printed in the output as <code>10</code>? Why not <code>-11</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a=10;\n    ~a;\n    printf(\"complement :  %d\\n\",a);\n}\n</code></pre>\n"}, {"tags": ["c", "debugging", "clion"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1467783223, "post_id": 38216851, "comment_id": 63856881, "body": "Why not ask <a href=\"https://www.jetbrains.com/support/\" rel=\"nofollow noreferrer\">JetBrains tech-support</a> ?"}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1467783283, "post_id": 38216851, "comment_id": 63856904, "body": "@PaulR Yes. I&#39;m actually going to open an issue for this in the youtracker."}], "answers": [{"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1467858405, "creation_date": 1467858405, "answer_id": 38236731, "question_id": 38216851, "link": "https://stackoverflow.com/questions/38216851/debugger-in-clion-2016-2-eap-is-not-like-before/38236731#38236731", "title": "debugger in Clion 2016.2 EAP is not like before", "body": "<p>The issue was resolved: The reason was that I was using my own custom shell that can't perform all shell functionality. When I switched to bash shell, then everything worked. </p>\n"}], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 38236731, "answer_count": 1, "score": -1, "last_activity_date": 1467858405, "creation_date": 1467782800, "last_edit_date": 1467783636, "question_id": 38216851, "link": "https://stackoverflow.com/questions/38216851/debugger-in-clion-2016-2-eap-is-not-like-before", "title": "debugger in Clion 2016.2 EAP is not like before", "body": "<p>I just upgraded to the latest early access of Clion and the debugger is not working for me. It worked in earlier versions. Now I can run a minimal program and get the expected output. </p>\n\n<pre><code>/home/dac/.CLion2016.2/system/cmake/generated/cliontest-77d7a571/77d7a571/Debug/cliontest\nhello\nProcess finished with exit code 0\n</code></pre>\n\n<p>But the debugger doesn't seem to work? I add breakpoints but there is no output and no break, the program just exits. Am I doing something wrong or is it a bug in this version <a href=\"https://confluence.jetbrains.com/display/CLION/Early+Access+Program\" rel=\"nofollow noreferrer\">2016.2 EAP build 162.1120.17</a> of Clion? The debugger used to work better in version 2016.1, even though I got an error there that I'm trying to see if it is still in the latest version. What I got when debugging before was \"Cannot collect variable\" for certain variable and it is this error that I am investigating if it is still in newer versions. But now I have two problems: I can't even get the debugger to work in this newer version. It's like the debugger is just \"silent\". </p>\n\n<pre><code>/home/dac/.CLion2016.2/system/cmake/generated/cliontest-77d7a571/77d7a571/Debug/cliontest\nDuring startup program exited normally.\n\nProcess finished with exit code 0\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ICygC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ICygC.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I manually navigate in the shell to the generated executable, then it is runnable but I want to use the debugger. </p>\n\n<h2>Update</h2>\n\n<p>I opened an issue for this problem at Jetbrains <a href=\"https://youtrack.jetbrains.com/issue/CPP-7132\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/CPP-7132</a></p>\n"}, {"tags": ["c", "opencl", "gpu", "gpgpu"], "comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 4, "creation_date": 1467781669, "post_id": 38216611, "comment_id": 63856455, "body": "Yes, as long as the pointers are all in the device space. No issue."}], "answers": [{"tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": false, "score": 0, "last_activity_date": 1467892498, "creation_date": 1467892498, "answer_id": 38244838, "question_id": 38216611, "link": "https://stackoverflow.com/questions/38216611/does-normal-pointer-arithmetic-works-on-opencl-kernels/38244838#38244838", "title": "does normal pointer arithmetic works on opencl kernels?", "body": "<p>Pointer arithmetic does work, but you need to annotate your pointers with the appropriate memory space. So your example code is most likely wrong: if <code>local_buffer</code> is declared as</p>\n\n<pre><code>local int local_buffer[BUFFER_SIZE];\n</code></pre>\n\n<p>Then the <code>end</code> and <code>x</code> variables' types <strong>must</strong> also have the <code>local</code> specfier:</p>\n\n<pre><code>local int* end = \u2026;\nfor (local int* x = \u2026\n</code></pre>\n\n<p>The default is <code>global</code>, which will cause things to fail badly if your pointer is into local or constant memory. I've found that many OpenCL implementations don't warn you about this, so you have to be super careful.</p>\n"}], "owner": {"reputation": 7, "user_id": 6554472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gH9Sr.jpg?s=128&g=1", "display_name": "Alexander Nu&#241;ez", "link": "https://stackoverflow.com/users/6554472/alexander-nu%c3%b1ez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467892498, "creation_date": 1467781381, "question_id": 38216611, "link": "https://stackoverflow.com/questions/38216611/does-normal-pointer-arithmetic-works-on-opencl-kernels", "title": "does normal pointer arithmetic works on opencl kernels?", "body": "<p>For example,does this snippet of code would compile and execute normally?</p>\n\n<pre><code>int* end = local_buffer + BUFFER_SIZE;\nfor(int* x = local_buffer; x &lt; end; ++x)\n{\n   ...\n}\n</code></pre>\n"}, {"tags": ["c", "dns", "packet-capture", "sniffer"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6554336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3099a63dc1cd4075482c453ce8da9ca?s=128&d=identicon&r=PG&f=1", "display_name": "LHh", "link": "https://stackoverflow.com/users/6554336/lhh"}, "edited": false, "score": 0, "creation_date": 1467789456, "post_id": 38217421, "comment_id": 63859329, "body": "Thanks you, @Kumar!"}], "tags": [], "owner": {"reputation": 49, "user_id": 1997508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI9fO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/1997508/amit-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1467786112, "creation_date": 1467786112, "answer_id": 38217421, "question_id": 38216082, "link": "https://stackoverflow.com/questions/38216082/dns-packet-response-answer-and-dns-query/38217421#38217421", "title": "DNS packet (response answer and DNS query)", "body": "<p>I wish, I had time to make this and help the topic. But here, the <a href=\"https://www.ietf.org/rfc/rfc1035.txt\" rel=\"nofollow\">IETF RFC 1035 LINK</a> will sure help you.</p>\n"}], "owner": {"reputation": 31, "user_id": 6554336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3099a63dc1cd4075482c453ce8da9ca?s=128&d=identicon&r=PG&f=1", "display_name": "LHh", "link": "https://stackoverflow.com/users/6554336/lhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1467786112, "creation_date": 1467777207, "question_id": 38216082, "link": "https://stackoverflow.com/questions/38216082/dns-packet-response-answer-and-dns-query", "title": "DNS packet (response answer and DNS query)", "body": "<p>I'm coding a program by C language in order to analyze DNS packet.\nSpecifically, I have to capture DNS packet and I need to know the domain name after capturing DNS packets. How can a access to the answer section?\nMy code is using pcap library.\nAnyone can give me some suggestions? A sample code will be very helpfull for me.\nMany thanks!!!!</p>\n"}, {"tags": ["c", "linux", "wpa-supplicant"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1467777591, "post_id": 38215480, "comment_id": 63855606, "body": "From the official doc you have linked, referring to <code>wpa_ctrl.c</code>: &quot;External programs can link this file into them&quot;. That is, you need to make a copy of that file, compile it and link that into your program."}, {"owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1467778011, "post_id": 38215480, "comment_id": 63855682, "body": "Does that mean, in my makefile I add wpa_ctrl.c? In my makefile, OBJ = wpa_ctrl.c testProg.c"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1467778168, "post_id": 38215480, "comment_id": 63855732, "body": "Yes. Except it should be listing the <code>.o</code> files not the <code>.c</code> files."}, {"owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1467778285, "post_id": 38215480, "comment_id": 63855751, "body": "Yes. Sorry, that was a typo. Including the right <code>.o</code> files still generates the same error."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1467778505, "post_id": 38215480, "comment_id": 63855800, "body": "Perhaps you still have something wrong with your Makeifile. If you want help then you need to show the updated Makefile and the build log."}, {"owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1467778785, "post_id": 38215480, "comment_id": 63855845, "body": "Ok, edited makefile and added log."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1467793250, "post_id": 38215480, "comment_id": 63861451, "body": "If the other questions didn&#39;t help you, it may be more persuasive if you enumerate the ones that are similar and explain why your question is different.  Not only does that demonstrate that you&#39;ve done your research, but it can reduce the likelihood of answers simply repeating advice that you didn&#39;t find helpful."}, {"owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "edited": false, "score": 0, "creation_date": 1467819742, "post_id": 38215480, "comment_id": 63878109, "body": "Okay, I&#39;ve added a section on why the existing resources havent been super useful."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "edited": false, "score": 0, "creation_date": 1467830646, "post_id": 38231110, "comment_id": 63884579, "body": "I don&#39;t think its a linker issue. I think I don&#39;t have the right files. <code>wpa_ctrl.c</code> does not define <code>wpa_ctrl_open()</code> method. This is the part where it gets confusing because the official documentation says any external document can just link <code>wpa_ctrl.c</code> and use <code>wpa_ctrl_open()</code>"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "reply_to_user": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "edited": false, "score": 0, "creation_date": 1467834064, "post_id": 38231110, "comment_id": 63886474, "body": "It&#39;s defined.  See my edit, and line 86 of <a href=\"https://w1.fi/cgit/hostap/tree/src/common/wpa_ctrl.c\" rel=\"nofollow noreferrer\">w1.fi/cgit/hostap/tree/src/common/wpa_ctrl.c</a>."}, {"owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1504292042, "post_id": 38231110, "comment_id": 78973777, "body": "I think this is not clear enough and not free-standing. <code>wpa_ctrl.c</code> defines TWO wpa_ctrl_open functions, but the definitions are gated by macros. The link under &quot;define a couple of symbols&quot; in the answer shows that for typical Linux use you need  to define the <code>CONFIG_CTRL_IFACE</code> and <code>CONFIG_CTRL_IFACE_UNIX</code> macros when compiling <code>wpa_ctrl.c</code>  to get the function that is useful on Linux. The same file works on Windows with different macros. IMHO the answer could show this information and have reference links to show where the info comes from."}], "tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 2, "last_activity_date": 1467832936, "last_edit_date": 1495535333, "creation_date": 1467829371, "answer_id": 38231110, "question_id": 38215480, "link": "https://stackoverflow.com/questions/38215480/getting-started-with-wpa-supplicant-using-c/38231110#38231110", "title": "Getting started with wpa_supplicant using C", "body": "<blockquote>\n  <p>undefined reference to `wpa_ctrl_open'</p>\n</blockquote>\n\n<p>That's a linker error.  If the command, </p>\n\n<pre><code>$ nm wpa_ctrl.o\n</code></pre>\n\n<p>reveals that it defines <strong>wpa_ctrl_open</strong>, then your immediate problem may be just the command-line order.  Try: </p>\n\n<pre><code>gcc -o main hostapd_cli.o wpa_ctrl.o -lpthread\n</code></pre>\n\n<p>because <code>hostapd_cli</code> references symbols in <code>wpa_ctrl.o</code>.  Otherwise, you need to find the source code that does define that symbol, so you can link to it.</p>\n\n<p><strong>Edit</strong>: Apparently you need to <a href=\"https://stackoverflow.com/questions/35366267/undefined-reference-to-wpa-ctrl-functions-in-my-c-openframeworks-project-need\">define a couple of symbols</a>.  </p>\n\n<p>HTH.  </p>\n"}, {"tags": [], "owner": {"reputation": 318, "user_id": 4309251, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/aa75342dafc6d38c1141dc94a67ff3d5?s=128&d=identicon&r=PG&f=1", "display_name": "Lenny", "link": "https://stackoverflow.com/users/4309251/lenny"}, "is_accepted": false, "score": 3, "last_activity_date": 1598234977, "creation_date": 1598234977, "answer_id": 63553880, "question_id": 38215480, "link": "https://stackoverflow.com/questions/38215480/getting-started-with-wpa-supplicant-using-c/63553880#63553880", "title": "Getting started with wpa_supplicant using C", "body": "<p>This answer comes too late for OP to find useful, but perhaps it will help others who stumble on this same problem.</p>\n<p>In wpa_supplicant-2.9, you don't need to compile <code>wpa_ctrl.c</code> with your own source files. Instead, first build <code>libwpa_client.so</code> (or <code>libwpa_client.a</code>) from the wpa_supplicant sources: <code>$make -C wpa_supplicant libwpa_client.so</code></p>\n<p>Then, link the shared libraries to building your own program. You will need to add the include paths too. Eg) <code>$gcc main.c -Iwpa_supplicant-2.9/src/common -I.wpa_supplicant2-9/src/utils -lwpa_client</code></p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 11639585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2ee951d6a3f66ac40fefede5cf3358?s=128&d=identicon&r=PG&f=1", "display_name": "Tigris", "link": "https://stackoverflow.com/users/11639585/tigris"}, "is_accepted": false, "score": 3, "last_activity_date": 1602160726, "last_edit_date": 1602160726, "creation_date": 1602146775, "answer_id": 64258935, "question_id": 38215480, "link": "https://stackoverflow.com/questions/38215480/getting-started-with-wpa-supplicant-using-c/64258935#64258935", "title": "Getting started with wpa_supplicant using C", "body": "<p>Okay, so I got it to work on my raspberry pi. All credit goes to Gyph on the raspberry pi forums (link: <a href=\"https://www.raspberrypi.org/forums/viewtopic.php?t=42949\" rel=\"nofollow noreferrer\">https://www.raspberrypi.org/forums/viewtopic.php?t=42949</a>).</p>\n<p><strong>Files needed</strong></p>\n<pre><code>in wpa_supplicant/src/common : \nwpa_ctrl.h \nwpa_ctrl.c\n\n\nin wpa_supplicant/src/utils : \nbuild_config.h \ncommon.h \nincludes.h \nos.h \nos_unix.c \nwpabuf.h \nwpa_debug.h\nyour own file\n</code></pre>\n<p>Run following commands to compile:</p>\n<pre><code>gcc -Wall -Wextra -I ./ -MMD -c -g -o wpa_ctrl.o wpa_ctrl.c -D CONFIG_CTRL_IFACE -D CONFIG_CTRL_IFACE_UNIX\ngcc -Wall -Wextra -I ./ -MMD -c -g -o os_unix.o os_unix.c -D CONFIG_CTRL_IFACE -D CONFIG_CTRL_IFACE_UNIX\ngcc -Wall -Wextra -o your_file your_file.c os_unix.o wpa_ctrol.o\n</code></pre>\n<p>To work with wpa_supplicant, I've found it easiest to just copy hostapd_cli, and adjust it to my needs. Note that if you are with wpa_supplicant and not hostapd, you will have to adjust the ctrl_iface_dir variable. (For me it is &quot; /var/run/wpa_supplicant&quot;).</p>\n"}], "owner": {"reputation": 551, "user_id": 4280441, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e873270faa6de26e952eeec51b6fb224?s=128&d=identicon&r=PG&f=1", "display_name": "am3", "link": "https://stackoverflow.com/users/4280441/am3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3057, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1602160726, "creation_date": 1467771444, "last_edit_date": 1495541451, "question_id": 38215480, "link": "https://stackoverflow.com/questions/38215480/getting-started-with-wpa-supplicant-using-c", "title": "Getting started with wpa_supplicant using C", "body": "<p>Before people jump to conclusion saying this is a duplicate post, I'd like to point out that I have gone through the other posts on this topic but really haven't found a solution. </p>\n\n<hr>\n\n<h2>What I need</h2>\n\n<p>My goal is to access the wpa_supplicant from a C program to do the following:</p>\n\n<ol>\n<li>See active connections </li>\n<li>Detect when interfaces goes down</li>\n<li>Connect to AP/Setup an AP and so on</li>\n</ol>\n\n<h2>What I've found out</h2>\n\n<ul>\n<li>I don't need DBus if I need to write a C program to communicate with wpa_supplicant</li>\n<li>I can make use of the functions in <code>wpa_ctrl.h</code> by just including these files in my project directory</li>\n<li>Here are some links I found related to this question. <a href=\"https://stackoverflow.com/questions/8521661/d-bus-tutorial-in-c-to-communicate-with-wpa-supplicant?rq=1\">1</a>, <a href=\"https://stackoverflow.com/questions/19822882/including-wpa-ctrl-h-in-a-c-code\">2</a>, <a href=\"http://lists.shmoo.com/pipermail/hostap/2013-May/027832.html\" rel=\"nofollow noreferrer\">3</a></li>\n<li>I've also gone through the <a href=\"http://w1.fi/wpa_supplicant/devel/hostapd_ctrl_iface_page.html\" rel=\"nofollow noreferrer\">official documentation</a> which talks about external programs using <code>wpa_ctrl.c</code> </li>\n</ul>\n\n<h2>Why the above does not actually solve the problem</h2>\n\n<ul>\n<li>Most of the posts I found on SO and other related websites regarding this issue point to resources like official documentation which is good <em>but does not solve the problem</em></li>\n<li>In a lot of these posts, people have given up pursuing this or have worked out a solution but haven't posted it online.</li>\n<li>For a novice in this topic, it'll be helpful if one can post a working example -- the 'hello world' of wpa_supplicant. </li>\n</ul>\n\n<h2>What I've done so far</h2>\n\n<ul>\n<li><p>From <a href=\"https://w1.fi/releases/\" rel=\"nofollow noreferrer\">this</a> link, I copied  <code>wpa_supplicant-2.5/src/common/wpa_ctrl.h</code>  into  <code>wpa_supplicant-2.5/src/utils</code> directory (since <code>common.h</code> had many dependencies). I then wrote a simple C program <code>hostapd_cli.c</code> in the same directory which is shown below. <strong>I get an undefined reference to 'wpa_ctrl_open' error</strong></p>\n\n<pre><code>#include \"includes.h\"\n#include &lt;dirent.h&gt;\n#include \"wpa_ctrl.h\"\n#include \"common.h\"\nstatic struct wpa_ctrl *ctrl_conn;\nstatic int hostapd_cli_quit = 0;\nstatic int hostapd_cli_attached = 0;\nstatic const char *ctrl_iface_dir = \"/var/run/wpa_supplicant\";\nstatic char *ctrl_ifname = NULL;\nstatic int ping_interval = 5;\n\nint main()\n{\n    ctrl_conn = wpa_ctrl_open(ctrl_iface_dir);\n    if (!ctrl_conn){\n        printf(\"Could not get ctrl interface!\\n\");\n        return -1;\n    }\n    return 0;\n}\n</code></pre></li>\n</ul>\n\n<hr>\n\n<h2>Makefile</h2>\n\n<pre class=\"lang-make prettyprint-override\"><code>C=gcc\nCFLAGS=-lpthread\nDEPS = includes.h wpa_ctrl.h common.h\nOBJ = wpa_ctrl.o hostapd_cli.o\n\n%.o: %.c $(DEPS)\n$(CC) -c -o $@ $&lt; $(CFLAGS)\n\nmain: $(OBJ)\ngcc -o $@ $^ $(CFLAGS)\n\n.PHONY: clean\n\nclean:\nrm -f *.o *~ core $(INCDIR)/*~ \n</code></pre>\n\n<h2>Build log</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code> gcc -o main wpa_ctrl.o hostapd_cli.o -lpthread\n hostapd_cli.o: In function `main':\n hostapd_cli.c:(.text+0xf): undefined reference to `wpa_ctrl_open'\n collect2: error: ld returned 1 exit status\n Makefile:10: recipe for target 'main' failed\n make: *** [main] Error 1\n</code></pre>\n\n<hr>\n\n<p>There's not much material on how to use these files and integrate it to an external project or how to compile it and I'm kinda clueless. Any help on how to proceed will be really appreciated. </p>\n\n<p>Edit 1: Corrected typo and added build log </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1467771613, "post_id": 38215463, "comment_id": 63854452, "body": "Read a little bit about <a href=\"http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap\">stack and heap</a>"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1467771840, "post_id": 38215463, "comment_id": 63854495, "body": "<code>C</code> and <code>C++</code> are separate languages. Tag sensibly."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1467772528, "post_id": 38215463, "comment_id": 63854608, "body": "@sjsam You right but reason for this problem is the same in both languages."}], "answers": [{"comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1467772896, "post_id": 38215486, "comment_id": 63854687, "body": "Nice and complete :-) A bit of explanation about each method will give you a fanbase for this one I guess..nbd though.."}], "tags": [], "owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "is_accepted": false, "score": 2, "last_activity_date": 1467771477, "creation_date": 1467771477, "answer_id": 38215486, "question_id": 38215463, "link": "https://stackoverflow.com/questions/38215463/how-to-declare-a-structure-with-large-structure-arrays-inside-it/38215486#38215486", "title": "how to declare a structure with large structure arrays inside it", "body": "<p>You can only fit \"oh-so-much\" onto the machine stack. Try:</p>\n\n<pre><code>struall* tmp = malloc(sizeof(struall));\n</code></pre>\n\n<p>in C or one of the following for C++:</p>\n\n<pre><code>struall* tmp = new struall; // C++03\nstd::unique_ptr&lt;struall&gt; tmp{new struall}; // C++11\nauto tmp = std::make_unique&lt;struall&gt;(); // C++14\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6554088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83516919ce8f2019fad9986195c49a21?s=128&d=identicon&r=PG&f=1", "display_name": "Toga", "link": "https://stackoverflow.com/users/6554088/toga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "closed_date": 1467771700, "answer_count": 1, "score": 0, "last_activity_date": 1467774615, "creation_date": 1467771281, "last_edit_date": 1467774615, "question_id": 38215463, "link": "https://stackoverflow.com/questions/38215463/how-to-declare-a-structure-with-large-structure-arrays-inside-it", "closed_reason": "Duplicate", "title": "how to declare a structure with large structure arrays inside it", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define     MAXNO   1000\n\ntypedef struct\n{\n    int     n;\n    char    site[4];\n} stru;\n\ntypedef struct\n{\n    stru t1[MAXNO];\n    stru t2[MAXNO];\n} struall;\n\nint main()\n{\n    struall tmp;\n    int i;\n    printf(\"%d\\n\",i);\n    return 1;\n}\n</code></pre>\n\n<p>Hi everyone, I am trying to declare a structure variable which has two structure array members inside it. If the array size (MAXNO) is small, i can compile successfully. However, if the array size is very large (define MAXNO as 1000000), the declaration fails with segmentation fault.</p>\n\n<p>Can anyone tell me the reason?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["java", "c", "bash", "exec", "io-redirection"], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 5819616, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7b6c3bacfb0a7ece6970ed6d16e77759?s=128&d=identicon&r=PG&f=1", "display_name": "Judah Flynn", "link": "https://stackoverflow.com/users/5819616/judah-flynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1467775215, "creation_date": 1467775215, "answer_id": 38215885, "question_id": 38215343, "link": "https://stackoverflow.com/questions/38215343/java-runtime-redirect-c-program-output/38215885#38215885", "title": "java runtime redirect c program output", "body": "<p>After I have spent all day doing this research, and finally I fix this by restarting my computer..... and everything works....</p>\n"}], "owner": {"reputation": 515, "user_id": 5819616, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7b6c3bacfb0a7ece6970ed6d16e77759?s=128&d=identicon&r=PG&f=1", "display_name": "Judah Flynn", "link": "https://stackoverflow.com/users/5819616/judah-flynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "accepted_answer_id": 38215885, "answer_count": 1, "score": 1, "last_activity_date": 1467775215, "creation_date": 1467770189, "last_edit_date": 1495542154, "question_id": 38215343, "link": "https://stackoverflow.com/questions/38215343/java-runtime-redirect-c-program-output", "title": "java runtime redirect c program output", "body": "<p>I have a problem redirect a c program to java runtime class. It's a similar problem like </p>\n\n<p><a href=\"https://stackoverflow.com/questions/33520997/java-runtime-execute-c-language-program-get-no-output\">Java Runtime execute C language program get no output</a>  </p>\n\n<p>However, the answer doesn't help me, and I am guessing because I am in windows environment. I have installed Cygwin and add the path C:\\cygwin64\\bin to my environment to run my c program. My C program is below and compiled as a.exe:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main() {\n    printf(\"Hello World\");\n    return 0;\n}\n</code></pre>\n\n<p>In my java program:</p>\n\n<pre><code>Process p = Runtime.getRuntime().exec(\"C:\\\\a.exe\");\nBufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));\n    while (in.ready()) {\n        System.out.println(in.readLine());\n    }\n</code></pre>\n\n<p>This code prints nothing. However, If I changed </p>\n\n<p>Process p = Runtime.getRuntime().exec(\"C:\\\\a.exe\");</p>\n\n<p>to other bash commands like </p>\n\n<p>Process p = Runtime.getRuntime().exec(\"ls -la\");</p>\n\n<p>It works! </p>\n\n<p>I have tried use ProcessBuilder to redirect the output, running \"a.exe\" doesn't work but \"ls -la\" works. This is the code:</p>\n\n<pre><code>File output = new File(\"C:\\\\outputfile.txt\"); \nProcessBuilder pb = new ProcessBuilder(\"C:\\\\a.exe\").inheritIO();\npb.redirectOutput(output);\nProcess p = pb.start();\n</code></pre>\n\n<p>My guesses are something related Cgywin but I have no idea how to fix this. Does anyone know what's wrong? Thanks in advance, </p>\n"}, {"tags": ["c", "matlab", "memory", "malloc", "mex"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5080891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b50076436a0fc4747b4d77f4a5eac72c?s=128&d=identicon&r=PG", "display_name": "justin", "link": "https://stackoverflow.com/users/5080891/justin"}, "edited": false, "score": 0, "creation_date": 1467770878, "post_id": 38215366, "comment_id": 63854307, "body": "Remember we want to assign out to the plhs[0] what you wrote seems to me that we have plhs[0[ and output is pointing to it. out in my case is vector of data 1XN and I am trying to assign it to plhs[0] that is my matlab output. Can you elaborate about your answer and also can you tell me if your output and my out are the same?"}, {"owner": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "reply_to_user": {"reputation": 153, "user_id": 5080891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b50076436a0fc4747b4d77f4a5eac72c?s=128&d=identicon&r=PG", "display_name": "justin", "link": "https://stackoverflow.com/users/5080891/justin"}, "edited": false, "score": 0, "creation_date": 1467771091, "post_id": 38215366, "comment_id": 63854359, "body": "@justin Sorry, I meant <code>out</code>. You can allocate <code>out</code> at the beginning  (using <code>mxCreateDoubleMatrix</code> and then fill it within the rest of your mex file. There is no need to allocate it separately."}], "tags": [], "owner": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "is_accepted": false, "score": 2, "last_activity_date": 1467771367, "last_edit_date": 1467771367, "creation_date": 1467770393, "answer_id": 38215366, "question_id": 38215317, "link": "https://stackoverflow.com/questions/38215317/freeing-memory-in-mex-code/38215366#38215366", "title": "Freeing memory in mex code", "body": "<p>You don't need to allocate the array with <code>mxMalloc</code>. <code>mxCreateDoubleMatrix</code> <em>already</em> allocates the array. Once you have your pointer to this data (obtained using <code>mxGetPr</code>), you can then fill the array with the necessary values.</p>\n\n<pre><code>double *out;\n\n// Allocate memory for the first output\nplhs[0] = mxCreateDoubleMatrix(1,N,mxREAL);\n\n// Get the pointer to the output data\nout = mxGetPr(plhs[0]);\n\n// Run your algorithm here to populate out with the data you need\n</code></pre>\n\n<p>If for some reason you <em>do</em> need to create <code>out</code> in some other way, you want to copy the contents of that separate array into the output prior to freeing the memory.</p>\n\n<pre><code>double *out;\ndouble *realout;\n\n// Allocate data to use internally\nout = mxMalloc(sizeof(double) * N);\n\n// Initialize the array that will be returned to MATLAB \nplhs[0] = mxCreateDoubleMatrix(1, N, mxREAL);\nrealout = mxGetPr(plhs[0]);\n\n// Now copy all values to the MATLAB output\nfor ( j = 0; j &lt; N; j++ )\n    realout[j] = out[j];\n\n// Now you can free up memory for out\nmxFree(out)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5080891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b50076436a0fc4747b4d77f4a5eac72c?s=128&d=identicon&r=PG", "display_name": "justin", "link": "https://stackoverflow.com/users/5080891/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467771367, "creation_date": 1467769962, "question_id": 38215317, "link": "https://stackoverflow.com/questions/38215317/freeing-memory-in-mex-code", "title": "Freeing memory in mex code", "body": "<p>I am writing a mex code and I am thinking that I am not using memory very efficiently. Here is what I do. I am allocating memory for variable called out like  </p>\n\n<pre><code>out=mxMalloc(sizeof(double)*N);\n\nplhs[0]=mxCreateDoubleMatrix(1,N,mxREAL);\n\nset(plhs[0],out);\n</code></pre>\n\n<p>The problem is that I am not freeing memory that I allocate for variable out because if I do I will receive segmentation error since I will use it in Matlab. So can anyone suggest me a better technique to do what above commands are doing ? Is there anyway to free memory for out or to avoid defining matrix of length 1X N?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "hashtable"], "comments": [{"owner": {"reputation": 3108, "user_id": 1556820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cffaba688aa3f0f21ece8e09c9450e37?s=128&d=identicon&r=PG", "display_name": "mangusta", "link": "https://stackoverflow.com/users/1556820/mangusta"}, "edited": false, "score": 1, "creation_date": 1467767939, "post_id": 38215098, "comment_id": 63853680, "body": "xor them all, for instance"}, {"owner": {"reputation": 9286, "user_id": 425756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Jsf1p.jpg?s=128&g=1", "display_name": "Justin Meiners", "link": "https://stackoverflow.com/users/425756/justin-meiners"}, "edited": false, "score": 0, "creation_date": 1467768485, "post_id": 38215098, "comment_id": 63853789, "body": "If you are using a hash table with 2000 defined integer keys why couldn&#39;t the integers be indicies into the hash table (an array)?"}, {"owner": {"reputation": 387, "user_id": 990545, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f18b7b61dfbfe46c7af3cbcbda568c4f?s=128&d=identicon&r=PG", "display_name": "Vanush Vee", "link": "https://stackoverflow.com/users/990545/vanush-vee"}, "edited": false, "score": 0, "creation_date": 1467768679, "post_id": 38215098, "comment_id": 63853828, "body": "If the keys are very large, it will use up a lot of memory."}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 1, "creation_date": 1467770137, "post_id": 38215098, "comment_id": 63854162, "body": "What does monotonic have to do with it? Anyway I suggest the standard <code>modular hashing, where the hash function is simply h(k) = k mod m for some m</code> It is simple to implement and has worked well for me in the past."}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1467770146, "post_id": 38215098, "comment_id": 63854170, "body": "Gone are the days when ~2000 is too large a size for an array to be."}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 1, "creation_date": 1467771179, "post_id": 38215098, "comment_id": 63854373, "body": "Java solves this (java.lang.Integer.hashCode) by just returning the value. I suppose it would make sense to have a prime number of buckets and use <code>value % p</code>  to pick the bucket."}, {"owner": {"reputation": 387, "user_id": 990545, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f18b7b61dfbfe46c7af3cbcbda568c4f?s=128&d=identicon&r=PG", "display_name": "Vanush Vee", "link": "https://stackoverflow.com/users/990545/vanush-vee"}, "edited": false, "score": 0, "creation_date": 1467771495, "post_id": 38215098, "comment_id": 63854430, "body": "But if the key is 9423849223, I can&#39;t create an array index like that can I? Also, they are not equally spaced."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1467773664, "post_id": 38215098, "comment_id": 63854853, "body": "Unless you know something a priori about the distribution of the integers, you can&#39;t do significantly better than - as others have said - choosing a prime table size and using <code>table_index = (unsigned) val % (size_t) size</code>."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1467819505, "creation_date": 1467819505, "answer_id": 38228038, "question_id": 38215098, "link": "https://stackoverflow.com/questions/38215098/easiest-way-to-hash-set-of-integers/38228038#38228038", "title": "Easiest way to hash set of integers?", "body": "<blockquote>\n  <p>How can I take advantage of this constraint (monotonic) to efficiently hash them?</p>\n</blockquote>\n\n<p>Given that the keys are sorted (monotonic) is unlikely to aid in any hashing as hashing, in general, attempts to defeat the ordering of keys.</p>\n\n<p>Hashing chops up any key is a seemingly non-ordered fashion.</p>\n\n<p>Not only are keys and related data needed to be added to a hash table, <em>access</em> (simply reads) to the hash table is done through keys which are certainly not sorted.  </p>\n\n<p>If original keys are sorted and access is sequential, then a hash table should not be used in the first place.</p>\n"}], "owner": {"reputation": 387, "user_id": 990545, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f18b7b61dfbfe46c7af3cbcbda568c4f?s=128&d=identicon&r=PG", "display_name": "Vanush Vee", "link": "https://stackoverflow.com/users/990545/vanush-vee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1467819505, "creation_date": 1467767783, "question_id": 38215098, "link": "https://stackoverflow.com/questions/38215098/easiest-way-to-hash-set-of-integers", "title": "Easiest way to hash set of integers?", "body": "<p>I have a set of ~2000 monotonic large integers (32-bit) which must serve as keys to a hash table. How can I take advantage of this constraint to efficiently hash them?</p>\n"}, {"tags": ["c", "recursion", "fibonacci"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1467770294, "post_id": 38215004, "comment_id": 63854196, "body": "Change <code>if(n==2)</code> to <code>if(n==1 || n==0)</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467792625, "post_id": 38215004, "comment_id": 63861065, "body": "What did the <a href=\"http://stackoverflow.com/search?q=%5Bc%5D+fibonacci+recursion\">93 already present questions on SO regarding recursive fibonacci number implementations in C</a> reveal to you?"}], "answers": [{"comments": [{"owner": {"reputation": 1350, "user_id": 777769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5172a06167da9e5aac8cde4b527100b2?s=128&d=identicon&r=PG", "display_name": "Hamid Rohani", "link": "https://stackoverflow.com/users/777769/hamid-rohani"}, "edited": false, "score": 0, "creation_date": 1467773382, "post_id": 38215058, "comment_id": 63854794, "body": "+1 In addition, the question wants &quot;to print all values of the fibonacci sequence of given terms&quot;. Please improve your answer if it is possible."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1467792440, "post_id": 38215058, "comment_id": 63860967, "body": "It&#39;s not clear why the program allows/stores <code>n</code> up to 1000 when it starts overflowing before <code>n</code> even hits 50."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1467801920, "last_edit_date": 1467801920, "creation_date": 1467767405, "answer_id": 38215058, "question_id": 38215004, "link": "https://stackoverflow.com/questions/38215004/recursion-and-fibonacci-sequence/38215058#38215058", "title": "Recursion and fibonacci sequence", "body": "<p>Your base case is incorrect.  When <code>n==2</code>, you'll call <code>fibonacci(1)</code> and <code>fibonacci(0)</code>.  The latter will continue downward until you run out of stack space.</p>\n\n<p>You should check for numbers <em>less than to equal to</em> the base case:</p>\n\n<pre><code>if (n&lt;=2)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If you want to print all the values, you can't do it the way the function is currently structured because of the double recursion.</p>\n\n<p>If you keep track of the numbers you've calculated previously, it can be done.  Then you only print out a number (and perform recursion) the first time you calculate a number, otherwise you look it up from the list and continue.</p>\n\n<pre><code>int fibonacci(int n){\n    static int seq[50] = {0};\n\n    if (n &gt; 50) {\n        printf(\"number too large\\n\");\n        return 0;\n    }\n    if (seq[n-1] == 0) {\n        if (n&lt;=2) {\n            seq[n-1] = 1;\n        } else {\n            seq[n-1] = fibonacci(n-1) + fibonacci(n-2);\n        }\n        printf(\"%d \", seq[n-1]);\n    }\n    return seq[n-1];\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Enter the number of terms you'd like in the sequence\n10\n1 1 2 3 5 8 13 21 34 55 The answer is 55\n</code></pre>\n\n<p>Note that the above function has a limit of 50, since the result is too large for a 32 bit int at around that range.</p>\n"}], "owner": {"reputation": 33, "user_id": 6539370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iw1Sp0Mg98o/AAAAAAAAAAI/AAAAAAAAAVk/eXGiEmNks1s/photo.jpg?sz=128", "display_name": "ivyraveneve", "link": "https://stackoverflow.com/users/6539370/ivyraveneve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 38215058, "answer_count": 1, "score": 0, "last_activity_date": 1467801920, "creation_date": 1467766915, "last_edit_date": 1467768317, "question_id": 38215004, "link": "https://stackoverflow.com/questions/38215004/recursion-and-fibonacci-sequence", "title": "Recursion and fibonacci sequence", "body": "<p>How do I get this code to print all values of the fibonacci sequence of given terms? Right now it prints only the last term </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint fibonacci(int n){\n\n    if (n==2)\n        return 1; \n    else\n      return fibonacci(n-1) + fibonacci(n-2);   \n\n}\n\n\nint main()\n{\n\n    int n;\n    int answer;\n    printf(\"Enter the number of terms you'd like in the sequence\\n\");\n    scanf(\"%d\",&amp;n);\n\n    answer = fibonacci(n);\n    printf(\"The answer is %d\\n\", answer);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arguments", "getopt"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1467764899, "post_id": 38214785, "comment_id": 63853098, "body": "remove <code>char *optarg;</code>"}, {"owner": {"reputation": 263, "user_id": 4208955, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b322f63cffea1fd8be9390d72bf6149a?s=128&d=identicon&r=PG&f=1", "display_name": "DAnsermino", "link": "https://stackoverflow.com/users/4208955/dansermino"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467765541, "post_id": 38214785, "comment_id": 63853205, "body": "wow. thank YOU! @BLUEPIXY"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467843367, "post_id": 38214785, "comment_id": 63891006, "body": "you should read the man page for <code>getopt()</code> which includes this critical statement:  <code>If there are no more option  characters,  getopt()  returns  -1.   Then  optind  is  the  index in argv of the first argv-element that is not an     option.</code>"}, {"owner": {"reputation": 263, "user_id": 4208955, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b322f63cffea1fd8be9390d72bf6149a?s=128&d=identicon&r=PG&f=1", "display_name": "DAnsermino", "link": "https://stackoverflow.com/users/4208955/dansermino"}, "edited": false, "score": 0, "creation_date": 1467946964, "post_id": 38214785, "comment_id": 63937385, "body": "@usre3629249 can you elaborate? I&#39;m sorry but I dont see the point you are trying to make.. Are you suggesting I should be error checking in case there is something following the command-line argument parameter? This is just sample code - a simple version of what I was struggling with"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8941774, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/e2c236d245e98e605a946a59b807c24d?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/8941774/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1510696948, "creation_date": 1510696948, "answer_id": 47295957, "question_id": 38214785, "link": "https://stackoverflow.com/questions/38214785/optarg-from-getopt-is-always-null/47295957#47295957", "title": "optarg from getopt() is always null", "body": "<p>optarg is something that's initialized by a call to getopt(), you're overwriting it by initializing it yourself. Remove the line \"char* optarg;\" and you should be good to go.</p>\n"}], "owner": {"reputation": 263, "user_id": 4208955, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b322f63cffea1fd8be9390d72bf6149a?s=128&d=identicon&r=PG&f=1", "display_name": "DAnsermino", "link": "https://stackoverflow.com/users/4208955/dansermino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510696948, "creation_date": 1467764749, "question_id": 38214785, "link": "https://stackoverflow.com/questions/38214785/optarg-from-getopt-is-always-null", "title": "optarg from getopt() is always null", "body": "<p>I'm trying to process an argument parameter using the optarg parameter of getopt(), but it remains null. Could this be something to do with the c99 standard? I know I will need to actually copy the string from optarg but it never even gets set.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]) {\n    char *optarg;\n    int ch; \n\n    char *indir = NULL;\n\n    while ((ch = getopt(argc, argv, \"d:\")) != -1) {\n        switch(ch) {\n            case 'd':\n                indir = optarg;\n                fprintf(stderr, \"Optarg: %s\\n\", optarg);\n                fprintf(stderr, \"Dir name: %s\\n\", indir);\n                break;\n            default : \n                fprintf(stderr, \"Usage:  test -d &lt;input directory&gt;\\n\");\n                exit(1);\n        }\n    }\n    if(indir == NULL){\n        fprintf(stderr, \"Input directory required.\\n\");\n        exit(1);\n    }\n    else{\n        printf(\"Input dir: %s\\n\", indir);\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "multidimensional-array"], "comments": [{"owner": {"reputation": 272, "user_id": 5457944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BsJcC1jwxS8/AAAAAAAAAAI/AAAAAAAADSY/4fwhpbXuSos/photo.jpg?sz=128", "display_name": "Vahid", "link": "https://stackoverflow.com/users/5457944/vahid"}, "edited": false, "score": 1, "creation_date": 1467812366, "post_id": 38214696, "comment_id": 63872749, "body": "doesn answer the question, but would be useful to generate the C code for the function with <a href=\"http://it.mathworks.com/videos/generating-c-code-from-matlab-code-68964.html\" rel=\"nofollow noreferrer\">Matlab Coder</a> and look into the generated code."}], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 4648634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TpKT2.png?s=128&g=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4648634/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1467778036, "last_edit_date": 1495540739, "creation_date": 1467778036, "answer_id": 38216183, "question_id": 38214696, "link": "https://stackoverflow.com/questions/38214696/converting-matlab-function-to-c/38216183#38216183", "title": "Converting matlab function to C", "body": "<p>Lets say you have a matlab matrix A.</p>\n\n<pre><code> A(1:end) = 3;\n</code></pre>\n\n<p>This sets all of the elements from A(1) to A(end) to 3.  Likewise, if you have</p>\n\n<pre><code> B = A(5:8)\n</code></pre>\n\n<p>Then B will contain elements A(5), A(6), A(7), and A(8).</p>\n\n<p>So the code if the code was</p>\n\n<pre><code> Ax = x1(3:mx1,2:my1-1,2:mz1-1) )/(hx^2)\n</code></pre>\n\n<p>It can be written as:</p>\n\n<pre><code> for (int i = 3; i &lt;= mx1; i++)\n     for(int j = 2; j &lt;= my1-1; j++)\n         for(int k = 2; k &lt;= mz1-1; k++)\n              Ax[i-3][j-2][k-2] = pow(x1[j][i][k], 2);\n</code></pre>\n\n<p>If I remember correctly matlab is column first and c is row first, which is why it is x1[j][i]... not x1[i][j], but I may have remembered wrong so you may wish to confirm that.</p>\n\n<p>Also note that this affects how the arrays are stored in memory, and thus you should account for this if you care about your code being efficient.  This <a href=\"https://en.wikipedia.org/wiki/Row-major_order\" rel=\"nofollow noreferrer\">wikipedia article</a> explains how in c an array will be stored row major, and in matlab column major.  Basically it's faster to access elements that are closer to eachother in memory because you have to write to cache less.</p>\n\n<p>More on this: <a href=\"https://stackoverflow.com/questions/16699247/what-is-cache-friendly-code\">What is &quot;cache-friendly&quot; code?</a>.</p>\n"}], "owner": {"reputation": 3833, "user_id": 906357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/456c9cf9b7e6c61a7037bd5a604769ca?s=128&d=identicon&r=PG", "display_name": "user906357", "link": "https://stackoverflow.com/users/906357/user906357"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 38216183, "answer_count": 1, "score": -4, "last_activity_date": 1467778036, "creation_date": 1467763697, "question_id": 38214696, "link": "https://stackoverflow.com/questions/38214696/converting-matlab-function-to-c", "title": "Converting matlab function to C", "body": "<p>This is a Matlab function and I'm trying to rewrite it in C. The input x1 is a 3 dimensional array and hx,hy,hz are just numbers. The problem I am having is understanding exactly how the elements of the 3D array are assigned. How does this last line work?</p>\n\n<pre><code>function Ax = D_XX_YY_ZZ(x1,hx,hy,hz)\n\n[mx1, my1, mz1]=size(x1);\n\nAx = (x1(1:mx1-2,2:my1-1,2:mz1-1)+ ...\n +x1(3:mx1,2:my1-1,2:mz1-1) )/(hx^2) + ...\n (x1(2:mx1-1,1:my1-2,2:mz1-1)+ ...\n +x1(2:mx1-1,3:my1,2:mz1-1) )/(hy^2) + ...\n (x1(2:mx1-1,2:my1-1,1:mz1-2)+ ...\n +x1(2:mx1-1,2:my1-1,3:mz1) )/(hz^2) ;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 1, "creation_date": 1467763858, "post_id": 38214646, "comment_id": 63852882, "body": "From a quick glance, I see that you have no NULL protection, so you could potentially try and dereference a null pointer"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1467763936, "post_id": 38214646, "comment_id": 63852898, "body": "You are not actually swapping the nodes. You are just changing what <code>current</code> and <code>pInsert</code> point at."}, {"owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1467764006, "post_id": 38214646, "comment_id": 63852914, "body": "@jxh how do I swap the nodes?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1467764062, "post_id": 38214646, "comment_id": 63852928, "body": "Change what <code>next</code> and <code>prev</code> point to in all the nodes affected by the swap."}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 1, "creation_date": 1467764101, "post_id": 38214646, "comment_id": 63852940, "body": "<code>Current= current-&gt;next</code> will cause a seg fault later on if your current is the last node. Add a NULL pointer guard at <code>if (current-&gt;data &gt;= pInsert-&gt;data)</code>"}, {"owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "edited": false, "score": 0, "creation_date": 1467764561, "post_id": 38214646, "comment_id": 63853033, "body": "would it be better to use while loops instead and go until current and pinsert is null?"}, {"owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1467764714, "post_id": 38214646, "comment_id": 63853066, "body": "I got it to run now but it just prints back in the same order, I guess its what @jxh said about just changing what the pointer goes to"}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 1, "creation_date": 1467764929, "post_id": 38214646, "comment_id": 63853107, "body": "yup, now when you are dealing with linked lists, especially when you have the prev/next pointers, to move things around, you&#39;ll need to have a delete function and an insert function. The delete function basically takes a node, and does something like this: <code>node-&gt;prev-&gt;next = node-&gt;next</code> that should effectively delete it from the list. your insert function would then look something like <code>nodeIWantToInsert-&gt;next = insertionPoint-&gt;next, nodeIWantToInsert-&gt;previous = insertionPoint, nodeIWantToInsert-&gt;next-&gt;previous = nodeIWantToInsert</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1467765209, "post_id": 38214646, "comment_id": 63853154, "body": "searching this site for the <code>[c]</code> tag in combination with the last four words of this question&#39;s title would probably have been a fruitful endeavor. I assure you, you&#39;re not the first person troubled by sorting linked lists."}, {"owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467765537, "post_id": 38214646, "comment_id": 63853204, "body": "@WhozCraig I did look around and on google but I was having trouble doing it"}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "reply_to_user": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "edited": false, "score": 1, "creation_date": 1467765891, "post_id": 38214836, "comment_id": 63853267, "body": "got rid of it with the harder to read multiple dereferences ;), ie <code>node-&gt;next-&gt;prev</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "edited": false, "score": 1, "creation_date": 1467765899, "post_id": 38214836, "comment_id": 63853270, "body": "@AdamWolf that&#39;s not the only problem. This also spells failure for a list that, sorted, changes which node is the head. The caller will never see that change."}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 1, "creation_date": 1467765939, "post_id": 38214836, "comment_id": 63853280, "body": "Oh yes, and I removed that bit also because of that and it might not hurt to throw in a find head/tail function. ie search until you hit the null"}, {"owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "edited": false, "score": 0, "creation_date": 1467766152, "post_id": 38214836, "comment_id": 63853316, "body": "I&#39;m getting a core dumped message from this? using while loops seemed to fix it but It doesnt print right. the main while loop is doing current-&gt;next != null and the inner while loop is doing pInsert-&gt;prev != null"}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 1, "creation_date": 1467766307, "post_id": 38214836, "comment_id": 63853342, "body": "Whoops, sorry, I&#39;d updated it with all the NULL checks needed"}, {"owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "edited": false, "score": 0, "creation_date": 1467845785, "post_id": 38214836, "comment_id": 63891755, "body": "@engineer14 Hey, I am still having problems. The core dumped error still happens."}, {"owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "edited": false, "score": 0, "creation_date": 1467889494, "post_id": 38214836, "comment_id": 63908569, "body": "The only way i can envision a core dump happening for this function up top is if you are passing it a NULL pointer"}], "tags": [], "owner": {"reputation": 597, "user_id": 2558056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0549be54a5ca0ad7babefe1271d7a681?s=128&d=identicon&r=PG", "display_name": "engineer14", "link": "https://stackoverflow.com/users/2558056/engineer14"}, "is_accepted": false, "score": 1, "last_activity_date": 1467766460, "last_edit_date": 1467766460, "creation_date": 1467765274, "answer_id": 38214836, "question_id": 38214646, "link": "https://stackoverflow.com/questions/38214646/need-some-assistance-with-sorting-a-linked-list/38214836#38214836", "title": "Need some assistance with sorting a linked list", "body": "<pre><code>void sort(node *current) {\n\n    node *pTemp, *pInsert = current;\n    current = current-&gt;next;\n    int i, j;\n    for (i = 0; i &lt; size(); i++) {\n        for (j = i; j &gt; 0; j--) {\n         if (current != NULL &amp;&amp; pInsert != NULL &amp;&amp; current-&gt;data &gt;= pInsert-&gt;data) {\n\n/*start delete node*/\n          if (pInsert-&gt;prev != NULL)\n           pInsert-&gt;prev-&gt;next = pInsert-&gt;next;\n          if (pInsert-&gt;next != NULL)\n           pInsert-&gt;next-&gt;prev = pInsert-&gt;prev \n/*end delete node*/\n/*start add node*/\n          pInsert-&gt;next = current-&gt;next;\n          pInsert-&gt;prev = current;\n          if (current-&gt;next != NULL)\n           current-&gt;next-&gt;prev = pInsert;\n          current-&gt;next = pInsert;\n/*end add node*/\n            }\n            pInsert = pInsert-&gt;prev;\n        }\n        current = current-&gt;next;\n    }\n\n    print();\n}\n</code></pre>\n\n<p>Try this. Basically you delete your node from its current position, by having the previous node's next pointer skip the node in question and point to the one after, and then you have the next node skip the node in question and point to the previous node.</p>\n\n<p>Then you insert your node by having the next pointer from your node in question point to the next node from your insertion point... (gets a little confusing when talking about the next of the next/ next of the previous).</p>\n\n<p><strong>important</strong>: Also, when dealing with those pointers, make sure to have your NULL checks!</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 3, "last_activity_date": 1467766748, "last_edit_date": 1467766748, "creation_date": 1467766346, "answer_id": 38214954, "question_id": 38214646, "link": "https://stackoverflow.com/questions/38214646/need-some-assistance-with-sorting-a-linked-list/38214954#38214954", "title": "Need some assistance with sorting a linked list", "body": "<p>To figure out how to swap adjacent nodes in a linked list, it is instructive to draw a picture. Imagine nodes A, B, C, D arranged in linked list order, where the next pointers are green wires, and the previous pointers are red wires. Then, imagine what happens to the wires if you just moved the B and C nodes into each other's position.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BjTHR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BjTHR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now, figure out what pointer manipulations you would have to do to get the picture to look nice and pretty again.</p>\n"}], "owner": {"reputation": 309, "user_id": 5231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1179952775353279/picture?type=large", "display_name": "Adam Wolf", "link": "https://stackoverflow.com/users/5231073/adam-wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467766748, "creation_date": 1467763293, "question_id": 38214646, "link": "https://stackoverflow.com/questions/38214646/need-some-assistance-with-sorting-a-linked-list", "title": "Need some assistance with sorting a linked list", "body": "<p>I am working on a school assignment and I am making an int linkedlist and it should have a function to sort it. I'm pretty sure I got the linkedlinks right based on the output. The sort function should swap nodes, not values. I am getting a Segmentation fault (core dumped) message, not sure what it means or why. I'm looking for help on why it doesn't work. I am still pretty bad with pointers so I assume it is an issue with that. Also my sort is insertion sort</p>\n\n<pre><code>typedef struct node {\n    int data;\n    struct node *next;\n    struct node *prev;\n} node;\n\nnode *pHead = NULL; // head of list\nnode *pCurr = NULL; // current node\nint count = 0;\n\nvoid create(int data) {\n\n    node *pNode = (node*) malloc(sizeof(node));\n    pNode-&gt;data = data;\n    pNode-&gt;next = NULL;\n    pNode-&gt;prev = NULL;\n\n\n    pHead = pCurr = pNode;\n    count += 1;\n}\n\nvoid add(int data) {\n    if (pHead == NULL) {\n        return create(data);\n    }\n\n    node *pNode = (node*) malloc(sizeof(node));\n    pNode-&gt;data = data;\n    pNode-&gt;next = NULL;\n\n    pNode-&gt;prev = pCurr;\n    pCurr-&gt;next = pNode;\n    pCurr = pNode;\n\n    count += 1;\n}\n\nint size() {\n    return count;\n}\n\nvoid print() {\n    node *pNode = pHead;\n    while (pNode != NULL) {\n        printf(\"[%d]-&gt;\", pNode-&gt;data);\n        pNode = pNode-&gt;next;\n    }\n    printf(\"\\n\");\n}\n\nvoid sort(node *current) {\n\n    pHead = current;\n    node *pInsert = pHead;\n    current = current-&gt;next;\n    int i, j;\n    for (i = 0; i &lt; size(); i++) {\n        for (j = i; j &gt; 0; j--) {\n            if (current-&gt;data &gt;= pInsert-&gt;data) {\n                node *pTemp = current;\n                current = pInsert;\n                pInsert = pTemp;\n            }\n            pInsert = pInsert-&gt;prev;\n        }\n        current = current-&gt;next;\n    }\n\n    print();\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "answers": [{"tags": [], "owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "is_accepted": true, "score": 6, "last_activity_date": 1467762063, "creation_date": 1467762063, "answer_id": 38214485, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/38214485#38214485", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>The value <code>0</code> is divisible by <code>K</code> for all <code>K</code> that are allowed (non zero). There is nothing special about zero. The definition of divisible means there is no remainder after dividing.</p>\n"}, {"comments": [{"owner": {"reputation": 1385, "user_id": 233333, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/k71xm.jpg?s=128&g=1", "display_name": "Martin Berger", "link": "https://stackoverflow.com/users/233333/martin-berger"}, "edited": false, "score": 1, "creation_date": 1605559451, "post_id": 38214536, "comment_id": 114682423, "body": "You seem knowledgeable about this. Do you maybe know what this task has to do with PrefixSums? I see no usage of Prefix Sums here..."}, {"owner": {"reputation": 857, "user_id": 6493584, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y78us2UDZ7c/AAAAAAAAAAI/AAAAAAAABb4/yfq4ouhkoD0/photo.jpg?sz=128", "display_name": "Inovramadani", "link": "https://stackoverflow.com/users/6493584/inovramadani"}, "reply_to_user": {"reputation": 1385, "user_id": 233333, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/k71xm.jpg?s=128&g=1", "display_name": "Martin Berger", "link": "https://stackoverflow.com/users/233333/martin-berger"}, "edited": false, "score": 0, "creation_date": 1609633360, "post_id": 38214536, "comment_id": 115884112, "body": "@MartinBerger it is indeed a prefix sum problem. I have put explanation on my code here, please have a look: <a href=\"https://app.codility.com/demo/results/trainingW92E84-XPZ/\" rel=\"nofollow noreferrer\">app.codility.com/demo/results/trainingW92E84-XPZ</a>"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 5, "last_activity_date": 1467763913, "last_edit_date": 1467763913, "creation_date": 1467762450, "answer_id": 38214536, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/38214536#38214536", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>The range is inclusive: there is 1 value in the range <code>0</code> to <code>0</code>: the value <code>0</code> itself.  All values are divisible by <code>1</code>, so the result is indeed <code>1</code> value.</p>\n\n<p>Note that the proposed code is redundant:</p>\n\n<p><code>int inclusive = ((A%K)==0) ? 1 : 0;</code> is equivalent to <code>int inclusive = (A%K)==0;</code>.  It can be further simplified as <code>int inclusive = !(A%K);</code> and the complete solution becomes a one-liner:</p>\n\n<pre><code>int solution(int A, int B, int K) { return B/K - A/K + !(A%K); }\n</code></pre>\n\n<p>And here is a variant with only 2 divisions:</p>\n\n<pre><code>int solution(int A, int B, int K) { return B/K - (A ? (A-1)/K : -1); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8365024, "user_type": "registered", "profile_image": "https://graph.facebook.com/1104100443056141/picture?type=large", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8365024/rafael"}, "is_accepted": false, "score": 0, "last_activity_date": 1558415842, "creation_date": 1558415842, "answer_id": 56231518, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/56231518#56231518", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>In my case, I just made the following math:</p>\n\n<p><strong>(B - A)/K + (A/K)</strong></p>\n\n<p>in same cases as explained before, this + (A/K) is very tricky because of some stupid inputs like A=0,B=0 etc. Then, for those cases, I made a treatment, and I'm calling it of adjustment. </p>\n\n<p>There's the code:</p>\n\n<pre><code>class Solution {\npublic int solution(int startingFrom, int endingAt, int divisibleBy) {\n\n    double adjustment = startingFrom % divisibleBy == 0 || endingAt % divisibleBy == 0 ? 1 : ((double) startingFrom &lt; divisibleBy) ? (double) startingFrom / divisibleBy : 0;\n\n    return (int) ( ((double) endingAt - startingFrom) / (divisibleBy) + adjustment);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Java code 100/100.</p>\n\n<p><a href=\"https://app.codility.com/demo/results/trainingS96J5R-NTC/\" rel=\"nofollow noreferrer\">https://app.codility.com/demo/results/trainingS96J5R-NTC/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 5746074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0df465732eeb9ce0ef0b96813aa0786b?s=128&d=identicon&r=PG", "display_name": "Ewomazino Ukah", "link": "https://stackoverflow.com/users/5746074/ewomazino-ukah"}, "is_accepted": false, "score": 0, "last_activity_date": 1559152972, "creation_date": 1559152972, "answer_id": 56366235, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/56366235#56366235", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>My solution in javascript </p>\n\n<pre><code>function solution (A, B, K) {\n  if (B - A === 0 &amp;&amp; B == 0) return 1;\n  if (B - A === 0 &amp;&amp; B &gt; K &amp;&amp; B % K === 0 ) return 1;\n  if (B - A === 0 &amp;&amp; B &gt; K &amp;&amp; B % K &gt; 0 ) return 0;\n  if (B &lt; K) return 0;\n\n  return Math.floor(B/K) - Math.floor((A - 1)/K);\n}\n</code></pre>\n\n<p>more here <a href=\"https://github.com/mazeeblanke/codilityLessons\" rel=\"nofollow noreferrer\">https://github.com/mazeeblanke/codilityLessons</a></p>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 3906603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/714d022423a0ad29da894521ec2d4987?s=128&d=identicon&r=PG&f=1", "display_name": "Jumshud", "link": "https://stackoverflow.com/users/3906603/jumshud"}, "is_accepted": false, "score": 0, "last_activity_date": 1574172998, "creation_date": 1574172998, "answer_id": 58936101, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/58936101#58936101", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>Here is my solution:</p>\n\n<pre><code>    function solution(A, B, K) {\n        while (B % K &gt; 0) {\n            B--;\n        }\n        while (A % K &gt; 0) {\n            A++;\n        }\n\n        return (B-A)/K + 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 7544283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-67Q4AkLDP5Y/AAAAAAAAAAI/AAAAAAAAAA8/PIxW62vOg-A/photo.jpg?sz=128", "display_name": "Martin Indzhov", "link": "https://stackoverflow.com/users/7544283/martin-indzhov"}, "is_accepted": false, "score": 0, "last_activity_date": 1597694779, "creation_date": 1597694779, "answer_id": 63457904, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/63457904#63457904", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>I think my solution is pretty straight forward and self-explanatory. 100/100</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function solution(min, max, divider) {\n  let minRemainder = min % divider;\n  let minQuotient = Math.floor(min / divider);\n  let maxQuotient = Math.floor(max / divider);\n  const includeFirstNum = minRemainder === 0;\n  const bonus = includeFirstNum ? 1 : 0;\n  const res = maxQuotient - minQuotient + bonus;\n  return res;\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 7582, "user_id": 2528057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JAZeX.jpg?s=128&g=1", "display_name": "Stefano Falasca", "link": "https://stackoverflow.com/users/2528057/stefano-falasca"}, "is_accepted": false, "score": 1, "last_activity_date": 1604658176, "creation_date": 1604658176, "answer_id": 64712790, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/64712790#64712790", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>Here is a C++ solution with 100/100 score</p>\n<pre><code>int solution(int A, int B, int K) {\n    return B / K - A / K + (A % K == 0 ? 1 : 0);\n}\n</code></pre>\n<p>it returns the number of multiples in the interval [0, B] minus the number of multiples in the interval [0, A] - getting the number of multiples in the interval (A, B] - and adds the multiple in A if A is a multiple.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14092221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a961155e16be5f214742ddaf1ca18efd?s=128&d=identicon&r=PG&f=1", "display_name": "nIshan Q", "link": "https://stackoverflow.com/users/14092221/nishan-q"}, "is_accepted": false, "score": 0, "last_activity_date": 1608562985, "creation_date": 1608562985, "answer_id": 65395096, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct/65395096#65395096", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p>Here is my solution:</p>\n<pre><code>\n    import math\n    def sol(A, B, K):\n    #return ((B-(A-A%K))//K)\n    return (math.floor (B/K)- math.ceil (A/K) +1)\n\n\nsol(6,11,2)\n\n\n</code></pre>\n"}], "owner": {"reputation": 3855, "user_id": 6063, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UmJfd.jpg?s=128&g=1", "display_name": "Simon Peverett", "link": "https://stackoverflow.com/users/6063/simon-peverett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3285, "favorite_count": 0, "accepted_answer_id": 38214485, "answer_count": 8, "score": 2, "last_activity_date": 1608562985, "creation_date": 1467761650, "question_id": 38214425, "link": "https://stackoverflow.com/questions/38214425/dont-understand-how-codility-countdiv-solution-is-correct", "title": "Don&#39;t understand how Codility CountDiv solution is correct", "body": "<p><a href=\"https://codility.com/programmers/task/count_div/\" rel=\"nofollow\">Codility CountDiv Exercise</a>:</p>\n\n<p>Given a range A..B and value K, return the number of values in the range that are divisible by K. </p>\n\n<p>The example given is A = 6, B = 11 and K = 2. In the range 6 to 11, the numbers divisible by 2 are 6, 8 and 10, so the answer is 3. The solution required must be O(1) - so a simple calculation is needed.</p>\n\n<p>You can assume that A and B are in the range 0..2,000,000,000, K is 1..2,000,000,000 and that 0 &lt;= A &lt;= B.</p>\n\n<p>The accepted solution, that scores 100% is as follows:</p>\n\n<pre><code>int solution(int A, int B, int K)\n{\n    int inclusive = ((A%K)==0) ? 1 : 0;\n    return (B/K) - (A/K) + inclusive;\n}\n</code></pre>\n\n<p>Where I get confused is that when I test this solution with inputs A=0, B=0 and K=1, the result is 1? I would have thought that in the range 0 to 0, the number of values divisible by 1 is... 0! </p>\n\n<p>I thought this was an error and that the +1 for inclusive values of A should only be set if A is non-zero. </p>\n\n<p>So I submitted the following solution (test that A is non-zero):</p>\n\n<pre><code>int solution(int A, int B, int K)\n{\n    int inclusive = (A &amp;&amp; (A%K)==0) ? 1 : 0;\n    return (B/K) - (A/K) + inclusive;\n}\n</code></pre>\n\n<p>But this only scored 62% (50% correctness and 75% performance). Some of the  test cases it failed were:</p>\n\n<ul>\n<li>A = 0, B = 1, K = 11 - Got 0, expected 1</li>\n<li>A = 0, B = MAXINT, K in {1,MAXINT}, got 2000000000, expected 2000000001</li>\n</ul>\n\n<p>Can someone explain?</p>\n"}, {"tags": ["c", "constants", "integer-overflow", "c11"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467762744, "post_id": 38214235, "comment_id": 63852612, "body": "Note about  &quot;standard guaranteed to have the expected result&quot; --&gt; recall <code>int</code> can be 16-bit."}, {"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467762827, "post_id": 38214235, "comment_id": 63852634, "body": "Yes, I am assuming a 32 bit int."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1467783211, "post_id": 38214235, "comment_id": 63856877, "body": "The problem is actually simple, don&#39;t use hex to describe values that possibly can become negative. Hex values are a good tool when you want to describe bit patterns, to be used as masks in bit operations and alike. When you want to describe values for signed arithmetic the bit representation should be irrelevant."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467802715, "post_id": 38214235, "comment_id": 63866786, "body": "Congratulations, you have found out that your code <code>int n = -0x80000000</code> makes no sense. If you write really weird code, you will often trigger really weird C standard behavior as well."}, {"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467810875, "post_id": 38214235, "comment_id": 63871755, "body": "@Lundin, the point was to confirm my understanding that &#39;-&#39; is unreliable applied to arbitrary integer type arguments, not to write that particular line. And macros using &#39;-&#39; do not constitute &quot;really weird code&quot;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1467813098, "post_id": 38214235, "comment_id": 63873278, "body": "@Kyle Rather, any operator is unreliable when applied to an unreliable integer type. Integer literals, without any suffix such as L and/or U, may be of arbitrary type (arbitrary size and/or signedness), depending on their value. This is caused by the somewhat obscure methods that the C language uses to pick types for integer literals and not by the unary - operator. Hex literals are particularly nasty: take for example these 3 values on a 16 bit system: 0x00007FFF, 0x00008000, 0x00010000. They will all result in different types: int, unsigned int and long respective."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467842828, "post_id": 38214235, "comment_id": 63890816, "body": "as a side note, you might remember (if you have any machine code background the the change a positive number to a negative number simply invert all the bits, then add 1. This is for 2&#39;s compliment operations"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1467842962, "post_id": 38214235, "comment_id": 63890868, "body": "the compiler will modify a value, including literals, via <code>implicit conversion</code> to the type of the target variable"}], "answers": [{"comments": [{"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467760859, "post_id": 38214275, "comment_id": 63852161, "body": "Yes, applying - is safe, but the question comes in assigning the result to type int."}, {"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467760996, "post_id": 38214275, "comment_id": 63852188, "body": "My response here didn&#39;t make sense without the correction I just made to the question. n is supposed to be of type int, not unsigned int."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1467762186, "post_id": 38214275, "comment_id": 63852470, "body": "<i>In practice it&#39;s always defined</i>... not really! Modern compilers perform counter-intuitive optimizations in presence of potential undefined behavior that can make this assumption fail miserably."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1467762598, "post_id": 38214275, "comment_id": 63852572, "body": "@chqrlie: It&#39;s not undefined. It&#39;s implementation-defined. As my answer clearly explains. That requires the behavior to be documented and consistent."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1467762641, "post_id": 38214275, "comment_id": 63852584, "body": "Overflow otoh is undefined, but no overflow happens here. All that happens is an implementation-defined conversion."}, {"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467763155, "post_id": 38214275, "comment_id": 63852708, "body": "@R., are you aware of a reference in the standard for &quot;implementation-defined&quot; requiring consistency? An implementation can&#39;t define the behavior to simply produce a valid result (i.e., not a trap), or something like that?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1467763369, "post_id": 38214275, "comment_id": 63852758, "body": "@R.: OK, I stand corrected.  My remark may not apply here but does in similar situations where overflow occurs.  <i>Implementation defined conversion</i> is almost as much of a pain as <i>undefined behavior</i> when trying to write correct code."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1467773797, "post_id": 38214275, "comment_id": 63854886, "body": "@chqrlie: I would not call it an issue when trying to write merely <i>correct</i> code, only when trying to write code portable to intentionally obtuse implementations. At the very least, testing shows that code with implementation-defined behavior does what you expect. And in the case of conversions of out-of-range integer values to signed integer types, there&#39;s essentially a single universal definition all practical implementations have agreed on: modular reduction into the range."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467839563, "post_id": 38214275, "comment_id": 63889367, "body": "@R..: The one thing that makes the aforementioned conversion &quot;safe&quot; is that there&#39;s no other behavior implementations could efficiently substitute while abiding the requirement of deterministic behavior. On the other hand, it&#39;s ironic that the Standard mandates a precise behavior in cases where it would add expense to many implementations, but doesn&#39;t specify any behavioral constraints in cases which would often be more useful but cheaper (let overflowed <code>int</code> computations yield a value which may behave non-deterministically as numbers outside the range of <code>int</code>, but w/o other side-effects)."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467843993, "post_id": 38214275, "comment_id": 63891221, "body": "@supercat: No, it&#39;s that traditional implementors all agreed and established an expectation that the conversion be given the obvious, sane definition, and therefore that any newcomer compiler that tried to choose a different definition would be unusable for most practical purposes and thus rejected. This is the exact same type of consensus/established-practice process that should take place in standardization except that it happened outside the standard process because WG14 still wants to pretend ones complement is implementable."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467844501, "post_id": 38214275, "comment_id": 63891367, "body": "@R..: Is it any less obvious that sane implementations on two&#39;s-complement silent-wraparound hardware should have integer-overflow behavior that is at least somewhat constrained?  The authors of C89 seemed to think so, but some modern compiler writers, not so much."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467849694, "post_id": 38214275, "comment_id": 63892896, "body": "@supercat: The spec has always made the distinction that overflow is undefined whereas conversion of out-of-range values is defined (by the implementation). I see no basis for claiming &quot;the authors of C89&quot; intended for overflow to be constrained in its behavior. C89 3.3.6 spells it out clearly: &quot;As with any other arithmetic overflow, if the result does not fit in the space provided, the behavior is undefined.&quot;"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467867821, "post_id": 38214275, "comment_id": 63896721, "body": "@R..: Read the rationale for why short unsigned types promote to signed.  A motivating factor in the decision was the behavior of silent-wraparound two&#39;s-complement implementations, (which the according to the authors, comprised  <i>the majority of [then-]current implementations</i>) in cases where the arithmetic value of the result would be between INT_MAX+1u and UINT_MAX.  Why do you suppose they would have mentioned such a thing if they didn&#39;t regard such behavior as being both defined and desirable?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467868020, "post_id": 38214275, "comment_id": 63896773, "body": "@R..: The authors of the Standard clearly didn&#39;t intend to require any particular behavior on hardware whose overflow semantics might be unpredictable, but that doesn&#39;t mean that they intended that overflow should negate the laws of time and causality on hardware which implements 100% predictable and consistent two&#39;s-complement silent-wraparound semantics."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1467761585, "last_edit_date": 1467761585, "creation_date": 1467760625, "answer_id": 38214275, "question_id": 38214235, "link": "https://stackoverflow.com/questions/38214235/is-there-a-mechanism-in-c11-for-ensuring-expected-types-of-negated-integer-const/38214275#38214275", "title": "Is there a mechanism in C11 for ensuring expected types of negated integer constants?", "body": "<p>If <code>INT_MAX</code> is <code>0x7fffffff</code>, then as a hex literal, <code>0x80000000</code> has type <code>unsigned int</code> or larger, and applying <code>-</code> to it is safe. This would not be true for decimal literals. If <code>INT_MAX</code> were larger than <code>0x7fffffff</code> then the negation would already be safe as <code>int</code>.</p>\n\n<p>With the edited question now assigning the result into an object of type <code>int</code>, the conversion from an out-of-range value to <code>int</code> is implementation-defined. In practice it's always defined as what you want (modular reduction), but this is not guaranteed by the standard. All the standard guarantees is that the implementation has to document how the conversion takes place.</p>\n"}, {"comments": [{"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467760927, "post_id": 38214304, "comment_id": 63852171, "body": "Good catch, that was accidental, I corrected it to type int."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467761367, "post_id": 38214304, "comment_id": 63852287, "body": "@Kyle: the second code fragment uses <code>unsigned int</code> too.  The computation is different but the result is identical and correct as long as <code>unsigned int</code> has at least 32 value bits."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1467763531, "last_edit_date": 1467763531, "creation_date": 1467760833, "answer_id": 38214304, "question_id": 38214235, "link": "https://stackoverflow.com/questions/38214235/is-there-a-mechanism-in-c11-for-ensuring-expected-types-of-negated-integer-const/38214304#38214304", "title": "Is there a mechanism in C11 for ensuring expected types of negated integer constants?", "body": "<p>I'm afraid you remark <em>Assigning an out of range value to type int is covered by the following:</em> does not apply to</p>\n\n<pre><code>unsigned int n = -0x80000000 // set n to -2^31\n</code></pre>\n\n<p><code>n</code> has type <code>unsigned int</code> and the value 2^31 is not out of range for 32 bits <code>unsigned int</code>.</p>\n\n<p><strong>EDIT</strong>: since you changed the question and made <code>n</code> an <code>int</code>, then <em>3</em> applies for 32 bit and lesser <code>int</code>s and the comment is incorrect for larger <code>int</code> types:</p>\n\n<blockquote>\n  <p>3 Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised.</p>\n</blockquote>\n\n<p><strong>EDIT</strong>: the second code fragment <code>int n = -(long long)0x80000000 // set n to -2^31</code> is correct as the value -2147483648 does fit in a 32 bit <code>int</code>.</p>\n\n<p>Note that the correct way to initialize <code>n</code> to this value is this (assuming 32 bit ints):</p>\n\n<pre><code>int n = -2147483647 - 1;  // set n to -2^31\n</code></pre>\n\n<p>This variant is used in the standard headers <code>&lt;limits.h&gt;</code> and <code>&lt;stdint.h&gt;</code>.  It does not use casts, so the answer to you last question is: no, you do not really need to cast up to validly make an in range assignment for -2^31 to a 32 bit <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467810604, "post_id": 38215134, "comment_id": 63871573, "body": "Good point, but a very similar problem still exists assigning -2^63 to a long long, which can not be avoided like that. One could do -(2^63-1)-1, but still cumbersome. At any rate, the problem is the unreliability of &#39;-&#39;, which apparently I am correct in my understanding that it is unreliable."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467837004, "post_id": 38215134, "comment_id": 63888053, "body": "That&#39;s what you get for designing a programming language in which <code>-</code> is an operator, not part of the numeric constant. Lisp: <code>(- 123)</code> --- unary minus applied to <code>123</code>; <code>(+ -123 1)</code> --- add <code>1</code> to <code>-123</code> constant.  If you have hex, the sign goes after the prefix <code>#x-FF</code> ---  <code>-255</code> decimal."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1467768088, "last_edit_date": 1592644375, "creation_date": 1467768088, "answer_id": 38215134, "question_id": 38214235, "link": "https://stackoverflow.com/questions/38214235/is-there-a-mechanism-in-c11-for-ensuring-expected-types-of-negated-integer-const/38215134#38215134", "title": "Is there a mechanism in C11 for ensuring expected types of negated integer constants?", "body": "<blockquote>\n<p><code>int n = -(long long)0x80000000</code></p>\n<p>do you really need to cast up to validly make an in range assignment, or am I missing something?</p>\n</blockquote>\n<p>How about: <code>int n = -0x80000000LL</code>;</p>\n<p>No cast.</p>\n"}, {"comments": [{"owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467810448, "post_id": 38222540, "comment_id": 63871469, "body": "Thanks, but there are other issues that are difficult because of this issue, this is just a simplified example to point out the question. In those other cases, it is not so easy to get around. For example, a macro that negates an integer type argument is fundamentally unreliable if it is supposed to accept signed types, because of this behavior."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "edited": false, "score": 0, "creation_date": 1467813490, "post_id": 38222540, "comment_id": 63873574, "body": "@Kyle A macro that negates the argument but accepts unsigned types as argument, is indeed flawed and dangerous. Such macros should preferably be rewritten to functions, so there&#39;s some increased type safety."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467803263, "creation_date": 1467803263, "answer_id": 38222540, "question_id": 38214235, "link": "https://stackoverflow.com/questions/38214235/is-there-a-mechanism-in-c11-for-ensuring-expected-types-of-negated-integer-const/38222540#38222540", "title": "Is there a mechanism in C11 for ensuring expected types of negated integer constants?", "body": "<p>Simply do <code>int n = INT_MIN</code>. </p>\n\n<p>Or if you must <code>int n = -2147483648</code> (same as casting to long long).</p>\n\n<p>Mixing hex literals and negative numbers in C is usually a bad idea, since hex literals assume a specific signedness format.</p>\n\n<blockquote>\n  <p>we get implementation defined behavior when we try to assign a valid int value to an int object</p>\n</blockquote>\n\n<p>If you are concerned about implementation-defined behavior, then why do you use the naive <code>int</code> type and not <code>int32_t</code>? </p>\n\n<p><code>int</code> has implementation-defined size and signedness format, which is the root of the problem. <code>int32_t</code> is guaranteed to be 32 bits two's complement.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1467838184, "creation_date": 1467838184, "answer_id": 38233554, "question_id": 38214235, "link": "https://stackoverflow.com/questions/38214235/is-there-a-mechanism-in-c11-for-ensuring-expected-types-of-negated-integer-const/38233554#38233554", "title": "Is there a mechanism in C11 for ensuring expected types of negated integer constants?", "body": "<p>The relative behavior of signed and unsigned types in C is a mess that came about when the C89 Committee tried to formulate rules that would be as consistent as possible with the behavior of pre-existing compilers that were often inconsistent with each other.</p>\n\n<p>There isn't really any portable way to ensure that expressions involving integer constants will work in expected fashion except to manually ensure that they're promoted to a type that's guaranteed big enough to hold all intermediate values; if you don't need anything beyond 64 bits, either \"long long\" or \"unsigned long long\" should suffice; values can be forced to those types using a UL or ULL suffix.</p>\n"}], "owner": {"reputation": 806, "user_id": 5402249, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-g-9VJ8L0HoQ/AAAAAAAAAAI/AAAAAAAAABc/TCQXMP4ByKw/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5402249/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 38214304, "answer_count": 5, "score": 1, "last_activity_date": 1467838184, "creation_date": 1467760283, "last_edit_date": 1467761404, "question_id": 38214235, "link": "https://stackoverflow.com/questions/38214235/is-there-a-mechanism-in-c11-for-ensuring-expected-types-of-negated-integer-const", "title": "Is there a mechanism in C11 for ensuring expected types of negated integer constants?", "body": "<p>I can not find anywhere in the C standard that justifies the following:</p>\n\n<pre><code>int n = -0x80000000 // set n to -2^31\n</code></pre>\n\n<p>Assume an implementation where int is 32 bits. The apparent problem is that the integer constant has type unsigned int, as per the table in the committee draft standard at 6.4.4.1 paragraph 5. Then the negation is calculated according to 6.5.3.3 paragraph 3:</p>\n\n<blockquote>\n  <p>The result of the unary - operator is the negative of its (promoted) operand. The integer promotions are performed on the operand, and the result has the promoted type.</p>\n</blockquote>\n\n<p>Performing the integer promotions does not change the type (unsigned int stays unsigned int). Then the negative is taken. Since the result retains the promoted type, it is reduced modulo 2^32, producing 2^31 (so the negation has no effect).</p>\n\n<p>Assigning an out of range value to type int is covered by the following:</p>\n\n<blockquote>\n  <p>6.3.1.3 Signed and unsigned integers</p>\n  \n  <p>1 When a value with integer type is converted to another integer type other than _Bool, if\n  the value can be represented by the new type, it is unchanged.</p>\n  \n  <p>2 Otherwise, if the new type is unsigned, the value is converted by repeatedly adding or\n  subtracting one more than the maximum value that can be represented in the new type\n  until the value is in the range of the new type. 60)</p>\n  \n  <p>3 Otherwise, the new type is signed and the value cannot be represented in it; either the\n  result is implementation-defined or an implementation-defined signal is raised.</p>\n</blockquote>\n\n<p>So, in the end, we get implementation defined behavior when we try to assign a valid int value to an int object (assuming 2's complement with no trap representation).</p>\n\n<p>The following would be standard guaranteed to have the expected result:</p>\n\n<pre><code>int n = -(long long)0x80000000 // set n to -2^31\n</code></pre>\n\n<p>So, do you really need to cast up to validly make an in range assignment, or am I missing something?</p>\n"}, {"tags": ["c", "fortran"], "comments": [{"owner": {"reputation": 574, "user_id": 5842759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b767a74c826a0496d9c9e0d98fc11c3?s=128&d=identicon&r=PG&f=1", "display_name": "jlokimlin", "link": "https://stackoverflow.com/users/5842759/jlokimlin"}, "edited": false, "score": 1, "creation_date": 1467760545, "post_id": 38214215, "comment_id": 63852087, "body": "Do you have access to a modern Fortran compiler (2003+)? You may want to look at the intrinsic module <code>iso_c_binding</code> or the header <code>ISO_Fortran_binding.h</code>."}, {"owner": {"reputation": 43, "user_id": 6553819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff4e62b2316ef35d1d5b80c4cd2e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "crablegs", "link": "https://stackoverflow.com/users/6553819/crablegs"}, "reply_to_user": {"reputation": 574, "user_id": 5842759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b767a74c826a0496d9c9e0d98fc11c3?s=128&d=identicon&r=PG&f=1", "display_name": "jlokimlin", "link": "https://stackoverflow.com/users/5842759/jlokimlin"}, "edited": false, "score": 0, "creation_date": 1467761777, "post_id": 38214215, "comment_id": 63852383, "body": "@jlokimlin It&#39;s a pretty large simulation using f90. I wouldn&#39;t even know where to begin in changing it -- the Makefile, that is."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467777499, "post_id": 38214215, "comment_id": 63855591, "body": "what C compiler and platform?  (some windows setups have trouble with <code>long double</code> and <code>printf</code>)"}, {"owner": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "edited": false, "score": 0, "creation_date": 1467786302, "post_id": 38214215, "comment_id": 63857868, "body": "@crablegs you do not really need to change anything else, just use the iso-c-binding for the interaction with C-Code. Basically, all compilers support that by now."}, {"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 2, "creation_date": 1467787853, "post_id": 38214215, "comment_id": 63858541, "body": "<code>CALL printFUNC(C3(k,j,i))</code> refers to an array which is not in your declarations.  You&#39;ll probably tell us it&#39;s a typo or an omission -- which is one of the reasons it&#39;s important to show your code, not just something a bit like some of your code."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1467791568, "post_id": 38214215, "comment_id": 63860494, "body": "You can just print what GP is, it is just a number, print it. You can also print <code>bitsize(C3(k,j,i))</code> or <code>sizeof()</code> if your compiler supports it."}, {"owner": {"reputation": 6827, "user_id": 3501546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zzZH7.jpg?s=128&g=1", "display_name": "roygvib", "link": "https://stackoverflow.com/users/3501546/roygvib"}, "edited": false, "score": 0, "creation_date": 1467920398, "post_id": 38214215, "comment_id": 63929021, "body": "When you tried float or double, did you also try %20.10f etc (rather than %Le)?"}, {"owner": {"reputation": 43, "user_id": 6553819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff4e62b2316ef35d1d5b80c4cd2e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "crablegs", "link": "https://stackoverflow.com/users/6553819/crablegs"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1467921033, "post_id": 38214215, "comment_id": 63929317, "body": "@VladimirF good call (duh). GP = 4."}, {"owner": {"reputation": 43, "user_id": 6553819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff4e62b2316ef35d1d5b80c4cd2e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "crablegs", "link": "https://stackoverflow.com/users/6553819/crablegs"}, "reply_to_user": {"reputation": 6827, "user_id": 3501546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zzZH7.jpg?s=128&g=1", "display_name": "roygvib", "link": "https://stackoverflow.com/users/3501546/roygvib"}, "edited": false, "score": 0, "creation_date": 1467921128, "post_id": 38214215, "comment_id": 63929364, "body": "@roygvib I&#39;ll give that a go."}, {"owner": {"reputation": 43, "user_id": 6553819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff4e62b2316ef35d1d5b80c4cd2e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "crablegs", "link": "https://stackoverflow.com/users/6553819/crablegs"}, "reply_to_user": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "edited": false, "score": 0, "creation_date": 1467921146, "post_id": 38214215, "comment_id": 63929376, "body": "@haraldkl sounds good. I will give that a go as well."}], "owner": {"reputation": 43, "user_id": 6553819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff4e62b2316ef35d1d5b80c4cd2e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "crablegs", "link": "https://stackoverflow.com/users/6553819/crablegs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467915669, "creation_date": 1467760184, "last_edit_date": 1467915669, "question_id": 38214215, "link": "https://stackoverflow.com/questions/38214215/print-complex-number-from-fortran-in-c", "title": "print complex number from fortran in c", "body": "<p>So I have an array that was initiated as</p>\n\n<p><code>COMPLEX(KIND=GP), ALLOCATABLE, DIMENSION (:,:,:) :: C1,C2</code>  </p>\n\n<p>(not my code) in fortran, and I'm simply trying to print an element of this array using c code. </p>\n\n<p>This is the c code I have, </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\ntypedef struct com{\nlong double r, i;\n} x;\n\nvoid printfunc_(x* k){\n\n        printf(\"Reading from fortran: %Le\\t %Le\\n\", k-&gt;r, k-&gt;i);\n}\n</code></pre>\n\n<p>and in fortran I call:</p>\n\n<pre><code>CALL printFUNC(C1(k,j,i))\n</code></pre>\n\n<p>k, j, i are ints. </p>\n\n<p>But I only get 0.000000e+00</p>\n\n<p>I don't know what GP is, but from looking up fortran code it looks like it can be 4, 8, or 16. </p>\n\n<p>I've tried the c code with the struct being float, double, and long double. With the two former I get -0.000000 and 0.000000. I know there should be values by looking at the actual output: small single precision floats. </p>\n"}, {"tags": ["c", "testing", "trigonometry", "libc"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467757551, "post_id": 38213584, "comment_id": 63851263, "body": "Sigh - just a few more comments in code would have helped."}, {"owner": {"reputation": 486, "user_id": 3807103, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh3.googleusercontent.com/-YNIokoSHQ8U/AAAAAAAAAAI/AAAAAAAAAFs/hUUwaGWJ4IQ/photo.jpg?sz=128", "display_name": "qleguennec", "link": "https://stackoverflow.com/users/3807103/qleguennec"}, "edited": false, "score": 0, "creation_date": 1467758189, "post_id": 38213584, "comment_id": 63851454, "body": "You should know that floating point values in C are not always what you expect them to be."}], "answers": [{"tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1468328959, "last_edit_date": 1468328959, "creation_date": 1468325120, "answer_id": 38328439, "question_id": 38213584, "link": "https://stackoverflow.com/questions/38213584/how-are-the-trigonometric-functions-tested-in-the-gnu-c-library/38328439#38328439", "title": "How are the trigonometric functions tested in the GNU C Library?", "body": "<p>Yes, the processor resp. glibc computed values of sin and cos are compared to the Runge-Kutta solution for <code>sin'=cos, cos'=-sin</code> computed in multi-precision fixed-point floats modeled on <code>mpn</code> big integers.</p>\n\n<p>If I read it right, the step size might be overkill for 4th order RK4, but better safe than sorry.</p>\n"}], "owner": {"reputation": 31746, "user_id": 1428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/aafff1b0212211023ce91659a1b0504c?s=128&d=identicon&r=PG", "display_name": "lindelof", "link": "https://stackoverflow.com/users/1428/lindelof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1468503162, "creation_date": 1467756303, "last_edit_date": 1468503162, "question_id": 38213584, "link": "https://stackoverflow.com/questions/38213584/how-are-the-trigonometric-functions-tested-in-the-gnu-c-library", "title": "How are the trigonometric functions tested in the GNU C Library?", "body": "<p>I'm trying to figure out how to best write unit tests for scientific and/or mathematical functions. I searched the source code for the GNU C Library for unit tests for the <code>sin()</code> and <code>cos()</code> functions and came across the <code>atest-sincos.c</code> source file, reproduced below. (It can be found <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=math/atest-sincos.c;h=e4452079550b9faddd7cac100c5bf591ce2df3d1;hb=refs/heads/master\" rel=\"nofollow\">here</a>)</p>\n\n<p>Can someone walk me through this file and give a <strong>rough idea</strong> what is being tested here? I see what looks very much like the Runge-Kutta algorithm for numerically solving differential equations, and also possibly a comparison with tabulated values, but I'm not quite sure. Any guidance here would be very welcome.</p>\n\n<pre><code>/* Copyright (C) 1997-2016 Free Software Foundation, Inc.\n   This file is part of the GNU C Library.\n   Contributed by Geoffrey Keating &lt;Geoff.Keating@anu.edu.au&gt;, 1997.\n\n   The GNU C Library is free software; you can redistribute it and/or\n   modify it under the terms of the GNU Lesser General Public\n   License as published by the Free Software Foundation; either\n   version 2.1 of the License, or (at your option) any later version.\n\n   The GNU C Library is distributed in the hope that it will be useful,\n   but WITHOUT ANY WARRANTY; without even the implied warranty of\n   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n   Lesser General Public License for more details.\n\n   You should have received a copy of the GNU Lesser General Public\n   License along with the GNU C Library; if not, see\n   &lt;http://www.gnu.org/licenses/&gt;.  */\n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;gmp.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;assert.h&gt;\n\n#define PRINT_ERRORS 0\n\n#define N 0\n#define N2 20\n#define FRAC (32 * 4)\n\n#define mpbpl (CHAR_BIT * sizeof (mp_limb_t))\n#define SZ (FRAC / mpbpl + 1)\ntypedef mp_limb_t mp1[SZ], mp2[SZ * 2];\n\n/* These strings have exactly 100 hex digits in them.  */\nstatic const char sin1[101] =\n\"d76aa47848677020c6e9e909c50f3c3289e511132f518b4def\"\n\"b6ca5fd6c649bdfb0bd9ff1edcd4577655b5826a3d3b50c264\";\nstatic const char cos1[101] =\n\"8a51407da8345c91c2466d976871bd29a2373a894f96c3b7f2\"\n\"300240b760e6fa96a94430a52d0e9e43f3450e3b8ff99bc934\";\nstatic const char hexdig[] = \"0123456789abcdef\";\n\nstatic void\nprint_mpn_hex (const mp_limb_t *x, unsigned size)\n{\n   char value[size + 1];\n   unsigned i;\n   const unsigned final = (size * 4 &gt; SZ * mpbpl) ? SZ * mpbpl / 4 : size;\n\n   memset (value, '0', size);\n\n   for (i = 0; i &lt; final ; i++)\n     value[size-1-i] = hexdig[x[i * 4 / mpbpl] &gt;&gt; (i * 4) % mpbpl &amp; 0xf];\n\n   value[size] = '\\0';\n   fputs (value, stdout);\n}\n\nstatic void\nsincosx_mpn (mp1 si, mp1 co, mp1 xx, mp1 ix)\n{\n   int i;\n   mp2 s[4], c[4];\n   mp1 tmp, x;\n\n   if (ix == NULL)\n     {\n       memset (si, 0, sizeof (mp1));\n       memset (co, 0, sizeof (mp1));\n       co[SZ-1] = 1;\n       memcpy (x, xx, sizeof (mp1));\n     }\n   else\n      mpn_sub_n (x, xx, ix, SZ);\n\n   for (i = 0; i &lt; 1 &lt;&lt; N; i++)\n     {\n#define add_shift_mulh(d,x,s1,s2,sh,n) \\\n      do {                                    \\\n     if (s2 != NULL) {                            \\\n        if (sh &gt; 0) {                             \\\n           assert (sh &lt; mpbpl);                       \\\n           mpn_lshift (tmp, s1, SZ, sh);                      \\\n           if (n)                                 \\\n             mpn_sub_n (tmp,tmp,s2+FRAC/mpbpl,SZ);                \\\n           else                               \\\n             mpn_add_n (tmp,tmp,s2+FRAC/mpbpl,SZ);                \\\n        } else {                                  \\\n           if (n)                                 \\\n             mpn_sub_n (tmp,s1,s2+FRAC/mpbpl,SZ);                 \\\n           else                               \\\n             mpn_add_n (tmp,s1,s2+FRAC/mpbpl,SZ);                 \\\n        }                                     \\\n        mpn_mul_n(d,tmp,x,SZ);                        \\\n     } else                                   \\\n        mpn_mul_n(d,s1,x,SZ);                         \\\n     assert(N+sh &lt; mpbpl);                            \\\n     if (N+sh &gt; 0) mpn_rshift(d,d,2*SZ,N+sh);                 \\\n      } while(0)\n#define summ(d,ss,s,n) \\\n      do {                                    \\\n     mpn_add_n(tmp,s[1]+FRAC/mpbpl,s[2]+FRAC/mpbpl,SZ);           \\\n     mpn_lshift(tmp,tmp,SZ,1);                        \\\n     mpn_add_n(tmp,tmp,s[0]+FRAC/mpbpl,SZ);                   \\\n     mpn_add_n(tmp,tmp,s[3]+FRAC/mpbpl,SZ);                   \\\n     mpn_divmod_1(tmp,tmp,SZ,6);                          \\\n     if (n)                                   \\\n           mpn_sub_n (d,ss,tmp,SZ);                       \\\n     else                                     \\\n           mpn_add_n (d,ss,tmp,SZ);                       \\\n      } while (0)\n\n      add_shift_mulh (s[0], x, co, NULL, 0, 0); /* s0 = h * c; */\n      add_shift_mulh (c[0], x, si, NULL, 0, 0); /* c0 = h * s; */\n      add_shift_mulh (s[1], x, co, c[0], 1, 1); /* s1 = h * (c - c0/2); */\n      add_shift_mulh (c[1], x, si, s[0], 1, 0); /* c1 = h * (s + s0/2); */\n      add_shift_mulh (s[2], x, co, c[1], 1, 1); /* s2 = h * (c - c1/2); */\n      add_shift_mulh (c[2], x, si, s[1], 1, 0); /* c2 = h * (s + s1/2); */\n      add_shift_mulh (s[3], x, co, c[2], 0, 1); /* s3 = h * (c - c2); */\n      add_shift_mulh (c[3], x, si, s[2], 0, 0); /* c3 = h * (s + s2); */\n      summ (si, si, s, 0);        /* s = s + (s0+2*s1+2*s2+s3)/6; */\n      summ (co, co, c, 1);        /* c = c - (c0+2*c1+2*c2+c3)/6; */\n   }\n#undef add_shift_mulh\n#undef summ\n}\n\nstatic int\nmpn_bitsize (const mp_limb_t *SRC_PTR, mp_size_t SIZE)\n{\n   int i, j;\n   for (i = SIZE - 1; i &gt; 0; i--)\n     if (SRC_PTR[i] != 0)\n       break;\n   for (j = mpbpl - 1; j &gt;= 0; j--)\n     if ((SRC_PTR[i] &amp; (mp_limb_t)1 &lt;&lt; j) != 0)\n       break;\n\n   return i * mpbpl + j;\n}\n\nstatic int\ndo_test (void)\n{\n  mp1 si, co, x, ox, xt, s2, c2, s3, c3;\n  int i;\n  int sin_errors = 0, cos_errors = 0;\n  int sin_failures = 0, cos_failures = 0;\n  mp1 sin_maxerror, cos_maxerror;\n  int sin_maxerror_s = 0, cos_maxerror_s = 0;\n  const double sf = pow (2, mpbpl);\n\n  /* assert(mpbpl == mp_bits_per_limb);  */\n  assert(FRAC / mpbpl * mpbpl == FRAC);\n\n  memset (sin_maxerror, 0, sizeof (mp1));\n  memset (cos_maxerror, 0, sizeof (mp1));\n  memset (xt, 0, sizeof (mp1));\n  xt[(FRAC - N2) / mpbpl] = (mp_limb_t)1 &lt;&lt; (FRAC - N2) % mpbpl;\n\n  for (i = 0; i &lt; 1 &lt;&lt; N2; i++)\n    {\n      int s2s, s3s, c2s, c3s, j;\n      double ds2,dc2;\n\n      mpn_mul_1 (x, xt, SZ, i);\n      sincosx_mpn (si, co, x, i == 0 ? NULL : ox);\n      memcpy (ox, x, sizeof (mp1));\n      ds2 = sin (i / (double) (1 &lt;&lt; N2));\n      dc2 = cos (i / (double) (1 &lt;&lt; N2));\n      for (j = SZ-1; j &gt;= 0; j--)\n    {\n      s2[j] = (mp_limb_t) ds2;\n      ds2 = (ds2 - s2[j]) * sf;\n      c2[j] = (mp_limb_t) dc2;\n      dc2 = (dc2 - c2[j]) * sf;\n    }\n      if (mpn_cmp (si, s2, SZ) &gt;= 0)\n    mpn_sub_n (s3, si, s2, SZ);\n      else\n    mpn_sub_n (s3, s2, si, SZ);\n      if (mpn_cmp (co, c2, SZ) &gt;= 0)\n    mpn_sub_n (c3, co, c2, SZ);\n      else\n    mpn_sub_n (c3, c2, co, SZ);\n\n      s2s = mpn_bitsize (s2, SZ);\n      s3s = mpn_bitsize (s3, SZ);\n      c2s = mpn_bitsize (c2, SZ);\n      c3s = mpn_bitsize (c3, SZ);\n      if ((s3s &gt;= 0 &amp;&amp; s2s - s3s &lt; 54)\n      || (c3s &gt;= 0 &amp;&amp; c2s - c3s &lt; 54)\n      || 0)\n    {\n#if PRINT_ERRORS\n      printf (\"%06x \", i * (0x100000 / (1 &lt;&lt; N2)));\n      print_mpn_hex(si, (FRAC / 4) + 1);\n      putchar (' ');\n      print_mpn_hex (co, (FRAC / 4) + 1);\n      putchar ('\\n');\n      fputs (\"       \", stdout);\n      print_mpn_hex (s2, (FRAC / 4) + 1);\n      putchar (' ');\n      print_mpn_hex (c2, (FRAC / 4) + 1);\n      putchar ('\\n');\n      printf (\" %c%c    \",\n          s3s &gt;= 0 &amp;&amp; s2s-s3s &lt; 54 ? s2s - s3s == 53 ? 'e' : 'F' : 'P',\n          c3s &gt;= 0 &amp;&amp; c2s-c3s &lt; 54 ? c2s - c3s == 53 ? 'e' : 'F' : 'P');\n      print_mpn_hex (s3, (FRAC / 4) + 1);\n      putchar (' ');\n      print_mpn_hex (c3, (FRAC / 4) + 1);\n      putchar ('\\n');\n#endif\n      sin_errors += s2s - s3s == 53;\n      cos_errors += c2s - c3s == 53;\n      sin_failures += s2s - s3s &lt; 53;\n      cos_failures += c2s - c3s &lt; 53;\n    }\n      if (s3s &gt;= sin_maxerror_s\n      &amp;&amp; mpn_cmp (s3, sin_maxerror, SZ) &gt; 0)\n    {\n      memcpy (sin_maxerror, s3, sizeof (mp1));\n      sin_maxerror_s = s3s;\n    }\n      if (c3s &gt;= cos_maxerror_s\n      &amp;&amp; mpn_cmp (c3, cos_maxerror, SZ) &gt; 0)\n    {\n      memcpy (cos_maxerror, c3, sizeof (mp1));\n      cos_maxerror_s = c3s;\n    }\n    }\n\n   /* Check Range-Kutta against precomputed values of sin(1) and cos(1).  */\n   memset (x, 0, sizeof (mp1));\n   x[FRAC / mpbpl] = (mp_limb_t)1 &lt;&lt; FRAC % mpbpl;\n   sincosx_mpn (si, co, x, ox);\n\n   memset (s2, 0, sizeof (mp1));\n   memset (c2, 0, sizeof (mp1));\n   for (i = 0; i &lt; 100 &amp;&amp; i &lt; FRAC / 4; i++)\n     {\n       s2[(FRAC - i * 4 - 4) / mpbpl] |= ((mp_limb_t) (strchr (hexdig, sin1[i])\n                               - hexdig)\n                      &lt;&lt; (FRAC - i * 4 - 4) % mpbpl);\n       c2[(FRAC - i * 4 - 4) / mpbpl] |= ((mp_limb_t) (strchr (hexdig, cos1[i])\n                               - hexdig)\n                      &lt;&lt; (FRAC - i * 4 - 4) % mpbpl);\n     }\n\n   if (mpn_cmp (si, s2, SZ) &gt;= 0)\n     mpn_sub_n (s3, si, s2, SZ);\n   else\n     mpn_sub_n (s3, s2, si, SZ);\n   if (mpn_cmp (co, c2, SZ) &gt;= 0)\n      mpn_sub_n (c3, co, c2, SZ);\n   else\n     mpn_sub_n (c3, c2, co, SZ);\n\n   printf (\"sin:\\n\");\n   printf (\"%d failures; %d errors; error rate %0.2f%%\\n\",\n       sin_failures, sin_errors, sin_errors * 100.0 / (double) (1 &lt;&lt; N2));\n   fputs (\"maximum error:   \", stdout);\n   print_mpn_hex (sin_maxerror, (FRAC / 4) + 1);\n   fputs (\"\\nerror in sin(1): \", stdout);\n   print_mpn_hex (s3, (FRAC / 4) + 1);\n\n   fputs (\"\\n\\ncos:\\n\", stdout);\n   printf (\"%d failures; %d errors; error rate %0.2f%%\\n\",\n       cos_failures, cos_errors, cos_errors * 100.0 / (double) (1 &lt;&lt; N2));\n   fputs (\"maximum error:   \", stdout);\n   print_mpn_hex (cos_maxerror, (FRAC / 4) + 1);\n   fputs (\"\\nerror in cos(1): \", stdout);\n   print_mpn_hex (c3, (FRAC / 4) + 1);\n   putchar ('\\n');\n\n   return (sin_failures == 0 &amp;&amp; cos_failures == 0) ? 0 : 1;\n}\n\n#define TIMEOUT 600\n#define TEST_FUNCTION do_test ()\n#include \"../test-skeleton.c\"\n</code></pre>\n"}, {"tags": ["c", "singly-linked-list", "cs50"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467756005, "post_id": 38213383, "comment_id": 63850789, "body": "<code>strcmp(&amp;current-&gt;myChar, &quot;o&quot;) == 0</code> it&#39;s UB --&gt; <code>current-&gt;myChar == &#39;o&#39;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467756341, "post_id": 38213383, "comment_id": 63850896, "body": "insertNode : { &#39;u&#39;, NULL}, nextNode : current-&gt;next, insertNode-&gt;next = nextNode; current-&gt;next = insertNode;"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467757262, "post_id": 38213383, "comment_id": 63851180, "body": "<code>node* first = malloc(sizeof(node));\tfirst-&gt;myChar = &#39;a&#39;;first-&gt;next = NULL;...return first-&gt;next;</code> memory leak --&gt; <code>node first;\tnode* current = &amp;first; ... return first.next;</code>"}, {"owner": {"reputation": 61, "user_id": 3221699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5826bcdbab066f96d252037579848ed5?s=128&d=identicon&r=PG&f=1", "display_name": "user3221699", "link": "https://stackoverflow.com/users/3221699/user3221699"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467758074, "post_id": 38213383, "comment_id": 63851410, "body": "@BLUEPIXY thanks for point out the UB to and for your assistance. Much appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 1, "last_activity_date": 1467756969, "creation_date": 1467756969, "answer_id": 38213723, "question_id": 38213383, "link": "https://stackoverflow.com/questions/38213383/iterating-over-linked-list-and-adding-new-value/38213723#38213723", "title": "Iterating over linked list and adding new value", "body": "<pre><code>if(current-&gt;myChar == 'o' || current-&gt;myChar == 'O')\n{\n    node *insertNode = malloc(sizeof(node));\n    insertNode-&gt;myChar = 'u';\n    insertNode-&gt;next = current-&gt;next;\n    current-&gt;next = insertNode;\n    current = current-&gt;next;//skip 'u' node\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": false, "score": 1, "last_activity_date": 1472394834, "last_edit_date": 1472394834, "creation_date": 1467758165, "answer_id": 38213933, "question_id": 38213383, "link": "https://stackoverflow.com/questions/38213383/iterating-over-linked-list-and-adding-new-value/38213933#38213933", "title": "Iterating over linked list and adding new value", "body": "<p>First, You are using <code>strcmp</code> to compare <code>char</code>s which is wrong. <code>strcmp</code> is used to compare two <code>string</code>s, <em>not</em> to compare two characters. You need to use the <code>==</code> operator to check if <code>current-&gt;myChar == 'o' || current-&gt;myChar == 'O'</code></p>\n\n<p>Next, every time you get a node whose <code>char</code> i.e. <code>myChar</code> is <code>'o'</code> or <code>'O'</code> you need to:</p>\n\n<ol>\n<li>Create a new node with its <code>myChar</code> equal to <code>u</code>.</li>\n<li>Make this new node point the node to which the 'o' or 'O' node was pointing.</li>\n<li>Make the 'o' or 'O' node point to this new node.</li>\n</ol>\n\n<p>So in you can do like this:</p>\n\n<pre><code>node* current = firstChar;\nwhile(current != NULL){\n         //insert a 'u' after every 'o'\n         if(current-&gt;myChar == 'o' || current-&gt;myChar == 'O') {\n                 // create a new node\n                 struct node *tmp = malloc(sizeof(struct node));\n                 if (tmp == NULL) {\n                         /* malloc failed */\n                         printf(\"Error: Malloc fail, cannot add 'u'\\n\");\n                 } else { /* malloc succeded */\n                         tmp-&gt;myChar = 'u';\n                         tmp-&gt;next = current-&gt;next;\n                         current-&gt;next = tmp;\n                 }\n         }\n         current = current-&gt;next;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3221699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5826bcdbab066f96d252037579848ed5?s=128&d=identicon&r=PG&f=1", "display_name": "user3221699", "link": "https://stackoverflow.com/users/3221699/user3221699"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38213723, "answer_count": 2, "score": 0, "last_activity_date": 1472394834, "creation_date": 1467755480, "last_edit_date": 1472394739, "question_id": 38213383, "link": "https://stackoverflow.com/questions/38213383/iterating-over-linked-list-and-adding-new-value", "title": "Iterating over linked list and adding new value", "body": "<p>I am new to the topic of linked list and having a hard time figuring how to add a 'u' after every 'o' the user enters. Any help or assistance is greatly appreciated.</p>\n\n<p>The programs input: </p>\n\n<blockquote>\n  <p>./queensenglish </p>\n  \n  <p>Input string?:</p>\n  \n  <p>i love the color yellow </p>\n</blockquote>\n\n<p>The program's expected output: </p>\n\n<blockquote>\n  <p>Charlatan!  I use the Queen\u2019s English: </p>\n  \n  <p>i louve the coulour yellouw</p>\n</blockquote>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;cs50.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n\ntypedef struct node\n{\n    char myChar;\n    struct node* next;\n} node;\n\nnode* stringToList(char* inputString)\n{\n    node* first = malloc(sizeof(node));\n    first-&gt;myChar = 'a';\n    first-&gt;next = NULL;\n    node* current = first;\n\n    char* s;\n    for(s = inputString; *s != '\\0'; s++)\n    {\n        node* newNode = malloc(sizeof(node));\n        newNode-&gt;myChar = *s;\n        newNode-&gt;next = NULL;\n        current-&gt;next = newNode;\n        current = newNode;\n    }\n    return first-&gt;next;\n}\n\nchar* listToString(node* firstChar)\n{\n    // get the length of the string\n    int totalLen = 0;\n    node* current = firstChar;\n    while(current != NULL)\n    {\n        totalLen++;\n        current = current-&gt;next;\n    }\n\n    char *newString = malloc(sizeof(char)*(totalLen+1));\n    char *iter = newString;\n    current = firstChar;\n    for (int i = 0; i &lt; totalLen; i++)\n    {\n        *iter = current-&gt;myChar;\n        current = current-&gt;next;\n        iter++;\n    }\n    *iter = '\\0';\n    return newString;\n}\n\nint main(void)\n{\n    // Read in an input string\n    printf(\"Input string?: \\n\");\n    char* myString = GetString();\n\n    // Convert that string into a linked list\n    node* firstChar = stringToList(myString);\n\n    node* current = firstChar;\n    while(current != NULL){\n\n        if(strcmp(&amp;current-&gt;myChar, \"o\") == 0 || (strcmp(&amp;current-&gt;myChar, \"O\") == 0)\n        {\n            //insert a 'u' after every 'o'\n            //printf(\"Char: %c\\n\", current-&gt;myChar);\n        }\n        current = current-&gt;next;\n    }\n\n    // convert the list back into a string\n    char* newString = listToString(firstChar);\n\n    // print out the \"corrected\" string\n    printf(\"Charlatan! I use the Queen's English:\\n\");\n    printf(\"%s\\n\", newString);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory-management", "return", "realloc"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1467754513, "post_id": 38213123, "comment_id": 63850222, "body": "Unrealed, so long as you&#39;re on the subject of &quot;good coding practice&quot;, maybe read this: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of <code>malloc</code>?</a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1467754517, "post_id": 38213123, "comment_id": 63850224, "body": "<i>Can any one please let me know is it good coding practice to assign the address returned by realloc() to the same pointer?</i> Right after <i>So if realloc fails, from above example, we will lose the ability to free p.</i>?  What do you think?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1467754564, "post_id": 38213123, "comment_id": 63850241, "body": "Whoever voted to close, how is this &quot;primarily opinion based&quot;? The practice OP asked about is <b>always a bug</b>."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1467754734, "post_id": 38213123, "comment_id": 63850316, "body": "@AndrewHenle : I think it is not right to assign directly. But I want to confirm that."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467754776, "post_id": 38213123, "comment_id": 63850338, "body": "@WhozCraig : Thanks for the link."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1467754925, "post_id": 38213123, "comment_id": 63850396, "body": "@evaitl: While the answer covers some of the same material, that&#39;s a very different question. In that question, the OP is asking why <code>realloc</code> can&#39;t modify the caller&#39;s pointer variable itself."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1467756084, "post_id": 38213123, "comment_id": 63850812, "body": "@R..: I don&#39;t <i>quite</i> agree that it&#39;s &quot;always a bug&quot;. If the response to a <code>realloc</code> failure is to terminate the program immediately, there&#39;s no harm in clobbering the previous value of <code>p</code>. (I&#39;m assuming <code>malloc</code>ed memory is automatically <code>free</code>d when the program terminates -- a reasonable assumption for any hosted implementation, even though it&#39;s not explicitly guaranteed by the standard.) I see you addressed this in your answer."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1467757159, "post_id": 38213123, "comment_id": 63851156, "body": "@KeithThompson: Yep. My answers tend to be less absolutist and more detailed/forgiving, probably because they&#39;re subject to voting. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 6, "last_activity_date": 1467754835, "creation_date": 1467754835, "answer_id": 38213241, "question_id": 38213123, "link": "https://stackoverflow.com/questions/38213123/is-it-good-coding-practice-to-assign-the-address-returned-by-realloc-to-the-sa/38213241#38213241", "title": "Is it good coding practice to assign the address returned by realloc() to the same pointer?", "body": "<p>You are correct that directly assigning the return value of <code>realloc</code> to your only copy of the original pointer is a bad practice. Not only do you lose the ability to <code>free</code> the memory if <code>realloc</code> failed (I would call this the lesser issue); you also <strong>lose the data</strong> that your pointer pointed to.</p>\n\n<p>For some programs this may not matter (e.g. if you're just going to terminate and abort the entire operation on allocation failures, which may or may not be acceptable practice, and which is a whole topic in itself) but in general you need to first store the result of <code>realloc</code> to a separate temp variable, and only overwrite the original pointer variable after you check that it succeeded.</p>\n"}, {"comments": [{"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "edited": false, "score": 0, "creation_date": 1467817676, "post_id": 38213789, "comment_id": 63876709, "body": "Thanks. I just copied one of the examples shown on the internet sites. But I understood the point."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1467757299, "creation_date": 1467757299, "answer_id": 38213789, "question_id": 38213123, "link": "https://stackoverflow.com/questions/38213123/is-it-good-coding-practice-to-assign-the-address-returned-by-realloc-to-the-sa/38213789#38213789", "title": "Is it good coding practice to assign the address returned by realloc() to the same pointer?", "body": "<p>R. gave a clear answer to your question.  Let me emphasize two other issues in the code fragment:</p>\n\n<pre><code>int *p = (int *)malloc(sizeof(int) * 10);\np = (int *)realloc(p, 100);\n</code></pre>\n\n<p>It is mostly considered bad practice in C to cast the return value of <code>malloc()</code>, <code>calloc()</code> and <code>realloc()</code>.  The <code>void *</code> return value will automatically be converted to the appropriate pointer type, unless the code is compiled as C++ code, which is an estranged cousin of C.</p>\n\n<p>More importantly, it does not make sense to <code>realloc</code> the pointer to a hardcoded size <code>100</code>.  The number of <code>int</code>s that will be accessible in the reallocated array will depend on the actual size of the <code>int</code> type, which can vary from one system to another.  Indeed on some architectures, <code>100</code> is not even a multiple of <code>sizeof(int)</code>.  The author might have meant to write <code>p = realloc(p, sizeof(int) * 100);</code> or <code>p = realloc(p, sizeof(*p) * 100);</code>, and more context around the fragment could help understand the intent... As written, it is very likely a bug, for multiple reasons.</p>\n"}], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 38213241, "answer_count": 2, "score": 2, "last_activity_date": 1590326017, "creation_date": 1467754355, "last_edit_date": 1590326017, "question_id": 38213123, "link": "https://stackoverflow.com/questions/38213123/is-it-good-coding-practice-to-assign-the-address-returned-by-realloc-to-the-sa", "title": "Is it good coding practice to assign the address returned by realloc() to the same pointer?", "body": "<p>I saw some code related to realloc() on some sites as below.</p>\n\n<pre><code>int *p = (int *)malloc(sizeof(int) * 10);\np = (int *)realloc(p, 100);\n</code></pre>\n\n<p>But as the standard says, if realloc fails, the original block is left untouched and it returns NULL.</p>\n\n<p>So if realloc fails, from above example, we will lose the ability to free p. Can any one please let me know is it good coding practice to assign the address returned by realloc() to the same pointer?</p>\n"}, {"tags": ["c", "linux", "cross-compiling", "embedded-linux"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1467754388, "post_id": 38213050, "comment_id": 63850180, "body": "1) The message is very clear. 2) See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "edited": false, "score": 0, "creation_date": 1467754479, "post_id": 38213050, "comment_id": 63850215, "body": "There&#39;s either a <code>c99</code> flag you need to set (like: <code>-std=c99</code> in your configure script), or you need to use another cross-compiler that supports C99."}, {"owner": {"reputation": 11, "user_id": 6553595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d291349c88671132f6a841025dd8497?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6553595/bill"}, "edited": false, "score": 0, "creation_date": 1467758512, "post_id": 38213050, "comment_id": 63851554, "body": "thanks SnakeDoc!  I tried setting it with the CFLAGS -std=c99 earlier and it did not work but when I switched to -std=C99 it got through to another error."}], "owner": {"reputation": 11, "user_id": 6553595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d291349c88671132f6a841025dd8497?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6553595/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 326, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482736246, "creation_date": 1467754056, "last_edit_date": 1467754322, "question_id": 38213050, "link": "https://stackoverflow.com/questions/38213050/cross-compiling-rpm-source-code-for-arm", "title": "cross compiling rpm source code for arm", "body": "<p>I'm trying to run autoconf to generate the Makefile necessary to cross compile the rpm code for arm-based Zynq board.  </p>\n\n<p>When I run:</p>\n\n<pre><code>./configure --host=arm-xilinx-linux-gnueabi CFLAGS=\"-I/usr/include/nspr -I/usr/include/nss -I/usr/include/linux\"\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>checking how to hardcode library paths into programs... immediate\nchecking for bison... bison -y\nchecking for arm-xilinx-linux-gnueabi-gcc option to accept ISO C99... unsupported\nconfigure: error: ISO C99 capable compiler required\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18637, "user_id": 220984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UTpcd.jpg?s=128&g=1", "display_name": "Doc Brown", "link": "https://stackoverflow.com/users/220984/doc-brown"}, "edited": false, "score": 2, "creation_date": 1467754240, "post_id": 38213124, "comment_id": 63850163, "body": "Recommended reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1467756757, "post_id": 38213124, "comment_id": 63851039, "body": "Instead of <code>if(n==0)  { ..  } while(n!=0)  { ... }</code>, use <code>do { p=n%16; ... } while (n);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 1, "creation_date": 1467759320, "post_id": 38213979, "comment_id": 63851748, "body": "I know that <code>j = 2;</code> comes from the original code, but that doesn&#39;t make it right. I think the OP meant <code>i = 2;</code> there, otherwise the final <code>for</code> loop won&#39;t print anything for <code>n == 0</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467759481, "post_id": 38213979, "comment_id": 63851803, "body": "Another aside: on the whole, it would be best to null terminate the string if the code were going to be abstracted into a function of some sort.  In the context, it isn&#39;t crucial, but in general, making sure strings are null terminated is a good idea."}, {"owner": {"reputation": 97, "user_id": 6112752, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002211107262/picture?type=large", "display_name": "Sayantan Koley", "link": "https://stackoverflow.com/users/6112752/sayantan-koley"}, "edited": false, "score": 0, "creation_date": 1467781837, "post_id": 38213979, "comment_id": 63856506, "body": "i used c in gcc @chqrlie"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1467759905, "last_edit_date": 1467759905, "creation_date": 1467758430, "answer_id": 38213979, "question_id": 38213124, "link": "https://stackoverflow.com/questions/38213124/in-decimal-to-hexadecimal-conversion-in-c-how-to-get-the-value-for-0/38213979#38213979", "title": "In decimal to hexadecimal conversion in c how to get the value for 0?", "body": "<p>Silly mistake indeed: confusion between <code>0</code> and <code>'0'</code>.  Change the first test into:</p>\n\n<pre><code>if (n == 0) {\n    a[i] = '0';\n    i++;\n}\n</code></pre>\n\n<p>Also note that your code has other issues:</p>\n\n<ul>\n<li>the prototype for <code>main</code> is <code>int main(void)</code> or <code>int main(int argc, char *argv[])</code> or equivalent, <code>main()</code> is an obsolete form, no longer supported in modern versions of the C standard.</li>\n<li>The return value of <code>scanf()</code> should be tested.  If it is different from <code>1</code>, your code invokes undefined behaviour.</li>\n<li>you do not handle negative numbers.</li>\n<li>hard coded values such as <code>48</code> or <code>87</code> should be written as <code>'0'</code> and <code>'a' - 10</code></li>\n<li>less important, from a style perspective, it is misleading to name an <code>int</code> variable <code>p</code>, unless you are referring to a prime number.  Name it <code>d</code> for digit.</li>\n<li>arrays are 0 based in C, you should initialize <code>i</code> to <code>0</code> and update the code for consistency.</li>\n<li>major bug: you print the hex digit in the wrong order.  you should iterate on the array from <code>i</code> down to <code>0</code>.</li>\n<li>you could avoid the test on <code>0</code> by changing the <code>while (n != 0)</code> loop into a <code>do/while(n != 0)</code> loop or equivalent.  This forces the conversion to produce at least one digit, namely a <code>'0'</code> for the value <code>0</code>.</li>\n</ul>\n\n<p>Here is an improved version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char a[100];\n    unsigned n, i = sizeof(a), d;\n    printf(\"Enter the decimal number\\n\");\n    if (scanf(\"%u\", &amp;n) == 1) {\n        a[--i] = '\\0';\n        do {\n            d = n % 16;\n            if (d &lt;= 9)\n                a[--i] = '0' + d;\n            else\n                a[--i] = 'a' + d - 10;\n            n = n / 16;\n        } while (n != 0);\n        puts(a + i);\n    }\n    return 0;\n}\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1467754345, "question_id": 324069}, "owner": {"reputation": 97, "user_id": 6112752, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002211107262/picture?type=large", "display_name": "Sayantan Koley", "link": "https://stackoverflow.com/users/6112752/sayantan-koley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1467759905, "creation_date": 1467753125, "question_id": 38213124, "link": "https://stackoverflow.com/questions/38213124/in-decimal-to-hexadecimal-conversion-in-c-how-to-get-the-value-for-0", "title": "In decimal to hexadecimal conversion in c how to get the value for 0?", "body": "<p>This must be a silly question in c. I've done this conversion more times. But it seems awkward today that actually what i have written in c dont give me the value of 0.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nmain()\n{\n    int n,i=1,j,p;\n    char a[100];\n    printf(\"Enter thedecimal number\\n\");\n    scanf(\"%d\",&amp;n);\n    if(n==0)\n    {\n        a[i]=0;\n        j=2;\n    }\n    while(n!=0)\n    {\n        p=n%16;\n        if(p&gt;=0&amp;&amp;p&lt;=9)\n            a[i]=48+p;\n        if(p&gt;=10&amp;&amp;p&lt;=15)\n            a[i]=87+p;\n        n=n/16;\n        i++;\n    }\n    for(j=1;j&lt;i;j++)\n        printf(\"%c\",a[j]);\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "events", "gtk3"], "comments": [{"owner": {"reputation": 31, "user_id": 4872010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c18a971c032a46c57aa234965dabdcc?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/4872010/anderson"}, "reply_to_user": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1467935539, "post_id": 38212617, "comment_id": 63934910, "body": "The problem is it doesn&#39;t reach the callback. I put breakpoints, but the debugging process does not stop there, even though I replace all callback content for just a printf+return. I made an <a href=\"https://gist.github.com/anderflash/b9cffe559f3981e3fc63e9e0d4eb63ac\" rel=\"nofollow noreferrer\">MWE</a>"}, {"owner": {"reputation": 31, "user_id": 4872010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c18a971c032a46c57aa234965dabdcc?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/4872010/anderson"}, "reply_to_user": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1468013504, "post_id": 38212617, "comment_id": 63970656, "body": "Don&#39;t worry. Maybe it&#39;s a Gtk+ design decision. So I can reconsider redesigning the interface for not using GtkToolbar. At the moment, I added keyboard shortcuts to do the translation."}, {"owner": {"reputation": 31, "user_id": 4872010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c18a971c032a46c57aa234965dabdcc?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/4872010/anderson"}, "reply_to_user": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1468015324, "post_id": 38212617, "comment_id": 63971214, "body": "A little inspection on the <a href=\"https://github.com/GNOME/gtk/blob/master/gtk/gtktoolbutton.c\" rel=\"nofollow noreferrer\">GtkToolButton source code</a> reveals that GtkToolButton is just a container which has a GtkButton child, and we don&#39;t have access to it. Just the <code>click</code> event of the button is propagated to the toolbutton. I think this encapsulation loses flexibility to several applications. The GtkToolButton could propagate other GtkButton events, or add an accessor to the button."}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1468018500, "post_id": 38212617, "comment_id": 63972182, "body": "That explains it. I kept thinking all along it was a <code>GtkButton</code> for some reason. Maybe you could use some sort of panel below your image for control panel like most image viewers do. Also, you could post your answer to your main question (that&#39;s generally what SO recommends if you solved your problem) and explain how you will work around this limitation."}], "answers": [{"tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": false, "score": 0, "last_activity_date": 1468597134, "last_edit_date": 1468597134, "creation_date": 1468596747, "answer_id": 38399987, "question_id": 38212617, "link": "https://stackoverflow.com/questions/38212617/press-event-in-gtktoolbutton/38399987#38399987", "title": "Press Event in GtkToolButton", "body": "<p>There doesn't seem to be an easy way to disable the default 'clicked' handler. Apparently, that click handler is stealing the 'pressed' event from the user. If you are fast enough, you can see this happening (At least that's my explanation of it). When a button is clicked, it waits for a couple of 100's of milliseconds to check if another click happens (the double click event). During that time, Press events <em>do</em> get through. Test it running the following program, click repeatedly (and fast) on the button:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#\n#  test_toolbar_press.py\n#  \n#  Copyright 2016 John Coppens &lt;john@jcoppens.com&gt;\n#  \n#  This program is free software; you can redistribute it and/or modify\n#  it under the terms of the GNU General Public License as published by\n#  the Free Software Foundation; either version 2 of the License, or\n#  (at your option) any later version.\n#  \n#  This program is distributed in the hope that it will be useful,\n#  but WITHOUT ANY WARRANTY; without even the implied warranty of\n#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#  GNU General Public License for more details.\n#  \n#  You should have received a copy of the GNU General Public License\n#  along with this program; if not, write to the Free Software\n#  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,\n#  MA 02110-1301, USA.\n#  \n#  \n\n\nfrom gi.repository import Gtk, Gdk\n\nclass MyToolbar(Gtk.Toolbar):\n    def __init__(self):\n        super(MyToolbar, self).__init__()\n\n        btn = Gtk.ToolButton(None, None)\n        btn.connect(\"button-press-event\", self.btn_pressed)\n        btn.connect_after(\"clicked\", self.btn_clicked)\n\n        self.insert(btn, 0)\n\n    def btn_pressed(self, wdg, event):\n        print(\"Button pressed\")\n\n    def btn_clicked(self, wdg):\n        print(\"Button clicked\")\n\nclass MainWindow(Gtk.Window):\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        self.connect(\"destroy\", lambda x: Gtk.main_quit())\n        self.set_size_request(200, 50)\n\n        tbar = MyToolbar()\n        self.add(tbar)\n\n        self.show_all()\n\n    def run(self):\n        Gtk.main()\n\n\ndef main(args):\n    mainwdw = MainWindow()\n    mainwdw.run()\n\n    return 0\n\nif __name__ == '__main__':\n    import sys\n    sys.exit(main(sys.argv))\n</code></pre>\n\n<p>Clicking slow shows the normal 'Clicks', faster also shows the 'Presses':</p>\n\n<p><a href=\"https://i.stack.imgur.com/bOaa4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bOaa4.png\" alt=\"Output of the program\"></a></p>\n\n<p>I suggest the following solution - though it's not a toolbar, you can do a variation of this to fit your design:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#\n#  test_toolbar_press.py\n#  \n#  Copyright 2016 John Coppens &lt;john@jcoppens.com&gt;\n#  \n#  This program is free software; you can redistribute it and/or modify\n#  it under the terms of the GNU General Public License as published by\n#  the Free Software Foundation; either version 2 of the License, or\n#  (at your option) any later version.\n#  \n#  This program is distributed in the hope that it will be useful,\n#  but WITHOUT ANY WARRANTY; without even the implied warranty of\n#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#  GNU General Public License for more details.\n#  \n#  You should have received a copy of the GNU General Public License\n#  along with this program; if not, write to the Free Software\n#  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,\n#  MA 02110-1301, USA.\n#  \n#  \n\n\nfrom gi.repository import Gtk, Gdk\n\nclass MyNavbar(Gtk.Grid):\n    def __init__(self):\n        super(MyNavbar, self).__init__()\n\n        for dir, x, y in ((\"N\", 1, 0), (\"E\", 2, 1), (\"S\", 1, 2), (\"W\", 0, 1)):\n            btn = Gtk.Button(dir, None)\n            btn.connect(\"button-press-event\", self.btn_pressed, dir)\n            btn.connect(\"button-release-event\", self.btn_released, dir)\n            self.attach(btn, x, y, 1, 1)\n\n    def btn_pressed(self, wdg, event, data):\n        print(\"Button pressed %s\" % data)\n\n    def btn_released(self, wdg, event, data):\n        print(\"Button released %s\" % data)\n\nclass MainWindow(Gtk.Window):\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        self.connect(\"destroy\", lambda x: Gtk.main_quit())\n        self.set_size_request(200, 50)\n\n        tbar = MyNavbar()\n        self.add(tbar)\n\n        self.show_all()\n\n    def run(self):\n        Gtk.main()\n\n\ndef main(args):\n    mainwdw = MainWindow()\n    mainwdw.run()\n\n    return 0\n\nif __name__ == '__main__':\n    import sys\n    sys.exit(main(sys.argv))\n</code></pre>\n\n<p>This is the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/E3z9v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E3z9v.png\" alt=\"enter image description here\"></a> and this is the program output: </p>\n\n<pre><code>Button pressed N\nButton released N\nButton pressed E\nButton released E\nButton pressed S\nButton released S\nButton pressed W\nButton released W\n</code></pre>\n\n<p>My apologies for doing the examples in Python. However, it shouldn't be too difficult to translate the basic Gtk functions into C.</p>\n"}], "owner": {"reputation": 31, "user_id": 4872010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c18a971c032a46c57aa234965dabdcc?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/4872010/anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468597134, "creation_date": 1467752327, "last_edit_date": 1467935738, "question_id": 38212617, "link": "https://stackoverflow.com/questions/38212617/press-event-in-gtktoolbutton", "title": "Press Event in GtkToolButton", "body": "<p>I have a toolbar and some toolbuttons in Gtk3+, but instead of clicking, I would like to track the press event. I tried:</p>\n\n<pre><code>priv-&gt;toolbar  = gtk_toolbar_new();\npriv-&gt;btn_right= GTK_WIDGET(gtk_tool_button_new(NULL,NULL));\ngtk_widget_add_events(priv-&gt;btn_right, GDK_BUTTON_PRESS_MASK);\ng_signal_connect(priv-&gt;btn_right,  \"button-press-event\",\n                 G_CALLBACK(at_btn_right_pressed),self); \ngtk_toolbar_insert(GTK_TOOLBAR(priv-&gt;toolbar),\n                   GTK_TOOL_ITEM(priv-&gt;btn_right),\n                   6);\n</code></pre>\n\n<p>But it doesn't work. If I replace <code>button-press-event</code> for <code>click</code>, it works for click event. <code>at_btn_right_pressed(GtkWidget*, GdkEvent*, gpointer)</code> is a common handler for these events.</p>\n\n<p><strong>UPDATE</strong>:\nI'm building an image viewer, with four toolbar \"buttons\" (left, up, top, bottom). When the user presses the \"button\" with the mouse, the image is translated to the chosen direction. The <code>clicked</code> signal is not a good solution because the user needs to click many times to translate the image, but just one press event + one release one to accomplish the same task.<br>\nA <a href=\"https://gist.github.com/anderflash/b9cffe559f3981e3fc63e9e0d4eb63ac\" rel=\"nofollow\">MWE</a> in Gist</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "multithreading", "race-condition", "termination"], "comments": [{"owner": {"reputation": 69, "user_id": 3188930, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3PgtP.jpg?s=128&g=1", "display_name": "Jwoozy", "link": "https://stackoverflow.com/users/3188930/jwoozy"}, "edited": false, "score": 0, "creation_date": 1467751397, "post_id": 38212338, "comment_id": 63848814, "body": "if I comment out  line 168: wakeup_all_seller_threads();   line 67: pthread_mutex_lock(&amp;mutex); line 68:  pthread_cond_wait(&amp;cond, &amp;mutex); line 69:  pthread_mutex_unlock(&amp;mutex);  then the threads run fine."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1467751727, "post_id": 38212338, "comment_id": 63848989, "body": "It&#39;s likely that the main thread called <code>pthread_cond_broadcast</code> before the last thread called <code>pthread_cond_wait</code>."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1467752016, "post_id": 38212338, "comment_id": 63849154, "body": "Huh... never have used asprintf() before.  Neat - memory allocation for the given string.  Learned something today."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1467752134, "post_id": 38212338, "comment_id": 63849218, "body": "I think that @user3386109 is correct.  Put some sort of synchronization in place to be sure that the threads are ready for the broadcast - or cheap out and broadcast multiple times until everyone gets the message."}, {"owner": {"reputation": 69, "user_id": 3188930, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3PgtP.jpg?s=128&g=1", "display_name": "Jwoozy", "link": "https://stackoverflow.com/users/3188930/jwoozy"}, "edited": false, "score": 0, "creation_date": 1467752232, "post_id": 38212338, "comment_id": 63849270, "body": "user3386109, so how do I make the &#39;pthread_cond_broadcast&#39; execute after the &#39;pthread_cond_wait&#39;?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1467752614, "post_id": 38212338, "comment_id": 63849439, "body": "@Jwoozy I&#39;d get rid of the <code>pthread_cond</code> altogether. Have <code>main</code> lock the mutex. Then create the threads, and unlock the mutex. Have each thread lock and unlock the mutex before doing anything else. That way the threads have to wait till <code>main</code> unlocks the mutex before they can start."}, {"owner": {"reputation": 69, "user_id": 3188930, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3PgtP.jpg?s=128&g=1", "display_name": "Jwoozy", "link": "https://stackoverflow.com/users/3188930/jwoozy"}, "edited": false, "score": 1, "creation_date": 1467753381, "post_id": 38212338, "comment_id": 63849760, "body": "Thank you user3386109, it works now. I&#39;ll repost the working code for others."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 3188930, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3PgtP.jpg?s=128&g=1", "display_name": "Jwoozy", "link": "https://stackoverflow.com/users/3188930/jwoozy"}, "is_accepted": false, "score": 0, "last_activity_date": 1467753533, "creation_date": 1467753533, "answer_id": 38212912, "question_id": 38212338, "link": "https://stackoverflow.com/questions/38212338/thread-termination-issue-c-last-thread-not-terminating/38212912#38212912", "title": "Thread Termination issue (C): Last thread not terminating", "body": "<p>The threading works now. The pthread_cond was removed, and the main locked the mutex. The threads were created and each locked and unlocked the mutex before doing anything else. Then the main unlocked the mutex to start them all at the same time.</p>\n\n<p>Output:</p>\n\n<pre><code>------------------Theatre Seating----------------\n\n0000 0001 0002 0003 0004 0005 0006 0007 0008 0009 \n0010 0011 0012 0013 0014 0015 0016 0017 0018 0019 \n0020 0021 0022 0023 0024 0025 0026 0027 0028 0029 \n0030 0031 0032 0033 0034 0035 0036 0037 0038 0039 \n0040 0041 0042 0043 0044 0045 0046 0047 0048 0049 \n0050 0051 0052 0053 0054 0055 0056 0057 0058 0059 \n0060 0061 0062 0063 0064 0065 0066 0067 0068 0069 \n0070 0071 0072 0073 0074 0075 0076 0077 0078 0079 \n0080 0081 0082 0083 0084 0085 0086 0087 0088 0089 \n0090 0091 0092 0093 0094 0095 0096 0097 0098 0099 \n\n------------------End of Seating----------------\n\nEnter N value of Customers: 3\nNumber of Customers: 3\nthread #0: seller_type1-&gt;st = H\nthread #1: seller_type1-&gt;st = M\nthread #2: seller_type1-&gt;st = M\nthread #3: seller_type1-&gt;st = M\nthread #4: seller_type1-&gt;st = L\nthread #5: seller_type1-&gt;st = L\nthread #6: seller_type1-&gt;st = L\nthread #7: seller_type1-&gt;st = L\nthread #8: seller_type1-&gt;st = L\nthread #9: seller_type1-&gt;st = L\nSeller type: H\nSeller type: M\nSeller type: M\nSeller type: M\nSeller name: H0\n\nSeller type: L\nSeller name: M1\n\nSeller type: L\nSeller type: L\nSeller name: M2\n\nSeller type: L\nSeller name: M3\n\nSeller type: L\nSeller type: L\nthread #0: Work done\nSeller name: L1\n\nthread #1: Work done\nSeller name: L2\n\nSeller name: L3\n\nthread #2: Work done\nSeller name: L4\n\nthread #3: Work done\nSeller name: L5\n\nSeller name: L6\n\nthread #4: Work done\nthread #5: Work done\nthread #6: Work done\nthread #7: Work done\nthread #8: Work done\nthread #9: Work done\n\nRUN FINISHED; exit value 0; real time: 1s; user: 0ms; system: 0ms\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n\n/* \n * File:   ticketsellers.c\n * Author: iantheflyinghawaiian\n *\n * Created on July 4, 2016, 11:27 AM\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\npthread_cond_t cond = PTHREAD_COND_INITIALIZER;\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n// seller thread to serve one time slice (1 minute)\n\n#include &lt;stdlib.h&gt;\n\n//Global variables\n//Number of Customers\nint N;\nchar * theatre[][10] = { \n        {\"0000\", \"0001\", \"0002\", \"0003\", \"0004\", \"0005\", \"0006\", \"0007\", \"0008\", \"0009\"},\n        {\"0010\", \"0011\", \"0012\", \"0013\", \"0014\", \"0015\", \"0016\", \"0017\", \"0018\", \"0019\"},\n        {\"0020\", \"0021\", \"0022\", \"0023\", \"0024\", \"0025\", \"0026\", \"0027\", \"0028\", \"0029\"},\n        {\"0030\", \"0031\", \"0032\", \"0033\", \"0034\", \"0035\", \"0036\", \"0037\", \"0038\", \"0039\"},\n        {\"0040\", \"0041\", \"0042\", \"0043\", \"0044\", \"0045\", \"0046\", \"0047\", \"0048\", \"0049\"},\n        {\"0050\", \"0051\", \"0052\", \"0053\", \"0054\", \"0055\", \"0056\", \"0057\", \"0058\", \"0059\"},\n        {\"0060\", \"0061\", \"0062\", \"0063\", \"0064\", \"0065\", \"0066\", \"0067\", \"0068\", \"0069\"},\n        {\"0070\", \"0071\", \"0072\", \"0073\", \"0074\", \"0075\", \"0076\", \"0077\", \"0078\", \"0079\"},\n        {\"0080\", \"0081\", \"0082\", \"0083\", \"0084\", \"0085\", \"0086\", \"0087\", \"0088\", \"0089\"},\n        {\"0090\", \"0091\", \"0092\", \"0093\", \"0094\", \"0095\", \"0096\", \"0097\", \"0098\", \"0099\"}\n};\n\n\nstruct seller_type {\n  char st;\n  int tid;\n  int numid;\n  char * name;\n};\n\n\nvoid fillSeat()\n{\n    char *c1 = theatre[0][2];\n    char *d1 = theatre[0][0];\n\n      //asprintf(&amp;d1, \"%c%c%c%d\\n\",c1[0],c1[1],seller_type1-&gt;st,seller_type1-&gt;tid);\n      printf(\"D : %s\", d1);\n}\n\nvoid *sell(void *arg)\n{\n  struct seller_type *seller_type1 = arg;\n  int i;\n  i = 0;\n  printf(\"thread #%d: seller_type1-&gt;st = %c\\n\", seller_type1-&gt;tid,\n     seller_type1-&gt;st);\n\n\n  // do work\n  while (i == 0) {\n  pthread_mutex_lock(&amp;mutex);\n  //pthread_cond_wait(&amp;cond, &amp;mutex);\n  pthread_mutex_unlock(&amp;mutex);\n\n    switch (seller_type1-&gt;st) {\n\n    case 'H':\n      printf(\"Seller type: H\\n\");\n      printf(\"Seller name: %s\\n\", seller_type1-&gt;name);\n\n      //Begin Selling tickets\n      i = 1;\n      //set time;\n\n      break;\n\n    case 'M':\n      printf(\"Seller type: M\\n\");\n      printf(\"Seller name: %s\\n\", seller_type1-&gt;name);\n\n      //Begin Selling tickets\n      i = 1;\n      //set time;\n      break;\n\n    case 'L':\n      printf(\"Seller type: L\\n\");\n      printf(\"Seller name: %s\\n\", seller_type1-&gt;name);\n\n      //Begin Selling tickets\n      i = 1;\n      //set time;\n      break;\n\n    }\n\n\n  }\n  printf(\"thread #%d: Work done\\n\", seller_type1-&gt;tid);\n  return NULL;\n}\n\nvoid displayTheatre()\n{\n    int i,j;\n    printf(\"\\n------------------Theatre Seating----------------\\n\\n\");\n    for(i = 0;i&lt;10;i++)\n    {\n        for(j = 0;j&lt;10;j++){\n            printf(\"%s \",theatre[i][j]);\n        }\n        printf(\"\\n\");\n    }\n     printf(\"\\n------------------End of Seating----------------\\n\\n\");\n}\n\nvoid wakeup_all_seller_threads()\n{\n //pthread_mutex_lock(&amp;mutex);\n //pthread_cond_wait(&amp;cond, &amp;mutex);\n //pthread_cond_broadcast(&amp;cond);\n pthread_mutex_unlock(&amp;mutex);\n\n}\n\nvoid lockup_all_seller_threads()\n{\n pthread_mutex_lock(&amp;mutex);\n //pthread_cond_wait(&amp;cond, &amp;mutex);\n //pthread_cond_broadcast(&amp;cond);\n //pthread_mutex_unlock(&amp;mutex);\n\n}\n\nint main()\n{\n  lockup_all_seller_threads();\n\n  N = 0;\n  int i = 0;\n  struct seller_type *seller_type1;\n  displayTheatre();\n  pthread_t tids[10];\n  seller_type1 = calloc(10, sizeof(struct seller_type));\n\n   printf(\"Enter N value of Customers: \");\n   scanf(\"%d\", &amp;N);\n   printf(\"Number of Customers: %d\\n\", N);\n\n  // All error handling ommitted! Yes, ALL!\n\n  seller_type1[0].st = 'H';\n  seller_type1[0].tid = 0;\n  seller_type1[0].numid = 0;\n  asprintf(&amp;seller_type1[0].name, \"%c%d\\n\",seller_type1[0].st,seller_type1[0].numid);\n  pthread_create(&amp;tids[0], NULL, sell, &amp;seller_type1[0]);\n\n  for (i = 1; i &lt; 4; i++) {\n    seller_type1[i].st = 'M';\n    seller_type1[i].tid = i;\n    seller_type1[i].numid = i;\n    asprintf(&amp;seller_type1[i].name, \"%c%d\\n\",seller_type1[i].st,seller_type1[i].numid);\n    pthread_create(&amp;tids[i], NULL, sell, &amp;seller_type1[i]);\n  }\n\n  for (i = 4; i &lt; 10; i++) {\n    seller_type1[i].st = 'L';\n    seller_type1[i].tid = i;\n    seller_type1[i].numid = i-3;\n    asprintf(&amp;seller_type1[i].name, \"%c%d\\n\",seller_type1[i].st,seller_type1[i].numid);\n    pthread_create(&amp;tids[i], NULL, sell, &amp;seller_type1[i]);\n  }\n\n  wakeup_all_seller_threads();\n  //puts(\"All threads Start\");\n\n  // wait for all seller threads to exit\n  for (i = 0; i &lt; 10; i++) {\n    pthread_join(tids[i], NULL);\n    //printf(\"Thread %d joined\\n\", i);\n  }\n  //puts(\"All threads joined\");\n\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3188930, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3PgtP.jpg?s=128&g=1", "display_name": "Jwoozy", "link": "https://stackoverflow.com/users/3188930/jwoozy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467753533, "creation_date": 1467751188, "question_id": 38212338, "link": "https://stackoverflow.com/questions/38212338/thread-termination-issue-c-last-thread-not-terminating", "title": "Thread Termination issue (C): Last thread not terminating", "body": "<p>Why is my last thread not terminating?</p>\n\n<p>I want to start all the threads at the same time, so I have ten threads that once created are put to sleep. Once all the threads are created, I wake all of them to start processing the data. The threads complete except the last thread, thread #9. Does anyone know why the last thread isn't terminating and joining all the other pthreads?</p>\n\n<p>Output:</p>\n\n<pre><code>------------------Theatre Seating----------------\n\n0000 0001 0002 0003 0004 0005 0006 0007 0008 0009 \n0010 0011 0012 0013 0014 0015 0016 0017 0018 0019 \n0020 0021 0022 0023 0024 0025 0026 0027 0028 0029 \n0030 0031 0032 0033 0034 0035 0036 0037 0038 0039 \n0040 0041 0042 0043 0044 0045 0046 0047 0048 0049 \n0050 0051 0052 0053 0054 0055 0056 0057 0058 0059 \n0060 0061 0062 0063 0064 0065 0066 0067 0068 0069 \n0070 0071 0072 0073 0074 0075 0076 0077 0078 0079 \n0080 0081 0082 0083 0084 0085 0086 0087 0088 0089 \n0090 0091 0092 0093 0094 0095 0096 0097 0098 0099 \n\n------------------End of Seating----------------\n\nEnter N value of Customers: 2\nNumber of Customers: 2\nthread #0: seller_type1-&gt;st = H\nthread #1: seller_type1-&gt;st = M\nthread #2: seller_type1-&gt;st = M\nthread #3: seller_type1-&gt;st = M\nthread #4: seller_type1-&gt;st = L\nthread #5: seller_type1-&gt;st = L\nthread #6: seller_type1-&gt;st = L\nthread #7: seller_type1-&gt;st = L\nthread #8: seller_type1-&gt;st = L\nthread #9: seller_type1-&gt;st = L\nSeller type: H\nthread #0: Work done\nSeller type: M\nSeller type: M\nSeller name: M1\n\nSeller type: M\nSeller name: M2\n\nSeller type: L\nSeller type: L\nthread #1: Work done\nSeller type: L\nSeller name: M3\n\nSeller type: L\nSeller type: L\nthread #2: Work done\nthread #4: Work done\nthread #5: Work done\nthread #6: Work done\nthread #3: Work done\nthread #7: Work done\nthread #8: Work done\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code> * Created on July 4, 2016, 11:27 AM\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\npthread_cond_t cond = PTHREAD_COND_INITIALIZER;\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n// seller thread to serve one time slice (1 minute)\n\n#include &lt;stdlib.h&gt;\n\n//Global variables\n//Number of Customers\nint N;\nchar * theatre[][10] = { \n        {\"0000\", \"0001\", \"0002\", \"0003\", \"0004\", \"0005\", \"0006\", \"0007\", \"0008\", \"0009\"},\n        {\"0010\", \"0011\", \"0012\", \"0013\", \"0014\", \"0015\", \"0016\", \"0017\", \"0018\", \"0019\"},\n        {\"0020\", \"0021\", \"0022\", \"0023\", \"0024\", \"0025\", \"0026\", \"0027\", \"0028\", \"0029\"},\n        {\"0030\", \"0031\", \"0032\", \"0033\", \"0034\", \"0035\", \"0036\", \"0037\", \"0038\", \"0039\"},\n        {\"0040\", \"0041\", \"0042\", \"0043\", \"0044\", \"0045\", \"0046\", \"0047\", \"0048\", \"0049\"},\n        {\"0050\", \"0051\", \"0052\", \"0053\", \"0054\", \"0055\", \"0056\", \"0057\", \"0058\", \"0059\"},\n        {\"0060\", \"0061\", \"0062\", \"0063\", \"0064\", \"0065\", \"0066\", \"0067\", \"0068\", \"0069\"},\n        {\"0070\", \"0071\", \"0072\", \"0073\", \"0074\", \"0075\", \"0076\", \"0077\", \"0078\", \"0079\"},\n        {\"0080\", \"0081\", \"0082\", \"0083\", \"0084\", \"0085\", \"0086\", \"0087\", \"0088\", \"0089\"},\n        {\"0090\", \"0091\", \"0092\", \"0093\", \"0094\", \"0095\", \"0096\", \"0097\", \"0098\", \"0099\"}\n};\n\n\nstruct seller_type {\n  char st;\n  int tid;\n  int numid;\n  char * name;\n};\n\n\nvoid fillSeat()\n{\n    char *c1 = theatre[0][2];\n    char *d1 = theatre[0][0];\n\n      //asprintf(&amp;d1, \"%c%c%c%d\\n\",c1[0],c1[1],seller_type1-&gt;st,seller_type1-&gt;tid);\n      printf(\"D : %s\", d1);\n}\n\nvoid *sell(void *arg)\n{\n  struct seller_type *seller_type1 = arg;\n  int i;\n  i = 0;\n  printf(\"thread #%d: seller_type1-&gt;st = %c\\n\", seller_type1-&gt;tid,\n     seller_type1-&gt;st);\n\n\n  // do work\n  while (i == 0) {\n  pthread_mutex_lock(&amp;mutex);\n  pthread_cond_wait(&amp;cond, &amp;mutex);\n  pthread_mutex_unlock(&amp;mutex);\n\n    switch (seller_type1-&gt;st) {\n\n    case 'H':\n      printf(\"Seller type: H\\n\");\n      //printf(\"Seller name: %s\\n\", seller_type1-&gt;name);\n\n      //Begin Selling tickets\n      i = 1;\n      //set time;\n\n      break;\n\n    case 'M':\n      printf(\"Seller type: M\\n\");\n      printf(\"Seller name: %s\\n\", seller_type1-&gt;name);\n\n      //Begin Selling tickets\n      i = 1;\n      //set time;\n      break;\n\n    case 'L':\n      printf(\"Seller type: L\\n\");\n      //printf(\"Seller name: %s\\n\", seller_type1-&gt;name);\n\n      //Begin Selling tickets\n      i = 1;\n      //set time;\n      break;\n\n    }\n\n\n  }\n  printf(\"thread #%d: Work done\\n\", seller_type1-&gt;tid);\n  return NULL;\n}\n\nvoid displayTheatre()\n{\n    int i,j;\n    printf(\"\\n------------------Theatre Seating----------------\\n\\n\");\n    for(i = 0;i&lt;10;i++)\n    {\n        for(j = 0;j&lt;10;j++){\n            printf(\"%s \",theatre[i][j]);\n        }\n        printf(\"\\n\");\n    }\n     printf(\"\\n------------------End of Seating----------------\\n\\n\");\n}\n\nvoid wakeup_all_seller_threads()\n{\n pthread_mutex_lock(&amp;mutex);\n pthread_cond_broadcast(&amp;cond);\n pthread_mutex_unlock(&amp;mutex);\n\n}\n\nint main()\n{\n  N = 0;\n  int i = 0;\n  struct seller_type *seller_type1;\n  displayTheatre();\n  pthread_t tids[10];\n  seller_type1 = calloc(10, sizeof(struct seller_type));\n\n   printf(\"Enter N value of Customers: \");\n   scanf(\"%d\", &amp;N);\n   printf(\"Number of Customers: %d\\n\", N);\n\n  // All error handling ommitted! Yes, ALL!\n\n  seller_type1[0].st = 'H';\n  seller_type1[0].tid = 0;\n  seller_type1[0].numid = 0;\n  asprintf(&amp;seller_type1[0].name, \"%c%d\\n\",seller_type1[0].st,seller_type1[0].numid);\n  pthread_create(&amp;tids[0], NULL, sell, &amp;seller_type1[0]);\n\n  for (i = 1; i &lt; 4; i++) {\n    seller_type1[i].st = 'M';\n    seller_type1[i].tid = i;\n    seller_type1[i].numid = i;\n    asprintf(&amp;seller_type1[i].name, \"%c%d\\n\",seller_type1[i].st,seller_type1[i].numid);\n    pthread_create(&amp;tids[i], NULL, sell, &amp;seller_type1[i]);\n  }\n\n  for (i = 4; i &lt; 10; i++) {\n    seller_type1[i].st = 'L';\n    seller_type1[i].tid = i;\n    seller_type1[i].numid = i-3;\n    asprintf(&amp;seller_type1[i].name, \"%c%d\\n\",seller_type1[i].st,seller_type1[i].numid);\n    pthread_create(&amp;tids[i], NULL, sell, &amp;seller_type1[i]);\n  }\n\n  wakeup_all_seller_threads();\n  //puts(\"All threads Start\");\n\n  // wait for all seller threads to exit\n  for (i = 0; i &lt; 10; i++) {\n    pthread_join(tids[i], NULL);\n    //printf(\"Thread %d joined\\n\", i);\n  }\n  //puts(\"All threads joined\");\n\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c", "getchar"], "comments": [{"owner": {"reputation": 463, "user_id": 69900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53808613ca39d10b4d4920996947e749?s=128&d=identicon&r=PG", "display_name": "2-bits", "link": "https://stackoverflow.com/users/69900/2-bits"}, "edited": false, "score": 2, "creation_date": 1467751197, "post_id": 38212306, "comment_id": 63848703, "body": "That should read from stdin. Are you typing anything while that program runs?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1467751247, "post_id": 38212306, "comment_id": 63848729, "body": "After starting the program, you are supposed to type <i>&quot;The sky is blue&quot;</i> into the terminal, and then press Ctrl-D on *nix, or Ctrl-Z on windows."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1467751258, "post_id": 38212306, "comment_id": 63848735, "body": "You should be typing <code>The sky is blue</code> to the program, or redirecting its input from a file containing that text, or something.  At any rate, that is supposed to be input you provide."}, {"owner": {"reputation": 39, "user_id": 6540754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2850a1474216c2ace985e83daab5242f?s=128&d=identicon&r=PG&f=1", "display_name": "MDrake", "link": "https://stackoverflow.com/users/6540754/mdrake"}, "edited": false, "score": 0, "creation_date": 1467751589, "post_id": 38212306, "comment_id": 63848923, "body": "Thanks all. Can&#39;t believe I didn&#39;t realize that..."}, {"owner": {"reputation": 463, "user_id": 69900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53808613ca39d10b4d4920996947e749?s=128&d=identicon&r=PG", "display_name": "2-bits", "link": "https://stackoverflow.com/users/69900/2-bits"}, "edited": false, "score": 0, "creation_date": 1467751712, "post_id": 38212306, "comment_id": 63848983, "body": "We&#39;ve all been there. Out of curiosity, which book are you using?"}, {"owner": {"reputation": 39, "user_id": 6540754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2850a1474216c2ace985e83daab5242f?s=128&d=identicon&r=PG&f=1", "display_name": "MDrake", "link": "https://stackoverflow.com/users/6540754/mdrake"}, "edited": false, "score": 0, "creation_date": 1467751947, "post_id": 38212306, "comment_id": 63849120, "body": "Focus on Fundamentals of Programming with C by Richard Stegman"}], "answers": [{"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 2, "last_activity_date": 1467752633, "last_edit_date": 1467752633, "creation_date": 1467752299, "answer_id": 38212611, "question_id": 38212306, "link": "https://stackoverflow.com/questions/38212306/having-trouble-counting-lines-in-output/38212611#38212611", "title": "Having trouble counting lines in output", "body": "<p>Your program is looking for <code>EOF</code> to break out from <code>while</code> loop. To enter an EOF, use:</p>\n\n<pre><code>^Z (Ctrl + Z) in Windows\n^D on Unix-like systems\n</code></pre>\n\n<p>CTRL + D works for me on Ubuntu. I have run your code in my machine. To get your desired output, you need to type - </p>\n\n<pre><code>The  (Press Enter) \nSky  (Press Enter)\nis   (Press Enter) \nBlue (Press Enter) \n(and finally send EOF)\n</code></pre>\n\n<p>Pressing <code>ENTER</code> will send '\\n' character to the program on Ubuntu. Windows uses \\r\\n to signify the enter key was pressed, while Linux and Unix use \\n to signify that the enter key was pressed.</p>\n"}, {"tags": [], "owner": {"reputation": 1132, "user_id": 6457404, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wTPUH.jpg?s=128&g=1", "display_name": "brianxautumn", "link": "https://stackoverflow.com/users/6457404/brianxautumn"}, "is_accepted": false, "score": 0, "last_activity_date": 1467753450, "creation_date": 1467753450, "answer_id": 38212887, "question_id": 38212306, "link": "https://stackoverflow.com/questions/38212306/having-trouble-counting-lines-in-output/38212887#38212887", "title": "Having trouble counting lines in output", "body": "<p>Okay I think I see what you are trying to do. First you have to decide exactly how you are getting your input. I'll just assume for now you would like to get it from the command line. When you were using getChar(), its counting 1 character plus the new line, so you were actually just counting how many characters you typed in. When you get a line from the console, its counting \\ as one char and n as another char. What you can do is manually detect your escape characters within the string, because it seems that you are interested in detecting the sequence \"\\n\". Every time you hit enter and it returns the line from the console you will actually get the '\\n' character at the end, which is different than \"\\n\", you can count that separately if you like. Here is an example to illustrate:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    char* currentChar;\n    char* nextChar;\n    int numLines = 0;\n    int bufferSize = 100;\n    char *input;\n    int inputLength;\n\n    input = (char *) malloc(bufferSize);\n    inputLength = getline(&amp;input, &amp;bufferSize, stdin);\n\n    for (int i = 0; i &lt; inputLength; i++) {\n        currentChar = input[i];\n        if (currentChar == '\\\\' &amp;&amp; i &lt; inputLength - 1) {\n            nextChar = input[i + 1];\n            if (nextChar == 'n')\n                numLines++;\n        }\n    }\n\n    printf(\"%d lines read.\\n\", numLines);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6540754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2850a1474216c2ace985e83daab5242f?s=128&d=identicon&r=PG&f=1", "display_name": "MDrake", "link": "https://stackoverflow.com/users/6540754/mdrake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1467755796, "creation_date": 1467751036, "last_edit_date": 1467755796, "question_id": 38212306, "link": "https://stackoverflow.com/questions/38212306/having-trouble-counting-lines-in-output", "title": "Having trouble counting lines in output", "body": "<p>Here is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int nextChar;\n    int numLines = 0;\n\n    while  ((nextChar = getchar())!= EOF) {\n        if (nextChar == '\\n') {\n           ++numLines;\n        }\n    }\n    printf(\"The\\nsky\\nis\\nblue\\n\");\n    printf(\"%d lines read.\\n\", numLines);\n    return 0;\n}\n</code></pre>\n\n<p>It runs, but returns 0 lines read. I've tried putting the 'the sky is blue' text in a bunch of different places, but nothing seems to work.</p>\n\n<p>The code was shown in the book, but without</p>\n\n<pre><code>    printf(\"The\\nsky\\is\\blue.\\n\");\n</code></pre>\n\n<p>but the output was shown as:</p>\n\n<pre><code>    The\n    sky\n    is\n    blue.\n    4 lines read.\n</code></pre>\n\n<p>any suggestions??</p>\n"}, {"tags": ["c", "arrays", "function", "matrix"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1467751099, "post_id": 38212046, "comment_id": 63848650, "body": "&quot;when i tired to do a test run on printing out the average for rows I didn&#39;t get the right answer&quot;, .  What did you get?"}, {"owner": {"reputation": 65, "user_id": 4574128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61b80722cdfd6f8e04a8580874a2acd3?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/4574128/nate"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467751321, "post_id": 38212046, "comment_id": 63848771, "body": "I never ran the overall average but when i ran to get the averages for each row i got 10.5000"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1467751524, "post_id": 38212046, "comment_id": 63848880, "body": "Have a look at <code>rowAve[rows, cols]</code>  It does the same as <code>rowAve[cols]</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1467751716, "post_id": 38212046, "comment_id": 63848986, "body": "I got <code>10.5</code> too but only after correcting the function name that does not compile."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467752104, "post_id": 38212046, "comment_id": 63849194, "body": "On from @chux, <code>rowAve[cols]</code> will out of the array bounds."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1467753048, "post_id": 38212046, "comment_id": 63849622, "body": "You need to test the return value from <code>scanf()</code>.  If the user types <code>a</code> instead of <code>3</code> for the number of rows, your program is going to run for a long time.  Also, why on earth are you returning allocated <code>float *</code> for the single numeric values from <code>rowavg()</code> and <code>colavg()</code>?  It would be much, much, much more sensible simply to return the <code>float</code> value.  And you&#39;d pass simple <code>float</code> values to the <code>printAverages()</code> function too.  And you wouldn&#39;t need to free the returned pointers."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1467754689, "post_id": 38212046, "comment_id": 63850298, "body": "<a href=\"http://ideone.com/CY1wRg\" rel=\"nofollow noreferrer\">ideone.com/CY1wRg</a>"}], "owner": {"reputation": 65, "user_id": 4574128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61b80722cdfd6f8e04a8580874a2acd3?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/4574128/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467752932, "creation_date": 1467750040, "last_edit_date": 1467752932, "question_id": 38212046, "link": "https://stackoverflow.com/questions/38212046/function-to-print-out-averages", "title": "Function to Print Out Averages", "body": "<p>I'm trying to print out the averages in the function <code>void printavg(float *matrix,float *rowAve,float *colAve, float overallAve, int rows, int cols);</code>\nbut when I tried to do a test run on printing out the average for rows I didn't get the right answer. What's the proper way to print out the avg using the <code>printavg</code> function. Here's an example of what the program should do:</p>\n\n<pre><code>Enter row dimension &lt;must be between 1 and 5&gt;: 3\nEnter column dimension &lt;must be between 1 and 5&gt;: 2\nEnter 6 data values for 3 x 2 matrix, in by-row order\n1\n2\n3\n4\n5\n6\n1.00 2.00   1.50\n3.00 4.00   3.50\n5.00 6.00   5.50\n\n3.00 4.00\nOverall average is: 3.500000\nEnter 0 to continue with a new matrix\nEnter any other number to terminate the program:\n</code></pre>\n\n<p>Here's the code that I have so far</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n // Function Prototypes\n float *readMatrix(int rows, int cols);\n float *rowavg(float *matrix, int rows, int cols);\n float *colavg(float *matrix, int rows, int cols);\n float overallavg(float* matrix, int rows, int cols);\n void printavg(float *matrix, float *rowAve, float *colAve, float overallAve, int rows, int cols);\n\n #define MAX_DIM 15\n\nint main(void)\n{\n  int done = 0;\n  int rows, cols;\n  float *dataMatrix;\n  float *rowAveVector;\n  float *colAveVector;\n  float overallAve;\n\n  while (!done)\n  {\n    // Prompt user to enter row and column dimensions of matrix (must be &gt; 0)\n    do\n    {\n        printf(\"Enter row dimension (must be between 1 and %d): \", MAX_DIM);\n        scanf(\"%d\", &amp;rows);    \n    } while(rows &lt;= 0 || rows &gt; MAX_DIM);\n    do\n    {\n        printf(\"Enter column dimension (must be between 1 and %d): \", MAX_DIM);\n        scanf(\"%d\", &amp;cols);\n    } while(cols &lt;= 0 || cols &gt; MAX_DIM);\n\n    dataMatrix = readMatrix(rows, cols);\n    if (dataMatrix == NULL)\n    {\n        printf (\"Program terminated due to dynamic memory allocation failure\\n\");\n        return (0);\n    }\n\n    rowAveVector = rowavg(dataMatrix, rows, cols);\n    colAveVector = colavg(dataMatrix, rows, cols);\n    if(rowAveVector == NULL || colAveVector == NULL)\n    {\n     printf(\"malloc failed.  Terminating program\\n\");\n     return (0);\n    }\n    overallAve = overallavg(dataMatrix, rows, cols);\n\n    //Print Averages\n    printAverages(dataMatrix, rowAveVector, colAveVector, overallAve, rows, cols);\n\n    free(dataMatrix);\n    free(rowAveVector);\n    free(colAveVector);\n\n    //Check if user wants to enter a new matrix\n    printf(\"Enter 0 to continue with a new matrix\\n\");\n    printf(\"Enter any other number to terminate the program: \");\n    scanf(\"%d\", &amp;done);\n  }\n  //That's it, we are done\n  return (0);\n}\n\nfloat *readMatrix(int rows, int cols)\n{\n    int i=0;\n    int j=0;\n    int elements=0;\n    float *m=malloc(rows*cols*sizeof(float));\n\n    if (m==NULL)\n    {\n        printf(\"error\\n\");\n        return NULL;\n    }\n    printf(\"Enter values for the matrix: \");\n    for (i=0;i&lt;rows;i++)\n    {\n        for (j=0;j&lt;cols;j++)\n        {\n            elements = i*cols+j;\n            scanf(\"%f\", &amp;m[elements]);\n        }\n    }\n    return m;\n}\n\nfloat *rowavg(float *matrix, int rows, int cols)\n{\n\n  if (matrix==NULL)\n  {\n      return NULL;\n  }\n  int i=0;\n  int j=0;\n  float mean=0;\n  float *Average_array=malloc(rows*sizeof(float));\n  if (Average_array==NULL)\n  {\n      return NULL;\n  }\n  for (i=0;i&lt;rows;i++)\n  {\n      for (j=0;j&lt;cols;j++)\n      {\n          mean+=matrix[i*cols+j];\n      }\n      Average_array[i]=(float)(mean/cols);\n  }\n  return Average_array;\n}\n\nfloat *colavg(float *matrix, int rows, int cols)\n{\n  if (matrix==NULL)\n  {\n      return NULL;\n  }\n  int i=0;\n  int j=0;\n  float mean=0;\n  float *Average_array=malloc(cols*sizeof(float));\n  if (Average_array==NULL)\n  {\n      return NULL;\n  }\n  for (i=0;i&lt;cols;i++)\n  {\n      for (j=0;j&lt;rows;j++)\n      {\n          mean+=matrix[j*cols+i];\n      }\n      Average_array[i]=(float)(mean/rows);\n  }\n  return Average_array;\n}\n\nfloat overallavg(float* matrix, int rows, int cols)\n{\n    float sum=0;\n    int i=0;\n    float elements=0;\n    float mean;\n    elements=rows*cols;\n    for (i=0;i&lt;elements;i++)\n    {\n        sum+=matrix[i];\n    }\n    mean=sum/elements;\n    return mean;\n}\n\nvoid printavg(float *matrix, float *rowAve, float *colAve, float overallAve, int rows, int cols)\n{\n  printf(\"%f\",rowAve[rows,cols]);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "numerical"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1467750328, "post_id": 38211955, "comment_id": 63848187, "body": "C has <code>fpclassify()</code> since C99.  It will allow you to check for exceptional floating point values (NaNs, infinities, and subnormals), which is what you need in order to implement a function providing the behavior you describe."}], "answers": [{"tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 1, "last_activity_date": 1467759904, "creation_date": 1467759904, "answer_id": 38214181, "question_id": 38211955, "link": "https://stackoverflow.com/questions/38211955/equivalent-of-numpy-nan-to-num-in-c-c/38214181#38214181", "title": "Equivalent of numpy.nan_to_num in C/C++", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;math.h&gt;\n\ndouble normalize(double num)\n    if (isnormal(num)){\n        return num;\n    } else {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>If infinity is to be treated specially, you could also use <code>isinf(num)</code> as a condition and return a 'big' number of your choice.</p>\n"}, {"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1468874698, "post_id": 38445575, "comment_id": 64296696, "body": "I&#39;m using opencl C, which is only a subset of C99."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1468875374, "post_id": 38445575, "comment_id": 64297023, "body": "That makes sense, but should definitely have been added to the question!"}, {"owner": {"reputation": 125, "user_id": 3134769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b787092c8a9775a8e0ee25e6562f46?s=128&d=identicon&r=PG", "display_name": "rakeshdn", "link": "https://stackoverflow.com/users/3134769/rakeshdn"}, "edited": false, "score": 1, "creation_date": 1575852045, "post_id": 38445575, "comment_id": 104693808, "body": "signbit returns true for negative numbers. So if true the return should be -MAXFLOAT and else MAXFLOAT."}], "tags": [], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "is_accepted": true, "score": 2, "last_activity_date": 1575854271, "last_edit_date": 1575854271, "creation_date": 1468874077, "answer_id": 38445575, "question_id": 38211955, "link": "https://stackoverflow.com/questions/38211955/equivalent-of-numpy-nan-to-num-in-c-c/38445575#38445575", "title": "Equivalent of numpy.nan_to_num in C/C++", "body": "<p>I ended up using this, since I want to maintain continuity. It works with opencl as well, and doesn't require any C99 stuff.</p>\n\n<pre><code>float nan_to_num(float num){\n  if (isinf(num)){\n    if (signbit(num))\n      return -MAXFLOAT;\n    else\n      return MAXFLOAT;\n  } else {\n    return num;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 38445575, "answer_count": 2, "score": -2, "last_activity_date": 1575854271, "creation_date": 1467749679, "last_edit_date": 1467753415, "question_id": 38211955, "link": "https://stackoverflow.com/questions/38211955/equivalent-of-numpy-nan-to-num-in-c-c", "title": "Equivalent of numpy.nan_to_num in C/C++", "body": "<p>How can I achieve behavior equivalent to numpy's <code>numpy.nan_to_num</code> function in C/C++? </p>\n\n<p>Specificiation for non-python programmers:</p>\n\n<blockquote>\n  <p>Replace nan with zero and inf with finite numbers.</p>\n  \n  <p>Returns an array or scalar replacing Not a Number (NaN) with zero,\n  (positive) infinity with a very large number and negative infinity\n  with a very small (or negative) number. ... NaN is replaced by\n  zero, and infinity (-infinity) is replaced by the largest (smallest or\n  most negative) floating point value that fits in the output dtype. </p>\n</blockquote>\n"}]