[{"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570060509, "post_id": 58210709, "comment_id": 102798760, "body": "Why not just remove the <code>fgets</code>? If the answer to this is because you need it for something, then edit your question to show the &quot;something&quot;."}, {"owner": {"reputation": 7, "user_id": 10998330, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8itscNnJaQI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNpFtmySAUIQRgz6KRsfyfK1wovkA/mo/photo.jpg?sz=128", "display_name": "Zoe", "link": "https://stackoverflow.com/users/10998330/zoe"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570060796, "post_id": 58210709, "comment_id": 102798805, "body": "Yes, sorry editing my question now."}], "answers": [{"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 1, "last_activity_date": 1570060799, "creation_date": 1570060799, "answer_id": 58210757, "question_id": 58210709, "link": "https://stackoverflow.com/questions/58210709/fgets-in-infinite-loop-terminating/58210757#58210757", "title": "fgets in infinite loop terminating", "body": "<p>All I/O in the C standard library is <em>blocking</em> I/O. That means if you read from or write to a file (or stdin, etc.), the read or write function will not return until the read or write takes place (or encounters an error).</p>\n\n<p>If you want to have code execute while I/O operations are going on, you need to either (1) use multiple threads, or (2) use low-level non-blocking I/O (for example, Posix read/write to files with O_NONBLOCK). With stdin, this may also involve some low-level messing with terminal settings. </p>\n"}], "owner": {"reputation": 7, "user_id": 10998330, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8itscNnJaQI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNpFtmySAUIQRgz6KRsfyfK1wovkA/mo/photo.jpg?sz=128", "display_name": "Zoe", "link": "https://stackoverflow.com/users/10998330/zoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58210757, "answer_count": 1, "score": 0, "last_activity_date": 1570060864, "creation_date": 1570060390, "last_edit_date": 1570060864, "question_id": 58210709, "link": "https://stackoverflow.com/questions/58210709/fgets-in-infinite-loop-terminating", "title": "fgets in infinite loop terminating", "body": "<p>I am trying to use fgets within an infinite loop as I need a specific input from the user. I want to continuously print something until I receive any input from the user. However fgets seems to make the program wait for input. </p>\n\n<p>I've tried using other input methods such as gets.</p>\n\n<pre><code>while(1){\n        char input[100];\n        fgets(input, sizeof(input),stdin);\n        printf(\"I want this statement to continuously print.\");\n}\n</code></pre>\n\n<p>The statement only prints when I enter text. However I want it to continuously print the statement regardless of input.</p>\n"}, {"tags": ["c++", "c", "multithreading", "mutex", "semaphore"], "comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570059260, "post_id": 58210460, "comment_id": 102798533, "body": "This is trivial with a <code>std::conditional_variable</code>.  Can you use that?"}, {"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570059932, "post_id": 58210460, "comment_id": 102798649, "body": "@selbie I prefer an answer that can work on plain C as well. However, I&#39;d like to know your solution as well."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570059978, "post_id": 58210460, "comment_id": 102798659, "body": "Tell us more about i: I guess it is an element in all natural numbers above 0? Do you know its upper bound? I assume from your question its consecutive? Which C++ standard? C++20 ok?"}, {"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 0, "creation_date": 1570060080, "post_id": 58210460, "comment_id": 102798674, "body": "Yes, n is a natural and positive number. And i is just a counter from 1 to n."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570060153, "post_id": 58210460, "comment_id": 102798681, "body": "If you want an answer in &quot;C&quot;, why did you tag the question as C++ ?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570060194, "post_id": 58210460, "comment_id": 102798695, "body": "Yeah that is miss leading, every language has a different answer, even often with C and C++, luckily my answer works in both."}, {"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570060290, "post_id": 58210460, "comment_id": 102798716, "body": "@selbie well they&#39;re not mutually exclusive. C++ covers C. But as I said I just prefer C answers but I&#39;ll edit the question to cover both."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570060899, "post_id": 58210460, "comment_id": 102798819, "body": "@A.Mashreghi Be are C++ and C are different, meanwhile very different languages. C++ is not C with classes anymore!"}], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 0, "creation_date": 1570062567, "post_id": 58210601, "comment_id": 102799145, "body": "Thanks. But I accepted the other answer because personally I think a while loop is a bit wasteful. By the way, I don&#39;t think it works in C; atomic was introduced in C++11."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 1, "creation_date": 1570119937, "post_id": 58210601, "comment_id": 102821894, "body": "Nope C got atomics since C11 too: <a href=\"https://en.cppreference.com/w/c/atomic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/atomic</a>"}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1570060835, "last_edit_date": 1570060835, "creation_date": 1570059395, "answer_id": 58210601, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order/58210601#58210601", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p>Thats a good question although, I fear you might have a XY problem since I can not imagine a good reason for your problem scenario. Never the less, after 1-2 minutes I came up with 2 solutions with pros and cons, but I think one is perfect for you: </p>\n\n<p>A. When your threads are almost done the same time and or need their print ASAP you could use a shared <code>std::atomic&lt;T&gt;</code> with <code>T=unsigned,int,size_t,uint32_t</code> what ever you like, or any of the integer atomics in the C standard library when using C, initialise it with 0, and now every thread i busy waits until its value is i-1. If so, it prints and then adds 1 on the atomic. Of course since of the busy wait, you will have much CPU load when thread are waiting long, and slow down, when many are waiting. But you get your print ASAP</p>\n\n<p>B. You just store your result of thread i in a container, maybe along with its index, since I guess you want more to just print i, and after all threads are finished or periodically, sort this container and then print it.</p>\n\n<p>A.:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;atomic&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n\nvoid thread_function(unsigned i, std::atomic&lt;unsigned&gt;&amp; atomic) {\n    while (atomic &lt; i - 1) {}\n    std::cout &lt;&lt; i &lt;&lt; \" \";\n    atomic += 1;\n}\n\nint main() {\n    std::atomic&lt;unsigned&gt; atomic = 0;\n\n    std::vector&lt;std::thread&gt; threads;\n    for (auto i : {3,1,2}) {\n        threads.push_back(std::thread(thread_function, i, std::ref(atomic)));\n    }\n    for (auto&amp; t : threads) {\n        t.join();\n    }\n    std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Works also in C, just use the atomics there.</p>\n"}, {"comments": [{"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 0, "creation_date": 1570062348, "post_id": 58210765, "comment_id": 102799108, "body": "Thanks yes, it is what I was looking for, I guess I&#39;ll try the pthread one myself. Nice use of unique_ptr to unlock the mutex ;)"}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 2, "last_activity_date": 1570061209, "last_edit_date": 1570061209, "creation_date": 1570060880, "answer_id": 58210765, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order/58210765#58210765", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p>You can do this with a condition_variable in C++, which is equivalent to a <a href=\"https://linux.die.net/man/3/pthread_cond_init\" rel=\"nofollow noreferrer\">pthread_cond_t</a> with the pthreads library in C.</p>\n\n<p>What you want to share between threads is a pointer to a condition_variable, number, and a mutex to guard access to the number.</p>\n\n<pre><code>struct GlobalData\n{\n    std::condition_variable cv;\n    int currentValue;\n    std::mutex mut;\n};\n</code></pre>\n\n<p>Each thread simply invokes a function that waits for its number to be set:</p>\n\n<pre><code>void WaitForMyNumber(std::shared_ptr&lt;GlobalData&gt; gd, int number)\n{\n    std::unique_lock&lt;std::mutex&gt; lock(gd-&gt;mut);\n    while (gd-&gt;currentValue != number)\n    {\n        gd-&gt;cv.wait(lock);\n    }\n\n    std::cout &lt;&lt; number &lt;&lt; std::endl;\n    gd-&gt;currentValue++;\n    gd-&gt;cv.notify_all(); // notify all other threads that it can wake up and check\n}\n</code></pre>\n\n<p>And then a program to test it all out.  This one uses 10 threads.  You can modify it to use more and then have your own randomization algorithm of the numbers list. </p>\n\n<pre><code>int main()\n{\n    int numbers[10] = { 9, 1, 0, 7, 5, 3, 2, 8, 6, 4 };\n    std::shared_ptr&lt;GlobalData&gt; gd = std::make_shared&lt;GlobalData&gt;();\n    // gd-&gt;number is initialized to 0.\n\n    std::thread threads[10];\n\n    for (int i = 0; i &lt; 10; i++)\n    {\n        int num = numbers[i];\n        auto fn = [gd, num] {WaitForMyNumber(gd, num); };\n        threads[i] = std::move(std::thread(fn));\n    }\n\n    // wait for all the threads to finish\n    for (int i = 0; i &lt; 10; i++)\n    {\n        threads[i].join();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>All of the above is in C++.  But it would be easy to transpose the above solution to C using <a href=\"https://www.cs.cmu.edu/afs/cs/academic/class/15492-f07/www/pthreads.html\" rel=\"nofollow noreferrer\">pthreads</a>.  But I'll leave that as an exercise for the OP.</p>\n\n<p>I'm not sure if this satisfies your \"one semaphore requirement\".  The mutex technically has a semaphore.  Not sure if the condition_variable itself has a semaphore for its implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "is_accepted": false, "score": 0, "last_activity_date": 1570666264, "creation_date": 1570666264, "answer_id": 58313768, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order/58313768#58313768", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p>The following code uses pthread_cond_t and works in C.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define n 100\n\nint counter = 0;\nint used[n];\n\npthread_cond_t cond = PTHREAD_COND_INITIALIZER;\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\nvoid foo(void *given_number){\n    int number = (int)given_number;\n    pthread_mutex_lock(&amp;mutex);\n    while(counter != number){\n        pthread_cond_wait(&amp;cond, &amp;mutex);\n    }\n    printf(\"%d\\n\", number);\n    counter++;\n    pthread_cond_broadcast(&amp;cond);\n    pthread_mutex_unlock(&amp;mutex);\n}\n\nint get_random_number(){\n    while(1){\n        int x = rand()%n;\n        if(!used[x]){\n            used[x] = 1;\n            return x;\n        }\n    }\n}\n\nint main(){\n    pthread_t threads[n];\n    for(int i = 0; i &lt; n; i++){\n        int num = get_random_number();\n        pthread_create(&amp;threads[i], NULL, foo, (void *)num);    \n    }\n    for(int i = 0; i &lt; n; i++){\n        pthread_join(threads[i], NULL);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 58210765, "answer_count": 3, "score": 0, "last_activity_date": 1570666264, "creation_date": 1570058177, "last_edit_date": 1570060342, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p><strong>Problem:</strong> Let's say we have n threads where each thread receives a random unique number between 1 and n. And we want the threads to print the numbers in sorted order.</p>\n\n<p><strong>Trivial Solution (using n semaphore/mutex):</strong> We can use n mutex locks (or similarly semaphores) where thread i waits to acquire mutex lock number i and unlocks number i + 1. Also, thread 1 has no wait.</p>\n\n<p>However, I'm wondering if it's possible to simulate a similar logic <strong>using a single semaphore</strong> (of type sem_t) to implement the following logic: (i is a number between 1 to n inclusive)</p>\n\n<blockquote>\n  <p>Thread with number i as input, waits to acquire a count of (i-1) on the semaphore, and after\n  printing, releases a count of i. Needless to say, thread one does not\n  wait.</p>\n</blockquote>\n\n<p>I know that unlike Java, sem_t does not support arbitrary increase/decrease in the semaphore value. Moreover, writing a for loop to do (i-1) wait and i release won't work because of asynchrony.</p>\n\n<p>I've been looking for the answer for so long but couldn't find any. Is this possible in plain C? If not, is it possible in C++ using only one variable or semaphore? Overall, what is the least wasteful way to do this with ONE semaphore.</p>\n\n<p>Please feel free to edit the question since I'm new to multi-threaded programming.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1570055935, "post_id": 58210181, "comment_id": 102797869, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The code you pasted here has compiler errors because you are missing <code>int main()</code>. Also, what output are you getting? And what should the output be? Follow the steps <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">in this article</a> to debug your code and figure out where the problem is."}, {"owner": {"reputation": 5, "user_id": 12156247, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bE1DVjyw35w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfc0moqDQPEv2rjH-_CziKbmturtQ/photo.jpg?sz=128", "display_name": "Stefano Modenese", "link": "https://stackoverflow.com/users/12156247/stefano-modenese"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570056574, "post_id": 58210181, "comment_id": 102798012, "body": "I\u2019m sorry my bad for the int main part; if I put N=4 it should output 7, N=5 14; for every N (apart from N=1 and N=2) the total ways to go up the stair are the sum of the ways of the fewer steps stair (example; N=4 is 7 different ways, since for N=3 we have 4 ways, for N=2 2 ways  and N=1, 1 way). I\u2019m getting for N=4, 8 and for N=5,11. By using bigger numbers the error grows"}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 2, "last_activity_date": 1570056471, "creation_date": 1570056471, "answer_id": 58210269, "question_id": 58210181, "link": "https://stackoverflow.com/questions/58210181/how-many-ways-to-go-up-a-n-step-stairs/58210269#58210269", "title": "How many ways to go up a N-step stairs?", "body": "<p>The way to approach a problem like this is to step back from your code and describe a solution in English. So let's think through some examples:</p>\n\n<ol>\n<li><p>If the stairs has 1 step, then there's one way to go up: take 1 step</p></li>\n<li><p>If the stairs has 2 steps, then you have two choices:</p>\n\n<ul>\n<li>Go up 1 step and then you have 1 step remaining (refer to case 1)</li>\n<li>Go up 2 steps and then you are finished</li>\n</ul></li>\n<li><p>If the stairs has 3 steps, then you have three choices:</p>\n\n<ul>\n<li>Go up 1 step, and then you have 2 steps remaining (refer to case 2)</li>\n<li>Go up 2 steps, and then you have 1 step remaining (refer to case 1)</li>\n<li>Go up 3 steps, and then you are finished.</li>\n</ul></li>\n<li><p>If the stairs has more than 3 steps, call this number <code>n</code>.</p>\n\n<ul>\n<li>Go up 1 step, and then you have <code>n-1</code> steps remaining. (refer to case 1, 2, 3, or 4, depending on the value of <code>n-1</code>.</li>\n<li>Go up 2 step, and then you have <code>n-2</code> steps remaining. (refer to case 1, 2, 3, or 4, depending on the value of <code>n-2</code>.</li>\n<li>Go up 3 step, and then you have <code>n-2</code> steps remaining. (refer to case 1, 2, 3, or 4, depending on the value of <code>n-3</code>)</li>\n</ul></li>\n</ol>\n\n<p>This description leads us to see a recursive relationship. The number of ways to traverse <code>n</code> steps is the same as the number of ways to traverse <code>n-1</code> steps plus the number of ways to traverse <code>n-2</code> steps the number of ways to traverse <code>n-3</code> steps.</p>\n\n<p>To translate this all into code, I would write a function <code>go_up(n)</code> that implements the rules described above.</p>\n"}, {"comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570119539, "post_id": 58215186, "comment_id": 102821731, "body": "Very likely a formal analysis can prove that this is true for any <code>n</code>."}], "tags": [], "owner": {"reputation": 28, "user_id": 11064426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XB5FI.png?s=128&g=1", "display_name": "Thyme", "link": "https://stackoverflow.com/users/11064426/thyme"}, "is_accepted": true, "score": 1, "last_activity_date": 1570091407, "creation_date": 1570091407, "answer_id": 58215186, "question_id": 58210181, "link": "https://stackoverflow.com/questions/58210181/how-many-ways-to-go-up-a-n-step-stairs/58215186#58215186", "title": "How many ways to go up a N-step stairs?", "body": "<p>The answer by Code-Apprentice is very good, so I want to contribute a different approach:<br></p>\n\n<p>Writing down the solutions for the first few flight of stairs I quickly noticed a pattern. Let's see:</p>\n\n<pre><code>total steps | steps taken   | ways to go up\n------------x---------------x--------------\n1           | 1             | 1\n------------x---------------x--------------\n2           | 2             | 2\n            | 1, 1          |\n------------x---------------x--------------\n3           | 3             | 4\n            | 2, 1          |\n            | 1, 2          |\n            | 1, 1, 1       |\n------------x---------------x--------------\n4           | 4             | 8\n            | 3, 1          |\n            | 2, 2          |\n            | 2, 1, 1       |\n            | 1, 3          |\n            | 1, 2, 1       |\n            | 1, 1, 2       |\n            | 1, 1, 1, 1    |\n</code></pre>\n\n<p>So apparently for a flight of stairs with N-steps, there're 2^(N-1) ways to go up.<br>\nWe don't even need recursion!<br>\nThis solution is a lot quicker to execute and easier to maintain, but since you're trying to understand recursion, Code-Apprentice's answer is the way to go.</p>\n"}], "owner": {"reputation": 5, "user_id": 12156247, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bE1DVjyw35w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfc0moqDQPEv2rjH-_CziKbmturtQ/photo.jpg?sz=128", "display_name": "Stefano Modenese", "link": "https://stackoverflow.com/users/12156247/stefano-modenese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 58215186, "answer_count": 2, "score": -5, "last_activity_date": 1570091407, "creation_date": 1570055747, "last_edit_date": 1570055868, "question_id": 58210181, "link": "https://stackoverflow.com/questions/58210181/how-many-ways-to-go-up-a-n-step-stairs", "title": "How many ways to go up a N-step stairs?", "body": "<p>Hello everyone :) today during class my teacher showed  us an \"exam-like\" program, and I tried to do it at home just to challenge myself. Given a N-steps stair, I can do normal steps (1 step at a time), 2 steps at once and 3 steps at once. How many different ways can I go up a N-step stair? The code returns me wrong output </p>\n\n<pre><code>    int N,sol1,sol2,sol3,somma,i;\n    sol1=0;\n    sol2=1;\n    sol3=2;\n    somma=0;\n    i=0;\n\n\n    printf(\"inserire numero scalini: \");\n    scanf(\"%d\",&amp;N);\n\n    if (N==1) {\n        printf(\"\\nil numero di possibilita' e' %d\",N);\n    }\n\n    else if(N==2) {\n        printf(\"\\nil numero di possibilita' e' %d\",N);\n\n    }else{\n\n\n\n\n    i=3;\n\n    while (i&lt;=N) {\n        somma=sol1+sol2+sol3;\n        sol1=sol2;\n        sol2=sol3;\n        sol1=somma;\n        i++;\n    }\n}\n    printf(\"\\nil numero di modi e' %d\",somma);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 5, "creation_date": 1570054424, "post_id": 58209987, "comment_id": 102797555, "body": "It returns the index found, or -1 if it fails."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1570056218, "post_id": 58209987, "comment_id": 102797936, "body": "<code>int mid = (b + a) &#47; 2;</code> can overflow. Also:the person who wrote this does not seem to know array indexing."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12156214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a9d956b2f44bb2d4e65c02819fc084?s=128&d=identicon&r=PG&f=1", "display_name": "RockEskimo", "link": "https://stackoverflow.com/users/12156214/rockeskimo"}, "edited": false, "score": 0, "creation_date": 1570060362, "post_id": 58210080, "comment_id": 102798730, "body": "thank you for the comments and the link, reading up on it currently"}], "tags": [], "owner": {"reputation": 2977, "user_id": 4272651, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000901707272/picture?type=large", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/4272651/prasanna"}, "is_accepted": false, "score": 1, "last_activity_date": 1570055025, "creation_date": 1570055025, "answer_id": 58210080, "question_id": 58209987, "link": "https://stackoverflow.com/questions/58209987/could-someone-please-explain-this-block-of-code-and-what-exactly-it-does/58210080#58210080", "title": "Could someone please explain this block of code and what exactly it does?", "body": "<p>I suggest you look up the <a href=\"https://en.wikipedia.org/wiki/Binary_search_algorithm\" rel=\"nofollow noreferrer\">binary search algorithm</a> first. Follow the algorithm with the comments in the code below</p>\n\n<pre><code>// arr =&gt; input array (sorted)\n// a =&gt; left index to search from (initially 0)\n// b = right index upto which to search (initially equals to length - 1)\n// key =&gt; the value to find in the array\nint bSearch(int *arr, int a, int b, int key){\n\n    if (b &gt;= a){\n        // if the right index is greater than the left index\n        // there is a chance that the key is between the indexes\n        // search 5 in [1,4,6,7], if a = 0 and b = 3, 5 may be in the array\n\n\n        int mid = (b + a) / 2;\n        // divide your code from the middle, so the key is either in the left or the right side\n        // this is guarenteed as the array is sorted\n\n\n        if (*(arr + mid) == key)\n            return mid;\n        // if the place where we divide from contains the key, we have a match\n\n\n\n        if (*(arr + mid) &gt; key)\n            return bSearch(arr, a, mid - 1, key);\n        // if item in the middle is greater than the key\n        // we only need to search in the left section [a to mid -1] (sorted array)\n\n\n        return bSearch(arr, mid + 1, b, key);\n        // else (if item in the middle is less than the key)\n        // we only need to search in the right section [mid + 1 to b] (sorted array)\n    }\n\n\n    return -1; \n    // if the left index is greater than the right index, the key doesn't exist in the array\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12155537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WvdzbOmxWB4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8om94I4moQ8HZeFEYXkL3BdbcJA/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/12155537/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1570055049, "creation_date": 1570055049, "answer_id": 58210082, "question_id": 58209987, "link": "https://stackoverflow.com/questions/58209987/could-someone-please-explain-this-block-of-code-and-what-exactly-it-does/58210082#58210082", "title": "Could someone please explain this block of code and what exactly it does?", "body": "<p>It is a binary search algorithm.</p>\n\n<blockquote>\n  <p>How come the program has to return to -1?</p>\n</blockquote>\n\n<p>Well, it doesn't have to:</p>\n\n<pre><code>int bSearch(int *arr, int a, int b, int key){\n    if (b &gt;= a){\n        int mid = (b + a) / 2;\n        if (*(arr + mid) == key)\n            // the key was found! return it, this also stops any further recursion\n            return mid;\n        if (*(arr + mid) &gt; key)\n            return bSearch(arr, a, mid - 1, key);\n        return bSearch(arr, mid + 1, b, key);\n    }\n    return -1; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12150115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b2aada04a29132df7800144e53579c?s=128&d=identicon&r=PG&f=1", "display_name": "pacmanSyu", "link": "https://stackoverflow.com/users/12150115/pacmansyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1570057230, "creation_date": 1570057230, "answer_id": 58210356, "question_id": 58209987, "link": "https://stackoverflow.com/questions/58209987/could-someone-please-explain-this-block-of-code-and-what-exactly-it-does/58210356#58210356", "title": "Could someone please explain this block of code and what exactly it does?", "body": "<p>As the other posters said, this is binary search. Most likely, the professor has hardcoded -1 as a \"failure\" value. If -1 is returned, the value is not in the structure.</p>\n\n<p>Read more about binary search here: <a href=\"https://en.wikipedia.org/wiki/Binary_search_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Binary_search_algorithm</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12156214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a9d956b2f44bb2d4e65c02819fc084?s=128&d=identicon&r=PG&f=1", "display_name": "RockEskimo", "link": "https://stackoverflow.com/users/12156214/rockeskimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1570079488, "answer_count": 3, "score": -5, "last_activity_date": 1570057230, "creation_date": 1570054312, "last_edit_date": 1570054613, "question_id": 58209987, "link": "https://stackoverflow.com/questions/58209987/could-someone-please-explain-this-block-of-code-and-what-exactly-it-does", "closed_reason": "Needs more focus", "title": "Could someone please explain this block of code and what exactly it does?", "body": "<p>This is only a part of the original program. We are calling the bSearch to perform a binary search recursively after the array is sorted \nHow come the program has to return to -1?\nCould I get a quick summary on what this block of code does and how it does it please.</p>\n\n<pre><code>int bSearch(int *arr, int a, int b, int key){\n    if (b &gt;= a){\n        int mid = (b + a) / 2;\n        if (*(arr + mid) == key)\n            return mid;\n        if (*(arr + mid) &gt; key)\n            return bSearch(arr, a, mid - 1, key);\n        return bSearch(arr, mid + 1, b, key);\n    }\n    return -1; \n}\n</code></pre>\n\n<p>There should not be any error messages</p>\n"}, {"tags": ["c", "linux", "operating-system", "fork", "system"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12156237, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEVCCsZhikOiiKMmnX5UMOGBgk3G0hmeumh6Wfzw=k-s128", "display_name": "Random Garbage", "link": "https://stackoverflow.com/users/12156237/random-garbage"}, "edited": false, "score": 0, "creation_date": 1570054051, "post_id": 58209819, "comment_id": 102797469, "body": "I don&#39;t seem to understand how you ended up with 3 processes after 2 forks. My professor told me that it always creates 2^n number of processes. Or is that only if you fork right after another fork? If I understand correctly after reading up on it, by forking in the if statement, only pid2 performs the fork(), is this correct?"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "reply_to_user": {"reputation": 9, "user_id": 12156237, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEVCCsZhikOiiKMmnX5UMOGBgk3G0hmeumh6Wfzw=k-s128", "display_name": "Random Garbage", "link": "https://stackoverflow.com/users/12156237/random-garbage"}, "edited": false, "score": 1, "creation_date": 1570058202, "post_id": 58209819, "comment_id": 102798337, "body": "You started with one process. After the first fork you have two. One of them just continues (<code>&#47;&#47;process 3</code>) and the other calls <code>fork()</code> again, so then you have three. Your understanding is correct."}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 1, "last_activity_date": 1570053073, "creation_date": 1570053073, "answer_id": 58209819, "question_id": 58209759, "link": "https://stackoverflow.com/questions/58209759/how-do-i-make-a-skewed-tree-using-fork-in-c/58209819#58209819", "title": "How do I make a skewed tree using fork() in C?", "body": "<p>This seems like the normal use of <code>fork()</code>, basically. Here's some pseudocode:</p>\n\n<pre><code>// start in process 3\nint pid = fork();\nif (pid == 0) {\n   int pid2 = fork();\n   if (pid2 == 0) {\n       // process 1\n   } else {\n       // process 2\n   }\n} else {\n   // process 3\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12156237, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEVCCsZhikOiiKMmnX5UMOGBgk3G0hmeumh6Wfzw=k-s128", "display_name": "Random Garbage", "link": "https://stackoverflow.com/users/12156237/random-garbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58209819, "answer_count": 1, "score": -1, "last_activity_date": 1570053073, "creation_date": 1570052711, "question_id": 58209759, "link": "https://stackoverflow.com/questions/58209759/how-do-i-make-a-skewed-tree-using-fork-in-c", "title": "How do I make a skewed tree using fork() in C?", "body": "<p>I am looking to create a skewed tree with 3 nodes, 2 of which will have 1 child and the last node will be childless. I do not really understand how to proceed with this. </p>\n\n<p><a href=\"https://i.stack.imgur.com/kMkeV.png\" rel=\"nofollow noreferrer\">Example</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1570052527, "post_id": 58209712, "comment_id": 102797111, "body": "Perhaps your compiler doesn&#39;t support designated initializers. What compiler are you using?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1570056859, "post_id": 58209712, "comment_id": 102798077, "body": "C99 introduces designated initializers.  GCC 5 and above defaults to C11; earlier versions to C90.  You should ensure you request at least support for C99."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1570059046, "post_id": 58209712, "comment_id": 102798505, "body": "Your code is perfectly valid C. Microsoft does not make a compiler for the C language. They make a C++ compiler that will compile some C programs, but not those that use some C features that are not in C++, even if those features have been in the language for 20 years or more. Microsoft has stated clearly many times that they have no intention of changing this."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12122816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831c236d33dff69e43e5ba272307e86b?s=128&d=identicon&r=PG&f=1", "display_name": "USCCT", "link": "https://stackoverflow.com/users/12122816/uscct"}, "is_accepted": false, "score": 0, "last_activity_date": 1570057904, "creation_date": 1570057904, "answer_id": 58210425, "question_id": 58209712, "link": "https://stackoverflow.com/questions/58209712/structure-setup-and-intializating-varibles/58210425#58210425", "title": "Structure Setup and intializating varibles", "body": "<p>I am using microsoft visual studio 2017.</p>\n"}], "owner": {"reputation": 21, "user_id": 12122816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831c236d33dff69e43e5ba272307e86b?s=128&d=identicon&r=PG&f=1", "display_name": "USCCT", "link": "https://stackoverflow.com/users/12122816/uscct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570057904, "creation_date": 1570052320, "question_id": 58209712, "link": "https://stackoverflow.com/questions/58209712/structure-setup-and-intializating-varibles", "title": "Structure Setup and intializating varibles", "body": "<p>I have provided the code segment part, setting up the structure. I get \n    the error \"expected an expression\" when I set up the structure. Please \n    see the code segment that I have provided. I have reviewed other code \n    that should work.</p>\n\n<pre><code> Can not compile the program with the program segment below. Not sure how \n to correct it. error in the .size and .char part. This part is just the \n code segment for the structure.\n\n\n #define MAX_SIZE 25  // max name size\n\n typedef struct     // structure for an employee name and height size\n {\n    char name[MAX_SIZE];\n    int size;\n } Employee;\n\n int main(int argc, char ** argv)\n {\n\n  Employee student =        // initializes the structure\n  {\n    .name = { 0 },  // error expected an expression. \n    .size = MAX_SIZE    // error expected an expression.\n  };                    // does not accept the .name and .size                           \n }\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1570051057, "post_id": 58209406, "comment_id": 102796684, "body": "You can pretty safely ignore any compiler warnings telling you to use <code>*_s</code>.  I assume you&#39;re using Visual Studio.  Basically, the <code>_s</code> &quot;safe&quot; functions aren&#39;t in reality any better and come with a performance hit.  They are under &quot;Annex K&quot; of the C standard, which is optional to even be supported, which many compilers don&#39;t bother with.  Furthermore, the Microsoft implementations of those functions don&#39;t even meet the standard set in Annex K, so they aren&#39;t even portable with standard-conforming compilers that do implement those functions."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1570051147, "post_id": 58209406, "comment_id": 102796711, "body": "Well, one amendment I&#39;d make to my previous comment would be to not necessarily <i>ignore</i> the warning outright, but make sure that the way you are using the functions such as <code>strcat</code> are correct."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570051372, "post_id": 58209406, "comment_id": 102796792, "body": "<b>I&#39;m not a C programmer</b>. Now you are :)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570051564, "post_id": 58209406, "comment_id": 102796841, "body": "Fyi, since you &quot;know&quot; <code>net.exe</code> is seven chars wide, the terminator-set and <code>strcat</code> are overkill anyway. You could just as easily <code>strcpy(buffer+len-7, &quot;license.lic&quot;);</code> and be done with it. Just saying."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1570051790, "creation_date": 1570051790, "answer_id": 58209627, "question_id": 58209406, "link": "https://stackoverflow.com/questions/58209406/setting-up-the-name-of-a-file-in-the-executable-directory-in-c/58209627#58209627", "title": "Setting up the name of a file in the executable directory in C", "body": "<p>Your code is reasonably safe. Assuming <code>MAX_PATH</code> is the maximum possible length of a pathname, replacing the executable name with <code>license.lic</code> should fit in that size.</p>\n\n<p>Rather than getting the length of the executable name, you can search for the last directory delimiter character, and copy <code>license.lic</code> after it. C has a built-in function <code>strrchr()</code> for searching a string in reverse.</p>\n\n<pre><code>char *sepptr = strrchr(buffer, '\\\\');\nif (sepptr == NULL) {\n    sepptr = buffer; // no directory delimiter, replace it completely\n} else {\n    sepptr++; // point to just past the delimiter\n}\nstrcpy(sepptr, \"license.lic\"); // Overwrite executable name with license name\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 8803492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431bd1916a00507cc4c519f56625983b?s=128&d=identicon&r=PG&f=1", "display_name": "dacfer", "link": "https://stackoverflow.com/users/8803492/dacfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 58209627, "answer_count": 1, "score": 0, "last_activity_date": 1570051790, "creation_date": 1570050638, "question_id": 58209406, "link": "https://stackoverflow.com/questions/58209406/setting-up-the-name-of-a-file-in-the-executable-directory-in-c", "title": "Setting up the name of a file in the executable directory in C", "body": "<p>I have to create a buffer to hold the the name of a license file which is in the executable directory. This is my solution (I'm not a C programmer):</p>\n\n<pre><code>char buffer[MAX_PATH] = \"\";\nGetModuleFileName(NULL, buffer, MAX_PATH);\nint len = (int) strlen(buffer);\nbuffer[len-7] = '\\0';\nstrcat(buffer,\"license.lic\");\n</code></pre>\n\n<p>Note I know the name of the executable is net.exe - 7 chars, so I'm cheating.</p>\n\n<p>Firstly is this code safe? I got a compiler warning about using strcat saying I should use strcat_s, but I couldn't get that working.</p>\n\n<p>Secondly how do I get the correct length of the executable name?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1570049805, "post_id": 58209225, "comment_id": 102796285, "body": "Define &quot;similar&quot;. :O Your code is very far from standard C."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1570049962, "post_id": 58209225, "comment_id": 102796339, "body": "The keyword <code>struct</code> needs to be followed by either the name of a previously declared structure type, or the specification of the sdtructure. You can&#39;t just declare a variable or function as returning an unknown type of structure."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 2, "creation_date": 1570050020, "post_id": 58209225, "comment_id": 102796358, "body": "If you want to use a struct outside the function its definition must be visible there. Therefore you can&#39;t define it inside the function. You can define a variable of this struct type inside the function and return it, though."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1570050221, "post_id": 58209225, "comment_id": 102796416, "body": "The curly brackets represent scope of visibility of symbols. So you can&#39;t expect something declared in an inner scope (the function) to be visible on the outside."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570051141, "post_id": 58209225, "comment_id": 102796708, "body": "With the struct type defined local within <code>getData</code> what form of magic do you expect to use <i>outside</i> the function to access the members set within? Amore fundamental question: What are you <i>really</i> trying to accomplish? I ask because this seems very much an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>, where you have a problem, decided firmly on a solution, tried the solution, and upon failing, decided the problem is within your solution; not the original problem itself. So.. what are you <i>really</i> trying to accomplish here?"}, {"owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570055448, "post_id": 58209225, "comment_id": 102797757, "body": "@WhozCraig I was originally trying to accomplish creating a function which takes in a file, and then returns two values (not pointers passed in).  The two values were going to be an array of lines from the file, and the count of lines from the file.  I got all of it working in a single main(), but when I tried breaking the logic into functions, I failed.  So you&#39;re probably right that it is an XY problem."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1570051275, "post_id": 58209503, "comment_id": 102796756, "body": "<i>&quot;I don&#39;t believe structs can be passed around that way in C&quot;</i> - you&#39;re wrong. They can be passed around by value without issue. <code>MyStruct getData()</code> is completely viable, and in fact one common technique for returning an array by value from a function (i.e. bury it in a structure type)."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1570051278, "post_id": 58209503, "comment_id": 102796758, "body": "structs can be passed just fine.  Only issue is that if it&#39;s really big then that there could be a lot of data being copied."}, {"owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "edited": false, "score": 0, "creation_date": 1570051590, "post_id": 58209503, "comment_id": 102796851, "body": "Thanks, I had no idea for some reason... can you do that in C++ too? And you can bury an array in a struct and pass it about, too... I wonder if the scope issue is a problem then?"}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1570051731, "post_id": 58209503, "comment_id": 102796892, "body": "You can also bury an array in a struct and assign one of those things to another to get around the lack of array assignment. It fills your code up of long-winded and ugly constructs, but every once in a while it&#39;s worth it. (And given the <i>extreamely</i> long-winded nature of some of the c++ code I&#39;m producing thiese days <code>aryStruct.ary[i]</code> doesn&#39;t seem so bad anymore.)"}], "tags": [], "owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "is_accepted": false, "score": 0, "last_activity_date": 1570051769, "last_edit_date": 1570051769, "creation_date": 1570051089, "answer_id": 58209503, "question_id": 58209225, "link": "https://stackoverflow.com/questions/58209225/why-doesnt-struct-exist-after-declaration-inside-of-function/58209503#58209503", "title": "Why doesn&#39;t struct exist after declaration inside of function?", "body": "<p>I think the more standard way to write what you're after is this, using an independent definition of the struct, and then using a pointer for the function call. As written your code seems to have some scope issues (declaring a struct typedef inside a function, hmmm...) [Incorrect->] plus I don't believe structs can be passed around that way in C, I'm pretty sure you have to use pointers. [Edit oops this is incorrect! See comments]</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef struct {\n    int count1;\n    int count2;\n    } MyStruct;\n\nvoid getData (MyStruct* myDataPtr) {\n    myDataPtr-&gt;count1 = 5;    //note pointer access notation -&gt;\n    myDataPtr-&gt;count2 = 6;\n};\n\nint main(void) {\n    MyStruct myData;\n    MyStruct* sPtr = &amp;myData;  //create pointer to struct, assign to myDaya\n    getData(sPtr);            //pass pointer to function\n    printf(\"count1: %i \\n\", myData.count1);\n    printf(\"count2: %i \\n\", myData.count2);\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>count1: 5\ncount2: 6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4251, "user_id": 2171689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37198fb9e562d45b14f52669c207e08d?s=128&d=identicon&r=PG&f=1", "display_name": "This isn&#39;t my real name", "link": "https://stackoverflow.com/users/2171689/this-isnt-my-real-name"}, "is_accepted": false, "score": 1, "last_activity_date": 1570051450, "creation_date": 1570051450, "answer_id": 58209559, "question_id": 58209225, "link": "https://stackoverflow.com/questions/58209225/why-doesnt-struct-exist-after-declaration-inside-of-function/58209559#58209559", "title": "Why doesn&#39;t struct exist after declaration inside of function?", "body": "<p>Your problem seems to be a confusion regarding the usage of the <code>struct</code> keyword. You don't do <code>struct myData</code> to declare a variable named <code>myData</code> that is of <code>struct</code> type, because there isn't really a <code>struct</code> type. What you do is <code>struct myData &lt;SOMETHING&gt;</code> to define <code>&lt;SOMETHING&gt;</code> as being a new data type named <code>struct myData</code>. You can then say <code>struct myData dat;</code>, thereby declaring that <code>dat</code> is a variable of type <code>struct myData</code>.</p>\n\n<p>You're also demonstrating the same confusion at the top, where you have <code>struct getData(void)</code>... you're attempting to declare <code>getData</code> as a function returning a struct, but you'd really have to do something like <code>struct myData getData(void)</code> to declare a function returning type <code>struct myData</code>.</p>\n"}], "owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570051769, "creation_date": 1570049694, "question_id": 58209225, "link": "https://stackoverflow.com/questions/58209225/why-doesnt-struct-exist-after-declaration-inside-of-function", "title": "Why doesn&#39;t struct exist after declaration inside of function?", "body": "<p>I've tried a lot of simple examples of this and haven't gotten any to work.</p>\n\n<p>My goal is to have a function which declares a struct internally, sets the values of the struct, and then returns the struct.</p>\n\n<pre><code>struct getData(void){\n    typedef struct{\n        int count1;\n        int count2;\n    } MyStruct;\n\n    MyStruct myData;\n\n    myData.count1 = 5;\n    myData.count2 = 6;\n\n    return myData;\n};\n\nint main(void) {\n    struct myData = getData()\n\n    printf(\"count1: %i\", myData.count1);\n    printf(\"count2: %i\", myData.count2);\n}\n</code></pre>\n\n<p>Every example I've found does something similar to this, but for some reason it's not finding my struct called MyStruct.  Exact error is: </p>\n\n<pre><code>error: expected identifier or \u2018(\u2019 before \u2018void\u2019\n struct getData(void){\n                ^~~~\n</code></pre>\n\n<p>The error I keep getting makes me think it doesn't like the struct inside the function.</p>\n"}, {"tags": ["c", "gzip", "tar", "rtems"], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 2229658, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N0fPQ.png?s=128&g=1", "display_name": "Christian Mauderer", "link": "https://stackoverflow.com/users/2229658/christian-mauderer"}, "is_accepted": true, "score": 1, "last_activity_date": 1570093197, "creation_date": 1570093197, "answer_id": 58215671, "question_id": 58209219, "link": "https://stackoverflow.com/questions/58209219/decompressing-tar-gz-in-rtems-operating-system/58215671#58215671", "title": "decompressing tar.gz in rtems operating system", "body": "<p>There are some integrated functions that can extract tgz files in RTEMS. Take a look at the tar01 test for some examples with different sources (memory or file): <a href=\"https://git.rtems.org/rtems/tree/testsuites/libtests/tar01/init.c?id=8d989c56ff0c65beb7ec3390aebef6ea52840fab\" rel=\"nofollow noreferrer\">https://git.rtems.org/rtems/tree/testsuites/libtests/tar01/init.c?id=8d989c56ff0c65beb7ec3390aebef6ea52840fab</a>\nNote that this is a test application intended to test the functionality. So some things might try to trigger expected failures. The test tar file is automatically generated by the Makefile, translated into some object file and linked into the application.</p>\n\n<p>There is also the tarfs that can use a tar (not sure about tgz) as a read only file system. It's used in tar02 test.</p>\n\n<p>Regarding libz: Although I haven't tried I would expect that it is possible to compile libz for RTEMS. If you need specifically that library you might want to ask on the RTEMS users mailing list whether someone already did that. There are a lot more RTEMS specific users and developers than on stackoverflow.</p>\n"}], "owner": {"reputation": 135, "user_id": 8413985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75be6ae3a29042b9b5cd5827235b1bf2?s=128&d=identicon&r=PG&f=1", "display_name": "avan989", "link": "https://stackoverflow.com/users/8413985/avan989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 58215671, "answer_count": 1, "score": 0, "last_activity_date": 1570093197, "creation_date": 1570049666, "question_id": 58209219, "link": "https://stackoverflow.com/questions/58209219/decompressing-tar-gz-in-rtems-operating-system", "title": "decompressing tar.gz in rtems operating system", "body": "<p>I was wondering if there was a specific set of library that can decompress tar.gz files in an rtems operating system. Most of the answer I seen is for linux. I was looking at gzip and libz but was not sure if these were for linux or can I use them for rtems as well.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 213, "user_id": 5483401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e241a0c8e79e6ea96728029ed9fc0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Anonymous", "link": "https://stackoverflow.com/users/5483401/anonymous-anonymous"}, "edited": false, "score": 1, "creation_date": 1570054463, "post_id": 58208718, "comment_id": 102797565, "body": "Something out of context: You should not call <code>main()</code> explicitely in your code. It is even illegal in the C++-Standard and for various good reasons!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1570058191, "post_id": 58208718, "comment_id": 102798333, "body": "regarding: <code>scanf(&quot;%s&quot;, &amp;check1);</code>  1) the variable <code>check1</code> is declared as a single character.  However, the input format specifier: <code>%s</code> is expecting a pointer to a character array and will always append a NUL byte to the input.  Suggest using: <code>%c</code> as that is expecting a single character.  2) When calling any of the <code>scanf()</code> family of functions, always check the returned value to assure the operation was successful.    Note: for the current statement, any returned value other than 1 indicates an error occurred."}, {"owner": {"reputation": 45, "user_id": 11819685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W98wd.jpg?s=128&g=1", "display_name": "etermentales", "link": "https://stackoverflow.com/users/11819685/etermentales"}, "reply_to_user": {"reputation": 213, "user_id": 5483401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e241a0c8e79e6ea96728029ed9fc0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Anonymous", "link": "https://stackoverflow.com/users/5483401/anonymous-anonymous"}, "edited": false, "score": 0, "creation_date": 1570066040, "post_id": 58208718, "comment_id": 102799753, "body": "Could you tell me other way to do something similar instead of calling <code>main()</code>? @AnonymousAnonymous"}, {"owner": {"reputation": 213, "user_id": 5483401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e241a0c8e79e6ea96728029ed9fc0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Anonymous", "link": "https://stackoverflow.com/users/5483401/anonymous-anonymous"}, "edited": false, "score": 0, "creation_date": 1570138432, "post_id": 58208718, "comment_id": 102829316, "body": "@Kau&#227;J&#250;niodaSilvaLima A common approach would be to wrap all of your code in a <code>while(true)</code> loop and to <code>break</code> out, or <code>continue</code> if necessary."}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 3, "last_activity_date": 1570047643, "last_edit_date": 1570047643, "creation_date": 1570047254, "answer_id": 58208760, "question_id": 58208718, "link": "https://stackoverflow.com/questions/58208718/whats-wrong-with-that-if-else-structure/58208760#58208760", "title": "What&#39;s wrong with that if-else structure?", "body": "<p>In</p>\n\n<pre><code>scanf(\"%s\", &amp;check1);\n</code></pre>\n\n<p>you can not use the string format specifier (<code>\"%s\"</code>) to scan a <code>char</code>, switch to</p>\n\n<pre><code>scanf(\"%c\", &amp;check1);\n</code></pre>\n\n<p>or better yet</p>\n\n<pre><code>scanf(\" %c\", &amp;check1); // The leading whitespace will consume the previous newline\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11819685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W98wd.jpg?s=128&g=1", "display_name": "etermentales", "link": "https://stackoverflow.com/users/11819685/etermentales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58208760, "answer_count": 1, "score": 3, "last_activity_date": 1570049083, "creation_date": 1570047021, "last_edit_date": 1570049082, "question_id": 58208718, "link": "https://stackoverflow.com/questions/58208718/whats-wrong-with-that-if-else-structure", "title": "What&#39;s wrong with that if-else structure?", "body": "<p>So, I'm a beginner programmer and I'm trying to do an exercise where i have to create a program that catches the price and the source code of a product, and through the source code the program will show from where the product came from. So here's the list of the source codes:</p>\n\n<ul>\n<li>1 = South </li>\n<li>2 = North</li>\n<li>3 = East</li>\n<li>4 = West</li>\n<li>5~6 = Northeast</li>\n<li>7~9 = Southeast</li>\n<li>10~20 = Midwest</li>\n<li>25~30 = Northeast</li>\n</ul>\n\n<p>If the source code inserted by the user don't match with any of this list, there will be a message saying that the code inserted has no correspondent in the list. So, I did the exercise and there's the final code:</p>\n\n<pre><code>int main() {\n    float price;\n    int code;\n    char check1, check2;\n\n    printf(\"Hello there! Insert the price of your product: \");\n    scanf(\"%f\", &amp;price);\n    printf(\"\\nAlright, now enter the source code of the product: \");\n    scanf(\"%d\", &amp;code);\n\n    switch(code) {\n    case 1:\n        printf(\"Your product came from the South\");\n        break;\n\n    case 2:\n        printf(\"Your product came from the North\");\n        break;\n\n    case 3:\n        printf(\"Your product came from the East\");\n        break;\n\n    case 4:\n        printf(\"Your product came from the West\");\n        break;\n\n    default:\n        if(code == 5 || code == 6 || (code &gt;= 25 &amp;&amp; code &lt;= 30)) {\n            printf(\"Your product came from the Northeast\");\n        } else {\n            if(code &gt;= 7 &amp;&amp; code &lt;= 9) {\n                printf(\"Your product came from the Southeast\");\n            } else {\n                if(code &gt;= 10 &amp;&amp; code &lt;= 20) {\n                    printf(\"Your product came from the Midwest\");\n                } else {\n                    printf(\"Sorry, this code doesn't match with any correspondence\");\n                    return 0;\n                }\n            }\n        }\n        break;\n    }\n\n    printf(\" and it costs %0.2f\\n\", price);\n}\n</code></pre>\n\n<p>But I also wanted to do an if-else structure before the program checks if there is any correspondence to give the user the opportunity of correcting something that he inserted wrong or something like that. So I did this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    float price;\n    int code;\n    char check1, check2;\n\n    printf(\"Hello there! Insert the price of your product: \");\n    scanf(\"%f\", &amp;price);\n    printf(\"\\nAlright, now enter the source code of the product: \");\n    scanf(\"%d\", &amp;code);\n\n    printf(\n        \"So, the price is %0.2f and the code is %d, right? Press c to continue, r \"\n        \"to reset and any other key to quit: \\n\",\n        price, code);\n    scanf(\"%s\", &amp;check1);\n\n    if(check1 == 'c') {\n        printf(\"Let's continue then!\\n\");\n    } else {\n        if(check1 == 'r') {\n            printf(\"\\n\");\n            main();\n        } else {\n            return 0;\n        }\n    }\n\n    switch(code) {\n    case 1:\n        printf(\"Your product came from the South\");\n        break;\n\n    case 2:\n        printf(\"Your product came from the North\");\n        break;\n\n    case 3:\n        printf(\"Your product came from the East\");\n        break;\n\n    case 4:\n        printf(\"Your product came from the West\");\n        break;\n\n    default:\n        if(code == 5 || code == 6 || (code &gt;= 25 &amp;&amp; code &lt;= 30)) {\n            printf(\"Your product came from the Northeast\");\n        } else {\n            if(code &gt;= 7 &amp;&amp; code &lt;= 9) {\n                printf(\"Your product came from the Southeast\");\n            } else {\n                if(code &gt;= 10 &amp;&amp; code &lt;= 20) {\n                    printf(\"Your product came from the Midwest\");\n                } else {\n                    printf(\"Sorry, this code doesn't match with any correspondence\");\n                    return 0;\n                }\n            }\n        }\n        break;\n    }\n\n    printf(\" and it costs %0.2f\\n\", price);\n}\n</code></pre>\n\n<p>The problem is: with this code, the output is always \"Sorry, this code doesn't match with any correspondence\", no matter what are the input values. Why does it happen? How can I fix it?</p>\n\n<p>(Also, sorry 4 the bad English, I'm still learning)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1, "user_id": 12155895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702882ab229751ab1d3d69c538386447?s=128&d=identicon&r=PG&f=1", "display_name": "asgard", "link": "https://stackoverflow.com/users/12155895/asgard"}, "edited": false, "score": 0, "creation_date": 1570046890, "post_id": 58208674, "comment_id": 102795267, "body": "Input 1, 2, 4, 8, 0, 2, 5, 15 Output 1 2 4 8 0"}], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "is_accepted": false, "score": 0, "last_activity_date": 1570047919, "last_edit_date": 1570047919, "creation_date": 1570047606, "answer_id": 58208848, "question_id": 58208674, "link": "https://stackoverflow.com/questions/58208674/in-the-array-a-of-size-n-of-integers-find-the-longest-subsequence-of-numbe/58208848#58208848", "title": "In the array &quot; a &quot; of size \u2018n\u2019 of integers find the longest subsequence of numbers such that each", "body": "<p>If an integer <code>a</code> is divisible by another integer <code>b</code>, their modulo is 0. That is <code>a % b == 0</code>.</p>\n\n<p>So given a sequence:</p>\n\n<pre><code>int longest_sequence(unsigned int* seq, unsigned int length) {\n  // Check non-NULL pointer, etc.\n\n  for (unsigned int i = 1; i &lt; length; ++i) {\n    if (seq[i] == 0 || seq[i] % seq[i-1] != 0) { // Not divisible by previous\n      return i; // Return length\n    }\n  }\n  return length; // all the sequence matches\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12155895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702882ab229751ab1d3d69c538386447?s=128&d=identicon&r=PG&f=1", "display_name": "asgard", "link": "https://stackoverflow.com/users/12155895/asgard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1570047919, "creation_date": 1570046840, "question_id": 58208674, "link": "https://stackoverflow.com/questions/58208674/in-the-array-a-of-size-n-of-integers-find-the-longest-subsequence-of-numbe", "title": "In the array &quot; a &quot; of size \u2018n\u2019 of integers find the longest subsequence of numbers such that each", "body": "<p>In the array \" a \" of size \u2018n\u2019 of integers find the longest subsequence of numbers such that each successive element of the subsequence would be divided completely by the previous one. C</p>\n"}, {"tags": ["c", "microcontroller", "pic", "xc16"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1570054443, "post_id": 58208283, "comment_id": 102797559, "body": "<code>in case of PIC microcontrollers time(NULL) should return the number of instruction cycles</code> where did you find such information? Most probably <code>time(NULL)</code> is not implemented on your platform and it&#39;s just <code>time_t time(..) { return 0; }</code> Inspect with your debugger ans see it there&#39;s anything inside <code>time()</code> function."}, {"owner": {"reputation": 29, "user_id": 3554370, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7uvXd.jpg?s=128&g=1", "display_name": "Dave12311", "link": "https://stackoverflow.com/users/3554370/dave12311"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570055752, "post_id": 58208283, "comment_id": 102797826, "body": "@KamilCuk It&#39;s from the documentation of the compiler I&#39;m using (XC16) <code>Returns the calendar time encoded as a value of time_t. If the target environment cannot determine the time, the function returns -1 cast as a time_t. By default, the 16-bit compiler returns the time as instruction cycles.</code> So worst case I should be getting -1, but I only get 0 when it doesn&#39;t work or the actual time if it works."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570056554, "post_id": 58208283, "comment_id": 102798009, "body": "The example is rather strange. <code>time(0); &#47;* start time *&#47;</code>. Maybe try running the example in the docs and see if it prints correctly? Also they use <code>time(&amp;var)</code> not the return value in the example, try that?"}, {"owner": {"reputation": 29, "user_id": 3554370, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7uvXd.jpg?s=128&g=1", "display_name": "Dave12311", "link": "https://stackoverflow.com/users/3554370/dave12311"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570057088, "post_id": 58208283, "comment_id": 102798127, "body": "@KamilCuk I tried the code from the example, and it&#39;s returning 0 too..."}], "answers": [{"tags": [], "owner": {"reputation": 291, "user_id": 10038206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a163c49db039b5a7c35b81f00e524e?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/10038206/topher"}, "is_accepted": false, "score": 0, "last_activity_date": 1570050906, "creation_date": 1570050906, "answer_id": 58209456, "question_id": 58208283, "link": "https://stackoverflow.com/questions/58208283/timenull-returns-0-on-pic-iot-wg-development-board/58209456#58209456", "title": "time(NULL) returns 0 on PIC-IoT WG development board", "body": "<p>In general, time(NULL) from time.h returns a time_t and represents the number of seconds since the epoch (1970 Jan 1 00:00:00).  Putting the output of time() into a uint32 could be causing issues on your \"servers\".  Change it to a time_t and see if it fixes the issue.</p>\n"}], "owner": {"reputation": 29, "user_id": 3554370, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7uvXd.jpg?s=128&g=1", "display_name": "Dave12311", "link": "https://stackoverflow.com/users/3554370/dave12311"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570057213, "creation_date": 1570045001, "last_edit_date": 1570057213, "question_id": 58208283, "link": "https://stackoverflow.com/questions/58208283/timenull-returns-0-on-pic-iot-wg-development-board", "title": "time(NULL) returns 0 on PIC-IoT WG development board", "body": "<p>I'm working on a project with the PIC-IoT WG wifi development board. I'm trying to modify the demo code to be able to use it on my own servers. The demo uses code like this in several places:</p>\n\n<pre><code>#include &lt;time.h&gt;\nstatic void connectMQTT()\n{\n   uint32_t currentTime = time(NULL);\n\n   if (currentTime &gt; 0)\n   {\n      updateJWT(currentTime + UNIX_OFFSET);   \n      MQTT_CLIENT_connect();\n   }      \n   debug_print(\"CLOUD: MQTT Connect\");\n\n   sendSubscribe = true;\n}\n</code></pre>\n\n<p>and every time I turn it on, for 15-20 minutes it tries connecting to the server, but these parts of the code don't run, as <code>time(NULL)</code> seems to return 0.</p>\n\n<p>As far as I understand, in case of PIC microcontrollers time(NULL) should return the number of instruction cycles.</p>\n\n<p>Why does it return 0? Why does it stop returning 0?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1570044226, "post_id": 58207908, "comment_id": 102794058, "body": "The specification \u201cThe problem mostly restricts you to Bit shifts\u201d is not proper. We need to know the <b>full</b> statement of the problem, not <b>mostly</b> what it says."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1570044531, "post_id": 58207908, "comment_id": 102794217, "body": "It&#39;s also unclear when you say &quot;you must be able to <b>compare</b> the original number to ... and the use of ... <b>comparisons</b> is not allowed.&quot;"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1570044818, "post_id": 58207908, "comment_id": 102794332, "body": "Given a number of bits, <code>n</code>, it is not difficult to work out an upper limit on the number of distinct values an <code>n</code>-bit integer can represent.   Then you can check if the value is less than or equal to <code>n</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570047033, "post_id": 58207908, "comment_id": 102795329, "body": "@WeatherVane: That part is clear. The task is to produce an <code>int</code> <code>x</code> such that <code>x == t</code> evaluates to true if and only if the <code>int</code> <code>t</code> is representable in an <code>n</code>-bit two\u2019s complement integer. No comparison may be used in producing <code>x</code>. The comparison in <code>x == t</code> is outside the task of producing <code>x</code> and is irrelevant."}, {"owner": {"reputation": 15, "user_id": 5410658, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153178859842045/picture?type=large", "display_name": "BenJamin MacNeil", "link": "https://stackoverflow.com/users/5410658/benjamin-macneil"}, "edited": false, "score": 0, "creation_date": 1570054424, "post_id": 58207908, "comment_id": 102797554, "body": "Added the specifically restricted operations"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570044803, "post_id": 58208223, "comment_id": 102794327, "body": "The question says &quot;signed integer&quot;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570044924, "post_id": 58208223, "comment_id": 102794384, "body": "I commented before you added the last paragraph. But this isn&#39;t an answer, because it says you don&#39;t know what to do."}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570045029, "post_id": 58208223, "comment_id": 102794423, "body": "Interesting.  What is your interpretation of the question?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570045051, "post_id": 58208223, "comment_id": 102794435, "body": "That&#39;s what we are waiting for, the proper question."}], "tags": [], "owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "is_accepted": false, "score": -3, "last_activity_date": 1570383044, "last_edit_date": 1570383044, "creation_date": 1570044741, "answer_id": 58208223, "question_id": 58207908, "link": "https://stackoverflow.com/questions/58207908/testing-if-a-integer-can-be-expressed-as-a-n-bit-signed-integer/58208223#58208223", "title": "Testing if a Integer can be expressed as a n bit Signed integer", "body": "<p>So take 3 as your number of bits: 0b1000.  Subtract 1.  That yields the pattern: 0b0111.   </p>\n\n<p>Now test 5: 0b101.  0b111 xor 0b101 yields 0b010.  negate the result: 0b101.  if that result matches the number you are testing so the answer is yes.</p>\n\n<p>Now test 9: 0b1001.  0b0111 xor 0b1001 yields 0b1110.  That does not match, so the answer is no.</p>\n\n<p>So I think the answer is along that line.  Do some bit operations to turn your question into a equality compare form, and yield you a result.</p>\n"}], "owner": {"reputation": 15, "user_id": 5410658, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153178859842045/picture?type=large", "display_name": "BenJamin MacNeil", "link": "https://stackoverflow.com/users/5410658/benjamin-macneil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570383044, "creation_date": 1570043301, "last_edit_date": 1570101192, "question_id": 58207908, "link": "https://stackoverflow.com/questions/58207908/testing-if-a-integer-can-be-expressed-as-a-n-bit-signed-integer", "title": "Testing if a Integer can be expressed as a n bit Signed integer", "body": "<p>I've been stuck on a C coding puzzle involving bitwise manipulations.</p>\n\n<p>The goal is to take an int, and a number of bits n\nAnd then return if that int can be expressed as a n-bit 2s compliment.</p>\n\n<p>The restrictions are that you must be able to compare the original number to a manipulated number and the use of addition, subtraction, multiplication, division, and comparisons is not allowed</p>\n\n<p>Id rather not a code solution, but ideas and maybe some nudges.\nThe puzzle mostly restricts you to Bitwise operations as division, modulus, multiplication; as well as well as (&lt;, >, &lt;=, >=) are not allowed</p>\n\n<p>for Example\nwe are given the int 8, and n-5\nsome transformation must be made to a variable x such that (x == 8) will return true if 8 can be expressed as a 5 bit 2s compliment integer</p>\n\n<p>I'm looking more for understanding than a solution.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1570043543, "post_id": 58207906, "comment_id": 102793801, "body": "<a href=\"http://scottmcpeak.com/autodepend/autodepend.html\" rel=\"nofollow noreferrer\">scottmcpeak.com/autodepend/autodepend.html</a>"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1570043666, "post_id": 58207906, "comment_id": 102793847, "body": "That link describes a somewhat outdated method.  Try <a href=\"http://make.mad-scientist.net/papers/advanced-auto-dependency-generation/\" rel=\"nofollow noreferrer\">make.mad-scientist.net/papers/&hellip;</a>"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1570043853, "post_id": 58207906, "comment_id": 102793914, "body": "You say <i>timer.h is included, but directly in the Makefile</i> but I don&#39;t see any reference to <code>timer.h</code> in your makefile.  You don&#39;t have to change linker scripts due to headers, at least not typically.  As for adding a header as a prerequisite so that make will rebuild your code when it changes, you can just add <code>main.o: timer.h</code> to tell make that the <code>main.o</code> file depends on <code>timer.h</code>.  The links in the comments above will show you (more complex) ways to have make itself track prerequisites if you don&#39;t want to add them to the makefile by hand."}, {"owner": {"reputation": 69, "user_id": 11042379, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DntHDRnAr9w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPgMaunEP3VIdG8_-I5GHjJ2VDiTQ/mo/photo.jpg?sz=128", "display_name": "C. K.", "link": "https://stackoverflow.com/users/11042379/c-k"}, "edited": false, "score": 0, "creation_date": 1570044233, "post_id": 58207906, "comment_id": 102794062, "body": "I&#39;m seriously inexperienced on dealing with linker scripts, makefiles, object files etc. I only did it with IDEs, but I know that it is included. Maybe this happens in the linker script or with the <code>timer.o</code> object file? I appreciate the link, I&#39;m reading up on it! Btw, initially there was no header file, only <code>.c</code> file. So no, the header file isn&#39;t really included, but the <code>.c</code> file is."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1570050211, "post_id": 58207906, "comment_id": 102796414, "body": "You put a dependency in the makefile describing which module depends on what header like this: <code>main.o: timer.h</code> Please read a make tutorial."}], "owner": {"reputation": 69, "user_id": 11042379, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DntHDRnAr9w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPgMaunEP3VIdG8_-I5GHjJ2VDiTQ/mo/photo.jpg?sz=128", "display_name": "C. K.", "link": "https://stackoverflow.com/users/11042379/c-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570043704, "creation_date": 1570043294, "last_edit_date": 1570043704, "question_id": 58207906, "link": "https://stackoverflow.com/questions/58207906/how-to-include-h-with-makefile-in-linux", "title": "How to include .h with makefile in linux?", "body": "<p>I am writing software for ARM microcontrollers in C using linux and I'm not using an IDE. The reason for this is to learn how really low level stuff works. Now I want to include a <code>.h</code> file that has a corresponding <code>.c</code> file, in my <code>main.c</code> program the \"usual way\" by writing <code>#include \"timer.h\"</code>. This of course requires me to somehow change the Makefile and or linkerscript!? </p>\n\n<p>How can I do this?</p>\n\n<p>Right now the file <code>timer.h</code> is included, but directly in the Makefile like this:</p>\n\n<pre><code>LD=arm-none-eabi-gcc\nOBJCOPY=arm-none-eabi-objcopy\n\nCFLAGS=-mcpu=cortex-m3 -mthumb -g -std=c99 -Wall\nLDFLAGS=-mcpu=cortex-m3 -mthumb -g -lgcc -lc -lcs3 -lcs3unhosted -lefm32gg -Llib\nASFLAGS=-mcpu=cortex-m3 -mthumb -g\nLINKERSCRIPT=lib/efm32gg.ld\n\npolling.bin : polling.elf\n    ${OBJCOPY} -O binary $&lt; $@\n\npolling.elf : polling.o timer.o dac.o gpio.o interrupt_handlers.o\n    ${LD} -T ${LINKERSCRIPT} $^ -o $@ ${LDFLAGS} \n\n%.o : %.c\n    ${CC} ${CFLAGS} -c $&lt; -o $@\n\n.PHONY : pretty\npretty :\n    -indent *.c *.h\n\n.PHONY : upload\nupload :\n    -eACommander.sh -r --address 0x00000000 -f \"polling.bin\" -r\n\n.PHONY : clean\nclean :\n    -rm -rf *.o *.elf *.bin *.hex \n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1570043148, "post_id": 58207815, "comment_id": 102793649, "body": "@DavidRanieri It&#39;s not a VLA if it&#39;s a function parameter."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570043362, "post_id": 58207815, "comment_id": 102793736, "body": "@Barmar well, it&#39;s a VLA used as function parameter, but it&#39;s a VLA, isn&#39;t it?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1570043429, "post_id": 58207815, "comment_id": 102793758, "body": "@DavidRanieri No, it&#39;s just equivalent to <code>int *a</code>. The size is ignored."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570043957, "post_id": 58207815, "comment_id": 102793956, "body": "@Barmar you are right!"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1570047706, "post_id": 58207969, "comment_id": 102795556, "body": "You&#39;re right. I had the parameters in the wrong order."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1570047676, "last_edit_date": 1570047676, "creation_date": 1570043563, "answer_id": 58207969, "question_id": 58207815, "link": "https://stackoverflow.com/questions/58207815/indexed-array-function-argument-in-c/58207969#58207969", "title": "&quot;Indexed&quot; array function argument in C", "body": "<p>It's the array size, but it's ignored when it's in a function parameter declaration. A function parameter of the form <code>int a[size]</code> or <code>int a[]</code> is treated identically to <code>int *a</code>, because arrays decay to pointers when used as function arguments.</p>\n\n<p>So it's essentially just a form of self-documentation. The caller is supposed to pass an array that contains <code>size</code> elements.</p>\n\n<p>Note that this only applies to the first dimension in a multidimensional array parameter. If you have something like</p>\n\n<pre><code>void func(int width, int height, int a[height][width]) { ... }\n</code></pre>\n\n<p>The <code>width</code> part of the array declaration is used, but the <code>height</code> is ignored. <code>a</code> is a pointer to an array of <code>int[width]</code> rows; the width is needed when indexing the first dimension.</p>\n"}], "owner": {"reputation": 35, "user_id": 12108313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ada0c24a14145d51dc281531b96e104?s=128&d=identicon&r=PG&f=1", "display_name": "forty_tw0", "link": "https://stackoverflow.com/users/12108313/forty-tw0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 58207969, "answer_count": 1, "score": 2, "last_activity_date": 1570047676, "creation_date": 1570042903, "question_id": 58207815, "link": "https://stackoverflow.com/questions/58207815/indexed-array-function-argument-in-c", "title": "&quot;Indexed&quot; array function argument in C", "body": "<p>I recently saw a function written in the following form <code>void func(int size, int a[size]){ ... }</code> and I was curious about the argument <code>a[size]</code>. At first I thought maybe it had something to do with indexing the array, but running the code <code>a</code> was in fact an array. Then I thought maybe it had to do with the size of the array, so I tried passing in different value and seeing if it would affect the array length, but it seemed not to (unless maybe it had something to do with writing past the array, but this feels unlikely). So my question is essentially, what does the \"index\" do in the function arguments?</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570042324, "post_id": 58207647, "comment_id": 102793250, "body": "So .. what is &quot;su-number&quot; ?"}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570042434, "post_id": 58207647, "comment_id": 102793306, "body": "Oh sorry, su-number = superunusual number."}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570042476, "post_id": 58207647, "comment_id": 102793329, "body": "This is a number that remains an unusual number (see wikipedia), even with the deletion of one of the digits."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570042606, "post_id": 58207647, "comment_id": 102793397, "body": "Anyway, you already have a predicate to test the number. So the naive algorithm would be to to iterate over all of the numbers and count the &quot;su&quot; ones until reaching the given count. Easy, no?"}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570043094, "post_id": 58207647, "comment_id": 102793622, "body": "Yes indeed. I also know that it only lacks that part, but I can&#39;t figure out how to do this..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570043212, "post_id": 58207647, "comment_id": 102793682, "body": "Something like <code>while (counter &lt; m) { if (is_super_unusual(n++)) counter++; }</code>. Of course with proper initialization. Maybe off-by-one somewhere."}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1570044738, "post_id": 58207647, "comment_id": 102794306, "body": "Very helpful code, it works for the input 1, 2 and 3, but for 4 it gives the wrong output and for 5 it keeps running... I now for sure that the functions are correct tho... It&#39;s the main part where it&#39;s going wrong..."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1570084189, "post_id": 58209016, "comment_id": 102803441, "body": "Thanks! Now it works a lot better. Only thing is that it now gives the unusual numbers and I need the super-unusual numbers (so, when 1 digit gets deleted, it still remains unusual)"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1570084818, "post_id": 58209016, "comment_id": 102803664, "body": "Er, no, it doesn&#39;t? <a href=\"https://ideone.com/GZyXlV\" rel=\"nofollow noreferrer\">This code</a> prints the first five, the 50th and the 500th superunusual number as 22, 23, 26, 33, 35, 213 and 1643. I&#39;ve changed the code a bit, but have left the overall structure intact. Perhaps there are still errors, but clearly these are su, nut just unusual numbers, no?"}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1570085231, "post_id": 58209016, "comment_id": 102803815, "body": "Oops! I didn&#39;t test the program with a new compiled file! Stupid..."}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1570085470, "post_id": 58209016, "comment_id": 102803913, "body": "It only doesn&#39;t work for 100, it should give 389 but gives 283. But I&#39;ll figure that out! Thanks for the help though!"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1570087114, "post_id": 58209016, "comment_id": 102804667, "body": "I guess you get some false positives, because you don&#39;t check the removal of all digits? (In your original code, <code>i</code> goes from 1 to <code>d</code>. The code I posted gives 387 as 100th su-number. Still wrong, but closer.)"}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1570087979, "post_id": 58209016, "comment_id": 102805105, "body": "Oh! You meant the code behind the &quot;This code&quot;-link. Well that helps a lot more :)"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 1, "creation_date": 1570104557, "post_id": 58209016, "comment_id": 102813465, "body": "Have you found the error? Your digit removal code has problems with numbers that end in zeros. <a href=\"https://ideone.com/ZeoR6A\" rel=\"nofollow noreferrer\">Here&#39;s</a> a fixed version. And, for good measure, <a href=\"https://ideone.com/flgbpE\" rel=\"nofollow noreferrer\">here</a> is another variant that uses a sieve of Erathostenes and another approach to digit removal. Both give the 100th su number as 389. Have fun!"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 1, "last_activity_date": 1570048565, "creation_date": 1570048565, "answer_id": 58209016, "question_id": 58207647, "link": "https://stackoverflow.com/questions/58207647/how-to-find-the-nth-number/58209016#58209016", "title": "How to find the nth number?", "body": "<p>You have a function to determine whether a number is unusual, but you do the check whether a number is super-unusual in the body of the <code>main</code> routine. If you extract that code into a proper function:</p>\n\n<pre><code>int is_superunusual(int m)\n{\n    int d = log10(m) + 1;\n\n    if (unus(m) == 0) return 0;\n\n    for(int i = 0; i &lt; d; i++) {             // see footnote\n        int nmin = del(m, i);\n\n        if (unus(nmin) == 0) return 0;\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>then you can use Eugene's code:</p>\n\n<pre><code>while (counter &lt; n) { \n    if (is_superunusual(m++)) { \n        counter++;\n    } \n}\n\nprintf(\"The su number #%d is %d\\n\", n, m - 1);\n</code></pre>\n\n<p>Your code tested for unusual numbers, not super-unusual numbers.</p>\n\n<p>Footnote: If you take <code>del(num, n)</code> to mean \"remove the nth digit from the end\", you can do away with the log10 call in <code>del</code>. You must check all deletions anyway, so the order doesn't really matter here.</p>\n"}], "owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 58209016, "answer_count": 1, "score": 1, "last_activity_date": 1570048565, "creation_date": 1570042194, "last_edit_date": 1570044841, "question_id": 58207647, "link": "https://stackoverflow.com/questions/58207647/how-to-find-the-nth-number", "title": "How to find the nth number?", "body": "<p>For an assignment, I have to write code which accepts as input an integer n and outputs the nth 'superunusual' number.</p>\n\n<p>The first few su-numbers are: 22, 23, 26, 33, ... So when the input is 1, the output should be 22. 2 gives 23 and 3 gives 26.</p>\n\n<p>I already have a code that checks if the input number is a su-number, but I can't find a way to calculate the nth number.</p>\n\n<p>So when I now input 22, it says that 22 is a superunusual number.</p>\n\n<p>The code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* calculates largest prime factor                  */\nint lprime(int n) {  \n    int max = -1;  \n\n    while (n % 2 == 0) {  \n        max = 2;  \n        n /= 2;  \n    }\n\n    for (int i = 3; i*i &lt;= n; i += 2) {  \n        while (n % i == 0) {  \n            max = i;  \n            n = n / i;  \n        } \n    } \n\n    if (n &gt; 2) { \n        max = n;  \n    }\n    return max;  \n}  \n\n/* check unusual number */ \nint unus(int n) {  \n    /* find largest prime of number */  \n    int factor = lprime(n);  \n\n    /* Check if largest prime &gt; sqrt(n) */ \n    if ((factor*factor) &gt; n) {  \n        return 1; /* true */  \n    }  \n    else {  \n        return 0; /* false */  \n    }  \n} \n\n/* delete digit from number                 */\nint del(int num, int n) {\n    int d = log10(num)+1; /* checks amount of digits */\n    int revnew = 0;\n    int new = 0;\n\n    for (int i = 0; num != 0; i++) {\n            int dig = num % 10;\n\n            num = num / 10;\n\n            if(i == (d - n)) {\n                continue;\n            } else {\n                revnew = (revnew * 10) + dig;\n            }\n    }\n\n    for (int i = 0; revnew != 0; i++) {\n        new = (new*10) + (revnew % 10);\n        revnew = revnew / 10;\n    }\n    return new;\n} \n\n/* driver code */  \nint main(int argc, char* v[]) {\n    int m=22, n; \n    int x = 0;\n    int i = 1;\n    int counter = 0;\n\n    scanf(\"%d\", &amp;n);\n\n    int d = log10(m)+1;\n\n    while (counter &lt; n) { \n        if (unus(m++)) { \n            counter++;\n        } \n    }\n\n        for(unus(m); i &lt; d; i++) {\n            int nmin = del(m, i);\n            if (unus(nmin)) {  \n                continue;\n            } else { \n                printf(\"%d is not supurunusual\\n\", (m-1)); \n                x++;  \n            }\n        }\n\n    if(x==0) {\n        printf(\"%d is superunusual!\\n\", (m-1));\n    }\n    return 0;  \n}\n</code></pre>\n\n<p>I hope you can understand my code. Otherwise I will explain it better.</p>\n\n<p>Also, I'm quite new to coding, so please don't be to harsh...</p>\n"}, {"tags": ["c", "arrays", "memory", "dynamic", "allocation"], "comments": [{"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1570042685, "post_id": 58207466, "comment_id": 102793434, "body": "Your position functions do not work because you do not initialize pos to zero at the start of your seach, so if the smallest is in entry zero, the pos is uninitialized (and set to whatever is on the stack such as 32766)"}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1570044539, "post_id": 58207466, "comment_id": 102794223, "body": "In addition, your local variable max and min must be declared as double, otherwise you are comparing ints and doubles, and returning a rounded down value."}], "answers": [{"tags": [], "owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "is_accepted": false, "score": 0, "last_activity_date": 1570044405, "last_edit_date": 1570044405, "creation_date": 1570043891, "answer_id": 58208039, "question_id": 58207466, "link": "https://stackoverflow.com/questions/58207466/c-function-for-printing-the-position-of-an-element-in-an-array-not-working/58208039#58208039", "title": "C function for printing the position of an element in an array not working", "body": "<p>Your position functions do not work because you do not initialize pos to zero at the start of your seach, so if the smallest is in entry zero, the pos is uninitialized (and set to whatever is on the stack such as 32766. Initializing pos=0 does the trick.</p>\n\n<p>In addition, you need to change local variables <code>max</code> and <code>min</code> to <code>double</code>, not an <code>int</code>. Otherwise, you are comparing ints to doubles, and you get the wrong result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble findingmax(double *arr, int n){\n    double max = arr[0];\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &gt; max){\n            max = arr[i];\n        }\n    }\n    return max;\n}\n\nint findingmaxpos(double *arr, int n){\n    double max = arr[0];\n    int pos = 0;\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &gt; max){\n            max = arr[i];\n            pos = i;\n        } \n    }\n    return pos;\n} \n\ndouble findingmin(double *arr, int n){\n    double min = arr[0];\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &lt; min){\n            min = arr[i];\n        }\n    }\n    return min;\n}\n\nint findingminpos(double *arr, int n){\n    double min = arr[0];\n    int pos = 0;\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &lt; min){\n            min = arr[i];\n            pos = i; \n        }\n    }\n    return pos; \n} \n\ndouble scalarproduct(double *v, double *w, int n){\n    double vw[n];\n    for(int i = 0; i &lt; n; i++){\n        vw[i] = (v[i] * w[i]); \n    }\n    double scalprod = 0; \n    for(int i = 0; i &lt; n; i++){\n        scalprod += vw[i];\n    }\n    return scalprod;\n}\nint main(){\n    int n;\n    scanf(\"%d\", &amp;n);\n    double *v; \n    v = (double *) malloc(sizeof(double) * n);\n    double *w;\n    w = (double *) malloc(sizeof(double) * n);\n    for(int i = 0; i &lt; n; i++){\n        scanf(\"%lf\", &amp;v[i]);       \n    }\n    for (int i = 0; i &lt; n; i++){\n        scanf(\"%lf\", &amp;w[i]);\n    }\n    printf(\"Scalar product=%lf\\n\", scalarproduct(v, w, n));\n    printf(\"The smallest = %lf\\n\", findingmin(v, n));\n    printf(\"Position of the smallest = %d\\n\", findingminpos(v, n));\n    printf(\"The largest = %lf\\n\", findingmax(v, n));\n    printf(\"Position of the largest = %d\\n\", findingmaxpos(v, n));\n    printf(\"The smallest = %lf\\n\", findingmin(w, n));\n    printf(\"Position of the smallest = %d\\n\", findingminpos(w, n));\n    printf(\"The largest = %lf\\n\", findingmax(w, n));\n    printf(\"Position of the largest = %d\\n\", findingmaxpos(w, n));\n    return 0; \n}\n</code></pre>\n\n<p>Produces output:</p>\n\n<pre><code>Scalar product=6.600000\nThe smallest = 1.100000\nPosition of the smallest = 0\nThe largest = 3.000000\nPosition of the largest = 2\nThe smallest = 1.000000\nPosition of the smallest = 0\nThe largest = 1.000000\nPosition of the largest = 0\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12016848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eda1809ab44c2fb483c41f3408edf8?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah_McDermott", "link": "https://stackoverflow.com/users/12016848/hannah-mcdermott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570044405, "creation_date": 1570041459, "question_id": 58207466, "link": "https://stackoverflow.com/questions/58207466/c-function-for-printing-the-position-of-an-element-in-an-array-not-working", "title": "C function for printing the position of an element in an array not working", "body": "<p>I am trying to print out the scalar product of two vectors, the value and the position of the max element in each vector, and the value and the position of the min element in each vector. However my function for finding the minimum value and the position of the minimum value is not working and I am not sure why since it uses the same syntax as my function for finding the maximum value and the position of the maximum value and it prints the correct numbers. This is what my code looks like: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble findingmax(double *arr, int n){\n    int max = arr[0];\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &gt; max){\n            max = arr[i];\n        }\n    }\n    return max;\n}\n\nint findingmaxpos(double *arr, int n){\n    int max = arr[0];\n    int pos;\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &gt; max){\n            max = arr[i];\n            pos = i;\n        } \n    }\n    return pos;\n} \n\ndouble findingmin(double *arr, int n){\n    int min = arr[0];\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &lt; min){\n            min = arr[i];\n        }\n    }\n    return min;\n}\n\nint findingminpos(double *arr, int n){\n    int min = arr[0];\n    int pos;\n    for(int i = 0; i &lt; n; i++){\n        if(arr[i] &lt; min){\n            min = arr[i];\n            pos = i; \n        }\n    }\n    return pos; \n} \n\ndouble scalarproduct(double *v, double *w, int n){\n    double vw[n];\n    for(int i = 0; i &lt; n; i++){\n        vw[i] = (v[i] * w[i]); \n    }\n    double scalprod = 0; \n    for(int i = 0; i &lt; n; i++){\n        scalprod += vw[i];\n    }\n    return scalprod;\n}\nint main(){\n    int n;\n    scanf(\"%d\", &amp;n);\n    double *v; \n    v = (double *) malloc(sizeof(double) * n);\n    double *w;\n    w = (double *) malloc(sizeof(double) * n);\n    for(int i = 0; i &lt; n; i++){\n        scanf(\"%lf\", &amp;v[i]);       \n    }\n    for (int i = 0; i &lt; n; i++){\n        scanf(\"%lf\", &amp;w[i]);\n    }\n    printf(\"Scalar product=%lf\\n\", scalarproduct(v, w, n));\n    printf(\"The smallest = %lf\\n\", findingmin(v, n));\n    printf(\"Position of the smallest = %d\\n\", findingminpos(v, n));\n    printf(\"The largest = %lf\\n\", findingmax(v, n));\n    printf(\"Position of the largest = %d\\n\", findingmaxpos(v, n));\n    printf(\"The smallest = %lf\\n\", findingmin(w, n));\n    printf(\"Position of the smallest = %d\\n\", findingminpos(w, n));\n    printf(\"The largest = %lf\\n\", findingmax(w, n));\n    printf(\"Position of the largest = %d\\n\", findingmaxpos(w, n));\n    return 0; \n}\n</code></pre>\n\n<p>The input is this:</p>\n\n<pre><code>3\n1.1\n2.5\n3.0\n1.0\n1.0\n1.0\n</code></pre>\n\n<p>The output SHOULD be this:</p>\n\n<pre><code>Scalar product=6.600000\nThe smallest = 1.100000\nPosition of smallest = 0\nThe largest = 3.000000\nPosition of largest = 2\nThe smallest = 1.000000\nPosition of smallest = 0\nThe largest = 1.000000\nPosition of largest = 0\n</code></pre>\n\n<p>But my output looks like this:</p>\n\n<pre><code>Scalar product=6.600000\nThe smallest = 1.000000\nPosition of the smallest = 32766\nThe largest = 3.000000\nPosition of the largest = 2\nThe smallest = 1.000000\nPosition of the smallest = 32766\nThe largest = 1.000000\nPosition of the largest = 32766\n</code></pre>\n\n<p>How can I print the correct 'i', the position?</p>\n"}, {"tags": ["c", "string", "printf", "scanf", "stdio"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1570041202, "post_id": 58207289, "comment_id": 102792734, "body": "Why do you bother with <code>name</code> and <code>name_</code>? Just use <code>name</code>."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1570041281, "post_id": 58207289, "comment_id": 102792786, "body": "You need to allocate more space for <code>answ</code>. Right now, it can only store an empty string."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570042266, "post_id": 58207289, "comment_id": 102793223, "body": "<code>char answ[1];</code> is One-Character-Too-Few to hold <code>&quot;y&quot;</code> or <code>&quot;n&quot;</code> (which are actually <code>&quot;y\\0&quot;</code> or <code>&quot;n\\0&quot;</code> (you forgot space for the <i>nul-terminating</i> character)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5640902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60108b2bf8a6a2e61aa2971bd0292e82?s=128&d=identicon&r=PG&f=1", "display_name": "healLV", "link": "https://stackoverflow.com/users/5640902/heallv"}, "edited": false, "score": 0, "creation_date": 1570041089, "post_id": 58207316, "comment_id": 102792685, "body": "oh welp I overlooked that part"}, {"owner": {"reputation": 1202, "user_id": 928492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdJzp.jpg?s=128&g=1", "display_name": "pragnesh", "link": "https://stackoverflow.com/users/928492/pragnesh"}, "edited": false, "score": 0, "creation_date": 1570041484, "post_id": 58207316, "comment_id": 102792865, "body": "Improvement: Consider using strncpy instead"}], "tags": [], "owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": false, "score": 1, "last_activity_date": 1570040807, "creation_date": 1570040807, "answer_id": 58207316, "question_id": 58207289, "link": "https://stackoverflow.com/questions/58207289/scanf-and-printf-not-printing-right-values/58207316#58207316", "title": "scanf and printf not printing right values", "body": "<p>You've only allocated space for a one-character yes/no answer, but are writing more characters into it.</p>\n\n<p>This results in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>You need to allocate more space for <code>answ</code>, not forgetting about the NUL terminator.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 12045916, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCgMzthMjf8wj62L0B_5Xg0RnEvvkPcBFAwgcvW=k-s128", "display_name": "Subhash Jha", "link": "https://stackoverflow.com/users/12045916/subhash-jha"}, "is_accepted": true, "score": 2, "last_activity_date": 1570042038, "last_edit_date": 1570042038, "creation_date": 1570040910, "answer_id": 58207340, "question_id": 58207289, "link": "https://stackoverflow.com/questions/58207289/scanf-and-printf-not-printing-right-values/58207340#58207340", "title": "scanf and printf not printing right values", "body": "<p><code>answ</code> can contain only 1 character. So currently, the extra character <code>\"es\"</code> +  <code>'\\0'</code> gets written into the memory assigned to <code>name_</code>.\nSo, <code>\"es\"</code> gets printed.</p>\n"}, {"tags": [], "owner": {"reputation": 27181, "user_id": 292477, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ca3cdf733e5ad7ca41c58ba43d06dcd?s=128&d=identicon&r=PG", "display_name": "Krumelur", "link": "https://stackoverflow.com/users/292477/krumelur"}, "is_accepted": false, "score": 1, "last_activity_date": 1570042521, "creation_date": 1570042521, "answer_id": 58207735, "question_id": 58207289, "link": "https://stackoverflow.com/questions/58207289/scanf-and-printf-not-printing-right-values/58207735#58207735", "title": "scanf and printf not printing right values", "body": "<p>You have created a classic exploitable buffer overrun but in your code. This is why most modern compilers would advise you to swap sscanf to sscanf_s or similar. As other people have pointed out, you overwrite the next variable on the stack.</p>\n\n<p>I wanted to provide this answer to basically say: never ever use sscanf or any of the obsolete, insecure C functions. Even if this is probably just a toy example, get the practice in to write modern C code. You\u2019ll benefit from this in the long run.</p>\n"}], "owner": {"reputation": 19, "user_id": 5640902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60108b2bf8a6a2e61aa2971bd0292e82?s=128&d=identicon&r=PG&f=1", "display_name": "healLV", "link": "https://stackoverflow.com/users/5640902/heallv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58207340, "answer_count": 3, "score": -1, "last_activity_date": 1570042521, "creation_date": 1570040710, "last_edit_date": 1592644375, "question_id": 58207289, "link": "https://stackoverflow.com/questions/58207289/scanf-and-printf-not-printing-right-values", "title": "scanf and printf not printing right values", "body": "<p>What is going on here?\nThe code goes like:</p>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char name[15];\n    char name_[15];\n    char answ[1];\n\n    printf(&quot;What's your name?\\n&quot;);\n    scanf(&quot;%s&quot;, name);\n\n    strcpy(name_, name);\n\n    printf(&quot;Yes / No: &quot;);\n    scanf(&quot;%s&quot;, answ);\n\n    printf(&quot;Hello! %s\\n&quot;, name_);\n    printf(&quot;You said: %s\\n&quot;, answ);\n\n    return 0;\n}\n</code></pre>\n<p>With input &quot;name&quot; and &quot;yes&quot; the expected output is that it says:</p>\n<blockquote>\n<p>Hello! name</p>\n<p>You said: yes</p>\n</blockquote>\n<p>Instead I get:</p>\n<blockquote>\n<p>Hello! es</p>\n<p>You said: yes</p>\n</blockquote>\n<p>I also tried adding spaces before %s with no results.</p>\n<p>So what exactly am I missing here?</p>\n"}, {"tags": ["c", "windows", "redirect", "readfile"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570040614, "post_id": 58207221, "comment_id": 102792460, "body": "This is clearly meant to be code for C, except for <code>#include &lt;iostream&gt;</code> (whose provided features are not used). which language are you actually using?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1570040774, "post_id": 58207221, "comment_id": 102792543, "body": "I would point out that there are more idiomatic ways of enumerating the contents of a directory in Windows, namely, <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-findfirstfilew\" rel=\"nofollow noreferrer\"><code>FindFirstFileW</code></a>, <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-findnextfilew\" rel=\"nofollow noreferrer\"><code>FindNextFileW</code></a> and <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-findclose\" rel=\"nofollow noreferrer\"><code>FindClose</code></a>. You could just take note of the current directory and the fact that the user typed <code>dir</code> and process the contents that way."}, {"owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1570040984, "post_id": 58207221, "comment_id": 102792646, "body": "You say <code>dwRead</code> never becomes 0. If that is the case, what are you getting after the <code>dir</code> command stops outputting?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1570041038, "post_id": 58207221, "comment_id": 102792665, "body": "The only way to know when the output is finished is to detect when the program that is generating the output is finished, i.e. it exits."}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1570042090, "post_id": 58207221, "comment_id": 102793125, "body": "@JimRhodes: I can compare the output of my program with the output of the dir command issued on a command line itself. When my program has read all characters (or bytes) of the pipe, it simply blocks in the function ReadFile()."}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570042140, "post_id": 58207221, "comment_id": 102793160, "body": "@Fran&#231;oisAndrieux: I copied the code from the given link, and did not think much about eliminating unnecessary includes :-) But you are right, it should work with plain C"}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1570042229, "post_id": 58207221, "comment_id": 102793202, "body": "@GovindParmar: I know, that the dir command is not the best example to being used here, but it gives a good example on what I am trying to achieve."}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1570042368, "post_id": 58207221, "comment_id": 102793276, "body": "@MarkRansom: I tried to use WaitForSingleObject on the process handle, but it seems like the process does never exit (at least not in my example here). I suppose, when I close the pipe, the process would exit. But closing the pipe before all data have arrrived is not an option. And I cant know when all data has arrived."}, {"owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1570043097, "post_id": 58207221, "comment_id": 102793625, "body": "In order to make the <code>ReadFile</code> call non-blocking, you will have to use overlapped I/O. That is, the handle needs to be opened with FILE_FLAG_OVERLAPPED. I don&#39;t think <code>CreatePipe</code> will let you do that but <code>CreateNamedPipe</code> will."}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1570044974, "post_id": 58207221, "comment_id": 102794407, "body": "@JimRhodes: <code>CreatePipe</code> can not be used asynchronously, thats right. I tried to use a Named pipe, but it seems like the pipe waits for the other end to connect (<code>GetLastError</code> returns 536, 0x218)..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570045984, "post_id": 58207221, "comment_id": 102794884, "body": "@WolfgangRoth yes. You can either 1) <code>CreateNamedPipe()</code> a listening pipe with a unique name, then <code>CreateFile()</code> a connecting pipe to it; 2) <code>NtOpenFile()</code> to create an unnamed pipe and <code>ZwCreateNamedPipeFile()</code> to connect to it. Either way will give you the two pipe handles you need for <code>CreateProcess()</code>. See <a href=\"https://stackoverflow.com/questions/60645/\">Overlapped I/O on anonymous pipe</a>"}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570046383, "post_id": 58207221, "comment_id": 102795051, "body": "@RemyLebeau: please see my answer to the question..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570046612, "post_id": 58207221, "comment_id": 102795156, "body": "@WolfgangRoth I see no answer from you. I was replying to your &quot;<i>it seems like the pipe waits for the other end to connect</i>&quot; comment. If you use <code>CreateNamedPipe()</code> then you need to use <code>CreateFile()</code> as well."}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570046904, "post_id": 58207221, "comment_id": 102795272, "body": "@RemyLebeau: try now,  it took me a while to edit."}], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "is_accepted": true, "score": 0, "last_activity_date": 1570046865, "creation_date": 1570046865, "answer_id": 58208681, "question_id": 58207221, "link": "https://stackoverflow.com/questions/58207221/how-do-i-process-the-output-of-dir/58208681#58208681", "title": "How do I process the output of &quot;dir&quot;?", "body": "<p>Ok, after i searched some different terms in google, I came up with this link to stackoverflow ;) :\n<a href=\"https://stackoverflow.com/questions/35969730/how-to-read-output-from-cmd-exe-using-createprocess-and-createpipe\">How to read output from cmd.exe using CreateProcess() and CreatePipe()</a></p>\n\n<p>Ian Boyd wrote there :</p>\n\n<blockquote>\n  <p>Once you've launched your child process: be sure to close those ends of the pipe you no longer need.</p>\n\n<pre><code>result = CreateProcess(...);\n\n\n\n//CreateProcess demands that we close these two populated handles when we're done with them. We're done with them.\n\nCloseHandle(pi.hProcess);\n\nCloseHandle(pi.hThread);\n\n\n\n/*\n\n   We've given the console app the writable end of the pipe during CreateProcess; we don't need it anymore.\n\n   We do keep the handle for the *readable* end of the pipe; as we still need to read from it.\n\n   The other reason to close the writable-end handle now is so that there's only one out-standing reference to the writeable end: held by the console app.\n\n   When the app closes, it will close the pipe, and ReadFile will return code 109 (The pipe has been ended).\n\n   That's how we'll know the console app is done. (no need to wait on process handles with buggy infinite waits)\n\n*/\n\nCloseHandle(g_hChildStd_OUT_Wr);\n\ng_hChildStd_OUT_Wr = 0;\n\nCloseHandle(g_hChildStd_IN_Rd);\n\ng_hChildStd_OUT_Wr = 0;\n</code></pre>\n  \n  <p>The common problem with most solutions is that people try to wait on a process handle. There are many problems with this; the main one being that if you wait for the child the terminate, the child will never be able to terminate.</p>\n</blockquote>\n\n<p>After closing the unneeded handles <code>ReadFile</code> works as expected.</p>\n"}], "owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 58208681, "answer_count": 1, "score": 0, "last_activity_date": 1570046865, "creation_date": 1570040493, "last_edit_date": 1570045156, "question_id": 58207221, "link": "https://stackoverflow.com/questions/58207221/how-do-i-process-the-output-of-dir", "title": "How do I process the output of &quot;dir&quot;?", "body": "<p>I have written a program that implements a tiny shell to process commands from the user.\nIf the entered command is recognised as internal command, my program executes this command.</p>\n\n<p>These commands are implemented as internal functions and their output is being processed by another internal function that is able to send the text to the console and / or to file for logging purposes. </p>\n\n<p>If the entered command is not recognised, I try to execute the entered command as part of the windows command shell, e.g. : <code>cmd dir</code> would execute the <code>dir</code> command and the output gets printed on the console. This is done via <code>CreateProcess</code>. Until now I did not specify the members <code>hStdError</code>, <code>hStdOutput</code> and <code>hStdInput</code> of the <code>STARTUPINFO</code> parameter. </p>\n\n<p>I tried to implement and adapt the example of <a href=\"https://docs.microsoft.com/en-us/windows/win32/procthread/creating-a-child-process-with-redirected-input-and-output\" rel=\"nofollow noreferrer\">Creating a Child Process with Redirected Input and Output</a>.</p>\n\n<p>I did not use their implementation of the child process, but tried to get the output of the dir command into my application:</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;windows.h&gt;\n\n#define BUFSIZE 512\n\nHANDLE g_hChildStd_IN_Rd = NULL;\nHANDLE g_hChildStd_IN_Wr = NULL;\nHANDLE g_hChildStd_OUT_Rd = NULL;\nHANDLE g_hChildStd_OUT_Wr = NULL;\n\n\n\nPROCESS_INFORMATION piProcInfo;\nSTARTUPINFO siStartInfo;\nvoid CreateChildProcess()\n// Create a child process that uses the previously created pipes for STDIN and STDOUT.\n{\n    TCHAR szCmdline[] = TEXT(\"cmd /c dir q:\\\\Sicherung\\\\Bilder /s\");\n    BOOL bSuccess = FALSE;\n\n    // Set up members of the PROCESS_INFORMATION structure. \n\n    ZeroMemory(&amp;piProcInfo, sizeof(PROCESS_INFORMATION));\n\n    // Set up members of the STARTUPINFO structure. \n    // This structure specifies the STDIN and STDOUT handles for redirection.\n\n    ZeroMemory(&amp;siStartInfo, sizeof(STARTUPINFO));\n    siStartInfo.cb = sizeof(STARTUPINFO);\n    siStartInfo.hStdError = g_hChildStd_OUT_Wr;\n    siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;\n    siStartInfo.hStdInput = g_hChildStd_IN_Rd;\n    siStartInfo.dwFlags |= STARTF_USESTDHANDLES;\n\n    // Create the child process. \n\n    bSuccess = CreateProcess(NULL,\n        szCmdline,     // command line \n        NULL,          // process security attributes \n        NULL,          // primary thread security attributes \n        TRUE,          // handles are inherited \n        0,             // creation flags \n        NULL,          // use parent's environment \n        NULL,          // use parent's current directory \n        &amp;siStartInfo,  // STARTUPINFO pointer \n        &amp;piProcInfo);  // receives PROCESS_INFORMATION \n\n     // If an error occurs, exit the application. \n    if (!bSuccess)\n        return; // ErrorExit((\"CreateProcess\"));\n    else\n    {\n        // Close handles to the child process and its primary thread.\n        // Some applications might keep these handles to monitor the status\n        // of the child process, for example. \n\n        //CloseHandle(piProcInfo.hProcess);\n        //CloseHandle(piProcInfo.hThread);\n    }\n}\nvoid ReadFromPipe(void)\n// Read output from the child process's pipe for STDOUT\n// and write to the parent process's pipe for STDOUT. \n// Stop when there is no more data. \n{\n    DWORD dwRead, dwWritten;\n    CHAR chBuf[BUFSIZE];\n    BOOL bSuccess = FALSE;\n    HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    for (;;)\n    {\n        DWORD objectstat = WAIT_TIMEOUT;\n        //do\n        //{\n        //  objectstat = WaitForSingleObject(piProcInfo.hProcess, 0);\n        //} while (objectstat != WAIT_OBJECT_0);\n        memset(&amp;chBuf[0], 0x00, BUFSIZE);\n        bSuccess = ReadFile(g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n        if (!bSuccess)\n            break;\n\n        bSuccess = WriteFile(hParentStdOut, chBuf,\n            dwRead, &amp;dwWritten, NULL);\n        if (!bSuccess) \n            break;\n        if (dwRead == 0)\n            break;\n    }\n}\nint main()\n{\n    SECURITY_ATTRIBUTES saAttr;\n\n    printf(\"\\n-&gt;Start of parent execution.\\n\");\n\n    // Set the bInheritHandle flag so pipe handles are inherited. \n\n    saAttr.nLength = sizeof(SECURITY_ATTRIBUTES);\n    saAttr.bInheritHandle = TRUE;\n    saAttr.lpSecurityDescriptor = NULL;\n\n    // Create a pipe for the child process's STDOUT. \n    if (!CreatePipe(&amp;g_hChildStd_OUT_Rd, &amp;g_hChildStd_OUT_Wr, &amp;saAttr, 0))\n        return -1;// ErrorExit(\"StdoutRd CreatePipe\");\n\n    // Ensure the read handle to the pipe for STDOUT is not inherited.\n\n    if (!SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0))\n        return -2;// ErrorExit((\"Stdout SetHandleInformation\"));\n\n    // Create a pipe for the child process's STDIN. \n\n    if (!CreatePipe(&amp;g_hChildStd_IN_Rd, &amp;g_hChildStd_IN_Wr, &amp;saAttr, 0))\n        return -3 ;// ErrorExit((\"Stdin CreatePipe\"));\n\n    // Ensure the write handle to the pipe for STDIN is not inherited. \n\n    if (!SetHandleInformation(g_hChildStd_IN_Wr, HANDLE_FLAG_INHERIT, 0))\n        return -4;// ErrorExit((\"Stdin SetHandleInformation\"));\n\n    // Create the child process. \n    CreateChildProcess();\n    ReadFromPipe();\n    CloseHandle(piProcInfo.hProcess);\n    CloseHandle(piProcInfo.hThread);\n    return 0;\n}\n</code></pre>\n\n<p>I know, that the problem has to be with ReadFile. I can not determine when all output of the dir command has been processed. Checking <code>dwRead</code> for 0 or for <code>BUFSIZE</code> does not work. <code>dwRead</code>never becomes 0, and it can happen that it is less than <code>BUFSIZE</code>, because the dir command is not fast enough.</p>\n\n<p>So, how am i supposed to end processing of the pipe data?</p>\n"}, {"tags": ["c", "tcp", "pthreads", "client", "buffer"], "comments": [{"owner": {"reputation": 575, "user_id": 8242494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZWeg.png?s=128&g=1", "display_name": "gonidelis", "link": "https://stackoverflow.com/users/8242494/gonidelis"}, "edited": false, "score": 0, "creation_date": 1570041614, "post_id": 58207109, "comment_id": 102792913, "body": "To be more specific, as I debug my code I can see that the problem lies somewhere on the fact that when I try to write to buffer through <code>msg</code> as an index (msg is a global variable) I don&#39;t change the contents: <code>buffer[msg]</code> only,  but the whole <code>buffer[0:msg]</code> ."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570042210, "post_id": 58207109, "comment_id": 102793190, "body": "If you&#39;re using TCP sockets, you have some serious problems - TCP sockets are streams with no concept of message boundaries.  When you <code>write()</code> a string to the socket, the other end can <code>read()</code> all or part of that string - and and it can also read <b>more than one string</b> (or <b>parts of more than one string</b>) if one has already been sent.  The best you can say about the code you posted is you haven&#39;t observed it breaking <b>yet</b>."}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 8242494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZWeg.png?s=128&g=1", "display_name": "gonidelis", "link": "https://stackoverflow.com/users/8242494/gonidelis"}, "edited": false, "score": 1, "creation_date": 1570043241, "post_id": 58207555, "comment_id": 102793693, "body": "<code>strcpy(buffer[msg], m)</code> produces me a segmentation fault error. Should I <code>buffer[msg] = malloc(strlen(m))</code> before the <code>strcpy</code>?"}, {"owner": {"reputation": 575, "user_id": 8242494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZWeg.png?s=128&g=1", "display_name": "gonidelis", "link": "https://stackoverflow.com/users/8242494/gonidelis"}, "edited": false, "score": 0, "creation_date": 1570043480, "post_id": 58207555, "comment_id": 102793780, "body": "Thank you so much for the great answer. Other answers (even from &quot;big reputation&quot; guys) were so irrelevant. You were right on spot!"}, {"owner": {"reputation": 87, "user_id": 5892276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySM5u.png?s=128&g=1", "display_name": "J.Fernandes", "link": "https://stackoverflow.com/users/5892276/j-fernandes"}, "reply_to_user": {"reputation": 575, "user_id": 8242494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZWeg.png?s=128&g=1", "display_name": "gonidelis", "link": "https://stackoverflow.com/users/8242494/gonidelis"}, "edited": false, "score": 0, "creation_date": 1570043589, "post_id": 58207555, "comment_id": 102793818, "body": "You should use a safer version of strcpy (strcpy_s) and make sure you dont overflow the destination buffer."}], "tags": [], "owner": {"reputation": 87, "user_id": 5892276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySM5u.png?s=128&g=1", "display_name": "J.Fernandes", "link": "https://stackoverflow.com/users/5892276/j-fernandes"}, "is_accepted": true, "score": 0, "last_activity_date": 1570041836, "creation_date": 1570041836, "answer_id": 58207555, "question_id": 58207109, "link": "https://stackoverflow.com/questions/58207109/pthreads-fill-buffer-in-unexpected-way/58207555#58207555", "title": "pthreads fill buffer in unexpected way", "body": "<p>you problem happens here </p>\n\n<pre><code>void buffer_fill(char *m){\n\n  if (msg&lt;=MAX_MESSAGES){\n    buffer[msg] = m; // where\n    msg ++;\n  }\n  print_buffer();\n}\n</code></pre>\n\n<p>you should copy the value to <code>buffer</code> from <code>m</code> using <code>strcpy</code> or using a loop. </p>\n\n<p>Edit: <code>char *</code> &lt;=> <code>const char *</code> you should create an array or dynamically allocate the buffer.</p>\n"}], "owner": {"reputation": 575, "user_id": 8242494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZWeg.png?s=128&g=1", "display_name": "gonidelis", "link": "https://stackoverflow.com/users/8242494/gonidelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58207555, "answer_count": 1, "score": 0, "last_activity_date": 1570041836, "creation_date": 1570040074, "question_id": 58207109, "link": "https://stackoverflow.com/questions/58207109/pthreads-fill-buffer-in-unexpected-way", "title": "pthreads fill buffer in unexpected way", "body": "<p>I am trying to fill a buffer using <code>pthreads</code> in a simple TCP/IP server client communication. </p>\n\n<p><strong>ATTENTION</strong>: <em>Client writes its contents to an external server-address (not mine) and server reads its contents from an external client. The client and server that I have put below, do not communicate with each other.</em></p>\n\n<p>The buffer is filled in two ways:</p>\n\n<ol>\n<li>Server reads a message and puts it into the buffer</li>\n<li>Client creates a message and puts it into the buffer</li>\n</ol>\n\n<p>Here is the <strong>client function</strong>:</p>\n\n<pre><code>void *client(void *threadid)\n{\n  //CLIENT INITIALIZATION AND CONNECT TO SERVER PROPERLY\n  //sleep(1);   //sleep 1 second before you send again\n  char *buff = \"message1\";   //message1,2,3 etc is defined by a random function\n\n  pthread_mutex_lock(&amp;lock);\n\n  write(sockfd, buff, strlen(buff)+1);\n\n  buffer_fill(buff);\n  pthread_mutex_unlock(&amp;lock);\n  }\n  pthread_exit(NULL);\n }\n</code></pre>\n\n<p>And here is the <strong>server function</strong>. <strong>Server reads from an external device that runs the same client code with me</strong>:</p>\n\n<pre><code>void *server(void *threadid)\n{\n  //SERVER INITIALIZATION USING THE PROPER PORT AND ADDRESS\n  pthread_mutex_lock(&amp;lock);\n  bzero(buff, MAX_LENGTH);\n  // read the message from client and copy it in buffer\n  while(strlen(buff) == 0){\n    read(sockfd, buff, sizeof(buff));\n  }\n  buffer_fill(buff);\n  pthread_mutex_unlock(&amp;lock);\n  }\n  pthread_exit(NULL);\n}\n</code></pre>\n\n<p>I am using a simple <code>pthread</code>  initialization in my <code>main</code> function. So I am calling each function through the utilization of a thread:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n\n  pthread_t threads[NUM_THREADS];\n  int rc[NUM_THREADS];\n  long t;\n\n  for(t=0; t&lt;NUM_THREADS; t++){\n\n    //initiallize thread\n    if (pthread_mutex_init(&amp;lock, NULL) != 0)\n    {\n        printf(\"\\n mutex init failed\\n\");\n        return 1;\n    }\n\n\n    //create each thread according to value of t\n    if(t==0){\n      rc[t] = pthread_create(&amp;threads[t], NULL, server, (void *)t);\n    }else if(t==1){\n      rc[t] = pthread_create(&amp;threads[t], NULL, client, (void *)t);\n    }\n\n  }\n\n  pthread_join(tid[0], NULL);\n  pthread_join(tid[1], NULL);\n  pthread_mutex_destroy(&amp;lock);\n\n  /* Last thing that main() should do */\n  pthread_exit(NULL);\n\n  return 0;\n}\n</code></pre>\n\n<p>I assume the problem lies somewhere in the use of the (extremely simple) <code>buffer_fill(char *message)</code> in combination with the threads (<strong><em>note : msg is a global variable initialized to zero outside main,</em></strong> <code>int msg = 0</code>):</p>\n\n<pre><code>void buffer_fill(char *m){\n\n  if (msg&lt;=MAX_MESSAGES){\n    buffer[msg] = m;\n    msg ++;\n  }\n  print_buffer();\n}\n</code></pre>\n\n<p>When I execute this code continuously I get that kind of result:</p>\n\n<pre><code>first print:\nmessage2\n\nsecond print:\nmessage1\nmessage1\n\nthird print:\nmessage5\nmessage5\nmessage5\n</code></pre>\n\n<p>and so on. </p>\n\n<ul>\n<li>Note that messages[1:5] are been selected randomly by the client and do not affect the outcome</li>\n<li>I assure you that the server client set up is correct. I checked it\nbefore writing the code that fills the buffer</li>\n</ul>\n\n<p>Why is it that messages print like that and not in a serial form? I want every random message that is going to be written by client and every message that is read by the server to be stacked on buffer one after the other like this:</p>\n\n<pre><code>first print:\nmessage2\n\nsecond print:\nmessage2\nmessage1\n\nthird print:\nmessage2\nmessage1\nmessage5\n</code></pre>\n"}, {"tags": ["c", "if-statement", "arduino", "conditional-statements"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570045052, "post_id": 58206895, "comment_id": 102794436, "body": "State machine in a loop might work for you."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10969392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g0XbCMsxkEA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMmCt2kU8gCL53qsYT6XIbpfft26Q/mo/photo.jpg?sz=128", "display_name": "Noah Levine", "link": "https://stackoverflow.com/users/10969392/noah-levine"}, "edited": false, "score": 0, "creation_date": 1570051542, "post_id": 58207225, "comment_id": 102796836, "body": "So when i do all of this dont i need to call to each case in a function?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 5, "user_id": 10969392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g0XbCMsxkEA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMmCt2kU8gCL53qsYT6XIbpfft26Q/mo/photo.jpg?sz=128", "display_name": "Noah Levine", "link": "https://stackoverflow.com/users/10969392/noah-levine"}, "edited": false, "score": 0, "creation_date": 1570103744, "post_id": 58207225, "comment_id": 102813023, "body": "@NoahLevine - No.  The whole reason for this construct is to set the process in motion with an initial call to <code>RunProcess()</code> (or whatever you choose to call it.) and let the natural process flow occur until the conditions indicating the process is finished are met.  Then leave with a status.  The only condition now is temperature rising above the set-point, however  I think it would be good to add either max_cycles or max_time.  Typically environment stress screening systems, use a max_cycles."}, {"owner": {"reputation": 5, "user_id": 10969392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g0XbCMsxkEA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMmCt2kU8gCL53qsYT6XIbpfft26Q/mo/photo.jpg?sz=128", "display_name": "Noah Levine", "link": "https://stackoverflow.com/users/10969392/noah-levine"}, "edited": false, "score": 0, "creation_date": 1570136271, "post_id": 58207225, "comment_id": 102828633, "body": "what is the SLEEP mode mean?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 5, "user_id": 10969392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g0XbCMsxkEA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMmCt2kU8gCL53qsYT6XIbpfft26Q/mo/photo.jpg?sz=128", "display_name": "Noah Levine", "link": "https://stackoverflow.com/users/10969392/noah-levine"}, "edited": false, "score": 0, "creation_date": 1570137946, "post_id": 58207225, "comment_id": 102829155, "body": "@NoahLevine - Sleep State is a rest.  This is a place where the naturally occurring physical things that <i>need</i> to happen <i>can</i> happen.  Without a Sleep in the loop in at least one location, the loop is at risk of free wheeling too fast between states, unnecessarily sampling temperature and elapsed time for example.   If there are natural latencies in some of the data acquisition functions calls, Seep may not be necessary.  I put it in because it is a commonly seen state in constructs such as this."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 4, "last_activity_date": 1570544992, "last_edit_date": 1570544992, "creation_date": 1570040502, "answer_id": 58207225, "question_id": 58206895, "link": "https://stackoverflow.com/questions/58206895/how-can-i-have-a-conditional-statement-that-performs-two-tasks-first-one-and-th/58207225#58207225", "title": "How can I have a conditional statement that performs two tasks? first one and then the other in a loop", "body": "<p>Without going into the specifics of your code (since I cannot build it to test.) I only have one quick suggestion:</p>\n\n<p>Instead of using a series of <code>if-then-else</code> (or variations of it) consider using a state machine.  Implementations often include use of a <code>switch()</code> inside a <code>while(expression){...}</code> loop.  The following is a very simple example of how you might be able to do the steps you need in this construct:<br>\n(<strong><em>Note</em></strong>, this is a mix of C and pseudo code for illustration.  It is close to compilable , but contains a few undefined items.)  </p>\n\n<pre><code>typedef enum {\n    START,      \n    SET_VIB,\n    CHECK_TEMP,\n    GET_TIME,\n    CLEANUP,\n    SLEEP,\n    MAX_STATE\n}STATE;\n\nenum {\n    IN_WORK,\n    FAILED,\n    SUCCESS\n};\n\nenum {// durations in minutes\n    MIN_2,\n    MIN_5,\n    MIN_10,\n    MAX_DUR// change/add durations as profile needs\n};\nconst int dur[MAX_DUR]  = {120, 300, 600};\n\nint RunProcess(STATE state);\n\nint main(void)\n{\n    STATE state = START;\n\n    RunProcess(state);\n\n    return 0;\n}\n\nint RunProcess(STATE state)//Add arguments here for temperature, \n{                          //Sleep duration, Cycles, etc. so they are not hardcoded.\n    int status;\n    time_t elapsed = 0; //s\n    BOOL running = TRUE;\n    double temp, setpoint;\n    int duration;\n    time_t someMsValue;\n\n\n    while(running)\n    switch (state) {\n        case START:\n            //Power to oven\n            //Power to vibe\n            //initialize state and status variables\n            duration = dur[MIN_2];\n            state = SLEEP;\n            status = IN_WORK;\n            break;\n        case SET_VIB:\n            //test and control vibe\n            if(duration == dur[MIN_2]) \n            {\n                duration = dur[MIN_5];\n                //&amp; turn off vibe\n            }\n            else\n            {\n                duration = dur[MIN_2];\n                //&amp; turn on vibe\n            }\n            //init elapsed\n            elapsed = 0;           \n            status = IN_WORK;            \n            state = CHECK_TEMP;\n            break;\n        case CHECK_TEMP:\n            //read temperature\n            if(temp &lt; setpoint) \n            {\n                state = SLEEP;\n                status = IN_WORK;\n            }\n            else \n            {\n                state = CLEANUP;\n                status = SUCCESS;            \n            }\n            break;\n        case GET_TIME:\n            elapsed = getTime();\n            if(elapsed &gt; duration) state = SET_VIB;\n            else state = SLEEP;\n            status = IN_WORK;            \n            break;\n        case CLEANUP:\n            //turn off heat\n            //turn off vibe\n            running = FALSE;\n            break;\n        case SLEEP:\n            Sleep(someMsValue);\n            state = GET_TIME;\n            status = IN_WORK;\n            break;\n        default:\n            // called with incorrect state value\n            // error message and exit\n            status = FAILED;\n            state = CLEANUP;\n            break;\n    }\n    return status;\n}\n</code></pre>\n\n<p><em>Suggestion for improvement to this illustration:</em>\nExpand this code to read in a \"profile\" file.  It could include such things as parameter values typical to your process, such as temperature profiles, vibration profiles, number of cycles, etc.  With such information, all of the hard-coding used here as illustration could be replaced with run-time configurable parameters, allowing the system to use many different profiles\nwithout having to recompile the executable each time.</p>\n\n<p>Another <em><a href=\"https://stackoverflow.com/questions/1371460/state-machines-tutorials\">state machine example</a></em>.  </p>\n"}], "owner": {"reputation": 5, "user_id": 10969392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g0XbCMsxkEA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMmCt2kU8gCL53qsYT6XIbpfft26Q/mo/photo.jpg?sz=128", "display_name": "Noah Levine", "link": "https://stackoverflow.com/users/10969392/noah-levine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570544992, "creation_date": 1570039172, "question_id": 58206895, "link": "https://stackoverflow.com/questions/58206895/how-can-i-have-a-conditional-statement-that-performs-two-tasks-first-one-and-th", "title": "How can I have a conditional statement that performs two tasks? first one and then the other in a loop", "body": "<p>So I am trying to code a program in arduino that does a task for 2 minutes and then another task for 5 mins. first one and then the other in a loop until a different condition is met.</p>\n\n<p>Ive been trying to do this with if statements and while loops but im getting lost in the time part i think</p>\n\n<pre><code>//Pneumatic feed system\n\n    double minute = 1000*60;\n    double vibTime = 2 * minute;   //2 mins\n    //double vibTime = 5000;\n    double execTime = millis();\n    double waitTime = 5 * minute; //time waits between vibrating \n    //double waitTime = 10000;\n\nvoid DoPneuFeed() {\n    //Serial.print(\"Delta:\");\n    //Serial.println(millis()-execTime);\n\n    if(Temp_Data[T_9] &lt; 500)\n    {\n\n          if(execTime + vibTime &lt; millis())\n          {\n              //turn on vibration for 2 mins\n              execTime = millis();\n              Serial.println(\"VIBRATING\");\n          }\n\n          if(execTime + waitTime &lt; millis())\n          {\n                //turn off vibration for 5 mins\n                execTime = millis();\n                Serial.println(\"WAITING\");\n          }\n\n}\n\n    if(Temp_Data[T_9] &gt; 500)\n    {\n          relayOff(3);\n          relayOff(7);\n\n    }\n}\n\nvoid PneuFeed()\n{\n  if(execTime + vibTime &gt; millis())\n  {\n    //air pressure open\n    relayOn(3);\n    //vibrator on\n    relayOn(7); \n  }\n  else if(execTime + waitTime &gt; millis())\n  {\n    relayOff(3);\n    relayOff(7);\n  }\n}\n</code></pre>\n\n<p>I want to turn on the vibration mode for 2 mins and then turn it off for 5 mins. as long as the Temp_Data(T_9) &lt; 500. if it is greater than 500 it should stay off.</p>\n"}, {"tags": ["c", "linux", "gcc", "floating-point", "aix"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1570037174, "post_id": 58206361, "comment_id": 102790933, "body": "<code>1250.4749999999999091</code> is effectively equivalent to <code>1250.475</code>. Is this Intel vs. PowerPC?"}, {"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1570037183, "post_id": 58206361, "comment_id": 102790941, "body": "This may or may not be useful as background reading: <a href=\"https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2013/07/16/floating-point-determin&zwnj;&#8203;ism</a>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1570037237, "post_id": 58206361, "comment_id": 102790962, "body": "There is no specific question in your post. What are you asking?"}, {"owner": {"reputation": 49, "user_id": 3900672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAQYO.png?s=128&g=1", "display_name": "MRicciar", "link": "https://stackoverflow.com/users/3900672/mricciar"}, "edited": false, "score": 0, "creation_date": 1570042121, "post_id": 58206361, "comment_id": 102793144, "body": "My question is:   is there and option on gcc Linux that behaves like fast-math on gcc AIX (in this particular case)?"}, {"owner": {"reputation": 49, "user_id": 3900672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAQYO.png?s=128&g=1", "display_name": "MRicciar", "link": "https://stackoverflow.com/users/3900672/mricciar"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570042422, "post_id": 58206361, "comment_id": 102793299, "body": "@tadman yes, is Intel vs. PowerPC. ANd in fact, rounding 1250.4749999999999091 to 2 decimals yields 1250.47 as result (because 3rd decimal is &lt; 5), but rounding 1250.4750000000001364 gives 1250.48 (3rd decimal is &gt;= 5)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1570043360, "post_id": 58206361, "comment_id": 102793735, "body": "If this is an unusual question (I can&#39;t tell), then one of the people who probably know the answer is Segher Boessenkool. He is one of the GCC PowerPC maintainers, and he hangs out on the <a href=\"https://gcc.gnu.org/ml/gcc-help/\" rel=\"nofollow noreferrer\">GCC Help mailing list</a>."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570044969, "post_id": 58206361, "comment_id": 102794402, "body": "Did you read the article linked by NPE? It should give some pointers. Additionally these pages might be helpful: <a href=\"https://stackoverflow.com/questions/7420665/what-does-gccs-ffast-math-actually-do\">&quot;What does gcc&#39;s ffast-math actually do?&quot;</a> and <a href=\"https://gcc.gnu.org/wiki/FloatingPointMath\" rel=\"nofollow noreferrer\">Semantics of Floating Point Math in GCC</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1570046827, "post_id": 58206361, "comment_id": 102795241, "body": "You&#39;re going to get ever so slightly different values on Intel vs. PowerPC vs. ARM, so I&#39;d just expect this rather than fuss about it. How many places do you need? Work with that constraint, not the maximal version. Intel uses 64 or 80-bit floats depending on context, PowerPC might be different."}, {"owner": {"reputation": 49, "user_id": 3900672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAQYO.png?s=128&g=1", "display_name": "MRicciar", "link": "https://stackoverflow.com/users/3900672/mricciar"}, "edited": false, "score": 0, "creation_date": 1570047216, "post_id": 58206361, "comment_id": 102795391, "body": "Yes I read (some of) NPE article, and also read Semantics of fp ..... and what ffast-math do..... my problem is that ffast-math on AIX does something that fast-math on LInux does not..... perhaps I could contact Segher Boessenkool and he can direct me to the GCC Intel maintainer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1570048303, "post_id": 58206361, "comment_id": 102795775, "body": "Both <b>GCC 4.2 and 4.8 are obsolete</b>, unsupported today, variants of GCC. Why don&#39;t you use the more recent <a href=\"https://gcc.gnu.org/gcc-9/\" rel=\"nofollow noreferrer\">GCC 9</a> ?? I guess that its floating point support is better, since the GCC community worked a big lot on better floating point support. I strongly recommend upgrading your GCC (perhaps by compiling its source code)"}, {"owner": {"reputation": 49, "user_id": 3900672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAQYO.png?s=128&g=1", "display_name": "MRicciar", "link": "https://stackoverflow.com/users/3900672/mricciar"}, "edited": false, "score": 0, "creation_date": 1570049061, "post_id": 58206361, "comment_id": 102796034, "body": "Yes, I should probably use the latest version, sadly I don&#39;t control the environment platform, it&#39;s operated by my customer (I only migrate the code). I&#39;ll ask them if they could install the newest version. Thnks."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1570068830, "post_id": 58206361, "comment_id": 102800224, "body": "1250.4750000000001364 = 0x1.389e666666667p10 and 1250.4750000000001364 = 0x1.389e666666666p10 which differ only in the last bit"}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1570174306, "post_id": 58206361, "comment_id": 102837506, "body": "IMO, relying on fast-math to get bit identical results is too much like gambling. It&#39;s already difficult enough to get bit identical result with fpstrict IEEE compliance. fast-math enables many possible arrangements, like changing operation order (despite being not transitive); using fma (fused-multiply-add) if available etc... so the chances that two different compilers use the exact same tricks is very narrow."}, {"owner": {"reputation": 49, "user_id": 3900672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAQYO.png?s=128&g=1", "display_name": "MRicciar", "link": "https://stackoverflow.com/users/3900672/mricciar"}, "edited": false, "score": 0, "creation_date": 1570199980, "post_id": 58206361, "comment_id": 102849725, "body": "I understand what you said aka.nice , but using fast-math on gcc for AIX get bit identical results as xlc (at least in this case).... so thats why I asked if could by something similar on gcc for Linux. Now I agree that it was pure luck, as you said."}], "owner": {"reputation": 49, "user_id": 3900672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAQYO.png?s=128&g=1", "display_name": "MRicciar", "link": "https://stackoverflow.com/users/3900672/mricciar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570047765, "creation_date": 1570036936, "last_edit_date": 1570047765, "question_id": 58206361, "link": "https://stackoverflow.com/questions/58206361/floating-point-options-difference-in-gcc-for-c-c-over-aix-gcc-4-2-0-and-linu", "title": "Floating point options difference in gcc for C C++ over AIX (gcc 4.2.0) and Linux (gcc 4.8.5)", "body": "<p>My question is: is there an option on gcc Linux that behaves like fast-math on gcc AIX (in this particular case)?</p>\n\n<p>I had to migrate from AIX to Linux, a couple of hundred C and C++ programs. On AIX we used xlc to compile. On Linux we will use gcc.\nIn some programs, we have floating point operations, I know that floating point could give different results on different platforms, but I'm curious about a situation where gcc gives me a different result than xlc (which is normal), when I add --ffast-math option it gives me the result that I want, but on Linux, the same option doesn't have any impact on the result.\nHere's the code and what I've done:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\ndouble importe, franja, base, porcentaje, irpf;\n\nprintf(\"/*-----------------*/\\n\");\n\nimporte = 10562.5;\nfranja = 3.0;\nbase = 2226.0;\nporcentaje = 10.0;\nirpf = franja * base * ( porcentaje/ 100 );\nprintf(\"Redondeo1 [%.16f]\\n\", irpf );\n\nimporte -= franja * base;\nfranja = 5;\nporcentaje = 15.0;\nirpf += importe * ( porcentaje / 100 );\nprintf(\"Redondeo2 [%.16f]\\n\", irpf );\n\nreturn 0;\n}\n</code></pre>\n\n<p>Compiled with</p>\n\n<pre><code>AIX&gt; /usr/vac/bin/xlc -o redondo.xlc redondo.c\n</code></pre>\n\n<p>and executed</p>\n\n<pre><code>AIX&gt; redondo.xlc\n/*-----------------*/\nRedondeo1 [667.8000000000000682]\nRedondeo2 [1250.4750000000001364]\n</code></pre>\n\n<p>Then I tried a first step, compiling with gcc on AIX</p>\n\n<pre><code>AIX&gt; gcc -o redondo.gcc redondo.c\n</code></pre>\n\n<p>executing it, gives a difference on the second result</p>\n\n<pre><code>AIX&gt; redondo.gcc\n/*-----------------*/\nRedondeo1 [667.8000000000000682]\nRedondeo2 [1250.4749999999999091]\n</code></pre>\n\n<p>so I tried -ffast-math</p>\n\n<pre><code>AIX&gt; gcc  -ffast-math -o redondo.gcc-ffast-math  redondo.c\n</code></pre>\n\n<p>and executed </p>\n\n<pre><code>AIX&gt; redondo.gcc-ffast-math\n/*-----------------*/\nRedondeo1 [667.8000000000000682]\nRedondeo2 [1250.4750000000001364]\n</code></pre>\n\n<p>solves the situation ....on AIX. When I tried to replicate the solution on Linux, it always gives the same result:</p>\n\n<pre><code>Linux&gt; gcc -o redondo.gcc  redondo.c\nLinux&gt; redondo.gcc\n/*-----------------*/\nRedondeo1 [667.8000000000000682]\nRedondeo2 [1250.4749999999999091]\nLinux&gt; gcc -ffast-math -o redondo.gcc-ffast-math  redondo.c\nLinux&gt; redondo.gcc-ffast-math\n/*-----------------*/\nRedondeo1 [667.8000000000000682]\nRedondeo2 [1250.4749999999999091]\n</code></pre>\n\n<p>I know that floating point is non deterministic, not every number is representable, the results depends on the system architecture and the compiler and libraries, etc. etc. .... but perhaps, there's and option on gcc Linux that behaves like fast-math on gcc AIX. I tried a lot of gcc options (frounding-math, mfpmath, contract, store, excess, m387, unsafe, reciprocal, finite, ffast-math) and even reordering the operations, with no success.</p>\n\n<hr>\n\n<p>AIX info:</p>\n\n<pre><code>AIX&gt; oslevel -s\n7100-04-05-1720\n\nAIX&gt; prtconf\nSystem Model: IBM,9009-42A\nProcessor Type: PowerPC_POWER9\nProcessor Implementation Mode: POWER 8\nProcessor Version: PV_8_Compat\nNumber Of Processors: 2\nProcessor Clock Speed: 2750 MHz\nCPU Type: 64-bit\nKernel Type: 64-bit\nLPAR Info: 24 dc4_bpdesa6\nMemory Size: 8192 MB\nGood Memory Size: 8192 MB\nPlatform Firmware level: VL910_135\nFirmware Version: IBM,VL910_135\nConsole Login: enable\nAuto Restart: true\nFull Core: false\n\nAIX&gt; gcc --version\ngcc (GCC) 4.2.0\nCopyright (C) 2007 Free Software Foundation, Inc.\n</code></pre>\n\n<p>Linux info:</p>\n\n<pre><code>Linux&gt; cat /etc/os-release\nNAME=\"Red Hat Enterprise Linux Server\"\nVERSION=\"7.5 (Maipo)\"\nID=\"rhel\"\nID_LIKE=\"fedora\"\nVARIANT=\"Server\"\nVARIANT_ID=\"server\"\nVERSION_ID=\"7.5\"\nPRETTY_NAME=\"Red Hat Enterprise Linux\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:redhat:enterprise_linux:7.5:GA:server\"\nHOME_URL=\"https://www.redhat.com/\"\nBUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\n\nREDHAT_BUGZILLA_PRODUCT=\"Red Hat Enterprise Linux 7\"\nREDHAT_BUGZILLA_PRODUCT_VERSION=7.5\nREDHAT_SUPPORT_PRODUCT=\"Red Hat Enterprise Linux\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7.5\"\n\nLinux&gt; gcc --version\ngcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)\nCopyright (C) 2015 Free Software Foundation, Inc.\n</code></pre>\n"}, {"tags": ["python", "c", "ctypes"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 1490798, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/026c4f962ea7482ef15032805d0d46d4?s=128&d=identicon&r=PG", "display_name": "crossmax", "link": "https://stackoverflow.com/users/1490798/crossmax"}, "edited": false, "score": 0, "creation_date": 1570094050, "post_id": 58214537, "comment_id": 102808035, "body": "Changed like you said works perfectly. Thanks @mark-tolonen. About buffer overflow, yes, you are right. I translated my &#39;hola&#39; for &#39;hello&#39; to post it here."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1570089479, "last_edit_date": 1570089479, "creation_date": 1570088715, "answer_id": 58214537, "question_id": 58205955, "link": "https://stackoverflow.com/questions/58205955/passing-struct-from-c-to-python-with-ctypes/58214537#58214537", "title": "Passing struct from C to Python with ctypes", "body": "<p>In <code>test.py</code>, the type of <code>field2</code> is incorrect.  <code>ctypes.c_char * 5</code> is the correct ctypes syntax for a C <code>char[5]</code>.</p>\n\n<p>Also in <code>test.py</code>, change <code>foo_view.field2.value</code> to <code>foo_view.field2</code> since it will not be a pointer.  Without that change, the Python code will throw an exception that isn't currently handled by the <code>test.c</code> code and it will just stop after the first <code>print</code>.</p>\n\n<p>In <code>main.c</code>, <code>sprintf(foo-&gt;field2, \"hello\");</code> is going to have a buffer overflow because of the null terminator.</p>\n"}], "owner": {"reputation": 327, "user_id": 1490798, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/026c4f962ea7482ef15032805d0d46d4?s=128&d=identicon&r=PG", "display_name": "crossmax", "link": "https://stackoverflow.com/users/1490798/crossmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58214537, "answer_count": 1, "score": 0, "last_activity_date": 1570089479, "creation_date": 1570035115, "question_id": 58205955, "link": "https://stackoverflow.com/questions/58205955/passing-struct-from-c-to-python-with-ctypes", "title": "Passing struct from C to Python with ctypes", "body": "<p>I'm trying to pass a <code>struct</code> from C to Python but I've problems when some attribute is a <code>char *</code></p>\n\n<p>test.h</p>\n\n<pre><code>typedef struct _FOO \n{\n    int field1;\n    char field2[5];\n    int  whatever;\n } FOO, *PFOO;\n\n void CallPythonFunction(PFOO foo);\n</code></pre>\n\n<p>test.c</p>\n\n<pre><code>PyObject *module_name, *plugin, *PyTargetFunction, *ppresult, *pargs;\nvoid CallPythonFunction(PFOO foo)\n{\n    // Set PYTHONPATH TO working directory\n    setenv(\"PYTHONPATH\",dir_python_modules,1);\n\n    // Initialize the Python Interpreter\n    Py_Initialize();\n    module_name = PyString_FromString((char*)\"test\");\n\n    // Load the module object\n    if ((plugin = PyImport_Import(module_name)) == NULL) {\n        PyErr_Print();\n        printf(\"Error: PyImport_Import\\n\");\n        return -1;\n    }\n\n    PyTargetFunction = PyObject_GetAttrString(plugin, (char*)\"some_function\");\n    pargs = PyTuple_Pack(1\n        //, PyLong_FromUnsignedLong((unsigned int) validacion)\n        , PyLong_FromVoidPtr(foo)\n        );\n\n    ppresult = PyObject_CallObject(PyTargetFunction, pargs);\n}\n</code></pre>\n\n<p>test.py</p>\n\n<pre><code>import ctypes\nPOINTER = ctypes.POINTER\n\nclass _PyFoo(ctypes.Structure):\n    _fields_ = [\n        ('field1', ctypes.c_int),\n        ('field2', ctypes.c_char_p),\n        #('field2', POINTER(ctypes.c_char), # not work either\n        ('whatever', ctypes.c_int)\n        ]\n\ndef some_function(foo):\n    foo_view = _PyFoo.from_address(foo)\n\n    print(\"foo.field1: \", foo_view.field1)\n    print(\"foo.field2: \", foo_view.field2.value)\n    print(\"foo.whatever: \", foo_view.whatever)\n    pass\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    PFOO foo = malloc(sizeof(FOO));\n    foo-&gt;field1 = 5;\n    sprintf(foo-&gt;field2, \"hello\");\n    foo-&gt;whatever = 3;\n    CallPythonFunction(foo);\n\n    return 0;\n}\n</code></pre>\n\n<p>I need get this output:</p>\n\n<pre><code>('foo.field1: ', 5)\n('foo.field2: ', 'hello')\n('foo.whatever: ', 3)\n</code></pre>\n"}, {"tags": ["javascript", "c", "matrix", "raytracing"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570035003, "post_id": 58205825, "comment_id": 102789938, "body": "Very important: always work in <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\" rel=\"nofollow noreferrer\">strict mode</a> so you\u2019re forced to declare your variables and don\u2019t end up with unpleasant reentrancy surprises."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570035156, "post_id": 58205825, "comment_id": 102790011, "body": "(That\u2019s actually probably the problem, specifically with the undeclared variable <code>f</code>.)"}, {"owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570035485, "post_id": 58205825, "comment_id": 102790177, "body": "I tried &quot;use strict&quot;, it still didn&#39;t work. Also, please note Ive just edited the test7() function slightly, the function call was referencing &quot;m2&quot; instead of &quot;m&quot;, I&#39;ve updated it. That obviously wasn&#39;t the problem... In adding &quot;use strict&quot;, I also updated the var creations in the various for loops with explicit &quot;var&quot; declerations...."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1570036106, "post_id": 58205825, "comment_id": 102790467, "body": "<code>m.rows</code>? <code>m</code> doesn\u2019t have a <code>rows</code> property."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1570037553, "post_id": 58205825, "comment_id": 102791105, "body": "The input for the C and Javascript versions is different: The two <code>m[3][0]</code> differ in signs. (You can use <code>m.length</code> instead of <code>m.rows</code>, and you probably want <code>var temp = initArray(n - 1, n - 1)</code> in <code>getCofactor</code>.)"}, {"owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "edited": false, "score": 0, "creation_date": 1570068059, "post_id": 58205825, "comment_id": 102800091, "body": "The inputs for the C and Javascript versions need to be different; the code is ported, and Javascript doesn&#39;t do pass-by-reference. initArray(rows,cols) does not need to be 0-based (and isn&#39;t), thus do not need to call initArray with (n - 1, n -1). Sorry about the m.rows thing, it was left over from a prev iteration of the code... Still doesn&#39;t work."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1570075604, "post_id": 58205825, "comment_id": 102801286, "body": "You still have a 6 instead of a -6 at <code>[3][0]</code>, like @MOehm said."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1570081571, "post_id": 58205825, "comment_id": 102802616, "body": "Thank you for lecturing me. I thought you wanted to know what&#39;s wrong with your code. But you&#39;re not really interested, you just want to keep on posting &quot;Still doesn&#39;t work&quot;."}, {"owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "edited": false, "score": 0, "creation_date": 1570124205, "post_id": 58205825, "comment_id": 102823637, "body": "Sorry, I apologize. I didn&#39;t actually mean that tone, I just don&#39;t get out much. I really do want to understand, I&#39;ve updated minor errors in the code as I&#39;ve gone."}, {"owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1570126620, "post_id": 58205825, "comment_id": 102824650, "body": "@MOehm Thanks for the clue, I shall take it into account. Presumably the problem is with Javascript semantics, as I am getting the same erroneous result from both the algorithm in the book (when applied to 4x4 matrices), and the code above, ported from the C code. I shall look into it."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "edited": false, "score": 0, "creation_date": 1570574627, "post_id": 58231676, "comment_id": 102953528, "body": "I have just discovered that you answered. It is very late and I am in bed. I will test this code in the morning, but Thank You so much for this. You&#39;re very kind."}, {"owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "edited": false, "score": 0, "creation_date": 1570575506, "post_id": 58231676, "comment_id": 102953694, "body": "I got out of bed, I tested it. It works. Thank you very much. Also, I apologise for the way I initialised the matrix in my code, haha! I have MCI, and sometimes I don&#39;t engage my brain properly.... Thanks again!"}], "tags": [], "owner": {"reputation": 2040, "user_id": 7449706, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302265936460934/picture?type=large", "display_name": "Kevin Ng", "link": "https://stackoverflow.com/users/7449706/kevin-ng"}, "is_accepted": false, "score": 0, "last_activity_date": 1570173608, "creation_date": 1570173608, "answer_id": 58231676, "question_id": 58205825, "link": "https://stackoverflow.com/questions/58205825/calculating-the-determinant-for-a-4x4-matrix-the-raytracer-challenge-javas/58231676#58231676", "title": "Calculating the Determinant for a 4x4 matrix - (The RayTracer Challenge) - Javascript", "body": "<p>I did not know why your code doesn't work. However, I tried translating the code and this below work.</p>\n\n<pre><code>var N = 4; \nfunction initArray(rows, cols)  {\n    var result = [];\n\n    for (var r = 0; r &lt; rows; r++)  {\n        result[r] = [];\n\n        for (var c = 0; c &lt; cols; c++) result[r][c] = 0;\n\n    }\n\n    return result;\n}\n\nfunction getCofactor(mat, temp, p, q, n){ \n    var i = 0, j = 0;\n\n// Looping for each element of the matrix \n    for (var row = 0; row &lt; n; row++) { \n        for (var col = 0; col &lt; n; col++) { \n            // Copying into temporary matrix only those element \n            // which are not in given row and column \n            if (row != p &amp;&amp; col != q) { \n                temp[i][j++] = mat[row][col]; \n\n                // Row is filled, so increase row index and \n                // reset col index \n                if (j === n - 1) { \n                    j = 0; \n                    i++; \n                }\n            }\n        }\n    }\n} \n\n/* Recursive function for finding determinant of matrix. \nn is current dimension of mat[][]. */\n\nfunction determinantOfMatrix(mat, n) {\n\n    var D = 0; // Initialize result \n\n    // Base case : if matrix contains single element \n    if (n == 1) return mat[0][0]; \n\n    var temp = initArray(N,N); // To store cofactors \n\n    var sign = 1; // To store sign multiplier \n\n    // Iterate for each element of first row \n    for (var f = 0; f &lt; n; f++) { \n        // Getting Cofactor of mat[0][f] \n        getCofactor(mat, temp, 0, f, n); \n        D += sign * mat[0][f] * determinantOfMatrix(temp, n - 1); \n\n        // terms are to be added with alternate sign \n        sign = -sign; \n    }\n\n    return D; \n} \n\n// Driver program to test above functions \nvar mat = [[-2, -8, 3, 5], \n           [-3, 1, 7, 3],\n           [1, 2, -9, 6], \n           [-6, 7, 7, -9]\n          ];\n\nalert(\"Determinant of the matrix is : \" + \ndeterminantOfMatrix(mat, N)); \n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9015433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154878220251423/picture?type=large", "display_name": "Lee David O&#39;Dea", "link": "https://stackoverflow.com/users/9015433/lee-david-odea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 620, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570173608, "creation_date": 1570034601, "last_edit_date": 1570068793, "question_id": 58205825, "link": "https://stackoverflow.com/questions/58205825/calculating-the-determinant-for-a-4x4-matrix-the-raytracer-challenge-javas", "title": "Calculating the Determinant for a 4x4 matrix - (The RayTracer Challenge) - Javascript", "body": "<p>I am trying to write a raytracer in Javascript/Canvas, working from \"The Ray Tracer Challenge\" (Jamis Buck). I wrote code that successfully calculated the determinant of a 3x3 matrix, but it failed for a 4x4 matrix, so I deleted the code, and instead have the following code I converted from C code. (The compiled C version works.) It doesn't come up with the correct determinant for a 4x4 input matrix, even though it is ported from C, where it DOES work.</p>\n\n<p>What am I doing wrong? What am I missing?</p>\n\n<p>(I have included the original, working, C code at the bottom.)</p>\n\n<pre><code>\"use strict\";\n// HELPER FUNCTION\n\nfunction initArray(rows, cols)  {\n\nvar result = [];\n\nfor (var r = 0; r &lt; rows; r++)  {\n\n    result[r] = [];\n\n    for (var c = 0; c &lt; cols; c++)  {\n\n        result[r][c] = 0;\n    }\n}\n\nreturn result;\n}\n\n\n//--------------------------------\n// DETERMINANT\n\n// Function to get cofactor of mat[p][q] in temp[][]. n is current \n\n// dimension of mat[][] \n\nfunction getCofactor(mat, temp, p, q, n)\n{\n\n\nvar i = 0, j = 0; \n\n// Looping for each element of the matrix \nfor (var row = 0; row &lt; n; row++) \n{ \n    for (var col = 0; col &lt; n; col++) \n    { \n        // Copying into temporary matrix only those element \n        // which are not in given row and column \n        if (row != p &amp;&amp; col != q) \n        { \n            temp[i][j++] = mat[row][col];\n\n            // Row is filled, so increase row index and \n            // reset col index \n            if (j == n - 1) \n            {\n                j = 0; \n                i++; \n            }\n        }\n    } \n}\n\nreturn temp;\n}\n\n\n/* Recursive function for finding determinant of matrix. \nn is current dimension of mat[][]. */\n\nfunction determinantOfMatrix(mat, n) \n{ \n\nvar D = 0; // Initialize result \n\n// Base case : if matrix contains single element \nif (n == 1) \n    return mat[0][0]; \n\nvar temp = initArray(4, 4); // To store cofactors \n\nvar sign = 1; // To store sign multiplier \n\n// Iterate for each element of first row \nfor (var f = 0; f &lt; n; f++) \n{ \n    // Getting Cofactor of mat[0][f] \n    temp = getCofactor(mat, temp, 0, f, n); \n    D += sign * mat[0][f] * determinantOfMatrix(temp, n - 1); \n\n    // terms are to be added with alternate sign \n    sign = -sign; \n}\n\nreturn D; \n} \n\n// Finally, this is how I test it:\n\nfunction test7()    {\n\nvar m = initArray(4, 4);\n\nm[0][0] = -2, m[0][1] = -8, m[0][2] = 3, m[0][3] = 5;\nm[1][0] = -3, m[1][1] = 1, m[1][2] = 7, m[1][3] = 3;\nm[2][0] = 1, m[2][1] = 2, m[2][2] = -9, m[2][3] = 6;\nm[3][0] = 6, m[3][1] = 7, m[3][2] = 7, m[3][3] = -9;\n\n/* 4x4 TEST MATRIX\n\n    -2,    -8,    3,    5\n    -3,     1,    7,    3\n     1,     2,   -9,    6\n     6,     7,    7,   -9\n\n*/\n\nvar determinant = determinantOfMatrix(m, 4 /*m.length*/);\n\nalert(\"determinant = \" + determinant); // SHOULD BE -4071\n}\n</code></pre>\n\n<p>//---------------------- BELOW IS THE C CODE, WHICH WORKS --------</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Dimension of input square matrix \n\n#define N 4 \n\n// Function to get cofactor of mat[p][q] in temp[][]. n is current \n// dimension of mat[][] \n\nvoid getCofactor(int mat[N][N], int temp[N][N], int p, int q, int n) \n{ \n\nint i = 0, j = 0; \n\n// Looping for each element of the matrix \nfor (int row = 0; row &lt; n; row++) \n{ \n    for (int col = 0; col &lt; n; col++) \n    { \n        // Copying into temporary matrix only those element \n        // which are not in given row and column \n        if (row != p &amp;&amp; col != q) \n        { \n            temp[i][j++] = mat[row][col]; \n\n            // Row is filled, so increase row index and \n            // reset col index \n            if (j == n - 1) \n            { \n                j = 0; \n                i++; \n            }\n        } \n    }\n}\n} \n\n/* Recursive function for finding determinant of matrix. \nn is current dimension of mat[][]. */\n\nint determinantOfMatrix(int mat[N][N], int n) \n{ \n\nint D = 0; // Initialize result \n\n// Base case : if matrix contains single element \nif (n == 1) \n    return mat[0][0]; \n\nint temp[N][N]; // To store cofactors \n\nint sign = 1; // To store sign multiplier \n\n// Iterate for each element of first row \nfor (int f = 0; f &lt; n; f++) \n{ \n    // Getting Cofactor of mat[0][f] \n    getCofactor(mat, temp, 0, f, n); \n    D += sign * mat[0][f] * determinantOfMatrix(temp, n - 1); \n\n    // terms are to be added with alternate sign \n    sign = -sign; \n}\n\nreturn D; \n} \n\n\n// Driver program to test above functions \n\nint main() \n{ \n\nint mat[N][N] = {{-2, -8, 3, 5}, \n                {-3, 1, 7, 3},\n                {1, 2, -9, 6}, \n                {-6, 7, 7, -9} \n                }; \n\nprintf(\"Determinant of the matrix is : %d\", determinantOfMatrix(mat, N)); \nreturn 0; \n} \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570035985, "post_id": 58205742, "comment_id": 102790403, "body": "You may find <a href=\"https://pastebin.com/R2AewR3A\" rel=\"nofollow noreferrer\">Singly Linked List of Integers (example)</a> helpful."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570036443, "post_id": 58205742, "comment_id": 102790613, "body": "The example code is missing a main function, other than that it builds okay."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 2, "last_activity_date": 1570039829, "last_edit_date": 1570039829, "creation_date": 1570034517, "answer_id": 58205804, "question_id": 58205742, "link": "https://stackoverflow.com/questions/58205742/dynamic-memory-only-being-accessible-inside-function-call/58205804#58205804", "title": "Dynamic memory only being accessible inside function call", "body": "<p>Consider using these small improvements:  </p>\n\n<p>The prototype:</p>\n\n<pre><code>List newList(void);\n</code></pre>\n\n<p>Should be changed to:</p>\n\n<pre><code>List  *newList(void);\n</code></pre>\n\n<p>Then the return statement in that function call should be:</p>\n\n<pre><code>return pL; //(remove *)\n</code></pre>\n\n<p>This suggestion is the same for the other functions attempting similar usage, such as:  <code>ListObj newListObj(void)</code> etc.</p>\n\n<p>Do not forget to free this memory when done using it in the calling function.</p>\n\n<p>The following is basically your code <em>with no other improvements</em> <strong><em>other than</em></strong> addition of a <code>main()</code> function with one example call, the suggestions regarding using pointers, and follow-on side-affects of using pointers.  eg, struct pointer notation, freeing, etc.:  ( It builds and runs, but I am not sure these improvements will address other problems the code may have.)  </p>\n\n<pre><code>List * newList(void)\n{\n    List* pL = malloc(sizeof(List));\n\n    if (pL == NULL)\n    {\n        fprintf(stderr, \"malloc failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    pL-&gt;front = pL-&gt;back = pL-&gt;cursor = NULL;\n\n    return pL;\n}\n\nListObj * newListObj(void)\n{\n    ListObj* pLO = malloc(sizeof(ListObj));\n\n    if (pLO == NULL)\n    {\n        fprintf(stderr, \"malloc failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    pLO-&gt;next = pLO-&gt;prev = NULL;\n\n    return pLO;\n}\n\nint length(List *L)\n{\n    L-&gt;cursor = L-&gt;front;\n    int n = 0;\n\n    while (L-&gt;cursor != NULL)\n    {\n        n++;\n        L-&gt;cursor = L-&gt;cursor-&gt;next;\n    }\n\n    return n;\n}\n\nvoid append(List *L, int data)\n{\n    ListObj *LO = newListObj();\n    LO-&gt;data = data;\n\n    if (L-&gt;back != NULL)\n    {\n        LO-&gt;prev = L-&gt;back;\n        L-&gt;back-&gt;next = LO;\n    }\n\n    L-&gt;back = LO;\n    if (L-&gt;front == NULL)\n    {\n        L-&gt;front = LO;\n    }\n\n    if (L-&gt;front == NULL)\n    {\n        printf(\"append null\\n\");\n    }\n}\n\nint main(void)\n{\n    List *L = newList();\n    for (int i = 0; i &lt; 5; i++)\n    {\n        if (length(L) == 0)\n        {\n            append(L, i);\n        }\n    }\n    free(L);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 1, "last_activity_date": 1570034993, "last_edit_date": 1570034993, "creation_date": 1570034666, "answer_id": 58205845, "question_id": 58205742, "link": "https://stackoverflow.com/questions/58205742/dynamic-memory-only-being-accessible-inside-function-call/58205845#58205845", "title": "Dynamic memory only being accessible inside function call", "body": "<p>You are returning a copy of the dynamically allocated memory object. You should return a pointer to the dynamically allocated memory object instead, and you should be passing the pointers to the dynamically allocated memory objects as parameters of the functions that use them instead of passing copies of the dynamically allocated memory objects.</p>\n\n<pre><code>typedef struct ListObj\n{\n    int data;\n    struct ListObj* next;\n    struct ListObj* prev;\n} ListObj;\n\ntypedef struct List\n{\n    struct ListObj* front;\n    struct ListObj* back;\n    struct ListObj* cursor;\n} List;\n\nList* newList(void)\n{\n    List* pL = malloc(sizeof(List));\n\n    if (pL == NULL)\n    {\n        fprintf(stderr, \"malloc failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    pL-&gt;front = pL-&gt;back = pL-&gt;cursor = NULL;\n\n    return pL;\n}\n\nListObj* newListObj(void)\n{\n    ListObj* pLO = malloc(sizeof(ListObj));\n\n    if (pLO == NULL)\n    {\n        fprintf(stderr, \"malloc failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    pLO-&gt;next = pLO-&gt;prev = NULL;\n\n    return pLO;\n}\n\nint length(List* pL)\n{\n    pL-&gt;cursor = pL-&gt;front;\n    int n = 0;\n\n    while (pL-&gt;cursor != NULL)\n    {\n        n++;\n        pL-&gt;cursor = pL-&gt;cursor-&gt;next;\n    }\n\n    return n;\n}\n\nvoid append(List* pL, int data)\n{\n    ListObj* pLO = newListObj();\n    pLO-&gt;data = data;\n\n    if (pL-&gt;back != NULL)\n    {\n        pLO-&gt;prev = pL-&gt;back;\n        pL-&gt;back-&gt;next = pLO;\n    }\n\n    pL-&gt;back = pLO;\n    if (pL-&gt;front == NULL)\n    {\n        pL-&gt;front = pLO;\n    }\n\n    if (pL-&gt;front == NULL)\n    {\n        printf(\"append null\\n\");\n    }\n}\n\nList* pL = newList();\n\nfor (i = 0; i &lt; 5; i++)\n{\n    if (length(pL) == 0)\n    {\n        append(pL, i);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8475451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WyWCT.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/8475451/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58205804, "answer_count": 2, "score": 0, "last_activity_date": 1570039829, "creation_date": 1570034270, "question_id": 58205742, "link": "https://stackoverflow.com/questions/58205742/dynamic-memory-only-being-accessible-inside-function-call", "title": "Dynamic memory only being accessible inside function call", "body": "<p>I am creating dynamic memory using malloc() and it works within the function that created it, but after that function ends it no longer works. I am trying to make it so that the dynamic memory that is created within a function can be accessed even after the function that it is created within ends.</p>\n\n<pre><code>typedef struct ListObj\n{\n    int data;\n    struct ListObj* next;\n    struct ListObj* prev;\n} ListObj;\n\ntypedef struct List\n{\n    struct ListObj* front;\n    struct ListObj* back;\n    struct ListObj* cursor;\n} List;\n\nList newList(void)\n{\n    List* pL = malloc(sizeof(List));\n\n    if (pL == NULL)\n    {\n        fprintf(stderr, \"malloc failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    pL-&gt;front = pL-&gt;back = pL-&gt;cursor = NULL;\n\n    return *pL;\n}\n\nListObj newListObj(void)\n{\n    ListObj* pLO = malloc(sizeof(ListObj));\n\n    if (pLO == NULL)\n    {\n        fprintf(stderr, \"malloc failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    pLO-&gt;next = pLO-&gt;prev = NULL;\n\n    return *pLO;\n}\n\nint length(List L)\n{\n    L.cursor = L.front;\n    int n = 0;\n\n    while (L.cursor != NULL)\n    {\n        n++;\n        L.cursor = L.cursor-&gt;next;\n    }\n\n    return n;\n}\n\nvoid append(List L, int data)\n{\n    ListObj LO = newListObj();\n    LO.data = data;\n\n    if (L.back != NULL)\n    {\n        LO.prev = L.back;\n        L.back-&gt;next = &amp;LO;\n    }\n\n    L.back = &amp;LO;\n    if (L.front == NULL)\n    {\n        L.front = &amp;LO;\n    }\n\n    if (L.front == NULL)\n    {\n        printf(\"append null\\n\");\n    }\n}\n\nList L = newList();\n\nfor (i = 0; i &lt; 5; i++)\n{\n    if (length(L) == 0)\n    {\n        append(L, i);\n    }\n}\n</code></pre>\n\n<p>length(L) keeps returning 0, where it should be increasing by 1 each time append() is called.</p>\n"}, {"tags": ["c", "arrays", "dynamic", "malloc", "allocation"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 6, "creation_date": 1570033317, "post_id": 58205495, "comment_id": 102789134, "body": "<code>for(int i = 0; i &lt; 0; i++)</code> -- might want to change the limit of the loop that scans the input for the first vector. <code>:)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570033433, "post_id": 58205495, "comment_id": 102789192, "body": "Indeed it&#39;s the <i>first</i> loop that is skipped ;)"}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1570038258, "post_id": 58205495, "comment_id": 102791410, "body": "Side note - you want to use &#39;calloc&#39; instead of malloc. This will zero the allocated memory, eliminating lot of potential pitfalls. The common method is &#39;double *v = (double *) calloc(n, sizeof(*v)) ;"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1570088265, "last_edit_date": 1570088265, "creation_date": 1570087958, "answer_id": 58214339, "question_id": 58205495, "link": "https://stackoverflow.com/questions/58205495/second-for-loop-being-ignored-after-first-for-loop-in-program-that-calculate/58214339#58214339", "title": "Second &#39;for&#39; loop being ignored after first &#39;for&#39; loop in program that calculate the scalar product in c", "body": "<p>The first <code>for</code> loop has a typo: <code>for(int i = 0; i &lt; 0; i++)</code> it stops immediately.</p>\n\n<p>It should be:</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++) {\n</code></pre>\n\n<p>Note also these remarks:</p>\n\n<ul>\n<li>you should check the return values of <code>scanf()</code></li>\n<li>you should check for memory allocation failure</li>\n<li>you do not need to store the individual products into a local array, which might be very long and pose problems.</li>\n<li>you should free allocated memory.</li>\n</ul>\n\n<p>Here is a corrected and simplified version:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble scalarproduct(double *v, double *w, int n) {\n    double scalprod = 0; \n    for (int i = 0; i &lt; n; i++) {\n        scalprod += v[i] * w[i]\n    }\n    return scalprod;\n}\n\nint main() {\n    int n;\n    if (scanf(\"%d\", &amp;n) == 1 &amp;&amp; n &gt; 0) {\n        double *v = (double *)malloc(sizeof(double) * n);\n        double *w = (double *)malloc(sizeof(double) * n);\n        if (v == NULL || w == NULL) {\n            printf(\"cannot allocate memory\\n\");\n            return 1;\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if (scanf(\"%lf\", &amp;v[i]) != 1) {\n                printf(\"invalid input\\n\");\n                return 1;\n            }\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if (scanf(\"%lf\", &amp;w[i]) != 1) {\n                printf(\"invalid input\\n\");\n                return 1;\n            }\n        }\n        printf(\"Scalar product=%f\\n\", scalarproduct(v, w, n));\n        free(v);\n        free(w);\n    }\n    return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12016848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eda1809ab44c2fb483c41f3408edf8?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah_McDermott", "link": "https://stackoverflow.com/users/12016848/hannah-mcdermott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570088265, "creation_date": 1570033223, "question_id": 58205495, "link": "https://stackoverflow.com/questions/58205495/second-for-loop-being-ignored-after-first-for-loop-in-program-that-calculate", "title": "Second &#39;for&#39; loop being ignored after first &#39;for&#39; loop in program that calculate the scalar product in c", "body": "<p>I am trying to scan two vector input from the keyboard, and then create a function that will return the scalar product of the two vectors. However when I run the program, as soon as it scans the first vector in the first for loop, the program ends and the scalar product is 0. I don't understand why it doesn't let me scan the second vector. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble scalarproduct(double *v, double *w, int n){\n    double vw[n];\n    for(int i = 0; i &lt; n; i++){\n        vw[i] = (v[i] * w[i]); \n    }\n    double scalprod = 0; \n    for(int i = 0; i &lt; n; i++){\n        scalprod += vw[i];\n    }\n    return scalprod;\n}\n\nint main(){\n    int n;\n    scanf(\"%d\", &amp;n);\n    double *v; \n    v = (double *) malloc(sizeof(double) * n);\n    double *w;\n    w = (double *) malloc(sizeof(double) * n);\n    for(int i = 0; i &lt; 0; i++){\n        scanf(\"%lf\", &amp;v[i]);       \n    }  \n    for (int i = 0; i &lt; n; i++){\n        scanf(\"%lf\", &amp;w[i]);\n    }\n    printf(\"Scalar product=%lf\\n\", scalarproduct(v,w,n));\n    return 0; \n }\n</code></pre>\n\n<p>This is what the input should look like:</p>\n\n<pre><code>3\n1.1\n2.5\n3.0\n1.0\n1.0\n1.0\n</code></pre>\n\n<p>However it only lets me input until 3.0, and then the program skips the second for loop to the print statement. How can i fix this? </p>\n"}, {"tags": ["c", "constants", "language-lawyer", "undefined-behavior", "extern"], "comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1570037692, "post_id": 58205396, "comment_id": 102791169, "body": "FWIW <code>#pragma once</code> is also bogus. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 2, "last_activity_date": 1570037457, "creation_date": 1570037457, "answer_id": 58206471, "question_id": 58205396, "link": "https://stackoverflow.com/questions/58205396/is-this-aditional-const-on-extern-an-ub/58206471#58206471", "title": "Is this aditional const on extern an UB?", "body": "<p>Yes. From Annex J.2:</p>\n\n<blockquote>\n  <ul>\n  <li>Two declarations of the same object or function specify types that are not compatible (6.2.7). </li>\n  </ul>\n</blockquote>\n\n<p>And 6.2.7 \u00b62:</p>\n\n<blockquote>\n  <p>All declarations that refer to the same object or function shall have compatible type; otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p>And 6.7.3 \u00b610:</p>\n\n<blockquote>\n  <p>For two qualified types to be compatible, both shall have the identically qualified version of a compatible type; the order of type qualifiers within a list of specifiers or qualifiers does not affect the specified type.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 2, "last_activity_date": 1570091038, "last_edit_date": 1570091038, "creation_date": 1570054173, "answer_id": 58209967, "question_id": 58205396, "link": "https://stackoverflow.com/questions/58205396/is-this-aditional-const-on-extern-an-ub/58209967#58209967", "title": "Is this aditional const on extern an UB?", "body": "<p>Consider the following compilation unit:</p>\n\n<pre><code>#include \"h.h\"\nextern struct A* const a;\nvoid externalFunction(void);\nint myFunction(void)\n{\n  struct A *p1,*p2;\n  p1 = a;\n  externalFunction();\n  p2 = a;\n  return p2-p1;\n}\n</code></pre>\n\n<p>The Standard would allow a compiler to assume, on the basis of the <code>const</code> directive, that the value of <code>a</code> would not be changed as a consequence of the call to <code>externalFunction</code>.  Note that it makes no effort to consider whether there might be advantages to allowing for the possibility that an external function might modify <code>a</code>.  For example, on some platforms, <code>a</code> might normally be write-protected, but an external function (perhaps written in another language) might be capable of disabling the write protection, modifying <code>a</code>, and then re-enabling the protection.  Whether it would be useful for an implementation to allow for such possibilities would depend upon the range of purposes for which an implementation claims to be suitable, which is something the Committee can't possibly know about, but which compiler writers should.</p>\n"}], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58206471, "answer_count": 2, "score": 2, "last_activity_date": 1570091038, "creation_date": 1570032845, "question_id": 58205396, "link": "https://stackoverflow.com/questions/58205396/is-this-aditional-const-on-extern-an-ub", "title": "Is this aditional const on extern an UB?", "body": "<p>I have the following:</p>\n\n<pre><code>//h.h file\n#pragma once\nstruct A { int x; };\n\n//a.c file\n#include \"h.h\"\nstruct A* a;\n\n//b.c\n#include \"h.h\"\nextern struct A* const a;\nint main() {}\n</code></pre>\n\n<p>I added an extra <code>const</code> on <code>extern</code> declaration. Adding this <code>const</code> would be UB?</p>\n\n<p>If It's not UB, doing like below inside <code>main</code> would be UB?</p>\n\n<pre><code>(*(struct A**)&amp;a) = malloc(sizeof(struct A));\n</code></pre>\n"}, {"tags": ["c", "ascii", "iconv", "libiconv"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1570032410, "post_id": 58205170, "comment_id": 102788706, "body": "From the doc: &quot;The iconv function converts one multibyte character at a time&quot;"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570032450, "post_id": 58205170, "comment_id": 102788717, "body": "That seems like such a weird thing to do though :D  What are you going to use this interesting function for?"}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1570032702, "post_id": 58205170, "comment_id": 102788834, "body": "Well, first of all the command you posted does not produce that output on my machine, but rather it errors out (maybe remove the <code>&#47;&#47;IGNORE</code>?). Secondly, <code>iconv</code> is just a simple command line utility, in a C program you <i>should</i> be able to just try and translate each Unicode code-point by itself and see the result. What did you write that didn&#39;t work? You should add the relevant C code."}, {"owner": {"reputation": 12738, "user_id": 131050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f3be77c4c9c91bb4e70ae93a2e23752e?s=128&d=identicon&r=PG", "display_name": "jeffreyveon", "link": "https://stackoverflow.com/users/131050/jeffreyveon"}, "edited": false, "score": 0, "creation_date": 1570035214, "post_id": 58205170, "comment_id": 102790042, "body": "I&#39;ve added the actual code."}], "answers": [{"tags": [], "owner": {"reputation": 983, "user_id": 7018504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268a8a29fca7ea8527389dbbaf562587?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Haible", "link": "https://stackoverflow.com/users/7018504/bruno-haible"}, "is_accepted": false, "score": 0, "last_activity_date": 1570052444, "creation_date": 1570052444, "answer_id": 58209725, "question_id": 58205170, "link": "https://stackoverflow.com/questions/58205170/iconv-retaining-characters-that-cannot-be-converted-to-ascii/58209725#58209725", "title": "iconv - retaining characters that cannot be converted to ascii", "body": "<p><code>iconv</code> does not support the conversion behaviour that you want to see out-of-the-box, because it is a quite odd behaviour: If it's OK to have a \u2211 in the output, why would it not have OK to have a \u00df in the output?</p>\n\n<p>Anyway, you can implement this conversion through a function of your own, that uses iconv, as follows:</p>\n\n<ol>\n<li>Allocate two conversion descriptors:\n\n<pre><code>iconv_t cd0 = iconv_open(\"UTF-8\", \"UTF-8\");\niconv_t cd1 = iconv_open(\"ASCII//TRANSLIT\", \"UTF-8\");\n</code></pre></li>\n<li>Use a loop that converts part of the string repeatedly, through iconv() with <code>cd1</code>. When the call fails with errno == EILSEQ, you know that it's because of a character that cannot be transliterated to ASCII.</li>\n<li>At this point use an iconv() call with <code>cd0</code>, to convert one and only one character. You do this by calling iconv() with in = 1, then if that fails with in = 2, and so on up to in = 4. (If all of these fail, you must have invalid input; your best bet is to skip one input byte and leave a single '?' in output.)</li>\n<li>After the no-op conversion of a single character, go back to step 2.</li>\n</ol>\n"}], "owner": {"reputation": 12738, "user_id": 131050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f3be77c4c9c91bb4e70ae93a2e23752e?s=128&d=identicon&r=PG", "display_name": "jeffreyveon", "link": "https://stackoverflow.com/users/131050/jeffreyveon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570084274, "creation_date": 1570031909, "last_edit_date": 1570084274, "question_id": 58205170, "link": "https://stackoverflow.com/questions/58205170/iconv-retaining-characters-that-cannot-be-converted-to-ascii", "title": "iconv - retaining characters that cannot be converted to ascii", "body": "<p>I'm using iconv's transliterate function to convert a unicode string to the nearest ASCII equivalent. However, the string contains some symbols which do not have an ASCII equivalent. I want to retain such symbols without dropping them. </p>\n\n<p>Currently, here's what I am doing:</p>\n\n<pre><code>iconv_t cd = iconv_open(\"ASCII//IGNORE//TRANSLIT\", \"UTF-8\");\nconst char *utf8 = \"\u00e7 \u00df \u2211 a\";\n\nchar* in = const_cast&lt;char*&gt;(utf8);\nsize_t in_bytes = strlen(in);\n\nchar buf[BUFSIZ] = {};\nchar* out = buf;\nsize_t out_bytes = sizeof(buf);\n\niconv(cd, &amp;in, &amp;in_bytes, &amp;out, &amp;out_bytes);\n\nprintf(\"%s\", buf);\n\n// prints \nc ss  a\n</code></pre>\n\n<p>How do I configure iconv to produce an output like the following:</p>\n\n<pre><code>c ss \u2211\n</code></pre>\n\n<p>If this is not possible with iconv, is there a way to achieve this programatically otherwise?</p>\n"}, {"tags": ["c", "linux", "terminal", "termios"], "comments": [{"owner": {"reputation": 17723, "user_id": 733077, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=128&d=identicon&r=PG", "display_name": "luser droog", "link": "https://stackoverflow.com/users/733077/luser-droog"}, "edited": false, "score": 1, "creation_date": 1570086864, "post_id": 58205140, "comment_id": 102804542, "body": "You might find <a href=\"https://stackoverflow.com/q/34824604/733077\">this question of mine</a> useful in dealing with termios raw input."}], "answers": [{"tags": [], "owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "is_accepted": true, "score": 1, "last_activity_date": 1570130166, "last_edit_date": 1570130166, "creation_date": 1570071134, "answer_id": 58211729, "question_id": 58205140, "link": "https://stackoverflow.com/questions/58205140/backspace-b-not-clearing-text-in-non-canonical-mode-termios/58211729#58211729", "title": "Backspace(\\b) not clearing text in Non-canonical mode termios", "body": "<blockquote>\n  <p>i am trying to clear text by pressing the backspace key, i am using termios in non canonical mode. </p>\n</blockquote>\n\n<p>Your termios initialization has a few bugs (which are just part of the problems in the code).<br>\nThe following statement from <strong>init_keyboard()</strong> is illogical:  </p>\n\n<pre><code>    new_settings.c_lflag &amp;= (ECHO | ECHOE | ~ICANON);  \n</code></pre>\n\n<p>Presumably you intended to disable the ICANON attribute (i.e. use non-canonical input).<br>\nIs your intent to enable the ECHO and ECHOE attributes?  (I would think so based on other parts of your code.)  </p>\n\n<p>This statement does not enable the ECHO and ECHOE attributes, but ends up merely preserving whatever state they are already in.<br>\nThis is a latent bug that is, by dumb luck, likely never to be triggered.</p>\n\n<p>Since both of the following statements use the same index, VMIN,  shouldn't one of them be indexing VTIME instead?  </p>\n\n<pre><code>    new_settings.c_cc[VMIN] = 1;\n    new_settings.c_cc[VMIN] = 0;  \n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>i have created a conditional statement that when the users press backspace it should remove the previous character by going one character back.</p>\n</blockquote>\n\n<p>Note that your code only tries to \"<em>remove the previous character\"</em> that is displayed.<br>\nThere is no attempt to \"<em>remove the previous character\"</em> from the input buffer.<br>\nThis is probably another bug.</p>\n\n<blockquote>\n  <p>But when i press Backspace instead of removing the character it prints ^? on that line.</p>\n</blockquote>\n\n<p>That doesn't seem to be an accurate reporting of what your code does.  </p>\n\n<p>When I executed your code in a PC terminal window (LXTerminal 0.2.0), I end up seeing just <code>^</code> rather than the <code>^?</code> that you report for the Backspace key.<br>\nTo be clear, the Backspace key is echoed/displayed as <code>^?</code> (because ECHOCTL is enabled by default), but your program tries to perform additional processing in response to that particular input, and that results in displaying just <code>^</code>.</p>\n\n<p>Your code assumes that each input character is echoed (i.e. displayed) as a single character.<br>\nThat's a faulty assumption.<br>\nA key that generates an ASCII control code instead of a printable character will be echoed/displayed as two characters (as you reported).<br>\nA \"special\" key (from a PC keyboard) that doesn't readily map to an ASCII code will be read as an escape sequence, i.e. a sequence of several (3 to 5 or more) characters.  </p>\n\n<p>If you expect to \"erase\" or overwrite the previous character as well as the echoed Backspace, then your code would need to go back (at least) three (3) characters.<br>\nIn other words  </p>\n\n<pre><code>        const char delbuf[] = \"\\b \\b\";\n</code></pre>\n\n<p>needs to be   </p>\n\n<pre><code>        const char delbuf[] = \"\\b\\b\\b   \\b\\b\\b\";\n</code></pre>\n\n<p>Note that this is not a complete solution because it can only \"remove\" a single previous character, and a previous control character or an escape sequence will not be handled correctly.<br>\nThis answer is only to explain why you are not getting the result you expect.  </p>\n\n<hr>\n\n<p>Be aware that the use of local echo (by termios) could be considered part of the problem since you don't seem to grasp the ramifications.<br>\nNon-canonical mode typically suppresses any automatic echoing so that handling of control characters and escape sequences is simplified.  </p>\n\n<p>FYI if there was no automatic echo, then the <code>backspace, space, backspace</code> sequence you tried to use could be effective (because there is only the one previous character to overwrite and there would be no echo of the Backspace).</p>\n\n<hr>\n\n<p>Note that your code uses a <em>busy wait</em> to check/retrieve the keyboard input (because VTIME is likely set to 0 and VMIN is 0).<br>\nThis is the <em>most</em> inefficient method of input that wastes CPU cycles, and on a battery-powered system drains the battery faster than necessary.<br>\nEven if you added a delay, the code would still be inefficiently <em>polling</em> the system buffer for data instead of utilizing the efficient <em>event-driven</em> capabilities provided by the OS.  </p>\n"}], "owner": {"reputation": 327, "user_id": 6567890, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/e27a30b399982655663b8483e0c21c70?s=128&d=identicon&r=PG&f=1", "display_name": "Osama X&#228;w&#227;&#241;z", "link": "https://stackoverflow.com/users/6567890/osama-x%c3%a4w%c3%a3%c3%b1z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 58211729, "answer_count": 1, "score": 1, "last_activity_date": 1570130166, "creation_date": 1570031812, "last_edit_date": 1570071193, "question_id": 58205140, "link": "https://stackoverflow.com/questions/58205140/backspace-b-not-clearing-text-in-non-canonical-mode-termios", "title": "Backspace(\\b) not clearing text in Non-canonical mode termios", "body": "<p>i am trying to clear text by pressing the backspace key, i am using termios in non canonical mode. i have created a conditional statement that when the users press backspace it should remove the previous character by going one character back.</p>\n\n<p>But when i press Backspace instead of removing the character it prints <code>^?</code> on that line.</p>\n\n<p>I don't want to use canonical mode.</p>\n\n<p>My Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;string.h&gt; \n#define MAX_COMMANDS 1000\n#define MAX_LENGTH 200\n\nstatic struct termios initial_settings, new_settings;\nstatic int peek_character = -1;\nvoid init_keyboard();\nvoid close_keyboard();\nint kbhit();\nint readch();\n\nvoid run(char inp[]) {\n    system(inp);\n}\n\nint main() {\n    //65 = UP\n    //66 = DOWN\n    //Backspace = 127\n    int ch;\n    char str[MAX_COMMANDS][MAX_LENGTH];\n    init_keyboard();\n    int i = 0;\n    int j = 0;\n\n    while(ch != 'q') {\n\n    if(kbhit()) {\n\n        ch = readch();\n\n        if (ch == 127) {\n            const char delbuf[] = \"\\b \\b\";\n            write(STDOUT_FILENO, delbuf, strlen(delbuf));\n        }\n\n        if (ch == 10) {\n\n            run(str[i]);\n            i++;\n            j = 0;\n\n        }  else {\n            str[i][j] = ch;\n\n            j++;\n        }\n\n\n    }\n\n}\n    close_keyboard();\n    exit(0);\n}\n\nvoid init_keyboard() {\n    tcgetattr(0, &amp;initial_settings);\n    new_settings = initial_settings;\n    new_settings.c_lflag &amp;= (ECHO | ECHOE | ~ICANON);\n    new_settings.c_lflag &amp;= ~ISIG;\n    new_settings.c_cc[VMIN] = 1;\n    new_settings.c_cc[VMIN] = 0;\n    tcsetattr(0, TCSANOW, &amp;new_settings);\n\n}\n\nvoid close_keyboard() {\n\n    tcsetattr(0, TCSANOW, &amp;initial_settings);\n\n}\n\nint kbhit() {\n    char ch;\n    int nread;\n\n    if (peek_character != -1) {\n        return 1;\n    }\n\n    new_settings.c_cc[VMIN] = 0;\n    tcsetattr(0, TCSANOW, &amp;new_settings);\n    nread = read(0, &amp;ch,1);\n    new_settings.c_cc[VMIN]=1;\n    tcsetattr(0, TCSANOW, &amp;new_settings);\n\n    if (nread == 1) {\n        peek_character = ch;\n        return 1;\n    }\n    return 0;\n}\n\n\nint readch() {\n    char ch;\n\n    if (peek_character != -1) {\n        ch = peek_character;\n        peek_character = -1;\n        return ch;\n    }\n\n    read(0, &amp;ch,1);\n    return ch;\n}\n\n\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1570029586, "post_id": 58204443, "comment_id": 102787206, "body": "Add <code>int counter = 0;</code> and <code>++counter;</code> in appropriate places?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1570029789, "post_id": 58204443, "comment_id": 102787307, "body": "What, specifically, do you mean by &quot;the bubble displacement&quot;? Is that where you are comparing?"}, {"owner": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1570036578, "post_id": 58204443, "comment_id": 102790672, "body": "@Caleth With the &quot;bubble displacement&quot; I mean the number of swaps made by the program. The total number, sorry if Im being a little bit redundant, english is not my main language."}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1570029690, "creation_date": 1570029690, "answer_id": 58204551, "question_id": 58204443, "link": "https://stackoverflow.com/questions/58204443/bubble-sort-options-need-to-add-a-print-bubble-procedure-that-prints-the-bubb/58204551#58204551", "title": "Bubble sort options. Need to add a (print_bubble) procedure that prints the bubble displacement", "body": "<p>If you use <code>{}</code> to deliminate scopes, it's easy to find a place to count swaps.</p>\n\n<pre><code>void bubbleSort(int arr[], int n) \n{ \n   int i, j; \n   for (i = 0; i &lt; n-1; i++)       \n   {\n       for (j = 0; j &lt; n-i-1; j++)\n       {\n           if (arr[j] &gt; arr[j+1]) \n           {\n              swap(&amp;arr[j], &amp;arr[j+1]); \n              // increase swap count here\n           }\n       }\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "edited": false, "score": 0, "creation_date": 1570042246, "post_id": 58204574, "comment_id": 102793211, "body": "Thank you so much, I literally cannot thank you enough! It worked just as I wished, now, I have some sort of problem, I coded a section so every iteration of the bubble sort could be printed. However, I need to specify at the left side of every printing the variable &quot;j&quot; and on the other side the variable &quot;i&quot; (those who are being swapped). Im almost sure im writing something wrong...   ```   ```"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "edited": false, "score": 0, "creation_date": 1570042436, "post_id": 58204574, "comment_id": 102793308, "body": "You are welcome. If the your current sort problem is related, you can add a comment here and I will try and help. If it is a different issue, then you probably should ask another question. Above, your sort algorithm worked fine (though you should probably add <code>{...}</code> to enclose everything below each <code>for</code> loop so you don&#39;t confuse yourself if you add another statement below each loop.) In other words <code>for (...) for (...) if (...) { ... }</code> only works if there are no other statement below each loop <code>for (...) { for (...) { if (...) {...} } }</code> works regardless."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "edited": false, "score": 0, "creation_date": 1570042702, "post_id": 58204574, "comment_id": 102793446, "body": "That should be <code>size_t *s</code> as the parameter. You are passing a pointer. (e.g. a normal variable that holds the address to something else as its value). By using <code>size_t s</code>, the function receives a copy of <code>s</code> so any changes made to <code>s</code> are never seen back in the calling function."}, {"owner": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "edited": false, "score": 0, "creation_date": 1570042712, "post_id": 58204574, "comment_id": 102793448, "body": "Thank you so much for your help! I will make a new question..."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "edited": false, "score": 0, "creation_date": 1570042739, "post_id": 58204574, "comment_id": 102793458, "body": "Check the comment above first -- I may have answered it <code>:)</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "edited": false, "score": 0, "creation_date": 1570042925, "post_id": 58204574, "comment_id": 102793553, "body": "Also, after you are satisfied that enough time has elapsed to collect answers here, please take a look at: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>. Choose the answer that answered your question (mine or not, no matter). That makes sure the question is marked as answered."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1570030099, "last_edit_date": 1570030099, "creation_date": 1570029786, "answer_id": 58204574, "question_id": 58204443, "link": "https://stackoverflow.com/questions/58204443/bubble-sort-options-need-to-add-a-print-bubble-procedure-that-prints-the-bubb/58204574#58204574", "title": "Bubble sort options. Need to add a (print_bubble) procedure that prints the bubble displacement", "body": "<p>The hackish way is simply to add a global <code>size_t nswaps</code> and increment <code>nswaps++;</code> in <code>swap()</code>. </p>\n\n<p><strong>Pass a Pointer to Counter</strong></p>\n\n<p>A more correct way, if you cannot change the return type of <code>bubblesort()</code> from <code>void</code>, would be to add a parameter that allows passing a pointer to a counter to <code>bubblesort (... size_t *nswaps)</code> and then in your <code>if (arr[j] &gt; arr[j+1]) { ...; (*nswaps)++; }</code>. E.g.</p>\n\n<pre><code>// A function to implement bubble sort \nvoid bubbleSort(int arr[], int n, size_t *nswaps) \n{ \n    int i, j; \n    for (i = 0; i &lt; n-1; i++)       \n\n    // Last i elements are already in place    \n    for (j = 0; j &lt; n-i-1; j++)  \n        if (arr[j] &gt; arr[j+1]) {\n            swap(&amp;arr[j], &amp;arr[j+1]);\n            (*nswaps)++;                     /* increment counter */\n        }\n} \n</code></pre>\n\n<p>and then in <code>main()</code> initialize your counter to zero and pass a pointer to the counter by using the <code>'&amp;'</code> (address of) operator, increment the value at that address in <code>bubblesort()</code> and then you have the updated value available back in <code>main()</code></p>\n\n<pre><code>// Driver program to test above functions \nint main (void) \n{ \n    int arr[] = {64, 34, 25, 12, 22, 11, 90}; \n    int n = sizeof(arr)/sizeof(arr[0]); \n    size_t nswaps = 0;                            /* add counter */\n    bubbleSort(arr, n, &amp;nswaps); \n    printf(\"Sorted array in (%zu swaps): \\n\", nswaps); \n    printArray(arr, n); \n    return 0; \n} \n</code></pre>\n\n<p><strong>Provide a Meaningful Return of Count</strong></p>\n\n<p>You can also change the return type of <code>bubblesort()</code> to <code>size_t</code> and simply return the count, e.g.</p>\n\n<pre><code>// A function to implement bubble sort \nsize_t bubbleSort(int arr[], int n) \n{ \n    size_t nswaps = 0;\n    int i, j; \n    for (i = 0; i &lt; n-1; i++)       \n\n    // Last i elements are already in place    \n    for (j = 0; j &lt; n-i-1; j++)  \n        if (arr[j] &gt; arr[j+1]) {\n            swap(&amp;arr[j], &amp;arr[j+1]);\n            nswaps++; \n        }\n\n    return nswaps;\n} \n</code></pre>\n\n<p>then in <code>main()</code> just capture the return:</p>\n\n<pre><code>// Driver program to test above functions \nint main() \n{ \n    int arr[] = {64, 34, 25, 12, 22, 11, 90}; \n    int n = sizeof(arr)/sizeof(arr[0]); \n    size_t nswaps = 0;\n    nswaps = bubbleSort(arr, n); \n    printf(\"Sorted array in (%zu swaps): \\n\", nswaps); \n    printArray(arr, n); \n    return 0; \n} \n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12154566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0022b8c5082f9f0fd0ca130bc00c7084?s=128&d=identicon&r=PG", "display_name": "Grimm Carmine", "link": "https://stackoverflow.com/users/12154566/grimm-carmine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570039832, "creation_date": 1570029319, "last_edit_date": 1570039832, "question_id": 58204443, "link": "https://stackoverflow.com/questions/58204443/bubble-sort-options-need-to-add-a-print-bubble-procedure-that-prints-the-bubb", "title": "Bubble sort options. Need to add a (print_bubble) procedure that prints the bubble displacement", "body": "<p>I already tried several things but its just not working, im just starting with C. I would also like to add a counter for the number of swaps done, but cannot come up with the spot to write it. Any help is appreciated!</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid swap(int *xp, int *yp) \n{ \n    int temp = *xp; \n    *xp = *yp; \n    *yp = temp; \n} \n\n// A function to implement bubble sort \nvoid bubbleSort(int arr[], int n) \n{ \n   int i, j; \n   for (i = 0; i &lt; n-1; i++)       \n\n       // Last i elements are already in place    \n       for (j = 0; j &lt; n-i-1; j++)  \n           if (arr[j] &gt; arr[j+1]) \n              swap(&amp;arr[j], &amp;arr[j+1]); \n} \n\n/* Function to print an array */\nvoid printArray(int arr[], int size) \n{ \n    int i; \n    for (i=0; i &lt; size; i++) \n        printf(\"%d \", arr[i]); \n    printf(\"\\n\"); \n} \n\n\n\n// Driver program to test above functions \nint main() \n{ \n    int arr[] = {64, 34, 25, 12, 22, 11, 90}; \n    int n = sizeof(arr)/sizeof(arr[0]); \n    bubbleSort(arr, n); \n    printf(\"Sorted array: \\n\"); \n    printArray(arr, n); \n    return 0; \n} \n</code></pre>\n"}, {"tags": ["c", "variables", "global"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570029586, "post_id": 58204435, "comment_id": 102787205, "body": "Why are you redefining <code>errno</code>? Will the compiler even allow that?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1570029652, "post_id": 58204435, "comment_id": 102787239, "body": "As for your problem, you&#39;re forgetting one very crucial bit about process and how <code>fork</code> works: The <code>fork</code> creates a new and <i>independent</i> process, the child process will run independently from the parent process, and most importantly will have its own separate virtual memory distinct from the parent process. Variables in the parent and child process will not be shared."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1570030074, "post_id": 58204435, "comment_id": 102787490, "body": "if you want to share variables between parent/child process, you need to have a shared memory region. not even <code>static</code> will help you there :)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1570031268, "post_id": 58204435, "comment_id": 102788150, "body": "@KonradRudolph Using a local <code>errno</code> variable is <i>undefined behavior</i>. I&#39;m not sure if it is undefined behavior if nothing includes <code>&lt;errno.h&gt;</code>, but it is definitely undefined behavior if <code>&lt;errno.h&gt;</code> has been included. (7.5p2). Regardless, the <code>if (errno == 10)</code> is <i>undefined behavior</i> anyway as the local <code>errno</code> variable has not been intitialized or assigned to at that point."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1570031311, "post_id": 58204435, "comment_id": 102788175, "body": "@KonradRudolph I&#39;m just thinking about that some implementations define <code>errno</code> as a macro that calls a function which returns a pointer which is dereferenced. On the other hand, depending on how the macro is defined it could be expanded to something which is a valid function forward declaration."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1570031794, "post_id": 58204435, "comment_id": 102788428, "body": "@IanAbbott Oh indeed, it\u2019s explicitly defined as a macro. Odd, I checked a Linux man page instead there it said it was a <i>variable</i>."}], "owner": {"reputation": 3, "user_id": 9633502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Z42bokwiIQ/AAAAAAAAAAI/AAAAAAAAAKM/hswwWnsLd9A/photo.jpg?sz=128", "display_name": "True Debreuil", "link": "https://stackoverflow.com/users/9633502/true-debreuil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570030167, "creation_date": 1570029293, "last_edit_date": 1570030167, "question_id": 58204435, "link": "https://stackoverflow.com/questions/58204435/variable-keeps-resetting", "title": "Variable keeps resetting", "body": "<p>I have written a piece of code that takes command line arguments to search txt files for a designated word, then returns the amount of times the word has been found. \nI'm trying to get it to only print the total count of the word found across all files, but at the moment I can only get it to print the amount of times the word has been found in each file individually.</p>\n\n<p>an example of the code being run would be ./nameofcode birds test1.txt test2.txt test3.txt</p>\n\n<p>I've tried a few different ideas but none of them seemed to work. The idea was to have the variable final count the total amount of times then print it after all the searches have been complete, but it justs resets after each search or stays at 0</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n\nint main(int argc, char * argv[]) {\n  int final = 0;\n  int result, errno;\n  int i;\n  int n;\n  char * word = argv[1];\n  char * list[200];\n  //pid_t pid = fork();\n\n  if (argc &lt; 1) {\n    exit(1);\n  }\n  system(\"cls\");\n  for (i = 2; i &lt; argc; i = i + 1) {\n    if (fork() == 0) {\n      list[i] = argv[i];\n      result = Search_in_File(word, list[i]);\n      final = final + result;\n      if (result == -1) {\n        printf(\"\\n Invalid input.\");\n      } else {\n        printf(\"\\n Total matches found: %d\\n\", result);\n      }\n      exit(0);\n    }\n\n    for (n = 0; n &lt; argc - 1; n++) {\n      wait(NULL);\n    }\n\n  }\n\n  if (result == -1) {\n    perror(\"Error\");\n    if (errno == 10) {\n      printf(\"\\n Invalid file\");\n      exit(1);\n    } else {\n      printf(\"\\n Error number = %d\\n\", errno);\n      exit(1);\n    }\n    printf(\"%d\\n\", final);\n\n  }\n  return (0);\n}\n\nint Search_in_File(char * str, char * fname) {\n  FILE * fp;\n  int line_num = 1;\n  char temp[200];\n  int find_result = 0;\n  if ((fp = fopen(fname, \"r\")) == NULL) {\n    return (-1);\n  }\n\n  while (fgets(temp, 200, fp) != NULL) {\n\n    if ((strstr(temp, str)) != NULL) {\n      find_result++;\n      //final++;    \n    }\n    line_num++;\n  }\n\n  if (find_result == 0) {\n    printf(\"\\nSorry, couldn't find a match.\\n\");\n  }\n\n  if (fp) {\n    fclose(fp);\n  }\n  return (find_result);\n}\n</code></pre>\n\n<p>if each file contained the word birds 3 times the expected result would be 9 but instead it is 3 or 0.</p>\n"}, {"tags": ["c", "char", "scanf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1570029401, "post_id": 58204427, "comment_id": 102787087, "body": "I recommend you change the <code>printf</code> line to <code>printf(&quot;%d\\n&quot;, c);</code> so you can see tha actual value and not be misled by whitespace."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1570029445, "post_id": 58204427, "comment_id": 102787116, "body": "The code doesn&#39;t read or print strings. It reads and prints single characters."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570029534, "post_id": 58204427, "comment_id": 102787170, "body": "Also, almost all systems in use today uses <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">ASCII</a> encoding for characters, and ASCII is a 7-bit encoding (with values from <code>0</code> to <code>127</code>). So it fits well in a (signed) <code>char</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1570029652, "post_id": 58204427, "comment_id": 102787240, "body": "If your program does not behave quite like the professor&#39;s, then it isn&#39;t the same. Note that in the loop, you output the character temporally <i>before</i> the next loop&#39;s <code>while</code> test finds the <code>&#39;.&#39;</code>. Notice too that you never output the result of the first <code>scanf</code> which is outside the loop. I suggest you move the <code>printf</code> up one line."}, {"owner": {"reputation": 125, "user_id": 4551471, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/837900792937473/picture?type=large", "display_name": "Dario Deniz Erg&#252;n", "link": "https://stackoverflow.com/users/4551471/dario-deniz-erg%c3%bcn"}, "edited": false, "score": 0, "creation_date": 1570029971, "post_id": 58204427, "comment_id": 102787423, "body": "how would i change it so that the code ends and doesn&#39;t print out the &#39;.&#39; at the end?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570029987, "post_id": 58204427, "comment_id": 102787434, "body": "I mentioned that in the previous comment."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1570031485, "post_id": 58204427, "comment_id": 102788272, "body": "Oh dear.  It is 2019 and university instructors are still using scanf in the introductory course?  Why?!"}, {"owner": {"reputation": 125, "user_id": 4551471, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/837900792937473/picture?type=large", "display_name": "Dario Deniz Erg&#252;n", "link": "https://stackoverflow.com/users/4551471/dario-deniz-erg%c3%bcn"}, "edited": false, "score": 0, "creation_date": 1570031618, "post_id": 58204427, "comment_id": 102788337, "body": "I don&#39;t get it, why wouldn&#39;t/shouldn&#39;t they?"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 12154647, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDI58j8Fd1fUxk2HpnX5uwn-LbW3jwKPKv2sv5W=k-s128", "display_name": "Nikhar Sachdeva", "link": "https://stackoverflow.com/users/12154647/nikhar-sachdeva"}, "is_accepted": true, "score": 1, "last_activity_date": 1570148911, "last_edit_date": 1570148911, "creation_date": 1570030720, "answer_id": 58204850, "question_id": 58204427, "link": "https://stackoverflow.com/questions/58204427/char-stores-entire-strings-with-scanf/58204850#58204850", "title": "Char stores entire strings with Scanf?", "body": "<ol>\n<li>In your while loop it is not storing entered character as string.\nIt'll keep replacing(overwriting) the old value with the new value and will print that new value in c right after storing it. A character type variable can hold just 1 character at a time.\nIn simple words the value you will enter from keyboard will be stored in variable c \"By Replacing\" the old value..\nSo at any time c will have only 1 character stored in it that's the latest character read using scanf.</li>\n</ol>\n\n<p>127 that you mentioned.. Everywhere you'll find that char ranges from -127 to 128 right. That does not mean you can store 127 characters in its variable,but that means that you can store 256 types of characters in its variable. Learn more about ASCII value. Every character got an ASCII value associated with it because characters are internally represented as integers.</p>\n\n<p>Read more about ASCII value\nYou can refer to these articles</p>\n\n<p><a href=\"https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html\" rel=\"nofollow noreferrer\">https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html</a></p>\n\n<p><a href=\"https://www.atnyla.com/tutorial/char-data-type-in-c/1/178\" rel=\"nofollow noreferrer\">https://www.atnyla.com/tutorial/char-data-type-in-c/1/178</a></p>\n\n<p>2.\nRegarding full stop\nIn your loop condition you have</p>\n\n<pre><code>while( c !=  '.' ){\n    scanf(\"%c\", &amp;c);\n    printf(\"%c\", c);\n}\n</code></pre>\n\n<p>Your program prints the full stop\nBecause see from while</p>\n\n<ol>\n<li>It will check if ch is equal to '.' it is not full stop it'll go inside\neg., Suppose I entered: a as a first character then . as a second character\nIntially before while loop you have entered some character already. So if you enter first character as full stop your loop won't execute..\nBut if not\nSuppose you entered : abc.\nThe scanf before loop body will execute and take 'a'\nIt is not full stop it will print 'a'\nRight now c has 'a'\nThen it will check a=='.' which is false\nLoop will execute and take input 'b'\nIt will print 'b' then check if it is full stop \nIt's not\nLoop will again execute and take input.. You entered 'c'\nIt will print 'c' then check if it is full stop</li>\n</ol>\n\n<p>FOCUS\nRight now c variable has value of 'c'. It's not '.'\nLoop condition 'c' is not equal to '.' loop will execute\nIt will take Input using scanf\nNow you entered '.' i.e., c is '.' now<code>enter code here</code>\nIt will go to next line\nAnd print c i.e., '.' \nThen will check again now c is equal to '.'\nHence loop will terminate</p>\n\n<p>I hope that explains why are you getting . in output</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1570031093, "last_edit_date": 1570031093, "creation_date": 1570030783, "answer_id": 58204875, "question_id": 58204427, "link": "https://stackoverflow.com/questions/58204427/char-stores-entire-strings-with-scanf/58204875#58204875", "title": "Char stores entire strings with Scanf?", "body": "<p>You're right, a variable of type <code>char</code> can hold one character.  In no way can it hold a string of multiple characters.</p>\n\n<p>But this program does not have to hold a string of multiple characters.  It reads a character and prints it, and reads a character and prints it, etc.</p>\n\n<p><em>If</em> you were using <code>scanf %s</code> to read and store a whole string, and <code>printf %s</code> to print that string, then yes, you would need an array of multiple characters.</p>\n\n<p>Based on the way your loop is written, I would expect it to print the <code>'.'</code>, then stop.  Follow it carefully: inside the loop, it reads a character, and prints the character, then it goes \"back to the top\" off the loop to decide if it should make another trip through thw loop.  (That's the way <code>while</code> loops work.)  After reading and printing the <code>'.'</code>, the condition <code>while(c != '.')</code> is no longer true, so the loop stops -- but by then the <code>'.'</code> has been printed.  There's nothing wrong with your compiler.</p>\n\n<p>You mentioned <code>char</code> going up to 127.  Actually, an 8-bit <code>char</code> can hold 2<sup>8</sup> = 256 different values.  We can think of those values as running from -128 to +127 (if <code>char</code> is a signed type) or 0 to 255 (if <code>char</code> is an unsigned type).  The ordinary ASCII characters always have values less than 128, so there's never any problem representing those.  The other 128 values can be used in different ways depending on your machine's character set and encoding.</p>\n"}], "owner": {"reputation": 125, "user_id": 4551471, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/837900792937473/picture?type=large", "display_name": "Dario Deniz Erg&#252;n", "link": "https://stackoverflow.com/users/4551471/dario-deniz-erg%c3%bcn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 58204850, "answer_count": 2, "score": 0, "last_activity_date": 1570148911, "creation_date": 1570029276, "question_id": 58204427, "link": "https://stackoverflow.com/questions/58204427/char-stores-entire-strings-with-scanf", "title": "Char stores entire strings with Scanf?", "body": "<p><br> So i'm taking lessons on C at my university and the professor showed this simple bit of code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char c;\n    scanf(\"%c\", &amp;c);\n    while (c !='.'){\n        //if(c != '/n');\n        scanf(\"%c\", &amp;c);\n        printf(\"%c\", c);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And although for many of you it's an objectively simple piece of code, i can't wrap my head around two things. The first thing is if you run the code, i can store entire strings (by writing in the <code>scanf()</code>) and have the code spit it back to me. But the variable i'm storing it in is a type <code>char</code>, which only goes up to 127, which based on the ASCII values of the characters i'm typing, isn't nearly enough so how does it store it? <br>Secondhing is that i'm writing this code from memory (although i think its the exact same one as the one my prof. used). However, in his code the program stops after it detects a full stop \".\", and the program prints its final string without printing the dot, but mine does. I wonder if wrote it incorrectly or if theres something wrong with my compiler (Clion, lang on a mac)? <br>\nI know that the second one isn't really related with the title but i appreciate the answers, so thanks!</p>\n"}, {"tags": ["c", "lwip"], "owner": {"reputation": 111, "user_id": 12154241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771e77824759dd14961f140ae3e4b13d?s=128&d=identicon&r=PG&f=1", "display_name": "DerPhysiker", "link": "https://stackoverflow.com/users/12154241/derphysiker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1598560502, "creation_date": 1570029055, "last_edit_date": 1570029529, "question_id": 58204348, "link": "https://stackoverflow.com/questions/58204348/lwip-memory-allocation-through-lwip-mempool-alloc-returns-always-null", "title": "lwIP: memory allocation through LWIP_MEMPOOL_ALLOC returns always NULL", "body": "<p>For a company project, I have to use the lwIP library for creating a ppp connection. I have tried to adapt the code contained in the file <a href=\"http://git.savannah.nongnu.org/cgit/lwip.git/tree/contrib/examples/ppp\" rel=\"nofollow noreferrer\">pppos_example.c</a>. The program compiles without issues. However, when I run this snippet:</p>\n\n<pre><code>    ppp_sio = sio_open(0);\n    if(!ppp_sio)\n      {\n          perror(\"PPPOS example: Error opening device\");\n          return;\n      }\n\n    ppp = pppos_create(&amp;pppos_netif,ppp_output_cb, ppp_link_status_cb, NULL);\n\n    if (!ppp)\n     {\n         printf(\"PPPOS example: Could not create PPP control interface\");\n         return;\n     }\n    ppp_connect(ppp, 0);\n</code></pre>\n\n<p>the program always exit before <em>ppp_connect</em> is called, as <em>ppp</em> is always NULL. The error seems to stem from the snippet at line 181 of <a href=\"http://git.savannah.nongnu.org/cgit/lwip.git/tree/src/netif/ppp/pppos.c\" rel=\"nofollow noreferrer\">pppos.c</a>, as LWIP_MEMPOOL_ALLOC returns always NULL.</p>\n\n<pre><code>    pppos = (pppos_pcb *)LWIP_MEMPOOL_ALLOC(PPPOS_PCB);\n    if (pppos == NULL) {\n      return NULL;\n    }\n</code></pre>\n\n<p>I have browsed through the lwIP documentation and debugged the application through Qt Creator, but could not find anything specific about this issue.\nI don't know if this could be relevant, but I am running the program on a Linux Ubuntu 16.04.3 virtual machine run through VirtualBox.</p>\n\n<p>What could be the reason of this behaviour?</p>\n"}, {"tags": ["c", "gtk", "building"], "comments": [{"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570028836, "post_id": 58204204, "comment_id": 102786732, "body": "Can you show us the what <code>pkg-config --cflags gtk+-3.0</code> outputs?"}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570028917, "post_id": 58204204, "comment_id": 102786784, "body": "I sure can! Added it to the post at the bottom. Cheers for replying!"}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570029139, "post_id": 58204204, "comment_id": 102786937, "body": "How about if you copy the executable into another directory from home, such as ~/local/bin ? I suspect it might be a privilege issue."}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570029482, "post_id": 58204204, "comment_id": 102787138, "body": "Hi, I didn&#39;t find that directory so I created it. I seem to still get the same error."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570030052, "post_id": 58204204, "comment_id": 102787480, "body": "What I&#39;d do is sprinkle the <code>option_open</code> and <code>main</code> functions with printfs and see what <code>homedir</code> is set to."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570030118, "post_id": 58204204, "comment_id": 102787514, "body": "If you get no answer, I&#39;ll try building the app tonight and see if I get the same errors."}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570030467, "post_id": 58204204, "comment_id": 102787713, "body": "When it&#39;s working or when it isn&#39;t? When it is working, that returns /home/johnythecarrot."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570031331, "post_id": 58204204, "comment_id": 102788188, "body": "So when it&#39;s not working, you don&#39;t even get there? I assume you have <code>fflush(stdout)</code> in place."}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570032341, "post_id": 58204204, "comment_id": 102788678, "body": "Hi, it seems that the code does run, but it doesn&#39;t show the application window. I do not even know what fflush(stdout) is, sadly."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570046575, "post_id": 58204204, "comment_id": 102795144, "body": "<code>fflush(stdout)</code> simply makes sure the <code>printf</code>s are printed before continuing."}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570082821, "post_id": 58204204, "comment_id": 102803006, "body": "Oh, I do a \\n and that seems to print them."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "edited": false, "score": 0, "creation_date": 1570124243, "post_id": 58215309, "comment_id": 102823651, "body": "Hi! Thanks for your answer. I seem to be getting the following error in meson: fatal error: gtk/gtk.h: No such file or directory"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "edited": false, "score": 1, "creation_date": 1570189666, "post_id": 58215309, "comment_id": 102844580, "body": "Of course. You&#39;re supposed to declare your dependencies, then use them in <code>executable</code>, not the reverse. An executable has dependencies, which makes sense. I also don&#39;t get why you&#39;re calling pkg-config in the add_project_arguments, that makes no sense. Meson is already aware of pkg-config and knows how to call it. Please read the <a href=\"https://mesonbuild.com/Tutorial.html#adding-dependencies\" rel=\"nofollow noreferrer\">basic GTK+ app with Meson</a> example on the Meson website."}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "edited": false, "score": 0, "creation_date": 1570194933, "post_id": 58215309, "comment_id": 102847168, "body": "Thanks! I acknowledge that I am an idiot but I don&#39;t understand how to reference the path in my meson file with the link you&#39;ve given me. Sorry."}, {"owner": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "edited": false, "score": 1, "creation_date": 1570234616, "post_id": 58215309, "comment_id": 102860796, "body": "You should stop loading by file and load by GResource: <a href=\"https://developer.gnome.org/gio/stable/GResource.html\" rel=\"nofollow noreferrer\">developer.gnome.org/gio/stable/GResource.html</a> - <a href=\"https://mesonbuild.com/Gnome-module.html#gnomecompile_resources\" rel=\"nofollow noreferrer\">mesonbuild.com/Gnome-module.html#gnomecompile_resources</a>"}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "edited": false, "score": 0, "creation_date": 1570377626, "post_id": 58215309, "comment_id": 102886598, "body": "The GResource suggestion worked, and my issue is resolved. Cheers, everyone!"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "edited": false, "score": 0, "creation_date": 1570452605, "post_id": 58215309, "comment_id": 102906778, "body": "@JohnyTheCarrot: sorry, didn&#39;t want to sound harsh. You need to first declare your dependency (something like <code>gtk_dep = dependency(&#39;gtk+-3.0&#39;)</code>), an <b>then</b> you can pass that <code>gtk_dep</code> variable to your <code>executable(...)</code> call. This way you give to the executable the list of its dependencies, otherwise it won&#39;t find them. Currently your code only does <code>executable(&#39;build_test&#39;, &#39;main.c&#39;)</code> and overlooks the <code>dependencies</code> parameter of <code>executable(...)</code>. Look at the basic example I linked above. It calls <code>executable(&#39;demo&#39;, &#39;main.c&#39;, dependencies : gtkdep)</code>, providing the deps to the executable."}, {"owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "edited": false, "score": 0, "creation_date": 1570543354, "post_id": 58215309, "comment_id": 102940649, "body": "Oh don&#39;t you worry about it, you weren&#39;t harsh! :)"}], "tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1570091942, "creation_date": 1570091942, "answer_id": 58215309, "question_id": 58204204, "link": "https://stackoverflow.com/questions/58204204/built-c-app-works-inside-folder-it-was-built-into-fails-when-brought-outside-of/58215309#58215309", "title": "Built C app works inside folder it was built into, fails when brought outside of it", "body": "<p>I didn't test the code, but I see you're opening your Glade-generated files using a relative path. All your calls to <code>gtk_builder_add_from_file</code> look like:</p>\n\n<pre><code>gtk_builder_add_from_file (builder, \"main_window.glade\", NULL);\n</code></pre>\n\n<p>If you move only your binary, it won't be able to find these files anymore. One way to avoid that is to <a href=\"https://stackoverflow.com/questions/46473646/meson-working-with-data-assets-and-portable-relative-paths\">reference the path in your meson file so you can use it in your code</a>.</p>\n\n<p>Also, you need to do some proper error checking. Where a <code>GError **error</code> is requested, use it and check for errors instead of passing NULL, and print the message return by the GError, it will save you lots of time.</p>\n\n<pre><code>guint\ngtk_builder_add_from_file (GtkBuilder *builder,\n                           const gchar *filename,\n                           GError **error);\n</code></pre>\n\n<p>For more information, please read how <a href=\"https://developer.gnome.org/glib/stable/glib-Error-Reporting.html\" rel=\"nofollow noreferrer\">GError</a> works (see \"Description\" section).</p>\n"}], "owner": {"reputation": 85, "user_id": 5119970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e243a5df27d65f11d2be8187f759bd0a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnyTheCarrot", "link": "https://stackoverflow.com/users/5119970/johnythecarrot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570091942, "creation_date": 1570028541, "last_edit_date": 1570028894, "question_id": 58204204, "link": "https://stackoverflow.com/questions/58204204/built-c-app-works-inside-folder-it-was-built-into-fails-when-brought-outside-of", "title": "Built C app works inside folder it was built into, fails when brought outside of it", "body": "<p>I'm making an app in C and I've built it using the following command:</p>\n\n<pre><code>gcc `pkg-config --cflags gtk+-3.0` main.c -o hello `pkg-config --libs gtk+-3.0` -lX11 -rdynamic\n</code></pre>\n\n<p>And this works, cool!\nExcept.. when I try to copy the exported file into another folder such as /usr/bin, then it throws the following errors:</p>\n\n<pre><code>(hello:11178): GLib-GObject-WARNING **: 16:35:55.999: invalid (NULL) pointer instance\n\n(hello:11178): GLib-GObject-CRITICAL **: 16:35:55.999: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(hello:11178): Gtk-CRITICAL **: 16:35:55.999: gtk_widget_show: assertion 'GTK_IS_WIDGET (widget)' failed\n</code></pre>\n\n<p>Here's my code.\nIgnore the meson file.\n<a href=\"https://github.com/JohnyTheCarrot/Paperplane\" rel=\"nofollow noreferrer\">https://github.com/JohnyTheCarrot/Paperplane</a></p>\n\n<p>pkg-config:</p>\n\n<pre><code>-pthread -I/usr/include/gtk-3.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include -I/usr/include/gtk-3.0 -I/usr/include/gio-unix-2.0 -I/usr/include/cairo -I/usr/include/libdrm -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/fribidi -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng16 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libmount -I/usr/include/blkid -I/usr/include/uuid -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include```\n</code></pre>\n"}, {"tags": ["c", "programming-languages"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1570028442, "post_id": 58204141, "comment_id": 102786474, "body": "Compilation error will happen. You can&#39;t have static member in a structure <i>definition</i>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1570028520, "post_id": 58204141, "comment_id": 102786518, "body": "Members of a <code>struct</code> can&#39;t be <code>static</code>."}], "answers": [{"comments": [{"owner": {"reputation": 352, "user_id": 3473433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa87ec32236bf2a31994b1067e633067?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioperez", "link": "https://stackoverflow.com/users/3473433/eugenioperez"}, "edited": false, "score": 0, "creation_date": 1570090566, "post_id": 58204398, "comment_id": 102806235, "body": "Should use <code>%zu</code> for portable version to print <code>size_t</code> type. <code>printf(&quot;%zu&quot; sizeof(...));</code>. - Just adding to answer."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1570094400, "last_edit_date": 1570094400, "creation_date": 1570029210, "answer_id": 58204398, "question_id": 58204141, "link": "https://stackoverflow.com/questions/58204141/what-happend-if-i-use-static-keyword-fo-check-the-size/58204398#58204398", "title": "What happend if i use static keyword fo check the size", "body": "<blockquote>\n  <p>What happend if i use static in c language</p>\n</blockquote>\n\n<p>From the C Standard (6.7.1 Storage-class specifiers)</p>\n\n<pre><code>1 storage-class-specifier:\n    typedef\n    extern\n    static\n    _Thread_local\n    auto\n    register\n</code></pre>\n\n<p>and (6.7.2.1 Structure and union specifiers)</p>\n\n<pre><code>struct-declaration:\n    specifier-qualifier-list struct-declarator-listopt ;\n    static_assert-declaration\n\nspecifier-qualifier-list:\n    type-specifier specifier-qualifier-listopt\n    type-qualifier specifier-qualifier-listopt\n</code></pre>\n\n<p>That is a member declaration may not have the storage-class specifier.</p>\n\n<blockquote>\n  <p>what happend i i have to use %ld for getting a size of structure</p>\n</blockquote>\n\n<p>There can be undefined behavior because the value returned by the operator <code>sizeof</code> has the type <code>size_t</code>. You have to use the conversion specifier <code>%zu</code> instead of <code>%d</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10878032, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z1rheT3Zz9Y/AAAAAAAAAAI/AAAAAAAABqI/RoX2C_b2B0M/photo.jpg?sz=128", "display_name": "sanjay sheel", "link": "https://stackoverflow.com/users/10878032/sanjay-sheel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570094400, "creation_date": 1570028333, "last_edit_date": 1570034249, "question_id": 58204141, "link": "https://stackoverflow.com/questions/58204141/what-happend-if-i-use-static-keyword-fo-check-the-size", "title": "What happend if i use static keyword fo check the size", "body": "<pre><code>#include&lt;stdio.h&gt;\nstruct st\n{\n    int x;\n    static int y;\n};\nint main()   \n{\n    printf(\"%d\", sizeof(struct st));\n    return 0;\n}\n</code></pre>\n\n<p>What happens if I use static in c language and what happens if I have to use %ld for getting a size of structure </p>\n"}, {"tags": ["c", "scanf", "fgets", "c-strings", "strlen"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1570027222, "post_id": 58203729, "comment_id": 102785761, "body": "You wrote the string terminators to the wrong place, off by one. it should be <code>string11[strlen(string1)] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 1, "creation_date": 1570027232, "post_id": 58203729, "comment_id": 102785768, "body": "So what&#39;s the question?"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1570027317, "post_id": 58203729, "comment_id": 102785818, "body": "I didn&#39;t read the complete question, but basically you want to store the string as per its original length. Well use <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow noreferrer\"><code>strdup(3)</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 11996956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c4e12d1b82a232b9b9c669d6cec0f88?s=128&d=identicon&r=PG&f=1", "display_name": "francescobfc", "link": "https://stackoverflow.com/users/11996956/francescobfc"}, "edited": false, "score": 0, "creation_date": 1570028516, "post_id": 58203852, "comment_id": 102786516, "body": "Thanks a lot, it worked! But to be honest I didn&#39;t understand the logic of it.                          If strlen returns the number of components before &#39;\\0&#39;, then I create a new string with strlen(original_string) + 1 components. But why when copying do I attribute &#39;\\0&#39; to the strlen&#39;th component, and not to the component strlen +1?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 65, "user_id": 11996956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c4e12d1b82a232b9b9c669d6cec0f88?s=128&d=identicon&r=PG&f=1", "display_name": "francescobfc", "link": "https://stackoverflow.com/users/11996956/francescobfc"}, "edited": false, "score": 0, "creation_date": 1570028582, "post_id": 58203852, "comment_id": 102786560, "body": "@francescobfc If you have an array of N elements then the last element has the index equal to N - 1."}, {"owner": {"reputation": 65, "user_id": 11996956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c4e12d1b82a232b9b9c669d6cec0f88?s=128&d=identicon&r=PG&f=1", "display_name": "francescobfc", "link": "https://stackoverflow.com/users/11996956/francescobfc"}, "edited": false, "score": 0, "creation_date": 1570028696, "post_id": 58203852, "comment_id": 102786648, "body": "Oh, I forgot that, because it starts at 0. Thanks again!!"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1570027625, "last_edit_date": 1570027625, "creation_date": 1570027306, "answer_id": 58203852, "question_id": 58203729, "link": "https://stackoverflow.com/questions/58203729/how-to-fix-my-code-of-reducing-string-sizes-to-their-effective-size/58203852#58203852", "title": "How to fix my code of reducing string sizes to their &quot;effective size&quot;", "body": "<p>These statements</p>\n\n<pre><code>string11[strlen(string1)+1] = '\\0';\ntring22 [strlen(string2)+1] = '\\0';\n</code></pre>\n\n<p>are wrong.</p>\n\n<p>You have to write</p>\n\n<pre><code>string11[strlen(string1)] = '\\0';\ntring22 [strlen(string2)] = '\\0';\n</code></pre>\n\n<p>This call is also wrong</p>\n\n<pre><code>printf(\"length string 1 = %d  length string 2 = %d\\n\", strlen(string1), strlen(string2));\n</code></pre>\n\n<p>You have to write</p>\n\n<pre><code>printf(\"length string 1 = %zu  length string 2 = %zu\\n\", strlen(string1), strlen(string2));\n</code></pre>\n\n<p>Pay attention to that the function <code>gets</code> is not a standard C function any more. Use instead <code>fgets</code>.</p>\n\n<p>For example</p>\n\n<pre><code>fgets( string1, sizeof( string1 ), stdin );\nstring1[ strcspn( string1, \"\\n\" ) ] = '\\0';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 11996956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c4e12d1b82a232b9b9c669d6cec0f88?s=128&d=identicon&r=PG&f=1", "display_name": "francescobfc", "link": "https://stackoverflow.com/users/11996956/francescobfc"}, "edited": false, "score": 0, "creation_date": 1570037958, "post_id": 58204511, "comment_id": 102791291, "body": "Thanks! It also worked. But I have to admit I&#39;m a bit confused. The program worked the same way with and without this 1. And it is worth of notice that I&#39;m using string11[strlen(string1)] = &#39;\\0&#39;; in both cases. My logic was: The string_original has 100 entries. Suppose the &#39;\\0&#39; entry is in the fifth entry (49). Then strlen(string_original) should return 49 (number of entries before &#39;\\0&#39;). Then, if I wanna copy string_original into new_string, I need to declare the latter with 50 entries (strlen(string_original) + 1), so that the last entry (number 49) can be attributed as &#39;\\0&#39;."}], "tags": [], "owner": {"reputation": 100, "user_id": 6322963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t96vv.jpg?s=128&g=1", "display_name": "AbA2L", "link": "https://stackoverflow.com/users/6322963/aba2l"}, "is_accepted": false, "score": 1, "last_activity_date": 1570029514, "creation_date": 1570029514, "answer_id": 58204511, "question_id": 58203729, "link": "https://stackoverflow.com/questions/58203729/how-to-fix-my-code-of-reducing-string-sizes-to-their-effective-size/58204511#58204511", "title": "How to fix my code of reducing string sizes to their &quot;effective size&quot;", "body": "<p>Hello you didn't need to increment with 1 at initilisation of tables length.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main() {\n    //Here I create two strings with size 100\n    char string1[100], string2[100];\n    //Here I ask for the user to type two phrases and store them using         gets\n    printf(\"Type two phrases):\\n\");\n    gets(string1);\n    gets(string2);\n    //Here I create two new strings with size given by strlen(stringi)+1\n    char string11[strlen(string1)];\n    char string22[strlen(string2)];\n    //For string 1, I atrribute all the values of the original string to the new string, until '\\0'\n    for (int i = 0; string1[i] != '\\0'; i++)\n    {\n        string11[i] = string1[i];\n    }\n    //Here I denote the last position of the new string with the terminator\n    string11[strlen(string1)] = '\\0';\n    //I do the same for string 2\n    for (int i = 0; string2[i] != '\\0'; i++)\n    {\n        string22[i] = string2[i];\n    }\n    string22 [strlen(string2)] = '\\0';\n    //I print the length of the original strings and the new strings\n    printf(\"length string 1 = %d  length string 2 = %d\\n\", strlen(string1), strlen(string2));\n    printf(\"%s\\n%s\\n\", string11, string22);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>good luck.</p>\n"}], "owner": {"reputation": 65, "user_id": 11996956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c4e12d1b82a232b9b9c669d6cec0f88?s=128&d=identicon&r=PG&f=1", "display_name": "francescobfc", "link": "https://stackoverflow.com/users/11996956/francescobfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570046071, "creation_date": 1570026866, "last_edit_date": 1570046071, "question_id": 58203729, "link": "https://stackoverflow.com/questions/58203729/how-to-fix-my-code-of-reducing-string-sizes-to-their-effective-size", "title": "How to fix my code of reducing string sizes to their &quot;effective size&quot;", "body": "<p>I want to make a code that reads a string, and then tranposes this string into a new one with length equal to the effective length of the original string, that is,</p>\n\n<pre><code>old string = stringi      \n\nnew string = stringii\n\nnewstring[strlen(stringi)+1]  (where +1 is for the terminator '\\0'\n</code></pre>\n\n<p>I do this for two strings (string 1 and string 2), and in the end I print \u200d<code>strlen(string1)</code>, <code>strlen(string2)</code>, and print also string11 and <code>string22</code> (to see whether it worked).</p>\n\n<p>Well, what's the problem? The program compiles right.</p>\n\n<p>But if I type \"sugar\" for string 1 and \"sugara\" for string 2, it returns:\nsugar\nsugara'</p>\n\n<p>Or if I type batata and cenoura it returns:\nbatata'\ncenoura</p>\n\n<p>Or if I type cenoura and batata it returns:\ncenoura \nbatata'</p>\n\n<p>I don't know what's the motive of this problem. If anyone could help me searching for bugs in the code (or suggesting another alternative for doing the problem)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n    //Here I create two strings with size 100\n    char string1[100], string2[100];\n    //Here I ask for the user to type two phrases and store them using gets\n    printf(\"Type two phrases):\\n\");\n    gets(string1);\n    gets(string2);\n    //Here I create two new strings with size given by strlen(stringi)+1\n    char string11[strlen(string1)+1];\n    char string22[strlen(string2)+1];\n    //For string 1, I atrribute all the values of the original string to the new string, until '\\0'\n    for (int i = 0; string1[i] != '\\0'; i++)\n    {\n        string11[i] = string1[i];\n    }\n    //Here I denote the last position of the new string with the terminator\n    string11[strlen(string1)+1] = '\\0';\n    //I do the same for string 2\n    for (int i = 0; string2[i] != '\\0'; i++)\n    {\n        string22[i] = string2[i];\n    }\n    string22 [strlen(string2)+1] = '\\0';\n    //I print the length of the original strings and the new strings\n    printf(\"length string 1 = %d  length string 2 = %d\\n\", strlen(string1), strlen(string2));\n    printf(\"%s\\n%s\\n\", string11, string22);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "openssl", "libcrypto"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570027085, "post_id": 58203573, "comment_id": 102785681, "body": "You never bother to check if your  <code>fopen()</code> calls actually work."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 12154135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6acfd2bff433dcd9978e2f46a23bad0f?s=128&d=identicon&r=PG&f=1", "display_name": "user12154135", "link": "https://stackoverflow.com/users/12154135/user12154135"}, "edited": false, "score": 0, "creation_date": 1571999540, "post_id": 58205460, "comment_id": 103432842, "body": "Thanks dave_thompson_085. Linking openssl dll directly to main exe and adding PEM_read_RSAPublicKey() in main exe helped me."}], "tags": [], "owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "is_accepted": false, "score": 0, "last_activity_date": 1570033082, "creation_date": 1570033082, "answer_id": 58205460, "question_id": 58203573, "link": "https://stackoverflow.com/questions/58203573/pem-read-rsapublickey-crashes-in-main-application-code-but-works-fine-in-sampl/58205460#58205460", "title": "PEM_read_RSAPublicKey() crashes in main application code but works fine in sample code. How can i fix this issue?", "body": "<p>It's not clear if you're trying to use two levels of DLL here -- i.e. do you have an EXE that calls a DLL that contains your code that in turn calls the OpenSSL DLL(s)? If so that doesn't work; the kludge OpenSSL uses for 'uplink' in order to do file I/O can only handle an EXE that (directly) calls the OpenSSL DLL(s). Your alternatives are: statically link OpenSSL (into your DLL); or use the BIO interface instead so that file I/O is handled (entirely) at the OpenSSL level, or do the I/O (here input) yourself and use a memory BIO for OpenSSL; see my answers to <a href=\"https://stackoverflow.com/questions/43985322/signing-array-of-data-using-sha1-with-rsa-in-c\">this similar Q</a>.</p>\n\n<p>If you are calling from the EXE to OpenSSL DLL(s), it should work if you compile and link applink.c into your EXE as documented (tersely) on <a href=\"https://www.openssl.org/docs/man1.0.2/man3/OPENSSL_Applink.html\" rel=\"nofollow noreferrer\">the man page</a>, or you can choose the alternatives above if you prefer.</p>\n\n<p>In addition: as Andrew commented, you should be checking for errors on the fopen or other I/O, and also on the PEM_read routines -- they can fail. Also, PEM files are text and don't need the <code>b</code> flag, even on Windows. And using the lower-level <code>RSAPublicKey</code> format, instead of the <code>[RSA_]PUBKEY</code> format, is <em>very</em> unusual; are you sure that's what you want?\"</p>\n"}], "owner": {"reputation": 7, "user_id": 12154135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6acfd2bff433dcd9978e2f46a23bad0f?s=128&d=identicon&r=PG&f=1", "display_name": "user12154135", "link": "https://stackoverflow.com/users/12154135/user12154135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570033082, "creation_date": 1570026389, "last_edit_date": 1570026504, "question_id": 58203573, "link": "https://stackoverflow.com/questions/58203573/pem-read-rsapublickey-crashes-in-main-application-code-but-works-fine-in-sampl", "title": "PEM_read_RSAPublicKey() crashes in main application code but works fine in sample code. How can i fix this issue?", "body": "<p>I am writing a c/c++ code for Win32 Dynamic_link Library in visual studio 6. Actually i am using libcryptoMD.lib for implementing RSA encryption using pem file and ppk file. I'm able to do this encryption in sample code but PEM_read_RSAPublicKey() crashes in actual application code.</p>\n\n<p>I have already tried setting all the Project Settings of actual application code to sample project as there could be some conflicts in dependency libries of actual application code. But to my surprise, sample project worked successfully and actual application failed. I also searched for why this function could have crashed in actual application code, but could not find any useful answer. This function needs filepointer of public key pem file and RSA pointer which are absolutely fine.</p>\n\n<pre><code>RSA * create_RSA(RSA * keypair, int pem_type, char *file_name) {\n\n    RSA   *rsa = NULL;\n    FILE  *fp  = NULL;\n\n    if(pem_type == PUBLIC_KEY_PEM) \n    {\n        fp = fopen(file_name, \"rb\");\n\n        PEM_read_RSAPublicKey(fp, &amp;rsa, NULL, NULL);\n\n        fclose(fp);\n\n    }\n    else if(pem_type == PRIVATE_KEY_PEM) \n    {\n        fp = fopen(file_name, \"rb\");\n        PEM_read_RSAPrivateKey(fp, &amp;rsa, NULL, NULL);\n        fclose(fp);\n    }\n\n    return rsa;\n}\n</code></pre>\n\n<p><code>PEM_read_RSAPublicKey(fp, &amp;rsa, NULL, NULL);</code> crashes showing </p>\n\n<blockquote>\n  <p>OPENSSL_Uplink(6F8D1880,08): no OPENSSL_Applink in actual application code.</p>\n</blockquote>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1792, "user_id": 3448136, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/ynqfe.jpg?s=128&g=1", "display_name": "Lee Jenkins", "link": "https://stackoverflow.com/users/3448136/lee-jenkins"}, "edited": false, "score": 1, "creation_date": 1570027433, "post_id": 58203559, "comment_id": 102785886, "body": "Are you saying that you wrote the code, but you don&#39;t know why you wrote <code>x=10</code>?"}, {"owner": {"reputation": 61, "user_id": 11145015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73196ead8fc39d3ea2623448387cdcee?s=128&d=identicon&r=PG&f=1", "display_name": "dev_cc", "link": "https://stackoverflow.com/users/11145015/dev-cc"}, "reply_to_user": {"reputation": 1792, "user_id": 3448136, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/ynqfe.jpg?s=128&g=1", "display_name": "Lee Jenkins", "link": "https://stackoverflow.com/users/3448136/lee-jenkins"}, "edited": false, "score": 0, "creation_date": 1570027678, "post_id": 58203559, "comment_id": 102786018, "body": "Yeah,i did not know."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 1792, "user_id": 3448136, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/ynqfe.jpg?s=128&g=1", "display_name": "Lee Jenkins", "link": "https://stackoverflow.com/users/3448136/lee-jenkins"}, "edited": false, "score": 0, "creation_date": 1570027827, "post_id": 58203559, "comment_id": 102786107, "body": "@LeeJenkins That&#39;s a good one"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1570027901, "post_id": 58203559, "comment_id": 102786140, "body": "One possibility is that the code is supposed to give you only ten tries to get the password right."}, {"owner": {"reputation": 61, "user_id": 11145015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73196ead8fc39d3ea2623448387cdcee?s=128&d=identicon&r=PG&f=1", "display_name": "dev_cc", "link": "https://stackoverflow.com/users/11145015/dev-cc"}, "edited": false, "score": 0, "creation_date": 1570028055, "post_id": 58203559, "comment_id": 102786229, "body": "I tried more than 10 times,but i can get the correct password."}, {"owner": {"reputation": 1792, "user_id": 3448136, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/ynqfe.jpg?s=128&g=1", "display_name": "Lee Jenkins", "link": "https://stackoverflow.com/users/3448136/lee-jenkins"}, "edited": false, "score": 0, "creation_date": 1570028226, "post_id": 58203559, "comment_id": 102786325, "body": "@Kheyraddin Look through the code and describe to yourself how x is being used. Does the value of x change during the execution of the program? If so, does the change of value affect the program in any way?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "edited": false, "score": 0, "creation_date": 1570028819, "post_id": 58204230, "comment_id": 102786721, "body": "In the last you should add <code>printf(&quot;Entered wrong password 10 times, you are now locked out\\n&quot;);</code>"}], "tags": [], "owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "is_accepted": false, "score": 2, "last_activity_date": 1570028642, "creation_date": 1570028642, "answer_id": 58204230, "question_id": 58203559, "link": "https://stackoverflow.com/questions/58203559/why-is-x-equal-to-10/58204230#58204230", "title": "Why is x equal to 10?", "body": "<p>Your code asks for a password until you type it in correct. To realize this you implemented the \"flag\" <code>x</code>.<br> In each try you check if <code>x</code> is not equal to 0, if so run again. If the password is correct you set <code>x</code> to 0. Therefore <code>x</code> should be initalized with any value except for 0 to have at least one try.<br>\n<code>int x = 10;</code> could also be replaced by any other non zero value. <br>\nIf you want to add a limited number of tries (for example 10) you could modify your while-loop like below:</p>\n\n<pre><code>while (x!=0)\n{\n    printf(\"\\nInput the password: \");\n    scanf(\"%d\",&amp;pass);  \n\n    if (pass==1234)\n    {\n        printf(\"Correct password\");\n        x=0;\n    }\n    else\n    {\n        printf(\"Wrong password, try another\"); \n        x--; //decrement your number of available tries     \n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Note: <br>\nIf you want to implement a password check, please never ever save passwords as plain text.</p>\n"}], "owner": {"reputation": 61, "user_id": 11145015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73196ead8fc39d3ea2623448387cdcee?s=128&d=identicon&r=PG&f=1", "display_name": "dev_cc", "link": "https://stackoverflow.com/users/11145015/dev-cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570039366, "creation_date": 1570026342, "last_edit_date": 1570039366, "question_id": 58203559, "link": "https://stackoverflow.com/questions/58203559/why-is-x-equal-to-10", "title": "Why is x equal to 10?", "body": "<p>For wrong password print \"Incorrect password\" and for correct password print \"Correct password\" and quit the program. The correct password is 1234.</p>\n\n<p>I wrote code in C language and x needs a number to equalize. Why should we equalize x to 10 in the 3rd line?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\nint pass, x=10; \nwhile (x!=0)\n{\nprintf(\"\\nInput the password: \");\nscanf(\"%d\",&amp;pass);  \n\nif (pass==1234)\n{\n    printf(\"Correct password\");\n    x=0;\n}\nelse\n{\n   printf(\"Wrong password, try another\");       \n}\nprintf(\"\\n\");\n}\nreturn 0;\n } \n</code></pre>\n"}, {"tags": ["c", "embedded", "stm32", "lora"], "comments": [{"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1570091488, "post_id": 58203283, "comment_id": 102806684, "body": "Have you set the pin connected to <code>MCU_TCXO</code> to low? This will disable the SX1276 chip and reduce your power consumption further. I&#39;m also not seeing any code from the LoRaWAN demo project, is this on purpose?"}, {"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1570092574, "post_id": 58203283, "comment_id": 102807219, "body": "Also pretty important, are you using LoRa or LoRaWAN?"}], "answers": [{"comments": [{"owner": {"reputation": 4778, "user_id": 1917363, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/112f39ececafcaf7321fcfc67be141dd?s=128&d=identicon&r=PG", "display_name": "applecrusher", "link": "https://stackoverflow.com/users/1917363/applecrusher"}, "edited": false, "score": 0, "creation_date": 1574367274, "post_id": 58221841, "comment_id": 104218603, "body": "Part of that current may be the lights on the board. Depending on how you are testing the current."}], "tags": [], "owner": {"reputation": 41, "user_id": 12154216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDpS0etdGP1hgdKaIwTQKWKQinx_RXhfonjex3Qwg=k-s128", "display_name": "pmathelin", "link": "https://stackoverflow.com/users/12154216/pmathelin"}, "is_accepted": false, "score": 2, "last_activity_date": 1570114787, "creation_date": 1570114787, "answer_id": 58221841, "question_id": 58203283, "link": "https://stackoverflow.com/questions/58203283/discovery-board-stm32l0-lorawan-how-to-configure-the-stop-mode-correctly/58221841#58221841", "title": "Discovery board STM32L0 (LoRaWAN) -&gt; How to configure the stop mode correctly?", "body": "<p>I found a part of a solution. Now I reach 90uA instead of 11mA yesterday.</p>\n\n<p>To decrease the power consumption, I just added a function to put the Semtech SX1276 LoRa transceiver in low power mode, which is not puted in this mode by default when we use the stop mode.</p>\n\n<p>So, you can find below the code for the first improvments:</p>\n\n<pre><code>void LPM_EnterStopMode(void){\n    BACKUP_PRIMASK();\n    DISABLE_IRQ( );\n\n    main_rf_disable();                  // Put Semtech SX1276 into Sleep Mode (IDDSL = 0.2 uA typ)\n    HAL_SPI_DeInit(&amp;hspi);              // Disable SPI\n    HW_IoDeInit();\n    HW_AdcDeInit();\n    main_dbg_disable();                 // Disable debug module and pins (SWCLK &amp; SWDIO)\n\n    __HAL_RCC_PWR_CLK_ENABLE();         // Enable power control clock\n    HAL_PWR_DisablePVD();               // Disable the Power Voltage Detector\n    HAL_PWREx_EnableUltraLowPower();\n    HAL_PWREx_EnableFastWakeUp();\n\n    __HAL_RCC_GPIOA_CLK_DISABLE();\n    __HAL_RCC_GPIOB_CLK_DISABLE();\n    __HAL_RCC_GPIOC_CLK_DISABLE();\n    __HAL_RCC_GPIOH_CLK_DISABLE();\n    HAL_SuspendTick();\n\n    __HAL_PWR_CLEAR_FLAG(PWR_FLAG_WU);              // Clear wakeUp flag\n    RESTORE_PRIMASK( );\n\n    // Switch to STOPMode\n    HAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);\n}\n\nvoid main_rf_disable(void)\n{\n    // SX1276 SPI instruction to read version\n    uint8_t sx1276_cmd_rd_reg_version[2] =\n    {\n        0x42,   // Read bit + RegVersion\n        0x00,   // Data\n    };\n\n    // data\n    uint8_t data[2];\n\n    // SX1276 SPI instruction to put it into Sleep Mode\n    uint8_t sx1276_cmd_sleep_mode[2] =\n    {\n        0x81,   // Write bit + RegOpMode\n        0x00,   // Sleep Mode\n    };\n\n    // Power up TCXO\n    HAL_GPIO_WritePin(RADIO_TCXO_VCC_PORT, RADIO_TCXO_VCC_PIN , GPIO_PIN_SET);\n    HAL_Delay(10); // Wait at least 5 ms\n\n    // Reset\n    HAL_GPIO_WritePin(RADIO_RESET_PORT, RADIO_RESET_PIN, GPIO_PIN_RESET);\n    HAL_Delay(10);  // Wait at least 1 ms\n    HAL_GPIO_WritePin(RADIO_RESET_PORT, RADIO_RESET_PIN, GPIO_PIN_SET);\n    HAL_Delay(10);  // Wait at least 6 ms\n\n    // CS low\n    HAL_GPIO_WritePin(RADIO_NSS_PORT, RADIO_NSS_PIN, GPIO_PIN_RESET);\n    // Read RegVersion register\n    HAL_SPI_TransmitReceive(&amp;hspi, sx1276_cmd_rd_reg_version, data, 2, HAL_MAX_DELAY);\n    // CS high\n    HAL_GPIO_WritePin(RADIO_NSS_PORT, RADIO_NSS_PIN, GPIO_PIN_SET);\n    HAL_Delay(10);\n\n    // CS low\n    HAL_GPIO_WritePin(RADIO_NSS_PORT, RADIO_NSS_PIN, GPIO_PIN_RESET);\n    // Select Sleep Mode in RegOpMode register\n    HAL_SPI_Transmit(&amp;hspi, sx1276_cmd_sleep_mode, 2, HAL_MAX_DELAY);\n    // CS high\n    HAL_GPIO_WritePin(RADIO_NSS_PORT, RADIO_NSS_PIN, GPIO_PIN_SET);\n    HAL_Delay(10);\n\n    // Set RF Switch to receive mode\n    HAL_GPIO_WritePin(RADIO_ANT_SWITCH_PORT_RX, RADIO_ANT_SWITCH_PIN_RX, GPIO_PIN_SET);\n    HAL_GPIO_WritePin(RADIO_ANT_SWITCH_PORT_TX_RFO, RADIO_ANT_SWITCH_PIN_TX_RFO, GPIO_PIN_RESET);\n    HAL_GPIO_WritePin(RADIO_ANT_SWITCH_PORT_TX_BOOST, RADIO_ANT_SWITCH_PIN_TX_BOOST, GPIO_PIN_RESET);\n\n    // Power down TCXO\n    HAL_GPIO_WritePin(RADIO_TCXO_VCC_PORT, RADIO_TCXO_VCC_PIN , GPIO_PIN_RESET);\n}\n\nvoid main_dbg_disable(void)\n{\n    GPIO_InitTypeDef GPIO_InitStructure;\n\n    GPIO_InitStructure.Mode = GPIO_MODE_ANALOG;\n    GPIO_InitStructure.Pull = GPIO_NOPULL;\n    GPIO_InitStructure.Pin = (GPIO_PIN_13 | GPIO_PIN_14);\n    HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n\n    __HAL_RCC_DBGMCU_CLK_ENABLE();\n    HAL_DBGMCU_DisableDBGStopMode();\n    __HAL_RCC_DBGMCU_CLK_DISABLE();\n}\n</code></pre>\n\n<p>Still looking to decrease the power consumption to at least 4uA. If you have any suggestion, feal free to comment \ud83d\ude09\nI also desactivated TCX0 with connecting a pin and setting it to 0 and I am using LoRaWAN.</p>\n\n<p>PS: think to unplug the ST-Link which consumes 300uA</p>\n"}], "owner": {"reputation": 41, "user_id": 12154216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDpS0etdGP1hgdKaIwTQKWKQinx_RXhfonjex3Qwg=k-s128", "display_name": "pmathelin", "link": "https://stackoverflow.com/users/12154216/pmathelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1570425884, "creation_date": 1570025462, "last_edit_date": 1570425884, "question_id": 58203283, "link": "https://stackoverflow.com/questions/58203283/discovery-board-stm32l0-lorawan-how-to-configure-the-stop-mode-correctly", "title": "Discovery board STM32L0 (LoRaWAN) -&gt; How to configure the stop mode correctly?", "body": "<p>I come there after some days of work on the stop mode on the discovery board STM32L0 with LoRaWAN.</p>\n\n<p>I tried to generate a new project which does nothing, to test the stop mode with RTC following the datasheet and measure the current consumption. I have some issues with doing this.</p>\n\n<p>I use a multimeter on the JP2 tu measure the consumption when the board is powered by USB. Without the stop mode, the consumption is around 11 mA and when I activate the stop mode after suspending Tick, the current consumption is around 3.1 mA, which still is far far away from the consumption mentioned in the datasheet.</p>\n\n<p>You can find my main following, maybe you can help me to find how can I enter in stop mode correctly? \ud83d\ude0a</p>\n\n<p>Thank you for your help !</p>\n\n<pre><code>int main(void)\n{\n    /* Reset of all peripherals, Initializes the Flash interface and the Systick. */\n    HAL_Init();\n\n    /* Configure the system clock */\n    SystemClock_Config();\n\n    /* Initialize all configured peripherals */\n    MX_GPIO_Init();\n    MX_RTC_Init();\n    MX_SPI1_Init();\n    MX_USART2_UART_Init();\n    /* USER CODE BEGIN 2 */\n\n    /* LOW POWER CODE */\n    HAL_Delay(1000);\n    HAL_SuspendTick();\n    __HAL_RCC_PWR_CLK_ENABLE();\n    HAL_PWREx_EnableUltraLowPower();        // Ultra low power mode\n    HAL_PWREx_EnableFastWakeUp();           // Fast wake-up for ultra low power mode\n    HAL_DeInit();\n    MX_GPIO_Disable();\n    // TCXO disabled with JP9 on 1-2\n    __HAL_RCC_SPI1_CLK_DISABLE();\n    __HAL_RCC_USART2_CLK_DISABLE();\n    __HAL_RCC_ADC1_CLK_DISABLE();\n    __HAL_RCC_TIM21_CLK_DISABLE();\n    __HAL_PWR_CLEAR_FLAG(PWR_FLAG_WU);      // clear wake up flag\n    HAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);\n\n    HAL_ResumeTick();\n    SystemClock_Config();\n    /* LOW POWER CODE END */\n\n    /* Infinite loop */\n    while (1)\n    {\n        /* Blink LEDs */\n        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_SET);\n        HAL_Delay(500);\n        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_RESET);\n        HAL_Delay(500);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "multidimensional-array", "fopen", "fread", "reinterpret-cast"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1570025720, "post_id": 58203232, "comment_id": 102784799, "body": "Why fread into &amp;A every time?"}, {"owner": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1570035096, "post_id": 58203232, "comment_id": 102789981, "body": "I don&#39;t know, I just tought of introducing the values for the array in A"}], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1570026432, "post_id": 58203318, "comment_id": 102785272, "body": "@PabloCorreaChand&#237;a There was a typo. See my updated post."}, {"owner": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1570027702, "post_id": 58203318, "comment_id": 102786033, "body": "Thanks! now it&#39;s printing something at least but it&#39;s full of 0s :("}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1570027762, "post_id": 58203318, "comment_id": 102786069, "body": "@PabloCorreaChand&#237;a Check whether the data is indeed written in the binary format and have equal sizes."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1570035165, "post_id": 58203318, "comment_id": 102790018, "body": "@PabloCorreaChand&#237;a In text mode?"}, {"owner": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1570035430, "post_id": 58203318, "comment_id": 102790146, "body": "I think so, I have a .txt file with every number ex: 99.888927"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1570026412, "last_edit_date": 1570026412, "creation_date": 1570025619, "answer_id": 58203318, "question_id": 58203232, "link": "https://stackoverflow.com/questions/58203232/open-read-and-print-a-2d-array-whats-wrong-with-my-code/58203318#58203318", "title": "Open, Read and Print a 2D Array! (What&#39;s wrong with my code?)", "body": "<p>This declaration is wrong because the type of the pointer A is invalid.</p>\n\n<pre><code>int **A = malloc(sizeof(double[1024][1024]));\n</code></pre>\n\n<p>You have to write</p>\n\n<pre><code>double ( *A )[1024] = malloc(sizeof(double[1024][1024]));\n</code></pre>\n\n<p>This loop</p>\n\n<pre><code>for(int z = 0; z &lt; 1048576; z++) {\n    fread(&amp;A, sizeof(double),1,matrizA);\n}\n</code></pre>\n\n<p>is also wrong. You could write</p>\n\n<pre><code>for( size_t i = 0; i &lt; 1048576; i++) {\n    fread( ( double * )A + i, sizeof(double),1,matrizA);\n}\n</code></pre>\n\n<p>I assume that the file contains exactly 1048576 doubles. Otherwise you have to check the return value of the call of fread.</p>\n"}], "owner": {"reputation": 3, "user_id": 12154184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214991361963162/picture?type=large", "display_name": "Pablo Correa Chand&#237;a", "link": "https://stackoverflow.com/users/12154184/pablo-correa-chand%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58203318, "answer_count": 1, "score": 0, "last_activity_date": 1570026412, "creation_date": 1570025270, "last_edit_date": 1570025757, "question_id": 58203232, "link": "https://stackoverflow.com/questions/58203232/open-read-and-print-a-2d-array-whats-wrong-with-my-code", "title": "Open, Read and Print a 2D Array! (What&#39;s wrong with my code?)", "body": "<p>First I reserve some memory using malloc (the file has a [1024][1024] array), after that I open the file using fopen. Then I'm trying to read the file into the reserved memory space. To see if I'm reading it correctly I'm try printing the array but what I get after compiling the code is:\n\"Process returned -1073741819 (0xC0000005)   execution time : 1.779 s\"\nPress any key to continue.</p>\n\n<p>Any suggestions? </p>\n\n<pre><code>{\n\nint **A = malloc(sizeof(double[1024][1024]));\n\nFILE *matrizA = fopen(\"A_1024.dat\", \"rb\");\n\nfor(int z = 0; z &lt; 1048576; z++) {\n    fread(&amp;A, sizeof(double),1,matrizA);\n}\n\nfclose(matrizA);\n\nfor (int i = 0; i &lt; 1024; i++) {\n    for (int j = 0; j &lt; 1024; j++) {\n        printf( \"%f \", A[i][j]);\n    }\n}\n\nfree(A);\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory", "memory-management", "realloc"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1570022737, "post_id": 58202472, "comment_id": 102782928, "body": "Are you sure that you want <code>sizeof *_dic-&gt;value</code> instead of <code>sizeof _dic-&gt;value</code> in the <code>realloc</code> call?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570022939, "post_id": 58202472, "comment_id": 102783059, "body": "<code>printf(&quot;%lu&quot;, sizeof(_dic-&gt;key));</code> is wrong and invokes undefined behavior.  The proper format specifier for the <code>size_t</code> that <code>sizeof()</code> returns is <code>%zu</code>."}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 3, "last_activity_date": 1570022756, "creation_date": 1570022756, "answer_id": 58202518, "question_id": 58202472, "link": "https://stackoverflow.com/questions/58202472/realloc-is-not-reallocating-memory/58202518#58202518", "title": "realloc is not reallocating memory", "body": "<p><code>sizeof(_dic-&gt;key)</code> computes the size of a <em>pointer</em>, which is constant - 8 bytes in your case. <em>All pointers on your machine are 8 bytes</em>, no matter how much memory they point to.</p>\n"}], "owner": {"reputation": 1, "user_id": 9541531, "user_type": "registered", "profile_image": "https://graph.facebook.com/1553136354784272/picture?type=large", "display_name": "RoboCopGay", "link": "https://stackoverflow.com/users/9541531/robocopgay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1570022984, "answer_count": 1, "score": 0, "last_activity_date": 1570022756, "creation_date": 1570022606, "question_id": 58202472, "link": "https://stackoverflow.com/questions/58202472/realloc-is-not-reallocating-memory", "closed_reason": "Duplicate", "title": "realloc is not reallocating memory", "body": "<pre><code>int _add_item( char * _key, void * _value, int item, dict *_dic ){\n\n  printf(\"%lu\", sizeof(_dic-&gt;key));\n  printf(\" + %lu\\n\", sizeof(_key));\n  printf(\"%lu\\n\", (sizeof(_dic-&gt;key) + sizeof (_key)) );\n  _dic-&gt;key = (char **) realloc (_dic-&gt;key, (sizeof _dic-&gt;key) + (sizeof _key));\n  _dic-&gt;value = (void **) realloc (_dic-&gt;value, (sizeof _dic-&gt;value)+ (sizeof _value));\n  printf(\"%lu\\n\", sizeof(_dic-&gt;key) );\n  getchar();\n  _dic-&gt;key[item] = _key;\n  _dic-&gt;value[item] = _value;\n  puts(_dic-&gt;key[item]);\n  printf(\"%i\\n\", get_dic_len(* _dic) );\n  getchar();\n\n  return 1;\n}\n</code></pre>\n\n<p>Out:</p>\n\n<pre><code>8 + 8\n16\n8\n\n</code></pre>\n\n<p>realloc is not reallocating memory, it was 8 bytes, i tried to reallocate to 16 bytes but it remained 8 bytes </p>\n"}, {"tags": ["c", "performance-testing", "uuid", "guid", "loadrunner"], "comments": [{"owner": {"reputation": 2705, "user_id": 1501456, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/660e626ccb2d55bc2f3ca14940fb882e?s=128&d=identicon&r=PG", "display_name": "Buzzy", "link": "https://stackoverflow.com/users/1501456/buzzy"}, "edited": false, "score": 0, "creation_date": 1570024056, "post_id": 58202093, "comment_id": 102783793, "body": "Do you have to use Web HTTP protocol because in TruWeb protocol it would be much easier."}, {"owner": {"reputation": 23, "user_id": 3406299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOF2W.jpg?s=128&g=1", "display_name": "Barun", "link": "https://stackoverflow.com/users/3406299/barun"}, "reply_to_user": {"reputation": 2705, "user_id": 1501456, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/660e626ccb2d55bc2f3ca14940fb882e?s=128&d=identicon&r=PG", "display_name": "Buzzy", "link": "https://stackoverflow.com/users/1501456/buzzy"}, "edited": false, "score": 0, "creation_date": 1570112119, "post_id": 58202093, "comment_id": 102817844, "body": "Yes, it&#39;s for web HTTP protocol."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 3406299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOF2W.jpg?s=128&g=1", "display_name": "Barun", "link": "https://stackoverflow.com/users/3406299/barun"}, "is_accepted": false, "score": 0, "last_activity_date": 1570021358, "creation_date": 1570021358, "answer_id": 58202094, "question_id": 58202093, "link": "https://stackoverflow.com/questions/58202093/how-to-generate-universally-unique-identifier-uuid-from-loadrunner-independent/58202094#58202094", "title": "How to generate Universally Unique IDentifier, UUID from LoadRunner independent of the OS", "body": "<p>I have come up with the below mentioned solution</p>\n\n<pre><code>int lr_guid_gen()\n{\n    char GUID[40];\n    int t = 0;\n    char *szTemp = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\";\n    char *szHex = \"0123456789abcdef-\";\n    int nLen = strlen (szTemp);\n\n\n    for (t=0; t&lt;nLen+1; t++)\n    {\n        int r = rand () % 16;\n        char c = ' ';   \n\n        switch (szTemp[t])\n        {\n            case 'x' : { c = szHex [r]; } break;\n            case 'y' : { c = szHex [r &amp; 0x03 | 0x08]; } break;\n            case '-' : { c = '-'; } break;\n            case '4' : { c = '4'; } break;\n        }\n\n        GUID[t] = ( t &lt; nLen ) ? c : 0x00;\n    }\n\n    lr_save_string(GUID,\"PAR_GUID\");\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2705, "user_id": 1501456, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/660e626ccb2d55bc2f3ca14940fb882e?s=128&d=identicon&r=PG", "display_name": "Buzzy", "link": "https://stackoverflow.com/users/1501456/buzzy"}, "edited": false, "score": 0, "creation_date": 1570025105, "post_id": 58203173, "comment_id": 102784456, "body": "There is also an option to use JavaScript. If you want me to post that as well please comment below."}, {"owner": {"reputation": 23, "user_id": 3406299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOF2W.jpg?s=128&g=1", "display_name": "Barun", "link": "https://stackoverflow.com/users/3406299/barun"}, "edited": false, "score": 0, "creation_date": 1570112183, "post_id": 58203173, "comment_id": 102817877, "body": "I have tried that trick with the loadrunner parameters, but that didn&#39;t work with the requests."}, {"owner": {"reputation": 2705, "user_id": 1501456, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/660e626ccb2d55bc2f3ca14940fb882e?s=128&d=identicon&r=PG", "display_name": "Buzzy", "link": "https://stackoverflow.com/users/1501456/buzzy"}, "reply_to_user": {"reputation": 23, "user_id": 3406299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOF2W.jpg?s=128&g=1", "display_name": "Barun", "link": "https://stackoverflow.com/users/3406299/barun"}, "edited": false, "score": 0, "creation_date": 1570344509, "post_id": 58203173, "comment_id": 102879258, "body": "It should have worked. If you post the code that didn&#39;t work I can check why."}, {"owner": {"reputation": 159, "user_id": 4644419, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7edcb9752b0ba32c6979304a508448fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Chepuri", "link": "https://stackoverflow.com/users/4644419/vishal-chepuri"}, "edited": false, "score": 0, "creation_date": 1594626451, "post_id": 58203173, "comment_id": 111179625, "body": "This is amazing @Buzzy. No coding and served the purpose. Thanks"}], "tags": [], "owner": {"reputation": 2705, "user_id": 1501456, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/660e626ccb2d55bc2f3ca14940fb882e?s=128&d=identicon&r=PG", "display_name": "Buzzy", "link": "https://stackoverflow.com/users/1501456/buzzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1570025058, "creation_date": 1570025058, "answer_id": 58203173, "question_id": 58202093, "link": "https://stackoverflow.com/questions/58202093/how-to-generate-universally-unique-identifier-uuid-from-loadrunner-independent/58203173#58203173", "title": "How to generate Universally Unique IDentifier, UUID from LoadRunner independent of the OS", "body": "<p>You can use the following trick which doesn't require any code. \nDefine a hex parameter as follows:\n<a href=\"https://i.stack.imgur.com/Wn2AD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wn2AD.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then use it with this code:\n<code>lr_eval_string(\"{MyHex}{MyHex}-{MyHex}-{MyHex}-{MyHex}-{MyHex}{MyHex}{MyHex}\")</code></p>\n"}], "owner": {"reputation": 23, "user_id": 3406299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOF2W.jpg?s=128&g=1", "display_name": "Barun", "link": "https://stackoverflow.com/users/3406299/barun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570025058, "creation_date": 1570021358, "question_id": 58202093, "link": "https://stackoverflow.com/questions/58202093/how-to-generate-universally-unique-identifier-uuid-from-loadrunner-independent", "title": "How to generate Universally Unique IDentifier, UUID from LoadRunner independent of the OS", "body": "<p>I have experienced the need of generating UUID in LoadRunner several times while scripting but there is no in-build function to do so. I am using both linux and windows load generators.           </p>\n\n<p>Thanks to Scott Moore for writing the below code which uses windows in-build CoCreateGuid function (dependent on ole32.dll) to generate required UUID. However that code is completely dependent on windows platform and doesn't work in Linux platform.</p>\n\n<p>How can we generate UUID from Loadrunner independent of OS?</p>\n\n<pre><code>    #include \"lrun.h\"\n    #include \"web_api.h\"\n    #include \"lrw_custom_body.h\"\n    #include \"stdlib.h\"\n    #include \"stdio.h\"\n    #include \"string.h\"\n    int lr_guid_gen()\n    {\n        typedef struct _GUID\n        {\n            unsigned long Data1;\n            unsigned short Data2;\n            unsigned short Data3;\n            unsigned char Data4[8];\n        } GUID;\n\n        GUID m_guid;\n        char buf[50];\n\n        lr_load_dll (\"ole32.dll\");\n\n        CoCreateGuid(&amp;m_guid);\n\n        sprintf (buf, \"%08lx-%04x-%04x-%02x%02x-%02x%02x%02x%02x%02x%02x\",\n        m_guid.Data1, m_guid.Data2, m_guid.Data3,\n        m_guid.Data4[0], m_guid.Data4[1], m_guid.Data4[2], m_guid.Data4[3],\n        m_guid.Data4[4], m_guid.Data4[5], m_guid.Data4[6], m_guid.Data4[7]);\n\n        lr_save_string(buf, \"PAR_GUID\");\n\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1570021628, "post_id": 58201848, "comment_id": 102782219, "body": "I think <code>&quot;[a-z]%c&quot;</code> wants to scan a literal &quot;[a-z]&quot;, then a character. The format <code>&quot; %c&quot;</code> (with a leading space)  skips white-space including the newline and then tries to read a non-space character. I say &quot;tries&quot;, because the scanning may fail, which the return value of <code>scanf</code> will tell you. In my opinion, interactive input like yours is best real line-wise with <code>fgets</code> for example, and then parsed. The <code>sscanf</code> fucntion takes its input from a string."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1570021697, "post_id": 58201848, "comment_id": 102782252, "body": "The error message seems links to the case operation == 1 and obj.top &gt;= obj.capacity (your code).  You should print the values scanned or use a debugger to see why you reach this branch."}, {"owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "edited": false, "score": 0, "creation_date": 1570021939, "post_id": 58201848, "comment_id": 102782415, "body": "@Nico238 but <code>obj.top</code> has to less than <code>obj.capacity</code>"}, {"owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1570022006, "post_id": 58201848, "comment_id": 102782471, "body": "@MOehm so my solution to eat a <code>\\n</code> is totally wrong?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1570022368, "post_id": 58201848, "comment_id": 102782713, "body": "Yes. <code>scanf(&quot;%*c&quot;);</code> &quot;eats&quot; the next character after reading a decimal number. That character may or may not be a new-line character. If the input had been &quot;6x&quot;, it would have been the <code>&#39;x&#39;</code>. I don&#39;t think there is a format to scan a single character from a set, but you could check with <code>isalpha</code> or <code>islower</code> from <code>&lt;ctype.h&gt;</code> until you get one. In any case, you should prepare for the possibility of misformatted or erroneous input."}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1570022801, "post_id": 58201848, "comment_id": 102782971, "body": "Besides, try to avoid mixing (interleaving) like you did. After asking for operation to do, first perform the operation, <i>then</i> ask whether continue or not. So, errors related to operation are printed suddenly, not after having asked to continue or not."}, {"owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "reply_to_user": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570023268, "post_id": 58201848, "comment_id": 102783298, "body": "@linuxfan I had to write the above code in such a way because I have to submit it in my college server AND the input stream is specified just like the way mentioned above. Even all the <code>printf</code> function which i have written has to be deleted; except outputting the desired output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1570023580, "post_id": 58201848, "comment_id": 102783493, "body": "@Swarnim Khosla you enters 4 times in your loop. Add trace output to see what the values of your variables are : <code>printf(&quot;capa :  %d, top : %d, op : %d\\&quot;, obj.capacity, obj.top, operation);</code>"}, {"owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "edited": false, "score": 0, "creation_date": 1570024286, "post_id": 58201848, "comment_id": 102783944, "body": "@Nico238 I inserted your code in the last of my <code>do-while</code> loop and is now acting more weirdly. After one loop it is showing <code>capa : 3, top : 3, op : 1</code> and exiting the programming. I don&#39;t know why is <code>top : 3</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1570024432, "post_id": 58201848, "comment_id": 102784043, "body": "@SwarnimKhosla it is because your parsing of inputs is wrong. You read multiple times the sames values. Output the values you read until you find the good formatting (see @M Oehm comment)"}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "is_accepted": true, "score": 0, "last_activity_date": 1570029795, "last_edit_date": 1570029795, "creation_date": 1570027551, "answer_id": 58203918, "question_id": 58201848, "link": "https://stackoverflow.com/questions/58201848/logical-error-in-do-while-loop-during-implementation-of-data-structure-stack/58203918#58203918", "title": "logical error in do-while loop during implementation of data structure &quot;stack&quot;", "body": "<p>I am able to solve my problem by removing<code>\"[a-z]%c\"</code> and replacing it with <code>\" %c\"</code>.</p>\n\n<p>This is my new (correct) code.</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\nstruct Stack\n{\n    int capacity;\n    int top;\n    int *array;\n};\n\nvoid push(struct Stack *stack, int a) //function to PUSH a character in the stack.\n{\n    stack-&gt;array[++stack-&gt;top] = a;\n}\n\nint pop(struct Stack *stack) //function to POP a character in the stack.\n{\n    return stack-&gt;array[stack-&gt;top--];\n}\n\nint main(void)\n{\n    struct Stack obj;\n    obj.top = -1;\n\n    printf(\"Enter the capacity of stack\\n\");\n    scanf(\"%d\", &amp;obj.capacity); //Inputting the capacity of the stack.\n\n    obj.array = calloc(obj.capacity, sizeof(int));\n\n    int operation;\n    int element;\n    char continuation;\n\n    do\n    {\n        printf(\"\\nEnter 1 if you want to PUSH or 2 for POP\\n\");\n        scanf(\"%d\", &amp;operation);\n\n        if(operation == 1)\n        {\n            printf(\"\\nEnter the element which is to be pushed\\n\");\n            scanf(\"%d\", &amp;element);\n\n            if(obj.top &lt; obj.capacity)\n            {\n                push(&amp;obj, element);\n            }\n            else\n            {\n                printf(\"Error\\n\");\n                return EXIT_FAILURE;\n            }\n        }\n\n        else if(operation == 2)\n        {\n            printf(\"deleted element is\\n\");\n            while(obj.top != -1) //will POP all elements on the stack and print it.\n            {\n                printf(\"%d\", pop(&amp;obj));\n                if(obj.top != 0)\n                {\n                    printf(\" \");\n                }\n            }\n        }\n\n        else\n        {\n            printf(\"Wrong operation specified\\n\");\n            return EXIT_FAILURE;\n        }\n\n        scanf(\"%*c\"); //To ignore any newline in stdin buffer.\n        printf(\"\\nEnter 'y' if you want to continue else enter 'n'\\n\");\n        scanf(\" %c\", &amp;continuation);\n\n    } while(continuation == 'y');\n\n    return 0;\n}\n</code></pre>\n\n<p>Note: - I have also avoided interleaving <code>printf</code> as suggested in the comments.</p>\n\n<p>Howsoever I am still not able to understand why my previous code didn't work.</p>\n\n<p><strong>P.S.</strong> </p>\n\n<p>I finally got my mistake, instead of writing <code>\"[a-z]%c\"</code> it should be <code>\"%[a-z]c\"</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 10912105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ariwmaXAKfY/AAAAAAAAAAI/AAAAAAAAGAU/Tnmw-ZGCKD0/photo.jpg?sz=128", "display_name": "Swarnim Khosla", "link": "https://stackoverflow.com/users/10912105/swarnim-khosla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58203918, "answer_count": 1, "score": 1, "last_activity_date": 1570036031, "creation_date": 1570020542, "last_edit_date": 1570036031, "question_id": 58201848, "link": "https://stackoverflow.com/questions/58201848/logical-error-in-do-while-loop-during-implementation-of-data-structure-stack", "title": "logical error in do-while loop during implementation of data structure &quot;stack&quot;", "body": "<p>My teacher gave me a homework problem in which we have to <code>push</code> and <code>pop</code> elements in a stack.</p>\n\n<p>The input shall be: -</p>\n\n<blockquote>\n  <ol>\n  <li><p>First line of input must contain no. of elements in the stack.</p></li>\n  <li><p>Second line of input must contain the choice of user (i.e.) whether to PUSH (i.e. entering <code>'1'</code>) or POP element (i.e. entering\n  <code>'2'</code>).</p></li>\n  <li><p>If PUSH operation has been selected as user's choice; then third line of input must contain the element to be pushed into stack.</p></li>\n  <li><p>the next line of input must contain either <code>'y'</code> or <code>'n'</code> as a reply to if the user wishes to continue these operations.</p></li>\n  </ol>\n</blockquote>\n\n<p><strong>Test Case 1</strong></p>\n\n<p><strong>INPUT</strong></p>\n\n<blockquote>\n  <p>3 <code>//(capacity of stack)</code></p>\n  \n  <p>1 <code>//(selecting PUSH OR POP)</code></p>\n  \n  <p>6 <code>//(entering the element which is to entered)</code></p>\n  \n  <p>y <code>//(to continue or not continue)</code></p>\n  \n  <p>1 <code>//(selecting PUSH OR POP)</code></p>\n  \n  <p>4 <code>//(entering the element which is to entered)</code></p>\n  \n  <p>y <code>//(to continue or not continue)</code></p>\n  \n  <p>1 <code>//(selecting PUSH OR POP)</code></p>\n  \n  <p>7 <code>//(entering the element which is to entered)</code></p>\n  \n  <p>y <code>//(to continue or not continue)</code></p>\n  \n  <p>2 <code>//(selecting PUSH OR POP)</code></p>\n  \n  <p>n <code>//(to continue or not continue)</code></p>\n</blockquote>\n\n<p><strong>OUTPUT</strong></p>\n\n<blockquote>\n  <p><code>deleted element is</code></p>\n  \n  <p><code>7 4 6</code></p>\n</blockquote>\n\n<p>For the above problem I have written the following code: -</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\nstruct Stack\n{\n    int capacity;\n    int top;\n    int *array;\n};\n\nvoid push(struct Stack *stack, int a) //function to PUSH a character in the stack.\n{\n    stack-&gt;array[++stack-&gt;top] = a;\n}\n\nint pop(struct Stack *stack) //function to POP a character in the stack.\n{\n    return stack-&gt;array[stack-&gt;top--];\n}\n\nint main(void)\n{\n    struct Stack obj;\n    obj.top = -1;\n\n    printf(\"Enter the capacity of stack\\n\");\n    scanf(\"%d\", &amp;obj.capacity); //Inputting the capacity of the stack.\n\n    obj.array = calloc(obj.capacity, sizeof(int));\n\n    int operation;\n    int element;\n    char continuation;\n\n    do\n    {\n        printf(\"\\nEnter 1 if you want to PUSH or 2 for POP\\n\");\n        scanf(\"%d\", &amp;operation);\n\n        printf(\"\\nEnter the element which is to be pushed\\n\");\n        scanf(\"%d\", &amp;element);\n\n        scanf(\"%*c\"); //To ignore any newline in stdin buffer.\n        printf(\"\\nEnter 'y' if you want to continue else enter 'n'\\n\");\n        scanf(\"[a-z]%c\", &amp;continuation);\n\n        if(operation == 1)\n        {\n            if(obj.top &lt; obj.capacity)\n            {\n                push(&amp;obj, element);\n            }\n            else\n            {\n                printf(\"Error\\n\");\n                return EXIT_FAILURE;\n            }\n        }\n\n        else if(operation == 2)\n        {\n            printf(\"deleted element is\\n\");\n            while(obj.top != -1) //will POP all elements on the stack and print it.\n            {\n                printf(\"%d\", pop(&amp;obj));\n                if(obj.top != 0)\n                {\n                    printf(\" \");\n                }\n            }\n        }\n\n        else\n        {\n            printf(\"Wrong operation specified\\n\");\n            return EXIT_FAILURE;\n        }\n    } while(continuation == 'y');\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem which I am encountering in the above code is that after entering the following input: -</p>\n\n<blockquote>\n  <p>3 </p>\n  \n  <p>1 </p>\n  \n  <p>6 </p>\n  \n  <p>y</p>\n</blockquote>\n\n<p>The programme closes (i.e. exiting <code>do-while</code> loop). Howsoever when I change the below line in the code: -</p>\n\n<p><code>char continuation;</code></p>\n\n<p>to </p>\n\n<p><code>char continuation = 'y';</code></p>\n\n<p>It is working fine until I input the following: -</p>\n\n<blockquote>\n  <p>3 </p>\n  \n  <p>1 </p>\n  \n  <p>6 </p>\n  \n  <p>y </p>\n  \n  <p>1 </p>\n  \n  <p>4 </p>\n  \n  <p>y </p>\n  \n  <p>1 </p>\n  \n  <p>7 </p>\n  \n  <p>y</p>\n</blockquote>\n\n<p>which afterwards gives me an abrupt output of : -</p>\n\n<blockquote>\n  <p><code>Error</code></p>\n</blockquote>\n\n<p>and then exits the programme.</p>\n\n<p>My question is : -</p>\n\n<blockquote>\n  <p>Why my code does not work in the first case when i only write <code>char continuation;</code> ?</p>\n  \n  <p>What is the \"logical error\" in the second case when I change <code>char continuation;</code> to <code>char continuation = 'y';</code> ?</p>\n</blockquote>\n"}, {"tags": ["c", "command-line"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570019989, "post_id": 58201639, "comment_id": 102781294, "body": "Have you stepped through the code in debug mode to determine exactly where exception occurs?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1570020146, "post_id": 58201639, "comment_id": 102781387, "body": "Your loop will access <code>argv[argc]</code> when <code>2*i == argc</code>.   <code>argv[argc]</code> is a NULL pointer.   Your library&#39;s implementation of <code>atoi()</code> asserts that it does not receive a NULL pointer, but your code  gives it one.     Strictly speaking, that is undefined behaviour (i.e.  you&#39;re just getting lucky that your <code>atoi()</code> gives an assertion failure rather than - say - reformatting your hard drive or something worse)."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570020382, "post_id": 58201639, "comment_id": 102781540, "body": "The phrase <code>opr = argv[2 * i - 1];</code> is attempting to assign the string located at <code>argv[2*1-1</code> to a <code>char</code> variable."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570020570, "post_id": 58201639, "comment_id": 102781650, "body": "Can you provide an example of command line input that is used with this code?  (edit your post with that information please.)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570107330, "post_id": 58201639, "comment_id": 102815019, "body": "@Jumen - you have provided no feedback on comments or answer.  Are your questions answered?"}, {"owner": {"reputation": 9, "user_id": 12140512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IVdGTl9qXyU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcPfwjGr2AF2ps-bqFI85X-fZCZyA/photo.jpg?sz=128", "display_name": "JUMEN", "link": "https://stackoverflow.com/users/12140512/jumen"}, "edited": false, "score": 0, "creation_date": 1570353172, "post_id": 58201639, "comment_id": 102880784, "body": "I successfully finished this, thanks to your support. Sorry for late feedback."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12140512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IVdGTl9qXyU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcPfwjGr2AF2ps-bqFI85X-fZCZyA/photo.jpg?sz=128", "display_name": "JUMEN", "link": "https://stackoverflow.com/users/12140512/jumen"}, "edited": false, "score": 0, "creation_date": 1570353242, "post_id": 58202681, "comment_id": 102880802, "body": "It helped a lot. Thank you!"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1570028298, "last_edit_date": 1570028298, "creation_date": 1570023335, "answer_id": 58202681, "question_id": 58201639, "link": "https://stackoverflow.com/questions/58201639/debug-assertion-failed-expression-p-nullptr-error/58202681#58202681", "title": "&quot;Debug assertion failed! expression: _p != nullptr&quot; error", "body": "<p>Running the code as is, with input set to: <code>&lt;program.exe&gt; 2 + 5</code>\na null pointer error occurs here:</p>\n\n<pre><code>for (i = 1; 2*i &lt;= argc; i++)\n        {\n            b = atoi(argv[2 * i]);//Null pointer for i==2\n            opr = argv[2 * i - 1];\n            switch (opr)\n</code></pre>\n\n<p>because there is no <code>argv[4]</code>.  This results in <em><a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a></em>.</p>\n\n<p>It is impossible to make corrections <em>accurately</em> without knowing what the program expects as input.  Because you do not specify, my best guess is the program attempts to read a set of arguments from the command line, eg:</p>\n\n<pre><code>argv[0]          argv[1]   argv[2]   argv[3]\n&lt;program&gt;.exe    1         +         2\n</code></pre>\n\n<p>Then convert the values read into variables, and perform a math operation using two numerics and a math operator such as <code>+</code> or <code>-</code>.</p>\n\n<p>Assuming this is the basic goal, the following example simplifies your existing code to perform these steps.  Note corrections to the argument input count test, and lower down, the looping indexes:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/// test using:\n// prog.exe 2 + 3 3 - 4 6 + 7\n\n//results are:\n//result 0: 5\n//result 1: -1\n//result 2: 13\n\ntypedef struct {\n    int n1;\n    char opr;\n    int n2;\n    int result;\n} CALC;\n\n\nint main(int argc, char *argv[])\n{\n    int i;\n    // test for correct number of input arguments\n    if((argc-1)%3 !=0)\n    {\n        printf(\"Wrong number of inputs.\\n\");\n        return 0;\n    }\n\n    // read in, and assign variables (use array of struct)\n    int max = (argc-1)/3;  //guaranteed viable only after determining multiples are correct from above\n    //Get ALL input into array variables\n    CALC calc[max];\n    for (i=0;i&lt;max;i++)\n    {\n        //convert inputs into usable variables\n        calc[i].n1  = atoi(argv[i*3+1]);\n        calc[i].opr = argv[i*3+2][0];\n        calc[i].n2  = atoi(argv[i*3+3]);\n\n        // perform calulations\n        switch(calc[i].opr) {\n            case '+':\n                printf(\"result %d: %d\\n\", i, calc[i].n1 + calc[i].n2);\n                break;\n            case '-':\n                printf(\"result %d: %d\\n\", i, calc[i].n1 - calc[i].n2);\n                break;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Most error checking, and testing of function return values are left to you.  </p>\n"}], "owner": {"reputation": 9, "user_id": 12140512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IVdGTl9qXyU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcPfwjGr2AF2ps-bqFI85X-fZCZyA/photo.jpg?sz=128", "display_name": "JUMEN", "link": "https://stackoverflow.com/users/12140512/jumen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1570066212, "creation_date": 1570019670, "last_edit_date": 1570066212, "question_id": 58201639, "link": "https://stackoverflow.com/questions/58201639/debug-assertion-failed-expression-p-nullptr-error", "title": "&quot;Debug assertion failed! expression: _p != nullptr&quot; error", "body": "<p><a href=\"https://i.stack.imgur.com/qEvLh.png\" rel=\"nofollow noreferrer\">error image</a>I tried to make a program that does calculation with multiple arguments.\nEverything works as I intended except for last one in the picture i attached.\nEvery time I try to put more than 2 numbers in the command line, the error occurs.</p>\n\n<p>The example of input is this : program1.exe 12 + 13 - 2 + 1 </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(int argc, char *argv[])\n{\n    int a, b, rst;\n    int i;\n    char opr;\n\n    if (argc &gt; 100)\n    {\n        printf(\"Too many arguments!\\n\");\n        return 0;\n    }\n    else if (argc &lt;= 1)\n    {\n        printf(\"There are no arguments!\\n\");\n        return 0;\n    }\n\n    a = atoi(argv[1]);\n    rst = a;\n    if (argc == 2)\n    {\n        a = atoi(argv[1]);\n    }\n    else if (argc % 2 != 0)\n    {\n        printf(\"Invalid fomula!\\n\");\n        exit(0);\n    }\n    else\n    {\n        for (i = 1; 2*i &lt;= argc; i++)\n        {\n            b = atoi(argv[2 * i]);\n            opr = argv[2 * i - 1];\n            switch (opr)\n            {\n            case '+':rst = a + b;\n                break;\n            case '-':rst = a - b;\n                break;\n            }\n\n            rst = a;\n        }\n    }\n    printf(\"%d\", rst);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "linux", "file-descriptor", "dbus"], "owner": {"reputation": 31, "user_id": 12150446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe52c7175337607ac529a8ae8d861f43?s=128&d=identicon&r=PG&f=1", "display_name": "uslx", "link": "https://stackoverflow.com/users/12150446/uslx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1570425904, "creation_date": 1570017547, "last_edit_date": 1570425904, "question_id": 58201048, "link": "https://stackoverflow.com/questions/58201048/file-descriptor-passing-with-dbus-to-python-client", "title": "File Descriptor passing with DBus to python client", "body": "<p>I'm trying to access a <strong>file descriptor</strong> in python.</p>\n\n<p>Further I'm using <strong>gdbus-codegen</strong> to generate my server side bindings and access methods then from a <strong>python client</strong>. </p>\n\n<p>Basically invoking methods, passing normal parameters via GVariant Types and getting the return value in python works.</p>\n\n<p>My application is centered around:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/GNOME/glib/blob/master/gio/tests/gdbus-example-server.c\" rel=\"nofollow noreferrer\">https://github.com/GNOME/glib/blob/master/gio/tests/gdbus-example-server.c</a></p>\n</blockquote>\n\n<p>Invoking the method <code>GimmeStdout</code> I can't see the file descriptor returned simply as a return type. The file descriptor is returned as a <code>GUnixFDList</code> and I don't know how to access this in python.</p>\n\n<p>I tried with own test methods and file file descriptors which are not <code>stdout</code></p>\n\n<p>So the question is: How do I access <em>UNIX_FD</em> transferred via DBus in python?</p>\n"}, {"tags": ["c", "while-loop", "ascii"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1570017484, "post_id": 58200995, "comment_id": 102779940, "body": "Please show you&#39;re code, otherwise we&#39;re just throwing guesses."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1570017516, "post_id": 58200995, "comment_id": 102779950, "body": "Can you bit a bit more specific? Also, can you show use some code that you&#39;ve already tried? Stack Overflow is not a general-purpose code-writing service."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570017701, "post_id": 58200995, "comment_id": 102780055, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, then edit your question to comply.  You will get better help that way."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1570017987, "post_id": 58200995, "comment_id": 102780210, "body": "Skip the stuff between <code>Z</code> and <code>a</code>. It&#39;s just basic ASCII."}, {"owner": {"reputation": 59, "user_id": 12153611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2OFaZ.jpg?s=128&g=1", "display_name": "HuHu", "link": "https://stackoverflow.com/users/12153611/huhu"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1570018002, "post_id": 58200995, "comment_id": 102780219, "body": "@FedericoklezCulloca #include&lt;studio.h&gt; void main() { char ch; clrscr(); ch= &#39;A&#39;; while(ch&lt;= &#39;z&#39;) { printf(&quot;%c&quot;,ch); ch++; } getch(); }"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 3, "creation_date": 1570018308, "post_id": 58200995, "comment_id": 102780394, "body": "@user12153611 Put it in your question."}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1570018462, "post_id": 58200995, "comment_id": 102780468, "body": "Also, please, if experienced users change your question&#39;s tags, there&#39;s a reason for that. Don&#39;t roll their changes back."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1570018485, "post_id": 58200995, "comment_id": 102780480, "body": "Please <a href=\"https://stackoverflow.com/posts/58200995/edit\">edit</a> your question. Don&#39;t forget to <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks\">format</a> it properly."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1570018649, "post_id": 58200995, "comment_id": 102780563, "body": "And please <a href=\"https://stackoverflow.com/questions/9356510/int-main-vs-void-main-in-c\">do not use <code>void main()</code></a>."}, {"owner": {"reputation": 59, "user_id": 12153611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2OFaZ.jpg?s=128&g=1", "display_name": "HuHu", "link": "https://stackoverflow.com/users/12153611/huhu"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1570019287, "post_id": 58200995, "comment_id": 102780932, "body": "@JL2210 Ok I will do that"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1570030383, "post_id": 58200995, "comment_id": 102787677, "body": "And don&#39;t build/run the program anywhere that&#39;s not ASCII (notably, EBCDIC systems will produce no output)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1570030446, "post_id": 58200995, "comment_id": 102787708, "body": "What do you consider to be &quot;garbage&quot;?  Anything for which <code>isalpha()</code> returns false?  If so, that should be your clue..."}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 10692604, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wEdvIrNuH9k/AAAAAAAAAAI/AAAAAAAAAb4/PE-pApl1Dhw/photo.jpg?sz=128", "display_name": "Noa Sakurajin", "link": "https://stackoverflow.com/users/10692604/noa-sakurajin"}, "is_accepted": true, "score": 3, "last_activity_date": 1579841380, "last_edit_date": 1579841380, "creation_date": 1570018818, "answer_id": 58201406, "question_id": 58200995, "link": "https://stackoverflow.com/questions/58200995/how-do-i-filter-out-garbage-from-between-z-and-a-in-ascii/58201406#58201406", "title": "How do I filter out garbage from between &#39;Z&#39; and &#39;a&#39; in ASCII?", "body": "<p>Like mentioned in a comment skip everything between Z for example this way:</p>\n\n<pre><code>#include \"stdio.h\"\nint main(){\n    char ch = 'A';\n    while(ch &lt;= 'z'){\n        if(ch &lt;= 'Z' || ch &gt;= 'a'){\n            printf(\"%c\", ch);\n        } \n        ch++;\n    } \n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>or alternatively use a <code>for</code> loop since you know the beginning and end of the range of values:</p>\n\n<pre><code>#include \"stdio.h\"\nint main(){\n    char ch;\n    for(ch = 'A'; ch &lt;= 'z'; ch++){\n        // loop through range of ASCII values from 'A' to 'z', upper case\n        // and lower case letters, and print out only alphabetic characters.\n        if(ch &lt;= 'Z' || ch &gt;= 'a'){\n            // character is in range of 'A' thru 'Z' or 'a' thru 'z'.\n            printf(\"%c\", ch);\n        } \n    } \n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>or alternatively use the <code>isalpha()</code> function to detect if a character is alphabetic or not.</p>\n\n<pre><code>#include \"stdio.h\"\n\nint main() {\n    char ch;\n    // loop through range of ASCII values from 'A' to 'z', upper case\n    // and lower case letters, and print out only alphabetic characters.\n    for (ch = 'A'; ch &lt;= 'z'; ch++)  isalpha (ch) &amp;&amp; printf (\"%c\", ch);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 12153611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2OFaZ.jpg?s=128&g=1", "display_name": "HuHu", "link": "https://stackoverflow.com/users/12153611/huhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58201406, "answer_count": 1, "score": -1, "last_activity_date": 1579841380, "creation_date": 1570017312, "last_edit_date": 1570027941, "question_id": 58200995, "link": "https://stackoverflow.com/questions/58200995/how-do-i-filter-out-garbage-from-between-z-and-a-in-ascii", "title": "How do I filter out garbage from between &#39;Z&#39; and &#39;a&#39; in ASCII?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid main()\n{\n    char ch;\n\n    clrscr();\n    ch = 'A';\n    while(ch &lt;= 'z')\n    {\n       printf(\"%c\", ch);\n       ch++;\n    }\n    getch();\n }  \n</code></pre>\n\n<p>How do I remove garbage like <code>[</code>, <code>]</code>, <code>'</code>, <code>\\</code>, etc. from the output of this program?</p>\n"}, {"tags": ["c", "function", "primes", "definition"], "comments": [{"owner": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 5, "creation_date": 1570015075, "post_id": 58200367, "comment_id": 102778701, "body": "when you find the number is not prime , you should break the loop"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570015084, "post_id": 58200367, "comment_id": 102778711, "body": "Tip: You should check <code>if(num==1)</code> before calling <code>prime</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1570015085, "post_id": 58200367, "comment_id": 102778712, "body": "Please indent your code consistently.  Strange, variable indentation and brace placement makes it hard to read."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 2, "creation_date": 1570015235, "post_id": 58200367, "comment_id": 102778787, "body": "@samini, Actually, they are breaking out the loop a bit too often :) This became obvious when the code was properly indented, which is why it&#39;s so important to do so."}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570015479, "post_id": 58200367, "comment_id": 102778895, "body": "Why <code>i&lt;=n&#47;2</code>? If input n = 23, it will never evaluate it?"}, {"owner": {"reputation": 615, "user_id": 3102753, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-p9_7FOWMmPY/AAAAAAAAAAI/AAAAAAAAAD0/CAt0TNe0q3M/photo.jpg?sz=128", "display_name": "Nastaran Hakimi", "link": "https://stackoverflow.com/users/3102753/nastaran-hakimi"}, "edited": false, "score": 0, "creation_date": 1570015698, "post_id": 58200367, "comment_id": 102778998, "body": "Your if condition is wrong. If res == 0 then the number is not prime. and also it is better to traverse until square of the number"}, {"owner": {"reputation": 3685, "user_id": 2037044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c499d805f2645c5128202d531d73e?s=128&d=identicon&r=PG", "display_name": "Stefano", "link": "https://stackoverflow.com/users/2037044/stefano"}, "reply_to_user": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570015728, "post_id": 58200367, "comment_id": 102779015, "body": "@Amadeus: if the input is 23, it doesn&#39;t make sense to evaluate the numbers from 12 until 23. It makes sense to check only until 11."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570015801, "post_id": 58200367, "comment_id": 102779059, "body": "@Amadeus, the largest possible factor is sqrt(n), so there&#39;s no point in searching for larger factors. n/2 is serving as an approximation for that."}, {"owner": {"reputation": 615, "user_id": 3102753, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-p9_7FOWMmPY/AAAAAAAAAAI/AAAAAAAAAD0/CAt0TNe0q3M/photo.jpg?sz=128", "display_name": "Nastaran Hakimi", "link": "https://stackoverflow.com/users/3102753/nastaran-hakimi"}, "edited": false, "score": 0, "creation_date": 1570015872, "post_id": 58200367, "comment_id": 102779107, "body": "also you can use return when p = 0 because there is no need to traverse more"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1570016094, "post_id": 58200367, "comment_id": 102779202, "body": "@LouisDurand Adding extra <code>return</code> statements and reordering the code is no valid edit. The code should stay &quot;as is&quot; with only visual improvements. Otherwise answers and comments may become invalid."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570019434, "post_id": 58200436, "comment_id": 102781002, "body": "<code>isprime()</code> can  fail for large <code>x</code> as <code>x % i &gt; INT_MAX</code> is possible.  IMO a simple <code>if (x % i) return 0; .... } return 1;</code> (after handling even cases) than using <code>prime</code> would be more clear."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570108278, "post_id": 58200436, "comment_id": 102815548, "body": "@chux It is enough to write prime = x % i != 0;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570113868, "post_id": 58200436, "comment_id": 102818824, "body": "Good fix - many ways to solve"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1570108263, "last_edit_date": 1592644375, "creation_date": 1570015194, "answer_id": 58200436, "question_id": 58200367, "link": "https://stackoverflow.com/questions/58200367/program-is-not-working-as-expected-for-prime-and-non-prime/58200436#58200436", "title": "program is not working as expected for prime and non prime", "body": "<p>The return statement is present within the loop</p>\n<pre><code>int prime(int n)\n{\n    int i,p;\n    for(i=2;i&lt;=n/2;i++)\n    {\n        if(n%i==0){\n            p=0;}\n        else{\n            p=1;\n      }\n            return p;\n    }\n\n}\n</code></pre>\n<p>So after the first iteration of the loop there is exit from the function. The function does not check any other divisors.</p>\n<p>And for example for the prime number <code>2</code> the function gives a wrong result.</p>\n<p>And the function has undefined behavior when the passed parameter is equal to for example <code>1</code>.</p>\n<p>Also in main this condition</p>\n<pre><code>if(res==0)\n    printf(&quot;\\n%d IS A PRIME NUMBER&quot;,num);\n</code></pre>\n<p>is also wrong because it is presumed that the function returns 0 for non-prime numbers.</p>\n<p>The function can look the following way</p>\n<pre><code>int isprime( unsigned long long int x ) \n{ \n    int prime = x % 2 == 0 ? x == 2 : x != 1; \n      \n    for ( unsigned long long int i = 3; prime &amp;&amp; i &lt;= x / i; i += 2 ) \n    { \n        prime = x % i != 0; \n    } \n      \n    return prime; \n} \n</code></pre>\n<p>See also the reference at my personal forum <a href=\"http://cpp.forum24.ru/?1-1-0-00000109-000-0-0-1541091687\" rel=\"nofollow noreferrer\">C function that determines whether a number is prime</a></p>\n<p>Though it is written in Russian you can translate it in English using for example the google service &quot;translate&quot;.</p>\n"}], "owner": {"reputation": 11, "user_id": 12153383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514511e0c5ffa614eb47840bdddd5cbf?s=128&d=identicon&r=PG&f=1", "display_name": "Najeeb", "link": "https://stackoverflow.com/users/12153383/najeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1570053429, "answer_count": 1, "score": 0, "last_activity_date": 1570108263, "creation_date": 1570014873, "last_edit_date": 1570017146, "question_id": 58200367, "link": "https://stackoverflow.com/questions/58200367/program-is-not-working-as-expected-for-prime-and-non-prime", "closed_reason": "Not suitable for this site", "title": "program is not working as expected for prime and non prime", "body": "<p>what is wrong in this code? please assist me\nI am entering 9 it says that the number is prime\nand the output is actually reverse of condition... how?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint prime(int);\n\nint main()\n{\n    int num,res;\n\n    printf(\"\\nENTER A NUMBER: \");\n    scanf(\"%d\",&amp;num);\n    res=prime(num);\n    if(num==1)\n    {\n        printf(\"Neither Prime nor Composite\\n\");\n    }\n    else\n    {\n        if(res==0)\n            printf(\"\\n%d IS A PRIME NUMBER\",num);\n        else\n            printf(\"\\n%d IS NOT A PRIME NUMBER\",num);\n    }\n\n    getch();\n}\n\nint prime(int n)\n{\n    int i,p;\n    for(i=2;i&lt;=n/2;i++)\n    {\n        if(n%i==0){\n            p=0;\n        } else {\n            p=1;\n        }\n\n        return p;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "unions"], "comments": [{"owner": {"reputation": 174, "user_id": 9189887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2c0ef86fe10eda634d83e395843620?s=128&d=identicon&r=PG&f=1", "display_name": "3ch0", "link": "https://stackoverflow.com/users/9189887/3ch0"}, "edited": false, "score": 0, "creation_date": 1570014460, "post_id": 58200179, "comment_id": 102778415, "body": "Either post the &quot;complex code&quot;, or just access the member. Make sure your are not overwriting it with anything."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1570014984, "post_id": 58200179, "comment_id": 102778651, "body": "You don&#39;t &quot;store values in a union&quot;, you store them in a specific member of that union. And you can just access that member to get the value."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1570020242, "post_id": 58200179, "comment_id": 102781443, "body": "Don&#39;t post your &quot;complex code&quot; - instead, create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and include <i>that</i> in your question.  Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1570017185, "last_edit_date": 1570017185, "creation_date": 1570014581, "answer_id": 58200285, "question_id": 58200179, "link": "https://stackoverflow.com/questions/58200179/how-to-call-the-value-stored-in-the-union/58200285#58200285", "title": "how to call the value stored in the union", "body": "<p>To clarify, when you say <strong>calling</strong> a value from a union, you mean <strong>accessing</strong> it?</p>\n\n<p>If so, here is an example on how to do so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunion\n{\n    long int   in;\n    byte by[LONGEST];\n    double db;\n} un;  //union code\n\nint main (void)\n{\n    union un myUnion = { 0 };\n\n    myUnion.in = 10; // Storing in a union.\n\n    printf(\"in value = %ld\\n\", myUnion.in); // Accessing union members.\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9653834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc315fc964a2a1cfcfde77716513a565?s=128&d=identicon&r=PG&f=1", "display_name": "SKmay", "link": "https://stackoverflow.com/users/9653834/skmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1570057234, "answer_count": 1, "score": 0, "last_activity_date": 1573918771, "creation_date": 1570014163, "last_edit_date": 1573918771, "question_id": 58200179, "link": "https://stackoverflow.com/questions/58200179/how-to-call-the-value-stored-in-the-union", "closed_reason": "Needs details or clarity", "title": "how to call the value stored in the union", "body": "<p>I have value of <code>X = 140</code>, stored in union, how should I call the that value?\nSo that I can proceed to do conversion by calling that value of X,  from union, in the first stage.</p>\n\n<p><code>i = function_name (un.in)</code> This code is not the full code as it's complex calling functions with some arguments., but I understand until this code where it  read and get the X value  from the big data then, X value is stored in union. (my union code as below): </p>\n\n<pre><code>union {\n        long int   in;\n        byte by[LONGEST];\n        double db;\n    } un;  //union code \n</code></pre>\n"}, {"tags": ["c", "variables", "assignment-operator", "post-increment", "pre-increment"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1570013788, "post_id": 58200033, "comment_id": 102778098, "body": "As for me then I have not understood what is the problem."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1570013890, "post_id": 58200033, "comment_id": 102778144, "body": "As ever, @Vlad, you&#39;re a few seconds ahead of me! Must be a time-zone issue?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1570017356, "post_id": 58200033, "comment_id": 102779881, "body": "What output did you get when you ran the code?"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1570014342, "last_edit_date": 1570014342, "creation_date": 1570013951, "answer_id": 58200116, "question_id": 58200033, "link": "https://stackoverflow.com/questions/58200033/how-to-calculate-values-for/58200116#58200116", "title": "How to calculate values for -- / ++", "body": "<p>These statements</p>\n\n<pre><code>printf(\"c=%d\\t\", c+1);\nprintf(\"c=%d\\t\", 2-c);\n</code></pre>\n\n<p>do not change the value of the variable <code>c</code>.</p>\n\n<p>The variable was changed only in this statement</p>\n\n<pre><code>a = b++ + ++c;\n          ^^^\n</code></pre>\n\n<p>If you want to change the variable <code>c</code> in the calls of printf then you should write at least</p>\n\n<pre><code>printf(\"c=%d\\t\", c = c+1);\nprintf(\"c=%d\\t\", c = 2-c);\n</code></pre>\n\n<p>Then the output will look like</p>\n\n<pre><code>a=1\nx=2 b=0 b=0 c=2 c=0\n                ^^^\n</code></pre>\n\n<p>Without these changes the output is</p>\n\n<pre><code>a=1\nx=2 b=0 b=0 c=2 c=1 \n                ^^^  \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6097314, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/213911435637460/picture?type=large", "display_name": "Wenhan Xiao", "link": "https://stackoverflow.com/users/6097314/wenhan-xiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1570036998, "answer_count": 1, "score": -3, "last_activity_date": 1570154876, "creation_date": 1570013634, "last_edit_date": 1570154876, "question_id": 58200033, "link": "https://stackoverflow.com/questions/58200033/how-to-calculate-values-for", "closed_reason": "Needs details or clarity", "title": "How to calculate values for -- / ++", "body": "<p>I am trying to get the value for the last equation</p>\n\n<pre><code>int a = 0, b = 0, c = 0, x = 0, y = 0, z = 0;\n\na = b++ + ++c;\nprintf(\"a=%d\\n\", a);\n\nx = y + 1 + ++z;\nprintf(\"x=%d\\t\", x);\n\nprintf(\"b=%d\\t\", --b);\nprintf(\"b=%d\\t\", b++);\nprintf(\"c=%d\\t\", c+1);\nprintf(\"c=%d\\t\", 2-c);\n</code></pre>\n\n<p>whats the value of the last equation and why? how do I calculate it </p>\n"}, {"tags": ["python", "c", "arrays", "ctypes"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1570011426, "post_id": 58199529, "comment_id": 102777092, "body": "&quot;Also my knowledge of C is kind of poor&quot; - then things will probably go much smoother if you use Cython or Numba."}, {"owner": {"reputation": 47, "user_id": 7998812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2818ec9e3f70cb0241a74abc4479722d?s=128&d=identicon&r=PG&f=1", "display_name": "Python_Trader", "link": "https://stackoverflow.com/users/7998812/python-trader"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1570011610, "post_id": 58199529, "comment_id": 102777163, "body": "The function I want to implement in C is not that difficult. That&#39;s not the problem. But the wrapper and datatypes of that arrays."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1570011781, "post_id": 58199529, "comment_id": 102777229, "body": "Related: <a href=\"https://codereview.stackexchange.com/a/215235/133688\">codereview.stackexchange.com/a/215235/133688</a>"}, {"owner": {"reputation": 1728, "user_id": 8547331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Vrx69.jpg?s=128&g=1", "display_name": "Jeronimo", "link": "https://stackoverflow.com/users/8547331/jeronimo"}, "edited": false, "score": 0, "creation_date": 1570018568, "post_id": 58199529, "comment_id": 102780516, "body": "Use <code>arr.ctypes.data_as(ctypes.c_voidp)</code> to get a pointer that you can pass into your C-function. For the return array, I&#39;d recommend pre-allocating that on the Python side, too, and passing it as a second argument in the same manner. This should avoid most memory management problems..."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1570084922, "post_id": 58199529, "comment_id": 102803705, "body": "Are you sure that it would be faster in <i>C</i>? <i>NumPy</i> is also written in <i>C</i> and has vectorized operations just for speed."}, {"owner": {"reputation": 47, "user_id": 7998812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2818ec9e3f70cb0241a74abc4479722d?s=128&d=identicon&r=PG&f=1", "display_name": "Python_Trader", "link": "https://stackoverflow.com/users/7998812/python-trader"}, "reply_to_user": {"reputation": 1728, "user_id": 8547331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Vrx69.jpg?s=128&g=1", "display_name": "Jeronimo", "link": "https://stackoverflow.com/users/8547331/jeronimo"}, "edited": false, "score": 0, "creation_date": 1570452774, "post_id": 58199529, "comment_id": 102906878, "body": "@Jeronimo I think that&#39;s a good idea. But how would I pass the pointer to the C-function so that I can use arr[i][j] like arithmetic in the function? As I understand if it&#39;s a normal pointer to the arr[0]-element of the array. So do I have to do the arithemtic myself then?"}, {"owner": {"reputation": 1728, "user_id": 8547331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Vrx69.jpg?s=128&g=1", "display_name": "Jeronimo", "link": "https://stackoverflow.com/users/8547331/jeronimo"}, "edited": false, "score": 0, "creation_date": 1570455146, "post_id": 58199529, "comment_id": 102908233, "body": "Yes, the indexing is basically 1D then and you have to transform coordinates yourself."}, {"owner": {"reputation": 47, "user_id": 7998812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2818ec9e3f70cb0241a74abc4479722d?s=128&d=identicon&r=PG&f=1", "display_name": "Python_Trader", "link": "https://stackoverflow.com/users/7998812/python-trader"}, "edited": false, "score": 0, "creation_date": 1570455308, "post_id": 58199529, "comment_id": 102908325, "body": "I still have some problems to pass the pointer. If I define the pointer as you statet <code>test = arr.ctypes.data_as(ctypes.c_voidp)</code>. I would grab this pointer in the C function like: <code>void fun(void *test) { return *test[index]+1 }</code>. Is that right? Or do I have to define the datatype or something in the C-function again? (for an example of a C function returning some element of the array plus one)"}], "owner": {"reputation": 47, "user_id": 7998812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2818ec9e3f70cb0241a74abc4479722d?s=128&d=identicon&r=PG&f=1", "display_name": "Python_Trader", "link": "https://stackoverflow.com/users/7998812/python-trader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570039479, "creation_date": 1570011258, "last_edit_date": 1570039479, "question_id": 58199529, "link": "https://stackoverflow.com/questions/58199529/get-c-like-speed-in-python-with-ctypes-pass-and-return-numpy-array", "title": "Get C-like speed in Python with ctypes, pass and return numpy array", "body": "<p>I have a speed relevant task and as far as I see it's not possible to use numpy to get C-like speed. So I want to implement a function in C and call it in my python script. I want to pass a (numpy) array to the C function and return an array from this function back to python.</p>\n\n<p>The right solution for this should be to compile my C function and use ctypes to handle it in my python script. But I don't really know how to get it together. Because it's quiet a big array I want to pass and return it should somehow use pointer and don't make new copys every time.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#define/read in numpy array in python\narr = np.zeros(shape=(100,100))\n\n# define/compile this function in C\ndef fun(arr):\n    #do some stuff, make new arr2\n    return(arr2)\n\narr2 = mylib.fun(arr)\n#use arr2 in python\n\n</code></pre>\n\n<p>Also my knowledge of C is kind of poor. The arr in the example should be a float, the return array arr2 could be an integer. </p>\n"}, {"tags": ["c", "opengl", "sdl"], "comments": [{"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570011170, "post_id": 58199304, "comment_id": 102776980, "body": "Where do you call <code>glViewport(0,0,800,1200)</code> on this program?"}, {"owner": {"reputation": 1, "user_id": 5867556, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kuxLFHAEQUg/AAAAAAAAAAI/AAAAAAAAAi4/vx9TPdjXk1Y/photo.jpg?sz=128", "display_name": "Quorthon Plavi", "link": "https://stackoverflow.com/users/5867556/quorthon-plavi"}, "reply_to_user": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570011244, "post_id": 58199304, "comment_id": 102777009, "body": "Well i tried i did not put that in my code here"}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 4, "creation_date": 1570011382, "post_id": 58199304, "comment_id": 102777069, "body": "You should create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Just showing your code like that does not help very much"}, {"owner": {"reputation": 1, "user_id": 5867556, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kuxLFHAEQUg/AAAAAAAAAAI/AAAAAAAAAi4/vx9TPdjXk1Y/photo.jpg?sz=128", "display_name": "Quorthon Plavi", "link": "https://stackoverflow.com/users/5867556/quorthon-plavi"}, "reply_to_user": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570013212, "post_id": 58199304, "comment_id": 102777835, "body": "It seems that when i &quot;extract&quot; opengl code from functions i can get my triangle perfectly fine.. Problem solved, minimal reproducible example is up there."}], "answers": [{"comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 1, "creation_date": 1570086453, "post_id": 58202097, "comment_id": 102804345, "body": "I usually call it in on resize event of my window (along with setting of projection matrix due to possible change in aspect ratio), but if I use anything that is changing it then yes I need to call it in each frame ... some environments have problems with going into fullscreen not invoking on resize calls .. if the case its possible to scan the size change in some timer ..."}, {"owner": {"reputation": 1, "user_id": 5867556, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kuxLFHAEQUg/AAAAAAAAAAI/AAAAAAAAAi4/vx9TPdjXk1Y/photo.jpg?sz=128", "display_name": "Quorthon Plavi", "link": "https://stackoverflow.com/users/5867556/quorthon-plavi"}, "edited": false, "score": 0, "creation_date": 1570183418, "post_id": 58202097, "comment_id": 102841636, "body": "Question is solved, the problem was vsize() macro. I just replaced it with sizeof() and everything works. Wrong number of bytes were alocated."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1570021359, "creation_date": 1570021359, "answer_id": 58202097, "question_id": 58199304, "link": "https://stackoverflow.com/questions/58199304/opengl-wrong-viewport/58202097#58202097", "title": "OpenGL wrong viewport", "body": "<p>Why are you not calling <code>glViewport</code>? It's an essential function that's setting up the drawing process. A lot of OpenGL beginners have the misconception that <code>glViewport</code> is some sort of initialization step, or in your case a specialization. It's not. <em>It's a drawing related function!</em></p>\n\n<p>The idiomatric way to drawing to a window with OpenGL begins with setting the viewport to the position and size wherein that window you want to draw, <em>at each and every iteration of the drawing loop</em>. Yes, it's idiomatic to call it repeatedly, since working with, say <em>framebuffer objects</em>, or drawing overlay elements, like HUDs, require the change the viewport multiple times throughout drawing a frame.</p>\n\n<p>So the fix for your problem is to call <code>glViewport</code> with the size of the drawable region you want to draw to, right at the beginning of the drawing function.</p>\n"}], "owner": {"reputation": 1, "user_id": 5867556, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kuxLFHAEQUg/AAAAAAAAAAI/AAAAAAAAAi4/vx9TPdjXk1Y/photo.jpg?sz=128", "display_name": "Quorthon Plavi", "link": "https://stackoverflow.com/users/5867556/quorthon-plavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570024019, "creation_date": 1570010382, "last_edit_date": 1570024019, "question_id": 58199304, "link": "https://stackoverflow.com/questions/58199304/opengl-wrong-viewport", "title": "OpenGL wrong viewport", "body": "<p>I have a problem with rendering a triangle in 800x600 res window. I never called glViewport in my code, yet i have wrong results. Triangle renders only to lower half of the window.</p>\n\n<p>I have tried to set viewport in my code by calling glViewport(0,0,800,1200) it fixes the problem temporarily but when i enter fullscreen everything is messed up again.</p>\n\n<pre><code>#include \"ref.h\"\n\nint main(void){\n    WindowInit(&amp;window, \"Test\", WINW, WINH, SDL_WINDOW_SHOWN | SDL_WINDOW_OPENGL);\n    game = GameInit(60);\n\n    VAO vaodef = VAOInit(1);\n    VAOCreate(&amp;vaodef);\n    VAOBind(&amp;vaodef);\n\n    const GLfloat triangle_data[] = {\n        -1.0f, -1.0f, 0.0f,\n        1.0f, -1.0f, 0.0f,\n        0.0f, 1.0f, 0.0f,\n    };\n\n    Shader triangle_shader;\n    LoadShader(&amp;triangle_shader, \"VertexShader.glsl\", \"FragmentShader.glsl\");\n\n    GLuint vertexArrayBuffer;\n    int num_vertices = 3;\n\n    glGenBuffers(1, &amp;vertexArrayBuffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexArrayBuffer);\n    glBufferData(GL_ARRAY_BUFFER, (sizeof(triangle_data) / (sizeof(GLfloat) / 3)), triangle_data, GL_STATIC_DRAW);\n\n    glUseProgram(triangle_shader.program);\n\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexArrayBuffer);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);\n    glDrawArrays(GL_TRIANGLES, 0, num_vertices);\n    glDisableVertexAttribArray(0);\n\n    glUseProgram(0);\n\n    SDL_GL_SwapWindow(window.window);\n    SDL_Delay(5000);\n\n    WindowDestroy(&amp;window);\n}\n</code></pre>\n\n<p>Results: <a href=\"https://i.stack.imgur.com/Kt6lb.png\" rel=\"nofollow noreferrer\">result</a></p>\n"}, {"tags": ["c", "parallel-processing", "aes", "mpi", "ipc"], "comments": [{"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 1, "creation_date": 1570010179, "post_id": 58199071, "comment_id": 102776500, "body": "Did you validate the AES encryption / decryption on a single processor first ?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570018283, "post_id": 58199071, "comment_id": 102780374, "body": "Provide complete and reproducible error."}, {"owner": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "reply_to_user": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1570116287, "post_id": 58199071, "comment_id": 102820100, "body": "@GuillaumePetitjean Yes on the single one it works perfectly fine if you move whatever is in else inside the if scope after encryption and remove the MPI_Send and Recv and run it using mpirun -np 1 a.out it will work"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "edited": false, "score": 0, "creation_date": 1570120902, "post_id": 58207470, "comment_id": 102822312, "body": "Hey there seems to me all that was changed was the method of encryption i orginally was doing CTR one and the one that is working for you is the ECB. Why is it different because in the github it says the same CTR function can be used for both encryption and decryption. And also the second argument of MPI send and recv was changed to 16 from 10 what could be the reason since the second parameter is basically telling mpi the count of whatever thing is being sent or recieved which in this case is the datafile which is of size 10???"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "edited": false, "score": 0, "creation_date": 1570122127, "post_id": 58207470, "comment_id": 102822804, "body": "I Update the answer."}, {"owner": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "edited": false, "score": 0, "creation_date": 1570123575, "post_id": 58207470, "comment_id": 102823385, "body": "Oh thank you alot for your kind reply i very much appreciate it and also one more thing. I see that in ur implementation u did not use any key or iv why is that? Like shouldnt i be able to use a key which i generate and encrypt and can pass on others so that they decrypt."}, {"owner": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "edited": false, "score": 0, "creation_date": 1570164754, "post_id": 58207470, "comment_id": 102834456, "body": "Thank you again so much for your help I did not realise the size of the key and IV mattered. Thank you, you&#39;re the best!"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "edited": false, "score": 0, "creation_date": 1570221318, "post_id": 58207470, "comment_id": 102857977, "body": "@JayedArRabbi I have used standard key and iv values in original aes.c file. see gitHub project."}], "tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": true, "score": 0, "last_activity_date": 1570139441, "last_edit_date": 1570139441, "creation_date": 1570041464, "answer_id": 58207470, "question_id": 58199071, "link": "https://stackoverflow.com/questions/58199071/how-to-fix-decryption-of-aes-in-c-using-mpi/58207470#58207470", "title": "How to fix decryption of AES in C using MPI", "body": "<p>First of all we must install requirements.\n<a href=\"https://mpitutorial.com/tutorials/installing-mpich2/\" rel=\"nofollow noreferrer\">see this link</a></p>\n\n<p>After successfully install the requirements we run simple hello world MPI.</p>\n\n<p><strong>Hello World!</strong></p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char** argv) {\n    // Initialize the MPI environment\n    MPI_Init(NULL, NULL);\n\n    // Get the number of processes\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n    // Get the rank of the process\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n\n    // Get the name of the processor\n    char processor_name[MPI_MAX_PROCESSOR_NAME];\n    int name_len;\n    MPI_Get_processor_name(processor_name, &amp;name_len);\n\n    // Print off a hello world message\n    printf(\"Hello world from processor %s, rank %d out of %d processors\\n\",\n           processor_name, world_rank, world_size);\n\n    // Finalize the MPI environment.\n    MPI_Finalize();\n}\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://mpitutorial.com/tutorials/mpi-hello-world/\" rel=\"nofollow noreferrer\">source of above code</a></p>\n\n<p><strong>Compile and Run</strong></p>\n\n<pre><code>$ mpicc mhello.c -o mhello\n$ mpirun -np #numberOfProcess ./mhello\n</code></pre>\n\n<p>After successful run this code you can go further.</p>\n\n<hr>\n\n<p><strong><em>And return to original Question.</em></strong> </p>\n\n<p>I think your usage of AES part of project is wrong.</p>\n\n<p>By performing some changes and use </p>\n\n<pre><code>AES_ECB_decrypt(&amp;ctx, data_file);\n\nAES_ECB_encrypt(&amp;ctx, data_file);\n</code></pre>\n\n<p>works.</p>\n\n<p>GitHub page of project say how to use Enc and Dec function <a href=\"https://github.com/kokke/tiny-AES-C\" rel=\"nofollow noreferrer\">see</a> </p>\n\n<p>Second important change to use <code>struct AES_ctx ctx;</code>\nabove main to only one time execution.</p>\n\n<hr>\n\n<p><strong>This is working version of code.</strong></p>\n\n<p><strong>mpi-hello.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;mpi.h&gt;\n#include \"aes.h\"\n\n/*\n * compile\n * mpicc mpi-hello.c aes.c -o mpi-hello\n * \n * Run\n * mpirun -np 2  executable\n * \n * \n *\n * */\n\nstruct AES_ctx ctx;\n\nunsigned long ToUInt(char* str)\n{\n    unsigned long mult = 1;\n    unsigned long re = 0;\n    int len = strlen(str);\n    for(int i = len -1 ; i &gt;= 0 ; i--)\n    {\n        re = re + ((int)str[i] -48)*mult;\n        mult = mult*10;\n    }\n    return re;\n}\n\n\nint main(int argc, char** argv) {\n\n    int size,rank=0;\n\n    MPI_Init(NULL, NULL);\n\n    // Get the number of processes\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    // Get the rank of the process\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    int data = 532123;\n    uint8_t data_file[10];\n\n    printf(\"this is in main\\n\");\n\n    if (rank == 0) {\n        printf(\"data rank: 0: %d\\n\", data);\n        //convert in to string\n        sprintf( data_file, \"%d\", data);\n        //string\n        printf(\"data rank: 0: %s\\n\", data_file);\n\n        //encrypt data\n        AES_ECB_encrypt(&amp;ctx, data_file);\n\n        printf(\"Sending in 0 after crypt: %s\\n\", data_file);\n        printf(\"strlen send: %d\\n\", strlen(data_file));\n\n        MPI_Send(data_file,16,MPI_UINT8_T,1,0,MPI_COMM_WORLD);\n\n    }else{\n\n        MPI_Recv(data_file,16,MPI_UINT8_T,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);\n        printf(\"Recieved in 1 before: %s\\n\",data_file);\n        printf(\"strlen recv: %d\\n\", strlen(data_file));\n\n        AES_ECB_decrypt(&amp;ctx, data_file);\n\n        printf(\"DEC at Rank 1 string: %s\\n\", data_file);\n        printf(\"DEC at Rank 1 int: %u\\n\", ToUInt(data_file));\n    }\n\n\n    MPI_Finalize();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Important notes</strong></p>\n\n<ul>\n<li>Place <code>aes.c</code> source file in same folder of original source i.e: <code>mpi-hello.c</code> </li>\n<li><p>compile the code with <code>mpicc mpi-hello.c aes.c -o mpi-hello</code></p></li>\n<li><p>run with: <code>mpirun -np 2 ./mpi-hello</code></p></li>\n<li>I find that second argument of <code>MPI_Send</code> must be changed to <code>16</code>, But why?</li>\n</ul>\n\n<hr>\n\n<p><em>PS</em>.</p>\n\n<ul>\n<li><p>Installing from repository on Debian based system not works and i have to build it from source.</p></li>\n<li><p>Original source of <a href=\"https://stackoverflow.com/a/40116476/7508077\">convert string to int</a> I know this may not best solution but works.</p></li>\n<li><p>How to run <a href=\"https://stackoverflow.com/a/35680726/7508077\">MPI</a>.</p></li>\n<li>A fast MPI C <a href=\"http://condor.cc.ku.edu/~grobe/docs/intro-MPI-C.shtml\" rel=\"nofollow noreferrer\">tutorial</a></li>\n</ul>\n\n<hr>\n\n<p><strong><em>Edit 1</em></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;mpi.h&gt;\n#include \"aes.h\"\n\n/*\n * compile\n * mpicc mpi-hello.c aes.c -o mpi-hello\n * \n * Run\n * mpirun -np 2  executable\n * \n * \n *\n * */\n\nstruct AES_ctx ctx;\n\nunsigned long ToUInt(char* str)\n{\n    unsigned long mult = 1;\n    unsigned long re = 0;\n    int len = strlen(str);\n    for(int i = len -1 ; i &gt;= 0 ; i--)\n    {\n        re = re + ((int)str[i] -48)*mult;\n        mult = mult*10;\n    }\n    return re;\n}\n\n\nint main(int argc, char** argv) {\n\n    int size,rank=0;\n\n    MPI_Init(NULL, NULL);\n\n    // Get the number of processes\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    // Get the rank of the process\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    int data = 532123;\n    uint8_t data_file[10];\n\n    printf(\"this is in main\\n\");\n\n    if (rank == 0) {\n        printf(\"data rank: 0: %d\\n\", data);\n        //convert in to string\n        sprintf( data_file, \"%d\", data);\n        //string\n        printf(\"data rank: 0: %s\\n\", data_file);\n\n        //encrypt data\n        //AES_ECB_encrypt(&amp;ctx, data_file);\n        AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen(data_file));\n        printf(\"Sending in 0 after crypt: %s\\n\", data_file);\n        printf(\"strlen send: %d\\n\", strlen(data_file));\n\n        MPI_Send(data_file,10,MPI_UINT8_T,1,0,MPI_COMM_WORLD);\n\n    }else{\n\n        MPI_Recv(data_file,10,MPI_UINT8_T,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);\n        printf(\"Recieved in 1 before: %s\\n\",data_file);\n        printf(\"strlen recv: %d\\n\", strlen(data_file));\n\n\n        //AES_ECB_decrypt(&amp;ctx, data_file);\n\n        AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen(data_file));  \n\n        printf(\"DEC at Rank 1 string: %s\\n\", data_file);\n        printf(\"DEC at Rank 1 int: %u\\n\", ToUInt(data_file));\n    }\n\n\n    MPI_Finalize();\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>Edit 2</em></strong></p>\n\n<p><strong>Apply request in comment.</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;mpi.h&gt;\n#include \"aes.h\"\n\n/*\n * compile\n * mpicc mpi-hello.c aes.c -o mpi-hello\n * \n * Run\n * mpirun -np 2  executable\n * \n * \n * */\n\n\nunsigned long ToUInt(char* str)\n{\n    unsigned long mult = 1;\n    unsigned long re = 0;\n    int len = strlen(str);\n    for(int i = len -1 ; i &gt;= 0 ; i--)\n    {\n        re = re + ((int)str[i] -48)*mult;\n        mult = mult*10;\n    }\n    return re;\n}\n\n\nint main(int argc, char** argv) {\n\n    int size,rank=0;\n\n    MPI_Init(NULL, NULL);\n\n    // Get the number of processes\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    // Get the rank of the process\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    int data = 532123;\n    uint8_t data_file[10];\n\n\n     //start Crypto Section\n\n    //~ key and iv\n    ///\n\n    uint8_t key[32] = { 0x60, 0x3d, 0xeb, 0x10, 0x15, 0xca, 0x71, 0xbe, 0x2b, 0x73, 0xae, 0xf0, 0x85, 0x7d, 0x77, 0x81,\n                        0x1f, 0x35, 0x2c, 0x07, 0x3b, 0x61, 0x08, 0xd7, 0x2d, 0x98, 0x10, 0xa3, 0x09, 0x14, 0xdf, 0xf4 \n    };\n\n    uint8_t iv[16]  = { 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff\n    };\n    ///    \n\n    struct AES_ctx ctx;\n\n\n    printf(\"this is in main\\n\");\n\n    if (rank == 0) {\n        printf(\"data rank: 0: %d\\n\", data);\n        //convert in to string\n        sprintf( data_file, \"%d\", data);\n        //string\n        printf(\"data rank: 0: %s\\n\", data_file);\n\n        ///Enc\n\n        //set\n        AES_init_ctx_iv(&amp;ctx, key, iv); \n\n        //enc\n        AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen(data_file));\n\n\n        printf(\"Sending in 0 after crypt: %s\\n\", data_file);\n        printf(\"strlen send: %d\\n\", strlen(data_file));\n\n        MPI_Send(data_file,10,MPI_UINT8_T,1,0,MPI_COMM_WORLD);\n\n    }else{\n\n        MPI_Recv(data_file,10,MPI_UINT8_T,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);\n        printf(\"Recieved in 1 before: %s\\n\",data_file);\n        printf(\"strlen recv: %d\\n\", strlen(data_file));\n\n        ///Dec\n        //set\n        AES_init_ctx_iv(&amp;ctx, key, iv); \n\n        //dec\n        AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen(data_file));  \n\n        printf(\"DEC at Rank 1 string: %s\\n\", data_file);\n        printf(\"DEC at Rank 1 int: %u\\n\", ToUInt(data_file));\n    }\n\n\n    MPI_Finalize();\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>Edit 3</em></strong></p>\n\n<p><strong>Place key and iv in if else section.</strong></p>\n\n<pre><code>if (rank == 0) {\n    printf(\"data rank: 0: %d\\n\", data);\n    //convert in to string\n    sprintf( data_file, \"%d\", data);\n    //string\n    printf(\"data rank: 0: %s\\n\", data_file);\n\n    //~ key and iv\n    ///\n\n    uint8_t key[32] = { 0x60, 0x3d, 0xeb, 0x10, 0x15, 0xca, 0x71, 0xbe, 0x2b, 0x73, 0xae, 0xf0, 0x85, 0x7d, 0x77, 0x81,\n                        0x1f, 0x35, 0x2c, 0x07, 0x3b, 0x61, 0x08, 0xd7, 0x2d, 0x98, 0x10, 0xa3, 0x09, 0x14, 0xdf, 0xf4 \n    };\n\n    uint8_t iv[16]  = { 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff\n    };\n    ///    \n    ///Enc\n\n    //set\n    AES_init_ctx_iv(&amp;ctx, key, iv); \n\n    //enc\n    AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen(data_file));\n\n\n    printf(\"Sending in 0 after crypt: %s\\n\", data_file);\n    printf(\"strlen send: %d\\n\", strlen(data_file));\n\n    MPI_Send(data_file,10,MPI_UINT8_T,1,0,MPI_COMM_WORLD);\n\n}else{\n\n    MPI_Recv(data_file,10,MPI_UINT8_T,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);\n    printf(\"Recieved in 1 before: %s\\n\",data_file);\n    printf(\"strlen recv: %d\\n\", strlen(data_file));\n\n\n\n    //~ key and iv\n    ///\n\n    uint8_t key[32] = { 0x60, 0x3d, 0xeb, 0x10, 0x15, 0xca, 0x71, 0xbe, 0x2b, 0x73, 0xae, 0xf0, 0x85, 0x7d, 0x77, 0x81,\n                        0x1f, 0x35, 0x2c, 0x07, 0x3b, 0x61, 0x08, 0xd7, 0x2d, 0x98, 0x10, 0xa3, 0x09, 0x14, 0xdf, 0xf4 \n    };\n\n    uint8_t iv[16]  = { 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff\n    };\n    ///    \n    ///Dec\n    //set\n    AES_init_ctx_iv(&amp;ctx, key, iv); \n\n    //dec\n    AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen(data_file));  \n\n    printf(\"DEC at Rank 1 string: %s\\n\", data_file);\n    printf(\"DEC at Rank 1 int: %u\\n\", ToUInt(data_file));\n}\n</code></pre>\n\n<p>For example You can change first element of key i.e: <code>0x60 -&gt; 0x61</code> in either if or else not both, then recompile and run the program to see if receiver haven't correct key he/she cant decode your encrypted data.</p>\n\n<p><strong>[ToDo]</strong></p>\n\n<ul>\n<li>Add some more explanation on AES.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 12152957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDL2g4yYvEGlbbZzBIimKG4PyVNABtryoYsQ7YQvg=k-s128", "display_name": "Jayed Ar Rabbi", "link": "https://stackoverflow.com/users/12152957/jayed-ar-rabbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 58207470, "answer_count": 1, "score": 0, "last_activity_date": 1570139441, "creation_date": 1570009488, "question_id": 58199071, "link": "https://stackoverflow.com/questions/58199071/how-to-fix-decryption-of-aes-in-c-using-mpi", "title": "How to fix decryption of AES in C using MPI", "body": "<p>Currently I am trying to use MPI to pass a particular encrypted data from one processor to another using only 2 processor to just check if encryption or decryption is working. I have an int value which is converted to string for encryption and then sent to processor rank 1.\nI am receiving the string correctly in processor but when I call the decryption function it seems to not give me the plaintext. \nI have downloaded the AES code from <a href=\"https://github.com/kokke/tiny-AES-C\" rel=\"nofollow noreferrer\">https://github.com/kokke/tiny-AES-C</a></p>\n\n<pre><code>int size,rank;\nMPI_Init(NULL,NULL);\nMPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);\nMPI_Comm_size(MPI_COMM_WORLD,&amp;size);\n\n\nint data = 532123;\nuint8_t data_file[10];\nuint8_t key[1] = {50};\nint data_decrypt;\nuint8_t iv[1] = {1};\n\n\nstruct AES_ctx ctx;\n\nif (rank == 0) {\n\n    sprintf((char *) data_file, \"%d\", data);\n    AES_init_ctx_iv(&amp;ctx, key, iv);\n    AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen((char *) data_file));\n\n    printf(\"Sending in 0: %s\\n\",(char*) data_file);\n    MPI_Send(data_file,10,MPI_UINT8_T,1,0,MPI_COMM_WORLD);\n\n}else{\n\n    MPI_Recv(data_file,10,MPI_UINT8_T,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);\n    printf(\"Recieved in 1: %s\\n\",(char*)data_file);\n\n    AES_init_ctx_iv(&amp;ctx, key, iv);\n    AES_CTR_xcrypt_buffer(&amp;ctx, data_file, strlen((char*)data_file));\n    printf(\"DEC at Rank 1: %s\\n\",(char*) data_file);\n\n}\nMPI_Finalize();\nreturn 0;\n</code></pre>\n"}, {"tags": ["c", "malloc", "binary-search-tree", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 1, "creation_date": 1570009295, "post_id": 58198932, "comment_id": 102776059, "body": "What does your stack trace show?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570009358, "post_id": 58198932, "comment_id": 102776095, "body": "You&#39;re in luck, then! The segmentation fault will take your debugger to the exact line and instruction where the fault occurred, and show you the value of every variable and memory location at that point."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570009366, "post_id": 58198932, "comment_id": 102776098, "body": "<code>root == NULL</code> - root is a local pointer, it does not modify the root outside. Thus <code>root-&gt;data</code> inside <code>printf</code> is <code>NULL-&gt;data</code>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1570009456, "post_id": 58198932, "comment_id": 102776147, "body": "Just think, you allocate memory to <code>root</code> in <code>insert</code> using <code>make</code>: How will <code>main</code> see this?"}, {"owner": {"reputation": 65, "user_id": 10075560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKfuA.jpg?s=128&g=1", "display_name": "Shashank Kumar Pandey", "link": "https://stackoverflow.com/users/10075560/shashank-kumar-pandey"}, "edited": false, "score": 0, "creation_date": 1570009675, "post_id": 58198932, "comment_id": 102776262, "body": "Thanks  \u2013 Kamil Cuk. I should have declared root = insert(root,2)."}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570010671, "post_id": 58199070, "comment_id": 102776751, "body": "Is <code>malloc()</code> return type casting useless as stated at: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570010738, "post_id": 58199070, "comment_id": 102776784, "body": "@EsmaeelE Sometimes it is useless, sometimes it makes the code self-documented and allows to avoid an error."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570010959, "post_id": 58199070, "comment_id": 102776876, "body": "can you please explain true way of using <code>malloc()</code> especially the situation we must not cast its return values and when cast is good."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570011319, "post_id": 58199070, "comment_id": 102777042, "body": "@EsmaeelE For example can you say whether this code is valid p = malloc( sizeof( int[M][N] ) );? Or what can you say about the type of the allocated memory in this statement p = malloc( sizeof( *p ) )? Between this statement and the declaration of p there can be dozens of screens. Are you going to scroll the source code forward and backward to know what is the declaration of p?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570012316, "post_id": 58199070, "comment_id": 102777481, "body": "I find out  in two case explicit type conversion on return type of malloc, ie: <code>p =(cast to type of p) malloc( sizeof( *p ) )</code> helps to make code clear and from this point we know  p is pointing to which type of memory instead of search for p declaration in other places."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570013032, "post_id": 58199070, "comment_id": 102777761, "body": "@EsmaeelE Moreover in C++ there is not allowed to assign a pointer of the type void *  to a pointer of some other type. Using casting you help the compiler to find a bug for you at compile-time."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1570009843, "last_edit_date": 1570009843, "creation_date": 1570009486, "answer_id": 58199070, "question_id": 58198932, "link": "https://stackoverflow.com/questions/58198932/binary-search-tree-insertion-program-is-showing-segmentation-fault/58199070#58199070", "title": "Binary search tree insertion program is showing segmentation fault", "body": "<p>The problem is that you are not assigning the returned value of the function insert to the node root.</p>\n\n<p>Write</p>\n\n<p>root = insert(root,2);</p>\n\n<p>//...</p>\n\n<p>Another problem is that you are allocating memory incorrectly</p>\n\n<pre><code>temp = (struct node *) malloc (sizeof (struct node *));\n                                       ^^^^^^^^^^^^^\n</code></pre>\n\n<p>There must be</p>\n\n<pre><code>temp = (struct node *) malloc (sizeof (struct node ));\n                                       ^^^^^^^^^^^^^\n</code></pre>\n\n<p>Also within the function insert the inner if statement should look like</p>\n\n<pre><code>if (x &lt; root-&gt;data)\n{\n    root-&gt;left = insert (root-&gt;left, x);\n}\nelse\n{\n    root-&gt;right = insert (root-&gt;right, x);\n}\n</code></pre>\n\n<p>Pay attention to that according to the C Standard the function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1570009893, "post_id": 58199104, "comment_id": 102776367, "body": "On any other path, <code>insert</code> just returns the original root unchanged. So, it&#39;s always fine to reassign the callers <code>root</code> variable to the return value."}, {"owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570010124, "post_id": 58199104, "comment_id": 102776479, "body": "If <code>insert</code> return NULL in case of failure, as it probably should, you will lose the <code>root</code> pointer."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1570011942, "post_id": 58199104, "comment_id": 102777299, "body": "True! But the way it is written now suggests it intends the caller to save the return value, and the caller doesn&#39;t do that. And the current code is going to SEGV on allocation failure anyway - it needs a redesign to survive that."}, {"owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570016507, "post_id": 58199104, "comment_id": 102779415, "body": "Also true ! My solution is definitely not perfect: while I wanted to answer the OP&#39;s question and specific problem with the least amount of code modification, I did not address all memory handling issues."}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 1, "creation_date": 1570025700, "post_id": 58199104, "comment_id": 102784786, "body": "<i>When performing a memory allocation in a sub-function, you should always check if the allocation has succeeded.</i> and if you&#39;re running on a *nix OS, you should also try to allocate to it too, as the actual memory allocation is deferred and <code>malloc()</code> always returns <code>True</code> (such fun) <a href=\"https://stackoverflow.com/q/48585079/4022608\">stackoverflow.com/q/48585079/4022608</a> may be useful"}], "tags": [], "owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "is_accepted": false, "score": 0, "last_activity_date": 1570010577, "last_edit_date": 1570010577, "creation_date": 1570009605, "answer_id": 58199104, "question_id": 58198932, "link": "https://stackoverflow.com/questions/58198932/binary-search-tree-insertion-program-is-showing-segmentation-fault/58199104#58199104", "title": "Binary search tree insertion program is showing segmentation fault", "body": "<p>Do not ignore the return value of <code>insert</code>:</p>\n\n<pre><code>void main(){\n  struct node* root;\n  root = NULL;\n\n  root = insert(root,2);\n  insert(root,3);\n  insert(root,4);\n  insert(root,5);\n  insert(root,6);\n  insert(root,7);\n\n  printf(\"%d\",root-&gt;data);\n}\n</code></pre>\n\n<p>Other points you might want to consider:</p>\n\n<ul>\n<li>I cannot recommend using <code>void main()</code>: mostly because this is non-standard. Use <code>int main(void)</code> and return 0.</li>\n<li>Use <code>printf(\"%p\", root);</code> for verification : if the value is <code>0x0</code>, your pointer is NULL.</li>\n<li>When performing a memory allocation in a sub-function, you should always check if the allocation has succeeded.</li>\n</ul>\n\n<pre><code>struct node *\nmake (int x)\n{\n  struct node *temp;\n  if ((temp = (struct node *) malloc (sizeof (struct node))) == NULL)\n      return (NULL);\n  temp-&gt;data = x;\n  temp-&gt;left = NULL;\n  temp-&gt;right = NULL;\n  return temp;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10075560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKfuA.jpg?s=128&g=1", "display_name": "Shashank Kumar Pandey", "link": "https://stackoverflow.com/users/10075560/shashank-kumar-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 58199070, "answer_count": 2, "score": 1, "last_activity_date": 1570010577, "creation_date": 1570008981, "last_edit_date": 1570010053, "question_id": 58198932, "link": "https://stackoverflow.com/questions/58198932/binary-search-tree-insertion-program-is-showing-segmentation-fault", "title": "Binary search tree insertion program is showing segmentation fault", "body": "<p>The node insertion code is throwing segmentation fault.\nThis code is throwing segmentation fault when i am trying to print the data stored in the root node.</p>\n\n<p>Below is the implementation of the insertion program for the Binary Search Tree.\nThis program is using recursion to insert a given node.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node\n{\n  int data;\n  struct node *left;\n  struct node *right;\n};\n\nstruct node *make (int);\nstruct node *insert (struct node *, int);\n\nvoid\nmain ()\n{\n  struct node *root;\n  root = NULL;\n\n  insert (root, 2);\n  insert (root, 3);\n  insert (root, 4);\n  insert (root, 5);\n  insert (root, 6);\n  insert (root, 7);\n  printf (\"%d\", root-&gt;data);\n}\n\nstruct node *\nmake (int x)\n{\n  struct node *temp;\n  temp = (struct node *) malloc (sizeof (struct node *));\n  temp-&gt;data = x;\n  temp-&gt;left = NULL;\n  temp-&gt;right = NULL;\n  return temp;\n}\n\nstruct node *\ninsert (struct node *root, int x)\n{\n  if (root == NULL)\n  {\n    root = make (x);\n  }\n  else\n  {\n    if (x &lt;= root-&gt;data)\n    {\n      root-&gt;left = insert (root-&gt;left, x);\n    }\n    else if (x &gt; root-&gt;data)\n    {\n      root-&gt;right = insert (root-&gt;right, x);\n    }\n  }\n  return root;\n}   \n</code></pre>\n"}, {"tags": ["c", "file", "fopen"], "comments": [{"owner": {"reputation": 125, "user_id": 11884633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa3ur.jpg?s=128&g=1", "display_name": "Louis Durand", "link": "https://stackoverflow.com/users/11884633/louis-durand"}, "edited": false, "score": 0, "creation_date": 1570008209, "post_id": 58198656, "comment_id": 102775493, "body": "If you are looking to read the content of a file, look into  <code>fread</code> function and not <code>fscanf</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1570008292, "post_id": 58198656, "comment_id": 102775536, "body": "One possible problem is that the <code>fscanf</code> format begins with a <code>%c</code>. This format specifier does <i>not</i> skip leading white-space, like for example the newline ending the previous line. Add a leading space in the format string."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1570008529, "post_id": 58198656, "comment_id": 102775644, "body": "I assume you mean &quot;the result of <code>fopen</code> is always 0&quot;. This means the file could not be found. You may need to add the path information."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 2, "creation_date": 1570009207, "post_id": 58198656, "comment_id": 102776007, "body": "Depending where the problem occurs, please <a href=\"https://stackoverflow.com/posts/58198656/edit\">edit</a> your question with the file&#39;s contents or the code that wrote the file. And it would get you more willing visitors if you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> ans learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 5, "user_id": 12152824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061335a36664d08200e50323ff3cdc22?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/12152824/stefan"}, "reply_to_user": {"reputation": 125, "user_id": 11884633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa3ur.jpg?s=128&g=1", "display_name": "Louis Durand", "link": "https://stackoverflow.com/users/11884633/louis-durand"}, "edited": false, "score": 0, "creation_date": 1570009429, "post_id": 58198656, "comment_id": 102776131, "body": "I should make a program where I should read from file, for example, the biggest number out of those all, so I have request to do that by loops. It is not just the pure reading, if you can understand me. @LouisDurand"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570012552, "post_id": 58198656, "comment_id": 102777574, "body": "As @Someprogrammerdude stated in comment use leading space in fscanf, <code>fscanf(f,&quot; %c ...)</code> may solve."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1570031484, "post_id": 58198656, "comment_id": 102788271, "body": "What does <code>fscanf</code> actually return? That will give you a hint on where things go wrong. Also use debugger (or debug prints) to check what values are actually read. Are they read to correct variables in correct order?"}], "answers": [{"comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1570019598, "post_id": 58200445, "comment_id": 102781087, "body": "True, but you need to store the result of <code>%[^A-Z]</code>, can&#39;t <code>%s</code> do the job instead of <code>%[^A-Z] %c</code> ?"}, {"owner": {"reputation": 16, "user_id": 11305947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYB6i.jpg?s=128&g=1", "display_name": "iMoyal", "link": "https://stackoverflow.com/users/11305947/imoyal"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1570109758, "post_id": 58200445, "comment_id": 102816475, "body": "i guess he wanted to get either north or south AKA N/S and not all of the spaces etc. and by using %[^A-Z], you don&#39;t need to save it."}], "tags": [], "owner": {"reputation": 16, "user_id": 11305947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYB6i.jpg?s=128&g=1", "display_name": "iMoyal", "link": "https://stackoverflow.com/users/11305947/imoyal"}, "is_accepted": true, "score": 0, "last_activity_date": 1570018253, "last_edit_date": 1570018253, "creation_date": 1570015235, "answer_id": 58200445, "question_id": 58198656, "link": "https://stackoverflow.com/questions/58198656/i-have-problems-with-opening-file-in-c/58200445#58200445", "title": "I have problems with opening file in C", "body": "<p>according to your input the string in the fscanf is wrong.\nyou use the following string:</p>\n\n<pre><code>%c %d %d %d %c %d %d %d %d %d %d\"\n</code></pre>\n\n<p>this is example of input line:\n25 55 22 N 123 213 123 S 25 23 2</p>\n\n<p>you need the following string:</p>\n\n<pre><code>%d %d %d %[^A-Z] %c %d %d %d %[^A-Z] %c %d %d %d\n</code></pre>\n\n<p>based on the given example, you read 25,55,22 using %d.</p>\n\n<p>then and you skipping spaces etc using <code>%[^A-Z]</code>, and then you read N or S using <code>%c</code>.\nspace is also a character, you need to pay attention to it.</p>\n"}], "owner": {"reputation": 5, "user_id": 12152824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061335a36664d08200e50323ff3cdc22?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/12152824/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58200445, "answer_count": 1, "score": 0, "last_activity_date": 1570031144, "creation_date": 1570007993, "last_edit_date": 1570031144, "question_id": 58198656, "link": "https://stackoverflow.com/questions/58198656/i-have-problems-with-opening-file-in-c", "title": "I have problems with opening file in C", "body": "<p>I assume I have a compilation problem, but I want to make sure that is not my fault. </p>\n\n<p>I have compared my code with some other from a program that I made couple of days ago, and I literally couldn't find any difference.</p>\n\n<pre><code>FILE *f;\nf = fopen(\"gps.txt\",\"r\");\n\nif (f == NULL){\n    printf(\"Couldn't open the file.\");\n    return 0;\n}\nint i= 0;\nint n;\nwhile(fscanf(f,\"%c %d %d %d %c %d %d %d %d %d %d\",&amp;gps[i].sirina,&amp;gps[i].stepen,&amp;gps[i].min,&amp;gps[i].sek,&amp;gps[i].duzina,&amp;gps[i].s1,&amp;gps[i].m1,&amp;gps[i].sek1,&amp;gps[i].visina,&amp;gps[i].brzina,&amp;gps[i].sateliti)==11)\n    i++;\n\nn = i;\nprintf(\"%d\",gps[1].sek);\n</code></pre>\n\n<p>File informations:(25 55 22 N 123 213 123 S 25 23 2 </p>\n\n<p>123 123 123 N 234 25 53 S 123 5 1 </p>\n\n<p>12 41 3 N 12 5 13 S 1 2 4)</p>\n\n<p>Result of this code is always 0 (this is just to check if I can continue doing my program). There are informations written in the file, I double checked that I saved it every time but still my program outputs 0. On the same code I wrote couple of days ago, outputs are okay, including the fact the file is same. </p>\n\n<p>I would be happy to know is there is compiling problem or if there is a mistake in my code. Thanks!</p>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570006448, "post_id": 58198239, "comment_id": 102774619, "body": "Perhaps data compression, structure packing? These are especially useful in embedded environments where RAM is very constrained."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 2, "creation_date": 1570006529, "post_id": 58198239, "comment_id": 102774661, "body": "Also, some SIMD (single instruction, multiple data) processor instructions can operate on 4 chars as a single 32 bit integer blob, thus 4 operations in one tick."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570006738, "post_id": 58198239, "comment_id": 102774771, "body": "Have a look at <a href=\"https://www.mikroe.com/blog/packed-structures-make-memory-feel-safe\" rel=\"nofollow noreferrer\">mikroe.com/blog/packed-structures-make-memory-feel-safe</a> . Another point to make is that when you declare 4 chars, in RAM they need to be aligned, thus you have padding between, whereas packing them in an int, there is less or no padding."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570006796, "post_id": 58198239, "comment_id": 102774808, "body": "@john: but if I am storing 4 chars in an integer, I know on the current architecture that they are the same size at the end. So RAM usage should be the same right? The SIMD example is however really interesting. Thanks!"}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570006873, "post_id": 58198239, "comment_id": 102774850, "body": "@john: chars are <i>not</i> aligned in memory as they take 1 byte. That is, a structure defined as char a, b, c, d; will take 4 bytes exactly in memory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570006907, "post_id": 58198239, "comment_id": 102774866, "body": "This was common on the old Amiga OS with <a href=\"https://en.wikipedia.org/wiki/Interchange_File_Format\" rel=\"nofollow noreferrer\">Interchange File Format</a> where chunks were identified by four-byte integers usually made up of four characters. Some modern file-formats still use similar structure."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570006913, "post_id": 58198239, "comment_id": 102774871, "body": "I was hesitating to close vote for &quot;Too broad&quot; or &quot;Unclear what you&#39;re asking&quot;."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570007014, "post_id": 58198239, "comment_id": 102774923, "body": "When you say they are the same size, you mean when you declare 4 chars, they take the same amount of RAM as an int without padding between on your arch? If so, then you can ignore the benefits of using less RAM."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570007021, "post_id": 58198239, "comment_id": 102774931, "body": "@Jabberwocky: why is this too broad? I want to understand why we would <i>need</i> to store 4 chars in a single integer. Padding is not the answer IMHO. RAM is not an answer neither."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570007206, "post_id": 58198239, "comment_id": 102775020, "body": "@john: there is no padding for chars. If you create a structure containing 4 chars, it will be 4 bytes in size, exactly. Try printf(&quot;%zu&quot;, sizeof(struct{char a, b, c, d;}));"}, {"owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "edited": false, "score": 1, "creation_date": 1570007211, "post_id": 58198239, "comment_id": 102775022, "body": "@Korchkidu It is usually faster to iterate on larger chunk of memory. The exact optimal size may vary depending on the system. Moreover, <code>char</code> should be auto-promoted to <code>int</code> when performing a comparison: you might as well compare <code>int</code> directly."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570007218, "post_id": 58198239, "comment_id": 102775027, "body": "I guess I don&#39;t need to mention that when you create packet frames and send them over a communication channel, you want to pack as much data as possible."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570007303, "post_id": 58198239, "comment_id": 102775073, "body": "When you pack the chars in a struct indeed, you may end up with less or no padding. Declaring them in a function may introduce padding and alignments."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570007347, "post_id": 58198239, "comment_id": 102775090, "body": "@Korchkidu Padding can be added at will by a compiler. Even between characters in a structure like you show. There&#39;s nothing in the C specification prohibiting padding between or after any fields. The only requirement is that the first member must begin at offset 0 (no padding before the first member)."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570007426, "post_id": 58198239, "comment_id": 102775134, "body": "I now think this question is too broad and it moves into a discussion. @Jabberwocky, is it time to close it?"}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570007802, "post_id": 58198239, "comment_id": 102775303, "body": "@Someprogrammerdude: in the point 6.2.6.2, it seems that padding concerns integer types except unsigned chars."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570007951, "post_id": 58198239, "comment_id": 102775379, "body": "@john: why close? I am precisely asking for practical, real-world examples. The SIMD example may be useful. But others are more theoretical and debatable IMHO. Still, my question is really specific and clear."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570007970, "post_id": 58198239, "comment_id": 102775385, "body": "Section 6.2.6.2 talks about bit-level padding, not the byte-level padding @Someprogrammerdude refers to"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570008011, "post_id": 58198239, "comment_id": 102775405, "body": "@Korchkidu That section isn&#39;t about structure padding, but about (possible) extra padding bits in the binary representation of the integers themselves."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570008089, "post_id": 58198239, "comment_id": 102775435, "body": "@Someprogrammerdude: ok, thanks. Not sure to understand the difference though. I will check again. Thanks again."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570008298, "post_id": 58198239, "comment_id": 102775538, "body": "This should be closed as it is too broad. The real world applications depend on the architecture you&#39;re on, and your constraints."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1570008540, "post_id": 58198239, "comment_id": 102775652, "body": "Don&#39;t get me wrong, I do appreciate you trying to figure out the benefits of packing, however for an answer to be provided, you need more specificity."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1570011435, "post_id": 58198239, "comment_id": 102777097, "body": "Even if there aren&#39;t explicit SIMD instructions, some operator types still allow to execute more than one operation at once, such as AND, OR, XOR, tests for equality of all or inequality of any byte, ..."}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 1, "last_activity_date": 1570427635, "last_edit_date": 1570427635, "creation_date": 1570010043, "answer_id": 58199223, "question_id": 58198239, "link": "https://stackoverflow.com/questions/58198239/why-use-an-integer-to-store-4-chars-any-practical-benefits/58199223#58199223", "title": "Why use an integer to store 4 chars? Any practical benefits?", "body": "<p>Several operating systems and file formats used such values as \"magic numbers\":</p>\n\n<ul>\n<li>As @SomeProgrammerDude commented, the Amiga OS in its <a href=\"https://en.wikipedia.org/wiki/Interchange_File_Format\" rel=\"nofollow noreferrer\">Interchange File Format</a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Palm_OS\" rel=\"nofollow noreferrer\">PalmOS</a> used such values as identifiers for database, resource and record types. I think this was heavily influenced from the old MacOS.</li>\n<li>Some file formats like AVI, ANI and WAV use the <a href=\"https://en.wikipedia.org/wiki/Resource_Interchange_File_Format\" rel=\"nofollow noreferrer\">Resource Interchange File Format</a> as their basis.</li>\n<li>Apple's <a href=\"https://en.wikipedia.org/wiki/Audio_Interchange_File_Format\" rel=\"nofollow noreferrer\">Audio Interchange File Format</a> is also based on IFF.</li>\n<li>Since the old days of MS-DOS all EXE files (and DLL and...) have a <a href=\"https://en.wikipedia.org/wiki/DOS_MZ_executable\" rel=\"nofollow noreferrer\">MZ-Signature</a> as their first 16 bit value. (Well, not directly 4 characters, but 2 characters.)</li>\n</ul>\n\n<p><em>Please add more usages and/or correct this answer.</em></p>\n"}], "owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1570011715, "answer_count": 1, "score": -3, "last_activity_date": 1570427635, "creation_date": 1570006317, "question_id": 58198239, "link": "https://stackoverflow.com/questions/58198239/why-use-an-integer-to-store-4-chars-any-practical-benefits", "closed_reason": "Needs more focus", "title": "Why use an integer to store 4 chars? Any practical benefits?", "body": "<p>I know how to store 4 chars in a single integer.</p>\n\n<p>My question is more to understand why is this useful?</p>\n\n<p><strong>Any real-world practical examples</strong> would help a lot.</p>\n"}, {"tags": ["c", "char", "constants"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1570005842, "post_id": 58198093, "comment_id": 102774351, "body": "Yes you can do that. Did you try?"}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 1, "creation_date": 1570005919, "post_id": 58198093, "comment_id": 102774386, "body": "Trick: either you read the standard (which you need to check every time, because the complex exceptions), or you should test, adding all warnings to compiler."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570005977, "post_id": 58198093, "comment_id": 102774413, "body": "Non-const to const conversion is valid and good. Const to non-const is a red flag."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570006814, "post_id": 58198093, "comment_id": 102774813, "body": "@Jabberwocky wrong duplicate. That is a C program compiled with C++ compiler"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570007335, "post_id": 58198093, "comment_id": 102775086, "body": "@Jabberwocky ah it isn&#39;t, I am writing an answer there too :D"}], "answers": [{"comments": [{"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1570006016, "post_id": 58198124, "comment_id": 102774431, "body": "You could improve this answer by adding that <code>const</code> simply means you promise not to modify the data. It covers all the OP\u2019s use cases."}], "tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": false, "score": 2, "last_activity_date": 1570006167, "last_edit_date": 1570006167, "creation_date": 1570005853, "answer_id": 58198124, "question_id": 58198093, "link": "https://stackoverflow.com/questions/58198093/can-i-pass-char-to-const-char-in-c/58198124#58198124", "title": "Can I pass char* to const char* in C?", "body": "<p>Yes it is allowed. Using <code>const</code> in this case is good practice. By adding it to the function arguments you promise not to modify the data located at <code>input</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 5403565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3f0ea1d5c4c227235f44bef79f4cbb?s=128&d=identicon&r=PG&f=1", "display_name": "toshi-san", "link": "https://stackoverflow.com/users/5403565/toshi-san"}, "edited": false, "score": 0, "creation_date": 1570014521, "post_id": 58198365, "comment_id": 102778444, "body": "Thank you for your precise answer, referring to standard. @John &#39;s answer is also very useful, practical and more intuitive."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 147, "user_id": 5403565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3f0ea1d5c4c227235f44bef79f4cbb?s=128&d=identicon&r=PG&f=1", "display_name": "toshi-san", "link": "https://stackoverflow.com/users/5403565/toshi-san"}, "edited": false, "score": 0, "creation_date": 1570014873, "post_id": 58198365, "comment_id": 102778596, "body": "@toshi-san an intuitive answer can also be vague, imprecise or even wrong. For example were the variable of type <code>char **</code>, you could not assign it to <code>const char **</code>, even though it does look like it would be OK..."}, {"owner": {"reputation": 147, "user_id": 5403565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3f0ea1d5c4c227235f44bef79f4cbb?s=128&d=identicon&r=PG&f=1", "display_name": "toshi-san", "link": "https://stackoverflow.com/users/5403565/toshi-san"}, "edited": false, "score": 0, "creation_date": 1570028925, "post_id": 58198365, "comment_id": 102786791, "body": "Yes, that&#39;s why I chose your answer as the best one. Thanks for the additional comment. <code>char**</code> cannot be assigned to <code>const char*</code> b/c <code>char*</code> and <code>const char*</code> do not seem to be compatible. I think I need to read standards more about this kind of thing."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 5, "last_activity_date": 1570014646, "last_edit_date": 1592644375, "creation_date": 1570006821, "answer_id": 58198365, "question_id": 58198093, "link": "https://stackoverflow.com/questions/58198093/can-i-pass-char-to-const-char-in-c/58198365#58198365", "title": "Can I pass char* to const char* in C?", "body": "<p>Yes, <code>char *input</code> can be <em>assigned</em> to a variable of type <code>const char *</code>, with an implicit type conversion, and C arguments work <em>as if by assignment</em>. The rule is this in <a href=\"http://port70.net/%7Ensz/c/c11/n1570.html#6.5.16.1\" rel=\"nofollow noreferrer\">C11 6.5.16.1.1</a>:</p>\n<blockquote>\n<p>6.5.16.1 Simple assignment</p>\n<p><strong>Constraints</strong></p>\n<ol>\n<li>One of the following shall hold:</li>\n</ol>\n<p>[...]</p>\n<ul>\n<li>the left operand has atomic, qualified, or unqualified pointer type, and (considering the type the left operand would have after lvalue conversion) both operands are pointers to qualified or unqualified versions of compatible types, and the type pointed to by the left has all the qualifiers of the type pointed to by the right;</li>\n</ul>\n<p>[...]</p>\n</blockquote>\n<p>In doing</p>\n<pre><code>const char *cinput;\ncinput = input;\n</code></pre>\n<p>the left operand <code>cinput</code> has <em>unqualified pointer type</em> (the pointer type <em>itself</em> is not <code>const</code>-qualified); and so does the right operand.</p>\n<p>The left operand is a pointer <strong>to</strong> a <strong>const-qualified</strong> type (<code>const char</code>), and <em>the type pointed to by</em> right operand does not have any qualifiers. The type pointed to by the left has therefore <strong>all</strong> qualifiers of the type <em>pointed to by</em> the right <strong>and</strong> additional <code>const</code> qualifier, hence the assignment is valid.</p>\n<p>And in calling a function</p>\n<pre><code>double str2double(const char* input);\n\n[...]\n\nchar *foo = ...\nstr2double(foo);\n</code></pre>\n<p>the behaviour is as if the value of <code>foo</code> was assigned to the <code>input</code> <em>parameter</em> by a simple assignment.</p>\n<p>A string literal in C is of type an array of <em>unqualified char</em>, which decays to <code>char *</code>, i.e. if it were not OK to pass <code>char *</code> into such a function, you could not use <code>double str2double( const char* input);</code> passing a <em>string literal</em> as the argument.</p>\n"}], "owner": {"reputation": 147, "user_id": 5403565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3f0ea1d5c4c227235f44bef79f4cbb?s=128&d=identicon&r=PG&f=1", "display_name": "toshi-san", "link": "https://stackoverflow.com/users/5403565/toshi-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 0, "accepted_answer_id": 58198365, "answer_count": 2, "score": 2, "last_activity_date": 1570039846, "creation_date": 1570005733, "last_edit_date": 1570039846, "question_id": 58198093, "link": "https://stackoverflow.com/questions/58198093/can-i-pass-char-to-const-char-in-c", "title": "Can I pass char* to const char* in C?", "body": "<p>I am implementing a function that converts string into double in C. The function is not destructive, i.e. I do not modify the string passed and I just read it in the function. I want to pass char*, const char*, and also string literal to the function.</p>\n\n<p>Is the following function appropriate for this purpose? I think the question comes down to whether passing char* to const char* is defined and allowed in C.</p>\n\n<pre><code>double str2double( const char* input);\n</code></pre>\n\n<p>Thank you. (I've found some similar question title, but their answers are vague for me, and I am asking here.)</p>\n"}, {"tags": ["c", "command-line", "terminal", "printf"], "comments": [{"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570004860, "post_id": 58197728, "comment_id": 102773850, "body": "I think the only way is to use screen addressing (moving the cursor around) to output without overwriting user text, then move the cursor in the previous position again."}, {"owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "edited": false, "score": 2, "creation_date": 1570005463, "post_id": 58197728, "comment_id": 102774147, "body": "<code>Is it possible</code> ? Yes. The real issue is to do so in a 1/reliable 2/portable way. A naive terminal-only solution is very easy to break: resizing your window or very long input is often enough. That is why it is usually best to rely on a library such as <code>ncurses</code> to take care of the difficult stuff."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1570005804, "post_id": 58197728, "comment_id": 102774336, "body": "Yes it is possible. ncurses was written in C and does this. Should <i>you</i> do this by yourself? No. You should use ncurses."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1570005861, "post_id": 58197728, "comment_id": 102774357, "body": "Please <a href=\"https://stackoverflow.com/posts/58197728/edit\">edit</a> your question and add more details what the user is expected to type. Is it some command that has to be processed when the uses presses the return key? How long can the command be? If it can be more than one line, is it required that you can see the complete command? Should the user be able to use the cursor keys or similar to edit the input?"}, {"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1570006375, "post_id": 58197728, "comment_id": 102774586, "body": "It sounds like you have multiple threads performing I/O on the terminal. Don\u2019t do that. Synchronize all output with the I/O thread, so that a single thread can manage I/O properly."}], "answers": [{"tags": [], "owner": {"reputation": 6180, "user_id": 325016, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/84dd218304770335d0a408867d8cc407?s=128&d=identicon&r=PG", "display_name": "aCuria", "link": "https://stackoverflow.com/users/325016/acuria"}, "is_accepted": false, "score": 0, "last_activity_date": 1570004839, "creation_date": 1570004839, "answer_id": 58197872, "question_id": 58197728, "link": "https://stackoverflow.com/questions/58197728/printing-lines-without-overwriting-user-input-that-has-not-yet-been-submitted-in/58197872#58197872", "title": "Printing lines without overwriting user input that has not yet been submitted in terminal using C", "body": "<p>Probably you want some kind of GUI to do this, that way the input and output areas are separated rather than using a command line program.</p>\n\n<p>You can directly write to the terminal using a buffer, this is OS specific. In theory you can use the top half of the console window for input and the bottom half for output. This is allot of work though, and would be similar to making a console game\n<a href=\"https://docs.microsoft.com/en-us/windows/console/console-functions\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/console/console-functions</a></p>\n\n<p>Alternatively you can use the console for input and write the results to a .txt file </p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1570005867, "creation_date": 1570005867, "answer_id": 58198127, "question_id": 58197728, "link": "https://stackoverflow.com/questions/58197728/printing-lines-without-overwriting-user-input-that-has-not-yet-been-submitted-in/58198127#58198127", "title": "Printing lines without overwriting user input that has not yet been submitted in terminal using C", "body": "<p>The very basic problem is that user typing some input is independent from <em>all</em> of your threads running, from sight of your programme, it looks pretty much like another thread generating data.</p>\n\n<p>Now you are in the trouble that you by some means need to synchronise both your programme and the user. So you need to get into single control of the screen.</p>\n\n<blockquote>\n  <p>All ideas are welcome.</p>\n</blockquote>\n\n<p>Well, here's the idea (however, you <em>will</em> produce non-portable codeas relying on OS-specific means):</p>\n\n<ul>\n<li>Read user input without getting it printed on the screen \u2013 that is OS specific, though, on Windows, you might use <code>getch</code> from <code>conio.h</code> header.</li>\n<li>User input needs to be buffered, and you might need special handling for user deleting characters (necessary) or using arrows to move the cursor around (for simplicity, you might just not support, but user will be less satisfied then).</li>\n<li>When outputting own data, overwrite user input (you might just move cursor with <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ansi escape codes</a>), but make sure you clear out all data written, i. e. overwrite with additional whitespace, if necessary.</li>\n<li>Then re-print the user's input into next line.</li>\n</ul>\n"}], "owner": {"reputation": 475, "user_id": 7804384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AlDb8.png?s=128&g=1", "display_name": "Rustang", "link": "https://stackoverflow.com/users/7804384/rustang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58198127, "answer_count": 2, "score": 0, "last_activity_date": 1570005867, "creation_date": 1570004345, "last_edit_date": 1570004515, "question_id": 58197728, "link": "https://stackoverflow.com/questions/58197728/printing-lines-without-overwriting-user-input-that-has-not-yet-been-submitted-in", "title": "Printing lines without overwriting user input that has not yet been submitted in terminal using C", "body": "<p>Is it possible to print output to the terminal using C so that a user's incomplete input remains unaltered?</p>\n\n<p>The use case is a multi-threaded program that outputs bulk results while awaiting user input for the next task. The issue is that whilst typing input back into the program, whenever the program outputs another line, the incomplete input gets swept up in the lines of output.</p>\n\n<p>All ideas are welcome</p>\n"}, {"tags": ["c", "arrays", "malloc"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1570003952, "post_id": 58197575, "comment_id": 102773441, "body": "When you say you want the output to be &#39;nothing&#39; what do you actually mean? Do you want a blank (space) character output?"}, {"owner": {"reputation": 27, "user_id": 12104496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/191b483c04103284b8fe738fdcd81572?s=128&d=identicon&r=PG&f=1", "display_name": "NightPixel", "link": "https://stackoverflow.com/users/12104496/nightpixel"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1570004066, "post_id": 58197575, "comment_id": 102773488, "body": "yeah something like that it can be null, blank space. Just when printing out it has to not show up on the screen. But if I put the char of say X or O in the array I want that character to show up instead."}, {"owner": {"reputation": 27, "user_id": 12104496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/191b483c04103284b8fe738fdcd81572?s=128&d=identicon&r=PG&f=1", "display_name": "NightPixel", "link": "https://stackoverflow.com/users/12104496/nightpixel"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1570004337, "post_id": 58197575, "comment_id": 102773593, "body": "malloc defaults to &#39;0&#39; for some reason. Can I put an empty string &#39; &#39; as each array element or is there a better way than hard coding that in?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1570004434, "post_id": 58197575, "comment_id": 102773634, "body": "Exactly - see answer!"}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": false, "score": 1, "last_activity_date": 1570004392, "creation_date": 1570004392, "answer_id": 58197738, "question_id": 58197575, "link": "https://stackoverflow.com/questions/58197575/how-to-make-a-malloced-2d-array-show-nothing-when-printed-out/58197738#58197738", "title": "How to make a malloced 2D array show nothing when printed out?", "body": "<p>OK, so if you want to print a 'space' character (i.e. nothing shows) for any grid position that's not yet 'used' (i.e. has a <code>O</code> or <code>X</code> in it), then you need to add/change two things in your code.</p>\n\n<p>First, you need to initialise your array to blank characters:</p>\n\n<pre><code>for(ii = 0; ii &lt; row; ii++) {\n    for(jj = 0; jj &lt; col; jj++) {\n        array[ii][jj] = ' '; // Set to the blank (space) character\n    }\n}\n</code></pre>\n\n<p>Then, in your \"test print\" you need to output the characters <strong><em>as characters</em></strong> - not as numbers (integers):</p>\n\n<pre><code>for(ii = 0; ii &lt; row; ii++) {\n    for(jj = 0; jj &lt; col; jj++) {\n        printf(\"\\n%d:%d = %c\", ii, jj, array[ii][jj]); // %c will print the character as such, but you won't see it!\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 12104496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/191b483c04103284b8fe738fdcd81572?s=128&d=identicon&r=PG&f=1", "display_name": "NightPixel", "link": "https://stackoverflow.com/users/12104496/nightpixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570011443, "creation_date": 1570003732, "last_edit_date": 1570011443, "question_id": 58197575, "link": "https://stackoverflow.com/questions/58197575/how-to-make-a-malloced-2d-array-show-nothing-when-printed-out", "title": "How to make a malloced 2D array show nothing when printed out?", "body": "<p>I am working on a Tic Tac Toe Game and have a malloced 2D array of characters for the Grid <strong>3x3</strong>. </p>\n\n<p>I Test printed the values in the array and got <code>0</code>. I am planning on making a grid around the array output but for that to work the output has to be empty not <code>0</code>. Please Help I want the output to be nothing.</p>\n\n<pre><code>/*Malloced Array*/\n\narray = (char**)malloc(sizeof(char) * row);\n\nfor(ii = 0; ii &lt; row; ii++)\n{\n    arraySec = (char*)malloc(sizeof(char) * col);\n    array[ii] = arraySec;\n}\n\n/*Test Print*/\nfor(ii = 0; ii &lt; row; ii++)\n{\n    for(jj = 0; jj &lt; col; jj++)\n    {\n        printf(\"\\n%d:%d = %d\", ii, jj, array[ii][jj]);\n    }\n}\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>0:0 = 0\n\n0:1 = 0\n\n0:2 = 0\n\n1:0 = 0\n\n1:1 = 0\n\n1:2 = 0\n\n2:0 = 0\n\n2:1 = 0\n\n2:2 = 0\n</code></pre>\n"}, {"tags": ["c", "arrays", "singly-linked-list"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8527870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-exPGvMiyZus/AAAAAAAAAAI/AAAAAAAAEvI/Yi74vk7qMc8/photo.jpg?sz=128", "display_name": "Umair Javaid", "link": "https://stackoverflow.com/users/8527870/umair-javaid"}, "edited": false, "score": 0, "creation_date": 1570008063, "post_id": 58197118, "comment_id": 102775425, "body": "Following is the output after modifications, please share why extra results are in display. 1 2 3 4 5 32764 0 0 4335920 0 -1407104105 32652 1 0 -1273182248 32764 0 1 4334304 0"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 1, "last_activity_date": 1570001946, "creation_date": 1570001946, "answer_id": 58197118, "question_id": 58197036, "link": "https://stackoverflow.com/questions/58197036/how-to-build-a-singly-linked-list-from-array-in-c/58197118#58197118", "title": "How to build a singly linked list from array in C", "body": "<p>Two problems,</p>\n\n<ol>\n<li><p>Array passed to function decays to pointer.</p>\n\n<pre><code>for (int j=0, O=sizeof(arr); j&lt;O; j++)\n</code></pre>\n\n<p>Here you are looping till sizeof pointer not till size of actual array.</p>\n\n<p>Pass the array size from <code>main</code> itself.</p>\n\n<pre><code> list *createlinkedlist(int *arr, int length); //prototype becomes\n head = createlinkedlist(arr, sizeof (arr)); // function call becomes\n for (int j=0; j&lt;length; j++) //for loop becomes\n</code></pre></li>\n<li><p>You are not storing array contents into linked list.</p>\n\n<pre><code>    temp= (list*)malloc(sizeof(list));\n    temp-&gt;data = arr[j]; //store the content into list\n    temp-&gt;next = NULL;\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6463386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/254e3ae3a5b84c2b9bcf382693830192?s=128&d=identicon&r=PG", "display_name": "Gyubong Lee", "link": "https://stackoverflow.com/users/6463386/gyubong-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1570058509, "last_edit_date": 1592644375, "creation_date": 1570006075, "answer_id": 58198174, "question_id": 58197036, "link": "https://stackoverflow.com/questions/58197036/how-to-build-a-singly-linked-list-from-array-in-c/58198174#58198174", "title": "How to build a singly linked list from array in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct list\n{\n    int data;\n    struct list* next;\n}\nlist;\n\nlist* createlinkedlist(int* arr, int length);\n\nvoid printlist(list* head);\n\nvoid deleteList(list* _list, int length);\n\nint main(void)\n{\n    int arr[] = { 1,2,3,4,5 };\n    list* head = NULL;\n    head = createlinkedlist(arr, 5);\n\n    // Result is '1\\n,2\\n,3\\n,4\\n,5\\n'\n    printlist(head);\n    deleteList(head, 5);\n\n    // Below value is garbage\n    printf(&quot;%p\\n&quot;, head-&gt;next);\n}\n\nvoid deleteList(list* p, int length)\n{\n    list** nodeArr = (list **)malloc(sizeof(list*) * length);\n\n    for (int i = 0; p != NULL; i++, p = p-&gt;next)\n    {\n        nodeArr[i] = p;\n    }\n\n    for (int i = 0; i &lt;= sizeof(nodeArr); ++i)\n    {\n        free(nodeArr[i]);\n    }\n\n    free(nodeArr);\n}\n\nlist* createlinkedlist(int* arr, int length)\n{\n    list* head = NULL;\n    list* temp = NULL;\n    list* p = NULL;\n\n    // repeat until j == length\n    for (int j = 0; j &lt; length; j++)\n    {\n        temp = (list*) malloc(sizeof(list));\n\n        // assign value of arr[j]\n        temp-&gt;data = arr[j];\n\n        temp-&gt;next = NULL;\n\n        if (head == NULL)\n            head = temp;\n        else\n        {\n            p = head;\n            while (p-&gt;next != NULL)\n            {\n                p = p-&gt;next;\n            }\n            p-&gt;next = temp;\n        }\n    }\n    return head;\n}\n\n\nvoid printlist(list* head)\n{\n    list* p = head;\n    while (p != NULL)\n    {\n        printf(&quot;%d\\n&quot;, p-&gt;data);\n        p = p-&gt;next;\n    }\n}\n\n</code></pre>\n<p>First, You have not assigned the value of the array into the list.</p>\n<p>Second, While Statement must repeat until length of arr, and you have not passed the length of arr.</p>\n<p>('arr' is int pointer pointing to the first element (address of 1) of an array.  and, sizeof(arr) is '<strong>int pointer size</strong>', not length of arr.)</p>\n<p>So, you need to put the length in the second argument of 'createdlinkedlist'.</p>\n<p>If you fix it like the code above, it works.</p>\n<br>\n<hr>\n<p>To add that, You must call 'free' function to return used memory after using heap memory.</p>\n<p>(Namely after using malloc)</p>\n<p>In this case, you could define 'deleteList' function to free all the 'next' in the list.</p>\n<br>\n<p>Or, If you can use c++, you can define destructor in the list</p>\n<pre><code>typedef struct list\n{\n    int data;\n    struct list* next;\n\n    ~list (){\n        delete next;\n    }\n}\nlist;\n</code></pre>\n<p>Calling delete of the head of the list calls a series of delete call chain.</p>\n<p>In this case, you must use 'delete' keyword instead of 'free' function</p>\n"}], "owner": {"reputation": 23, "user_id": 8527870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-exPGvMiyZus/AAAAAAAAAAI/AAAAAAAAEvI/Yi74vk7qMc8/photo.jpg?sz=128", "display_name": "Umair Javaid", "link": "https://stackoverflow.com/users/8527870/umair-javaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1570058509, "creation_date": 1570001595, "question_id": 58197036, "link": "https://stackoverflow.com/questions/58197036/how-to-build-a-singly-linked-list-from-array-in-c", "title": "How to build a singly linked list from array in C", "body": "<p>I am learning singly-linked lists in C and trying to link components of an array. I have written a few lines of code but it is not giving required results i-e making and printing linked list from array. Can someone please explain why it is not working? Thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct list\n{\nint data;\nstruct list *next;\n}\nlist;\n\nlist *createlinkedlist(int *arr);\n\nvoid printlist(list * head);\n\nint main(void)\n{\n    int arr[]={1,2,3,4,5};\n    list *head=NULL;\n    head = createlinkedlist(arr);\n    printlist(head);\n\n}\n\nlist *createlinkedlist(int *arr)\n{\n    list *head=NULL;\n    list *temp=NULL;\n    list *p=NULL;\n\n    for (int j=0, O=sizeof(arr); j&lt;O; j++)\n        {\n            temp= (list*)malloc(sizeof(list));\n            temp-&gt;next = NULL;\n\n        if(head == NULL)\n            head=temp;\n        else\n        {\n            p=head;\n            while(p-&gt;next!=NULL)\n            {\n                p=p-&gt;next;\n            }\n            p-&gt;next = temp;\n        }\n    }\nreturn head;\n}\n\n\nvoid printlist(list *head)\n{\n    list * p = head;\n    while (p !=NULL)\n    {\n        printf(\"%d\\n\", p-&gt;data);\n        p = p-&gt;next;\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1780, "user_id": 10988580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9885afb3fe782ac4c8e89a3b5904b8f6?s=128&d=identicon&r=PG&f=1", "display_name": "virolino", "link": "https://stackoverflow.com/users/10988580/virolino"}, "edited": false, "score": 0, "creation_date": 1569999749, "post_id": 58196564, "comment_id": 102771572, "body": "Try to store the value returned from <code>get_pixel()</code> to a variable, and then take the address of the variable. Or modify the function to return directly a pointer."}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "edited": false, "score": 0, "creation_date": 1570000523, "post_id": 58196564, "comment_id": 102771896, "body": "It is strangely inconsistent to me that the get is returning a value and the set is asking for a reference. Is this an API you are designing? consider either making get_pixel take an out pointer argument, or pass rgb by value to set_pixel."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 1, "last_activity_date": 1570000660, "last_edit_date": 1570000660, "creation_date": 1570000104, "answer_id": 58196710, "question_id": 58196564, "link": "https://stackoverflow.com/questions/58196564/c-error-cannot-take-the-address-of-an-rvalue-of-type-struct-pixel/58196710#58196710", "title": "C Error: cannot take the address of an rvalue of type &#39;struct pixel&#39;", "body": "<pre><code>&amp;get_pixel(pic, x, y)\n</code></pre>\n\n<p>The <code>get_pixel(pic, x, y)</code> returns <code>rvalue</code> and <code>rvalue</code> does not have an address, thus you can't use <code>&amp;</code> operator on it.</p>\n\n<p>What you can do is, store the return value of <code>get_pixel</code> in some temporary variable and pass the address of it to <code>set_pixel</code> function.</p>\n\n<pre><code>                for (int y = 0; y &lt; get_image_height(pic-&gt;img); y++) {\n                    struct pixel temp = get_pixel(pic, x, y);\n\n                    set_pixel(tempPic,\n                              y,\n                              get_image_width(pic-&gt;img) - x - 1,\n                              &amp;temp);\n                }\n</code></pre>\n\n<p>Note: <code>set_pixel</code> function should not store the reference of <code>temp</code> variable for further processing as its life time is within the <code>loop</code>. </p>\n"}], "owner": {"reputation": 33, "user_id": 6838675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185697f80a8a37f66f824cb25a47bdc1?s=128&d=identicon&r=PG&f=1", "display_name": "Ihowa Onaro", "link": "https://stackoverflow.com/users/6838675/ihowa-onaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570003337, "creation_date": 1569999398, "last_edit_date": 1570003337, "question_id": 58196564, "link": "https://stackoverflow.com/questions/58196564/c-error-cannot-take-the-address-of-an-rvalue-of-type-struct-pixel", "title": "C Error: cannot take the address of an rvalue of type &#39;struct pixel&#39;", "body": "<p>The signature of the set_pixel function takes a pointer to a struct pixel. So in my for loop I use the '&amp;' sign to get the address of the struct pixel returned by get_pixel. Please I would like to understand why this doesn't work and how I can fix it.</p>\n\n<pre><code>struct pixel get_pixel(struct picture *pic, int x, int y);\n\nvoid set_pixel(struct picture *pic, int x, int y, struct pixel *rgb);\n\nfor (int x = 0; x &lt; get_image_width(pic-&gt;img); x++) {\n  for (int y = 0; y &lt; get_image_height(pic-&gt;img); y++) {\n    set_pixel(tempPic, y, get_image_width(pic-&gt;img) - x - 1,\n              &amp;get_pixel(pic, x, y));\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "embedded"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1569997891, "post_id": 58196225, "comment_id": 102770843, "body": "Please show more of your code, try for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You may assume that we have the same environment."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1569997986, "post_id": 58196225, "comment_id": 102770882, "body": "Look at the build logs, do you get build errors? What errors? Please take some time to read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>, and edit your question to improve it."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1569998066, "post_id": 58196225, "comment_id": 102770909, "body": "First of all there is no code after the <code>else part of the code</code>"}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1569998179, "post_id": 58196225, "comment_id": 102770944, "body": "Are you sure you have called the <code>setup()</code> function before the <code>loop()</code>?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569998212, "post_id": 58196225, "comment_id": 102770959, "body": "@Yunnosch I got confused actually. Thank you."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1569998226, "post_id": 58196225, "comment_id": 102770964, "body": "@KenY-N The <code>setup</code> function is called automatically by the Arduino framework. It then calls <code>loop</code> in an infinite loop."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569998238, "post_id": 58196225, "comment_id": 102770967, "body": "Just for an experiment, replace the <code>LOW</code> with <code>HIGH</code>. If that helps then the definition of <code>LOW</code> is missing or wrong."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569998289, "post_id": 58196225, "comment_id": 102770983, "body": "Please also heed the advice to show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We need to see what header files you include."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1569998561, "post_id": 58196225, "comment_id": 102771089, "body": "Hmm, judging by the answers &quot;highlighted in red when I execute it&quot; seems to mean here that the code is not actually executed; the compilation failed with an error."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1569998662, "post_id": 58196225, "comment_id": 102771125, "body": "@KenY-N You are right. But confusing &quot;executing&quot; with &quot;compiling&quot;, or &quot;building&quot; or &quot;pre-processing&quot; or &quot;linking&quot; or &quot;loading&quot; is a very common mistake... Especially with IDEs which do all of that on one button..."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1569998785, "post_id": 58196225, "comment_id": 102771176, "body": "Sorry people, especially the keen-eyed answerers. I think it is time to close this as a typo. Actually several typos...."}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569998727, "post_id": 58196343, "comment_id": 102771153, "body": "Also a keen eye. Seems I need new glasses."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1569998852, "post_id": 58196343, "comment_id": 102771196, "body": "@Yunnosch Haha! We don&#39;t need keen eye but we surely need compiler errors for this kind of question. :D"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1569998892, "post_id": 58196343, "comment_id": 102771214, "body": "True, kiran Biradar. That is why <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> has repeatedly been mentioned."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 3, "last_activity_date": 1569998365, "creation_date": 1569998365, "answer_id": 58196343, "question_id": 58196225, "link": "https://stackoverflow.com/questions/58196225/error-how-to-fix-the-digitalwrite-error/58196343#58196343", "title": "Error: How to fix the digitalWrite() error?", "body": "<pre><code>noTune(buzpin);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>noTone(buzpin);\n</code></pre>\n\n<p>There is no function called <code>noTune()</code> Arduino. </p>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569998504, "post_id": 58196347, "comment_id": 102771066, "body": "Keen eye, enough of an upvote reason for me. Though I believe that if this is the answer, then the problem should have occurred BEFORE the else, not after."}], "tags": [], "owner": {"reputation": 922, "user_id": 8653951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRbxO.jpg?s=128&g=1", "display_name": "theSealion", "link": "https://stackoverflow.com/users/8653951/thesealion"}, "is_accepted": false, "score": 4, "last_activity_date": 1569998383, "creation_date": 1569998383, "answer_id": 58196347, "question_id": 58196225, "link": "https://stackoverflow.com/questions/58196225/error-how-to-fix-the-digitalwrite-error/58196347#58196347", "title": "Error: How to fix the digitalWrite() error?", "body": "<p>Even if your question is incomplete:</p>\n\n<pre><code>const int ledPin=13;\n\n\ndigitalWrite(ledpin,LOW);//turns led off led and buzzer\n</code></pre>\n\n<p>The \"digitalWrite\" Error could come from this difference. C and C++ are case sensitive.\n<code>ledPin</code> and <code>ledpin</code> are different names.</p>\n\n<p>Next time you should show the real error message, since the compiler will always tell exactly you  what is wrong.</p>\n"}], "owner": {"reputation": 53, "user_id": 12033411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCm6i5duLpS2-m1T0HBoY8-vjcSWynj5qxD1BjY8g=k-s128", "display_name": "Harsh Shah", "link": "https://stackoverflow.com/users/12033411/harsh-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1570004135, "answer_count": 2, "score": -1, "last_activity_date": 1569998383, "creation_date": 1569997720, "last_edit_date": 1569998030, "question_id": 58196225, "link": "https://stackoverflow.com/questions/58196225/error-how-to-fix-the-digitalwrite-error", "closed_reason": "Not suitable for this site", "title": "Error: How to fix the digitalWrite() error?", "body": "<p>This part of my code is highlighted in red when I execute it. I'm a beginner so please help me solve it. The error is in the line just after the else part of the code.</p>\n\n<p>Tried googling for the same.</p>\n\n<pre><code>const int ledPin=13;//ledpin,flamepin and buzpin are not changed throughout the process\nconst int flamepin=A2;\nconst int buzpin=11;\nconst int thresold=200;// sets threshold value for flame sensor\nint flamesensvalue=0;//initialize flamesensor reading\nvoid setup()\n{\n  Serial.begin(9600);\n  pinMode(ledPin,OUTPUT);\n  pinMode(flamepin,INPUT);\n  pinMode(buzpin,OUTPUT);\n}\nvoid loop()\n{\n  flamesensvalue=analogRead(flamepin); // reads analog data from flame sensor\n  if (flamesensvalue&lt;=thresold)\n  { // compares reading from flame sensor with the threshold value\n    digitalWrite(ledpin,HIGH);   //turns on led and buzzer\n    tone(buzpin,100);\n    delay(1000); //stops program for 1 second\n  } else\n  {\n    digitalWrite(ledpin,LOW);//turns led off led and buzzer\n    noTune(buzpin);\n  }\n}\n\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1569996234, "post_id": 58195960, "comment_id": 102770329, "body": "The site has explanation too."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1569996903, "post_id": 58195960, "comment_id": 102770548, "body": "Do you know what parity is?! the number of bits set modulo 2, possibly inverted. If there are only <i>zeroed bits</i> left there is nothing to count..."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5364679, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cJYsqWitc54/AAAAAAAAAAI/AAAAAAAAABM/dgmdyah6SdE/photo.jpg?sz=128", "display_name": "Bibek stha", "link": "https://stackoverflow.com/users/5364679/bibek-stha"}, "is_accepted": false, "score": 0, "last_activity_date": 1569997046, "creation_date": 1569997046, "answer_id": 58196119, "question_id": 58195960, "link": "https://stackoverflow.com/questions/58195960/why-loop-is-run-till-number-becomes-zero/58196119#58196119", "title": "Why loop is run till number becomes zero", "body": "<p>In C, the Boolean value of all integers except zero is True. And since, while statement test for exactly that the loop runs until value of <code>n</code> is zero. Once <code>n</code> is zero, the loop is not entered at all.</p>\n\n<p>If your question is why the <code>n</code> decreases up to zero.\nBitwise <code>and</code> (<code>&amp;</code>) between two unsigned integer always creates value less than or equal to lowest of two. This lower number is then assigned to <code>n</code> itself, so, <code>n</code> is decreasing in up to zero.</p>\n\n<p>Some examples</p>\n\n<p><code>1111 &amp; 0111 = 0111</code></p>\n\n<p><code>0101 &amp; 1010 = 0000</code></p>\n\n<p><code>0100 &amp; 0101 = 0100</code></p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "is_accepted": true, "score": 0, "last_activity_date": 1569997920, "creation_date": 1569997920, "answer_id": 58196263, "question_id": 58195960, "link": "https://stackoverflow.com/questions/58195960/why-loop-is-run-till-number-becomes-zero/58196263#58196263", "title": "Why loop is run till number becomes zero", "body": "<p>The trick rely on this binary operation:</p>\n\n<p><code>n = n &amp; (n - 1);</code></p>\n\n<p>According to your website, it will unset (<code>1 -&gt; 0</code>) the rightmost active bit from the previous value of <code>n</code>. The loop will continue until all active bits are unset.</p>\n\n<p>For instance, if your number <code>n</code> contains 6 active bits (<code>n = 159 -&gt; 10011111</code>), it will take 6 loop to unset all of them.</p>\n\n<p>Start: <code>10011111</code></p>\n\n<ol>\n<li><code>10011110</code></li>\n<li><code>10011100</code></li>\n<li><code>10011000</code></li>\n<li><code>10010000</code></li>\n<li><code>10000000</code></li>\n<li><code>00000000</code></li>\n</ol>\n\n<p>As far as I'm aware, the value of an integer number without any active bits (<code>00000000</code>) is always equal to <code>0</code>. Thus the loop terminates.</p>\n"}, {"tags": [], "owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "is_accepted": false, "score": 0, "last_activity_date": 1579427382, "last_edit_date": 1579427382, "creation_date": 1569999946, "answer_id": 58196677, "question_id": 58195960, "link": "https://stackoverflow.com/questions/58195960/why-loop-is-run-till-number-becomes-zero/58196677#58196677", "title": "Why loop is run till number becomes zero", "body": "<p>I don't know if evaluating parity using that loop is a requirement (but, pratically speaking that's not the best way to evaluate parity).</p>\n\n<p>A number is odd if its final bit is 1, it's even otherwise. For this reason there's no reason to loop. You can simply:</p>\n\n<pre><code>bool getParity(unsigned int n) \n{ \n  return (bool)(n%2); \n} \n</code></pre>\n\n<p>Or, alternatively</p>\n\n<pre><code>bool getParity(unsigned int n) \n{ \n  return (bool)(n &amp; 0x00000001 ); \n} \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6569772, "user_type": "registered", "profile_image": "https://graph.facebook.com/483909198474329/picture?type=large", "display_name": "Anurag Shekhawat", "link": "https://stackoverflow.com/users/6569772/anurag-shekhawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1570004191, "accepted_answer_id": 58196263, "answer_count": 3, "score": 0, "last_activity_date": 1579427382, "creation_date": 1569995990, "last_edit_date": 1569996201, "question_id": 58195960, "link": "https://stackoverflow.com/questions/58195960/why-loop-is-run-till-number-becomes-zero", "closed_reason": "Needs more focus", "title": "Why loop is run till number becomes zero", "body": "<p>Can somebody tell why keeps the loop till n becomes zero ..logic behind this code.</p>\n\n<pre><code># include &lt;stdio.h&gt; \n# define  bool int \n\n/* Function to get parity of number n. It returns 1 \n   if n has odd parity, and returns 0 if n has even \n   parity */\nbool getParity(unsigned int n) \n{ \n    bool parity = 0; \n    while (n) \n    { \n        parity = !parity; \n        n      = n &amp; (n - 1); \n    }         \n    return parity; \n} \n\n/* Driver program to test getParity() */\nint main() \n{ \n    unsigned int n = 7; \n    printf(\"Parity of no %d = %s\",  n,  \n             (getParity(n)? \"odd\": \"even\")); \n\n    getchar(); \n    return 0; \n}\n</code></pre>\n\n<p>code from <a href=\"https://www.geeksforgeeks.org/program-to-find-parity/\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 1, "creation_date": 1569992020, "post_id": 58195228, "comment_id": 102769249, "body": "Are you just looking for simple macro substitution to check if the given value is any one of those options? If so can you do just <code>#define IN(val, opt1, opt2, opt3) (val == opt1 || val == opt2 || val ==opt3)</code>"}, {"owner": {"reputation": 1738, "user_id": 498804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cab95b1f8c2d4d641aab857d7dd8723?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/498804/jake"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1569995515, "post_id": 58195228, "comment_id": 102770116, "body": "I want that, but with arbitrary numbers of options."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1569995850, "post_id": 58195228, "comment_id": 102770220, "body": "Not with <i>arbitrary</i>. Even for counting macro arguments you need to write a macro or two for each argument count..."}], "answers": [{"tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1569996420, "creation_date": 1569996420, "answer_id": 58196031, "question_id": 58195228, "link": "https://stackoverflow.com/questions/58195228/is-there-a-way-to-write-a-c-preprocessor-macro-with-variable-args-like-this/58196031#58196031", "title": "Is there a way to write a C preprocessor macro with variable args like this?", "body": "<p>CPP does not support iterating over the list of arguments. The closest structure in \"C\" will be switch statement, but it does not lead itself to </p>\n\n<pre><code>  switch (node-&gt;type ) {\n      case V1:\n      case V2:\n      case V3:\n          ...\n   }\n</code></pre>\n\n<p>As an alternative, you can get something that is more inline with the 'IN' test, using a \nA function WITH vararg function. This is limitations that (1) type must be known and (2) there will be a special value (LAST in the example) to indicate the end of the list</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdarg.h&gt;\n\n#define LAST (-1)\n\nbool in_int_set(int v, ...)\n{\n   va_list ap ;\n   va_start(ap, v) ;\n   for (;;) {                        // forever\n        int s = va_arg(ap, int) ;\n        if ( s == LAST ) return false ;\n        if ( s == v ) return true ;\n   } ;\n}\n\nvoid main(void) {\n        printf(\"A=%d\\n\", in_int_set(5,      3, 5, 7, LAST)) ;\n        printf(\"B=%d\\n\", in_int_set(5,      2, 4, 6, 8, 10, LAST)) ;\n// From the question about\n        if ( in_int_set(node-&gt;type,     BRANCH, CAPTURE_START, CAPTURE_END, LAST) ) {\n            ...\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 1738, "user_id": 498804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cab95b1f8c2d4d641aab857d7dd8723?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/498804/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1569996756, "creation_date": 1569990522, "question_id": 58195228, "link": "https://stackoverflow.com/questions/58195228/is-there-a-way-to-write-a-c-preprocessor-macro-with-variable-args-like-this", "title": "Is there a way to write a C preprocessor macro with variable args like this?", "body": "<p>I want a C preprocessor macro that can convert this:</p>\n\n<pre><code>if (IN(node-&gt;type, BRANCH, CAPTURE_START, CAPTURE_END)) {\n    ...\n}\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>if (node-&gt;type == BRANCH || node-&gt;type == CAPTURE_START || node-&gt;type == CAPTURE_END) {\n    ...\n}\n</code></pre>\n\n<p>which is kind of similar to the MySQL IN operator. Is it possible?</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1569990462, "post_id": 58195116, "comment_id": 102768982, "body": "How does <code>(1,2)</code> become <code>(1,1,0,0)</code>?"}, {"owner": {"reputation": 25, "user_id": 11468948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfc50cec8f72b99b7f76a368491bed2?s=128&d=identicon&r=PG&f=1", "display_name": "ryanC_1995", "link": "https://stackoverflow.com/users/11468948/ryanc-1995"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1569991083, "post_id": 58195116, "comment_id": 102769076, "body": "In (1,1,0,0), first binary 1 means the first element in original set (1,2,3,4) which is 1 is contained in the subset. And the second binary 1 means the second element in original set which is 2 is contained in subset. While the third and forth number 3 and 4 is not. So for example, a subset (1,2,5) from set (1,2,3,4,5) can be presented by (1,1,0,0,1)."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1569993650, "post_id": 58195116, "comment_id": 102769643, "body": "Hint: there are three conditions that need to be handled in the recursive function: <code>i == n</code>, <code>k &lt; n-i</code>, and <code>k &gt; 0</code>. The first is the base case. The other two determine whether a particular recursive call is made."}, {"owner": {"reputation": 25, "user_id": 11468948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfc50cec8f72b99b7f76a368491bed2?s=128&d=identicon&r=PG&f=1", "display_name": "ryanC_1995", "link": "https://stackoverflow.com/users/11468948/ryanc-1995"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1569994175, "post_id": 58195116, "comment_id": 102769786, "body": "I don&#39;t really get the last two conditions. Is there any way you can fix my code? Thanks"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569995685, "post_id": 58195116, "comment_id": 102770174, "body": "chajie2000 Please <a href=\"https://stackoverflow.com/posts/58195116/edit\">edit</a> your question to explain everything inside, instead of hiding helpful information in comments."}, {"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "edited": false, "score": 0, "creation_date": 1569996225, "post_id": 58195116, "comment_id": 102770326, "body": "More Hint: The fourth argument <code>i</code> could be the deepness of the recursion. You are allowed to call <code>subset</code> twice in the recursive function. Enough said I think :)"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11468948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfc50cec8f72b99b7f76a368491bed2?s=128&d=identicon&r=PG&f=1", "display_name": "ryanC_1995", "link": "https://stackoverflow.com/users/11468948/ryanc-1995"}, "edited": false, "score": 0, "creation_date": 1570002830, "post_id": 58195994, "comment_id": 102772967, "body": "This seems doesn&#39;t work. I\u2019ve tried something like this before but the results are all 1 except the first few subsets."}, {"owner": {"reputation": 404, "user_id": 8125832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a73633905ab794d9a1e6584f85fc532?s=128&d=identicon&r=PG&f=1", "display_name": "rajender kumar", "link": "https://stackoverflow.com/users/8125832/rajender-kumar"}, "reply_to_user": {"reputation": 25, "user_id": 11468948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfc50cec8f72b99b7f76a368491bed2?s=128&d=identicon&r=PG&f=1", "display_name": "ryanC_1995", "link": "https://stackoverflow.com/users/11468948/ryanc-1995"}, "edited": false, "score": 0, "creation_date": 1570006040, "post_id": 58195994, "comment_id": 102774440, "body": "can you show me for which input behaviour is not expected as mentioned ?"}, {"owner": {"reputation": 25, "user_id": 11468948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfc50cec8f72b99b7f76a368491bed2?s=128&d=identicon&r=PG&f=1", "display_name": "ryanC_1995", "link": "https://stackoverflow.com/users/11468948/ryanc-1995"}, "edited": false, "score": 0, "creation_date": 1570035739, "post_id": 58195994, "comment_id": 102790284, "body": "Sorry actually this bool method worked but the problem is I have five arguments passed in and I need to cut it down to 4. Details about it is in original post."}], "tags": [], "owner": {"reputation": 404, "user_id": 8125832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a73633905ab794d9a1e6584f85fc532?s=128&d=identicon&r=PG&f=1", "display_name": "rajender kumar", "link": "https://stackoverflow.com/users/8125832/rajender-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1569996209, "creation_date": 1569996209, "answer_id": 58195994, "question_id": 58195116, "link": "https://stackoverflow.com/questions/58195116/how-to-get-subsets-of-a-set-with-given-number-of-elements-in-c-with-recursion/58195994#58195994", "title": "How to get subsets of a set with given number of elements in C with recursion?", "body": "<p>Add another boolean array and put entire array like this .</p>\n\n<pre><code>void subset(int n, int k, int B[], int q, int r) {\n    if (q == k) {\n        bool finalArry[n] = {0};\n        for (int i = 0; i &lt; k; i++) {\n                finalArry[B[i]-1] = true;\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if(finalArry[i]){\n                cout&lt;&lt;1&lt;&lt;\" \";\n            }\n            else{\n                cout&lt;&lt;0&lt;&lt;\" \";\n            }\n        }\n        cout&lt;&lt;endl;\n\n    } else {\n        for (int i = r; i &lt; n; i++) {\n            B[q] = i+1;\n            subset(n, k, B, q+1, i+1);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "is_accepted": true, "score": 0, "last_activity_date": 1570080590, "last_edit_date": 1570080590, "creation_date": 1570042324, "answer_id": 58207677, "question_id": 58195116, "link": "https://stackoverflow.com/questions/58195116/how-to-get-subsets-of-a-set-with-given-number-of-elements-in-c-with-recursion/58207677#58207677", "title": "How to get subsets of a set with given number of elements in C with recursion?", "body": "<p>This should do the job:</p>\n\n<pre><code>void subset(int n, int k, int B[], int i) {\n    if (k == 0) {\n        for (int d = 0; d &lt; n; d++) {\n            printf(\"%d \", B[d]);\n        }\n        printf(\"\\n\");\n    } else if (i &gt;= n || k &gt; n - i) {\n        return;\n    } else {\n        B[i] = 1;\n        subset(n, k - 1, B, i + 1);\n        B[i] = 0;\n        subset(n, k, B, i + 1);\n    }\n}\n\nint main(int argc, char **argv) {\n    int n, k;\n    int B[4];\n\n    memset(B, 0, sizeof(B));\n    n = sizeof(B) / sizeof(B[0]);\n    k = 2;\n    printf(\"n=%d\\nk=%d\\n\", n, k);\n    subset(n, k, B, 0);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11468948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfc50cec8f72b99b7f76a368491bed2?s=128&d=identicon&r=PG&f=1", "display_name": "ryanC_1995", "link": "https://stackoverflow.com/users/11468948/ryanc-1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 58207677, "answer_count": 2, "score": 0, "last_activity_date": 1570080590, "creation_date": 1569989558, "last_edit_date": 1570039861, "question_id": 58195116, "link": "https://stackoverflow.com/questions/58195116/how-to-get-subsets-of-a-set-with-given-number-of-elements-in-c-with-recursion", "title": "How to get subsets of a set with given number of elements in C with recursion?", "body": "<p>For instance when user input 4 and 2, it means the original set have 4 elements: (1,2,3,4) and the subset should have 2 elements. I figured out a way to present these subsets in a regular form like (1,2)(1,3)(1,4)(2,3)(2,4)(3,4) using the code below, but my assignment requires binary-like form like (1,2) should be (1,1,0,0) and (2,4) should be (0,1,0,1) etc. In (1,1,0,0), first binary 1 means the first element in original set (1,2,3,4) which is 1 is contained in the subset. And the second binary 1 means the second element in original set which is 2 is contained in subset. While the third and forth number 3 and 4 is not. So for example, a subset (1,2,5) from set (1,2,3,4,5) can be presented by (1,1,0,0,1)</p>\n\n<pre><code>void subset(int n, int k, int B[], int q, int r) {\n    if (q == k) {\n        for (int i = 0; i &lt; k; i++) {\n            printf(\"%d \", B[i]);\n        }\n        printf(\"\\n\");\n    } else {\n        for (int i = r; i &lt; n; i++) {\n            B[q] = i+1;\n            subset(n, k, B, q+1, i+1);\n        }\n    }\n}\n</code></pre>\n\n<p>In main (n is number of elements in original set, k is number of elements in subsets):</p>\n\n<pre><code>int B[101];\nsubset(n, k, B, 0, 0);\n</code></pre>\n\n<p>Also my assignment needs this recursive function with 4 exact arguments( i is from (1,2,3,4...i) ): </p>\n\n<pre><code>void subsets(int B[], int n, int k, int i)\n</code></pre>\n\n<p>I've tried so many ways and failed. I'll be really appreciated if someone can help me out, thanks. </p>\n\n<p><strong>Updates:</strong>\nthanks to rajender kumar, the binary-like output problem is solved by using the code below:</p>\n\n<pre><code>void printSubsets(int B[], int n, int k, int q, int i) {\n    if (q == k) {\n        int finalArry[MAX_SIZE+1] = {0};\n        for (int i = 0; i &lt; k; i++) {\n            finalArry[B[i]] = 1;\n        }\n        printSet(finalArry, n);\n\n    } else {\n        for (int j = i; j &lt; n; j++) {\n            B[q] = j+1;\n            printSubsets(B, n, k, q+1, j+1);\n        }\n    }\n}\n</code></pre>\n\n<p>But I still need to remove one argument from either int q or int i.</p>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1569989810, "post_id": 58195070, "comment_id": 102768879, "body": "<code>return 0</code> Which bit do you think is doing a shift?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1569990644, "post_id": 58195070, "comment_id": 102769007, "body": "&quot;arithLeftShift(0x87654321,4) = 0xF6543218&quot; makes no sense at all. You must have some additional description"}, {"owner": {"reputation": 1, "user_id": 12151730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87bfb41e178291cf1e5bac77d34792ff?s=128&d=identicon&r=PG&f=1", "display_name": "flunky2k", "link": "https://stackoverflow.com/users/12151730/flunky2k"}, "edited": false, "score": 0, "creation_date": 1569990657, "post_id": 58195070, "comment_id": 102769010, "body": "That\u2019s just the question format. If statements and loops are outlawed but I know how those would work. Basically, we tried a couple variations of x &lt;&lt; n, then returning x, either as a new int or keeping x as the variable."}, {"owner": {"reputation": 1, "user_id": 12151730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87bfb41e178291cf1e5bac77d34792ff?s=128&d=identicon&r=PG&f=1", "display_name": "flunky2k", "link": "https://stackoverflow.com/users/12151730/flunky2k"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1569990848, "post_id": 58195070, "comment_id": 102769034, "body": "@4386427, sorry dude but that\u2019s all our instructor gave us. If you search for bits.c the top GitHub results will have the full instructions but they aren\u2019t really relevant."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1569991614, "post_id": 58195070, "comment_id": 102769173, "body": "left shift always inserts 0s. There are no separate arithmetic and logical shifts like in case of right shift"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1569996959, "post_id": 58195070, "comment_id": 102770568, "body": "@flunky2k If this is all your instruction gave you, you need to go back to the instructor and ask for further description of what the function is supposed to do. In C programming left shift of a negative integer is undefined behavior. Arithmetic left shift should doesn&#39;t differ. It requires the zeros are shifted in at least significant bit. The example you gave doesn&#39;t do that. So it&#39;s unclear what the function is supposed to do. It could look like a cyclic shift with the requirement that the sign bit (i.e. most significant bit) shall keep its value."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "is_accepted": false, "score": 0, "last_activity_date": 1569998624, "last_edit_date": 1569998624, "creation_date": 1569993919, "answer_id": 58195638, "question_id": 58195070, "link": "https://stackoverflow.com/questions/58195070/do-an-arithmetic-left-shift-of-x-by-n-bits-c/58195638#58195638", "title": "Do an arithmetic left shift of x by n bits (C)", "body": "<p>Actually, It is not arithmetic left shift.It's your arithLeftShift with your sign bit needn't a left shift. And the high bits needed to be shifted to the low position, It looks like a cycle shift.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    arithLeftShift(0x87654321,4);\n}\nint arithLeftShift(int x,int n)\n{\n    int temp,i;  //define two auto variables,\n    i=x&gt;&gt;(32-n);//i for x's high n bits.\n    temp=x&lt;&lt;n;//temp for x left shift n bits\n\n    if(x&gt;0)//sign bit is 0,\n    {\n        x=temp+i;\n        x=x&gt;0?x:x^0x80000000;//change the x sign bit is 0;\n    }\n    else\n    {//when you do right shift, there will be different with different compliers and your x.\n        if(i&gt;0){//This means when you do right shift, 0 be inserted into high bits.\n        x=temp+i;\n        }\n        else\n        {\n          i=(0x80000000&gt;&gt;(32-n));\n          x=temp+i;\n        }\n        x=x&gt;0?~(x^(~0x80000000)):x;//change the x sign bit is 1\n        printf(\"%x\\n\",x);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219, "user_id": 8198361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6261d06afb1d50c3759e956bf36438f?s=128&d=identicon&r=PG", "display_name": "Lily AB", "link": "https://stackoverflow.com/users/8198361/lily-ab"}, "is_accepted": false, "score": 0, "last_activity_date": 1570023379, "creation_date": 1570023379, "answer_id": 58202698, "question_id": 58195070, "link": "https://stackoverflow.com/questions/58195070/do-an-arithmetic-left-shift-of-x-by-n-bits-c/58202698#58202698", "title": "Do an arithmetic left shift of x by n bits (C)", "body": "<p>Your ask seems to be to \"Rotate\" the integer \"Left\", \"n\" number of times but retain the \"Sign Bit\"(MSB) if set.</p>\n\n<p>One solution would be......</p>\n\n<pre><code>#include &lt;stdio.h&gt;   \n#define INT_BITS 32  \n\nint arithLeftShift(int x, int n) {\n  int res;\n  res = (x &lt;&lt; n | (x &gt;&gt; (INT_BITS - n) &amp; ~(~0 &lt;&lt; n))) | x &amp; (~0 &lt;&lt; (INT_BITS - 1));\n  return res;\n}\n\nint main(){\n\n  int x = 0x87654321;\n  int n = 4;\n\n  printf(\"0x%x\\n\",arithLeftShift(x,n));\n\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>(x &lt;&lt; n)</li>\n</ul>\n\n<p>Left shift x, n times - the last n bits are zero.</p>\n\n<p>(x >> (INT_BITS - n) &amp; ~(~0 &lt;&lt; n))</p>\n\n<p>Right shift x (INT_BITS - n) times to put the first n bits at the correct position and \"AND\" it with ~(~0 &lt;&lt; n) to set the upper bits to zero.This will take care of \"sign extension\", if any.</p>\n\n<p>(x &lt;&lt; n | (x >> (INT_BITS - n) &amp; ~(~0 &lt;&lt; n)))</p>\n\n<p>\"OR\" them to perform the \"Rotate Left\" operation.</p>\n\n<ul>\n<li>x &amp; (~0 &lt;&lt; (INT_BITS - 1)</li>\n</ul>\n\n<p>Left shift \"-1\", 31 times and \"AND\" it with x to check if the MSB of x is set.</p>\n\n<p>(x &lt;&lt; n | (x >> (INT_BITS - n) &amp; ~(~0 &lt;&lt; n))) | x &amp; (~0 &lt;&lt; (INT_BITS - 1))</p>\n\n<p>Finally \"OR\" the above expressions to get your answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 12151730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87bfb41e178291cf1e5bac77d34792ff?s=128&d=identicon&r=PG&f=1", "display_name": "flunky2k", "link": "https://stackoverflow.com/users/12151730/flunky2k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1570023379, "creation_date": 1569989179, "question_id": 58195070, "link": "https://stackoverflow.com/questions/58195070/do-an-arithmetic-left-shift-of-x-by-n-bits-c", "title": "Do an arithmetic left shift of x by n bits (C)", "body": "<p>Me and my group of 4 people are both completely blanking on how to correctly do an arithmetic left shift of an int x, by an amount of n bits. </p>\n\n<p>It is a for a homework problem on bit manipulation for C. We are not allowed to use loops, if statements, or any operations over 15. I've attached the code given below. Also, the simple solution x &lt;&lt; n does not work, even though I'm sure we are missing something obvious. If anyone could help or provide guidance, it would be much appreciated.</p>\n\n<pre><code>    /* \n    * arithLeftShift - Do an arithmetic left shift of x by n bits.\n    *   Can assume that 0 &lt;= n &lt;= 31\n    *   Examples: arithLeftShift(0x87654321,4) = 0xF6543218\n    *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt; !\n    *   Max ops: 15\n    *   Rating: 3\n    */\n    int arithLeftShift(int x, int n) {\n   return 0;\n   }\n</code></pre>\n\n<p>Current error message:</p>\n\n<pre><code>Test arithLeftShift(-2147483648[0x80000000],1[0x1]) failed...\n...Gives 0[0x0]. Should be -2147483648[0x80000000\n</code></pre>\n"}, {"tags": ["c", "printing", "printf", "column-width", "pascals-triangle"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569990295, "post_id": 58195056, "comment_id": 102768948, "body": "Have you read through the documentation for <code>printf()</code>?"}, {"owner": {"reputation": 147, "user_id": 8605821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a62cb8fadf892ce968c17ff64d3734?s=128&d=identicon&r=PG&f=1", "display_name": "ESM", "link": "https://stackoverflow.com/users/8605821/esm"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569994638, "post_id": 58195056, "comment_id": 102769885, "body": "yes. I already know about the asterisk"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569995654, "post_id": 58195056, "comment_id": 102770166, "body": "Well there you go then. Figure out the maximum length needed for each column and use that when printing the numbers."}], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "is_accepted": false, "score": 1, "last_activity_date": 1569994553, "creation_date": 1569994553, "answer_id": 58195730, "question_id": 58195056, "link": "https://stackoverflow.com/questions/58195056/c-dynamic-spacing-when-printing-values/58195730#58195730", "title": "C : Dynamic spacing when printing values", "body": "<p>Dynamic spacing using <code>printf</code> can be achieved using the special character <code>*</code>. </p>\n\n<blockquote>\n  <p>A field width, or precision, or both, may be indicated by an asterisk. In this case, an int argument supplies the field width or precision.</p>\n</blockquote>\n\n<p>Here is a basic testing program. You may want to use the special character <code>-</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int i;\n\n    printf(\"Select your spacing: \");\n    scanf(\"%d\", &amp;i);\n    printf(\"Spacing is at least %d: |%*d|\\n\", i, i, 1);\n    printf(\"Spacing is at least %d: |%-*d|\\n\", i, i, 1);\n    return (0);\n}\n\n</code></pre>\n\n<p>You still need to find the largest number from your problem and to process its width. This has to be done before you print anything. Good luck !</p>\n"}], "owner": {"reputation": 147, "user_id": 8605821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a62cb8fadf892ce968c17ff64d3734?s=128&d=identicon&r=PG&f=1", "display_name": "ESM", "link": "https://stackoverflow.com/users/8605821/esm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569994553, "creation_date": 1569989056, "question_id": 58195056, "link": "https://stackoverflow.com/questions/58195056/c-dynamic-spacing-when-printing-values", "title": "C : Dynamic spacing when printing values", "body": "<p>I'm doing a homework assignment in C where part of it involves printing the values with certain spacing between each integer. For example, using Pascal's Triangle:</p>\n\n<pre><code>  1 \n  1 1 \n  1 2  1 \n  1 3  3  1 \n  1 4  6  4   1 \n  1 5 10 10   5   1 \n  1 6 15 20  15   6  1 \n  1 7 21 35  35  21  7  1 \n  1 8 28 56  70  56 28  8 1 \n  1 9 36 84 126 126 84 36 9 1 \n</code></pre>\n\n<p>The spacing between the integers in each column is exactly as wide as the largest integer +1. What's the best way to approach this?</p>\n"}, {"tags": ["c", "operating-system"], "comments": [{"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 1, "creation_date": 1569987844, "post_id": 58194894, "comment_id": 102768544, "body": "What exactly you expect exit status to be? On POSIX system value of <code>EXIT_FAILURE</code> is <code>1</code> and your child is returning that which is why you get exit status of <code>1</code>. See <a href=\"https://www.gnu.org/software/libc/manual/html_node/Exit-Status.html\" rel=\"nofollow noreferrer\">GNU docs</a>. If you want some custom exit status, in the <code>if (pid ==0)</code> condition, return something else. For example, <code>return 123;</code> would give you an exit status of <code>123</code>."}, {"owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569988083, "post_id": 58194894, "comment_id": 102768584, "body": "@Mihir hi! I made a really simple program to test that this was working, the program just returned the number 50 and if I understand correctly if I used that test file for this then the exit status of the child should read 50? I&#39;m not entirely sure I understand how it works"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 1, "creation_date": 1569989333, "post_id": 58194894, "comment_id": 102768797, "body": "To make it simple, <code>fork()</code> would make a copy of the program you are running from the place where you called it. So after the instant you called <code>fork</code>, 2 processes are running the same code. But in the parent, <code>fork()</code> would return pid of child whereas in child <code>fork</code> would have returned <code>0</code>. So the condition <code>if(pid==0)</code> is true in child and false in parent. Child enters that conditions and only if <code>execvp()</code> fails, you <code>return</code> would get executed. Otherwise <code>execvp</code> would replace your child process and your parent will receive exit status from the execd process."}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 1, "creation_date": 1569989368, "post_id": 58194894, "comment_id": 102768807, "body": "Sorry I didn&#39;t notice you are using <code>exec</code> while writing my first comment."}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 1, "creation_date": 1569989483, "post_id": 58194894, "comment_id": 102768819, "body": "Suppose you passed argument as <code>&#47;bin&#47;ls</code> which is the executable file for <code>ls</code> command, <code>execvp</code> would execute that and your parent will receive exit status of <code>ls</code>. If <code>ls</code> succeeded, your parent shall print <code>0</code> exit status. For testing purposes, you can try passing any arbitrary argument like <code>abc</code>(assuming that doesn&#39;t exists in your system) to you executable. As no <code>abc</code> exists, <code>execvp</code> would fail and your <code>return</code> statement would terminate the child instead."}, {"owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569989803, "post_id": 58194894, "comment_id": 102768878, "body": "@Mihir I see! So as I&#39;ve written it my code isn&#39;t broken, I was just understanding it incorrectly? When I pass in the argument /bin/ls it returns an exit status of 0! I was concerned that for the task I was not getting the argument correctly for exec"}, {"owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569989893, "post_id": 58194894, "comment_id": 102768893, "body": "@Mihir So now I need to have the parent use this exit status to determine if the program exited normally or if it was by some signal"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "reply_to_user": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "edited": false, "score": 0, "creation_date": 1569990083, "post_id": 58194894, "comment_id": 102768915, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/200276/discussion-between-mihir-and-logan\">continue this discussion in chat</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1570002780, "post_id": 58194894, "comment_id": 102772946, "body": "regarding: <code>execvp(argv[1], &amp;argv[1]);        return EXIT_FAILURE;</code>  This fails to inform the user of what failed.  Suggest: <code>execvp(argv[1], &amp;argv[1]);  perror( &quot;execvp failed&quot; );  exit( EXIT_FAILURE );</code> as this will output to <code>stderr</code>, both your error message and the text reason the system thinks the failure occurred."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 1, "creation_date": 1570022872, "post_id": 58194894, "comment_id": 102783020, "body": "What command line arguments are you passing ? Just passing &#39;ls&#39; works OK, returning status of 0."}], "owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569987499, "creation_date": 1569987499, "question_id": 58194894, "link": "https://stackoverflow.com/questions/58194894/taking-in-command-line-arguments-and-processes", "title": "Taking in Command Line Arguments and Processes", "body": "<p>Take in command line arguments like so \"program /path_name -l\" and create both a parent and child process. Fork needs to be used to create the child and the child should replace itself using one of the exec commands. The parent process needs to wait for the child to finish and receive the exit status, then use the exit status to determine if the program exited normally and if the process was killed by some signal. I'm having an issue where my program always gets an exit status of 1. I'm not sure I'm doing the whole command line thing correctly.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main(int argc, char *argv[]){\n    pid_t pid = fork();\n\n    if (pid == -1){\n      perror(\"Fork Failure\");\n      return EXIT_FAILURE;\n    }\n\n    else if ( pid == 0 ){\n       execvp(argv[1], &amp;argv[1]);\n       return EXIT_FAILURE;\n    }\n    int status;\n\n    waitpid(pid, &amp;status, 0);\n\n    if ( WIFEXITED(status) ){\n        int exit_status = WEXITSTATUS(status);\n        printf(\"Exit status is %d\\n\", exit_status);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1569988296, "post_id": 58194666, "comment_id": 102768623, "body": "duplicate: <a href=\"https://stackoverflow.com/questions/16413609/printf-variable-number-of-decimals-in-float\" title=\"printf variable number of decimals in float\">stackoverflow.com/questions/16413609/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1569985285, "creation_date": 1569985285, "answer_id": 58194696, "question_id": 58194666, "link": "https://stackoverflow.com/questions/58194666/print-float-with-actual-float-size/58194696#58194696", "title": "Print float with actual float size", "body": "<p>You can put a <code>*</code> in place of the precision specifier and pass it as a separate parameter:</p>\n\n<pre><code>int accuracy = 10;\nprintf(\"levels of accuracy %.*f\", accuracy, foo);\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7926701"}, "edited": false, "score": 0, "creation_date": 1570075938, "post_id": 58194755, "comment_id": 102801338, "body": "The first seemed a bit easier to understand but I appreciate the response. Ima look into sprintf haven\u2019t used it yet."}], "tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 0, "last_activity_date": 1569986007, "creation_date": 1569986007, "answer_id": 58194755, "question_id": 58194666, "link": "https://stackoverflow.com/questions/58194666/print-float-with-actual-float-size/58194755#58194755", "title": "Print float with actual float size", "body": "<p>Or, build your format string 'on the fly'...</p>\n\n<pre><code>char fmt[99];\nsprintf(fmt,\"levels of accuracy %%.%df\",accuracy);\nprintf(fmt,foo);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7926701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58194696, "answer_count": 2, "score": 1, "last_activity_date": 1569986007, "creation_date": 1569984959, "question_id": 58194666, "link": "https://stackoverflow.com/questions/58194666/print-float-with-actual-float-size", "title": "Print float with actual float size", "body": "<p>Im trying to print out a format of lets say x levels of accuracy meaning it should print if x = 10</p>\n\n<pre><code>float foo;\nprintf(\"levels of accuracy %.10f\", foo);\n</code></pre>\n\n<p>What i've tried:\nI already have the math to convert the x to the desired decimal place.\nsomething like..</p>\n\n<pre><code>int multiplier = 10;\nfloat initialaccuracy = 1.0;\nfloat threshold = initialaccuracy / ((float)(pow(multiplier, accuracy)));\n</code></pre>\n\n<p>What I want to know:</p>\n\n<p>How do i use the format of that x into the printf so if i pick x= 4 it would be %.4f or if i pick 15 it would be %.15f, without hardcoding those values just using it of whatever i pass in?</p>\n"}, {"tags": ["c", "gcc", "linker", "arm", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1570045665, "post_id": 58195246, "comment_id": 102794741, "body": "You can go ahead and accept your own answer. I have upvoted your question and answer, but realize this is an issue would the monitor&#39;s load command."}], "tags": [], "owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "is_accepted": false, "score": 2, "last_activity_date": 1569990692, "creation_date": 1569990692, "answer_id": 58195246, "question_id": 58194568, "link": "https://stackoverflow.com/questions/58194568/missing-elf-symbol-var-when-using-gdb/58195246#58195246", "title": "Missing ELF symbol &quot;var&quot; when using GDB?", "body": "<p>Okay I so found out the issue. I'm writing the answer here in case anyone needs help on this in the future.</p>\n\n<p>I have two firmware platforms. Each one uses a different version of GDB. </p>\n\n<p>Platform A uses: <code>GNU gdb (GNU Tools for ARM Embedded Processors) 7.4.1.20130913-cvs</code>. </p>\n\n<p>Platform B uses: <code>GNU gdb (GNU Tools for Arm Embedded Processors 8-2019-q3-update) 8.3.0.20190703-git</code>.</p>\n\n<p>My first assumption was that the compiler was optimizing the variable away. So I checked my optimization settings and they were set to <code>-O2</code>. I changed it to <code>-O0</code> and recompiled. The issue was still there.</p>\n\n<p>Then I noticed something when I compared both GDB versions output when I execute the <code>load</code> command to flash my elf file into my MCU. <code>v7.4.1</code> would say: </p>\n\n<p><code>\"/build/debug.elf\" has changed; re-reading symbols.</code></p>\n\n<p><code>v8.3.0</code> would say: </p>\n\n<p><code>\"/build/myProject_v53.elf\" has disappeared; keeping its symbols.</code></p>\n\n<p>My elf file is renamed after every build with a build number embedded in the name. This number is incremented every time it's compiled. I have a symlink to the newly generated elf file and it's named as <code>debug.elf</code>. So therefore <code>debug.elf</code> points to the new elf file every time.</p>\n\n<p>In the previous version of GDB, it was fine to use a symlink. GDB didn't care that the filename had changed since it was just a symlink. In the new version of GDB it is not the case. GDB reads the filename the symlink is pointing to to determine if the symbol table has changed.</p>\n\n<p>I fixed this by modifying the command file that is passed to GDB when it's launched.</p>\n\n<p>I launch GDB using the following command in my Makefile:</p>\n\n<p><code>$(GDB) build/debug.elf --command=cfg/launch.gdb</code></p>\n\n<p>Within this file I have a hook for when the load command is executed.</p>\n\n<pre><code>define hook-load\n    mon reset halt\nend\n</code></pre>\n\n<p>This allows me to reset and halt the device after programming the MCU.</p>\n\n<p>I modified it to force the symbol table to update every time I flash the MCU.</p>\n\n<pre><code>define hook-load\n    file build/debug.elf\n    mon reset halt\nend\n</code></pre>\n\n<p>And that was it.</p>\n"}], "owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569990692, "creation_date": 1569984070, "question_id": 58194568, "link": "https://stackoverflow.com/questions/58194568/missing-elf-symbol-var-when-using-gdb", "title": "Missing ELF symbol &quot;var&quot; when using GDB?", "body": "<p>I am able to successfully compile my program using ARM GCC. I am also able to program and run my program successfully. </p>\n\n<p>The problem comes when I'm trying to inspect the contents of a variable. GDB complains that there is a missing symbol for the variable in question.</p>\n\n<p>When I inspect the .lst file from objdump, I can see that there is no symbol for the variable.</p>\n\n<p>Here is my main.c file:</p>\n\n<pre><code>#include \"project.h\"\n\nconst char *my_string = \"tired!\";\n\nint main(void) {\n    while(1)\n    {\n        // do nothing;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When I inspect the contents of <code>my_string</code> or at least print the address of the pointer, I get the following error:</p>\n\n<pre><code>Missing ELF symbol \"my_string\".\n</code></pre>\n\n<p>I tried printing the variables by executing the command: <code>info variables</code>.</p>\n\n<p>The variable <code>my_string</code> is not shown.</p>\n\n<p>I know that the main.c file is being compiled, because I can run some programs within the while loop and if I intentionally add a syntax error then the compiler will complain about it.</p>\n\n<p>If I inspect the assembler file, I can see the variable <code>my_string</code>.</p>\n\n<p>I understand that this question and issue is kind of vague, so if you need more information then let me know what to inspect. I'm trying to find some direction on where I should be looking. Thank you.</p>\n"}, {"tags": ["c++", "c", "base"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1569987472, "post_id": 58194451, "comment_id": 102768480, "body": "Is this C or C++?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569987566, "post_id": 58194451, "comment_id": 102768497, "body": "Do you want to also handle <code>INT_MIN</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569987665, "post_id": 58194451, "comment_id": 102768513, "body": "&quot;and that works fine&quot; --&gt; Note current code fails to print anything if <code>num == 0</code>."}, {"owner": {"reputation": 591, "user_id": 7396848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e48bf17668bfd547ef2e6aa355a07d51?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/7396848/gar"}, "edited": false, "score": 0, "creation_date": 1570150849, "post_id": 58194451, "comment_id": 102832015, "body": "I programmed it in C"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11847100"}, "is_accepted": false, "score": 0, "last_activity_date": 1569983521, "creation_date": 1569983521, "answer_id": 58194501, "question_id": 58194451, "link": "https://stackoverflow.com/questions/58194451/how-do-i-include-negative-values-for-my-code-number-system-conversion/58194501#58194501", "title": "How do I include negative values for my code? Number System conversion", "body": "<p>You may check if the input is negative. If it is, multiply it by -1 to make a positive value, and after converting that positive value to another base, add that negative sign back.</p>\n"}], "owner": {"reputation": 591, "user_id": 7396848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e48bf17668bfd547ef2e6aa355a07d51?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/7396848/gar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569983521, "creation_date": 1569983164, "question_id": 58194451, "link": "https://stackoverflow.com/questions/58194451/how-do-i-include-negative-values-for-my-code-number-system-conversion", "title": "How do I include negative values for my code? Number System conversion", "body": "<p>I created a program to convert any positive decimal (base 10) number to any base and that works fine. How can I implement it to account for negative decimals?</p>\n\n<pre><code>int main() {\n\n    int num, base, i, r, digit, p, count = 0;\n\n    char a[100];\n\n    printf(\"Enter a decimal number: \\n\");\n    scanf(\"%d\", &amp;num);\n\n    printf(\"Enter the base to convert to: \\n\");\n    scanf(\"%d\", &amp;base);\n\n    p=num;\n    do {\n        r = p % base;\n        digit = '0' + r;\n\n        if (digit &gt; '9')\n            digit = digit+7;\n        a[count]=digit;\n        count++;\n        p=p/base;\n    } while (p!=0);\n\n    printf(\"\\n%d in base %d is: \\n\",num, base);\n\n    for (i=count-1;i&gt;=0;--i)\n        printf(\"%c\",a[i]);\n\n    printf(\".\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 12117182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9322ec70711bcf00e9a8fcba1bf2af?s=128&d=identicon&r=PG&f=1", "display_name": "BlackPearl", "link": "https://stackoverflow.com/users/12117182/blackpearl"}, "edited": false, "score": 0, "creation_date": 1569997519, "post_id": 58194484, "comment_id": 102770744, "body": "Thank you very much! Using the strncpy function indeed looks like the safer option.  Is it possible to tell which exact variable is overflown leading to the secret file being returned? I have difficulties understanding what is happening on the stack frame leading to this behavior of the program."}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "reply_to_user": {"reputation": 15, "user_id": 12117182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9322ec70711bcf00e9a8fcba1bf2af?s=128&d=identicon&r=PG&f=1", "display_name": "BlackPearl", "link": "https://stackoverflow.com/users/12117182/blackpearl"}, "edited": false, "score": 0, "creation_date": 1570010021, "post_id": 58194484, "comment_id": 102776423, "body": "Your best friend here is a debugger, but looking at your program, it seems me that <code>strcpy(pass, str);</code> is the villain"}], "tags": [], "owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "is_accepted": true, "score": 1, "last_activity_date": 1569983416, "creation_date": 1569983416, "answer_id": 58194484, "question_id": 58194423, "link": "https://stackoverflow.com/questions/58194423/buffer-overflow-in-simple-c-program/58194484#58194484", "title": "Buffer-Overflow in simple C program", "body": "<p>Strings in c must have the last char as being '\\0' (null terminator). This means that, when you do an allocation like this:</p>\n\n<pre><code>char pass[15];\n</code></pre>\n\n<p>you are indeed allocation 14 characters and 1 for null terminator.</p>\n\n<p><code>strcpy</code> works based on this. If your strings does not have a terminator you will get an buffer overflow.</p>\n\n<p>Looking at the password of 15 1's it becomes clear that you are not letting space to put a null terminator</p>\n\n<p>To avoid that, start using <a href=\"http://man7.org/linux/man-pages/man3/strcpy.3.html\" rel=\"nofollow noreferrer\">strncpy</a> function and its family</p>\n"}], "owner": {"reputation": 15, "user_id": 12117182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9322ec70711bcf00e9a8fcba1bf2af?s=128&d=identicon&r=PG&f=1", "display_name": "BlackPearl", "link": "https://stackoverflow.com/users/12117182/blackpearl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58194484, "answer_count": 1, "score": 0, "last_activity_date": 1570480195, "creation_date": 1569982858, "last_edit_date": 1570480195, "question_id": 58194423, "link": "https://stackoverflow.com/questions/58194423/buffer-overflow-in-simple-c-program", "title": "Buffer-Overflow in simple C program", "body": "<p>I wrote a C program which checks if a certain password is entered and returns a file called Secret when the password is correct (at least that 's what it is supposed to do). \nDuring testing I found that it is not behaving as intended when entering exactly 15 times the number 1 (111111111111111) as input, the file Secret is shown even tough this is not the password stored in the file. </p>\n\n<p>I added the sanitize method which removes all non alphabetic characters but apparently that did not fix it. </p>\n\n<p>I do not really understand why I get an Overflow and which variable(s) (and their memory) are affected. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1569987558, "post_id": 58194407, "comment_id": 102768493, "body": "Are you trying to produce a <code>0</code> or <code>1</code> in <code>p[0]</code>? Because <code>sequence[1] + sequence[3] + sequence[5] + sequence[7]</code> could be as high as 4."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12151117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa38803d77020544a8a08dee47f0757b?s=128&d=identicon&r=PG&f=1", "display_name": "Stayalive", "link": "https://stackoverflow.com/users/12151117/stayalive"}, "edited": false, "score": 0, "creation_date": 1569985104, "post_id": 58194622, "comment_id": 102768117, "body": "Using C, Ok it works but i get a non glyph character values"}], "tags": [], "owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "is_accepted": true, "score": 0, "last_activity_date": 1569984627, "creation_date": 1569984627, "answer_id": 58194622, "question_id": 58194407, "link": "https://stackoverflow.com/questions/58194407/adding-parity-to-binary-in-other-words-hamming-code/58194622#58194622", "title": "Adding parity to binary in other words Hamming code", "body": "<p>I don't know what language you're using but it seems to use 0-based array indexing.\nHowever, you are indexing <code>arr</code> from <code>arr[1]</code> to <code>arr[8]</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 12151117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa38803d77020544a8a08dee47f0757b?s=128&d=identicon&r=PG&f=1", "display_name": "Stayalive", "link": "https://stackoverflow.com/users/12151117/stayalive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58194622, "answer_count": 1, "score": 0, "last_activity_date": 1569986755, "creation_date": 1569982734, "last_edit_date": 1569986755, "question_id": 58194407, "link": "https://stackoverflow.com/questions/58194407/adding-parity-to-binary-in-other-words-hamming-code", "title": "Adding parity to binary in other words Hamming code", "body": "<p>I have a binary number of 01000001\nI would like to add 4 parity numbers to that binary code.\nI have an array of 8 bits unsigned char arr[8];\neach index has digit of the bit\nex:\narr[0] = 0</p>\n\n<p>Using hammingcode so it should be 12 digits with the parity (8 + 4parity)</p>\n\n<p>p[0] = sequence[10] + sequence[8] + sequence[6] + sequence[4] + sequence[2] </p>\n\n<pre><code>\nWhat i'm getting is 1110 and it should be 1001 for parity\n</code></pre>\n"}, {"tags": ["c", "switch-statement"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12027967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211633827040546/picture?type=large", "display_name": "Frank Weirich", "link": "https://stackoverflow.com/users/12027967/frank-weirich"}, "edited": false, "score": 0, "creation_date": 1570056767, "post_id": 58195968, "comment_id": 102798056, "body": "Sabin, thank you so much. that helped and made the program run great. didn&#39;t know about the while statement but feel good at least the rest seemed good. Thanks again"}], "tags": [], "owner": {"reputation": 40, "user_id": 11706603, "user_type": "registered", "profile_image": "https://graph.facebook.com/2428489393861456/picture?type=large", "display_name": "Sabin Harnagea", "link": "https://stackoverflow.com/users/11706603/sabin-harnagea"}, "is_accepted": false, "score": 0, "last_activity_date": 1569996029, "creation_date": 1569996029, "answer_id": 58195968, "question_id": 58194374, "link": "https://stackoverflow.com/questions/58194374/how-to-add-selections-together-using-using-switch-statement-in-c/58195968#58195968", "title": "How to add selections together using using switch statement in C?", "body": "<p>Switch statement is not a loop statement, it is done only once. In order to enter into the switch statement multiple times you can put it in a loop statement. And do not forget to add an exit condition. For example let's say that the end condition will be to introduce the value 8:</p>\n\n<pre><code>printf(\"Please make a selection: \");\nscanf(\"%i\", &amp;selection);\n\nwhile(selection != 8)\n{\n    switch(selection)\n    {\n    /*your code*/\n    }\n    printf(\"Please make another selection: \");\n    scanf(\"%i\", &amp;selection)\n}\n/*I think there is no need for the \"case 8:\" in your code*/\nprintf(\"Thank you for your order. \\n\");\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12027967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211633827040546/picture?type=large", "display_name": "Frank Weirich", "link": "https://stackoverflow.com/users/12027967/frank-weirich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569996029, "creation_date": 1569982363, "question_id": 58194374, "link": "https://stackoverflow.com/questions/58194374/how-to-add-selections-together-using-using-switch-statement-in-c", "title": "How to add selections together using using switch statement in C?", "body": "<p>I have wrote out most of my program but I must be missing something in it. I wrote out a menu and list the items to choose and wrote out a switch statement to run the choices. How do I get it to add the choices together to give a total amount? Right now it asks for the two choices(will change this to 3 later)and only runs the amount for the first choice after the two choices are entered. Not sure what is wrong.</p>\n\n<pre><code>printf(\"1. Hamburger        $%.2lf \\n\", Hamburger_Price);\nprintf(\"2. Cheeseburger     $%.2lf \\n\", Cheeseburger_Price);\nprintf(\"3. Chicken Sandwich $%.2lf \\n\", Chicken_Sandwich_Price);\nprintf(\"4. Fries            $%.2lf \\n\", Fries_Price);\nprintf(\"5. Onion Rings      $%.2lf \\n\", Onion_Rings_Price);\nprintf(\"6. Soda             $%.2lf \\n\", Soda_Price);\nprintf(\"7. Milkshake        $%.2lf \\n\", Milkshake_Price);\nprintf(\"8. Exit\\n\\n\");\n\nprintf(\"Please make a selection: \");\nscanf(\"%i\", &amp;selection);\n\n\nswitch(selection)\n{\ncase 1:\ntotalprice += Hamburger_Price;\nbreak;\n\ncase 2:\ntotalprice += Cheeseburger_Price;\nbreak;\n\ncase 3:\ntotalprice += Chicken_Sandwich_Price;\nbreak;\n\ncase 4:\ntotalprice += Fries_Price;\nbreak;\n\ncase 5:\ntotalprice += Onion_Rings_Price;\nbreak;\n\ncase 6:\ntotalprice += Soda_Price;\nbreak;\n\ncase 7:\ntotalprice += Milkshake_Price;\nbreak;\n\ncase 8:\nprintf(\"Thank you for your order. \\n\");\nbreak;\n\ndefault:\nprintf(\"Sorry we dont have that. \\n\");\n}\n\nprintf(\"Please make another selection: \");\nscanf(\"%i\", &amp;selection);\n\n\nprintf(\"Your total comes to $%.2lf \\n\\n\", totalprice);\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 0, "last_activity_date": 1569982908, "creation_date": 1569982908, "answer_id": 58194429, "question_id": 58194308, "link": "https://stackoverflow.com/questions/58194308/how-to-check-wether-the-user-input-is-a-1-digit-or-more-in-c/58194429#58194429", "title": "How to Check wether the user input is a 1 digit or more in C?", "body": "<p>Please, use <code>strptime()</code> to parse date and / or time (or both):</p>\n\n<pre><code>struct tm ltm = {0};\n\nchar buf1[] = \"2011-02-31\";\nchar buf2[] = \"10:15\";\n\nstrptime(buf1, \"%Y-%m-%d\", &amp;ltm);\nstrptime(buf2, \"%H:%M\", &amp;ltm);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": true, "score": 0, "last_activity_date": 1569999608, "creation_date": 1569999608, "answer_id": 58196606, "question_id": 58194308, "link": "https://stackoverflow.com/questions/58194308/how-to-check-wether-the-user-input-is-a-1-digit-or-more-in-c/58196606#58196606", "title": "How to Check wether the user input is a 1 digit or more in C?", "body": "<p><code>scanf()</code> is a bad choice for this kind of input checks, actually it is a bad choice in nearly all places, due to its limited check capabilities.</p>\n\n<p><code>strptime</code> is not available on all systems.</p>\n\n<p>Instead you can use in example:</p>\n\n<ul>\n<li><code>fgets()</code> to read the input from the user.</li>\n<li><code>strtok()</code> to separate the read input into fields.</li>\n<li><code>sscanf()</code> to interpret each separated character string as integer; or <code>atoi()</code>.</li>\n</ul>\n\n<p>Some notes about your source:</p>\n\n<ul>\n<li>Raise the warning level of your compiler to the max. Read all warnings and eliminate their causes.</li>\n<li>Use <code>int main(void)</code> if you don't use parameters. Omitting <code>void</code> is very old style in C, and only correct in C++ and such. In C it means \"I don't care about the number of arguments, don't check calling code.\"</li>\n<li><code>printf()</code> returns a value. If you don't want to use it, show this by <code>(void)printf(...);</code></li>\n<li><code>scanf()</code> returns the number of converted fields. You can use this as a first indicator about the correctness of the input.</li>\n<li><code>h1</code> will receive the converted hour, as you use it later. You can't compare it to a format string.</li>\n<li>Don't write <code>validation == true</code> because it is redundant. Name such variables like <code>isValid</code> and the source will be more readable. <code>validation == false</code> be become <code>!isValid</code>.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 12151413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCifhxsH-NXuegckmIj9EK9akDuvZipUn2vRihz=k-s128", "display_name": "Teasershot", "link": "https://stackoverflow.com/users/12151413/teasershot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58196606, "answer_count": 2, "score": 0, "last_activity_date": 1569999608, "creation_date": 1569981509, "question_id": 58194308, "link": "https://stackoverflow.com/questions/58194308/how-to-check-wether-the-user-input-is-a-1-digit-or-more-in-c", "title": "How to Check wether the user input is a 1 digit or more in C?", "body": "<p>I want to output the difference between the first time and the second time in hours and minutes(24-hour format). Invalid time input e.g., 25:10 or 18:80 should show \"Time format error\". Single digit input should show \"Time interval: NOT VALID\". What I'm trying to do, is to check it in the if condition, if the user input is a 2 digit number, even if the time is for instance, 01:03.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main()\n{\n    int h1, h2, m1, m2;\n    int minuteSum, hours, minutes;\n    char c1;\n    bool validation = true;\n    printf(\"Enter start time: \");\n    scanf(\"%02d%c%02d\", &amp;h1, &amp;c1, &amp;m1);\n    if(h1 != \"%02d\" || m1 != \"%02d\")\n    {\n        validation = false;\n    }\n    printf(\"Enter end time: \");\n    scanf(\"%02d%c%02d\", &amp;h2, &amp;c1, &amp;m2);\n    if(h2 != \"%02d\" || m2 != \"%02d\")\n    {\n        validation = false;\n    }\n\n    if(h1 &gt;= 0 &amp;&amp; h1 &lt; 24 &amp;&amp; m1 &lt; 60 &amp;&amp; m1 &gt;= 0 &amp;&amp; h2 &gt;= 0 &amp;&amp; h2 &lt; 24 &amp;&amp; m2 &lt; 60 &amp;&amp; m2 &gt;= 0 || h1 == 24 &amp;&amp; m1 == 0 || h2 == 24 &amp;&amp; m2 == 0 || validation == true)\n    {\n        h1 = h1 * 60 + m1;\n        h2 = h2 * 60 + m2;\n        if(h1 &lt; h2)\n        {\n            minuteSum = h2 - h1;\n        }\n        else if(h2 &lt; h1)\n        {\n            minuteSum = h1 - h2;\n        }\n        hours = minuteSum / 60;\n        minutes = minuteSum % 60;\n        printf(\"Time interval: %2d:%02d\\n\", hours, minutes);\n    }\n    else if(validation == true)\n    {\n        printf(\"Time format error.\\n\");\n    }\n    else if(validation == false)\n    {\n        printf(\"Time interval: NOT VALID\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569982499, "post_id": 58194305, "comment_id": 102767666, "body": "<a href=\"https://devblogs.microsoft.com/oldnewthing/20090804-00/?p=17233\" rel=\"nofollow noreferrer\">Programming means that sometimes you have to snap two blocks together</a>. Find a &quot;block&quot; that tells you when headphones are inserted, find a &quot;block&quot; that lets you change the volume, and snap them together."}], "answers": [{"comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1569997869, "post_id": 58194487, "comment_id": 102770834, "body": "Most current system <b>can</b> detect plugged-in devices. Whether they do this by measuring the impedance or by a contact operated by the plug doesn&#39; matter. Even my eight year old notebook does this. It stores two different audio levels, one for the built-in speakers and one for the headphones. Both are automatically used. Having said this I should add that the OS is an Arch Linux derivative and not Windows 10, but hey, the hardware detecting exists."}], "tags": [], "owner": {"reputation": 92, "user_id": 1829503, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8357bd66db609292873a83dbac4dce9e?s=128&d=identicon&r=PG", "display_name": "Sarnath Jegadeesan", "link": "https://stackoverflow.com/users/1829503/sarnath-jegadeesan"}, "is_accepted": false, "score": -2, "last_activity_date": 1569983456, "creation_date": 1569983456, "answer_id": 58194487, "question_id": 58194305, "link": "https://stackoverflow.com/questions/58194305/detecting-headphone-jack-insertion-and-changing-volume-settings/58194487#58194487", "title": "Detecting Headphone Jack Insertion and Changing Volume Settings", "body": "<p>What you've found online is right, you can't detect it.</p>\n\n<p>The audio jacks are simple connectors that either send analog signals out or receive them in. They function the same if something is connected to them as when something isn't. They don't have a method for detecting if the hardware is attached or not.</p>\n\n<p>A microphone isn't too bad to detect through software, just listen on the port and if there is no signal at all (no noise) then you can assume that there is nothing connected. The speaker jack is different since you can send sound out all you want and it just won't be heard if there are no speakers attached.</p>\n\n<p><strong>There's just no way to detect if speakers are there or not</strong></p>\n\n<p>It would be different if there were a method for measuring continuity through the speaker jack, but there isn't.</p>\n\n<p>To give you some more read... Take a look here <a href=\"http://stackoverflow.com/questions/33872895/detect-if-headphones-are-plugged-in-or-not-via-c-sharp\">http://stackoverflow.com/questions/33872895/detect-if-headphones-are-plugged-in-or-not-via-c-sharp</a></p>\n\n<p>I hope it helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 12151445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9dd03541756a96113075edffbb54c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Insteadof2", "link": "https://stackoverflow.com/users/12151445/insteadof2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1569983456, "creation_date": 1569981478, "question_id": 58194305, "link": "https://stackoverflow.com/questions/58194305/detecting-headphone-jack-insertion-and-changing-volume-settings", "title": "Detecting Headphone Jack Insertion and Changing Volume Settings", "body": "<p>I would like the volume to change to a set value when I plug in my headphones, preferably using C. I am on Windows 10. I am not sure where to start, I have done some research but haven't gotten anywhere. If you guys could lead me in the right direction that would be great.</p>\n"}, {"tags": ["c", "concurrency", "linux-kernel", "linux-device-driver", "mutex"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 3, "creation_date": 1570003377, "post_id": 58194190, "comment_id": 102773180, "body": "I can only repeat <a href=\"https://stackoverflow.com/questions/58177762/spin-unlock-successful-without-spin-lock-in-kernel-module#comment102742603_58177762\">my comment</a> from your previous question. The verb &quot;must&quot; means that using the function in other way is prohibited and any guarantee is cleared. You could treat this as <b>undefined behavior</b>, which meaning is described in that question: <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\" title=\"undefined unspecified and implementation defined behavior\">stackoverflow.com/questions/2397984/&hellip;</a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570008966, "post_id": 58194190, "comment_id": 102775875, "body": "You don&#39;t know if your code works or not - your code never checks for any error."}, {"owner": {"reputation": 3001, "user_id": 2830324, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e718abdfd920bb3f66d81bbbb10e80f?s=128&d=identicon&r=PG&f=1", "display_name": "md.jamal", "link": "https://stackoverflow.com/users/2830324/md-jamal"}, "edited": false, "score": 0, "creation_date": 1570010373, "post_id": 58194190, "comment_id": 102776611, "body": "The functions do not return anything"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1570027681, "post_id": 58194190, "comment_id": 102786020, "body": "If you want to know why the functions do not do a lot of checking by default, it is because that would slow the system down."}], "owner": {"reputation": 3001, "user_id": 2830324, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e718abdfd920bb3f66d81bbbb10e80f?s=128&d=identicon&r=PG&f=1", "display_name": "md.jamal", "link": "https://stackoverflow.com/users/2830324/md-jamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570002246, "creation_date": 1569980171, "last_edit_date": 1570002246, "question_id": 58194190, "link": "https://stackoverflow.com/questions/58194190/why-mutex-unlock-works-without-being-called-from-the-owner", "title": "why mutex_unlock works without being called from the owner", "body": "<blockquote>\n  <p>The mutex must later on be released by the same task that acquired it.</p>\n</blockquote>\n\n<p>The above line is present in kernel/locking/mutex.c in the definition of mutex_lock.</p>\n\n<p>I am unable to see the same behavior with the sample code. Am I making any mistake. Please check my code below and dmesg.</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/delay.h&gt;\n#include &lt;linux/mutex.h&gt;\n#include &lt;linux/slab.h&gt;\n#include &lt;linux/kthread.h&gt;\n\nMODULE_LICENSE(\"GPL\");\nDEFINE_MUTEX(my_lock);\nstruct task_struct *mythread;\n\nstatic int threadfn(void *data)\n{\n    pr_info(\"Kernel thread running on processor:%d\\n\", smp_processor_id());\n    pr_info(\"Kernel thread unlocking without calling lock on processor:%d\\n\", smp_processor_id());\n    mutex_unlock(&amp;my_lock);\n    pr_info(\"Kernel thread unlocked without calling lock on processor:%d\\n\", smp_processor_id());\n    return 0;\n}\n\nstatic int __init test_hello_init(void)\n{\n    mutex_init(&amp;my_lock);\n    pr_info(\"Init function running on processor:%d\\n\", smp_processor_id());\n    mutex_lock(&amp;my_lock);\n    pr_info(\"Init function locked on processor:%d\\n\", smp_processor_id());\n    mythread = kthread_run(threadfn, NULL, \"mythread\");\n    msleep(8000);\n    pr_info(\"Init function completed on processor:%d\\n\", smp_processor_id());\n    return -1;\n}\n\nstatic void __exit test_hello_exit(void)\n{\n}\n\nmodule_init(test_hello_init);\nmodule_exit(test_hello_exit);\n</code></pre>\n\n<p>dmesg:</p>\n\n<pre><code>[27389.146151] Init function running on processor:5\n[27389.146152] Init function locked on processor:5\n[27389.146351] Kernel thread running on processor:2\n[27389.146352] Kernel thread unlocking without calling lock on processor:2\n[27389.146352] Kernel thread unlocked without calling lock on processor:2\n[27397.385479] Init function completed on processor:5\ninsmod: ERROR: could not insert module ./hello.ko: Operation not permitted\n</code></pre>\n"}, {"tags": ["c", "mutex", "recursive-mutex"], "comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 2, "creation_date": 1569979056, "post_id": 58194042, "comment_id": 102767126, "body": "If you do not use recursive capable mutex, you <i>MUST</i> ensure that your code doesn&#39;t recurse. When you dealing with your own code, this is ease to achieve but when you export libraries you don&#39;t know the code that it will call you, so providing a recursive capable function can be more generic. I can&#39;t see any other use"}, {"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "reply_to_user": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1569979351, "post_id": 58194042, "comment_id": 102767164, "body": "@geckos Well said. In methods like these, I&#39;m having a hard time deciding whether it should be up to the client to ensure synchronized access or if it&#39;s something I should provide. In this instance, it&#39;s code that I will be using, so I think having a non-recursive mutex will do the job."}, {"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1569979791, "post_id": 58194042, "comment_id": 102767243, "body": "If doing API I would export two functions, one supporting recursive and another not. Recursive mutex may have more overhead than the non-recursive ones, but, If I have a problem that is better handled by recursion I would go with recursive mutex until they prove to be a problem. I also heard of a good source that <i>Premature optimization is the root of all evil</i>, if your problem is not recursive, go with non-recursive mutex :)"}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 0, "creation_date": 1569981117, "post_id": 58194130, "comment_id": 102767455, "body": "&quot;The logic that you describe is not, in fact, a recursive mutex.&quot; Maybe I&#39;m misunderstanding you, but isn&#39;t <code>create_synchronized_counter()</code> creating a recursive mutex? &quot;If you actually need to ensure that another thread won&#39;t increment your counter.&quot; The goal was to have the main thread increment the counter three times in succession, without having another thread increment the counter in between. If that isn&#39;t happening as intended, can you describe a scenario where it might not work?"}, {"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 0, "creation_date": 1569981706, "post_id": 58194130, "comment_id": 102767542, "body": "Regarding your second paragraph, please see the edit."}], "tags": [], "owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "is_accepted": false, "score": -1, "last_activity_date": 1569979992, "last_edit_date": 1569979992, "creation_date": 1569979535, "answer_id": 58194130, "question_id": 58194042, "link": "https://stackoverflow.com/questions/58194042/is-this-an-appropriate-use-case-for-a-recursive-mutex/58194130#58194130", "title": "Is this an appropriate use case for a recursive mutex?", "body": "<p>The logic that you describe is not, in fact, a recursive mutex, nor is it an appropriate case for one.</p>\n\n<p>And, if you actually need to ensure that another thread won't increment your counter, I'm sorry to tell you that your logic as-written won't ensure that.</p>\n\n<p>I therefore suggest that you step back from this, clear your head, and re-consider your actual use-case.  I think that confusion about recursive mutexes has led you astray.  It may well be the case that the logic which you now have in <code>synchronized_increment</code> ... in fact, the need for the entire method ... is unnecessary, and the logic which you show in <code>main</code> is all you really need, and it's just a simple variable after all.</p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 0, "creation_date": 1569985264, "post_id": 58194633, "comment_id": 102768150, "body": "Regarding point 1, I <i>was</i> going to ask whether having the data structure manage its own locks would provide a way to avoid exposing the internals, but point 2 conflicts with that design choice. I think I understand the trade-off now: I can either have the calling thread acquire a lock to do bulk operations, or have the data structure provide an API that allows bulk operations, but in both scenarios, only a non-recursive mutex is required. Using a recursive mutex would be overkill when confronted with this alternative design choice."}, {"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 1, "creation_date": 1569985432, "post_id": 58194633, "comment_id": 102768176, "body": "I think I&#39;m leaning towards having the API provide bulk operations so the client doesn&#39;t have to worry about synchronization. Anyhow, thank you for the well-reasoned explanation!"}, {"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 0, "creation_date": 1570021227, "post_id": 58194633, "comment_id": 102782000, "body": "@Anton, if I&#39;m going to provide a method that does bulk pops from a stack, but I want to use the elements I&#39;m popping, I would likely have to return some kind of list. Is this how you imagined it would be done?"}, {"owner": {"reputation": 3030, "user_id": 41704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b9985a245e9ce334a3183a23469fce?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/41704/anton"}, "reply_to_user": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 0, "creation_date": 1570030228, "post_id": 58194633, "comment_id": 102787589, "body": "@asfeynman you could return a list or pass in a function pointer to process the items one at a time as they are popped. It really depends on how you are using this data structure."}, {"owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "edited": false, "score": 0, "creation_date": 1570033940, "post_id": 58194633, "comment_id": 102789460, "body": "@Anton, gotcha."}], "tags": [], "owner": {"reputation": 3030, "user_id": 41704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b9985a245e9ce334a3183a23469fce?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/41704/anton"}, "is_accepted": true, "score": 4, "last_activity_date": 1569984694, "creation_date": 1569984694, "answer_id": 58194633, "question_id": 58194042, "link": "https://stackoverflow.com/questions/58194042/is-this-an-appropriate-use-case-for-a-recursive-mutex/58194633#58194633", "title": "Is this an appropriate use case for a recursive mutex?", "body": "<p>Both of your examples - the original <code>synchronized_counter</code> and the stack in your edit - are correct examples of using a recursive mutex, but they would be considered poor API design if you were building a data structure. I'll try to explain why.</p>\n\n<ol>\n<li><p><strong>Exposing internals</strong> - the caller is required to use the same lock that protects internal access to members of the data structure. This opens the possibility to misusing that lock for purposes other than accessing the data structure. That could lead to lock contention - or worse - deadlock.</p></li>\n<li><p><strong>Efficiency</strong> - it's often more efficient to implement a specialized bulk operations like <code>increment_by(n)</code> or <code>pop_many(n)</code>. </p>\n\n<ul>\n<li>First, it allows the data structure to optimize the operations - perhaps the counter can just do <code>count += n</code> or the stack could remove <code>n</code> items from a linked list in one operation. [1]</li>\n<li>Second, you save time by not having to lock/unlock the mutex for every operation.[2]</li>\n</ul></li>\n</ol>\n\n<hr>\n\n<p>Perhaps a better example for using a recursive mutex would be as follows:</p>\n\n<ul>\n<li>I have a class with two methods <code>Foo</code> and <code>Bar</code>.</li>\n<li>The class was designed to be single-threaded.</li>\n<li>Sometimes <code>Foo</code> calls <code>Bar</code>.</li>\n</ul>\n\n<p>I want to make the class thread-safe, so I add a mutex to the class and lock it inside <code>Foo</code> and <code>Bar</code>. Now I need to make sure that <code>Bar</code> can lock the mutex when called from <code>Foo</code>.</p>\n\n<p>One way to solve this without a recursive mutex is to create a private <code>unsynchronized_bar</code> and have both <code>Foo</code> and <code>Bar</code> call it after locking the mutex.</p>\n\n<p>This can get tricky if <code>Foo</code> is a virtual method that can be implemented by a sub-class and used to call <code>Bar</code>, or if <code>Foo</code> calls out to some other part of the program that can call back into <code>Bar</code>. However, if you have code inside critical sections (code protected by a mutex) calling into other arbitrary code, then the behaviour of the program will be hard to understand, and it is easy to cause deadlocks between different threads, even if you use a recursive mutex.</p>\n\n<p>The best advice is to solve concurrency problems through good design rather than fancy synchronization primitives.</p>\n\n<hr>\n\n<p>[1] There are some tricker patterns like \"pop an item, look at it, decide if I pop another one\", but those can be implemented by supplying a predicate to the bulk operation.</p>\n\n<p>[2] Practically speaking locking a mutex you already own should be pretty cheap, but in your example it requires at least a call to an external library function, which cannot be inlined.</p>\n"}], "owner": {"reputation": 370, "user_id": 4959688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1eb1d4395875de881f67efcbbafe0955?s=128&d=identicon&r=PG&f=1", "display_name": "asfeynman", "link": "https://stackoverflow.com/users/4959688/asfeynman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 58194633, "answer_count": 2, "score": 4, "last_activity_date": 1570021051, "creation_date": 1569978640, "last_edit_date": 1570021051, "question_id": 58194042, "link": "https://stackoverflow.com/questions/58194042/is-this-an-appropriate-use-case-for-a-recursive-mutex", "title": "Is this an appropriate use case for a recursive mutex?", "body": "<p>I've heard from various sources\n(<a href=\"http://www.zaval.org/resources/library/butenhof1.html\" rel=\"nofollow noreferrer\">1</a>,\n<a href=\"https://books.google.com/books?id=kCTMFpEcIOwC&amp;pg=PA434#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">2</a>)\nthat one should avoid using recursive mutexes as it may be a sign of a hack or\nbad design. Sometimes, however, I presume they may necessary. In light of that,\nis the following an appropriate use case for a recursive mutex?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// main.c\n// gcc -Wall -Wextra -Wpedantic main.c -pthread\n\n#ifndef _GNU_SOURCE\n#define _GNU_SOURCE\n#endif /* _GNU_SOURCE */\n\n#include &lt;assert.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct synchronized_counter\n{\n    int count;\n    pthread_mutex_t mutex;\n    pthread_mutexattr_t mutexattr;\n} synchronized_counter;\n\nsynchronized_counter* create_synchronized_counter()\n{\n    synchronized_counter* sc_ptr = malloc(sizeof(synchronized_counter));\n    assert(sc_ptr != NULL);\n\n    sc_ptr-&gt;count = 0;\n\n    assert(pthread_mutexattr_init(&amp;sc_ptr-&gt;mutexattr) == 0);\n    assert(pthread_mutexattr_settype(&amp;sc_ptr-&gt;mutexattr, \n        PTHREAD_MUTEX_RECURSIVE) == 0);\n\n    assert(pthread_mutex_init(&amp;sc_ptr-&gt;mutex, &amp;sc_ptr-&gt;mutexattr) == 0);\n\n    return sc_ptr;\n}\n\nvoid synchronized_increment(synchronized_counter* sc_ptr)\n{\n    assert(pthread_mutex_lock(&amp;sc_ptr-&gt;mutex) == 0);\n\n    sc_ptr-&gt;count++;\n\n    assert(pthread_mutex_unlock(&amp;sc_ptr-&gt;mutex) == 0);\n}\n\nint main()\n{\n    synchronized_counter* sc_ptr = create_synchronized_counter();\n\n    // I need to increment this counter three times in succesion without having\n    // another thread increment it in between. Therefore, I acquire a lock\n    // before beginning.\n\n    assert(pthread_mutex_lock(&amp;sc_ptr-&gt;mutex) == 0);\n\n    synchronized_increment(sc_ptr);\n    synchronized_increment(sc_ptr);\n    synchronized_increment(sc_ptr);\n\n    assert(pthread_mutex_unlock(&amp;sc_ptr-&gt;mutex) == 0);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I wanted to ask the question with a simple example, but perhaps it came across as <em>too</em> simple. This is what I had imagined would be a more realistic scenario: I have a stack data structure that will be accessed by multiple threads. In particular, sometimes a thread will be popping n elements from the stack, but it must do so all at once (without another thread pushing or popping from the stack in between). The crux of the design issue is if I should have the client manage locking the stack themselves with a non-recursive mutex, or have the stack provide synchronized, simple methods along with a recursive mutex which the client can use to make multiple atomic transactions that are also synchronized.</p>\n"}, {"tags": ["c", "operating-system"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569977311, "post_id": 58193863, "comment_id": 102766844, "body": "<code>argv[1]</code> is a string; you have to convert it to an integer.  You also need to think about how you create random numbers \u2014 there is no randomization in your code.  Beware \u2014 unless each process sets the seed to a unique value, you will get the same sequence of random numbers from each child.  Why not use a <code>for</code> loop instead of a <code>while</code> loop in <code>childprocess()</code>?  Your <code>printf(&quot;Child %d executes iteration: %d\\n&quot;, i);</code> is wrong \u2014 you have two <code>%</code> conversion specifications and just one argument."}, {"owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569978530, "post_id": 58193863, "comment_id": 102767052, "body": "@JonathanLeffler thanks for pointing out my errors! I&#39;ve converted the string to an integer and I&#39;ve added the second argument to the printf() as well. Is this creating child processes the way I described? I&#39;ve never done something like this before and I&#39;ll be sure to keep the random number thing in mind. Currently I get the error &quot;line 5: syntax error near unexpected token `(&#39; &quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569978864, "post_id": 58193863, "comment_id": 102767095, "body": "In the code shown in the question, line 5 is the <code>int main(int argc, char **argv) {</code> line.  It is not remotely clear why that would generate a syntax error \u2014 you&#39;ve got to be trying rather hard to get that. Check that you&#39;re compiling the source you have been editing.  <a href=\"https://stackoverflow.com/users/3062014/user3062014\">user3062014</a> correctly points out that you&#39;ve not use <code>getpid()</code> enough. For the randomization, it&#39;s probably sufficient to use the child PID to initialize <code>srand()</code> \u2014 you can then use <code>rand()</code> to generate distinct numbers. Think about using <code>rand() % 100</code> to limit the loops."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569979043, "post_id": 58193863, "comment_id": 102767124, "body": "Be wary of making changes to your question that make any answers irrelevant.  In this context, probably you could have the original code (to make the answer relevant again; it doesn&#39;t matter much about the comments) and the revised code.  If your program is bigger, it gets trickier.  I&#39;ve done it for you this time \u2014 please remember for the future."}, {"owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569979472, "post_id": 58193863, "comment_id": 102767184, "body": "@JonathanLeffler I appreciate the advice on that! I thought it might make things clearer but that makes sense! Could it maybe be that I&#39;ve declared the function &#39;childprocess&#39; to be void where it shouldn&#39;t be? I see I had thought that setting &#39;pid_t pid = getpid()&#39; and then using that would work. Thank you for the help on this!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569979886, "post_id": 58193863, "comment_id": 102767259, "body": "I have hacked the modified code a bit, adding the function declaration before <code>main()</code>.  The return type of <code>void</code> is fine; it doesn&#39;t have a value to return.  I added code to initialize random numbers (<code>srand()</code> \u2014 see <a href=\"https://stackoverflow.com/questions/7343833/srand-why-call-it-only-once/\"><code>srand()</code> \u2014 why call it only once?</a> and realize that its rule doesn&#39;t apply to your code if you want the children to behave differently from each other), and then do a random number of iterations (I used <code>int max = srand() % 100;</code> so I didn&#39;t have millions of iterations printing).  It works OK with that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569979959, "post_id": 58193863, "comment_id": 102767275, "body": "I also checked that <code>argv[1]</code> was provided \u2014 producing a usage message if not."}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 3062014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eu5rN.jpg?s=128&g=1", "display_name": "user3062014", "link": "https://stackoverflow.com/users/3062014/user3062014"}, "is_accepted": false, "score": 3, "last_activity_date": 1569977566, "creation_date": 1569977566, "answer_id": 58193950, "question_id": 58193863, "link": "https://stackoverflow.com/questions/58193863/spawning-an-arbitrary-number-of-child-processes/58193950#58193950", "title": "Spawning an arbitrary number of child processes?", "body": "<p>The pid value is always that of the parent. It would fork, but print out the same number. Try:</p>\n\n<pre><code>printf(\"Child %d is born, my PID is %d\\n\", counter, getpid());\n</code></pre>\n\n<p>to get the child's PID after the fork.\nThe <code>printf(\"Child %d executes iteration: %d\\n\", i);</code> bit has 2 %, but only one value. Try</p>\n\n<pre><code>printf(\"Child %d executes iteration: %d\\n\", num, i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "edited": false, "score": 0, "creation_date": 1569980793, "post_id": 58194202, "comment_id": 102767410, "body": "I also forgot the function declaration which would&#39;ve caused more issues so thank you for pointing that out, I see how srand() works with the code from the link you provided! My code required quite a few tweaks but I at least feel I was on the right track! This makes sense to me now thank you so much for your help!"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1569980272, "creation_date": 1569980272, "answer_id": 58194202, "question_id": 58193863, "link": "https://stackoverflow.com/questions/58193863/spawning-an-arbitrary-number-of-child-processes/58194202#58194202", "title": "Spawning an arbitrary number of child processes?", "body": "<p>Here's a simple adaptation of the 'Amended Code' (as of <a href=\"https://stackoverflow.com/posts/58193863/revisions\">revision 4</a>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid childprocess(int num);\n\nint main(int argc, char **argv)\n{\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: %s num-procs\\n\", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n    int counter;\n    pid_t pid = getpid();\n    int x = atoi(argv[1]);\n\n    printf(\"Parent Process, my PID is %d\\n\", pid);\n\n    for (counter = 1; counter &lt;= x; counter++)\n    {\n        if (!fork())\n        {\n            printf(\"Child %d is born, my PID is %d\\n\", counter, getpid());\n            childprocess(counter);\n            printf(\"Child %d dies\\n\", counter);\n            exit(0);\n        }\n    }\n}\n\nvoid childprocess(int num)\n{\n    srand(getpid());\n    int max = rand() % 100;\n\n    for (int i = 0; i &lt; max; i++)\n    {\n        printf(\"Child %d executes iteration: %d\\n\", num, i);\n    }\n}\n</code></pre>\n\n<p>Sample output (program <code>procs13</code> compiled from <code>procs13.c</code>):</p>\n\n<pre><code>$ procs13 3\nParent Process, my PID is 23487\nChild 1 is born, my PID is 23488\nChild 1 executes iteration: 0\nChild 1 executes iteration: 1\nChild 1 executes iteration: 2\nChild 1 executes iteration: 3\nChild 1 executes iteration: 4\nChild 1 executes iteration: 5\nChild 1 executes iteration: 6\nChild 1 executes iteration: 7\nChild 1 executes iteration: 8\nChild 1 executes iteration: 9\nChild 1 executes iteration: 10\nChild 1 executes iteration: 11\nChild 1 executes iteration: 12\nChild 1 executes iteration: 13\nChild 1 executes iteration: 14\nChild 1 executes iteration: 15\nChild 1 dies\nChild 2 is born, my PID is 23489\nChild 2 executes iteration: 0\nChild 2 executes iteration: 1\nChild 2 executes iteration: 2\nChild 2 executes iteration: 3\nChild 2 executes iteration: 4\nChild 2 executes iteration: 5\nChild 2 executes iteration: 6\nChild 2 executes iteration: 7\nChild 2 executes iteration: 8\nChild 2 executes iteration: 9\nChild 2 executes iteration: 10\nChild 2 executes iteration: 11\nChild 2 executes iteration: 12\nChild 2 executes iteration: 13\nChild 2 executes iteration: 14\nChild 2 executes iteration: 15\nChild 2 executes iteration: 16\nChild 2 executes iteration: 17\nChild 2 executes iteration: 18\nChild 2 executes iteration: 19\nChild 2 executes iteration: 20\nChild 2 executes iteration: 21\nChild 2 executes iteration: 22\nChild 2 dies\nChild 3 is born, my PID is 23490\nChild 3 executes iteration: 0\nChild 3 executes iteration: 1\nChild 3 executes iteration: 2\nChild 3 executes iteration: 3\nChild 3 executes iteration: 4\nChild 3 executes iteration: 5\nChild 3 executes iteration: 6\nChild 3 executes iteration: 7\nChild 3 executes iteration: 8\nChild 3 executes iteration: 9\nChild 3 executes iteration: 10\nChild 3 executes iteration: 11\nChild 3 executes iteration: 12\nChild 3 executes iteration: 13\nChild 3 executes iteration: 14\nChild 3 executes iteration: 15\nChild 3 executes iteration: 16\nChild 3 executes iteration: 17\nChild 3 executes iteration: 18\nChild 3 executes iteration: 19\nChild 3 executes iteration: 20\nChild 3 executes iteration: 21\nChild 3 executes iteration: 22\nChild 3 executes iteration: 23\nChild 3 executes iteration: 24\nChild 3 executes iteration: 25\nChild 3 executes iteration: 26\nChild 3 executes iteration: 27\nChild 3 executes iteration: 28\nChild 3 executes iteration: 29\nChild 3 dies\n$\n</code></pre>\n\n<p>I'm a little surprised that there is no concurrency shown, but that's how it worked on my Mac running macOS Mojave 10.14.6.  Larger numbers in the iterations would probably give interleaved execution of the child processes.  The parent process should probably use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html\" rel=\"nofollow noreferrer\"><code>wait()</code></a> or\n<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html\" rel=\"nofollow noreferrer\"><code>waitpid()</code></a> to wait for the children to die.</p>\n"}], "owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58194202, "answer_count": 2, "score": 1, "last_activity_date": 1570596106, "creation_date": 1569976652, "last_edit_date": 1570596106, "question_id": 58193863, "link": "https://stackoverflow.com/questions/58193863/spawning-an-arbitrary-number-of-child-processes", "title": "Spawning an arbitrary number of child processes?", "body": "<p>I need some help with programming in C, I have a question which wants me to create some arbitrary number of child processes, each of which executes a child process function. The number of child processes is supposed to be supplied as a command line argument, and in the child process function it should run a random number of iterations through a simple loop then print \"Child X\" where X is provided as an argument. If anyone could help guide me through this that would be awesome!</p>\n\n<p>I tried this but I don't understand how processes work in C.</p>\n\n<h3>Amended code</h3>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n\nint main(int argc, char **argv) {\n\n  int counter;\n  pid_t pid = getpid();\n  int x = atoi(argv[1]);  // Changed (added)\n\n  printf(\"Parent Process, my PID is %d\\n\", pid);\n\n  for(counter=1;counter &lt;= x;counter++){  // Changed\n    if(!fork()){\n      printf(\"Child %d is born, my PID is %d\\n\", counter, getpid());  // Changed\n      childprocess(counter);\n      printf(\"Child %d dies\\n\", counter);\n      exit(0);\n    }\n  }\n}\n\nvoid childprocess(int num){\n  int i = 1;\n\n  while(i &lt;= num){\n    printf(\"Child %d executes iteration: %d\\n\", num, i);  // Changed\n    i++;\n  }\n\n}\n</code></pre>\n\n<h3>Original code</h3>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;unistd.h&gt;\n\n    int main(int argc, char **argv) {\n\n      int counter;\n      pid_t pid = getpid();\n\n      printf(\"Parent Process, my PID is %d\\n\", pid);\n\n      for(counter=1;counter &lt;= argv[1];counter++){\n        if(!fork()){\n          printf(\"Child %d is born, my PID is %d\\n\", counter, pid);\n          childprocess(counter);\n          printf(\"Child %d dies\\n\", counter);\n          exit(0);\n        }\n      }\n    }\n\n    void childprocess(int num){\n      int i = 1;\n\n      while(i &lt;= num){\n        printf(\"Child %d executes iteration: %d\\n\", i);\n        i++;\n      }\n\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 2, "creation_date": 1569973130, "post_id": 58193523, "comment_id": 102766180, "body": "upper bit is 7, lower bit is 0. you&#39;re shifting too much with your for loop"}], "answers": [{"comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1569999835, "post_id": 58193568, "comment_id": 102771601, "body": "<code>for(int i = 8; i--; ){</code> is bad and hacking style. Please use <code>for (int i = 7; i &gt;=0; i--) {</code>! Or if you have a constant for your magic number, <code>for (int i = BITS_PER_BYTE - 1; i &gt;= 0; i--) {</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570013494, "post_id": 58193568, "comment_id": 102777963, "body": "@the busybee, Magic numbers are bad, sure (but I&#39;m not sure using a constant adds clarity here). The other change is outright bad. though. It&#39;s equivalent but more complicated code. Ease of reading is key is good software, so an easily-readable and easily-recognizable common idiom trumps longer and harder to recognize code every day, even if newcomers must spend two seconds learning it."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570014037, "post_id": 58193568, "comment_id": 102778200, "body": "C&#39;s for loop is incredibly hard to read to begin with. For example, it&#39;s super hard to see the differences between <code>for (int i = BITS_PER_BYTE - 1; i &gt;= 0; i--)</code>, <code>for (int i = BITS_PER_BYTE; i &gt;= 0; i--)</code>, <code>for (int i = BITS_PER_BYTE - 1; i &gt; 0; i--)</code>, and <code>for (int i = BITS_PER_BYTE - 1; i &gt;= 0; i--)</code> at a glance. Keeping it to a minimum is key. (Maximizing its use by using multiple variables or in some other way that can&#39;t possibly be confused for an idiom would also be ok. You&#39;d lose the advantage of quick recognition, but it won&#39;t be mistaken for the wrong thing.)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570014384, "post_id": 58193568, "comment_id": 102778382, "body": "Relying on zero being false is good thing. And relying on the value returned by postdecrement isn&#39;t bad -- there&#39;s literally no other reason for its existence! (I&#39;d instantly wonder if you made a mistake when I look at your code that uselessly uses postdecrement. Bad! Don&#39;t make the reader wonder such things.)"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570021161, "post_id": 58193568, "comment_id": 102781960, "body": "The reason for pre- and postdecrement returning a value was in the dark ages of K&amp;R-C when processor power was really low and the compilers primitive. Working on safety-related projects in C for decades gives me enough reasons to reject such hackish style."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570021168, "post_id": 58193568, "comment_id": 102781968, "body": "Using <code>i--</code> for two separated things (decrement [and relying on the knowledge what value is has] and checking for zero) is asking for desaster. Additionally it misleads beginners to think that <code>if (!ptr)</code> is good style, which it is <b>not</b>. Source code has to be clear and upfront understandable for the swift and/or casual reader. And you are right, &quot;don&#39;t make the reader wonder&quot;: Don&#39;t make her wonder what <code>i--</code> has to do at a place where a boolean should be."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570021237, "post_id": 58193568, "comment_id": 102782011, "body": "@the busybee, <code>if (!ptr)</code> <b>is</b> good style. Needless extra clutter just reduces readability."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570021291, "post_id": 58193568, "comment_id": 102782030, "body": "Re &quot;<i>Don&#39;t make her wonder what i-- has to do at a place where a boolean should be.</i>&quot;, Your point makes no sense. <code>i--</code> returns a boolean. Besides, that whole idea about idoms is that you don&#39;t have to wonder. It&#39;s instantly obvious because you&#39;ve seen it a million times before."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570021374, "post_id": 58193568, "comment_id": 102782070, "body": "I found it interesting that you didn&#39;t mention that two of the four snippets I posted were identical. Again, long complicated for loops are very hard to read, and that&#39;s the very definition of bad programming."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570022385, "post_id": 58193568, "comment_id": 102782720, "body": "<code>i--</code> returns the type of <code>i</code>, not a boolean. It&#39;s a design error of C that scalar types are silently cast to boolean. And it&#39;s a design error that the (controlling) expressions for <code>if</code> and loops is a scalar type. Both are from dark histories kept for compatibilty, I&#39;m afraid. But let&#39;s stop this discussion as none of us will give up."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570023899, "post_id": 58193568, "comment_id": 102783689, "body": "@the busybee, <code>i--</code> returning an <code>int</code> doesn&#39;t preclude from also being a boolean value (a value that either true or false). This is not a &quot;dark past&quot; thing. It is found in both old (C, Perl) and new (JavaScript, Python) languages."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1569974140, "last_edit_date": 1569974140, "creation_date": 1569973261, "answer_id": 58193568, "question_id": 58193523, "link": "https://stackoverflow.com/questions/58193523/converting-ascii-string-into-binary-to-add-parity/58193568#58193568", "title": "Converting ASCII string into binary to add Parity", "body": "<p><code>i</code> is off by one, so you are accessing elements <code>bitC[8]</code> to <code>bitC[1]</code> (even though <code>bitC[8]</code> is out of bounds), and you are printing bits 8 to 1 instead of bits 7 to 0.</p>\n\n<p>Replace</p>\n\n<pre><code>for(int i = 8; i &gt;= 1; i--){\n</code></pre>\n\n<p>with </p>\n\n<pre><code>for(int i = 8; i--; ){\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12151117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa38803d77020544a8a08dee47f0757b?s=128&d=identicon&r=PG&f=1", "display_name": "Stayalive", "link": "https://stackoverflow.com/users/12151117/stayalive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58193568, "answer_count": 1, "score": 2, "last_activity_date": 1569980044, "creation_date": 1569972868, "last_edit_date": 1569980044, "question_id": 58193523, "link": "https://stackoverflow.com/questions/58193523/converting-ascii-string-into-binary-to-add-parity", "title": "Converting ASCII string into binary to add Parity", "body": "<p>I'm trying to convert ASCII strings into Binary so i can add Parity to it (Hamming Code). But the output is not right at all.</p>\n\n<p>If i enter 'A' on the input it should return:\n01000001\nand i've tried it with 'B' but it doesn't return that</p>\n\n<pre><code>unsigned char bits[8];\nfor(int i = 8; i &gt;= 1; i--){\n</code></pre>\n\n<p>i expect the output to be 01000001 for 'A' \nbut the actual output is 00100000\nSame for ABC or B or C</p>\n"}, {"tags": ["c", "malloc", "calloc"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569978105, "post_id": 58193478, "comment_id": 102766984, "body": "<code>malloc&#47;calloc&#47;realloc</code> will return a minimum allocation size that meets all alignment requirements and guarantees the number of bytes you requested are available for use. <code>malloc</code> may return a larger block of memory than you requested. That does NOT mean you can use that memory, but does explain why you do not immediately SefFault. When you use more memory than you promised the compiler you would, you invoke Undefined Behavior and all bets are off on how your program behaves from that point onward."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 12132893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8942998cb74a46f0ca3b11259d0350ba?s=128&d=identicon&r=PG&f=1", "display_name": "Lily Dresden", "link": "https://stackoverflow.com/users/12132893/lily-dresden"}, "is_accepted": true, "score": 0, "last_activity_date": 1569975722, "last_edit_date": 1569975722, "creation_date": 1569975072, "answer_id": 58193744, "question_id": 58193478, "link": "https://stackoverflow.com/questions/58193478/generating-a-matrix-with-malloc-and-calloc-causing-confusing-behavior/58193744#58193744", "title": "Generating a matrix with malloc and calloc causing confusing behavior", "body": "<p>If I am reading this correctly, what you are doing is simply reading memory outside of the allocated arrays. This may cause a segmentation fault, but not always. This site gives some examples: <a href=\"https://www.geeksforgeeks.org/accessing-array-bounds-ccpp/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/accessing-array-bounds-ccpp/</a></p>\n\n<p>In general, when you ask C to read from memory, you give it a physical address. If that address exists and you are allowed to read from it, it will give you back the data stored there regardless of whether it is in your array. These could be 0 values or garbage data from variables you or other programs have written there. In your last example where you see the repeating values, it's because your program allocated memory for matrix[i] and matrix[i+1] consecutively. Therefore, when you start to read past the bounds of matrix[i], you start to read the memory from matrix[i+1].</p>\n\n<p>Also, you mentioned that it was storing doubles outside of the bounds, but that's not quite correct. C does not know what type of data was supposed to be stored there, it only knows to interpret it as doubles because you told it to. If you cast everything as chars, it will read and print chars instead of doubles.</p>\n"}], "owner": {"reputation": 25, "user_id": 11979487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98d5e01969e95362a9332ab98427d520?s=128&d=identicon&r=PG&f=1", "display_name": "J Dub", "link": "https://stackoverflow.com/users/11979487/j-dub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 58193744, "answer_count": 1, "score": 1, "last_activity_date": 1569975722, "creation_date": 1569972513, "question_id": 58193478, "link": "https://stackoverflow.com/questions/58193478/generating-a-matrix-with-malloc-and-calloc-causing-confusing-behavior", "title": "Generating a matrix with malloc and calloc causing confusing behavior", "body": "<p>I've been working on a little project that deals with matrix computations in C.</p>\n\n<p>I was doing some testing against the code I wrote and came across some incredibly confusing behaviour. </p>\n\n<p><strong>Before I get into the question, here is some of the relevant code.</strong></p>\n\n<p>Matrix Definition:</p>\n\n<pre><code>typedef struct\n{\n    double **matrix;\n    int rows;\n    int cols;\n    int dimensions[2];\n    char *str_dims;\n} Matrix;\n</code></pre>\n\n<p>When I initialize a matrix I allocate memory using malloc for the number of rows, then iterate over the rows allocating memory for all of the columns using calloc so they are 0 initialized.</p>\n\n<pre><code>void init_matrix(Matrix *x, int i, int j)\n{\n    x-&gt;matrix = malloc(x-&gt;rows * sizeof(double *));\n    for (int i = 0; i &lt; x-&gt;rows; i++)\n        x-&gt;matrix[i] = calloc(x-&gt;cols, sizeof(double));\n}\n</code></pre>\n\n<p>I also have the functionality of generating a random matrix, </p>\n\n<pre><code>Matrix get_rand_matrix(int i, int j)\n{\n    Matrix x;\n    init_matrix(&amp;x, i, j);\n    srand(time(NULL));\n    for(int i = 0; i &lt; x.rows; i++)\n        for(int j = 0; j &lt; x.cols; j++)\n            x.matrix[i][j] = rand();\n    return x;\n}\n</code></pre>\n\n<p><strong>Confusing Behaviour</strong></p>\n\n<p>Asides from the code most likely being pretty horrendous by the standards of the ancients, I had thought that it was working properly. However, by luck of the draw, when I was doing some testing (printing the matrix) I mindlessly incremented the loop responsible for iterating over the columns of the matrix by 1 and this was the output that I received. (Formatted for your viewing pleasure.)</p>\n\n<pre><code>+-------------+--------------+-----+\n|739979002.00 | 1854570721.00| 0.00|                                                                                                                                                    \n|130427701.00 | 402893063.00 | 0.00|                                                                                                                                                     \n|1973118592.00| 135400441.00 | 0.00|                                                                                                                                                    \n|1707001127.00| 1093842609.00| 0.00|\n+----------------------------------+\n</code></pre>\n\n<p>Where the expected output would have been,</p>\n\n<pre><code>+-------------+--------------+\n|739979002.00 | 1854570721.00|                                                                                                                                                    \n|130427701.00 | 402893063.00 |                                                                                                                                                     \n|1973118592.00| 135400441.00 |                                                                                                                                                    \n|1707001127.00| 1093842609.00|\n+----------------------------+\n</code></pre>\n\n<p>The code that generated this just to keep you out of the dark,</p>\n\n<pre><code>Matrix m = get_rand_matrix(4, 2);\nfor(int i = 0; i &lt; m.rows; i++)\n{\n    for(int j = 0; j &lt; m.cols + 1; j++)\n        printf(\"%.2lf \", m.matrix[i][j]);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Now, I have honestly no idea why I am not getting a segfault and have access to zero-initialized elements outside of (what I would have thought to be) the bounds of the memory that was allocated. I can only assume its an error on my part by conflating <code>malloc</code> and <code>calloc</code> together, but then again, I also don't see why this wouldn't work.</p>\n\n<p>Does anyone know what is going on, why are there 0 initialized doubles outside of the bounds of the allocated memory? I am rather new to C and memory allocation in general and this has completely dazzled me.</p>\n\n<p><strong>Interesting addition</strong> </p>\n\n<p>Some of the elements seem to repeat when you increase the column loop exiting condition (Generated with <code>j &lt; m.cols + 5</code>)</p>\n\n<pre><code>+-------------------------------------------------------------------------------+\n|549092153.00 | 1317836633.00 | 0.00| 0.00 | 218607745.00 |1326282480.00 | 0.00 |                                                                                                               \n|218607745.00 | 1326282480.00 | 0.00| 0.00 | 715372192.00 |976468777.00  | 0.00 |                                                                                                               \n|715372192.00 | 976468777.00  | 0.00| 0.00 | 103851159.00 |363785358.00  | 0.00 |                                                                                                                \n|103851159.00 | 363785358.00  | 0.00| 0.00 |     0.00     | 0.00         | 0.00 |\n+-------------------------------------------------------------------------------+\n</code></pre>\n\n<p>I increased the increment to +1000 and it still continues to print 0.00 and repeated numbers.</p>\n"}, {"tags": ["c", "conditional-statements"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1569972313, "post_id": 58193446, "comment_id": 102766011, "body": "You have an error in your code. &quot;&amp;d&quot; is not &quot;%d&quot;. The proper scanf invocation is scanf(&quot;%d&quot;, &amp;money) assuming money is a variable of type int. Please enable compiler warnings and resolve them."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 7, "creation_date": 1569972338, "post_id": 58193446, "comment_id": 102766022, "body": "Did you mean <code>else if(...)</code>? You also don&#39;t want the <code>;</code> at the end."}, {"owner": {"reputation": 9, "user_id": 12027967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211633827040546/picture?type=large", "display_name": "Frank Weirich", "link": "https://stackoverflow.com/users/12027967/frank-weirich"}, "edited": false, "score": 0, "creation_date": 1569972828, "post_id": 58193446, "comment_id": 102766114, "body": "I guess I stared at it too long but the &amp; was the mistake and works now with the %. Thanks for the help, now off to my other issues."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1569972869, "post_id": 58193446, "comment_id": 102766127, "body": "<code>else (money &lt;= 8);</code> is not a valid statement, it should be <code>else if (money &lt;= 8)</code> instead"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1569973495, "post_id": 58193446, "comment_id": 102766247, "body": "@RemyLebeau It does happen to be valid. It just doesn&#39;t do anything."}], "answers": [{"tags": [], "owner": {"reputation": 475, "user_id": 7804384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AlDb8.png?s=128&g=1", "display_name": "Rustang", "link": "https://stackoverflow.com/users/7804384/rustang"}, "is_accepted": false, "score": 2, "last_activity_date": 1569972807, "creation_date": 1569972807, "answer_id": 58193517, "question_id": 58193446, "link": "https://stackoverflow.com/questions/58193446/how-do-i-get-my-if-else-statements-to-work-in-c/58193517#58193517", "title": "How do I get my if else statements to work in C?", "body": "<p>Else doesn't take an argument.</p>\n\n<p>Else just means everything else other than <code>if</code> or any <code>else if</code> conditions you may have included.</p>\n\n<p>Try using <code>else if</code> after an <code>if</code> statement in the same format that you have your <code>if</code>: </p>\n\n<pre><code>else if(money &lt;= 8){ \n    printf(\"You are poor my man\");\n}\n</code></pre>\n\n<p>Also, worth considering what happens if the user has anywhere between 9 and 24 money? You may then want to implement an <code>else</code> statement to cover this range, as mentioned above else just simply handles every other case that wasn't picked up by your <code>if</code> and <code>else if</code>.   </p>\n"}, {"tags": [], "owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1569975017, "last_edit_date": 1569975017, "creation_date": 1569974264, "answer_id": 58193679, "question_id": 58193446, "link": "https://stackoverflow.com/questions/58193446/how-do-i-get-my-if-else-statements-to-work-in-c/58193679#58193679", "title": "How do I get my if else statements to work in C?", "body": "<p>See carefully . You have written wrong format specifier in your first \nScanf statement . You have used \"&amp; \" it should be \"%d\" . \"&amp;\" is used to access address which is not required here . \nmodify this statement <code>scanf(\"&amp;d\", &amp;money);</code> \nto <code>scanf(\"%d\", &amp;money);</code></p>\n\n<p>Another reason why this thing is happening is because you had not handled all conditions. What if someone enter 16 or 10 .</p>\n\n<p>Another thing, you should  not add any condition to else part . Else part are meant to handle every case except the if (or elseif) case. So even if you don't add any condition in else part it gonna work.\nHere is corrected piece of code.</p>\n\n<pre><code>int main()\n{\n    int  money;\nprintf(\"How much money do you have?: \");\nscanf(\"%d\", &amp;money);\n\nif (money &gt;= 25)\n{\nprintf(\"Here is your food\\n\");\n}\n\nelse\n{\nprintf(\"you don't have enough\\n\");\n}\n\nreturn 0;\n}\nhttps://www.geeksforgeeks.org/decision-making-c-c-else-nested-else/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 753, "user_id": 8138584, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aYj08st4R08/AAAAAAAAAAI/AAAAAAAAAKM/GS-Y-F8B3is/photo.jpg=k-s128", "display_name": "Naveen Jain", "link": "https://stackoverflow.com/users/8138584/naveen-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1569977069, "creation_date": 1569977069, "answer_id": 58193900, "question_id": 58193446, "link": "https://stackoverflow.com/questions/58193446/how-do-i-get-my-if-else-statements-to-work-in-c/58193900#58193900", "title": "How do I get my if else statements to work in C?", "body": "<ul>\n<li>Use <code>else if</code> if you have to use specific condition   </li>\n<li>There was a syntax error when you taking a input using scanf method.</li>\n</ul>\n\n<p><strong><em>Updated Code :</em></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n  int money;\n  printf (\"How much money do you have?: \");\n  scanf (\"%d\", &amp;money);  \n\n  if(money &gt;= 25)\n    {\n\n      printf(\"Here is your food\\n\");\n    }\n\n  else if(money &lt;= 8)\n  {\n\n    printf(\"you dont have enough\\n\");\n  }\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12027967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211633827040546/picture?type=large", "display_name": "Frank Weirich", "link": "https://stackoverflow.com/users/12027967/frank-weirich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1569988285, "creation_date": 1569972122, "last_edit_date": 1569988285, "question_id": 58193446, "link": "https://stackoverflow.com/questions/58193446/how-do-i-get-my-if-else-statements-to-work-in-c", "title": "How do I get my if else statements to work in C?", "body": "<p>Everything seems right but when I run this <code>if else</code> statement it always prints the question and the second statement automatically without asking question?</p>\n\n<pre><code>printf(\"How much money do you have?: \");\nscanf(\"&amp;d\", &amp;money);\n\nif (money &gt;= 25)\n{\nprintf(\"Here is your food\\n\");\n}\n\nelse (money &lt;= 8);\n{\nprintf(\"you dont have enough\\n\");\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "webkit"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12114130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53685d93b6ba275e96fd394d74911e1?s=128&d=identicon&r=PG", "display_name": "JohnG", "link": "https://stackoverflow.com/users/12114130/johng"}, "edited": false, "score": 0, "creation_date": 1570039139, "post_id": 58193852, "comment_id": 102791806, "body": "Xin - I really appreciate the suggestion with the include path, and the article was certainly worth reading.  But this still doesn&#39;t cure the fact that the header files are all assumed to be in a subdirectory that doesn&#39;t exist.  Option 1 could potentially work, but again I feel like I&#39;m doing something wrong if I have to download the software and copy it to somewhere else to make it work."}, {"owner": {"reputation": 11, "user_id": 12114130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53685d93b6ba275e96fd394d74911e1?s=128&d=identicon&r=PG", "display_name": "JohnG", "link": "https://stackoverflow.com/users/12114130/johng"}, "edited": false, "score": 0, "creation_date": 1570480228, "post_id": 58193852, "comment_id": 102919893, "body": "I just have to post this as a follow up for anyone else who runs into this.  Even though I was reluctant to take Xin&#39;s advice of copying the header files by hand, out of frustration I ended up doing it.  I&#39;m here to tell you that it worked:  I copies /usr/include/webkitgtk-4.0/webkit2 to /usr/local/include/webkit2, and I also had to copy libsoap&#39;s header files the same way.  FYI, I couldn&#39;t get the files to work in their old location because I kept getting permission denied errors."}], "tags": [], "owner": {"reputation": 16, "user_id": 11241730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c2dd68ae60634a09e5d9a08ec188e7?s=128&d=identicon&r=PG&f=1", "display_name": "Xin Zhou", "link": "https://stackoverflow.com/users/11241730/xin-zhou"}, "is_accepted": false, "score": 0, "last_activity_date": 1569976499, "creation_date": 1569976499, "answer_id": 58193852, "question_id": 58193390, "link": "https://stackoverflow.com/questions/58193390/webkit-header-file-confusion/58193852#58193852", "title": "WebKit header file confusion", "body": "<p>you can try:<br>\nmkdir /usr/local/include/webkit2 or mkdir /usr/include/webkit2, then copy the header files into the directory.<br>\nor<br>\nconfigure C_INCLUDE_PATH=$C_INCLUDE_PATH:~/Utils/WebKitGtk/webkitgtk2.26.1/Source/WebKit/UIProcess/API/gtk/<br>\nyou can refer to <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Environment-Variables.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/cpp/Environment-Variables.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12114130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53685d93b6ba275e96fd394d74911e1?s=128&d=identicon&r=PG", "display_name": "JohnG", "link": "https://stackoverflow.com/users/12114130/johng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569976499, "creation_date": 1569971465, "question_id": 58193390, "link": "https://stackoverflow.com/questions/58193390/webkit-header-file-confusion", "title": "WebKit header file confusion", "body": "<p>I've downloaded and installed WebKit (webkitgtk-2.26.1) on my Ubuntu 19.04 computer for use with C/GTK+, and I have an issue with the include files.  All of the sample code I'm seeing includes the header files as <code>#include &lt;webkit2/webkit2.h&gt;</code>.  But there is no webkit2 folder installed with WebKit, although all the header files in ~/Utils/WebKitGtk/webkitgtk-2.26.1/Source/WebKit/UIProcess/API/gtk/webkit2 refer to \n<code>#include &lt;webkit2/*.h&gt;</code> as well.  I don't think I want to start editing WebKit header files, so I'm hoping someone out there has run into this and can point me in the right direction.</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 10, "creation_date": 1569971341, "post_id": 58193363, "comment_id": 102765845, "body": "No. The reason is, and this might come as a surprise, that &quot;ISO C forbids nested functions&quot;. :)"}, {"owner": {"reputation": 33, "user_id": 6103787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960cd241127ac5f4c013da88062735?s=128&d=identicon&r=PG&f=1", "display_name": "Espequair", "link": "https://stackoverflow.com/users/6103787/espequair"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1569971475, "post_id": 58193363, "comment_id": 102765868, "body": "Ah well, I had hope there was a way to bypass that limitation through a clever shortcut I had no knowledge of."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1569971669, "post_id": 58193363, "comment_id": 102765892, "body": "The closest thing you can do is save the outer argument in a global/static variable that the inner function can access, but that&#39;s horribly non-reentrant (=thread unsafe)."}, {"owner": {"reputation": 33, "user_id": 6103787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960cd241127ac5f4c013da88062735?s=128&d=identicon&r=PG&f=1", "display_name": "Espequair", "link": "https://stackoverflow.com/users/6103787/espequair"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1569971997, "post_id": 58193363, "comment_id": 102765947, "body": "Yeah, I&#39;m not touching global variables with a 3.048 m pole, thanks for the answer!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1569972350, "post_id": 58193363, "comment_id": 102766027, "body": "Title seems confusing, of course you can use function pointers -- but not nested functions"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1569972439, "post_id": 58193363, "comment_id": 102766045, "body": "Note also that the flags are not really the core problem.  The nested function is.  A few C compilers do support nested functions as an extension, but in no way is that portable.  You would do well to learn standard C before you move on to compiler-specific extended dialects."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 1, "creation_date": 1569972862, "post_id": 58193363, "comment_id": 102766122, "body": "Removing the flags won&#39;t help. Although GCC supports nested functions, they are &quot;downward funargs&quot; only and not full lexical closures; you cannot return them and safely use them. Your code will compile, but bomb."}, {"owner": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 4, "creation_date": 1569972977, "post_id": 58193363, "comment_id": 102766143, "body": "Is there an ISO-C way to support GNU extensions? No, fortunately..."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6103787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960cd241127ac5f4c013da88062735?s=128&d=identicon&r=PG&f=1", "display_name": "Espequair", "link": "https://stackoverflow.com/users/6103787/espequair"}, "edited": false, "score": 0, "creation_date": 1569972697, "post_id": 58193480, "comment_id": 102766083, "body": "Yes, I realize my question was not well asked, you answered what I did ask perfectly though. Thank you! Unfortunately, what I meant was a little different and does not seem possible."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 33, "user_id": 6103787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960cd241127ac5f4c013da88062735?s=128&d=identicon&r=PG&f=1", "display_name": "Espequair", "link": "https://stackoverflow.com/users/6103787/espequair"}, "edited": false, "score": 2, "creation_date": 1569972810, "post_id": 58193480, "comment_id": 102766112, "body": "Suggest you either edit your title to be the actual question or delete the question."}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 0, "last_activity_date": 1569972517, "creation_date": 1569972517, "answer_id": 58193480, "question_id": 58193363, "link": "https://stackoverflow.com/questions/58193363/is-there-an-iso-c-compliant-way-to-make-a-function-that-returns-a-pointer-to-a-f/58193480#58193480", "title": "Is there an ISO C compliant way to make a function that returns a pointer to a function nested inside?", "body": "<p>You can't have nested functions but you can return a function pointer:</p>\n\n<pre><code>typedef int (*FuncPtr)(void);\n\nint sample(void){\n    return 1;\n}\n\nFuncPtr choose(int f)\n{\n    if (f == 1) return sample;\n    return NULL;\n}\n\nmain()\n{\n    FunPtr p = choose(1);\n    if (p) { printf(\"%d\\n\", p()); }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": true, "score": 4, "last_activity_date": 1569973797, "creation_date": 1569973797, "answer_id": 58193634, "question_id": 58193363, "link": "https://stackoverflow.com/questions/58193363/is-there-an-iso-c-compliant-way-to-make-a-function-that-returns-a-pointer-to-a-f/58193634#58193634", "title": "Is there an ISO C compliant way to make a function that returns a pointer to a function nested inside?", "body": "<p>Although GNU C does support nested functions, it will not work anyway. Nested functions in GNU C are \"downward funarg only\". They are not lexical closures; everything is on the stack. When the parent of a nested function terminates, that function becomes garbage; using the returned function pointer outside of that scope is not well-defined.</p>\n\n<p>(GNU C local functions also require an executable stack. They fit the downward closure into a regular C function pointer, which requires the construction of piece of machine code on the stack called a \"trampoline\".)</p>\n\n<p>To simulate lexical closures in standard C, you have to hoist all the function bodies to file scope (no nesting) and use an explicit closure data structure which holds a pointer to the code and to the captured environment:</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct counting_closure {\n  /* simulated captured environment */\n  int count;\n  /* pointer to code */\n  int (*lambda)(struct counting_closure *);\n};\n\nint counting_lambda(struct counting_closure *clo)\n{\n   /* simulated access to captured lexical */\n   return clo-&gt;count++;\n}\n\nstruct counting_closure *make_counter(int start)\n{\n   struct counting_closure *clo = malloc(sizeof *clo);\n   clo-&gt;count = start;\n   clo-&gt;lambda = counting_lambda;\n   return clo;\n}\n\nint main(void)\n{\n   struct counting_closure *cntr = make_counter(1);\n   printf(\"%d\\n\", cntr-&gt;lambda(cntr));\n   printf(\"%d\\n\", cntr-&gt;lambda(cntr));\n   printf(\"%d\\n\", cntr-&gt;lambda(cntr));\n   free(cntr);\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 0, "last_activity_date": 1569973869, "creation_date": 1569973869, "answer_id": 58193642, "question_id": 58193363, "link": "https://stackoverflow.com/questions/58193363/is-there-an-iso-c-compliant-way-to-make-a-function-that-returns-a-pointer-to-a-f/58193642#58193642", "title": "Is there an ISO C compliant way to make a function that returns a pointer to a function nested inside?", "body": "<p>No. The C language does not have nested functions, and even the \"GNU C\" extension for them does not allow you to call them after the enclosing function invocation has ended.</p>\n\n<p>The correct and portable way to do this is in C is with a pair (possibly stored in a struct, if you like) of function pointer and pointer to struct containing the context. The context can then be allocated on the stack of the \"enclosing function invocation\" if you won't use the context after the invocation ends; otherwise, it can live in allocated storage (<code>malloc</code>) which you explicitly free when done with it.</p>\n\n<p>Such a pair cannot be passed to interfaces which only take a function pointer, but good APIs using function pointers also take a (usually <code>void *</code>) context argument to be passed back to the function.</p>\n"}], "owner": {"reputation": 33, "user_id": 6103787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960cd241127ac5f4c013da88062735?s=128&d=identicon&r=PG&f=1", "display_name": "Espequair", "link": "https://stackoverflow.com/users/6103787/espequair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58193634, "answer_count": 3, "score": 1, "last_activity_date": 1569973869, "creation_date": 1569971161, "last_edit_date": 1569972567, "question_id": 58193363, "link": "https://stackoverflow.com/questions/58193363/is-there-an-iso-c-compliant-way-to-make-a-function-that-returns-a-pointer-to-a-f", "title": "Is there an ISO C compliant way to make a function that returns a pointer to a function nested inside?", "body": "<pre><code>#include &lt;stdio.h&gt;\nint (*function_factory(int outer_args))(int){ \n    int returned_function (int inner_args){ \n        return outer_args + inner_args;     \n    }\n    return &amp;returned_function;\n}\n\nint main(void){                \n    printf(\"%d\\n\",function_factory(1)(2)); \n    return 0; \n}\n</code></pre>\n\n<p>When I try to compile the above code with the -pedantic and -Werror flags, I get the error <code>error: ISO C forbids nested functions</code>. For the purposes of my task, assume I can't remove those two flags. Is there a way I can return a function that will take inner_args while still having access to outer_args?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569970215, "post_id": 58193228, "comment_id": 102765579, "body": "word is a char, and &quot;a&quot; is a string. Try &#39;a&#39; (which is actually an int, but will compare equal)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569970861, "post_id": 58193228, "comment_id": 102765724, "body": "At this stage in your C programming career, you should assume that if the compiler deigns to give you a warning, it has spotted a bug in your code that you must fix \u2014 it knows a lot more about C than you do. After some years, you might decide you can get away with ignoring some of the more arcane warnings (perhaps; I&#39;ve only been coding in C for 30+ years and I rarely take that risk), but I recognize immediately that warnings like those you show are significant and must be fixed before running the code. (I mostly use GCC and normally use <code>-Werror</code> so that any warning is treated like an error.)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569971008, "post_id": 58193228, "comment_id": 102765763, "body": "You will probably need to use <code>&quot; %c&quot;</code> (with a space before the <code>%</code>) in the <code>scanf()</code> once you get the program to loop at all.  That will skip over newlines; as written, if you type <code>a</code> (and return), the loop will stop when <code>scanf()</code> reads the return (newline) character.  The blank skips white space such a blank, tabs and newlines."}], "answers": [{"tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": false, "score": 2, "last_activity_date": 1569970215, "creation_date": 1569970215, "answer_id": 58193251, "question_id": 58193228, "link": "https://stackoverflow.com/questions/58193228/why-wont-my-while-loop-execute-its-function-when-the-condition-is-met/58193251#58193251", "title": "Why won&#39;t my while loop execute its function when the condition is met?", "body": "<p>Those warnings are not just warnings - they are the reasons your program doesn't work. Change <code>\"a\"</code> to <code>'a'</code> in both places in your program to use character literals instead of strings and you'll be set.</p>\n"}, {"comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1569970316, "post_id": 58193262, "comment_id": 102765606, "body": "OP isn&#39;t trying to compare strings."}, {"owner": {"reputation": 391, "user_id": 7233104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/si3wu.jpg?s=128&g=1", "display_name": "GRquanti", "link": "https://stackoverflow.com/users/7233104/grquanti"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1569970358, "post_id": 58193262, "comment_id": 102765618, "body": "is comparing chars. Which strcmp does."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569970548, "post_id": 58193262, "comment_id": 102765652, "body": "No: <code>strcmp()</code> compares null-terminated byte strings (NTBS).  The variable <code>word</code> is a single character; it is not an NTBS.  You&#39;d have to recommend a number of other changes before this became a sufficiently useful answer."}, {"owner": {"reputation": 391, "user_id": 7233104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/si3wu.jpg?s=128&g=1", "display_name": "GRquanti", "link": "https://stackoverflow.com/users/7233104/grquanti"}, "edited": false, "score": 0, "creation_date": 1569972211, "post_id": 58193262, "comment_id": 102765995, "body": "Good point. I did it. Please remove downvote."}], "tags": [], "owner": {"reputation": 391, "user_id": 7233104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/si3wu.jpg?s=128&g=1", "display_name": "GRquanti", "link": "https://stackoverflow.com/users/7233104/grquanti"}, "is_accepted": false, "score": 0, "last_activity_date": 1569972189, "last_edit_date": 1569972189, "creation_date": 1569970302, "answer_id": 58193262, "question_id": 58193228, "link": "https://stackoverflow.com/questions/58193228/why-wont-my-while-loop-execute-its-function-when-the-condition-is-met/58193262#58193262", "title": "Why won&#39;t my while loop execute its function when the condition is met?", "body": "<p>To compare strings is better to use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strcmp.htm\" rel=\"nofollow noreferrer\">strcmp</a>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To compare strings is <em>generally</em> better to use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strcmp.htm\" rel=\"nofollow noreferrer\">strcmp</a>.</p>\n\n<p>This code explains how to use it in the specific case asked by the OP:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n   const char *initial_word = \"a\";\n   char next_word [] = \"b\";\n\n   const char *compare = \"a\";\n   int condition = strcmp(initial_word, compare); //return 0 -&gt; true\n\n   while(condition == 0)\n   {\n        printf(\"Test: enter a to continue: \\t\");\n        scanf(\"%s\", next_word);\n\n        if (strcmp(next_word, compare) != 0) condition = 1;\n   }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12150917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e422657af54ec2d661500668e652260?s=128&d=identicon&r=PG&f=1", "display_name": "rob_guy", "link": "https://stackoverflow.com/users/12150917/rob-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1569970636, "answer_count": 2, "score": 0, "last_activity_date": 1569997381, "creation_date": 1569970062, "last_edit_date": 1569997381, "question_id": 58193228, "link": "https://stackoverflow.com/questions/58193228/why-wont-my-while-loop-execute-its-function-when-the-condition-is-met", "closed_reason": "Duplicate", "title": "Why won&#39;t my while loop execute its function when the condition is met?", "body": "<p>I'm trying to make a very simple while loop just as a test. Essentially, the statement inside the while loop asks if you want to continue. If you input the correct character it should ask you the same question again. If you input any other character, the condition for the while loop should no longer be met, and the while loop should be exited. However, the loop doesn't get carried out even once, and the program is immediately ended as soon as it is begun. This makes me think that there is a problem with my condition, but as far as I can see it is met.</p>\n\n<p>I've tried constructing a while loop using just an integer as a condition (as long as a variable isn't equal to a specific value, the loop runs. As soon as the variable is equal to the value, the loop ends.) That program worked successfully, but I can't get this similar code to work the same using a character as an input.</p>\n\n<p>This is my non-functioning code with line numbers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(void)\n{\n    char word=\"a\";\n    while(word == \"a\") \n    {   \n        printf(\"\\ntest. enter a to continue\");\n        scanf(\"%c\", &amp;word);\n    }\n}\n</code></pre>\n\n<p>What I expect:</p>\n\n<pre><code>test. enter a to continue\n</code></pre>\n\n<p>and after I enter \"a\" the same statement should repeat, and the program should end if anything else is entered</p>\n\n<p>What I actually get:</p>\n\n<pre><code>--------------------------------\nProcess exited after 0.6154 seconds with return value 4210688\nPress any key to continue . . .\n</code></pre>\n\n<p>That is what I get from any successful program after it has completed, but with the outputs I want above the dotted line. In this case, there are no outputs above the dotted line, meaning the program finished with no outputs at all.</p>\n\n<p>I have no error messages, but I do have these warning messages:</p>\n\n<pre><code>[Warning] initialization makes integer from pointer without a cast (line 5)\n[Warning] comparison between pointer and integer  (line 6)\n</code></pre>\n"}, {"tags": ["c", "user-input", "fgets"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1569970111, "post_id": 58193225, "comment_id": 102765554, "body": "Are you using <code>windows.h</code>? If so, I think you should use native boolean values instead of Win32&#39;s <code>BOOL</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1569971102, "post_id": 58193225, "comment_id": 102765789, "body": "make your buffer bigger; fgets will only consume what fits in the buffer"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1569971438, "post_id": 58193225, "comment_id": 102765862, "body": "newline is included in fgets output. So probably you want <code>strcasecmp(ans, &quot;yes\\n&quot;)</code> and so on."}], "owner": {"reputation": 17, "user_id": 9374768, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dani Jo", "link": "https://stackoverflow.com/users/9374768/dani-jo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569970035, "creation_date": 1569970035, "question_id": 58193225, "link": "https://stackoverflow.com/questions/58193225/fgets-is-ignored-when-called-second-time", "title": "Fgets is ignored when called second time", "body": "<p>I have a function, that returns true or false, or re prompts based on the user input. Which I retrieve from fgets.</p>\n\n<pre><code>BOOL yes()\n{\n\n    char ans[4];\n    //need to store this somewhere\n\n    fgets(ans,sizeof ans,stdin);\n\n\n    if(strcasecmp(ans,\"yes\")== 0 ||strcasecmp(ans,\"y\") == 0){\n\n        return TRUE;\n    }\n    else if(strcasecmp(ans,\"no\")== 0 ||strcasecmp(ans,\"n\") == 0){\n        return FALSE;\n\n    }else{\n        printf(\"Invalid\");\n       yes();\n    }\n\n}\n</code></pre>\n\n<p>This while loop is executed while response returns true,</p>\n\n<pre><code>int main(){ \n do {\n\n        guess();  \n\n        printf(\"\\nDo you want to play again? (yes/no) &gt;\");\n    } while (yes() == TRUE);\n}\n</code></pre>\n\n<p>The guess function also calls yes() like so:</p>\n\n<pre><code>void guess(){\n    if(yes()){\n                  return;\n                }\n\n\n }\n</code></pre>\n\n<p>When I call yes() in guess, it does prompt for input and return to main as expected, however, as soon as it returns to the main it prints \"do you want to play again\" and then immediately \"Invalid\" before I've even gotten the chance to enter any new input?</p>\n"}, {"tags": ["c", "linux", "mmap", "memcpy", "bus-error"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 1, "creation_date": 1569970715, "post_id": 58193120, "comment_id": 102765687, "body": "Welcome to StackOverflow! Please include the code that is causing this error. It&#39;s hard to help without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum, reproducible example!</a>"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1570014260, "post_id": 58193120, "comment_id": 102778321, "body": "<code>MemPtr = ftruncate</code> - ftruncate returns an int. So what is the size of file named <code>name</code>?"}, {"owner": {"reputation": 31, "user_id": 12150446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe52c7175337607ac529a8ae8d861f43?s=128&d=identicon&r=PG&f=1", "display_name": "uslx", "link": "https://stackoverflow.com/users/12150446/uslx"}, "edited": false, "score": 0, "creation_date": 1570016304, "post_id": 58193120, "comment_id": 102779316, "body": "I changed the return value, thank you! The size of the file is 0. If I include the ftruncate part I recive an error <i>Error: ftruncate : Invalid argument : -1</i> I assume this is because <code>fd</code> is not a regular file descriptor (opening the UIO device) ?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570032464, "post_id": 58193120, "comment_id": 102788727, "body": "<i>The memcopy / memset causes a bus error which is normaly a sign of writing out of the files boundaries.</i>  Offhand, I&#39;d guess the device driver doesn&#39;t support <code>mmap()</code> access properly.  Does &quot;normal&quot; file IO via <code>open()</code>/<code>read()</code>/<code>write()</code> work properly?  Even if you use <code>lseek()</code>/<code>pread()</code>/<code>pwrite()</code> to access any offset?  This might be relevant:  <a href=\"https://forums.xilinx.com/t5/Embedded-Linux/Large-BRAM-access-using-mmap/td-p/664702\" rel=\"nofollow noreferrer\">forums.xilinx.com/t5/Embedded-Linux/&hellip;</a> along with this: <a href=\"https://stackoverflow.com/questions/41311792/mmap-einval-error-on-uio-device\" title=\"mmap einval error on uio device\">stackoverflow.com/questions/41311792/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 12150446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe52c7175337607ac529a8ae8d861f43?s=128&d=identicon&r=PG&f=1", "display_name": "uslx", "link": "https://stackoverflow.com/users/12150446/uslx"}, "edited": false, "score": 0, "creation_date": 1570034348, "post_id": 58193120, "comment_id": 102789646, "body": "The UIO system is meant to control memory and interrupts from userspace. <a href=\"https://www.kernel.org/doc/html/v4.12/driver-api/uio-howto.html\" rel=\"nofollow noreferrer\">Doc</a> states that the following file operations should be supported <code>read()</code> - blocking read of interrupts (waits till interrupt occures) <code>select()</code> - non blocking read of interrupts <code>mmap()</code> - <i>map the device\u2019s memory to userspace</i> with <code>N*getpagesize()</code> to address different mappings in one device. <i>(2nd Link)</i> I think accessing &quot;normal&quot; files work <i>(at least <code>open()</code> and <code>mmap()</code>)</i>"}], "owner": {"reputation": 31, "user_id": 12150446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe52c7175337607ac529a8ae8d861f43?s=128&d=identicon&r=PG&f=1", "display_name": "uslx", "link": "https://stackoverflow.com/users/12150446/uslx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570032139, "creation_date": 1569969389, "last_edit_date": 1592644375, "question_id": 58193120, "link": "https://stackoverflow.com/questions/58193120/bus-error-when-memcopy-to-uio-mmap-device", "title": "bus error when memcopy to uio mmap device", "body": "<p>I currently try to access UIO shared memory via memcopy.</p>\n<p>My approach is:</p>\n<ol>\n<li><strong>open</strong> the corresponding device</li>\n<li>map the memory via <strong>mmap</strong> with the offset speciality <em>N*getpagesize()</em></li>\n<li><strong>memcopy</strong> / <strong>memset</strong> to the pointer that is returned from mmap</li>\n</ol>\n<p>I tried also with ftruncate after Step 2 resulting in an error.</p>\n<p>The memcopy / memset causes a <strong>bus error</strong> which is normaly a sign of writing out of the files boundaries.</p>\n<p>Via cat /proc/<em>'pid'</em>/maps I'm able to see that there is a mapping for /dev/uioX\nAlso /sys/class/uio/uioX/maps/ has two map directories, of which I try to access the second one (<em>map1</em> therefore <em>N = 1</em>)</p>\n<p>Am I missing out something?\nWould I have to mmap the full size of the memory specified in /sys/class/uio/uioX/maps/map1/size ?</p>\n<p>I could not find any example for accessing the memory via memcopy, is there something that prevents memcopy on UIO mmaped memory?</p>\n<h3>Sources</h3>\n<pre><code>unsigned char* GetMemPtr(const char *name, unsigned long Size)\n{\n    long fd;\n    long truncret;\n    void* MemPtr;\n\n    unsigned long offst;\n\n    printf(&quot;Opening: %s with size %u\\n&quot; , name, Size);\n\n    fd = open(name, O_RDWR);\n\n    if (fd &lt; 0) {\n        printf(&quot;Error: open : %u : %s\\n&quot;, fd, strerror(errno));\n    }\n\n    offst = 1 * getpagesize();\n\n    /*truncret = ftruncate(fd, offst + Size);\n    if (truncret &lt; 0)\n    {\n        printf(&quot;Error: ftruncate : %s : %d\\n&quot;, strerror(errno), truncret);\n\n    }*/\n\n    MemPtr = mmap(0, Size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, offst);\n    if (MemPtr == MAP_FAILED)\n    {\n        printf(&quot;Error: mmap : %p : %s\\n&quot;, MemPtr, strerror(errno));\n\n    }\n    //MemPtr = MemPtr + offst;\n\n    printf(&quot;Mem pointer is %p\\n&quot;, MemPtr);\n\n    memset(MemPtr, 0, Size);\n\n    printf(&quot;Pointer is : %p\\n&quot; , MemPtr);\n    return (unsigned char*) MemPtr;\n\n}\n</code></pre>\n<p><strong>Results in the output:</strong><br />\nOpening: /dev/uio0 with size 4096<br />\nMem pointer is 0xffff89232000<br />\nBus error (core dumped)</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1569966017, "post_id": 58192581, "comment_id": 102764457, "body": "Use a debugger to examine the memory that you are operating on to see if it&#39;s working the way that you think. Your insertion of an Int &#39;works&#39; but it doesn&#39;t fit into the character memory space. When you pull it back out for printing you are only pulling out part of what you put in."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1569966022, "post_id": 58192581, "comment_id": 102764460, "body": "<i>So I have figured out how to store an integer in a char array which I declared as (char arr[4096] = {&#39;\\0&#39;};) by casting one of the indices to an integer pointer</i>- that is undefined behavior, violating strict aliasing."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1569966118, "post_id": 58192581, "comment_id": 102764501, "body": "furthermore, <code>&amp;arr[2]</code> is not an <code>int</code>, but rather a pointer to a <code>char</code> (assuming <code>arr[]</code> is a <code>char</code> array), so even if your aliasing violation were not undefined behavior, you&#39;re printing the wrong thing."}, {"owner": {"reputation": 39, "user_id": 10672072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9429dd6fb67457f9fbb138a862db3aa8?s=128&d=identicon&r=PG&f=1", "display_name": "madmax007", "link": "https://stackoverflow.com/users/10672072/madmax007"}, "reply_to_user": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1569966182, "post_id": 58192581, "comment_id": 102764521, "body": "Yeah so how would I pull out the entire int instead of just one byte? @john elemans"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569966207, "post_id": 58192581, "comment_id": 102764527, "body": "By following the reverse procedure."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1569966433, "post_id": 58192581, "comment_id": 102764569, "body": "@ChristianGibbons Things like this are by necessity done commonly in systems programming. However, a systems programmer would likely know what hardware they&#39;re targeting and whether it can handle misaligned ints, or they&#39;ll take steps to ensure proper alignment."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1569966694, "post_id": 58192581, "comment_id": 102764657, "body": "@CareyGregory There are legal ways of accomplishing this and, to my understanding, a good compiler should be able to recognize these common work-arounds (such as use of memcpy) and optimize them."}], "answers": [{"tags": [], "owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "is_accepted": false, "score": 3, "last_activity_date": 1569966215, "creation_date": 1569966215, "answer_id": 58192655, "question_id": 58192581, "link": "https://stackoverflow.com/questions/58192581/how-to-access-an-integer-that-is-being-stored-in-a-char-array/58192655#58192655", "title": "How to access an integer that is being stored in a char array?", "body": "<p>Like this:</p>\n\n<pre><code>printf(\"%d\\n\", *metaptr);\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>printf(\"%d\\n\", *((int*)(&amp;arr[2])));\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10672072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9429dd6fb67457f9fbb138a862db3aa8?s=128&d=identicon&r=PG&f=1", "display_name": "madmax007", "link": "https://stackoverflow.com/users/10672072/madmax007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1569966215, "creation_date": 1569965831, "question_id": 58192581, "link": "https://stackoverflow.com/questions/58192581/how-to-access-an-integer-that-is-being-stored-in-a-char-array", "title": "How to access an integer that is being stored in a char array?", "body": "<p>So I have figured out how to store an integer in a char array which I declared as (char arr[4096] = {'\\0'};) by casting one of the indices to an integer pointer, but how do I then access this integer that is being stored in the char array afterwards?</p>\n\n<p>I have tried printing the value as an int but it is not working. Below I will show the initial declaration followed by the attempted print statement.</p>\n\n<pre><code>int *metaptr = (int*)(&amp;arr[2]);\n*metaptr = numb;\nprintf(\"%d\\n\",&amp;arr[2]);\n</code></pre>\n\n<p>Basically I am expecting numb's value to be printed but instead an address(presumably) is being printed. How can I access the integer value which I have stored in this char array?</p>\n"}, {"tags": ["c", "file", "structure"], "comments": [{"owner": {"reputation": 1335, "user_id": 11434751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HHKCz781MhA/AAAAAAAAAAI/AAAAAAAAAbs/U7_Zg8vv9zQ/photo.jpg?sz=128", "display_name": "Jason K Lai", "link": "https://stackoverflow.com/users/11434751/jason-k-lai"}, "edited": false, "score": 2, "creation_date": 1569964479, "post_id": 58192314, "comment_id": 102763981, "body": "You answered your own question. One of the biggest concerns is the expensive IO task of opening, writing, and closing the same file over and over again"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1569964548, "post_id": 58192314, "comment_id": 102764007, "body": "Why do you think there would be a better explanation? Gross inefficiency is reason enough."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1569964557, "post_id": 58192314, "comment_id": 102764010, "body": "Way less efficient. Opening and closing are operations that take time. And when you open, the system starts at the beginning of the file so you&#39;d have to do an explicit seek to the end each time before writing the next line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569964605, "post_id": 58192314, "comment_id": 102764027, "body": "Open the file only once.  Perform all the &#39;writes&#39; then close the file.  This avoid LOTS of wasted time performing the operations needed (for book keeping, etc) to <code>open write close</code> the file, in a loop.  Note: that bookkeeping can fail, so dont want to repeatedly perform those operations.  Also that bookkeeping is performed at disk I/O speeds rather than RAM speeds"}], "answers": [{"tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 4, "last_activity_date": 1569965642, "creation_date": 1569965642, "answer_id": 58192541, "question_id": 58192314, "link": "https://stackoverflow.com/questions/58192314/why-isnt-it-a-good-idea-to-open-the-file-before-each-writing-and-close-it-right/58192541#58192541", "title": "Why isn&#39;t it a good idea to open the file before each writing and close it right after each writing?", "body": "<p>Let's sum it up:</p>\n\n<p>Opening and closing a file for every single write operation, when many such operations are planned, is a bad idea because:</p>\n\n<ol>\n<li>It is terribly inefficient.</li>\n<li>It requires an extra seek to the end of file in order to append.</li>\n<li>It forfeits atomicity, meaning that the file may be renamed, moved, deleted, written to, or locked by someone else between the write operations.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1569967313, "creation_date": 1569967313, "answer_id": 58192820, "question_id": 58192314, "link": "https://stackoverflow.com/questions/58192314/why-isnt-it-a-good-idea-to-open-the-file-before-each-writing-and-close-it-right/58192820#58192820", "title": "Why isn&#39;t it a good idea to open the file before each writing and close it right after each writing?", "body": "<p>Think of all the possible reasons why <code>fopen</code> (and related) might fail when you call it even once: the file doesn't exist, your account doesn't have permission to access or create it, another program is using the file exclusively, etc. </p>\n\n<p>If you are repeatedly opening and closing the file for every write operation, this chance of failure increases quite a bit.</p>\n\n<p>Also, there is an overhead associated with acquiring and releasing resources (e.g. files). You'd observe it more if you were acquiring and releasing write access to the file every single time you needed to write.</p>\n"}], "owner": {"reputation": 37, "user_id": 12150757, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kVs0GY-0UBg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-Z3p7Q9Pmz1k_05yD9bJkFA26Tw/photo.jpg?sz=128", "display_name": "F. T. D. C.", "link": "https://stackoverflow.com/users/12150757/f-t-d-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1569967313, "creation_date": 1569964245, "question_id": 58192314, "link": "https://stackoverflow.com/questions/58192314/why-isnt-it-a-good-idea-to-open-the-file-before-each-writing-and-close-it-right", "title": "Why isn&#39;t it a good idea to open the file before each writing and close it right after each writing?", "body": "<p>Suppose you are writing a list of names in a file, each name being written in a write command. Why isn't it a good idea to open the file before each writing and close it right after each writing?</p>\n\n<p>Intuitively, I would say that this aproach is a lot more time consuming than writing to a buffer and posteriorly writing to the file. But I'm sure there is a better explanation to that. Can someone enlight me?</p>\n"}, {"tags": ["c", "data-structures", "infinite-loop"], "comments": [{"owner": {"reputation": 1830, "user_id": 3343753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY4qS.jpg?s=128&g=1", "display_name": "Pedro Rodrigues", "link": "https://stackoverflow.com/users/3343753/pedro-rodrigues"}, "edited": false, "score": 0, "creation_date": 1569967489, "post_id": 58192128, "comment_id": 102764897, "body": "Welcome to StackOverflow. Can you add a tag for the language this is about? Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 9326643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d00858214c912434cb8756c2afea666?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun Singh", "link": "https://stackoverflow.com/users/9326643/arjun-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1569997097, "creation_date": 1569997097, "answer_id": 58196134, "question_id": 58192128, "link": "https://stackoverflow.com/questions/58192128/infinite-loop-in-creation-of-linked-list/58196134#58196134", "title": "Infinite loop in creation of linked list", "body": "<p>The main problem is not in your display function, it is when you creating linklist.<br></p>\n\n<p>A variable declared static in a function retains its state so basically it's address will be same always.<br></p>\n\n<p><strong>In your case your x is initialised only once and retains the same address always.</strong><br>\nIn the first iteration of loop temp will have the same address of x , head will have the same address of x.</p>\n\n<pre><code>        node x;                             // instead of malloc I made a static node. \n        x.next=NULL;\n        printf(\"Enter data in node %d: \",i+1);\n        scanf(\"%d\",&amp;(x.data));\n        temp=&amp;x;\n\n        if(head == NULL)\n        {\n            head=temp;\n        }\n</code></pre>\n\n<p>Then in second iteration of loop x retains it's old address then temp again same address. This time we go to else part, p will have the address of head which is x's address. Now p->next will point to temp's address which is also x's address.</p>\n\n<pre><code>else\n        {\n            p=head;\n            while(p-&gt;next != NULL)\n            {\n                p=p-&gt;next;\n            }\n            p-&gt;next=temp;\n        }\n</code></pre>\n\n<p>So x's address is in temp, head, head->next and this is the problem with the static node created by you because you were thinking that it will create new instance every time. Node created by you pointing is to own address.</p>\n"}], "owner": {"reputation": 3, "user_id": 12150662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1fa97e7f1e4607178ebe4b745efcef?s=128&d=identicon&r=PG&f=1", "display_name": "Srishti Singh", "link": "https://stackoverflow.com/users/12150662/srishti-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 58196134, "answer_count": 1, "score": 0, "last_activity_date": 1570024392, "creation_date": 1569963196, "last_edit_date": 1570024392, "question_id": 58192128, "link": "https://stackoverflow.com/questions/58192128/infinite-loop-in-creation-of-linked-list", "title": "Infinite loop in creation of linked list", "body": "<p>For creating linked list, I made the new node as a static node instead of a dynamic node and now my display function loop got converted to an infinite loop, Why?</p>\n\n<p>Structure of node</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ntypedef struct node\n{\n    int data;\n    struct node* next;\n}node;\n</code></pre>\n\n<p>The only chnage I made was in this function and it worked fine after the changes too.</p>\n\n<pre><code>node *  createLinkedList(int n)\n{\n    int i=0;\n    node * head=NULL;\n    node * temp=NULL;\n    node * p=NULL;\n\n    for(i=0;i&lt;n;i++)\n</code></pre>\n\n<p>I changed my code from here where intead of writing</p>\n\n<pre><code>temp=(node *)malloc(sizeof(node));\n</code></pre>\n\n<p>I made a static node \"x\".</p>\n\n<pre><code>    {\n        node x;                             // instead of malloc I made a static node. \n        x.next=NULL;\n        printf(\"Enter data in node %d: \",i+1);\n        scanf(\"%d\",&amp;(x.data));\n        temp=&amp;x;\n\n        if(head == NULL)\n        {\n            head=temp;\n        }\n        else\n        {\n            p=head;\n            while(p-&gt;next != NULL)\n            {\n                p=p-&gt;next;\n            }\n            p-&gt;next=temp;\n        }\n    }\n    return head;\n}\n</code></pre>\n\n<p>This is the display function, where the changes caused problem</p>\n\n<pre><code>void display(node * p)\n{\n    node * temp=p;\n</code></pre>\n\n<p>It is here that is being converted to an infinite loop.</p>\n\n<pre><code>    while(temp-&gt;next != NULL)\n    {\n        printf(\"\\t%d-&gt;\",temp-&gt;data);       //Due to static node this became an infinite loop , Why?\n        temp=temp-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Why is it happening so , while this program was working fine when I dynamically allocated the memory, but after making a static node as new node, an infinite loop is being created ???</p>\n"}, {"tags": ["c", "audio", "sdl"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1569964211, "post_id": 58192081, "comment_id": 102763883, "body": "Why aren&#39;t you checking <code>Have</code> and taking any differences (format, frequency) from <code>Want</code> into account in <code>AudioCallback()</code>?"}, {"owner": {"reputation": 85, "user_id": 11471579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc52526547082fcba721480d1c5cd8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Lo-Phi", "link": "https://stackoverflow.com/users/11471579/lo-phi"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1569975463, "post_id": 58192081, "comment_id": 102766563, "body": "That was the issue -- I forgot to compare differences and it was indeed changing more than I had anticipated. I appreciate the help!"}], "owner": {"reputation": 85, "user_id": 11471579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc52526547082fcba721480d1c5cd8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Lo-Phi", "link": "https://stackoverflow.com/users/11471579/lo-phi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569964032, "creation_date": 1569962993, "last_edit_date": 1569964032, "question_id": 58192081, "link": "https://stackoverflow.com/questions/58192081/sdl-is-playing-wav-files-but-i-cant-seem-to-play-a-simple-waveform", "title": "SDL is playing wav files, but I can&#39;t seem to play a simple waveform", "body": "<p>I'm trying to play a simple square wave in SDL via the main audio callback function. However, I can't seem to get any audio to play, despite the fact that data appears to be written into the audio buffer.</p>\n\n<p>However, if I load up a .wav file, the audio plays properly (writing data into the same location</p>\n\n<p>After writing my own code to attempt to solve the problem, I tried numerous sine/square waveforms I found online. It would seem that the issue is perhaps not related to the waveform, but since wav files work, I'm not sure what else could be causing the problem:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"x:\\SDL2-2.0.10\\include\\SDL.h\"\n\n#define INITIAL_SCREEN_WIDTH (8*80)\n#define INITIAL_SCREEN_HEIGHT (8*60)\n\ntypedef struct audio_user_data audio_user_data;\nstruct audio_user_data\n{\n    int SamplesPerSecond;\n    int BytesPerSample;\n    int SampleIndex;\n    int ToneHz;\n    int ToneVolume;\n    int WavePeriod;\n    Uint32 FileLength;\n    Uint16* BufferLocation;\n};\n\nvoid\nAudioCallback(void* UserData, Uint8* Stream, int Length)\n{\n    audio_user_data* AudioUserData = (audio_user_data*)UserData;\n    static Uint32 Count = 0;\n\n    Sint16* SampleBuffer = (Sint16*)Stream;\n    int SamplesToWrite = Length / AudioUserData-&gt;BytesPerSample;\n    for(int SampleIndex = 0; SampleIndex &lt; SamplesToWrite; SampleIndex++)\n    {\n        Sint16 SampleValue = ((Count++ / (AudioUserData-&gt;WavePeriod/2)) % 2) ? AudioUserData-&gt;ToneVolume : -AudioUserData-&gt;ToneVolume;\n        *SampleBuffer++ = SampleValue;\n        *SampleBuffer++ = SampleValue;\n    }\n}\n\nint\nmain(int argc, char* argv[])\n{\n    SDL_Init(SDL_INIT_VIDEO|SDL_INIT_AUDIO);\n\n    SDL_Window* Window = SDL_CreateWindow(\"Spell Checker\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, INITIAL_SCREEN_WIDTH*2, INITIAL_SCREEN_HEIGHT*2, 0);\n    SDL_Renderer* Renderer = SDL_CreateRenderer(Window, 0, SDL_RENDERER_SOFTWARE);\n    SDL_PixelFormat* Format = SDL_AllocFormat(SDL_PIXELFORMAT_RGB888);\n    SDL_Texture* Screen = SDL_CreateTexture(Renderer, Format-&gt;format, SDL_TEXTUREACCESS_STREAMING, INITIAL_SCREEN_WIDTH, INITIAL_SCREEN_HEIGHT);\n\n    audio_user_data AudioUserData = {0};\n    AudioUserData.SamplesPerSecond = 48000;//44100;\n    AudioUserData.BytesPerSample = 2 * sizeof(Sint16);\n    AudioUserData.SampleIndex = 0;\n    AudioUserData.ToneVolume = 5000;\n    AudioUserData.ToneHz = 256;\n    AudioUserData.WavePeriod = AudioUserData.SamplesPerSecond / AudioUserData.ToneHz;\n\n    SDL_AudioSpec Want, Have;\n    SDL_AudioDeviceID AudioDeviceID;\n    Want.freq = 48000; // 44100;\n    Want.format = AUDIO_S16;\n    Want.channels = 2;\n    Want.samples = 4096;\n    Want.callback = &amp;AudioCallback;\n    Want.userdata = &amp;AudioUserData;\n    AudioDeviceID = SDL_OpenAudioDevice(0, 0, &amp;Want, &amp;Have, SDL_AUDIO_ALLOW_ANY_CHANGE);\n    SDL_PauseAudioDevice(AudioDeviceID, 0); // Start playing\n\n    Uint32* PixelMap = calloc(INITIAL_SCREEN_WIDTH * INITIAL_SCREEN_HEIGHT, sizeof(PixelMap));\n\n    int PixelMapLocation = 0;\n    int Running = 1;\n    while(Running)\n    {\n\n        SDL_Event Event;\n        while(SDL_PollEvent(&amp;Event))\n        {\n            if(Event.type == SDL_QUIT)\n            {\n                Running = 0;\n                break;\n            }\n        }\n\n        // Test colors\n        PixelMapLocation = 0;\n        for(int Row = 0; Row &lt; INITIAL_SCREEN_WIDTH; ++Row)\n        {\n            for(int Col = 0; Col &lt; INITIAL_SCREEN_HEIGHT; ++Col)\n            {\n                PixelMap[PixelMapLocation++] = 0xFF00FF;\n            }\n        }\n        for(int Row = 0; Row &lt; INITIAL_SCREEN_WIDTH; ++Row)\n        {\n            for(int Col = 0; Col &lt; INITIAL_SCREEN_HEIGHT; ++Col)\n            {\n                PixelMap[PixelMapLocation++] = 0x00FFFF;\n            }\n        }\n\n        SDL_UpdateTexture(Screen, 0, PixelMap, INITIAL_SCREEN_WIDTH * sizeof(PixelMap));\n        SDL_RenderClear(Renderer);\n        SDL_RenderCopy(Renderer, Screen, 0, 0);\n        SDL_RenderPresent(Renderer);\n    }\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1569962820, "post_id": 58192026, "comment_id": 102763420, "body": "Overrunning array boundaries is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1569962881, "post_id": 58192026, "comment_id": 102763432, "body": "<i>You</i> are the one who knows how much you have allocated and <i>you</i> should make sure not to exceed it. C does not have this mechanism, it is not memory-safe language. BTW, it is not unique to heap allocation but any."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1569962987, "post_id": 58192026, "comment_id": 102763464, "body": "<code>(int *)malloc(2);</code> does not allocate enough memory for even <i>one</i> 32-bit <code>int</code>. That&#39;s 2 <b>bytes</b>. I suggest <code>int *array = malloc(6 * sizeof *array);</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1569963237, "post_id": 58192026, "comment_id": 102763547, "body": "<code>sizeof(array)</code> <a href=\"https://stackoverflow.com/q/492384/10077\">doesn&#39;t give you what you think</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1569963342, "post_id": 58192026, "comment_id": 102763584, "body": "<i>&quot;Why no segmentation fault?&quot;</i> If you poke a pointed stick around a room full of people and no-one gets blinded, it&#39;s because <i>nobody got poked in the eye.</i>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1569963385, "post_id": 58192026, "comment_id": 102763604, "body": "undefined behavior is just that,, sometimes it manifests in a seg fault, sometimes it doesn&#39;t (you <i>hope</i> it seg faults, so you can identify and fix it). Once you break the rules by invoking UB all bets are off. Do not waste your time trying to make sense of your results here. They can and will change with different compiler flags, different versions of compilers, different machines, run at different times, etc."}, {"owner": {"reputation": 69, "user_id": 12063903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3f5c863c34c46c556bbfe8c1966a31?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/12063903/someone"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1569963387, "post_id": 58192026, "comment_id": 102763606, "body": "@FredLarson So what can i use to determine the size of  this heap array?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1569963447, "post_id": 58192026, "comment_id": 102763630, "body": "@Someone: See Joshua&#39;s answer, or the accepted answer to the question I linked in my second comment."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569963526, "post_id": 58192026, "comment_id": 102763656, "body": "The size of the heap array is <code>2</code>, the value you passed to <code>malloc</code>."}, {"owner": {"reputation": 69, "user_id": 12063903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3f5c863c34c46c556bbfe8c1966a31?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/12063903/someone"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569963646, "post_id": 58192026, "comment_id": 102763702, "body": "@WeatherVane I know, but as you can see i used more than two element to fill the array, and no error was occured."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1569963662, "post_id": 58192026, "comment_id": 102763708, "body": "if <code>malloc</code> doesn&#39;t return a NULL pointer, then you have access to <i>at least</i> as much memory as you requested (perhaps more, never less), but you should <i>always</i> assume you only have as much memory as you requested. Accessing even a byte past it invokes UB."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1569967148, "post_id": 58192026, "comment_id": 102764793, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3509714/i-can-use-more-memory-than-how-much-ive-allocated-with-malloc-why\">I can use more memory than how much I&#39;ve allocated with malloc(), why?</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1569967724, "post_id": 58192026, "comment_id": 102764964, "body": "\u200d\u200d<code>int *array = malloc(2*sizeof(int)); printf(&quot;size: %zu\\n&quot;,sizeof(array)&#47;sizeof(array[0]));</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1569967850, "post_id": 58192026, "comment_id": 102764996, "body": "Above is true way of allocate two integer on heap and check the size of array variable. array now show 2, this is true on all systems."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1569968271, "post_id": 58192026, "comment_id": 102765095, "body": "Think of it this way: suppose that your array was holding some other object type. Say, for example, a <code>struct</code> that took a kilobyte all by itself: <code>struct Big { char data[1024]; };</code>. How will <code>malloc</code> know that you need an array two kilobytes large (to hold two objects of type <code>Big</code>)? Figure that out and you&#39;ll know what&#39;s wrong (shouldn&#39;t be hard). Hint: <code>malloc(2)</code> allocates enough memory to hold two <code>char</code> objects, i.e. you could copy <code>char data[2]</code> into that malloc-ed area. Two bytes. Vs. two kilobytes :)"}], "answers": [{"tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1569963056, "creation_date": 1569963056, "answer_id": 58192096, "question_id": 58192026, "link": "https://stackoverflow.com/questions/58192026/array-allocation-on-the-heap-in-c/58192096#58192096", "title": "Array Allocation on the Heap in C", "body": "<p>You can't. It's impossible.</p>\n\n<p>Once upon a time a certain heap manager exposed this information by providing another function that would indeed return the real size. (It's padded up to the next block size.) They took it out after it was discovered to have caused more bugs than it prevented.</p>\n\n<p>On most heap managers, the real size in bytes can be found at a small negative offset, but not all of them. Don't write this code. You will regret it if you have to maintain it. The heap manager can be swapped out from under you and you won't know what went wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 1, "creation_date": 1569966554, "post_id": 58192332, "comment_id": 102764615, "body": "@Macmade My bad. My ints are 4 bytes. I typed out the answer too quickly. Pointers are 64 bit (8 bytes), ints are 32 bits. Thanks for the correction."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1569977640, "post_id": 58192332, "comment_id": 102766903, "body": "<code>int *array = malloc(sizeof *array * NUM_INTS_WANTED);</code> (if you always use the dereferenced pointer to set the type-size, you will never get it wrong <code>:)</code> Then <code>if (!array) { perror (&quot;malloc-array&quot;); return 1; }</code> (always <b><i>validate</i></b> each allocation)"}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569986184, "post_id": 58192332, "comment_id": 102768269, "body": "@DavidC.Rankin That&#39;s excellent advice regarding checking if the malloc succeeded. I would be concerned with using sizeof(*array) because it makes the code appear more general than it really is. If *array is an non-word number of bytes such as three bytes, then the malloc calculation may not take into account element alignment. I know of solutions that are compiler specific, but I thought that this was probably would over complicate the answer for the user. Would be interested in hearing your thoughts on making malloc tolerant of element alignment issues. Perhaps calloc would be more general?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1570036295, "post_id": 58192332, "comment_id": 102790550, "body": "@ScottK <i>If *array is an non-word number of bytes such as three bytes, then the malloc calculation may not take into account element alignment.</i>  Not true. Per <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.3.4p4\" rel=\"nofollow noreferrer\"><b>6.5.3.4 The sizeof and _Alignof operators</b>, paragraph 4</a> of the C11 standard: &quot;When applied to an operand that has structure or union type, the result is the total number of bytes in such an object, including internal and trailing padding.&quot;  If your three-byte object has a 4-byte alignment requirement,  it will have one trailing byte of padding and <code>sizeof()</code> will return 4."}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570040118, "post_id": 58192332, "comment_id": 102792236, "body": "@AndrewHenle Thanks! I did not know that. My C usage predates C11. Started using it in the 1980s and our compiler allowed us to set alignment properties on individual variables. Good to know this is now standardized in C11"}], "tags": [], "owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "is_accepted": true, "score": 4, "last_activity_date": 1570033491, "last_edit_date": 1570033491, "creation_date": 1569964381, "answer_id": 58192332, "question_id": 58192026, "link": "https://stackoverflow.com/questions/58192026/array-allocation-on-the-heap-in-c/58192332#58192332", "title": "Array Allocation on the Heap in C", "body": "<p>To correctly allocate an array using <code>malloc</code>, use sizeof to determine the size of each element in your array, then multiply by the number of each that you need.</p>\n\n<p>Your code is only allocating 2 bytes of memory in heap, so when you write these integers (which take 4 bytes each on my machine), you are overwriting the values of unrelated state within the heap located beyond those two bytes, thus corrupting the machine state and creating undefined (that's bad) behavior.</p>\n\n<p>In addition, your <code>for</code> loop was looping on the size of array pointer, which is typically 8 bytes. So your <code>for</code> loop would have tried to walk over 8 int elements, in an array of 6 ints in which you had only allocated 2 byte instead of the 24 bytes needed. Lots of bad undefined behaviour to go around here! </p>\n\n<p>You may or may not get a segmentation fault due to this. A segmentation fault means you are dereferencing a pointer to an invalid page (segment) of memory, and this is caught by the hardware. </p>\n\n<p>When you corrupt memory, you may not see the result of your error immediately as a segmentation fault if the memory you are writing is valid memory. Worse, if you corrupt the stack or a pointer, it may take a long time to get an actual fault to help detect the corruption created. This makes it hard to connect the fault to the event that caused the exception since your code could run for a long time before getting a segmentation fault.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define NUM_INTS_WANTED   6\n\nint main(int argc, char* argv[]){\n    // No more trampling memory since array allocated to correct size       \n    int *array = malloc(sizeof(int)*NUM_INTS_WANTED);\n\n    // Always check if malloc succeeded by checking that pointer is not NULL\n    if (array != NULL) {\n       array[0] = 2;\n       array[1] = 1;\n       array[2] = 3;\n       array[3] = 4;\n       array[4] = 4;\n       array[5] = 6;\n\n       // No more seeing 8 ints since you stop after 6 ints now\n       for(int i = 0; i &lt; NUM_INTS_WANTED; i++){\n           printf(\"%d\\n\",array[i]);\n       }\n    } else {\n       // malloc failed! Report it.\n       printf(\"malloc failed!\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 12063903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3f5c863c34c46c556bbfe8c1966a31?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/12063903/someone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 58192332, "answer_count": 2, "score": 0, "last_activity_date": 1570033491, "creation_date": 1569962675, "last_edit_date": 1569962830, "question_id": 58192026, "link": "https://stackoverflow.com/questions/58192026/array-allocation-on-the-heap-in-c", "title": "Array Allocation on the Heap in C", "body": "<p>I have already worked with the stack and the heap, and in the memory management topic generally, but there is a lot of thing's i can't understand</p>\n\n<p>Like, if i'm allocating an array of integer using the heap with <code>malloc</code> and <code>realloc</code> how can i determine the exact size of the array i want to work with? </p>\n\n<p>This Example:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[]){\n    int *array = (int *)malloc(2);\n\n    array[0] = 2;\n    array[1] = 1;\n    //What? i have allocated just 2 to be the size\n    array[2] = 3;\n    array[3] = 4;\n    array[4] = 4;\n    array[5] = 6;\n    //there is no segmentation fault\n\n\n    for(int i = 0; i &lt; sizeof(array); i++){\n        printf(\"%d\\n\",array[i]);\n    }\n\n}\n</code></pre>\n\n<p>And the wierd result i'm getting is:</p>\n\n<pre><code>2\n1\n3\n4\n4\n6\n1041 // ???\n0\n</code></pre>\n\n<p>So, can someone explain to me how can i use <code>malloc</code> in the 100% correct way?</p>\n"}, {"tags": ["c", "memory", "memory-leaks", "malloc"], "comments": [{"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1569961012, "post_id": 58191665, "comment_id": 102762761, "body": "<code>The error occurs right at allocation after compilation and gives</code> means in execution time? Have you tried to use <code>gdb</code> to trace the error?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1569961017, "post_id": 58191665, "comment_id": 102762762, "body": "<code>valgrind</code> if you can run this code on a machine that supports it."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1569961505, "post_id": 58191665, "comment_id": 102762944, "body": "The actual problem might have been caused elsewhere and only shows up when <code>malloc</code> gets called."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1569961523, "post_id": 58191665, "comment_id": 102762956, "body": "This is not an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>. There is insufficient information to offer a complete answer."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1569961950, "post_id": 58191665, "comment_id": 102763117, "body": "The memory is not being corrupted when you call <code>malloc</code>. It&#39;s getting corrupted later on when you write to the memory. Somehow, you are writing past the end of the memory allocated to your program."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 9523713, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DDy4aE9TDZk/AAAAAAAAAAI/AAAAAAAAADg/1XE0nGeo6Pk/photo.jpg?sz=128", "display_name": "Murnawful", "link": "https://stackoverflow.com/users/9523713/murnawful"}, "is_accepted": false, "score": 1, "last_activity_date": 1569963580, "creation_date": 1569963580, "answer_id": 58192194, "question_id": 58191665, "link": "https://stackoverflow.com/questions/58191665/malloc-memory-corruption-aborted-core-dumped/58192194#58192194", "title": "malloc(): memory corruption; Aborted (core dumped)", "body": "<p>As advised in the comments, an instance of <code>valgrind</code> allowed me to find that the problem was lying elsewhere and indeed was due to a writing pas the end of memory allocation.</p>\n\n<p>Thanks to everyone for the help.</p>\n"}], "owner": {"reputation": 33, "user_id": 9523713, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DDy4aE9TDZk/AAAAAAAAAAI/AAAAAAAAADg/1XE0nGeo6Pk/photo.jpg?sz=128", "display_name": "Murnawful", "link": "https://stackoverflow.com/users/9523713/murnawful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1569963580, "creation_date": 1569960794, "last_edit_date": 1569961779, "question_id": 58191665, "link": "https://stackoverflow.com/questions/58191665/malloc-memory-corruption-aborted-core-dumped", "title": "malloc(): memory corruption; Aborted (core dumped)", "body": "<p>I'm having a serious problem with malloc() command. The thing is as is: I'm writing a code to perform the calculation of the residual of a matrix linear problem. In order to do so, I'm allocating memory to store a matrix vector <code>c</code> which will hold first the result of matrix-vector multiplication. Afterwards I simply substract the resulting vector with another vector, calculate the norm etc...</p>\n\n<p>The error occurs right at allocation after compilation and gives </p>\n\n<pre><code>malloc(): memory corruption\nAborted (core dumped)\n</code></pre>\n\n<p>I'm providing the code here</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"../headers/norm.h\"\n#include \"../headers/prodMatVec.h\"\n\ndouble residual(int size, double *a, int *ja, int *ia, double *x, double *b)\n/*\n  Aim\n  ===\n\n      The following functions evaluates the residual of the resolution\n      of a linear problem of the form\n\n                           Ax = b\n\n      As the output of the resolution of such a problem is the vector x,\n      the residual gives an indication on how far (in terms of the\n      the euclidian norm of vectors) lies the product Ax from what it\n      should exactly be, namely b. Therefore, the normalized residual is\n\n                           ||Ax - b||\n                      r =  ==========\n                             ||b||\n\n      This operation involves functions such as matrix-vector product\n      and the application of the euclidian norm. These are described\n      in the corresponding functions.\n\n  Arguments\n  =========\n    size  (input)  -  size of the given vectors and matrix\n    x     (input)  -  points to table 'x'\n    ia    (input)  -  points to table 'ia' from matrix A\n    ja    (input)  -  points to table 'ja' from matrix A\n    a     (input)  -  points to table 'a' from matrix A\n    b     (input)  -  points to table 'b'\n*/\n{\n\n  /* Variables declaration */\n  int i;\n  double *c, num, denom;\n\n  /* Memory allocation for temporary result of matrix-vector product */\n  c = malloc(size * sizeof(double));  // PROBLEM: MEMORY CORRUPTION\n  if (c == NULL) {\n    printf(\"\\n ERROR : not enough memory to generate the system\\n\\n\");\n    return 1;\n  }\n\n  /* Computation of matrix-vector product */\n  prodMatVec(size, a, ja, ia, x, c);\n\n  /* Computation of the numerator vector */\n  for(i = 0; i &lt; size; i++)\n    c[i] -= b[i];\n\n  /* Computation of norms */\n  num = norm(size, c);\n  denom = norm(size, b);\n\n  for(i = 0; i &lt; size; i++) // not necessary\n    c[i] = 1;\n\n  /* Memory release */\n  free(c);\n\n  /* Return the quotient between both terms */\n  return num/denom;\n}\n</code></pre>\n\n<p>Can anyone help me? If needed I can provide more information.</p>\n\n<p>Thanks in advance !</p>\n\n<p>EDIT:</p>\n\n<p>Using <code>gdb</code> (which I am not familiar with) the code gives</p>\n\n<pre><code>malloc(): memory corruption\n\nThread 1 \"main\" received signal SIGABRT, Aborted.\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1569960583, "post_id": 58191611, "comment_id": 102762598, "body": "Please format your code so that it is readable and properly indented.  You also need to show your attempt at the decompression part and details what exactly you&#39;re having trouble with."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1569960669, "post_id": 58191611, "comment_id": 102762634, "body": "I&#39;m voting to close this question as off-topic because a question about code should contain human readable code."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 2, "creation_date": 1569961124, "post_id": 58191611, "comment_id": 102762803, "body": "Where is your decompress function?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 6, "creation_date": 1569961136, "post_id": 58191611, "comment_id": 102762811, "body": "You should show your attempt at decompression function... The code you show contains nothing about decompression."}, {"owner": {"reputation": 7, "user_id": 12132048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oXT-wsm-Unc/AAAAAAAAAAI/AAAAAAAAAWU/SlwZsudq9OI/photo.jpg?sz=128", "display_name": "Saquib Ahmed", "link": "https://stackoverflow.com/users/12132048/saquib-ahmed"}, "edited": false, "score": 0, "creation_date": 1569961293, "post_id": 58191611, "comment_id": 102762869, "body": "Decompression code is incorrect and incomplete and i&#39;ve no idea how to do"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569961624, "post_id": 58191611, "comment_id": 102762994, "body": "Read the character and its length: print that many characters, move on to the next. It&#39;s a simple version of <a href=\"https://en.wikipedia.org/wiki/Run-length_encoding\" rel=\"nofollow noreferrer\">Run-length encoding</a>."}, {"owner": {"reputation": 7, "user_id": 12132048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oXT-wsm-Unc/AAAAAAAAAAI/AAAAAAAAAWU/SlwZsudq9OI/photo.jpg?sz=128", "display_name": "Saquib Ahmed", "link": "https://stackoverflow.com/users/12132048/saquib-ahmed"}, "edited": false, "score": 0, "creation_date": 1569961911, "post_id": 58191611, "comment_id": 102763100, "body": "Weather Vane I&#39;ve tried but i&#39;m not getting correct output"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1569962417, "post_id": 58191611, "comment_id": 102763279, "body": "You should post the code that doesn&#39;t work - the complete program. It&#39;s like going to the repair shop without your car and saying &quot;it does not work, why not?&quot; You might benefit by reading the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569967414, "post_id": 58191611, "comment_id": 102764875, "body": "This is a terrible idea.  Consider &quot;111222333&quot;, that will result in &quot;132333&quot;, which is then ambiguous w.r.t. decompression, and could be interpreted as a string of 32333 &#39;1&#39;s or many other combinations.  If you have tried something that does not work, show that code.  Showing the code that works is entirely pointless."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1569984450, "post_id": 58191611, "comment_id": 102768017, "body": "Saquib, please change your code to have only 1 semicolon per line. ie: add a return after each semicolon. Also, if you just do as @hyde has asked and <i>show all your code</i> and the <i>results of your output</i> I will answer your question for you. I&#39;ve upvoted it. Aside from hiding your attempts instead of sharing them with us, it&#39;s a good question I think and is nice to see as a practice &quot;compression&quot; approach to get me thinking. There are solutions to all of the possible problems, such as those by Clifford. Solving them just requires some knowledge, thought, and skills, and maybe some peer review."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569968376, "post_id": 58192090, "comment_id": 102765125, "body": "Best not to answer a badly framed question until it has been &quot;fixed&quot;.  Moreover this is unnecessarily over-complex.  The <code>compress()</code> function in the question always generates strings of the form <code>&lt;char&gt;&lt;count&gt;...</code> even when the character is not repeated.  Your solution handles <code>&lt;char&gt;&lt;char&gt;...</code> sequences also.  Even if that were not the case it remains over complicated."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569984236, "post_id": 58192090, "comment_id": 102767986, "body": "@Clifford, regarding: <code>Best not to answer a badly framed question until it has been &quot;fixed&quot;</code>, I disagree, especially when the asker of the question is a new user and treating them poorly is just going to drive them away. I prefer those who just try to help as able, as @JohnG did."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1569984812, "post_id": 58192090, "comment_id": 102768077, "body": "For anyone else wondering (like me), what <code>sz</code> means in many of the variable names here, <code>sz means &quot;string of characters, terminated by a null character&quot; (z stands for zero).</code> (from Tomcat, here: <a href=\"http://forums.codeguru.com/showthread.php?83718-What-does-the-sz-in-string-variables-mean\" rel=\"nofollow noreferrer\">forums.codeguru.com/&hellip;</a>). It is part of &quot;Apps Hungarian&quot; notation; see here: <a href=\"https://en.wikipedia.org/wiki/Hungarian_notation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Hungarian_notation</a>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1570004481, "post_id": 58192090, "comment_id": 102773660, "body": "@GabrielStaples : Encouraging a new user to improve their question (or answer) is not &quot;treating them poorly&quot;. All I an recommending is to hold off until the OP has responded to valid comments on the question. Several time he was asked not unreasonably to post the code of the failed attempt, and has willfully refused to do that. We can only guess at the reasons for that."}], "tags": [], "owner": {"reputation": 11, "user_id": 12114130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53685d93b6ba275e96fd394d74911e1?s=128&d=identicon&r=PG", "display_name": "JohnG", "link": "https://stackoverflow.com/users/12114130/johng"}, "is_accepted": false, "score": -1, "last_activity_date": 1569963023, "creation_date": 1569963023, "answer_id": 58192090, "question_id": 58191611, "link": "https://stackoverflow.com/questions/58191611/compression-and-decompression/58192090#58192090", "title": "Compression And Decompression", "body": "<p>Assuming you will never need to have a numeric embedded in the string, this will work.  I just did it as old string/new string, but you can adapt it however works best for you.</p>\n\n<p>`</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char **argv[])\n{\n    char            szOldStr[] = \"a5b11c6\";\n    char            szNewStr[128];\n\n    int         iStrLen;\n    int         iNumChars;\n    int         iOldIndex;\n    int         iNewIndex;\n\n\n    iStrLen = strlen(szOldStr);\n    iOldIndex = 0;\n    iNewIndex = 0;\n\n    while (szOldStr[iOldIndex])\n    {\n        // Look for a number, which would represent a compressed character\n        if (isdigit(szOldStr[iOldIndex]))\n        {\n            iNumChars = atoi(szOldStr + iOldIndex);\n            // Memset one less character, because we already moved one \n            // into the new string\n            memset(szNewStr + iNewIndex, szNewStr[iNewIndex - 1], \n                   iNumChars - 1);  \n            iNewIndex += iNumChars - 1;\n\n            // Advance past the number\n            while (isdigit(szOldStr[iOldIndex]))\n                ++iOldIndex;\n        }\n        else\n        {\n            // Not a number, so just move the character to the new string\n            szNewStr[iNewIndex] = szOldStr[iOldIndex];\n            ++iNewIndex;\n            ++iOldIndex;\n        }\n    }\n\n    // Put a null at the end of our new string\n    szNewStr[iNewIndex] = '\\0';\n\n    // Show what we created\n    puts(szNewStr);\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1578091178, "creation_date": 1578091178, "answer_id": 59586200, "question_id": 58191611, "link": "https://stackoverflow.com/questions/58191611/compression-and-decompression/59586200#59586200", "title": "Compression And Decompression", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid decompress(const char* code)\n{\n    while(*code)\n    {\n        char c = *code++;   // Get the letter to be repeated\n        int rep = 0;\n        while(isdigit(*code))\n        {\n            rep = rep*10 + *code++ - '0';  // Get the number of times to repeat the letter\n        }\n        char set[rep];\n        printf(\"%.*s\", rep, memset(set, c, rep));  // Print letter [c], repeated [rep] times\n    }\n}\n\n\nint main(void)\n{\n    char* code = \"A4B5C6\";\n    decompress(code);   \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 12132048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oXT-wsm-Unc/AAAAAAAAAAI/AAAAAAAAAWU/SlwZsudq9OI/photo.jpg?sz=128", "display_name": "Saquib Ahmed", "link": "https://stackoverflow.com/users/12132048/saquib-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1578091178, "creation_date": 1569960468, "last_edit_date": 1569961091, "question_id": 58191611, "link": "https://stackoverflow.com/questions/58191611/compression-and-decompression", "title": "Compression And Decompression", "body": "<p>Using C language\nI've compressed a string like-> <code>aaaabbbbbbccccc</code> into <code>a4b6c5</code>, now I want to decompress <code>a4b6c5</code> into <code>aaaabbbbbbccccc</code>. I've tried but I'm unable to do this decompression. Please help me out guys.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid compress(char*stng);\n\nint main(){\n    char stng[50000];\n    printf(\"Enter the String :\");  \n    scanf(\"%s\",stng);\n    compress(stng);\n   return 0; \n}\n\nvoid compress(char*stng)\n{  \n\n    int i=0,count=0;  \n    char c=stng[i];  \n\n    while(stng[i]!='\\0')\n    {  \n        if(c==stng[i])\n            count++; \n        else\n        { \n            printf(\"%c%d\",c,count);  c=stng[i];  count=1;  \n        }\n        i++;  \n    }\n\n    printf(\"%c%d\\n\",c,count); \n}\n</code></pre>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 1830, "user_id": 3343753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY4qS.jpg?s=128&g=1", "display_name": "Pedro Rodrigues", "link": "https://stackoverflow.com/users/3343753/pedro-rodrigues"}, "edited": false, "score": 1, "creation_date": 1569967624, "post_id": 58191554, "comment_id": 102764937, "body": "What exactly is your question? And please add language tag, so people familiar with the language can more easily find your question."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570000517, "post_id": 58191554, "comment_id": 102771893, "body": "What output do you expect?"}], "owner": {"reputation": 13, "user_id": 9901902, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ofir machlof", "link": "https://stackoverflow.com/users/9901902/ofir-machlof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569982664, "creation_date": 1569960175, "last_edit_date": 1569982664, "question_id": 58191554, "link": "https://stackoverflow.com/questions/58191554/how-to-save-link-list-to-file-with-data-filed-as-struct", "title": "How to save link list to file with &quot;data&quot; filed as struct", "body": "<p>I want to save/load linked list to/from a file, but the problem is the data filed in the linked list is struct and it saves the address and not the data.</p>\n\n<p>How can I solve this?</p>\n\n<p>This the link list:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct LNode\n{\n    void* data;\n    struct LNode* next;\n} LNode;\n\ntypedef struct\n{\n    struct  LNode* head, * tail;\n    void (*printNode)(void*);\n    int (*compare)(void*, void*);\n} List;\n</code></pre>\n\n<p>This is the struct in the data filed</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct _Patient\n{\n    char* name;\n    int year;\n    Doctor* doctor;\n} typedef Patient;\n</code></pre>\n\n<p>This the function I did</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void saveList(const char* fileName, const List* list) {\n    FILE* f = fopen(fileName, \"wb\");\n    LNode* temp;\n    temp = list-&gt;head;\n\n    while (temp != NULL) {\n        if (f != NULL) {\n            fwrite(temp, sizeof(LNode), 1, f);\n            //fcloseall();\n        }\n        temp = temp-&gt;next;\n    }\n    fclose(f);\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1569960073, "post_id": 58191430, "comment_id": 102762403, "body": "That can be symptomatic of <i>undefined behaviour</i> somewhere in the code. When I run it (MSVC) it prints garbage for all except the first card in each hand: <code>Players 1&#39;s Hand - 9C  e &#218;_  C  i  w  y</code> and <code>Players 2&#39;s Hand - 9H &#218;R 6D &#218;R 5C &#218;R KS</code> and <code>Players 1&#39;s Hand - 9C  e &#218;_  C  i  w  y  m</code> and <code>Players 2&#39;s Hand - 9H \u203c[ 6D \u203c] KS \u203c_</code>"}, {"owner": {"reputation": 353, "user_id": 1448063, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bfb70f66f743c5322975f9c269771796?s=128&d=identicon&r=PG", "display_name": "JPHamlett", "link": "https://stackoverflow.com/users/1448063/jphamlett"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569960350, "post_id": 58191430, "comment_id": 102762517, "body": "I use gcc and do not see that"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569960382, "post_id": 58191430, "comment_id": 102762525, "body": "That&#39;s how it goes with UB. It should not make any difference which compiler you use, or what debugging or optimisation options you use."}, {"owner": {"reputation": 353, "user_id": 1448063, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bfb70f66f743c5322975f9c269771796?s=128&d=identicon&r=PG", "display_name": "JPHamlett", "link": "https://stackoverflow.com/users/1448063/jphamlett"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569960619, "post_id": 58191430, "comment_id": 102762609, "body": "Ok, how do I deal with UB?"}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 1, "creation_date": 1569964505, "post_id": 58191430, "comment_id": 102763993, "body": "Well, the short and unhelpful answer is <i>&quot;write well defined code&quot;</i>. More helpful tidbits inlude things like <i>&quot;Initialize everything when you define it&quot;</i>, <i>&quot;Be clear about the notional &#39;ownership&#39; of heap allocated blocks in your code, and <code>free</code> when the owner goes away&quot;</i>, <i>&quot;Check return codes habitually&quot;</i>, <i>&quot;Null-test pointers before using them if you can&#39;t prove that they are good some other way&quot;</i>, and so on. The list should include <i>&quot;Allocate in automatic storage by preference to <code>alloc</code> family functions&quot;</i> except that you can&#39;t avoid using the head for this assignment."}, {"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1569965298, "post_id": 58191430, "comment_id": 102764235, "body": "Why do you need a malloc() call in remove_card?  Since you want to remove it from a linked list all you should need to move the pointer (and free the removed entry)."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569962851, "post_id": 58191912, "comment_id": 102763426, "body": "Unfortunately still junk in the dealt hands - different junk each run. Did you try it? The edit suggests not."}, {"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569964082, "post_id": 58191912, "comment_id": 102763836, "body": "No I did not.  I just addressed the UB.  There is at least one other issue with printDeck().  I added it to my answer."}], "tags": [], "owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "is_accepted": true, "score": 1, "last_activity_date": 1569964464, "last_edit_date": 1569964464, "creation_date": 1569962059, "answer_id": 58191912, "question_id": 58191430, "link": "https://stackoverflow.com/questions/58191430/go-fish-card-transfer/58191912#58191912", "title": "Go fish card transfer", "body": "<p>You call deal_player_cards() -> add_card() and then check the value of target->card_list.  card_list and hand_size are not initialized as this point.  In deal_player_cards() you need to initialize the player structure before calling add_card().  This is causing the undefined behavior you are running into.</p>\n\n<pre><code>int deal_player_cards(struct player *target)\n{\n    target-&gt;card_list = NULL;\n    target-&gt;hand_size = 0;\n\n    if (deck_size() &lt; 7)\n    { // We don't have enough cards to deal\n        return 1;\n    }\n    for (int i = 0; i &lt; 7; i++)\n    {\n        add_card(target, next_card());\n    }\n    return 0;\n}\n</code></pre>\n\n<p>There are other issues.  printDeck() assumes the the card list is an array.  However, add_card() sets it up as a linked list.  You can't assume that all the entries will be sequential in memory.  When printing them you need to traverse the linked list the same way you added cards to it.</p>\n\n<pre><code>void printDeck(struct player user) {\n    struct hand *temp_hand;\n\n    temp_hand = user.card_list;\n    while (temp_hand != NULL)\n    {\n        printf(\"%c%c \", temp_hand-&gt;top.rank, temp_hand-&gt;top.suit);\n        temp_hand = temp_hand-&gt;next;\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 1448063, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bfb70f66f743c5322975f9c269771796?s=128&d=identicon&r=PG", "display_name": "JPHamlett", "link": "https://stackoverflow.com/users/1448063/jphamlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 58191912, "answer_count": 1, "score": 0, "last_activity_date": 1570485483, "creation_date": 1569959564, "question_id": 58191430, "link": "https://stackoverflow.com/questions/58191430/go-fish-card-transfer", "title": "Go fish card transfer", "body": "<p>I have to create a go fish game in c. I have most of the brains working except the exchange of cards.</p>\n\n<p>I have rewritten this a bunch of times, it works when I go step by step in a debugger but does not work when I run the program</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct card\n{\n    char suit;\n    char rank;\n};\n\nstruct player {\n    struct hand* card_list;\n    char book[7];\n    size_t hand_size;\n};\n\nstruct deck\n{\n    struct card list[52];\n    int top_card;\n};\n\nstruct hand\n{\n    struct card top;\n    struct hand *next;\n};\n\nstruct player user;\nstruct player computer;\nstruct deck deck_instance;\n\nint add_card(struct player *target, struct card *new_card) {\n    struct hand *end = (struct hand *) malloc(sizeof(struct hand));\n    struct hand *tmp = target-&gt;card_list;\n    end-&gt;top.rank = new_card-&gt;rank;\n    end-&gt;top.suit = new_card-&gt;suit;\n    end-&gt;next = NULL;\n\n    if (target-&gt;card_list == NULL) {\n        target-&gt;card_list = end;\n        target-&gt;hand_size++;\n        return 0;\n    } else {\n        while (tmp-&gt;next != NULL) {\n            tmp = tmp-&gt;next;\n        }\n    }\n    tmp-&gt;next = end;\n    target-&gt;hand_size++;\n    return 0;\n}\n\nint remove_card(struct player* target, struct card* old_card) {\n    struct hand *new_hand = malloc(sizeof(struct hand));\n    int new_count = 0;\n    struct hand *tmp = target-&gt;card_list;\n    struct hand *nextTmp = new_hand;\n    while (tmp != NULL) {\n        if (!(tmp-&gt;top.suit == old_card-&gt;suit &amp;&amp; tmp-&gt;top.rank == old_card-&gt;rank)) {\n            nextTmp-&gt;top.rank = tmp-&gt;top.rank;\n            nextTmp-&gt;top.suit = tmp-&gt;top.suit;\n            nextTmp-&gt;next = malloc(sizeof(struct hand));\n            nextTmp = nextTmp-&gt;next;\n            new_count++;\n        }\n        tmp = tmp-&gt;next;\n    }\n    target-&gt;card_list = new_hand;\n    target-&gt;hand_size = new_count;\n    return 0;\n}\n\nstruct card *next_card()\n{\n    return &amp;deck_instance.list[deck_instance.top_card++];\n}\n\nsize_t deck_size()\n{\n    return 52 - deck_instance.top_card;\n}\n\nint deal_player_cards(struct player *target)\n{\n    if (deck_size() &lt; 7)\n    { // We don't have enough cards to deal\n        return 1;\n    }\n    for (int i = 0; i &lt; 7; i++)\n    {\n        add_card(target, next_card());\n    }\n    return 0;\n}\n\nint shuffle()\n{\n    const char *suits[4] = {\"S\", \"H\", \"D\", \"C\"};\n    const char *ranks[13] = {\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"T\", \"J\", \"Q\", \"K\", \"A\"};\n    int suit = 0;\n    int rank = 0;\n    for (int i = 0; i &lt; 52; i++)\n    {\n        deck_instance.list[i].rank = *ranks[rank];\n        rank = (rank + 1) % 13;\n        deck_instance.list[i].suit = *suits[suit];\n        suit = (suit + 1) % 4;\n    }\n    for (int i = 0; i &lt; 1000; i++)\n    {\n        int j = rand() % 52;\n        int k = rand() % 52;\n        struct card c = deck_instance.list[j];\n        deck_instance.list[j] = deck_instance.list[k];\n        deck_instance.list[k] = c;\n    }\n    return 0;\n}\n\nvoid printDeck(struct player user) {\n    for (int i = 0; i &lt; user.hand_size; i++) {\n        printf(\"%c%c \", user.card_list[i].top.rank, user.card_list[i].top.suit);\n    }\n    printf(\"\\n\");\n}\n\nint transfer_cards(struct player* src, struct player* dest, char rank) {\n    int result = 0;\n    int hand_size = src-&gt;hand_size;\n    for (int i = 0; i &lt; hand_size; i++) {\n        if (src-&gt;card_list[i].top.rank == rank) {\n            result++;\n            add_card(dest, &amp;src-&gt;card_list[i].top);\n            remove_card(src, &amp;src-&gt;card_list[i].top);\n\n        }\n    }\n    return result;\n}\n\nint main(int args, char* argv[])\n{\n    printf(\"Shuffling deck....\\n\");\n    shuffle();\n    deal_player_cards(&amp;user);\n    deal_player_cards(&amp;computer);\n    printf(\"Players 1's Hand - \");\n    printDeck(user);\n    printf(\"Players 2's Hand - \");\n    printDeck(computer);\n    char rank = '5';\n    transfer_cards(&amp;computer, &amp;user, rank);\n    printf(\"Players 1's Hand - \");\n    printDeck(user);\n    printf(\"Players 2's Hand - \");\n    printDeck(computer);\n\n}\n\n\n</code></pre>\n\n<p>The problem lives in add_card I believe. The rest of the code is just to get the c program to run</p>\n\n<p>Right now I get this output</p>\n\n<pre><code>Shuffling deck....\nPlayers 1's Hand - JC 5H 9H AH TD 3C AS \nPlayers 2's Hand - 4D 5D TS QC 6H TC 5S \nPlayers 1's Hand - JC 5H 9H AH TD 3C AS 4D 5D \nPlayers 2's Hand - 4D TS QC 6H TC  \n</code></pre>\n\n<p>The correct output should be </p>\n\n<pre><code>Shuffling deck....\nPlayers 1's Hand - JC 5H 9H AH TD 3C AS \nPlayers 2's Hand - 4D 5D TS QC 6H TC 5S \nPlayers 1's Hand - JC 5H 9H AH TD 3C AS 5D 5S \nPlayers 2's Hand - 4D TS QC 6H TC  \n</code></pre>\n"}, {"tags": ["c", "arrays", "char", "readfile"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569958895, "post_id": 58191268, "comment_id": 102761939, "body": "<code>arr</code> is a 2-dimensional array. <code>arr[0]</code> is a string, <code>arr[0][0]</code> is a single character."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569959065, "post_id": 58191268, "comment_id": 102762005, "body": "The code you&#39;ve written seems to be for parsing a comma-separated string, it puts each word into a different element of the array."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569959112, "post_id": 58191268, "comment_id": 102762024, "body": "How could this not have been intentional, unless you just copied this code without understanding what it&#39;s for?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1569959380, "post_id": 58191268, "comment_id": 102762126, "body": "It&#39;s unusual to see the correct use of <code>feof()</code>."}, {"owner": {"reputation": 3, "user_id": 12150326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a4ec309da08f2bdb4b6f0b0079cd00?s=128&d=identicon&r=PG&f=1", "display_name": "foreverN00b38", "link": "https://stackoverflow.com/users/12150326/forevern00b38"}, "edited": false, "score": 0, "creation_date": 1569959390, "post_id": 58191268, "comment_id": 102762134, "body": "I had some help with this but I did modified it a little so it would read my text file. What I got was that it would read the string in my file and then put it into an array."}, {"owner": {"reputation": 3, "user_id": 12150326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a4ec309da08f2bdb4b6f0b0079cd00?s=128&d=identicon&r=PG&f=1", "display_name": "foreverN00b38", "link": "https://stackoverflow.com/users/12150326/forevern00b38"}, "edited": false, "score": 0, "creation_date": 1569959496, "post_id": 58191268, "comment_id": 102762177, "body": "I needed to use arr[length][50] because it&#39;s an array of a character array otherwise it won&#39;t put the char into my array, this is what I got when I tried looking it up"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12150326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a4ec309da08f2bdb4b6f0b0079cd00?s=128&d=identicon&r=PG&f=1", "display_name": "foreverN00b38", "link": "https://stackoverflow.com/users/12150326/forevern00b38"}, "edited": false, "score": 0, "creation_date": 1569960157, "post_id": 58191427, "comment_id": 102762436, "body": "Thank you, this worked! it made it so now the array is actually of the characters of the first word and not the whole string"}, {"owner": {"reputation": 118, "user_id": 6163381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1435de9c40b4e8a97b93d9df929be?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis B.", "link": "https://stackoverflow.com/users/6163381/dennis-b"}, "reply_to_user": {"reputation": 3, "user_id": 12150326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a4ec309da08f2bdb4b6f0b0079cd00?s=128&d=identicon&r=PG&f=1", "display_name": "foreverN00b38", "link": "https://stackoverflow.com/users/12150326/forevern00b38"}, "edited": false, "score": 0, "creation_date": 1569960410, "post_id": 58191427, "comment_id": 102762535, "body": "Glad to hear it worked. You can mark answers as accepted if you feel like you dont need any other answers, so other people dont waste their time (for lack of a better word) coming up with additional ones."}], "tags": [], "owner": {"reputation": 118, "user_id": 6163381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1435de9c40b4e8a97b93d9df929be?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis B.", "link": "https://stackoverflow.com/users/6163381/dennis-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1569959552, "creation_date": 1569959552, "answer_id": 58191427, "question_id": 58191268, "link": "https://stackoverflow.com/questions/58191268/how-do-i-store-each-char-from-a-file-into-an-array-in-c/58191427#58191427", "title": "How do I store each char from a file into an array in c", "body": "<p>As Barmar already pointed out, it's a two-dimensional array. You could probably do</p>\n\n<pre><code>for(j = 0; j &lt;= i; j++)\n{\n    int wordlength = strlen(arr[j]);\n    for (int h = 0; h &lt; wordlength; h++)\n    {\n        printf(\"%c\\n\", arr[j][h] );\n    }\n}\n</code></pre>\n\n<p>Edit: You'd have to include string.h though.</p>\n"}, {"tags": [], "owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "is_accepted": false, "score": 1, "last_activity_date": 1569959773, "creation_date": 1569959773, "answer_id": 58191474, "question_id": 58191268, "link": "https://stackoverflow.com/questions/58191268/how-do-i-store-each-char-from-a-file-into-an-array-in-c/58191474#58191474", "title": "How do I store each char from a file into an array in c", "body": "<p>A string is just an array of chars:</p>\n\n<pre><code>char exampleString[6] = \"Hello\";\n\nprintf( \"%c\\n\", exampleString[0]); // Prints 'H'\nprintf( \"%c\\n\", exampleString[1]); // Prints 'e'\nprintf( \"%c\\n\", exampleString[2]); // Prints 'l'\nprintf( \"%c\\n\", exampleString[3]); // Prints 'l'\nprintf( \"%c\\n\", exampleString[4]); // Prints 'o'\n</code></pre>\n\n<p>Actually <code>printf( \"%c\\n\", exampleString[5]);</code> prints... nothing, because (length+1)th character of a string is the null character (0x00); the string terminator.</p>\n\n<p>Since you defined a bidimensional array of chars, each row is a string. Since you store all chars at index 0 (you never increment variable i), <code>arr[0]</code> will contain exactly the string \"Hello\".\nIn order to access first character of the string you can print <code>arr[0][0]</code>, but I suggest to just declare a monodimensional array. Of course make sure that the array is able to fit the maximum file size (dim=maxLen+1), otherwise you will be writing <em>in the hyperspace</em>.</p>\n"}], "owner": {"reputation": 3, "user_id": 12150326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a4ec309da08f2bdb4b6f0b0079cd00?s=128&d=identicon&r=PG&f=1", "display_name": "foreverN00b38", "link": "https://stackoverflow.com/users/12150326/forevern00b38"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 58191427, "answer_count": 2, "score": -1, "last_activity_date": 1569959773, "creation_date": 1569958717, "last_edit_date": 1569958992, "question_id": 58191268, "link": "https://stackoverflow.com/questions/58191268/how-do-i-store-each-char-from-a-file-into-an-array-in-c", "title": "How do I store each char from a file into an array in c", "body": "<p>So I want to read a file and then storing the string character by character into a char array.\nMy input file is just a simple \"Hello\".\nI want to store the characters of this string into a char array so</p>\n\n<pre><code>arr[0] = H\narr[1] = e\narr[2] = l\narr[3] = l\narr[4] = o\n</code></pre>\n\n<p>My code is as follow but instead of storing each character, it stores the whole string instead</p>\n\n<pre><code>int main(void)\n{\n    FILE *ifp;\n    ifp = fopen(\"inputfile.c\",\"r\");     \n    int length = 20;\n    char arr[length][50];           \n    int i = 0;\n\n    while(1)\n    {\n        char r = (char)fgetc(ifp);\n        int k = 0;\n\n        while(r != ',' &amp;&amp; !feof(ifp))    \n        {             \n            arr[i][k++] = r;            \n            r = (char)fgetc(ifp);\n        }\n        arr[i][k] = 0;  \n\n        if(feof(ifp))\n        {       \n            break;\n        }\n        i++;\n    }\n\n    int j;\n\n    for(j = 0; j &lt;= i; j++)\n    {\n        printf(\"%s\\n\", arr[j] );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>What I get here is <code>arr[0] = \"Hello\"</code>\ninstead of <code>arr[0] = H</code>, <code>arr[1] = e</code> etc.</p>\n\n<p>Could I get some help as to how I could store character by character from the file and not the whole string?</p>\n"}, {"tags": ["c", "compiler-optimization", "built-in"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1569960429, "post_id": 58191162, "comment_id": 102762541, "body": "I think the advice would be - follow common patterns for common problems. Don&#39;t use &quot;smart&quot; hacks such as <code>xor</code> method for swapping, some weird arithmetics for finding minimum and such. These common patterns are the ones the compiler is likely to recognize."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569960672, "post_id": 58191162, "comment_id": 102762635, "body": "I&#39;ll echo @EugeneSh.&#39;s comment here, as a reformed <code>xor</code>-swap abuser."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569960736, "post_id": 58191162, "comment_id": 102762662, "body": "@EugeneSh. Right. <code>reverse</code> is a straight forward solution fore byte order reverse, however ICC still failed recognize it..."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1569961024, "post_id": 58191162, "comment_id": 102762768, "body": "@AlexLop. That&#39;s where maharvey&#39;s answer would come into play.  If one compiler doesn&#39;t optimize nicely, you can use conditional compilation directives to give it a special case.  You might also consider filing a bug (new feature?) on the lesser-optimized compiler&#39;s bug tracker so they might consider adding in an optimization for the common pattern."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1569961891, "post_id": 58191162, "comment_id": 102763091, "body": "Didn&#39;t your test reveal the <code>reverse2</code> works for all the compilers?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1569962024, "post_id": 58191162, "comment_id": 102763143, "body": "@jxh for the three I checked, yes. But I wouldn&#39;t say it is more readable than <code>reverse</code> for instance."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1569962208, "post_id": 58191162, "comment_id": 102763211, "body": "@AlexLop.: Believe it or not, it is fairly idiomatic."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1569968825, "post_id": 58191162, "comment_id": 102765260, "body": "ICC kinda sucks. I use the free license for it and, to be honest, the code generation is just not that good."}], "answers": [{"tags": [], "owner": {"reputation": 1121, "user_id": 2150289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1256cfbd4bb053bad532320ad570f9a5?s=128&d=identicon&r=PG", "display_name": "maharvey67", "link": "https://stackoverflow.com/users/2150289/maharvey67"}, "is_accepted": false, "score": 1, "last_activity_date": 1569959727, "creation_date": 1569959727, "answer_id": 58191466, "question_id": 58191162, "link": "https://stackoverflow.com/questions/58191162/how-to-write-compiler-understandable-c-code/58191466#58191466", "title": "How to write compiler &quot;understandable&quot; C code?", "body": "<p>As far as I am aware, the proper way to do this is with conditional compilation.</p>\n\n<p>My suggestion is to write plain normal code in standard C as the default, both for maintainability and as a fall-back path that all compilers can handle. Utilize conditional compilation only as necessary to optimize for specific compilers, with a comment explaining the reason for the exception.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1570055539, "last_edit_date": 1570055539, "creation_date": 1569967708, "answer_id": 58192879, "question_id": 58191162, "link": "https://stackoverflow.com/questions/58191162/how-to-write-compiler-understandable-c-code/58192879#58192879", "title": "How to write compiler &quot;understandable&quot; C code?", "body": "<p>The technique used for <code>reverse2</code> is fairly idiomatic (<a href=\"https://stackoverflow.com/q/2182002/315052\">here</a>, for example), and your own testing showed that it is properly optimized on all the systems you tested on. To make the implementation easier to understand, you can introduce more whitespace, and follow a more regular pattern.</p>\n\n<pre><code>uint32_t reverse2(uint32_t d)\n{\n    return ((d &amp; 0x000000FFU) &lt;&lt; 24) |\n           ((d &amp; 0x0000FF00U) &lt;&lt; 8)  |\n           ((d &amp; 0x00FF0000U) &gt;&gt; 8)  |\n           ((d &amp; 0xFF000000U) &gt;&gt; 24) ;\n}\n</code></pre>\n\n<p><a href=\"https://tio.run/##dc0xC8IwFATg/f2KA0GaISVUB8GSMauDOEtNgi1IhSSVgvW3x7RVcenBg@PxwV0qX8eoq4CyzDHgqjV4nw784MFTOYLfwWnVtPrWGYvSB9O0Ia8lUZfKpjgHOPuwztsi@30MoychxdnQuRZZZrCG6MUUpU4sLaLYMgwT@@SfKSXEzHYMS2xEE5Nymc3oy8bRPb0oj/EN\" rel=\"nofollow noreferrer\" title=\"Bash \u2013 Try It Online\">Try It Online : gcc</a></p>\n\n<p><a href=\"https://tio.run/##dc2xCsIwGATg/X@KA0GaISVUB8HSMauDOEtNgi1IhCSVgvXZY9qquPSm4/jgLrVvYlR1QFnmGKButb2C9woc/ODBUzmC38Fp1Vp167RB6YNubcibiqhLZVOcA5x5GOdNkf0WzehJSHEmdM4iyzTWEL2YIuWJpU8UW4ZhYp/8MymFmNmOYYmNaGJVtcxm9GXj6Z5elMf4Bg\" rel=\"nofollow noreferrer\" title=\"Bash \u2013 Try It Online\">Try It Online : clang</a></p>\n\n<p>To your specific points:</p>\n\n<blockquote>\n  <p><sub>Are there any tips, best known methods, guidelines to write a portable C code so that the compiler would be able to detect (let's put aside the compiler bugs) the pattern and use the maximum ability of the target CPU architecture.</sub></p>\n</blockquote>\n\n<p>The key take away should be to try to write <em>idiomatic</em> code. Judging code to be <em>understandable</em> is somewhat subjective. What may seem clear to me can appear incomprehensible to someone else (and vice versa). However, there are common idioms in C programming that should be followed whenever it is appropriate to do so.</p>\n\n<p>Unfortunately, I do not have at the top of my head a handy list of idioms. But, I can say I largely learned C from reading <em>The C Programming Language</em> (by K &amp; R, of course). And I was an avid reader of <em>C Programming FAQs</em> (by Steve Summit).</p>\n\n<p>However, a very good resource for C idioms can be found by reading and comprehending open source C projects, and of course the source code base of the company you work at. Following the latter has the added benefit that any code you add that follows existing conventions will naturally increase the chances of it being understood by someone else in the company.</p>\n\n<blockquote>\n  <p><sub>I often hear people say that the code has to be written so that even junior programmer would easily be able to understand it and the modern compilers are \"smart\" enough to take care of the optimizations. Now I have an evidence that it is not true (or at least not always true).</sub></p>\n</blockquote>\n\n<p>Compilers are just programs, so they cannot read your mind. The compiler will be programmed to look for particular patterns in the AST and apply optimizations to transform the tree into what it considers more optimal. Similarly, the peephole optimizer will look for patterns in the generated machine instructions, and then transform them into fewer equivalent instructions.</p>\n\n<p>But these transformations are only possible if the generated tree or generated instructions follow a recognizable pattern. And these patterns are often determined by analyzing real-world software to see what kind of code gets generated for certain operations. If your code does not result in code that can be recognized by the compiler, you may be partially losing out on the compilers help to optimize.</p>\n\n<p>Thus, another reason to try to write idiomatic C code.</p>\n\n<p>Now, it can be argued that forcing oneself to write idiomatic C is a form of micro-optimization. Should you try to teach the compiler how to optimize the way you write code, or let the compiler teach you how to write code it knows how to optimize? However, the momentum is carried by the existing C programmers that write code idiomatically. New C programmers adopt these idioms for the sake of writing code more easily understood by the people that will be reviewing their code.</p>\n"}], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570055539, "creation_date": 1569958243, "question_id": 58191162, "link": "https://stackoverflow.com/questions/58191162/how-to-write-compiler-understandable-c-code", "title": "How to write compiler &quot;understandable&quot; C code?", "body": "<p>Recently I had to write a code for critical real time functionality and I used few <em>__builtin_...</em> functions. I understand that such code is not portable because not all the compilers support <em>\"__builtin_...\"</em> functions or syntax. I was wondering if there is a way to write code in a plain C so that the compiler would be able to recognize it and use some internal <em>\"__builtin_...\"-like</em> function?</p>\n\n<p>Below is a description of a small experement I did but <strong>my question</strong> is:</p>\n\n<ul>\n<li>Are there any tips, best known methods, guidelines to write a portable C code so that the compiler would be able to detect (let's put aside the compiler bugs) the pattern and use the maximum ability of the target CPU architecture.</li>\n</ul>\n\n<p>For example <strong>reverse bytes in a Dword</strong> (so that the first byte become the last one, the last one becomes the first one and so on), the x86_64 architecture has a dedicated assembly instruction for it - <a href=\"https://www.felixcloutier.com/x86/bswap\" rel=\"nofollow noreferrer\"><code>bswap</code></a>. I tried 4 different options:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef union _helper_s\n{\n    uint32_t val;\n    uint8_t bytes[4];\n} helper_u;\n\nuint32_t reverse(uint32_t d)\n{\n    helper_u b;\n    uint8_t temp;\n\n    b.val = d;\n    temp = b.bytes[0];\n    b.bytes[0] = b.bytes[3];\n    b.bytes[3] = temp;\n    temp = b.bytes[1];\n    b.bytes[1] = b.bytes[2];\n    b.bytes[2] = temp;\n\n    return b.val;\n}\n\nuint32_t reverse1(uint32_t d)\n{\n    helper_u b;\n    uint8_t temp;\n\n    b.val = d;\n    for (size_t i = 0; i &lt; sizeof(uint32_t) / 2; i++)\n    {\n        temp = b.bytes[i];\n        b.bytes[i] = b.bytes[sizeof(uint32_t) - i - 1];\n        b.bytes[sizeof(uint32_t) - i - 1] = temp;\n    }\n\n    return b.val;\n}\n\nuint32_t reverse2(uint32_t d)\n{\n    return (d &lt;&lt; 24) | (d &gt;&gt; 24 ) | ((d &amp; 0xFF00) &lt;&lt; 8) | ((d &amp; 0xFF0000) &gt;&gt; 8);\n}\n\nuint32_t reverse3(uint32_t d)\n{\n    return __builtin_bswap32(d);\n}\n</code></pre>\n\n<p>All the options provide the same functionality. I compiled it with different compilers and different optimization levels, the results were not so good:</p>\n\n<ol>\n<li><p><strong>GCC</strong> - did great! For both <a href=\"https://godbolt.org/z/L8wvWM\" rel=\"nofollow noreferrer\"><code>-O3</code></a> and <a href=\"https://godbolt.org/z/w0ERXJ\" rel=\"nofollow noreferrer\"><code>-Os</code></a> optimization levels it gave the same result for all the functions:</p>\n\n<pre><code>reverse:\n        mov     eax, edi\n        bswap   eax\n        ret\nreverse1:\n        mov     eax, edi\n        bswap   eax\n        ret\nreverse2:\n        mov     eax, edi\n        bswap   eax\n        ret\nreverse3:\n        mov     eax, edi\n        bswap   eax\n        ret\n</code></pre></li>\n<li><p><strong>Clang</strong> a little disappointed me. With the <a href=\"https://godbolt.org/z/WCdK5D\" rel=\"nofollow noreferrer\"><code>-O3</code></a> it gave the same result as GCC however with the <a href=\"https://godbolt.org/z/prOY9W\" rel=\"nofollow noreferrer\"><code>-Os</code></a> it totally lost the path in <code>reverse1</code>. It didn't recognize the pattern and produced way less optimal binary:</p>\n\n<pre><code>reverse1:                               # @reverse1\n        lea     rax, [rsp - 8]\n        mov     dword ptr [rax], edi\n        mov     ecx, 3\n.LBB1_1:                                # =&gt;This Inner Loop Header: Depth=1\n        mov     sil, byte ptr [rax]\n        mov     dl, byte ptr [rsp + rcx - 8]\n        mov     byte ptr [rax], dl\n        mov     byte ptr [rsp + rcx - 8], sil\n        dec     rcx\n        inc     rax\n        cmp     rcx, 1\n        jne     .LBB1_1\n        mov     eax, dword ptr [rsp - 8]\n        ret\n</code></pre>\n\n<p>Actually the difference between <code>reverse</code> and <code>reverse1</code> is that <code>reverse</code> is the \"loop unrolled\" version of <code>reverse1</code>, so I assume that with <code>-Os</code> the compiler didn't even try to unroll or try to anticipate the purpose of the <code>for</code> loop.</p></li>\n<li><p>With the <strong>ICC</strong>, the things went even worse because it was unable to recognize the pattern in <code>reverse</code> and <code>reverse1</code> functions both with the <a href=\"https://godbolt.org/z/S6dHnx\" rel=\"nofollow noreferrer\"><code>-O3</code></a> and the <a href=\"https://godbolt.org/z/EL0n9k\" rel=\"nofollow noreferrer\"><code>-Os</code></a> optimization levels.</p></li>\n</ol>\n\n<p>P.S.</p>\n\n<p>I often hear people say that the code has to be written so that even junior programmer would easily be able to understand it and the <em>modern</em> compilers are \"smart\" enough to take care of the optimizations. Now I have an evidence that it is not true (or at least not always true).</p>\n"}, {"tags": ["c", "linked-list", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11939069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9470286ef61ea815f5f843b5abdd5?s=128&d=identicon&r=PG&f=1", "display_name": "logLady", "link": "https://stackoverflow.com/users/11939069/loglady"}, "edited": false, "score": 0, "creation_date": 1569957536, "post_id": 58190823, "comment_id": 102761396, "body": "Ohh ok that makes a lot of sense! Is there any way to assign a pointer in the hashmap to the new node without directly doing hm-&gt;table[i] = new_node? Or is that impossible. I just like how clean head = new_node looks."}, {"owner": {"reputation": 291, "user_id": 10038206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a163c49db039b5a7c35b81f00e524e?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/10038206/topher"}, "reply_to_user": {"reputation": 1, "user_id": 11939069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9470286ef61ea815f5f843b5abdd5?s=128&d=identicon&r=PG&f=1", "display_name": "logLady", "link": "https://stackoverflow.com/users/11939069/loglady"}, "edited": false, "score": 0, "creation_date": 1569957758, "post_id": 58190823, "comment_id": 102761485, "body": "It&#39;s possible, but you would need to refactor your code using addresses of pointers, add confusing dereferencing and add additional error checking.  It can make code harder to read."}], "tags": [], "owner": {"reputation": 291, "user_id": 10038206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a163c49db039b5a7c35b81f00e524e?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/10038206/topher"}, "is_accepted": false, "score": 1, "last_activity_date": 1569957281, "last_edit_date": 1569957281, "creation_date": 1569956633, "answer_id": 58190823, "question_id": 58190701, "link": "https://stackoverflow.com/questions/58190701/when-adding-first-node-to-linked-list-in-hashmap-why-must-the-new-node-be-assig/58190823#58190823", "title": "When adding first node to linked list in hashmap, why must the new node be assigned directly to the indexed pointer?", "body": "<p>'head' is pointing to a hashnode_t and so is 'hm->table[i]'.  So, they are both pointing to the same object.  Changing 'head' just makes 'head' point elsewhere.  You have not actually assigned a pointer in the hashmap_t to the 'new_node'.</p>\n\n<p>The reason that 'last' works is that you are changing a member variable to a new value.  And, since 'last' is pointing to an object already in the hashmap_t, the assignment updates the object pointed to in the hastmap_t.  So, an update to 'last->next = new_node' is the same as 'hm->table[x]->next = new_node' ('x' is some arbitrary index).</p>\n"}], "owner": {"reputation": 1, "user_id": 11939069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9470286ef61ea815f5f843b5abdd5?s=128&d=identicon&r=PG&f=1", "display_name": "logLady", "link": "https://stackoverflow.com/users/11939069/loglady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569957281, "creation_date": 1569956034, "last_edit_date": 1569956597, "question_id": 58190701, "link": "https://stackoverflow.com/questions/58190701/when-adding-first-node-to-linked-list-in-hashmap-why-must-the-new-node-be-assig", "title": "When adding first node to linked list in hashmap, why must the new node be assigned directly to the indexed pointer?", "body": "<p>Here is my implementation of a hashmap in c and its initialization and insert code.\nIn the hashmap_t structure, I use an array of pointers (table) to nodes which contain the key/value pairs. In hashmap_init, I allocate the desired amount of nodes and loop through the array setting each pointer to NULL.</p>\n\n<p>What I'm confused about is in the hashmap_put function. I find the index of which list the key should be inserted in and that first pointer is referenced by hm->table[i]. For clarity, I want to make sure it's obvious that hm->table[i] is the start of the list so I assign it to hashnode_t *head.</p>\n\n<p>So when inserting the first node (head == NULL), I originally used head = new_node, but none of my inserts worked. It only works when I use hm->table[i] = new_node.</p>\n\n<p>I don't understand why that's the case. head points to the same thing so why does setting head equal to the new_node not work? I'm also confused later in the function when last->next = new_node does work. Last is a pointer just like head but it works there.</p>\n\n<p>Thanks for any clarification.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct hashnode {\n  char key[128];                \n  char val[128];                \n  struct hashnode *next;        \n} hashnode_t;\n\ntypedef struct {\n  int item_count;             \n  int table_size;              \n  hashnode_t **table;          \n} hashmap_t;\n\nvoid hashmap_init(hashmap_t *hm, int table_size) {\n  hm-&gt;table_size = table_size;\n  hm-&gt;item_count = 0;\n  hm-&gt;table = malloc(table_size * sizeof(hashnode_t)); \n  for (int i = 0; i &lt; table_size; i++) { // loop through array of pointers to nodes\n    hm-&gt;table[i] = NULL;\n  }\n}\n\nint hashmap_put(hashmap_t *hm, char key[], char val[]) {\n  hashnode_t *new_node = malloc(sizeof(hashnode_t)); // allocate new node\n  strcpy(new_node-&gt;key, key);\n  strcpy(new_node-&gt;val, val);\n  new_node-&gt;next = NULL;\n\n  int i = hashcode(key) % hm-&gt;table_size; // index of list hashed to\n  hashnode_t *head = hm-&gt;table[i];\n  hashnode_t *cur = head;\n  hashnode_t *last;\n\n  if (!head) { // list is empty\n    new_node-&gt;next = head;\n    hm-&gt;table[i] = new_node;\n    //why does head = new_node not work?\n    hm-&gt;item_count += 1;\n    return  1;\n  }\n\n  while (cur) { // loop through nodes\n    if (strcmp(cur-&gt;key, key) == 0) {\n      strcpy(cur-&gt;val, val);\n      free(new_node);\n      return 0;\n    }\n    last = cur; // save pointer to node that points to NULL\n    cur = cur-&gt;next;\n  }\n  last-&gt;next = new_node;\n  //why does it work here?\n  hm-&gt;item_count += 1;\n  return 1;\n}\n\n</code></pre>\n"}, {"tags": ["c++", "c", "nested", "scanf", "unions"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1569954196, "post_id": 58190286, "comment_id": 102760172, "body": "The reason is the same in both languages, and is the same, as why <code>scanf(&quot;%d&quot;,&amp;int);</code> is invalid."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1569954218, "post_id": 58190286, "comment_id": 102760180, "body": "Where is <code>ROOF</code> in the code?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1569954296, "post_id": 58190286, "comment_id": 102760211, "body": "The C++ code can look quite different and applies different rules to <code>union</code>s. The comparison between the two would be a good question on its own and shouldn&#39;t be a sidebar here."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1569954361, "post_id": 58190286, "comment_id": 102760238, "body": "Note that <code>HOUSE</code> is not a variable, it&#39;s a type, so you can&#39;t pass any of its members to <code>scanf</code>."}, {"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569955016, "post_id": 58190286, "comment_id": 102760465, "body": "@WeatherVane Yes, that was the problem. I confused it were a variable and did not mind it was still a datatype. Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "edited": false, "score": 0, "creation_date": 1569955249, "post_id": 58190435, "comment_id": 102760553, "body": "Yes, that was the case.I confused it were a variable and did not mind it was still a datatype. @WeatherVane has found that, too. Thank you very much, both of you. Thank you very much also for the additional answer and informations."}], "tags": [], "owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 3, "last_activity_date": 1569955357, "last_edit_date": 1569955357, "creation_date": 1569954674, "answer_id": 58190435, "question_id": 58190286, "link": "https://stackoverflow.com/questions/58190286/can%c2%b4t-use-an-union-element-inside-a-nested-structure-as-argument-for-scanf-to/58190435#58190435", "title": "Can&#180;t use an union element inside a nested structure as argument for scanf() to store desired value", "body": "<p>I dont know C, but in C++ your code should be equivalent to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunion HABITATION { float chair; int bed; };\nstruct HOUSE { HABITATION room; int number; };\n\nint main()\n{\n    scanf(\"%d\",&amp;HOUSE.room.bed);\n}\n</code></pre>\n\n<p>Maybe now it is obvious that you merely defined two types, but you never create an instance of anything in this code. <code>HOUSE</code> is a type not an instance.</p>\n\n<p>In c++ you would do</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n   HOUSE h; \n   std::cin &gt;&gt; h.room.bed;\n}\n</code></pre>\n\n<p>And probably not use all CAPITAL names. Some use them for globals, I am more on the side of banning them completely. Names should speak for themself, no need to shout. <code>House</code> is clear enough if you use first letter capital for classes and all small letters for instances (eg <code>house</code>). Thats also what Stroustrup suggests in <a href=\"http://www.stroustrup.com/Programming/PPP-style.pdf\" rel=\"nofollow noreferrer\">his guideline</a>.</p>\n"}], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 58190435, "answer_count": 1, "score": 0, "last_activity_date": 1573918542, "creation_date": 1569953870, "last_edit_date": 1573918542, "question_id": 58190286, "link": "https://stackoverflow.com/questions/58190286/can%c2%b4t-use-an-union-element-inside-a-nested-structure-as-argument-for-scanf-to", "title": "Can&#180;t use an union element inside a nested structure as argument for scanf() to store desired value", "body": "<p>I have a problem about to use scanf with an union element as an argument which superior union is part of a nested structure.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    typedef union { float chair; int bed; } HABITATION;\n    typedef struct { HABITATION room; int number; } HOUSE;\n\n    scanf(\"%d\",&amp;HOUSE.room.bed);\n}\n\n</code></pre>\n\n<p>The error message from the compiler is :\n\"Error: expected expression before ) >>ROOF&lt;&lt;\". </p>\n\n<p>What have i done wrong?</p>\n\n<p>INFO:\nI currently use C but i am also interested for the same operation and answer in/ for C++. </p>\n"}, {"tags": ["c", "embedded", "microcontroller", "interrupt"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1569953611, "post_id": 58190194, "comment_id": 102759944, "body": "That <code>TRAP</code> was caused by the divide by <code>0</code> operation. It gives the programmer an opportunity to correct the result and attempt to resume execution. But often, it&#39;s a futile exercise, and it&#39;s easier to deal with the possible problem before the division occurs."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569953631, "post_id": 58190194, "comment_id": 102759951, "body": "<code>trap</code> is a special interrupt which is being triggered by different erroneous situations defined by the specific architecture and is letting the code to gracefully handle these. In your case it&#39;s the division by zero."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569953926, "post_id": 58190194, "comment_id": 102760070, "body": "@WeatherVane I guess this is more for the situation where there is some &quot;kernel&quot; and &quot;user&quot; code. So the kernel will handle it if user have screwed it up."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569954031, "post_id": 58190194, "comment_id": 102760110, "body": "@EugeneSh. it&#39;s possibly most useful in debugging, to identify where the problem occurred."}, {"owner": {"reputation": 1, "user_id": 11985924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f41864a00bdb61af62fd75142e6ddb5?s=128&d=identicon&r=PG&f=1", "display_name": "Viswa5095", "link": "https://stackoverflow.com/users/11985924/viswa5095"}, "edited": false, "score": 0, "creation_date": 1569954340, "post_id": 58190194, "comment_id": 102760228, "body": "I used division by zero on purpose to check how the micro controller reacts for trap and the trap interrupt was set (after I read the conditional flags register), the program stops immediately after toggling the led (PC7). The software freezes and no action is taking palce"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1569954448, "post_id": 58190194, "comment_id": 102760276, "body": "Because you don&#39;t have <code>trap</code> handler. Again, it is an interrupt, and interrupt should be handled."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1569959129, "post_id": 58190194, "comment_id": 102762033, "body": "@Viswa5095 There is probably a default handler in your runtime that you are expected to override.  It is most likely an infinite loop.  An alternative is to enable the hardware watchdog so that when the trap is entered, the processor will reset.  In other contexts, it is called an &quot;exception&quot;."}, {"owner": {"reputation": 1, "user_id": 11985924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f41864a00bdb61af62fd75142e6ddb5?s=128&d=identicon&r=PG&f=1", "display_name": "Viswa5095", "link": "https://stackoverflow.com/users/11985924/viswa5095"}, "edited": false, "score": 0, "creation_date": 1570111389, "post_id": 58190194, "comment_id": 102817429, "body": "sure I will look into it"}], "owner": {"reputation": 1, "user_id": 11985924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f41864a00bdb61af62fd75142e6ddb5?s=128&d=identicon&r=PG&f=1", "display_name": "Viswa5095", "link": "https://stackoverflow.com/users/11985924/viswa5095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569963528, "creation_date": 1569953440, "last_edit_date": 1569963528, "question_id": 58190194, "link": "https://stackoverflow.com/questions/58190194/can-someone-explain-what-does-the-interrupt-trap-do-in-the-micro-controller", "title": "Can someone explain what does the interrupt &quot;Trap&quot; do in the micro controller", "body": "<p>I am using stm8l - discovery board and I am curious about the functionality of trap in the micro controller. My program stops instead of running continously in the while loop, Is the functionality of trap interrupt that if it occurs, it does not execute (similar to reset)?</p>\n\n<pre><code>#include &lt;iostm8l.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n\nvoid Cus_delay(uint32_t ntime)\n {\n   while(ntime!=0)\n   {\n    ntime--;\n   }\n }  \n\nmain()\n{\nCLK_DIVR = 0x00; // Set the frequency to 16Mhz\nPC_DDR = 0x80; // direction output for led\nPC_CR1 = 0x80; // fast push pull mode\nint a = 10;\nwhile(1)\n{\n    Cus_delay(400000);\n    Cus_delay(400000);\n    PC_ODR ^= 0x80;\n    a = a/0;\n}\n}\n</code></pre>\n"}]