[{"tags": ["c", "arrays", "pointers", "memory", "memcpy"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420675083, "post_id": 27830809, "comment_id": 44067513, "body": "Why you never use <code>free</code>? did you know it exists?"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1420676759, "post_id": 27830809, "comment_id": 44068015, "body": "What does &#39;destroying&#39; mean? Can you show us the code that inspects the return value and shows it to be &#39;destroyed&#39;? I notice you&#39;ve used your coordinates X, Y &amp; T in a slightly inconsistent order so you may be scanning when you think you&#39;re slicing."}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1420678548, "post_id": 27830809, "comment_id": 44068523, "body": "@ iharob I do....are implying that&#39;s why?"}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1420678792, "post_id": 27830809, "comment_id": 44068585, "body": "@ Dan when I exit the function and return to main, &quot;array&quot;&#39;s memory is gone. I added this to the double for loop in the function: array[j][i] = tmp[i][j] and it works fine, but really I don&#39;t need the double for loop at all, hence why i was trying to use memcpy. (I&#39;m using the debugger in eclipse)"}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1420679201, "post_id": 27830809, "comment_id": 44068677, "body": "@ Dan All of my operations are on a large X Y matrix. The time dimension (T), only stores the previous matrix. When I said &quot;slice&quot;, I was referring to a &quot;slice&quot; of time. I&#39;m currently storing them in memory as array[T][Y][X]. Are you saying it should be array[Y][X][T] or something diff?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420706851, "post_id": 27830809, "comment_id": 44076611, "body": "<code>memcpy(array,tmp,XDIM*YDIM*sizeof(double));</code> Probably, You do not secure the liner array.(you have jagged array.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421395045, "post_id": 27830809, "comment_id": 44350535, "body": "To get better help, post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> and describe how the actual output differs from the expected output"}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1422170477, "post_id": 27830809, "comment_id": 44640664, "body": "@BLUEPIXY  the accepted solution should also be credited to you...I believe it is due to the &quot;jagged&quot; array. I didn&#39;t know what that was to begin with. Matt suggested that each allocation will pull a new block of memory, making it non contiguous thus &quot;memcpy&quot; wasn&#39;t working."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420676174, "post_id": 27830922, "comment_id": 44067846, "body": "You are absolutely right, but I don&#39;t think this is the problem, I might be wrong of course."}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1420679397, "post_id": 27830922, "comment_id": 44068717, "body": "I only used the code above as a prototype...really tmp is a whole lot over other stuff and is case dependent, but in the end it&#39;s a 2D array."}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1420679448, "post_id": 27830922, "comment_id": 44068729, "body": "I will add that you&#39;re code is right...but not what I&#39;m after. Thanks though."}], "tags": [], "owner": {"reputation": 99, "user_id": 2673602, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c74c6775822554e8879cfb21048a9be7?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/2673602/charles"}, "is_accepted": false, "score": 0, "last_activity_date": 1420675765, "creation_date": 1420675765, "answer_id": 27830922, "question_id": 27830809, "link": "https://stackoverflow.com/questions/27830809/c-memcpy-2d-array-to-3d-array-within-function/27830922#27830922", "title": "C memcpy 2D array to 3D array within function", "body": "<p>I'm not sure you need a temp array there. Since you're already passing in the array itself, and in c you can modify arrays directly with other functions. Maybe...</p>\n\n<pre><code>void fun(double **array, int XDIM, int YDIM)\n{\n    for(int j = 0; j &lt; YDIM; j++)\n    {\n        for(int i = 0; i &lt; XDIM; i++)\n        {\n            array[j][i] = 2.5;\n        }\n    }\n}\n</code></pre>\n\n<p>Let me know how it goes!</p>\n"}, {"comments": [{"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1421869672, "post_id": 27979401, "comment_id": 44530246, "body": "Ahh, OK. I was wondering what BLUEPIXY was referring to when he said &quot;jagged&quot; array. I will add my allocate3d() function to the original code for further input. I know the allocation works, but I&#39;m not quite clear on how the memory is aligned internally (as far as being contiguous). Would you mind looking at my function and commenting on the memory structure of the 3D array. Thanks!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1421886275, "post_id": 27979401, "comment_id": 44537415, "body": "@ThatsRightJack Each time you call <code>malloc</code> it allocates a separate chunk of memory. The term &quot;jagged array&quot; traditionally means an array whose rows are not of all the same length; but we can also use the same term for an array where each row is in a separate allocation even if the rows are all the same length.  Contiguous arrays (i.e. a single memory block) have to have all rows the same length."}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1422170175, "post_id": 27979401, "comment_id": 44640617, "body": "Thanks for pointing that out. I could do it the way you suggest, but in the end, I want to remove as many of these loops as possible and use functions like &quot;memcpy&quot;. I believe they&#39;re much faster....correct me if I&#39;m wrong.  I&#39;ll switch back to 1D arrays and contiguous allocations."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1421394770, "creation_date": 1421394770, "answer_id": 27979401, "question_id": 27830809, "link": "https://stackoverflow.com/questions/27830809/c-memcpy-2d-array-to-3d-array-within-function/27979401#27979401", "title": "C memcpy 2D array to 3D array within function", "body": "<p>I think that what you want to do in <code>fun</code> is:</p>\n\n<pre><code>for(int j = 0; j &lt; YDIM; j++)\n{\n    for(int i = 0; i &lt; XDIM; i++)\n    {\n        array[j][i] = tmp[j][i];\n    }\n}\n</code></pre>\n\n<p>You cannot use a single <code>memcpy</code> because your array is not a contiguous bloc of memory; it is a <em>jagged array</em> (each 1-dimensional block is stored in a separate allocation).</p>\n\n<p>I'm assuming you have your dimensions in the right order (you didn't post the body of <code>allocate3d</code> so that can't be verified)</p>\n"}], "owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 1, "accepted_answer_id": 27979401, "answer_count": 2, "score": 0, "last_activity_date": 1421876577, "creation_date": 1420674952, "last_edit_date": 1421876577, "question_id": 27830809, "link": "https://stackoverflow.com/questions/27830809/c-memcpy-2d-array-to-3d-array-within-function", "title": "C memcpy 2D array to 3D array within function", "body": "<p>In the example below, I have a 3D array which I pass to a function, \"fun\", but only pass a \"slice\" of the 3D array i.e. a 2D array. Within the function, I have another 2D variable, which takes on some values within a double for loop. Before exiting the function, I need to copy the 2D temporary array to the \"slice\" of the 3D array. I tried the following, but my use of memcpy is \"destroying\" the original 3D array outside the function. What is the proper way to perform this operation?</p>\n\n<pre><code>void fun(double **array, int XDIM, int YDIM);   // Declaration\n\nint main()\n{\n    double ***array\n    int XDIM=10,YDIM=10,TDIM=2;\n\n    allocate3d(&amp;array,XDIM,YDIM,TDIM); // This works fine\n    fun(array[0],XDIM,YDIM);\n\n    //\n    //  Other code note important to problem here\n    //\n\n    deallocate3d(array,XDIM,YDIM,TDIM); // This works fine\n}\n\n\nvoid fun(double **array, int XDIM, int YDIM)\n{\n    double **tmp;\n\n    allocate2d(&amp;tmp,XDIM,YDIM); // This works fine\n\n    for(int j = 0; j &lt; YDIM; j++)\n    {\n        for(int i = 0; i &lt; XDIM; i++)\n        {\n            tmp[j][i] = 2.5;\n        }\n    }\n\n    memcpy(array,tmp,XDIM*YDIM*sizeof(double));\n\n    deallocate2d(tmp,XDIM,YDIM); // This works fine\n\n}\n</code></pre>\n\n<p>EDIT: I want to add that \"array\" has dimensions of</p>\n\n<pre><code>array[TDIM][YDIM][XDIM]\n</code></pre>\n\n<p>and \"tmp\" has dimensions of</p>\n\n<pre><code>tmp[YDIM][XDIM]\n</code></pre>\n\n<p>I did address this in a comment, but thought I should point it out in the main question. I also showed that I free the memory of tmp within the function.</p>\n\n<p>EDIT 2: I'm including the \"allocate3D\" and \"deallocate3D\" functions for further analysis of memory storage.</p>\n\n<pre><code>int allocate3D(double ****array, int XDIM, int YDIM, int TDIM)\n{\n    // Allocate 3rd dimension\n    *array = calloc(TDIM,sizeof(double**));\n    if (array==NULL)\n    {\n        printf(\"Error in memory allocation\\n\");\n        return (EXIT_FAILURE);\n    }\n\n    // Allocate each 3rd dimensional pointer with array of pointers\n    for(int i = 0; i &lt; TDIM; i++)\n    {\n        (*array)[i] = calloc(YDIM,sizeof(double*));\n    }\n\n    if (array==NULL)\n    {\n        printf(\"Error in memory allocation\\n\");\n        return (EXIT_FAILURE);\n    }\n\n    // Allocate remaining dimension\n    for(int i = 0; i &lt; TDIM; i++)\n    {\n        for(int j = 0; j &lt; YDIM; j++)\n        {\n            (*array)[i][j] = calloc(XDIM,sizeof(double));\n        }\n    }\n\n    if(array == NULL)\n    {\n        printf(\"Error in memory allocation\\n\");\n        return(EXIT_FAILURE);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>void deallocate3D(double ***array, int XDIM, int YDIM, int TDIM)\n{\n    //  Deallocate each 3rd dimensional pointer\n    for(int i = 0; i &lt; TDIM; i++)\n    {\n        for(int j = 0; j &lt; YDIM; j++)\n        {\n            free((array)[i][j]);\n        }\n\n        free((array)[i]);\n    }\n\n    // Deallocate 3rd dimension\n    free(array);\n}\n</code></pre>\n\n<p>The functions \"allocate2D\" and \"deallocate2D\" follow the same concept, minus the \"TDIM\" dimension, so I will leave it out for the sake of simplicity. It has been brought to my attention that the portion of the array which I'm trying to use with \"memcpy\" may not be contiguous and is \"jagged\". In addition to providing the allocation function, is there a simple way to identify contiguous memory storage? How do 3D arrays get stored in memory?</p>\n\n<p>EDIT 3: I think I may have found a clue...in the example above, I'm setting YDIM == 1. I believe this affects the contiguous memory alignment and my allocation and free functions are causing errors. I've used Valgrind and it flags my allocation and free functions when YDIM == 1. In addition, this would affect how memcpy is behaving. Any thoughts on my speculations? Why set YDIM == 1....cause sometimes that is the case. I'm trying to keep things universal in application.</p>\n"}, {"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1420674386, "post_id": 27830699, "comment_id": 44067320, "body": "You should remove <code>fflush(stdin)</code> since it&#39;s undefined behavior, <code>fflush()</code> is for output streams."}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 2, "creation_date": 1420674396, "post_id": 27830699, "comment_id": 44067321, "body": "Have you read documentation for <code>fgets</code>? As for <code>fflush(stdin)</code>, that&#39;s wrong; it&#39;s undefined behavior."}, {"owner": {"reputation": 441, "user_id": 4364134, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Ha8V3.jpg?s=128&g=1", "display_name": "TacoCat", "link": "https://stackoverflow.com/users/4364134/tacocat"}, "edited": false, "score": 0, "creation_date": 1420674424, "post_id": 27830699, "comment_id": 44067325, "body": "Everything works perfectly! The program is finished!"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1420674496, "post_id": 27830699, "comment_id": 44067342, "body": "Undefined Behavior doesn&#39;t mean there would necessarily be wrong behavior."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1420674528, "post_id": 27830699, "comment_id": 44067349, "body": "it means that tomorrow it might format your hard drive"}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 1, "creation_date": 1420674664, "post_id": 27830699, "comment_id": 44067389, "body": "Try taking out <code>fflush(stdin)</code>. If your program breaks, there is a problem in the code somewhere else."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1420674700, "post_id": 27830699, "comment_id": 44067400, "body": "See <a href=\"http://stackoverflow.com/a/2979217/1983495\">this</a> answer for more information."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1420675853, "post_id": 27830699, "comment_id": 44067734, "body": "@iharob Undefined behavior means anything could happen. and it could be different tommorrow than it was today."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420676171, "post_id": 27830699, "comment_id": 44067845, "body": "Note: A better use of <code>char userInput[4]; ... fgets(userInput, 3, stdin);</code> --&gt; <code>char userInput[4]; ... if (fgets(userInput, sizeof userInput, stdin) == NULL) Handle_EOForIOerror(); else GoodToGo();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1420675696, "last_edit_date": 1420675696, "creation_date": 1420674434, "answer_id": 27830728, "question_id": 27830699, "link": "https://stackoverflow.com/questions/27830699/fgets-how-does-this-work-inside-this-part-of-code-c-programming/27830728#27830728", "title": "fgets(); how does this work inside this part of code? C programming", "body": "<p>From <code>fgets</code> manual</p>\n\n<pre><code>char *fgets(char *s, int size, FILE *stream);\n</code></pre>\n\n<blockquote>\n  <p><code>fgets() reads in at most one less than size characters from stream and stores them into the buffer pointed to by s. Reading stops after an EOF or a newline. If a newline is read, it is stored into the buffer. A terminating null byte ('\\0') is stored after the last character in the buffer.</code></p>\n</blockquote>\n\n<p>so the <code>fgets()</code>, is taking at most 2 characters from the input stream, or until return key is pressed <em>(sending a <code>'\\n'</code> character)</em> or <code>EOF</code> is sent, and stores the result in <code>userInput</code>.</p>\n\n<p>You can then try to convert the two character string to a number using <code>strtol</code>.</p>\n"}], "owner": {"reputation": 441, "user_id": 4364134, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Ha8V3.jpg?s=128&g=1", "display_name": "TacoCat", "link": "https://stackoverflow.com/users/4364134/tacocat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1420675696, "creation_date": 1420674240, "question_id": 27830699, "link": "https://stackoverflow.com/questions/27830699/fgets-how-does-this-work-inside-this-part-of-code-c-programming", "title": "fgets(); how does this work inside this part of code? C programming", "body": "<p>I wrote a Tic Tac Toe game, using tutorials. Now I'm just going trough the code to see what i don't understand and I came up with this part, witch is confusing me. </p>\n\n<pre><code> char userInput[4];\n\nint moveOk = 0;\nint move = -1;\n\nwhile(moveOk == 0)\n{\n    printf(\"Enter a number from 1 - 9: \");\n    fgets(userInput, 3, stdin);\n    fflush(stdin);\n    printf(\"\\n\\n\");\n*The code continues, but the rest of it is not important*\n</code></pre>\n\n<p>How does this part work? I don't even know how to formulate the question. <em>Sorry</em>. So what are the three values in fgets(); and how to they interact with each other?</p>\n\n<pre><code>fgets(userInput, 3, stdin);\n    fflush(stdin);\n</code></pre>\n"}, {"tags": ["c", "x86", "32bit-64bit", "borland-c++", "djgpp"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 5, "creation_date": 1420674368, "post_id": 27830663, "comment_id": 44067317, "body": "how about running xp in a VM using virtualbox"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 1, "creation_date": 1420675077, "post_id": 27830663, "comment_id": 44067509, "body": "16bit code will not run natively on 64bit windows (the 16bit subsystem is not present). I&#39;ve had luck with DOSBox, and it&#39;s pretty easy to set up and get working."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1567085732, "post_id": 27830663, "comment_id": 101864974, "body": "I know this question is half a decade old, but I was curious if the target embedded system was running on a 386 class processor (or later) or was it an 8086/80186/80286 variant?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1567086116, "post_id": 27830663, "comment_id": 101865235, "body": "Oh I just noticed a question from you a few months back that seems to be related and the answer to my question appears to be: 486/386DX"}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 3, "last_activity_date": 1420689114, "last_edit_date": 1420689114, "creation_date": 1420674682, "answer_id": 27830763, "question_id": 27830663, "link": "https://stackoverflow.com/questions/27830663/need-c-compiler-for-windows-7-64-bit-to-compile-to-dos-target/27830763#27830763", "title": "Need C compiler for Windows 7 64-bit, to compile to DOS target", "body": "<p>If you can find an old Microsoft Compiler, like 16 bit C / C++ 1.52 (which is included on the 32 bit C / C++ 4.1 cd-rom), or C 8.00 or earlier, it runs using a dos extender or in a 32 bit dos console window. </p>\n\n<p>Why can't you run the Borland compiler using FreeDOS?</p>\n\n<p>You could try to create a virtual machine with MSDOS on it, but you'd have to find a way to install MSDOS 6.22 on the virtual machine. At Microsoft's support site, they have links to a bootable ISO file for MSDOS 6.22. I still have the original floppies and started with those on an old system that has a floppy drive. It's a bit awkward to import / export files to / from the virtual machine. </p>\n\n<p>This is the config.sys that I use that seems to work with Win 7 virtual machine. I had to increase buffers, stacks, and files to avoid a stack overflow problem with this setup.</p>\n\n<pre><code>dos=high,umb\nbuffers=40,0\nfiles=60\nlastdrive=e\nshell=c:\\command.com c:\\ /e:1024 /p\nstacks=64,512\nswitches=/f\ndevice=c:\\dos\\himem.sys /numhandles:64 /testmem:off\ndevice:c:\\dos\\emm683.exe ram i=b100-b7ff i=c600-c7ff i=cc00-cfff i=e600-efff frame=d000 a=32 d=128 notr\ndevicehigh=c:vmadd\\cdrom.sys /d:mscd001\n</code></pre>\n\n<p>This is the autoexec.bat that I use (smartdrv is a bit pointless in this case so I commented it out with \"rem\" prefix) .</p>\n\n<pre><code>c:\\dos\\emm386 auto\nlh c:\\dos\\mscdex.exe /d:mscd001 /m:7\nrem lh c:\\dos\\smartdrv.exe\nlh c:\\vmadd\\mouse.com\nset path=c:\\dos\nset blaster=a220 i5 d1 h5 p330 t6\nprompt $p$g\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": true, "score": 3, "last_activity_date": 1420674909, "creation_date": 1420674909, "answer_id": 27830798, "question_id": 27830663, "link": "https://stackoverflow.com/questions/27830663/need-c-compiler-for-windows-7-64-bit-to-compile-to-dos-target/27830798#27830798", "title": "Need C compiler for Windows 7 64-bit, to compile to DOS target", "body": "<p>Run Virtual XP or VirtualBox and install Borland C++ inside. BTW, there is version 5.02 with some fixes (in case your version is exactly 5.0).</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6767263, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/dc240992eb5e74616358d9281cd7a775?s=128&d=identicon&r=PG", "display_name": "mik", "link": "https://stackoverflow.com/users/6767263/mik"}, "is_accepted": false, "score": 2, "last_activity_date": 1472402143, "last_edit_date": 1472402143, "creation_date": 1472397573, "answer_id": 39192775, "question_id": 27830663, "link": "https://stackoverflow.com/questions/27830663/need-c-compiler-for-windows-7-64-bit-to-compile-to-dos-target/39192775#39192775", "title": "Need C compiler for Windows 7 64-bit, to compile to DOS target", "body": "<p>As for a compiler, Open Watcom seems to me to be the best choice in your situation.  FrameworkPascal (written in the old version of Watcom) provides a 32 bit extender. Regarding the creation of a FreeDOS virtual machines, pickup the tools from Microsoft SysInteral.  They include a tool that create a VHD.  Once you get a FreeDOS running in a VM you can simply SYS the VHD and start it anywhere. There are plenty ready to run ISO images for FreeDOS, one worth mentioning is Seagate Seatools for DOS which is being distributed with the FreeDOS kernel.</p>\n\n<p>Your best (but not only) solution for running all that is probably XPMode on Windows 7 Pro. It runs Windows XP 32 which of course provide 100 percent transparent compatibility via its NTVDM with DOS 16 bit real mode, 16 bits protected (Windows 3.1), and DOS 32 bit extenders.\nNTVDM by the way is a feature that can be activated on Windows 10 Pro but it yet to be seen what exactly can be done with it there.</p>\n\n<p>XPMode is a free downnload from Microsoft that installs a free version of Windows XP 32 bit in a virtual machine on Windows 7 Pro with full sharing of the cutpaste/copy buffer, USB, drives, screen and network card (web access). It can be toggled between a Window and full screen.  The installation of XPMode is automated (after activation of the Windows 7 Pro VM).  Microsoft provide various downloadable hot fixes that update the registry to activate the VM. There is an MS support downloadable hot fix that has to be run to allow the installation on the AMD Bulldozer architecture. XPMode hibernate its desktop and virtual hard drives making it a much more productive environment than a hardware based system. </p>\n\n<p>With a little extra work Windows XP 32 bits can be installed on any virtual machine including Microsoft Virtual Machine on Windows XP 64 bits as well as Oracle Box and VMWare.  XPMode however is probably the smoothest solution since some installations such as MS Virtual Machine for Windows XP 64 bits do not utilized the full physical display in full screen (only about 90 percent of it).  If you install your browser and email in XPMode you can live in the full screen and forget about new versions of Windows.</p>\n"}], "owner": {"reputation": 872, "user_id": 2954389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cb2d03cb6f92d41f33511911a5c47f1e?s=128&d=identicon&r=PG&f=1", "display_name": "robisrob", "link": "https://stackoverflow.com/users/2954389/robisrob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1733, "favorite_count": 2, "accepted_answer_id": 27830798, "answer_count": 3, "score": 6, "last_activity_date": 1567049472, "creation_date": 1420674018, "last_edit_date": 1567049472, "question_id": 27830663, "link": "https://stackoverflow.com/questions/27830663/need-c-compiler-for-windows-7-64-bit-to-compile-to-dos-target", "title": "Need C compiler for Windows 7 64-bit, to compile to DOS target", "body": "<p>I'm trying to find a solution to allow me to compile C code to a DOS executable from Windows 7 64-bit.  I recently updated from XP 32-bit to Win7 64-bit, and now my Borland C++ 5.0 compiler won't work.  I get an error when it tries to call tlink.exe 16-bit.  I'm trying to avoid bringing over another computer with XP but that will have to be my course of action if I can't figure something else out soon. </p>\n\n<p>My target is an embedded x86 running FreeDOS.  As much as I'd like to transition to Linux I can't afford the time that would transition would take.  Aside from the learning curve of never having used Linux, much of my code is DOS-dependent and would have to be re-written.  </p>\n\n<p>I'm hoping there's a windows setting I can just change but my research so far leads me to believe I need a more drastic change to my process.  I've sniffed around at Turbo C 2.01, DJGPP, DOSbox... not really too confident to go down any of those alleys without some outside input</p>\n"}, {"tags": ["c", "include"], "comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1420670853, "post_id": 27830029, "comment_id": 44066053, "body": "What compiler?  How are you compiling?  Sometimes a make file might specify something like *.c."}, {"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1420670888, "post_id": 27830029, "comment_id": 44066076, "body": "By include, do you mean link? If so, yes, you should always link all necessary C files. If by include, you mean <code>#include file.c</code>, then no, you should not include other C files."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4339870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9363afcc27a222f90eca6ce7f4cb479?s=128&d=identicon&r=PG&f=1", "display_name": "James4701", "link": "https://stackoverflow.com/users/4339870/james4701"}, "edited": false, "score": 0, "creation_date": 1420671001, "post_id": 27830065, "comment_id": 44066119, "body": "Thank you. I will mark this answer as soon as I can."}], "tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": false, "score": 0, "last_activity_date": 1420670889, "creation_date": 1420670889, "answer_id": 27830065, "question_id": 27830029, "link": "https://stackoverflow.com/questions/27830029/how-does-my-program-run-without-including-necessary-c-files/27830065#27830065", "title": "How does my program run without including necessary .c files?", "body": "<p>You're <em>not supposed</em> to include the other .c files in main.c</p>\n\n<p>A C compiler will compile each .c file into .o files, separately.</p>\n\n<p>And then it's the job of the linker to put the resulting objects files back together in a single executable.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4339870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9363afcc27a222f90eca6ce7f4cb479?s=128&d=identicon&r=PG&f=1", "display_name": "James4701", "link": "https://stackoverflow.com/users/4339870/james4701"}, "edited": false, "score": 0, "creation_date": 1420671564, "post_id": 27830067, "comment_id": 44066338, "body": "Ahh this is a very good explanation of how compiling works. So what happens with interpreted languages like Python then?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 63, "user_id": 4339870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9363afcc27a222f90eca6ce7f4cb479?s=128&d=identicon&r=PG&f=1", "display_name": "James4701", "link": "https://stackoverflow.com/users/4339870/james4701"}, "edited": false, "score": 0, "creation_date": 1420672566, "post_id": 27830067, "comment_id": 44066748, "body": "@James4701 interpreted languages need the interpreter to run, python generates some files called bytecode with .pyc extension that allows python to execute the scripts faster, but you can&#39;t generate native executable binaries with programs written in interpreted languages."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1420670921, "creation_date": 1420670921, "answer_id": 27830067, "question_id": 27830029, "link": "https://stackoverflow.com/questions/27830029/how-does-my-program-run-without-including-necessary-c-files/27830067#27830067", "title": "How does my program run without including necessary .c files?", "body": "<p>You can have any number of c files you want, at compile time object files are generated and then linked togaether making the executable binary.</p>\n\n<p>While including the c files in your <code>main.c</code> could work, it's not the appropriate way to split the program in different files, the correct way is to compile all the files into an intermidiate represantation called Object Files, and then the linker links them all togaether to make the executable binary.</p>\n\n<p>So compilation goes like this</p>\n\n<pre><code>file1.c -&gt; file1.o\nfile2.c -&gt; file2.o\nfile3.c -&gt; file3.o\nfile4.c -&gt; file4.o\n\n        .\n        .\n        .\n        .\n</code></pre>\n\n<p>and then a linking stage which takes all the files</p>\n\n<pre><code>file1.o file2.o file3.o file4.o  ... -&gt; executable-binary-file\n</code></pre>\n\n<p>You could also pass all the c files to the compiler at once.</p>\n"}], "owner": {"reputation": 63, "user_id": 4339870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9363afcc27a222f90eca6ce7f4cb479?s=128&d=identicon&r=PG&f=1", "display_name": "James4701", "link": "https://stackoverflow.com/users/4339870/james4701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 27830067, "answer_count": 2, "score": 0, "last_activity_date": 1420670921, "creation_date": 1420670726, "question_id": 27830029, "link": "https://stackoverflow.com/questions/27830029/how-does-my-program-run-without-including-necessary-c-files", "title": "How does my program run without including necessary .c files?", "body": "<p>I am coding in C and in an attempt to organize my program and make it cleaner, I took all the functions out of main.c and put them in their own .c files which all include the header.h. I forgot to include all the .c files in my main.c and when I compiled the program, it still ran perfectly! How is this possible? Do you not need to include .c files that are in the same folder? Should I still include the .c files anyway to be safe?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1420670756, "post_id": 27829974, "comment_id": 44066018, "body": "@haccks global variables can be initialized at compile time, so it costs nothing to set them to 0 and that removes some unpredictability. Locals are on the stack, zeroing the stack is not free so thankfully it doesn&#39;t happen by default. Or at least I think that&#39;s why this was done like this, but don&#39;t quote me on that, I dont have a source."}, {"owner": {"reputation": 69792, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1420670831, "post_id": 27829974, "comment_id": 44066049, "body": "@haccks Because global initialisation costs nothing, while local initialisation costs runtime overhead."}, {"owner": {"reputation": 771, "user_id": 1036475, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/570c773bb450c5daf2b1861d68ff9f7f?s=128&d=identicon&r=PG", "display_name": "albin", "link": "https://stackoverflow.com/users/1036475/albin"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1420673032, "post_id": 27829974, "comment_id": 44066901, "body": "@haccks assigning zero into a memory region means clearing. Also you can set your global variable(s) other then zero by changing your c run-time code. Simply crt0.s defines initialization value, not compiler writers..."}], "answers": [{"tags": [], "owner": {"reputation": 69792, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 3, "last_activity_date": 1420670748, "creation_date": 1420670748, "answer_id": 27830036, "question_id": 27829974, "link": "https://stackoverflow.com/questions/27829974/why-local-variables-do-not-have-default-type-while-global-variables-have-in-c/27830036#27830036", "title": "Why local variables do not have default type while global variables have in C?", "body": "<p>An object name in the global namespace can only mean object declaration/definition. In a local namespace <code>x;</code> could also mean \"simply do nothing with the already initialised object <code>x</code>\".</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1420671121, "post_id": 27830048, "comment_id": 44066167, "body": "You used to be able to write <code>auto x;</code> to mean <code>int x;</code> (or <code>auto int x;</code>) before C99. With C99, as you state, you&#39;re no longer allowed to do that.  But you should not be taking liberties like that with modern code and if you are working on ancient code, you should be upgrading it so as to remove the &#39;implicit <code>int</code>&#39; definitions or declarations -- leading towards C99 strict compliance."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420671716, "post_id": 27830048, "comment_id": 44066400, "body": "Or <code>const y = 0;</code> or even some nice things like <code>typedef t;</code>."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1420679590, "post_id": 27830048, "comment_id": 44068769, "body": "but it still for the implicit function return !"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 4, "last_activity_date": 1420670796, "creation_date": 1420670796, "answer_id": 27830048, "question_id": 27829974, "link": "https://stackoverflow.com/questions/27829974/why-local-variables-do-not-have-default-type-while-global-variables-have-in-c/27830048#27830048", "title": "Why local variables do not have default type while global variables have in C?", "body": "<p>The rule for the implicit <code>int</code> is no longer allowed since c99.</p>\n\n<p>However for local variables (your first example) even this was not allowed as a declaration:</p>\n\n<pre><code>x;  /* or even x = 42; */\n</code></pre>\n\n<p>because it was ambiguous. Is this an expression statement that evaluates <code>x</code> or a declaration of  <code>x</code>? In the file scope statements are not allowed so there is no ambiguity and it can only be a declaration of an <code>int</code>.</p>\n"}], "owner": {"reputation": 771, "user_id": 1036475, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/570c773bb450c5daf2b1861d68ff9f7f?s=128&d=identicon&r=PG", "display_name": "albin", "link": "https://stackoverflow.com/users/1036475/albin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 27830048, "answer_count": 2, "score": 2, "last_activity_date": 1420670796, "creation_date": 1420670454, "question_id": 27829974, "link": "https://stackoverflow.com/questions/27829974/why-local-variables-do-not-have-default-type-while-global-variables-have-in-c", "title": "Why local variables do not have default type while global variables have in C?", "body": "<p>As far as I know global variables in C have int type as default. I just wonder the rational behind why local (auto) variables has no default type and the code below results compilation error</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    x;\n    return x;\n}\n</code></pre>\n\n<p>while this does not?</p>\n\n<pre><code>x;\nint main(int argc, char *argv[])\n{\n\n    return x;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "python-2.7", "numpy", "wrapper"], "comments": [{"owner": {"reputation": 58707, "user_id": 110026, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/dce2259ff9b547103d54acf1ea622314?s=128&d=identicon&r=PG", "display_name": "Jaime", "link": "https://stackoverflow.com/users/110026/jaime"}, "edited": false, "score": 0, "creation_date": 1420687968, "post_id": 27829946, "comment_id": 44070717, "body": "The call in you edit should be <code>PyArray_SimpleNewFromData(1, dims, NPY_DOUBLE, vector)</code>. Does it not work like that either?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2379410"}, "edited": false, "score": 1, "creation_date": 1420703066, "post_id": 27829946, "comment_id": 44075221, "body": "<code>dims[1] = 2</code> is an indexing error"}], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 0, "creation_date": 1420671777, "post_id": 27830120, "comment_id": 44066423, "body": "Thanks for the input but this does not help. Shouldn&#39;t the example become simpler by removing the *args and not giving the function any variable?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 2, "creation_date": 1420671981, "post_id": 27830120, "comment_id": 44066511, "body": "No--the python interpreter has no idea that you have defined <code>_aux_error</code> with a nonstandard signature.  It will be called with the two C arguments."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 1, "creation_date": 1420672008, "post_id": 27830120, "comment_id": 44066518, "body": "Note that I updated my answer with a comment about a fundamental problem with your example."}, {"owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 0, "creation_date": 1420672514, "post_id": 27830120, "comment_id": 44066729, "body": "Using your advice I tried to change the way arrays are created. I use <code>calloc</code>. Is this the right way to do it? I am still getting garbage (not to mention the fact that I&#39;ll have to deallocate that memory from within python somehow)."}, {"owner": {"reputation": 58707, "user_id": 110026, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/dce2259ff9b547103d54acf1ea622314?s=128&d=identicon&r=PG", "display_name": "Jaime", "link": "https://stackoverflow.com/users/110026/jaime"}, "edited": false, "score": 1, "creation_date": 1420688854, "post_id": 27830120, "comment_id": 44070937, "body": "The dimensions are copied by the array constructor, but the array  data isn&#39;t."}, {"owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 0, "creation_date": 1420729013, "post_id": 27830120, "comment_id": 44089686, "body": "Thank you so much! Last thing, if you may: in my real program I want to dynamically allocate memory for the array vector. Should I free that memory after using memcpy? Again, thank you for your time."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1420751092, "post_id": 27830120, "comment_id": 44102870, "body": "If in <code>_aux_error</code> you have something like <code>vector = malloc(...);</code>, then you fill <code>vector</code> with some computed values, and then call <code>PyObject *ret = PyArray_SimpleNew(...); memcpy(PyArray_DATA(ret), vector, sizeof(vector));</code>, then yes, you should free <code>vector</code> before you return.  But if you know the length of the array, you could call <code>PyObject *ret = PyArray_SimpleNew(...)</code>, and then use <code>double *vector = PyArray_DATA(ret)</code>, and fill in <code>vector</code>.  Then you wouldn&#39;t need to malloc any memory--since <code>PyArray_SimpleNew</code> did that for you--and you wouldn&#39;t free <code>vector</code>."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1420752310, "post_id": 27830120, "comment_id": 44103544, "body": "See the latest addition to my answer for an example."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 8, "last_activity_date": 1420752258, "last_edit_date": 1420752258, "creation_date": 1420671184, "answer_id": 27830120, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage/27830120#27830120", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>Try changing this:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self) {\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args) {\n</code></pre>\n\n<p>Python will pass the <code>args</code> argument, even if you don't define your function with it.</p>\n\n<p>There's still a fundamental problem with your code.  You have created a numpy array using an array, <code>vector</code>, that is on the stack.  When <code>_aux_error</code> returns, that memory is reclaimed and might be reused.</p>\n\n<p>You could create the array using <code>PyArray_SimpleNew()</code> to allocate the numpy array, and then copy <code>vector</code> to the array's data:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args)\n{\n    double vector[2] = {1.0 , 2.0};\n    npy_intp dims[1] = {2};\n\n    PyObject *ret = PyArray_SimpleNew(1, dims, NPY_DOUBLE);\n    memcpy(PyArray_DATA(ret), vector, sizeof(vector));\n    return ret;\n}\n</code></pre>\n\n<p>Note that I changed the type to <code>NPY_DOUBLE</code>; <code>NPY_FLOAT</code> is the 32 bit floating point type.</p>\n\n<hr>\n\n<p>In a comment, you asked about dynamically allocating the memory in <code>_aux_error</code>.  Here's a variation of the example that might be useful.  The length of the array is still hardcoded in <code>dims</code>, so it isn't completely general, but it might be enough to address the question from the comments.</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args)\n{\n    double *vector;\n    npy_intp dims[1] = {5};\n    npy_intp k;\n\n    PyObject *ret = PyArray_SimpleNew(1, dims, NPY_DOUBLE);\n    vector = (double *) PyArray_DATA(ret);\n    /*\n     *  NOTE: Treating PyArray_DATA(ret) as if it were a contiguous one-dimensional C\n     *  array is safe, because we just created it with PyArray_SimpleNew, so we know\n     *  that it is, in fact, a one-dimensional contiguous array.\n     */\n    for (k = 0; k &lt; dims[0]; ++k) {\n        vector[k] = 1.0 + k;\n    }\n    return ret;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "is_accepted": false, "score": 3, "last_activity_date": 1420734221, "last_edit_date": 1420734221, "creation_date": 1420677077, "answer_id": 27831120, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage/27831120#27831120", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>Here is my full solution, for your amusement. Copy, paste and modify. Obviously the problem I was faced with is a bit more complicated than the question above. I used some of \n<a href=\"http://dan.iel.fm/posts/python-c-extensions/\" rel=\"nofollow\">Dan Foreman Mackay's online code</a>.</p>\n\n<p>The goal of my code is to return a covariance vector (whatever that is). I have a C file  named <code>aux.c</code> that returns a newly allocated array:</p>\n\n<pre><code>#include \"aux.h\"\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\ndouble *covVec(double *X, double *x, int nvecs, int veclen) {\n\n\n    double r = 1.3;\n    double d = 1.0;\n\n    double result;\n    double dist;\n    int n;\n\n    double *k;\n    k = malloc(nvecs * sizeof(double));\n\n    int row;\n    for( row = 0 ; row &lt; nvecs ; row++) {\n\n        result = 0.0;\n        for (n = 0; n &lt; veclen; n++) {\n                dist = x[n] - X[row*veclen + n];\n                result += dist * dist;\n        }\n\n        result = d*exp(  -result/(2.0*r*r)  );\n        k[row] = result;\n    }\n    return k;\n}\n</code></pre>\n\n<p>Then, I need a very short header file named <code>aux.h</code>:</p>\n\n<pre><code>double *covVec(double *X, double *x, int nvecs, int veclen);\n</code></pre>\n\n<p>To wrap this to python I have <code>_aux.c</code>:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#include \"aux.h\"\n#include &lt;stdio.h&gt;\n\nstatic char module_docstring[] =\n    \"This module provides an interface for calculating covariance using C.\";\n\nstatic char cov_vec_docstring[] =\n    \"Calculate the covariances between a vector and a list of vectors.\";\n\nstatic PyObject *_aux_covVec(PyObject *self, PyObject *args);\n\nstatic PyMethodDef module_methods[] = {\n        {\"cov_vec\", _aux_covVec, METH_VARARGS, cov_vec_docstring},\n        {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC init_aux(void) {\n\n    PyObject *m = Py_InitModule3(\"_aux\", module_methods, module_docstring);\n    if (m == NULL)\n        return;\n\n    /* Load `numpy` functionality. */\n    import_array();\n}\n\n\nstatic PyObject *_aux_covVec(PyObject *self, PyObject *args)\n{\n    PyObject *X_obj, *x_obj;\n\n    /* Parse the input tuple */\n    if (!PyArg_ParseTuple(args, \"OO\", &amp;X_obj, &amp;x_obj ))\n        return NULL;\n\n    /* Interpret the input objects as numpy arrays. */\n    PyObject *X_array = PyArray_FROM_OTF(X_obj, NPY_DOUBLE, NPY_IN_ARRAY);\n    PyObject *x_array = PyArray_FROM_OTF(x_obj, NPY_DOUBLE, NPY_IN_ARRAY);\n\n\n    /* If that didn't work, throw an exception. */\n    if (X_array == NULL || x_array == NULL ) {\n        Py_XDECREF(X_array);\n        Py_XDECREF(x_array);\n        return NULL;\n    }\n\n    /* What are the dimensions? */\n    int nvecs  = (int)PyArray_DIM(X_array, 0);\n    int veclen = (int)PyArray_DIM(X_array, 1);\n    int xlen   = (int)PyArray_DIM(x_array, 0);\n\n    /* Get pointers to the data as C-types. */\n    double *X    = (double*)PyArray_DATA(X_array);\n    double *x    = (double*)PyArray_DATA(x_array);\n\n\n    /* Call the external C function to compute the covariance. */\n    double *k = covVec(X, x, nvecs, veclen);\n\n\n\n    if ( veclen !=  xlen ) {\n        PyErr_SetString(PyExc_RuntimeError,\n                                \"Dimensions don't match!!\");\n        return NULL;\n    }\n\n    /* Clean up. */\n    Py_DECREF(X_array);\n    Py_DECREF(x_array);\n\n    int i;\n    for(i = 0 ; i &lt; nvecs ; i++) {\n        printf(\"k[%d]   = %f\\n\",i,k[i]);\n        if (k[i] &lt; 0.0) {\n            PyErr_SetString(PyExc_RuntimeError,\n                        \"Covariance should be positive but it isn't.\");\n            return NULL;\n        }\n    }\n\n    npy_intp dims[1] = {nvecs};\n\n    PyObject *ret = PyArray_SimpleNew(1, dims, NPY_DOUBLE);\n    memcpy(PyArray_DATA(ret), k, nvecs*sizeof(double));\n    free(k);\n\n    return ret;\n}\n</code></pre>\n\n<p>I have a python file called <code>setup_cov.py</code>:</p>\n\n<pre><code>from distutils.core import setup, Extension\nimport numpy.distutils.misc_util\n\nsetup(\n    ext_modules=[Extension(\"_aux\", [\"_aux.c\", \"aux.c\"])],\n    include_dirs=numpy.distutils.misc_util.get_numpy_include_dirs(),\n)\n</code></pre>\n\n<p>I compile from command line using <code>python2.7 setup_cov.py build_ext --inplace</code>.\nThen I run the following python test file:</p>\n\n<pre><code>import numpy as np\nimport _aux as a\n\nnvecs  = 6\nveclen = 9\nX= []\nfor _ in range(nvecs):\n    X.append(np.random.normal(size= veclen))\nX = np.asarray(X)\n\nx = np.random.normal(size=veclen)\nk = a.cov_vec(X,x)\nprint(k)\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4382923"}, "is_accepted": false, "score": 2, "last_activity_date": 1437758725, "creation_date": 1437758725, "answer_id": 31616376, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage/31616376#31616376", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>Warren's solution seems to be working, although freeing the C array memory block results in a error on compilation for me. I got the memcopy trick to work in the minimalistic function below (copying a 1D C array to numpy via the pointer), which, for simplicity, does not take any arguments, and should give the reader a good idea how to apply this to C arrays instead of vectors:</p>\n\n<pre><code>static PyObject *_cmod_test(PyObject *self, PyObject *args)\n    {\n    double f[5] = {0,1,2,3,4};\n    int d[1] = {5};\n    PyObject *c = PyArray_FromDims(1,d,NPY_DOUBLE);\n    memcpy(PyArray_DATA(c), f, 5*sizeof(double));\n    return c;    \n    };\n</code></pre>\n\n<p>The launch.py script is simple</p>\n\n<pre><code>import _cmod\n_cmod.test()\n</code></pre>\n\n<p>Don't forget to declare the functions</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\nstatic PyObject *_cmod_test(PyObject *self, PyObject *args);\n</code></pre>\n\n<p>Any suggestions for the use with PyArray_SimpleNewFromData (whilst avoiding the memory leak pittfall)? Perhaps something similar to the broken code below.</p>\n\n<pre><code>static PyObject *_cmod_test(PyObject *self, PyObject *args)\n    {\n    double f[5] = {0,1,2,3,4};\n    npy_intp dims[1] = {5};\n    PyObject *c = PyArray_SimpleNewFromData(1, dims, NPY_DOUBLE ,f);\n    PyArray_ENABLEFLAGS(c, NPY_ARRAY_OWNDATA);\n    return c;\n    };\n</code></pre>\n\n<p>I also recommend Dan Foreman Mackay's blog on the python C API.</p>\n"}], "owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3439, "favorite_count": 5, "accepted_answer_id": 27830120, "answer_count": 3, "score": 5, "last_activity_date": 1437758725, "creation_date": 1420670340, "last_edit_date": 1420672705, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>I am wrapping a C file so I can use it in python. The output of the C function is an array of doubles. I want this to be a numpy array in python. I get garbage. Here's an example that generates the error. </p>\n\n<p>First, the C file (focus on the last function definition, everything else should be OK):</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic char module_docstring[] =\n    \"docstring\";\n\nstatic char error_docstring[] =\n        \"generate the error\";\n\nstatic PyObject *_aux_error(PyObject *self, PyObject *args);\n\nstatic PyMethodDef module_methods[] = {\n        {\"error\", _aux_error, METH_VARARGS, error_docstring},\n        {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC init_tmp(void) {\n\n    PyObject *m = Py_InitModule3(\"_tmp\", module_methods, module_docstring);\n    if (m == NULL)\n        return;\n\n    /* Load `numpy` functionality. */\n    import_array();\n}\n\nstatic PyObject *_aux_error(PyObject *self ,PyObject *args) {\n\n    double vector[2] = {1.0 , 2.0};\n\n    npy_intp dims[1] = { 2 };\n\n    PyObject *ret  = PyArray_SimpleNewFromData(1, dims, (int)NPY_FLOAT , vector );\n    return ret;\n}\n</code></pre>\n\n<p>Compilation goes OK (from what I understand - I used a python script that compiles everything).</p>\n\n<p>In python, I run the following script to test my new module:</p>\n\n<pre><code>try:\n    import _tmp\n    res = _tmp.error()\n    print(res)\nexcept:\n    print(\"fail\")\n</code></pre>\n\n<p>The result I see on the screen is garbage. I tried substituting <code>(int)NPY_FLOAT</code> with <code>(int)NPY_FLOAT32, (int)NPY_FLOAT64, (int)NPY_DOUBLE</code> and I still get garbage.\nI am using python2.7.</p>\n\n<p>Thanks!!!</p>\n\n<p><strong>EDIT</strong>: following the answer below, I changed the last function to:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args) {\n\n\n    double *vector = calloc(2, sizeof(double));\n    vector[0] = 1.0;\n    vector[1] = 2.0;\n\n\n    npy_intp *dims = calloc(1 , sizeof(npy_intp));\n    dims[1] = 2;\n\n\n    PyObject *ret  = PyArray_SimpleNewFromData(1, dims, (int)NPY_FLOAT , &amp;vector );\n    return ret;\n}\n</code></pre>\n\n<p>Now python shows an empty array.</p>\n"}, {"tags": ["c++", "c", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420669766, "post_id": 27829750, "comment_id": 44065580, "body": "It starts at 3604 for me, rather than 3600.  Did you make a typo?"}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "reply_to_user": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420670053, "post_id": 27829750, "comment_id": 44065708, "body": "@tmyklebu That value (<code>3600</code>) does not refer to the very first finite difference between consecutive partial summations, but to (about) the <code>26000</code>th difference."}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420670134, "post_id": 27829750, "comment_id": 44065736, "body": "@chux That is indeed a typo. Fixed."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1420671683, "post_id": 27829750, "comment_id": 44066381, "body": "@JackOLantern The solution to this problem, in case you missed it in Chux&#39;s answer is to replace every instance of the word <code>float</code> with the word <code>double</code>, and fix the constants as well, e.g. <code>3.f</code> becomes <code>3.0</code>. The calculation that you&#39;re doing won&#39;t exceed the precision of a <code>double</code>, and hence the results of the calculation will have 0 error."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1420675690, "post_id": 27829750, "comment_id": 44067680, "body": "@user3386109 Agree with the  suggestion about changing <code>float</code> to <code>double</code> except that the array <code>*x</code> may remain <code>float</code> for space considerations.  Simple way to make <code>x[i] * x[i]</code> work at <code>double</code> is to do <code>1.0 * x[i] * x[i]</code> or <code>(double) x[i] * x[i]</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420676749, "post_id": 27829750, "comment_id": 44068008, "body": "@chux To quote some anonymous wise guy, &quot;Premature optimization is the root of all evil.&quot; Which is to say that you shouldn&#39;t optimize for space unless space is actually a problem. Personally, I&#39;ve never worked with a computer that could store 900000 floats, but couldn&#39;t just as easily store 900000 doubles. (In the good old days, I did work with PCs that couldn&#39;t store 900000 doubles, but they couldn&#39;t store 900000 floats either.)"}], "answers": [{"comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420670560, "post_id": 27829928, "comment_id": 44065934, "body": "I downvoted because I don&#39;t think your answer addresses the question to any depth.  Downvotes are reversible; if you improve your answer, I&#39;m happy to turn the downvote into an upvote."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420672386, "post_id": 27829928, "comment_id": 44066662, "body": "@tmyklebu I posted, you posted 10 seconds later, you down voted 3 seconds later.  Hmmm.  This answer is terse and correct.  It goes into enough depth to explain the issue and offers a solution."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1420670245, "creation_date": 1420670245, "answer_id": 27829928, "question_id": 27829750, "link": "https://stackoverflow.com/questions/27829750/accuracy-of-rosenbrocks-test-function-calculation/27829928#27829928", "title": "Accuracy of Rosenbrock&#39;s test function calculation", "body": "<p>Typical <code>float</code> is only good to maybe 7 digits of precision.   Repeatedly adding <code>3604</code> to a number 100000x larger than it does not well accumulate the lesser significant digits.</p>\n\n<p>Use <code>double</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420670434, "post_id": 27829929, "comment_id": 44065874, "body": "@PascalCuoq: Uh-oh.  Is it impossibly hard, perchance?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420671219, "post_id": 27829929, "comment_id": 44066204, "body": "BTW: <a href=\"http://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">binary32</a> has 24-bit binary significand (23 bits stored explicitly))"}], "tags": [], "owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "is_accepted": true, "score": 4, "last_activity_date": 1420671310, "last_edit_date": 1420671310, "creation_date": 1420670255, "answer_id": 27829929, "question_id": 27829750, "link": "https://stackoverflow.com/questions/27829750/accuracy-of-rosenbrocks-test-function-calculation/27829929#27829929", "title": "Accuracy of Rosenbrock&#39;s test function calculation", "body": "<p>You compute <code>temp = 3604.0f</code> accurately at each iteration.  The problem arises when you try adding <code>3604.0f</code> to something else and round the result to the nearest <code>float</code>.  <code>float</code>s store an exponent and a 23-bit significand, meaning any result with 1-bits more than 24 places apart is going to get rounded to something other than what it is.</p>\n\n<p>Note that 3604 = 901 * 4 and the binary expansion of 901 is 1110000101; you'll start seeing roundoff once you start adding <code>temp</code> to something bigger than 2^24 * 4 = 67108864.  (This happens when you run the code, too; it starts printing out 3600 as the difference between consecutive sum_host's right when sum_host exceeds 67108864.)  You start seeing even more roundoff when you're adding <code>temp</code> to something bigger than 2^26 * 4; at that point, the second smallest '1' bit is getting swallowed as well.</p>\n\n<p>Note that, after you do Kahan summation, <code>sum_host</code> is what you report AND <code>c</code> is <code>-108</code>.  This is loosely because <code>c</code> is keeping track of the next most significant 24 bits.</p>\n"}], "owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 27829929, "answer_count": 2, "score": 0, "last_activity_date": 1420671310, "creation_date": 1420669500, "last_edit_date": 1420670110, "question_id": 27829750, "link": "https://stackoverflow.com/questions/27829750/accuracy-of-rosenbrocks-test-function-calculation", "title": "Accuracy of Rosenbrock&#39;s test function calculation", "body": "<p>I want to calculate Rosenbrock's test function</p>\n\n<p><img src=\"https://i.stack.imgur.com/MgJqd.png\" alt=\"enter image description here\"></p>\n\n<p>I have implemented the following C/C++ code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/********/\n/* MAIN */\n/********/\nint main()\n{\n    const int N = 900000;\n\n    float *x = (float *)malloc(N * sizeof(float));\n    for (int i=0; i&lt;N; i++) x[i] = 3.f;\n\n    float sum_host = 0.f;\n    for (int i=0; i&lt;N-1; i++) {\n        float temp = (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f));\n        sum_host = sum_host + temp;\n        printf(\"%i %f %f\\n\", i, temp, sum_host);\n    }\n    printf(\"Result for Rosenbrock's test function calculation = %f\\n\", sum_host);\n\n}\n</code></pre>\n\n<p>Since the <code>x</code> array is initialized to <code>3.f</code>, then each summation term should be <code>3604.f</code>, so that the final summation involving <code>899999</code> terms should be <code>3243596396</code>. However, the result I get is <code>3229239296</code>, with an absolute error of <code>14357100</code>. If I measure the difference between two consecutive partial summations, I see that it is <code>3600.f</code> for the early partial summations and then it drops to <code>3584</code> for the last ones, while it should always be <code>3604.f</code>.</p>\n\n<p>If I use Kahan summation algorithm as</p>\n\n<pre><code>sum_host = 0.f;\nfloat c        = 0.f;\nfor (int i=0; i&lt;N-1; i++) {\n    float temp = (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f)) - c;\n    float t    = sum_host + temp;\n    c          = (t - sum_host) - temp;\n    sum_host = t;\n}\n</code></pre>\n\n<p>the result I get is <code>3243596288</code>, with a much smaller absolute error of <code>108</code>.</p>\n\n<p>I'm pretty sure that this effect I see should be ascribed to the precision of floating point arithmetics. Could someone confirm this and provide me an explanation of the mechanism according to which this occurs? </p>\n"}, {"tags": ["c", "linux", "gps", "embedded-linux", "gpio"], "comments": [{"owner": {"reputation": 1271, "user_id": 1102681, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3ky61.jpg?s=128&g=1", "display_name": "ransh", "link": "https://stackoverflow.com/users/1102681/ransh"}, "edited": false, "score": 0, "creation_date": 1550301228, "post_id": 27829702, "comment_id": 96226305, "body": "I have similar need. What was the resolution for this issue ?"}, {"owner": {"reputation": 1271, "user_id": 1102681, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3ky61.jpg?s=128&g=1", "display_name": "ransh", "link": "https://stackoverflow.com/users/1102681/ransh"}, "edited": false, "score": 0, "creation_date": 1550301349, "post_id": 27829702, "comment_id": 96226328, "body": "there is also time_pps_kcbind, maybe this adjust the hrtimer to pps ?"}, {"owner": {"reputation": 1477, "user_id": 239068, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ad3ae041e2d4e3fa97419c916b0b1354?s=128&d=identicon&r=PG", "display_name": "Tom West", "link": "https://stackoverflow.com/users/239068/tom-west"}, "reply_to_user": {"reputation": 1271, "user_id": 1102681, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3ky61.jpg?s=128&g=1", "display_name": "ransh", "link": "https://stackoverflow.com/users/1102681/ransh"}, "edited": false, "score": 0, "creation_date": 1551890584, "post_id": 27829702, "comment_id": 96808815, "body": "Alas, I did not resolve the issue.  I continue to use the solution proposed in the question, but remain under certain whether this is the best solution.  Can only say that it works well enough the customer is not complaining."}], "answers": [{"tags": [], "owner": {"reputation": 1936, "user_id": 776529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc82733e636778533a328a18c42a418?s=128&d=identicon&r=PG", "display_name": "kuzavas", "link": "https://stackoverflow.com/users/776529/kuzavas"}, "is_accepted": false, "score": 1, "last_activity_date": 1427273899, "creation_date": 1427273899, "answer_id": 29251264, "question_id": 27829702, "link": "https://stackoverflow.com/questions/27829702/setting-system-time-in-embedded-linux-with-gps-pps-on-gpio/29251264#29251264", "title": "Setting system time in embedded Linux with GPS PPS on GPIO", "body": "<p>You should use ntpd with PPS if you need accurate and reliable synchronization. ntpd uses tested algorithms written with reliability in mind. The overhead is negligible.</p>\n"}], "owner": {"reputation": 1477, "user_id": 239068, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ad3ae041e2d4e3fa97419c916b0b1354?s=128&d=identicon&r=PG", "display_name": "Tom West", "link": "https://stackoverflow.com/users/239068/tom-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1427273899, "creation_date": 1420669307, "last_edit_date": 1420669480, "question_id": 27829702, "link": "https://stackoverflow.com/questions/27829702/setting-system-time-in-embedded-linux-with-gps-pps-on-gpio", "title": "Setting system time in embedded Linux with GPS PPS on GPIO", "body": "<p>I've got a GPS with the PPS coming in on a GPIO on my non-networked embedded Linux board running 2.6.37.</p>\n\n<p>I'm trying to keep the system clock as accurate as possible (preferably better than 20us accuracy).  I've set the time within a few millis from the serial port GPS and would like to use the the PPS to discipline the clock (is that the correct term?)</p>\n\n<p>I've set up an interrupt that catches the the PPS.</p>\n\n<p>My interrupt handling routine is something like:</p>\n\n<pre><code>struct timeval tv;\ndo_gettimeofday(&amp;tv);\n..check that we're really close to a second mark and adjust tv to the nearest second...\ndo_settimeofday(&amp;tv);\n</code></pre>\n\n<p>Question: </p>\n\n<p><strong>Do do_gettimeofday/do_settimeofday take significant amounts of time to execute?</strong></p>\n\n<p><strong>Is this an acceptable way to approach keeping time?</strong></p>\n\n<p>I know there's NTP and Linux-PPS, but I don't want the overhead unless there's other subtle considerations to setting system time that I'm not aware of.</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1420668965, "post_id": 27829576, "comment_id": 44065221, "body": "If <code>48</code> is supposed to be the digit <code>&#39;0&#39;</code>, write it as <code>&#39;0&#39;</code>. It makes your code <i>much</i> clearer."}, {"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1420669034, "post_id": 27829576, "comment_id": 44065257, "body": "Unfortunately I have to use the ASCII values for it."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 1, "creation_date": 1420669097, "post_id": 27829576, "comment_id": 44065289, "body": "Why don&#39;t you change your printf to <code>printf(&quot;Error: unexpected char %d.\\n&quot;, month);</code> ? That might help"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 1, "creation_date": 1420669149, "post_id": 27829576, "comment_id": 44065310, "body": "I suggest this because maybe there&#39;s a null terminator before the EOF? Or a newline?"}, {"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1420669237, "post_id": 27829576, "comment_id": 44065348, "body": "printf(&quot;Error: unexpected char %d.\\n&quot;, month);  returns: &quot;Error: unexpected char 10.&quot; ------&gt; (January)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1420669293, "post_id": 27829576, "comment_id": 44065367, "body": "&quot;&quot;<i>Unfortunately I have to use the ASCII values for it.</i>&quot; -- Why do you &quot;have to&quot; do that? Assuming an ASCII-based character set, the expressions <code>48</code> and <code>&#39;0&#39;</code> are <i>exactly</i> equivalent."}, {"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1420669550, "post_id": 27829576, "comment_id": 44065478, "body": "It&#39;s college work I had a couple of months back, which I&#39;m going back over it for error checks."}, {"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1420669653, "post_id": 27829576, "comment_id": 44065532, "body": "Though I should know this... it&#39;s always the simple things for me."}], "answers": [{"comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1420669629, "post_id": 27829687, "comment_id": 44065518, "body": "No problem. Feel free to accept the answer if you don&#39;t mind :)"}, {"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 1, "creation_date": 1420669741, "post_id": 27829687, "comment_id": 44065567, "body": "You have to wait 5 minutes before you can, that&#39;s what I was waiting for. :)"}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1420669785, "post_id": 27829687, "comment_id": 44065587, "body": "Oh, I didn&#39;t know that! Thanks for the info :)"}], "tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": true, "score": 1, "last_activity_date": 1420669251, "creation_date": 1420669251, "answer_id": 27829687, "question_id": 27829576, "link": "https://stackoverflow.com/questions/27829576/switch-statement-always-including-both-the-case-and-default/27829687#27829687", "title": "Switch statement always including both the case and default", "body": "<p>You just need an extra case to handle the stray '\\n' that comes from you pressing enter at your terminal. January should work if you just type 1</p>\n\n<p>Edit:Actually I just tested it on Linux and it works flawlessly, there might be some minor differences on Windows, though.</p>\n\n<pre><code>while (month != EOF)\n{\n        switch (month)\n        {\n\n            case 49:\n            month2 = getchar();\n\n            switch (month2)\n            {\n                case 10:\n                    printf(\"January \\n\");\n                    break;\n                case 48:\n                    printf(\"October \\n\");\n                    break;\n                case 49:\n                    printf(\"November \\n\");\n                    break;\n                case 50:\n                    printf(\"December \\n\");\n                    break;\n            }\n            break;\n\n                case 50:\n                    printf(\"February \\n\");\n                    break;\n                case 51:\n                    printf(\"March \\n\");\n                    break;\n                case 52:\n                    printf(\"April \\n\");\n                    break;\n                case 53:\n                    printf(\"May \\n\");\n                    break;\n                case 54:\n                    printf(\"June \\n\");\n                    break;\n                case 55:\n                    printf(\"July \\n\");\n                    break;\n                case 56:\n                    printf(\"August \\n\");\n                    break;\n                case 57:\n                    printf(\"Septembe \\n\");\n                    break;\n                // Filter out stray \\n\n                case '\\n':\n                    break;\n                default: printf(\"Error \\n\");\n\n\n\n\n\n            }\n            month = getchar();\n}\n\n\nsystem(\"PAUSE\");\nreturn (0);\n</code></pre>\n"}], "owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 27829687, "answer_count": 1, "score": -1, "last_activity_date": 1420669349, "creation_date": 1420668797, "question_id": 27829576, "link": "https://stackoverflow.com/questions/27829576/switch-statement-always-including-both-the-case-and-default", "title": "Switch statement always including both the case and default", "body": "<p>When I compile this program, it outputs both the corresponding switch case and the default tag contents, the only value it doesn't print out for is January, any help would be great!</p>\n\n<p>Sample Input: 4</p>\n\n<p>Sample Output: </p>\n\n<p>April\nError</p>\n\n<p>Though I could make the program better, I need to have it this specific way.                                                                    </p>\n\n<pre><code>while (month != EOF)\n{\n        switch (month)\n        {\n\n            case 49:\n            month2 = getchar();\n\n            switch (month2)\n            {\n                case 10:\n                    printf(\"January \\n\");\n                    break;\n                case 48:\n                    printf(\"October \\n\");\n                    break;\n                case 49:\n                    printf(\"November \\n\");\n                    break;\n                case 50:\n                    printf(\"December \\n\");\n                    break;\n            }\n            break;\n\n                case 50:\n                    printf(\"February \\n\");\n                    break;\n                case 51:\n                    printf(\"March \\n\");\n                    break;\n                case 52:\n                    printf(\"April \\n\");\n                    break;\n                case 53:\n                    printf(\"May \\n\");\n                    break;\n                case 54:\n                    printf(\"June \\n\");\n                    break;\n                case 55:\n                    printf(\"July \\n\");\n                    break;\n                case 56:\n                    printf(\"August \\n\");\n                    break;\n                case 57:\n                    printf(\"Septembe \\n\");\n                    break;\n                default: printf(\"Error \\n\");\n\n\n\n\n\n            }\n            month = getchar();\n}\n\n\nsystem(\"PAUSE\");\nreturn (0);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "multithreading", "sockets", "stdin"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1420668784, "post_id": 27829384, "comment_id": 44065135, "body": "What EOF? What <code>stdin?</code>"}, {"owner": {"reputation": 33, "user_id": 3919075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0193b475061bb39fb8527e0d35ac5393?s=128&d=identicon&r=PG&f=1", "display_name": "slimcity5", "link": "https://stackoverflow.com/users/3919075/slimcity5"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1420739270, "post_id": 27829384, "comment_id": 44096574, "body": "When debugging in Xcode, the connection failure pauses execution. If you step the main thread after that then the getchar(), which reads from stdin, returns EOF."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3919075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0193b475061bb39fb8527e0d35ac5393?s=128&d=identicon&r=PG&f=1", "display_name": "slimcity5", "link": "https://stackoverflow.com/users/3919075/slimcity5"}, "edited": false, "score": 0, "creation_date": 1420740236, "post_id": 27829552, "comment_id": 44097081, "body": "Thanks! I suppose the EOF from getchar() was just part of system-dependent termination, but a red herring for me."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 3, "last_activity_date": 1420668678, "creation_date": 1420668678, "answer_id": 27829552, "question_id": 27829384, "link": "https://stackoverflow.com/questions/27829384/why-does-a-broken-network-connection-cause-an-eof-on-stdin/27829552#27829552", "title": "Why does a broken network connection cause an EOF on stdin?", "body": "<p>Your server doesn't exit because of EOF on stdin, it exits because it tries to send data on a broken TCP connection, which causes the SIGPIPE signal to be delivered - and the default action for SIGPIPE is to terminate the process.</p>\n\n<p>You should ignore SIGPIPE with</p>\n\n<pre><code> signal(SIGPIPE,SIG_IGN);\n</code></pre>\n\n<p>And that will cause send()/write() calls to instead return -1 and set errno to EPIPE, which your code can handle.</p>\n"}], "owner": {"reputation": 33, "user_id": 3919075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0193b475061bb39fb8527e0d35ac5393?s=128&d=identicon&r=PG&f=1", "display_name": "slimcity5", "link": "https://stackoverflow.com/users/3919075/slimcity5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 27829552, "answer_count": 1, "score": 2, "last_activity_date": 1420668678, "creation_date": 1420667960, "question_id": 27829384, "link": "https://stackoverflow.com/questions/27829384/why-does-a-broken-network-connection-cause-an-eof-on-stdin", "title": "Why does a broken network connection cause an EOF on stdin?", "body": "<p>I have a simple server that in a separate thread waits for a network connection and then sends information periodically to the client. The main thread accepts commands via stdin. What I don't understand is why stdin receives EOF when the client is terminated.</p>\n\n<p>For the sample code below, the client can be as simple as 'nc 127.0.0.1 1234' in the command line. When the client is interrupted with 'kill' or Ctl-C the server exits due to EOF on stdin. I'd certainly appreciate an explanation for this behavior and a workaround that keeps the server running.</p>\n\n<pre><code>static void *WaitForConnections(void *p) {\n    int sockfd, newsockfd;\n    struct sockaddr_in server = { sizeof(server), AF_INET, htons(1234), INADDR_ANY};\n\n    if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {\n        perror(\"socket call failed\");\n        exit(1);\n    }\n\n    if ( bind(sockfd, (struct sockaddr *)&amp;server, sizeof(struct sockaddr_in)) == -1){\n        perror(\"bind call failed\");\n        exit(1);\n    }\n\n    if ( listen(sockfd, 0) == -1 ) {\n        perror(\"listen call failed\");\n        exit(1);\n    }\n\n    for (;;) {\n        if ( (newsockfd = accept(sockfd, NULL, NULL)) != -1) { // new connection\n            for ( ;;) {\n                char c = 'd';\n                if (send(newsockfd, &amp;c, sizeof(c), 0) != sizeof(c)) {\n                    break;\n                }\n                sleep(1);\n            }\n            close(newsockfd);\n        }\n        else {\n            break;\n        }\n    }\n\n    close(sockfd);\n    return NULL;\n}\n\nint main(int argc, const char * argv[]) {\n    pthread_attr_t attr;\n    pthread_t p;\n    void * status;\n\n    pthread_attr_init(&amp;attr);\n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\n\n    if (0 != pthread_create( &amp;p, &amp;attr, WaitForConnections, NULL )) {\n        fprintf(stderr, \"thread creation failed\\n\");\n        exit(1);\n    }\n\n    while (getchar() != EOF) {}\n\n    pthread_join(p, &amp;status);\n\n    return 0;\n}\n</code></pre>\n\n<p>It shouldn't matter, but this is under MacOS X 10.10.1, Xcode 6.1.1 and Apple LLVM 6.0.</p>\n"}, {"tags": ["c++", "c", "sockets", "networking", "posix"], "answers": [{"comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420671821, "post_id": 27830114, "comment_id": 44066448, "body": "So, to sum it up, the only time <code>AI_PASSIVE</code> is ever useful is when you&#39;re creating a server socket and want it to bind to all interfaces (so you&#39;d pass in <code>NULL</code> for <code>nodename</code>)? That&#39;s kind of lame. Why on earth would it ever be useful compared to just using <code>INADDR_ANY</code>/<code>IN6ADDR_ANY_INIT</code> directly?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420672509, "post_id": 27830114, "comment_id": 44066725, "body": "<code>getaddrinfo()</code> populates other fields, not just the IP address.  So it can still be useful to use <code>getaddrinfo()</code> with a NULL <code>nodename</code> instead of populating the <code>sockaddr</code> manually."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420672901, "post_id": 27830114, "comment_id": 44066856, "body": "If <code>nodename</code> is not NULL, and <code>AI_NUMERICHOST</code> is not specified, a DNS lookup is performed. It does not make sense to do that for a passive listening socket. On the other hand, if <code>nodename</code> is an IP address, and <code>AI_NUMERICHOST</code> is specified, it doesn&#39;t matter if <code>AI_PASSIVE</code> is specified or not, the IP address is returned as-is, and can be used equally for <code>bind()</code>, <code>connect()</code>, <code>sendto()</code>, etc, <code>getaddrinfo()</code> doesn&#39;t care. Remember, <code>AI_PASSIVE</code> is just a <b>hint</b>, it does not apply to everything."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1420671614, "last_edit_date": 1420671614, "creation_date": 1420671159, "answer_id": 27830114, "question_id": 27829275, "link": "https://stackoverflow.com/questions/27829275/getaddrinfo-in-what-way-is-ai-passive-ignored-if-the-nodename-is-specified/27830114#27830114", "title": "getaddrinfo: in what way is AI_PASSIVE ignored if the nodename is specified?", "body": "<p>The Linux manpage for <code>gettaddrinfo(2)</code> describes it slightly differently (and a bit more consistently):</p>\n\n<blockquote>\n  <p>If  the  <strong>AI_PASSIVE</strong>  flag  is specified in <em>hints.ai_flags</em>, and <em>node</em> is NULL, then the returned socket addresses will be suitable for <strong>bind</strong>(2)ing a socket that will  <strong>accept</strong>(2)  connections. The returned socket address will contain the \"wildcard address\" [...]. If <em>node</em> is not NULL, then the <strong>AI_PASSIVE</strong> flag is ignored.</p>\n  \n  <p>If the <strong>AI_PASSIVE</strong> flag is not set in <em>hints.ai_flags</em>, then the returned socket addresses will be suitable for use with <strong>connect</strong>(2), <strong>sendto</strong>(2), or <strong>sendmsg</strong>(2).  If <em>node</em> is NULL, then the network address will be set to the loopback interface address [...].</p>\n</blockquote>\n\n<p>Of course, the Linux manpage is not authoritative other than for Linux, but I offer it as a widely-used interpretation.  In particular, note that it specifies that you get a server socket only if AI_PASSIVE is given <strong>and</strong> <em>node</em> is NULL.  That still leaves some ambiguity as to what it means to \"ignore\" AI_PASSIVE, but I think it nevertheless points to the interpretation taken by Linux: you always get address info suitable for a client socket if <em>node</em> is not NULL.</p>\n\n<p>You could perhaps rationalize it this way: \"The AI_PASSIVE flag shall be ignored\" should be interpreted as \"if the AI_PASSIVE flag is set then that fact shall be ignored\".  That is, it shall be handled as if the flag were not set.  I think that's additionally supported by the fact that this statement occurs in the same paragraph with the description of the behavior when AI_PASSIVE is set (in the official docs too, not just the Linux manpage).</p>\n"}], "owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3759, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1420672203, "creation_date": 1420667555, "last_edit_date": 1420672203, "question_id": 27829275, "link": "https://stackoverflow.com/questions/27829275/getaddrinfo-in-what-way-is-ai-passive-ignored-if-the-nodename-is-specified", "title": "getaddrinfo: in what way is AI_PASSIVE ignored if the nodename is specified?", "body": "<p>Quoting from the specs of <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/freeaddrinfo.html\" rel=\"nofollow\">getaddrinfo</a>:</p>\n\n<blockquote>\n  <p>If the <code>AI_PASSIVE</code> flag is specified, the returned address information shall be suitable for use in binding a socket for accepting incoming connections for the specified service. In this case, if the <code>nodename</code> argument is null, then the IP address portion of the socket address structure shall be set to <code>INADDR_ANY</code> for an IPv4 address or <code>IN6ADDR_ANY_INIT</code> for an IPv6 address.</p>\n</blockquote>\n\n<p>This makes sense. If you specify <code>AI_PASSIVE</code>, you can <code>bind()</code>/<code>listen()</code>/<code>accept()</code> on the returned address. If <code>nodename</code> is null, the returned address binds to all network interfaces so you can use any of the computer's IP addresses (e.g. ethernet LAN IP, Wi-Fi LAN IP, loopback address, etc.). Summary: use <code>AI_PASSIVE</code> on the server (for a TCP socket).</p>\n\n<p>Continuing:</p>\n\n<blockquote>\n  <p>If the <code>AI_PASSIVE</code> flag is not specified, the returned address information shall be suitable for a call to <code>connect()</code> (for a connection-mode protocol) or for a call to <code>connect()</code>, <code>sendto()</code>, or <code>sendmsg()</code> (for a connectionless protocol). In this case, if the <code>nodename</code> argument is null, then the IP address portion of the socket address structure shall be set to the loopback address.</p>\n</blockquote>\n\n<p>This also makes sense. If you <strong>don't</strong> specify <code>AI_PASSIVE</code>, you can <code>connect()</code>/<code>sendto()</code>/<code>sendmsg()</code> on the returned address. If <code>nodename</code> is null, you get the loopback address. Summary: <strong>don't</strong> use <code>AI_PASSIVE</code> on the client (for a TCP socket).</p>\n\n<p>Continuing:</p>\n\n<blockquote>\n  <p>The <code>AI_PASSIVE</code> flag shall be ignored if the <code>nodename</code> argument is not null.</p>\n</blockquote>\n\n<p>Huh? What does it even mean to <em>ignore</em> the <code>AI_PASSIVE</code> flag? From the first two quotes, it sounds like <code>AI_PASSIVE</code> is only used to determine whether you get addresses suitable for server/client use, and in both of those cases it sounds like a null <code>nodename</code> just gives you a <code>INADDR_ANY</code> address (for server) or loopback address (for client). What good does it do to <em>ignore</em> the <code>AI_PASSIVE</code> flag?</p>\n\n<p>What does this last quote really mean? How does it affect the first two quotes?</p>\n"}, {"tags": ["c", "backup", "patch"], "answers": [{"comments": [{"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 35, "user_id": 4271707, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-a8sOuGwadbI/AAAAAAAAAAI/AAAAAAAAAFE/tc72zVP7FU0/photo.jpg?sz=128", "display_name": "Joe Oliveira", "link": "https://stackoverflow.com/users/4271707/joe-oliveira"}, "edited": false, "score": 0, "creation_date": 1420673468, "post_id": 27829908, "comment_id": 44067043, "body": "@JoeOliveira You can accept the question by clicking the checkmark next to the up/down-vote buttons. Cheers!"}], "tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": true, "score": 1, "last_activity_date": 1420670156, "creation_date": 1420670156, "answer_id": 27829908, "question_id": 27829065, "link": "https://stackoverflow.com/questions/27829065/making-a-backup-creator/27829908#27829908", "title": "Making a backup creator", "body": "<p>The easiest way to do this would be to find an existing IPS implementation in the form of either:</p>\n\n<ol>\n<li>A pre-existing library plus API</li>\n<li>A pre-existing project  </li>\n</ol>\n\n<p>Fortunately for you, Neill Corlett (the wonderful guy who made the English translation of <a href=\"http://en.wikipedia.org/wiki/Seiken_Densetsu_3\" rel=\"nofollow\">\"Secret of Mana 2\" / \"Seiken Densetsu 3\"</a> a reality) has already created an <a href=\"http://ftp.availo.se/pub/pkgsrc/distfiles/uips-1.0/uips.c\" rel=\"nofollow\">openly available implementiation of the UPS and IPS patch generation/application algorithms</a>. <a href=\"http://ftp.availo.se/pub/pkgsrc/distfiles/uips-1.0/uips.txt\" rel=\"nofollow\">Please refer to the associated readme file to determine the licensing terms</a>.</p>\n\n<p>Anyhow, you can just modify the <code>main()</code> function in the program to select two particular file names (his existing program is already designed to accept them as command-line arguments), and the work is passed off the the existing functions that handle patch generation/application.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 35, "user_id": 4271707, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-a8sOuGwadbI/AAAAAAAAAAI/AAAAAAAAAFE/tc72zVP7FU0/photo.jpg?sz=128", "display_name": "Joe Oliveira", "link": "https://stackoverflow.com/users/4271707/joe-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 27829908, "answer_count": 1, "score": 1, "last_activity_date": 1420670156, "creation_date": 1420666571, "question_id": 27829065, "link": "https://stackoverflow.com/questions/27829065/making-a-backup-creator", "title": "Making a backup creator", "body": "<p>I am helping develop a program that makes an easy way to backup a specific file format in the form of an <a href=\"http://romhack.wikia.com/wiki/IPS\" rel=\"nofollow\">ips patch</a>. We want it to compare 2 files, one in the program folder with a specific name(for ease) and then another that's user selected, which will then produce a patch with the current date/time as the file name. We are coding in C. Are there any tips on to how we can manage this?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "floating-point"], "comments": [{"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1420666766, "post_id": 27828970, "comment_id": 44064186, "body": "I think the standard makes no promises for floating-point returns of functions contained in libraries. But that&#39;s my unexpert understanding on the subject, so not very helpful."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1420666844, "post_id": 27828970, "comment_id": 44064222, "body": "By default Visual Studio sets the precision to &quot;precise&quot; which allows it to do these sort of optimizations. You could try setting it to strict and see what happens."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1420666950, "post_id": 27828970, "comment_id": 44064280, "body": "If all else fails, casting all the intermediates to (double) should do the trick. At least it worked when I was trying to get IEEE-specific behavior for a very specific operation and I didn&#39;t want to turn on global fp:strict."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1420667243, "post_id": 27828970, "comment_id": 44064433, "body": "If you to get rid of the x87 excess precision, typically there&#39;s a specific compilation flag; on gcc there&#39;s <code>-fexcess-precision=standard</code> (and <code>-ffloat-store</code>), for VC++ <code>&#47;fp:strict</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420667554, "post_id": 27828970, "comment_id": 44064569, "body": "Report the value of <code>FLT_EVAL_METHOD</code> in debug and release mode."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420667649, "post_id": 27828970, "comment_id": 44064601, "body": "For debugging, change to <code>volatile double a1, a2, d;</code>.  This will force intermediate saves and reads."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420667680, "post_id": 27828970, "comment_id": 44064618, "body": "@chux VS 2005 does not even claim to implement C99, so it does not have to define <code>FLT_EVAL_METHOD</code>. And it is not as if compilers always did what they say when they do define it (<a href=\"http://stackoverflow.com/questions/17663780/is-there-a-document-describing-how-clang-handles-excess-floating-point-precision\" title=\"is there a document describing how clang handles excess floating point precision\">stackoverflow.com/questions/17663780/&hellip;</a> )"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420667859, "post_id": 27828970, "comment_id": 44064696, "body": "@Pascal Cuoq True about VS.  IAC, this is certainly the result of an inconsistent use of wider FP."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "edited": false, "score": 0, "creation_date": 1420668081, "post_id": 27828970, "comment_id": 44064804, "body": "@All: at the end, VS2005 is probably &quot;too old&quot; and, well, not perfect. Not C99, indeed (+1, Pascal). My question may also become &quot;how free to remove assignments is a compiler?&quot;. That&#39;s why I also asked &quot;What if the variables were &quot;float&quot;? What if they were &quot;int&quot; (weird, but legal)?&quot;"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420668494, "post_id": 27828970, "comment_id": 44064998, "body": "@GiuseppeGuerrini Assignments have effects (conversion to the type of the destination lvalue, and furthermore removal of excess precision which is not automatically implied by the conversion in FLT_EVAL_METHOD&gt;2). These effects are part of the meaning of the source code and must take place in the assembly code. Apart from that, what&#39;s an \u201cassignment\u201d? Does assigning to a register count? If block-scope variable <code>x</code> is only used as part of the expression <code>x+1</code>, can you never assign <code>x</code> but directly compute <code>x+1</code>?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420668660, "post_id": 27828970, "comment_id": 44065069, "body": "@GiuseppeGuerrini What I mean is that there is no notion of \u201cassignment\u201d in assembly code. The only demand one can make is that the functional effects of assignments in the source code are respected in the results computed by the binary code. Non-functional effects (e.g. a place in memory is overwritten with the value, time is spent doing the write) do not have to take place (except for <code>volatile</code> variables, that&#39;s another story)."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420668960, "post_id": 27828970, "comment_id": 44065218, "body": "@Pascal: &quot;what&#39;s an assigment?&quot;. You have already answered! Since the compiler&#39;s goal is (should be) to preserve the final result of a set of operations, the assignment of a intermediate/internal/temporary (useless?) variable is to convert an intermediate value to a particular type (and in my case it does not happen, hum...)."}], "answers": [{"tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": true, "score": 5, "last_activity_date": 1420667564, "last_edit_date": 1420667564, "creation_date": 1420666987, "answer_id": 27829168, "question_id": 27828970, "link": "https://stackoverflow.com/questions/27828970/operations-on-double-and-optimization-in-c/27829168#27829168", "title": "Operations on &quot;double&quot; and optimization in C", "body": "<blockquote>\n  <p>By my \"naive\" point of view, an assignment should force the compiler to convert a value to the precision represented by the variable's type (double, in my case).</p>\n</blockquote>\n\n<p>Yes, this is what the C99 standard says. See below.</p>\n\n<blockquote>\n  <p>So, in short, what does the C standard say about that cases?</p>\n</blockquote>\n\n<p>The C99 standard allows, in some circumstances, floating-point operations to be computed at a higher precision than that implied by the type: look for <code>FLT_EVAL_METHOD</code> and <code>FP_CONTRACT</code> in the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">standard</a>, these are the two constructs related to excess precision. But I am not aware of any words that could be interpreted as meaning that the compiler is allowed to arbitrarily reduce the precision of a floating-point value from the computing precision to the type precision. This should, in a strict interpretation of the standard, only happen in specific spots, such as assignments and casts, in a deterministic fashion.</p>\n\n<p>The best is to read <a href=\"https://gcc.gnu.org/ml/gcc-patches/2008-11/msg00105.html\" rel=\"nofollow\">Joseph S. Myers's analysis</a> of the parts relevant to <code>FLT_EVAL_METHOD</code>:</p>\n\n<blockquote>\n  <p>C99 allows evaluation with excess range and precision following\n  certain rules.  These are outlined in 5.2.4.2.2 paragraph 8:</p>\n  \n  <blockquote>\n    <p>Except for assignment and cast (which remove all extra range and\n        precision), the values of operations with floating operands and\n        values subject to the usual arithmetic conversions and of floating\n        constants are evaluated to a format whose range and precision may\n        be greater than required by the type. The use of evaluation\n        formats is characterized by the implementation-defined value of\n        FLT_EVAL_METHOD:</p>\n  </blockquote>\n</blockquote>\n\n<p>Joseph S. Myers goes on to describe the situation in GCC before the patch that accompanies his post. The situation was just as bad as it is in your compiler (and countless others):</p>\n\n<blockquote>\n  <p>GCC defines FLT_EVAL_METHOD to 2 when using x87 floating point.  Its\n  implementation, however, does not conform to the C99 requirements for\n  FLT_EVAL_METHOD == 2, since it is implemented by the back end\n  pretending that the processor supports operations on SFmode and\n  DFmode:</p>\n  \n  <ul>\n  <li>Sometimes, depending on optimization, a value may be spilled to\n  memory in SFmode or DFmode, so losing excess precision unpredictably\n  and in places other than when C99 specifies that it is lost.</li>\n  <li>An assignment will not generally lose excess precision, although\n  <code>-ffloat-store</code> may make it more likely that it does.</li>\n  </ul>\n  \n  <p>\u2026</p>\n</blockquote>\n\n<p>The C++ standard inherits the definition of <code>math.h</code> from C99, and <code>math.h</code> is the header that defines <code>FLT_EVAL_METHOD</code>. For this reason you might expect C++ compilers to follow suit, but they do not seem to be taking the issue as seriously. Even G++ still does not support <code>-fexcess-precision=standard</code>, although it uses the same back-end as GCC (which has supported this option since Joseph S. Myers' post and accompanying patch).</p>\n"}], "owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 27829168, "answer_count": 1, "score": 4, "last_activity_date": 1420667564, "creation_date": 1420666181, "last_edit_date": 1420666437, "question_id": 27828970, "link": "https://stackoverflow.com/questions/27828970/operations-on-double-and-optimization-in-c", "title": "Operations on &quot;double&quot; and optimization in C", "body": "<p>I have recently analyzed an old piece of code compiled with VS2005 because of a different numerical behaviour in \"debug\" (no optimizations) and \"release\" (/O2 /Oi /Ot options) compilations. The (reduced) code looks like:</p>\n\n<pre><code>void f(double x1, double y1, double x2, double y2)\n{\ndouble a1, a2, d;\n\na1 = atan2(y1,x1);\na2 = atan2(y2,x2);\nd = a1 - a2;\nif (d == 0.0) { // NOTE: I know that == on reals is \"evil\"!\n   printf(\"EQUAL!\\n\");\n}\n</code></pre>\n\n<p>The function <code>f</code> is expected to print \"EQUAL\" if invoked with identical pairs of values (e.g. <code>f(1,2,1,2)</code>), but this doesn't always happen in \"release\". Indeed it happened that the compiler has optimized the code as  if it were something like <code>d = a1-atan2(y2,x2)</code> and removed completely the assignment to the intermediate variable <code>a2</code>. Moreover, it has taken advantage of the fact that the second <code>atan2()</code>'s result is already on the FPU stack, so reloaded <code>a1</code> on FPU and subtracted the values. The problem is that the FPU works at extended precision (80 bits) while <code>a1</code> was \"only\" double (64 bits), so saving the first <code>atan2()</code>'s result in memory has actually lost precision. Eventually, <code>d</code> contains the \"conversion error\" between extended and double precision.</p>\n\n<p>I know perfectly that identity (<code>==</code> operator) with float/double should be avoided. My question is not about how to check proximity between doubles. My question is about how \"contractual\" an assignment to a local variable should be considered. By my \"naive\" point of view, an assignment should force the compiler to convert a value to the precision represented by the variable's type (double, in my case). What if the variables were \"float\"? What if they were \"int\" (weird, but legal)?</p>\n\n<p>So, in short, what does the C standard say about that cases?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 102099, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 2, "creation_date": 1420666138, "post_id": 27828922, "comment_id": 44063888, "body": "Welcome to StackOverflow. For us to help you, you need to ask a <i>concrete, answerable</i> question, and show us what you have tried so far to resolve it. As it stands, the question is likely to get closed and attract negative votes."}, {"owner": {"reputation": 1227, "user_id": 1843385, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/93e35de60e9b0cc8917999a0a8de1496?s=128&d=identicon&r=PG", "display_name": "Arnaldo Ignacio Gaspar V&#233;jar", "link": "https://stackoverflow.com/users/1843385/arnaldo-ignacio-gaspar-v%c3%a9jar"}, "edited": false, "score": 0, "creation_date": 1420666221, "post_id": 27828922, "comment_id": 44063936, "body": "Let A, B matrixes, A + B = C. Where c_i = a_i + b_i."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1420666285, "post_id": 27828922, "comment_id": 44063965, "body": "<a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask a good question</a>."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1420666289, "post_id": 27828922, "comment_id": 44063967, "body": "Create a second array and read input to there to have two matrices represented. Create a third array to accomodate the result."}, {"owner": {"reputation": 9, "user_id": 4367632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOhzZ.jpg?s=128&g=1", "display_name": "Eda Kurt", "link": "https://stackoverflow.com/users/4367632/eda-kurt"}, "edited": false, "score": 0, "creation_date": 1420666313, "post_id": 27828922, "comment_id": 44063983, "body": "so this code goes true for this?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1420667009, "post_id": 27828922, "comment_id": 44064315, "body": "<code>j&lt;4</code> --&gt; <code>j&lt;2</code>, <code>i&lt;3</code> --&gt; <code>j&lt;2</code>"}], "answers": [{"tags": [], "owner": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "is_accepted": true, "score": 0, "last_activity_date": 1420667288, "creation_date": 1420667288, "answer_id": 27829224, "question_id": 27828922, "link": "https://stackoverflow.com/questions/27828922/c-i-couldnt-understand-how-i-can-add-two-matrises/27829224#27829224", "title": "&quot;C&quot; i couldnt understand how i can add two matrises", "body": "<p>I don't fully understand what your question is, but I can definately show you how to add two matricies of the same length elementwise, if that's what you're looking for.</p>\n\n<pre><code>#include &lt;stdio&gt;;\n\nint main()\n{\n    //this part is declaring the two arrays you want to add,\n    //and the array you want to store the result in.\n    int arrayA[3];\n    int arrayB[3];\n    int result[3];\n\n    //this part is just initializing the data in the array\n    arrayA[0] = 1;\n    arrayA[1] = 2;\n    arrayA[2] = 3;\n    arrayB[0] = 5;\n    arrayB[1] = 6;\n    arrayB[2] = 7;\n\n    //loops from 0 to 2, and adds the nth element of arrayA and\n    // arrayB to store in result\n    for(int n =0; n &lt; 3; n++)\n    {\n        result[n] = arrayA[n] + arrayB[n];\n    }\n\n    //at this point, result is the addition of your arrays.\n    //You can print it, or whatever it is you wanted to do with it.\n\n    return 0;\n}\n</code></pre>\n\n<p>There are many different things that could be 'adding matricies', but this is one of them.</p>\n\n<p>However, the code you submitted looks like you're trying to store numbers from the keyboard into a 2D array. You're on the right track there, but on your first nested for loop your inner loop goes too far, so it's going outside of the array bounds. Try more liek this:</p>\n\n<pre><code>int matris[2][2];\n\nfor(int i=0;i&lt;2;i++)\n{\n    //you had j&lt;4 here. That will put you in invalid memory!\n    for(int j=0;j&lt;2;j++)\n    {\n        printf(\"Sayi giriniz: \"); scanf(\"%d\",&amp;matris[i][j]);\n    }\n}\n\n//you had i&lt;3 here. That will also put you in invalid memory.\nfor(int i=0;i&lt;2;i++)\n{\n    for(int j=0;j&lt;2;j++)\n    {\n        printf(\"%d \",matris[i][j]);\n    }\n        printf(\"\\n\");\n}\n</code></pre>\n\n<p>I hope I've addressed whatever question you were going for.</p>\n\n<p>\u0130yi \u015fanslar!</p>\n"}, {"tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 1, "last_activity_date": 1420668119, "creation_date": 1420668119, "answer_id": 27829425, "question_id": 27828922, "link": "https://stackoverflow.com/questions/27828922/c-i-couldnt-understand-how-i-can-add-two-matrises/27829425#27829425", "title": "&quot;C&quot; i couldnt understand how i can add two matrises", "body": "<p>As a beginner, you need to realize that programming is nothing more than problem-solving, well there is the bit about expressing the answer in a programming language.</p>\n\n<ol>\n<li><p>Doing matrix addition -- how do you do it, how would a mathematician define it?  Arnaldo has given you the answer to this, $A + B = C$ where $c_{ij}  = a_{ij} + b_{ij}$.  So already, this starts to set some restrictions on the two matrices that your are working with, notably they have to have the same number of rows and columns.</p></li>\n<li><p>Representation of matrices -- ok, now that you know how to add to matrices, you need to figure out how you are going to represent a matrix in your program.  Computer memory is a one-dimensional array of storage units, so we need to map our two dimensional structure onto this one-dimensional array.  There are two ways of doing this.  The first is <em>row major</em> which means that we write the first row to memory, then the second row and so on.  The second is <em>column major</em> which means that we write the first column to memory and then the second row.</p>\n\n<pre><code>Consider the following 2x3 matrix:\n\n    | a b c |\n    | d e f | \n\n in row-major form, it would be laid out in memory as:\n\n  +---+---+---+---+---+---+\n  | a | b | c | d | e | f |\n  +---+---+---+---+---+---+\n\n and in column-major form, in would be laid out in memory as:\n\n  +---+---+---+---+---+---+\n  | a | d | b | e | c | f |\n  +---+---+---+---+---+---+\n</code></pre></li>\n<li><p>Remember that computer science is zero based, so where a mathematician would designate the first element in the first row as a_{11}, we will be using zero based indicies so we will designate it as a_{00}.</p></li>\n<li><p>Most modern program languages use row-major form to store two dimensional arrays (or in this discussion matrices).  So what you might ask?  Well, because we are mapping a two dimensional array to a one dimensional array, and all we really know about the one dimensional array is its starting point in memory, we need to be able to change the pair (row, col) into a single index.  You should convince yourself that the following equation is correct, assuming that nRow and nCol are the number of rows and columns in the matrix.</p>\n\n<pre><code>index = nCol * row + col\n</code></pre></li>\n<li><p>So, now write some code to add to matrices together.  In pseudo-code form this would be:</p>\n\n<pre><code>A &lt;-- read in first n-by-m matrix\nB &lt;-- read in second n-by-m matrix\nC &lt;-- initialize a n-by-m matrix to all zero elements.\n\nfor(r = 0; r &lt; nRow; r++)\n    for(c = 0; c &lt; nCol; c++)\n         C[r][c] = A[r][c] + B[r][c]\n\nprint C\n</code></pre></li>\n<li><p>It is an implementation detail to decide if you want to use fix sized matrices, <em>i.e.</em> 'A[2][2]', or potentially use a dynamically allocated matrix, <em>i.e.</em> 'A = malloc(nRow * nCol * sizeof(int));' (assuming we are storing integers).  This will determine exactly how the addition line in the above pseudo-code would be written.</p></li>\n</ol>\n\n<p>Hope this helps, and kinda show you how to approach problems like this. </p>\n\n<p>Don't be afraid to ask additional questions if you get stuck on attempting the implementation.</p>\n\n<p>Best of Luck,\nT</p>\n"}], "owner": {"reputation": 9, "user_id": 4367632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vOhzZ.jpg?s=128&g=1", "display_name": "Eda Kurt", "link": "https://stackoverflow.com/users/4367632/eda-kurt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 27829224, "answer_count": 2, "score": -11, "last_activity_date": 1420668119, "creation_date": 1420665996, "last_edit_date": 1420666072, "question_id": 27828922, "link": "https://stackoverflow.com/questions/27828922/c-i-couldnt-understand-how-i-can-add-two-matrises", "title": "&quot;C&quot; i couldnt understand how i can add two matrises", "body": "<p>I'm a begginer about c and i need help about it please help </p>\n\n<pre><code>{\n    int matris[2][2];\n\n    for(int i=0;i&lt;2;i++)\n    {\n        for(int j=0;j&lt;4;j++)\n        {\n            printf(\"Sayi giriniz: \"); scanf(\"%d\",&amp;matris[i][j]);\n        }\n    }\n    for(int i=0;i&lt;3;i++)\n    {\n        for(int j=0;j&lt;2;j++)\n        {\n            printf(\"%d \",matris[i][j]);\n        }\n            printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "select", "udp", "p2p"], "comments": [{"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1420673117, "post_id": 27828918, "comment_id": 44066926, "body": "Aside from the parenthetical on the bottom, what is your question?"}, {"owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "reply_to_user": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1420710549, "post_id": 27828918, "comment_id": 44078535, "body": "i can&#39;t understand, why my select() is for the first client straight 1 every time and for all other clients it just stays 0//times out --&gt; the first one gets all the data, but the rest gets nothing."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "edited": false, "score": 0, "creation_date": 1420747520, "post_id": 27848565, "comment_id": 44100994, "body": "the recvfd is the only socket i&#39;m putting in the set for select, so if select returns 1, that socket is the only one, that could recv something, i will look through your exapmle"}, {"owner": {"reputation": 5028, "user_id": 986760, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vR2zH.jpg?s=128&g=1", "display_name": "fkl", "link": "https://stackoverflow.com/users/986760/fkl"}, "reply_to_user": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "edited": false, "score": 0, "creation_date": 1420747943, "post_id": 27848565, "comment_id": 44101234, "body": "Well why are you using select if you have a single descriptor to monitor? Select is only needed when you have multiple ones - each connected to a different client (or in case of udp logically used with a different client) and you want to be notified whenever data is received on any one of them."}, {"owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "edited": false, "score": 0, "creation_date": 1420748235, "post_id": 27848565, "comment_id": 44101382, "body": "the only reason i&#39;m using select, is too  have some kind of time window i&#39;m able to receive data before sending. as mentioned before, we had not that much information about p2p and select looked like a tool that would work. my exact problem with select is anyway, that it stays for the first client the whole time 1 (so he receives the data) and for the other it is just 0"}], "tags": [], "owner": {"reputation": 5028, "user_id": 986760, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vR2zH.jpg?s=128&g=1", "display_name": "fkl", "link": "https://stackoverflow.com/users/986760/fkl"}, "is_accepted": false, "score": 0, "last_activity_date": 1420747258, "creation_date": 1420747258, "answer_id": 27848565, "question_id": 27828918, "link": "https://stackoverflow.com/questions/27828918/problems-with-select-in-an-simple-selfmade-p2p-program-to-exchange-musicdata/27848565#27848565", "title": "Problems with select() in an simple selfmade p2p program to exchange &quot;musicdata&quot; with udp", "body": "<p>Instead of checking which socket from the read set received data, you are directly calling recvfrom on recvfd descriptor. You need to check all of them in a loop.</p>\n\n<p>This is what i could gather in a quick review.</p>\n\n<p>But <a href=\"http://forum.codecall.net/topic/64205-concurrent-tcp-server-using-select-api-in-linux-c/\" rel=\"nofollow\">here</a> is a tcp based example i wrote a long time ago. Your's is udp but you should be able to find the source of your problem easily.</p>\n\n<p>P.S. There was one mistake in code that some one pointed out and fixed in the comments of the post.</p>\n"}], "owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420747258, "creation_date": 1420665981, "last_edit_date": 1420745797, "question_id": 27828918, "link": "https://stackoverflow.com/questions/27828918/problems-with-select-in-an-simple-selfmade-p2p-program-to-exchange-musicdata", "title": "Problems with select() in an simple selfmade p2p program to exchange &quot;musicdata&quot; with udp", "body": "<p>heyho,</p>\n\n<p>i'm trying to make a simple p2p program, that should be able to let at least 3 peers exchange musicdata (author/title) that is stored in 1 file per peer through port 50001-50010. to say it bluntly it's homework and we never really talked about p2p nor did i found any usefull and simple p2p examples without special libraries etc. with beej's guide to network programming and some other sources i got an already halfway working program but i have 1 big problem:</p>\n\n<p>my select call is for the whole loop just for the first client/peer every time 1 for all the other it is just 0 and so they will never receive any data</p>\n\n<p>my p2p code:</p>\n\n<pre><code>case 6:\n{\n    if(!filename.empty())\n    {\n        time_t start, now;\n        time(&amp;start);\n        double elapsedtime = 0;\n        char *recvbuf;\n        char *sendbuf;\n        recvbuf = new char[1024];\n        sendbuf = new char[1024];\n        int recvfd, sendfd,err, port;\n        int errormarker = 0;\n        if((recvfd = socket(AF_INET,SOCK_DGRAM,0)) == -1)\n        {\n            std::cout &lt;&lt; \"Error setting socket\\n\";\n            errormarker =1;\n        }\n        if(errormarker ==1)\n            break;\n        struct sockaddr_in server_address;\n        server_address.sin_family = AF_INET;\n        server_address.sin_addr.s_addr = INADDR_ANY;\n        server_address.sin_port = htons(50001);\n        for (int i =0; i&lt;=9;i++)\n        {\n            port = 50001+i;\n            errormarker = bind(recvfd,(sockaddr*) &amp;server_address, sizeof   (server_address));\n            if(errormarker ==-1)\n                server_address.sin_port = htons(server_address.sin_port+1);\n            else\n                break;\n        }\n        if(errormarker == -1)\n        {\n            std::cout &lt;&lt; \"all ports are used, please wait a minute and try again\\n\";\n            break;\n        }\n        std::cout &lt;&lt; \"Searching for other musicdata owners\\n\";\n        fd_set readset;\n        while (elapsedtime &lt; 15)\n        {\n            if(errormarker != 0)\n                break;\n            memset(recvbuf, 0, sizeof(recvbuf));\n            memset(sendbuf, 0, sizeof(sendbuf));\n            struct timeval tv;\n            tv.tv_sec =0;\n            tv.tv_usec = rnd(10000,50000);\n            FD_ZERO(&amp;readset);\n            FD_SET(recvfd, &amp;readset);\n            int result = select(recvfd + 1, &amp;readset, NULL, NULL, &amp;tv);\n            std::cout &lt;&lt; result &lt;&lt; \"\\n\";\n            if (result &gt;0)\n            {\n                result = recvfrom(recvfd, recvbuf, 1024, NULL,NULL,NULL);\n                if (result != -1)\n                {\n                    buftofile(recvbuf,filename);\n                    addnewdata(filename);\n                }\n                else\n                    std::cout &lt;&lt; \"error receiving data \\n\";\n            }\n            filetobuf(sendbuf,filename);\n            for(int i = 50001; i&lt;=50010;i++)\n            {\n                struct addrinfo hints, *servinfo, *p;\n                memset(&amp;hints, 0, sizeof hints);\n                hints.ai_family = AF_UNSPEC;\n                hints.ai_socktype =SOCK_DGRAM;\n                std::string s_port = to_string(i);\n                err = getaddrinfo(NULL,s_port.c_str(),&amp;hints,&amp;servinfo);\n                for(p=servinfo;p!=NULL;p=p-&gt;ai_next)                                \n                {\n                    if(i == port)\n                    {\n                        err = sendto(recvfd, sendbuf,strlen(sendbuf), 0, p-&gt;ai_addr,p-&gt;ai_addrlen);\n                        continue;\n                    }\n                    if((sendfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,p-&gt;ai_protocol)) == -1)\n                    {\n                        continue;\n                    }\n                    else\n                    {\n                        err=sendto(sendfd,sendbuf,strlen(sendbuf), 0, p-&gt;ai_addr,p-&gt;ai_addrlen);\n                        close(sendfd);                              \n                    }\n                }\n                freeaddrinfo(servinfo);\n            }\n            time(&amp;now);\n            elapsedtime=difftime(now,start);\n        }\n        close(recvfd);\n\n    }\n    else\n        std::cout &lt;&lt; \"Error, please choose a file to save your data first!\" &lt;&lt; std::endl;\n}\nbreak;\n</code></pre>\n\n<p>the functions are all tested and work as they should.</p>\n\n<p>(on a sitenote i got a little irregularity that startles me slightly:\nwhen i run all 3 clients and the first one gets all the data he gets everytime the same line missing exactly 3 characters --- every time again --- i'm running the programm from one pc and can't completely understand, why that happens every time (i guess i should add a start- and an endsign to remove the problem, but the fact, that the same line comes every time fascinates me though). Is there an explanation to that phenomen?)</p>\n\n<p>thanks in advance for the help.</p>\n"}, {"tags": ["c", "arrays", "pointers", "c99", "variable-length-array"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 6, "creation_date": 1420665633, "post_id": 27828822, "comment_id": 44063643, "body": "Do you have links to where you found this information?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 4, "creation_date": 1420665658, "post_id": 27828822, "comment_id": 44063657, "body": "<code>int p(n)</code>? Does that even compile?"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1420666070, "post_id": 27828822, "comment_id": 44063864, "body": "@barakmanos Yep. <a href=\"https://ideone.com/QRHvxf\" rel=\"nofollow noreferrer\">ideone.com/QRHvxf</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1420666093, "post_id": 27828822, "comment_id": 44063875, "body": "@barakmanos it compiles fine in <code>gcc</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1178540"}, "edited": false, "score": 78, "creation_date": 1420666324, "post_id": 27828822, "comment_id": 44063987, "body": "This is awesome, now never use it again and use n*n instead..."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 26, "creation_date": 1420669544, "post_id": 27828822, "comment_id": 44065474, "body": "or better: <code>int q(int n) { return sizeof (char [n][n]); }</code>"}, {"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1420679929, "post_id": 27828822, "comment_id": 44068852, "body": "@ouah - that is the same answer as the one I posted in code golf last year (<a href=\"http://codegolf.stackexchange.com/a/18283/14485\">codegolf.stackexchange.com/a/18283/14485</a>)"}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1420685631, "post_id": 27828822, "comment_id": 44070223, "body": "The C language reflects a lot of features of the PDP-11. E.g., the ++/-- operators match addressing modes. In the PDP and [especially] VAX, all kinds of arithmetic operations could be carried out using addressing modes. That&#39;s the origin of tricks like this."}, {"owner": {"reputation": 18328, "user_id": 12890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/af95092b7641d7d2b80fbe548f4d1681?s=128&d=identicon&r=PG", "display_name": "Arne Burmeister", "link": "https://stackoverflow.com/users/12890/arne-burmeister"}, "edited": false, "score": 1, "creation_date": 1420701232, "post_id": 27828822, "comment_id": 44074550, "body": "seems to come from the cryptic C code contest, never do such things in production code!"}, {"owner": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 17, "creation_date": 1420702985, "post_id": 27828822, "comment_id": 44075181, "body": "@ouah assuming this question refers to <a href=\"http://codegolf.stackexchange.com/a/43262/967\">codegolf.stackexchange.com/a/43262/967</a> the reason I didn&#39;t use <code>sizeof</code> was to save characters. Everyone else: this is intentionally obscure code, it&#39;s undefined behavior, @ouah&#39;s answer is correct."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 1, "creation_date": 1420743551, "post_id": 27828822, "comment_id": 44098792, "body": "The pointer arithmetic in this code invokes undefined behavior."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1420745235, "post_id": 27828822, "comment_id": 44099692, "body": "It would be a tad bit less likely to overflow if the array were of type char rather than int."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1420789157, "post_id": 27828822, "comment_id": 44115013, "body": "<b>here be dragons</b>: obtaining a pointer outside of an array bounds (except one position after the last) is <b>Undefined Behavior</b>, even if you don&#39;t deference it."}, {"owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "edited": false, "score": 0, "creation_date": 1420789606, "post_id": 27828822, "comment_id": 44115178, "body": "Isn&#39;t this going to eat memory when you use large values of n, even if only for a moment?"}, {"owner": {"reputation": 5516, "user_id": 2128327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG", "display_name": "Khaled.K", "link": "https://stackoverflow.com/users/2128327/khaled-k"}, "edited": false, "score": 0, "creation_date": 1421214457, "post_id": 27828822, "comment_id": 44270012, "body": "Nice. A <code>O(n^2)</code> to calculate <code>n^2</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420666301, "post_id": 27828960, "comment_id": 44063974, "body": "Well, I got that, but why does this happen in C? What&#39;s the logic behind this?"}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420666456, "post_id": 27828960, "comment_id": 44064061, "body": "@Emanuel there&#39;s no stricter answer to that really than that pointer arithmetic is useful for measuring distance (usually in an array), the <code>[n]</code> syntax declares an array and arrays decompose to pointers. Three separately useful things with this consequence."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 1, "creation_date": 1420666544, "post_id": 27828960, "comment_id": 44064098, "body": "@Emanuel if you&#39;re asking <i>why</i> someone would do this, there is little reason and every reason <i>not</i> to due to the UB nature of the action. And it is worth noting that <code>(&amp;a)[n]</code> is type <code>int[n]</code>, and <i>that</i> expresses as <code>int*</code> due to arrays expressing as the address of their first element, in case that wasn&#39;t clear in the description."}, {"owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420666670, "post_id": 27828960, "comment_id": 44064148, "body": "No, I didn&#39;t mean why someone would do this, I meant why does the C standard behaves like this in this situation."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 1, "creation_date": 1420666746, "post_id": 27828960, "comment_id": 44064179, "body": "@Emanuel <i>Pointer Arithmetic</i> (and in this case a subchapter of that topic: <i>pointer differencing</i>). It is worth googling as well as reading questions and answers on this site. it has many useful benefits and is concretely defined in the standards when used properly. In order to fully grasp it you <i>have</i> to understand how the <i>types</i> in the code you listed are contrived."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 35, "last_activity_date": 1420666775, "last_edit_date": 1420666775, "creation_date": 1420666159, "answer_id": 27828960, "question_id": 27828822, "link": "https://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number/27828960#27828960", "title": "Can&#39;t understand this way to calculate the square of a number", "body": "<p><code>a</code> is a (variable) array of <code>n</code> <code>int</code>.</p>\n\n<p><code>&amp;a</code> is a pointer to a (variable) array of <code>n</code> <code>int</code>.</p>\n\n<p><code>(&amp;a)[1]</code> is a pointer of <code>int</code> one <code>int</code> past the last array element. This pointer is <code>n</code> <code>int</code> elements after <code>&amp;a[0]</code>.</p>\n\n<p><code>(&amp;a)[2]</code> is a pointer of <code>int</code> one <code>int</code> past the last array element of two arrays. This pointer is <code>2 * n</code> <code>int</code> elements after <code>&amp;a[0]</code>.</p>\n\n<p><code>(&amp;a)[n]</code> is a pointer of <code>int</code> one <code>int</code> past the last array element of <code>n</code> arrays. This pointer is <code>n * n</code> <code>int</code> elements after <code>&amp;a[0]</code>. Just subtract <code>&amp;a[0]</code> or <code>a</code> and you have <code>n</code>.</p>\n\n<p>Of course this is technically undefined behavior even if it works on your machine as <code>(&amp;a)[n]</code> does not point inside the array or one past the last array element (as required by the C rules of pointer arithmetic).</p>\n"}, {"comments": [{"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 11, "creation_date": 1420666362, "post_id": 27828983, "comment_id": 44064008, "body": "And as you clearly imply but I feel the need to make explicit, it&#39;s a syntax hack at best. The multiply operation will still be under there; it&#39;s just the operator that&#39;s being avoided."}, {"owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420666541, "post_id": 27828983, "comment_id": 44064095, "body": "I got what it happens behind, but my real question is why (&amp;a)[k] is at the same address as a + k * sizeof(a) / sizeof(int)"}, {"owner": {"reputation": 43748, "user_id": 1967396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qBbwd.png?s=128&g=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/1967396/floris"}, "edited": false, "score": 33, "creation_date": 1420693008, "post_id": 27828983, "comment_id": 44071965, "body": "As an old codger I am taken aback by the fact that the compiler can treat <code>(&amp;a)</code> as a pointer to an object of <code>n*sizeof(int)</code> when <code>n</code> is not known at compile time. C used to be a <i>simple</i> language..."}, {"owner": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 0, "creation_date": 1420735439, "post_id": 27828983, "comment_id": 44094205, "body": "That&#39;s a pretty clever hack, but something that you wouldn&#39;t be seeing in production code (hopefully)."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 14, "creation_date": 1420737208, "post_id": 27828983, "comment_id": 44095451, "body": "As an aside, it&#39;s also UB, because it increments a pointer to point neither to an element of the underlying array, nor just past."}, {"owner": {"reputation": 4273, "user_id": 259543, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4467b34cac116943a05e10841994dbad?s=128&d=identicon&r=PG", "display_name": "alecov", "link": "https://stackoverflow.com/users/259543/alecov"}, "reply_to_user": {"reputation": 43748, "user_id": 1967396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qBbwd.png?s=128&g=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/1967396/floris"}, "edited": false, "score": 0, "creation_date": 1420740809, "post_id": 27828983, "comment_id": 44097367, "body": "@Floris: Indeed, and this (along a couple more) makes a very solid reason why many people still stick to C90 even today."}, {"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1420827180, "post_id": 27828983, "comment_id": 44135747, "body": "@haccks - This was taken from a codegolf challenge to write a function that squares a number without using the <code>*</code> symbol in the code.  You can decide what that means. It&#39;s a silly challenge."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1420828806, "post_id": 27828983, "comment_id": 44136569, "body": "@MarkLakata; <code>*</code> operator has more than one meaning in C. You should specifically state about <i>multiplication</i> operator. At first glance I thought you are talking about indirection operator but understood when visited the link."}, {"owner": {"reputation": 1660, "user_id": 172821, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf505c9af73357aad874f83044c8551c?s=128&d=identicon&r=PG", "display_name": "ddyer", "link": "https://stackoverflow.com/users/172821/ddyer"}, "edited": false, "score": 0, "creation_date": 1421188905, "post_id": 27828983, "comment_id": 44263328, "body": "And more importantly, it doesn&#39;t eliminate the multiply, it just induces the compiler to hide it from you.   A more honest solution to the challenge would be to write a function that simulates the simplest binary number multiply using shift and add."}], "tags": [], "owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "is_accepted": false, "score": 117, "last_activity_date": 1426798915, "last_edit_date": 1426798915, "creation_date": 1420666210, "answer_id": 27828983, "question_id": 27828822, "link": "https://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number/27828983#27828983", "title": "Can&#39;t understand this way to calculate the square of a number", "body": "<p>Obviously a hack... but a way of squaring a number without using the <code>*</code> operator (this was a coding contest requirement). </p>\n\n<pre><code>(&amp;a)[n] \n</code></pre>\n\n<p>is equivalent to a pointer to <code>int</code> at location</p>\n\n<pre><code>(a + sizeof(a[n])*n)\n</code></pre>\n\n<p>and thus the entire expression is</p>\n\n<pre><code>  (&amp;a)[n] -a \n\n= (a + sizeof(a[n])*n -a) /sizeof(int)\n\n= sizeof(a[n])*n / sizeof(int)\n= sizeof(int) * n * n / sizeof(int)\n= n * n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420667028, "post_id": 27829061, "comment_id": 44064321, "body": "So behind every array there is a matrix of the size n*n?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420667368, "post_id": 27829061, "comment_id": 44064482, "body": "@Emanuel  Between these two pointers there is a matrix of n x n elements. And the difference of the pointers gives value equal to n * n that is how many elements are between the pointers."}, {"owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420669119, "post_id": 27829061, "comment_id": 44065299, "body": "But why is this matrix of the size n*n behind? Does it have any use in C? I mean, it&#39;s like C &quot;allocated&quot; more arrays of the size n, without me knowing it? If so, can I use them? Otherwise, why would this matrix be formed (I mean, it must have a purpose for it being there)."}, {"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 2, "creation_date": 1420671811, "post_id": 27829061, "comment_id": 44066441, "body": "@Emanuel - This matrix is only an explanation of how pointer arithmetic works in this case. This matrix is not allocated and you cannot use it. Like it was already stated a few times, 1) this code snippet is a hack which has no practical use; 2) you need to learn how pointer arithmetic works in order to understand this hack."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420696983, "post_id": 27829061, "comment_id": 44073106, "body": "@Emanuel This explains the pointer arithmetic. Expreesion ( &amp;a )[n] is pointer to n- element of the imaged two dimensional array due to the pointer arithmetic."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 12, "last_activity_date": 1435304552, "last_edit_date": 1435304552, "creation_date": 1420666549, "answer_id": 27829061, "question_id": 27828822, "link": "https://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number/27829061#27829061", "title": "Can&#39;t understand this way to calculate the square of a number", "body": "<p>If you have two pointers that point to two elements of the same array then its difference will yield the number of elements between these pointers. For example this code snippet will output 2.</p>\n\n<pre><code>int a[10];\n\nint *p1 = &amp;a[1];\nint *p2 = &amp;a[3];\n\nprintf( \"%d\\n\", p2 - p1 ); \n</code></pre>\n\n<p>Now let consider expression</p>\n\n<pre><code>(&amp;a)[n] - a;\n</code></pre>\n\n<p>In this expression <code>a</code> has type <code>int *</code> and points to its first element.</p>\n\n<p>Expression <code>&amp;a</code> has type <code>int ( * )[n]</code> and points to the first row of imaged two dimensional array. Its value matches the value of <code>a</code> though types are different.</p>\n\n<pre><code>( &amp;a )[n]\n</code></pre>\n\n<p>is n-th element of this imaged two dimensional array and has type <code>int[n]</code> That is it is n-th row of the imaged array. In expression <code>(&amp;a)[n] - a</code> it is converted to the address of its first element and has type `int *.</p>\n\n<p>So between  <code>(&amp;a)[n]</code> and <code>a</code> there are n rows of n elements. So the difference will be equal to <code>n * n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1420679188, "post_id": 27830842, "comment_id": 44068675, "body": "&quot;both shall point to elements of the same array object&quot; - which raises the question for me whether this &quot;hack&quot; isn&#39;t UB after all. The pointer arithmetic expression is referring to the hypothetical end of a non-existant object: Is this even allowed?"}, {"owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 0, "creation_date": 1420681496, "post_id": 27830842, "comment_id": 44069260, "body": "To summarise, a is the address of an array of n elements, so &amp;a[0] is the address of the first element in this array, which is same to a; in addition, &amp;a[k] will always be considered an address of an array of n elements, regardless of k, and since &amp;a[1..n] is a vector as well, the &quot;location&quot; of its elements is consecutive, meaning first element is at position x, second is at position x + (number of elements of vector a which is n) and so on. Am I right? Also, this is a heap space, so does it mean that if I allocate a new vector of same n elements, its address is same as (&amp;a)[1]?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "edited": false, "score": 1, "creation_date": 1420682894, "post_id": 27830842, "comment_id": 44069621, "body": "@Emanuel; <code>&amp;a[k]</code> is an address of <code>k</code>th element of array <code>a</code>. It is <code>(&amp;a)[k]</code> that will always be considered an address of an array of <code>k</code> elements. So, first element is at position <code>a</code> (or <code>&amp;a</code>), second is at position <code>a</code> + (number of elements of array <code>a</code> which is <code>n</code>)*(size of an array element) and so on. And note that, memory for variable length arrays are allocated on stack, not on heap."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1420719496, "post_id": 27830842, "comment_id": 44083527, "body": "@MartinBa; <i>Is this even allowed?</i> No. It is not allowed. Its UB. See the edit."}, {"owner": {"reputation": 43748, "user_id": 1967396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qBbwd.png?s=128&g=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/1967396/floris"}, "edited": false, "score": 0, "creation_date": 1420741231, "post_id": 27830842, "comment_id": 44097585, "body": "So would <code>(&amp;a)[n]-(&amp;a)[0]</code> be the correct way to do this?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 43748, "user_id": 1967396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qBbwd.png?s=128&g=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/1967396/floris"}, "edited": false, "score": 0, "creation_date": 1420745170, "post_id": 27830842, "comment_id": 44099666, "body": "@Floris; No. <code>(&amp;a)[n]</code> is violating the rule that standard says: <b>both shall point to elements of the same array object, or one past the last element of the array object</b>. You can do this in a correct way by changing the function body to <code>return sizeof (char [n][n]);</code> as suggested in <a href=\"http://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number/27830842#comment44065474_27828822\">this comment</a>."}, {"owner": {"reputation": 3314, "user_id": 1271230, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/931272b8b6de7766c0c62ddf3c80a24a?s=128&d=identicon&r=PG", "display_name": "Dimitar Tsonev", "link": "https://stackoverflow.com/users/1271230/dimitar-tsonev"}, "edited": false, "score": 1, "creation_date": 1421185924, "post_id": 27830842, "comment_id": 44261899, "body": "@haccks nice coincidence between the nature ot the question and your nickname"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 3314, "user_id": 1271230, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/931272b8b6de7766c0c62ddf3c80a24a?s=128&d=identicon&r=PG", "display_name": "Dimitar Tsonev", "link": "https://stackoverflow.com/users/1271230/dimitar-tsonev"}, "edited": false, "score": 0, "creation_date": 1421186121, "post_id": 27830842, "comment_id": 44262012, "body": "@DimitarTsonev; Oh! Yes :)"}, {"owner": {"reputation": 4425, "user_id": 566706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a727713a91530dc75f7cf4511891bf61?s=128&d=identicon&r=PG", "display_name": "Falanwe", "link": "https://stackoverflow.com/users/566706/falanwe"}, "edited": false, "score": 0, "creation_date": 1421221021, "post_id": 27830842, "comment_id": 44272316, "body": "I think I don&#39;t get why you say we are off specs. Aren&#39;t we in this case <b>one past the last element of the array object</b> (last element is (&amp;a)[n-1], and we are asking (&amp;a)[n], so one past)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 4425, "user_id": 566706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a727713a91530dc75f7cf4511891bf61?s=128&d=identicon&r=PG", "display_name": "Falanwe", "link": "https://stackoverflow.com/users/566706/falanwe"}, "edited": false, "score": 0, "creation_date": 1421234087, "post_id": 27830842, "comment_id": 44278970, "body": "@Falanwe; Last element is <code>a[n-1]</code>. <code>a[n]</code> is one past the last element of array.  <code>(&amp;a)[1]</code> is pointer to past the last element (an array of <code>n</code> <code>int</code>) of array."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 86, "last_activity_date": 1430644776, "last_edit_date": 1495539926, "creation_date": 1420675159, "answer_id": 27830842, "question_id": 27828822, "link": "https://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number/27830842#27830842", "title": "Can&#39;t understand this way to calculate the square of a number", "body": "<p>To understand this hack, first you need to understand the pointer difference, i.e, what happens when two pointers pointing to elements of <em>same array</em> are subtracted?  </p>\n\n<p>When one pointer is subtracted from another, the result is the distance (measured in array elements) between the pointers. So, if <code>p</code> points to <code>a[i]</code> and <code>q</code> points to <code>a[j]</code>, then <strong><code>p - q</code> is equal to <code>i - j</code></strong>.   </p>\n\n<h3>C11: 6.5.6 Additive operators (p9):</h3>\n\n<blockquote>\n  <p><strong>When two pointers are subtracted</strong>, both shall point to elements of the same array object, or one past the last element of the array object; <strong>the result is the difference of the subscripts of the two array elements</strong>. [...].<br>\n  In other words, if the expressions <code>P</code> and <code>Q</code> point to, respectively, the <code>i</code>-th and <code>j</code>-th elements of an array object, <strong>the expression <code>(P)-(Q)</code> has the value <code>i\u2212j</code></strong> provided the value fits in an object of type <code>ptrdiff_t</code>. </p>\n</blockquote>\n\n<p>Now I am expecting that you are aware of array name conversion to pointer, <code>a</code> converts to pointer to first element of array <code>a</code>. <code>&amp;a</code> is address of the entire memory block, i.e it is an address of array <code>a</code>. The figure below will help you to understand (<sub>read <a href=\"https://stackoverflow.com/a/24468853/2455888\">this answer</a> for detailed explanation</sub>):    </p>\n\n<p><img src=\"https://i.stack.imgur.com/rjnjc.png\" alt=\"enter image description here\"></p>\n\n<p>This will help you to understand that why <code>a</code> and <code>&amp;a</code> has the same address and how <code>(&amp;a)[i]</code> is the address of i<sup>th</sup> array (of same size as that of <code>a</code>).  </p>\n\n<p>So, the statement   </p>\n\n<pre><code>return (&amp;a)[n] - a; \n</code></pre>\n\n<p>is equivalent to  </p>\n\n<pre><code>return (&amp;a)[n] - (&amp;a)[0];  \n</code></pre>\n\n<p>and this difference will give the number of elements between the pointers <code>(&amp;a)[n]</code> and <code>(&amp;a)[0]</code>, which are <code>n</code> arrays each of <code>n</code> <code>int</code> elements. Therefore, total array elements are <code>n*n</code> = <code>n</code><sup>2</sup>.  </p>\n\n<hr>\n\n<p><strong>NOTE:</strong>  </p>\n\n<h3>C11: 6.5.6 Additive operators (p9):</h3>\n\n<blockquote>\n  <p>When two pointers are subtracted, <strong>both shall point to elements of the same array object,\n  or one past the last element of the array object</strong>; the result is the difference of the\n  subscripts of the two array elements. <em>The size of the result is implementation-defined</em>,\n  and its type (a signed integer type) is <code>ptrdiff_t</code> defined in the <code>&lt;stddef.h&gt;</code> header.\n  If the result is not representable in an object of that type, the behavior is undefined.  </p>\n</blockquote>\n\n<p>Since <code>(&amp;a)[n]</code> neither points to elements of the same array object nor one past the last element of the array object, <code>(&amp;a)[n] - a</code> will invoke <strong>undefined behavior</strong>.</p>\n\n<p>Also note that, better to change the return type of function <code>p</code> to <code>ptrdiff_t</code>.  </p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 1189076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f271b6b63f51566d82788cf14f968804?s=128&d=identicon&r=PG", "display_name": "onlyice", "link": "https://stackoverflow.com/users/1189076/onlyice"}, "is_accepted": false, "score": 4, "last_activity_date": 1421205276, "creation_date": 1421205276, "answer_id": 27935288, "question_id": 27828822, "link": "https://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number/27935288#27935288", "title": "Can&#39;t understand this way to calculate the square of a number", "body": "<pre><code>Expression     | Value                | Explanation\na              | a                    | point to array of int elements\na[n]           | a + n*sizeof(int)    | refer to n-th element in array of int elements\n-------------------------------------------------------------------------------------------------\n&amp;a             | a                    | point to array of (n int elements array)\n(&amp;a)[n]        | a + n*sizeof(int[n]) | refer to n-th element in array of (n int elements array)\n-------------------------------------------------------------------------------------------------\nsizeof(int[n]) | n * sizeof(int)      | int[n] is a type of n-int-element array\n</code></pre>\n\n<p>Thus,</p>\n\n<ol>\n<li>type of <code>(&amp;a)[n]</code> is <code>int[n]</code> pointer</li>\n<li>type of <code>a</code> is <code>int</code> pointer</li>\n</ol>\n\n<p>Now the expression <code>(&amp;a)[n]-a</code> performs a pointer substraction:</p>\n\n<pre><code>  (&amp;a)[n]-a\n= ((a + n*sizeof(int[n])) - a) / sizeof(int)\n= (n * sizeof(int[n])) / sizeof(int)\n= (n * n * sizeof(int)) / sizeof(int)\n= n * n\n</code></pre>\n"}], "owner": {"reputation": 1333, "user_id": 2424638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6544421fa3a3d608054fa506e0805529?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/2424638/emanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9277, "favorite_count": 43, "protected_date": 1421863631, "answer_count": 5, "score": 135, "last_activity_date": 1451289071, "creation_date": 1420665500, "last_edit_date": 1451289071, "question_id": 27828822, "link": "https://stackoverflow.com/questions/27828822/cant-understand-this-way-to-calculate-the-square-of-a-number", "title": "Can&#39;t understand this way to calculate the square of a number", "body": "<p>I have found a function that calculates square of a number:</p>\n\n<pre><code>int p(int n) {\n    int a[n]; //works on C99 and above\n    return (&amp;a)[n] - a;\n}\n</code></pre>\n\n<p>It returns value of n<sup>2</sup>. Question is, how does it do that? After a little testing, I found that between <code>(&amp;a)[k]</code> and <code>(&amp;a)[k+1]</code> is <code>sizeof(a)</code>/<code>sizeof(int)</code>. Why is that?</p>\n"}, {"tags": ["c", "user-interface", "compiler-errors", "gtk", "gtk2"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2162795, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c9a5f4a9ac99e00516b94b61a0c9e730?s=128&d=identicon&r=PG", "display_name": "Kelthar", "link": "https://stackoverflow.com/users/2162795/kelthar"}, "edited": false, "score": 1, "creation_date": 1420729663, "post_id": 27828770, "comment_id": 44090072, "body": "Ok, it worked, thanks. Just a note, for gtk_combo_box_set_active the cast seems to be GTK_COMBO_BOX instead."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 4, "last_activity_date": 1420665854, "last_edit_date": 1420665854, "creation_date": 1420665250, "answer_id": 27828770, "question_id": 27828546, "link": "https://stackoverflow.com/questions/27828546/gtk-combo-box-function-missing-arguments-and-expressions/27828770#27828770", "title": "Gtk Combo Box function missing arguments and expressions", "body": "<pre><code>gtk_combo_box_text_append_text (GtkComboBoxText ball_menu, \"1\");\n</code></pre>\n\n<p>does not have a valid cast / conversion, change to</p>\n\n<pre><code>gtk_combo_box_text_append_text (GTK_COMBO_BOX_TEXT(ball_menu), \"1\");\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 2162795, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c9a5f4a9ac99e00516b94b61a0c9e730?s=128&d=identicon&r=PG", "display_name": "Kelthar", "link": "https://stackoverflow.com/users/2162795/kelthar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 27828770, "answer_count": 1, "score": 2, "last_activity_date": 1420665854, "creation_date": 1420664405, "question_id": 27828546, "link": "https://stackoverflow.com/questions/27828546/gtk-combo-box-function-missing-arguments-and-expressions", "title": "Gtk Combo Box function missing arguments and expressions", "body": "<p>I'm trying to do a dropdown menu in GTK 2+, and the conclusion I reached Is that they are called \"gtk_combo_box\". However, whenever I try to compile, it gives me missing arguments in functions errors...</p>\n\n<p>Here's the part of the code that matters:</p>\n\n<pre><code>  vbox3_field = gtk_vbox_new (FALSE, 0);\n  gtk_container_add (GTK_CONTAINER (hbox2), vbox3_field);\n  gtk_box_pack_start (GTK_BOX (hbox2), vbox3_field, FALSE, TRUE, 0);\n\n  vbox3_sett = gtk_vbox_new (FALSE, 0);\n  gtk_container_add (GTK_CONTAINER (hbox2), vbox3_sett);\n\n  ball_menu=gtk_combo_box_text_new ();\n  gtk_combo_box_text_append_text (GtkComboBoxText ball_menu, \"1\");\n  gtk_combo_box_text_append_text (GtkComboBoxText ball_menu, \"2\");\n  gtk_combo_box_set_active (GtkComboBox *combo_box, 0);\n  //g_signal_connect (ball_menu, \"changed\", G_CALLBACK (cb_ball_selection), gtk_combo_box_text_get_active_text ());\ngtk_box_pack_start(GTK_BOX (vbox3_sett), ball_menu);\n</code></pre>\n\n<p>When I try to take the \"GtkComboBoxText\" out of the function argument, it still gives me a warning saying incompatible pointer type. (I declared \"ball_menu\" as GtkWidget *ball_menu).</p>\n\n<p>The function is defined as follow in the GTK 2+ Reference site:</p>\n\n<pre><code>void\ngtk_combo_box_text_append_text (GtkComboBoxText *combo_box,\n                                const gchar *text);\n</code></pre>\n\n<p>Here are the compilation results:</p>\n\n<pre><code>gcc -o main main.c `pkg-config --cflags --libs gtk+-2.0` -lm\nmain.c: In function \u2018main\u2019:\nmain.c:265:35: error: expected expression before \u2018GtkComboBox\u2019\n   gtk_combo_box_text_append_text (GtkComboBoxText ball_menu, \"1\");\n                                   ^\nmain.c:265:35: error: too few arguments to function \u2018gtk_combo_box_text_append_text\u2019\nIn file included from /usr/include/gtk-2.0/gtk/gtk.h:74:0,\n                 from main.c:1:\n/usr/include/gtk-2.0/gtk/gtkcomboboxtext.h:63:15: note: declared here\n void          gtk_combo_box_text_append_text     (GtkComboBoxText     *combo_box,\n               ^\nmain.c:266:35: error: expected expression before \u2018GtkComboBoxText\u2019\n   gtk_combo_box_text_append_text (GtkComboBoxText ball_menu, \"2\");\n                                   ^\nmain.c:266:35: error: too few arguments to function \u2018gtk_combo_box_text_append_text\u2019\nIn file included from /usr/include/gtk-2.0/gtk/gtk.h:74:0,\n                 from main.c:1:\n/usr/include/gtk-2.0/gtk/gtkcomboboxtext.h:63:15: note: declared here\n void          gtk_combo_box_text_append_text     (GtkComboBoxText     *combo_box,\n               ^\nmain.c:267:29: error: expected expression before \u2018GtkComboBox\u2019\n   gtk_combo_box_set_active (GtkComboBox *combo_box, 0);\n                             ^\nmain.c:267:29: error: too few arguments to function \u2018gtk_combo_box_set_active\u2019\nIn file included from /usr/include/gtk-2.0/gtk/gtk.h:72:0,\n                 from main.c:1:\n/usr/include/gtk-2.0/gtk/gtkcombobox.h:101:15: note: declared here\n void          gtk_combo_box_set_active       (GtkComboBox     *combo_box,\n               ^\n</code></pre>\n\n<p>Does anyone know the reason for this to happen?</p>\n"}, {"tags": ["c", "function", "recursion"], "comments": [{"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1420664328, "post_id": 27828484, "comment_id": 44062985, "body": "@G.Samaras It&#39;s there."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420664375, "post_id": 27828484, "comment_id": 44063012, "body": "Your code is annoying to look at, please indent it properly, it&#39;s really bad to get used to writing code like that, it&#39;s good advice, just fix it."}, {"owner": {"reputation": 396, "user_id": 2799594, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/87caa8ee5016149e608e7c4c4313009e?s=128&d=identicon&r=PG&f=1", "display_name": "theAlias", "link": "https://stackoverflow.com/users/2799594/thealias"}, "edited": false, "score": 0, "creation_date": 1420664394, "post_id": 27828484, "comment_id": 44063028, "body": "So what&#39;s the issue?"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1420664417, "post_id": 27828484, "comment_id": 44063035, "body": "I have formatted it. Don&#39;t you guys mess it up with another edit."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 396, "user_id": 2799594, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/87caa8ee5016149e608e7c4c4313009e?s=128&d=identicon&r=PG&f=1", "display_name": "theAlias", "link": "https://stackoverflow.com/users/2799594/thealias"}, "edited": false, "score": 0, "creation_date": 1420664472, "post_id": 27828484, "comment_id": 44063055, "body": "@theAlias It&#39;s not working , and i need an idea on how to make it work ."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420664544, "post_id": 27828484, "comment_id": 44063097, "body": "And your code works, or it doesn&#39;t what is your question?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420664649, "post_id": 27828484, "comment_id": 44063153, "body": "I&#39;d start by fixing the <i>undefined behavior</i> you&#39;re invoking in <code>main()</code>. You&#39;re scanning values into indeterminate memory locations. None of the pointers in those pointer arrays are established at the time of the scans. That in itself makes your program ill-formed. Fix it."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420664662, "post_id": 27828484, "comment_id": 44063160, "body": "@iharob it doesn&#39;t , so if we can fix it , or make a short version of it? :D"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1420664684, "post_id": 27828484, "comment_id": 44063169, "body": "I think the <code>len &lt; 1 &amp;&amp; pom &lt; 1</code> part should be <code>len &lt; 1 || pom &lt; 1</code> but just guessing here."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1420664743, "post_id": 27828484, "comment_id": 44063209, "body": "@MightyPork You are right , my mistake :D"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420664893, "post_id": 27828484, "comment_id": 44063287, "body": "Now that I look closer, <i>all</i> of the arrays in this are incorrectly declared to house pointers rather than data."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420665116, "post_id": 27828484, "comment_id": 44063390, "body": "@WhozCraig What is the correct way to declare them?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420665169, "post_id": 27828484, "comment_id": 44063413, "body": "@Lolapanza as <code>int</code> arrays, not <code>int*</code> arrays. theAlias says as-much below."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1420665374, "post_id": 27828484, "comment_id": 44063524, "body": "check my answer, I tested int in gcc and it works fine now."}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 2799594, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/87caa8ee5016149e608e7c4c4313009e?s=128&d=identicon&r=PG&f=1", "display_name": "theAlias", "link": "https://stackoverflow.com/users/2799594/thealias"}, "is_accepted": false, "score": 1, "last_activity_date": 1420664797, "creation_date": 1420664797, "answer_id": 27828652, "question_id": 27828484, "link": "https://stackoverflow.com/questions/27828484/recursive-function-for-finding-same-numbers-on-same-positions-between-two-arrays/27828652#27828652", "title": "Recursive function for finding same numbers on same positions between two arrays", "body": "<p>int *num1[5],*num2[5] ... doesnt give you an array of integer pointers with memory allocated. Fix that. Allocate memory using malloc. </p>\n\n<p>Or just say <code>int num1[5],num2[5]</code> and <code>scanf(\"%d\",&amp;num1[i]);</code></p>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420665686, "post_id": 27828775, "comment_id": 44063669, "body": "Since you noted it, so shall I. Note the pre increment isn&#39;t even needed. There is no need to persist this values to <code>num1</code> and <code>num2</code>prior to invoking the recursion. <code>num1+1</code> and <code>num2+1</code> are sufficient."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420665771, "post_id": 27828775, "comment_id": 44063710, "body": "Yeah I didn&#39;t really bother with optimizing, it&#39;d only confuse the OP. You should be able to make all the arguments const, I guess."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "edited": false, "score": 0, "creation_date": 1420665808, "post_id": 27828775, "comment_id": 44063727, "body": "Thanks alot, all mighty pork! Hmm i guess i was close .. somehow. :D Why do you return (*num1=*num2) ?"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420666042, "post_id": 27828775, "comment_id": 44063850, "body": "@WhozCraig check my second version, any mistakes in this one?"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "edited": false, "score": 0, "creation_date": 1420666074, "post_id": 27828775, "comment_id": 44063869, "body": "@Lolapanza if they are equal, you get 1, otherwise 0. It&#39;s the same thing you did with your ifs, just much shorter. Maybe it&#39;d be better to use <code>(*aa == *bb ? 1 : 0)</code> to ensure it&#39;s 1, since True is generally anything nonzero. But it seems to work like this."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "edited": false, "score": 0, "creation_date": 1420666192, "post_id": 27828775, "comment_id": 44063916, "body": "@MightyPork Now this is just orgasmic. Thanks alot dude . :)"}], "tags": [], "owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "is_accepted": true, "score": 1, "last_activity_date": 1420666372, "last_edit_date": 1420666372, "creation_date": 1420665270, "answer_id": 27828775, "question_id": 27828484, "link": "https://stackoverflow.com/questions/27828484/recursive-function-for-finding-same-numbers-on-same-positions-between-two-arrays/27828775#27828775", "title": "Recursive function for finding same numbers on same positions between two arrays", "body": "<p>You have quite a lot of bugs in the code, here's a working version of it.</p>\n\n<p>Read comments to understand what I changed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint Proverka(int *num1, int *num2, int len1, int len2)\n{\n    if (len1 &lt; 1 &amp;&amp; len2 &lt; 1) return 0;\n    // note the pre-increment. Your post-increment wouldn't have worked. Or just add 1.\n    return (*num1 == *num2) + Proverka(++num1, ++num2, len1 - 1, len2 - 1);\n    // this works, since \"boolean\" is really just 0 or 1\n}\n\nint main (void)\n{\n    // I make array of ints, not of pointers to ints.\n    int num1[5], num2[5], len1, len2, i, same;\n    len1 = sizeof(num1) / sizeof(num1[0]);\n    len2 = sizeof(num2) / sizeof(num2[0]);\n\n    for (i = 0; i &lt; len1; i++) {\n        printf(\"First array element %d:\", i+1);\n        scanf(\"%d\", &amp;num1[i]); // pointer at the element\n    }\n\n    for (i = 0; i &lt; len2; i++){\n        printf(\"Second array element %d:\", i+1);\n        scanf(\"%d\", &amp;num2[i]);\n    }\n\n    // get pointers at the first array elements\n    same = Proverka(&amp;num1[0], &amp;num2[0], len1, len2);\n    printf(\"They have %d numbers on same positions\\n\", same); // newline - good practice\n    return 0;\n}\n</code></pre>\n\n<p>Here's a bit more \"optimized\" and cleaned up version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define ITEMS 5\n\nint Proverka(const int *aa, const int *bb, const int len)\n{\n    if (len == 0) return 0;\n    return (*aa == *bb) + Proverka(1 + aa, 1 + bb, len - 1);\n}\n\nint main (void)\n{\n    int aa[ITEMS], bb[ITEMS], i, same;\n\n    for (i = 0; i &lt; ITEMS; i++) {\n        printf(\"First array element %d:\", i+1);\n        scanf(\"%d\", &amp;aa[i]);\n    }\n\n    for (i = 0; i &lt; ITEMS; i++) {\n        printf(\"Second array element %d:\", i+1);\n        scanf(\"%d\", &amp;bb[i]);\n    }\n\n    same = Proverka(&amp;aa[0], &amp;bb[0], ITEMS);\n    printf(\"They have %d numbers on same positions\\n\", same);\n    return 0;\n}\n</code></pre>\n\n<p>Using recursion for this is not a very good choice, a loop would be easier and safer. But this works too - for not-too-large arrays.</p>\n"}], "owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 27828775, "answer_count": 2, "score": 0, "last_activity_date": 1420666372, "creation_date": 1420664145, "last_edit_date": 1420664398, "question_id": 27828484, "link": "https://stackoverflow.com/questions/27828484/recursive-function-for-finding-same-numbers-on-same-positions-between-two-arrays", "title": "Recursive function for finding same numbers on same positions between two arrays", "body": "<p>Here is an example of what the result should be :</p>\n\n<p>1234 and 1344 Have two numbers on same positions. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint Proverka(int *num1[], int *num2[], int len, int pom) \n{   \n    if (len &lt; 1 &amp;&amp; pom &lt; 1)\n        return 0;\n    if (*num1 == *num2)\n        return 1 + Proverka(num1++, num2++, len-1, pom-1);\n    else {\n        return Proverka(num1++, num2++, len-1, pom-1);\n    }\n}\n\nint main (void)\n{\n    int *num1[5], *num2[5], pom, len, i, sin, j;\n\n    pom = sizeof(num1) / sizeof(num1[0]);\n    len = sizeof(num2) / sizeof(num2[0]);\n\n    for (i = 0; i &lt; pom; i++) {\n        printf(\"Enter elements for first array :\");\n        scanf(\"%d\", num1[i]);\n    }\n\n    for (j = 0; j &lt; len; j++){\n        printf(\"Enter elements for second array : \");\n        scanf(\"%d\", num2[j]);\n    }\n\n    sin = Proverka(num1, num2, pom, len);\n\n    {\n        printf(\"They have %d numbers on same positions\", sin);\n    }   \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "fortran"], "comments": [{"owner": {"reputation": 403, "user_id": 4151166, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/5d76f16f63fad4a2a697abbb7e9de58e?s=128&d=identicon&r=PG&f=1", "display_name": "Fra", "link": "https://stackoverflow.com/users/4151166/fra"}, "edited": false, "score": 0, "creation_date": 1420664586, "post_id": 27828478, "comment_id": 44063123, "body": "I also tried gcc -o test fortran_routine.o c_routine.o -lgfortran"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1420665731, "post_id": 27828478, "comment_id": 44063692, "body": "Try linking with gfortran instead of gcc or use the -lgfortran flag to link with the Fortran library."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1420665901, "post_id": 27828478, "comment_id": 44063778, "body": "It works well for me with <code>-lgfortran</code> at link time."}, {"owner": {"reputation": 403, "user_id": 4151166, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/5d76f16f63fad4a2a697abbb7e9de58e?s=128&d=identicon&r=PG&f=1", "display_name": "Fra", "link": "https://stackoverflow.com/users/4151166/fra"}, "edited": false, "score": 0, "creation_date": 1420666763, "post_id": 27828478, "comment_id": 44064184, "body": "Thanks all. Linking with gfortran instead worked. I think that my symlinks to the gfortran libraries are busted."}], "owner": {"reputation": 403, "user_id": 4151166, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/5d76f16f63fad4a2a697abbb7e9de58e?s=128&d=identicon&r=PG&f=1", "display_name": "Fra", "link": "https://stackoverflow.com/users/4151166/fra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1436986247, "creation_date": 1420664125, "last_edit_date": 1436986247, "question_id": 27828478, "link": "https://stackoverflow.com/questions/27828478/compile-and-link-fortran-and-c-mac", "title": "Compile and Link Fortran and C mac", "body": "<p>Here is my C program (c_routine.c):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid fortfunc_(int *ii, float *ff);\n\nint main()\n{\n   int ii           = 5;\n   float ff         = 5.5;\n\n   fortfunc_(&amp;ii, &amp;ff);\n\n   return 0;\n}\n</code></pre>\n\n<p>Here is my Fortran Subroutine (fortran_routine.c):</p>\n\n<pre><code>subroutine fortfunc(ii,ff)\n     integer ii\n     real*4  ff\n\n     write(6,100) ii, ff\n100  format('ii=',i2,' ff=',f6.3)\n\n     return\nend\n</code></pre>\n\n<p>My compilation steps:</p>\n\n<pre><code>gfortran -c fortran_routine.f90 -o fortran_routine -ld\ngcc -c c_routine.c\ngcc -o test fortran_routine.o c_routine.o -ld\n</code></pre>\n\n<p>The last step though gives me the error:</p>\n\n<pre><code>ld: library not found for -ld\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Is this an error with -ld?</p>\n"}, {"tags": ["c", "64-bit", "nan"], "comments": [{"owner": {"reputation": 2655, "user_id": 1633753, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b8dc4b76792ff3c8cd993aa4c9c467f6?s=128&d=identicon&r=PG", "display_name": "Isaac Betesh", "link": "https://stackoverflow.com/users/1633753/isaac-betesh"}, "edited": false, "score": 0, "creation_date": 1420663023, "post_id": 27828171, "comment_id": 44062288, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/7212356/how-to-produce-a-nan-float-in-c\">How to produce a NaN float in c?</a>"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1420663127, "post_id": 27828171, "comment_id": 44062341, "body": "What does the 64bit system have to do with it though? Did the same program not show <code>nan</code> on a 32bit system?"}, {"owner": {"reputation": 219, "user_id": 1216268, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/f601f20bbaa1b4a6379a52a235fb2132?s=128&d=identicon&r=PG", "display_name": "srsci", "link": "https://stackoverflow.com/users/1216268/srsci"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1420663459, "post_id": 27828171, "comment_id": 44062509, "body": "@harold Yes, its only showing up on 64 bit system hence I asked. Else I know how to produce a NaN."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420663556, "post_id": 27828171, "comment_id": 44062563, "body": "Show the code that produces NAN on 64-bit systems and not NAN else-wise.  Else we we only be able to speculate as the cause of your results."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1420663427, "creation_date": 1420663427, "answer_id": 27828300, "question_id": 27828171, "link": "https://stackoverflow.com/questions/27828171/c-float32-variable-shows-nan-in-64-bit-system/27828300#27828300", "title": "C float32 variable shows nan in 64 bit system", "body": "<p><code>float f = 0.0f/0.0f;  printf(\"%f\", f);</code>  shows the <code>NAN</code>.</p>\n\n<p>It has nothing to do with 64 bit system, 16 bit system, N bit system or <a href=\"http://en.wikipedia.org/wiki/Turing_machine\" rel=\"nofollow\">Turing machine</a>.  </p>\n\n<p>Overflow would cause infinity.</p>\n"}, {"tags": [], "owner": {"reputation": 1832, "user_id": 3602072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cfd32064c69064e62755e8fb47b8fb?s=128&d=identicon&r=PG", "display_name": "ezaquarii", "link": "https://stackoverflow.com/users/3602072/ezaquarii"}, "is_accepted": false, "score": 1, "last_activity_date": 1420663550, "creation_date": 1420663550, "answer_id": 27828338, "question_id": 27828171, "link": "https://stackoverflow.com/questions/27828171/c-float32-variable-shows-nan-in-64-bit-system/27828338#27828338", "title": "C float32 variable shows nan in 64 bit system", "body": "<p><code>NaN</code> - Not a Number - is used to encode non-numeric result of a computation, such as division by 0.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/NaN#Operations_generating_NaN\" rel=\"nofollow\">http://en.wikipedia.org/wiki/NaN#Operations_generating_NaN</a></p>\n\n<p>Your math code probably does something strange, such as multiplying by infinity or doing square root of negative number. This kind of problems must be carefully examined on case-by-case basis. It may be simply an uninitialized variable, accumulation of rounding errors, bad mathematical equation, etc, etc.</p>\n\n<p>Platform bits doesn't matter, as floating point arithmetic is strictly stadarized and should behave the same way everywhere[1].</p>\n\n<p>[1] Exceptions apply, but exotic platforms are not a scope of this question.</p>\n"}, {"tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": false, "score": 1, "last_activity_date": 1420666531, "last_edit_date": 1420666531, "creation_date": 1420665474, "answer_id": 27828815, "question_id": 27828171, "link": "https://stackoverflow.com/questions/27828171/c-float32-variable-shows-nan-in-64-bit-system/27828815#27828815", "title": "C float32 variable shows nan in 64 bit system", "body": "<p>NO, overflow would cause and infinity value <code>+INF</code> ot <code>-INF</code>, <code>NAN</code> doesn't come that way.\nprobably your code has a bug.</p>\n\n<p>sqrt(-1) or 0/0</p>\n"}], "owner": {"reputation": 219, "user_id": 1216268, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/f601f20bbaa1b4a6379a52a235fb2132?s=128&d=identicon&r=PG", "display_name": "srsci", "link": "https://stackoverflow.com/users/1216268/srsci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1420666531, "creation_date": 1420662925, "question_id": 27828171, "link": "https://stackoverflow.com/questions/27828171/c-float32-variable-shows-nan-in-64-bit-system", "title": "C float32 variable shows nan in 64 bit system", "body": "<p>Folks\nWhen can a float32 variable show <code>nan</code> value in a 64 bit system? Can this be caused by overflow?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 1, "creation_date": 1420663179, "post_id": 27828169, "comment_id": 44062362, "body": "Remove the <code>()</code> around <code>(LIB_API)</code> and try again."}, {"owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1420663369, "post_id": 27828169, "comment_id": 44062460, "body": "That causes more errors: error C2143: syntax error : missing &#39;)&#39; before &#39;<i>&#39; error C2143: syntax error : missing &#39;{&#39; before &#39;</i>&#39; error C2059: syntax error : &#39;)&#39;"}, {"owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1420664329, "post_id": 27828169, "comment_id": 44062986, "body": "Sorry I jumped the gun on you. You are right. Once I implemented the answer below I ran into another issue that was fixed by removing the parenthesis. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1420663698, "post_id": 27828244, "comment_id": 44062650, "body": "Upticked, Matt, you will likely incur a minimal hit by the latter method mentioned here, <code>typedef struct ToolState {....} ToolState;</code> the rest of the code should require no changes beyond that if you&#39;re using the same MS toolchain for both C and C++ compilation."}, {"owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "edited": false, "score": 0, "creation_date": 1420664368, "post_id": 27828244, "comment_id": 44063006, "body": "Thank you both of you. I appreciate the extra notes and suggestions. They were very helpful. Everything works now. :)"}], "tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": true, "score": 2, "last_activity_date": 1420663210, "creation_date": 1420663210, "answer_id": 27828244, "question_id": 27828169, "link": "https://stackoverflow.com/questions/27828169/syntax-error-c2059-when-building-building-c-application-using-c-c-dll-header/27828244#27828244", "title": "Syntax error C2059 when building building C application using C/C++ DLL header", "body": "<p>In C, structs are not types, so you must use <code>struct Foo</code> and <code>enum Bar</code> where in C++ you are able to use <code>Foo</code> and <code>Bar</code>.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>In C++, you can still use the old syntax even when the type is a class.</li>\n<li>In C, people often use <code>typedef struct Foo Foo</code> which allows the same syntax as in C++ then.</li>\n</ul>\n"}], "owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "accepted_answer_id": 27828244, "answer_count": 1, "score": 1, "last_activity_date": 1420663210, "creation_date": 1420662923, "last_edit_date": 1495535170, "question_id": 27828169, "link": "https://stackoverflow.com/questions/27828169/syntax-error-c2059-when-building-building-c-application-using-c-c-dll-header", "title": "Syntax error C2059 when building building C application using C/C++ DLL header", "body": "<p>I'm attempting to translate a C++ DLL header file into a C/C++ compatible header. While I've gotten most of the major constructs in, I'm running into one last compiler issue I can't seem to explain. The following code works fine in C++ but when I attempt to compile a C application which just includes this file I get errors for my function definitions in my header file.</p>\n\n<p>Code.h:</p>\n\n<pre><code>typedef void *PVOID;\ntypedef PVOID HANDLE;\n#define WINAPI  __stdcall\n\n#ifdef LIB_EXPORTS\n    #define LIB_API __declspec(dllexport)\n#else\n    #define LIB_API __declspec(dllimport)\n#endif\n\nstruct ToolState\n{\n    HANDLE DriverHandle;\n    HANDLE Mutex;\n    int LockEnabled;\n    int Type;\n};\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n(LIB_API) int SetRate(ToolState *Driver, int rate);\n\n(LIB_API) void EnableLock(ToolState *Driver) ;\n\n(LIB_API) int SendPacket(ToolState *Driver, unsigned char *OutBuffer, int frameSize);\n\n//These also give me the same error:\n//LIB_API WINAPI int SendPacket(ToolState *Driver, unsigned char *OutBuffer, int frameSize);\n//__declspec(dllimport) WINAPI int SendPacket(ToolState *Driver, unsigned char *OutBuffer, int frameSize);\n\n//Original C++ call that works fine with C++ but has multiple issues in C\n//LIB_API int SetRate(ToolState *Driver, int rate);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>error C2059: syntax error : 'type'\nerror C2059: syntax error : 'type'\nerror C2059: syntax error : 'type'\n</code></pre>\n\n<p>Google searching hasn't generated any relevant results. The following threads were close but don't exactly answer my question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7948417/c2059-syntax-error-using-declspec-macro-for-one-function-compiles-fine-without\">C2059 syntax error using declspec macro for one function; compiles fine without it</a></p>\n\n<p><a href=\"http://support.microsoft.com/kb/117687/en-us\" rel=\"nofollow noreferrer\">http://support.microsoft.com/kb/117687/en-us</a></p>\n\n<p>Why is this syntax error occuring?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 5, "creation_date": 1420662794, "post_id": 27828078, "comment_id": 44062170, "body": "Returning p isn&#39;t terribly useful since it points at the NULL character at the end of the string.  You need to preserve the original pointer to the beginning of the block so you can free it later and so you can actually use the string."}, {"owner": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1420662835, "post_id": 27828078, "comment_id": 44062196, "body": "@RetiredNinja: That is an answer, not a comment."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "reply_to_user": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "edited": false, "score": 0, "creation_date": 1420662946, "post_id": 27828078, "comment_id": 44062249, "body": "@Svante It&#39;s an issue with the code, but it won&#39;t fix the crash, so to me it&#39;s a comment."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "reply_to_user": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "edited": false, "score": 0, "creation_date": 1420662964, "post_id": 27828078, "comment_id": 44062259, "body": "@Svante: It&#39;s almost an answer -- it&#39;d explain why the string being returned is always empty, and why <code>free</code> might cause a segfault.  I don&#39;t know if it&#39;d explain all the oddity, though.  (And it certainly isn&#39;t the only problem with this code.)"}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1420663164, "post_id": 27828078, "comment_id": 44062359, "body": "Tnx @RetiredNinja for that, i forgotten that element."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 1, "creation_date": 1420663165, "post_id": 27828078, "comment_id": 44062360, "body": "Also, if c is EOF, you just return NULL, and leak p."}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "reply_to_user": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1420663307, "post_id": 27828078, "comment_id": 44062422, "body": "@rpattiso In effect, i think on free function but, that issue take to me ocupation for her."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1420663316, "post_id": 27828078, "comment_id": 44062427, "body": "There&#39;s also a leak if the input doesn&#39;t end with a newline before the length is reached.  There are many issues.  It would be nice to see a complete example to know what length is being passed in and such."}, {"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 0, "creation_date": 1420663486, "post_id": 27828078, "comment_id": 44062523, "body": "As another observation, the use of the &#39;for&#39; construct there is a little...odd. Reworking as a while would more closely mimic the process being implemented, it&#39;d seem."}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1420669614, "post_id": 27828078, "comment_id": 44065509, "body": "@RetiredNinja Submitted length is defined to 100."}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420801270, "post_id": 27828078, "comment_id": 44120709, "body": "Why did I receive down-vote?"}], "answers": [{"comments": [{"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 2, "creation_date": 1420662831, "post_id": 27828140, "comment_id": 44062193, "body": "<code>d &lt; len - 1</code> is the condition"}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 1, "creation_date": 1420662871, "post_id": 27828140, "comment_id": 44062210, "body": "I set in for loop to increment d to ( len - 1)."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 4, "creation_date": 1420662878, "post_id": 27828140, "comment_id": 44062213, "body": "The problem is that he&#39;s incrementing p and returning that modified value."}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1420663646, "post_id": 27828140, "comment_id": 44062617, "body": "I think the problem is in first loop for. I tried to printf some text after for but it doesnt appear. And of course and that is problem  @LeeDanielCrocker"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1420663816, "post_id": 27828140, "comment_id": 44062706, "body": "What are you passing to printf after the for loop? p? p has already been changed by then, so it won&#39;t tell you much."}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1420663874, "post_id": 27828140, "comment_id": 44062756, "body": "@LeeDanielCrocker i print somelike &quot;tree&quot;"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420664255, "post_id": 27828140, "comment_id": 44062950, "body": "@Tartar_sos, must be something else, no crash nor a single memory error tested passing arbitrary input and a memory debugger <code>valgrind</code>."}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420668394, "post_id": 27828140, "comment_id": 44064948, "body": "U fix return address, how i can see, but that is secondary problem."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420669554, "post_id": 27828140, "comment_id": 44065482, "body": "@Tartar_sos <i><code>U fix return address, how i can see, but that is secondary problem.</code></i>"}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420669749, "post_id": 27828140, "comment_id": 44065569, "body": "And? if u don&#39;t know what it&#39;s meaning u have google translate. I don&#39;t want up your answer because my program still crush. Tnx for your advice."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 1, "creation_date": 1420669837, "post_id": 27828140, "comment_id": 44065607, "body": "@Tartar_sos your program is crashing for something else, why don&#39;t you post the <code>main()</code> function?"}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420713393, "post_id": 27828140, "comment_id": 44080151, "body": "Why u need main function, when i define length at 100 like i said, and it is transmitted to *my_getline function."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420664197, "last_edit_date": 1420664197, "creation_date": 1420662784, "answer_id": 27828140, "question_id": 27828078, "link": "https://stackoverflow.com/questions/27828078/got-segmention-fault-in-my-function-after-do-malloc-for-char/27828140#27828140", "title": "Got Segmention fault in my function after do malloc for char *", "body": "<p>As <strong>Lee Daniel Crocker</strong> commented, you are incrementing the pointer and then returning the incremented value, you have two options, you can return <code>p - d</code></p>\n\n<pre><code>char *my_getline(int len)\n{\n    char *p = malloc(len);\n    int   d, c;\n    if (p == NULL)\n        return NULL;\n    for (d = 0 ; d &lt; len - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c!= '\\n'; d++)\n        *p++ = c;\n    *p = '\\0';\n\n    return p - d;\n}\n</code></pre>\n\n<p>which youd point back to the begining of the data, or store the begining in a variable and return that</p>\n\n<pre><code>char *my_getline(int len)\n{\n    char *p = malloc(len);\n    char *ptr;\n    int   d, c;\n    if (p == NULL)\n        return NULL;\n    ptr = p;\n    for (d = 0 ; d &lt; len - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c!= '\\n'; d++)\n        *p++ = c;\n    *p = '\\0';\n\n    return ptr;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 4416936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dcebd239ab8696014b843bd8c9ae056?s=128&d=identicon&r=PG&f=1", "display_name": "user4416936", "link": "https://stackoverflow.com/users/4416936/user4416936"}, "reply_to_user": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 0, "creation_date": 1420663337, "post_id": 27828164, "comment_id": 44062440, "body": "well yes but there&#39;s a big chance that you end up in the mess that you&#39;re in right now"}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 1, "creation_date": 1420663555, "post_id": 27828164, "comment_id": 44062562, "body": "So let&#39;s fix that, for fun."}, {"owner": {"reputation": 151, "user_id": 4416936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dcebd239ab8696014b843bd8c9ae056?s=128&d=identicon&r=PG&f=1", "display_name": "user4416936", "link": "https://stackoverflow.com/users/4416936/user4416936"}, "reply_to_user": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 2, "creation_date": 1420663808, "post_id": 27828164, "comment_id": 44062702, "body": "have fun in the other answer(s) while I&#39;m spending my time on problems that haven&#39;t been solved yet"}, {"owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 1, "creation_date": 1420668829, "post_id": 27828164, "comment_id": 44065155, "body": "So u think it solved, if i get alternate way to save input? , maybe in your opinion, but i want to implement like this."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "reply_to_user": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "edited": false, "score": 1, "creation_date": 1420762827, "post_id": 27828164, "comment_id": 44107833, "body": "@Tartar_sos: Feel free to implement it however you like...but know that you&#39;re taking something that&#39;s already been done and complicating it all to hell.  You could instead be spending that time/effort doing whatever you wanted a line of text for.  :)"}], "tags": [], "owner": {"reputation": 151, "user_id": 4416936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dcebd239ab8696014b843bd8c9ae056?s=128&d=identicon&r=PG&f=1", "display_name": "user4416936", "link": "https://stackoverflow.com/users/4416936/user4416936"}, "is_accepted": false, "score": 4, "last_activity_date": 1420662895, "creation_date": 1420662895, "answer_id": 27828164, "question_id": 27828078, "link": "https://stackoverflow.com/questions/27828078/got-segmention-fault-in-my-function-after-do-malloc-for-char/27828164#27828164", "title": "Got Segmention fault in my function after do malloc for char *", "body": "<p>There is a function <code>fgets</code> in C that already provides what you seek to achieve. Your code could be replaced by:</p>\n\n<pre><code>char *p = (char *) malloc(len);\nfgets(p, len, stdin);`\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4394372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b46a69f158c67fa270f9ccda6f5a029?s=128&d=identicon&r=PG&f=1", "display_name": "Tartar_sos", "link": "https://stackoverflow.com/users/4394372/tartar-sos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1420664197, "creation_date": 1420662526, "last_edit_date": 1420663943, "question_id": 27828078, "link": "https://stackoverflow.com/questions/27828078/got-segmention-fault-in-my-function-after-do-malloc-for-char", "title": "Got Segmention fault in my function after do malloc for char *", "body": "<p>Like i said in title, i have that problem. This is my code, i try with <code>printf</code> function to check where stops program and find that <code>for</code> loop causes that issue? Thank on any advice! I want with this function to return address to char pointer.</p>\n\n<pre><code>char *my_getline(int len)\n{\n  char *p = (char *) malloc(len); // I tried also without (char *), it's same thing.\n  if ( p == NULL)\n  return NULL;\n\n  int d,c;\n  for ( d = 0;d&lt;len-1 &amp;&amp; (c=getchar())!= EOF &amp;&amp; c!= '\\n';d++)\n     *p++ = c;\n\n\n  if ( c == '\\n')\n     {\n        *p = '\\0';\n        return p;\n     }\n    else\n        return NULL;\n\n\n }\n</code></pre>\n\n<p>EDIT: Submitted length is defined to 100, and that isn't so much substantially, because when i enter one char, program crushes.</p>\n"}, {"tags": ["c", "function", "parameters", "scope", "language-lawyer"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420664291, "post_id": 27827930, "comment_id": 44062968, "body": "Fyi, gcc is not alone. clang 3.5 with -std=C11 reports the same error (undeclared identifier: <code>var</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420720993, "post_id": 27828779, "comment_id": 44084315, "body": "Similarly to how I commented to Jens - this seems like a reasonable behavior but I can&#39;t seem to arrive at this conclusion (or contradict the conclusion I presented in the question) from the specification."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420721627, "post_id": 27828779, "comment_id": 44084718, "body": "@SirDayBat Function parameters either have function prototype scope or the function outermost block scope. Return type is not a function parameter."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420721832, "post_id": 27828779, "comment_id": 44084860, "body": "@SirDayBat It makes sense to define separate scope for function parameters because the same parameter name can be used in declarations and definitions of many functions. Return types do not have their own special scope."}, {"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420739166, "post_id": 27828779, "comment_id": 44096521, "body": "True, a function parameter (in a function definition) has a scope that begins after its declarator and continues throughout the function&#39;s outermost block. And I claim that the spec does <i>not</i> say that the scope is temporarily terminated for the remainder of the function&#39;s declarator. Regarding the code in this answer: if return types were declared that way in C, then <code>var</code> indeed wouldn&#39;t be visible. But as it stands, with C&#39;s syntax, the <code>sizeof</code> expression comes lexically after the declaration of <code>var</code> (and before the end of <code>var</code>&#39;s scope), which should be all that matters."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420739638, "post_id": 27828779, "comment_id": 44096775, "body": "@  SirDayBat  In my opiniom this quote of the standard is clear &quot;If the declarator or type specifier that declares the identifier appears inside a block or within the list of parameter declarations in a function definition, the identifier has block scope, which terminates at the end of the associated block.&quot; It says about declarators of the list of parameter declarations. The declarator of the function itself does not belong to the parameter list."}, {"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420746719, "post_id": 27828779, "comment_id": 44100552, "body": "That&#39;s true, but I don&#39;t see why it would matter - the function&#39;s name (<code>func</code>) is not referred to anywhere, so the scope of the identifier <code>func</code> doesn&#39;t make a difference here."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420747618, "post_id": 27828779, "comment_id": 44101052, "body": "@SirDayBat Function name has type. Moreover you could define the return type using a typedef. For example typedef char ( *return_type )[sizeof var ]; And what is var in this case? If a parameter has an internal scope relative to the function declaration itslef then it is not visible yet."}, {"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420804835, "post_id": 27828779, "comment_id": 44122568, "body": "Just because the return type can&#39;t, in this case, be defined with a <code>typedef</code>, IMO isn&#39;t a reason why it couldn&#39;t be defined in the non-typedef version. <i>&quot;If a parameter has an internal scope relative to the function declaration itslef then it is not visible yet.&quot;</i> Does the C specification actually say that? If so, do you know where? If it doesn&#39;t say that, do you think it&#39;s a defect in the spec, or do you consider this too obvious to require an explicit mention in the specification?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420809004, "post_id": 27828779, "comment_id": 44124894, "body": "@SirDayBat  C Standard says that only parameters have internal scope relative to the function declaration. It is enough, The function declaration itself relative to its block scope is in the outer scope. Otherwise neither function declaration would be visible. Also it is useful to consider how unqualified name lookup is performed in C++. There is also only parameters of class member function are looked-up in the class scope. The return type is searched in block scope or name space where the class is defined."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420809053, "post_id": 27828779, "comment_id": 44124917, "body": "@SirDayBat  Take into account that C has also identifier list that is declared after the usual form of the function declaration. So the function declarator includes only types of parameters but the parameters as objects are defined only in the outer scope of the function itself."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1420711473, "last_edit_date": 1420711473, "creation_date": 1420665284, "answer_id": 27828779, "question_id": 27827930, "link": "https://stackoverflow.com/questions/27827930/scope-of-parameters-in-a-complex-function-definition/27828779#27828779", "title": "Scope of parameters in a complex function definition", "body": "<p>The return type of a function is defined in the block scope or file scope where the function itself  is declared. It does not belong to the outer-most block scope of the function definition.\nIn this scope (where the function is declared) parameters of the function are not yet declared.</p>\n\n<p>You can consider the function definition like</p>\n\n<pre><code>return type: char ( * )[sizeof var] // Oops..What is var?!\n{\n   // function block scope including its parameters declarations;\n   int var;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420718725, "post_id": 27828782, "comment_id": 44083140, "body": "So you&#39;re saying that block-scope identifiers can only be visible in blocks and parameter lists of function definitions? That seems like a reasonable behavior, but I&#39;m unable to deduce that from the spec. From the spec, the understanding I get about identifier scopes is that they begin at one point and end at another, and are visible everywhere inbetween (except when shadowed by another declaration). And <code>var</code>&#39;s scope begins after its declarator and ends at the end of <code>func</code>&#39;s body. I can&#39;t see anything in the spec that would imply that it&#39;s not visible outside the param list and body."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420720008, "post_id": 27828782, "comment_id": 44083790, "body": "@SirDayBat, because it part of the return type then would have file scope, no?"}, {"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420720865, "post_id": 27828782, "comment_id": 44084231, "body": "@JensGustedt, if some identifier was declared in the sizeof expression, then that identifier would have file scope, yes. But otherwise there&#39;s no scope associated with an expression that doesn&#39;t declare anything. But still, I don&#39;t see what (in the specification) would prevent a declaration with file scope from referring to things with block scope. I hope I&#39;m not misunderstanding what you&#39;re saying. In any case, can you refer to relevant parts of the spec that would support this answer?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420726746, "post_id": 27828782, "comment_id": 44088201, "body": "I am saying that you would be <i>using</i> the identifier in an expression that is part of a file scope declaration, namely the return type of the function. If that would be so, that identifier would have to be a valid identifier in that scope, which it isn&#39;t, it has block scope."}, {"owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "edited": false, "score": 0, "creation_date": 1420738508, "post_id": 27828782, "comment_id": 44096182, "body": "I think I see your point. But does the specification really say that? That a block-scope identifier cannot be used in a file-scope declaration? If I understand the specification right, it&#39;s not as if scopes are  separate name spaces or anything - after all, file-scope  identifiers can be used in blocks, etc. To my knowledge, the spec doesn&#39;t ban the reverse either. The <i>type</i> of the scope (file, block, etc.) doesn&#39;t, in itself, have effect on where the identifier is visible - only the beginning and end of the scope do."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1420665291, "creation_date": 1420665291, "answer_id": 27828782, "question_id": 27827930, "link": "https://stackoverflow.com/questions/27827930/scope-of-parameters-in-a-complex-function-definition/27828782#27828782", "title": "Scope of parameters in a complex function definition", "body": "<p>The <code>[sizeof var]</code> part is simply not part of the block, nor of the declaration list, but of the return type. So the only identifiers that are visible there are those with file scope.</p>\n"}], "owner": {"reputation": 31, "user_id": 4429768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2ccabef2b13e2af2f64d6d1ecf8b6a?s=128&d=identicon&r=PG&f=1", "display_name": "SirDayBat", "link": "https://stackoverflow.com/users/4429768/sirdaybat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1420711473, "creation_date": 1420661930, "question_id": 27827930, "link": "https://stackoverflow.com/questions/27827930/scope-of-parameters-in-a-complex-function-definition", "title": "Scope of parameters in a complex function definition", "body": "<p>Consider the following obscure definition of a function returning a pointer to an array of <code>char</code>s:</p>\n\n<pre><code>char (*func(int var))[sizeof var]\n{\n    return 0;\n}\n</code></pre>\n\n<p><strong>Is it valid?</strong></p>\n\n<p>The questionable part is the use of the identifier <code>var</code> in the <code>sizeof</code> expression. At least according to GCC 4.9.2, <code>var</code> is not visible in the <code>sizeof</code> expression. (Note that if <code>var</code> in the sizeof expression is replaced with, say, <code>42</code>, the code is valid and this question becomes uninteresting.)</p>\n\n<p>However, in the C11 specification draft n1570 (relevant parts are the same in C99, though possibly with different subclause numbering), subclause 6.2.1 discusses the scopes of identifiers, and contains the following sentences that are relevant for this case:</p>\n\n<p>6.2.1p4 contains:</p>\n\n<blockquote>\n  <p>If the declarator or type specifier that\n  declares the identifier appears inside a block or within the list of parameter declarations in\n  a function definition, the identifier has block scope, which terminates at the end of the\n  associated block.</p>\n</blockquote>\n\n<p>6.2.1p7 contains (bolding mine):</p>\n\n<blockquote>\n  <p>Structure, union, and enumeration tags have scope that begins just after the appearance of\n  the tag in a type specifier that declares the tag. Each enumeration constant has scope that\n  begins just after the appearance of its defining enumerator in an enumerator list. <strong>Any\n  other identifier has scope that begins just after the completion of its declarator.</strong></p>\n</blockquote>\n\n<p>Clearly, the declarator for <code>var</code> appears inside the list of parameter declarations in the definition of a function. So according to 6.2.1p4 its scope ends at the end of the function body (\"associated block\"). Also, <code>var</code> clearly corresponds to \"any other identifier\" mentioned in 6.2.1p7, so its scope begins just after the completion of its declarator, i.e. at the end of the parameter list.</p>\n\n<p>It seems to me that the specification says nothing else relevant about the scope of <code>var</code>. Given that the specification doesn't say otherwise, the obvious (to me, anyway) interpretation of the \"beginning\" and \"end\" of a scope means that the scope spans the entire lexical interval from the beginning to the end. Thus it seems that <code>var</code> should in fact be visible in the <code>sizeof</code> expression.</p>\n\n<p>Is there something in the specification that I haven't accounted for?\nIs the concept of the <em>scope of an identifier</em> meant to be interpreted in some other way than \"the uninterrupted lexical interval from the beginning of the scope to the end of the scope\"? If so, how is this apparent in the specification?</p>\n"}, {"tags": ["c", "linux", "posix", "opendir"], "answers": [{"comments": [{"owner": {"reputation": 1316, "user_id": 247672, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cfdeee08499d062e142b2d9d213e6a11?s=128&d=identicon&r=PG", "display_name": "stefanz", "link": "https://stackoverflow.com/users/247672/stefanz"}, "edited": false, "score": 0, "creation_date": 1420662369, "post_id": 27827867, "comment_id": 44061932, "body": "What about <code>dir_name</code> parameter? looks like you do not pass this in <code>main()</code>"}, {"owner": {"reputation": 1316, "user_id": 247672, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cfdeee08499d062e142b2d9d213e6a11?s=128&d=identicon&r=PG", "display_name": "stefanz", "link": "https://stackoverflow.com/users/247672/stefanz"}, "edited": false, "score": 0, "creation_date": 1420663104, "post_id": 27827867, "comment_id": 44062326, "body": "Yes, it works. Thanks. That <code>n</code> inside <code>dir()</code> looks like have some problems since it&#39;s throw from function, but nevermind for moment, i&#39;ve used it globally ( it&#39;s a small program, just this void and main )."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1420662421, "last_edit_date": 1420662421, "creation_date": 1420661652, "answer_id": 27827867, "question_id": 27827850, "link": "https://stackoverflow.com/questions/27827850/passing-opened-dir-as-argument/27827867#27827867", "title": "Passing opened dir as argument", "body": "<p>It's really simple</p>\n\n<pre><code>void dir(DIR *f, char *file_name, char *dir_name)\n{\n    struct dirent *a;\n    int n = 0;\n\n    while ((a = readdir(f)) != NULL)\n    {\n        if (strcmp(a-&gt;d_name,\".\") != 0 &amp;&amp; strcmp(a-&gt;d_name,\"..\") != 0 &amp;&amp; a-&gt;d_type == 4)\n        {\n            char s1[250];\n            DIR *next;\n\n            strcpy(s1, dir_name);\n            if (s1[strlen(s1) - 1] != '/')\n                strcat(s1, \"/\");\n            strcat(s1, a-&gt;d_name);\n\n            if (strcmp(a-&gt;d_name, file_name) == 0)\n            {\n                printf(\"%s\\n\",s1);\n                n++;\n            }\n\n            next = opendir(s1);\n            if (next != NULL)\n            {\n                dir(next, file_name, s1);\n                closedir(next);\n            }\n        }\n        else\n        {\n            if (strcmp(a-&gt;d_name, file_name) == 0)\n            {\n                n++;\n            }\n        }\n    }\n}\n\nint main(int argc, char **argv)\n{\n    DIR *f;\n\n    if (argc &lt; 3)\n        return -1;\n\n    f = opendir(argv[2]);\n    if (f != NULL)\n    {\n        dir(f, argv[1], argv[2]);\n        closedir(f);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1316, "user_id": 247672, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cfdeee08499d062e142b2d9d213e6a11?s=128&d=identicon&r=PG", "display_name": "stefanz", "link": "https://stackoverflow.com/users/247672/stefanz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 27827867, "answer_count": 1, "score": 0, "last_activity_date": 1420662421, "creation_date": 1420661572, "last_edit_date": 1420661599, "question_id": 27827850, "link": "https://stackoverflow.com/questions/27827850/passing-opened-dir-as-argument", "title": "Passing opened dir as argument", "body": "<p>I have the recursive function in C : </p>\n\n<pre><code>void dir(char *file_name, char *dir_name) {\n    DIR *f=opendir(dir_name);\n    if(f==NULL)\n        perror(dir_name);\n    else {\n        struct dirent *a;\n        while((a=readdir(f))!=NULL) {\n            if(strcmp(a-&gt;d_name,\".\")!=0 &amp;&amp; strcmp(a-&gt;d_name,\"..\")!=0 &amp;&amp; a-&gt;d_type==4) {\n                char s1[250];\n                strcpy(s1,dir_name);\n                if(s1[strlen(s1)-1]!='/')\n                        strcat(s1,\"/\");\n                strcat(s1,a-&gt;d_name);\n                if(strcmp(a-&gt;d_name,file_name)==0)\n                {\n                    printf(\"%s\\n\",s1);\n                    n++;\n                }\n                dir(file_name,s1);\n            }\n            else\n            {\n                if(strcmp(a-&gt;d_name,file_name)==0)\n                {\n                    n++;\n                }\n            }\n        }\n    closedir(f);\n    }\n}\n</code></pre>\n\n<p>What it actually does : it looks for \"file_name\" inside \"dir_name\" and its subfolders and count how may times the \"file_name\" appears on that hierarchy. </p>\n\n<p>I simply call it in <code>main()</code> like <code>dir(argv[1],argv[2]);</code> ( some C program with arguments \"<code>./program_name file_to_find.txt directory</code>\" ). </p>\n\n<p>Actually everything works perfectly but i don't want to open the directory inside <code>void dir()</code>. I want it to open in <code>main()</code> and pass its data as an argument to <code>dir()</code> ( so the parameter <code>char *dir_name</code> ) should be modified.</p>\n\n<p>Is there any way to do stuff like this ( to pass an opened directory as parameter to a function ) ?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 7961, "user_id": 329801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a738a21eabcad64d71d7aeea53d84891?s=128&d=identicon&r=PG", "display_name": "thelaws", "link": "https://stackoverflow.com/users/329801/thelaws"}, "edited": false, "score": 0, "creation_date": 1420662007, "post_id": 27827828, "comment_id": 44061725, "body": "You should post the code you&#39;ve tried and where you&#39;re experiencing inefficiency"}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1420663544, "post_id": 27827828, "comment_id": 44062553, "body": "Surely it would be easier to create an array of size <code>k</code> to hold your k values instead of creating an array of size <code>n</code> and subtracting from it all your k values?  In your example, you could create an array of size 2 and store in it the numbers 3 and 6."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420849140, "post_id": 27827828, "comment_id": 44145251, "body": "Can you assume 4G ram available to the process?"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420850285, "post_id": 27827828, "comment_id": 44145574, "body": "can we assume the K exclusions will be presented in order?"}, {"owner": {"reputation": 106, "user_id": 3099930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c071fe89707d1e120d2fc133ae50c56?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/3099930/sagar"}, "edited": false, "score": 0, "creation_date": 1420869839, "post_id": 27827828, "comment_id": 44148888, "body": "No can&#39;t assume 4G ram and k exclusions in order"}], "answers": [{"tags": [], "owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "is_accepted": true, "score": 0, "last_activity_date": 1420673672, "creation_date": 1420673672, "answer_id": 27830614, "question_id": 27827828, "link": "https://stackoverflow.com/questions/27827828/creating-an-array-of-n-numbers-excluding-k-given-numbers-efficiently/27830614#27830614", "title": "Creating an array of n numbers excluding k given numbers efficiently", "body": "<p>Using <code>n</code> as the end of the range, <code>k</code> as the number of skipped numbers, <code>narr</code> as the array holding the results, and <code>karr</code> as the array holding the numbers to skip:  <code>karr</code> need only be <code>k</code> elements long.  If <code>karr</code> is sorted, you only need to compare each new number against one element from <code>karr</code>, moving to the next <code>karr</code> when they match and adding the new number to <code>narr</code> when they don't.  The following example shows this (but has no error checks):</p>\n\n<pre><code>#include &lt;stdlib.h&gt; // for malloc and qsort\n#include &lt;stdio.h&gt;  // for printf\n\n// compare function for qsort\nstatic int llcompare(const void *a, const void *b)\n{\n    if (*(long long *)a &gt; *(long long *)b) return 1;\n    if (*(long long *)b &lt; *(long long *)b) return -1;\n    return 0;\n}\n\nint main()\n{\n    long long n = 0, k = 0;\n    scanf(\"%lld%lld\",&amp;n,&amp;k); // get n and k, as in your code\n\n    // allocate arrays: k elements for karr, and (n - k) for results in narr\n    long long *karr = malloc(sizeof(long long) * k);\n    long long *narr = malloc(sizeof(long long) * (n - k));\n\n    // read numbers to skip into karr\n    for (int i = 0; i &lt; k; i++) {\n        scanf(\"%lld\", &amp;karr[i]);\n    }\n    // sort karr ascending\n    qsort(karr,k,sizeof(long long),llcompare);\n\n    // using pointers to move through narr and karr\n    long long *pn = narr; // element of narr to set\n    long long *pk = karr; // element of karr to compare against\n\n    // pkend marks the end of karr, to check when we've passed the last omitted\n    // number\n    long long *pkend = karr + k;\n\n    // loop over the needed range\n    for (long long i = 1; i &lt;= n; i++) {\n        if (pk != pkend &amp;&amp; i == *pk) {\n            // if i is the next number to omit, move pk to the next omitted\n            // number (without adding i to results)\n            pk++;\n        } else {\n            // otherwise, add i to results then move pn to the next element\n            *(pn++) = i;\n        }\n    }\n\n    // print results from narr\n    for (long long i = 0; i &lt; (n - k); i++)\n        printf(\"%lld \", narr[i]);\n    printf(\"\\n\");\n\n    // free karr and narr when done\n    free(karr);\n    free(narr);\n\n  return 0;\n}\n</code></pre>\n\n<p>There's no need for a huge lookup table, and since the numbers being added to the results only increase, the next number to skip will always be the lowest number in <code>karr</code> that hasn't already been reached... so it's only necessary to check one element from <code>karr</code> for each new number.  </p>\n\n<p>The code above also assumes that there are no numbers in <code>karr</code> that won't be checked in the loop, that is that there are no numbers in <code>karr</code> that are outside the range of 1..n.  And because of the lack of error checking/handling, it may behave badly if you give it invalid input or <code>malloc()</code> fails for some reason.</p>\n"}], "owner": {"reputation": 106, "user_id": 3099930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c071fe89707d1e120d2fc133ae50c56?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/3099930/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 27830614, "answer_count": 1, "score": -2, "last_activity_date": 1420673672, "creation_date": 1420661519, "last_edit_date": 1420662211, "question_id": 27827828, "link": "https://stackoverflow.com/questions/27827828/creating-an-array-of-n-numbers-excluding-k-given-numbers-efficiently", "title": "Creating an array of n numbers excluding k given numbers efficiently", "body": "<p>How can I create an array of numbers starting from 1 and ending to n while not including k given numbers in the array ? For example n=10 k=2 and two numbers for the value of k are 3 and 6 then my array is 1,2,4,5,7,8,9,10.</p>\n\n<p>I have to do this for large numbers like when </p>\n\n<p>1 &lt; n &lt; 10^9 </p>\n\n<p>then                                       </p>\n\n<p>0 &lt; k &lt; min(10^5,n)</p>\n\n<p>For small numbers I tried indexing and then storing it in a different array which took lot of space and time.How can I do it efficiently?</p>\n\n<pre><code>            scanf(\"%lld%lld\",&amp;n,&amp;k);\n            f=0;\n            long long int a[100010]={0};\n            long long int b[100010]={0};\n            for(i=0;i&lt;k;i++)\n            {\n            scanf(\"%lld\",&amp;temp);\n            a[temp]=-1;\n            }\n            for(i=0;i&lt;n+1;i++)\n            {\n                if(a[i]!=-1)\n                {\n                b[f++]=i;\n                }\n            }\n</code></pre>\n"}, {"tags": ["c", "enums", "standards"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1420662728, "post_id": 27827670, "comment_id": 44062126, "body": "You should update the title of the theme by substituting word enumeration for word enumerator."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 3, "last_activity_date": 1420661332, "creation_date": 1420661332, "answer_id": 27827784, "question_id": 27827670, "link": "https://stackoverflow.com/questions/27827670/variable-named-the-same-as-enumerator/27827784#27827784", "title": "Variable named the same as enumerator", "body": "<p>I expected the <code>TEST_ENUM ENUM_VAL_1 = ENUM_VAL_1;</code> line to fail to compile, but it does.  I changed the assigned value to <code>ENUM_VAL_2</code>, and the printing then gives <code>ENUM_VAL_1 = 2</code>, <code>testVar1 = 1</code> and <code>testVar2 = 2</code>, so <code>ENUM_VAL_1</code> is a local variable.</p>\n\n<p>It is actually a routine scoping issue; it means that the variable declaration in <code>main()</code> shadows the declaration outside &mdash; and if the <code>typedef</code> were within <code>main()</code>, the code would not compile.  Add <code>-Wshadow</code> to your compilation options to see the shadowing.  After setting <code>testVar1</code>, <code>ENUM_VAL_1</code> means the local variable, not the enumeration constant.  Initializing a variable with itself doesn't really initialize the variable; it copies undefined garbage into the value.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 6, "last_activity_date": 1420662857, "last_edit_date": 1420662857, "creation_date": 1420661920, "answer_id": 27827925, "question_id": 27827670, "link": "https://stackoverflow.com/questions/27827670/variable-named-the-same-as-enumerator/27827925#27827925", "title": "Variable named the same as enumerator", "body": "<p>According to the C Standard (6.2.1 Scopes of identifiers)</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>... If an identifier designates two different entities in the same name space, the scopes might overlap. If so, the scope of one entity\n  (the inner scope) will end strictly before the scope of the other\n  entity (the outer scope). <strong>Within the inner scope, the identifier\n  designates the entity declared in the inner scope; the entity declared\n  in the outer scope is hidden (and not visible) within the inner\n  scope.</strong></li>\n  </ol>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>7 Structure, union, and enumeration tags have scope that begins just\n  after the appearance of the tag in a type specifier that declares the\n  tag. Each enumeration constant has scope that begins just after the\n  appearance of its defining enumerator in an enumerator list. <strong>Any\n  other identifier has scope that begins just after the completion of\n  its declarator</strong></p>\n</blockquote>\n\n<p>So in this declaration</p>\n\n<pre><code>TEST_ENUM ENUM_VAL_1 = ENUM_VAL_1;\n</code></pre>\n\n<p>declarator <code>ENUM_VAL_1</code> is considered completed before the sign =. So it hides the enumerator.</p>\n\n<p>In fact it is initialized by itself and has an indeterminate value.</p>\n\n<p>The same is valid for C++ (3.3.2 Point of declaration)</p>\n\n<blockquote>\n  <p>1 The point of declaration for a name is immediately after its\n  complete declarator (Clause 8) and before its initializer (if any),\n  except as noted below. [ Example:</p>\n</blockquote>\n\n<pre><code>int x = 12;\n{ int x = x; }\n</code></pre>\n\n<blockquote>\n  <p>Here the second x is initialized with its own (indeterminate) value.\n  \u2014end example ]</p>\n</blockquote>\n"}], "owner": {"reputation": 8096, "user_id": 173251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/62bf00bc62feafce5c3585108b0c819f?s=128&d=identicon&r=PG", "display_name": "Bryan Henry", "link": "https://stackoverflow.com/users/173251/bryan-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 27827925, "answer_count": 2, "score": 7, "last_activity_date": 1420663904, "creation_date": 1420660844, "last_edit_date": 1420663904, "question_id": 27827670, "link": "https://stackoverflow.com/questions/27827670/variable-named-the-same-as-enumerator", "title": "Variable named the same as enumerator", "body": "<p>What is the defined behavior for something like the following?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum {\n  ENUM_VAL_1 = 1,\n  ENUM_VAL_2 = 2\n} TEST_ENUM;\n\nint main() {\n  TEST_ENUM testVar1 = ENUM_VAL_1;\n  TEST_ENUM ENUM_VAL_1 = ENUM_VAL_1;\n  TEST_ENUM testVar2 = ENUM_VAL_1;\n\n  printf(\"ENUM_VAL_1 = %u\\n\",ENUM_VAL_1);\n  printf(\"testVar1 = %u\\n\",testVar1);\n  printf(\"testVar2 = %u\\n\",testVar2);\n\n  return 0;\n}\n</code></pre>\n\n<p>From my testing with both GCC and MSVC compilers, the behavior of this is that testVar1 will be set equal to the enumeration value \"ENUM_VAL_1\" or 1. However, the next statement will try to set the variable ENUM_VAL_1 equal to its own value, which is of course current uninitialized and thus garbage, instead of setting the variable ENUM_VAL_1 equal to the enumeration value ENUM_VAL_1. Then, of course, testVar2 will also get the same garbage value as the variable ENUM_VAL_1.</p>\n\n<p>What is the defined behavior of this according to the C standards, or is this undefined behavior? Whether or not it is defined, I'm guessing this type of example is bad practice at very least due to the ambiguity.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "arrays", "struct", "typedef"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1420659992, "post_id": 27827394, "comment_id": 44060659, "body": "you need to use <code>strcpy()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420660352, "last_edit_date": 1420660352, "creation_date": 1420659953, "answer_id": 27827417, "question_id": 27827394, "link": "https://stackoverflow.com/questions/27827394/how-to-assign-a-value-to-a-struct-array/27827417#27827417", "title": "How to assign a value to a struct array", "body": "<p>You can't assign to arrays in c, trye changing this</p>\n\n<pre><code>scaffale[1].titolo = \"last of mohicans\";\n</code></pre>\n\n<p>to</p>\n\n<pre><code>strcpy(scaffale[1].titolo, \"last of mohicans\");\n</code></pre>\n\n<p>you need to copy the literal to the array.</p>\n\n<p>Also, the first element of an array in c, has index <code>0</code> not <code>1</code> so to popuplate the first element of the array you need</p>\n\n<pre><code>strcpy(scaffale[0].titolo, \"last of mohicans\");\n</code></pre>\n\n<p><strong>note</strong>: the <code>strcpy</code> fucntion is declared in the \"strings.h\" header, as well as other string handling functions.</p>\n"}, {"tags": [], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": true, "score": 2, "last_activity_date": 1420662005, "last_edit_date": 1420662005, "creation_date": 1420660416, "answer_id": 27827544, "question_id": 27827394, "link": "https://stackoverflow.com/questions/27827394/how-to-assign-a-value-to-a-struct-array/27827544#27827544", "title": "How to assign a value to a struct array", "body": "<p>In C99 You can use designated initializers:</p>\n\n<pre><code>Libri scaffale[150] = { [1] = {\"last of mohicans\"} };\n</code></pre>\n\n<p>The problem with your code is that arrays are not assignable. Arrays can be <em>initialized</em> and initialization uses syntax that looks similar to assignment, but it is not the same thing.</p>\n\n<p>If you do need assignment, then what you have to do in C is write a loop that assigns individual elements of the array. Or use a pre-existing function that does this, if the array type is such that there's such a function available. For a null terminated char array there is such a function, called <a href=\"http://en.cppreference.com/w/c/string/byte/strcpy\" rel=\"nofollow\"><code>strcpy</code></a>.</p>\n\n<hr>\n\n<p>Although C++ inherits all of C's problems with raw arrays for compatibility, in C++ you can use <code>std::array</code> to get arrays with more reasonable behavior: they're copiable, assignable, using pass-by-value syntax actually does that instead of inserting some bizarre conversion to a pointer to the first element of the array, etc. And the C++ <code>std::array</code> type has zero overhead compared to raw arrays: <code>std::array</code> will result in identical object layout and code generation as raw arrays. The availability of a reasonable array type is one good reason to use C++ over C.</p>\n\n<p>Of course in this case it's likely that in C++ you would have <code>titolo</code> and <code>autore</code> be <code>string</code>s instead  arrays, in which case there would be performance differences since the representation would not be identical to raw arrays. Whether the performance would be better or worse depends on the exact program data. The performance could be better due to a more compact representation (the small string optimization), or it could be slower if the string data is too large for that and there end up being a lot of memory allocations.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1420660960, "last_edit_date": 1420660960, "creation_date": 1420660581, "answer_id": 27827584, "question_id": 27827394, "link": "https://stackoverflow.com/questions/27827394/how-to-assign-a-value-to-a-struct-array/27827584#27827584", "title": "How to assign a value to a struct array", "body": "<p>Here is a demonstrative program that shows how you can set an element of an array during its declaration and assign an element after the declaration of the array using function <code>strcpy</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct libro \n{\n    char titolo[100];\n    char autore[50];\n    int anno_pubblicazione;\n    float prezzo;\n} ;\n\ntypedef struct libro Libri;\n\n\n\nint main(void) \n{\n    Libri scaffale[150] = { [1].titolo = \"last of mohicans\" };\n\n    puts( scaffale[1].titolo );\n\n    strcpy( scaffale[0].titolo, \"first of mohicans\" );  \n\n    puts( scaffale[0].titolo );\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>last of mohicans\nfirst of mohicans\n</code></pre>\n\n<p>Take into account that arrays do not have the assignment operator. You have to copy elements of arrays. For example for character arrays that contain strings you can use standard function <code>strcpy</code> declared in header <code>&lt;string.h&gt;</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 4430308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97e7529dbf36c59cce7537c38bb77087?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Bottini", "link": "https://stackoverflow.com/users/4430308/michele-bottini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "accepted_answer_id": 27827544, "answer_count": 3, "score": -2, "last_activity_date": 1420662005, "creation_date": 1420659890, "last_edit_date": 1420661087, "question_id": 27827394, "link": "https://stackoverflow.com/questions/27827394/how-to-assign-a-value-to-a-struct-array", "title": "How to assign a value to a struct array", "body": "<p>I get this error :</p>\n\n<pre><code>incompatible types when assigning to type \u2018char[100]\u2019 from type \u2018char *\u2019\n</code></pre>\n\n<p>When I try to compile this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct libro {\n    char titolo[100];\n    char autore[50];\n    int anno_pubblicazione;\n    float prezzo;\n};\ntypedef struct libro Libri;\n\nint main (void) {\n    Libri scaffale[150];\n\n    scaffale[1].titolo = \"last of mohicans\";\n    printf(\"\\n%s\\n\",scaffale[1].titolo);\n\n    return 0;\n}\n</code></pre>\n\n<p>I wonder how to assign a value to a specific field on a specified member of the array.</p>\n"}, {"tags": ["c++", "c", "linux", "gcc", "valgrind"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420660844, "post_id": 27827379, "comment_id": 44061131, "body": "How do you select the address at which shared memory is created?  If you have a calculated address, rather than letting the system pick the address for you, could it be that <code>valgrind</code> is using space at that address?"}, {"owner": {"reputation": 1675, "user_id": 473781, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8e847a2e48fbe15e555d59c5da96a075?s=128&d=identicon&r=PG", "display_name": "Medicine", "link": "https://stackoverflow.com/users/473781/medicine"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420663303, "post_id": 27827379, "comment_id": 44062416, "body": "no shared memory is allocated before valgrind starts up. so valgrind shouldn&#39;t take that space."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420664726, "post_id": 27827379, "comment_id": 44063197, "body": "But is the space that <code>valgrind</code> uses where you&#39;d normally locate the shared memory?  There are two modes for shared memory allocation: allocate at a user-defined address or at a system-chosen address.  If you let the system specify the shared memory address, then I have nothing for you.  If you choose the address, then maybe the address you&#39;re choosing is already in use by <code>valgrind</code>.  Or is the trouble that <code>valgrind</code> doesn&#39;t get you to the point where you can allocate shared memory?  You should probably identify the platform and version number as well."}, {"owner": {"reputation": 10530, "user_id": 521897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZTZI.jpg?s=128&g=1", "display_name": "amdn", "link": "https://stackoverflow.com/users/521897/amdn"}, "edited": false, "score": 0, "creation_date": 1420665983, "post_id": 27827379, "comment_id": 44063820, "body": "Consider using strace as another tool for debugging, you can strace valgrind as it in turn runs your program.  The loader will use mmap to map shared libraries, so it might take some sleuthing to figure out who is making each of the mmap calls <a href=\"http://stackoverflow.com/questions/174942/how-should-strace-be-used\" title=\"how should strace be used\">stackoverflow.com/questions/174942/how-should-strace-be-used</a>"}], "owner": {"reputation": 1675, "user_id": 473781, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8e847a2e48fbe15e555d59c5da96a075?s=128&d=identicon&r=PG", "display_name": "Medicine", "link": "https://stackoverflow.com/users/473781/medicine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420659902, "creation_date": 1420659817, "last_edit_date": 1420659902, "question_id": 27827379, "link": "https://stackoverflow.com/questions/27827379/valgrind-fails-to-start-a-program-that-needs-to-attach-to-shared-memory-on-start", "title": "valgrind fails to start a program that needs to attach to shared memory on startup", "body": "<p>gcc version is 4.1.2 used to compile the program in debug mode</p>\n\n<pre><code>valgrind --log-file=\"log.txt\" -v prog\n</code></pre>\n\n<p>program throws error of unable to attach to shared memory at address</p>\n\n<p>without valgrind the program is starting properly</p>\n\n<p>Not sure if this is because of old gcc version.</p>\n\n<p>Also please let me know if there is any workaround without upgrading compiler if that is the reason.</p>\n"}, {"tags": ["c", "function", "recursion"], "comments": [{"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 2, "creation_date": 1420658458, "post_id": 27826997, "comment_id": 44059783, "body": "You posted a fact, what&#39;s the question?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1420658477, "post_id": 27826997, "comment_id": 44059797, "body": "If you try something and post where you are having problems in your code, you might get some useful feedback."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420658529, "post_id": 27826997, "comment_id": 44059824, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. You might also want to learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1420658530, "post_id": 27826997, "comment_id": 44059825, "body": "@MarounMaroun How can i inspect only the first three elements , and then move by one place and inspect those three elements and so on.."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420659800, "post_id": 27826997, "comment_id": 44060545, "body": "@Lolapanza It is not clear from your post whether you need to traverse only three characters or each three characters of a string."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420659868, "post_id": 27826997, "comment_id": 44060585, "body": "And why should the first three elements of <code>A[]</code> be <code>A[i]</code>, <code>A[i+1]</code>, <code>A[i+2]</code>?"}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420660000, "post_id": 27826997, "comment_id": 44060668, "body": "I&#39;m just giving an example, they dont have to be , but i want from those three elements to find a consonant and put it in the first element if there are no consonants the pointer moves by 1 in this case it will be on the second element . @WeatherVane"}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420660795, "post_id": 27826997, "comment_id": 44061097, "body": "@VladfromMoscow Each three Vlad , i posted a code but have some trouble with it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420661134, "post_id": 27826997, "comment_id": 44061266, "body": "The first thing I spot from your code is that there are two <code>return</code> statements which are not enclosed in <code>{braces}</code> so as to be in the code block following the previous <code>if()</code> statement, i.e., the code will <code>return</code> unconditionally at the first occurrence."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420661206, "post_id": 27826997, "comment_id": 44061309, "body": "@Lolapanza But a, e, i, o, u are not consonants."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420661376, "post_id": 27826997, "comment_id": 44061394, "body": "@VladfromMoscow that&#39;s why OP wrote <code>!=</code>, although the following <code>||</code> usage is incorrect. There is so much wrong with this code it is hard to know where to begin."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420661432, "post_id": 27826997, "comment_id": 44061430, "body": "@VladfromMoscow There is a ! sign there , but i dont know if i can do that with arrays."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420661637, "post_id": 27826997, "comment_id": 44061541, "body": "@WeatherVane Do you understand my problem ? Ispecting every three elements and putting the consonant in the first one and moving by one place , if there are none also moving by one place , im kind of beginner so i could use some help :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420661687, "post_id": 27826997, "comment_id": 44061563, "body": "<code>*a[k]</code> would be an element of a pointer array. <code>a[k]</code> is an element of a char array. Try <code>if(a[k]!=&#39;a&#39; &amp;&amp; a[k]!=&#39;e&#39; &amp;&amp; a[k]!=&#39;i&#39; &amp;&amp; a[k]!=&#39;o&#39; &amp;&amp; a[k]!=&#39;u&#39;) {&#47;*consonant*&#47;}</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420661926, "post_id": 27826997, "comment_id": 44061675, "body": "Another thing is you will need to find a way of halting the recursion after the third char."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420661990, "post_id": 27826997, "comment_id": 44061716, "body": "And lowercase the string first, or lowercase the vowel tests."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1420662616, "post_id": 27826997, "comment_id": 44062054, "body": "@Lolapanza Please shows an example of the execution result. E.g &quot;abc&quot; --&gt; &quot;bac&quot; or &quot;bbc&quot;, &quot;abcdef&quot; --&gt; &quot;bcdaef&quot; etc.."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420663065, "post_id": 27826997, "comment_id": 44062311, "body": "&quot;Tarantino&quot; =&quot;Tarnntnno&quot; The first consonant of the three elements will be put on the first spot. @BLUEPIXY"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420663836, "post_id": 27826997, "comment_id": 44062722, "body": "You should not be calling <code>changeup()</code> three times within itself. You should be calling itself once, with a limit on the recursion."}, {"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1420664267, "post_id": 27826997, "comment_id": 44062956, "body": "@WeatherVane Any idea on how to do that? :D"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1420662663, "creation_date": 1420662663, "answer_id": 27828107, "question_id": 27826997, "link": "https://stackoverflow.com/questions/27826997/recursive-function-in-a-character-array-for-finding-a-consonant-in-the-first-3-e/27828107#27828107", "title": "Recursive function in a character array for finding a consonant in the first 3 elements in the array", "body": "<p>You might be able to make use of this vowel testing function.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\n//return 1 if ch is a vowel\nint vowel (int ch) {\n    int chl = tolower(ch);\n    return (chl=='a' || chl=='e' || chl=='i' || chl=='o' || chl=='u');\n}\n\n...\n\nif (!vowel(a[k])) {    // if a consonant\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "edited": false, "score": 0, "creation_date": 1420666051, "post_id": 27828855, "comment_id": 44063853, "body": "Thaks alot dude , you are awesome. Kinda complicated but ill find my way around it :D"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1420665639, "creation_date": 1420665639, "answer_id": 27828855, "question_id": 27826997, "link": "https://stackoverflow.com/questions/27826997/recursive-function-in-a-character-array-for-finding-a-consonant-in-the-first-3-e/27828855#27828855", "title": "Recursive function in a character array for finding a consonant in the first 3 elements in the array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n\nstatic inline bool vowel(char ch){\n    char lch = tolower(ch);\n    return lch == 'e' || lch == 'a' || lch == 'i' || lch == 'o' || lch == 'u';\n}\n\nstatic inline bool consonant(char ch){\n    return isalpha(ch) &amp;&amp; !vowel(ch);\n}\n\nvoid proc(char *s){\n    bool moved = false;\n    int i;\n    for(i = 0; i &lt; 3; ++i){\n        if(!s[i])\n            return;\n        if(!moved &amp;&amp; consonant(s[i])){\n            moved = true;\n            s[0] = s[i];\n        }\n    }\n    proc(s + 3);\n}\n\nint main(void){\n    char str[] = \"Tarantino\";\n    proc(str);\n    printf(\"%s\\n\", str);//Tarnntnno\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4430241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acacc272294b17342e5db574a8b9f7?s=128&d=identicon&r=PG&f=1", "display_name": "Lolapanza", "link": "https://stackoverflow.com/users/4430241/lolapanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1420663056, "accepted_answer_id": 27828107, "answer_count": 2, "score": -2, "last_activity_date": 1420665639, "creation_date": 1420658362, "last_edit_date": 1420661803, "question_id": 27826997, "link": "https://stackoverflow.com/questions/27826997/recursive-function-in-a-character-array-for-finding-a-consonant-in-the-first-3-e", "closed_reason": "Needs more focus", "title": "Recursive function in a character array for finding a consonant in the first 3 elements in the array", "body": "<p>To make it clearer , in the first three elements (characters) in the array to search and find the consonant and put it on the first element . Example we will take a char array A[] .\nFirst three elements are A[i], A[i+1], A[i+2] , if the consonant is on A[i+1] It should move to A[i] \nThat is A[i]=A[i+1] ... Hard time explaning it , but hope you guys catch my drift.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;string.h&gt;\n\n#include &lt;ctype.h&gt;\n\n\nint changeup(char* a[],int k,int j, int x)\n\n{\n\nint i=0;\n\n\n  if(*a[k]!='a' || 'e' || 'i' || 'o' || 'u')\n\n  a[x]=a[k];\n\n  return changeup(a,k++,x++,j++);\n\n  if(*a[j]!='a' || 'e' || 'i' || 'o' || 'u')\n\n  a[x]=a[j];\n\n  return changeup(a,k++,x++,j++);\n\n   if(*a[x]!='a' || 'e' || 'i' || 'o' || 'u')\n\n    return changeup(a,k++,x++,j++);\n\n    else {\n\n        return;\n    }\n\n   int main (void)\n\n   {\n\n    char * a[5];\n\n    int i=0,j,k,x,n;\n\n    char* p;\n\n\n    n=sizeof(a)/sizeof(a[0]);\n\n     k=i+2;\n\n        j=i+1;\n\n        x=i;\n\n\n    *p=changeup(a,k,j,x);\n\n    for(i=0;i&lt;n;i++){\n\n\n    printf(\"%s\",a[i]);\n\n   }\n\n    return 0;\n\n   }\n\n\n\n\n\n\n   }\n</code></pre>\n"}, {"tags": ["c", "delphi", "libspotify"], "comments": [{"owner": {"reputation": 4394, "user_id": 307293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abc78adacf50a15e104e77e28e38411?s=128&d=identicon&r=PG", "display_name": "Jacinda", "link": "https://stackoverflow.com/users/307293/jacinda"}, "edited": false, "score": 0, "creation_date": 1420658349, "post_id": 27826875, "comment_id": 44059710, "body": "It would be helpful to share code. <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 1, "user_id": 4430157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708ee20ce692c1a4cf363a58ccabe67b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Kirknes", "link": "https://stackoverflow.com/users/4430157/tommy-kirknes"}, "reply_to_user": {"reputation": 4394, "user_id": 307293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abc78adacf50a15e104e77e28e38411?s=128&d=identicon&r=PG", "display_name": "Jacinda", "link": "https://stackoverflow.com/users/307293/jacinda"}, "edited": false, "score": 0, "creation_date": 1420659662, "post_id": 27826875, "comment_id": 44060456, "body": "updated with a code snippet"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1420665935, "post_id": 27826875, "comment_id": 44063798, "body": "Did you see <a href=\"http://stackoverflow.com/q/23797162/62576\">this question</a>?"}, {"owner": {"reputation": 1, "user_id": 4430157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708ee20ce692c1a4cf363a58ccabe67b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Kirknes", "link": "https://stackoverflow.com/users/4430157/tommy-kirknes"}, "edited": false, "score": 0, "creation_date": 1420666765, "post_id": 27826875, "comment_id": 44064185, "body": "yes,but it does not answer my question. I<code>m trying to get the logged in user</code>s displayname. And i`m logged in using facebooks credentials. After further rescearch. i see that is_scrobbling_possible(for facebook) results false. How to get this to result true. Have facebook made any new changes to Graph API, making libspotify unable to fetch displaynames?"}, {"owner": {"reputation": 1337, "user_id": 1023679, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e6c1cd671e1fa2129a6808c96eb85ed2?s=128&d=identicon&r=PG", "display_name": "Teun Pronk", "link": "https://stackoverflow.com/users/1023679/teun-pronk"}, "edited": false, "score": 0, "creation_date": 1420716884, "post_id": 27826875, "comment_id": 44082113, "body": "If you look at api.h in the include/libspotify folder and search for <code>sp_session_set_social_credentials</code> which is below <code>sp_session_is_scrobbling_possible</code> you can see the following in the comments: ` * Set the user&#39;s credentials with a social provider.  * Currently this is only relevant for LastFm` So it seems it doesn&#39;t work for FB? Would be weird imo though."}, {"owner": {"reputation": 1, "user_id": 4430157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708ee20ce692c1a4cf363a58ccabe67b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Kirknes", "link": "https://stackoverflow.com/users/4430157/tommy-kirknes"}, "edited": false, "score": 0, "creation_date": 1420752152, "post_id": 27826875, "comment_id": 44103464, "body": "Tried <code>sp_session_set_social_credentials</code>, but no luck."}], "owner": {"reputation": 1, "user_id": 4430157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708ee20ce692c1a4cf363a58ccabe67b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Kirknes", "link": "https://stackoverflow.com/users/4430157/tommy-kirknes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420659387, "creation_date": 1420657926, "last_edit_date": 1420659387, "question_id": 27826875, "link": "https://stackoverflow.com/questions/27826875/sp-user-display-name-returns-username-and-not-displayname", "title": "sp_user_display_name returns username and not displayname", "body": "<p>I`m trying to get Display name with sp_user_display_name, but I get cronical name only. I see that Social_manager.bnk only has cronical name on all my facebook friends. Have tried to turn on scrobbling to facebook and scrobling to spotify, but no luck. I have tried to log in with spotify credentials and facebook credentials. Is this a bug in the libspotify API?</p>\n\n<p>This is the function for calling sp_user_display_name:</p>\n\n<pre><code>function TUser.GetName: String;\nbegin\nResult:= UTF8ToString(sp_user_display_name(sp_session_user(spotify.fSession)));\nend;\n</code></pre>\n\n<p>But it results the same as:</p>\n\n<pre><code>function TUser.GetCanonicalName: String;\nbegin\nResult:= UTF8ToString(sp_user_canonical_name(sp_session_user(spotify.fSession)));\nend;\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 1, "creation_date": 1420657966, "post_id": 27826873, "comment_id": 44059517, "body": "I think this is your problem: <code>};</code> remove the <code>;</code> does that do the trick?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 10, "creation_date": 1420658116, "post_id": 27826873, "comment_id": 44059603, "body": "The designated initialisers for <code>setup</code> are C (C99) syntax. You seem to compile as C++. (As far as I know, C++ doesn&#39;t have designated initialisers, but I&#39;m not exactly a C++ expert.)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1420658305, "post_id": 27826873, "comment_id": 44059686, "body": "Try to rename that file to numabench.c instead of .cpp"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1420658343, "post_id": 27826873, "comment_id": 44059705, "body": "In other words, C != C++. In general tag only the language you are compiling."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1420658445, "post_id": 27826873, "comment_id": 44059775, "body": "@crashmstr He did. This used to be compiled as C code."}, {"owner": {"reputation": 1, "user_id": 4430197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483e60fe136b873df55f2f7302dcea00?s=128&d=identicon&r=PG&f=1", "display_name": "nikomad", "link": "https://stackoverflow.com/users/4430197/nikomad"}, "edited": false, "score": 0, "creation_date": 1420658889, "post_id": 27826873, "comment_id": 44060021, "body": "I try to remove the    ; but it does not work also."}, {"owner": {"reputation": 1, "user_id": 4430197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483e60fe136b873df55f2f7302dcea00?s=128&d=identicon&r=PG&f=1", "display_name": "nikomad", "link": "https://stackoverflow.com/users/4430197/nikomad"}, "edited": false, "score": 0, "creation_date": 1420659185, "post_id": 27826873, "comment_id": 44060196, "body": "is the statement      .regions = (memory_regions_t) { .count = 0, .regions = NULL } not important? i have to remove it??!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1420659435, "post_id": 27826873, "comment_id": 44060334, "body": "@nikomad it is not that they are not imporatnt, that&#39;s not a valid C++ code and you are compiling it in C++"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1420659844, "post_id": 27826873, "comment_id": 44060573, "body": "Where did you get that file from? Why does it have .cpp extension?"}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420698849, "post_id": 27827569, "comment_id": 44073727, "body": "@JensGustedt: Yes, of course, it&#39;s a literal for compunds. (I must admit that I often mix up designated initialisers and compound literals, although the concepts are straightforward.) Thanks for pointing that out, fixed."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1420698693, "last_edit_date": 1420698693, "creation_date": 1420660519, "answer_id": 27827569, "question_id": 27826873, "link": "https://stackoverflow.com/questions/27826873/expected-primary-expression-before-token-error/27827569#27827569", "title": "expected primary-expression before \u2018)\u2019 token ? error", "body": "<p>Your code uses two C features, that C++ doesn't recognise: <em>compound literals</em> that allow you to specify values for compound data structures (arrays and structs) outside initialisation and <em>designated initialisers</em> that allow you to initialise individual fields of structures or individual array entries.</p>\n\n<p>I assume that <code>setup_t</code> is a typedef to a structure. Your code:</p>\n\n<pre><code>setup_t* setup = (setup_t){\n      .regions = (memory_regions_t){ .count = 0, .regions = NULL }\n};\n</code></pre>\n\n<p>does not compile in C. The compiler wants either</p>\n\n<pre><code>setup_t *setup = (setup_t[]) {{ .regions = ... }};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>setup_t *setup = &amp;(setup_t) { .regions = ... };\n</code></pre>\n\n<p>Otherwise you have incompatible types in initialisation, namely <code>setup_t *</code> and <code>setup_t</code>.</p>\n\n<p>You can get around the compound literal by specifying an instance of <code>setup_t</code> and making <code>setup</code> a pointer to that:</p>\n\n<pre><code>setup_t data = { .regions = ... };\nsetup_t *setup = &amp;data;\n</code></pre>\n\n<p>You can get around the designated initialisers by either specifying the fields in order as in C89 or by creating an instance that is initialised to all zeros and then assigning values to the fields you want to initialise.</p>\n\n<p>In your case, all initialised values are zero. Initialising at least one field ensures that all subsequent fields are also initalised with zero or null values. You could try:</p>\n\n<pre><code>setup_t data = {0};\nsetup_t *setup = &amp;data;\n</code></pre>\n\n<p>Or, it the first field of <code>setup_t</code> is a structure, for example, <code>regions</code>:</p>\n\n<pre><code>setup_t data = {{0}};\nsetup_t *setup = &amp;data;\n</code></pre>\n\n<p>I've tried this with a (made-up) struct and It seems to work in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1420719613, "post_id": 27834274, "comment_id": 44083595, "body": "That&#39;s not really an answer, is it? The OP&#39;s code is just an excerpt that shows the part of the code where the error is indicated. (The line with <code>setup_t</code> is line 176 in OP&#39;s error message.)"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1420726746, "post_id": 27834274, "comment_id": 44088200, "body": "@MOehm: Not to me. The code shown should be producing something like the errors here. To fix those errors, they should include <code>cstdlib</code>, <code>cstdio</code>, <code>cassert</code> and define those two functions. Are we supposed to guess what the code is instead of using the code that nikomad showed us?"}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 0, "last_activity_date": 1420726656, "last_edit_date": 1420726656, "creation_date": 1420698885, "answer_id": 27834274, "question_id": 27826873, "link": "https://stackoverflow.com/questions/27826873/expected-primary-expression-before-token-error/27834274#27834274", "title": "expected primary-expression before \u2018)\u2019 token ? error", "body": "<p>Your code should actually be getting a different set of errors then what you've shown above:</p>\n\n<pre><code>[12:33am][wlynch@watermelon /tmp] c++ foo.cc \nfoo.cc:3:5: error: unknown type name 'setup_t'\n    setup_t* setup = (setup_t){\n    ^\nfoo.cc:3:23: error: use of undeclared identifier 'setup_t'; did you mean\n      'setup'?\n    setup_t* setup = (setup_t){\n                      ^~~~~~~\n                      setup\nfoo.cc:3:14: note: 'setup' declared here\n    setup_t* setup = (setup_t){\n             ^\nfoo.cc:7:5: error: use of undeclared identifier 'assert'\n    assert(argc == 2);\n    ^\nfoo.cc:9:5: error: use of undeclared identifier 'printf'\n    printf(\"&lt;?xml version='1.0'?&gt;\\n\\n\");\n    ^\nfoo.cc:10:5: error: use of undeclared identifier 'printf'\n    printf(\"&lt;numabench-result&gt;\\n\\n\");\n    ^\nfoo.cc:12:5: error: use of undeclared identifier 'printf'\n    printf(\"&lt;/numabench-result&gt;\\n\");\n    ^\nfoo.cc:13:5: error: use of undeclared identifier 'mainPCM'\n    mainPCM();\n    ^\nfoo.cc:14:12: error: use of undeclared identifier 'EXIT_SUCCESS'\n    return EXIT_SUCCESS;\n           ^\n8 errors generated.\n</code></pre>\n\n<p>Notably, you are missing some <code>#include &lt;...&gt;</code> statements, the declaration for <code>setup_t</code>, and the declaration for <code>mainPCM()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4430197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483e60fe136b873df55f2f7302dcea00?s=128&d=identicon&r=PG&f=1", "display_name": "nikomad", "link": "https://stackoverflow.com/users/4430197/nikomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1420726656, "creation_date": 1420657922, "last_edit_date": 1420658109, "question_id": 27826873, "link": "https://stackoverflow.com/questions/27826873/expected-primary-expression-before-token-error", "title": "expected primary-expression before \u2018)\u2019 token ? error", "body": "<p>i searched and find some other questions like this. But i cant find the fail in my code.\nMaybe someone find it?\nThis is/was c-code. but i had to rename it in .cpp and so i have no some errors:</p>\n\n<pre><code>make[1]: Entering directory `/home/numa'\nc++ -DHAVE_CONFIG_H -I.  -I/usr/include/libxml2     -g -O2 -MT numabench.o -MD -MP -MF .deps/numabench.Tpo -c -o numabench.o numabench.cpp\nnumabench.cpp: In function \u2018int main(int, char**)\u2019:\nnumabench.cpp:176:29: error: expected primary-expression before \u2018)\u2019 token\nnumabench.cpp:176:31: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018{\u2019 token\nnumabench.cpp:192:1: error: expected \u2018}\u2019 at end of input\n</code></pre>\n\n<p>And this is the method of the numabench.cpp</p>\n\n<p>What is there missing. Anyone an idea?</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    setup_t* setup = (setup_t){\n          .regions = (memory_regions_t){ .count = 0, .regions = NULL }\n    };\n\n    assert(argc == 2);\n    parse_setup_file(&amp;setup, argv[1]);\n    printf(\"&lt;?xml version='1.0'?&gt;\\n\\n\");\n    printf(\"&lt;numabench-result&gt;\\n\\n\");\n    iterate_params(&amp;setup, 0);\n    printf(\"&lt;/numabench-result&gt;\\n\");\n    mainPCM();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["python", "c"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "edited": false, "score": 0, "creation_date": 1421260535, "post_id": 27826707, "comment_id": 44295115, "body": "Thank&#39;s @Alex, that seems to work fine! However, I got stuck in another part &#180;    tbyte = 0  #     for(i=0;i&lt;7;i++) #         tbyte += bytes[i];          for i in range(0,7):         tbyte += bytes[i]&#180; that render the error: TypeError: &#39;type&#39; object has no attribute &#39;<b>getitem</b>&#39;"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "edited": false, "score": 0, "creation_date": 1421260604, "post_id": 27826707, "comment_id": 44295152, "body": "@MikaelLjunggren, happy to help, but please <b>accept</b> the answer that helps, don&#39;t just thank for it!-)"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "edited": false, "score": 0, "creation_date": 1421261022, "post_id": 27826707, "comment_id": 44295361, "body": "@MikaelLjunggren that&#39;s fine, we&#39;ve all been newbies at some time:-), but clicking on the checkmark you see to the left of the answer is how you accept an answer, and it&#39;s crucial to SO&#39;s functioning that the helpful answer be accepted."}], "tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 4, "last_activity_date": 1420657693, "last_edit_date": 1420657693, "creation_date": 1420657286, "answer_id": 27826707, "question_id": 27826610, "link": "https://stackoverflow.com/questions/27826610/converting-c-into-python/27826707#27826707", "title": "Converting C into Python", "body": "<p>C's <code>fgetc(stdin)</code> translates to Python 2's <code>ord(sys.stdin.read(1)[0])</code> -- returning a numeric value from the next byte of <code>stdin</code>.  (In Python 3, you'll have to reopen <code>sys.stdin</code> as binary to achieve that, otherwise <code>.read(1)</code> will get a Unicode character, not a byte).</p>\n\n<p>The <code>|</code> and <code>&lt;&lt;</code> operators work the same in Python as in C, so, no problem there.</p>\n\n<p>At EOF, <code>sys.stdin.read(1)</code> returns an empty list (so the <code>[0]</code> would fail, but you can check for that by \"decomposing\" the above expression).  For example:</p>\n\n<pre><code>ateof = False\n\ndef getabyte():\n    data = sys.stdin.read(1)\n    if data: return False, ord(data)\n    else: return True, 0\n\ndef getanint():\n    global ateof\n    ateof, byte1 = getabyte()\n    if not ateof:\n        ateof, byte2 = getabyte()\n    if ateof: return True, 0\n    else: return False, byte1 | (byte2&lt;&lt;8)\n</code></pre>\n\n<p>net of finicky issues wrt endianness (byte order) and character's signedness (issues common to C and Python).</p>\n"}], "owner": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3078, "favorite_count": 0, "accepted_answer_id": 27826707, "answer_count": 1, "score": 0, "last_activity_date": 1420657693, "creation_date": 1420656942, "question_id": 27826610, "link": "https://stackoverflow.com/questions/27826610/converting-c-into-python", "title": "Converting C into Python", "body": "<p>I am trying to convert a C module that parses the output from the Linux library rtl_fm. It is used for catching energy usage from an Efergy meter throuh a DVB-T dongle</p>\n\n<p>The C module works fine but I want it written in python to interact with other python modules i have</p>\n\n<p>I have put the constants in constant.py</p>\n\n<p>I am totally stuck in converting the row: <strong>cursamp  = (int16_t) (fgetc(stdin) | fgetc(stdin)&lt;&lt;8);</strong> that I have tried to convert in a lot of different ways. Every try ends with an error!</p>\n\n<p>It seems to be two types of problems: 1. Type conversion of the input result 2. How to convert fgetc() into python.</p>\n\n<p>I also have troubles converting <strong>while(!feof(stdin))</strong> into python</p>\n\n<p>Anyone that could help?</p>\n\n<p>C code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n\n#include &lt;stdlib.h&gt; // For exit function\n\n#define VOLTAGE         240 /* Refernce Voltage */\n#define CENTERSAMP      100 /* Number of samples needed to compute for the wave center */\n#define PREAMBLE_COUNT      40  /* Number of high(1) samples for a valid preamble */\n#define MINLOWBIT       3   /* Number of high(1) samples for a logic 0 */\n#define MINHIGHBIT      8   /* Number of high(1) samples for a logic 1 */\n#define E2BYTECOUNT     8   /* Efergy E2 Message Byte Count */\n#define FRAMEBITCOUNT       64  /* Number of bits for the entire frame (not including preamble) */\n\n\n#define LOGTYPE        1 // Allows changing line-endings - 0 is for Unix /n, 1 for Windows /r/n\n#define SAMPLES_TO_FLUSH  10 // Number of samples taken before writing to file.\n                 // Setting this too low will cause excessive wear to flash due to updates to\n                 // filesystem! You have been warned! Set to 10 samples for 6 seconds = every min.\n\nint loggingok;   // Global var indicating logging on or off\nint samplecount; // Global var counter for samples taken since last flush\nFILE *fp;    // Global var file handle\n\nint calculate_watts(char bytes[])\n{\n\nchar tbyte;\ndouble current_adc;\ndouble result;\nint i;\n\ntime_t ltime; \nstruct tm *curtime;\nchar buffer[80];\n\n    /* add all captured bytes and mask lower 8 bits */\n\n    tbyte = 0;\n\n    for(i=0;i&lt;7;i++)\n        tbyte += bytes[i];\n\n    tbyte &amp;= 0xff;\n\n    /* if checksum matches get watt data */\n\n    if (tbyte == bytes[7])\n    {\n        time( &amp;ltime );\n        curtime = localtime( &amp;ltime );\n        strftime(buffer,80,\"%x,%X\", curtime);\n\n        current_adc = (bytes[4] * 256) + bytes[5];\n        result  = (VOLTAGE * current_adc) / ((double) 32768 / (double) pow(2,bytes[6]));\n        printf(\"%s,%f\\n\",buffer,result);\n        if(loggingok) {\n          if(LOGTYPE) {\n            fprintf(fp,\"%s,%f\\r\\n\",buffer,result);\n          } else {\n            fprintf(fp,\"%s,%f\\n\",buffer,result);\n          }\n          samplecount++;\n          if(samplecount==SAMPLES_TO_FLUSH) {\n            samplecount=0;\n            fflush(fp);\n          }\n        }\n        fflush(stdout);\n        return 1;\n    }\n    //printf(\"Checksum Error \\n\");\n    return 0;\n}\n\nvoid  main (int argc, char**argv) \n{\n\nchar bytearray[9];\nchar bytedata;\n\nint prvsamp;\nint hctr;\nint cursamp;\nint bitpos;\nint bytecount;\n\nint i;\nint preamble;\nint frame;\nint dcenter;\nint dbit;\n\nlong center;\n\n    if(argc==2) {\n      fp = fopen(argv[1], \"a\"); // Log file opened in append mode to avoid destroying data\n      samplecount=0; // Reset sample counter\n      loggingok=1;\n      if (fp == NULL) {\n          perror(\"Failed to open log file!\"); // Exit if file open fails\n          exit(EXIT_FAILURE);\n      }\n    } else {\n      loggingok=0;\n    }\n\n    printf(\"Efergy E2 Classic decode \\n\\n\");\n\n\n    /* initialize variables */\n\n    cursamp = 0;\n    prvsamp = 0;\n\n    bytedata = 0;\n    bytecount = 0;\n    hctr = 0;\n    bitpos = 0;\n    dbit = 0;\n    preamble = 0;\n    frame = 0;\n\n    dcenter = CENTERSAMP;\n    center = 0;\n\n    while( !feof(stdin) ) \n    {\n\n        cursamp  = (int16_t) (fgetc(stdin) | fgetc(stdin)&lt;&lt;8);\n\n        /* initially capture CENTERSAMP samples for wave center computation */\n\n        if (dcenter &gt; 0)\n        {\n            dcenter--;\n            center = center + cursamp;  /* Accumulate FSK wave data */ \n\n            if (dcenter == 0)\n            {\n                /* compute for wave center and re-initialize frame variables */\n\n                center = (long) (center/CENTERSAMP);\n\n                hctr  = 0;\n                bytedata = 0;\n                bytecount = 0;\n                bitpos = 0;\n                dbit = 0;\n                preamble = 0;\n                frame = 0;\n            }\n\n        }\n        else\n        {\n            if ((cursamp &gt; center) &amp;&amp; (prvsamp &lt; center))       /* Detect for positive edge of frame data */\n                hctr = 0;\n            else \n                if ((cursamp &gt; center) &amp;&amp; (prvsamp &gt; center))       /* count samples at high logic */\n                {\n                    hctr++;\n                    if (hctr &gt; PREAMBLE_COUNT)  \n                        preamble = 1;\n                }\n                else \n                    if (( cursamp &lt; center) &amp;&amp; (prvsamp &gt; center))\n                    {\n                        /* at negative edge */\n\n                        if ((hctr &gt; MINLOWBIT) &amp;&amp; (frame == 1))\n                        {\n                            dbit++;\n                            bitpos++;   \n                            bytedata = bytedata &lt;&lt; 1;\n                            if (hctr &gt; MINHIGHBIT)\n                                bytedata = bytedata | 0x1;\n\n                            if (bitpos &gt; 7)\n                            {\n                                bytearray[bytecount] = bytedata;\n                                bytedata = 0;\n                                bitpos = 0;\n\n                                bytecount++;\n\n                                if (bytecount == E2BYTECOUNT)\n                                {\n\n                                    /* at this point check for checksum and calculate watt data */\n                                    /* if there is a checksum mismatch compute for a new wave center */\n\n                                    if (calculate_watts(bytearray) == 0)\n                                        dcenter = CENTERSAMP;   /* make dcenter non-zero to trigger center resampling */\n                                }\n                            }\n\n                            if (dbit &gt; FRAMEBITCOUNT)\n                            {   \n                                /* reset frame variables */\n\n                                bitpos = 0;\n                                bytecount = 0;\n                                dbit = 0;\n                                frame = 0;\n                                preamble = 0;\n                                bytedata = 0;\n                            }\n                        }\n\n                        hctr = 0;\n\n                    } \n                    else\n                        hctr = 0;\n\n            if ((hctr == 0) &amp;&amp; (preamble == 1))\n            {\n                /* end of preamble, start of frame data */\n                preamble = 0;\n                frame = 1;\n            }\n\n        } /* dcenter */\n\n        prvsamp = cursamp;\n\n    } /* while */\n    if(loggingok) {\n        fclose(fp); // If rtl-fm gives EOF and program terminates, close file gracefully.\n    }\n}\n</code></pre>\n\n<p>And the Python conversion (a little simplified without file logging):</p>\n\n<pre><code>from datetime import date\nfrom datetime import time\nfrom datetime import datetime\nimport cmath\nimport constant\nimport sys\nimport logging\n\nlogging.basicConfig(level=logging.DEBUG)\nlogger = logging.getLogger(__name__)\n\n\nclass _Getch:\n    \"\"\"Gets a single character from standard input.  Does not echo to the\nscreen.\"\"\"\n    def __init__(self):\n        try:\n            self.impl = _GetchWindows()\n        except ImportError:\n            self.impl = _GetchUnix()\n\n    def __call__(self): return self.impl()\n\n\nclass _GetchUnix:\n    def __init__(self):\n        import tty, sys\n\n    def __call__(self):\n        import sys, tty, termios\n        fd = sys.stdin.fileno()\n        old_settings = termios.tcgetattr(fd)\n        try:\n            tty.setraw(sys.stdin.fileno())\n            ch = sys.stdin.read(1)\n        finally:\n            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)\n        return ch\n\n\nclass _GetchWindows:\n    def __init__(self):\n        import msvcrt\n\n    def __call__(self):\n        import msvcrt\n        return msvcrt.getch()\n\n\ngetch = _Getch()\n\ndef calculate_watts(*args):\n    logger.info('Start Calculation')\n    now = datetime.now()\n\n    tbyte = 0\n\n    for i in range(0,7):\n        tbyte += bytes[i]\n\n    tbyte = tbyte &amp; 0xff\n\n    if (tbyte == bytes[7]):\n        current_adc = (bytes[4] * 256) + bytes[5]\n        result = (constant.VOLTAGE * current_adc) / (32768 / pow(2,bytes[6]))\n        print \"%s,%f\\n\" % (now,result)\n        exit(0)\n    else:\n        print \"Checksum Error \\n\"\n        exit(1)\n\ndef  main(*argv):\n    logger.info('Starting Main')\n\n    print \"Efergy E2 Python decode \\n\\n\"\n\n    cursamp = 0\n    prvsamp = 0\n\n    bytedata = 0\n    bytecount = 0\n    hctr = 0\n    bitpos = 0\n    dbit = 0\n    preamble = 0\n    frame = 0\n\n    dcenter = constant.CENTERSAMP\n    center = 0\n\n    while (1):\n\n        cursamp  = (int)((int)(_Getch()) | (int)(_Getch())&lt;&lt;8)\n        logger.debug('cursamp: %f',cursamp)\n\n        if (dcenter &gt; 0):\n            dcenter -= 1\n            center = center + cursamp    #/* Accumulate FSK wave data */ \n            if (dcenter == 0):\n\n                center = (center/constant.CENTERSAMP)\n                hctr  = 0\n                bytedata = 0\n                bytecount = 0\n                bitpos = 0\n                dbit = 0\n                preamble = 0\n                frame = 0\n        else:\n            if ((cursamp &gt; center) and (prvsamp &lt; center)):        #/* Detect for positive edge of frame data */\n                hctr = 0\n            else: \n                if ((cursamp &gt; center) and (prvsamp &gt; center)):        #/* count samples at high logic */\n                    hctr += 1\n                    if (hctr &gt; constant.PREAMBLE_COUNT):    \n                        preamble = 1\n                else: \n                    if (( cursamp &lt; center) and (prvsamp &gt; center)):\n                        #/* at negative edge */\n                        if ((hctr &gt; constant.MINLOWBIT) and (frame == 1)):\n                            dbit += 1\n                            bitpos += 1    \n                            bytedata = bytedata &lt;&lt; 1\n                            if (hctr &gt; constant.MINHIGHBIT):\n                                bytedata = bytedata | 0x1\n                            if (bitpos &gt; 7):\n                                bytearray[bytecount] = bytedata\n                                bytedata = 0\n                                bitpos = 0\n\n                                bytecount += 1\n\n                                if (bytecount == constant.E2BYTECOUNT):\n\n                                    # /* at this point check for checksum and calculate watt data */\n                                    #  /* if there is a checksum mismatch compute for a new wave center */\n\n                                    if (calculate_watts(bytearray) == 0):\n                                        dcenter = constant.CENTERSAMP   #/* make dcenter non-zero to trigger center resampling */\n\n                            if (dbit &gt; constant.FRAMEBITCOUNT):\n                                #/* reset frame variables */\n\n                                bitpos = 0\n                                bytecount = 0\n                                dbit = 0\n                                frame = 0\n                                preamble = 0\n                                bytedata = 0\n\n                        hctr = 0\n\n                    else:\n                        hctr = 0\n\n            if ((hctr == 0) and (preamble == 1)):\n\n                #/* end of preamble, start of frame data */\n                preamble = 0\n                frame = 1\n\n         #/* dcenter */\n\n        prvsamp = cursamp\n\nif __name__ == \"__main__\":\n  main()\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 3, "creation_date": 1420656983, "post_id": 27826597, "comment_id": 44058972, "body": "If you never set a null-terminated character string into <code>title</code> or <code>author</code> then an crash would be expected."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1420657046, "post_id": 27826597, "comment_id": 44059015, "body": "You&#39;re going to need to show what you passed into <code>peek</code>. It&#39;s evidently not right."}, {"owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "edited": false, "score": 2, "creation_date": 1420657436, "post_id": 27826597, "comment_id": 44059236, "body": "Before using the pointer temp in the printf statement you should check that temp is a valid pointer. If temp is NULL you will get a segfault."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1420657505, "post_id": 27826597, "comment_id": 44059279, "body": "<code>peek(&amp;queue);</code> with <code>queue</code> being <code>NULL</code> will crash, because this leads to a null pointer dereference. BTW you should indent your code."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4406399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AfcBX4rulmE/AAAAAAAAAAI/AAAAAAAAAbA/Jb6eOt-ODKU/photo.jpg?sz=128", "display_name": "Nicole Fontenot", "link": "https://stackoverflow.com/users/4406399/nicole-fontenot"}, "is_accepted": true, "score": 0, "last_activity_date": 1420667411, "creation_date": 1420667411, "answer_id": 27829244, "question_id": 27826597, "link": "https://stackoverflow.com/questions/27826597/program-crashing-due-to-printf-statement-c/27829244#27829244", "title": "Program crashing due to printf statement C", "body": "<h2>bookDetails()</h2>\n\n<p>your <code>BOOK b;</code> goes out of scope at the end of <code>bookDetails();</code><br>\nyou would be wise to ether:</p>\n\n<ul>\n<li>pass a pointer to a BOOK struct into bookDetails\n<ul>\n<li>you would need to change your return type to int and use it for error checking.</li>\n</ul></li>\n<li>dynamically allocate some heap memory inside bookDetails() with malloc() for that<br>\nbook struct.\n<ul>\n<li>requires #include  and free() when you are done with the memory.</li>\n</ul></li>\n</ul>\n\n<h2>main(void)</h2>\n\n<p>what this line does <code>node *queue = NULL;</code>\nin English:<br>\nallocate a new pointer on the stack to a node struct then, set the pointer to NULL.</p>\n\n<p>when you pass this to peek naturally you will get some errors because you cannot deference a NULL pointer.</p>\n\n<h2>struct Node and queue</h2>\n\n<p>you have the beginnings of a linked list structure with Node but, then I see you using this pointer to pointers queue. Unless you would like more than one linked list I would say removing the queue pointer would be a good thing to do to reduce the complexity.</p>\n\n<h2>peek()</h2>\n\n<p>here I do like what you did to do away with the need for all those paren but on first glance <code>node *temp = *head;</code> looks like temp == head which is far from the truth</p>\n\n<h2>why it is crashing recap</h2>\n\n<h3>what peek says it does (in english):</h3>\n\n<ul>\n<li>peek takes a pointer to a pointer to a node struct  </li>\n<li>peals off the first pointer to a node  </li>\n<li>differences that pointer (with the \"->\" notation)  </li>\n<li>print to standard out.  </li>\n</ul>\n\n<h3>substitute in what we pass to peek (in english):</h3>\n\n<ul>\n<li>peek receives NULL(0x0)  </li>\n<li>create a node struct pointer named temp and put NULL inside the pointer.</li>\n<li>Attempt to access the address 0x0 (with the \"->\" notation)  </li>\n<li>segfault.</li>\n</ul>\n\n<p>If you have any questions just ask.</p>\n\n<p>Good luck :)</p>\n"}], "owner": {"reputation": 51, "user_id": 3160152, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/54631ea6a1cfece6769568976ef08178?s=128&d=identicon&r=PG&f=1", "display_name": "user3160152", "link": "https://stackoverflow.com/users/3160152/user3160152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 27829244, "answer_count": 1, "score": -2, "last_activity_date": 1420667411, "creation_date": 1420656881, "last_edit_date": 1420657215, "question_id": 27826597, "link": "https://stackoverflow.com/questions/27826597/program-crashing-due-to-printf-statement-c", "title": "Program crashing due to printf statement C", "body": "<p>I created a program that uses pointers and nodes for a linked list. I narrowed down the problem to the following lines of code. Every time my program reaches the printf section it crashes.</p>\n\n<pre><code>typedef struct book {\n\nchar title[50];\nchar author[50];\n\n}BOOK;\n\n\ntypedef struct Node {\n\nstruct Node* next;\nBOOK info;\nint priority;\n\n}node;\n</code></pre>\n\n<p>I narrowed down the problem to the following lines of code. Every time my program reaches the printf section it crashes.</p>\n\n<pre><code>void peek(node **head) {\n\n    node *temp = *head;\n\n    printf(\"%s by %s has been peeked.\",temp -&gt; info.title , temp -&gt; info.author);\n}\n</code></pre>\n\n<p>Any help is greatly appreciated!</p>\n\n<p>EDIT :</p>\n\n<p>in my main i have:\n    BOOK bookDetails() {</p>\n\n<pre><code>BOOK b;\n\nprintf(\"\\nEnter book title: \");\nfflush(stdout);\nscanf(\"%s\", b.title);\n\nprintf(\"\\nEnter the author: \");\nfflush(stdout);\nscanf(\"%s\",b.author);\n\nreturn b;\n}\n</code></pre>\n\n<p>..and in the main(void):</p>\n\n<pre><code>node *queue = NULL;\ncase 4: peek(&amp;queue);\n        break;\n</code></pre>\n\n<p>In other cases i added information into &amp;queue using BOOK b to link to struct book</p>\n"}, {"tags": ["c", "visual-studio", "c99"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1420656312, "post_id": 27826409, "comment_id": 44058565, "body": "Herb Sutter mentioned they added enough to be able to compile ffmpeg on VS2013, no clue how they came up with that requirement."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420656607, "post_id": 27826409, "comment_id": 44058750, "body": "<a href=\"http://msdn.microsoft.com/en-us/library/hh409293.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hh409293.aspx</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1420656640, "post_id": 27826409, "comment_id": 44058769, "body": "I linked to their recent C99 <a href=\"http://stackoverflow.com/a/18521417/1708801\">here</a>"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1420662726, "post_id": 27826409, "comment_id": 44062125, "body": "They are doing significant work on the front end for C++1xyz compliance.  Touching ancient bits that were designed to operate with 256KB of memory.  No doubt that opened up some new opportunities :)"}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1420660964, "post_id": 27827416, "comment_id": 44061186, "body": "By the way, in VS2015 <code>&lt;uchar.h&gt;</code> and <code>snprintf()</code> are available. There are also other C99 related changes. See <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-breaking-changes-in-visual-studio-14-ctp1.aspx\" rel=\"nofollow noreferrer\">this</a> older blog post."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1420661250, "post_id": 27827416, "comment_id": 44061339, "body": "@cremno thank you! I had looked into this a couple of times for older answers on VLAs and missed that one."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 10, "last_activity_date": 1420729440, "last_edit_date": 1420729440, "creation_date": 1420659948, "answer_id": 27827416, "question_id": 27826409, "link": "https://stackoverflow.com/questions/27826409/what-is-the-official-status-of-c99-support-in-vs2013/27827416#27827416", "title": "What is the official status of C99 support in VS2013?", "body": "<p>There are a few public official discussions of this from Microsoft developers, the <a href=\"http://blogs.msdn.com/b/somasegar/archive/2013/06/28/cpp-conformance-roadmap.aspx\">C++ Conformance Roadmap</a> which says:</p>\n\n<blockquote>\n  <p>Herb also announced that, in response to customer requests, the RTM\n  version will also include a few tactical C99 language extensions when\n  compiling C code, so that some popular community libraries (including\n  FFmpeg) will now be able to compile with Visual C++ 2013.</p>\n</blockquote>\n\n<p>So this has official support but is strategic, from what I can tell form the following articles more support will have to compete with other priorities.</p>\n\n<p>We have the <a href=\"http://blogs.msdn.com/b/vcblog/archive/2013/06/28/c-11-14-stl-features-fixes-and-breaking-changes-in-vs-2013.aspx\">C++11/14 STL Features, Fixes, And Breaking Changes In VS 2013 Blog entry by STL</a>:</p>\n\n<blockquote>\n  <p>Additionally, some C99 Core Language features will be implemented in\n  2013 RTM:</p>\n  \n  <ul>\n  <li><p>C99 _Bool</p></li>\n  <li><p>C99 compound literals</p></li>\n  <li><p>C99 designated initializers</p></li>\n  <li><p>C99 variable declarations</p></li>\n  </ul>\n</blockquote>\n\n<p>and <a href=\"http://blogs.msdn.com/b/vcblog/archive/2013/07/19/c99-library-support-in-visual-studio-2013.aspx\">C99 library support in Visual Studio 2013 blog entry by Pat Brenner</a> which opens with:</p>\n\n<blockquote>\n  <p>In this blog post I want to share some information about the C99\n  support added to the C run-time library in Visual Studio 2013.</p>\n</blockquote>\n\n<p>and ends with:</p>\n\n<blockquote>\n  <p>We know that this is not complete support for the C99 library\n  functions. To the best of our understanding, the missing pieces are\n  these:</p>\n  \n  <ul>\n  <li>The tgmath.h header is missing. C compiler support is needed for this header.\n      Note that the ctgmath header was added\u2014this is possible because that header does not require the tgmath.h header\u2014only the\n  ccomplex and cmath headers.</li>\n  <li>The uchar.h header is missing. This is from the C Unicode TR.\n  Several format specifiers in the printf family are not yet supported.</li>\n  <li>The snprintf and snwprintf functions are missing from stdio.h and wchar.h.</li>\n  </ul>\n</blockquote>\n\n<p>which is somewhat more interesting since STL actively addresses comments to the blog and they are hard to summarize but we can see future additions will depend on competing priorities. </p>\n\n<p>Thanks to cremno for pointing out another blog post <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-breaking-changes-in-visual-studio-14-ctp1.aspx\">C Runtime (CRT) Features, Fixes, and Breaking Changes in Visual Studio 14 CTP1</a> which says:</p>\n\n<blockquote>\n  <p>In the Visual Studio \"14\" CTP we have fully implemented the C99\n  Standard Library, with the exception of any library features that\n  depend on compiler features not yet supported by the Visual C++\n  compiler (notably, <code>&lt;tgmath.h&gt;</code> is not implemented). There are\n  undoubtedly some remaining conformance issues--we know of a few,\n  including that _Exit is missing and wcstok has the wrong signature,\n  and we are working to fix these. If you find a bug or a missing\n  feature, please do report it on Microsoft Connect. If you report bugs\n  now, there is a very good chance that we'll be able to fix them before\n  RTM.</p>\n</blockquote>\n\n<p>and has a lot of details that can not be easily summarized.</p>\n"}], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5168, "favorite_count": 6, "accepted_answer_id": 27827416, "answer_count": 1, "score": 20, "last_activity_date": 1420729440, "creation_date": 1420656193, "question_id": 27826409, "link": "https://stackoverflow.com/questions/27826409/what-is-the-official-status-of-c99-support-in-vs2013", "title": "What is the official status of C99 support in VS2013?", "body": "<p>I see that VS2013 added support for a large number of major core language features of C99. Now it supports compound literals, designated initializers, variadic macros, interleaved declarations and statements just to name a few. </p>\n\n<p>This indicates that VS developers made serious steps towards C99 support in Visual Studio. Yet, some of these features are not part of C++ language, which appears to be a notable deviation from the previously announced development strategy (e.g. \"VS C compiler will only support those C99 features that are also a part of C++\").</p>\n\n<p>So, is there any official or semi-official word on what's going on? I don't seem to be able to find anything definitive on the Net. Were these C99 features officially announced? Is there any commitment to continued C99 support in VS? Or is this just some sort of \"rogue\" unofficial development?</p>\n"}, {"tags": ["c", "gcc", "segmentation-fault"], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1420655414, "post_id": 27826142, "comment_id": 44058021, "body": "This is not gonna compile if the OP naively puts the <code>malloc</code> in his source code."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1420655561, "post_id": 27826142, "comment_id": 44058126, "body": "@MichaelWalz Sorry I didn&#39;t get you. Allocating memory is the reason he is seeing a crash"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1420655696, "post_id": 27826142, "comment_id": 44058182, "body": "That&#39;s true, but you cannot call <code>malloc</code> (or any other function) to initialize a <b>global</b> variable."}, {"owner": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420655697, "post_id": 27826142, "comment_id": 44058183, "body": "Michael is right. The compiler returns: <code>main.c:11:14: error: initializer element is not a compile-time constant DATA *data = malloc(sizeof(DATA));              ^~~~~~~~~~~~~~~~~~~~ 1 error generated.</code>"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1420655953, "post_id": 27826142, "comment_id": 44058349, "body": "Yes yea yes. The answer is mainly to suggest allocating memory."}, {"owner": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420656631, "post_id": 27826142, "comment_id": 44058762, "body": "Ok that works when in the code after <code>DATA *data</code> I put: <code>data = malloc(sizeof(*data));</code>"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420655301, "creation_date": 1420655301, "answer_id": 27826142, "question_id": 27826128, "link": "https://stackoverflow.com/questions/27826128/c-segmentation-fault-11-running-program/27826142#27826142", "title": "C - &quot;Segmentation fault: 11&quot; running program", "body": "<p>You forgot to allocate memory to your structure</p>\n\n<pre><code>DATA *data = malloc(sizeof(DATA));\n</code></pre>\n\n<p>You should allocate memory to your pointer before writing something to it.</p>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420656042, "post_id": 27826173, "comment_id": 44058405, "body": "Worked! But what&#39;s the difference between use the pointer or not to have a segmentation fault?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420656151, "post_id": 27826173, "comment_id": 44058465, "body": "@mariec I don&#39;t understand your question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420656440, "post_id": 27826173, "comment_id": 44058641, "body": "@mariec, I updated the answer with a pointer version of the program, check the source, it has comments to let you know how it works."}, {"owner": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420656448, "post_id": 27826173, "comment_id": 44058651, "body": "Yes, I&#39;ve only changed the pointer and now the program works, and that&#39;s because some difference exists having a pointer that makes it go outside the memory restriction for the program. It&#39;s just curiosity, that would be hard stuff I guess haha"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420656584, "post_id": 27826173, "comment_id": 44058735, "body": "@mariec it&#39;s not hard, you just need to read about it, and what you had in your code is called undefined behavior, because you was dereferencing an invalid pointer."}, {"owner": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "edited": false, "score": 0, "creation_date": 1420657109, "post_id": 27826173, "comment_id": 44059057, "body": "That&#39;s it. Thank you for your help :)"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1420656403, "last_edit_date": 1420656403, "creation_date": 1420655414, "answer_id": 27826173, "question_id": 27826128, "link": "https://stackoverflow.com/questions/27826128/c-segmentation-fault-11-running-program/27826173#27826173", "title": "C - &quot;Segmentation fault: 11&quot; running program", "body": "<p>Notice that while using <code>malloc</code> would work, it's unecessary extra work for you since you will also have to call <code>free</code> later when you no longer need to use the <code>data</code> struct. But for that you should make the variable local to <code>main()</code>.</p>\n\n<p>This should solve your problem</p>\n\n<pre><code>typedef struct {\nchar day[3];\nchar month[3];\nchar year[5];\n} DATA;\n\nDATA data;\n/*  ^ no star here, because you don't need a pointer in your particular case */\n\nint main()\n{\nFILE *file;\nchar line_buffer[BUFSIZ];\n\nif (!(file = fopen(\"file.dat\", \"rt\")))\n{\n    printf (\"Something went wrong while opening the file.\\n\");\n}\nelse\n{\n    int line_number = 0;\n\n    while (fgets(line_buffer, sizeof(line_buffer), file))\n    {\n    ++line_number;\n\n    if      (line_number == 1) { strncpy(data.day,   line_buffer, 2); }\n    else if (line_number == 2) { strncpy(data.month, line_buffer, 2); }\n    else if (line_number == 3) { strncpy(data.year,  line_buffer, 4); }\n    }\n\n    printf(\"Content: %s-%s-%s\\n\", data.day, data.month, data.year);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>You don't need to declare <code>data</code> as a pointer in this particular case, and it would be better if you don't until you understand dynamic memory allocation correctly, also, the <code>data</code> variable does not need to be global, you can declare it inside the <code>main()</code> function.</p>\n\n<p>The segmentation fault is caused by an invalid pointer dereference, if you want to use a pointer then this is how you should do it</p>\n\n<pre><code>typedef struct {\nchar day[3];\nchar month[3];\nchar year[5];\n} DATA;\n\nint main()\n{\nFILE *file;\nchar line_buffer[BUFSIZ];\nif (!(file = fopen(\"file.dat\", \"rt\")))\n{\n    printf (\"Something went wrong while opening the file.\\n\");\n}\nelse\n{\n    int line_number = 0;\n    DATA *data;\n\n    /* \n     * here data is an invalid pointer, it points nowhere. \n     * to make it valid you need malloc\n     */\n    data = malloc(sizeof(*data));\n    /* on failure, malloc returns NULL, for example when there is no more memory left in the system \n     * so one should check for the return value\n     */\n    if (data == NULL)\n    {\n        fclose(file);\n        return -1;\n    }\n    /* now data is a valid pointer you can derefrence it */\n\n    while (fgets(line_buffer, sizeof(line_buffer), file))\n    {\n    ++line_number;\n\n    if      (line_number == 1) { strncpy(data-&gt;day,   line_buffer, 2); }\n    else if (line_number == 2) { strncpy(data-&gt;month, line_buffer, 2); }\n    else if (line_number == 3) { strncpy(data-&gt;year,  line_buffer, 4); }\n    }\n\n    printf(\"Content: %s-%s-%s\\n\", data-&gt;day, data-&gt;month, data-&gt;year);\n    /* after you have finished using the pointer, call free */\n    free(data);\n}\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 4175317, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/dCfUZ.jpg?s=128&g=1", "display_name": "mariec", "link": "https://stackoverflow.com/users/4175317/mariec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2945, "favorite_count": 0, "accepted_answer_id": 27826173, "answer_count": 2, "score": 1, "last_activity_date": 1420656403, "creation_date": 1420655228, "question_id": 27826128, "link": "https://stackoverflow.com/questions/27826128/c-segmentation-fault-11-running-program", "title": "C - &quot;Segmentation fault: 11&quot; running program", "body": "<p>This program returns \"Segmentation fault: 11\" when I run it. The compiler (GCC) doesn't return any error or warning.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct {\n  char day[3];\n  char month[3];\n  char year[5];\n} DATA;\n\nDATA *data;\n\nint main()\n{\n  FILE *file;\n  char line_buffer[BUFSIZ];\n\n  if (!(file = fopen(\"file.dat\", \"rt\")))\n  { \n    printf (\"Something went wrong while opening the file.\\n\");\n  }\n  else\n  {\n    int line_number = 0;\n\n    while (fgets(line_buffer, sizeof(line_buffer), file))\n    {\n      ++line_number;\n\n      if      (line_number == 1) { strncpy(data-&gt;day,   line_buffer, 2); }\n      else if (line_number == 2) { strncpy(data-&gt;month, line_buffer, 2); }\n      else if (line_number == 3) { strncpy(data-&gt;year,  line_buffer, 4); }\n    }\n\n    printf(\"Content: %s-%s-%s\\n\", data-&gt;day, data-&gt;month, data-&gt;year); \n  }\n  return 0;\n}\n</code></pre>\n\n<p>The content of file.dat is:</p>\n\n<pre><code>12\n08\n1990\n</code></pre>\n\n<p>I've debugged it with GDB and this is the result:</p>\n\n<pre><code>(gdb) run\nStarting program: /Users/macuser/Desktop/Primitiva/Proyecto/a.out\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007fff949413a0 in _dispatch_queue_attrs () from /usr/lib/system/libdispatch.dylib\n</code></pre>\n\n<p>What does that mean and what can I do to solve the problem? Thank you!</p>\n"}, {"tags": ["c", "gnu", "gsl"], "comments": [{"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1420655192, "post_id": 27825951, "comment_id": 44057882, "body": "My maths may be rusty, but for polynomial fitting to work, wouldn&#39;t you typically want the number of polynomial coefficients to be less than the number of data points? You can always perfectly fit an <code>n</code> degree polynomial to any <code>n</code> data points, and if only through a rounding error you are likely to get some odd results."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 2, "creation_date": 1420655405, "post_id": 27825951, "comment_id": 44058017, "body": "Actually, @abligh, you can perfectly fit an <code>n-1</code> degree polynomial to any <code>n</code> points."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420655431, "post_id": 27825951, "comment_id": 44058029, "body": "Sure code does not need 14 points for a unique 13th order polynomial?"}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1420655544, "post_id": 27825951, "comment_id": 44058115, "body": "@abligh: Given n+1 points, there is one and only one n degree polynomial that fits such points. As can mentioned in proof one here [link](), there is no way to solve the polynomial for less than n+1 datapoints."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1420655601, "post_id": 27825951, "comment_id": 44058145, "body": "I assumed OP was trying to best-fit a lower order polynomial rather than perfect-fit a maximum degree polynomial."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420655647, "post_id": 27825951, "comment_id": 44058161, "body": "@chux looking at the source code in the link, you need to pass the number of coefficients, not the degree of the polynomial, despite what they decided to call the variable."}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420655868, "post_id": 27825951, "comment_id": 44058287, "body": "@chux, I have 13 points and, as far as I understood the polynomialfit code, i&#39;m using an 12th order polynomial. (even so I use 13 for the number of points and also for the degree parameter, but if I change the parameter for 12, I get only 12 coefficients. Therefore I understood that the degree in the code accounts for the &quot;error&quot; variable, which is &quot;a&quot; in the gnuplot fit.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420655883, "post_id": 27825951, "comment_id": 44058295, "body": "Hmmm,  Wonder how the results look if the degree is 2, 3, 4 ....  Does the trouble occur at 13 or show signs with a lesser degree?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1420656762, "post_id": 27825951, "comment_id": 44058845, "body": "There is a degree-12 polynomial which exactly fits, but it&#39;s probably not a sensible model of whatever real-world process these numbers came from. The points look very close to a linear relationship. Your big polynomial wiggles around to hit all the points exactly, but as soon as you leave the range <code>[3.874360:4.877263]</code> it bends wildly away from the line they&#39;re all approximately on. Try <code>plot [3.5:5.5] f(x), &#39;-&#39;</code> after your <code>fit</code> command to see what I mean"}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420657246, "post_id": 27825951, "comment_id": 44059134, "body": "@chux, I tryed for 2, 4, 6, 8, 10 and 12 coefficients and 12 is the first one I got problemns with. <a href=\"https://www.dropbox.com/s/sa7btjfjbzb54q9/chartD.png?dl=0\" rel=\"nofollow noreferrer\">See here</a>"}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420657576, "post_id": 27825951, "comment_id": 44059312, "body": "@WumpusQ.Wumbley, I&#39;m aware that it is really close to a linear relationship. Actually, I&#39;m trying to relate some errors of one given model with r&#178; of a linear fit, once not all my datapoints are so close to a linear relationship."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1420657580, "post_id": 27825951, "comment_id": 44059313, "body": "Furthermore notice that changing the initial values from <code>0.1</code> to something else - or even changing just <code>m</code> to an initial value of <code>0.10001</code> - causes gnuplot to end up with a very different answer. Since there&#39;s only one exact-fit polynomial we can conclude that gnuplot isn&#39;t actually finding it. It&#39;s just finding one that happens to come close enough at the specified points to look like a match within the limits of the floating point type."}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420658421, "post_id": 27825951, "comment_id": 44059757, "body": "@WumpusQ.Wumbley, I modified the initial values as you mentioned and yes, the results of gnuplot are quite different ones. This, as mentioned, expected by the limitation in float or even double representations. However, even different results for each try, the found polynomials are close to the fitted data within acceptable errors. There should be some C code (even the one of gnuplot) which can provide the same kind of result. But the one in GSL is very different and, as mentioned, it is probably caused by and error not accounted for in the polynomialfit code."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1420656900, "post_id": 27826567, "comment_id": 44058929, "body": "I&#39;d expect the code <i>inside</i> the gsl library is a little bit higher quality than the code <i>calling</i> the gsl library that was written by some rosettacode enthusiast..."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1420657430, "post_id": 27826567, "comment_id": 44059232, "body": "Thank you @WumpusQ.Wumbley I didn&#39;t look closely enough at the link.  I assumed the function was part of the GSL library.  Edited to fix this oversight"}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420657657, "post_id": 27826567, "comment_id": 44059354, "body": "@WumpusQ.Wumbley I&#39;d expect the same for the code inside the gsl library. Can&#39;t say the same about the reosettacode one, but I also does&#39;t know where is the instability."}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420657924, "post_id": 27826567, "comment_id": 44059499, "body": "@Degustaf, I thought that it could be caused by numerical instability. I tried another unsafe code found around internet, but also got weird results for larger polynomials. However I could explain the variation by a linear model, I need the n-degree polynomial to follow a model and further explain as the model is less susceptible to errors when the data presents itself close to a linear model."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "reply_to_user": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420658113, "post_id": 27826567, "comment_id": 44059601, "body": "@Isma The instability is coming from your matrix <code>[x:x^2:x^3:...]</code>.  Because the data fits a linear model so well, the condition number will be huge by the time you try to fit a cubic polynomial, and only get worse from there."}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420658727, "post_id": 27826567, "comment_id": 44059924, "body": "I see, however I got a close enough result with gnuplot, which I could use. But as I need to use the coefficients further, it will be useful to have some C code to get them. One workaround would be using gnuplot to fit all my data and then read the files using my c program. By it would be important to have all the functionality within one program only."}, {"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420659351, "post_id": 27826567, "comment_id": 44060285, "body": "<a href=\"https://www.dropbox.com/s/dev1z2l752uiknf/chartE.png?dl=0\" rel=\"nofollow noreferrer\">Here is</a> one example of my dataset were the data is more far from a linear model."}], "tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 2, "last_activity_date": 1420658943, "last_edit_date": 1420658943, "creation_date": 1420656746, "answer_id": 27826567, "question_id": 27825951, "link": "https://stackoverflow.com/questions/27825951/polynomial-fitting-using-gnu-scientific-c/27826567#27826567", "title": "Polynomial Fitting using GNU Scientific C", "body": "<p>You are suffering from numerical instability.  A simple linear regression confirms what can visually be observed:  99.98% of the variation can be accounted for by using just a linear model.</p>\n\n<p>The code in the link you provided does a number of <strong>very</strong> unsafe things:  not checking that <code>obs</code> or <code>degree</code> are positive, not checking that the memory allocation was successful, not returning anything useful, ...</p>\n\n<p>I would assume that <code>gsl_multifit_linear</code> overflows, or cannot contain the numerical instability, and not checking the return means that we just don't know.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>According to the <a href=\"http://www.gnu.org/software/gsl/manual/html_node/Troubleshooting.html\" rel=\"nofollow\">GSL Website</a> polynomial regression can lead to extra numerical instabilities due to computing large powers of large numbers.  Try preprocessing your <code>x</code> values with <code>x = (x - avg_x) / sd_x</code>.  This should allow you to get a couple more degrees of your polynomial before this happens.</p>\n\n<p>In the long run, you are likely to hit this issue again.  If you are perfomrnig this analysis with 35 or 100 or more data points it is unlikely that you will be able to find any technique to overcome the instability.</p>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "edited": false, "score": 0, "creation_date": 1420659614, "post_id": 27827209, "comment_id": 44060429, "body": "Thank you very much. Using %.60lf really worked. The fit was right, only when plotting it I got a bad result."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420660515, "post_id": 27827209, "comment_id": 44060941, "body": "Rather than <code>f</code> in <code>%.60lf</code> suggest <code>e</code>.  See <a href=\"http://stackoverflow.com/questions/16839658/printf-width-specifier-to-maintain-precision-of-floating-point-value/19897395\">Printf width specifier to maintain precision</a> for details."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1420660690, "post_id": 27827209, "comment_id": 44061042, "body": "Really I&#39;d prefer <code>%a</code> but gnuplot didn&#39;t like it when I tried that"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 2, "last_activity_date": 1420659196, "creation_date": 1420659196, "answer_id": 27827209, "question_id": 27825951, "link": "https://stackoverflow.com/questions/27825951/polynomial-fitting-using-gnu-scientific-c/27827209#27827209", "title": "Polynomial Fitting using GNU Scientific C", "body": "<p>One major difference between your two solution methods is that when you use gnuplot, you're doing a <code>fit</code> to set the coefficients and the plotting the function from there in the same program, whereas with GSL you're copying the numbers from one program to another.</p>\n\n<p>If you're using the output of <code>printf(\"%lf\", ...)</code> as input for your second gnuplot program, you've lost a lot of accuracy because <code>printf</code> is rounding the numbers way more than any of the internal operations of either program. And because this a numerically unstable problem, a little bit of rounding hurts a lot.</p>\n\n<p>When <code>x</code> is 4.877263, <code>x**12</code> is approximately 181181603.850932 so if your <code>m</code> is off by <code>0.000001</code> (printf's default rounding level) that introduces an error of 181.181603850932 which is a relative error of about 300% over the actual <code>y</code> value for that <code>x</code>.</p>\n\n<p>Try <code>%.60lf</code> and see if it gets better.</p>\n\n<p>If one of the programs is using long double internally and the other one isn't, then you're probably not going to get a good match no matter what you do.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1420669139, "last_edit_date": 1420669139, "creation_date": 1420666539, "answer_id": 27829059, "question_id": 27825951, "link": "https://stackoverflow.com/questions/27825951/polynomial-fitting-using-gnu-scientific-c/27829059#27829059", "title": "Polynomial Fitting using GNU Scientific C", "body": "<p>I'm a bit confused between the problem statement and the example code. The polynomialfit function would normally expect >= n + 2 data points to fit a polynomial of degree n. In the case of n+1 data points, instead of doing a fit, you generate an exact solution (if floating point rounding wasn't an issue) by generating a matrix with n+1 rows and columns with the given n+1 set of values to represent the set of linear equations:</p>\n\n<pre><code>| x[0]^n + x[0]^(n-1) + ... + x[0] + 1 |  | c[  n] |    | y[0] |\n| x[1]^n + x[1]^(n-1) + ... + x[1] + 1 |  | c[n-1] |    | y[1] |\n|  ...                                               =  | ...  |\n| x[n]^n + x[n]^(n-1) + ... + x[n] + 1 |  | c[  0] |    | y[n] |\n</code></pre>\n\n<p>So only the c[ ]'s are variables, and the equations are linear. Invert the matrix of the x values then multiply the y values by the inverted matrix to produce the result. There may be issues if the actual polynomial is of lower degree than n (two or more of the equations will not be linearly independent). If this happens, you can use one or more less rows or switch to using a conventional polynomial fit algorithm.</p>\n\n<p>If there are >= n+2 data points, one option is a least squares type polynomial fit. Here is a link to a .rtf document that uses orthogonal and recursively defined polynomials to fit a set of data points. The orthogonal polynomials eliminate the need to invert a matrix, so it can handle polynomials of a greater degree more accurately.</p>\n\n<p><a href=\"http://rcgldr.net/misc/opls.rtf\" rel=\"nofollow\">opls.rtf</a></p>\n\n<p>Example runs with degree = 1 and degree = 3. First column is original x value, second column is original y value, third column is calculated y value, 4th column is ( original y value - calculated y value ) :</p>\n\n<pre><code>variance =  9.6720e-004\n 6.8488e+000 X**1 +  1.1619e+001\n\n 4.877263e+000   4.503600e+001   4.502243e+001   1.356604e-002\n 4.794907e+000   4.442100e+001   4.445839e+001  -3.739271e-002\n 4.703827e+000   4.380800e+001   4.383460e+001  -2.660237e-002\n 4.618065e+000   4.325100e+001   4.324723e+001   3.765950e-003\n 4.530520e+000   4.263400e+001   4.264765e+001  -1.365429e-002\n 4.443111e+000   4.207000e+001   4.204901e+001   2.099404e-002\n 4.357077e+000   4.148500e+001   4.145977e+001   2.522524e-002\n 4.274298e+000   4.091300e+001   4.089284e+001   2.016354e-002\n 4.188404e+000   4.033500e+001   4.030456e+001   3.043591e-002\n 4.109381e+000   3.979500e+001   3.976335e+001   3.165004e-002\n 4.027594e+000   3.920100e+001   3.920321e+001  -2.205684e-003\n 3.946413e+000   3.865000e+001   3.864721e+001   2.788204e-003\n 3.874360e+000   3.808500e+001   3.815373e+001  -6.873392e-002\n\nvariance =  2.4281e-004\n 8.0952e-001 X**3 + -1.0822e+001 X**2 +  5.4910e+001 X**1 + -5.9287e+001\n\n 4.877263e+000   4.503600e+001   4.502276e+001   1.324045e-002\n 4.794907e+000   4.442100e+001   4.444280e+001  -2.180419e-002\n 4.703827e+000   4.380800e+001   4.381431e+001  -6.306292e-003\n 4.618065e+000   4.325100e+001   4.323170e+001   1.929905e-002\n 4.530520e+000   4.263400e+001   4.264294e+001  -8.935141e-003\n 4.443111e+000   4.207000e+001   4.205786e+001   1.214442e-002\n 4.357077e+000   4.148500e+001   4.148153e+001   3.468503e-003\n 4.274298e+000   4.091300e+001   4.092369e+001  -1.069376e-002\n 4.188404e+000   4.033500e+001   4.033844e+001  -3.436876e-003\n 4.109381e+000   3.979500e+001   3.979160e+001   3.397859e-003\n 4.027594e+000   3.920100e+001   3.921454e+001  -1.354191e-002\n 3.946413e+000   3.865000e+001   3.862800e+001   2.199866e-002\n 3.874360e+000   3.808500e+001   3.809383e+001  -8.830768e-003\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 2812548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93bd942983417ad539488280c353fa90?s=128&d=identicon&r=PG&f=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2812548/isma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "accepted_answer_id": 27827209, "answer_count": 3, "score": 5, "last_activity_date": 1420669139, "creation_date": 1420654578, "last_edit_date": 1420655095, "question_id": 27825951, "link": "https://stackoverflow.com/questions/27825951/polynomial-fitting-using-gnu-scientific-c", "title": "Polynomial Fitting using GNU Scientific C", "body": "<p>I need to get a n-degree function from n+1 data points. By using the following gnuplot script I get the right fitting:</p>\n\n<pre><code>f(x) = a + b*x + c*x**2 + d*x**3 + e*x**4 + f*x**5 + g*x**6 + h*x**7 + i*x**8 + j*x**9 + k*x**10 + l*x**11 + m*x**12\n\n# Initial values for parameters\na = 0.1\nb = 0.1\nc = 0.1\nd = 0.1\ne = 0.1\nf = 0.1\ng = 0.1\nh = 0.1\ni = 0.1\nj = 0.1\nk = 0.1\nl = 0.1\nm = 0.1\n\n\n# Fit f to the following data by modifying the variables a, b, c\nfit f(x) '-' via a, b, c, d, e, f, g, h, i, j, k, l, m\n   4.877263 45.036000\n   4.794907 44.421000\n   4.703827 43.808000\n   4.618065 43.251000\n   4.530520 42.634000\n   4.443111 42.070000\n   4.357077 41.485000\n   4.274298 40.913000\n   4.188404 40.335000\n   4.109381 39.795000\n   4.027594 39.201000\n   3.946413 38.650000\n   3.874360 38.085000\ne\n</code></pre>\n\n<p>After fitting, I got the following coefficients:</p>\n\n<pre><code>a               = -781956        \nb               = -2.52463e+06   \nc               = 2.75682e+06    \nd               = -553791        \ne               = 693880         \nf               = -1.51285e+06   \ng               = 1.21157e+06    \nh               = -522243        \ni               = 138121         \nj               = -23268.8       \nk               = 2450.79        \nl               = -147.834       \nm               = 3.91268 \n</code></pre>\n\n<p>Then, by plotting data and f(x) together it seems that the given coefficients are right:\n<img src=\"https://i.stack.imgur.com/5bzY1.png\" alt=\"Here one can see the function fitted over the data points.\"></p>\n\n<p>However, I need to get such fitting by using c code. For several cases, the GNU Scientific Library code for polynomial fit (<a href=\"http://rosettacode.org/wiki/Polynomial_regression#C\" rel=\"nofollow noreferrer\">as in this link</a>) resulted right. But for the above data (and several other cases in my data set) the result I got was flawed. </p>\n\n<p>For instance, the following code (which uses the same data from the e.g. above):</p>\n\n<pre><code>void testOfPolynomialFit(){\n   double x[13] = {4.877263, 4.794907, 4.703827, 4.618065, 4.530520, 4.443111, 4.357077, 4.274298, 4.188404, 4.109381, 4.027594, 3.946413, 3.874360};\n   double y[13] = {45.036000, 44.421000, 43.808000, 43.251000, 42.634000, 42.070000, 41.485000, 40.913000, 40.335000, 39.795000, 39.201000, 38.650000, 38.085000};\n   double coefficients[13];\n\n   polynomialfit(13, 13, x, y, coefficients);\n\n   int i, n = 13;\n\n   for (i = 0; i &lt; n; i++)\n   {\n    printf(\"%lf\\t\", coefficients[i]); \n   }\n   printf(\"\\n\"); \n\n}\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>-6817581083.803348      12796304366.105989      -9942834843.404181      3892080279.353104             \n -630964566.517794        -75914607.005088         49505072.518952        -5062100.000931 \n   -1426228.491628           514259.312320           -70903.844354            4852.824607\n       -136.738756\n</code></pre>\n\n<p>Which corresponds to a function in the form:</p>\n\n<pre><code>c(x)=-6837615134.799868+12834646330.586414*x**1-9973474377.668280*x**2+3904659818.834625*x**3-633282611.288889*x**4-76066283.747942*x**5+49670960.939126*x**6-5091123.449217*x**7-1426628.818192*x**8+515175.778491*x**9-71055.177018*x**10+4863.969973*x**11-137.065848*x**12\n</code></pre>\n\n<p>One can check how c(x) looks like here:</p>\n\n<p><img src=\"https://i.stack.imgur.com/LtYs9.png\" alt=\"c(x) looks\"></p>\n\n<p>In such image, a(x) and b(x) are functions fitted using \"polynomialfit\" for just a few of the points (4 and 7). </p>\n\n<p>So, any tips on what I'm doing wrong here? There is some other c code which provides the right fitting?</p>\n"}, {"tags": ["c", "sudoku", "backtracking"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1420654068, "post_id": 27825780, "comment_id": 44057304, "body": "Print the solution from <code>solveSudoku</code>, not <code>main</code>. (Or store it in an array of solutions.)"}, {"owner": {"reputation": 51, "user_id": 4019272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DcrZ.jpg?s=128&g=1", "display_name": "Astralux", "link": "https://stackoverflow.com/users/4019272/astralux"}, "edited": false, "score": 0, "creation_date": 1420655656, "post_id": 27825780, "comment_id": 44058163, "body": "Okay I can change the way it prints, but that doesn&#39;t solve the backtracing of the puzzle to continue looking for more solutions."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4434296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9bcb1928621acc0f1cb7bbde7a3b73?s=128&d=identicon&r=PG&f=1", "display_name": "PioneerAxon", "link": "https://stackoverflow.com/users/4434296/pioneeraxon"}, "is_accepted": false, "score": 0, "last_activity_date": 1420836603, "creation_date": 1420836603, "answer_id": 27869016, "question_id": 27825780, "link": "https://stackoverflow.com/questions/27825780/sudoku-multiple-solutions-c/27869016#27869016", "title": "Sudoku multiple solutions C", "body": "<p>The <code>sudoku_arr</code> is passed by reference. When you set a value inside <code>solveSudoku ()</code> function, you are overwriting the original array and hence when it tries to backtrack, there are no more locations with <code>0</code> value on array.</p>\n\n<p>What you really want to do is to reset the value to <code>0</code> in <code>solveSudoku ()</code> before you <code>return 1;</code>.\nAlso, you would want to print the solution as soon as there are no empty locations left before returning. </p>\n\n<p><a href=\"https://bitbucket.org/PioneerAxon/sudoku-solver\" rel=\"nofollow\">This</a> might be helpful. </p>\n"}], "owner": {"reputation": 51, "user_id": 4019272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DcrZ.jpg?s=128&g=1", "display_name": "Astralux", "link": "https://stackoverflow.com/users/4019272/astralux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1637, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1420836603, "creation_date": 1420653952, "last_edit_date": 1420654994, "question_id": 27825780, "link": "https://stackoverflow.com/questions/27825780/sudoku-multiple-solutions-c", "title": "Sudoku multiple solutions C", "body": "<p>Here is my C sudoku solver using recursive backtracing, with help code from online. The program is small, and branches of the puzzle are stored on the stack and it moves forward adding new puzzle's, and if it fails to find a solution for a position it returns to the previous branch and continues.</p>\n\n<p>While this works for finding 1 solution, I'm trying to adapt it to print every solution. Where the else clause /* SOLUTION FOUND AS NO MORE EMPTY BLOCKS! */ is what ends the function, I've tried returning as sudokuSolver() with various (rows,cols) but can't seem to get to continue correctly to print all solutions.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint isAvailable(int puzzle[][9], int row, int col, int num)\n{\n    int rowStart = (row/3) * 3;\n    int colStart = (col/3) * 3;\n    int i, j;\n\n    for(i=0; i&lt;9; ++i) {\n        if (puzzle[row][i] == num)\n            return 0;\n        if (puzzle[i][col] == num)\n            return 0;\n        if (puzzle[rowStart + (i%3)][colStart + (i/3)] == num)\n            return 0;\n    }\n    return 1;\n}\n\nint solveSudoku(int puzzle[][9], int row, int col)\n{\n    int i;\n    if (row&lt;9 &amp;&amp; col&lt;9) {\n        if(puzzle[row][col] != 0) {\n            if ((col+1) &lt; 9)\n                return solveSudoku(puzzle, row, col+1);\n            else if ((row+1) &lt; 9)\n                return solveSudoku(puzzle, row+1, 0);\n            else   /*SOLUTION FOUND AS NO MORE EMPTY BLOCKS!*/\n                return 1;\n        }\n        else {\n            for(i=0; i&lt;9; ++i) {\n\n                if(isAvailable(puzzle, row, col, i+1)) {\n                    puzzle[row][col] = i+1;\n\n                    if ((col+1) &lt; 9){\n                        if (solveSudoku(puzzle, row, col +1))\n                            return 1;\n                        else\n                            puzzle[row][col] = 0;\n                    }\n                    else if ((row+1) &lt; 9) {\n                        if (solveSudoku(puzzle, row+1, 0))\n                            return 1;\n                        else\n                            puzzle[row][col] = 0;\n                    }\n                    else\n                        return 1;\n                }\n\n            }\n        }\n        return 0;\n    }\n    else {\n        return 1;\n    }\n}\n\nint main()\n{\n    int sudoku_arr[9][9] = {\n        {8,0,0,6,0,0,9,0,5},\n        {0,0,0,0,0,0,0,0,0},\n        {0,0,0,0,2,0,3,1,0},\n        {0,0,7,3,1,8,0,6,0},\n        {2,4,0,0,0,0,0,7,3},\n        {0,0,0,0,0,0,0,0,0},\n        {0,0,2,7,9,0,1,0,0},\n        {5,0,0,0,8,0,0,3,6},\n        {0,0,3,0,0,0,0,0,0}\n    };\n\n    if (solveSudoku(sudoku_arr, 0, 0)) {         //Solve sudoku puzzle\n        printf(\"\\nSudoku solved:\\n\");\n\n        int row, col;\n        for(row=0; row&lt;9; row++) {\n            for(col=0; col&lt;9; col++) {\n                printf(\"%d \", sudoku_arr[row][col]);\n            }\n            printf(\"\\n\");\n        }\n\n        return 0;\n    }\n    else {\n        printf(\"\\nNo sudoku solution\");\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Now while this solves with the first solution:</p>\n\n<pre><code>Sudoku solved:\n8 1 4 6 3 7 9 2 5 \n3 2 5 1 4 9 6 8 7 \n7 9 6 8 2 5 3 1 4 \n9 5 7 3 1 8 4 6 2 \n2 4 1 9 5 6 8 7 3 \n6 3 8 2 7 4 5 9 1 \n4 6 2 7 9 3 1 5 8 \n5 7 9 4 8 1 2 3 6 \n1 8 3 5 6 2 7 4 9 \n</code></pre>\n\n<p>There are many other possible solutions i.e.\n814637925325149687796825314957318462241956873638274591462793158579481236183562749\n814637925325941687796825314957318462241569873638472591462793158579184236183256749\n834671925125839647796425318957318462241956873368247591682793154579184236413562789\n834671925125839647796524318957318462241956873368247591682793154519482736473165289\n834671925125839647796524318957318462241965873368247591682793154519482736473156289</p>\n"}, {"tags": ["c", "fork"], "comments": [{"owner": {"reputation": 1165, "user_id": 4134758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e598950148ba3fdf12264545846e0edc?s=128&d=identicon&r=PG&f=1", "display_name": "Manjunath N", "link": "https://stackoverflow.com/users/4134758/manjunath-n"}, "edited": false, "score": 0, "creation_date": 1420653715, "post_id": 27825655, "comment_id": 44057128, "body": "you have confused between binary search and binary search tree..!!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420653860, "post_id": 27825655, "comment_id": 44057194, "body": "After forking, you have to relay the status by <code>exit()</code> with status 0 or 1, with the parent waiting (<code>wait()</code> or <code>waitpid()</code>) for the child processes and reporting back the composite status from the children. Also, this looks like it will always search everything, rather than eliminating half the search range all the time.  You&#39;d have to wait for the first child to finish, and only if it reports failure would you launch the second child."}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1420654479, "post_id": 27825655, "comment_id": 44057515, "body": "See related question <a href=\"http://stackoverflow.com/questions/12876366/searching-with-fork-in-c\" title=\"searching with fork in c\">stackoverflow.com/questions/12876366/searching-with-fork-in-&zwnj;&#8203;c</a>."}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 0, "last_activity_date": 1420654608, "last_edit_date": 1420654608, "creation_date": 1420654266, "answer_id": 27825872, "question_id": 27825655, "link": "https://stackoverflow.com/questions/27825655/binary-search-with-fork/27825872#27825872", "title": "Binary search with fork()", "body": "<p>You are confused about how <code>fork()</code> works. Also about how binary searches work.</p>\n\n<h2>Using fork() to traverse a tree</h2>\n\n<p><code>fork()</code> merely starts a copy of the current process (technically a copy-on-write copy). So it will return success provided the fork succeeds.</p>\n\n<p>In fact, it returns <em>twice</em> on success, once to the child, and once to the parent. From the man page:</p>\n\n<blockquote>\n  <p>On success, the PID of the child process is returned in the parent, and\n  0 is returned in the child.  On failure, -1 is returned in the  parent,\n  no child process is created, and errno is set appropriately.</p>\n</blockquote>\n\n<p>So, first you need to check the <code>fork()</code> did not fail (did not return -1). If it did, you abort your search.</p>\n\n<p>If the <code>fork()</code> returned 0, you are the child, so you can search one limb of your tree. Otherwise you are the parent, in which case you need to do the second <code>fork()</code>, then <code>wait()</code> for both children to complete. And pass the results back with <code>exit()</code> (<code>return</code> will merely lead to each child printing the line to <code>stdout</code> in <code>main()</code>).</p>\n\n<p>Note that this way of traversing a binary tree will produce one process for every node in the tree (or every node in the tree with children). This may in effect be a fork bomb, i.e. you may DoS your own computer. You may therefore want to limit the levels of <code>fork()</code> used (i.e. switch to a conventional search when you are more than <code>n</code> levels deep).</p>\n\n<h2>Confusion between a binary search and traversing a tree</h2>\n\n<p>The second issue here is that the whole point of a binary search (as opposed to a tree) is that you examine the item half way along the search range, then only search to <em>one</em> side of it, i.e. you do not need to process both sides. This eliminates the need for <code>fork()</code>.</p>\n\n<p>Here the contents of the array that you are searching are not in order, so you aren't doing a binary search. You are (in effect) traversing a tree, where the root node is half way along, the next nodes up are half way between the ends and the root nodes, etc.</p>\n"}], "owner": {"reputation": 274, "user_id": 4016912, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/hyrSL.jpg?s=128&g=1", "display_name": "Shury", "link": "https://stackoverflow.com/users/4016912/shury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1431, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521252911, "creation_date": 1420653487, "last_edit_date": 1521252911, "question_id": 27825655, "link": "https://stackoverflow.com/questions/27825655/binary-search-with-fork", "title": "Binary search with fork()", "body": "<p>I'm trying to create a binary search tree using 2 sons. They will return 1 if the element searched has been found or 0 otherwise.</p>\n\n<pre><code>#define m_index 16\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\nint fork_search(int a[], int search, int start, int end) {\n    if (start == end) {\n        if (*(a + end) == search) {\n            return 1;\n        }\n\n       return 0;\n    } else{\n        pid_t child = fork();\n        if (child == 0)\n            return fork_search(a, search, start, (start+end)/2);\n        else {\n            // creating the second son here\n            pid_t child2 = fork();\n            if (child2 == 0)\n                return fork_search(a, search, (start + end)/2+1, end);\n        }\n    }\n}\n\nint main(int argc, char* argv[]) {\n    int a[m_index] = {1, 12, 11, 5, 10, 6, 4, 9, 13, 2, 8, 14, 3, 15, 7};\n\n    printf(\"%d\\n\", fork_search(a, 12, 0, m_index-1));\n\n    return 0;\n}\n</code></pre>\n\n<p>How can I create a second son to search the upper half? If it's the father I could simply write <code>return fork_search(a, search, (start + end)/2+1, end);</code>, however, I need the second son to do this. Thank you!</p>\n"}, {"tags": ["c", "data-structures", "struct"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 3063924, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/41428a0033e870da9b9cb9481fc89320?s=128&d=identicon&r=PG&f=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/3063924/superman"}, "edited": false, "score": 0, "creation_date": 1420653264, "post_id": 27825502, "comment_id": 44056854, "body": "Correct me if I am wrong, now we have a pointer to struct vector. So will each element of that array contain x,y,z and if I need to access each of those I would just do something like this array[1].x or array[1].y"}, {"owner": {"reputation": 105, "user_id": 3063924, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/41428a0033e870da9b9cb9481fc89320?s=128&d=identicon&r=PG&f=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/3063924/superman"}, "edited": false, "score": 0, "creation_date": 1420653325, "post_id": 27825502, "comment_id": 44056884, "body": "asked the question right as you updated yours haha thank you alot for the concise and timely response"}, {"owner": {"reputation": 105, "user_id": 3063924, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/41428a0033e870da9b9cb9481fc89320?s=128&d=identicon&r=PG&f=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/3063924/superman"}, "edited": false, "score": 0, "creation_date": 1420654570, "post_id": 27825502, "comment_id": 44057548, "body": "almost when the user enters the value for n and then the for loop is created based off of that value, how would you successively store the vector values entered by the user something like fgets(buffer,100,stdin) and then use sscanf?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 105, "user_id": 3063924, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/41428a0033e870da9b9cb9481fc89320?s=128&d=identicon&r=PG&f=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/3063924/superman"}, "edited": false, "score": 0, "creation_date": 1420654748, "post_id": 27825502, "comment_id": 44057635, "body": "@Superman Please ask this part as a separate question IMO. Inside the <code>for</code> loop you can use <code>scanf(&quot;%lf&quot;,&amp;a[i].x);</code> to scan values to your structure members. Similarly you should scan values for <code>y</code> and <code>z</code> also"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 2, "last_activity_date": 1420652960, "creation_date": 1420652960, "answer_id": 27825502, "question_id": 27825458, "link": "https://stackoverflow.com/questions/27825458/declaring-a-struct-which-works-with-an-array-in-c/27825502#27825502", "title": "Declaring a struct which works with an array in C", "body": "<pre><code>struct vector\n{\n    double x;\n    double y;\n    double z;\n};\n\nstruct vector *array;\n</code></pre>\n\n<p>Now array is pointer to a struct vector and you can create instances of it by allocating required memory using <code>malloc()</code> and assign value to the struct fields for each instance.</p>\n\n<p>Like</p>\n\n<pre><code>array = malloc(sizeof(struct vector) *n ); /* n = size inputted by user */\nfor(i=0;i&lt;n;i++)\n{\n  array[i].x = &lt;someval&gt;;\n  array[i].y = &lt;someval&gt;;\n  array[i].z = &lt;someval&gt;;\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 3063924, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/41428a0033e870da9b9cb9481fc89320?s=128&d=identicon&r=PG&f=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/3063924/superman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 27825502, "answer_count": 1, "score": 0, "last_activity_date": 1420652960, "creation_date": 1420652842, "question_id": 27825458, "link": "https://stackoverflow.com/questions/27825458/declaring-a-struct-which-works-with-an-array-in-c", "title": "Declaring a struct which works with an array in C", "body": "<p>The program is supposed to calculate the magnitude of vectors and then print out the results. I can manage all of this work but I am having trouble actually declaring the struct.</p>\n\n<p>The program will prompt the user for the number of vectors they would like to store.</p>\n\n<p>so I left my struct array un-allocated and I will come back later with malloc()/free()</p>\n\n<p>but here is what I am trying to do </p>\n\n<pre><code>struct vector *array\n{\n    double x;\n    double y;\n    double z;\n}\n</code></pre>\n\n<p>x.y.z being the points of the vector, I am assuming each element of array will contain x,y,z but this is not working when I compile it gives me errors of \",\" \"asm\" not found before { so I put an = like this</p>\n\n<pre><code>struct vector *array=\n    {\n        double x;\n        double y;\n        double z;\n    }\n</code></pre>\n\n<p>it then gives me expression before double not found</p>\n\n<p>What am I doing wrong??</p>\n\n<p>Again if not clarified.</p>\n\n<p>I am trying to have the user enter the number of vectors to be used which then that number will be used within malloc to allocate memory to the struct array which I am assuming each element of the array will contain x.y.z </p>\n\n<p>New to structs so help would be much appreciated.</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420652531, "post_id": 27825264, "comment_id": 44056423, "body": "Just to clarify, you want to edit the IAT before X is actually loaded, so you actually want to modify X&#39;s binary beforehand, not an runtime ?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420652698, "post_id": 27825264, "comment_id": 44056517, "body": "Yes, this will eliminate the need for A.dll altogether, as the loader will never even try to load anything from it."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1420652699, "post_id": 27825264, "comment_id": 44056518, "body": "Can you simply replace the original DLL with a proxy?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1420652731, "post_id": 27825264, "comment_id": 44056544, "body": "@JonathanPotter I do not want to keep the name, hence the problem."}], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1420652957, "post_id": 27825447, "comment_id": 44056664, "body": "1) Yep, that&#39;s what I want to do. I don&#39;t know how to accomplish it under Windows though, and that&#39;s what the question is about. 2) &amp; 3) - as specified in the question, the application isn&#39;t mine, so I can&#39;t do that."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1420655134, "post_id": 27825447, "comment_id": 44057848, "body": "Your launcher app will have to open the main app&#39;s .exe file and manually alter the Imports table directly, replacing any references to <code>A</code> with <code>B</code>. There is no API that will do it for you. Read this MSDN article for more details: <a href=\"http://msdn.microsoft.com/en-us/library/ms809762.aspx\" rel=\"nofollow noreferrer\">Peering Inside the PE: A Tour of the Win32 Portable Executable File Format</a>"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1420655202, "last_edit_date": 1420655202, "creation_date": 1420652798, "answer_id": 27825447, "question_id": 27825264, "link": "https://stackoverflow.com/questions/27825264/editing-the-iat-redirecting-to-another-dll-at-process-startup/27825447#27825447", "title": "Editing the IAT (redirecting to another DLL) at process startup", "body": "<p>Your app cannot alter its own Imports table before it starts running.  You will have to either:</p>\n\n<ol>\n<li><p>create a separate launcher app that patches the main app's Imports table before then starting the main app.</p></li>\n<li><p>use your compiler's <a href=\"http://msdn.microsoft.com/en-us/library/151kt790.aspx\" rel=\"nofollow\">delay-load feature</a> (if it has one).  Delay-loading uses a different PE table that gets processed at runtime by your compiler's RTL, rather than at startup by the OS.  Delay-loaded DLL functions are loaded on an as-needed basis at runtime when they are called by your code for the first time.  So you can use a delay-load hook to intercept the loading of <code>A</code> so you can load and return a handle to <code>B</code> instead.</p></li>\n<li><p>do not statically link to your DLL functions to begin with.  Explicitly use <code>LoadLibrary()</code> and <code>GetProcAddress()</code> in your code where needed (delay-loading uses these functions internally).</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1420653547, "post_id": 27825633, "comment_id": 44057026, "body": "Yep, except I want to do it programmatically, in a launcher."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1420653679, "post_id": 27825633, "comment_id": 44057107, "body": "Then you&#39;ll just have to parse the PE header and you can go fix the Import directory in the exact same way. LordPE will give you the value of almost every field in every part of the PE headers and directories, if you need an example."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1420654178, "post_id": 27825633, "comment_id": 44057366, "body": "Yep, but another thing is, I don&#39;t want to permanently modify the .exe file on disk; I want to do it at startup, every single time, with the launcher modifying the file in the memory."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 3, "creation_date": 1420654281, "post_id": 27825633, "comment_id": 44057426, "body": "There&#39;s no easy way to do that. Once the Windows Loader has loaded the PE from disk, it&#39;s too late to change the imports, they have already been resolved. You should make a temporary copy of the file on disk, modify the copy on disk and delete it when you&#39;re done. If you really don&#39;t want to touch the file on disk, then you can use MapViewOfFile and implement your own PE Loader or try to reverse engineer a kernel function that can start a process directly from memory, but good luck with that. I don&#39;t know if you&#39;re writing malware (are you?), but if it was that easy, everyone would do it."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1420655024, "post_id": 27825633, "comment_id": 44057791, "body": "No, I&#39;m playing around with an old game, but I still want to be careful so as not to get any legal trouble from distributing copyrighted files (if I were to publish anything). At any rate, since your answer is the most complete and helpful, +1 and accepted :)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420655353, "post_id": 27825633, "comment_id": 44057982, "body": "Simply replacing the game&#39;s <code>A</code> DLL with a replacement that maps everything to the <code>B</code> DLL is going to be a lot easier than patching the Imports table everytime the game is run.  Or simply rename the original <code>A</code> DLL to something else and then rename the <code>B</code> DLL to <code>A</code>."}], "tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": false, "score": 2, "last_activity_date": 1420653862, "last_edit_date": 1495542642, "creation_date": 1420653403, "answer_id": 27825633, "question_id": 27825264, "link": "https://stackoverflow.com/questions/27825264/editing-the-iat-redirecting-to-another-dll-at-process-startup/27825633#27825633", "title": "Editing the IAT (redirecting to another DLL) at process startup", "body": "<p>If you want to replace one of the loaded DLLs with your own it's actually very easy.</p>\n\n<p>You can get a list of the imports with LordPE (PE Editor -> Directoried -> Import Table (Not IAT!)), and in particular you will get the \"Name RVA\" for each DLL imported.</p>\n\n<p><img src=\"https://i.stack.imgur.com/1g4lI.jpg\" alt=\"screenshot of LordPE\"></p>\n\n<p>This is the address of where the name of that DLL is stored in your binary.\nFor example on my screenshot if you go look at RVA 0x1A46C you'll see the string \"SHELL32.dll\". Either edit the string in place with your favorite hex editor or add a new string somewhere else and change the \"Name RVA\" in LordPE to point to your new string.</p>\n\n<p>Now if you want to do the same thing programatically, the method is the exact same, but you'll have to do LordPE's job. That is, parsing the PE header.\nYou can look at this question if you want more infos on how to parse it : <a href=\"https://stackoverflow.com/questions/21007223/pe-file-parsing-c-c\">PE File Parsing c/c++</a></p>\n"}, {"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": true, "score": 0, "last_activity_date": 1421277683, "creation_date": 1421277683, "answer_id": 27954302, "question_id": 27825264, "link": "https://stackoverflow.com/questions/27825264/editing-the-iat-redirecting-to-another-dll-at-process-startup/27954302#27954302", "title": "Editing the IAT (redirecting to another DLL) at process startup", "body": "<p>I've realized all I need is to call CreateProcess with the CREATE_SUSPENDED flag (<a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx</a>) in my launcher app. I can then freely mess around with the IAT and resume the process once I'm done.</p>\n"}], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "accepted_answer_id": 27954302, "answer_count": 3, "score": 0, "last_activity_date": 1421277683, "creation_date": 1420652290, "last_edit_date": 1420653324, "question_id": 27825264, "link": "https://stackoverflow.com/questions/27825264/editing-the-iat-redirecting-to-another-dll-at-process-startup", "title": "Editing the IAT (redirecting to another DLL) at process startup", "body": "<p>I have an application, X, that uses functions from the DLL file A and has it referenced in its IAT. I would like to programmatically (not manual patching) force X to load my replacement DLL, B, with the functionality emulated, in other words, alter the IAT so my file, B.dll, is loaded instead. To illustrate:</p>\n\n<pre><code>X's IAT: A.TestFunction\n</code></pre>\n\n<p>Before the process starts, I would like to change that to</p>\n\n<pre><code>B.TestFunction\n</code></pre>\n\n<p>I want to do this when the process starts: a launcher modifies the IAT of X.exe (again, not patching the HDD file; I mean a one-time change), then actually starts the process, so I need to do this programmatically, just patching the IAT is not an option.</p>\n\n<p>IAT hooking is not exactly what I'm looking for in this case, as I don't want to override the procedures loaded by the Windows loader, instead I want it to load my DLL at startup. Of course, one could create a dummy A.dll with functions forwarded to B.dll, but I want to have as few files as possible, so I'm looking for a better solution.</p>\n\n<p>The application isn't mine and I don't have access to the source code, so modifying it is out of question.</p>\n\n<p><strong>The question:</strong> What APIs should I use to create the loader mentioned above, capable of patching the .exe's IAT before starting it?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "edited": false, "score": 0, "creation_date": 1420652556, "post_id": 27825082, "comment_id": 44056437, "body": "Can I recommend using real variable names? When I read your code and see an <code>i</code> or a <code>k</code>, I have to go scan your code and figure out what you&#39;re using that simple letter for. And a few minutes later, I&#39;ver forgotten, and have to do it again."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4416876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb05261a2d517c891573ec7e0c0d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sky", "link": "https://stackoverflow.com/users/4416876/sky"}, "edited": false, "score": 0, "creation_date": 1420652081, "post_id": 27825128, "comment_id": 44056188, "body": "Thanks for reminding <code>for(i=0;i&lt;j;++i)</code> but still didn&#39;t show everyone."}, {"owner": {"reputation": 3, "user_id": 4416876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb05261a2d517c891573ec7e0c0d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sky", "link": "https://stackoverflow.com/users/4416876/sky"}, "edited": false, "score": 0, "creation_date": 1420652224, "post_id": 27825128, "comment_id": 44056263, "body": "Like what? I thought it was good but just can&#39;t do this. Debugger says, 0 warning, 0 error. :(  (I&#39;m still learning, so forgive me.)"}, {"owner": {"reputation": 1067, "user_id": 1279369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa8044a5ce7180caf43a56953d07a227?s=128&d=identicon&r=PG", "display_name": "nanny", "link": "https://stackoverflow.com/users/1279369/nanny"}, "reply_to_user": {"reputation": 3, "user_id": 4416876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb05261a2d517c891573ec7e0c0d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sky", "link": "https://stackoverflow.com/users/4416876/sky"}, "edited": false, "score": 0, "creation_date": 1420652749, "post_id": 27825128, "comment_id": 44056551, "body": "@Sky Compile your code with the <code>-Wall</code> (and maybe <code>-Wextra</code> and <code>-Wpedantic</code> also) flag. With those flags I get 3 warnings."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3, "user_id": 4416876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb05261a2d517c891573ec7e0c0d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sky", "link": "https://stackoverflow.com/users/4416876/sky"}, "edited": false, "score": 0, "creation_date": 1420654841, "post_id": 27825128, "comment_id": 44057686, "body": "@Sky: Debuggers do not say &quot;0 warning, 0 error.&quot; You&#39;re looking at the build output, not the debugger."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1420652982, "last_edit_date": 1420652982, "creation_date": 1420651812, "answer_id": 27825128, "question_id": 27825082, "link": "https://stackoverflow.com/questions/27825082/why-my-program-wont-show-each-element-with-printf/27825128#27825128", "title": "Why my program won&#39;t show each element with printf();?", "body": "<p>I fixed your code, the problems I found were</p>\n\n<ol>\n<li><p>The first allocation, for the <code>struct family *member</code> is wrong, because it should be performed before the loop</p>\n\n<pre><code>member=(struct family*)malloc(j*sizeof(struct family));\nfor (k = 0 ; k &lt; j ; k++) ...\n</code></pre></li>\n<li><p>You never use the allocated <code>struct family *member;</code> it should be used to store the members of the family, that's why I renamed it to <code>family</code>, so you have a member <code>size</code> in that struct, that's where <code>scanf</code> for the member count should store the value</p>\n\n<pre><code>printf(\"Enter family member count: \");\nscanf(\"%d\", &amp;member[k].size);\n</code></pre>\n\n<p>now the value is stored at the <code>size</code> member so the next loop should go like</p>\n\n<pre><code>for (j = 0 ; j &lt; member[k].size ; j++)\n</code></pre>\n\n<p>and the <code>malloc</code>, before the loop should be</p>\n\n<pre><code>member[k].member = malloc(member[k].size * sizeof(struct person)); \n</code></pre></li>\n<li><p>Your <code>scanf</code> for the name is wrong, you should not take the address of the array</p>\n\n<pre><code>scanf(\"%s%d\",&amp;(ptr+i)-&gt;name, &amp;(ptr+i)-&gt;age); -&gt; scanf(\"%s%d\",(ptr+i)-&gt;name, &amp;(ptr+i)-&gt;age);\n</code></pre>\n\n<p>but according to the previously mentioned issues you should do it this way</p>\n\n<pre><code>scanf(\"%s%d\", member[k].memberj].name, &amp;member[k].member[j].age);\n</code></pre>\n\n<p>after all this is fixed you can output the data iterating over all <code>member</code> elements and all <code>member-&gt;member</code> elements.</p></li>\n</ol>\n\n<p>Here is the fixed code</p>\n\n<pre><code>struct family \n{\n    int size;\n    struct person *member;\n    char address[256];\n};\n\nstruct person \n{\nint age;\nchar name[30];\n};\n\nint main()\n{\n    struct family *family;\n    int familyCount, i, j;\n\n    printf(\"\\nEnter family count: \");\n    scanf(\"%d\", &amp;familyCount);\n\n    family = malloc(familyCount * sizeof(*family));\n    for (i = 0 ; i &lt; familyCount ; i++)\n    {\n        printf(\"Enter family member count: \");\n        scanf(\"%d\", &amp;family[i].size);\n\n        family[i].member = malloc(family[i].size * sizeof(*(family[i].member)));\n        for (j = 0 ; j &lt; family[i].size ; ++j)\n        {\n            printf(\"\\nEnter person and the age:\\n\");\n            scanf(\"%s%d\", family[i].member[j].name, &amp;family[i].member[j].age);\n        }\n    }\n\n    for (i = 0 ; i &lt; familyCount ; ++i)\n    {\n        printf(\"Family %d:\\n\", 1 + i);\n        for (j = 0 ; j &lt; family[i].size ; ++j)\n            printf(\"\\tmember %d: %s, %d\\n\", 1 + j, family[i].member[j].name, family[i].member[j].age);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 4416876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb05261a2d517c891573ec7e0c0d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sky", "link": "https://stackoverflow.com/users/4416876/sky"}, "edited": false, "score": 0, "creation_date": 1420653001, "post_id": 27825135, "comment_id": 44056694, "body": "@Sky, I have no problem compiling and linking the program."}, {"owner": {"reputation": 1067, "user_id": 1279369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa8044a5ce7180caf43a56953d07a227?s=128&d=identicon&r=PG", "display_name": "nanny", "link": "https://stackoverflow.com/users/1279369/nanny"}, "edited": false, "score": 0, "creation_date": 1420653098, "post_id": 27825135, "comment_id": 44056752, "body": "@RSahu what the hell kind of compiler are you using, then?"}, {"owner": {"reputation": 1067, "user_id": 1279369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa8044a5ce7180caf43a56953d07a227?s=128&d=identicon&r=PG", "display_name": "nanny", "link": "https://stackoverflow.com/users/1279369/nanny"}, "edited": false, "score": 0, "creation_date": 1420653157, "post_id": 27825135, "comment_id": 44056795, "body": "Oh I see, you just left out the struct declarations."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1067, "user_id": 1279369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa8044a5ce7180caf43a56953d07a227?s=128&d=identicon&r=PG", "display_name": "nanny", "link": "https://stackoverflow.com/users/1279369/nanny"}, "edited": false, "score": 0, "creation_date": 1420653239, "post_id": 27825135, "comment_id": 44056840, "body": "@nanny, that must be the same thing Sky was doing. Took my <code>main</code> function and not the rest of his code :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1420652526, "last_edit_date": 1420652526, "creation_date": 1420651847, "answer_id": 27825135, "question_id": 27825082, "link": "https://stackoverflow.com/questions/27825082/why-my-program-wont-show-each-element-with-printf/27825135#27825135", "title": "Why my program won&#39;t show each element with printf();?", "body": "<p>These lines:</p>\n\n<pre><code>for(k=0;k&lt;j;k++){\n   member=(struct family*)malloc(j*sizeof(struct family));\n</code></pre>\n\n<p>make sure that only the last <code>member</code> is retained when the loop ends.</p>\n\n<p>This line</p>\n\n<pre><code>  ptr=(struct person*)malloc(n*sizeof(struct person));\n</code></pre>\n\n<p>makes sure that only the last <code>ptr</code> is retained when the loop ends.</p>\n\n<p>What you need is something like:</p>\n\n<pre><code>int main(){\n   struct family *family_array = NULL;\n   int j,k;\n   int i,n;\n\n   printf(\"\\nEnter family count: \");\n   scanf(\"%d\",&amp;j);\n\n   // Allocate memory for j families.\n   family_array = malloc(j*sizeof(struct family));\n\n   // Read the data for each family.\n   for(k=0;k&lt;j;k++){\n\n      printf(\"Enter family member count: \");\n      scanf(\"%d\",&amp;n);\n\n      // Make sure to store the size of the family.\n      family_array[k].size = n;\n\n      // Allocate memory for the members of the family.\n      family_array[k].member = malloc(n*sizeof(struct person));\n\n      // Read the data for each member of the family.\n      for(i=0;i&lt;n;++i){\n         printf(\"\\nEnter person and the age:\\n\");\n         scanf(\"%s%d\",family_array[k].member[i].name, &amp;(family_array[k].member[i].age));\n      }\n   }\n\n   printf(\"\\nDisplaying Infromation:\\n\");\n   for(k=0;k&lt;j;k++)\n   {\n      n = family_array[k].size;\n      for(i=0;i&lt;n;++i)\n      {\n         printf(\"%s\\t%d\\t\\n\", family_array[k].member[i].name, family_array[k].member[i].age);\n      }\n   }\n\n   // Make sure to deallocate the memory.\n   for(k=0;k&lt;j;k++)\n   {\n      free(family_array[k].member);\n   }\n   free(family_array);\n\n   _getch();\n   return 0;\n}\n</code></pre>\n\n<p><strong>PS</strong> It will be good to add error checking code any time you use <code>scanf</code>. It's not a good practice to assume that the user always provides good input.</p>\n"}], "owner": {"reputation": 3, "user_id": 4416876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb05261a2d517c891573ec7e0c0d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sky", "link": "https://stackoverflow.com/users/4416876/sky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 27825128, "answer_count": 2, "score": -1, "last_activity_date": 1420652982, "creation_date": 1420651674, "last_edit_date": 1420651798, "question_id": 27825082, "link": "https://stackoverflow.com/questions/27825082/why-my-program-wont-show-each-element-with-printf", "title": "Why my program won&#39;t show each element with printf();?", "body": "<p>I made a very tiny program which actually allows you to create N families with X members and when I try to display \"ALL\" members from all families I can't, it will only display last family members. Why and how to fix it?</p>\n\n<p>.....................................................................................................................................................................</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct family {\n    int size;\n    struct person *member;\n    char address[256];\n};\n\nstruct person {\n   int age;\n   char name[30];\n};\n\nint main(){\n   struct family *member;\n   struct person *ptr;\n   int j,k;\n   int i,n;\n   printf(\"\\nEnter family count: \");\n   scanf(\"%d\",&amp;j);\n\n   for(k=0;k&lt;j;k++){\n      member=(struct family*)malloc(j*sizeof(struct family));\n\n\n      printf(\"Enter family member count: \");\n      scanf(\"%d\",&amp;n);\n\n\n      ptr=(struct person*)malloc(n*sizeof(struct person));\n      for(i=0;i&lt;n;++i){\n         printf(\"\\nEnter person and the age:\\n\");\n         scanf(\"%s%d\",&amp;(ptr+i)-&gt;name, &amp;(ptr+i)-&gt;age);\n      }\n   }\n   printf(\"\\nDisplaying Infromation:\\n\");\n   for(i=0;i&lt;n;++i)\n      printf(\"%s\\t%d\\t\\n\",(ptr+i)-&gt;name,(ptr+i)-&gt;age);\n   _getch();\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "feof"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1420651076, "post_id": 27824870, "comment_id": 44055585, "body": "Take a look at <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow noreferrer\">fopen man pages</a> or a <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fopen.htm\" rel=\"nofollow noreferrer\">tutorial on fopen</a>."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420651067, "creation_date": 1420651067, "answer_id": 27824927, "question_id": 27824870, "link": "https://stackoverflow.com/questions/27824870/how-to-add-text-to-end-file-text-in-language-c/27824927#27824927", "title": "How to add text to end file text in language c", "body": "<p>Just open the file in <code>a</code> append mode because standard says</p>\n\n<blockquote>\n  <p>Opening a file with append mode ('a' as the first character in the\n  mode argument) causes all subsequent writes to the file to be forced\n  to the then current end-of-file, regardless of intervening calls to\n  the fseek function.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 3776377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bfc4afdfcaa0a10edbada69747e053ba?s=128&d=identicon&r=PG", "display_name": "Maximus", "link": "https://stackoverflow.com/users/3776377/maximus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1420651067, "creation_date": 1420650921, "question_id": 27824870, "link": "https://stackoverflow.com/questions/27824870/how-to-add-text-to-end-file-text-in-language-c", "title": "How to add text to end file text in language c", "body": "<p>I have a file in the c language that contains the text i want to add another text to this file without deleting the last text only to add new text at the end of the file</p>\n"}, {"tags": ["c++", "c", "recursion", "fibonacci"], "comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 6, "creation_date": 1420650971, "post_id": 27824831, "comment_id": 44055534, "body": "It&#39;s called <a href=\"http://en.wikipedia.org/wiki/Memoization\" rel=\"nofollow noreferrer\">memoization</a>."}, {"owner": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "edited": false, "score": 0, "creation_date": 1420651004, "post_id": 27824831, "comment_id": 44055548, "body": "It looks like a memoization. The function is attributing the first 100 fib numbers as they are calculated and returning prematurely if already memoized."}, {"owner": {"reputation": 901, "user_id": 4418033, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/499b51847b38863627f544d943f691b5?s=128&d=identicon&r=PG&f=1", "display_name": "pexea12", "link": "https://stackoverflow.com/users/4418033/pexea12"}, "edited": false, "score": 0, "creation_date": 1420651046, "post_id": 27824831, "comment_id": 44055569, "body": "Thank you! It helps."}, {"owner": {"reputation": 901, "user_id": 4418033, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/499b51847b38863627f544d943f691b5?s=128&d=identicon&r=PG&f=1", "display_name": "pexea12", "link": "https://stackoverflow.com/users/4418033/pexea12"}, "edited": false, "score": 0, "creation_date": 1420651406, "post_id": 27824831, "comment_id": 44055791, "body": "Yeah, I still get the correct answer. What do you mean by &quot;inefficiency&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420651106, "post_id": 27824895, "comment_id": 44055599, "body": "The results are still being cached.  He just doesn&#39;t use the cached values."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420651229, "post_id": 27824895, "comment_id": 44055669, "body": "@JamesKanze: It seems reasonable to say that a write-only memory is not a cache.  A log, perhaps."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1420652004, "post_id": 27824895, "comment_id": 44056148, "body": "@BenVoigt Yes and no.  The memory is still a cache, in the sense that it could be used if you wanted to.  But yes, it doesn&#39;t fulfill the purpose of a cache unless it is actually used."}], "tags": [], "owner": {"reputation": 332, "user_id": 2701936, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001805193667/picture?type=large", "display_name": "Laszlo Fuleki", "link": "https://stackoverflow.com/users/2701936/laszlo-fuleki"}, "is_accepted": false, "score": 1, "last_activity_date": 1420650973, "creation_date": 1420650973, "answer_id": 27824895, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27824895#27824895", "title": "Get a faster code in recursion algorithm", "body": "<p>That is because the cached results aren't being used anymore in that way. You see, when you use recursive functions such as these for instance f(20) gets called multiple times, try to draw the call tree on a paper and you'll see. What that line does is essentially avoiding recalculation of these values (memoization, if you want to put it in that way).</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1420653327, "post_id": 27824930, "comment_id": 44056886, "body": "Good points on range checking and using a local variable (still with static storage duration).  However, the early return in the original code was far simpler than your rewrite, as well as conceptually more straightforward (&quot;if the cache has the value already, we&#39;re done&quot; vs &quot;make sure the cache has the value by calculating it if it isn&#39;t already in the cache, then return from the cache&quot;)."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420654241, "post_id": 27824930, "comment_id": 44057403, "body": "The early return on the same line as the <code>if</code> makes the original completely unreadable; at the very least, it needs to be on a separate line.  Otherwise... If you&#39;re caching, it&#39;s much clearer if you always return the cached value.  Recursion in general may be one of the rare cases where a premature return to break the recursion makes sense.  I would still avoid it in pedagogical text; 99 times out of 100, premature return signals insufficient thought about the algorithm, and is less clear.  (At least assuming that you are handling errors as fatal or with exceptions.)"}], "tags": [], "owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "is_accepted": false, "score": 5, "last_activity_date": 1420654263, "last_edit_date": 1420654263, "creation_date": 1420651075, "answer_id": 27824930, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27824930#27824930", "title": "Get a faster code in recursion algorithm", "body": "<p>The algorithm is caching previously calculated values in the array <code>f</code>.\nThis array is initialized with 0 (since it is static). The test you\nmention removing checks if there is a cached value, and returns it.  By\neliminating the test, you never use the cached value, but recalculate it\nevery time.  And that is expensive, since you end up calculating the\nsame value many, many times.</p>\n\n<p>EDIT:</p>\n\n<p>I might add that if this is code from a book, you should get a different\nbook, because it is very poor style.  In C, I'd write something like:</p>\n\n<pre><code>long long\nfib( int n )\n{\n    static long long cache[100];    //  limit scope, and give it a good name\n    assert( n &gt;= 0 &amp;&amp; n &lt; sizeof(cache) / sizeof(cache[0]) );\n                                    //  make sure input is legal.\n    if ( cache[n] == 0 ) {\n        cache[n] = n &lt; 2 ? 1 : fib( n - 1 ) + fib( n - 2 );\n    }\n    return cache[n];\n}\n</code></pre>\n\n<p>You'll notice that the code is actually a lot simpler this way.</p>\n\n<p>In C++, of course, I'd use <code>std::vector</code> for the cache, so I don't have\nsome hidden, hard-coded limit.  (For that matter, in C, I'd probably\nimplement something similar, to avoid the hard-coded limit.  But I\nwouldn't expect that in a pedagogic example.)</p>\n"}, {"tags": [], "owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "is_accepted": true, "score": 9, "last_activity_date": 1420651968, "last_edit_date": 1420651968, "creation_date": 1420651499, "answer_id": 27825034, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27825034#27825034", "title": "Get a faster code in recursion algorithm", "body": "<p>At First if you use the na\u00efve formula for recursion ( i.e if you comment the line 10 in your code)</p>\n\n<pre><code>F(n) = F(n-1) + F(n-2)\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/2DB6T.gif\" alt=\"Fib Recursion Tree\"></p>\n\n<p>As you can see it computes many values more than once(ans hence is inefficient ) , or in other words have exponential time complexity as every node resolves into 2 branches ( <code>O(2^n)</code> )</p>\n\n<p>So if he save our work and use it to solve the same problem when occurred again:\nWe can achieve linear time complexity ( <code>O(n)</code> )</p>\n\n<p>In your code the array <code>f</code> is <code>cache</code>\n<img src=\"https://i.stack.imgur.com/LFrmy.png\" alt=\"Fib Recursion tree with Memoization\"></p>\n\n<p>However if you interested to know(although it is not asked in question) , you can calculate <code>Fib(n)</code> or any linear recurrence relation in general faster than this , in logarithmic time complexity via Matrix Exponention. ( <code>O(logN)</code> )</p>\n"}, {"comments": [{"owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 1, "creation_date": 1420651804, "post_id": 27825107, "comment_id": 44056016, "body": "Some may argue the difference between Dynamic Programming and Memoization."}, {"owner": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "reply_to_user": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 0, "creation_date": 1420652208, "post_id": 27825107, "comment_id": 44056252, "body": "@AbhishekGupta memorization is used by the dynamic programming technique to break into sub problems. the scheme here is dynamic programming scheme which uses memorization to store the results."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1420653229, "post_id": 27825107, "comment_id": 44056833, "body": "Memoization is the particular technique applied here, Dynamic Programming is a broad approach which includes memoization and many other techniques."}], "tags": [], "owner": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1420653610, "last_edit_date": 1420653610, "creation_date": 1420651748, "answer_id": 27825107, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27825107#27825107", "title": "Get a faster code in recursion algorithm", "body": "<p>This ideas of solving problem is called dynamic programming, this particular method is called memorization:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Dynamic_programming\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Dynamic_programming</a></p>\n\n<p>The idea is to store previously calculated values and use them instead of calculating them again. in your case they are stored in: <code>f[100]</code> and once they are calculated once a fibonacci number will never be recalculated. when you delete the assignment you disable this storage and the values are recalculated each time.</p>\n"}], "owner": {"reputation": 901, "user_id": 4418033, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/499b51847b38863627f544d943f691b5?s=128&d=identicon&r=PG&f=1", "display_name": "pexea12", "link": "https://stackoverflow.com/users/4418033/pexea12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 27825034, "answer_count": 4, "score": 4, "last_activity_date": 1420654263, "creation_date": 1420650811, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm", "title": "Get a faster code in recursion algorithm", "body": "<p>I am learning about recursion in C.\nMy problem is: Print 80 first Fibonacci numbers (using recursion)</p>\n\n<p>Here is the book's code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nlong long f[100];\n\nlong long fib(int n)\n{\n    if (n&lt;2) return 1;\n    if (f[n]&gt;0) return f[n];\n    f[n] = fib(n-1)+fib(n-2);       \n    return f[n];\n}\nint main()\n{\n    int i;\n    for (i = 0; i&lt;= 80; i++) printf (\"%lld \\n\", fib(i));\n    system (\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>With this code, my program runs very fast and I immediately get 80 Fibonacci numbers.</p>\n\n<p>However, when I delete the 10th line: </p>\n\n<pre><code>if (f[n] &gt; 0) return f[n];\n</code></pre>\n\n<p>The program becomes very slow and it takes about 20 seconds to print all 80 numbers.\nCan anyone explain why? Thank you.</p>\n"}, {"tags": ["c", "pointers", "memory-management", "malloc"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1420650553, "post_id": 27824666, "comment_id": 44055263, "body": "Wouldn&#39;t it just be easier to fix your program to stop truncating pointers?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1420650611, "post_id": 27824666, "comment_id": 44055303, "body": "There <i>might</i> be some system-specific way to do this. C in general has no such mechanism. Why do you need to do this?"}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 1, "creation_date": 1420650655, "post_id": 27824666, "comment_id": 44055328, "body": "What are you trying to do?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1420651396, "post_id": 27824666, "comment_id": 44055783, "body": "Surely the GPU has its own memory that is quite distinct from that of the main machine. In other words, <code>malloc</code> will get you memory that can be accessed on the main machine, but not on the GPU."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1420654813, "post_id": 27824666, "comment_id": 44057667, "body": "Then your question is how to allocate GPU memory, <i>not</i> how to use <code>malloc</code> to allocate GPU memory."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 3341095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZplLx.jpg?s=128&g=1", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/3341095/giorgio"}, "edited": false, "score": 0, "creation_date": 1420650605, "post_id": 27824695, "comment_id": 44055301, "body": "is it possible to use mmap rather malloc?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 51, "user_id": 3341095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZplLx.jpg?s=128&g=1", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/3341095/giorgio"}, "edited": false, "score": 0, "creation_date": 1420650824, "post_id": 27824695, "comment_id": 44055432, "body": "@Giorgio You need to tell why exactly you need this how does it matter to you where memory gets allocated?"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420650343, "creation_date": 1420650343, "answer_id": 27824695, "question_id": 27824666, "link": "https://stackoverflow.com/questions/27824666/only-malloc-lower-32bit-address/27824695#27824695", "title": "Only Malloc Lower 32bit address", "body": "<p>No.</p>\n\n<p><code>malloc()</code> is not under your control to allocate the memory from where you need. It is done internally by <code>malloc()</code> by using the size passed as a parameter. </p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 3341095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZplLx.jpg?s=128&g=1", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/3341095/giorgio"}, "edited": false, "score": 0, "creation_date": 1420651786, "post_id": 27825031, "comment_id": 44056008, "body": "Yup, I realized that specific solution. Then it is actually very hard for me to apply this tool in many scenarios due to it requires a unique sys call. Thx"}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "reply_to_user": {"reputation": 51, "user_id": 3341095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZplLx.jpg?s=128&g=1", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/3341095/giorgio"}, "edited": false, "score": 0, "creation_date": 1420682595, "post_id": 27825031, "comment_id": 44069543, "body": "You could encapsulate the system specific stuff."}], "tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 1, "last_activity_date": 1420651490, "creation_date": 1420651490, "answer_id": 27825031, "question_id": 27824666, "link": "https://stackoverflow.com/questions/27824666/only-malloc-lower-32bit-address/27825031#27825031", "title": "Only Malloc Lower 32bit address", "body": "<p>You would have to create your own memory allocator. The starting point would be to use operating system services (system dependent) to allocate pages in the lower 32-bit range. Then use your functions to allocate memory from those pages.</p>\n"}], "owner": {"reputation": 51, "user_id": 3341095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZplLx.jpg?s=128&g=1", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/3341095/giorgio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1420651490, "creation_date": 1420650258, "last_edit_date": 1420651121, "question_id": 27824666, "link": "https://stackoverflow.com/questions/27824666/only-malloc-lower-32bit-address", "title": "Only Malloc Lower 32bit address", "body": "<p>I've got a question on malloc in 64 bit machine. \nI was wondering if it is possible for malloc to only allocate memory from lower 32bit addr. For instance, only allocate memory from 0xcfffffff to 0xffffffff, as it is in the 32bit machine. </p>\n\n<p>Thanks for the help. </p>\n\n<hr>\n\n<p>Update:\nAt the moment, I am trying to implement a memory management tool for GPU devices which uses OpenCL.\nIn order to do that, I need to intercept memory creating APIs from OpenCL, and reimplement them on my own. In other words, I implement a virtual memory for GPU devices on the host side. The problem is, in NVIDIA cuda, the OpenCL only has 32bit memory ptrs even in 64 bit machine. Therefore, every time I malloc a memory on the host side and tried to treat it as a OpenCL memory, the higher 32 bit will be truncated. Therefore, if I could malloc only lower 32bit, then there would be no problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1420649742, "post_id": 27824192, "comment_id": 44054789, "body": "Note: you can do this in linear time instead of quadratic by having a single loop that 1) divides your current product by the value of the first digit in the substring currently under consideration, 2) increments the pointer to the next substring, and 3) multiplies the result of (1) by the value of the new last digit. You need a little more work before the first iteration, but overall that will be more efficient..."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1420650176, "post_id": 27824192, "comment_id": 44055038, "body": "Your <code>max</code> is a <code>long long</code>, which should be big enough to hold the product on most platforms. But you cut it short by printing it as a normal <code>int</code> with <code>%d</code>. You need the <code>%lld</code> format. (You could as well make it <code>unsigned lon long</code>, for which you&#39;d need <code>%llu</code>.)"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1420655346, "post_id": 27824192, "comment_id": 44057973, "body": "I guess because the question shows no research effort"}, {"owner": {"reputation": 33, "user_id": 3886600, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003161326302/picture?type=large", "display_name": "Mayer  Kim", "link": "https://stackoverflow.com/users/3886600/mayer-kim"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1420710961, "post_id": 27824192, "comment_id": 44078786, "body": "@anatolyg I will effort researching(but i can&#39;t english well... T.T)"}, {"owner": {"reputation": 673, "user_id": 1342491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f65cb9de7aec9aa1223dd2608259c907?s=128&d=identicon&r=PG", "display_name": "Israel Garcia", "link": "https://stackoverflow.com/users/1342491/israel-garcia"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1552803537, "post_id": 27824192, "comment_id": 97145296, "body": "@twalberg, good point, but you will find a zero in substrings and will loose your accumulated product."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1420650509, "post_id": 27824353, "comment_id": 44055238, "body": "Two good points. The problem is not the data type - OP uses <code>long long</code>, which will be 64 bits on most mopdern systems. The wrong printing format truncates the answer, though."}, {"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1420650587, "post_id": 27824353, "comment_id": 44055293, "body": "@MOehm: Yeah, I just saw your comment to the question. You are quite right. Edited, thanks!"}], "tags": [], "owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": true, "score": 5, "last_activity_date": 1420650542, "last_edit_date": 1495539884, "creation_date": 1420649323, "answer_id": 27824353, "question_id": 27824192, "link": "https://stackoverflow.com/questions/27824192/euler-8-adjacent-digits/27824353#27824353", "title": "Euler 8- adjacent digits", "body": "<p>At a glance, I see two problems.</p>\n\n<p>Firstly &mdash; this:</p>\n\n<pre><code>    \"foo\\\n    bar\\\n    baz\"\n</code></pre>\n\n<p>is equivalent to this:</p>\n\n<pre><code>   \"foo    bar    baz\"\n</code></pre>\n\n<p>because the <code>\\</code> only quotes the newline, not the indentation afterward.</p>\n\n<p>What you want is this:</p>\n\n<pre><code>    \"foo\"\n    \"bar\"\n    \"baz\"\n</code></pre>\n\n<p>which is equivalent to this:</p>\n\n<pre><code>    \"foobarbaz\"\n</code></pre>\n\n<p>because the C compiler will concatenate adjacent string literals.</p>\n\n<p>Secondly &mdash; as <a href=\"https://stackoverflow.com/users/2979617/m-oehm\">M Oehm</a> points out in a comment above: to print your <code>long long</code> result, you need to use <code>%lld</code> rather than <code>%d</code>. <em>[Note: an earlier version of this answer talked about <code>int</code> vs. <code>int64_t</code>, but that's because I was looking at the wrong line. Sorry!]</em></p>\n"}], "owner": {"reputation": 33, "user_id": 3886600, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003161326302/picture?type=large", "display_name": "Mayer  Kim", "link": "https://stackoverflow.com/users/3886600/mayer-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1821, "favorite_count": 0, "accepted_answer_id": 27824353, "answer_count": 1, "score": 0, "last_activity_date": 1420650693, "creation_date": 1420648813, "last_edit_date": 1420650693, "question_id": 27824192, "link": "https://stackoverflow.com/questions/27824192/euler-8-adjacent-digits", "title": "Euler 8- adjacent digits", "body": "<p>I am trying to project Euler problem 8 but, I have a problem.\nThe four adjacent digits in the 1000-digit number that have the greatest product are 9 \u00d7 9 \u00d7 8 \u00d7 9 = 5832.</p>\n\n<pre><code>73167176531330624919225119674426574742355349194934\n96983520312774506326239578318016984801869478851843\n85861560789112949495459501737958331952853208805511\n12540698747158523863050715693290963295227443043557\n66896648950445244523161731856403098711121722383113\n62229893423380308135336276614282806444486645238749\n30358907296290491560440772390713810515859307960866\n70172427121883998797908792274921901699720888093776\n65727333001053367881220235421809751254540594752243\n52584907711670556013604839586446706324415722155397\n53697817977846174064955149290862569321978468622482\n83972241375657056057490261407972968652414535100474\n82166370484403199890008895243450658541227588666881\n16427171479924442928230863465674813919123162824586\n17866458359124566529476545682848912883142607690042\n24219022671055626321111109370544217506941658960408\n07198403850962455444362981230987879927244284909188\n84580156166097919133875499200524063689912560717606\n05886116467109405077541002256983155200055935729725\n71636269561882670428252483600823257530420752963450\n</code></pre>\n\n<p>Find the thirteen adjacent digits in the 1000-digit number that have the greatest product. What is the value of this product?</p>\n\n<p>and my code in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    char ar[] =\n    \"73167176531330624919225119674426574742355349194934\\\n    96983520312774506326239578318016984801869478851843\\\n    85861560789112949495459501737958331952853208805511\\\n    12540698747158523863050715693290963295227443043557\\\n    66896648950445244523161731856403098711121722383113\\\n    62229893423380308135336276614282806444486645238749\\\n    30358907296290491560440772390713810515859307960866\\\n    70172427121883998797908792274921901699720888093776\\\n    65727333001053367881220235421809751254540594752243\\\n    52584907711670556013604839586446706324415722155397\\\n    53697817977846174064955149290862569321978468622482\\\n    83972241375657056057490261407972968652414535100474\\\n    82166370484403199890008895243450658541227588666881\\\n    16427171479924442928230863465674813919123162824586\\\n    17866458359124566529476545682848912883142607690042\\\n    24219022671055626321111109370544217506941658960408\\\n    07198403850962455444362981230987879927244284909188\\\n    84580156166097919133875499200524063689912560717606\\\n    05886116467109405077541002256983155200055935729725\\\n    71636269561882670428252483600823257530420752963450\";\n\n    int i, j;\n    long long int max=0;\n    long long int count = 1;\n    for(i=0;i&lt;sizeof(ar)-14;i++){//null\n        for(j=i;j&lt;i+13;j++){\n            count = ((int)ar[j]-48) * count;\n        }\n        if(max&lt;count) {max=count;}\n        count = 1;\n    }\n    printf(\"%d\\n\", max);\n}\n</code></pre>\n\n<p>my answer is incorrect. (my answer is 268435456)\ni guess for loop's problem.</p>\n"}, {"tags": ["c", "fread", "stdio", "fseek"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 4419759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f053f3fd3cbd2955bd8c3d653e477e5?s=128&d=identicon&r=PG&f=1", "display_name": "Xerxes", "link": "https://stackoverflow.com/users/4419759/xerxes"}, "edited": false, "score": 0, "creation_date": 1420649337, "post_id": 27824217, "comment_id": 44054555, "body": "Thank you very much, both answers posted were exactly what I needed."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 4, "last_activity_date": 1420648895, "creation_date": 1420648895, "answer_id": 27824217, "question_id": 27824163, "link": "https://stackoverflow.com/questions/27824163/how-do-i-set-a-starting-point-for-fread/27824217#27824217", "title": "How do I set a starting point for fread?", "body": "<pre><code>//                     v-- here\nfread(addressSpace + 0x100, sizeof(addressSpace[0]), 0x3EFF, gameROM);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1420648910, "creation_date": 1420648910, "answer_id": 27824223, "question_id": 27824163, "link": "https://stackoverflow.com/questions/27824163/how-do-i-set-a-starting-point-for-fread/27824223#27824223", "title": "How do I set a starting point for fread?", "body": "<pre><code>fread(addressSpace+loc, sizeof(addressSpace[0]), 0x3EFF, gameROM);\n</code></pre>\n\n<p><code>loc</code> is from where you want to write to <code>addressspace</code> </p>\n\n<pre><code>loc = 0x0100\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4419759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f053f3fd3cbd2955bd8c3d653e477e5?s=128&d=identicon&r=PG&f=1", "display_name": "Xerxes", "link": "https://stackoverflow.com/users/4419759/xerxes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 1, "accepted_answer_id": 27824217, "answer_count": 2, "score": 1, "last_activity_date": 1420648910, "creation_date": 1420648717, "question_id": 27824163, "link": "https://stackoverflow.com/questions/27824163/how-do-i-set-a-starting-point-for-fread", "title": "How do I set a starting point for fread?", "body": "<p>I'm trying to use <code>fseek</code> and <code>fread</code> to copy bytes 0x0100-0x3FFF of a binary file (Game Boy ROM) to bytes 0x0100-0x3FFF of my emulated addressSpace; however I don't know how to use <code>fread</code> to start writing to a specific byte in addressSpace. This is the code that's affected; it starts reading at 0x0100 of the ROM as expected but it writes to 0x0000-0x3EFF of addressSpace, and my question is, how can I get fread to start writing at 0x0100 instead?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nuint8_t addressSpace[0x10000];\n\nint main()\n{\n    FILE* gameROM = fopen(\"rom.gb\", \"rb\");\n    if (gameROM == NULL || sizeof(addressSpace[0]) != 1)\n    {\n        printf(\"Error\");\n        getchar();\n        fclose(gameROM);\n        return 1;\n    }\n    fseek(gameROM, 0x100, SEEK_SET);\n    fread(addressSpace, sizeof(addressSpace[0]), 0x3EFF, gameROM);\n    printf(\"\\n%X\\n\", addressSpace[0x100]);\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "ffmpeg"], "comments": [{"owner": {"reputation": 2306, "user_id": 1720972, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9c7cc852f3ad77e28f09c534506f06d9?s=128&d=identicon&r=PG&f=1", "display_name": "KernelPanic", "link": "https://stackoverflow.com/users/1720972/kernelpanic"}, "edited": false, "score": 2, "creation_date": 1420648772, "post_id": 27824113, "comment_id": 44054189, "body": "Why are you setting metadata parameter to null via <code>metadata = NULL;</code>?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1420648780, "post_id": 27824113, "comment_id": 44054194, "body": "Just a guess, buffer overrun."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420650146, "post_id": 27824113, "comment_id": 44055012, "body": "William, will you try my answer and let me know if it worked? Try <code>memset</code>ing the dictionary&#39;s memory to zero, then passing it in. I believe the <code>memset</code> is necessary, but if my answer is wrong I&#39;ll delete it."}, {"owner": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "edited": false, "score": 0, "creation_date": 1420650517, "post_id": 27824113, "comment_id": 44055242, "body": "Cornstalks, I think linkdd&#39;s answer is the best approach. If you can go ahead and delete yours I would appreciate it (as to not clutter up the question). Thanks again for your help despite most of the other people bashing your for actually knowing what you were talking about."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420650638, "post_id": 27824113, "comment_id": 44055321, "body": "Sure, I&#39;ll do that, but you should be aware that you need to call <a href=\"http://ffmpeg.org/doxygen/trunk/group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7\" rel=\"nofollow noreferrer\"><code>av_dict_free()</code></a> when you&#39;re done; otherwise you&#39;ll leak memory."}], "answers": [{"comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420648913, "post_id": 27824201, "comment_id": 44054273, "body": "<a href=\"http://ffmpeg.org/doxygen/trunk/group__lavu__dict.html#ga6dabaab2d8a53674db6ffd5ac8de3d9f\" rel=\"nofollow noreferrer\">Maybe the documentation can shed some light</a>: <code>If *dst is NULL, this function will allocate a struct for you and put it in *dst</code>"}, {"owner": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "edited": false, "score": 0, "creation_date": 1420648972, "post_id": 27824201, "comment_id": 44054307, "body": "I&#39;m not sure what you are asking. The first statement initializes the variable to null, the second one copies entries from one AVDictionary struct into another."}, {"owner": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420649628, "post_id": 27824201, "comment_id": 44054733, "body": "@Cornstalks. You obviously know what you are talking about. It seems some of the other people on here don&#39;t know how to read documentation. Also, if I don&#39;t set the metadata variable to NULL the code produces a segfault. Any ideas?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "edited": false, "score": 0, "creation_date": 1420649632, "post_id": 27824201, "comment_id": 44054735, "body": "@William Seemann You declared object AVDictionary m; then pass address of it to the second function. And in the second function you set this address to NULL. What is the sense in this case to pass pointer to the object?!"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": -1, "last_activity_date": 1420649784, "last_edit_date": 1420649784, "creation_date": 1420648848, "answer_id": 27824201, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption/27824201#27824201", "title": "Returning struct from function causes memory corruption", "body": "<p>What is the great sense in these statements?!</p>\n\n<pre><code>metadata = NULL;\nav_dict_copy(&amp;metadata, state-&gt;pFormatCtx-&gt;metadata, 0);\n</code></pre>\n\n<p>If you passed pointer to object <code>m</code> as an argument to the second function </p>\n\n<pre><code>AVDictionary m;\nget_p_metadata(ps, &amp;m);\n</code></pre>\n\n<p>then it seems you are going to use its value or the object itself. Otherwise there is no sense to pass the pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420648951, "post_id": 27824228, "comment_id": 44054296, "body": "<a href=\"http://stackoverflow.com/questions/27824113/c-c-returning-struct-from-function-causes-memory-corruption#comment44054273_27824201\">It does make sense!</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420649114, "post_id": 27824228, "comment_id": 44054400, "body": "no it doesnt - why pass in a pointer that is to be ignored. The calling code (get_metadata) seems to be expecting its m object to be updated. If the intent is that get_p_metadata allocates a structure then it should accept a AVDictionary  ** as param"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": -1, "last_activity_date": 1420648925, "creation_date": 1420648925, "answer_id": 27824228, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption/27824228#27824228", "title": "Returning struct from function causes memory corruption", "body": "<p>this code deosnt make sense</p>\n\n<pre><code>  metadata = NULL;\n    av_dict_copy(&amp;metadata, state-&gt;pFormatCtx-&gt;metadata, 0);\n</code></pre>\n\n<p>you passed in a pointer of a metadata object that I suppose was to be updated. Now you set that pointer to null, the call a function that updates that pointer. Since we cant see your other functions its hard to know what you intend so I cant suggest a fix</p>\n"}, {"comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420649620, "post_id": 27824274, "comment_id": 44054730, "body": "That leaks memory, FYI."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420650189, "post_id": 27824274, "comment_id": 44055049, "body": "Yes, it leaks memory.  The <code>get_metadata()</code> function must clean up the <code>AVDictionary</code> created by <code>get_p_metadata()</code>, or else provide it to its caller.  There is no getting around this if <code>av_dict_copy()</code> dynamically allocates the needed memory as the OP requested it to do in his original code.  The cleanup is left as an exercise ....  :-)"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420650314, "post_id": 27824274, "comment_id": 44055119, "body": "Sure, but I think you should add a noticeable comment after the <code>printf</code> that makes it very clear to the OP that they need to clean up. Otherwise, it&#39;s something that is easy to overlook."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420650437, "post_id": 27824274, "comment_id": 44055189, "body": "Fair enough, @Cornstalks.  Added such a comment as you suggest."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1420650402, "last_edit_date": 1420650402, "creation_date": 1420649071, "answer_id": 27824274, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption/27824274#27824274", "title": "Returning struct from function causes memory corruption", "body": "<p>You get different answers from the two statements because they are printing fields of different objects.  Although <code>get_metadata()</code> passes <code>&amp;m</code> to <code>get_p_metadata()</code>, that function completely ignores the value passed, and reassigns the parameter value to <code>NULL</code>.  Frankly, I'm surprised you don't get a segfault.</p>\n\n<p>I suppose your objective in setting <code>metadata = NULL</code> is to get a new metadata object created, but there is no connection between the local variable receiving the pointer to that new metadata object and the argument passed to the function.</p>\n\n<p>Perhaps you want</p>\n\n<pre><code>int get_p_metadata(State **ps, AVDictionary **metadata) {\n    ...\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int get_metadata(State **ps) {\n    printf(\"get_metadata\\n\");\n\n    AVDictionary *m;\n    get_p_metadata(ps, &amp;m);\n    printf(\"count in get_metadata %d\\n\", m-&gt;count);\n\n    // NOTE: *m was dynamically allocated and needs to be cleaned up or returned\n\n    return SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": -1, "last_activity_date": 1420649107, "creation_date": 1420649107, "answer_id": 27824290, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption/27824290#27824290", "title": "Returning struct from function causes memory corruption", "body": "<p>You are setting <code>metadata</code> to be a null pointer, before calling <code>av_dict_copy</code>. I wonder why that even works, and presume that <code>av_dict_copy</code> does something different than you expected (i.e. set a value to the AVDictionary*, whose adress is passed as the first argument). Either way, you lost your connection to your local <code>AVDictionary m</code> there and 2073109240 is just some random value in memory.</p>\n"}, {"comments": [{"owner": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "edited": false, "score": 0, "creation_date": 1420649471, "post_id": 27824291, "comment_id": 44054643, "body": "Sorry, but that didn&#39;t work. If I don&#39;t set the metadata variable to NULL the code produces a segfault."}, {"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "reply_to_user": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "edited": false, "score": 0, "creation_date": 1420650223, "post_id": 27824291, "comment_id": 44055069, "body": "it caused by &quot;AVDictionary m&quot; in function get_metadata(State **ps) not initialized as this struct contains pointers, try &quot;AVDictionary m = {0}&quot;"}], "tags": [], "owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1420649109, "creation_date": 1420649109, "answer_id": 27824291, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption/27824291#27824291", "title": "Returning struct from function causes memory corruption", "body": "<p>According to the declaration of  <a href=\"http://ffmpeg.org/doxygen/trunk/group__lavu__dict.html#ga6dabaab2d8a53674db6ffd5ac8de3d9f\" rel=\"nofollow\">av_dict_copy</a>: the first parameter \"dst\" is a pointer to a pointer to a AVDictionary struct. If *dst is NULL, this function will allocate a struct for you and put it in *dst</p>\n\n<p>For you code, you should not assign \"metadata\" to NULL as it already points to a AVDictionary struct, then it should be  fine.</p>\n\n<p>If the metedata is NULL, it means av_dict_copy creates a new AVDictionary struct and changes the values  in it, while the struct defined in get_metadata(State **ps) remains unchanged, so you get the arbitrary vaules. </p>\n"}, {"comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420650078, "post_id": 27824383, "comment_id": 44054979, "body": "This leaks memory, though."}, {"owner": {"reputation": 941, "user_id": 1020897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6501792042c1bcbd97ac0e0478615f6d?s=128&d=identicon&r=PG", "display_name": "linkdd", "link": "https://stackoverflow.com/users/1020897/linkdd"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1420704621, "post_id": 27824383, "comment_id": 44075747, "body": "Only if you don&#39;t free <code>m</code> in <code>get_metadata()</code>, which should be done."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420732168, "post_id": 27824383, "comment_id": 44091876, "body": "Indeed, but this answer or code don&#39;t mention that. You should use, or at the very least mention, <code>av_dict_free()</code>."}], "tags": [], "owner": {"reputation": 941, "user_id": 1020897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6501792042c1bcbd97ac0e0478615f6d?s=128&d=identicon&r=PG", "display_name": "linkdd", "link": "https://stackoverflow.com/users/1020897/linkdd"}, "is_accepted": true, "score": 3, "last_activity_date": 1420733166, "last_edit_date": 1420733166, "creation_date": 1420649410, "answer_id": 27824383, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption/27824383#27824383", "title": "Returning struct from function causes memory corruption", "body": "<p>Actually, in your <code>get_p_metadata()</code> you have an argument <code>AVDictionary *metadata</code>.</p>\n\n<p>You can consider it as a local variable in <code>get_p_metadata()</code>.\nSo, <code>&amp;metadata</code> will refer to the local variable, and not your <code>m</code> variable in <code>get_metadata()</code>.</p>\n\n<p>At the beginning of <code>get_p_metadata()</code>, <code>metadata</code> is set to the address of <code>m</code>, then you reset it to NULL.</p>\n\n<p>You should try the following :</p>\n\n<pre><code>int get_metadata (State **ps)\n{\n    AVDictionary *m = NULL;\n    get_p_metadata (ps, &amp;m);\n    av_dict_free (&amp;m);\n    return SUCCESS;\n}\n\nint get_p_metadata (State **ps, AVDictionary **metadata)\n{\n    /* ... */\n\n    av_dict_copy (metadata, state-&gt;pFormatCtx-&gt;metadata, 0);\n\n    /* ... */\n}\n</code></pre>\n\n<p>This way, <code>av_dict_copy()</code> will allocate memory for your <code>AVDictionary</code> if <code>*metadata</code> is <code>NULL</code>, which is its inital value now.</p>\n\n<p>Finally <code>av_dict_free()</code> will release the memory used by your dictionary.</p>\n"}], "owner": {"reputation": 3099, "user_id": 798160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UnviR.jpg?s=128&g=1", "display_name": "William Seemann", "link": "https://stackoverflow.com/users/798160/william-seemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 27824383, "answer_count": 6, "score": -1, "last_activity_date": 1420733166, "creation_date": 1420648543, "last_edit_date": 1420650173, "question_id": 27824113, "link": "https://stackoverflow.com/questions/27824113/returning-struct-from-function-causes-memory-corruption", "title": "Returning struct from function causes memory corruption", "body": "<p>I'm trying to return a FFmpeg AVDictionary struct from one function to another. I wrote the following two functions:</p>\n\n<pre><code>int get_p_metadata(State **ps, AVDictionary *metadata) {\n    printf(\"get_p_metadata\\n\");\n\n    State *state = *ps;\n\n    if (!state || !state-&gt;pFormatCtx) {\n        return FAILURE;\n    }\n\n    metadata = NULL;\n    av_dict_copy(&amp;metadata, state-&gt;pFormatCtx-&gt;metadata, 0);\n\n    printf(\"count in get_p_metadata %d\\n\", metadata-&gt;count);\n\n    return SUCCESS;\n}\n\nint get_metadata(State **ps) {\n    printf(\"get_metadata\\n\");\n\n    AVDictionary m;\n    get_p_metadata(ps, &amp;m);\n    printf(\"count in get_metadata %d\\n\", (&amp;m)-&gt;count);\n\n    return SUCCESS;\n}\n</code></pre>\n\n<p>The code compiles and runs however when I call the <code>get_metadata</code> function the generated output is:</p>\n\n<pre><code>count in get_p_metadata 12\ncount in get_metadata 2073109240\n</code></pre>\n\n<p>Can someone explain why the value of <code>count</code> changes from 12 to a random value every time I run this code? Why isn't the value of 12 retained once the <code>get_p_metadata</code> function returns? How would I fix this?</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>This solution worked (Thanks to Cornstalks for actually reading the FFmpeg documentation and \nlinkdd for the answer):</p>\n\n<pre><code>int get_p_metadata (State **ps, AVDictionary **metadata) {\n    printf(\"get_p_metadata\\n\");\n\n    State *state = *ps;\n\n    if (!state || !state-&gt;pFormatCtx) {\n        return FAILURE;\n    }\n\n    av_dict_copy(metadata, state-&gt;pFormatCtx-&gt;metadata, 0);\n\n    return SUCCESS;\n}\n\nint get_metadata(State **ps, AVDictionary *metadata) {\n    printf(\"get_metadata\\n\");\n\n    AVDictionary *m = NULL;\n    get_p_metadata (ps, &amp;m);\n    printf(\"count in get_metadata %d\\n\", m-&gt;count);\n\n    return SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "dll", "linker"], "comments": [{"owner": {"reputation": 12895, "user_id": 1881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33c1dcf29d614b9366ccc3e08ac793f?s=128&d=identicon&r=PG", "display_name": "Phillip", "link": "https://stackoverflow.com/users/1881610/phillip"}, "edited": false, "score": 0, "creation_date": 1421050022, "post_id": 27824102, "comment_id": 44195387, "body": "<a href=\"http://stackoverflow.com/a/3573527/1881610\">This post</a> answers most of your questions."}], "answers": [{"comments": [{"owner": {"reputation": 1340, "user_id": 3575426, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/feCzU.png?s=128&g=1", "display_name": "Youda008", "link": "https://stackoverflow.com/users/3575426/youda008"}, "edited": false, "score": 2, "creation_date": 1476816014, "post_id": 27899384, "comment_id": 67502809, "body": "where can i find more details about what exactly is contained in import library and how it works in link time, load time and run time?"}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1616524307, "post_id": 27899384, "comment_id": 118028085, "body": "Chen: &quot;The .dll doesn\u2019t contain all the information the linker needs&quot;... &quot; If I have a program (myprogram.c) that calls some C function <code>void someFunction(int)</code> defined in some dynamic library a.dll, wouldn&#39;t the compiler when compiling myprogram.c -&gt; myprogram.obj  generate some placeholder <code>someFunction</code> in myprogram.obj that would match a symbol in a.dll like it would if a.dll were a static library (a.lib) instead? Why can&#39;t dlls be linked directly like .lib or .obj files? Does the PE format just not support this?"}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1616525885, "post_id": 27899384, "comment_id": 118028823, "body": "Also, it seems like there are exported symbols in a dll file, if I do <code>dumpbin &#47;exports someDll.dll</code> I get a lot of entries, and it seems like the symbols (names) of the functions match up with the ones in the import library file; if the dll has this information, why do I still need a lib? Is VS just not programmed to load DLLs and parse this information?"}], "tags": [], "owner": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "is_accepted": true, "score": 17, "last_activity_date": 1580292644, "last_edit_date": 1580292644, "creation_date": 1421056961, "answer_id": 27899384, "question_id": 27824102, "link": "https://stackoverflow.com/questions/27824102/how-do-import-libraries-work-and-why-doesnt-mingw-need-them/27899384#27899384", "title": "How do import libraries work and why doesn&#39;t MinGW need them?", "body": "<p>It is possible to link to DLL without an import library as MinGW clearly demonstrates. Hence the question is why MSVC decided to omit this feature.</p>\n\n<p>The reasons are primarily historic.</p>\n\n<p>Back then in 1983 when Windows came around and DLLs were designed there were many toolchains (compilers, linkers) from different vendors. Going out asking the vendors to implement support for linking \"DLLs\" for a minority OS was clearly not an option.</p>\n\n<p>So they made a decision to write a tool to generate a library everyone and their dog could link against even if a linker had absolutely no idea about DLLs.</p>\n\n<p>Besides, import libraries offer some features that were vital 3 decades ago but are next to obsolete now. First is the ability to import a symbol by ordinal \u2014 i.e. DLL has an option to offer no names at all only a list of addresses; the ordinal is an index in this list. Made sence when the amount of RAM was severely limited.</p>\n\n<p>Second is the support for different name mangling schemes. Even in C there is a name mangling scheme, for instance FooBar may become _FooBar@4 (it depends on the platform and the calling convention). It made perfect sense for a DLL to export \"FooBar\" on every supported platform for consistency (and it makes the life of GetProcAddress() user easier). Import library implements the mapping from _FooBar@4 to FooBar.</p>\n\n<p>This is based on the blog (<a href=\"https://devblogs.microsoft.com/oldnewthing/20091013-00/?p=16403\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://devblogs.microsoft.com/oldnewthing/20091012-00/?p=16413\" rel=\"nofollow noreferrer\">2</a>) of  Raimond Chen, the man who was involved in Windows development from the very beginning.</p>\n"}], "owner": {"reputation": 1373, "user_id": 3012814, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/adc610ef7569a6cf322849d74eef8c6b?s=128&d=identicon&r=PG&f=1", "display_name": "Sebi2020", "link": "https://stackoverflow.com/users/3012814/sebi2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 4, "accepted_answer_id": 27899384, "answer_count": 1, "score": 14, "last_activity_date": 1580292644, "creation_date": 1420648492, "last_edit_date": 1421137357, "question_id": 27824102, "link": "https://stackoverflow.com/questions/27824102/how-do-import-libraries-work-and-why-doesnt-mingw-need-them", "title": "How do import libraries work and why doesn&#39;t MinGW need them?", "body": "<p>I looked at this page: <a href=\"http://msdn.microsoft.com/en-us/magazine/cc301805.aspx\" rel=\"noreferrer\">An In-Depth Look into the Win32 Portable Executable File Format</a></p>\n\n<p>It explains that the linker needs an import library because the compiler can't distinguish between normal function calls and API-function calls. But they say also that __declspec(dllimport) specifies a function call to be an API-Call so the linker links against <code>__imp_[<em>function-name</em>]</code>. <strong>But</strong> with this keyword the compiler should know that this is a call to an API-Function.</p>\n\n<p>Why does the linker still need an import library? The compiler could mark this symbol as imported by prepending <code>__imp_</code> to the function name and could make a call to a function pointer (which is an unresolved symbol yet) and the linker could replace this symbol (because it sees that this an API call) with the IAT entry's address.</p>\n\n<p>And why can the MinGW-linker use \"MinGW-DLLs\" directly but the Visual-Studio linker needs an import library?</p>\n\n<p>As I read the post some other questions were also raised. How does the \"dlltool (or linker)\" (whichever creates the import library) know the location of an IAT entry before linkage with the final executable has been done? I thought the IAT entries would be constructed at link-time with the final executable. The post said, that every API-Call has a fixed position in the IAT table, never-mind how many DLLs will be linked. I cannot imagine how that could be achieved. </p>\n"}, {"tags": ["c", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1420648672, "post_id": 27824027, "comment_id": 44054133, "body": "Those aren&#39;t UTF-8 characters in the string, or you could just print them directly. They&#39;re Unicode codepoints. Please keep your terminology straight."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1420648791, "post_id": 27824027, "comment_id": 44054196, "body": "@MarkRansom, no, he seems to have just the utf8 bytes encoded in his <code>uint32_t</code>"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1420648856, "post_id": 27824027, "comment_id": 44054238, "body": "There are so many terminology problems in the question that it&#39;s unclear what you&#39;re asking.  I can&#39;t tell if it&#39;s just a language problem or if there&#39;s a misunderstanding with regard to Unicode concepts like UTF-8, characters, etc."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420648885, "post_id": 27824027, "comment_id": 44054257, "body": "@JensGustedt No, the first character in his example is 0xD6, which is the codepoint for <code>&#214;</code>. I doubt it&#39;s a legitimate UTF-8 sequence."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1420648943, "post_id": 27824027, "comment_id": 44054290, "body": "@MarkRansom, ok, yes, so then (s)he is really confused."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420649012, "post_id": 27824027, "comment_id": 44054329, "body": "@JensGustedt Am I confused? Please could you tell me what I mixed?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420649130, "post_id": 27824027, "comment_id": 44054410, "body": "@idmean, you are taking unicode code points for utf8 encoding. this is not at all the same thing."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420649212, "post_id": 27824027, "comment_id": 44054460, "body": "@JensGustedt Oh yes, I see. UTF8 are only Unicode code points that are encoded into up to 4 bytes, aren&#39;t they?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420649297, "post_id": 27824027, "comment_id": 44054518, "body": "@idmean, sort of, there is really a non-trivial encoding procedure, which you probably don&#39;t want to code yourself. Just use the C library as of my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420649632, "post_id": 27824027, "comment_id": 44054734, "body": "Note operator precedence: cast beats shift.  <code>(char)wstr-&gt;characters[i] &gt;&gt; 8</code> --&gt; <code>((char)wstr-&gt;characters[i]) &gt;&gt; 8</code>.  Certain OP wants <code>(char) (wstr-&gt;characters[i] &gt;&gt; 8)</code>.  There are other issues too."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420649827, "post_id": 27824027, "comment_id": 44054838, "body": "@chux Thanks for pointing that out. What other issues do you mean?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420650278, "post_id": 27824027, "comment_id": 44055104, "body": "Other issues: &quot;0xD6, 0x73, 0x74, 0x65,...&quot; is certainly not UTF8, yet locale is <code>&quot;de_DE.UTF-8&quot;</code>.  Minor: why use <code>unsigned long length</code> instead of <code>size_t</code> or <code>unsigned</code>? Should use <code>wstr-&gt;length * sizeof(uint32_t) + 1</code> instead of <code>sizeof(char) * wstr-&gt;length * 4</code>.  <code>string</code> is not null character terminated."}], "answers": [{"comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1420649706, "post_id": 27824263, "comment_id": 44054773, "body": "According to <a href=\"http://en.wikipedia.org/wiki/Wide_character#Programming_specifics\" rel=\"nofollow noreferrer\">this</a> wchar_t can be as small as one byte. So it seems not perfect."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1420650412, "post_id": 27824263, "comment_id": 44055166, "body": "I can&#39;t see anything running <code>wchar_t l[11] = {0x1F330, 0xD6, 0x73, 0x74, 0x65, 0x72, 0x72, 0x65, 0x69, 0x63, 0x68}; printf(&quot;%ls\\n&quot;, l);</code> Did I again mix something?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1420650502, "post_id": 27824263, "comment_id": 44055234, "body": "did you set the locale to something utf8? The C (default) locale wouldn&#39;t handle these characters."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1420650567, "post_id": 27824263, "comment_id": 44055274, "body": "I tried with and without <code>setlocale(LC_CTYPE,&quot;de_DE.UTF-8&quot;);</code>"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1420650567, "post_id": 27824263, "comment_id": 44055275, "body": "And no, on any reasonable platforms <code>wchar_t</code> is at least 16 bit nowadays. Don&#39;t reinvent the wheel."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 1, "creation_date": 1420650712, "post_id": 27824263, "comment_id": 44055363, "body": "also you forgot the <code>0</code> character at the endof your string. An alternative would just be to use a normal string <code>char s[] = &quot;&#214;stereich&quot;</code> should work out of the box if you are using the correct locale."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1420650797, "post_id": 27824263, "comment_id": 44055417, "body": "Ah yes, it was just the 0 character. Thanks. I can&#39;t use a char array for good reasons."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420668691, "post_id": 27824263, "comment_id": 44065089, "body": "<code>wchar_t</code> is 16-bit on some platforms, like Windows, and thus can be used for UTF-16 encoding, whereas it is 32bit on other platforms, and thus can be used for UTF-32 encoding instead. You have to take encoding into account when converting <code>uint32_t</code> values (which are presumably holding raw Unicode codepoints) to <code>wchar_t</code> strings (which must be UTF encoded). This discrepancy is why modern C++ now has standard <code>char16_t</code> (UTF-16) and <code>char32_t</code> (UTF-32) types. Best to use an existing Unicode library, if not native C++ functionality."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420670215, "post_id": 27824263, "comment_id": 44065778, "body": "@RemyLebeau, I know, but the use of code points outside the 16 bit range is extremely rare. For most everyday coding needs <code>wchar_t</code> is completely sufficient. BTW, C11 has the same new 16 bit and 32 character types. Unfortunately there does not come much functionality with it, so they are mainly useless."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1420673743, "post_id": 27824263, "comment_id": 44067133, "body": "@JensGustedt: Rare, but not impossible. The SMP plane in particular (U+10000 \u2013\u200b U+1FFFF) contains some useful codepoints, like musical and mathematical symbols, and emoji symbols (which are gaining popularity in chat/IM systems). Clearly those do not fit in 16bits without the use of UTF-16 surrogates."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1420650809, "last_edit_date": 1420650809, "creation_date": 1420649039, "answer_id": 27824263, "question_id": 27824027, "link": "https://stackoverflow.com/questions/27824027/print-unicode-characters-by-code/27824263#27824263", "title": "Print Unicode characters by code", "body": "<p>Theses just seem to be unicode code points. Store them in a <code>wchar_t</code> string, one by one, and then print this with</p>\n\n<pre><code>printf(\"%ls\\n\", wstring);\n</code></pre>\n\n<p>You'd have to set the locale right at the start of your program to the default of the system:</p>\n\n<pre><code>set_locale(LC_ALL, \"\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420818642, "post_id": 27862722, "comment_id": 44130792, "body": "No, it only seems so. In exactly the case that <code>wchar_t</code> is only 16 bit this will explode under your feet. A platform that has 16 bit <code>wchar_t</code> simply can&#39;t handle Emojis and stuff like that."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420818861, "post_id": 27862722, "comment_id": 44130944, "body": "@JensGustedt Yes, I&#39;m aware of that. But I&#39;ll stick to <code>uint32_t</code> because a lot of the other code used in the project is already using <code>uint32_t</code>. Even on a system on which I can&#39;t print using the above method, I&#39;ll be at least able to do the other comparisons I need to do. (The unicode code points for emojis are <i>very</i> important)"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420819378, "post_id": 27862722, "comment_id": 44131288, "body": "But then be sure to buildin something that inhibits compilation on a machine with 16 bit <code>wchar_t</code>. Just passing the wrong pointer type to <code>printf</code> is a time bomb."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420819513, "post_id": 27862722, "comment_id": 44131389, "body": "@JensGustedt Thanks for the adivce. I planned to do something like this."}], "tags": [], "owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "is_accepted": true, "score": 1, "last_activity_date": 1420819568, "last_edit_date": 1420819568, "creation_date": 1420813568, "answer_id": 27862722, "question_id": 27824027, "link": "https://stackoverflow.com/questions/27824027/print-unicode-characters-by-code/27862722#27862722", "title": "Print Unicode characters by code", "body": "<p>Jens Gustedt's answer was a point into the right direction but I keep using <code>uint32_t</code>, because I need to support Unicode's Emojis and <code>wchar_t</code> can be too small for those. (as said above by Remy Lebeau)</p>\n\n<p>This seems to be working perfectly fine:</p>\n\n<pre><code>setlocale(LC_CTYPE,\"de_DE.UTF-8\");\nprintf(\"%ls\\n\", string-&gt;characters);\n</code></pre>\n"}], "owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3411, "favorite_count": 0, "accepted_answer_id": 27862722, "answer_count": 2, "score": 0, "last_activity_date": 1420819568, "creation_date": 1420648241, "last_edit_date": 1495540674, "question_id": 27824027, "link": "https://stackoverflow.com/questions/27824027/print-unicode-characters-by-code", "title": "Print Unicode characters by code", "body": "<p>I have an array of <code>uint32_t</code>. Each is value representing a Unicode characters. I want to print the array like a string but I'm not able to get that working.</p>\n\n<p>I tried a lot of different things</p>\n\n<pre><code>typedef struct String {\n    uint32_t *characters;\n    unsigned long length;\n} WRString;\n\nchar* WRStringToString(WRString *wstr){\n    char *string = malloc(sizeof(char) * wstr-&gt;length * 4);\n    int i = 0;\n    int j = 0;\n    for (; i &lt; wstr-&gt;length; i++) {\n        string[j++] = wstr-&gt;characters[i];\n\n        char byte2 = (char)wstr-&gt;characters[i] &gt;&gt; 8;\n        if (byte2) {\n            string[j++] = byte2;\n\n            char byte3 = (char)wstr-&gt;characters[i] &gt;&gt; 16;\n            if (byte3) {\n                string[j++] = byte3;\n\n                char byte4 = (char)wstr-&gt;characters[i] &gt;&gt; 24;\n                if (byte4) {\n                    string[j++] = byte4;\n                }\n            }\n        }\n    }\n    return string;\n}\n</code></pre>\n\n<p>Always with   </p>\n\n<pre><code>WRString *string; //Characters are 0xD6, 0x73, 0x74, 0x65, 0x72, 0x72, 0x65, 0x69, 0x63, 0x68     \n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>setlocale(LC_CTYPE,\"de_DE.UTF-8\");\nputs(WRStringToString(string));\n</code></pre>\n\n<p>Gives <code>\\326\\377\\377\\377sterreich</code>.</p>\n\n<pre><code>wprintf(L\"%s\",WRStringToString(string));\n</code></pre>\n\n<p>Gives the same as long as no local is set.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15528359/printing-utf-8-strings-with-printf-wide-vs-multibyte-string-literals\">Printing UTF-8 strings with printf - wide vs. multibyte string literals</a> and <a href=\"https://stackoverflow.com/questions/12017342/printing-unicode-character-stored-in-variables-in-c\">Printing Unicode Character (stored in variables) in C</a> do not really help me.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420646574, "post_id": 27823386, "comment_id": 44052739, "body": "Have the file opening functions return the <code>FILE *</code> that they open; capture the return result in <code>main()</code> and pass to other functions as needed.  Fix the code in <code>open_file1()</code> so it doesn&#39;t rely on accessing an uninitialized array.  Rinse, repeat."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1420647744, "last_edit_date": 1420647744, "creation_date": 1420646858, "answer_id": 27823565, "question_id": 27823386, "link": "https://stackoverflow.com/questions/27823386/i-need-to-make-global-variables-used-in-many-functions-local-one/27823565#27823565", "title": "I need to make global variables used in many functions local one", "body": "<p>CHeck the code below</p>\n\n<pre><code>FILE *open_file1();   \n\n    int main()\n        {\n         FILE *fin=NULL;  \n         FILE *fout=NULL;  \n\n         fin = open_file1();\n         // Rest of your code\n         return 0;\n        }\n\n        FILE *open_file1()\n        {\n        FILE *fp=NULL;\n        // open the file and \n\n        return fp;\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5834, "user_id": 2752520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6CORJ.jpg?s=128&g=1", "display_name": "Nelson Teixeira", "link": "https://stackoverflow.com/users/2752520/nelson-teixeira"}, "edited": false, "score": 0, "creation_date": 1420647476, "post_id": 27823705, "comment_id": 44053335, "body": "it&#39;s not a local variable is a local POINTER. It&#39;passing the address back. No problem with that."}, {"owner": {"reputation": 5834, "user_id": 2752520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6CORJ.jpg?s=128&g=1", "display_name": "Nelson Teixeira", "link": "https://stackoverflow.com/users/2752520/nelson-teixeira"}, "edited": false, "score": 0, "creation_date": 1420647778, "post_id": 27823705, "comment_id": 44053548, "body": "this is a better solution than mine."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1420647285, "creation_date": 1420647285, "answer_id": 27823705, "question_id": 27823386, "link": "https://stackoverflow.com/questions/27823386/i-need-to-make-global-variables-used-in-many-functions-local-one/27823705#27823705", "title": "I need to make global variables used in many functions local one", "body": "<p>Change </p>\n\n<pre><code>void open_file1();  \nvoid open_file2();  \n</code></pre>\n\n<p>to open the files and return the corresponding <code>FILE*</code>.</p>\n\n<pre><code>FILE* open_file1();  \nFILE* open_file2();  \n</code></pre>\n\n<p>Then, change their implementation to:</p>\n\n<pre><code>FILE* open_file1()\n{\n   FILE* fin = NULL;\n   char file1[100];\n   while (file1[strlen(file1) - 1] != 'c'&amp;&amp;file1[strlen(file1) - 2] != '.')\n   {\n      printf(\"Please enter file to read from. ?ust be C file: \");\n      scanf(\"%s\", file1);\n   }\n   fin = fopen(file1, \"r\");\n   if (fin == NULL)\n   {\n      printf(\"There is no such file or directory\\n\");\n   }\n   return fin;\n}\n</code></pre>\n\n<p>Make similar changes to <code>open_file2</code>.</p>\n\n<p>Then, change the way they are used.</p>\n\n<p>Instead of </p>\n\n<pre><code>    open_file1();\n    open_file2();\n</code></pre>\n\n<p>use</p>\n\n<pre><code>    fin = open_file1();\n    fout = open_file2();\n</code></pre>\n\n<p>Make sure to:</p>\n\n<ol>\n<li>declare <code>fin</code> and <code>fout</code> at the top of <code>main</code>.</li>\n<li>pass them to the functoins that access the global variables.</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 4429417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5035c0daab70fefe7fbd3bf6863c91a6?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/4429417/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 27823705, "answer_count": 2, "score": -5, "last_activity_date": 1420647744, "creation_date": 1420646323, "last_edit_date": 1420646629, "question_id": 27823386, "link": "https://stackoverflow.com/questions/27823386/i-need-to-make-global-variables-used-in-many-functions-local-one", "title": "I need to make global variables used in many functions local one", "body": "<p>So I,ve written a program which counts for,while,do/while and emty lines. Can anyone help me make FILE *fin and FILE *fout local variables. It turned out that i cant use global ones and now I am stuck. Here is the code:                                       </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nFILE *fin;  \nFILE *fout;  \nvoid stats();  \nvoid open_file1();  \nvoid open_file2();  \nint main()  \n{\n\n\nchar menu = 0;\nprintf(\"1.Read from file and write stats to another\\n\\n\");\nprintf(\"2.Read from file and write stats to screen\\n\\n\");\nprintf(\"3.Read from keyboard and write to file\\n\\n\");\nprintf(\"4.Read from keyboard and write to display\\n\\n\");\nprintf(\"5.Exit\\n\\n\");\ndo\n{\n\n    printf(\"Choose an option from 1-5: \");\n    fflush(stdin);\n    scanf(\"%c\", &amp;menu);\n    printf(\"\\n\");\n\n    switch (menu)\n    {\n    case '1':\n        open_file1();\n        open_file2();\n        stats(fin, fout);\n        fclose(fin);\n        fclose(fout);\n        break;\n    case '2':\n        open_file1();\n        stats(fin, stdout);\n        fclose(fin);\n        break;\n    case '3':\n        open_file2();\n        printf(\"Enter text:\\n\");\n        stats(stdin, fout);\n        fclose(fout);\n        break;\n    case '4':\n        printf(\"Enter text\\n\");\n        stats(stdin, stdout);\n        break;\n    default:\n        if (menu != '5')\n            printf(\"Invalid.\");\n        break;\n    }\n} while (menu != '5');\nreturn 0;\n}\nvoid stats(FILE *fin, FILE *fout)\n{\n\nchar string[1000];\nint count = 0, fcount = 0, wcount = 0, dcount = 0, empty = 0;\n\n\nwhile (fgets(string, 10000, fin) != NULL)\n{\n    unsigned int i;\n    for (i = 0; i &lt; strlen(string); i++)\n    {\n\n        if ((string[i] == '\"'))\n        {\n            while (string[i += 1] != '\"')\n                continue;\n        }\n\n        if ((string[i] == '/') &amp;&amp; (string[i + 1] == '*'))\n        {\n            while (string[i += 1])\n                continue;\n        }\n\n        if ((string[i] == '/') &amp;&amp; (string[i + 1] == '/'))\n        {\n            while (string[i += 1] != '\\n')\n                continue;\n        }\n\n\n        if (string[i] == 'f' &amp;&amp; string[i + 1] == 'o'&amp;&amp; string[i + 2] == 'r'&amp;&amp; string[i + 3] != '*') fcount++;\n        if (string[i] == 'w' &amp;&amp; string[i + 1] == 'h' &amp;&amp; string[i + 2] == 'i' &amp;&amp; string[i + 3] == 'l'&amp;&amp; string[i + 4] == 'e'&amp;&amp; string[i + 5] != '*') wcount++;\n        if (string[i] == 'd' &amp;&amp; string[i + 1] == 'o'&amp;&amp; string[i + 2] != '*')  dcount++;\n    }\n\n    for (i = 0; i &lt; strlen(string); i++)\n    {\n        if (string[i] != ' ' &amp;&amp; string[i] != '\\n'&amp;&amp; string[i] != '\\t')\n        {\n            count = 0;\n            break;\n        }\n        count = 1;\n    }\n    if (count == 1)\n        empty++;\n\n}\n\nfprintf(fout, \" for %d ,while %d \u0438 do/while %d\\n\", fcount, wcount = wcount - dcount, dcount);\nfprintf(fout, \"The number of emtpy line is: %d\\n\", empty);\n\n}\n\n\nvoid open_file1()\n{\n\nchar file1[100];\nwhile (file1[strlen(file1) - 1] != 'c'&amp;&amp;file1[strlen(file1) - 2] != '.')\n{\n    printf(\"Please enter file to read from. \u041cust be C file: \");\n    scanf(\"%s\", file1);\n}\nfin = fopen(file1, \"r\");\nif (fin == NULL)\n{\n    printf(\"There is no such file or directory\\n\");\n    open_file1();\n}\n}\n\nvoid open_file2()\n{\n\nchar file2[100];\nprintf(\"Enter file to write in: \");\nscanf(\"%s\", file2);\n\nfout = fopen(file2, \"w\");\nif (fout == NULL)\n{\n    printf(\"There is no such file or directory\\n\");\n    open_file2();\n}\n}\n</code></pre>\n"}, {"tags": ["c", "nested", "structure"], "comments": [{"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1420646455, "post_id": 27823364, "comment_id": 44052642, "body": "Why don&#39;t you show us your attempt?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1420646766, "post_id": 27823364, "comment_id": 44052854, "body": "You can&#39;t nest (or redefine) the same struct <i>type</i>, but you can certainly have a member with the same name."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1420647041, "last_edit_date": 1420647041, "creation_date": 1420646452, "answer_id": 27823426, "question_id": 27823364, "link": "https://stackoverflow.com/questions/27823364/nested-structure-with-the-same-name-in-c/27823426#27823426", "title": "Nested structure with the same name in C", "body": "<pre><code>struct a\n{\n    int foo;\n};\n\nstruct c\n{\n    int d;\n    struct a foo;\n};\n\nint main(void) \n{\n    struct c foo;\n\n    foo.foo.foo = 2;\n    printf(\"%d\\n\",foo.foo.foo);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1420647578, "creation_date": 1420647578, "answer_id": 27823803, "question_id": 27823364, "link": "https://stackoverflow.com/questions/27823364/nested-structure-with-the-same-name-in-c/27823803#27823803", "title": "Nested structure with the same name in C", "body": "<p>For example you can do that the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct foo\n{\n    struct\n    {\n        int foo;\n    } foo;\n} t_foo;\n\n\nint main(void) \n{\n    t_foo foo;\n    foo.foo.foo = 0;\n\n    printf( \"%d\\n\", foo.foo.foo );\n\n    return 0;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n    struct foo\n    {\n        int foo;\n    } foo;\n} t_foo;\n\n\nint main(void) \n{\n    t_foo foo;\n    foo.foo.foo = 0;\n\n    printf( \"%d\\n\", foo.foo.foo );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3642430, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/711a7bac3d55373278c213b4c43de1ce?s=128&d=identicon&r=PG&f=1", "display_name": "03t02", "link": "https://stackoverflow.com/users/3642430/03t02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1420647578, "creation_date": 1420646263, "last_edit_date": 1420646391, "question_id": 27823364, "link": "https://stackoverflow.com/questions/27823364/nested-structure-with-the-same-name-in-c", "title": "Nested structure with the same name in C", "body": "<p>I have a exercice that I have to realise a structure to match this line in C</p>\n\n<pre><code>int main() {\n     t_foo foo;\n     foo.foo.foo = 0;\n     return (0);\n}\n</code></pre>\n\n<p>I tried to create a nested structure, but I can't create with a same name. Have you an idea ?</p>\n"}, {"tags": ["c", "oop", "gtk", "gobject"], "comments": [{"owner": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "edited": false, "score": 0, "creation_date": 1420646831, "post_id": 27823299, "comment_id": 44052907, "body": "Not all of those concepts map neatly to glib.   It&#39;s not really a full OOP facility, but rather a type system that has some object-like features thrown in.    There isn&#39;t real inheritence like you expect - only COM-esque interface facades.  &quot;methods&quot; by convention are just function members of the struct/class that take the target object as a first arg, there is no special syntax or sugar for calling them.   object-&gt;obj_method(obj,...);  There is RTTI though, see <a href=\"https://developer.gnome.org/gobject/stable/gobject-Type-Information.html\" rel=\"nofollow noreferrer\">developer.gnome.org/gobject/stable/&hellip;</a>"}, {"owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "edited": false, "score": 0, "creation_date": 1420647067, "post_id": 27823299, "comment_id": 44053063, "body": "I don&#39;t think you will find much documentation on the matter, but I hope I will be disproved :) Anyway, maybe this question could be turned into a wiki sooner or later."}], "answers": [{"comments": [{"owner": {"reputation": 4385, "user_id": 24937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/322909928165a193e16c12fd6cfad8ce?s=128&d=identicon&r=PG", "display_name": "edgar.holleis", "link": "https://stackoverflow.com/users/24937/edgar-holleis"}, "edited": false, "score": 0, "creation_date": 1420726178, "post_id": 27824570, "comment_id": 44087813, "body": "Thank you for the detailed explanation. I wish this text somehow found its way into the GObject manual."}, {"owner": {"reputation": 4385, "user_id": 24937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/322909928165a193e16c12fd6cfad8ce?s=128&d=identicon&r=PG", "display_name": "edgar.holleis", "link": "https://stackoverflow.com/users/24937/edgar-holleis"}, "edited": false, "score": 0, "creation_date": 1420727061, "post_id": 27824570, "comment_id": 44088404, "body": "I filed an enhancement request to bugzilla: <a href=\"https://bugzilla.gnome.org/show_bug.cgi?id=742587\" rel=\"nofollow noreferrer\">bugzilla.gnome.org/show_bug.cgi?id=742587</a>"}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 3, "last_activity_date": 1499332262, "last_edit_date": 1499332262, "creation_date": 1420649951, "answer_id": 27824570, "question_id": 27823299, "link": "https://stackoverflow.com/questions/27823299/gobject-oop-syntax/27824570#27824570", "title": "GObject OOP Syntax", "body": "<p><strong>This answer assumes you are working with C. Other (usually object-oriented) languages have special bindings built to make working with GObject seem more natural.</strong></p>\n\n<p>If you've worked with GTK+, you already have done much of that list.</p>\n\n<p>GObject methods are not members themselves (there is a vtable of sorts but it's only used for assigning virtual method implementations in a derived class when the class is first created). Instead, all methods in GObject are just plain functions, usually(?) prefixed by a method name prefix, and with the <code>this</code> pointer as the first argument.</p>\n\n<p>For example, the C++ method</p>\n\n<pre><code>namespace Lib { // short for Library; to demonstrate GObject's idiomatic naming conventions\n    class Foo {\n    public:\n        void Bar(int z);\n    };\n}\n</code></pre>\n\n<p>would be a plain function in the global namespace declared as</p>\n\n<pre><code>void lib_foo_bar(LibFoo *foo, int z);\n</code></pre>\n\n<p>and you would call it directly, just like any other C function.</p>\n\n<p>Class derivation in GObject occurs by having the full data structure of the parent class as the first member of the derived class's data structure. For various reasons pertaining to rarely-discussed clauses in the C standard (and possibly the System V ABI and implementation of gcc, clang, and even the Microsoft C compilers), this means that a pointer to an object of the derived class is equivalent to a pointer to the parent class!</p>\n\n<p>So if <code>LibBaz</code> derives from <code>LibFoo</code>, all you would need to say is</p>\n\n<pre><code>LibFoo *foobaz = (LibFoo *) baz;\n</code></pre>\n\n<p>and the same applies in reverse:</p>\n\n<pre><code>LibBaz *bazfoo = (LibBaz *) foo;\n</code></pre>\n\n<p>(This latter approach is what GTK+ uses for <code>GtkWidget</code>; I don't know if other GObject libraries do the same thing.)</p>\n\n<p>Idiomatic GObject declarations include a bunch of macros that make the type conversions more terse while at the same time adding runtime type safety checks. Our <code>LibFoo</code> class would have the following macros:</p>\n\n<pre><code>#define LIB_TYPE_FOO (lib_foo_get_type())\n#define LIB_FOO(obj) (G_TYPE_CHECK_INSTANCE_CAST((obj), LIB_TYPE_FOO, LibFoo))\n</code></pre>\n\n<p>With this, we would instead say</p>\n\n<pre><code>LibFoo *foobaz = LIB_FOO(baz);\nLibBaz *bazfoo = LIB_BAZ(foo);\n</code></pre>\n\n<p>and if either <code>baz</code> or <code>foo</code> isn't the correct type for the conversion, a warning will be logged to standard error, which you can break at and investigate using a debugger.</p>\n\n<p>(The <code>lib_foo_get_type()</code> function (and <code>LIB_TYPE_FOO</code> neatness macro) is important: it returns a numeric ID that maps to the type of <code>LibFoo</code> for future reference. If <code>LibFoo</code> doesn't have such a mapping, it will create the mapping, registering the type and creating the virtual method mappings.)</p>\n\n<p>A similar macro allows type checking:</p>\n\n<pre><code>#define LIB_IS_FOO(obj) (G_TYPE_CHECK_INSTANCE_TYPE((obj), LIB_TYPE_FOO))\n</code></pre>\n\n<p>which is a simple expression that can be used in an <code>if</code> statement.</p>\n\n<p>So what about calling parent class methods? Well, if we put all of the above together, we have the answer:</p>\n\n<pre><code>lib_foo_parent_method(LIB_FOO(aLibBazInstance), params);\n</code></pre>\n\n<p>The same applies to virtual methods. Virtual methods are implemented using the GObject approximation to vtables and are transparent to the end programmer. All you will do is</p>\n\n<pre><code>lib_foo_virtual_method(LIB_FOO(whatever), params);\n</code></pre>\n\n<p>(If you actually build the derived class itself, the <em>how</em> of virtual methods becomes important.)</p>\n\n<p>There are no static methods in GObject, because methods aren't tied to a class as closely as they are in real object-oriented languages. Just create a top-level method in your library:</p>\n\n<pre><code>void lib_something_common(params);\n</code></pre>\n\n<p>Finally, all of the above applies to interfaces. Interfaces work the exact same way to the end user; they use the same</p>\n\n<pre><code>void lib_iface_method(LibIface *iface, params);\n</code></pre>\n\n<p>approach to method calling, the same casting rules, and the same <code>LIB_IFACE()</code> and <code>LIB_IS_IFACE()</code> helper macros.</p>\n\n<p>Hopefully that helps! Any further explanation would have to tread into explaining how to create a GObject, which I tried to keep outside the scope of this answer for simplicity's sake, but is a useful thing to know anyway.</p>\n"}], "owner": {"reputation": 4385, "user_id": 24937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/322909928165a193e16c12fd6cfad8ce?s=128&d=identicon&r=PG", "display_name": "edgar.holleis", "link": "https://stackoverflow.com/users/24937/edgar-holleis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 27824570, "answer_count": 1, "score": 3, "last_activity_date": 1499332262, "creation_date": 1420646045, "last_edit_date": 1420726287, "question_id": 27823299, "link": "https://stackoverflow.com/questions/27823299/gobject-oop-syntax", "title": "GObject OOP Syntax", "body": "<p>I'm looking for a GObject cheat sheet, how common OOP concepts map to GObject's facilities. Consider for example:</p>\n\n<pre><code>AnyGObject *o;\no = anygobject_new();\n</code></pre>\n\n<p>Now, what are the conventions for...</p>\n\n<ul>\n<li>calling a method</li>\n<li>calling a method declared by a base class</li>\n<li>calling a method declared by an interface the class is implementing</li>\n<li>calling a class method</li>\n<li>calling a class method declared by a base class</li>\n<li>calling a virtual method</li>\n<li>casting to a base class</li>\n<li>casting to a derived class</li>\n<li>casting to an interface the class is implementing</li>\n<li>testing whether an object is of a particular type</li>\n<li>...</li>\n</ul>\n\n<p>Clarification:\nThe <a href=\"https://developer.gnome.org/gobject/stable/gtype-conventions.html\" rel=\"nofollow\">GObject Reference Manual</a> and <a href=\"https://developer.gnome.org/gobject/stable/howto-gobject.html\" rel=\"nofollow\">GObject HowTo</a> explain at length how to create a new class (class struct, object struct, private struct, various macros, conventions). Taken together these facilities allow for OOP. Yet there seems to be no tutorial on how to use them consistently.</p>\n"}, {"tags": ["c", "sockets", "client-server", "fork"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420644628, "post_id": 27822714, "comment_id": 44051367, "body": "<code>read(msgsock,data2,sizeof(data))</code> looks suspicious, don&#39;t you mean <code>sizeof(data2)</code>?"}, {"owner": {"reputation": 2113, "user_id": 2091951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c73025ff1e72f37a132f63a4e4e61f86?s=128&d=identicon&r=PG", "display_name": "Denise Skidmore", "link": "https://stackoverflow.com/users/2091951/denise-skidmore"}, "edited": false, "score": 0, "creation_date": 1420644631, "post_id": 27822714, "comment_id": 44051370, "body": "What is the point of <code>if (pid == 0)</code> if you want this to run on both forks?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420644722, "post_id": 27822714, "comment_id": 44051442, "body": "As for your problem, you might want to use threads instead? Or shared memory?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420644856, "post_id": 27822714, "comment_id": 44051539, "body": "I think you should not use <code>exit(0)</code> but <code>_exit(0)</code> instead."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1420645703, "post_id": 27822714, "comment_id": 44052187, "body": "If you want to share stuff consider not using the fork model. It is obsolete by today&#39;s standards."}, {"owner": {"reputation": 11, "user_id": 4429315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf405a009c431921e2ca171a0ac56c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Legolas97", "link": "https://stackoverflow.com/users/4429315/legolas97"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420645723, "post_id": 27822714, "comment_id": 44052196, "body": "@JoachimPileborg yes, it&#39;s <code>sizeof(data2)</code>. It is an exercise, I cannot use shared memory and I dont&#39; know nothing about threads, maybe I can use semaphores, if there is no way to solve it using only <code>fork()</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420645904, "post_id": 27822714, "comment_id": 44052315, "body": "Do you <i>have</i> to use <code>fork</code>? Or could you do it in a single process and use e.g. <code>select</code> to multiplex the sockets? The problem is that you can&#39;t share data between processes, not without using e.g. shared memory or similar."}, {"owner": {"reputation": 11, "user_id": 4429315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf405a009c431921e2ca171a0ac56c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Legolas97", "link": "https://stackoverflow.com/users/4429315/legolas97"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420646129, "post_id": 27822714, "comment_id": 44052451, "body": "@JoachimPileborg I must not use shared memory or messages queue, I can only use sockets and signals (and semaphores, if they can be useful)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420646421, "post_id": 27822714, "comment_id": 44052622, "body": "If can have only two connected clients, and it&#39;s only the single <code>data[2]</code> entry that is significant, you can use signals (e.g. the <code>SIGUSR1</code> and/or the <code>SIGUSR2</code>) to communicate the status of <code>data[2]</code> between the processes. However, you probably have to use the parent process to act as an intermediate between the child processes, as they will not know about each other (well, the second child process knows the pid of the first child process, but not the opposite)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420646443, "post_id": 27822714, "comment_id": 44052638, "body": "You can also use a socket to communicate between the child processes."}, {"owner": {"reputation": 11, "user_id": 4429315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf405a009c431921e2ca171a0ac56c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Legolas97", "link": "https://stackoverflow.com/users/4429315/legolas97"}, "edited": false, "score": 0, "creation_date": 1420647164, "post_id": 27822714, "comment_id": 44053140, "body": "You mean something like &quot;if <code>data[2]==1</code> send <code>SIGUSR1</code>, If <code>data[2]==2</code> send <code>SIGUSR2</code>&quot;? And how can I use the parent as an intermediate? Not sure if I am able to do so, do you know some similar examples, around the web?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4429315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf405a009c431921e2ca171a0ac56c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Legolas97", "link": "https://stackoverflow.com/users/4429315/legolas97"}, "edited": false, "score": 0, "creation_date": 1420813311, "post_id": 27824254, "comment_id": 44127248, "body": "The exercise does not require using <code>fork</code>, it requires only the use of sockets (and semaphores) and <b>not</b> shared memory or message queues. My problem is that I don&#39;t know  how to handle 2 or more clients at the same time, sharing between them the <b>same</b> array. Using <code>fork</code> is only an idea I had."}], "tags": [], "owner": {"reputation": 123, "user_id": 2043481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac913bbac49b13d835c59e0d4c9257f6?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2043481/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1420649006, "creation_date": 1420649006, "answer_id": 27824254, "question_id": 27822714, "link": "https://stackoverflow.com/questions/27822714/server-with-multiple-clients-using-fork/27824254#27824254", "title": "Server with multiple clients using fork()", "body": "<p>On forking, you create a second process that is a clone of the original one. This means that all data structures in your process will be duplicated. If you modify them in one process afterwards, these changes will not be seen in the other process. So sharing information between the two forked off client handlers will not work by simply writing values to an array. You might use shared memory for this, but using threads or switching to nonblocking I/O might be a better choice in your case. If your exercise requires using <code>fork</code>, you could use sockets or pipes to help the forked processes communicate, but that seems rather complicated.</p>\n\n<p>You also should know that by default, on <code>fork()</code>, you duplicate all file descriptors. That means on the first fork, both of the socket descriptors are cloned. Your child process, which you want to use for handling the client, will have a handle to the listening socket which it doesn't need. The parent likewise will have an open descriptor for the client connection. Close <code>sock</code> in your child and <code>msgsock</code> in your parent (else part, when pid != 0). Also, you should clean up finished child processes in the parent by calling e.g. <code>wait()</code> on <code>SIGCHLD</code>, otherwise you'd pile up zombie processes every time a client disconnects. </p>\n\n<p>Finally, it is advisable to handle return values &lt; 0 for <code>accept()/read()/write()</code> properly by checking <code>errno</code>. You might just be getting <code>EAGAIN</code> or <code>EINTR</code> which basically means \"retry the same call\", but instead you bail out (accept), or simply advance to the next statement (read/write). If your protocol requires the alternation of read, write, read, write, one of them might fail due to a signal and you skip over it. So it is possible you're doing another read without a write in between, but the connected client really expects some data, waiting forever, never sending anything back.</p>\n"}], "owner": {"reputation": 11, "user_id": 4429315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf405a009c431921e2ca171a0ac56c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Legolas97", "link": "https://stackoverflow.com/users/4429315/legolas97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3687, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420813583, "creation_date": 1420644364, "last_edit_date": 1420813583, "question_id": 27822714, "link": "https://stackoverflow.com/questions/27822714/server-with-multiple-clients-using-fork", "title": "Server with multiple clients using fork()", "body": "<p>This is my scenario: my server should handle two clients at the same time using sockets and <code>fork()</code>. Server shares with both clients the <strong>same</strong> int array <code>data[]</code> , obtained randomly. If <code>data[2]</code> is a precise number, client1 does its stuff and resend its work to server, else client2 does its stuff ecc.. This continues in an infinite loop, till a server side CTRL+C signal.\nI think my problem is in this server snippet I wrote so far:</p>\n\n<pre><code>//...\nwhile (1) {\n  printf(\"\\n*****server waiting for new client connection:*****\\n\");\n\n  msgsock=accept(sock,(struct sockaddr *)&amp;client,(socklen_t *)&amp;lenght);\n  if(msgsock == -1){\n    perror(\"accept\");\n    exit(-1);}\n  pid = fork();\n  if (pid == 0){\n    do{\n      srand((unsigned) time(&amp;t));\n      data[0] = rand() %15;\n      data[1] = rand() %10;\n      data[2] = rand() %2;\n      printf(\"I wrote %d %d %d\\n\", data[0], data[1], data[2]);\n      if(write(msgsock,data,sizeof(data))&lt;0){\n        perror(\"writing message\");}\n      if(read(msgsock,data2,sizeof(data))&lt;0){ //read the result from client\n        perror(\"reading message\");}\n      printf(\"Result is %d\\n\", data2[3]);} \n      while(1);\n    exit(0);}\n</code></pre>\n\n<p>This works for one client at a time, as soon as I run the second client, it creates a new child and only handles the newer client. I want that both clients are served, depending on the content of <code>data[2]</code> at every loop.\nThanks in advance.</p>\n\n<p><strong>EDIT:</strong>\nI can't use shared memory or similars and threads, only sockets and semaphores. The use of <code>fork</code> is only an idea I had trying to solve the exercise.</p>\n"}, {"tags": ["c", "debugging"], "comments": [{"owner": {"reputation": 2256, "user_id": 1272233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07cc66e13f0eb3901c15c9580aa1a78b?s=128&d=identicon&r=PG", "display_name": "Doval", "link": "https://stackoverflow.com/users/1272233/doval"}, "edited": false, "score": 5, "creation_date": 1420643962, "post_id": 27822762, "comment_id": 44051262, "body": "Read <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. While you&#39;re at it, find the documentation for <code>printf</code> and <code>scanf</code>. If you don&#39;t understand how they work, you probably won&#39;t figure out what&#39;s wrong."}, {"owner": {"reputation": 33, "user_id": 3934348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cPVDv.jpg?s=128&g=1", "display_name": "Akshay Nagraj", "link": "https://stackoverflow.com/users/3934348/akshay-nagraj"}, "reply_to_user": {"reputation": 2256, "user_id": 1272233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07cc66e13f0eb3901c15c9580aa1a78b?s=128&d=identicon&r=PG", "display_name": "Doval", "link": "https://stackoverflow.com/users/1272233/doval"}, "edited": false, "score": 0, "creation_date": 1420646226, "post_id": 27822762, "comment_id": 44052510, "body": "I&#39;m sorry for being so stupid. Thanks btw :P"}], "answers": [{"comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 3, "creation_date": 1420644945, "post_id": 27822830, "comment_id": 44051624, "body": "And just to reiterate chux&#39;s point. Note that chux wrote <b>14</b> not <b>15</b>. This will ensure that scanf won&#39;t cause a buffer overflow when adding the null terminating character."}], "tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": true, "score": 6, "last_activity_date": 1420645792, "last_edit_date": 1420645792, "creation_date": 1420644669, "answer_id": 27822830, "question_id": 27822762, "link": "https://stackoverflow.com/questions/27822762/please-tell-me-where-ive-gone-wrong/27822830#27822830", "title": "Please tell me where I&#39;ve gone wrong", "body": "<pre><code>scanf(\"%d %15c',&amp;no, name1\");\n</code></pre>\n\n<p>Should be replaced with: </p>\n\n<pre><code>scanf(\"%d %14s\",&amp;no, name1);\n</code></pre>\n\n<ul>\n<li>Use double quotes since the single quote doesn't terminate a String in C.</li>\n<li>Use <code>%14s</code> (as suggested by chux) so that you do not overflow the buffer for the string and cause a seg fault</li>\n</ul>\n\n<p><code>%s</code> is used to read in a space delimited string. If you want to read an entire line, you must make use of <a href=\"http://en.cppreference.com/w/cpp/io/c/fgets\" rel=\"nofollow\">fgets</a> function</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1420644497, "question_id": 269323}, "owner": {"reputation": 33, "user_id": 3934348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cPVDv.jpg?s=128&g=1", "display_name": "Akshay Nagraj", "link": "https://stackoverflow.com/users/3934348/akshay-nagraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 27822830, "answer_count": 1, "score": -2, "last_activity_date": 1420645792, "creation_date": 1420643579, "last_edit_date": 1420644825, "question_id": 27822762, "link": "https://stackoverflow.com/questions/27822762/please-tell-me-where-ive-gone-wrong", "title": "Please tell me where I&#39;ve gone wrong", "body": "<pre><code>#include &lt;stdio.h&gt;\nmain()\n{\n    char name1[15],name2[15],name3[15];\n    int no;\n\n    printf(\"Enter the serial number and name one\\n\");\n    scanf(\"%d %15c',&amp;no, name1\");\n    printf(\"%d %15s\\n\\n\",no,name1);\n\n    printf(\"Enter serial number and name two\\n\");\n    scanf(\"%d %s\",&amp;no,name2);\n    printf(\"%d %15s\\n\\n\",no, name2);\n\n    printf(\"Enter serial number and name three\");\n    scanf(\"%d %15s\",&amp;no,name3);\n    printf(\"%d %15s\\n\\n\",no,name3);\n}\n</code></pre>\n\n<p>Hi, I'm new to programming, I've started with C for some reasons. The code I've typed above is my program that I want to execute. When I execute it with Code::Blocks it runs till <em>Enter the serial number and name one</em> and then if I enter a number it become not responding. Then I tried compiling using Visual Studio 2013 it again stops responding.</p>\n\n<p>After that I tried debugging using Visual Studio 2013 debugger it said this <em>First-chance exception at 0x7575B790 (msvcrt.dll) in temp.exe: 0xC0000005: Access violation writing location 0x00000000.</em> after pressing continue it said this <em>Unhandled exception at 0x7575B790 (msvcrt.dll) in temp.exe: 0xC0000005: Access violation writing location 0x00000000.</em> \nI have programmed before this one in Code::Blocks they all worked well. Please tell me where I've gone wrong. Also please explain the use of %s.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays", "string", "max", "digits"], "comments": [{"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 4, "creation_date": 1420643269, "post_id": 27822318, "comment_id": 44050418, "body": "Use a debugger to check your code. If your are on linux gdb is a good option. If under windows Visual Studio has a good compiler/debugger combination."}, {"owner": {"reputation": 1, "user_id": 4424490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gMcx27r91MY/AAAAAAAAAAI/AAAAAAAAABs/ZSeCsz4HgQ4/photo.jpg?sz=128", "display_name": "sina heidari", "link": "https://stackoverflow.com/users/4424490/sina-heidari"}, "reply_to_user": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1420643625, "post_id": 27822318, "comment_id": 44050645, "body": "compoler is dev c++ ;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1420644005, "post_id": 27822318, "comment_id": 44050905, "body": "1) Nothing in code suggest limiting input to 1000 digits.  2) <code>gets()</code> is certainly a problem.  Use <code>fgets()</code>."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 3, "creation_date": 1420644468, "post_id": 27822318, "comment_id": 44051235, "body": "&quot;It does not work&quot; is very imprecise. What input do you test it with and what is the result?"}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420648557, "post_id": 27823726, "comment_id": 44054065, "body": "zero is &#39;\\0&#39;,  <code>char str[1000+1];scanf(&quot;%1000s&quot;, str);</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "is_accepted": false, "score": 0, "last_activity_date": 1420647341, "creation_date": 1420647341, "answer_id": 27823726, "question_id": 27822318, "link": "https://stackoverflow.com/questions/27822318/how-to-create-a-program-that-be-able-to-get-the-two-numbers-with-a-maximum-of-10/27823726#27823726", "title": "How to create a program that be able to get the two numbers with a maximum of 1000 digits from the user and then print the result?", "body": "<p>I think <strong><em>consider a character for the zero in the end of the sring</em></strong> is the point:</p>\n\n<pre><code>char str[1000]; //number of digits\nint i=0;\n\nwhile(true){\n    scanf(\"%c\", (str+i));\n    if( *(str+i) == '0') break;\n}\n</code></pre>\n\n<p>I'm not very sure, but I think it at least give a point</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1420648583, "creation_date": 1420648583, "answer_id": 27824121, "question_id": 27822318, "link": "https://stackoverflow.com/questions/27822318/how-to-create-a-program-that-be-able-to-get-the-two-numbers-with-a-maximum-of-10/27824121#27824121", "title": "How to create a program that be able to get the two numbers with a maximum of 1000 digits from the user and then print the result?", "body": "<p>First, it is hard to store 1000 characters in an array of size 2 ! C language is very confident in the programmer and never controls capacity of arrays ... simply it leads to undefined behavious since you try to write in memory that can not exist or be used for anything else.</p>\n\n<p>Next write in your manual in flashing red over <code>gets</code> function : <strong>never use that !</strong>. It is inherently unsafe because you write a string in an array (of a defined size) without any way of knowing the size of input ! Always use <code>fgets</code> instead that can limit the input string to the size of buffer.</p>\n\n<p>Finaly, but it is far less serious than the 2 others, avoid using <code>conio.h</code> unless you have special requirements because it is not portable across different architectures.</p>\n\n<p>All that are reasons for which your program could break lead to unexpected results or be not portable, but that's not all : when I was much younger than today, I learned that to add 2 numbers, you add their digits but when the sum of 2 digits is greater than 9 (say 6 + 7 = 13), you only keep the low order digit (here 3) and and the carry (1) to next column. And you add numbers starting from low digits ...</p>\n\n<p>What you currently have can only add numbers of 1 digit !</p>\n\n<p>So here is a possible implementation :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;string.h&gt;\n#define SIZE 1000\n\nvoid sinascan(char* sina, int size, int i){ \n    char *c = sina;\n    int l;\n    int temp;\n\n    ::memset(sina, 0, size); /* initialize buffer to 0 */\n    printf(\"Enter number %d : \", i);\n    fgets(sina, size , stdin);\n    while ((*c &gt;= '0') &amp;&amp; (*c &lt;= '9')) { /* only get digits */\n          c++;\n          }\n    *c = 0; /* remove optional spaces and end of line */\n    /* now reverse digits so that sina[0] is low order digit */\n    l = strlen(sina);\n    for (i=0; i&lt;l/2 + 1; i++) {\n        temp = sina[i];\n        sina[i] = sina[l - 1 - i];\n        sina[l - 1 - i] = temp;\n    }\n    for (i=0; i&lt;l; i++) {\n        sina[i] -= '0';\n    }\n     }\n\n\nint sinajam(char *sina,char *sina1,char *jam, int size){\n     puts(\"____\");\n     int i,sum, carry = 0;\n     for (i=0; i&lt;size; i++ ) {\n           sum = sina[i] +sina1[i] + carry;\n           jam[i] = sum % 10;\n           carry = sum / 10;\n           printf (\"%d\", jam[i]);\n           }\n     return carry;\n     }\nint main()\n{   int i=0;\n    char sina[SIZE+1],sina1[SIZE+1]; /* add one place for terminating null */\n    char jam[SIZE];\n    sinascan(sina,SIZE+1, 1);\n    sinascan(sina1, SIZE+1, 2);\n    i = sinajam(sina,sina1,jam,SIZE);\n    if (i != 0) {\n        puts(\"overflow\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This implementation accepts input up to 1000 digits, generates a sum up to 1000 digits and signals overflows.</p>\n"}], "owner": {"reputation": 1, "user_id": 4424490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gMcx27r91MY/AAAAAAAAAAI/AAAAAAAAABs/ZSeCsz4HgQ4/photo.jpg?sz=128", "display_name": "sina heidari", "link": "https://stackoverflow.com/users/4424490/sina-heidari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1420648583, "creation_date": 1420643149, "last_edit_date": 1420643381, "question_id": 27822318, "link": "https://stackoverflow.com/questions/27822318/how-to-create-a-program-that-be-able-to-get-the-two-numbers-with-a-maximum-of-10", "title": "How to create a program that be able to get the two numbers with a maximum of 1000 digits from the user and then print the result?", "body": "<p>I'm trying to create a program that be able to get the two numbers with a maximum of 1000 digits from the user and then print the result (with C (programming language))</p>\n\n<p>notes to create this program : </p>\n\n<p>1-to get the two numbers, use strings with a length of 1000 characters.(consider a character for the zero in the end of the sring)</p>\n\n<p>2-to store the numbers , use two array with a length of 1000 block (home).each digit of a large numbers must be store in a separate array block.(for example: 365 ( \"3\" store in a block(home) and 6 store in another block and ...)</p>\n\n<p>3-To get the numbers as strings and convert it to a numeric array, addition, subtraction and printing large numbers, use separate function. the \"main\" function must be very small.</p>\n\n<hr>\n\n<p>I wrote this code but can't figure out why it wont work:</p>\n\n<pre><code>/*codes*/\n\n\n#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n#define hang 1\n\nvoid sinascan1(char sina[2],int i){\n     puts(\"Enter number 1\");\n     gets(sina);\n    while (i != hang){\n          sina[i] -= 48;\n          printf (\"%d\\n\", sina[i]);\n          i++;\n          }\n     }\nvoid sinascan2(char sina1[2],int i){\n     puts(\"Enter number 2\");\n     gets(sina1);\n    while (i != hang){\n          sina1[i] -= 48;\n          printf (\"%d\\n\", sina1[i]);\n          i++;\n          }\n     }\nvoid sinajam(char sina[2],char sina1[2],char jam[3],int i){\n     puts(\"____\");\n     int f,g;\n     while (i != hang){ \n           jam[i]=sina[i]+sina1[i];\n           printf (\"%d\\n\", jam[i]);\n           i++;\n           }\n     }\nint main()\n{   int i=0;\n    char sina[2],sina1[2];\n    char jam[2];\n    sinascan1(sina,i);\n    sinascan2(sina1,i);\n    sinajam(sina,sina1,jam,i);\n    getch();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>how can I do that?</p>\n"}, {"tags": ["c", "linux", "environment-variables", "development-environment"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420642014, "post_id": 27821943, "comment_id": 44049602, "body": "By checking that the pointer returned by <a href=\"http://man7.org/linux/man-pages/man3/getenv.3.html\" rel=\"nofollow noreferrer\"><code>getenv</code></a> is not <code>NULL</code>? And don&#39;t make code for some specific environment unless you also have a default fallback."}, {"owner": {"reputation": 129, "user_id": 3486006, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/993e59be47bcf9386ea4336cef84627e?s=128&d=identicon&r=PG&f=1", "display_name": "Teldar", "link": "https://stackoverflow.com/users/3486006/teldar"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420642302, "post_id": 27821943, "comment_id": 44049780, "body": "Use of getenv is forbidden by the exercise rules.."}, {"owner": {"reputation": 2147, "user_id": 2136640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d392b830abbaf0d8af1124c1dd371?s=128&d=identicon&r=PG", "display_name": "Timothy Brown", "link": "https://stackoverflow.com/users/2136640/timothy-brown"}, "edited": false, "score": 0, "creation_date": 1420643117, "post_id": 27821943, "comment_id": 44050325, "body": "Simillar to <a href=\"http://stackoverflow.com/questions/2085302/printing-all-environment-variables-in-c-c\">this</a> question. Note that looping through them all, the string (<code>thisEnv</code> in that example), will contain the <b>variable=somthing</b>, as in <code>TERM=vt100</code>, so you will have to tokenize it too."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 4259245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7384045395c52b1851aadf109c61eff6?s=128&d=identicon&r=PG&f=1", "display_name": "cpplover - Slw Essencial", "link": "https://stackoverflow.com/users/4259245/cpplover-slw-essencial"}, "is_accepted": false, "score": 0, "last_activity_date": 1420642979, "creation_date": 1420642979, "answer_id": 27822254, "question_id": 27821943, "link": "https://stackoverflow.com/questions/27821943/check-if-env-is-empty/27822254#27822254", "title": "Check if env is empty", "body": "<p>In normal case::</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain (int argc, char **argv, char **env)\n{\n    // Do Something.\n    char *envHomepath;\n    envHomepath = getenv(\"HOME\");\n    if (envHomepath == NULL)\n        printf(\"HOME env is NULL\\n\");\n    else\n        printf(\"HOME env is %s\\n\", envHomepath); \n\n    return 0;\n}\n</code></pre>\n\n<p>then \nIt'll output to console</p>\n\n<p>HOME env is /user/xxxxx.xxx  &lt;-- it's your username.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1420709097, "last_edit_date": 1420709097, "creation_date": 1420708448, "answer_id": 27836518, "question_id": 27821943, "link": "https://stackoverflow.com/questions/27821943/check-if-env-is-empty/27836518#27836518", "title": "Check if env is empty", "body": "<p>You have several ways to access the environment:</p>\n\n<ol>\n<li>as a third parameter to main (<code>int main(int argc, char **argv, char **envp);</code>)</li>\n<li>through the <strong>environ</strong> global variable (<code>char **environ;</code>)</li>\n<li>through the <strong>getenv(3)</strong> library function.  This only makes a search through the environment for a string of the form <code>\"VARNAME=value\"</code>.</li>\n</ol>\n\n<p>The environment is always present, as it is normally passed to the process through the <code>exec(2)</code> system call from the parent process (in unix and MS-DOS/Windows systems) as a group of nul (\\0) terminated strings, followed by a nul (another \\0 following the last string) so the end of the environment might be two nul's in sequence (this is how it's passed on msdos, in other unices you can have another way to do this).  A null environment would be to pass an empty array of strings (just a <code>NULL</code> pointer to signal the end of the environment).</p>\n\n<p>Despite of this, what <code>main()</code> receives (and the <code>environ</code> variable also) is an array of <code>char</code> pointers to strings (normally prepared through the basic C runtime), followed by a <code>NULL</code> pointer to signal de end, so an empty environment would be something like:</p>\n\n<pre><code>char **environ = { NULL }; /* at least a NULL pointer to indicate the end of the environment */\n</code></pre>\n\n<p>If you check for this ( <code>if (environ[0] == NULL)</code> ), you'll get an indication of an empty environment.  Beware that you have to explicitly call the proper <strong>exec(2)</strong> call to include an empty array of environment strings for this to happen.  This is a very uncommon case and probably you'll get into trouble if you try to call many standard programs with an empty environment.</p>\n\n<p>The same applies to the arg list, in this case, almost all unices follow the convention of putting a NULL at argv[argc] and you can do the same, but beware as you almost always have one string there (the program name) so</p>\n\n<pre><code>env\n</code></pre>\n\n<p>is received in main with:</p>\n\n<pre><code>int argc = 1;\nchar **argv = { \"env\", NULL };\n</code></pre>\n\n<p>and</p>\n\n<pre><code>env -i\n</code></pre>\n\n<p>would be received in main as:</p>\n\n<pre><code>int argc = 2;\nchar **argv = { \"env\", \"-i\", NULL };\n</code></pre>\n\n<p>Also, it's possible (in unix, not in ms-dos) to pass an empty arg list.  This is very uncommon and architecture dependent (linux uses it to ask a shared executable ---a .so file--- what dependencies it has) So it is very rare to expect an empty argument list.</p>\n\n<p>You can detect it checking <code>if (argc == 0)</code>, for example.</p>\n\n<p>I'm talking from memory, but I think the convention of putting <code>NULL</code> at the end of the <code>argv</code> list is a POSIX convention.  Comments are welcome.</p>\n"}], "owner": {"reputation": 129, "user_id": 3486006, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/993e59be47bcf9386ea4336cef84627e?s=128&d=identicon&r=PG&f=1", "display_name": "Teldar", "link": "https://stackoverflow.com/users/3486006/teldar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1420709097, "creation_date": 1420641859, "question_id": 27821943, "link": "https://stackoverflow.com/questions/27821943/check-if-env-is-empty", "title": "Check if env is empty", "body": "<p>I'm writing a program for my school.</p>\n\n<p>I need to use term env but if correctors start my program with env -i, my program segfault.</p>\n\n<p>How to avoid an empty env in C when starting my program ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "linux", "string", "gcc", "string-concatenation"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1420641637, "post_id": 27821851, "comment_id": 44049361, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5322364/using-realloc-in-c\">using realloc in c</a>"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420642122, "post_id": 27821851, "comment_id": 44049658, "body": "Please take care of the title when asking a question here. This is very low quality."}, {"owner": {"reputation": 451, "user_id": 1326663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41efab6f5d387e6eacc1fbe4e23e5775?s=128&d=identicon&r=PG", "display_name": "Akaks", "link": "https://stackoverflow.com/users/1326663/akaks"}, "edited": false, "score": 0, "creation_date": 1420643010, "post_id": 27821851, "comment_id": 44050243, "body": "I came here for help , anyways thank for the advice will keep in mind."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1420643240, "post_id": 27821851, "comment_id": 44050399, "body": "<i>looking forward to be a helpful question for lazy programmers like me</i>  That does <b>not</b> make me want to help"}, {"owner": {"reputation": 451, "user_id": 1326663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41efab6f5d387e6eacc1fbe4e23e5775?s=128&d=identicon&r=PG", "display_name": "Akaks", "link": "https://stackoverflow.com/users/1326663/akaks"}, "reply_to_user": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1420643588, "post_id": 27821851, "comment_id": 44050624, "body": "thanks @degustaf , the fix got in answer worked well but it may cause for performance issue while appending to string in 10^n nth iterations . can you still will not help."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1420642820, "last_edit_date": 1420642820, "creation_date": 1420641627, "answer_id": 27821870, "question_id": 27821851, "link": "https://stackoverflow.com/questions/27821851/concatenation-using-strcat-and-realloc-produce-unexpected-errors/27821870#27821870", "title": "Concatenation using strcat and realloc produce unexpected errors", "body": "<p><code>buf</code> is not a valid string so <code>strcat()</code> will fail since it expects a <code>\\0</code> terminated string.</p>\n\n<p>If you want to <code>realloc()</code> <code>buf</code> then you should assign the return value of <code>realloc()</code> to buf which you are not doing.</p>\n\n<pre><code>char *temp = realloc(buf,size+1);\nif(temp != NULL)\nbuf = temp;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1420641642, "creation_date": 1420641642, "answer_id": 27821874, "question_id": 27821851, "link": "https://stackoverflow.com/questions/27821851/concatenation-using-strcat-and-realloc-produce-unexpected-errors/27821874#27821874", "title": "Concatenation using strcat and realloc produce unexpected errors", "body": "<p>Point 1. Always use the return value of <code>realloc()</code> to access the newly allocated memory.</p>\n\n<p>Point 2. <code>strcat()</code> needs a null-terminating string. Check the first iteration case.</p>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 1326663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41efab6f5d387e6eacc1fbe4e23e5775?s=128&d=identicon&r=PG", "display_name": "Akaks", "link": "https://stackoverflow.com/users/1326663/akaks"}, "edited": false, "score": 1, "creation_date": 1420643232, "post_id": 27821976, "comment_id": 44050398, "body": "Thanks , Initially i dint thought those fundamental things because this code was working for some 1200 iterations. I thought there must be something else either than starcat , because appending at 2000th iteration it had to go through around 150KB of characters . Anyways that code worked"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 7, "last_activity_date": 1420641981, "creation_date": 1420641981, "answer_id": 27821976, "question_id": 27821851, "link": "https://stackoverflow.com/questions/27821851/concatenation-using-strcat-and-realloc-produce-unexpected-errors/27821976#27821976", "title": "Concatenation using strcat and realloc produce unexpected errors", "body": "<p>Your code has several issues:</p>\n\n<ul>\n<li><strong>You are not accounting for null terminator when deciding on the new length</strong> - it should be <code>size = strlen(buf)+strlen(loc)+1;</code></li>\n<li><strong>You are ignoring the result of <code>realloc</code></strong> - you need to check it for zero, and then assign it back to <code>buf</code></li>\n<li><strong>You do not initialize <code>buf</code> to an empty string</strong> - this would make the first call of <code>strlen</code> produce undefined behavior (i.e. you need to add <code>*buf = '\\0';</code>)</li>\n</ul>\n\n<p>Once you fix these mistakes, your code should run correctly:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main() {\n   int i;\n   char *buf= malloc(1);\n   *buf='\\0';\n   char loc[120];\n\n   for(i=0;i&lt;1920;i++) {\n      sprintf(loc,\"{Fill_next_token = my_next_token%d; Fill_next_token_id = my_next_token_id = my_next_token_id%d}\",i,i);\n      int size = strlen(buf)+strlen(loc)+1;\n      printf(\"----%d\\n\",size);\n      char *tmp = realloc(buf,size);\n      if(!tmp) exit(1);\n      buf = tmp;\n      strcat(buf, loc);\n   }\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/8ZL1y4\" rel=\"noreferrer\">Demo.</a></p>\n"}], "owner": {"reputation": 451, "user_id": 1326663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41efab6f5d387e6eacc1fbe4e23e5775?s=128&d=identicon&r=PG", "display_name": "Akaks", "link": "https://stackoverflow.com/users/1326663/akaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3249, "favorite_count": 0, "accepted_answer_id": 27821976, "answer_count": 3, "score": 3, "last_activity_date": 1420690291, "creation_date": 1420641560, "last_edit_date": 1495535621, "question_id": 27821851, "link": "https://stackoverflow.com/questions/27821851/concatenation-using-strcat-and-realloc-produce-unexpected-errors", "title": "Concatenation using strcat and realloc produce unexpected errors", "body": "<p>I have encountered so called cryptic <code>realloc</code> <code>invalid next size error</code> , I am using <code>gcc</code> on <code>linux</code> my code is   </p>\n\n<pre><code> #include&lt;stdio.h&gt;\n #include&lt;stdlib.h&gt;\n #include&lt;string.h&gt;\n\nint main()\n{\n int i;\n char *buf;\n char loc[120];\n buf = malloc(1);\n int size;\n\n for(i=0;i&lt;1920;i++)\n  {\n    sprintf(loc,\"{Fill_next_token = my_next_token%d; Fill_next_token_id = my_next_token_id = my_next_token_id%d}\",i,i);\n    size = strlen(buf)+strlen(loc);\n    printf(\"----%d\\n\",size);\n\n    if(!realloc(buf,size))\n    exit(1);\n    strcat(buf,loc);\n    }\n  }\n</code></pre>\n\n<p>(mine might be duplicate question) <a href=\"https://stackoverflow.com/questions/2939091/realloc-invalid-next-size\">here</a> the solution somewhere lies by avoiding <code>strcat</code> and to  use <code>memcpy</code> , But in my case I really want to concatenate the string . Above code works for good for such 920 iterations but in case 1920 <code>realloc</code> gives invalid new size error. Please help to find alternative of concatenating , looking forward to be a helpful question for lazy programmers like me .</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1420641138, "creation_date": 1420641138, "answer_id": 27821712, "question_id": 27821699, "link": "https://stackoverflow.com/questions/27821699/not-able-to-understand-let-us-c-static-storage-class-example/27821712#27821712", "title": "Not able to understand Let us C static storage class example", "body": "<p>in your code</p>\n\n<pre><code>int *fun()\n{\n    int k = 35;\n    return (&amp;k);\n}\n</code></pre>\n\n<p>you're returning the address of a local variable from <code>fun()</code>. Any usage of the return value leads to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>To explain, once the function <code>fun()</code> finishes execution, there is no existence of <code>k</code>. So , trying to use something like <code>&amp;k</code> is invalid.</p>\n\n<p><sup>Note: Whatever the explanation is provided in that particular book [related to stack flushing or so], is not standardized in c.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420641254, "creation_date": 1420641254, "answer_id": 27821740, "question_id": 27821699, "link": "https://stackoverflow.com/questions/27821699/not-able-to-understand-let-us-c-static-storage-class-example/27821740#27821740", "title": "Not able to understand Let us C static storage class example", "body": "<pre><code>int k = 35;\n</code></pre>\n\n<p>is local to function <code>fun()</code> so once you return from <code>fun()</code> the memory allocated for <code>k</code> is no more valid and you are returning <code>&amp;k</code>(address of that variable) which will lead to undefined behavior</p>\n"}], "owner": {"reputation": 604, "user_id": 4429177, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ecd09328eb8892d10a43ca3264e1719?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/4429177/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 2, "closed_date": 1420641248, "accepted_answer_id": 27821712, "answer_count": 2, "score": 3, "last_activity_date": 1420641254, "creation_date": 1420641077, "question_id": 27821699, "link": "https://stackoverflow.com/questions/27821699/not-able-to-understand-let-us-c-static-storage-class-example", "closed_reason": "Duplicate", "title": "Not able to understand Let us C static storage class example", "body": "<p>I am not able to understand an example in Let us C by Yashwant Kanetkar. Here is the code snippet:</p>\n\n<pre><code>main()\n{\n    int *j;\n    int *fun();\n    j = fun();\n    // If we add a function call here, the print statement prints a garbage value.\n    printf(\"\\n%d\",*j);\n}\n\nint *fun()\n{\n    int k = 35;\n    return (&amp;k);\n}\n</code></pre>\n\n<p>Now in the above code, I am not able to understand why having a function call before the printf statement results in printing a garbage value. I have a vague idea that as the returned value points to a memory location in the stack, something goes wrong when another function is called before printing this value. But I am not able to clearly visualize what happens here. Please help.</p>\n"}, {"tags": ["c++", "c", "qt", "gcc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420641200, "post_id": 27821640, "comment_id": 44049089, "body": "QtCreator has nothing to do with that, what kind of project are you using."}, {"owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420641273, "post_id": 27821640, "comment_id": 44049126, "body": "I use static library project. It is portable library that I compile on many OS and platforms, it doesn&#39;t contain anything QT-specific, however, I try to use QT Creator here just like universal IDE."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1420641382, "post_id": 27821640, "comment_id": 44049202, "body": "You have to edit the <code>.pro</code> file, google this <code>remove default include paths from .pro qmake project.</code>, and then specify your own include paths."}], "answers": [{"comments": [{"owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "edited": false, "score": 0, "creation_date": 1423764452, "post_id": 27826536, "comment_id": 45291247, "body": "It doesn&#39;t help. The problem is not in wrong standard includes. The problem is that <code>qmake</code> adds some includes explicitly with <code>-I</code> switch, and these includes cause error, and <code>qmake</code> adds them even when I set an empty value to <code>INCLUDEPATH</code>."}, {"owner": {"reputation": 2937, "user_id": 561300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1a5de8ed4b4eb2d92123450890f5a8?s=128&d=identicon&r=PG", "display_name": "Alexandru C.", "link": "https://stackoverflow.com/users/561300/alexandru-c"}, "reply_to_user": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "edited": false, "score": 0, "creation_date": 1423766481, "post_id": 27826536, "comment_id": 45292333, "body": "Are these files local to your project? Or, are they system related (e.g. installed apps/libs)?"}, {"owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "edited": false, "score": 0, "creation_date": 1423767074, "post_id": 27826536, "comment_id": 45292668, "body": "<code>qmake</code> adds absolute path to my project to include paths, i. e. it generates command line option <code>-I&#47;my&#47;project&#47;path</code>. This option causes compilation failure, probably some of my files names conflict with system file names, for example, <code>String.h</code> or <code>mutex.h</code>. When I copy build command generated by <code>qmake</code> and remove this option, it compiles good, it also compiles good with Eclipse CDT for example, because it doesn&#39;t add anything I don&#39;t want. And what is bad, <code>qmake</code> adds this include path even if I assign an empty value to <code>INCLUDEPATH</code> in my <code>.pro</code> file."}], "tags": [], "owner": {"reputation": 2937, "user_id": 561300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1a5de8ed4b4eb2d92123450890f5a8?s=128&d=identicon&r=PG", "display_name": "Alexandru C.", "link": "https://stackoverflow.com/users/561300/alexandru-c"}, "is_accepted": false, "score": -1, "last_activity_date": 1420656649, "creation_date": 1420656649, "answer_id": 27826536, "question_id": 27821640, "link": "https://stackoverflow.com/questions/27821640/how-to-prohibit-qt-creator-to-use-specific-include-path-automatically/27826536#27826536", "title": "How to prohibit Qt Creator to use specific include path automatically?", "body": "<p>You can use <code>CXXFLAGS += -nostdinc</code>.</p>\n\n<p>This should do the following (excerpt from the manual): </p>\n\n<blockquote>\n  <p>Do not search the standard system directories for header files. Only the directories you have specified\n  with -I options (and the directory of the current file, if appropriate) are searched.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "is_accepted": true, "score": 0, "last_activity_date": 1423773661, "creation_date": 1423773661, "answer_id": 28487350, "question_id": 27821640, "link": "https://stackoverflow.com/questions/27821640/how-to-prohibit-qt-creator-to-use-specific-include-path-automatically/28487350#28487350", "title": "How to prohibit Qt Creator to use specific include path automatically?", "body": "<p>It is not elegant answer, if someone has better ideas, you are still welcome to post your answer and I'll accept it.\nSo, I added custom build step between <code>qmake</code> and <code>make</code> commands, and I use <code>sed</code> command in this custom build step to edit <code>Makefile</code> on the fly and remove extra includes. This solution works, however, it is ugly.</p>\n"}], "owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 28487350, "answer_count": 2, "score": 1, "last_activity_date": 1423773661, "creation_date": 1420640886, "last_edit_date": 1420644566, "question_id": 27821640, "link": "https://stackoverflow.com/questions/27821640/how-to-prohibit-qt-creator-to-use-specific-include-path-automatically", "title": "How to prohibit Qt Creator to use specific include path automatically?", "body": "<p>I use 2 different <code>GCC</code> versions on the same <code>CentOS</code> machine (included in OS one and custom one), and I don't want to replace system <code>GCC</code> with my custom one, I use custom one to build some software only.\nThe problem is that <code>Qt Creator</code> adds <code>/usr/include</code> to include folders automatically, so custom <code>GCC</code> starts to use system C++ includes and crashes with strange error messages like <code>error: '::memchr' has not been declared</code>. I don't have <code>/usr/include</code> anywhere in my <code>*.pro</code> file, so it looks like <code>Qt Creator</code> adds them itself.\nHow to prohibit <code>Qt Creator</code> project to use some specific include patches to allow compilation on machine with 2 <code>GCC</code> versions? When I use <code>Eclipse CDT</code> on the same machine, it works excellently, because Eclipse doesn't add anything itself and only uses include directories specified by me.</p>\n"}, {"tags": ["c", "architecture", "compilation"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1420640773, "post_id": 27821531, "comment_id": 44048806, "body": "You can generally create a multi-architecture executable, and have a small &quot;lowest-common-denominator&quot; boostrap section that detects the operating environment and starts up the architecture-specific code. But you can&#39;t have a universal executable that&#39;d work on all platforms. Every OS has different executable file formats and none of them are compatible with the other OSes, e.g. Linux uses ELF, Windows has PE, OSX has Mach-O."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1420640848, "post_id": 27821531, "comment_id": 44048854, "body": "e.g. as a nice example, grab any of the Sysinternals utilities off the MS website. It&#39;s a single small .exe and contains both 32bit and 64bit versions, held together with a small boostrap section."}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1420640920, "post_id": 27821531, "comment_id": 44048906, "body": "What google searches have you done, that all failed? I tried one search: &#39;how does a compiler work&#39; and got <a href=\"http://programmers.stackexchange.com/questions/118586/how-does-a-compiler-work\">this</a>, <a href=\"http://en.wikipedia.org/wiki/Compiler\" rel=\"nofollow noreferrer\">this</a> and many others."}, {"owner": {"reputation": 21, "user_id": 4429011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7870ddf9f12d5074767aabc599c48fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Gorgey Gorge", "link": "https://stackoverflow.com/users/4429011/gorgey-gorge"}, "edited": false, "score": 0, "creation_date": 1420641153, "post_id": 27821531, "comment_id": 44049060, "body": "Thank you for your answer Marc, exactly what I needed to know. Now I actually know what to research :p"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1420641901, "post_id": 27821531, "comment_id": 44049536, "body": "@MarcB I&#39;m pretty sure you can&#39;t switch between 32 and 64 bit mode without kernel intervention. The best you can do is to spawn another process with required arch, but that&#39;s basically a self-extracting executable, more than a bootstrap."}], "answers": [{"tags": [], "owner": {"reputation": 77055, "user_id": 659804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7afeb4d1993dc25c6028646840e4868a?s=128&d=identicon&r=PG", "display_name": "Ernest Friedman-Hill", "link": "https://stackoverflow.com/users/659804/ernest-friedman-hill"}, "is_accepted": true, "score": 0, "last_activity_date": 1420640843, "creation_date": 1420640843, "answer_id": 27821624, "question_id": 27821531, "link": "https://stackoverflow.com/questions/27821531/how-can-a-single-compiled-c-program-run-on-multiple-architectures/27821624#27821624", "title": "How can a single compiled C program run on multiple architectures?", "body": "<p>The Mac OS X binary format includes a mechanism for providing code for multiple architectures in the same file, and so a single Mac application can support 32 and 64 bit x86; in the recent past PowerPC support was possible too, although those are now obsolete. But for Windows and Linux, you generally need separate binaries for each CPU architecture (as comments have pointed out, it's possible to jury-rig something similar, although it's far from standard practice.) The default, and by far the most common, is amd64, but sometimes you'll still see separate downloads for 32-bit machines. The world used to be more interesting in this respect, but nowadays things are more standardized than ever.</p>\n"}], "owner": {"reputation": 21, "user_id": 4429011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7870ddf9f12d5074767aabc599c48fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Gorgey Gorge", "link": "https://stackoverflow.com/users/4429011/gorgey-gorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 27821624, "answer_count": 1, "score": 1, "last_activity_date": 1420701582, "creation_date": 1420640538, "last_edit_date": 1495542034, "question_id": 27821531, "link": "https://stackoverflow.com/questions/27821531/how-can-a-single-compiled-c-program-run-on-multiple-architectures", "title": "How can a single compiled C program run on multiple architectures?", "body": "<p>Take for example a program downloaded from some website, the different options to pick from are the usual operating systems (Linux, Mac, Windows) but what about CPU architecture? The program is a binary executable. Does it just assume amd64? Or is the program compiled into all of the supported architectures and packaged together with a script on top that chooses the right one?</p>\n\n<p>I'm only interested in C and would like to know how this is accomplished.</p>\n\n<hr>\n\n<p>On further investigation, thanks to the lovely information provided by the individuals below, I came across <a href=\"http://en.wikipedia.org/wiki/Fat_binary\" rel=\"nofollow noreferrer\">Fat Binaries</a> with support on both Mac and Linux. It doesn't seem as though windows <a href=\"https://stackoverflow.com/questions/7510225/windows-8-fat-binary-exe-for-x86-arm\">supports</a> it.</p>\n"}, {"tags": ["c", "pointers", "segmentation-fault", "bsearch"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 2, "creation_date": 1420640669, "post_id": 27821509, "comment_id": 44048744, "body": "There&#39;s no <code>nil</code> in C. <code>NULL</code> is effectively the same thing, though."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420640835, "post_id": 27821509, "comment_id": 44048846, "body": "In C you should not cast <code>void *</code>. Doing so can actually hide problems with you forgetting to declare the function you&#39;re calling (or forgetting to include the correct header file). In C all pointers are implicitly convertable to <code>void*</code> and the other way around. Then only time you need to explicitly cast a <code>void*</code> is when dereferencing such a pointer."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1420641079, "post_id": 27821509, "comment_id": 44049010, "body": "@JoachimPileborg, s/all pointers/all object pointers/g"}], "answers": [{"comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 1, "creation_date": 1420640706, "post_id": 27821544, "comment_id": 44048762, "body": "<code>printf(&quot;Item = %d could not be found\\n&quot;, key);</code> would be the safe fix."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1420640803, "post_id": 27821544, "comment_id": 44048823, "body": "@PaulRoub Indeed. Maybe <code>printf(&quot; Any item with related key value %d could not be found\\n&quot;, key);</code> will also do. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1420640587, "creation_date": 1420640587, "answer_id": 27821544, "question_id": 27821509, "link": "https://stackoverflow.com/questions/27821509/bsearch-returns-nil-causes-segmentation-fault/27821544#27821544", "title": "bsearch() returns (nil), causes segmentation fault", "body": "<p>In your code, in <code>else</code> part</p>\n\n<pre><code>if( item != NULL ) \n   {\n      printf(\"Found item = %d\\n\", *item);\n   }\n   else \n   {\n      printf(\"Item = %d could not be found\\n\", *item);\n   }\n</code></pre>\n\n<p>even if <code>item</code> is <code>NULL</code>, youre dereferencing it [<code>*item</code>]. Please refrain from doing so.</p>\n\n<p>To fix the issue keeping the informative output message intact, maybe you can use something </p>\n\n<pre><code>printf(\" Any item with related key value %d could not be found\\n\", key);\n</code></pre>\n\n<p>when <code>item</code> is <code>NULL</code>.</p>\n"}], "owner": {"reputation": 60, "user_id": 2479092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cca5ceab474b0b5cf14e3abd028166ee?s=128&d=identicon&r=PG", "display_name": "abhik", "link": "https://stackoverflow.com/users/2479092/abhik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 27821544, "answer_count": 1, "score": 0, "last_activity_date": 1441557384, "creation_date": 1420640456, "last_edit_date": 1441557384, "question_id": 27821509, "link": "https://stackoverflow.com/questions/27821509/bsearch-returns-nil-causes-segmentation-fault", "title": "bsearch() returns (nil), causes segmentation fault", "body": "<p>The bserach() function should return NULL but instead, I get (nil) when it is unable to find the key in the given array.\nWhat's going wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint cmpfunc(const void * a, const void * b)\n{\n   return ( *(int*)a - *(int*)b );\n}    \nint values[] = { 5, 20, 29, 32, 63 };    \nint main ()\n{\n   int *item;\n   int key = 10;\n\n   /* using bsearch() to find value 32 in the array */\n   item = (int*) bsearch (&amp;key, values, 5, sizeof (int), cmpfunc);\n   if( item != NULL ) \n   {\n      printf(\"Found item = %d\\n\", *item);\n   }\n   else \n   {\n      printf(\"Item = %d could not be found\\n\", *item);\n   }       \n   return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1420639984, "post_id": 27821316, "comment_id": 44048313, "body": "<code>ContactArray</code> is a pointer, so its size will always be the same."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420640073, "post_id": 27821316, "comment_id": 44048366, "body": "That <code>sizeof</code> trick can only be used with proper arrays (i.e. something declared like <code>struct Contact contacts[X];</code>), not with pointers, because <code>sizeof</code> of a pointer give you the size of the pointer and not what it points to. Every function that needs to know the size of the array need to have an argument that tells the number of entries in the array."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1420640193, "post_id": 27821316, "comment_id": 44048438, "body": "You can have a <code>count</code> field in your structure and use it for this purpose"}], "answers": [{"tags": [], "owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "is_accepted": false, "score": 1, "last_activity_date": 1420640112, "last_edit_date": 1495542684, "creation_date": 1420640112, "answer_id": 27821394, "question_id": 27821316, "link": "https://stackoverflow.com/questions/27821316/struct-pointer-into-struct-array/27821394#27821394", "title": "Struct pointer into struct array", "body": "<p>Arrays that are passed to a function are treated as pointers, so <code>sizeof(contactArray)</code> will always be the size of a pointer to <code>struct Contact</code> - a constant value. <a href=\"https://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\">See here for more info</a>.</p>\n\n<p>You should add a parameter to the function called <code>size</code> that will represent the size of the array. It is impossible to otherwise calculate it inside the method.</p>\n\n<p>You can also wrap an array of contacts in another struct, <code>struct Contacts</code> for instance, and include a field specifying the number of contacts.</p>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "reply_to_user": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1420642923, "post_id": 27821416, "comment_id": 44050182, "body": "@Daniel: Ouch, my bad. I edited the answer and removed the C++ specific parts."}], "tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": 0, "last_activity_date": 1420642885, "last_edit_date": 1420642885, "creation_date": 1420640155, "answer_id": 27821416, "question_id": 27821316, "link": "https://stackoverflow.com/questions/27821316/struct-pointer-into-struct-array/27821416#27821416", "title": "Struct pointer into struct array", "body": "<p>Your array size is dynamic. <code>sizeof(ContactArray)</code> will return the same as <code>sizeof(void*)</code>, because you're dealing with a pointer, not a fixed size array. C doesn't provide a method to determine the size of your array. You need to store the size of the array somewhere and pass it along.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1420640214, "creation_date": 1420640214, "answer_id": 27821432, "question_id": 27821316, "link": "https://stackoverflow.com/questions/27821316/struct-pointer-into-struct-array/27821432#27821432", "title": "Struct pointer into struct array", "body": "<p>In your code</p>\n\n<pre><code>int howManyContacts=sizeof(ContactArray)/sizeof(struct Contact);\n</code></pre>\n\n<p><code>ContactArray</code> is of type <em>pointer-to-some-type</em> [<code>struct Contact</code>, to be specific]. It will occupy the size of a <em>pointer</em>.</p>\n\n<p>OTOH, <code>struct Contact</code> is a structure. <code>sizeof</code> will give the total size of the individual elements + padding [if any].</p>\n\n<p>In your case, <code>sizeof(ContactArray)</code> [size taken by a pointer variable] is <code>&lt;</code> <code>sizeof(struct Contact)</code> and as <code>sizeof</code> returns <code>size_t</code> [<code>unsigned int</code>], due to the <em>integer division</em> performed in your code, the result you're getting is <code>0</code>, rightly.</p>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "edited": false, "score": 0, "creation_date": 1420644521, "post_id": 27821729, "comment_id": 44051280, "body": "You should include as an edit into your original question. Besides, this code looks good to me... Doesn&#39;t it work?"}], "tags": [], "owner": {"reputation": 11, "user_id": 4329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf4d1b0e7899e9d17dd2d73b0556e41?s=128&d=identicon&r=PG", "display_name": "Erneman", "link": "https://stackoverflow.com/users/4329524/erneman"}, "is_accepted": false, "score": 0, "last_activity_date": 1420641205, "creation_date": 1420641205, "answer_id": 27821729, "question_id": 27821316, "link": "https://stackoverflow.com/questions/27821316/struct-pointer-into-struct-array/27821729#27821729", "title": "Struct pointer into struct array", "body": "<p>Ok then how can I dereference the pointer that way, that I can use it this way:</p>\n\n<pre><code>printf(\"%s \\n\",ContactArray[x].Name);\nprintf(\"%s \\n\",ContactArray[x].Surname);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf4d1b0e7899e9d17dd2d73b0556e41?s=128&d=identicon&r=PG", "display_name": "Erneman", "link": "https://stackoverflow.com/users/4329524/erneman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "closed_date": 1420641294, "answer_count": 4, "score": 0, "last_activity_date": 1420642885, "creation_date": 1420639861, "question_id": 27821316, "link": "https://stackoverflow.com/questions/27821316/struct-pointer-into-struct-array", "closed_reason": "Duplicate", "title": "Struct pointer into struct array", "body": "<p>I can't find any solution to my problem and my brain is almost exploding...</p>\n\n<p>I have defined a struct and a function to create contacts, like a adress book.\nI'm asking how many contacts want to be created and this totally works fine.</p>\n\n<p>So I end up with an array of Contacts which pointer i give to my menue.\nIn my menue I can choose to create a contact, search and delete a contact.</p>\n\n<p>Currently I'm working on searching a contact.\nSo I start the search function and give it the pointer on my Struct.</p>\n\n<p>I have no clue how to dereference this pointer into an array of structs again.\nIt's probably just a stupid small little error, but I can't find it.</p>\n\n<p>So I first tried to find out how many Contacts I created.\nWhen I try to print the number of created contacts like this:</p>\n\n<pre><code>    void searchContact(struct Contact* ContactArray){\n      int howManyContacts=sizeof(ContactArray)/sizeof(struct Contact);\n      printf(\"%d\",howManyContacts);\n     }\n</code></pre>\n\n<p>I always get 0 printed out.\nDoesn't matter if I create 1,2,3....Contacts</p>\n\n<p>I hope someone of you can help me...It's driving me crazy</p>\n\n<p>By the way, I'm using Eclipse with GCC compiler</p>\n"}, {"tags": ["c", "visual-studio", "postgresql", "dll"], "comments": [{"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1420642105, "post_id": 27820964, "comment_id": 44049652, "body": "See also a blog article I wrote on this recently: <a href=\"http://blog.2ndquadrant.com/compiling-postgresql-extensions-visual-studio-windows/\" rel=\"nofollow noreferrer\">blog.2ndquadrant.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 4169361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659d8209347c59d842925d83d7e7f1ce?s=128&d=identicon&r=PG&f=1", "display_name": "UchuuStranger", "link": "https://stackoverflow.com/users/4169361/uchuustranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1420646673, "creation_date": 1420646673, "answer_id": 27823503, "question_id": 27820964, "link": "https://stackoverflow.com/questions/27820964/creating-a-c-function-dll-for-postgresql-database-on-windows-64-bit-using-micros/27823503#27823503", "title": "Creating a C function dll for PostgreSQL database on Windows 64 bit using Microsoft Visual Studio", "body": "<p>Hm, my classmate checked my settings and it seems that Microsoft SDKs folders from included paths causes these errors for some weird reason, despite the fact that instruction states them being necessary. He doesn't remember where exactly he found this information though.\nNevertheless, the problem is solved. The progect builds successfully without paths to Microsoft SDKs folders, and usage of resulting dll successfully creates function in database.\nIf somebody knew the reason of this conflict in libraries, I would still like to know.</p>\n"}], "owner": {"reputation": 45, "user_id": 4169361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659d8209347c59d842925d83d7e7f1ce?s=128&d=identicon&r=PG&f=1", "display_name": "UchuuStranger", "link": "https://stackoverflow.com/users/4169361/uchuustranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420646673, "creation_date": 1420638621, "question_id": 27820964, "link": "https://stackoverflow.com/questions/27820964/creating-a-c-function-dll-for-postgresql-database-on-windows-64-bit-using-micros", "title": "Creating a C function dll for PostgreSQL database on Windows 64 bit using Microsoft Visual Studio", "body": "<p>I'm trying to create my first dll according to instructions given here: <a href=\"https://en.scribd.com/doc/40725510/Build-PostgreSQL-C-Functions-on-Windows\" rel=\"nofollow\">https://en.scribd.com/doc/40725510/Build-PostgreSQL-C-Functions-on-Windows</a>\nThe function is simple and it is working on other computer.</p>\n\n<pre><code>#include \"postgres.h\"\n#include \"fmgr.h\"\n#include &lt;windows.h&gt;\n\n#ifdef PG_MODULE_MAGIC\nPG_MODULE_MAGIC;\n#endif\n\n#if defined(_WIN32)\n#define DLLEXPORT __declspec(dllexport) \n#else\n#define DLLEXPORT\n#endif\n\n#define WIN32_LEAN_AND_MEAN\n#define NOCOMM\n\nPG_FUNCTION_INFO_V1(fibbonachi);\nDLLEXPORT Datum\nfibbonachi(PG_FUNCTION_ARGS)\n{\n    int32 arg = PG_GETARG_INT32(0);\n    if (arg &gt; 0 &amp;&amp; arg &lt; 100)\n    {\n        if (arg == 1 || arg == 2)\n            PG_RETURN_INT32(1);\n        else\n        {\n            int arr[100];\n            arr[0] = 1;\n            arr[1] = 1;\n            for (int i = 2; i &lt; arg; i++)\n                arr[i] = arr[i - 1] + arr[i - 2];\n            PG_RETURN_INT32(arr[arg - 1]);\n        }\n    }\n    else\n        PG_RETURN_INT32(0);\n}\n</code></pre>\n\n<p>As long as I use Win32 as Active Solution Platform in Configuration Manager, the build succeeds. However, when I try to create function in pgAdmin by following code:</p>\n\n<pre><code>CREATE or REPLACE FUNCTION fibbonachi(integer) RETURNS integer \nAS E'D:\\\\Homework\\\\Databases\\\\PostgreSQL_dll\\\\Debug\\\\PostgreSQL_dll.dll', 'fibbonachi'\nLANGUAGE C STRICT;\n</code></pre>\n\n<p>I get an error \"%1 is not a valid Win32 application\". That is expected, because I use 64 bit version of PostgreSQL. But if I switch the Solution Platform to x64 (which is necessary to correct the error if I'm not mistaken), the attempt to build the progect results in 32 errors of \"unresolved external symbols\" in file MSVCRTD.lib. I've found discussion about similar problem here: <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/c1553a42-7d1e-4c74-9156-95768a72e4df/unresolved-externals-after-upgrading-from-vs2008-to-vs2010?forum=vcgeneral\" rel=\"nofollow\">https://social.msdn.microsoft.com/Forums/vstudio/en-US/c1553a42-7d1e-4c74-9156-95768a72e4df/unresolved-externals-after-upgrading-from-vs2008-to-vs2010?forum=vcgeneral</a>\nIt seems that errors are caused by conflicting libraries from different versions of Visual Studio, but reinstallation didn't help, and I have no idea how to correct the paths manually (and I am still not entirely sure that my problem is the same). The paths I use are the same as in the instruction, but they use 64 bit version of PostgreSQL instead:</p>\n\n<pre><code>C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Include\nC:\\Program Files\\PostgreSQL\\9.3\\include\\server\\port\\win32\nC:\\Program Files\\PostgreSQL\\9.3\\include\\server\\port\nC:\\Program Files\\PostgreSQL\\9.3\\include\\server\nC:\\Program Files\\PostgreSQL\\9.3\\include\\internal\n+directory of dummy header libintl.h\n</code></pre>\n\n<p>Any ideas of how to sucsessfully build the x64 progect?</p>\n"}, {"tags": ["c", "openmp", "vectorization", "intel", "hpc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1420638788, "post_id": 27820959, "comment_id": 44047561, "body": "More cores and more threads does not automatically mean better performance. First of all, there&#39;s more locking between the threads, then there might be caching problems, as well as possible latencies due to more threads being dispatched."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 5, "creation_date": 1420638791, "post_id": 27820959, "comment_id": 44047563, "body": "You&#39;re not going to get much advice without posting your code."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 3, "creation_date": 1420638941, "post_id": 27820959, "comment_id": 44047649, "body": "&quot;Could someone please direct me to the aspects of the code that I can improve on?&quot; How would that even be possible without seeing your code?"}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 3, "creation_date": 1420639004, "post_id": 27820959, "comment_id": 44047695, "body": "If you are looking for a resource on vectorization/optimization for a Xeon processor, that is off topic.  If you have a section of your code that you can pinpoint as causing a performance issue (try profiling) then people can offer some concrete advice."}, {"owner": {"reputation": 173, "user_id": 995323, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/20fc6a530cacca4a6df74492c1dc172e?s=128&d=identicon&r=PG", "display_name": "Prapanch Nair", "link": "https://stackoverflow.com/users/995323/prapanch-nair"}, "edited": false, "score": 0, "creation_date": 1420641618, "post_id": 27820959, "comment_id": 44049349, "body": "I have edited and added a part of the code. I am basically looking for some guidance, a book, a reference or something that helps me attack systematically, the possible performance weakpoints. I really appreciate your patience."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 2, "creation_date": 1420707490, "post_id": 27820959, "comment_id": 44076939, "body": "It&#39;s good you added some code but it&#39;s not sufficient. What sections of your code are you parallelizing? Do you get the correct result with and without OpenMP? What exactly is your i7 desktop processor? Your E5-2650 does not have 16 cores, it has 8 cores and 16 hyper threads. Can you add this information to your question?"}], "answers": [{"tags": [], "owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "is_accepted": false, "score": 1, "last_activity_date": 1421038769, "creation_date": 1421038769, "answer_id": 27895559, "question_id": 27820959, "link": "https://stackoverflow.com/questions/27820959/c-code-under-performance-on-intel-xeon-e5-2650/27895559#27895559", "title": "C code under performance on Intel Xeon E5-2650", "body": "<p>The example code appears to be using an array of structs, which is a classic under-performing motif for N-body simulations, among other things.  You should read up on AoS-to-SoA transformations, where SoA is struct-of-arrays and is almost always the right way to compute what I think you are trying to compute.</p>\n\n<p>In addition to using the AoS motif, your loop is full of code with large amounts of indirection.  You should look up the assembly for <code>(&amp;pdata[a].acc.x)[i]</code> and see exactly how many instructions it takes just to assign to this quantity.</p>\n\n<p>If there are loop invariants, you should pull them out of your loop and potentially replace these highly indirect access with ones using a single pointer and then iterating through the data using that pointer.  I don't know how easy that is to do or how well it will work, but that's where I'd start if I were you.</p>\n\n<p>There are a number of Google hits for \"AoS-to-SoA transformations\"; among them is <a href=\"https://software.intel.com/en-us/articles/memory-layout-transformations\" rel=\"nofollow\">https://software.intel.com/en-us/articles/memory-layout-transformations</a>, which seems particularly relevant to your case.</p>\n"}], "owner": {"reputation": 173, "user_id": 995323, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/20fc6a530cacca4a6df74492c1dc172e?s=128&d=identicon&r=PG", "display_name": "Prapanch Nair", "link": "https://stackoverflow.com/users/995323/prapanch-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421038769, "creation_date": 1420638610, "last_edit_date": 1420701743, "question_id": 27820959, "link": "https://stackoverflow.com/questions/27820959/c-code-under-performance-on-intel-xeon-e5-2650", "title": "C code under performance on Intel Xeon E5-2650", "body": "<p>I have a c code (Open MP parallelized) that takes more than twice as much time to run on an Intel Xeon E5-2650 node (with all 16 cores) as it takes on a desktop with intel i 7 processor. With standard benchmark cases my compute node gives satisfactory performance. I realize this has something to do with the efficiency of my code, to run on modern processors. Could someone please direct me to the aspects of the code that I can improve on? I have come accross issues like vectorization, however I have not been able to find a neat step by step tutorial or document on such things. \nAbout the code:</p>\n\n<p>The code is a simulation-particles interacting with each other. After identifying neighborhoods, they interact, compute and store data. The particles are an array of structs. An example interaction function looks like this. </p>\n\n<pre><code>static void interact(particleData *pdata, int a, int b, interactParams params)\n{\n\n  int i;\n  double rdotdwdx = 0.0, vdotr =0.0;\n  for(i=0;i&lt;dim;i++){\n    rdotdwdx += (&amp;params.xr.x)[i]*(&amp;params.dwdx.x)[i];\n    vdotr += (&amp;params.vr.x)[i]*(&amp;params.xr.x)[i];\n  }\n  double Fab = vdotr/(params.rdotr + 0.0001*params.h*params.h);\n  double acc;\n\n  for(i = 0; i &lt; dim; i++){\n\n    acc = 8.*(((pdata[a].eta/pdata[a].rho)+(pdata[b].eta/pdata[b].rho)) /(pdata[a].rho+pdata[b].rho))*Fab*(&amp;params.dwdx.x)[i];\n    (&amp;pdata[a].acc.x)[i] +=  acc*pdata[b].mass;\n    (&amp;pdata[b].acc.x)[i] += -acc*pdata[a].mass;\n    }\n  }\n}\n</code></pre>\n\n<p>Here pdata is an array of struct. acc is a member of pdata[i] and is has members x, y and z. The struct pdata has many other data members too. The members of data param involves math functions like pow. \nThe above posted code is one of the parts that shows up in my profiler as consuming maximum time. </p>\n\n<p>The compiler I used in both machines is gcc. </p>\n\n<p>Thank you. I appreciate your patience</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1420636614, "post_id": 27820387, "comment_id": 44046334, "body": "<code>#define 5+2</code> what is that? what is <code>x</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1420636662, "post_id": 27820387, "comment_id": 44046360, "body": "Please compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code>). The compiler should have warned you. Then learn how to use the debugger."}, {"owner": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420636712, "post_id": 27820387, "comment_id": 44046385, "body": "I have edited my code.Please check again.Sorry for the typo"}], "answers": [{"comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1420636918, "post_id": 27820422, "comment_id": 44046486, "body": "better change to <code>#define x (5+2)</code>. Then using <code>x</code> anywhere would lead to the expected results"}, {"owner": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637033, "post_id": 27820422, "comment_id": 44046555, "body": "Got it :) Thanks for answering :) Can you cite any resource where I could learn about #define and it&#39;s functioning?"}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637112, "post_id": 27820422, "comment_id": 44046598, "body": "@Rishu You&#39;re welcome! It&#39;s not a define problem, it the precedence of the operators, i put a link in my answer so you can check it out!"}, {"owner": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637340, "post_id": 27820422, "comment_id": 44046754, "body": "@Rizier123 : Thanks ! Yes, I understood its about precedence.I have no understanding about #define either, could you cite any source if possible.Will appreciate :) Thanks"}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637485, "post_id": 27820422, "comment_id": 44046843, "body": "@Rishu For sure check this out: <a href=\"http://www.cplusplus.com/doc/tutorial/preprocessor/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/preprocessor</a> It&#39;s about the C preprocessor Directives (including <code>#define</code>)"}], "tags": [], "owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "is_accepted": false, "score": 5, "last_activity_date": 1420637050, "last_edit_date": 1420637050, "creation_date": 1420636694, "answer_id": 27820422, "question_id": 27820387, "link": "https://stackoverflow.com/questions/27820387/why-my-code-giving-a-wrong-output/27820422#27820422", "title": "Why my code giving a wrong output?", "body": "<p>This is why it's 27 and not 343: <code>.</code> before <code>-</code>! So look at this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define x 5+2\n\nint main() {\n\n    int p;\n    p = x*x*x;  //5 + 2*5 + 2*5 + 2 -&gt; 5 + (2*5) + (2*5) + 2 -&gt; 5 + 10 + 10 + 2 = 27\n\n    printf(\"%d\",p);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>You would have to change it to this:</p>\n\n<pre><code>p = (x)*(x)*(x);\n</code></pre>\n\n<p>Or define it with this line:</p>\n\n<pre><code>#define x (5+2)\n</code></pre>\n\n<p>So that the result is 343 </p>\n\n<p>As a reference take a look here to the C Operator precedene: <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">http://en.cppreference.com/w/c/language/operator_precedence</a></p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420637021, "post_id": 27820427, "comment_id": 44046548, "body": "No good reason for downvoting, what is wrong with this answer?"}, {"owner": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637166, "post_id": 27820427, "comment_id": 44046631, "body": "I didn&#39;t downvote pal! I haven&#39;t much reputation to downvote even. Though I am wondering as a beginner ,was this question really poor one that I got 2 downvotes :) Anyways thanks for answering :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637292, "post_id": 27820427, "comment_id": 44046715, "body": "@Rishu it wasn&#39;t you for sure, but apparently some one just did it becase thy hace so much reputation they want to get rid of it :), It&#39;s just that if there is something wrong in this answer I&#39;d like to know."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "edited": false, "score": 0, "creation_date": 1420637453, "post_id": 27820427, "comment_id": 44046824, "body": "@Rishu, you need to read about the c preprocessor, see my answer, now i added a link."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1420637390, "last_edit_date": 1420637390, "creation_date": 1420636702, "answer_id": 27820427, "question_id": 27820387, "link": "https://stackoverflow.com/questions/27820387/why-my-code-giving-a-wrong-output/27820427#27820427", "title": "Why my code giving a wrong output?", "body": "<p><code>x * x * x</code> with <code>#define x 5 + 2</code> will expand to</p>\n\n<pre><code>p = 5 + 2 * 5 + 2 * 5 + 2\n</code></pre>\n\n<p>and hence you will have <code>5 + 10 + 10 + 2 = 27</code>, you have to add parentheses</p>\n\n<pre><code>#define x (5 + 2)\n</code></pre>\n\n<p>and then it will expand to</p>\n\n<pre><code>p = (5 + 2) * (5 + 2) * (5 + 2) // -&gt; 7 * 7 * 7 -&gt; 343\n</code></pre>\n\n<p><code>#define</code> does not define variables, it defines macros.</p>\n\n<p>You can read about the <a href=\"https://gcc.gnu.org/onlinedocs/cpp/\" rel=\"nofollow\">c preprocessor</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1420636717, "creation_date": 1420636717, "answer_id": 27820437, "question_id": 27820387, "link": "https://stackoverflow.com/questions/27820387/why-my-code-giving-a-wrong-output/27820437#27820437", "title": "Why my code giving a wrong output?", "body": "<p>After macro expansion  </p>\n\n<pre><code>p=x*x*x;  \n</code></pre>\n\n<p>will be  </p>\n\n<pre><code>p = 5+2*5+2*5+2;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1501, "user_id": 2598244, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/XwqXh.jpg?s=128&g=1", "display_name": "Md Mohsin", "link": "https://stackoverflow.com/users/2598244/md-mohsin"}, "is_accepted": false, "score": 4, "last_activity_date": 1420637141, "last_edit_date": 1420637141, "creation_date": 1420636797, "answer_id": 27820457, "question_id": 27820387, "link": "https://stackoverflow.com/questions/27820387/why-my-code-giving-a-wrong-output/27820457#27820457", "title": "Why my code giving a wrong output?", "body": "<pre><code>p = 5+2*5+2*5+2\n</code></pre>\n\n<p>ans: 27</p>\n\n<p>use:</p>\n\n<pre><code>#define x (5+2)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4083666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2b71b3a52c5a14d5e85322c08c5f64e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu", "link": "https://stackoverflow.com/users/4083666/rishu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1420638911, "answer_count": 4, "score": -2, "last_activity_date": 1448620309, "creation_date": 1420636577, "last_edit_date": 1448620309, "question_id": 27820387, "link": "https://stackoverflow.com/questions/27820387/why-my-code-giving-a-wrong-output", "closed_reason": "Duplicate", "title": "Why my code giving a wrong output?", "body": "<p>I am running the code below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define x 5+2\n\nint main() {\n\n    int p;\n    p = x*x*x;\n    printf(\"%d\",p);\n\n}\n</code></pre>\n\n<p>I was expecting <code>343</code> as the output, but the answer is <code>27</code>. Why so? I am unable to figure it out why it's happening. Please help.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1420638500, "post_id": 27820359, "comment_id": 44047408, "body": "Good, but the order of <code>free</code> is <i>not</i> swapable: <code>free(*p);</code> should be <i>before</i> <code>free(p)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "edited": false, "score": 1, "creation_date": 1420636875, "post_id": 27820384, "comment_id": 44046463, "body": "Oh, I see. <code>p</code> is typecasted from <code>int**</code> to <code>void*</code> implicitly. Thanks."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 1, "last_activity_date": 1420636569, "creation_date": 1420636569, "answer_id": 27820384, "question_id": 27820359, "link": "https://stackoverflow.com/questions/27820359/deallocating-all-memory-space-that-the-pointer-to-pointer-points-to/27820384#27820384", "title": "Deallocating all memory space that the pointer to pointer points to?", "body": "<p><code>void *</code> is generic pointer, i.e, it can point to any pointer type. No need to cast <code>p</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "edited": false, "score": 0, "creation_date": 1420637215, "post_id": 27820507, "comment_id": 44046664, "body": "Do you want to say &quot;... implicitly cast to <code>void*</code> unless it is a pointer type&quot; ?"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "edited": false, "score": 0, "creation_date": 1420637960, "post_id": 27820507, "comment_id": 44047109, "body": "I don&#39;t think so. All pointers are pointer types! We&#39;re talking about pointers that point to pointer types."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1420638384, "post_id": 27820507, "comment_id": 44047347, "body": "But if you want to throw away a box of boxes you can just throw away the outermost box, not so with pointers..."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1420638652, "post_id": 27820507, "comment_id": 44047488, "body": "@rubenvb: Very true.  I suppose it&#39;s more like if you had a note telling you where your kept your notebook it would still be a note despite being a note about notes. If you threw the note away the notebook would be lost! You need to find the notebook and put it in recycling before throwing the note away!"}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1420637892, "last_edit_date": 1420637892, "creation_date": 1420637005, "answer_id": 27820507, "question_id": 27820359, "link": "https://stackoverflow.com/questions/27820359/deallocating-all-memory-space-that-the-pointer-to-pointer-points-to/27820507#27820507", "title": "Deallocating all memory space that the pointer to pointer points to?", "body": "<p>\"So why not use <code>free((void*)p)</code> to deallocate memory space instead of using <code>free(p)</code>?\"</p>\n\n<p>Because p is a pointer. A pointer <strong>to</strong> a pointer, I'll grant you. But a pointer all the same!</p>\n\n<p>If you have a box for holding boxes, it's still a box. A box for boxes.</p>\n\n<p>It would be outright bizarre if the rule was \"All pointer types can be implicitly cast to <code>void*</code> unless they point to a pointer type\"!</p>\n"}], "owner": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 27820384, "answer_count": 2, "score": 0, "last_activity_date": 1420637892, "creation_date": 1420636495, "question_id": 27820359, "link": "https://stackoverflow.com/questions/27820359/deallocating-all-memory-space-that-the-pointer-to-pointer-points-to", "title": "Deallocating all memory space that the pointer to pointer points to?", "body": "<p>I am confused about deallocating all memory space that the pointer to pointer points to.</p>\n\n<p>For example, there is a pointer to pointer as follows:</p>\n\n<pre><code>int **p;                      //  +-----+      +-----+      +-----+-----+-----+\np  = malloc(sizeof(int*));    //  |  p  |-----&gt;|     |-----&gt;|     |     |     |\n*p = calloc(3, sizeof(int));  //  +-----+      +-----+      +-----+-----+-----+\n</code></pre>\n\n<p>AFAIK, the right way to deallocate all memory space is</p>\n\n<pre><code>free(*p);\nfree(p);   // The order is unchangeable.\n</code></pre>\n\n<p><code>void free (void* ptr)</code> deallocates the memory space that <code>ptr</code> points to, but p is a pointer to pointer, so why not use <code>free((void*)p)</code> to deallocate memory space instead of using <code>free(p)</code>?</p>\n"}, {"tags": ["c", "bit-manipulation"], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1420635953, "post_id": 27820192, "comment_id": 44045985, "body": "You beat me by 2 seconds! ;-)"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1420635987, "post_id": 27820192, "comment_id": 44046002, "body": "@PaulR: Haha, yes I did. And the answers are more or less identical :)"}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636150, "post_id": 27820192, "comment_id": 44046094, "body": "And here you probably want an unsigned, not an int since shifting negative numbers isn&#39;t well defined :/"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636267, "post_id": 27820192, "comment_id": 44046152, "body": "@tux3: he&#39;s only shifting the <i>mask</i>, so in this case it doesn&#39;t really matter whether <code>value</code> is signed or not."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636412, "post_id": 27820192, "comment_id": 44046230, "body": "@tux3: I&#39;m shifting a positive number (1), and I&#39;m shifting it <b>to the left</b>. What&#39;s not well defined in that other than shifting it more then 31 bits (which would yield an undefined result regardless of the sign)?"}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636457, "post_id": 27820192, "comment_id": 44046244, "body": "Nothing. But if you&#39;re shifting only positive numbers, why not take an unsigned instead of an int ?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1420636540, "post_id": 27820192, "comment_id": 44046288, "body": "@barakmanos: heh - you could make it <code>1U</code>, but it really makes no difference in this example - I think tux3 is just having a bad day."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1420636557, "post_id": 27820192, "comment_id": 44046304, "body": "Oh right I&#39;m an idiot, I misread that. Disregard what I said. @PaulR I blame sleep deprivation :)"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1420636651, "post_id": 27820192, "comment_id": 44046357, "body": "@PaulR: Somehow, when I wrote the answer, I had a feeling that it would circulate arguments about the size of the input value, its sign, etc."}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": true, "score": 4, "last_activity_date": 1420635906, "creation_date": 1420635906, "answer_id": 27820192, "question_id": 27820149, "link": "https://stackoverflow.com/questions/27820149/set-last-n-bits-in-c/27820192#27820192", "title": "Set last n bits in C", "body": "<p>Try this:</p>\n\n<pre><code>int SetLastBits(int value,int numOfBits)\n{\n    return value | ((1&lt;&lt;numOfBits)-1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420635988, "post_id": 27820193, "comment_id": 44046003, "body": "Why uintX_t instead of a simple unsigned ? Especially since 32bit systems are getting less and less common."}, {"owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "edited": false, "score": 1, "creation_date": 1420635995, "post_id": 27820193, "comment_id": 44046010, "body": "And you beat <i>me</i> 24 seconds... I will go back to practicing faster typing :P"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636087, "post_id": 27820193, "comment_id": 44046057, "body": "@tux3: well most 64 bit systems are LP64, where int is still 32 bits, but regardless of that it&#39;s usually a good idea to specify the size of an int type, rather than leaving it to fate. Feel free to adapt the example to your specific needs, of course."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636328, "post_id": 27820193, "comment_id": 44046187, "body": "I disagree, most of the time I want my variables to grow or shrink with whatever the target model is. When you do need to specify the exact size then yes, but simple arithmetic isn&#39;t one of those cases imo. You may run in performance issues with uintX_t."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636462, "post_id": 27820193, "comment_id": 44046249, "body": "@tux3: as I said, feel free to adapt the example to your needs - the purpose is to show how to set the last n bits rather than a philosophical exercise on the merits of fixed width versus indeterminate width ints."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420636625, "post_id": 27820193, "comment_id": 44046342, "body": "Sure, I&#39;m just nitpicking."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1420636722, "post_id": 27820193, "comment_id": 44046393, "body": "No problem - I can a be a bit of a pedant at times too - I think it goes with the territory when you&#39;re a software engineer. ;-)"}, {"owner": {"reputation": 5071, "user_id": 1124744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2f7980bcb4c6b1c604cd0f3424f06f84?s=128&d=identicon&r=PG", "display_name": "paulm", "link": "https://stackoverflow.com/users/1124744/paulm"}, "edited": false, "score": 1, "creation_date": 1420636886, "post_id": 27820193, "comment_id": 44046468, "body": "change it to a template and then you can use whatever type you like :P"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 5071, "user_id": 1124744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2f7980bcb4c6b1c604cd0f3424f06f84?s=128&d=identicon&r=PG", "display_name": "paulm", "link": "https://stackoverflow.com/users/1124744/paulm"}, "edited": false, "score": 0, "creation_date": 1420636930, "post_id": 27820193, "comment_id": 44046496, "body": "@paulm: if the question were tagged <code>C++</code> I surely would. ;-)"}, {"owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "edited": false, "score": 1, "creation_date": 1420637105, "post_id": 27820193, "comment_id": 44046591, "body": "Just out of curiosity - how did you turn out to have less upvotes than the other two similar answers? I am giving you one to restore balance (ommmmmm)"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1420637165, "last_edit_date": 1420637165, "creation_date": 1420635908, "answer_id": 27820193, "question_id": 27820149, "link": "https://stackoverflow.com/questions/27820149/set-last-n-bits-in-c/27820193#27820193", "title": "Set last n bits in C", "body": "<p>You can do it like this:</p>\n\n<pre><code>uint32_t set_last_n_bits(uint32_t x, uint32_t bits)\n{\n    return x | ((1U &lt;&lt; bits) - 1U);\n}\n</code></pre>\n\n<p>This is also a relatively rare case where a macro might be justifiable, on the grounds that it would work with different integer types.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420636613, "post_id": 27820198, "comment_id": 44046333, "body": "1 &lt;&lt; 5 is 100000 minus 1 is 11111 Of course, shifting by n bits gives me one bit more than I need. Sometimes it can be so simple..."}, {"owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "reply_to_user": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 2, "creation_date": 1420636925, "post_id": 27820198, "comment_id": 44046489, "body": "@kernelpanic it is not fair that you accept my answer. I was slower by 26 seconds and as can be seen by comments barak manos is the one to deserve accept."}, {"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 1, "creation_date": 1420637049, "post_id": 27820198, "comment_id": 44046563, "body": "Fixed that. Thank you all, anyways!"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1420637164, "post_id": 27820198, "comment_id": 44046628, "body": "Your honesty is admirable! Thank you very much :)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "is_accepted": false, "score": 3, "last_activity_date": 1420635933, "creation_date": 1420635933, "answer_id": 27820198, "question_id": 27820149, "link": "https://stackoverflow.com/questions/27820149/set-last-n-bits-in-c/27820198#27820198", "title": "Set last n bits in C", "body": "<p>You can set the last n bits of a number to 1 in the following manner:</p>\n\n<pre><code>int num = 5; // number of bits to set to 1\n\nint val = &lt;some_value&gt;;\n\nval |= (1 &lt;&lt; num) - 1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420637367, "post_id": 27820451, "comment_id": 44046768, "body": "As I understand it, ~( 1 &lt;&lt; n) should also work? Is there a bigger meaning to this fancy way of saying 1?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420637583, "post_id": 27820451, "comment_id": 44046897, "body": "@kernelpanic No, it will not work correctly because all bits before 1 will be set also to 1."}, {"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420637794, "post_id": 27820451, "comment_id": 44047017, "body": "So for n=5 mine would be 1...1011111 and yours would be 0...0000000, is this correct?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420637947, "post_id": 27820451, "comment_id": 44047094, "body": "@kernelpanic For n = 5 expression 1 &lt;&lt; n will give 00100000 and expression ~( 1&lt;&lt; 5 ) in turn will give 11011111. So you will get a wrong result."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420638150, "post_id": 27820451, "comment_id": 44047210, "body": "@kernelpanic As for expression  ~( ~0u &lt;&lt; 5 ); then ~0u is 11111111. ~0u &lt;&lt; 5 will be 11100000. And at last ~( ~0u &lt;&lt; 5 ) will be 00011111"}, {"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420638388, "post_id": 27820451, "comment_id": 44047350, "body": "Ah I see. Would you be so kind to explain why 1&lt;&lt;n results in 001(n*0) and not in 1(n*0)?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420638693, "post_id": 27820451, "comment_id": 44047511, "body": "@kernelpanic Operator &lt;&lt; shifts internal representation of an integer number left filling right poistions with zeroes. So if you have number 00000001 that is internal representation of 1 (I will consider onky 8 bits) then shifting it one position left results in 00000010"}, {"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420639344, "post_id": 27820451, "comment_id": 44047897, "body": "Of course, that makes perfect sense. I somehow overlooked that a number is always filled to system width/data type width. Thank you very much! I would like to give you an upvote for creativity but have not enough reputation."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1420637266, "last_edit_date": 1420637266, "creation_date": 1420636779, "answer_id": 27820451, "question_id": 27820149, "link": "https://stackoverflow.com/questions/27820149/set-last-n-bits-in-c/27820451#27820451", "title": "Set last n bits in C", "body": "<p>As all others have showed the same approach I will show one more approach</p>\n\n<pre><code>int value;\n\n//...\n\nvalue |= ~( ~0u &lt;&lt; n );\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint set_bits( int x, size_t n )\n{\n    return x | ~( ~0u &lt;&lt; n );\n}\n\nint main(void) \n{\n    int x = 12;\n\n    printf( \"%d\\t%d\\n\", x,  set_bits( x, 2 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>12  15\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 1, "accepted_answer_id": 27820192, "answer_count": 4, "score": 1, "last_activity_date": 1476358259, "creation_date": 1420635789, "question_id": 27820149, "link": "https://stackoverflow.com/questions/27820149/set-last-n-bits-in-c", "title": "Set last n bits in C", "body": "<p>I wan't to set the last n bits of any given number to 1. I have a number (which is variable in it's lenght) and a variable n.</p>\n\n<p>Example:</p>\n\n<pre><code>12 (dec) set last 2 bits\nOutput: 15\n</code></pre>\n\n<p>Now the basic operation should be something like:</p>\n\n<pre><code>return 0b11 | 12;\n</code></pre>\n\n<p>But how can I make 0b11 variable in length?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "winapi", "hardware"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1420634960, "post_id": 27819762, "comment_id": 44045413, "body": "See <a href=\"http://stackoverflow.com/questions/13927475/windows-how-to-enumerate-all-connected-usb-devices-device-path/13928035#13928035\" title=\"windows how to enumerate all connected usb devices device path\">stackoverflow.com/questions/13927475/&hellip;</a> for enumeration of USB devices."}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 0, "creation_date": 1420638670, "post_id": 27820293, "comment_id": 44047497, "body": "Are there any similar <b>NATIVE APIs</b>?"}, {"owner": {"reputation": 560, "user_id": 2298875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee55377361432664e5df25b5de5e46f4?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh Gopal", "link": "https://stackoverflow.com/users/2298875/rakesh-gopal"}, "reply_to_user": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 0, "creation_date": 1420643765, "post_id": 27820293, "comment_id": 44050737, "body": "@sonugupta The standard C specification doesn&#39;t provide APIs to list or interact with USB devices, if that&#39;s what you want. You should use a library to deal with USB. BTW, I&#39;ll edit my answer to include a solution for Unix-like systems."}], "tags": [], "owner": {"reputation": 560, "user_id": 2298875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee55377361432664e5df25b5de5e46f4?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh Gopal", "link": "https://stackoverflow.com/users/2298875/rakesh-gopal"}, "is_accepted": false, "score": 0, "last_activity_date": 1420644086, "last_edit_date": 1420644086, "creation_date": 1420636258, "answer_id": 27820293, "question_id": 27819762, "link": "https://stackoverflow.com/questions/27819762/api-to-list-all-connected-devices/27820293#27820293", "title": "API to list all connected devices?", "body": "<p>You can use SetupDiEnumDeviceInterfaces and SetupDiGetDeviceInterfaceDetail (<a href=\"http://msdn.microsoft.com/en-us/library/windows/hardware/ff551120%28v=vs.85%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/hardware/ff551120%28v=vs.85%29.aspx</a>) to get the details on windows.</p>\n\n<p>Here's a sample code: <a href=\"https://gist.github.com/rakesh-gopal/9ac217aa218e32372eb4\" rel=\"nofollow\">https://gist.github.com/rakesh-gopal/9ac217aa218e32372eb4</a></p>\n\n<pre><code>SetupDiEnumDeviceInterfaces(hDevInfo, NULL, &amp;GUID_DEVINTERFACE_USB_DEVICE,dwMemberIdx,  DevIntfData);\nSetupDiGetDeviceInterfaceDetail(hDevInfo, &amp;DevIntfData, NULL, 0, &amp;dwSize, NULL); \n</code></pre>\n\n<p>The idea is to repeatedly call SetupDiEnumDeviceInterfaces to get all the connected devices and then call SetupDiGetDeviceInterfaceDetail to get more details about the connected device.</p>\n\n<p>You can also use the libusb to get an output similar to lsusb on unix-like systems.\nRemember to compile with -lusb flag on.</p>\n\n<p>Here's code using libusb: <a href=\"https://gist.github.com/rakesh-gopal/12d4094e2b882b44cb1d\" rel=\"nofollow\">https://gist.github.com/rakesh-gopal/12d4094e2b882b44cb1d</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;usb.h&gt;\nmain(){\n    struct usb_bus *bus;\n    struct usb_device *dev;\n    usb_init();\n    usb_find_busses();\n    usb_find_devices();\n    for (bus = usb_busses; bus; bus = bus-&gt;next)\n        for (dev = bus-&gt;devices; dev; dev = dev-&gt;next){\n            printf(\"Trying device %s/%s\\n\", bus-&gt;dirname, dev-&gt;filename);\n            printf(\"\\tID_VENDOR = 0x%04x\\n\", dev-&gt;descriptor.idVendor);\n            printf(\"\\tID_PRODUCT = 0x%04x\\n\", dev-&gt;descriptor.idProduct);\n        }\n} \n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1697, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457018241, "creation_date": 1420634472, "last_edit_date": 1457018241, "question_id": 27819762, "link": "https://stackoverflow.com/questions/27819762/api-to-list-all-connected-devices", "title": "API to list all connected devices?", "body": "<p>I want to list all connected devices <strong>programatically</strong>.Basically,what i am trying to do is to check how many devices are connected at <strong>USB port and PS2 port.</strong></p>\n"}, {"tags": ["c", "shared-libraries"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1420634643, "post_id": 27819718, "comment_id": 44045245, "body": "If you read <a href=\"http://man7.org/linux/man-pages/man3/grantpt.3.html\" rel=\"nofollow noreferrer\">the manual page</a> you will see that you need the macro <code>_XOPEN_SOURCE</code> to be defined, and it&#39;s apparently not."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4310723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2453a40668d349276ef2da67ec8d5996?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4310723/michael"}, "edited": false, "score": 0, "creation_date": 1420681222, "post_id": 27819837, "comment_id": 44069197, "body": "Now it goes well! Thank you very much!"}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "reply_to_user": {"reputation": 59, "user_id": 4310723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2453a40668d349276ef2da67ec8d5996?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4310723/michael"}, "edited": false, "score": 1, "creation_date": 1420688359, "post_id": 27819837, "comment_id": 44070813, "body": "Thank you in stackoverflow is accepting answer and upvote them"}, {"owner": {"reputation": 579, "user_id": 870150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b567e03be435826b65c805bad55d00a8?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/870150/alex"}, "edited": false, "score": 0, "creation_date": 1617741731, "post_id": 27819837, "comment_id": 118389445, "body": "Ubuntu 20.04: #define _GNU_SOURCE instead of _XOPEN_SOURCE worked for me"}], "tags": [], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "is_accepted": false, "score": 2, "last_activity_date": 1420634782, "creation_date": 1420634782, "answer_id": 27819837, "question_id": 27819718, "link": "https://stackoverflow.com/questions/27819718/why-coudnt-i-use-function-grantpt-in-linux/27819837#27819837", "title": "Why coudn&#39;t I use function grantpt in Linux?", "body": "<pre><code>#define _XOPEN_SOURCE\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n//#include&lt;sys/poll.h&gt;\n\ntypedef unsigned long u_l;\n\nint main()\n{\n    int errno = grantpt(1);\n\n    printf(\"errno = %d\\n\", errno);\n\n    return 0;\n}\n</code></pre>\n\n<p>This code compiles without that warning</p>\n\n<p>See Man page <a href=\"http://linux.die.net/man/3/grantpt\" rel=\"nofollow\">http://linux.die.net/man/3/grantpt</a> clearly says that you need to define  <code>_XOPEN_SOURCE</code> before including <code>stdlib.h</code> for accessing <code>grantpt()</code></p>\n"}], "owner": {"reputation": 59, "user_id": 4310723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2453a40668d349276ef2da67ec8d5996?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4310723/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420634930, "creation_date": 1420634330, "last_edit_date": 1420634930, "question_id": 27819718, "link": "https://stackoverflow.com/questions/27819718/why-coudnt-i-use-function-grantpt-in-linux", "title": "Why coudn&#39;t I use function grantpt in Linux?", "body": "<p>I want to use function grantpt in my program. I include its header file <code>&lt;stdlib.h&gt;</code>, but the compiler still give me the <code>warning: implicit declaration of grantpt</code>, which means it cound't find the declaration in <code>stdlib.h</code>. I <code>grep</code> the header file and find the declaration:    </p>\n\n<pre><code>stdlib.h:920:extern int grantpt (int __fd) __THROW;  \n</code></pre>\n\n<p>And my glibc version is 2.17, the official manual says this function is included since version 2.1.</p>\n\n<p>Here is my test program:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef unsigned long u_l;  \n\nint main(){\n    int errno = grantpt(1);\n    printf(\"errno = %d\\n\", errno);\n    return 0;\n}\n</code></pre>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c++", "c", "multithreading", "thread-local-storage"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1420633560, "post_id": 27819460, "comment_id": 44044662, "body": "It&#39;s not possible without changing the library to use <i>thread local data</i> for the variable."}, {"owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1420634478, "post_id": 27819460, "comment_id": 44045143, "body": "It&#39;s possible if you do your own runtime linking and relocation. However it&#39;s not trivial and usually not worth the trouble."}, {"owner": {"reputation": 1684, "user_id": 205943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG", "display_name": "Dainius", "link": "https://stackoverflow.com/users/205943/dainius"}, "edited": false, "score": 0, "creation_date": 1420635072, "post_id": 27819460, "comment_id": 44045477, "body": "I know that it doesn&#39;t work with static or shared libs, that&#39;s why I want to know what options are there. Thread locals would be one way, though in my case I have some legacy lib, that I can&#39;t change."}, {"owner": {"reputation": 1684, "user_id": 205943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG", "display_name": "Dainius", "link": "https://stackoverflow.com/users/205943/dainius"}, "edited": false, "score": 0, "creation_date": 1420635214, "post_id": 27819460, "comment_id": 44045549, "body": "Calvin that sounds interesting (but more for fun :) ), I probably would better do a wrapper as separate process, then mess with linking"}, {"owner": {"reputation": 1684, "user_id": 205943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG", "display_name": "Dainius", "link": "https://stackoverflow.com/users/205943/dainius"}, "edited": false, "score": 0, "creation_date": 1421926951, "post_id": 27819460, "comment_id": 44552654, "body": "One simple think it&#39;s possible to do with dynamic loading is to rename (copy) dll to few files with different names and than load them via LoadLibrary()."}, {"owner": {"reputation": 1684, "user_id": 205943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG", "display_name": "Dainius", "link": "https://stackoverflow.com/users/205943/dainius"}, "edited": false, "score": 0, "creation_date": 1422271112, "post_id": 27819460, "comment_id": 44669445, "body": "Quite interesting think is that if rename dll and load all of them dynamically  , every will have its own memory."}], "answers": [{"tags": [], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "is_accepted": false, "score": 1, "last_activity_date": 1420635385, "creation_date": 1420635385, "answer_id": 27820019, "question_id": 27819460, "link": "https://stackoverflow.com/questions/27819460/use-different-static-lib-memory-for-win32-threads/27820019#27820019", "title": "Use different static lib memory for win32 threads", "body": "<p>Assuming you can change and recompile the code, you can mark the <code>value</code> static variable with either <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3.1/gcc/Thread-Local.html\" rel=\"nofollow\"><code>__thread</code></a> or with <code>thread_local</code> (C++11) or with <a href=\"http://msdn.microsoft.com/en-us/library/9w1sdazb.aspx\" rel=\"nofollow\"><code>__declspec(thread)</code></a> (MSVC). Then each thread will have a separate storage for the variable. </p>\n"}], "owner": {"reputation": 1684, "user_id": 205943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG", "display_name": "Dainius", "link": "https://stackoverflow.com/users/205943/dainius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420635625, "creation_date": 1420633417, "last_edit_date": 1420635625, "question_id": 27819460, "link": "https://stackoverflow.com/questions/27819460/use-different-static-lib-memory-for-win32-threads", "title": "Use different static lib memory for win32 threads", "body": "<p>I have some old C static lib which have code similar to:</p>\n\n<p>.h file</p>\n\n<pre><code>void setValue(int);\n</code></pre>\n\n<p>.c file</p>\n\n<pre><code>int value;\n\nvoid setValue(int i) { value = i; }\n</code></pre>\n\n<p>and from main app (written with c++) it's just invoked by calling (there's extern C include in header file of course)</p>\n\n<pre><code>setValue(42);\n</code></pre>\n\n<p>In single thread everything works just fine and of course if use same lib in 2 different threads \"value\" is shared between them. </p>\n\n<p>What would be best way to use separate memory for that lib for every thread?</p>\n\n<p>so if there would be 2 threads T1 and T2, it would work like:</p>\n\n<pre><code>T1.setValue(1); \nT2.setValue(2);\nT1.start();\nT2.start();\n\n// T1 works with value \"1\"\n// T2 works with value \"2\"\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "type-conversion"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1420633397, "post_id": 27819408, "comment_id": 44044587, "body": "compiled without warnings?"}, {"owner": {"reputation": 5283, "user_id": 1065835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wcLSP.jpg?s=128&g=1", "display_name": "Maksim Dmitriev", "link": "https://stackoverflow.com/users/1065835/maksim-dmitriev"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1420633671, "post_id": 27819408, "comment_id": 44044718, "body": "@SouravGhosh, there is two warnings about type incompatibility: <code>warning: passing argument 1 of &#39;sys_arch_sem_wait&#39; from incompatible pointer type [enabled by default]</code> and <code>warning: passing argument 1 of &#39;sys_arch_sem_wait&#39; makes pointer from integer without a cast [enabled by default]</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1420633739, "post_id": 27819408, "comment_id": 44044756, "body": "and then also, you chose to <i>ignore</i> them, right? Why? They are there for some reason isn&#39;t it? They are quite self-explaining , too. Don&#39;t blame the compiler. it did it&#39;s own job. We&#39;re the one <i>neglecting</i> that. :-)"}, {"owner": {"reputation": 5283, "user_id": 1065835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wcLSP.jpg?s=128&g=1", "display_name": "Maksim Dmitriev", "link": "https://stackoverflow.com/users/1065835/maksim-dmitriev"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1420634007, "post_id": 27819408, "comment_id": 44044921, "body": "@SouravGhosh, I didn&#39;t ignore the warnings. If you are good at C, you could clone my repository from <code>https:&#47;&#47;bitbucket.org&#47;MaksimDmitriev&#47;norootfirewall</code> and run <code>ndk-build</code> in the branch <code>unix</code>. You won&#39;t see the warnings."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1420634328, "post_id": 27819408, "comment_id": 44045065, "body": "I did not check the link, but a blind-shot, did you cross check that warnings are enabled in later case?"}, {"owner": {"reputation": 5283, "user_id": 1065835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wcLSP.jpg?s=128&g=1", "display_name": "Maksim Dmitriev", "link": "https://stackoverflow.com/users/1065835/maksim-dmitriev"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1420635408, "post_id": 27819408, "comment_id": 44045647, "body": "@SouravGhosh, I don&#39;t suppress warnings in Android.mk or Application.mk. I won&#39;t check if they are enabled or disabled in C because it would take me too long. If you make an answer out of your comments, I&#39;ll accept it"}], "answers": [{"comments": [{"owner": {"reputation": 5283, "user_id": 1065835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wcLSP.jpg?s=128&g=1", "display_name": "Maksim Dmitriev", "link": "https://stackoverflow.com/users/1065835/maksim-dmitriev"}, "edited": false, "score": 0, "creation_date": 1420710002, "post_id": 27823575, "comment_id": 44078249, "body": "I think I got you. <code>You are confusing the address-of operator (&amp;) with the dereferencing operator (*).</code> That was my mistake. So <code>&amp;sys_mutex_t</code> means <code>&amp;(*sys_sem)</code> which means the address of the pointer. And the address of the pointer corresponds to a double pointer"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5283, "user_id": 1065835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wcLSP.jpg?s=128&g=1", "display_name": "Maksim Dmitriev", "link": "https://stackoverflow.com/users/1065835/maksim-dmitriev"}, "edited": false, "score": 1, "creation_date": 1420724805, "post_id": 27823575, "comment_id": 44086899, "body": "Yes.  The address of a pointer is a pointer to a pointer. I prefer that terminology, or perhaps &quot;pointer pointer&quot;, but you could as well call it a double pointer."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1420646878, "creation_date": 1420646878, "answer_id": 27823575, "question_id": 27819408, "link": "https://stackoverflow.com/questions/27819408/struct-vs-struct-in-c-confusion-between-the-dereference-and-address-of-ope/27823575#27823575", "title": "struct ** vs struct * in C. Confusion between the dereference and address-of operators", "body": "<p>Given the macros presented, this ...</p>\n\n<pre><code>sys_mutex_lock(&lt;arg&gt;);\n</code></pre>\n\n<p>... is equivalent to ...</p>\n\n<pre><code>sys_arch_sem_wait(&lt;arg&gt;, 0);\n</code></pre>\n\n<p>... where the first argument to <code>sys_arch_sem_wait()</code> is declared to have type <code>struct sys_sem **</code>.</p>\n\n<p>Yes, <code>sys_mutex_t</code> is a synonym of <code>sys_sem_t</code>.</p>\n\n<p>Yes, <code>sys_sem_t</code> is a synonym of <code>struct sys_sem *</code>.</p>\n\n<blockquote>\n  <p>My signature of <code>sys_arch_sem_wait</code> accepts <code>struct sys_sem **s</code>. However, I pass the address of <code>sys_mutex_t</code> which after all the <code>#defines</code> means the same as passing a <code>sys_sem</code>, and the code is compiled.</p>\n</blockquote>\n\n<p>No.  You are confusing the address-of operator (<code>&amp;</code>) with the dereferencing operator (<code>*</code>).  The type of the address of a <code>sys_mutex_t</code> boils down to <code>struct sys_sem **</code>, which is the correct type for the call.</p>\n\n<blockquote>\n  <p>So I can pass anything to sys_mutex_lock, can't I?</p>\n</blockquote>\n\n<p>C explicitly permits any value of integer type to be converted to any pointer type, and vise versa.  C also permits a pointer to any object type to be converted to a pointer to any other object type.  Compliant C compilers <em>must</em> be able to compile such statements because C allows them, and I would expect any compiler to accept them by default.</p>\n\n<p>On the other hand, whether the result of such a conversion is meaningful or appropriate is an entirely different question.  Many such conversions yield undefined behavior, and many others yield defined, but unwanted behavior.  As a result, any C compiler worth its salt should issue warnings about such conversions, at least when they are implicit, provided that such warnings are not manually disabled.</p>\n\n<p>The upshot is that yes, the compiler should allow you to pass any integer or pointer argument to <code>sys_mutex_lock()</code>, but it should warn you if you try to pass any value that is not of type <code>struct sys_sem **</code>.  It seems that is indeed what you observe.</p>\n\n<p>Overall, I don't see anything wrong with any of the compiler behaviors you describe.</p>\n"}], "owner": {"reputation": 5283, "user_id": 1065835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wcLSP.jpg?s=128&g=1", "display_name": "Maksim Dmitriev", "link": "https://stackoverflow.com/users/1065835/maksim-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "closed_date": 1420666471, "accepted_answer_id": 27823575, "answer_count": 1, "score": 0, "last_activity_date": 1423493158, "creation_date": 1420633216, "last_edit_date": 1423493158, "question_id": 27819408, "link": "https://stackoverflow.com/questions/27819408/struct-vs-struct-in-c-confusion-between-the-dereference-and-address-of-ope", "closed_reason": "Not suitable for this site", "title": "struct ** vs struct * in C. Confusion between the dereference and address-of operators", "body": "<p>I ported lwIP for Android and extracted some code from the port for Unix, and now I don't understand why the following logic can be compiled.</p>\n\n<p>There are a function, a <code>#define</code>, and a <code>typedef</code>, they used in the port for Unix.\nI wrote the code in <strong>func.h</strong></p>\n\n<pre><code>#ifndef FUNC_H\n#define FUNC_H\n#include &lt;stdint.h&gt;\n\nstruct sys_sem {\n    unsigned int c;\n};\n\n#define sys_mutex_t                   sys_sem_t;\ntypedef struct sys_sem * sys_sem_t;\n\nvoid sys_arch_sem_wait(struct sys_sem **s, int timeout);\n\n#endif\n</code></pre>\n\n<p>I also copied thier <code>#define</code>s and pasted them to <strong>sys.h</strong></p>\n\n<pre><code>#ifndef SYS_H\n#define SYS_H\n\n#define sys_mutex_lock(mutex)         sys_sem_wait(mutex)\n#define sys_sem_wait(sem)                  sys_arch_sem_wait(sem, 0)\n\n#endif\n</code></pre>\n\n<p>And there is my function I call from Java in Android; it's in the file <strong>com_sample_MainActivity.c</strong></p>\n\n<pre><code>#include \"func.h\"\n#include \"sys.h\"\n\nstatic sys_mutex_t\nmem_mutex;\n\nJNIEXPORT jstring JNICALL Java_com_sample_MainActivity_messageFromNativeCode(\n        JNIEnv *env, jobject thisObj) {\n    sys_mutex_lock(&amp;mem_mutex);\n    sys_mutex_lock(121); // Even this can be compiled\n    return (*env)-&gt;NewStringUTF(env, \"Hello from native code!\");\n}\n</code></pre>\n\n<p><code>sys_mutex_t</code> is synonym of <code>sys_sem_t</code>, and <code>sys_sem_t</code> is a synonym of <code>sys_sem *</code>. Am I right?\nMy signature of <code>sys_arch_sem_wait</code> accepts <code>struct sys_sem **s. However, I pass the address of</code>sys_mutex_t<code>which after all the</code>#define<code>s means the same as passing a</code>sys_sem`, and the code is compiled.</p>\n\n<p>Even this can be compiled</p>\n\n<pre><code>sys_mutex_lock(121); // Even this can be compiled. Why?\n</code></pre>\n\n<p>So I can pass anything to <code>sys_mutex_lock</code>, can't I?</p>\n\n<p><strong>My test.</strong></p>\n\n<pre><code>#include \"func.h\"\n#include &lt;android/log.h&gt;\n\nvoid sys_arch_sem_wait(struct sys_sem **s, int timeout) {\n    if (s == NULL) {\n        __android_log_print(ANDROID_LOG_DEBUG, \"Sample\", \"s == NULL\");\n    } else {\n        __android_log_print(ANDROID_LOG_DEBUG, \"Sample\", \"s != NULL\");\n    }\n    if (*s == NULL) {\n        __android_log_print(ANDROID_LOG_DEBUG, \"Sample\", \"*s == NULL\"); // It causes the failure\n    } else {\n        __android_log_print(ANDROID_LOG_DEBUG, \"Sample\", \"*s != NULL\");\n    }\n}\n</code></pre>\n\n<p>And here is the output of LogCat:</p>\n\n<pre><code>01-07 14:46:40.695: D/Sample(22086): s != NULL\n01-07 14:46:40.695: D/Sample(22086): *s == NULL\n</code></pre>\n\n<p><strong>The expected behavior.</strong></p>\n\n<p>I expected that</p>\n\n<pre><code>void sys_arch_sem_wait(struct sys_sem **s, int timeout)\n</code></pre>\n\n<p>should have the different signature</p>\n\n<pre><code>void sys_arch_sem_wait(struct sys_sem *s, int timeout)\n</code></pre>\n"}, {"tags": ["c", "linux", "audio", "alsa", "pulseaudio"], "comments": [{"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1420635759, "post_id": 27819396, "comment_id": 44045858, "body": "You should have a look at JACK (<a href=\"http://jackaudio.org/\" rel=\"nofollow noreferrer\">jackaudio.org</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 709, "user_id": 137361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fe15a906dabbd57f4d09eaf7c3b6514e?s=128&d=identicon&r=PG", "display_name": "S&#228;my", "link": "https://stackoverflow.com/users/137361/s%c3%a4my"}, "is_accepted": true, "score": 0, "last_activity_date": 1421176129, "creation_date": 1421176129, "answer_id": 27929690, "question_id": 27819396, "link": "https://stackoverflow.com/questions/27819396/register-virtual-sound-device-from-within-application/27929690#27929690", "title": "Register virtual sound device from within application", "body": "<p>I ended up writing a PulseAudio module. There one can create own sinks and directly get access to the audio stream. Have a look at my implementation <a href=\"https://github.com/saemy/pacc/blob/master/pa_module/pa_sink.cpp\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 709, "user_id": 137361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fe15a906dabbd57f4d09eaf7c3b6514e?s=128&d=identicon&r=PG", "display_name": "S&#228;my", "link": "https://stackoverflow.com/users/137361/s%c3%a4my"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 27929690, "answer_count": 1, "score": 0, "last_activity_date": 1421176129, "creation_date": 1420633170, "question_id": 27819396, "link": "https://stackoverflow.com/questions/27819396/register-virtual-sound-device-from-within-application", "title": "Register virtual sound device from within application", "body": "<p>I want to be able to process audio output of applications (VLC, Rhythmbox, ...) within my own one. Moreover, one should be able to select my application as the sink for the sound (e.g., in VLC or pavucontrol my application should appear as an output device).</p>\n\n<p>How is this possible? Can it be done with ALSA, Pulseaudio, ...? Currently I am seeking for the easiest solution while later performant ones may become preferable. It would be great if most of the configuration could be done via API calls.</p>\n\n<p>Thank you for your support!</p>\n"}, {"tags": ["c", "struct", "malloc"], "comments": [{"owner": {"reputation": 57370, "user_id": 385478, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a6f82bd8116b0260515a2b67bb560937?s=128&d=identicon&r=PG", "display_name": "Graham Borland", "link": "https://stackoverflow.com/users/385478/graham-borland"}, "edited": false, "score": 1, "creation_date": 1420633792, "post_id": 27819115, "comment_id": 44044782, "body": "I know this is a C question, but even so it&#39;s generally not a good idea to use <code>new</code> as a variable name. This is a C++ keyword and will cause all kinds of problems if you ever try to compile your code as C++."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1420632655, "last_edit_date": 1495541641, "creation_date": 1420632329, "answer_id": 27819155, "question_id": 27819115, "link": "https://stackoverflow.com/questions/27819115/use-of-malloc-of-a-struct-containing-multiple-elements/27819155#27819155", "title": "Use of malloc of a struct containing multiple elements", "body": "<p>in this code</p>\n\n<pre><code>strcpy (new-&gt;text, string);\n</code></pre>\n\n<p><code>new-&gt;text</code> is not allocated memory. It might contain some garbage value, or some write protected memory address or even NULL. Passing that pointer to <code>strcpy()</code> will lead you to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined behaviour</a> and as a side effect you may experience the segmentation fault.</p>\n\n<p>You can make use of <a href=\"http://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\"><code>strdup()</code></a> or can allocate memory to <code>new-&gt;text</code> before <code>strcpy()</code>-ing to that pointer. Both the cases, you need to <code>free()</code> the allocated memory afterwards.</p>\n\n<p>Also, </p>\n\n<ol>\n<li>Please <a href=\"https://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code>.</li>\n<li>Check for the success of dynamic memory allocation [<code>malloc()</code>/ <code>calloc()</code>] before using the pointer.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1420632354, "creation_date": 1420632354, "answer_id": 27819163, "question_id": 27819115, "link": "https://stackoverflow.com/questions/27819115/use-of-malloc-of-a-struct-containing-multiple-elements/27819163#27819163", "title": "Use of malloc of a struct containing multiple elements", "body": "<p>Because you are allocating the memory for structure variable only. You have to allocate the memory in the structure member.</p>\n\n<pre><code> new-&gt;text=malloc(10);//for example \n</code></pre>\n\n<p>After the allocation of memory you can use the strcpy function.</p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "is_accepted": false, "score": 1, "last_activity_date": 1420632379, "creation_date": 1420632379, "answer_id": 27819176, "question_id": 27819115, "link": "https://stackoverflow.com/questions/27819115/use-of-malloc-of-a-struct-containing-multiple-elements/27819176#27819176", "title": "Use of malloc of a struct containing multiple elements", "body": "<p>You have allocated the memory for <code>new</code>, but not for the <code>text</code> member variable.\nAllocate the memory for <code>text</code> and execute the code.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420644663, "post_id": 27819696, "comment_id": 44051401, "body": "Idea: <code>QElementDestroy()</code> itself should be tolerant of <code>QElementDestroy(NULL)</code> just like <code>free(NULL)</code> is OK."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420644792, "post_id": 27819696, "comment_id": 44051489, "body": "@chux: Good idea. Always a good idea to make things that &#39;look&#39; like library functions to act like their similars."}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": true, "score": 3, "last_activity_date": 1420645475, "last_edit_date": 1420645475, "creation_date": 1420634251, "answer_id": 27819696, "question_id": 27819115, "link": "https://stackoverflow.com/questions/27819115/use-of-malloc-of-a-struct-containing-multiple-elements/27819696#27819696", "title": "Use of malloc of a struct containing multiple elements", "body": "<p><code>strdup(.)</code> recommended by other answers is non-standard. If you're not on a Unix platform it may not be available.</p>\n\n<p>However the point is correct. You need to allocate memory to store your string.</p>\n\n<p>Try:</p>\n\n<pre><code>const size_t sz=(strlen(string)+1)*sizeof(*string);//Space required. Including '\\0' terminator.\nnew-&gt;text=malloc(sz);//space allocated.\nif(new-&gt;text==NULL){//sz never 0 because +1.\n   exit(EXIT_FAILURE);//Allocation failed in non-error handled function.\n}\nmemcpy(new-&gt;text,string,sz); //typically fastest way to copy!\n</code></pre>\n\n<p>Instead of <code>strdup(.)</code>.</p>\n\n<p>My use of <code>sizeof(*string)</code> is actually unnecessary (as it is always 1) but the compiler will spot that and it's just good practice. </p>\n\n<p>One day the world will move more uniformly to multi-byte characters and this code is ready for that glorious dawn!</p>\n\n<p>Don't forget to <code>free(.)</code> when you've finished with the 'QElement'. \nYou should probably write a function like this:</p>\n\n<pre><code>void QElementDestroy(QElement*const element){\n    if(element==NULL){\n        return;//Nothing to do!\n    }\n    free(element-&gt;text);//Needs NULL protection.\n    free(element);//Does not need NULL protection. But we've done the test anyway!\n    //NB: Order matters here. A lot.\n}\n</code></pre>\n\n<p>And call it when you've finished with value returned by <code>enqueue(.)</code>.</p>\n\n<p>If you want the string to 'out live' the element set <code>element-&gt;text=NULL</code> before calling destroy.\n<code>free(NULL)</code> is required to do nothing and return normally.</p>\n\n<p><strong>PS:</strong> I think <code>strdup(.)</code> is a bit of a n00b trap. They take a while to get the hang of matching <code>malloc(.)</code> and <code>free(.)</code> and <code>strdup(.)</code> is a bit of a traitor because none of the other <code>str...</code> functions allocate space the caller is expected to <code>free(.)</code>. It's also non-standard.</p>\n"}], "owner": {"reputation": 164, "user_id": 2437080, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/61c5f13911c9523a4641a6f13d7f86f9?s=128&d=identicon&r=PG", "display_name": "harrisonfooord", "link": "https://stackoverflow.com/users/2437080/harrisonfooord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 27819696, "answer_count": 4, "score": 1, "last_activity_date": 1437881589, "creation_date": 1420632208, "last_edit_date": 1437881589, "question_id": 27819115, "link": "https://stackoverflow.com/questions/27819115/use-of-malloc-of-a-struct-containing-multiple-elements", "title": "Use of malloc of a struct containing multiple elements", "body": "<p>What am I doing wrong here? </p>\n\n<p>I have a QueueElement struct containing a char* text and a pointer to the next element, so obviously a linked list: </p>\n\n<pre><code>//QElement as in QueueElement\nstruct QElement {\n    char* text;\n    struct QElement* next;\n};\ntypedef struct QElement QElement;\n</code></pre>\n\n<p>....</p>\n\n<pre><code>void enqueue (char* string){\nQElement *new = (QElement *)malloc(sizeof(QElement)); \n//QElement cast is probably redundant but it doesn't hurt anyone\nstrcpy (new-&gt;text, string);\n\n//some other stuff happening here, linking to other element in linked list, \n//but thats not of interest at the moment\n\n}\n</code></pre>\n\n<p>....</p>\n\n<p>If I try to enqueue a word in the main function, I keep getting segmentation faults and valgrind is telling me, that I'm doing something wrong when I'm using strcpy, so my malloc seems to be incorrect. How do I have to do it?</p>\n"}, {"tags": ["c", "string", "double-quotes"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1420633013, "post_id": 27819083, "comment_id": 44044385, "body": "It might not be enough if your <code>buffer</code>, that is your file, contains a <code>&quot;</code>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1420634062, "post_id": 27819083, "comment_id": 44044944, "body": "Your #2 post is tagged <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>, that&#39;s why it did not work. How is the answer in #1 &quot;not compatible&quot;?"}, {"owner": {"reputation": 401, "user_id": 1027942, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6bd7472fb09d8d897201c003f873f09e?s=128&d=identicon&r=PG&f=1", "display_name": "F.N", "link": "https://stackoverflow.com/users/1027942/f-n"}, "edited": false, "score": 0, "creation_date": 1420635852, "post_id": 27819083, "comment_id": 44045919, "body": "I don&#39;t know. I tried it and returned me a string like that C:\\my"}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 1027942, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6bd7472fb09d8d897201c003f873f09e?s=128&d=identicon&r=PG&f=1", "display_name": "F.N", "link": "https://stackoverflow.com/users/1027942/f-n"}, "edited": false, "score": 0, "creation_date": 1420633071, "post_id": 27819138, "comment_id": 44044414, "body": "Thank you very much. It worked. Actually for Visual Studio snprintf is _snprintf()."}], "tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": true, "score": 7, "last_activity_date": 1420632277, "creation_date": 1420632277, "answer_id": 27819138, "question_id": 27819083, "link": "https://stackoverflow.com/questions/27819083/add-double-quotes-in-a-string-in-c/27819138#27819138", "title": "Add double quotes in a string in C", "body": "<p>How about creating a new string with <code>snprintf</code>?</p>\n\n<pre><code>char somestr[..];\nsnprintf(somestr, sizeof somestr, \"\\\"%s\\\"\", appPath);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": false, "score": 2, "last_activity_date": 1420632902, "last_edit_date": 1420632902, "creation_date": 1420632569, "answer_id": 27819235, "question_id": 27819083, "link": "https://stackoverflow.com/questions/27819083/add-double-quotes-in-a-string-in-c/27819235#27819235", "title": "Add double quotes in a string in C", "body": "<p>You could simply do it like this :</p>\n\n<pre><code>char buffer[302]; //&lt; I assume you picked 300 for a reason, so 302 for the extra quotes\nchar *appPath;\n\nint fileNameLen = GetModuleFileName(NULL,buffer+1,300);\nbuffer[0] = buffer[fileNameLen+1] = '\"'; //&lt; Wrap in quotes\nbuffer[fileNameLen+2] = '\\0'; //&lt; Now add the \\0 back\nappPath = buffer;\nMessageBox(NULL,appPath,\"path\",MB_OK);\n</code></pre>\n\n<p>Note that there's still no error checking here in case <code>GetModuleFileName</code> fails, you might want to add some.\nThis code should run faster than calling some libc string functions, but it may not be the best choice if you find it harder to read.</p>\n"}], "owner": {"reputation": 401, "user_id": 1027942, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6bd7472fb09d8d897201c003f873f09e?s=128&d=identicon&r=PG&f=1", "display_name": "F.N", "link": "https://stackoverflow.com/users/1027942/f-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1886, "favorite_count": 1, "accepted_answer_id": 27819138, "answer_count": 2, "score": 0, "last_activity_date": 1420632902, "creation_date": 1420632068, "question_id": 27819083, "link": "https://stackoverflow.com/questions/27819083/add-double-quotes-in-a-string-in-c", "title": "Add double quotes in a string in C", "body": "<p>I have this C code that retrieves the path of the executable.</p>\n\n<pre><code>char buffer[300];\nchar *appPath;\n\nGetModuleFileName(NULL,buffer,300);\nappPath = buffer;\nMessageBox(NULL,appPath,\"path\",MB_OK);\n</code></pre>\n\n<p>That code returns a messagebox contains e.g</p>\n\n<p>C:\\myexe.exe</p>\n\n<p>i'm trying to make it return :</p>\n\n<p>\"C:\\myexe.exe\" </p>\n\n<p>Already found and tried solutions on those posts <a href=\"https://stackoverflow.com/questions/24922872/how-to-embed-a-double-quote-in-a-c-string\">1</a> and <a href=\"https://stackoverflow.com/questions/2318122/double-quoted-strings-in-c\">2</a> but they are not compatible with my problem.</p>\n\n<p>Any hint ?</p>\n"}, {"tags": ["c", "arm", "interrupt-handling", "cortex-m"], "comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420631820, "post_id": 27818841, "comment_id": 44043633, "body": "I have absolutely no experience with the particular thing you&#39;re doing but in the snippet above your interrupt handler <code>TIM1_CC_IRQHandler</code> is defined and never used, is this really on purpose ? Are you omitting the part of the code where you setup the handler for this particular interrupt ? Or is it a predeclared symbol you just have to implement ?"}, {"owner": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420632081, "post_id": 27818841, "comment_id": 44043803, "body": "Well this line NVIC_InitStructure.NVIC_IRQChannel = TIM1_CC_IRQn tells that it should the TIM1_CC_IRQHandler handler, it should call it automatically."}, {"owner": {"reputation": 891, "user_id": 1257487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5XCW.jpg?s=128&g=1", "display_name": "Anonymouse", "link": "https://stackoverflow.com/users/1257487/anonymouse"}, "edited": false, "score": 0, "creation_date": 1420639707, "post_id": 27818841, "comment_id": 44048130, "body": "Is there a GLOBAL interrupt enable\\disable interrupt mask you&#39;re not enabling?"}, {"owner": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "edited": false, "score": 0, "creation_date": 1420641912, "post_id": 27818841, "comment_id": 44049542, "body": "NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; This should enable the interrupt"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1429340915, "post_id": 27818841, "comment_id": 47563281, "body": "I hope you are calling <code>StartCapture()</code> somewhere in your <code>main()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6015986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ce9ed0cead707e34fb002efacd71d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dracog71", "link": "https://stackoverflow.com/users/6015986/dracog71"}, "is_accepted": false, "score": 0, "last_activity_date": 1485219683, "creation_date": 1485219683, "answer_id": 41818347, "question_id": 27818841, "link": "https://stackoverflow.com/questions/27818841/stm32f4-interrupt-handler-for-capture-its-not-called/41818347#41818347", "title": "STM32F4 interrupt handler for capture its not called", "body": "<p>Maybe the interrupt enters the functions but does not know what to do, or enter ant he flag is still active and just enters once, you're missing the clear interrupt flag, try this:   </p>\n\n<pre><code>  /**\n    * @brief  Capture Compare Handler\n    * @param  None\n    * @retval None\n    */\n    void TIM1_CC_IRQHandler()\n    {\n        if (TIM_GetITStatus(TIM1, TIM_IT_CC3) != RESET)  &lt;-- Add this\n        {\n            TIM_ClearITPendingBit(TIM1, TIM_IT_CC3); &lt;-- This is important!\n\n              //TODO\n\n            }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "is_accepted": true, "score": 1, "last_activity_date": 1502200078, "last_edit_date": 1502200078, "creation_date": 1502177485, "answer_id": 45561962, "question_id": 27818841, "link": "https://stackoverflow.com/questions/27818841/stm32f4-interrupt-handler-for-capture-its-not-called/45561962#45561962", "title": "STM32F4 interrupt handler for capture its not called", "body": "<p>If your <code>TIM1_CC_IRQHandler()</code> is getting called ONCE, then Dracog71's answer is correct.  However, if your <code>IRQHandler()</code> is <em>never</em> firing, then there's something wrong in the initialization.</p>\n\n<p>Here's a list of things you have to get right or the IRQ won't fire.</p>\n\n<p>1) Make sure that the <code>GPIO[A:E]</code> clock is enabled for the pin you are using.</p>\n\n<p>2) Likewise, make sure the clock is enabled for the <code>TIMx</code> you are using.  Check where your <code>TIMx</code> lives.  If you call <code>RCC_APB2PeriphClockCmd()</code> for a timer that lives on <code>APB1</code>, the compiler won't throw an error, but your timer will never work.</p>\n\n<p>3) Double-check your pin's AF matches the datasheet's Alternative Function Mapping table (eg. <code>AF1 == TIM1_CH3</code>).</p>\n\n<p>4) In your <code>TIM_ICInitStructure</code>, make sure <code>TIM_Channel</code> matches the channel you have chosen (in your case <code>TIM_Channel_3</code>).</p>\n\n<p>5) Configure and enable the correct IRQ channel in the NVIC, eg. <code>NVIC_InitStructure.NVIC_IRQChannel = TIM1_CC_IRQn;</code></p>\n\n<p>6) Enable the interrupt: <code>TIM_ITConfig(TIM1, TIM_IT_CC3, ENABLE);</code></p>\n\n<p>7) Enable your timer: <code>TIM_Cmd(TIM1, ENABLE);</code></p>\n"}], "owner": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4504, "favorite_count": 0, "accepted_answer_id": 45561962, "answer_count": 2, "score": 1, "last_activity_date": 1502200078, "creation_date": 1420631300, "question_id": 27818841, "link": "https://stackoverflow.com/questions/27818841/stm32f4-interrupt-handler-for-capture-its-not-called", "title": "STM32F4 interrupt handler for capture its not called", "body": "<p>The code below uses the capture compare feature of TIM1 channel 3 to capture rising edge on PE10, but its not working, the interrupt handler its not called. I am not that good at this embedded stuff, so can somebody tell me if I am settings this correctly ?</p>\n\n<pre><code>#include \"STM32/stm32f4xx_tim.h\"\n\nvoid TIM1_Config(void)\n{\n  GPIO_InitTypeDef GPIO_InitStructure;\n  NVIC_InitTypeDef NVIC_InitStructure;\n\n  /* TIM1 clock enable */\n  RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1, ENABLE);\n\n  /* GPIOA clock enable */\n  RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOE, ENABLE);\n\n  /* TIM1 channel 3 pin (PE.10) configuration */\n  GPIO_InitStructure.GPIO_Pin =  GPIO_Pin_10;\n  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\n  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;\n  GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\n  GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;\n  GPIO_Init(GPIOE, &amp;GPIO_InitStructure);\n\n  /* Connect TIM pins to AF2 */\n  GPIO_PinAFConfig(GPIOE, GPIO_PinSource10, GPIO_AF_TIM1);\n\n  /* Enable the TIM1 global Interrupt */\n  NVIC_InitStructure.NVIC_IRQChannel = TIM1_CC_IRQn;\n  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;\n  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;\n  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;\n  NVIC_Init(&amp;NVIC_InitStructure);\n\n  TIM_ICInitTypeDef  TIM_ICInitStructure;\n  TIM_ICInitStructure.TIM_Channel = TIM_Channel_3;\n  TIM_ICInitStructure.TIM_ICPolarity = TIM_ICPolarity_Rising;\n  TIM_ICInitStructure.TIM_ICSelection = TIM_ICSelection_DirectTI;\n  TIM_ICInitStructure.TIM_ICPrescaler = TIM_ICPSC_DIV1;\n  TIM_ICInitStructure.TIM_ICFilter = 0x0;\n\n  TIM_ICInit(TIM1, &amp;TIM_ICInitStructure);\n\n  /* TIM enable counter */\n  TIM_Cmd(TIM1, ENABLE);\n\n  /* Enable the CC3 Interrupt Request */\n  TIM_ITConfig(TIM1, TIM_IT_CC3, ENABLE);\n}\n\n\nvoid TIM1_CC_IRQHandler(void)\n{\n    // .................\n}\n\nint StartCapture()\n{ \n  TIM1_Config();\n\n  while(1); /* Infinite loop */\n}\n</code></pre>\n"}, {"tags": ["c", "header-files", "static-analysis"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420631345, "post_id": 27818756, "comment_id": 44043344, "body": "unless you want to check many functions, most integrated development environments (IDEs) and also some coding text editors have tools or plugins to go to a definition of a function from the declaration. You could use that and see if the editor manages to find the definition."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420631586, "post_id": 27818756, "comment_id": 44043477, "body": "what are you going to do if your header includes another header (eg: &lt;time.h&gt; if it uses time_t ) and that header defines some functions from standard libraries."}, {"owner": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "reply_to_user": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420638278, "post_id": 27818756, "comment_id": 44047276, "body": "@Jasen I strictly not interested in some nested headers, only a strict comparison of functions in header and source."}, {"owner": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420638332, "post_id": 27818756, "comment_id": 44047310, "body": "@JoachimPileborg Maybe that there is such a capability burried in the depths of emacs, but it&#39;s a pity that I haven&#39;t been able to find it yet :("}], "answers": [{"comments": [{"owner": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "edited": false, "score": 0, "creation_date": 1420645811, "post_id": 27818895, "comment_id": 44052254, "body": "In general it is that simple, but it seems that something with your approach is not really working. It lists every function mentioned in the header, despite its implementation in the sources."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420658846, "post_id": 27818895, "comment_id": 44059984, "body": "in the header it will have <code>;</code> on the line with the prototype, in the <code>.c</code>  it will not."}, {"owner": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "edited": false, "score": 0, "creation_date": 1420660626, "post_id": 27818895, "comment_id": 44061002, "body": "Thats why the <code>tr</code> potion is there: remove the &quot;;&quot;."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "edited": false, "score": 0, "creation_date": 1420676073, "post_id": 27818895, "comment_id": 44067807, "body": "@NobbZ: I had a backslash in the first grep that I shouldn&#39;t have, now removed.  I tested with your example inputs and it works for me.  Make sure you remove the backslash as I did, and if it&#39;s still not working, time for a bit of debugging.  :)"}, {"owner": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "edited": false, "score": 0, "creation_date": 1420712845, "post_id": 27818895, "comment_id": 44079829, "body": "I already removed it, because my <code>grep</code> didn&#39;t like it ;) I&#39;ll take a look into it later and try to nail that one down."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1420676028, "last_edit_date": 1420676028, "creation_date": 1420631468, "answer_id": 27818895, "question_id": 27818756, "link": "https://stackoverflow.com/questions/27818756/list-all-functions-declared-in-header-but-missing-in-the-source-file/27818895#27818895", "title": "List all functions declared in header but missing in the source file?", "body": "<p>I'd just do it with <code>grep</code> etc.:</p>\n\n<pre><code>grep ');' foo.h | tr -d ';' | while read decl\ndo\n    if ! grep -q \"$decl\" foo.c\n    then\n        echo \"not found: $decl\"\n    fi\ndone\n</code></pre>\n\n<p>No, this isn't perfect, but it might work if your use case is as simple as you've outlined.</p>\n"}], "owner": {"reputation": 1300, "user_id": 826797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ae5bf6a2566204b386bf2898443be58d?s=128&d=identicon&r=PG", "display_name": "NobbZ", "link": "https://stackoverflow.com/users/826797/nobbz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1420676028, "creation_date": 1420631030, "question_id": 27818756, "link": "https://stackoverflow.com/questions/27818756/list-all-functions-declared-in-header-but-missing-in-the-source-file", "title": "List all functions declared in header but missing in the source file?", "body": "<h1>Question</h1>\n\n<p>Are there some linters/statical analyzers that warn/error on functions, that are declared in the header file but not implemented in the corresponding source file?</p>\n\n<p>Lets say we have the following header (guard omitted):</p>\n\n<pre><code>/* example.h */\nint doSomething(int i);\ndouble doSomethingElse(double d);\n</code></pre>\n\n<p>And the following source:</p>\n\n<pre><code>/* example.c */\n#require \"example.h\"\n\nint doSomething(int i) {\n  return i + 1;\n}\n</code></pre>\n\n<p>So is there some tool, that can tell me that <code>doSomethingElse()</code> is missing in <code>example.c</code>?</p>\n\n<h1>Why asking?</h1>\n\n<p>In an exercise we got some headerfiles with a fully fletched interface, and partially prepared sourcefiles, with some functions beeing fully provided, some functions beeing partially provided, and some missing.</p>\n\n<p>For actually running and compiling this programm it was enough to complete the partially provided functions, but still there is some discrepancy between the defined interface in the header and the now provided functions in the source file.</p>\n\n<p>I could go through all header/source pairs by hand and implement the missing funtions, but it would be nice to have some autogenerated todolist.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1420629969, "post_id": 27818372, "comment_id": 44042611, "body": "You&#39;re already doing it correctly, and directly afterwards you do it incorrectly. To get the length of a string, you use <code>strlen</code>, to get the size <i>of the pointer</i> (not what it points to) you use <code>sizeof</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420630083, "post_id": 27818372, "comment_id": 44042671, "body": "How you obtain the length of the <code>string</code> has nothing to do with how you access the array, what the function recieves is a pointer to the first element of the array, so assuming <code>c &lt; MAX_KERNELS_COUNT</code>, <code>size = strlen(files[c].program);</code> is correct provided <code>.program</code> points to a sequence of bytes all initialized and terminated with <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "edited": false, "score": 0, "creation_date": 1420631111, "post_id": 27818372, "comment_id": 44043220, "body": "So it is correct,but I expected different result. This is why I thought that it was wrong: I expected the lenght of program to be 11000 bytes. But it has only 7 bytes. According Code::blocks watch tool the string is: 0x4c66b0 &quot;\\177ELF\\001\\001\\001&quot; ,,, it seems that there is some problem with my function."}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1420630042, "creation_date": 1420630042, "answer_id": 27818433, "question_id": 27818372, "link": "https://stackoverflow.com/questions/27818372/how-correctly-access-member-of-array-in-c/27818433#27818433", "title": "How correctly access member of array in C?", "body": "<p><code>files</code> is an array of <code>FILES</code>.</p>\n\n<p><code>files[c]</code> is thus of type <code>FILES</code></p>\n\n<p><code>files[c].program</code> is thus of type <code>char *</code>.</p>\n\n<p>so <code>strlen(files[c].program)</code> should give you what you want, i.e. the length of the string (as opposed to the size of the pointer). Note <code>strlen</code> will exclude the terminating <code>NUL</code>, i.e. the size of the string will be one byte longer.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420630579, "post_id": 27818452, "comment_id": 44042931, "body": "It would make no sense to change the <code>sizeof</code> with <code>strlen</code>, the probably correct thing to do is to remove that line completely."}], "tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1420630107, "creation_date": 1420630107, "answer_id": 27818452, "question_id": 27818372, "link": "https://stackoverflow.com/questions/27818372/how-correctly-access-member-of-array-in-c/27818452#27818452", "title": "How correctly access member of array in C?", "body": "<pre><code> size = strlen(files[c].program);\n printf(\"\\n%ld\\n\",size);\n size = sizeof(files[c].program); //&lt;-- Here you are using the sizeof. change this into strlen\n printf(\"\\n%ld\\n\",size);\n</code></pre>\n\n<p>Sizeof gives you sizeof the given variable. It will not give you the string length.</p>\n"}, {"tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": false, "score": 0, "last_activity_date": 1420631222, "creation_date": 1420631222, "answer_id": 27818813, "question_id": 27818372, "link": "https://stackoverflow.com/questions/27818372/how-correctly-access-member-of-array-in-c/27818813#27818813", "title": "How correctly access member of array in C?", "body": "<blockquote>\n  <p>I have problem there on the line with files[c].program . I know that I\n  must access files like a pointer but how to do it correctly to obtain\n  the length of the C string? I know something like (*files)[c].program\n  is wrong.</p>\n</blockquote>\n\n<p><strong>There is no string</strong></p>\n\n<p>program is a pointer to somewhere outside the array.</p>\n"}], "owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1420642659, "answer_count": 3, "score": -2, "last_activity_date": 1420631222, "creation_date": 1420629782, "question_id": 27818372, "link": "https://stackoverflow.com/questions/27818372/how-correctly-access-member-of-array-in-c", "closed_reason": "Not suitable for this site", "title": "How correctly access member of array in C?", "body": "<p>In my code FILES is struct. </p>\n\n<pre><code>typedef struct  {\n  char name[64];\n  char filename[64];\n  long size; // file size\n  long loaded; // after load of kernel loaded should be same value as size\n  char * program;\n} FILES;\n</code></pre>\n\n<p>files is array of type FILES.</p>\n\n<pre><code>FILES files[MAX_KERNELS_COUNT];\n</code></pre>\n\n<p>in function loadKernels I would like to access member of the array files via pointer.</p>\n\n<pre><code>bool loadKernels(const char * path, FILES * files, int count)\n{\n...\nsize = strlen(files[c].program);\nprintf(\"\\n%ld\\n\",size);\nsize = sizeof(files[c].program);\nprintf(\"\\n%ld\\n\",size);\n...\n}\n</code></pre>\n\n<p>I have problem there on the line with files[c].program . I know that I must access files like a pointer but how to do it correctly to obtain the length of the C string? I know something like (*files)[c].program is wrong.</p>\n"}, {"tags": ["c", "opengl", "viewport"], "comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1420630027, "post_id": 27818350, "comment_id": 44042643, "body": "maybe 0, 0 isn&#39;t where you expect it to be, try height and width of /2 while keeping the offset"}], "answers": [{"comments": [{"owner": {"reputation": 939, "user_id": 2466900, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7052d88d666bbecff10902e024caae76?s=128&d=identicon&r=PG", "display_name": "Adam Silva", "link": "https://stackoverflow.com/users/2466900/adam-silva"}, "edited": false, "score": 0, "creation_date": 1420649563, "post_id": 27819601, "comment_id": 44054696, "body": "I thought that by using a viewport, it would automatically draw on the viewport"}], "tags": [], "owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "is_accepted": false, "score": 0, "last_activity_date": 1420633943, "creation_date": 1420633943, "answer_id": 27819601, "question_id": 27818350, "link": "https://stackoverflow.com/questions/27818350/opengl-viewport-not-working/27819601#27819601", "title": "OpenGL Viewport not working", "body": "<p>It seems you forgot to call <code>glTranslatef()</code> to specify the position of the drawing after:</p>\n\n<pre><code>glMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\n</code></pre>\n"}], "owner": {"reputation": 939, "user_id": 2466900, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7052d88d666bbecff10902e024caae76?s=128&d=identicon&r=PG", "display_name": "Adam Silva", "link": "https://stackoverflow.com/users/2466900/adam-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420633943, "creation_date": 1420629732, "last_edit_date": 1420633819, "question_id": 27818350, "link": "https://stackoverflow.com/questions/27818350/opengl-viewport-not-working", "title": "OpenGL Viewport not working", "body": "<p>I have a 3D labyrinth with a 3d model that the user controls to exit the labyrinth. I want to put a minimap in a viewport on the bottom right of the window. Except the map isn't going to the viewport, it's drawing at 0,0.\nHere is the code to draw the minimap:</p>\n\n<pre><code>GLfloat SCREEN_WIDTH = glutGet(GLUT_WINDOW_WIDTH);\nGLfloat SCREEN_HEIGHT = glutGet(GLUT_WINDOW_HEIGHT);\nglViewport(glutGet(GLUT_WINDOW_WIDTH) / 2, 0, glutGet(GLUT_WINDOW_WIDTH) / 2, glutGet(GLUT_WINDOW_HEIGHT) / 2);\nglMatrixMode(GL_PROJECTION);\nglLoadIdentity();\ngluOrtho2D(-40, 40, -40, 40);\nglMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\nglEnable(GL_BLEND);\nglRotatef(90, 1, 0, 0);\nglDisable(GL_LIGHTING);\nglCallList(modelo.labirinto[JANELA_NAVIGATE]);\n//glCallList(modelo.chao[JANELA_NAVIGATE]);\nglEnable(GL_LIGHTING);\nglDisable(GL_BLEND);\n</code></pre>\n\n<p>Here is the result:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Q0wqx.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "c", "c++11", "makefile", "automake"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420628796, "post_id": 27818030, "comment_id": 44041930, "body": "what are your <code>CFLAGS</code>? Do you have any predefined <code>CFLAGS</code>?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1420628833, "post_id": 27818030, "comment_id": 44041955, "body": "Perhaps you have some environment variables, e.g. CFLAGS that erroneously  contains -std=c++11 ?"}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420628865, "post_id": 27818030, "comment_id": 44041976, "body": "@iharob. I just run the <code>.&#47;configure</code> and then <code>make</code>"}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1420628964, "post_id": 27818030, "comment_id": 44042038, "body": "@nos how to remove the -std=c++11 from the <code>CFLAGS</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420629006, "post_id": 27818030, "comment_id": 44042071, "body": "try <code>CFLAGS=&quot;&quot; .&#47;configure --target=arm-linux-androideabi --host=arm-linux-androideabi \\             --build=x86_64-unknown-linux-gnu</code> or <code>unset CFLAGS</code> before running configure."}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420629556, "post_id": 27818030, "comment_id": 44042383, "body": "@iharob It does not work"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1420629864, "post_id": 27818030, "comment_id": 44042548, "body": "What package is that?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 3, "creation_date": 1420701224, "post_id": 27834710, "comment_id": 44074545, "body": "The CPP in CPPFLAGS is for C PreProcessor, not C PlusPlus. The latter has a CXXFLAGS environment variable. If you have <code>-std=c++11</code> in your global CPPFLAGS, you&#39;re doing something very wrong, and you should not be changing any script to work around it, you should see what&#39;s setting that environment variable and get rid of it there."}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1420702086, "post_id": 27834710, "comment_id": 44074852, "body": "@hvd I m not doing anything. I just executed <code>.&#47;configure</code> with the options indicated in the question and then executed the make and I got this problem"}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1420702261, "post_id": 27834710, "comment_id": 44074899, "body": "@hvd here after the package I m compiling: <a href=\"https://s3.amazonaws.com/json-c_releases/releases/json-c-0.12.tar.gz\" rel=\"nofollow noreferrer\">s3.amazonaws.com/json-c_releases/releases/json-c-0.12.tar.gz</a>"}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1420702391, "post_id": 27834710, "comment_id": 44074943, "body": "@hvd I checked the source code and there is no <code>c++11</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1420702471, "post_id": 27834710, "comment_id": 44074975, "body": "You&#39;re the one who added <code>-std=c++11</code> to your global CPPFLAGS, aren&#39;t you? Who else could it have been, especially if you already found that the package isn&#39;t doing that?"}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1420702952, "post_id": 27834710, "comment_id": 44075172, "body": "@hvd How can I added it and I just executed <code>.&#47;configure</code> and <code>make</code> that&#39;s all. may be it comes from my linux global variables"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1420703286, "post_id": 27834710, "comment_id": 44075305, "body": "Precisely. Those global variables are still something you configured on your system, and should be fixed there. You&#39;ll find many other packages that also won&#39;t accept language-specific flags in CPPFLAGS."}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1420703496, "post_id": 27834710, "comment_id": 44075367, "body": "How I can fix them in my linux system. shoul I put <code>CPPFLAGS</code> in the <code>.profile</code> file ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1420703688, "post_id": 27834710, "comment_id": 44075446, "body": "You shouldn&#39;t put it anywhere, but you did, somewhere. You should find where, and remove it."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1420753131, "post_id": 27834710, "comment_id": 44103950, "body": "@MOHAMED You, or someone else with access to your computer have placed it on your system. Somewhere, we don&#39;t know. Perhaps in \u0303~/.bashrc or /etc/bashrc or /etc/profile, or any other script that initializes the shell you are using. So you should find that place, and remove the -std=c++11."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1519346615, "post_id": 27834710, "comment_id": 84886002, "body": "I was able to reproduce the error (building a later version of <code>json-c</code>) by setting the environment variable <code>CPPFLAGS</code> to <code>-std=c++11</code> before running <code>.&#47;configure; make; make install</code>. Without that explicit setting, the problem didn&#39;t appear. Your <code>export CPPFLAGS=&quot;&quot;</code> (or, better, <code>unset CPPFLAGS</code>) is a workaround. The underlying problem is that you have <code>CPPFLAGS</code> set in your environment. The solution is to fix that."}], "tags": [], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "is_accepted": true, "score": 5, "last_activity_date": 1420700901, "creation_date": 1420700901, "answer_id": 27834710, "question_id": 27818030, "link": "https://stackoverflow.com/questions/27818030/std-c11-is-valid-for-c-objc-but-not-for-c/27834710#27834710", "title": "&#39;-std=c++11&#39; is valid for C++/ObjC++ but not for C", "body": "<p>Since there is no one answered me, I will answer to myself</p>\n\n<p>In fact the <code>-std=c++11</code> is injected by the global variable <code>CPPFLAGS</code>.</p>\n\n<p>I just added the following line before the <code>./configure</code> and the <code>-std=c++11</code> disappear</p>\n\n<pre><code>export CPPFLAGS=\"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3606, "user_id": 3196753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/28ruV.jpg?s=128&g=1", "display_name": "tresf", "link": "https://stackoverflow.com/users/3196753/tresf"}, "is_accepted": false, "score": 0, "last_activity_date": 1483770937, "creation_date": 1483770937, "answer_id": 41518616, "question_id": 27818030, "link": "https://stackoverflow.com/questions/27818030/std-c11-is-valid-for-c-objc-but-not-for-c/41518616#41518616", "title": "&#39;-std=c++11&#39; is valid for C++/ObjC++ but not for C", "body": "<p>If the flag was set using <code>ADD_DEFINITIONS(-std=c++0x)</code>, it can be removed using <code>REMOVE_DEFINITIONS(-std=c++0x)</code>, then set for c++ only using <code>SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++0x\")</code></p>\n\n<p>Why would one do such a thing?  In large, mixed \"mostly-C++\" projects, <code>ADD_DEFINITIONS</code> and <code>REMOVE_DEFINITIONS</code> is a quick way to switch between <code>std c++</code> levels based on a particular cmake directory but has the unintended side effect of throwing warnings during compilation -- or worse compilation failures on <code>-Werror</code> builds.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1519346549, "post_id": 48938979, "comment_id": 84885995, "body": "What is <code>setup.py</code>? There is no such file in json-c."}, {"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1519400863, "post_id": 48938979, "comment_id": 84909655, "body": "If you get this error when doing a python style C build (setup.py is kind of like its equivalent to configure FWIW)."}], "tags": [], "owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "is_accepted": false, "score": -1, "last_activity_date": 1520009244, "last_edit_date": 1520009244, "creation_date": 1519342547, "answer_id": 48938979, "question_id": 27818030, "link": "https://stackoverflow.com/questions/27818030/std-c11-is-valid-for-c-objc-but-not-for-c/48938979#48938979", "title": "&#39;-std=c++11&#39; is valid for C++/ObjC++ but not for C", "body": "<p>For me this meant \"edit setup.py and remove where it adds -std=c++11\" FWIW.</p>\n"}], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13121, "favorite_count": 1, "accepted_answer_id": 27834710, "answer_count": 3, "score": 1, "last_activity_date": 1520009244, "creation_date": 1420628703, "question_id": 27818030, "link": "https://stackoverflow.com/questions/27818030/std-c11-is-valid-for-c-objc-but-not-for-c", "title": "&#39;-std=c++11&#39; is valid for C++/ObjC++ but not for C", "body": "<p>I m trying to build json-c with the following configuration:</p>\n\n<pre><code>./configure --target=arm-linux-androideabi --host=arm-linux-androideabi \\\n            --build=x86_64-unknown-linux-gnu\n</code></pre>\n\n<p>but I got the following error:</p>\n\n<pre><code>cc1: error: command line option '-std=c++11' is valid for C++/ObjC++ but not for C [-Werror]\n</code></pre>\n\n<p>I tried to add <code>--disable-std-c++11</code> and <code>--disable-std-cpp11</code> to the configure but I got always the same problem.</p>\n\n<p>How to fix that?</p>\n"}, {"tags": ["c", "string", "encryption"], "comments": [{"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420629783, "post_id": 27818019, "comment_id": 44042515, "body": "string size and fgets argument should be <code>x*y+1</code>, else you&#39;ll miss the last charaacter"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420631823, "post_id": 27818160, "comment_id": 44043635, "body": "Could you please explain why message[x*y] is too small? Why is it exactly +11? My code gives me the output with a text that fills the the array completely, so I wonder why the string should be bigger for smaller inputs."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "reply_to_user": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "edited": false, "score": 0, "creation_date": 1420632135, "post_id": 27818160, "comment_id": 44043838, "body": "@kernelpanic it&#39;s too small because you need a slot for <code>&#39;\\0&#39;</code> on the end if all the x*y spaces are filled, <code>+11</code> was  a typo, should be <code>+1</code>"}], "tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": true, "score": 2, "last_activity_date": 1420632054, "last_edit_date": 1420632054, "creation_date": 1420629114, "answer_id": 27818160, "question_id": 27818019, "link": "https://stackoverflow.com/questions/27818019/fill-empty-c-string-correctly/27818160#27818160", "title": "Fill empty C string correctly", "body": "<p>nul pad the string\nthen wen reading out the result skip the nuls </p>\n\n<p><code>char string[x*y+1]; // you had it too small</code></p>\n\n<p>...</p>\n\n<pre><code>    fgets(string, x*y+1, stdin);              //immediatly as \\n is still there)\n    int num_read = strlen(string);\n    if(num_read &lt; x*y+1 )\n       memset(string+num_read,'\\0',x*y+1-num_read);\n    if (string[num_read ] == '\\n' )\n        string[num_read ] = '\\0';\n</code></pre>\n\n<p>...</p>\n\n<pre><code>    char message[x*y+1];  // was way too small!\n    for(int j=0; j &lt; x; j++){\n        for(int i=0; i &lt; y; i++){\n            if(code[i][j])\n              message[k] = code[i][j];\n            k++;\n        }\n    } \n    message[k]='\\0' \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420630499, "last_edit_date": 1420630499, "creation_date": 1420629837, "answer_id": 27818387, "question_id": 27818019, "link": "https://stackoverflow.com/questions/27818019/fill-empty-c-string-correctly/27818387#27818387", "title": "Fill empty C string correctly", "body": "<p>You have two problems</p>\n\n<ol>\n<li><p>You need to initialize all the bytes in the <code>string</code> variable, instead of doing with the <code>for</code> loop, you can add this before the <code>fgets</code></p>\n\n<pre><code>memset(string, ' ', x * y);\n</code></pre>\n\n<p>so now all bytes in the string are spaces then you can remove the trailing <code>'\\n'</code> and change the terminating <code>'\\0'</code> with a space, after the <code>fgets</code> with</p>\n\n<pre><code>size_t length;\n\nlength = strlen(string);\nif (string[length - 1] == '\\n')\n    string[length - 1] = ' ';\nstring[length] = ' ';\n</code></pre></li>\n<li><p>You need to add a terminating <code>'\\0'</code> to the <code>message</code> variable, in the loop where you fill <code>message</code> you append <code>message[k] = '\\0';</code> after the loop terminates</p>\n\n<pre><code>k = 0;\nchar message[128];\nfor(int j=0; j &lt; x; j++){\n    for(int i=0; i &lt; y; i++){\n        message[k] = code[i][j];\n        k++;\n    }\n}\nmessage[k] = '\\0';\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 25, "user_id": 3030731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3436cd13460b9204ce88d767533620e4?s=128&d=identicon&r=PG&f=1", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/3030731/kernelpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 27818160, "answer_count": 2, "score": 1, "last_activity_date": 1420632054, "creation_date": 1420628685, "question_id": 27818019, "link": "https://stackoverflow.com/questions/27818019/fill-empty-c-string-correctly", "title": "Fill empty C string correctly", "body": "<p>I am trying to implement the \"hebrew encryption\", which works as follows:</p>\n\n<ul>\n<li>Enter number of columns and rows</li>\n<li>Enter text to encrypt</li>\n<li>Fill array with text</li>\n<li>Output text collumns first</li>\n</ul>\n\n<p>Example:</p>\n\n<ul>\n<li>5 by 4: \"This is an example..\"</li>\n</ul>\n\n<blockquote>\n<pre><code>This\nis an\nexam\nple..\n</code></pre>\n</blockquote>\n\n<ul>\n<li>Output: \"Ti phseli xesaa. nm.\"</li>\n</ul>\n\n<p>However, i have trouble with text that is shorter than the array has space:</p>\n\n<ul>\n<li>5 by 4: \"This is an\"</li>\n</ul>\n\n<blockquote>\n<pre><code>This \nis an\n\n ????\n</code></pre>\n</blockquote>\n\n<p>Where '?' are random(?) characters.</p>\n\n<p>My guess is, that I do not format the string correctly. Currently I check wether a character is '\\n' or '\\0' and replace it with a whitespace.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    int x, y; \n\n    printf(\"Please input rows and collumns: \\n\");\n    scanf(\"%d\", &amp;x);\n    scanf(\"%d\", &amp;y);\n    char string[x*y];\n\n    printf(\"Please insert text: \\n\");\n    fgets(string, x*y, stdin);              //ignore \\n from previous scanf (otherwise terminates\n    fgets(string, x*y, stdin);              //immediatly as \\n is still there)\n\n    int k = 0;\n    char code[y][x];\n    for(int i=0; i &lt; x*y; i++){\n        if(string[i] == '\\n' || string[i] == '\\0')\n            string[i] = ' ';\n    }\n    for(int i=0; i &lt; y; i++){\n        for(int j=0; j &lt; x; j++){\n            code[i][j] = string[k];\n            k++;\n        }\n    } \n\n    //output of matrix\n    for(int i=0; i &lt; y; i++){\n        for(int j=0; j &lt; x; j++){\n            printf(\"%c \",code[i][j]); \n        }\n        printf(\"\\n\");\n    } \n\n    //matrix to message\n    k = 0;\n    char message[128];\n    for(int j=0; j &lt; x; j++){\n        for(int i=0; i &lt; y; i++){\n            message[k] = code[i][j];\n            k++;\n        }\n    } \n\n    printf(\"%s \\n\", message);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "makefile", "autotools", "automake"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 1, "creation_date": 1420626662, "post_id": 27817108, "comment_id": 44040747, "body": "try to print <code>example_SOURCES</code> and see if it has listed all of the source files."}, {"owner": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420628490, "post_id": 27817108, "comment_id": 44041755, "body": "For this kind of thing it&#39;s usually much simpler to use cmake."}, {"owner": {"reputation": 356, "user_id": 3391574, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f2689dfa86b44192843b021791a1bb52?s=128&d=identicon&r=PG&f=1", "display_name": "Manticore", "link": "https://stackoverflow.com/users/3391574/manticore"}, "reply_to_user": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420631080, "post_id": 27817108, "comment_id": 44043201, "body": "@user35443 Is not a choice to use autotools is a requirement."}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 3391574, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f2689dfa86b44192843b021791a1bb52?s=128&d=identicon&r=PG&f=1", "display_name": "Manticore", "link": "https://stackoverflow.com/users/3391574/manticore"}, "is_accepted": true, "score": 0, "last_activity_date": 1420794570, "creation_date": 1420794570, "answer_id": 27857074, "question_id": 27817108, "link": "https://stackoverflow.com/questions/27817108/autodetect-source-for-automake/27857074#27857074", "title": "Autodetect source for automake", "body": "<p>So I have found a workaround, </p>\n\n<p>I use a sed to change the Makefile.am during the configure.</p>\n\n<pre><code># Source + dependency.\nfiles=`find ./src/ -type f | grep -E '\\.h$$|\\.hpp$$|\\.c$$|\\.cpp$$' | sed 's/\\/src//g'` \nsed -i '/.*_SOURCES.*/c\\'\"$soft\"'_SOURCES = '\"$files\"'' src/Makefile.am\n</code></pre>\n\n<p>It's work fine, when we add sources, we just need to do ./configure to update the dependency list.</p>\n"}], "owner": {"reputation": 356, "user_id": 3391574, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f2689dfa86b44192843b021791a1bb52?s=128&d=identicon&r=PG&f=1", "display_name": "Manticore", "link": "https://stackoverflow.com/users/3391574/manticore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 27857074, "answer_count": 1, "score": 1, "last_activity_date": 1420794570, "creation_date": 1420625831, "last_edit_date": 1420632232, "question_id": 27817108, "link": "https://stackoverflow.com/questions/27817108/autodetect-source-for-automake", "title": "Autodetect source for automake", "body": "<p>I'm trying to do a Makefile.am who find all the dependency (c and cpp files) at runtime (make).</p>\n\n<p>I test this command : </p>\n\n<pre><code>example_SOURCES=$(shell find . -type f | grep -E '\\.c|\\.cpp' | awk '{L[NR]=$$0} END {{for (i = 1; i &lt;=NR-1;i++) print L[i]\"\\\\\"}; {print L[NR]}}')\n</code></pre>\n\n<p>The command works fine ( I have controlled with the add of a redirection in a file and the sources are fine).</p>\n\n<p>But the makefile, doesn't use any sources :</p>\n\n<pre><code>gcc  -g -O2    -o example \n</code></pre>\n\n<p>How can I archive my objective for auto-founds all sources ?</p>\n\n<p>p.s I have read that automake must know all sources at call, this is correct ? This can be an explanation why my script doesn't work.</p>\n\n<p>More details : \nI have modify the Makefile generate and place an echo on example_sources and he contain all my files.</p>\n\n<p>I have check the differences between the Makefile with my script and without and the main point is this part :</p>\n\n<p>With script :</p>\n\n<pre><code>am_example_OBJECTS =\n</code></pre>\n\n<p>With manual dependency :</p>\n\n<pre><code>am_example_OBJECTS = ./main.$(OBJEXT)\n</code></pre>\n\n<p>He appear the automake need to know the sources files himself for generate the makefile.</p>\n"}, {"tags": ["c++", "c", "makefile", "x11", "glfw"], "comments": [{"owner": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420628363, "post_id": 27816945, "comment_id": 44041675, "body": "It sometimes isn&#39;t enough just to list all the dependencies and feed them to linker. Order matters to linker. This is what I&#39;ve got:  <code>${OPENGL_LIBRARIES} Xxf86vm Xrandr Xi Xext glfw pthread ${X11_LIBRARIES}</code>"}, {"owner": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420628415, "post_id": 27816945, "comment_id": 44041708, "body": "Anyway, you are compiling GLFW under windows, why don&#39;t you just use the windows version without X11?"}, {"owner": {"reputation": 420, "user_id": 4284367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3387cd64f46111d2b4be0af24b7ece7?s=128&d=identicon&r=PG&f=1", "display_name": "Emilgardis", "link": "https://stackoverflow.com/users/4284367/emilgardis"}, "reply_to_user": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420641783, "post_id": 27816945, "comment_id": 44049464, "body": "I&#39;m using cygwin, that&#39;s why I have to use X11(?). I also want to be using this on as many platforms as I can.  Also, where did you get those variables? I can&#39;t seem to find them."}, {"owner": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420650223, "post_id": 27816945, "comment_id": 44055071, "body": "glfw is a cross-platform library, so if you want to make a glfw program for multiple platforms, the only thing you have to do is to use cmake, it will do most of work for you. Those variables can be obtained using <code>find_library</code> in cmake, but they can be easily replaced with GL for the first one, and x11 for the second one."}, {"owner": {"reputation": 572, "user_id": 142275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a950534483613ea9752ae0c7c0280633?s=128&d=identicon&r=PG", "display_name": "elmindreda", "link": "https://stackoverflow.com/users/142275/elmindreda"}, "edited": false, "score": 0, "creation_date": 1420989325, "post_id": 27816945, "comment_id": 44178085, "body": "You are compiling GLFW for X11. Since you are using Windows, you should <a href=\"http://www.glfw.org/docs/latest/compile.html#compile_deps_mingw_cross\" rel=\"nofollow noreferrer\">compile it for Windows</a>."}, {"owner": {"reputation": 420, "user_id": 4284367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3387cd64f46111d2b4be0af24b7ece7?s=128&d=identicon&r=PG&f=1", "display_name": "Emilgardis", "link": "https://stackoverflow.com/users/4284367/emilgardis"}, "edited": false, "score": 0, "creation_date": 1421002800, "post_id": 27816945, "comment_id": 44182585, "body": "I did that and cmake recognizes that manually specified CMAKE_TOOLCHAIN_FILE isn&#39;t used by project. CMake is version 2.8.11.2, so that variable should be recognized."}, {"owner": {"reputation": 420, "user_id": 4284367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3387cd64f46111d2b4be0af24b7ece7?s=128&d=identicon&r=PG&f=1", "display_name": "Emilgardis", "link": "https://stackoverflow.com/users/4284367/emilgardis"}, "edited": false, "score": 0, "creation_date": 1421003867, "post_id": 27816945, "comment_id": 44182911, "body": "I just defined <code>CMAKE_LEGACY_WIN32</code> to True and see and behold, it is now set to win32 for window- and WGL for context- creation. I am now getting errors with <code>__imp_wglgetProcAddress</code> and more, but I think I haven&#39;t set the wgl library, will see if I can fix."}], "owner": {"reputation": 420, "user_id": 4284367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3387cd64f46111d2b4be0af24b7ece7?s=128&d=identicon&r=PG&f=1", "display_name": "Emilgardis", "link": "https://stackoverflow.com/users/4284367/emilgardis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420625256, "creation_date": 1420625256, "question_id": 27816945, "link": "https://stackoverflow.com/questions/27816945/glfw-shared-dll-cant-compile", "title": "GLFW Shared DLL can&#39;t compile", "body": "<p>I am trying to compile GLFW to use with <a href=\"https://bitbucket.org/pyglfw/pyglfw\" rel=\"nofollow\">pyglfw</a> in cygwin.</p>\n\n<p>Compiling GLFW with normal cmake flags does not work as expected, the boing.exe example don't compile.\nHere is the verbose version of the Makefile output.</p>\n\n<pre><code>/usr/bin/cmake.exe -H/build/glfw-latest150107 -B/build/glfw-latest150107 --check-build-system CMakeFiles/Makefile.cmake 0\n/usr/bin/cmake.exe -E cmake_progress_start /build/glfw-latest150107/CMakeFiles /build/glfw-latest150107/CMakeFiles/progress.marks\nmake -f CMakeFiles/Makefile2 all\nmake[1]: Entering directory '/build/glfw-latest150107'\nmake -f src/CMakeFiles/glfw.dir/build.make src/CMakeFiles/glfw.dir/depend\nmake[2]: Entering directory '/build/glfw-latest150107'\ncd /build/glfw-latest150107 &amp;&amp; /usr/bin/cmake.exe -E cmake_depends \"Unix Makefiles\" /build/glfw-latest150107 /build/glfw-latest150107/src /build/glfw-latest150107 /build/glfw-latest150107/src /build/glfw-latest150107/src/CMakeFiles/glfw.dir/DependInfo.cmake --color=\nScanning dependencies of target glfw\nmake[2]: Leaving directory '/build/glfw-latest150107'\nmake -f src/CMakeFiles/glfw.dir/build.make src/CMakeFiles/glfw.dir/build\nmake[2]: Entering directory '/build/glfw-latest150107'\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 13\n[  2%] Building C object src/CMakeFiles/glfw.dir/clipboard.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/clipboard.c.o   -c /build/glfw-latest150107/src/clipboard.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 14\n[  4%] Building C object src/CMakeFiles/glfw.dir/context.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/context.c.o   -c /build/glfw-latest150107/src/context.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 15\n[  6%] Building C object src/CMakeFiles/glfw.dir/gamma.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/gamma.c.o   -c /build/glfw-latest150107/src/gamma.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 16\n[  8%] Building C object src/CMakeFiles/glfw.dir/init.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/init.c.o   -c /build/glfw-latest150107/src/init.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 17\n[ 10%] Building C object src/CMakeFiles/glfw.dir/input.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/input.c.o   -c /build/glfw-latest150107/src/input.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 18\n[ 12%] Building C object src/CMakeFiles/glfw.dir/joystick.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/joystick.c.o   -c /build/glfw-latest150107/src/joystick.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 19\n[ 14%] Building C object src/CMakeFiles/glfw.dir/monitor.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/monitor.c.o   -c /build/glfw-latest150107/src/monitor.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 20\n[ 16%] Building C object src/CMakeFiles/glfw.dir/time.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/time.c.o   -c /build/glfw-latest150107/src/time.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 21\n[ 18%] Building C object src/CMakeFiles/glfw.dir/window.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/window.c.o   -c /build/glfw-latest150107/src/window.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 22\n[ 20%] Building C object src/CMakeFiles/glfw.dir/x11_clipboard.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_clipboard.c.o   -c /build/glfw-latest150107/src/x11_clipboard.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 23\n[ 22%] Building C object src/CMakeFiles/glfw.dir/x11_gamma.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_gamma.c.o   -c /build/glfw-latest150107/src/x11_gamma.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 24\n[ 24%] Building C object src/CMakeFiles/glfw.dir/x11_init.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_init.c.o   -c /build/glfw-latest150107/src/x11_init.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 25\n[ 26%] Building C object src/CMakeFiles/glfw.dir/x11_joystick.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_joystick.c.o   -c /build/glfw-latest150107/src/x11_joystick.c\n/build/glfw-latest150107/src/x11_joystick.c:47:12: warning: \u2018openJoystickDevice\u2019 defined but not used [-Wunused-function]\n static int openJoystickDevice(int joy, const char* path)\n            ^\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 26\n[ 28%] Building C object src/CMakeFiles/glfw.dir/x11_monitor.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_monitor.c.o   -c /build/glfw-latest150107/src/x11_monitor.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 27\n[ 30%] Building C object src/CMakeFiles/glfw.dir/x11_time.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_time.c.o   -c /build/glfw-latest150107/src/x11_time.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 28\n[ 32%] Building C object src/CMakeFiles/glfw.dir/x11_window.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_window.c.o   -c /build/glfw-latest150107/src/x11_window.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 29\n[ 34%] Building C object src/CMakeFiles/glfw.dir/x11_unicode.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/x11_unicode.c.o   -c /build/glfw-latest150107/src/x11_unicode.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 30\n[ 36%] Building C object src/CMakeFiles/glfw.dir/glx_context.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -o CMakeFiles/glfw.dir/glx_context.c.o   -c /build/glfw-latest150107/src/glx_context.c\nLinking C static library libglfw3.a\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cmake.exe -P CMakeFiles/glfw.dir/cmake_clean_target.cmake\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cmake.exe -E cmake_link_script CMakeFiles/glfw.dir/link.txt --verbose=1\n/usr/bin/ar.exe cr libglfw3.a  CMakeFiles/glfw.dir/clipboard.c.o CMakeFiles/glfw.dir/context.c.o CMakeFiles/glfw.dir/gamma.c.o CMakeFiles/glfw.dir/init.c.o CMakeFiles/glfw.dir/input.c.o CMakeFiles/glfw.dir/joystick.c.o CMakeFiles/glfw.dir/monitor.c.o CMakeFiles/glfw.dir/time.c.o CMakeFiles/glfw.dir/window.c.o CMakeFiles/glfw.dir/x11_clipboard.c.o CMakeFiles/glfw.dir/x11_gamma.c.o CMakeFiles/glfw.dir/x11_init.c.o CMakeFiles/glfw.dir/x11_joystick.c.o CMakeFiles/glfw.dir/x11_monitor.c.o CMakeFiles/glfw.dir/x11_time.c.o CMakeFiles/glfw.dir/x11_window.c.o CMakeFiles/glfw.dir/x11_unicode.c.o CMakeFiles/glfw.dir/glx_context.c.o\n/usr/bin/ranlib.exe libglfw3.a\nmake[2]: Leaving directory '/build/glfw-latest150107'\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles  13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30\n[ 36%] Built target glfw\nmake -f examples/CMakeFiles/boing.dir/build.make examples/CMakeFiles/boing.dir/depend\nmake[2]: Entering directory '/build/glfw-latest150107'\ncd /build/glfw-latest150107 &amp;&amp; /usr/bin/cmake.exe -E cmake_depends \"Unix Makefiles\" /build/glfw-latest150107 /build/glfw-latest150107/examples /build/glfw-latest150107 /build/glfw-latest150107/examples /build/glfw-latest150107/examples/CMakeFiles/boing.dir/DependInfo.cmake --color=\nScanning dependencies of target boing\nmake[2]: Leaving directory '/build/glfw-latest150107'\nmake -f examples/CMakeFiles/boing.dir/build.make examples/CMakeFiles/boing.dir/build\nmake[2]: Entering directory '/build/glfw-latest150107'\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 2\n[ 38%] Building C object examples/CMakeFiles/boing.dir/boing.c.o\ncd /build/glfw-latest150107/examples &amp;&amp; /usr/bin/cc   -I/build/glfw-latest150107/include -I/build/glfw-latest150107/deps    -Wall -o CMakeFiles/boing.dir/boing.c.o   -c /build/glfw-latest150107/examples/boing.c\nLinking C executable boing.exe\ncd /build/glfw-latest150107/examples &amp;&amp; /usr/bin/cmake.exe -E cmake_link_script CMakeFiles/boing.dir/link.txt --verbose=1\n/usr/bin/cc    -Wl,--enable-auto-import  -mwindows CMakeFiles/boing.dir/boing.c.o  -o boing.exe -Wl,--out-implib,libboing.dll.a -Wl,--major-image-version,0,--minor-image-version,0  ../src/libglfw3.a /usr/local/lib/libGLU.dll.a -lX11 -Wl,-Bstatic -lrt -Wl,-Bdynamic -lXrandr -lXi /usr/local/lib/libXxf86vm.a -Wl,-Bstatic -lrt -lm -Wl,-Bdynamic -lGL -lXrandr -lXi /usr/local/lib/libXxf86vm.a -Wl,-Bstatic -lm -Wl,-Bdynamic -lGL\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `find_display':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75: undefined reference to `XextFindDisplay'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75:(.text+0x18): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XextFindDisplay'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75: undefined reference to `XextCreateExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75:(.text+0x31): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XextCreateExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75: undefined reference to `XextAddDisplay'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75:(.text+0x7a): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XextAddDisplay'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeSetClientVersion':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:139: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:139:(.text+0x11d): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:136: undefined reference to `XMissingExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:136:(.text+0x181): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XMissingExtension'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeQueryVersion':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:113: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:113:(.text+0x1da): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:116: undefined reference to `_XReply'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:116:(.text+0x1fa): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `_XReply'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:110: undefined reference to `XMissingExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:110:(.text+0x28e): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XMissingExtension'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeSetGamma':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:158: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:158:(.text+0x2ec): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:155: undefined reference to `XMissingExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:155:(.text+0x38d): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XMissingExtension'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeGetGamma':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:180: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:180:(.text+0x3ec): additional relocation overflows omitted from the output\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:184: undefined reference to `_XReply'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:177: undefined reference to `XMissingExtension'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeGetModeLine':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:211: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:236: undefined reference to `_XReply'\n####\n# Ommited some lines, you get the basic idea\n####\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `close_display':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:80: undefined reference to `XextRemoveDisplay'\ncollect2: error: ld returned 1 exit status\nexamples/CMakeFiles/boing.dir/build.make:106: recipe for target 'examples/boing.exe' failed\nmake[2]: *** [examples/boing.exe] Error 1\nmake[2]: Leaving directory '/build/glfw-latest150107'\nCMakeFiles/Makefile2:172: recipe for target 'examples/CMakeFiles/boing.dir/all' failed\nmake[1]: *** [examples/CMakeFiles/boing.dir/all] Error 2\nmake[1]: Leaving directory '/build/glfw-latest150107'\nMakefile:119: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>And to use glfw with pyglfw I have to use the <code>BUILD_SHARED_LIBS=1</code> option in ccmake.</p>\n\n<p>I have compiled and installed libXxf86vm from source, but what bothers me is that the src I built from is called(?) for these functions, shouldn't it use the .dll files in <code>/usr/local/lib/</code></p>\n\n<pre><code>/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `close_display':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:80: undefined reference to `XextRemoveDisplay'\n</code></pre>\n\n<p>To actually install libXxf86vm I had to compile and install <code>xf86vidmodeproto</code>, but that is working for me now(I think).</p>\n\n<p>Now the Makefile output with <code>BUILD_SHARED_LIBS=1</code>.</p>\n\n<pre><code>/usr/bin/cmake.exe -H/build/glfw-latest150107 -B/build/glfw-latest150107 --check-build-system CMakeFiles/Makefile.cmake 0\n/usr/bin/cmake.exe -E cmake_progress_start /build/glfw-latest150107/CMakeFiles /build/glfw-latest150107/CMakeFiles/progress.marks\nmake -f CMakeFiles/Makefile2 all\nmake[1]: Entering directory '/build/glfw-latest150107'\nmake -f src/CMakeFiles/glfw.dir/build.make src/CMakeFiles/glfw.dir/depend\nmake[2]: Entering directory '/build/glfw-latest150107'\ncd /build/glfw-latest150107 &amp;&amp; /usr/bin/cmake.exe -E cmake_depends \"Unix Makefiles\" /build/glfw-latest150107 /build/glfw-latest150107/src /build/glfw-latest150107 /build/glfw-latest150107/src /build/glfw-latest150107/src/CMakeFiles/glfw.dir/DependInfo.cmake --color=\nScanning dependencies of target glfw\nmake[2]: Leaving directory '/build/glfw-latest150107'\nmake -f src/CMakeFiles/glfw.dir/build.make src/CMakeFiles/glfw.dir/build\nmake[2]: Entering directory '/build/glfw-latest150107'\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 13\n[  2%] Building C object src/CMakeFiles/glfw.dir/clipboard.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/clipboard.c.o   -c /build/glfw-latest150107/src/clipboard.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 14\n[  4%] Building C object src/CMakeFiles/glfw.dir/context.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/context.c.o   -c /build/glfw-latest150107/src/context.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 15\n[  6%] Building C object src/CMakeFiles/glfw.dir/gamma.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/gamma.c.o   -c /build/glfw-latest150107/src/gamma.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 16\n[  8%] Building C object src/CMakeFiles/glfw.dir/init.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/init.c.o   -c /build/glfw-latest150107/src/init.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 17\n[ 10%] Building C object src/CMakeFiles/glfw.dir/input.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/input.c.o   -c /build/glfw-latest150107/src/input.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 18\n[ 12%] Building C object src/CMakeFiles/glfw.dir/joystick.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/joystick.c.o   -c /build/glfw-latest150107/src/joystick.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 19\n[ 14%] Building C object src/CMakeFiles/glfw.dir/monitor.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/monitor.c.o   -c /build/glfw-latest150107/src/monitor.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 20\n[ 16%] Building C object src/CMakeFiles/glfw.dir/time.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/time.c.o   -c /build/glfw-latest150107/src/time.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 21\n[ 18%] Building C object src/CMakeFiles/glfw.dir/window.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/window.c.o   -c /build/glfw-latest150107/src/window.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 22\n[ 20%] Building C object src/CMakeFiles/glfw.dir/x11_clipboard.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_clipboard.c.o   -c /build/glfw-latest150107/src/x11_clipboard.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 23\n[ 22%] Building C object src/CMakeFiles/glfw.dir/x11_gamma.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_gamma.c.o   -c /build/glfw-latest150107/src/x11_gamma.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 24\n[ 24%] Building C object src/CMakeFiles/glfw.dir/x11_init.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_init.c.o   -c /build/glfw-latest150107/src/x11_init.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 25\n[ 26%] Building C object src/CMakeFiles/glfw.dir/x11_joystick.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_joystick.c.o   -c /build/glfw-latest150107/src/x11_joystick.c\n/build/glfw-latest150107/src/x11_joystick.c:47:12: warning: \u2018openJoystickDevice\u2019 defined but not used [-Wunused-function]\n static int openJoystickDevice(int joy, const char* path)\n            ^\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 26\n[ 28%] Building C object src/CMakeFiles/glfw.dir/x11_monitor.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_monitor.c.o   -c /build/glfw-latest150107/src/x11_monitor.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 27\n[ 30%] Building C object src/CMakeFiles/glfw.dir/x11_time.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_time.c.o   -c /build/glfw-latest150107/src/x11_time.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 28\n[ 32%] Building C object src/CMakeFiles/glfw.dir/x11_window.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_window.c.o   -c /build/glfw-latest150107/src/x11_window.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 29\n[ 34%] Building C object src/CMakeFiles/glfw.dir/x11_unicode.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/x11_unicode.c.o   -c /build/glfw-latest150107/src/x11_unicode.c\n/usr/bin/cmake.exe -E cmake_progress_report /build/glfw-latest150107/CMakeFiles 30\n[ 36%] Building C object src/CMakeFiles/glfw.dir/glx_context.c.o\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cc  -D_GLFW_USE_CONFIG_H -Dglfw_EXPORTS -I/build/glfw-latest150107/src -I/usr/local/include    -Wall -fvisibility=hidden -o CMakeFiles/glfw.dir/glx_context.c.o   -c /build/glfw-latest150107/src/glx_context.c\nLinking C shared library cygglfw-3.dll\ncd /build/glfw-latest150107/src &amp;&amp; /usr/bin/cmake.exe -E cmake_link_script CMakeFiles/glfw.dir/link.txt --verbose=1\n/usr/bin/cc      -shared -Wl,--enable-auto-import -o cygglfw-3.dll -Wl,--out-implib,libglfw.dll.a -Wl,--major-image-version,3,--minor-image-version,0 CMakeFiles/glfw.dir/clipboard.c.o CMakeFiles/glfw.dir/context.c.o CMakeFiles/glfw.dir/gamma.c.o CMakeFiles/glfw.dir/init.c.o CMakeFiles/glfw.dir/input.c.o CMakeFiles/glfw.dir/joystick.c.o CMakeFiles/glfw.dir/monitor.c.o CMakeFiles/glfw.dir/time.c.o CMakeFiles/glfw.dir/window.c.o CMakeFiles/glfw.dir/x11_clipboard.c.o CMakeFiles/glfw.dir/x11_gamma.c.o CMakeFiles/glfw.dir/x11_init.c.o CMakeFiles/glfw.dir/x11_joystick.c.o CMakeFiles/glfw.dir/x11_monitor.c.o CMakeFiles/glfw.dir/x11_time.c.o CMakeFiles/glfw.dir/x11_window.c.o CMakeFiles/glfw.dir/x11_unicode.c.o CMakeFiles/glfw.dir/glx_context.c.o -lX11 -Wl,-Bstatic -lrt -Wl,-Bdynamic -lXrandr -lXi /usr/local/lib/libXxf86vm.a -Wl,-Bstatic -lrt -lm -Wl,-Bdynamic -lGL -lXrandr -lXi /usr/local/lib/libXxf86vm.a -Wl,-Bstatic -lm -Wl,-Bdynamic -lGL\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `find_display':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75: undefined reference to `XextFindDisplay'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75:(.text+0x18): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XextFindDisplay'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75: undefined reference to `XextCreateExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75:(.text+0x31): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XextCreateExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75: undefined reference to `XextAddDisplay'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:75:(.text+0x7a): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XextAddDisplay'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeSetClientVersion':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:139: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:139:(.text+0x11d): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:136: undefined reference to `XMissingExtension'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:136:(.text+0x181): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `XMissingExtension'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeQueryVersion':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:113: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:113:(.text+0x1da): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:116: undefined reference to `_XReply'\n####\n# Ommited some lines, you get the basic idea\n####\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `XF86VidModeGetPermissions':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:1170: undefined reference to `_XGetRequest'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:1174: undefined reference to `_XReply'\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:1167: undefined reference to `XMissingExtension'\n/usr/local/lib/libXxf86vm.a(XF86VMode.o): In function `close_display':\n/build/libXxf86vm-1.1.2/src/XF86VMode.c:80: undefined reference to `XextRemoveDisplay'\ncollect2: error: ld returned 1 exit status\nsrc/CMakeFiles/glfw.dir/build.make:529: recipe for target 'src/cygglfw-3.dll' failed\nmake[2]: *** [src/cygglfw-3.dll] Error 1\nmake[2]: Leaving directory '/build/glfw-latest150107'\nCMakeFiles/Makefile2:112: recipe for target 'src/CMakeFiles/glfw.dir/all' failed\nmake[1]: *** [src/CMakeFiles/glfw.dir/all] Error 2\nmake[1]: Leaving directory '/build/glfw-latest150107'\nMakefile:119: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>How do I fix this problem so that I can build the shared libs?</p>\n"}, {"tags": ["c", "language-lawyer", "volatile"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1420624697, "post_id": 27816535, "comment_id": 44039576, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/246127/why-is-volatile-needed-in-c\">Why is volatile needed in c?</a>"}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1420625170, "post_id": 27816535, "comment_id": 44039835, "body": "I think this question is more specific about how volatile variables may be optimized."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1420625250, "post_id": 27816535, "comment_id": 44039881, "body": "was <code>c = 30;</code> meant to read <code>d = 30;</code> ?"}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 0, "creation_date": 1420625342, "post_id": 27816535, "comment_id": 44039950, "body": "Yes, thanks Matt. I will edit it."}], "answers": [{"comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 2, "creation_date": 1420626394, "post_id": 27816848, "comment_id": 44040577, "body": "6.7.3 says &quot;What constitutes an access to an object that has volatile-qualified type is implementation-defined.&quot;, which addresses your last paragraph."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 9, "last_activity_date": 1420631461, "last_edit_date": 1420631461, "creation_date": 1420624956, "answer_id": 27816848, "question_id": 27816535, "link": "https://stackoverflow.com/questions/27816535/when-can-a-volatile-variable-be-optimized-away-completely/27816848#27816848", "title": "When can a volatile variable be optimized away completely?", "body": "<p>Writes to volatile variables (even automatic ones) count as observable behaviour.</p>\n\n<p>C11 (N1570) 5.1.2.3/6:</p>\n\n<blockquote>\n  <p>The least requirements on a conforming implementation are:</p>\n  \n  <p>\u2014 Accesses to volatile objects are evaluated strictly according to the rules of the abstract\n  machine.</p>\n  \n  <p>\u2014 At program termination, all data written into files shall be identical to the result that\n  execution of the program according to the abstract semantics would have produced.</p>\n  \n  <p>\u2014 The input and output dynamics of interactive devices shall take place as specified in\n  7.21.3. The intent of these requirements is that unbuffered or line-buffered output\n  appear as soon as possible, to ensure that prompting messages actually appear prior to\n  a program waiting for input.</p>\n  \n  <p>This is the <em>observable behavior</em> of the program.</p>\n</blockquote>\n\n<p>The question is: does <em>initialization</em> (<code>e</code>, <code>f</code>) count as an \"access\"? As pointed out by Sander de Dycker, 6.7.3 says:</p>\n\n<blockquote>\n  <p>What constitutes an access to an object that has volatile-qualified type is implementation-defined.</p>\n</blockquote>\n\n<p>which means it's up to the compiler whether or not <code>e</code> and <code>f</code> can be optimized away - but this must be documented!</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1420625456, "post_id": 27816974, "comment_id": 44040010, "body": "Note that declarations are not expressions"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1420626251, "post_id": 27816974, "comment_id": 44040477, "body": "but it says a bit further : &quot;What constitutes an access to an object that has volatile-qualified type is implementation-defined.&quot; which explains the mentioned difference in behaviour between gcc and llvm."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1421268821, "post_id": 27816974, "comment_id": 44299443, "body": "If a volatile automatic variable does not have its address taken, that would suggest that a compiler could optimize out all instructions that would access it in the same situations where it could do so for a non-volatile variable <i>but</i> it could not move a side-effect which occurs after such an access to a point before it nor vice versa."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 4, "last_activity_date": 1420625354, "creation_date": 1420625354, "answer_id": 27816974, "question_id": 27816535, "link": "https://stackoverflow.com/questions/27816535/when-can-a-volatile-variable-be-optimized-away-completely/27816974#27816974", "title": "When can a volatile variable be optimized away completely?", "body": "<p>Strictly speaking any volatile variable that is accessed (read or written to) cannot be optimized out according to the C Standard. The Standard says that an access to a volatile object may have unknown side-effects and that accesses to volatile object has to follow the rules of the C abstract machine (where all expressions are evaluated as specified by their semantics).</p>\n\n<p>From the mighty Standard (emphasis mine):</p>\n\n<blockquote>\n  <p>(C11, 6.7.3p7) \"An object that has volatile-qualified type may be modified in ways unknown to the\n  implementation <strong>or have other unknown side effects</strong>. Therefore <strong>any expression referring\n  to such an object shall be evaluated strictly according to the rules of the abstract machine</strong>,\n  as described in 5.1.2.3.\"</p>\n</blockquote>\n\n<p>Following that even a simple initialization of a variable should be considered as an access. Remember the <code>static</code> specifier also causes the object to be initialized (to <code>0</code>) and thus accessed.</p>\n\n<p>Now compilers are known to behave differently with the volatile qualifier, and I guess a lot of them will just optimize out most of the volatile objects of your example program except the ones with the explicit assignment (<code>=</code>).</p>\n"}], "owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 2, "accepted_answer_id": 27816848, "answer_count": 2, "score": 6, "last_activity_date": 1420631461, "creation_date": 1420623959, "last_edit_date": 1495542167, "question_id": 27816535, "link": "https://stackoverflow.com/questions/27816535/when-can-a-volatile-variable-be-optimized-away-completely", "title": "When can a volatile variable be optimized away completely?", "body": "<p>Consider this code example:</p>\n\n<pre><code>int main(void)\n{\n  volatile int a;\n  static volatile int b;\n\n  volatile int c;\n  c = 20;\n  static volatile int d;\n  d = 30;\n\n  volatile int e = 40;\n  static volatile int f = 50;\n\n  return 0;\n}\n</code></pre>\n\n<p>Without <code>volatile</code> a compiler could optimize away all the variables since they are never read from. </p>\n\n<p>I think <code>a</code> and <code>b</code> can be optimized away since they are completely unused, see <a href=\"https://stackoverflow.com/questions/4933314/unused-volatile-variable\">unused volatile variable</a>.</p>\n\n<p>I think <code>c</code> and <code>d</code> can not be removed since they are written to, and writes to volatile variables must actually happen. <code>e</code> should be equivalent to <code>c</code>. </p>\n\n<p>GCC does not optimize away <code>f</code>, but it also does not emit any instruction to write to it. 50 is set in a data section. LLVM (clang) removes <code>f</code> completely.</p>\n\n<p>Are these statements true?</p>\n\n<ol>\n<li>A volatile variable can be optimized away if it is never accessed. </li>\n<li>Initialization of a static or global variable does not count as access. </li>\n</ol>\n"}, {"tags": ["c", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1420623773, "post_id": 27816345, "comment_id": 44039061, "body": "<code>Node ** plaats = &amp;start;</code> : <code>&amp;start</code> is address of local variable <code>start</code>. <code>*plaats = new_node;</code> meant <code>Node * start = new_node;</code>"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1420626301, "post_id": 27816345, "comment_id": 44040515, "body": "If you are creating a linked list, I would recommend using a sentry node, this way there is no special cases for empty list, last element etc. example here <a href=\"https://gist.github.com/anonymous/5d9d9405a9feb58f1577\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/5d9d9405a9feb58f1577</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1420624507, "post_id": 27816395, "comment_id": 44039463, "body": "assuming that &quot;add_back&quot; gets a list of at least one element, else start-&gt;next crashes."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 1, "creation_date": 1420627856, "post_id": 27816395, "comment_id": 44041412, "body": "return on enmoty list?  that&#39;ll make for intersting bugs! better to die with some embarassing error message."}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 3, "last_activity_date": 1420624718, "last_edit_date": 1420624718, "creation_date": 1420623593, "answer_id": 27816395, "question_id": 27816345, "link": "https://stackoverflow.com/questions/27816345/adding-to-the-back-a-a-linked-list/27816395#27816395", "title": "Adding to the back a a linked List", "body": "<p>You did the hard part - this is all you need to do in the last few lines.</p>\n\n<pre><code>void add_back(Node * s, int x) {\n\n    if(s == NULL)  // handle empty list\n            return;\n\n    Node * new_node = malloc(sizeof(Node));\n    new_node-&gt;value = x;\n    Node * start = s;\n    while(start-&gt;next != NULL) { //reach the last node - don't traverse further\n        start = start-&gt;next;\n    }\n    new_node-&gt;next = NULL;\n    start-&gt;next = newnode;\n\n    /* not required\n    Node ** plaats = &amp;start;\n   *plaats = new_node;\n    */\n}\n</code></pre>\n\n<p>This:</p>\n\n<pre><code>    while(start-&gt;next != 0) { //reach the last node - don't traverse further\n        start = start-&gt;next;\n    }\n</code></pre>\n\n<p>Makes you reach here:</p>\n\n<pre><code> +----+-----+   +-----+-----+   +-----+------+\n |    |     +--&gt;|     |     +--&gt;|     | NULL |\n +----+-----+   +-----+-----+   +-----+------+\n                                /\n                            LastNode \n</code></pre>\n\n<p>These 2 lines:</p>\n\n<pre><code>    new_node-&gt;next = 0;\n    start-&gt;next = newnode;\n</code></pre>\n\n<p>Do this:</p>\n\n<pre><code> +----+-----+   +-----+-----+   +-----+------+           +-----+------+\n |    |     +--&gt;|     |     +--&gt;|     |    -------------&gt;|     | NULL |\n +----+-----+   +-----+-----+   +-----+------+           +-----+------+\n                                                          /\n                                                       New Node \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1420623618, "creation_date": 1420623618, "answer_id": 27816405, "question_id": 27816345, "link": "https://stackoverflow.com/questions/27816345/adding-to-the-back-a-a-linked-list/27816405#27816405", "title": "Adding to the back a a linked List", "body": "<p>The problem is the loop to find the last node, when the loop is over <code>start</code> is not the last node, it's <code>NULL</code>. You then get the address of <code>start</code>, which will give you a pointer to the <em>local</em> variable <code>start</code> and assign the new node to that place.</p>\n\n<p>Instead have a specific check if the list is empty, then add the node as the first node. If the list is not empty, loop while <code>start-&gt;next</code> is not <code>NULL</code>, and make <code>start-&gt;next</code> point to the new node.</p>\n"}, {"comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1420626129, "post_id": 27816801, "comment_id": 44040418, "body": "of course you must set <code>n-&gt;value</code> and <code>n-&gt;next</code> in case of an empty list too ... and is you return the list head the double pointer is not really necessary as you could have the original parameter type <code>Node *s</code> and call <code>head = add( head, 1 );</code>"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1420628869, "post_id": 27816801, "comment_id": 44041978, "body": "@IngoLeonhardt nope, you would loose &#39;head&#39;, if you have something like &#39;head = NULL; printnodelist(add(head, 1));&#39; head is still NULL. in my case, &#39;head = NULL; printnodelist(add(&amp;head, 1));&#39; head point to the list"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1420629190, "post_id": 27816801, "comment_id": 44042185, "body": "well, <code>printnodelist(head=add(head,1))</code> would work and also an initialization like <code>Node *head = add(NULL,42);</code> would be possible. I think that&#39;s just a matter of taste."}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1420629335, "post_id": 27816801, "comment_id": 44042265, "body": "okay, i am coming from functional programming, so doing assignments especially inside parameter-paranteses is the ugliest thing one can do. But I changed my function to your NULL-case"}], "tags": [], "owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "is_accepted": false, "score": 0, "last_activity_date": 1420629414, "last_edit_date": 1420629414, "creation_date": 1420624800, "answer_id": 27816801, "question_id": 27816345, "link": "https://stackoverflow.com/questions/27816345/adding-to-the-back-a-a-linked-list/27816801#27816801", "title": "Adding to the back a a linked List", "body": "<p>additionally, I would suggest to enhance the function add_back() to get a POINTER to a node-list-head, and check, whether the head is empty and result a new head, else do the suggested solutions</p>\n\n<pre><code>Node *add(Node **s, int x)\n{\n  Node *n = malloc(sizeof(Node));\n  ... fill n;\n  n-&gt;next = NULL;\n\n  /* no head parameter */\n  if (s == NULL) {\n    return n;\n  }\n\n  /* empty head */\n  if (*s == NULL) {\n    *s = n;\n  } else {\n  /* append to end */\n     ... code from other solution with (*s) instead of s\n  }\n\n  return *s;\n}\n\n\n...\nNode *head = NULL;\nadd(&amp;head, 1);\n...\n</code></pre>\n\n<p>by returning the maybe-new head, you can use add() as a function and use the result right away</p>\n\n<pre><code>head = NULL; \nprintnodelist(add(&amp;head, 1));\niterateovernodelist(head);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 1, "creation_date": 1420625506, "post_id": 27816934, "comment_id": 44040038, "body": "depends on the definition. his definition is: adding to a back of a list, so there should be a list to use this function."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1420627016, "post_id": 27816934, "comment_id": 44040957, "body": "@Peter Miehle You are wrong. In general case he can use the function for empty lists that have head equal to NULL."}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420628193, "post_id": 27816934, "comment_id": 44041587, "body": "@VladfromMoscow - Question is fairly clear for me - OP is not trying to add to empty list. The list has been created understood by the OP&#39;s statement <code>I&#39;m trying to add on element to the back of a linked list.</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1420628393, "post_id": 27816934, "comment_id": 44041692, "body": "@al-Acme I do not understand why did you make such a conclusion from the cited quote. Even if you would be right the function in any case shall be written correctly and be able to add a new node to an empty list."}], "tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": false, "score": 0, "last_activity_date": 1420625229, "creation_date": 1420625229, "answer_id": 27816934, "question_id": 27816345, "link": "https://stackoverflow.com/questions/27816345/adding-to-the-back-a-a-linked-list/27816934#27816934", "title": "Adding to the back a a linked List", "body": "<pre><code> void add_back(Node * s, int x) {\n</code></pre>\n\n<p>that's wrong for a start. with that prototype you can't add to an empty list.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1420628081, "last_edit_date": 1420628081, "creation_date": 1420626862, "answer_id": 27817437, "question_id": 27816345, "link": "https://stackoverflow.com/questions/27816345/adding-to-the-back-a-a-linked-list/27817437#27817437", "title": "Adding to the back a a linked List", "body": "<p>The function can change the head of the list when the list is empty. So you have to pass the head by reference.</p>\n\n<p>Thus the function will look the following way</p>\n\n<pre><code>void add_back( Node **head, int x ) \n{\n    Node **tail = head;\n    Node *new_node;\n\n    while ( *tail != NULL ) tail = &amp;( *tail )-&gt;next;\n\n    new_node = malloc( sizeof( Node ) );\n    new_node-&gt;value = x;\n    new_node-&gt;next = NULL;\n\n    *tail = new_node;\n}\n</code></pre>\n\n<p>So if you will define your list like</p>\n\n<pre><code>Node *head = NULL;\n</code></pre>\n\n<p>then the function is called like</p>\n\n<pre><code>int i = 0;\nfor ( ; i &lt; 10; i++ ) add_back( &amp;head, i ); \n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 3348252, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/723b9c3caafac6904649a1b47e11788d?s=128&d=identicon&r=PG&f=1", "display_name": "Actaeonis", "link": "https://stackoverflow.com/users/3348252/actaeonis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 27817437, "answer_count": 5, "score": 2, "last_activity_date": 1420629414, "creation_date": 1420623430, "question_id": 27816345, "link": "https://stackoverflow.com/questions/27816345/adding-to-the-back-a-a-linked-list", "title": "Adding to the back a a linked List", "body": "<p>I'm trying to add on element to the back of a linked list. I try to do so by iterating over the list untill I encouter a pointer to 0. Than I make a new pointer that points to this one and I try to let it point towards a new Node of my list. The compiler has no remarks, but when I try to write down my list it does not include the element I tried to add.</p>\n\n<pre><code>void add_back(Node * s, int x) {\n    Node * new_node = malloc(sizeof(Node));\n    Node * start = s;\n    new_node-&gt;value = x;\n    new_node-&gt;next = 0;\n    while(start != 0) {\n        start = start-&gt;next;\n    }\n    Node ** plaats = &amp;start;\n    *plaats = new_node;\n}\n</code></pre>\n\n<p>The used struct:</p>\n\n<pre><code>struct Node {\n    int value;\n    struct Node * next;\n};\ntypedef struct Node Node;\n</code></pre>\n"}, {"tags": ["c", "algorithm", "matrix", "dijkstra"], "answers": [{"tags": [], "owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "is_accepted": true, "score": 0, "last_activity_date": 1420623685, "creation_date": 1420623685, "answer_id": 27816429, "question_id": 27816117, "link": "https://stackoverflow.com/questions/27816117/dijkstras-algorithm-in-c-when-vertex-that-are-not-connected-has-the-value-of-1/27816429#27816429", "title": "Dijkstra&#39;s algorithm in c when vertex that are not connected has the value of -1 using Matrix of weights", "body": "<p>You can just check that an edge does not have -1 weight: </p>\n\n<pre><code>for (i = 1; i &lt; size; i++) {\n    if (cost[start][i] != -1) {\n        d = dist[start] + cost[start][i];\n        if (d &lt; dist[i] &amp;&amp; selected[i] == 0) {\n            dist[i] = d;\n            prev[i] = start;\n        }\n    }\n    if (min &gt; dist[i] &amp;&amp; selected[i] == 0) {\n        min = dist[i];\n        m = i;\n    }\n}\n</code></pre>\n\n<p>By the way, if you need to support edge weights up to <code>INT_MAX</code>, you should  store distances in a 64-bit integer type to prevent overflow.</p>\n"}], "owner": {"reputation": 5, "user_id": 2027090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d100206ad4a5a45510467d4e731bc2f?s=128&d=identicon&r=PG", "display_name": "MrLevy", "link": "https://stackoverflow.com/users/2027090/mrlevy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 27816429, "answer_count": 1, "score": 0, "last_activity_date": 1420887973, "creation_date": 1420622687, "last_edit_date": 1420887973, "question_id": 27816117, "link": "https://stackoverflow.com/questions/27816117/dijkstras-algorithm-in-c-when-vertex-that-are-not-connected-has-the-value-of-1", "title": "Dijkstra&#39;s algorithm in c when vertex that are not connected has the value of -1 using Matrix of weights", "body": "<p>im trying to implement the Dijkstra's algorithm in c when vertex that are not connected has the value of -1 using Matrix of weights.</p>\n\n<p>Graph- <a href=\"http://imgur.com/TqCCcrk,BBrGSSl#0\" rel=\"nofollow\">http://imgur.com/TqCCcrk,BBrGSSl#0</a>\nWeight matrix - <a href=\"http://imgur.com/TqCCcrk,BBrGSSl#1\" rel=\"nofollow\">http://imgur.com/TqCCcrk,BBrGSSl#1</a></p>\n\n<p>my code working if i use the the \"-1\" value as some int value(bigger then all the edges weight) but i need to support all int values(0 and positive) </p>\n\n<p>how can i change the following code in order to support the -1 as infinity value and that the code will work!</p>\n\n<p>p.s -1 value is for example the connection between 3 to 4\nthe weight matrix in in size of 6 and starts from index 1 and not 0</p>\n\n<p>thanks alot...</p>\n\n<pre><code>while(selected[target] ==0)\n{\n    min = INT_MAX;\n    m = 0;\n    for(i=1;i&lt; size;i++)\n    {\n        d = dist[start] +cost[start][i];\n        if(d&lt; dist[i]&amp;&amp;selected[i]==0)\n        {\n            dist[i] = d;\n            prev[i] = start;\n        }\n        if(min&gt;dist[i] &amp;&amp; selected[i]==0)\n        {\n            min = dist[i];\n            m = i;\n        }\n    }\n    start = m;\n    selected[start] = 1;\n}\nstart = target;\nj = 0;\nwhile(start != -1)\n{\n    path[j++] = start;\n    start = prev[start];\n}\n\n\nreturn pathList;\n}\n</code></pre>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1420629152, "post_id": 27816110, "comment_id": 44042153, "body": "@Raymond: I doubt that this illustrates <i>correct</i> usage. The cast is an error, and I stopped counting the errors in the expression <code>TEXT(strcat( &quot;YOU : &quot;, msg ))</code> alone. The missing closing <code>)</code> is probably the least serious error."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1420642094, "post_id": 27816110, "comment_id": 44049647, "body": "@IInspectable Those are errors in <code>SetDlgItemText</code>. The cast in the <code>GetDlgItemText</code> is unnecessary but not an error."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1420644713, "post_id": 27816110, "comment_id": 44051435, "body": "@Raymond: Well, I can&#39;t argue that. You are right on both accounts. There&#39;s still an error, though: You cannot use a <code>char</code> array unless you explicitly call the ANSI version (<code>GetDlgItemTextA</code>). <code>GetDlgItemText</code> requires the use of a <code>TCHAR</code> array (which, by coincidence, sometimes really is a <code>char</code> array)."}], "answers": [{"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 4, "creation_date": 1420623172, "post_id": 27816221, "comment_id": 44038729, "body": "Ask your self why you used that cast, and what the <code>TEXT()</code> macro does"}, {"owner": {"reputation": 41, "user_id": 4402208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8cIEIqAI9xU/AAAAAAAAAAI/AAAAAAAAAJo/B2Agtvz0CL8/photo.jpg?sz=128", "display_name": "Mithun Bhaskar", "link": "https://stackoverflow.com/users/4402208/mithun-bhaskar"}, "edited": false, "score": 0, "creation_date": 1420625666, "post_id": 27816221, "comment_id": 44040135, "body": "Thank you very much... :)"}, {"owner": {"reputation": 41, "user_id": 4402208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8cIEIqAI9xU/AAAAAAAAAAI/AAAAAAAAAJo/B2Agtvz0CL8/photo.jpg?sz=128", "display_name": "Mithun Bhaskar", "link": "https://stackoverflow.com/users/4402208/mithun-bhaskar"}, "edited": false, "score": 0, "creation_date": 1420625764, "post_id": 27816221, "comment_id": 44040197, "body": "TEXT (&quot;YOU : %s&quot;, msg) is not working It prints YOU : %s itself"}, {"owner": {"reputation": 1284, "user_id": 3810923, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/edf4a3c2de0a4e03b3b6fa23aaba27b6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSlayer", "link": "https://stackoverflow.com/users/3810923/codeslayer"}, "edited": false, "score": 0, "creation_date": 1420682608, "post_id": 27816221, "comment_id": 44069550, "body": "I updated my answer..sorry about that, try my new answer instead"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1420708935, "post_id": 27816221, "comment_id": 44077687, "body": "The question was tagged with the C language"}, {"owner": {"reputation": 1284, "user_id": 3810923, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/edf4a3c2de0a4e03b3b6fa23aaba27b6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSlayer", "link": "https://stackoverflow.com/users/3810923/codeslayer"}, "edited": false, "score": 0, "creation_date": 1420779968, "post_id": 27816221, "comment_id": 44112046, "body": "i think he mean vc++ here, cause i am using that code in vc++6.0"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1420835989, "post_id": 27816221, "comment_id": 44140128, "body": "No, C means C. And Windows API means Windows API. There is no <code>CString</code> in C or the Windows API. Plus, using Visual C++ 6 as a reference compiler in 2015 is a capital crime."}], "tags": [], "owner": {"reputation": 1284, "user_id": 3810923, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/edf4a3c2de0a4e03b3b6fa23aaba27b6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSlayer", "link": "https://stackoverflow.com/users/3810923/codeslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1420682569, "last_edit_date": 1420682569, "creation_date": 1420623078, "answer_id": 27816221, "question_id": 27816110, "link": "https://stackoverflow.com/questions/27816110/usage-of-getdlgitemtext-in-win32-apps/27816221#27816221", "title": "Usage of GetDlgItemText() in win32 apps", "body": "<p><code>GetDlgItemText()</code> is use to retrieves the title or text associated with a control in a dialog box.</p>\n\n<pre><code>GetDlgItemText(hWnd, IDC_REPLYBOX, (LPSTR)&amp;msg, DEFAULT_MSGLEN);\n</code></pre>\n\n<p>this code is getting the text of your <code>IDC_REPLYBOX</code></p>\n\n<pre><code>CString s;\ns.Format(\"YOU: %s\",msg);\nSetDlgItemText(hWnd, IDC_CHATSCREEN, s);\n</code></pre>\n\n<p>And this one is setting the new text for the <code>IDC_CHATSCREEN</code></p>\n\n<p>try to save your text into variable first so that, you will not concat it inside the SetDlgItem</p>\n"}, {"comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1420623276, "post_id": 27816231, "comment_id": 44038789, "body": "While you comments are good and valid, they do not answer the original question, as you do not use <code>GetDlgItemText&#47;GetDlgItemText</code>."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1420623334, "post_id": 27816231, "comment_id": 44038816, "body": "I am not sure whether the question is &quot;What is my error&quot; or &quot;Please explain what this example does&quot;. Anyway, the example cannot be compiled and cannot work."}, {"owner": {"reputation": 41, "user_id": 4402208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8cIEIqAI9xU/AAAAAAAAAAI/AAAAAAAAAJo/B2Agtvz0CL8/photo.jpg?sz=128", "display_name": "Mithun Bhaskar", "link": "https://stackoverflow.com/users/4402208/mithun-bhaskar"}, "edited": false, "score": 0, "creation_date": 1420625727, "post_id": 27816231, "comment_id": 44040176, "body": "Thank you very much.. :)"}, {"owner": {"reputation": 41, "user_id": 4402208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8cIEIqAI9xU/AAAAAAAAAAI/AAAAAAAAAJo/B2Agtvz0CL8/photo.jpg?sz=128", "display_name": "Mithun Bhaskar", "link": "https://stackoverflow.com/users/4402208/mithun-bhaskar"}, "edited": false, "score": 0, "creation_date": 1420626404, "post_id": 27816231, "comment_id": 44040588, "body": "it is a win32 app and i need to display this on a window. So i dnt think wsprintf will do the job."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1420626531, "post_id": 27816231, "comment_id": 44040664, "body": "<code>wsprintf</code> &quot;prints&quot; in a string. It is Win32 API equivalent to <code>sprintf</code> but supports Unicode. You can do the same with <code>lstrcpy( buf, TEXT( &quot;YOU : &quot; ) ); lstrcat( buf, msg );</code>, but with <code>wsprintf</code> it is shorter. In your original posting <code>strcat</code> adds string to memory which is not free and may clear other data."}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 1, "last_activity_date": 1420623102, "creation_date": 1420623102, "answer_id": 27816231, "question_id": 27816110, "link": "https://stackoverflow.com/questions/27816110/usage-of-getdlgitemtext-in-win32-apps/27816231#27816231", "title": "Usage of GetDlgItemText() in win32 apps", "body": "<ol>\n<li>If your project is Unicode, you have to define <code>msg</code> as <code>TCHAR</code> not <code>char</code>.</li>\n<li><code>strcat( \"YOU : \", msg )</code> is serious bug. Allocate buffer variable e.g. <code>TCHAR buf[256]</code>, then <code>wsprintf( buf, TEXT( \"YOU : %s\" ), msg )</code>.</li>\n</ol>\n"}], "owner": {"reputation": 41, "user_id": 4402208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8cIEIqAI9xU/AAAAAAAAAAI/AAAAAAAAAJo/B2Agtvz0CL8/photo.jpg?sz=128", "display_name": "Mithun Bhaskar", "link": "https://stackoverflow.com/users/4402208/mithun-bhaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4161, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1420682569, "creation_date": 1420622674, "last_edit_date": 1420623008, "question_id": 27816110, "link": "https://stackoverflow.com/questions/27816110/usage-of-getdlgitemtext-in-win32-apps", "title": "Usage of GetDlgItemText() in win32 apps", "body": "<p>Can anybody illustrate the usage of <code>GetDlgItemText()</code> in <strong><code>win32</code></strong> apps?</p>\n\n<pre><code>char msg [DEFAULT_MSGLEN];    \nGetDlgItemText(hWnd, IDC_REPLYBOX, (LPSTR)&amp;msg, DEFAULT_MSGLEN);\nSetDlgItemText(hWnd, IDC_CHATSCREEN, TEXT(strcat( \"YOU : \", msg ));\n</code></pre>\n"}, {"tags": ["c", "string", "sorting"], "comments": [{"owner": {"reputation": 23129, "user_id": 733345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UrLrZ.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/733345/joe"}, "edited": false, "score": 0, "creation_date": 1420621677, "post_id": 27815759, "comment_id": 44037887, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/6127503/shuffle-array-in-c\">Shuffle array in C</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420624135, "post_id": 27815759, "comment_id": 44039256, "body": "<code>int array[MAX_MESSAGES] = { 0,1,2};</code>//set value by loop; then call  <code>shuffle(array, MAX_MESSAGES);</code> ... <code>printf(&quot;%s\\n&quot;,message[array[j]]);</code>"}, {"owner": {"reputation": 37, "user_id": 4402792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c81e011ba6867cf92b6dadf189959ef2?s=128&d=identicon&r=PG&f=1", "display_name": "rimasbimas", "link": "https://stackoverflow.com/users/4402792/rimasbimas"}, "edited": false, "score": 0, "creation_date": 1420624569, "post_id": 27815759, "comment_id": 44039489, "body": "guys, maybe you know how can i generate random, but unique numbers from 1 to 10? i think this will solve my problem."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420627015, "post_id": 27815759, "comment_id": 44040956, "body": "start from 0 because array&#39;s index start from 0 in C."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4402792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c81e011ba6867cf92b6dadf189959ef2?s=128&d=identicon&r=PG&f=1", "display_name": "rimasbimas", "link": "https://stackoverflow.com/users/4402792/rimasbimas"}, "edited": false, "score": 0, "creation_date": 1420729465, "post_id": 27817408, "comment_id": 44089954, "body": "maybe you could show me how to use pool[n] array to sort my string array? I tried to do this, but now i&#39;always getting entry nr.1"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 37, "user_id": 4402792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c81e011ba6867cf92b6dadf189959ef2?s=128&d=identicon&r=PG&f=1", "display_name": "rimasbimas", "link": "https://stackoverflow.com/users/4402792/rimasbimas"}, "edited": false, "score": 0, "creation_date": 1420742497, "post_id": 27817408, "comment_id": 44098252, "body": "@rimasbimas I have expanded my previous answer."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1420742301, "last_edit_date": 1420742301, "creation_date": 1420626748, "answer_id": 27817408, "question_id": 27815759, "link": "https://stackoverflow.com/questions/27815759/string-array-sort-unique-strings/27817408#27817408", "title": "String array sort (unique strings)", "body": "<p>Resubmitted answer. I have changed almost every line of your question's code, for one reason or another. I suggest you go through and compare line by line. In particular, you were not aways using the <code>#define</code> values, and, your loops were based on max capacity rather than the number of lines actually read.</p>\n\n<p>I added the random but unique output previously posted. </p>\n\n<p>Be aware that <code>fgets()</code> leaves the trailing <code>newline</code> as shown by the double line spacing of the output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n#define MAX_MESSAGES        20\n#define MAX_MESSAGE_LEN     150\n\nchar message[MAX_MESSAGES][MAX_MESSAGE_LEN+1];  // allow 1 spare\nchar buffer [MAX_MESSAGE_LEN+1];\nint pool    [MAX_MESSAGES];\n\nint main()\n{\n    int size=0, n;\n    FILE *file_in;\n    if (NULL == (file_in=fopen(\"test.txt\", \"rt\"))) {\n        perror (\"fopen failed for test.txt\");\n        exit (EXIT_FAILURE);\n    }\n    while (size&lt;MAX_MESSAGES &amp;&amp; fgets(buffer, MAX_MESSAGE_LEN, file_in))\n        strcpy (message[size++],buffer);\n    fclose (file_in);       // was omitted\n\n    for (n=0; n&lt;size; n++)  // set up message index pool\n        pool [n] = n;\n    srand((unsigned)time(NULL));\n\n    printf (\"\\ndisplay %d messages in random order\\n\", size);\n    printf (\"with possible repeated messages and skipped messages\\n\");\n\n    while (size) {          // print and remove random message\n        n = rand() % size;\n        printf(\"%s\\n\",message [ pool[n] ]);\n        pool [n] = pool [--size];            // remove index from pool\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4402792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c81e011ba6867cf92b6dadf189959ef2?s=128&d=identicon&r=PG&f=1", "display_name": "rimasbimas", "link": "https://stackoverflow.com/users/4402792/rimasbimas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 27817408, "answer_count": 1, "score": -1, "last_activity_date": 1420742301, "creation_date": 1420621423, "last_edit_date": 1420621677, "question_id": 27815759, "link": "https://stackoverflow.com/questions/27815759/string-array-sort-unique-strings", "title": "String array sort (unique strings)", "body": "<p>I have code that prints words from text, but it need to be shuffled. Code works, but words are repeated. What should i change to get unique words only? </p>\n\n<pre><code>#define MAX_MESSAGES (3)\n#define MAX_MESSAGE_LEN (150)\n\nstatic char message[MAX_MESSAGES][MAX_MESSAGE_LEN] = {{'\\0'}};\nstatic char buffer[MAX_MESSAGE_LEN] = {'\\0'};\n\nint main()\n{\n    /*declare and initialise variable*/\n    int i=0;\n    int j;\n\n    FILE *file_in;\n    if( NULL == (file_in=fopen(\"test.txt\", \"r\") ) )\n    { // then, fopen failed\n        perror( \"fopen failed for test.txt\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    srand(time(NULL));\n\n    /*stores and prints the data from the string*/\n    while( (i&lt;MAX_MESSAGES) &amp;&amp; fgets(buffer,150,file_in) )\n    {\n        strcpy(message[i],buffer);\n        i++;\n    } // end while\n\n    printf(\"\\ndisplay %d messages in random order\\n\", MAX_MESSAGES);\n    printf(\"with possible repeated messages and skipped messages\\n\");\n    for( i=0; i &lt; MAX_MESSAGES; i++)\n    {\n        j = rand() % MAX_MESSAGES;\n        printf(\"%s\\n\",message[j]);\n    } // end for\n\n    return 0;\n} \n</code></pre>\n\n<p>i'm aware about Fisher-Yates shuffle method, i found how function is described, but i don't understand how to call it in my code. </p>\n\n<pre><code>void shuffle(int *array, size_t n)\n{\n    if (n &gt; 1) {\n        size_t i;\n    for (i = 0; i &lt; n - 1; i++) {\n      size_t j = i + rand() / (RAND_MAX / (n - i) + 1);\n      int t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n    }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1420621264, "post_id": 27815537, "comment_id": 44037661, "body": "Err, a thread? Have you looked at any tutorials?"}, {"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 1, "creation_date": 1420621683, "post_id": 27815537, "comment_id": 44037892, "body": "I would urge you to investigate examples that use the <code>select</code> API to implement your server. And while you&#39;re there, please check for errors returned by the socket API calls because they do happen."}, {"owner": {"reputation": 5748, "user_id": 948909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bfdd441256ea9a01f14bb8894b31862f?s=128&d=identicon&r=PG", "display_name": "user35443", "link": "https://stackoverflow.com/users/948909/user35443"}, "edited": false, "score": 0, "creation_date": 1420628602, "post_id": 27815537, "comment_id": 44041826, "body": "Possible follow-up of <a href=\"http://stackoverflow.com/questions/27812390/running-server-socket-infinitely\" title=\"running server socket infinitely\">stackoverflow.com/questions/27812390/&hellip;</a> ."}], "answers": [{"tags": [], "owner": {"reputation": 1232, "user_id": 2861345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e81a9ce9a8d832d19f7ce3afa969d4?s=128&d=identicon&r=PG&f=1", "display_name": "Chandru", "link": "https://stackoverflow.com/users/2861345/chandru"}, "is_accepted": true, "score": 0, "last_activity_date": 1420621977, "last_edit_date": 1420621977, "creation_date": 1420621654, "answer_id": 27815828, "question_id": 27815537, "link": "https://stackoverflow.com/questions/27815537/running-server-socket-continously/27815828#27815828", "title": "running server socket continously", "body": "<pre><code>else if(n == 0)\n{\n   printf(\"client disconnected\\n\");\n   close(connfd);\n   break;\n}\n</code></pre>\n\n<p>Add the above code in the server program next to </p>\n\n<pre><code>if((n=recv(connfd,&amp;info,sizeof(info),0))&gt;0)\n    printf(\"\\n received \\n\");\n</code></pre>\n\n<p>The problem is when your client going to disconnect, you need to send some api to close the client connection.</p>\n\n<p>If the client has disconnected upnormally then above lines will used to close that client automatically.</p>\n\n<p>Then the warning is made in <code>snprintf(sendBuff, sizeof(sendBuff), \"%.24s\\r\\n\", ctime(&amp;ticks));</code>.</p>\n"}], "owner": {"reputation": 868, "user_id": 4402433, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9bce35bd631fc9215f7885d6d0c84366?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiya", "link": "https://stackoverflow.com/users/4402433/sathiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 27815828, "answer_count": 1, "score": 0, "last_activity_date": 1420621977, "creation_date": 1420620577, "question_id": 27815537, "link": "https://stackoverflow.com/questions/27815537/running-server-socket-continously", "title": "running server socket continously", "body": "<p>I have written code to establish connection between server and client using TCP socket.I have got problem in disconnecting the client side. I want server side to run continuously waiting for next client even if the current client closes.\nMy code for client side:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\nint sockfd = 0, n = 0,c;\nchar recvBuff[1024];\nstruct sockaddr_in serv_addr;\nif(argc != 2)\n{\n    printf(\"\\n Usage: %s &lt;ip of server&gt; \\n\",argv[0]);\n    return 1;\n} \n\nmemset(recvBuff, '0',sizeof(recvBuff));\nif((sockfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n{\n    printf(\"\\n Error : Could not create socket \\n\");\n    return 1;\n} \n\nmemset(&amp;serv_addr, '0', sizeof(serv_addr)); \n\nserv_addr.sin_family = AF_INET;\nserv_addr.sin_port = htons(6006); \n\nif(inet_pton(AF_INET, argv[1], &amp;serv_addr.sin_addr)&lt;=0)\n{\n    printf(\"\\n inet_pton error occured\\n\");\n    return 1;\n} \n\nif( connect(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0)\n{\n   printf(\"\\n Error : Connect Failed \\n\");\n   return 1;\n} \nwhile(1)\n{\nprintf(\"\\n 1 to read \\n\");\nprintf(\"\\n 2 to disconnect \\n\");        \nprintf(\"\\n 3 to exit \\n\");\nscanf(\"%d\",&amp;c);\n    switch(c)\n    {\n    case 1:\n        printf(\"\\n Inside case 1 \\n\");\n        if((n=send(sockfd,&amp;c,sizeof(c),0))&gt;0)\n            printf(\"\\n Sent \\n\");\n        n = recv(sockfd, recvBuff, sizeof(recvBuff)-1,0);\n        recvBuff[n] = 0;\n            if(fputs(recvBuff, stdout) == EOF)\n            {\n                    printf(\"\\n Error : Fputs error\\n\");\n            }\n        break;\n    case 2:\n        close(sockfd);//to close only client not server \n    case 3:\n        close(sockfd);\n        exit(1);\n\n\n\n    }\n}\n\n}\n</code></pre>\n\n<p>code for server side:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\nint listenfd = 0, connfd = 0,info,n;\nstruct sockaddr_in serv_addr; \n\nchar sendBuff[1025];\ntime_t ticks; \nlistenfd = socket(AF_INET, SOCK_STREAM, 0);\nmemset(&amp;serv_addr, '0', sizeof(serv_addr));\nmemset(sendBuff, '0', sizeof(sendBuff)); \n\nserv_addr.sin_family = AF_INET;\nserv_addr.sin_addr.s_addr = htonl(INADDR_ANY);\nserv_addr.sin_port = htons(6006); \n\nbind(listenfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)); \n\nlisten(listenfd, 10); \n\nwhile(1)\n{\n    connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); \nprintf(\"\\n Accepted \\n\");\nwhile(1)\n{\n    printf(\"\\n Inside while \\n\");\n    if((n=recv(connfd,&amp;info,sizeof(info),0))&gt;0)\n    printf(\"\\n received \\n\");\n    switch(info)\n    {\n    case 1:\n            ticks = time(NULL);\n            snprintf(sendBuff, sizeof(sendBuff), \"%.24s\\r\\n\", ctime(&amp;ticks));\n            send(connfd, sendBuff, strlen(sendBuff),0); \n        break;\n    }\n}\nclose(connfd);\n\n\n }\n\n} \n</code></pre>\n\n<p>Provide me solution to disconnect client alone while server is running (server waits for next client connection). Even if I use return 0 in case 2 it does not works. Kindly help me.Thanks in advance </p>\n"}, {"tags": ["c++", "c", "pointers", "memory"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1420621824, "post_id": 27815525, "comment_id": 44037965, "body": "Note that this method suffers from the usual &quot;toctou&quot; (time of check to time of use) problem - you check that address X is valid, it is valid, the OS decides to reclaim that part of memory as a consequence of some operation [such as closing the pipe, but hundreds of other possible scenarios exists, especially in a multicore/multithreaded system] and the memory is no longer valid. Maybe if you describe the problem you are ACTUALLY trying to solve (as in &quot;why do you think you need to know if memory is valid&quot;), and we can come up with a better solution?"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1420628407, "post_id": 27815525, "comment_id": 44041701, "body": "Also note that this will likely cause a page fault (presumed that the address is a valid page), which is not only slow, but also possibly purges another page from your working set."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1420632649, "post_id": 27815525, "comment_id": 44044178, "body": "Re edit: Well yes, there is a safe and efficient way. Do only ever read from or write to addresses which you have properly allocated (e.g. using <code>mmap</code> or <code>malloc</code>). In particular, do not write to addresses in the <code>text</code> segment (which will likely not work anyway due to DEP -- regardless of whether it&#39;s a valid address) or make assumptions about where a function in a compiled binary ends (it may very well have 2 or 3 end points and it may very well not fill a complete page)."}], "answers": [{"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 6, "last_activity_date": 1420620914, "creation_date": 1420620914, "answer_id": 27815623, "question_id": 27815525, "link": "https://stackoverflow.com/questions/27815525/how-to-use-the-write-system-call-to-read-from-the-page-writing-to-a-dummy-pi/27815623#27815623", "title": "How to &quot;use the write() system call to read from the page (writing to a dummy pipe() file descriptor)&quot; in C/C++?", "body": "<p>First, create a pipe pair to write the data to:</p>\n\n<pre><code> int fd[2];\n pipe(fd);\n</code></pre>\n\n<p>Then try to write some data from your address to the write side of the pipe:</p>\n\n<pre><code> int result = write(fd[1], addr, 1);\n</code></pre>\n\n<p>If <code>result</code> is 1, the write succeeded, so the address was readable. If it's zero and <code>errno == EFAULT</code>, the address is not readable. If <code>errno</code> is something else, something else went wrong.</p>\n\n<p>Make sure to close the pipes once you're done, of course:</p>\n\n<pre><code> close(fd[0]);\n close(fd[1]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1420620935, "creation_date": 1420620935, "answer_id": 27815631, "question_id": 27815525, "link": "https://stackoverflow.com/questions/27815525/how-to-use-the-write-system-call-to-read-from-the-page-writing-to-a-dummy-pi/27815631#27815631", "title": "How to &quot;use the write() system call to read from the page (writing to a dummy pipe() file descriptor)&quot; in C/C++?", "body": "<p>I've never used that method myself, but I think that yo have to create a pipe (using the <a href=\"http://man7.org/linux/man-pages/man2/pipe.2.html\" rel=\"nofollow\"><code>pipe</code></a> system call), when <code>write</code> to that pipe providing the address you want to check as the buffer.</p>\n\n<p>So lets say you want to check address <code>0x1000000</code>, then you do e.g.</p>\n\n<pre><code>int res = write(dummypipe[1], 0x1000000, 1);\n</code></pre>\n\n<p>If <code>res</code> is <code>-1</code> then you check if <code>errno == EFAULT</code> which indicates that the address is not valid.</p>\n"}], "owner": {"reputation": 31, "user_id": 3718131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffOWr.jpg?s=128&g=1", "display_name": "Jezor", "link": "https://stackoverflow.com/users/3718131/jezor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 27815623, "answer_count": 2, "score": 1, "last_activity_date": 1420629602, "creation_date": 1420620545, "last_edit_date": 1495535169, "question_id": 27815525, "link": "https://stackoverflow.com/questions/27815525/how-to-use-the-write-system-call-to-read-from-the-page-writing-to-a-dummy-pi", "title": "How to &quot;use the write() system call to read from the page (writing to a dummy pipe() file descriptor)&quot; in C/C++?", "body": "<p>I need to test if memory address is readable, so I searched and found this question:\n<a href=\"https://stackoverflow.com/questions/7134590/how-to-test-if-an-address-is-readable-in-linux-userspace-app\">How to test if an address is readable in linux userspace app</a>\nAs user @caf stated:</p>\n\n<blockquote>\n  <p>The canonical way is to use the write() system call to read from the page (writing to a dummy pipe() file descriptor).</p>\n</blockquote>\n\n<p>Unfortunatelly he didn't provide any code example, and I can't comment (low reputation) nor send him a message (at least I don't know how).</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Can't I just omit creating the pipe by doing something like that?</p>\n\n<pre><code>int result = write(0, addr, 1);\n</code></pre>\n\n<p>@Mats Petersson: I'm trying to analyze and change a function after already loading it to memory using function pointer (I'm incrementing the pointer and copying its value byte by byte), so to determine whether it's still this function i need to know if the memory is writeable and readable (it's a little stupid thing to do, I know). Anyhow I'd like to not change my program's memory reading/writing privileges, so what you've said might be a problem.</p>\n\n<p><strong>EDIT 2</strong>\n@Damon: so is there any other sure way to do this?</p>\n"}, {"tags": ["c++", "c", "multithreading", "memory-address"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1420634795, "post_id": 27815426, "comment_id": 44045327, "body": "You may want to pick one language. If you pick C++, you can use <code>std::thread</code> which is a lot easier."}], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 4, "last_activity_date": 1420620568, "creation_date": 1420620568, "answer_id": 27815534, "question_id": 27815426, "link": "https://stackoverflow.com/questions/27815426/error-when-creating-dynamic-pthread-t/27815534#27815534", "title": "Error when creating dynamic pthread_t", "body": "<p>pthread_create() requires a <code>pthread_t*</code> type as the first parameter. You have an array of <code>pthread_t</code> so pass an address of one of them:</p>\n\n<pre><code>rc = pthread_create(&amp;threads[i], NULL, FunctionForThread, (void *)t);\n</code></pre>\n\n<p>Also note that the cast <code>(void *)t</code> is not correct. You should pass a pointer to a valid object.</p>\n"}], "owner": {"reputation": 165, "user_id": 4428032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd0451868943c108abb45aaabd7a507?s=128&d=identicon&r=PG&f=1", "display_name": "user4428032", "link": "https://stackoverflow.com/users/4428032/user4428032"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 27815534, "answer_count": 1, "score": 2, "last_activity_date": 1420621905, "creation_date": 1420620154, "last_edit_date": 1420621905, "question_id": 27815426, "link": "https://stackoverflow.com/questions/27815426/error-when-creating-dynamic-pthread-t", "title": "Error when creating dynamic pthread_t", "body": "<p>I am trying to dynamically create pthread and facing the issue in addressing of the variable. Can you please tell how the address should be accessed </p>\n\n<pre><code>int main (int argc, char *argv[])\n{\n   pthread_t *threads;\n   int rc, numberOfThreads;\n   long t;\n   cout&lt;&lt;\"Number of Threads = \";\n   cin&gt;&gt;numberOfThreads;\n   cout&lt;&lt;endl;\n   threads =(pthread_t*) malloc(numberOfThreads*sizeof(pthread_t));\n   for(t=0; t&lt;numberOfThreads; t++){\n      printf(\"In main: creating thread %ld\\n\", t);\n     // **ERROR ON BELOW LINE**\n      rc = pthread_create((pthread_t)&amp;(threads+numberOfThreads), NULL, FunctionForThread, (void *)t);\n      (void) pthread_join(threads[t], NULL);\n\n      if (rc){\n         printf(\"ERROR; return code from pthread_create() is %d\\n\", rc);\n         exit(-1);\n      }\n   }\n\n   /* Last thing that main() should do */\n   pthread_exit(NULL);\n}\n</code></pre>\n\n<p><strong>ERROR</strong> : <code>lvalue required as unary \u2018&amp;\u2019 operand</code></p>\n"}, {"tags": ["c", "linux", "posix"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1420619892, "post_id": 27815323, "comment_id": 44037020, "body": "Have you tried running with a debugger and a small input file?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420620065, "post_id": 27815323, "comment_id": 44037088, "body": "Instead of reading the file backwards, read it normally into a memory buffer, then <i>print out</i> the buffer backwards. Also, removing the last character in a memory buffer is very  easy, it&#39;s just changing the last character to the string terminator."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420620641, "post_id": 27815323, "comment_id": 44037371, "body": "You&#39;re already allocating a buffer the size of the entire file. Is there some reason you don&#39;t just load the file in to that buffer, then reverse-iterate the buffer with <code>while (size--) putc(buffer[size], stdout);</code> ?"}, {"owner": {"reputation": 369, "user_id": 3697626, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000919661923/picture?type=large", "display_name": "vatay", "link": "https://stackoverflow.com/users/3697626/vatay"}, "edited": false, "score": 0, "creation_date": 1420621058, "post_id": 27815323, "comment_id": 44037555, "body": "WhozCraig: that i have not correctly understand.."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420717669, "post_id": 27815323, "comment_id": 44082524, "body": "@JoachimPileborg Using <code>SEEK_CUR</code> with an offset of <code>- sizeof memory_buffer</code>would be nice (and better for large files)"}], "answers": [{"tags": [], "owner": {"reputation": 369, "user_id": 3697626, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000919661923/picture?type=large", "display_name": "vatay", "link": "https://stackoverflow.com/users/3697626/vatay"}, "is_accepted": true, "score": 1, "last_activity_date": 1420636822, "last_edit_date": 1420636822, "creation_date": 1420631132, "answer_id": 27818800, "question_id": 27815323, "link": "https://stackoverflow.com/questions/27815323/lose-the-last-first-character-by-reversing/27818800#27818800", "title": "Lose the last (first) character by reversing", "body": "<p>I thought about it, tried it out, but in time find the solution.</p>\n\n<pre><code>for(loop = i; loop &gt;= start; loop--) { // change loop &gt; start to &gt;=\n    if(/*(counter == 0) &amp;&amp;*/ (buffer[loop] == 10)) {\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>if(i &gt; start) {\n    counter = 0;\n    for(loop = i-1; loop &gt; start; loop--) {\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 3697626, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000919661923/picture?type=large", "display_name": "vatay", "link": "https://stackoverflow.com/users/3697626/vatay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 27818800, "answer_count": 1, "score": 0, "last_activity_date": 1420636822, "creation_date": 1420619751, "question_id": 27815323, "link": "https://stackoverflow.com/questions/27815323/lose-the-last-first-character-by-reversing", "title": "Lose the last (first) character by reversing", "body": "<p>My reverse function dont give the last(first) character back if the file ended with character and not with \"\\n\" (hex 0A). My system is Posix. Can anywhere help?\nOutput:</p>\n\n<pre><code>54\n3. sor Cs\u00f6rnyef\u00f6l   //here failed \"d\" the last character\n2. sor Szentendre\n1. sor Budapest\n</code></pre>\n\n<p>Here is the Code:</p>\n\n<pre><code>void rf_revers(FILE *fp) {\n    int i, size, start, loop, counter;\n    char *buffer;\n    char line[256];\n    start = 0;\n    fseek(fp, 0, SEEK_END);\n    size = ftell(fp);\n    printf(\"%d\\n\", size); // for test that fseek/ftell giving me the right value\n    buffer = malloc((size+1) * sizeof(char));\n\n    for (i=0; i&lt; size; i++) {\n        fseek(fp, size-1-i, SEEK_SET);\n        buffer[i] = fgetc(fp);\n\n        if(buffer[i] == 10) {\n            if(i != 0) {\n                counter = 0;\n                for(loop = i; loop &gt; start; loop--) {\n                    if((counter == 0) &amp;&amp; (buffer[loop] == 10)) {\n                        continue;\n                    }\n                    line[counter] = buffer[loop];\n                    counter++;\n                }\n                line[counter] = 0;\n                start = i;\n                printf(\"%s\\n\",line);\n            }\n        }\n    }\n\n    if(i &gt; start) {\n        counter = 0;\n        for(loop = i; loop &gt; start; loop--) {\n            if((counter == 0) &amp;&amp; ((buffer[loop] == 10) || (buffer[loop] == 0))) {\n                continue;\n            }\n            line[counter] = buffer[loop];\n            counter++;\n        }\n        line[counter] = 0;\n        printf(\"%s\\n\",line);\n\n        return;\n    }\n}\n</code></pre>\n\n<p>--[sorry for bad english]--</p>\n"}, {"tags": ["c", "printf", "native", "format-specifiers"], "comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1420620316, "post_id": 27815216, "comment_id": 44037222, "body": "Note that to actually print the error message, as opposed to the code, you would use FormatMessage with NTDLL as the module. Normally you&#39;d want to display both as searching for the localized error message is frequently problematic."}], "answers": [{"tags": [], "owner": {"reputation": 8020, "user_id": 1237747, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5674cd4a4abd08d63c5c3de20afbc97d?s=128&d=identicon&r=PG", "display_name": "ST3", "link": "https://stackoverflow.com/users/1237747/st3"}, "is_accepted": true, "score": 3, "last_activity_date": 1420619591, "creation_date": 1420619591, "answer_id": 27815289, "question_id": 27815216, "link": "https://stackoverflow.com/questions/27815216/how-to-print-ntstatus/27815289#27815289", "title": "How to print NTSTATUS?", "body": "<p>I usually use <code>%X</code> in <code>printf</code> to format it as a hex. So you can check meaning of these values <a href=\"http://msdn.microsoft.com/en-us/library/cc704588.aspx\" rel=\"nofollow\">here</a>.</p>\n\n<p>Also if you are writing driver or something similar that doesn't have console, you should log everything into file.</p>\n\n<p>If you don't have <code>printf</code>, you should use argument lists and <code>StringCbVPrintf</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>NTSTATUS Log (PWCHAR text, ... )\n{\n    va_list args;\n    IO_STATUS_BLOCK iosb;\n    ULONG length;\n    UNICODE_STRING uniStr;\n    WCHAR buffer [1024] = { 0 };\n\n    va_start (args, text);\n    StringCbVPrintfW ((STRSAFE_LPWSTR) buffer, 1024 * sizeof (TCHAR), text, args);\n    RtlInitUnicodeString (&amp;uniStr, (PCWSTR) buffer);\n    va_end (args);\n\n    RtlStringCbLengthW(buffer, 1024 * sizeof (TCHAR), (size_t *)&amp;length);\n    return ZwWriteFile(hLog, NULL, NULL, NULL, &amp;iosb, (PVOID)buffer, length, NULL, NULL);\n}\n</code></pre>\n\n<p>And <code>hLog</code> is global variable and somewhere at the beginning <code>ZwCreateFile</code> should be called to open log file.</p>\n"}], "owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3067, "favorite_count": 1, "accepted_answer_id": 27815289, "answer_count": 1, "score": 0, "last_activity_date": 1420619591, "creation_date": 1420619341, "question_id": 27815216, "link": "https://stackoverflow.com/questions/27815216/how-to-print-ntstatus", "title": "How to print NTSTATUS?", "body": "<p>I have written application using native APIs.I am having some trouble in understanding return values.What is the format specifier to print <code>native API</code> status code that was returned by <code>NTSTATUS</code> in c?</p>\n"}, {"tags": ["c", "performance", "algorithm", "hashtable", "avl-tree"], "comments": [{"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 0, "creation_date": 1420619910, "post_id": 27815109, "comment_id": 44037029, "body": "Unless you will build your data structures from scratch, which I discourage anyway, I suggest you to benchmark both."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420620019, "post_id": 27815109, "comment_id": 44037068, "body": "A hash-table gives you an O(1) lookup time; a BST gives you an O(log N) lookup time.  You have to weigh the cost of computing the hash against the cost of multiple MAC comparisons.  On the whole, I suspect a hash table is going to work well."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1420620120, "post_id": 27815109, "comment_id": 44037118, "body": "How would you define <i>best</i>? Hashtables are usually faster, but only if you have good algorithm for hash generation, and suitable collision handling. But do you need either? You could start with <code>qsort</code>+<code>bsearch</code>, and it might be good enough."}, {"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 1, "creation_date": 1420620157, "post_id": 27815109, "comment_id": 44037138, "body": "A common question with lots of answers on SO. <a href=\"http://stackoverflow.com/questions/371136/binary-trees-vs-linked-lists-vs-hash-tables\">Here&#39;s one</a>."}, {"owner": {"reputation": 359, "user_id": 2754161, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/15cb75617549ac1b90e7b5aad745cb59?s=128&d=identicon&r=PG&f=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/2754161/nataraj"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1420622119, "post_id": 27815109, "comment_id": 44038115, "body": "Thanks everyone. @user694733 I thought of going for qsort+bsearch, but in case of dynamic insertion/deletion it may take a hit. need to insert and sort. thought AVL provides more edge there, since insertion, deletion and search are O(log N)"}, {"owner": {"reputation": 359, "user_id": 2754161, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/15cb75617549ac1b90e7b5aad745cb59?s=128&d=identicon&r=PG&f=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/2754161/nataraj"}, "reply_to_user": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 0, "creation_date": 1420622901, "post_id": 27815109, "comment_id": 44038563, "body": "@AndyBrown thanks a lot. That link sure did help. More comparisons. :)"}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 2754161, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/15cb75617549ac1b90e7b5aad745cb59?s=128&d=identicon&r=PG&f=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/2754161/nataraj"}, "edited": false, "score": 0, "creation_date": 1420622397, "post_id": 27815383, "comment_id": 44038279, "body": "Thanks a lot. My data is static as of now, but may evolve to be dynamic. So thought it would be better considering that case also before coming up with a DS/Algo. From what you and others suggest, looks like Hash will work fine for my case."}, {"owner": {"reputation": 359, "user_id": 2754161, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/15cb75617549ac1b90e7b5aad745cb59?s=128&d=identicon&r=PG&f=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/2754161/nataraj"}, "edited": false, "score": 0, "creation_date": 1420622587, "post_id": 27815383, "comment_id": 44038390, "body": "The number of insertions/deletions will definitely be &lt;&lt; number of lookups"}], "tags": [], "owner": {"reputation": 7999, "user_id": 3121703, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/800b7f57322266f268458c067912a932?s=128&d=identicon&r=PG&f=1", "display_name": "Nachiket Kate", "link": "https://stackoverflow.com/users/3121703/nachiket-kate"}, "is_accepted": true, "score": 2, "last_activity_date": 1420619988, "creation_date": 1420619988, "answer_id": 27815383, "question_id": 27815109, "link": "https://stackoverflow.com/questions/27815109/when-to-use-hash-data-structure/27815383#27815383", "title": "When to use hash data structure?", "body": "<p>Below are some of the benefits of Hash structures, </p>\n\n<ol>\n<li>Fast lookup (O(1) theoretically)</li>\n<li>Efficient storage (helps to store key-value)</li>\n</ol>\n\n<p>Though these properties are beneficial but in some scenarios hash table can underperform.</p>\n\n<ol>\n<li>If you have large amount of objects then more storage space (Memory) will be required and thus can cause performance hit</li>\n<li>Hashing/key algorithm should not be complex. Otherwise more time will spent on hashing and finding key. </li>\n<li>Key collision should be minimal to avoid linear search in all values for single key or key duplication.</li>\n</ol>\n\n<p>In your case if hashing algo is not too complex then definitely you can use hashtable as you only 500 objects. If you have lookup intensive workflow then hashtable can save lot of time. If your data is nearly static then don't worry about initial loading time because your lookup time will be much faster. </p>\n\n<p>You can also look at another DS which are efficient for less values like, Hash set, AVL trees, Hash tree. For 500 objects time diff will be milli or micro second diff in linear search and hash search. thus you wont achieve much perf. improvement. Thus look for easiness and readability.</p>\n"}], "owner": {"reputation": 359, "user_id": 2754161, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/15cb75617549ac1b90e7b5aad745cb59?s=128&d=identicon&r=PG&f=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/2754161/nataraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "accepted_answer_id": 27815383, "answer_count": 1, "score": 2, "last_activity_date": 1420620012, "creation_date": 1420618889, "last_edit_date": 1420620012, "question_id": 27815109, "link": "https://stackoverflow.com/questions/27815109/when-to-use-hash-data-structure", "title": "When to use hash data structure?", "body": "<p>I have a collection of objects(max 500).</p>\n\n<p>My entries will be looked up frequently based on a MAC like key, whose range is unknown.</p>\n\n<p>Now, I am confused as to which data structure and algorithm to use for effective look up of values.</p>\n\n<p>I am not sure whether to go for a balanced BST (AVL) or a hashtable for this case.</p>\n\n<p>Are 500 keys small for building hashtables?</p>\n\n<p>What would be the best approach in my case?</p>\n\n<p>I read that <code>computing hash might prove costly when the number of keys is less</code></p>\n\n<p>On a side note, I would also like to know what number of entries (min) need to be present for considering a hashtable?</p>\n\n<p>Please add a comment if further details are needed.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420618719, "post_id": 27814945, "comment_id": 44036556, "body": "@BLUEPIXY that was a silly question but thnx, i edited the question the program stops working in the run time"}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 1, "creation_date": 1420619019, "post_id": 27814945, "comment_id": 44036659, "body": "Still having a compile issue: <code>error C2065: &#39;c&#39; : undeclared identifier</code> for <code>printf(&quot;%s&quot;,c=compare(stack,head));</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1420620036, "post_id": 27814945, "comment_id": 44037073, "body": "at <code>compare</code> : change to <code>struct Node* temp=head,* curr=head;</code>.  at <code>main</code> : change to <code>printf(&quot;%s\\n&quot;, compare(stack,head) ? &quot;yes&quot; : &quot;no&quot;);&#47;&#47;never &quot;no&quot; :-)</code>"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1420620096, "post_id": 27814945, "comment_id": 44037103, "body": "Now write a recursive function to do the same thing. Nested function calls amount to push on a stack and return pop."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "reply_to_user": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 0, "creation_date": 1420620346, "post_id": 27814945, "comment_id": 44037239, "body": "@dbc thanx i forgot editing that part here there should not be a &#39;c =&#39;"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 3, "creation_date": 1420620388, "post_id": 27814945, "comment_id": 44037265, "body": "indent your code please."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1420621024, "post_id": 27814945, "comment_id": 44037536, "body": "The &#39;stops&#39; at run-time might be because you brutally call <code>exit(0)</code> if the list isn&#39;t a palindrome!"}, {"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "edited": false, "score": 0, "creation_date": 1420622393, "post_id": 27814945, "comment_id": 44038277, "body": "Instead of using a stack array (which requires you to estimate the maximum list length up front) you could build a doubly-linked list as you traverse the input list, prepending elememnts. Then, you&#39;d just need to walk both lists in parallel and see whether they are equal."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "reply_to_user": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "edited": false, "score": 0, "creation_date": 1420622774, "post_id": 27814945, "comment_id": 44038503, "body": "@FrerichRaabe Thanx fr ur input but i want to implement this in a single linkedlist."}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420624937, "post_id": 27814945, "comment_id": 44039702, "body": "how hard is it to compile with warnings enabled?"}], "answers": [{"comments": [{"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 0, "creation_date": 1420620682, "post_id": 27814960, "comment_id": 44037392, "body": "@Gopi - the node is being inserted at the beginning of the list, which is fine for this application."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1420620818, "last_edit_date": 1420620818, "creation_date": 1420618239, "answer_id": 27814960, "question_id": 27814945, "link": "https://stackoverflow.com/questions/27814945/palindrome-linkedlist/27814960#27814960", "title": "Palindrome LinkedList", "body": "<pre><code>struct Node* temp;\n</code></pre>\n\n<p><code>temp</code> is not initialized in</p>\n\n<pre><code>bool compare(struct Stack* stack,struct Node* head)\n\nstruct Node* temp,* curr=head;\n</code></pre>\n\n<p>is not</p>\n\n<pre><code>struct struct Node* temp=head,* curr=head;\n</code></pre>\n\n<p>Using uninitialized variables lead to undefined behavior. </p>\n"}, {"comments": [{"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420623425, "post_id": 27815173, "comment_id": 44038865, "body": "The first one works for int c; i.e., it prints 1. The second one also works fine but what should i code so as the output is &#39;true&#39; other than using the ternary operator?"}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420623761, "post_id": 27815173, "comment_id": 44039052, "body": "@Stack - There&#39;s <a href=\"http://stackoverflow.com/questions/17307275/what-is-the-printf-format-specifier-for-bool\">no built-in printf format for bool</a>, so you&#39;ll need to do that manually."}], "tags": [], "owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "is_accepted": false, "score": 2, "last_activity_date": 1420623779, "last_edit_date": 1420623779, "creation_date": 1420619145, "answer_id": 27815173, "question_id": 27814945, "link": "https://stackoverflow.com/questions/27814945/palindrome-linkedlist/27815173#27815173", "title": "Palindrome LinkedList", "body": "<p>You've got an uninitialized local variable <code>temp</code>:</p>\n\n<pre><code>bool compare(struct Stack* stack,struct Node* head)\n{\n    struct Node* temp,* curr=head;\n    while(temp)  // NOT INITIALIZED\n    {\n        push(stack,temp-&gt;data);\n        temp=temp-&gt;next;\n    }\n    while(curr)\n    {\n        if(pop(stack)==curr-&gt;data)\n        {\n            curr=curr-&gt;next;\n        }\n        else\n            exit(0);\n    }\n    return true;\n} \n</code></pre>\n\n<p>You need to fix that first; I think the following should work:</p>\n\n<pre><code>bool compare(struct Stack* stack,struct Node* head)\n{\n    struct Node  *curr;\n\n    for (curr = head; curr != NULL; curr = curr-&gt;next)\n    {\n        push(stack, curr-&gt;data);\n    }\n\n    for (curr = head; curr != NULL; curr = curr-&gt;next)\n    {\n        if (pop(stack) != curr-&gt;data)\n            return false;\n    }\n    return true;\n} \n</code></pre>\n\n<p>Next, you're printing a boolean result with <code>\"%s\"</code>, which is for strings.  You need to do something like:</p>\n\n<pre><code>    c=compare(stack,head);\n    printf(\"%d\\n\", c);\n</code></pre>\n\n<p>or alternatively</p>\n\n<pre><code>    printf(\"%s\\n\", c ? \"true\" : \"false\");\n</code></pre>\n\n<p>At this point, it no longer crashes for me, and works for a couple simple test cases.  You might think about how to handle the case of overflowing the stack, and also consider formatting your code to make it more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1420620037, "creation_date": 1420620037, "answer_id": 27815398, "question_id": 27814945, "link": "https://stackoverflow.com/questions/27814945/palindrome-linkedlist/27815398#27815398", "title": "Palindrome LinkedList", "body": "<pre><code>bool compare(struct Stack* stack,struct Node* head) {\n    struct Node* temp=head;//&lt;- Needs initialising. It wasn't.\n    struct Node* curr=head;\n    while(temp) {\n        push(stack,temp-&gt;data);\n        temp=temp-&gt;next;\n    }\n    while(curr) {\n        if(pop(stack)==curr-&gt;data) {\n           curr=curr-&gt;next;\n        } else {\n            //exit(0); &lt;--Some mistake surely!\n            return false; //Slightly less drastic!\n        }\n    }\n    return true;\n}\n</code></pre>\n\n<p>It's slightly a matter of taste but I find long series of variable declarations to be difficult to read and hence error-prone.</p>\n\n<p>You only really need one local variable - but your compiler probably optimizes that away.</p>\n\n<p><code>exit(0)</code> will abruptly end the program. Most likely indicates 'success' (the exit of 0).</p>\n\n<p>You should <code>return false;</code>.</p>\n\n<p>PS: Credit for using <code>#include &lt;stdbool.h&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420624358, "post_id": 27815624, "comment_id": 44039386, "body": "why do we return current == NULL &amp;&amp; isEmpty( stack ) when the return type is bool and it should return either true or false and also can we return both using &amp;&amp; operator? Also in ur code whether the items match or not it prints the return statement?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420624652, "post_id": 27815624, "comment_id": 44039540, "body": "@Stack Expression current == NULL &amp;&amp; isEmpty( stack ) contains logical AND operator and its value either true or false. If the list is equal to the stack in the reverse order then the last node of the list shall be equal to NULL and the stack shall be empty because all elements were popped. It is the only correct condition that determinates whether the sequence of nodes is a palindrome."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420624935, "post_id": 27815624, "comment_id": 44039699, "body": "@Stack I am sorry. Because the program is written in C then the value of the expression is either 1 (true) or 0 (false). C has no type bool. In C bool is a type def for _Bool that is an integer type."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420625304, "post_id": 27815624, "comment_id": 44039921, "body": "ur logic is awesome man.. yes this doesn&#39;t compile but c has bool type defined in stdbool.h but what should we write so that it compiles"}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420625413, "post_id": 27815624, "comment_id": 44039987, "body": "The return statement also evaluates to either true or false so what is wrong with this code. Is it the data type? what can we write in place of bool so that it compiles"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420625500, "post_id": 27815624, "comment_id": 44040036, "body": "@Stack C has no type bool. C has type _Bool that is an integer type that has two values 0 and 1. In header file &lt;stdbool.h&gt; bool is defined as a typedef of _Bool. For example typedef _Bool bool; You have to include this header if you want to use this typedef. As for true and false then they are simply integer constants 1 and 0 respectively."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420625594, "post_id": 27815624, "comment_id": 44040090, "body": "@Stack Thus either you have to include header &lt;stdbool.h&gt; or declare the return type of the function as int."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420625999, "post_id": 27815624, "comment_id": 44040350, "body": "Thanx a lot by the way i had included stdbool as one of the header files in the question u might have missed that.."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1420626233, "post_id": 27815624, "comment_id": 44040466, "body": "@Stack I will explain why it is the only correct function implementation.The problem is that function pop returns a value even if the stack is empty. In this case  if the list will contain the same values as the value returned by an empty stack then function compare will return incorrecdt result. It will compare empty stack with non-empty list."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420627311, "post_id": 27815624, "comment_id": 44041109, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/68331/discussion-between-stack-and-vlad-from-moscow\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1420625814, "last_edit_date": 1420625814, "creation_date": 1420620915, "answer_id": 27815624, "question_id": 27814945, "link": "https://stackoverflow.com/questions/27814945/palindrome-linkedlist/27815624#27815624", "title": "Palindrome LinkedList", "body": "<p>Function <code>compare</code> has at least two errors. The first one is that it uses uninitialized pointer temp</p>\n\n<pre><code>bool compare(struct Stack* stack,struct Node* head)\n{\nstruct Node* temp,* curr=head;\nwhile(temp) // &lt;= temp is not initialized\n{\n</code></pre>\n\n<p>The second one is that the function never returns <code>false</code> though according to the assignment it has to return <code>false</code> if values in the list and in the stack do not match.\nInstead of returning false you call function exit</p>\n\n<pre><code>else\nexit(0);\n</code></pre>\n\n<p>I would write the function the following way</p>\n\n<pre><code>bool compare(struct Stack *stack, struct Node *head )\n{\n    struct Node *current = head;\n\n    for ( ; current != NULL &amp;&amp; !isFull( stack ); current = current-&gt;next )\n    {\n        push( stack, current-&gt;data );\n    }\n\n    current = head;\n\n    while ( current != NULL &amp;&amp; !isEmpty( stack ) &amp;&amp; pop( stack ) == current-&gt;data )\n    {\n        current = current-&gt;next;\n    } \n\n    return current == NULL &amp;&amp; isEmpty( stack );\n} \n</code></pre>\n\n<p>It is <strong>the only correct function implementation</strong> among presented here function implementations in other answers.:)</p>\n\n<p>As C does not have type bool then that you could use name bool in a program written in C you have to include header <code>&lt;stdbool.h&gt;</code> or define this name yourself as a typedef either of _Bool (if your compiler supports this type) or of int.</p>\n\n<p>You could declare the return type of the function as int if you do not want to include header <code>&lt;stdbool.h&gt;</code>. For example</p>\n\n<pre><code>int compare(struct Stack *stack, struct Node *head );\n</code></pre>\n\n<p>Take into account that you need to write also functions that will free all allocated memory for the list and the stack.</p>\n\n<p>For example you could free memory allocated for the stack the following way</p>\n\n<pre><code>void freeStack( struct Stack **stack )\n{\n    if ( *stack != NULL ) free( ( *stack )-&gt;array );\n    free( *stack );\n\n    *stack = NULL;\n}\n</code></pre>\n\n<p>The same way you could free the memory allocated for the list</p>\n\n<pre><code>void freeList( struct Node **head )\n{\n    if ( *head != NULL )\n    {\n        Node *current = ( *head )-&gt;next;\n\n        while ( current != NULL )\n        {\n            Node *temp = current;\n            current = current-&gt;next;\n            free( temp );\n        }\n    }\n\n    free( *head );\n\n    *head = NULL;\n}  \n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 27815624, "answer_count": 4, "score": 1, "last_activity_date": 1420625814, "creation_date": 1420618174, "last_edit_date": 1420623238, "question_id": 27814945, "link": "https://stackoverflow.com/questions/27814945/palindrome-linkedlist", "title": "Palindrome LinkedList", "body": "<p>Method:</p>\n\n<ol>\n<li><p>Traverse the given list from head to tail and push every visited node to stack.</p></li>\n<li><p>Traverse the list again. For every visited node, pop a node from stack and compare data of popped node with currently visited node.</p></li>\n<li><p>If all nodes matched, then return true, else false.</p></li>\n</ol>\n\n<p><strong>Edit</strong>: The program compiles without an error but stops working during run time</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdbool.h&gt;\n\nstruct Node\n{\nint data;\nstruct Node *next;\n};\nstruct Stack\n{\nunsigned capacity;\nint top;\nint * array;\n};\nstruct Stack* createStack(unsigned capacity)\n{\nstruct Stack* stack=(struct Stack*)malloc(sizeof(struct Stack));\nstack-&gt;capacity=capacity;\nstack-&gt;top=-1;\nstack-&gt;array=(int *)malloc(sizeof(int)*stack-&gt;capacity);\nreturn stack;\n}\nint isFull(struct Stack* stack)\n{   return stack-&gt;top == stack-&gt;capacity - 1; }\n\n// Stack \nint isEmpty(struct Stack* stack)\n{   return stack-&gt;top == -1;  }\n\n// stack.\nvoid push(struct Stack* stack, int item)\n{\nif (isFull(stack))\n    return;\nstack-&gt;array[++stack-&gt;top] = item;\nprintf(\"%d pushed to stack\\n\", item);\n}\n\n// stack.  \nint pop(struct Stack* stack)\n{\nif (isEmpty(stack))\n    return INT_MIN;\nreturn stack-&gt;array[stack-&gt;top--];\n}\n\n//  stack\nint peek(struct Stack* stack)\n{\nif (isEmpty(stack))\n    return INT_MIN;\nreturn stack-&gt;array[stack-&gt;top];\n}\n// linkedlist\nvoid insert(struct Node** head_ref, int new_data)\n{\n\nstruct Node* new_node =\n        (struct Node*) malloc(sizeof(struct Node));\n\nnew_node-&gt;data  = new_data;\n\n\nnew_node-&gt;next = (*head_ref);\n\n\n(*head_ref)    = new_node;\n}\n\nbool compare(struct Stack* stack,struct Node* head)\n{\nstruct Node* temp,* curr=head;\nwhile(temp)\n{\n    push(stack,temp-&gt;data);\n    temp=temp-&gt;next;\n}\nwhile(curr)\n{\n    if(pop(stack)==curr-&gt;data)\n    {\n       curr=curr-&gt;next;\n    }\n    else\n    exit(0);\n}\nreturn true;\n\n} \n// Driver program to test above functions\nint main()\n{\nstruct Stack* stack = createStack(100);\nstruct Node* head=NULL;\ninsert(&amp;head,1);\ninsert(&amp;head,2);\ninsert(&amp;head,1);\nprintf(\"%s\",compare(stack,head));\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 9, "last_activity_date": 1420618663, "last_edit_date": 1420618663, "creation_date": 1420617968, "answer_id": 27814899, "question_id": 27814885, "link": "https://stackoverflow.com/questions/27814885/value-pointed-to-by-a-pointer-changes-after-first-dereference/27814899#27814899", "title": "Value pointed to by a pointer changes after first dereference", "body": "<p>The function has copied the value to a new local variable in <code>init_pointer(int d, int **c)</code></p>\n\n<p><code>d</code> is local to <code>init_pointer</code> which was passed by <code>main</code> from <code>x</code>. Both <code>x</code> and <code>d</code> are separate variables whose addresses are different. Accessing the address of <code>d</code> outside <code>init_pointer</code> will lead to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a>.</p>\n\n<p>It would not make sense to call the function like this but this will work:</p>\n\n<pre><code>void init_pointer(int *d, int **c)\n{\n        (*c) = d;\n}\n\nint main()\n{\n        int x = 100;\n        int *p;\n\n        init_pointer(&amp;x,&amp;p);\n\n        printf(\"pointer = %p, value = %d\\n\",p,*p);\n        printf(\"pointer = %p, value = %d\\n\",p,*p);\n\n        return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pointer = 0xbfde132c, value = 100\npointer = 0xbfde132c, value = 100\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "is_accepted": false, "score": 2, "last_activity_date": 1420618057, "creation_date": 1420618057, "answer_id": 27814918, "question_id": 27814885, "link": "https://stackoverflow.com/questions/27814885/value-pointed-to-by-a-pointer-changes-after-first-dereference/27814918#27814918", "title": "Value pointed to by a pointer changes after first dereference", "body": "<pre><code>void init_pointer(int d, int **c){\n        (*c) = &amp;d;\n}\n</code></pre>\n\n<p>Here <code>*c</code> points to a <em>local copy</em> inside <code>init_pointer()</code>. Once <code>init_pointer()</code> returns, the address becomes invalid, and <code>p</code> in <code>main()</code> points to a freed address.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1420633976, "last_edit_date": 1420633976, "creation_date": 1420633600, "answer_id": 27819511, "question_id": 27814885, "link": "https://stackoverflow.com/questions/27814885/value-pointed-to-by-a-pointer-changes-after-first-dereference/27819511#27819511", "title": "Value pointed to by a pointer changes after first dereference", "body": "<p>In init_pointer you assign the address of the parameter d to *c. The address of the parameter is a stack address.</p>\n\n<p>In the first call to printf, the stack (although deallocated) is still intact, so p points to the discarded parameter d on the stack, which still has a value of 100, and *p is pushed first onto the stack.</p>\n\n<p>In the second call to printf, the first call has overwritten the stack. Although the pointer still points to the same address, its value there has been overwritten by the push of p. Hence p (an address) is printed.</p>\n\n<p>Notes: with \"the stack (although deallocated)\" I mean the stack of and below sp (intel; growing downward). Also, the stack can have been overwritten at any time, e.g. when interrupts occur.</p>\n"}], "owner": {"reputation": 39, "user_id": 4427543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aNpQBZi5Y9I/AAAAAAAAAAI/AAAAAAAAACA/0K25rGUsJB0/photo.jpg?sz=128", "display_name": "IAmStarDust", "link": "https://stackoverflow.com/users/4427543/iamstardust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1420633976, "creation_date": 1420617908, "question_id": 27814885, "link": "https://stackoverflow.com/questions/27814885/value-pointed-to-by-a-pointer-changes-after-first-dereference", "title": "Value pointed to by a pointer changes after first dereference", "body": "<p>I am trying to initialize the integer pointer \"p\" inside the \"init_pointer\" function. After the function returns I am printing the pointer and the dereferenced value twice. The first dereference prints the expected value 100, but the second dereference prints random values.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n    void init_pointer(int d, int **c){\n            (*c) = &amp;d;\n    }\n\n    int main(){\n            int x = 100;\n            int *p;\n\n            init_pointer(x,&amp;p);\n\n            printf(\"pointer = %p, value = %d\\n\",p,*p);\n            printf(\"pointer = %p, value = %d\\n\",p,*p);\n\n            return 0;\n    }\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>pointer = 0x7fffb4d4b9ac, value = 100\npointer = 0x7fffb4d4b9ac, value = 32567\n</code></pre>\n"}, {"tags": ["c", "struct", "int", "endianness", "uint32-t"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1420616062, "post_id": 27814353, "comment_id": 44035636, "body": "Sidenote: You shouldn&#39;t define types that end with <code>_t</code> to avoid possible conflicts with built-in compiler types."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1420616282, "post_id": 27814353, "comment_id": 44035723, "body": "@Sidenote - I use hm_pair_t (I prepend hm_ everywhere I also use _t for all typedefs). Should I fix this in my code? Is there good howto for this kind of naming?"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 1, "creation_date": 1420617175, "post_id": 27814353, "comment_id": 44036044, "body": "Names that start with <code>_</code> are also reserved."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1420617277, "post_id": 27814353, "comment_id": 44036078, "body": "<a href=\"http://stackoverflow.com/a/231807/694733\">This answer</a> has some discussion about it. I have used <code>CamelCaseWithSuffix_T</code> convention in C, but don&#39;t know if it&#39;s best."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 5, "last_activity_date": 1420616011, "creation_date": 1420616011, "answer_id": 27814479, "question_id": 27814353, "link": "https://stackoverflow.com/questions/27814353/how-to-store-a-struct-member-as-big-endian/27814479#27814479", "title": "How to store a struct member as big endian", "body": "<p>You need to use htobe16 or htons or similar.  There's no way in most compilers to declare a variable as having a different endianness.</p>\n\n<p>I'm aware of a (paid, commercial) compiler which had a switch to turn the entire program into the \"opposite\" endianness, but that's not quite what you want, and I'm sure you don't want to pay for it.</p>\n"}], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 27814479, "answer_count": 1, "score": 0, "last_activity_date": 1420616394, "creation_date": 1420615429, "last_edit_date": 1420616394, "question_id": 27814353, "link": "https://stackoverflow.com/questions/27814353/how-to-store-a-struct-member-as-big-endian", "title": "How to store a struct member as big endian", "body": "<p>I have a <code>struct</code> similar to:</p>\n\n<pre><code>typedef struct _pair_t{\n    uint16_t    keylen;     // 2\n    uint32_t    vallen;     // 4\n} __attribute__((__packed__)) pair_t;\n</code></pre>\n\n<p>I will be using <code>mmap</code> to read from a file, so I want to store the numbers as big endian.</p>\n\n<p>Do I need to do <code>htobe16</code> / <code>betoh16</code> or there is some <code>__attribute__</code> that can do this for me?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "edited": false, "score": 1, "creation_date": 1420615052, "post_id": 27814098, "comment_id": 44035285, "body": "Thanks for spending you time answering question. +1."}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": true, "score": 9, "last_activity_date": 1420614629, "last_edit_date": 1420614629, "creation_date": 1420614299, "answer_id": 27814098, "question_id": 27814064, "link": "https://stackoverflow.com/questions/27814064/issue-with-for-loop-in-c/27814098#27814098", "title": "Issue with for loop in C", "body": "<p>You're defining an <em>anonymous</em> block, which is not allowed (it needs to be predeceded by a function definition, otherwise, the compiler will never know when it will have to execute it).</p>\n\n<p>In C, every line of code but variable declaration/initialization must lie within a function.</p>\n\n<p>The only things that may appear at the top level of a translation unit are declarations or function definitions.</p>\n"}, {"comments": [{"owner": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "edited": false, "score": 0, "creation_date": 1420615071, "post_id": 27814125, "comment_id": 44035289, "body": "Thanks for spending you time answering question. +1."}], "tags": [], "owner": {"reputation": 2118, "user_id": 3326555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hWWoI.jpg?s=128&g=1", "display_name": "Seema Kadavan", "link": "https://stackoverflow.com/users/3326555/seema-kadavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1420614396, "creation_date": 1420614396, "answer_id": 27814125, "question_id": 27814064, "link": "https://stackoverflow.com/questions/27814064/issue-with-for-loop-in-c/27814125#27814125", "title": "Issue with for loop in C", "body": "<p>For executing a loop in C, it has to be inside a function. Otherwise compiler will not have any idea when to execute this piece of code. Most of the C compilers will give a compiler error in this case. Only variable initialisations/declarations can appear outside of a function</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint arr[50],i;\n/* This piece will not get executed\n    for(i=0;i&lt;50;i++){\n      arr[i]=0;\n    }\n*/\nint main()\n{\n     printf(\"Hello World!\");\n     return 0;\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4933, "user_id": 2987253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa772cdc439443e5243e9d7aa41a9c6a?s=128&d=identicon&r=PG", "display_name": "Loocid", "link": "https://stackoverflow.com/users/2987253/loocid"}, "edited": false, "score": 1, "creation_date": 1420614704, "post_id": 27814173, "comment_id": 44035156, "body": "Im assuming OP thinks it would run top to bottom, before main() is run."}, {"owner": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "edited": false, "score": 0, "creation_date": 1420615007, "post_id": 27814173, "comment_id": 44035274, "body": "That Makes sense, Thanks for spending you time answering question. +1."}], "tags": [], "owner": {"reputation": 20158, "user_id": 994107, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/oKnAc.jpg?s=128&g=1", "display_name": "Andrey Chernukha", "link": "https://stackoverflow.com/users/994107/andrey-chernukha"}, "is_accepted": false, "score": 1, "last_activity_date": 1420614968, "last_edit_date": 1420614968, "creation_date": 1420614650, "answer_id": 27814173, "question_id": 27814064, "link": "https://stackoverflow.com/questions/27814064/issue-with-for-loop-in-c/27814173#27814173", "title": "Issue with for loop in C", "body": "<p>It has nothing to do with looping in particular. All the statements must be put inside functions, otherwise... tell me, when do you think the code outside a function must be run? Have no idea? And the compiler too</p>\n"}, {"comments": [{"owner": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "edited": false, "score": 0, "creation_date": 1420614977, "post_id": 27814191, "comment_id": 44035264, "body": "Thanks for suggestion, and spending you time answering question. +1."}], "tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": false, "score": 1, "last_activity_date": 1420616855, "last_edit_date": 1420616855, "creation_date": 1420614757, "answer_id": 27814191, "question_id": 27814064, "link": "https://stackoverflow.com/questions/27814064/issue-with-for-loop-in-c/27814191#27814191", "title": "Issue with for loop in C", "body": "<p>You can initialize an array to 0 by just defining it with the first element initialized to zero.</p>\n\n<pre><code>int arr[50]={0};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "edited": false, "score": 0, "creation_date": 1420615505, "post_id": 27814253, "comment_id": 44035433, "body": "Thanks for spending you time answering question. +1, Btw I&#39;m not familiar with <code>python</code> but I code in <code>js</code> in which such code runs fine."}, {"owner": {"reputation": 1378, "user_id": 2407058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/9zGHp.png?s=128&g=1", "display_name": "Freestyle076", "link": "https://stackoverflow.com/users/2407058/freestyle076"}, "reply_to_user": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "edited": false, "score": 1, "creation_date": 1420616294, "post_id": 27814253, "comment_id": 44035725, "body": "One of the paradigms of javascript is imperative, I guessed wrong! haha. Take a look at the paradigm table here <a href=\"http://en.wikipedia.org/wiki/Comparison_of_multi-paradigm_programming_languages\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1378, "user_id": 2407058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/9zGHp.png?s=128&g=1", "display_name": "Freestyle076", "link": "https://stackoverflow.com/users/2407058/freestyle076"}, "is_accepted": false, "score": 2, "last_activity_date": 1420614979, "creation_date": 1420614979, "answer_id": 27814253, "question_id": 27814064, "link": "https://stackoverflow.com/questions/27814064/issue-with-for-loop-in-c/27814253#27814253", "title": "Issue with for loop in C", "body": "<p>What you have here is confusion in <strong>programming paradigm</strong>. If I'm not mistaken (I may be! Just a guess...) you are familiar with python programming, which is written in an imperative paradigm. This means that within a file each line is read and performed top down, one by one. In such a paradigm your proposed <em>code outside of a function</em> would operate just fine.</p>\n\n<p>Since you are writing in the C language you are writing in a <strong>procedural paradigm</strong> (or definitive paradigm). This means that code blocks are to be defined in procedures (functions) and can be referenced procedure to procedure. Calling one procedure launches the program, in C programming this one procedure is the main() procedure, recognized by name. Any code written outside of a procedure is syntactically incorrect (some exceptions I believe, macros and the like...). </p>\n\n<p>Since correct syntax is the first requirement of program compilation in C (and all other procedural programming languages) the error occurs when attempting to compile and run this code.</p>\n\n<p>I do hope this helps with a greater understanding! Paradigms are fun, they are the <em>rules</em> of using a certain language.</p>\n"}], "owner": {"reputation": 3993, "user_id": 2010838, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/85e8ee63b6f508a8a1d3431a643a4134?s=128&d=identicon&r=PG", "display_name": "Vedant Terkar", "link": "https://stackoverflow.com/users/2010838/vedant-terkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 27814098, "answer_count": 5, "score": 0, "last_activity_date": 1420616855, "creation_date": 1420614142, "last_edit_date": 1420614684, "question_id": 27814064, "link": "https://stackoverflow.com/questions/27814064/issue-with-for-loop-in-c", "title": "Issue with for loop in C", "body": "<p>I was creating an <code>int</code> array and making all of its element <code>0</code> in <code>C</code>.</p>\n\n<p>Using:</p>\n\n<pre><code>int arr[50],i;\nfor(i=0;i&lt;50;i++){\n    arr[i]=0;\n}\n</code></pre>\n\n<p>Which works fine if used inside a function or in <code>main()</code> like:</p>\n\n<pre><code>int main(){\n    int arr[50],i;\n    for(i=0;i&lt;50;i++){\n        arr[i]=0;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But something strange happens if we use the code outside of any function like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint arr[50],i;\nfor(i=0;i&lt;50;i++){\n    arr[i]=0;\n}\nint main()\n{\n     printf(\"Hello World!\");\n     return 0;\n} \n</code></pre>\n\n<p>Gives error on compilation:</p>\n\n<pre><code>error: expected identifier or '(' before 'for'    \n for(i=0;i&lt;50;i++){                                           \n ^  \n</code></pre>\n\n<p>So by that, is it that grammar of <code>C</code> doesn't support looping outside of a function?</p>\n\n<p>If no, then why is this happening?</p>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 4, "last_activity_date": 1420613603, "creation_date": 1420613603, "answer_id": 27813941, "question_id": 27813923, "link": "https://stackoverflow.com/questions/27813923/extract-specific-column-from-string-in-c/27813941#27813941", "title": "Extract specific column from string in C", "body": "<pre><code>int a[5];\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>for(i=0;i&lt;5;i++)\nfscanf(fp,\"%*d %*d %d %*d\",&amp;a[i]);\n</code></pre>\n\n<p>Else </p>\n\n<ol>\n<li>Read a line using <code>fgets()</code></li>\n<li>Break the line using <code>strtok()</code> using proper delimiter.</li>\n<li>Use <code>atoi()</code> on the 3rd token to convert it to an integer.</li>\n<li>Store the value</li>\n</ol>\n"}], "owner": {"reputation": 686, "user_id": 1875791, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ce05bb4d7eb8b4f7c2732f51a0496f2e?s=128&d=identicon&r=PG", "display_name": "Arshan", "link": "https://stackoverflow.com/users/1875791/arshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 27813941, "answer_count": 1, "score": 0, "last_activity_date": 1420613603, "creation_date": 1420613497, "question_id": 27813923, "link": "https://stackoverflow.com/questions/27813923/extract-specific-column-from-string-in-c", "title": "Extract specific column from string in C", "body": "<p>I have a text file containing multiple columns of integers. Sample file is as:</p>\n\n<pre><code>Col1    Col2   Col3  Col4\nCol1    Col2   Col3  Col4\n.\n.\n.\nCol1    Col2   Col3  Col4\n</code></pre>\n\n<p>I am able to read the file line by line. Now if I want to read Col3 from each line read, how would I be able to do this and store it in some int variable?</p>\n"}, {"tags": ["c", "linux", "pointers", "gcc", "constants"], "owner": {"reputation": 197, "user_id": 3513722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f2dfa975f29679023d7d587a470898a6?s=128&d=identicon&r=PG&f=1", "display_name": "Usr1", "link": "https://stackoverflow.com/users/3513722/usr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1420612652, "answer_count": 0, "score": 1, "last_activity_date": 1420625857, "creation_date": 1420612360, "last_edit_date": 1420625857, "question_id": 27813681, "link": "https://stackoverflow.com/questions/27813681/why-const-variable-is-getting-modified-using-pointers", "closed_reason": "Duplicate", "title": "Why const variable is getting modified using pointers?", "body": "<pre><code>const int var = 10;\n\nvar = 20; // error: can not modify a const object\n\n\n\nconst int var = 10;\n\nint *ptr = &amp;var;\n\n*ptr = 20; // valid\n</code></pre>\n\n<p>(os:Linux compiler: Gcc)</p>\n\n<p>Why <em>const</em> var is getting modified using pointers?</p>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 2, "creation_date": 1420610581, "post_id": 27813248, "comment_id": 44033720, "body": "@Shokwav is right, padded with 0 since it&#39;s unsigned; good question, though."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1420624324, "last_edit_date": 1420624324, "creation_date": 1420610245, "answer_id": 27813259, "question_id": 27813248, "link": "https://stackoverflow.com/questions/27813248/why-is-it-printing-255/27813259#27813259", "title": "why is it printing 255", "body": "<p><code>unsigned char</code> runs from <code>0-255</code> So the negative number <code>-1</code> will print <code>255</code> <code>-2</code> will print <code>254</code> and so on...</p>\n\n<p><code>signed char</code> runs from <code>-128 to +127</code> so you get -1 for the same <code>printf()</code> which is not the case with <code>unsigned char</code></p>\n\n<p>Once you make a assignment to a char then the rest of the integer values will be padded so your assumption of <code>2^31</code> is wrong.</p>\n\n<p>The negative number is represented using 2's complement(Implementation dependent)</p>\n\n<p>So</p>\n\n<pre><code>1 = 0000 0001\n</code></pre>\n\n<p>So in order to get <code>-1</code> we do</p>\n\n<pre><code>----------------------------------------\n2's complement      = 1111 1111 = (255) |\n-----------------------------------------\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 3756912, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c8c303fbd4d083ffeeb9256b56c93aa?s=128&d=identicon&r=PG&f=1", "display_name": "Janakiram Reddy", "link": "https://stackoverflow.com/users/3756912/janakiram-reddy"}, "edited": false, "score": 0, "creation_date": 1420611142, "post_id": 27813306, "comment_id": 44033877, "body": "but in case of signed char it is printing -1 and (2^31-1)..but in case of unsigned the answer is different"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1420611572, "post_id": 27813306, "comment_id": 44034006, "body": "It is not <code>2^32-1</code> because you are not printing <code>-1</code>, you are printing <code>a</code>, and <code>a</code> is an <code>unsigned char</code> of value 255. If <code>a</code> was signed it would probably convert as -1, but it is not."}], "tags": [], "owner": {"reputation": 604, "user_id": 1575991, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8f033d419fc2e4c833e633ab5fd20794?s=128&d=identicon&r=PG", "display_name": "Shokwav", "link": "https://stackoverflow.com/users/1575991/shokwav"}, "is_accepted": false, "score": 2, "last_activity_date": 1420610485, "creation_date": 1420610485, "answer_id": 27813306, "question_id": 27813248, "link": "https://stackoverflow.com/questions/27813248/why-is-it-printing-255/27813306#27813306", "title": "why is it printing 255", "body": "<p>Your assumption is wrong; the character will \"roll over\" to 255, then be padded to the size of an integer. Assuming a 32-bit integer:</p>\n\n<p>11111111</p>\n\n<p>would be padded to:</p>\n\n<p>00000000 00000000 00000000 11111111</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 3756912, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c8c303fbd4d083ffeeb9256b56c93aa?s=128&d=identicon&r=PG&f=1", "display_name": "Janakiram Reddy", "link": "https://stackoverflow.com/users/3756912/janakiram-reddy"}, "edited": false, "score": 0, "creation_date": 1420611440, "post_id": 27813436, "comment_id": 44033974, "body": "In case of signed char it is printing -1 and (2^31-1)..but in case of unsigned the answer is different"}], "tags": [], "owner": {"reputation": 1155, "user_id": 3479753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271b3b053003525a1add378d49cb804a?s=128&d=identicon&r=PG&f=1", "display_name": "etheranger", "link": "https://stackoverflow.com/users/3479753/etheranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1420611163, "creation_date": 1420611163, "answer_id": 27813436, "question_id": 27813248, "link": "https://stackoverflow.com/questions/27813248/why-is-it-printing-255/27813436#27813436", "title": "why is it printing 255", "body": "<p>The compiler doesn't know what type the extra parameters in <code>printf</code> <em>should</em> be, since the only thing that specifies it should be treated as a 4-byte <code>int</code> is the format string, which is irrelevant at compile time.</p>\n\n<p>What actually happens behind the scenes is the callee (<code>printf</code>) receives a pointer to each parameter, then casts to the appropriate type.</p>\n\n<p>Roughly the same result as this:</p>\n\n<pre><code>char a = -1;\nint * p = (int*)&amp;a; // BAD CAST\n\nint numberToPrint = *p; // Accesses 3 extra bytes from somewhere on the stack\n</code></pre>\n\n<p>Since you're likely running on a little endian CPU, the 4-byte <code>int</code> 0x12345678 is arranged in memory as <code>| 0x78 | 0x56 | 0x34 | 0x12 |</code></p>\n\n<p>If the 3 bytes on the stack following <code>a</code> are all <code>0x00</code> (they probably are due to stack alignment, but it's NOT GUARANTEED), the memory looks like this:</p>\n\n<pre><code>&amp;a:       | 0xFF |\n(int*)&amp;a: | 0xFF | 0x00 | 0x00 | 0x00 |\n</code></pre>\n\n<p>which evaluates to <code>*(int*)&amp;a == 0x000000FF</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1420611789, "creation_date": 1420611789, "answer_id": 27813561, "question_id": 27813248, "link": "https://stackoverflow.com/questions/27813248/why-is-it-printing-255/27813561#27813561", "title": "why is it printing 255", "body": "<p>Up to the representation of <code>a</code>, you are correct. However, the <code>%d</code> and <code>%u</code> conversions of the <code>printf()</code> function both take an <code>int</code> as an argument. That is, your code is the same as if you had written</p>\n\n<pre><code>int main() {\n     unsigned char a = -1;\n     printf(\"%d\", (int)a);\n     printf(\"%u\", (int)a);\n}\n</code></pre>\n\n<p>In the moment you have assigned <code>-1</code> to <code>a</code> you have lost the information that it once was a signed value, the logical value of <code>a</code> is <code>255</code>. Now, when you convert an <code>unsigned char</code> to an <code>int</code>, the compiler preserves the logical value of <code>a</code> and the code prints <code>255</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "is_accepted": false, "score": 0, "last_activity_date": 1420626727, "last_edit_date": 1592644375, "creation_date": 1420626384, "answer_id": 27817295, "question_id": 27813248, "link": "https://stackoverflow.com/questions/27813248/why-is-it-printing-255/27817295#27817295", "title": "why is it printing 255", "body": "<p>It is printing 255, simply because this is the purpose from ISO/IEC9899</p>\n<blockquote>\n<p>H.2.2 Integer types</p>\n<p>1 The signed C integer types int, long int, long long int, and the corresponding\nunsigned types are compatible with LIA\u22121. If an implementation adds support for the\nLIA\u22121 exceptional values \u2018\u2018integer_overflow\u2019\u2019 and \u2018\u2018undefined\u2019\u2019, then those types are\nLIA\u22121 conformant types. C\u2019s unsigned integer types are \u2018\u2018modulo\u2019\u2019 in the LIA\u22121 sense\nin that overflows or out-of-bounds results silently wrap. An implementation that defines\nsigned integer types as also being modulo need not detect integer overflow, in which case,\nonly integer divide-by-zero need be detected.</p>\n</blockquote>\n<p>If this is given, printing 255 is absolutly that, what the LIA-1 would expect.</p>\n<p>Otherwise, if your implementation doesn't support C99's LIA-1 Annex part, then its simply undefined behaving.</p>\n"}], "owner": {"reputation": 75, "user_id": 3756912, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c8c303fbd4d083ffeeb9256b56c93aa?s=128&d=identicon&r=PG&f=1", "display_name": "Janakiram Reddy", "link": "https://stackoverflow.com/users/3756912/janakiram-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 27813561, "answer_count": 5, "score": 0, "last_activity_date": 1420626727, "creation_date": 1420610175, "last_edit_date": 1420610775, "question_id": 27813248, "link": "https://stackoverflow.com/questions/27813248/why-is-it-printing-255", "title": "why is it printing 255", "body": "<pre><code>int main()\n{\n\n     unsigned char a = -1;\n     printf(\"%d\",a);\n     printf(\"%u\",a);\n}\n</code></pre>\n\n<p>when i have executed the above program i got 255 255 as the answer.</p>\n\n<p>we know negative numbers will be stored in 2's complement.</p>\n\n<p>since it is 2's complement the representation would be\n<code>1111 1111</code> -->2's complement.</p>\n\n<p>but in the above we are printing <code>%d(int)</code> but integer is four bytes.</p>\n\n<p>my assumption is even though it is character we are forcing compiler to treat it as integer.\nso it internally uses sign extension concept.</p>\n\n<p><code>1111 1111 1111 1111 1111 1111 1111 1111</code>.</p>\n\n<p>according to the above representation it has to be -1 in the first case since it is %d(signed).\nin the second case it has to print (2^31- 1) but it is printing 255 and 255.\nwhy it is printing 255 in both cases.\ntell me if my assumption is wrong and give me the real interpretation.   </p>\n"}]