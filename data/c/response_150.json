[{"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 2, "creation_date": 1511395386, "post_id": 47445600, "comment_id": 81846662, "body": "&quot;fread would segfault&quot; segfault is not automatic when something goes wrong."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511396305, "post_id": 47445600, "comment_id": 81846886, "body": "What is the question ? Why didn&#39;t you provide driver code ? Why did you expect that a process with a infinite loop will not take a high amount of CPU ? Why did you write <code>sizeof(char)</code> and not <code>sizeof(unsigned char)</code> or better <code>sizeof *packet</code> ? So many questions !"}, {"owner": {"reputation": 11, "user_id": 7635939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f10dcf4614c27215c84b18380789852e?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmineer", "link": "https://stackoverflow.com/users/7635939/cosmineer"}, "edited": false, "score": 0, "creation_date": 1511396634, "post_id": 47445600, "comment_id": 81846972, "body": "Question is why fread() fails to get more data. The infinite loop program I included is only to help the point that this issue is CPU related?  I didn&#39;t provide the full driver because the same behavior can be reproduced with the much smaller program supplied.  The driver itself is an infinite loop, but stops at fread() anyways until the next &quot;packet&quot; is sent from the usb device."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1511396769, "post_id": 47445600, "comment_id": 81847006, "body": "Well, looking by your &quot;mcve&quot;, you are not looking for the return value of <code>fread()</code>, so I suppose your drivers either. If <code>fread()</code> return an error do you stop your driver or do something else ? The correct way to write such loop is generally like that <code>while (fread(packet, sizeof *packet, sizeof packet &#47; sizeof *packet, f))</code>"}, {"owner": {"reputation": 11, "user_id": 7635939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f10dcf4614c27215c84b18380789852e?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmineer", "link": "https://stackoverflow.com/users/7635939/cosmineer"}, "edited": false, "score": 0, "creation_date": 1511396878, "post_id": 47445600, "comment_id": 81847028, "body": "The return value would not help at all since it&#39;s the fact that the function doesn&#39;t return which is the problem. The program should hang like I&#39;m describing only when I&#39;m not touching the pen to the device."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1511397414, "post_id": 47445600, "comment_id": 81847144, "body": "Did <code>valgrind</code> return a clean output against your actual code?"}, {"owner": {"reputation": 11, "user_id": 7635939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f10dcf4614c27215c84b18380789852e?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmineer", "link": "https://stackoverflow.com/users/7635939/cosmineer"}, "edited": false, "score": 0, "creation_date": 1511397714, "post_id": 47445600, "comment_id": 81847224, "body": "It&#39;s hard to say if valgrind works since it&#39;s intended that the program be killed with ctrl+c. At least at this point. Running <code>sudo valgrind .&#47;a.out &#47;dev&#47;usb&#47;hiddev0</code> and then hitting ctrl+c tells me that <code>still reachable: 47,569 bytes in 26 blocks</code>. Could this really affect it? Because fread() will hang at unpredictable times. Running valgrind multiple times will yield the same number of still reachable bytes."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1511424524, "post_id": 47445600, "comment_id": 81855569, "body": "I would check the return of <code>fread()</code>. If it once returns less than 8, this might be for the same reason why a consecutive call hangs... And, if it once returns less than 8, calling <code>feof()</code> and <code>ferror()</code> (as suggested in <a href=\"http://man7.org/linux/man-pages/man3/fread.3.html\" rel=\"nofollow noreferrer\">Linux Programmer&#39;s Manual - FREAD(3)</a>) might help to get progress in this issue."}, {"owner": {"reputation": 11, "user_id": 7635939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f10dcf4614c27215c84b18380789852e?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmineer", "link": "https://stackoverflow.com/users/7635939/cosmineer"}, "edited": false, "score": 0, "creation_date": 1511445059, "post_id": 47445600, "comment_id": 81868572, "body": "I ran ferror and feof on my stream after every call to fread and both never returned anything other than 0. Thanks for the tip though."}], "owner": {"reputation": 11, "user_id": 7635939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f10dcf4614c27215c84b18380789852e?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmineer", "link": "https://stackoverflow.com/users/7635939/cosmineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565710118, "creation_date": 1511394941, "last_edit_date": 1565710118, "question_id": 47445600, "link": "https://stackoverflow.com/questions/47445600/linux-fread-call-to-usb-device-freezes-when-exposed-to-high-cpu-utilization", "title": "Linux fread() call to USB device freezes when exposed to high CPU utilization", "body": "<p>Recently I've written a driver for a drawing tablet called the \"Boogie Board RIP\" to be able to use it as an input device for linux. It can be connected via usb to a computer. When the provided pen is near or touching the device's screen, it will send data telling where the pen is on the screen. </p>\n\n<p>Basically the driver works great. I can write on it as if it was a wacom tablet.</p>\n\n<p>At unpredictable times, the program will hang on the line below and the cursor on my computer screen will stay in place </p>\n\n<pre><code>fread(packet, sizeof(char), BYTES, f);\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li>\"packet\" is an array of 8 bytes</li>\n<li>\"BYTES\" is 8</li>\n<li>\"f\" is a file opened in binary read (rb) mode. In my case it's <code>/dev/usb/hiddev0</code></li>\n</ul>\n\n<p>The basic program layout is a while loop that reads a byte at a time. Below is a mock-up of the much larger thing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    char *path = argv[1];\n    unsigned char packet[8];\n    FILE *f = fopen(path, \"rb\");\n    int i;\n\n    while (1) {\n        fread(packet, sizeof(char), 8, f);\n        for(i=0;i&lt;8;i++) {\n            printf(\"%x\", packet[i]);\n            fflush(stdout);\n        }\n\n    }\n}\n</code></pre>\n\n<p>I started to notice that my driver would \"freeze\" more often when I was running more things, like watching youtube, playing music... These aren't great examples. Basically I began to suspect it was related to CPU utilization. So I wrote the program below to test it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    while(1) {\n        printf(\"a\");\n        fflush(stdout);\n        fflush(stdout);\n        fflush(stdout);\n        fflush(stdout);\n        fflush(stdout);\n        fflush(stdout);\n        fflush(stdout);\n    }\n}\n</code></pre>\n\n<p>Running this \"infinite loop\" program in a separate terminal while running the other program above in another terminal will result in harshly more frequent freezes. Basically the program will stop at the fread() line without fail within 2 seconds. </p>\n\n<p>I learned that when the call to fread() doesn't get any data I can still read from the device with another instance of that program or simply printing out the contents of the file via <code>sudo cat /dev/usb/hiddev0</code>. The original process remains stuck while the new program will spit out the data coming from the device.</p>\n\n<p>It seems as though the file simply closes. But that doesn't make sense because then fread would segfault on the next read. Looking for any ideas.</p>\n\n<p>EDIT:\nI solved this by using libusb to deal with reading from my device rather than trying to read directly from the device file.</p>\n"}, {"tags": ["c", "file", "input", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1511391584, "post_id": 47445131, "comment_id": 81845562, "body": "<a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1511391796, "post_id": 47445131, "comment_id": 81845644, "body": "The first doesn&#39;t consume the <code>&#39;&#47;&#39;</code> because <code>%s</code> format reads up to the next whitespace character, so the <code>&#39;&#47;&#39;</code> characters have already been read. Use <code>fgets</code> and break up the string with <code>strtok</code> or similar. The second stalls, as it would with <code>\\n</code> because that was not removed. Note too, the string format is either <code>%[]</code> or <code>%s</code> but not the newbie hybrid of both which you have as <code>%[]s</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511392224, "post_id": 47445131, "comment_id": 81845786, "body": "Replace the <code>s</code>"}, {"owner": {"reputation": 557, "user_id": 2309495, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fcf9763d7d12689c1bf54d77d6dee114?s=128&d=identicon&r=PG", "display_name": "Alexandre Krabbe", "link": "https://stackoverflow.com/users/2309495/alexandre-krabbe"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511392436, "post_id": 47445131, "comment_id": 81845847, "body": "@WeatherVane But can it be done with a single scanf? Even if it is &quot;noob&quot; to do so, I don&#39;t want unnecessary lines."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1511392483, "post_id": 47445131, "comment_id": 81845860, "body": "Write as many lines as you need."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511392032, "post_id": 47445202, "comment_id": 81845731, "body": "<code>%[^&#47;]s</code> is not the format you imagine it to be. It wants to match an <code>&#39;s&#39;</code> from the input. The string format is either <code>%[]</code> or <code>%s</code>. So it does not consume the <code>&#39;&#47;&#39;</code> delimiter, which remains in the input."}, {"owner": {"reputation": 557, "user_id": 2309495, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fcf9763d7d12689c1bf54d77d6dee114?s=128&d=identicon&r=PG", "display_name": "Alexandre Krabbe", "link": "https://stackoverflow.com/users/2309495/alexandre-krabbe"}, "edited": false, "score": 0, "creation_date": 1511392337, "post_id": 47445202, "comment_id": 81845818, "body": "Thank you for your reply, but this did not work, it only got the first string, the other 3 remained blank."}, {"owner": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1511392713, "post_id": 47445202, "comment_id": 81845926, "body": "Sorry, I missed to remove the &#39;s&#39; characters. Try again, please."}], "tags": [], "owner": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "is_accepted": false, "score": 1, "last_activity_date": 1511392618, "last_edit_date": 1511392618, "creation_date": 1511391966, "answer_id": 47445202, "question_id": 47445131, "link": "https://stackoverflow.com/questions/47445131/how-to-read-string-separated-by-with-scanf/47445202#47445202", "title": "How to read string separated by / with scanf", "body": "<p>You already got quite close: you missed to consume the delimiter in your second approach:</p>\n\n<pre><code>scanf(\"%[^/]/%[^/]/%[^/]/%[^/]\", str1, str2, str3, str4);\n</code></pre>\n\n<p>should do the job.</p>\n"}, {"comments": [{"owner": {"reputation": 557, "user_id": 2309495, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fcf9763d7d12689c1bf54d77d6dee114?s=128&d=identicon&r=PG", "display_name": "Alexandre Krabbe", "link": "https://stackoverflow.com/users/2309495/alexandre-krabbe"}, "edited": false, "score": 0, "creation_date": 1511393089, "post_id": 47445307, "comment_id": 81846049, "body": "Thank you for the very detailed explanation!"}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 3, "last_activity_date": 1511392680, "creation_date": 1511392680, "answer_id": 47445307, "question_id": 47445131, "link": "https://stackoverflow.com/questions/47445131/how-to-read-string-separated-by-with-scanf/47445307#47445307", "title": "How to read string separated by / with scanf", "body": "<p>There are a few issues with the posted code. The scanset directive is <code>%[]</code>; there is no <code>s</code> in this. The format strings using <code>%[^/]s</code> are attempting to match a literal <code>s</code> in the input. But this will always fail because <code>%[^/]</code> matches any character except for <code>/</code>. When a <code>/</code> is encountered, the match fails and the <code>/</code> character is left in the input stream. It is this character which must be consumed before continuing on to the next input field.</p>\n\n<p>Also, <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">note that <code>while(!feof(file)){}</code> is always wrong</a>. Instead, try fetching input by lines using <code>fgets()</code>, and parsing with <code>sscanf()</code>. The <code>fgets()</code> function returns a null pointer when end-of-file is reached.</p>\n\n<p>Further, you should always specify a maximum width when reading strings with <code>scanf()</code> family functions to avoid buffer overflow.</p>\n\n<p>Here is an example program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char input[4096];\n    char str1[100];\n    char str2[100];\n    char str3[100];\n    char str4[100];\n\n    while (fgets(input, sizeof input, stdin)) {\n        sscanf(input, \" %99[^/]/ %99[^/]/ %99[^/]/ %99[^/]\",\n               str1, str2, str3, str4);\n\n        puts(str1);\n        puts(str2);\n        puts(str3);\n        puts(str4);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Sample interaction using sample input from the question:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u03bb&gt; ./a.out &lt; readstring_test.txt \n1.0.0.0\n255.0.0.0\n127.0.0.1\n1112 \n\n1.2.0.0\n255.255.0.0\n2.4.6.9\n1112\n\n1.2.3.0\n255.255.255.0\n1.2.3.1\n111\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 2309495, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fcf9763d7d12689c1bf54d77d6dee114?s=128&d=identicon&r=PG", "display_name": "Alexandre Krabbe", "link": "https://stackoverflow.com/users/2309495/alexandre-krabbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 1, "accepted_answer_id": 47445307, "answer_count": 2, "score": 2, "last_activity_date": 1511392680, "creation_date": 1511391479, "question_id": 47445131, "link": "https://stackoverflow.com/questions/47445131/how-to-read-string-separated-by-with-scanf", "title": "How to read string separated by / with scanf", "body": "<p>I`ve been trying to this for quite a while now and after some research I had no success, so my last resort was asking a question. My input looks like this:</p>\n\n<pre><code>1.0.0.0/255.0.0.0/127.0.0.1/1112 \n1.2.0.0/255.255.0.0/2.4.6.9/1112\n1.2.3.0/255.255.255.0/1.2.3.1/111\n</code></pre>\n\n<p>I need to extract 4 strings from each line, so for exemple the first line would give me</p>\n\n<pre><code>s1 = 1.0.0.0\ns2 = 255.0.0.0\ns3 = 127.0.0.1\ns4 = 1112\n</code></pre>\n\n<p>Here is what I have tried:</p>\n\n<pre><code>scanf(\"%s/%s/%s/%s\", str1, str2, str3, str4); // This doesn't consume the \"/\"\nscanf(\"%[^/]s%[^/]s%[^/]s%[^/]s\", str1, str2, str3, str4); // This only gets the first string\nscanf(\"\"%[^\\n]s%*c%s%*c%s%*c%s\", str1, str2, str3, str4); // Hera %*c was supposed to consume the \"/\" and do not store it, it doen't happen tho\n</code></pre>\n\n<p>How can I get the 4 strings from each input line using a single <code>scanf</code> inside a <code>while (!feof(fileIn))</code> ? Thank you.</p>\n"}, {"tags": ["c", "file", "append"], "comments": [{"owner": {"reputation": 63, "user_id": 6116668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/756097b0e80fd2ef1cad856f779bd600?s=128&d=identicon&r=PG&f=1", "display_name": "DazedFury", "link": "https://stackoverflow.com/users/6116668/dazedfury"}, "edited": false, "score": 0, "creation_date": 1511390680, "post_id": 47444961, "comment_id": 81845304, "body": "@ikegami I&#39;m sorry still a bit new to this. I don&#39;t see any carriage returns? isn&#39;t that when you use a \\r?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6116668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/756097b0e80fd2ef1cad856f779bd600?s=128&d=identicon&r=PG&f=1", "display_name": "DazedFury", "link": "https://stackoverflow.com/users/6116668/dazedfury"}, "edited": false, "score": 0, "creation_date": 1511392490, "post_id": 47445233, "comment_id": 81845863, "body": "Awesome! Worked great. Thanks a bunch!"}], "tags": [], "owner": {"reputation": 1403, "user_id": 5577416, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a8cc9163c517d1d081b19006c9a18712?s=128&d=identicon&r=PG&f=1", "display_name": "Graeme", "link": "https://stackoverflow.com/users/5577416/graeme"}, "is_accepted": true, "score": 2, "last_activity_date": 1511392211, "creation_date": 1511392211, "answer_id": 47445233, "question_id": 47444961, "link": "https://stackoverflow.com/questions/47444961/text-is-being-appended-at-beginning-of-file-instead-of-at-end-of-file/47445233#47445233", "title": "Text is being appended at beginning of file instead of at end of file", "body": "<p>I imagine the problem you are seeing is due to each call to <code>writeFile</code> is opening a fresh handle to the file, writing to it and then just returning.  Once you have finished using a file handle you should close it, this will flush the file buffer to the file and free up the handle.</p>\n\n<p>What I think is happening here is you are opening up a fresh handle each time and each of these is only having a small amount of data written to it, so isn't being flushed to disk.  You program is then exiting and the OS is cleaning up the stale file handles flushing them to disk.  As a guess I imagine it is doing that clean up in reverse order hence the appearance of your file being written backwards.</p>\n\n<p>Update your <code>writeFile</code> to include a close and hopefully that should resolve the issue</p>\n\n<pre><code>FILE *out = fopen(raidName, \"a\");   \nfprintf(out, \"%s\", buffer);\nfclose(out);\n</code></pre>\n\n<p>It might be nicer if you open the file for writing in the loop calling <code>writeFile</code> and pass the handle over, and then you only need to open it and close it once. </p>\n\n<p>Worth adding closes elsewhere, where you have opened files too.</p>\n\n<p>HTH</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 6116668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/756097b0e80fd2ef1cad856f779bd600?s=128&d=identicon&r=PG&f=1", "display_name": "DazedFury", "link": "https://stackoverflow.com/users/6116668/dazedfury"}, "edited": false, "score": 0, "creation_date": 1511482507, "post_id": 47445397, "comment_id": 81884320, "body": "Ahh you are right. I don&#39;t want to use global variables probably. Guess I&#39;ll just have to check the values in main?"}], "tags": [], "owner": {"reputation": 36, "user_id": 5184383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a42b6184ed296ee22683e5683183f3?s=128&d=identicon&r=PG&f=1", "display_name": "imankit", "link": "https://stackoverflow.com/users/5184383/imankit"}, "is_accepted": false, "score": 1, "last_activity_date": 1511393242, "creation_date": 1511393242, "answer_id": 47445397, "question_id": 47444961, "link": "https://stackoverflow.com/questions/47444961/text-is-being-appended-at-beginning-of-file-instead-of-at-end-of-file/47445397#47445397", "title": "Text is being appended at beginning of file instead of at end of file", "body": "<p>One more thing I see you are using address of local variables for scanf in check values(k), these are local only and Never going to be reflected in Main()</p>\n"}], "owner": {"reputation": 63, "user_id": 6116668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/756097b0e80fd2ef1cad856f779bd600?s=128&d=identicon&r=PG&f=1", "display_name": "DazedFury", "link": "https://stackoverflow.com/users/6116668/dazedfury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 47445233, "answer_count": 2, "score": 0, "last_activity_date": 1511393242, "creation_date": 1511390429, "last_edit_date": 1511392080, "question_id": 47444961, "link": "https://stackoverflow.com/questions/47444961/text-is-being-appended-at-beginning-of-file-instead-of-at-end-of-file", "title": "Text is being appended at beginning of file instead of at end of file", "body": "<p>I'm having a weird bug where the text I append is being added to the beginning of a file instead of the end of it. This ends up making everything backwards.</p>\n\n<p>CODE:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//Check Values\nvoid checkValues(int numDisks, int raidType, int chunkSize){\n    while (numDisks &lt; 1 || numDisks &gt; 9){\n        printf(\"Number inputed for numDisks is not valid, please enter a new value (1-9).\\n\");\n        scanf(\"%d\", &amp;numDisks);\n    }\n    while(raidType &lt; 0 || raidType &gt; 1){\n        printf(\"Number inputed for raidType is not valid, please enter a new value (0-1).\\n\");\n        scanf(\"%d\", &amp;raidType);\n    }\n    while(chunkSize &lt; 1 || chunkSize &gt; 512){\n        printf(\"Number inputed for chunkSize is not valid, please enter a new value (1-512).\\n\");\n        scanf(\"%d\", &amp;chunkSize);\n    }\n}\n\n//CreateFile\nvoid createFile(int numDisks){\n    char raidName[5];\n    int counter = 1;\n\n    //Create each file\n    while(counter != numDisks + 1){\n        sprintf(raidName, \"raid%d\", counter);       //Append counter to string\n\n        FILE *out = fopen(raidName, \"w\");                             \n        counter++;\n    }\n}\n\n//Write File\nvoid writeFile(int numDisks, char *buffer, int counter){\n    char raidName[5];\n\n    sprintf(raidName, \"raid%d\", counter);       //Append counter to string\n\n    //Write File\n    FILE *out = fopen(raidName, \"a\");   \n    fprintf(out, \"%s\", buffer);    \n}\n\n//Read and Write Files\nvoid rwFile(const char *fileName, int chunkSize, int numDisks){\n    char buffer[10000];\n    int counter = 1;\n\n    //Reading File\n    FILE *in = fopen(fileName, \"r\");    \n    if(in == NULL) return;\n\n    //Create File\n    createFile(numDisks);\n\n    while(fgets(buffer, chunkSize + 1, in) != NULL){\n        //Reset Counter\n        if(counter &gt; numDisks){\n            counter = 1;\n        }\n\n        writeFile(numDisks, buffer, counter);\n        counter++;\n    }\n}\n\nint main(int argc, const char *argv[]){\n    //Declarations\n    const char *fileName = argv[1];\n    int numDisks = atoi(argv[2]);\n    int raidType = atoi(argv[3]);\n    int chunkSize = atoi(argv[4]);\n\n    checkValues(numDisks, raidType, chunkSize);\n    rwFile(fileName, chunkSize, numDisks);\n}\n</code></pre>\n\n<p>raid1.txt:</p>\n\n<pre><code>mmmmiiiieeeeaaaa\n</code></pre>\n\n<p>What should be written to raid1.txt:</p>\n\n<pre><code>aaaaeeeeiiiimmmm\n</code></pre>\n\n<p>I have tried using fseek but to no avail. If anybody could help me out or point me in the right direction that would help. This is done in C using bash to compile and run the program. The arguments that are passed are test.txt 4 0 4.</p>\n"}, {"tags": ["c", "proc"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1511389733, "post_id": 47444715, "comment_id": 81844947, "body": "It is <i>probably</i> a preprocessor macro defined in a header file, given that it is the convention to declare those in uppercase.  You could <code>grep</code> the header files used, or compile with the <code>-E</code> option to get the preprocessor intermediate output (redirect stderr to a file) and search that - but beware that it could be very large."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1511389755, "post_id": 47444715, "comment_id": 81844954, "body": "Assuming that this is a normal C declaration rather than some kind of Pro*C extension, NBXXXX must be either a macro that expands to an integer constant expression, or an <code>enum</code> constant.  The <code>EXTCODE</code> array will have 14 times (whatever numeric value NBXXXX evaluates to) elements.  It is probably defined in one of the header files that this source file includes. I would recommend searching all of those header files (and the headers that <i>they</i> include, and so on) for the definition."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1511396164, "post_id": 47444715, "comment_id": 81846849, "body": "Do you have a link to the source code?"}], "owner": {"reputation": 1969, "user_id": 4388228, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/dUkBY.jpg?s=128&g=1", "display_name": "Mohammed Housseyn Taleb", "link": "https://stackoverflow.com/users/4388228/mohammed-housseyn-taleb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1477, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511389055, "creation_date": 1511389055, "question_id": 47444715, "link": "https://stackoverflow.com/questions/47444715/what-does-nbxxxx-mean-in-proc", "title": "What does NBXXXX mean in PRO*C?", "body": "<p>I m reading a pro*c source code and I found this line <code>VARCHAR  EXTCODE[( 14 ) * NBXXXX];</code> I understand that this is a table but what is the meaning or the value of <strong>NBXXXX</strong> that I can't found a definition about nor in google nor others forums.</p>\n\n<p>I need a minimum understanding is it system constant ? reserved word ? what is this NBXXXX in a simple way ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1511388922, "post_id": 47444676, "comment_id": 81844644, "body": "Have you tried a debugger?"}, {"owner": {"reputation": 9, "user_id": 8993449, "user_type": "registered", "profile_image": "https://graph.facebook.com/1048687635272089/picture?type=large", "display_name": "Kristijan \u010ceple", "link": "https://stackoverflow.com/users/8993449/kristijan-%c4%8ceple"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1511389230, "post_id": 47444676, "comment_id": 81844757, "body": "okay did the debugger, it produced an .exe file and returns exactly the same, (partially) correct answer. It produes only 1 correct solution, out of the 3 that should be and that are produced by code 1"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1511389576, "post_id": 47444676, "comment_id": 81844888, "body": "A debugger doesn&#39;t produce an exe. A debugger lets you step through the code and inspect variables as you go. Perhaps try adding some <code>printf()s</code> so you can trace the flow and see some variables."}, {"owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "edited": false, "score": 0, "creation_date": 1511389764, "post_id": 47444676, "comment_id": 81844957, "body": "It might be easier to just paste in the entire code once, and write a comment pointing to the line you changed.  This is like looking for a needle in a haystack. EDIT: Oh I see you did that at the very end, but I can&#39;t seem to delete this comment."}, {"owner": {"reputation": 1049, "user_id": 1587418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f71f8acb7a3af01ec2bd418cd2f899?s=128&d=identicon&r=PG", "display_name": "NonNumeric", "link": "https://stackoverflow.com/users/1587418/nonnumeric"}, "edited": false, "score": 0, "creation_date": 1511390806, "post_id": 47444676, "comment_id": 81845333, "body": "Both code snippets produce wrong NBR-s. &#39;printf&#39; them to see for yourself. Then grab pen and paper and trace how these values evolve (concentrate only on one of the wrong columns) and you should relatively easily figure out why they don&#39;t end up with the desired maximums."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8993449, "user_type": "registered", "profile_image": "https://graph.facebook.com/1048687635272089/picture?type=large", "display_name": "Kristijan \u010ceple", "link": "https://stackoverflow.com/users/8993449/kristijan-%c4%8ceple"}, "edited": false, "score": 0, "creation_date": 1511392659, "post_id": 47444828, "comment_id": 81845905, "body": "okay thanks a lot now I get it - still not sure why my starting idea did not work but this is definitely a faster and more compact solution with less variables :D  need to keep in mind to always set a logical starting point which is then compared to other characters in an array or w/e"}], "tags": [], "owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "is_accepted": true, "score": 1, "last_activity_date": 1511389645, "creation_date": 1511389645, "answer_id": 47444828, "question_id": 47444676, "link": "https://stackoverflow.com/questions/47444676/minor-confusion-about-triple-for-loop-one-in-another-in-another/47444828#47444828", "title": "Minor confusion about triple for loop one-in-another-in-another", "body": "<p>Actually neither works, it was just luck.  When you set <code>NBR[j]</code>, the max number in the column, you are only ever comparing 2 numbers from the column at a time.  This is bound to miss some.  What you need to do is write this, instead of the nested loops:</p>\n\n<pre><code>for (i = 0; i &lt; 5; ++i) {\n    suma[j] += array[i][j];\n    if (i == 0 || array[i][j] &gt; NBR[j]) {\n        NBR[j] = array[i][j];\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 5184383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a42b6184ed296ee22683e5683183f3?s=128&d=identicon&r=PG&f=1", "display_name": "imankit", "link": "https://stackoverflow.com/users/5184383/imankit"}, "is_accepted": false, "score": 0, "last_activity_date": 1511390945, "creation_date": 1511390945, "answer_id": 47445048, "question_id": 47444676, "link": "https://stackoverflow.com/questions/47444676/minor-confusion-about-triple-for-loop-one-in-another-in-another/47445048#47445048", "title": "Minor confusion about triple for loop one-in-another-in-another", "body": "<p>@jcarpenter2 is right. But for your lucky case if you look closely to mentioned two lines </p>\n\n<pre><code>for (W = 0; W &lt; 5; ++W){\n    if(array[i][j] &gt; array[W][j])\n        NBR[j] = array[i][j];\n}\n</code></pre>\n\n<p>You are comparing only top element array[i][j] of the column with rest of the elements of the column, if first one is > than others, then only you are updating NBR[j]</p>\n"}], "owner": {"reputation": 9, "user_id": 8993449, "user_type": "registered", "profile_image": "https://graph.facebook.com/1048687635272089/picture?type=large", "display_name": "Kristijan \u010ceple", "link": "https://stackoverflow.com/users/8993449/kristijan-%c4%8ceple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47444828, "answer_count": 2, "score": -4, "last_activity_date": 1511393553, "creation_date": 1511388817, "last_edit_date": 1511393553, "question_id": 47444676, "link": "https://stackoverflow.com/questions/47444676/minor-confusion-about-triple-for-loop-one-in-another-in-another", "title": "Minor confusion about triple for loop one-in-another-in-another", "body": "<p>The language is C.</p>\n\n<p>The point of the program is to scan a matrix <code>[5][10]</code> and find the columns in which the biggest number in the column equals the sum of elements of the column to the left of the before-said column.</p>\n\n<p>Take for example <a href=\"http://prntscr.com/hdzc5t\" rel=\"nofollow noreferrer\">http://prntscr.com/hdzc5t</a>: Here we can see that the biggest number in column 1 is 17 which is equal to the sum of all numbers in column 0, so the program prints out the index \"1\".</p>\n\n<p>So I wrote two code snippets. The first one works and the second one doesn't, and there's only a minor difference (literally I changed the places of two characters) and I can't fathom why don't both of them function.</p>\n\n<p>code 1:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)  {\n    int i, j, W, suma[10] = {0}, NBR[10];\n\n    int  array[5][10] = {   {1, 2, 5, 2, 7, 1, 1, 1, 2, 1},\n                            {4, -8, 7, 3, 5, 3, 15, 0, 3, 0},\n                            {7, 1, 3, 4, 3, 2, 1, 2, 3, 1},\n                            {2, 17, 1, 5, 1, 4, 1, 3, 2, 5},\n                            {3, -5, 3, 6, -1, 5, 1, 6, 1, 10}};\n\n    for(j = 0; j &lt; 10; ++j){\n        for(i = 0; i &lt; 5; ++i){\n           suma[j] += array[i][j];\n           for (W = 0; W &lt; 5; ++W){\n            if(array[W][j] &gt; array[i][j])\n                NBR[j] = array[W][j];\n            }\n        }\n    }\n\n    printf(\"Indeksi stupaca:\\n\");\n    for(j = 1; j &lt; 10; ++j){\n        if (NBR[j] == suma[j-1])\n            printf (\"%d\\n\", j);\n    }\n\n    printf(\"Polje:\\n\");\n    for(i = 0; i &lt; 5; ++i){\n        for(j = 0; j &lt; 10; ++j){\n            printf (\"%5d\", array[i][j]);\n        }\n        printf (\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>code 2:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)  {\n    int i, j, W, suma[10] = {0}, NBR[10];\n\n    int  array[5][10] = {   {1, 2, 5, 2, 7, 1, 1, 1, 2, 1},\n                            {4, -8, 7, 3, 5, 3, 15, 0, 3, 0},\n                            {7, 1, 3, 4, 3, 2, 1, 2, 3, 1},\n                            {2, 17, 1, 5, 1, 4, 1, 3, 2, 5},\n                            {3, -5, 3, 6, -1, 5, 1, 6, 1, 10}};\n\n    for(j = 0; j &lt; 10; ++j){\n        for(i = 0; i &lt; 5; ++i){\n           suma[j] += array[i][j];\n           for (W = 0; W &lt; 5; ++W){\n            if(array[i][j] &gt; array[W][j])\n                NBR[j] = array[i][j];\n            }\n        }\n    }\n\n    printf(\"Indeksi stupaca:\\n\");\n    for(j = 1; j &lt; 10; ++j){\n        if (NBR[j] == suma[j-1])\n            printf (\"%d\\n\", j);\n    }\n\n    printf(\"Polje:\\n\");\n    for(i = 0; i &lt; 5; ++i){\n        for(j = 0; j &lt; 10; ++j){\n            printf (\"%5d\", array[i][j]);\n        }\n        printf (\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The first snippet works, but the second snippet doesn't work and I just can't get it into my head why. The loop goes through all the j, i and W possibilities in either code, but the second code just refuses to give back proper results. Thanks whoever gets it right.</p>\n\n<p>This is the part that gets a bit modified and causes problems:</p>\n\n<pre><code>if(array[W][j] &gt; array[i][j])\n    NBR[j] = array[W][j];\n</code></pre>\n"}, {"tags": ["c", "function", "gcc", "zero"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511387745, "post_id": 47444431, "comment_id": 81844164, "body": "Please do not double-space code as if for proof-reading."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511387799, "post_id": 47444431, "comment_id": 81844188, "body": "Print one digit at a time in a loop, skipping leading zeros?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1511387819, "post_id": 47444431, "comment_id": 81844198, "body": "lean more about the loops and <code>if</code>&#39;s, for example scan from the end and return number of digits. then print in the loop in the reverse order."}, {"owner": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "edited": false, "score": 0, "creation_date": 1511387857, "post_id": 47444431, "comment_id": 81844216, "body": "you&#39;re not returning anything from <code>dec2bin()</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511387949, "post_id": 47444431, "comment_id": 81844257, "body": "You can remove the leading zeros by printing in a loop, instead of the inline solution. You can suppress leading zeros with a flag that you test/set in the loop. Even without zero suppression, the loop would be easier to understand and maintain."}, {"owner": {"reputation": 3, "user_id": 8993431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05c60e8d36b9f1060d3aa38b465f07d?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Luxner", "link": "https://stackoverflow.com/users/8993431/markus-luxner"}, "edited": false, "score": 0, "creation_date": 1511389061, "post_id": 47444431, "comment_id": 81844698, "body": "I&#39;m not sure if I&#39;m understanding this right but, something like that?after the  N=N/2;                 an if(n==0) {break;}?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1511391284, "post_id": 47444431, "comment_id": 81845478, "body": "<code>dec2bin()</code> returns no value, but is declared <code>int*</code>."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1511393188, "post_id": 47444431, "comment_id": 81846076, "body": "There&#39;s no magic &quot;remove leading zeroes&quot; function. If this is for class, you&#39;re expected to think about the problem and solve it yourself."}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1511392666, "last_edit_date": 1511392666, "creation_date": 1511390784, "answer_id": 47445018, "question_id": 47444431, "link": "https://stackoverflow.com/questions/47444431/remove-leading-zeros-in-c/47445018#47445018", "title": "Remove leading zeros in c", "body": "<pre><code>// Skip leading zeros\nint d = 0 ;\nfor( d = 0; n[d] == 0 &amp;&amp; d &lt; 15; d++ )\n{\n    // nothing\n}   \n\n// Print significant digits\nfor( ; d &lt; 16; d++ )\n{\n    printf( \"%d \", n[d] ) ;\n}    \n</code></pre>\n\n<p>Note that <code>dec2bin</code> generates an array of binary digits in an <code>int</code>.  That is clearly not a conversion from <em>decimal to binary</em>, because the <code>int</code> already is binary - the <code>scanf()</code> call already did the conversion to binary (<code>int</code>) with the <code>%d</code> specifier. The function is over-complex given that it already is binary.  What you are actually doing is simply expanding single bits to an array of integer values 0 and 1.  </p>\n\n<p>Consider:</p>\n\n<pre><code>int* int2bin( int N, int n[] )\n{\n  for( int d = 15; d &gt;= 0; d-- )\n  {\n    n[d] = (N &amp; (0x0001 &lt;&lt; d)) == 0 ? 0 : 1 ;\n  }\n\n  return n ;\n}\n</code></pre>\n\n<p>However it perhaps makes more sense to generate a string as ASCII digits rather than an array of integers. </p>\n\n<pre><code>char* int2bin( int val, char* str )\n{\n    // Skip leading zeros\n    int d = 0 ;\n    for( d = 0; (val &amp; (1&lt;&lt;d)) == 0 &amp;&amp; d &lt; 15; d++ )\n    {\n        // nothing\n    }   \n\n    // Significant digits\n    for( int s = 0 ; d &lt; 16; s++; d++ )\n    {\n        str[s] = (val &amp; (1&lt;&lt;d)) == 0 ? '0' : '1' ;\n    }    \n\n    str[s] = 0 ;\n\n    return str ;\n}\n</code></pre>\n\n<p>Then the output is simply:</p>\n\n<pre><code>  char n[17] ;\n  printf(\"%s\", int2bin(var, n) ) ;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1511391778, "post_id": 47445082, "comment_id": 81845630, "body": "Better perhaps to use stdbool.h rather then cook your own <code>bool</code>.  Also this answer is dominated by the criticism unrelated to the question.  Perhaps reorder to answer the question, then add the helpful asides, or add them as comments to the question."}], "tags": [], "owner": {"reputation": 1820, "user_id": 7209631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ad26cdac82ab360fb4fd572febf351?s=128&d=identicon&r=PG&f=1", "display_name": "Baris Yakut", "link": "https://stackoverflow.com/users/7209631/baris-yakut"}, "is_accepted": true, "score": 0, "last_activity_date": 1511391191, "creation_date": 1511391191, "answer_id": 47445082, "question_id": 47444431, "link": "https://stackoverflow.com/questions/47444431/remove-leading-zeros-in-c/47445082#47445082", "title": "Remove leading zeros in c", "body": "<p>You have a few issues here.</p>\n\n<ul>\n<li>Type specifier of main() is missing. A decent compiler should give you a warning message like this: <code>warning: type specifier missing, defaults to 'int' [-Wimplicit-int]</code>\n\n<ul>\n<li>I'm not sure which standard you are using, in <code>C89</code> the default return type is assumed to be int.</li>\n<li>If you change your <code>main()</code> to <code>int main()</code>, then you should return an integer value or <code>EXIT_SUCCESS</code> if you include <code>stdlib.h</code>.</li>\n<li><code>return 0;</code> indicates that program executed successfully.</li>\n</ul></li>\n<li>You are not returning anything from your function. \n\n<ul>\n<li>Well, you do not need to, since you are passing an array, the array will be modified. You are actually passing a pointer.</li>\n</ul></li>\n</ul>\n\n<p>What you can do is loop over your array, look for the first \"1\" and then start printing. You can use a flag for that. </p>\n\n<p>Note: If the user enters \"0\", just print \"0\", no need to call your function.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum { false, true } bool;\nvoid dec2bin(int, int[]);\n\nint main()\n{\n  int var=0;\n  const int size = 16;\n  int n[size];\n  bool startPrinting = false;\n\n  printf(\"Number(&gt;=0, &lt;65535): \");\n  scanf(\"%d\", &amp;var);\n\n  if (var == 0)\n  {\n    printf(\"0\\n\");\n  }\n  else\n  {\n    dec2bin(var, n);\n    for (int cnt = 0; cnt &lt; size; cnt++)\n    {\n      if (n[cnt] == 1) // Check for the first \"1\" in n\n      {\n        startPrinting = true;\n      }\n\n      if (startPrinting)\n      {\n        printf(\"%d\", n[cnt]);\n      }\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}\n\nvoid dec2bin(int N, int n[]){\n  int count = 15;\n  for(count=15; count &gt;=0; count--){\n    n[count] = N%2;\n    N=N/2;\n  }\n}\n</code></pre>\n\n<p>Here is some sample output:</p>\n\n<pre><code>&gt; ./out \nNumber(&gt;=0, &lt;65535): 32\n100000\n&gt; ./out \nNumber(&gt;=0, &lt;65535): 16\n10000\n&gt; ./out \nNumber(&gt;=0, &lt;65535): 15\n1111\n&gt; ./out\nNumber(&gt;=0, &lt;65535): 1\n1\n&gt; ./out\nNumber(&gt;=0, &lt;65535): 0\n0\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8993431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05c60e8d36b9f1060d3aa38b465f07d?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Luxner", "link": "https://stackoverflow.com/users/8993431/markus-luxner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3923, "favorite_count": 0, "accepted_answer_id": 47445082, "answer_count": 2, "score": 0, "last_activity_date": 1511392666, "creation_date": 1511387554, "last_edit_date": 1511387644, "question_id": 47444431, "link": "https://stackoverflow.com/questions/47444431/remove-leading-zeros-in-c", "title": "Remove leading zeros in c", "body": "<p>I want to Convert decimal into Binary but the output should be without leading zeros, so how do I remove the zeros? (The code works, it's written in C)</p>\n\n<pre><code>int* dec2bin(int, int[]);\n\nmain(){\n  int var=0;\n  int n[16];\n  printf(\"Number(&gt;=0, &lt;65535): \");\n  scanf(\"%d\", &amp;var);\n  dec2bin(var, n);\n  printf(\" %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d\\n\", n[0], n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);\n}\n\nint* dec2bin(int N, int n[]){\n  int count = 15;\n  for(count=15; count &gt;=0; count--){\n    n[count] = N%2;\n    N=N/2;\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "process", "fork", "message-queue", "messages"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1511385409, "post_id": 47443616, "comment_id": 81843141, "body": "Use <code>perror()</code> when you get an error from a system call, so you can see the reason for the error."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511389622, "post_id": 47443616, "comment_id": 81844906, "body": "Could you please run this <a href=\"https://pastebin.com/saWWjcY9\" rel=\"nofollow noreferrer\">cleaned up version with diagnostics</a> and provide the output?"}, {"owner": {"reputation": 21, "user_id": 6351066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08bbcca4e5d9d606c3438b4efaf2326?s=128&d=identicon&r=PG&f=1", "display_name": "Bernardi Marco", "link": "https://stackoverflow.com/users/6351066/bernardi-marco"}, "edited": false, "score": 0, "creation_date": 1511503782, "post_id": 47443616, "comment_id": 81888904, "body": "Thanks for the help,, here&#39;s the output:  [child] msgsnd: Permission denied [parent] Child exited with error 1"}, {"owner": {"reputation": 21, "user_id": 6351066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08bbcca4e5d9d606c3438b4efaf2326?s=128&d=identicon&r=PG&f=1", "display_name": "Bernardi Marco", "link": "https://stackoverflow.com/users/6351066/bernardi-marco"}, "edited": false, "score": 0, "creation_date": 1511509612, "post_id": 47443616, "comment_id": 81891316, "body": "It looks like  msgget() returns  id=0 and the send functions fails for this reason.. very strange. PS: i&#39;m coding on virtual machine"}], "owner": {"reputation": 21, "user_id": 6351066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08bbcca4e5d9d606c3438b4efaf2326?s=128&d=identicon&r=PG&f=1", "display_name": "Bernardi Marco", "link": "https://stackoverflow.com/users/6351066/bernardi-marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1015, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511383473, "creation_date": 1511383473, "question_id": 47443616, "link": "https://stackoverflow.com/questions/47443616/messages-queue-c-multiple-processes", "title": "Messages Queue C multiple processes", "body": "<p>I've experiencing issues with messages after forking a child process.\nbasically the father needs to create a messages queue and a child process and then pause till the child send a message and terminate. After that the father read the message.\nIT gives me both read and write error when executed.\nThanks for the help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/msg.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\ntypedef struct Mymsg {\n    long mtype;/* Message type */\n    char mtext[20]; /* Message body */\n}Mymsg;\n\n\nint main() {\n    int mask, id;\n    key_t key;\n    mask = 0666;\n     Mymsg message;\n    Mymsg in;\n    key = ftok(\"/tmp\", 'x');\n    if((id = msgget(key, IPC_CREAT)) == -1) {\n        printf(\"msgget error\");\n        exit(EXIT_FAILURE);\n    }\n    switch(fork()) {\n        case 0:\n            printf(\"CHILD PROCESS\\n\");\n            message.mtype=1;\n            strcpy(message.mtext,\"test\");\n            if(msgsnd(id,&amp;message,sizeof(message.mtext),0)==-1)\n                printf(\"ERROR SEND\\n\");\n\n            _exit(EXIT_SUCCESS);\n        default:\n            wait(NULL);\n            printf(\"FATHER PROCESS\\n\");\n            if(msgrcv(id, &amp;in, (sizeof(in)- sizeof(long)), 1,0)== -1)\n                printf(\"ERROR RCV \\n\");\n            printf(\"READ: %s\\n\", in.mtext);\n            msgctl(id, IPC_RMID,0);\n    }\n    exit(EXIT_SUCCESS);\n\n    }\n</code></pre>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1511381955, "post_id": 47443242, "comment_id": 81841495, "body": "pointers on 2D arrays are not pointers on pointers on pointers. Those are different types. Also read about three star programmers: <a href=\"http://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">wiki.c2.com/?ThreeStarProgrammer</a>"}, {"owner": {"reputation": 19, "user_id": 8993061, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OeJJK7NvWvM/AAAAAAAAAAI/AAAAAAAABys/a1yLiivk4Q8/photo.jpg?sz=128", "display_name": "NickProg36", "link": "https://stackoverflow.com/users/8993061/nickprog36"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511382683, "post_id": 47443242, "comment_id": 81841861, "body": "What i wanted it was an array of 2D arrays but after reading a little about 3 star programmers i magically came to realization that i have a better way to do things!! I just stepped up a bit! Thanks"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511391290, "post_id": 47443242, "comment_id": 81845481, "body": "Which part of the code is unmodifiable?  If the function interface is fixed, then you need to redo your memory allocation -- dramatically.  If the memory allocation in main is fixed (I think it needs fixing even as it stands, but that&#39;s somewhat tangential), then the function interface needs to be changed.  You can&#39;t reconcile the irreconcilable; something has to change.  (It isn&#39;t clear from your last comment whether you still need help with this.)"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1511382991, "creation_date": 1511382991, "answer_id": 47443489, "question_id": 47443242, "link": "https://stackoverflow.com/questions/47443242/c-passing-dynamic-allocated-3d-matrix-to-function/47443489#47443489", "title": "C - Passing dynamic allocated 3D Matrix to function", "body": "<p>If your 2D arrays have variable dimensions, you need <code>int ***</code>, but this prototype</p>\n\n<pre><code>void readPuzzle(int board[][MAX][MAX], int *dimension, int counter, const char *);\n</code></pre>\n\n<p>isn't compatible with <code>board</code> passed as <code>int ***</code> because it required an array of 2D arrays, not a triple pointer.</p>\n\n<p>So fix it like that:</p>\n\n<pre><code>void readPuzzle(int ***board, int *dimension, int counter, const char *);\n</code></pre>\n\n<p>but you still need to keep track of the dimensions for each \"slice\".</p>\n\n<p>The alternative, if the 2D arrays have fixed dimensions <code>MAX*MAX</code> is to allocate an array of 2D arrays like this:</p>\n\n<pre><code>int (*board)[MAX][MAX] = malloc(counter*sizeof(*board));\n</code></pre>\n\n<p>now you can pass <code>board</code> as <code>int board[][MAX][MAX]</code>. Of course, if not all data is used, you still need to keep track of max dimensions somewhere.</p>\n"}], "owner": {"reputation": 19, "user_id": 8993061, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OeJJK7NvWvM/AAAAAAAAAAI/AAAAAAAABys/a1yLiivk4Q8/photo.jpg?sz=128", "display_name": "NickProg36", "link": "https://stackoverflow.com/users/8993061/nickprog36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511382991, "creation_date": 1511381802, "last_edit_date": 1511382152, "question_id": 47443242, "link": "https://stackoverflow.com/questions/47443242/c-passing-dynamic-allocated-3d-matrix-to-function", "title": "C - Passing dynamic allocated 3D Matrix to function", "body": "<p>In my main function i create a dynamic 3D array and succesfull alocate it. </p>\n\n<pre><code>    int ***board = (int ***)malloc(counter * sizeof(int **));\n    for(int i = 0; i &lt; counter; i++){\n\n        board[i] = (int **) malloc(dimension[i] * dimension[i] * sizeof(int));\n    }\n</code></pre>\n\n<p>Then i wan to pass it to a function defined as:</p>\n\n<pre><code>void readPuzzle(int board[][MAX][MAX], int *dimension, int counter,const char *);\n</code></pre>\n\n<p>I pass it like this:</p>\n\n<pre><code>readPuzzle(board, dimension, counter, argv[1]);\n</code></pre>\n\n<p>But i keep getting this error, i searched for it but never could fix it!</p>\n\n<pre><code>main.c: In function \u2018main\u2019:\nmain.c:22:13: warning: passing argument 1 of \u2018readPuzzle\u2019 from       incompatible pointer type [-Wincompatible-pointer-types]\nreadPuzzle(board, dimension, counter, argv[1]);\n         ^~~~~\nIn file included from main.c:4:0:\nheaders.h:7:6: note: expected \u2018int (*)[100][100]\u2019 but argument is of type     \u2018int ***\u2019\nvoid readPuzzle(int board[][MAX][MAX], int *dimension, int counter, const char *);\n</code></pre>\n"}, {"tags": ["c", "hex", "stdout"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511381870, "post_id": 47443193, "comment_id": 81841446, "body": "how are you opening the file? are you testing that the file could be opened properly?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1511382021, "post_id": 47443193, "comment_id": 81841519, "body": "Please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>. Use the next line to control the loop: <code>while(fscanf(f_p, &quot;%x %i&quot;, &amp;tmp_key, &amp;tmp_msgqid) == 2) { n++; }</code>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511393363, "post_id": 47443193, "comment_id": 81846121, "body": "Your second code don&#39;t make sense, please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to your question."}, {"owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "edited": false, "score": 0, "creation_date": 1511505624, "post_id": 47443193, "comment_id": 81889609, "body": "Did my answer help solving your problem.?"}, {"owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "edited": false, "score": 0, "creation_date": 1511506261, "post_id": 47443193, "comment_id": 81889863, "body": "Yes, thank you for pointing me to redirect the file pointer. It&#39;s sometimes problematic to find even such trivial problem when you look at few hundreds lines of code. Finally, i write macros: <code>#define fread fopen(&quot;path&quot;, &quot;r&quot;)</code>, and the same for append. And just initialize it in the code like: <code>fp = fread [...] fp = fappend</code>."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511452608, "post_id": 47456547, "comment_id": 81873233, "body": "Using C++ to print and C to read is peculiar.  It would be better to use <code>while ((ret = fscanf(fp, &quot;%x %i&quot;, &amp;key, &amp;ans)) == 2)</code> in the loop; you might not need <code>ret</code> after that."}, {"owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511505566, "post_id": 47456547, "comment_id": 81889582, "body": "Thank you for the suggestions.! :)"}, {"owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "edited": false, "score": 0, "creation_date": 1511514504, "post_id": 47456547, "comment_id": 81893865, "body": "I just wonder.. why are people sometimes using %d where there is no chance of getting an double-precision value? Is that just because of usability over optimization?"}, {"owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "edited": false, "score": 0, "creation_date": 1511514892, "post_id": 47456547, "comment_id": 81894107, "body": "well, My main motive was to show you the way to scan from file properly. hence i did not put much effort in printing because it was just for confirmation that it was scanned properly. So, You can take it as a mistake.  Thanks for the edit btw :)"}], "tags": [], "owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "is_accepted": true, "score": 1, "last_activity_date": 1511514711, "last_edit_date": 1511514711, "creation_date": 1511443201, "answer_id": 47456547, "question_id": 47443193, "link": "https://stackoverflow.com/questions/47443193/reading-hexadecimal-from-file/47456547#47456547", "title": "Reading hexadecimal from file", "body": "<h3>Problems</h3>\n\n<ul>\n<li>You opened the file in \"append\" mode. which does not let you read through the file.</li>\n<li>If you want to write and then read the file, file pointer must be reset to the starting of the file.</li>\n<li><code>feof(f_p)</code> is worst way of checking whether file pointer is at end of the file.</li>\n</ul>\n\n<h3>Solution</h3>\n\n<ul>\n<li>Open File in \"read\" mode by <code>'r'</code> or in append+read mode <code>'a+'</code>.</li>\n<li>if you are writing in to the file. reset it using <code>rewind(f_p);</code> after writing.</li>\n<li><p>check out this way to read through the file : </p>\n\n<pre><code> int ret, ans, key;\n while ((ret = fscanf(fp, \"%x %i\", &amp;key, &amp;ans))) {\n    if (ret == EOF)\n        break;\n    else\n        printf(\"%x %i \\n\",key, ans);\n }\n</code></pre>\n\n<p>here integer ret is : </p>\n\n<ul>\n<li>EOF, if the pointer is reached end of file. </li>\n<li>0, if no input matched with the variable  </li>\n<li>(greater than 0), that is, number of matched variables with the file input</li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 47456547, "answer_count": 1, "score": 0, "last_activity_date": 1511514711, "creation_date": 1511381619, "last_edit_date": 1511439744, "question_id": 47443193, "link": "https://stackoverflow.com/questions/47443193/reading-hexadecimal-from-file", "title": "Reading hexadecimal from file", "body": "<p>I'm trying to read two records form a file, where one is hexadecimal formated number. Well I'm newcomer to C, before when I been reading hexadecimal, generated by <code>ftok()</code>, I just used <code>printf(\"%x\", key)</code> and it worked fine. Now when I try to read it from the file, it does not work that way.</p>\n\n<p>So my code looks like this:</p>\n\n<pre><code>int countRecords(FILE *f_p) {\n  int tmp_key = 0;\n  int tmp_msgqid = 0;\n  int n = 0;\n\n  while (!feof(f_p)) {\n    if (fscanf(f_p, \"%x %i\", &amp;tmp_key, &amp;tmp_msgqid) != 2)\n      break;  \n    n = n + 1;\n  }\n\n  return n;\n}\n</code></pre>\n\n<p>Later on i read this value in the code like:</p>\n\n<p><code>printf(\"Records: %i \\n\", countRecords(f_msgList));</code></p>\n\n<p>And this compiles with no warnings. Anyway when I run the program the value of <code>countRecords(f_msgList)</code> is 0, when the file have a bunch of data in it:</p>\n\n<pre><code>5a0203ff 360448\n850203ff 393217\n110203ff 425986\n</code></pre>\n\n<p>EDIT:\nHere is the code where the file is opened or created:</p>\n\n<pre><code>FILE *f_msgList;\nf_msgList = fopen(\"../message_queues.list\", \"a\");\n\n// if file does not exist then create one and check for errors\nif (f_msgList == NULL) {\n  FILE *f_tmp;\n  f_tmp = fopen(\"../message_queues.list\", \"w\");\n  if (f_msgList == NULL) {\n    fprintf(stderr, \"Error occurred while creating the file! \\n\");\n    exit(1);\n  } else\n    f_msgList = f_tmp;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2015", "cmake"], "comments": [{"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1511387835, "post_id": 47442858, "comment_id": 81844209, "body": "Try cleaning the cache, the object files an rebuild again. Also note that &#39;MD_DynamicRelease&#39; doesn&#39;t match value &#39;MDd_DynamicDebug&#39;  message is telling that you are invoking or using a wrong <a href=\"https://cmake.org/cmake/help/v3.0/variable/CMAKE_BUILD_TYPE.html\" rel=\"nofollow noreferrer\">CMAKE_BUILD_TYPE</a>"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1511389384, "post_id": 47442858, "comment_id": 81844824, "body": "@Joel: it&#39;s not cache problem or rebuild, and <code>CMAKE_BUILD_TYPE</code> is not relevant in VS case"}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1511402689, "post_id": 47442858, "comment_id": 81848274, "body": "Is it possible both /MD and /MDd are used on the command line? (Check the &quot;Command Line&quot; in the project settings). Maybe /MDd is overriding /MD, and the IDE isn&#39;t displaying it correctly in the project settings."}], "answers": [{"tags": [], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "is_accepted": true, "score": 0, "last_activity_date": 1511447667, "creation_date": 1511447667, "answer_id": 47457887, "question_id": 47442858, "link": "https://stackoverflow.com/questions/47442858/vs-how-to-configure-debugwithreleasecrt/47457887#47457887", "title": "VS: How to configure DebugWithReleaseCRT?", "body": "<p>The problem is related with VS precompiler definition <a href=\"https://msdn.microsoft.com/en-us/library/0b98s6w8.aspx\" rel=\"nofollow noreferrer\">_DEBUG</a></p>\n\n<blockquote>\n  <p>The compiler defines _DEBUG when you specify the /MTd or /MDd option.\n  These options specify debug versions of the C run-time library.</p>\n</blockquote>\n\n<p>As my <code>DebugWithReleaseCRT</code> config was based on <code>Debug</code>, it copied <code>_DEBUG</code> definition too. Turns out that if <code>_DEBUG</code> is defined it overrules <code>/MD</code> flag (<code>MD_DynamicRelease</code>) and VS still links with debug CRT (hey Visual Studio team, that was a surprise!). </p>\n\n<p>The problem was solved by removing <code>_DEBUG</code> from <code>DebugWithReleaseCRT</code>. Actually it was solved by replacing <code>_DEBUG</code> by <code>NDEBUG</code> because some 3rd-party dependencies required exactly one of them to be defined. I'm still not sure it's a clean way to configure <code>DebugWithReleaseCRT</code>, I don't feel particularly confident about defining <code>NDEBUG</code> in kind of debug config.</p>\n"}], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 47457887, "answer_count": 1, "score": 0, "last_activity_date": 1511447667, "creation_date": 1511380228, "last_edit_date": 1511380636, "question_id": 47442858, "link": "https://stackoverflow.com/questions/47442858/vs-how-to-configure-debugwithreleasecrt", "title": "VS: How to configure DebugWithReleaseCRT?", "body": "<p>I added a new configuration <code>DebugWithReleaseCRT</code> to our CMake scripts, which is based on pretty standard <code>Debug</code> config but links with Release CRT (<code>/MD</code> instead of <code>/MDd</code>) and defines <code>_ITERATOR_DEBUG_LEVEL=0</code>. I checked generated project file settings and all looks good: </p>\n\n<blockquote>\n  <p>C/C++ -> Code Generation -> RuntimeLibrary = Multi-Threaded DLL (/MD)</p>\n</blockquote>\n\n<p>However when I build it I get errors like:</p>\n\n<blockquote>\n  <p>3>3rd-party.lib(3rd-party.obj) : error LNK2038: mismatch detected\n  for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value\n  'MDd_DynamicDebug' in My.obj</p>\n</blockquote>\n\n<p>which I read as: </p>\n\n<blockquote>\n  <p>your <code>My.cpp</code> file is compiled with debug CRT\n  (<code>MDd_DynamicDebug</code>) while you're trying to link with library\n  <code>3rd-party.lib</code> that is built with release CRT (<code>MD_DynamicRelease</code>)</p>\n</blockquote>\n\n<p>I also checked this particular file (<code>My.cpp</code>) settings but nothing fancy there, it inherited <code>/MD</code> flag from the parent project.</p>\n\n<p>Why my project is linked with Debug CRT despite of specified <code>/MD</code> flag?</p>\n"}, {"tags": ["c", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1511381556, "post_id": 47442563, "comment_id": 81841294, "body": "Attempting to acquie a mutex in a signal handler is a very bad idea:("}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 2620730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ca3Ne.jpg?s=128&g=1", "display_name": "Fabien Roualdes", "link": "https://stackoverflow.com/users/2620730/fabien-roualdes"}, "edited": false, "score": 0, "creation_date": 1511518144, "post_id": 47442594, "comment_id": 81896155, "body": "It works perfectly now !! I use g_timeout_add instead of signals functions ... the performances are not so bad =) &quot;continuations&quot; is so strange at first sight."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1511380717, "last_edit_date": 1511380717, "creation_date": 1511379311, "answer_id": 47442594, "question_id": 47442563, "link": "https://stackoverflow.com/questions/47442563/gtk3-gui-freezes-randomly-after-1-hour-or-after-20-minutes/47442594#47442594", "title": "GTK+3 GUI freezes randomly (after 1 hour or after 20 minutes)", "body": "<p>You should not use Unix signals with GTK. See <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safety(7)</a> and <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a>.</p>\n\n<p>You should consider using only Glib timers instead (and not use any POSIX timer). Read about <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html\" rel=\"nofollow noreferrer\">Glib event loop</a> (used in GTK) and use <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add\" rel=\"nofollow noreferrer\">g_timeout_add</a> or related functions.</p>\n\n<p>If you insist on handling Unix signals in a GTK program, do what <a href=\"http://doc.qt.io/qt-5/unix-signals.html\" rel=\"nofollow noreferrer\">Qt recommends</a> about them: setup a <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">pipe(7)</a> to self at initialization, and poll that file descriptor (in GTK, using <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-source-add-unix-fd\" rel=\"nofollow noreferrer\">g_source_add_unix_fd</a> or <a href=\"https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-unix-new\" rel=\"nofollow noreferrer\">g_io_channel_unix_new</a>) which your Unix signal handler would <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow noreferrer\">write(2)</a> (one or very few bytes at a time). BTW, Linux also provides <a href=\"http://man7.org/linux/man-pages/man2/signalfd.2.html\" rel=\"nofollow noreferrer\">signalfd(2)</a>.</p>\n\n<p>At last, GTK is not really thread-friendly (see also <a href=\"https://stackoverflow.com/q/43141659/841108\">this</a>), and all GTK functions should be called (only) from your main thread (not from some other <code>pthread_gui</code>). Actually, if you really need to code with several threads, consider having your non-GUI threads also communicating and synchronizing thru pipes with GTK and use <a href=\"https://developer.gnome.org/glib/stable/glib-Threads.html\" rel=\"nofollow noreferrer\">Glib thread functions</a> to start and manage them.</p>\n\n<p>You could even consider some multi-processing approach: having the GUI program in one process, and the other processing (multi-threaded) in another process (probably started by the GUI program using <a href=\"https://developer.gnome.org/glib/stable/glib-Spawning-Processes.html#g-spawn-async-with-pipes\" rel=\"nofollow noreferrer\">g_spawn_async_with_pipes</a>).</p>\n\n<p>Read about <a href=\"https://en.wikipedia.org/wiki/Continuation\" rel=\"nofollow noreferrer\">continuations</a> and <a href=\"https://en.wikipedia.org/wiki/Continuation-passing_style\" rel=\"nofollow noreferrer\">continuation-passing style</a>. It may help you to think in those terms.</p>\n"}, {"comments": [{"owner": {"reputation": 46, "user_id": 2620730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ca3Ne.jpg?s=128&g=1", "display_name": "Fabien Roualdes", "link": "https://stackoverflow.com/users/2620730/fabien-roualdes"}, "edited": false, "score": 0, "creation_date": 1511477202, "post_id": 47458349, "comment_id": 81883013, "body": "I understand now why I had some troubles by calling gtk_label_set_text or gtk_spin_button_set_value from signals functions ...   gtk_widget_queue_draw seems a good way for updating cairo surface, I&#39;m going to check that!"}, {"owner": {"reputation": 46, "user_id": 2620730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ca3Ne.jpg?s=128&g=1", "display_name": "Fabien Roualdes", "link": "https://stackoverflow.com/users/2620730/fabien-roualdes"}, "edited": false, "score": 0, "creation_date": 1511517486, "post_id": 47458349, "comment_id": 81895721, "body": "I confirm hehe it works !... and it&#39;s better than calling periodically  cairo = gdk_cairo_create(gtk_widget_get_window(drawing_area));  drawing_function(cairo);  cairo_destroy(cairo);"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 46, "user_id": 2620730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ca3Ne.jpg?s=128&g=1", "display_name": "Fabien Roualdes", "link": "https://stackoverflow.com/users/2620730/fabien-roualdes"}, "edited": false, "score": 0, "creation_date": 1511528623, "post_id": 47458349, "comment_id": 81902307, "body": "Yes, if you&#39;re using GTK 3, you&#39;re supposed to do your drawing in the callback connected to the &quot;draw&quot; signal. You&#39;re passed a <code>cairo_t *</code> wich is the cairo context there, so no need to create nor destroy a cairo context yourself. See doc&#39;s section &quot;custom drawing&quot;:  <a href=\"https://developer.gnome.org/gtk3/stable/ch01s05.html\" rel=\"nofollow noreferrer\">developer.gnome.org/gtk3/stable/ch01s05.html</a>"}], "tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": false, "score": 3, "last_activity_date": 1511449142, "creation_date": 1511449142, "answer_id": 47458349, "question_id": 47442563, "link": "https://stackoverflow.com/questions/47442563/gtk3-gui-freezes-randomly-after-1-hour-or-after-20-minutes/47458349#47458349", "title": "GTK+3 GUI freezes randomly (after 1 hour or after 20 minutes)", "body": "<p>You should just stop using signals, threads, and just use event sources of the GTK+ main loop. So if you want to call some code every 50ms, then just use <code>g_timeout</code> or <code>g_timeout_full</code> if you need to refresh the UI more than once per second (otherwise <code>g_idle_add</code> or <code>g_timeout_add_seconds</code> are better options).</p>\n\n<p>However I don't see the point in updating your model every 20ms and displaying results every 50ms. You're just wasting computing power, as you compute things that won't be displayed. Updating the model shouldn't be too expensive since you can do it in less than 20ms. So if you don't care about the exact period, just update the model in a callback connected to <code>g_idle_add</code>, and at the end of the callback, ask to update the UI by calling <code>gtk_widget_queue_draw</code> or <code>gtk_widget_queue_draw_area</code> on the widgets that need to be redrawn. It will then compute as fast as it can (so can adapt to each computer performance), and won't compute things not displayed. Using timers you then determine the time elapsed between two refresh. If it's too high, you can use <code>g_timeout_add</code> instead of <code>g_idle_add</code> to limit the refresh rate by using a longer refresh period.</p>\n"}], "owner": {"reputation": 46, "user_id": 2620730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ca3Ne.jpg?s=128&g=1", "display_name": "Fabien Roualdes", "link": "https://stackoverflow.com/users/2620730/fabien-roualdes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1511449142, "creation_date": 1511379139, "question_id": 47442563, "link": "https://stackoverflow.com/questions/47442563/gtk3-gui-freezes-randomly-after-1-hour-or-after-20-minutes", "title": "GTK+3 GUI freezes randomly (after 1 hour or after 20 minutes)", "body": "<p>I am developping a program in C that uses GTK+3 and follows - more or less - the MVC architecture:</p>\n\n<ul>\n<li>The model is updated each 20 ms by calling <em>model_update</em> (it does not call to GTK functions) ; </li>\n<li>The GUI is updated by calling <em>gui_update</em> each 50 ms by reading model variables.</li>\n</ul>\n\n<p>My problem is that the GUI freezes after a random running time, it can be 20 minutes or more than 1 hour and I do not know why. Maybe there is something I should know about GTK ?</p>\n\n<p>Note :\nAccess to model variables is protected by using mutex.</p>\n\n<p>Thanks a lot for your help !!</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;gtk/gtk.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/prctl.h&gt; \n\nvoid *\nthread_gui(void* data)\n{ \n    g_timeout_add(50, handler_timer_gui_update, NULL); // updates the GUI each 50ms\n    gtk_main();\n    pthread_exit(NULL);\n}\n\ngint\nhandler_timer_gui_update(gpointer data)\n{\n    gui_update();\n    // gui_update reads the model and updates GUI by using\n    // gtk_label_set_text, gtk_spin_button_set_value, cairo_paint\n    return TRUE;\n}\n\nvoid\nlaunch_periodical_call_updating_model( )\n{\n    signal( SIGRTMIN + 1, model_update );\n\n    timer_t timer;\n    struct sigevent event;\n    event.sigev_notify = SIGEV_SIGNAL;\n    event.sigev_signo = SIGRTMIN + 1;\n    event.sigev_value.sival_ptr = &amp;timer;\n    timer_create(CLOCK_REALTIME, &amp;event, &amp;timer);\n\n    struct itimerspec spec;\n    spec.it_value.tv_nsec = 20 * 1000000; // updates the model each 20 ms\n    spec.it_value.tv_sec = 0;\n    spec.it_interval = spec.it_value;\n\n    timer_settime( timerModel, 0, &amp;spec, NULL);\n}\n\nint\nmain( int argc, char *argv[] )\n{ \n    pthread_t pthread_gui;\n\n    init_model( ); // init model variables\n    launch_periodical_call_updating_model( ); \n\n    // signal capture to exit\n    signal( SIGINT, ctrlc_handler );\n    signal( SIGTERM, ctrlc_handler );\n\n    // GUI\n    g_thread_init(NULL);\n    gdk_threads_init();\n    gdk_threads_enter();\n    gtk_init( &amp;argc, &amp;argv );\n    create_gui ( ); // building GTK Window with widgets  \n    pthread_create(&amp;pthread_gui, NULL, thread_gui, NULL);\n    gdk_threads_leave();\n\n    // Leaving the program\n    pthread_join( pthread_gui, NULL ); \n    stop_model( ); //It stops to update the model and releases memory\n\n    return 0;\n}\n\nvoid\nctrlc_handler( int sig )\n{\n    gtk_main_quit(); \n} \n</code></pre>\n"}, {"tags": ["c", "memory-mapped-files", "memory-mapping"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1511379152, "post_id": 47442399, "comment_id": 81840161, "body": "We can start of with why your approach does not work.  A char is 8 bits wide.  When you shift the bits of each char, you throw away the bits that you shifted out from each individual chat; it does not get pushed to the next char in the array.  Now for the solution, that may depend on this question: Is the number of bytes you are working with going to be constant, or is it subject to change?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1511380102, "post_id": 47442399, "comment_id": 81840645, "body": "Oh, and if you want to make sure that 0s get shifted in when MSB is one, I believe you should be shifting on an unsigned type."}, {"owner": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1511388937, "post_id": 47442399, "comment_id": 81844650, "body": "the number of bytes will be changing. thanks for your reply"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1511389300, "post_id": 47442399, "comment_id": 81844792, "body": "Use Weather Vane&#39;s solution (and mark it accepted).  It is the best way to do it for your use case."}, {"owner": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1511389881, "post_id": 47442399, "comment_id": 81845004, "body": "it only works up to 8 bits from what I understood. what if I want to shift a couple hundred bits?"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "edited": false, "score": 0, "creation_date": 1511389824, "post_id": 47442922, "comment_id": 81844981, "body": "thanks for your help, this works. But what do I do if I want to shift more than 8 bits, even up to a couple hundred bits (if it&#39;s a larger file)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "edited": false, "score": 0, "creation_date": 1511389929, "post_id": 47442922, "comment_id": 81845026, "body": "Then use an array of <code>unsigned int</code> or <code>unsigned long long</code> and modify the algorithm accordingly. You might need to beware of endianness, though. This approach won&#39;t work for 100 bits, but that should be a different question. Hmmm do you have a 128 bit data type available?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "edited": false, "score": 0, "creation_date": 1511390392, "post_id": 47442922, "comment_id": 81845186, "body": "I suggest to shift a large number of bits, to build another array, with approriate index offsets and shifts."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1511390473, "post_id": 47442922, "comment_id": 81845223, "body": "If you want to shift by 100 bits you can shift by 12 bytes (using memmove or similar) and then by 4 bits."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1511390594, "post_id": 47442922, "comment_id": 81845269, "body": "What @immibis said.  You&#39;d essentially have the &quot;rough shift&quot; which moves entire bytes, and then finish with the &quot;fine shift&quot; as WeatherVane already supplied."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 5, "last_activity_date": 1511380468, "creation_date": 1511380468, "answer_id": 47442922, "question_id": 47442399, "link": "https://stackoverflow.com/questions/47442399/how-do-i-properly-byte-shift-a-chunk-of-data/47442922#47442922", "title": "How do I properly byte shift a chunk of data?", "body": "<p>Each byte in the array should be shifted right by 4 bits and ORred with the previous (unsigned) byte shifted left by 4 bits. For example</p>\n\n<pre><code>unsigned char *str = (unsigned char *)mymap;\nunsigned char prev = 0, next;\nfor(int i = 0; i &lt; attr.st_size; i++) {\n    next  = str[i];\n    str[i] = (str[i] &gt;&gt; 4) | (prev &lt;&lt; 4);\n    prev = next;    \n}\n</code></pre>\n\n<p>In the case where you want a right shift of 5 bits, you would shift right by 5 bits and left by 3 bits, sum = 8 (assuming <code>CHAR_BIT</code> is 8).</p>\n"}], "owner": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 47442922, "answer_count": 1, "score": 1, "last_activity_date": 1511380468, "creation_date": 1511378545, "question_id": 47442399, "link": "https://stackoverflow.com/questions/47442399/how-do-i-properly-byte-shift-a-chunk-of-data", "title": "How do I properly byte shift a chunk of data?", "body": "<p>I have a mmap</p>\n\n<pre><code>void *mymap;\nmymap = mmap(0, attr.st_size, PROT_READ|PROT_WRITE, MAPFILE|MAP_SHARED, fd, 0);\n</code></pre>\n\n<p>I opened a file with the HEX content 0x25362364 which is </p>\n\n<p>00100101001101100010001101100100 </p>\n\n<p>in binary. Now I want to perform a bit shift:</p>\n\n<pre><code>char *str = (char *)mymap;\nfor(int i=0;i&lt;attr.st_size;i++) {\n    str[i] = str[i] &gt;&gt; 4;\n}\n</code></pre>\n\n<p>my new file contains the new binary number</p>\n\n<p>00000010000000110000001000000110</p>\n\n<p>but the wished result was to shift everything 4 bits to the right:</p>\n\n<p>00000010010100110110001000110110</p>\n\n<p>how can I accomplish this?\nbonus question: if the binary numbers MSB is a 1 how can I have the left side filled up with 0's when shifting right?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1511378289, "post_id": 47442277, "comment_id": 81839762, "body": "Have you googled the warning messages?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1511378318, "post_id": 47442277, "comment_id": 81839777, "body": "Where you have <code>char *subjName[100]</code>, etc., you probably want just <code>char subjName[100]</code>. The former is an array of 100 <i>pointers</i> to characters, while the latter is an array of characters, which is what C programs generally use to simulate &quot;strings&quot;."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1511378481, "post_id": 47442277, "comment_id": 81839854, "body": "For example, your first warning is because <code>subj.lectName</code> is an array of pointers, which makes <code>subj.lectName</code> a pointer to pointers. So when you only do one  dereference, <code>*subj.lectName</code>, that result is still a pointer and you&#39;re assigning that to a character. What  is this statement supposed to be doing? Examine your data types carefully. In this case, the warning is actually pointing out a programming error. C just doesn&#39;t make the assumption whether you intended that mismatch or not, so only flags it as a warning."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511378729, "post_id": 47442277, "comment_id": 81839955, "body": "Note that your three static arrays <code>char subjectname[][100];</code> etc have a size of 0 (MSVC). Your last three warnings relate to this. You can only omit the first dimension when this is used as a function parameter, for example <code>int fun(char subjectname[][100])</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511382649, "post_id": 47442277, "comment_id": 81841843, "body": "@WeatherVane you&#39;re mistaken though, see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.9.2p5\" rel=\"nofollow noreferrer\">C11 6.9.2p5</a>. <code>char subjectname[][100];</code> without an initializer is a <i>tentative definition</i> that, unless a definition with an initializer is present, means exactly the same as  <code>char subjectname[1][100];</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511383083, "post_id": 47442277, "comment_id": 81842029, "body": "@AnttiHaapala was is unexpected that the infamous MSVC would report a size of 0? When I added the line <code>subjectname[0][0] = &#39;*&#39;;</code> to my size test program I got <i>test.obj : error LNK2019: unresolved external symbol _subjectname referenced in function _main</i>. It only compiled cleanly with <code>char subjectname[1][100];</code> OP&#39;s program does not go further from the tentative definition."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511383267, "post_id": 47442277, "comment_id": 81842126, "body": "well, MSVC might not be a C compiler."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511383363, "post_id": 47442277, "comment_id": 81842193, "body": "@AnttiHaapala so, does say gcc allow <code>subjectname[0][0] = &#39;*&#39;;</code> after only the tentative definition <code>char subjectname[][100];</code>?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511383441, "post_id": 47442277, "comment_id": 81842225, "body": "@WeatherVane of course it does. Because a tentative definition becomes a definition. But <b>g++</b> does <i>not</i> because it is not valid C++."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511383487, "post_id": 47442277, "comment_id": 81842248, "body": "@AnttiHaapala but my first comment was still good, because OP uses <code>subjectname[newentry]</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511383636, "post_id": 47442277, "comment_id": 81842317, "body": "@AnttiHaapalauh ... but <code>for(int i=0; i&lt;newentry; i++)</code> won&#39;t iterate, because <code>newentry</code> remains as <code>0</code>. So why did the compiler emit those 3 warnings? Didn&#39;t realise that <code>newentry</code> would be <code>0</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511388830, "post_id": 47444095, "comment_id": 81844593, "body": "Damn, thank you for all of your effort. The thing is, i am just a beginner, and i dont really understand more than half of your code, and i need to explain the code to my proffesor in order to pass. Will definately examine your code and try to use parts of it. Also, in structs, i can only save 1 subject, and all the previous data has to go into a static/dynamic array"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "reply_to_user": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511388903, "post_id": 47444095, "comment_id": 81844634, "body": "Which parts do you not understand? I&#39;d be happy to explain."}, {"owner": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511389003, "post_id": 47444095, "comment_id": 81844673, "body": "Almost everything tbh, but i will try to examine it myself, or maybe add parts of your code to mine. Also, in structs, i can only save 1 subject, and all the previous data has to go into a static/dynamic array. Anyway, i will try to understand it myself and really really thank you for your effort"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "reply_to_user": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511389902, "post_id": 47444095, "comment_id": 81845014, "body": "Ok, good luck! Also of the subjects are saved the dynamic array subjects-&gt;subj. If you want to get the last one you could get it at subjects-&gt;subj[subjects-&gt;num_subjs-1]."}, {"owner": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511389959, "post_id": 47444095, "comment_id": 81845037, "body": "I especially dont understand your getln() function"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "reply_to_user": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511390386, "post_id": 47444095, "comment_id": 81845181, "body": "What that function allows for is to dynamically allocate an inputed string. With scanf you have to have a string with a static size. Ex: char subjName[100]. This function allows you to have char *subjName, so the size is set dynamically depending on the length of the input (it have greater than 100 characters for example). The function essentially reads each character and reallocates the new required amount of space until it encounters a newline. realloc returns null if there was an error allocating space. So if !tmp it deletes the line and quits getting input."}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "reply_to_user": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "edited": false, "score": 0, "creation_date": 1511390789, "post_id": 47444095, "comment_id": 81845327, "body": "Also the reason I add 1 to size is because the sizeof(char) is 1 byte in C. (size += sizeof(char) would have been also correct and maybe more obvious)"}], "tags": [], "owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "is_accepted": true, "score": -1, "last_activity_date": 1511389262, "last_edit_date": 1511389262, "creation_date": 1511385959, "answer_id": 47444095, "question_id": 47442277, "link": "https://stackoverflow.com/questions/47442277/having-trouble-with-c-pointers/47444095#47444095", "title": "Having trouble with C pointers", "body": "<p>Here is a better way to do things</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;ctype.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n\n    typedef struct{\n        char *subjName;\n        char *lectName;\n        char *lectSurname;\n        double credits;\n        double num_students;\n    }Subject;\n\n    typedef struct{\n        Subject **subjs;\n        int num_subjs;\n    }Subjects;\n\n    void listInput();\n    void listEdit();\n    void listDelete();\n    void listPrint();\n    int userChoice();\n\n    int main() {\n    Subjects *subjects = malloc(sizeof(Subjects));\n    subjects-&gt;num_subjs = 0;\n    subjects-&gt;subjs = NULL;\n\n    int r=1;\n    while(r!=0){\n        int select=userChoice();\n        switch(select){\n            case 1:\n            listPrint(subjects);\n            break;\n\n            case 2:\n            listInput(&amp;subjects);\n            break;\n\n            case 3:\n            listDelete();\n            break;\n\n            case 4:\n            listEdit();\n            break;\n\n            case 0:\n            r=0;\n            break;\n          }\n    }\n    return 0;\n}\n\nint userChoice(){\n    int choice,input=0,check;\n    printf(\"(1). View all the data\\n\");\n    printf(\"(2). Enter new data\\n\");\n    printf(\"(3). Delete data\\n\");\n    printf(\"(4). Edit data\\n\");\n    printf(\"(0). Exit\\n\");\n    printf(\"-----------------------------\\n\");\n\n    while(input!=1){\n        printf(\"Enter your choice\\n\");\n        scanf(\"%d\", &amp;choice);\n        if(choice&gt;4 || choice&lt;0){\n            printf(\"Invalid input \\n\");\n        }\n        else\n            input = 1;\n\n    }\n    return choice;\n}\n\nvoid listPrint(Subjects *subjects){\n    for(int i=0; i&lt; subjects-&gt;num_subjs; i++){\n        printf(\"%d, %s, %s, %s, %d, %d\\n\",i+1, subjects-&gt;subjs[i]-&gt;subjName, subjects-&gt;subjs[i]-&gt;lectName, subjects-&gt;subjs[i]-&gt;lectSurname, subjects-&gt;subjs[i]-&gt;credits, subjects-&gt;subjs[i]-&gt;num_students);\n    }\n}\n\nchar *getln()\n{\n    char *line = NULL, *tmp = NULL;\n    size_t size = 0, index = 0;\n    int ch = 1;\n\n    while (ch) {\n        ch = getc(stdin);\n\n        if (ch == '\\n')\n            ch = 0;\n\n        if (size &lt;= index) {\n            size += 1;\n            tmp = realloc(line, size);\n            if (!tmp) {\n                free(line);\n                line = NULL;\n                break;\n            }\n            line = tmp;\n        }\n\n        line[index++] = ch;\n    }\n\n    return line;\n}\n\nint isText(char *str,char *name){\n    for(int i = 0; i &lt; strlen(str);i++){\n        if((str[i]&lt;'A' || str[i]&gt;'z') &amp;&amp; str[i]!=' '){\n            printf(\"Error, %s must be a text \\n\",name);\n            return 0;\n        }\n    }\n    return 1;\n}\n\nint isNegative(int n){\n    if(n &lt; 0){\n        printf(\"Error, number of students must be a positive integer,try again \\n\");\n        return 1;\n    }\n    return 0;\n}\n\nvoid listInput(Subjects **p_subjects){ \n  while ( getchar() != '\\n' );\n\n    Subject *new_subj = malloc(sizeof(Subject));\n    new_subj-&gt;subjName = NULL;\n    new_subj-&gt;lectName = NULL;\n    new_subj-&gt;lectSurname = NULL;\n    new_subj-&gt;credits = 0;\n    new_subj-&gt;num_students = 0;\n\n    do{\n        printf(\"Enter the name of the subject \\n\");\n        new_subj-&gt;subjName = getln();\n    }while(!isText(new_subj-&gt;subjName,\"Subject name\"));\n\n    do{\n        printf(\"Enter the name of the lecturer \\n\");\n        new_subj-&gt;lectName = getln();\n    }while(!isText(new_subj-&gt;lectName,\"Lecturer's name\"));\n\n    do{\n\n       printf(\"Enter the surname of the lecturer\\n\");\n       new_subj-&gt;lectSurname = getln();\n        //Convert to uppercase\n        new_subj-&gt;lectSurname[0] &amp;= '_';\n    }while(!isText(new_subj-&gt;lectSurname,\"Lecturer's surname\"));\n\n    do{\n       printf(\"Enter the number of credits \\n\");\n       scanf(\"%d\", &amp;new_subj-&gt;credits);\n    }while(isNegative(new_subj-&gt;num_students));\n\n    do{\n       printf(\"Enter the number of students \\n\");\n       scanf(\"%d\", &amp;new_subj-&gt;num_students);\n    }while(isNegative(new_subj-&gt;num_students));\n\n    (*p_subjects)-&gt;subjs = realloc((*p_subjects)-&gt;subjs,sizeof(Subject*)*(++(*p_subjects)-&gt;num_subjs));\n    (*p_subjects)-&gt;subjs[(*p_subjects)-&gt;num_subjs-1] = new_subj;\n    printf(\"Added a new entry.\\n\\n\");\n}\n\nvoid listDelete(){\n    printf(\"33333333333\");\n}\n\nvoid listEdit(){\n    printf(\"4444444\");\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8992868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1618dcb150b78865508b2a0e694705f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/8992868/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47444095, "answer_count": 1, "score": -1, "last_activity_date": 1511389262, "creation_date": 1511378111, "question_id": 47442277, "link": "https://stackoverflow.com/questions/47442277/having-trouble-with-c-pointers", "title": "Having trouble with C pointers", "body": "<p>First of all, im a begginer C programmer, studying in a university. I need to do a program that is kinda like a data base. Thus far i have made the function to input new data, it works, but compiler shows a few warning and notes, i tried a lot of things, but nothing helped. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct subjects{\n    char *subjName[100];\n    char *lectName[100];\n    char *lectSurname[100];\n    double credits;\n    double studentnum;\n}subj;\n\nchar subjectname[][100];\nchar lecturername[][100];\nchar lecturersurname[][100];\nint credits[100];\nint students[100];\nint newentry=0;\n\nvoid listInput();\nvoid listEdit();\nvoid listDelete();\nvoid listPrint();\nint userChoice();\n\nint main() {\n    int select;\n    int r=1;\n    while(r!=0){\n        select=userChoice();\n    switch(select){\n        case 1:\n        listPrint();\n        break;\n\n        case 2:\n        listInput();\n        break;\n\n        case 3:\n        listDelete();\n        break;\n\n        case 4:\n        listEdit();\n        break;\n\n        case 0:\n        r=0;\n        break;\n      }\n    }\n    return 0;\n}\n\nint userChoice(){\n    int choice,input=0,check;\n    printf(\"(1). View all the data\\n\");\n    printf(\"(2). Enter new data\\n\");\n    printf(\"(3). Delete data\\n\");\n    printf(\"(4). Edit data\\n\");\n    printf(\"(0). Exit\\n\");\n    printf(\"-----------------------------\\n\");\n\n    while(input!=1){\n        printf(\"Enter your choice\\n\");\n        scanf(\"%d\", &amp;choice);\n        if(choice&gt;4 || choice&lt;0){\n            printf(\"Invalid input \\n\");\n        }\n        else\n            input = 1;\n\n    }\n    return choice;\n}\n\nvoid listPrint(){\n    for(int i=0; i&lt;newentry; i++){\n        printf(\"%d, %s, %s, %s, %d, %d\\n\",i+1, subjectname[i], lecturername[i], lecturersurname[i], credits[i], students[i]);\n    }\n}\n\nvoid listInput(){\n    int i;\n    char firstLetter,term;\n    printf(\"Enter the name of the subject \\n\");\n    while(scanf(\"%s\", &amp;subj.subjName)!=1)\n        printf(\"Error, subject name must be a text \");\n    printf(\"Enter the name of the lecturer \\n\");\n    int valid=0;\n    while(valid!=1){\n        while(scanf(\"%s\", &amp;subj.lectName)!=1)\n            printf(\"Error, lecturer's' name must be a text \");\n        firstLetter=*subj.lectName;     \n            if(firstLetter&gt;65 &amp;&amp; firstLetter&lt;90 &amp;&amp; isalpha(firstLetter)){\n                valid=1;\n            }\n            else\n                printf(\"Error, lecturer's name must start with a capital letter, try again \\nEnter the name of the lecturer \\n\");\n    }\n    valid=0;\n    printf(\"Enter the surname of the lecturer\\n\");\n    while(valid!=1){\n        while(scanf(\"%s\", &amp;subj.lectSurname)!=1)\n            printf(\"Error, lecturer's surname must be a text \");\n        firstLetter=*subj.lectSurname;\n        if(firstLetter&gt;65 &amp;&amp; firstLetter&lt;90 &amp;&amp; isalpha(firstLetter)){\n            valid=1;\n            }\n        else\n            printf(\"Lecturer's surname must start with a capital letter, try again \\nEnter the surname of the lecturer \\n\");\n    }\n    printf(\"Enter the amount of credits in course \\n\");\n    while(1){\n        scanf(\"%lf\", &amp;subj.credits);\n        if(subj.credits&lt;0 || subj.credits != (int)subj.credits)\n            printf(\"Error, amount of credits must be a positive integer, try again \\n\");\n        if(subj.credits&gt;0 &amp;&amp; subj.credits == (int)subj.credits)\n            break;\n    }\n    printf(\"Enter the number of students \\n\");\n    while(1){\n        scanf(\"%lf\", &amp;subj.studentnum);\n        if(subj.studentnum&lt;0 || subj.studentnum != (int)subj.studentnum)\n            printf(\"Error, number of students must be a positive integer,try again \\n\");\n        if(subj.studentnum&gt;0 &amp;&amp; subj.studentnum == (int)subj.studentnum)\n            break;\n    }\n    printf(\"Added a new entry.\\n\\n\");\n    strncpy(subjectname[newentry], subj.subjName, 99);\n    strncpy(lecturername[newentry], subj.lectName, 99);\n    strncpy(lecturersurname[newentry], subj.lectSurname, 99);\n    credits[newentry]=subj.credits;\n    students[newentry]=subj.studentnum;\n    newentry++;\n}\n\nvoid listDelete(){\n    printf(\"33333333333\");\n}\n\nvoid listEdit(){\n    printf(\"4444444\");\n}\n</code></pre>\n\n<p>And the warnings: </p>\n\n<pre><code>In function 'listInput':\n96  14  [Warning] assignment makes integer from pointer without a cast\n108 14  [Warning] assignment makes integer from pointer without a cast\n132 33  [Warning] passing argument 2 of 'strncpy' from incompatible pointer type\n79  9   [Note] expected 'const char * restrict' but argument is of type 'char **'\n133 34  [Warning] passing argument 2 of 'strncpy' from incompatible pointer type\n79  9   [Note] expected 'const char * restrict' but argument is of type 'char **'\n134 37  [Warning] passing argument 2 of 'strncpy' from incompatible pointer type\n79  9   [Note] expected 'const char * restrict' but argument is of type 'char **\nAt top level:\n14  6   [Warning] array 'subjectname' assumed to have one element\n15  6   [Warning] array 'lecturername' assumed to have one element\n16  6   [Warning] array 'lecturersurname' assumed to have one element\n</code></pre>\n\n<p>What can i do to fix those warnings? The program works just fine, but i cant pass if i dont fix the warnings.</p>\n"}, {"tags": ["c", "r", "dependencies", "devtools", "r-package"], "answers": [{"comments": [{"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1511380876, "post_id": 47442392, "comment_id": 81840991, "body": "Darn. I&#39;ll put it in the README then, with updated URLs."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 1, "last_activity_date": 1511378494, "creation_date": 1511378494, "answer_id": 47442392, "question_id": 47442267, "link": "https://stackoverflow.com/questions/47442267/is-it-possible-to-install-external-dependencies-for-r-package-on-download/47442392#47442392", "title": "Is it possible to install external dependencies for R package on download", "body": "<p>tl;dr: I wish!</p>\n\n<p>There were earlier, related questions. In essence you desire to have the (well-honed) CRAN dependencies (which work in a well-defined universe) become more universal across the host operating systems---of which there are too many, and too many variants.</p>\n\n<p>Take example libries for XML, PostgreSQL, PNG or JPEG.  Their names (and versions) will differ across operating systems so this, sadly, is really really hard.</p>\n\n<p>[ I do have a package RcppAPT which allow you to query <code>apt</code>'s cache from R, but that only addresses flow 'the other way' -- and is of course only for a subset of users as it is of no use to folks on Windows, macOS, RH/CentOS and so on. ]</p>\n"}], "owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 47442392, "answer_count": 1, "score": 0, "last_activity_date": 1511378494, "creation_date": 1511378078, "question_id": 47442267, "link": "https://stackoverflow.com/questions/47442267/is-it-possible-to-install-external-dependencies-for-r-package-on-download", "title": "Is it possible to install external dependencies for R package on download", "body": "<p>I have an R package with certain dependencies to C libraries on github, currently without the dependency C libraries inside the repo. </p>\n\n<p>Normally, I would install R packages from GitHub with the following:</p>\n\n<pre><code>install.packages(\"devtools\")\nlibrary(devtools)\ninstall_github(\"github_repo/package_name\")\n</code></pre>\n\n<p>All of the C code used by the R package is naturally located inside the subfolder <code>package_name/src</code>. But I'm confused how to release the C library dependencies necessary for the R package to work. </p>\n\n<p>Based on the documentation in \"Writing R Extensions\", <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-exts.htmlk\" rel=\"nofollow noreferrer\">https://cran.r-project.org/doc/manuals/r-release/R-exts.htmlk</a>, these dependencies should be listed:</p>\n\n<p>\"Dependencies external to the R system should be listed in the \u2018SystemRequirements\u2019 field, possibly amplified in a separate README file.\"</p>\n\n<p>That makes sense. And I could put in the README how to install these C library dependencies, or even put the libraries in the github repo (if they are not too large). </p>\n\n<p>However, this could easily become a mess for people to download, which is why I like Docker files, i.e. within <code>Dockerfile</code>, I would add the following:</p>\n\n<pre><code>RUN apt-get update &amp;&amp; apt-get install -y \\\n    make \\\n    clang \\\n    require_c_library1 \\\n    require_c_library2 \\\n    require_c_library3\n</code></pre>\n\n<p>Is it possible to load these C library dependencies in such a manner before the R package installs (i.e. <code>R CMD INSTALL</code> calls <code>R CMD SHLIB</code> which installs all C code and C dependencies in <code>Makevars</code>)? </p>\n\n<p>Or is the only option to (1) put each and every C dependency in the R package to be downloaded and compiled at <code>devtools::install_github(\"github_repo/package_name\")</code> or (2) ask users to install all of these dependencies in the README, and hope they do it correctly (and don't e-mail me endlessly)? </p>\n\n<p>There could be something I'm not understanding here, so please correct me</p>\n"}, {"tags": ["c", "gcc", "c-preprocessor"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1511377940, "post_id": 47442197, "comment_id": 81839582, "body": "What was the problem with <code>#define getTranslationInternal(x, y)    y##_##x</code>?"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511378217, "post_id": 47442197, "comment_id": 81839724, "body": "@rici A few errors: <code>error: pasting &quot;&quot;(PRODUCT_COCONUT)&quot;&quot; and &quot;_&quot; does not give a valid preprocessing token</code>, and <code>pasting &quot;_&quot; and &quot;(&quot; does not give a valid preprocessing token</code>, and <code>expected \u2018,\u2019 or \u2018;\u2019 before \u2018_\u2019</code>."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1511378227, "post_id": 47442197, "comment_id": 81839729, "body": "If you&#39;re trying to get  <code>COCONUT_FX_REGISTER</code> with the macro <code>(y##_##x</code> would do that)  and <code>COCONUT_FX_REGISTER</code> is <code>(100)</code>, why are you expecting <code>4195812</code>?"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1511378350, "post_id": 47442197, "comment_id": 81839790, "body": "@PSkocik I&#39;m not expecting <code>4195812</code>, but I&#39;m getting it, most likely due to a bug in my code."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1511378405, "post_id": 47442197, "comment_id": 81839817, "body": "@DevNull: Right, you need to lose the parentheses around <code>PRODUCT_COCONUT</code> in order for token concatenation to work. (Or, for that matter, stringification.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511378506, "post_id": 47442197, "comment_id": 81839866, "body": "And you are getting a number because the result of your <code>getTranslation</code> is a string; in C, a pointer can be converted to an integer (but you would get a warning if you compiled with the highly-recommended <code>-Wall</code> command line flag)."}], "answers": [{"comments": [{"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1511378552, "post_id": 47442319, "comment_id": 81839878, "body": "This did it, <b>but</b>, I had to drop <code>getTranslationInternal</code> entirely, and just <code>#define getTranslation(x, y) y ## _ ## x</code>. No more stringify effects :). Thanks!"}], "tags": [], "owner": {"reputation": 11664, "user_id": 207791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c9ffc6f77d7f8ee002acd0e9ebc872f2?s=128&d=identicon&r=PG", "display_name": "Victor Sergienko", "link": "https://stackoverflow.com/users/207791/victor-sergienko"}, "is_accepted": true, "score": 2, "last_activity_date": 1511378242, "creation_date": 1511378242, "answer_id": 47442319, "question_id": 47442197, "link": "https://stackoverflow.com/questions/47442197/macro-function-to-generate-macro-with-prefix-avoid-stringification/47442319#47442319", "title": "Macro-function to generate macro with prefix (avoid stringification)", "body": "<pre><code>#define getTranslationInternal(x, y)    y ## _ ## x\n</code></pre>\n\n<p>worked for me on clang, if you drop parentheses around the macro definitions.</p>\n"}], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 47442319, "answer_count": 1, "score": -1, "last_activity_date": 1511397445, "creation_date": 1511377778, "last_edit_date": 1592644375, "question_id": 47442197, "link": "https://stackoverflow.com/questions/47442197/macro-function-to-generate-macro-with-prefix-avoid-stringification", "title": "Macro-function to generate macro with prefix (avoid stringification)", "body": "<h1>Background</h1>\n<p>I have a project where I have two separate products with near-identical macro names, for which I would like to create a macro-like-function to retrieve the values of the macros quickly. I have written a <code>getTranslation</code> macro-function to take the literal text provided to the &quot;function&quot;, which should be treated as a string and a string prefix (shown below).</p>\n<hr />\n<h1>Question</h1>\n<p>How can I accomplish this operation of taking the arguments supplied to the macro, concatenating them together (with an underscore in the middle), and treating that result as a preprocessor macro instead of a string?</p>\n<hr />\n<h1>Code Listing</h1>\n<pre><code>/*******************************************************************************\n * coconut.h\n ******************************************************************************/\n#define COCONUT         (PRODUCT_COCONUT)\n#define COCONUT_FX_REGISTER (100)\n#define COCONUT_BASE_REGISTER   (101)\n\n/*******************************************************************************\n * pineapple.h\n ******************************************************************************/\n#define PINEAPPLE       (PRODUCT_PINEAPPLE)\n#define PINEAPPLE_FX_REGISTER   (200)\n#define PINEAPPLE_BASE_REGISTER (201)\n\n/*******************************************************************************\n * test.c.\n ******************************************************************************/\n#include &lt;stdio.h&gt;\n#include &quot;translation.h&quot;\n#include &quot;coconut.h&quot;\n\nint main(void) {\n\n    int i = getTranslation(FX_REGISTER, COCONUT);\n    printf(&quot;Translation:%d.\\n&quot;, i);\n\n    return 0;\n}\n\n/*******************************************************************************\n * translation.h\n ******************************************************************************/\n#define FX_REGISTER     (0)\n#define BASE_REGISTER       (1)\n\n#define getTranslationInternal(x, y)    #y &quot;_&quot; #x\n#define getTranslation(x, y)        getTranslationInternal(x, y)\n\nenum Products {\n    PRODUCT_COCONUT = 0,\n    PRODUCT_PINEAPPLE,\n    PRODUCT_MAX,\n    PRODUCT_INVALID = (-1)\n};\n</code></pre>\n<hr />\n<h1>Compiler Warnings</h1>\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:10:45: warning: initialization makes integer from pointer without a cast [-Wint-conversion]\n  int i = getTranslation(FX_REGISTER, COCONUT);\n                                             ^\ntranslation.h:7:39: note: in definition of macro \u2018getTranslationInternal\u2019\n #define getTranslationInternal(x, y) #y &quot;_&quot; #x\n                                       ^\ntest.c:10:10: note: in expansion of macro \u2018getTranslation\u2019\n  int i = getTranslation(FX_REGISTER, COCONUT);\n</code></pre>\n<hr />\n<h1>Sample Run</h1>\n<pre><code>Translation:4195812.\n</code></pre>\n"}, {"tags": ["c++", "c", "argv"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 5, "creation_date": 1511376693, "post_id": 47441911, "comment_id": 81838902, "body": "an array of character pointers. ..so <code>C</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511376750, "post_id": 47441911, "comment_id": 81838932, "body": "You are right. Consider that <code>char** argv</code> is another way to think about it. If <code>char*</code> is an array of characters (a string), then what is <code>char**</code>?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1511376821, "post_id": 47441911, "comment_id": 81838979, "body": "@coderredoc: I interpreted it to mean &quot;array of pointers to character&quot; singular. As in, pointers to only one character. Which could never be the case (unless you can pass an empty command line argument)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1511376985, "post_id": 47441911, "comment_id": 81839080, "body": "@AndyG The syntax <code>char *ptr</code> doesn&#39;t distinguish between a pointer to one or a pointer to many. It&#39;s just a pointer to <code>char</code>."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1511377010, "post_id": 47441911, "comment_id": 81839093, "body": "Imagine that if you&#39;d run your program (let&#39;s call it <i>your_program</i>) like: <code>your_program argument1 argumenr2 path&#47;to&#47;argument3 &quot;argument 4&quot;</code> those <b>5</b> strings (<code>char*</code>s) would be held by <code>argv</code> (that is how you would access them from your program)."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1511377111, "post_id": 47441911, "comment_id": 81839148, "body": "Yes, a pointer points to a single character. Since C has no &quot;string&quot; type, string-like functions are often made to assume that such pointers are pointing to the first character of a sequence in memory. That is, the address of a &quot;string&quot; is really just the address of its first character."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1511377124, "post_id": 47441911, "comment_id": 81839153, "body": "@user3386109: Yes but think of it in terms of <code>main</code> (command line argument). If it was a pointer to a singular character, it would somehow have to be the NUL character. Plus, the standard says that it must contain Nul-terminated multibyte strings..."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511377239, "post_id": 47441911, "comment_id": 81839225, "body": "First lesson, C is not C++ is not C, tag only one language ! Second lesson, you must be able to find information on your own, like you said it&#39;s a basic question and there are tons of duplicate on this site."}, {"owner": {"reputation": 125, "user_id": 7618567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7db90d7271bd521a26d4eef5fb75c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7618567/nick"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511377404, "post_id": 47441911, "comment_id": 81839313, "body": "@Stargateur I found a few other examples that were similar, however I failed to understand the concept. Even after learning about argv the question my professor gave us seems unclear to me. I just wanted to see if none of the above was correct and I understood properly."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511377727, "post_id": 47441911, "comment_id": 81839484, "body": "@NickK Maybe your problem is that you don&#39;t understand pointer ? Because <a href=\"https://stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean\">this</a> is clear to me, you should search question about <a href=\"https://stackoverflow.com/questions/tagged/c%20pointers?sort=votes&amp;mode=all\">how pointer work in C</a>. By the way, <a href=\"https://cdecl.org/?q=char+%2A%2Aargv%3B\" rel=\"nofollow noreferrer\">this</a> is the correct answer to what is <code>argv</code> in <code>main()</code>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1511377965, "post_id": 47441911, "comment_id": 81839593, "body": "@NickK E is indeed correct, because <code>argv</code> is a pointer to a pointer to a character, which is none of the above. We cannot however know whether you&#39;ve understood properly and you should ask your professor if you don&#39;t understand the concept."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511381189, "post_id": 47441911, "comment_id": 81841124, "body": "I nominated to reopen because (a) this question is not a duplicate of the purported original, (b) the top answer there does not discuss the type of <code>argv</code>, and (c) none of the answers there correctly give the type of <code>argv</code>, which is a pointer (not an array) to pointer to <code>char</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511385127, "post_id": 47441911, "comment_id": 81843000, "body": "@Stargateur: Yes, C and C++ are two different languages, and a question normally should have just one tag or the other. In this case, though, the answer happens to be the same for C and for C++."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511385976, "post_id": 47441911, "comment_id": 81843422, "body": "@AndyG <code>char *</code> is pointer to character. Not an array, and not a string.  A <code>char *</code> does not contain a string (and the standard does not say that it does).  It may point to a character which is in a string."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511386098, "post_id": 47441911, "comment_id": 81843478, "body": "@EricPostpischil I like how one of those who closed as duplicate, also posted the wrong answer in a comment. (currently the top comment)"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1511386477, "post_id": 47441911, "comment_id": 81843632, "body": "@KeithThompson until C++ or C change this fact and we will have to create a question where all answer will need to be updated and answer differently for C and C++. Duplicate is one of this usecase, you have an question and answers for C++, someone ask for C, and we close the C because C++ answer to the C question, if in the future this is not anymore the case, we can reopen the duplicate question in C. Easy, clean, etc. And I disagree, c standard say that argv will contain pointer to string where c++ standard say that argv with contain pointer to c-string."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511389720, "post_id": 47441911, "comment_id": 81844941, "body": "@M.M.: &quot;arguments shall be supplied in argv[0] through argv[argc-1] as pointers to the initial characters of null-terminated multibyte strings (ntmbs s)&quot;  is what the C++ standard specifies."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511391442, "post_id": 47441911, "comment_id": 81845526, "body": "@AndyG Yes, that is consistent with my comment. The <code>char *</code> in this case points to the initial character of a string. The <code>char *</code> is not an array nor a string, and does not contain a string."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511392336, "post_id": 47441911, "comment_id": 81845817, "body": "@M.M: In C, a <code>char*</code> value may be a pointer to a string. (The term <i>pointer to a string</i> is defined in the C standard, 7.1.1p1: &quot;A <i>pointer to a string</i> is a pointer to its initial (lowest addressed) character.&quot;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1511392446, "post_id": 47441911, "comment_id": 81845848, "body": "@KeithThompson Yes, that is what I am saying. &quot;A pointer to a string&quot; is a different concept to &quot;a string&quot;"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511392722, "post_id": 47441911, "comment_id": 81845928, "body": "@Stargateur: As I said, I agree that it should have been tagged with one language or the other. But neither C nor C++ is likely to change in this area. BTW, the C++ standard (ISO 2012) says that <code>argv[0]</code> through <code>argv[argc-1]</code> are &quot;pointers to the initial characters of null-terminated multibyte strings (NTMBSs)&quot;, not &quot;c-strings&quot;. In any case, the meaning is essentially identical."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511392984, "post_id": 47441911, "comment_id": 81846012, "body": "@M.M. I see what you&#39;re saying. Splitting hairs a little here, perhaps, but you&#39;re right, it points to the first character of the multibyte string. The way your comments read to me made it sound like you really believed there&#39;s only ever one character there :-)"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7618567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7db90d7271bd521a26d4eef5fb75c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7618567/nick"}, "edited": false, "score": 0, "creation_date": 1511383803, "post_id": 47443144, "comment_id": 81842395, "body": "Thanks a lot Eric! This is exactly what I was looking for!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1511385071, "post_id": 47443144, "comment_id": 81842979, "body": "&quot;<i>Either your instructor mistakenly intended C</i>&quot; -- On first reading, I thought you mean that the instructor meant to ask about C rather  than C++. I now realize that you meant choice C. I&#39;ll edit."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511396187, "post_id": 47443144, "comment_id": 81846857, "body": "The citation is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"nofollow noreferrer\">C11 Standard -5.1.2.2.1 Program startup (draft n1570)</a> and this is an evil question. <code>argv</code> is an array of pointers to char, but when passed as a parameter to the function <code>main</code> the first level of indirection is converted to a pointer providing a pointer to pointer to char in <code>main()</code>. So it really is two distinct questions &quot;What is it?&quot; or &quot;What is its resulting type in <code>main()</code> after being passed as a parameter?&quot; question."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511397734, "post_id": 47443144, "comment_id": 81847230, "body": "@DavidC.Rankin I don&#39;t get your point, standard only say &quot;the  array  members argv[0]&quot;, this make me feel strange because standard shouldn&#39;t say that <code>argv</code> is an array. More, I don&#39;t think that C standard want to force an implementation to use an array for <code>argv</code>. Or maybe all my life is a lie, I don&#39;t know."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511402983, "post_id": 47443144, "comment_id": 81848330, "body": "The standard says <code>&quot;the array members argv[0] through argv[argc-1] inclusive shall contain pointers to strings&quot;</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511403817, "post_id": 47443144, "comment_id": 81848532, "body": "@DavidC.Rankin: Undoubtedly it is intended that <code>argv</code> point to the members of an array, and <code>argv[0]</code> through <code>argv[argc-1]</code> are those members. Nonetheless, <code>argv</code> is not an array. If I write <code>int x[3]; int *y = x;</code>, then <code>x</code> is an array, <code>y</code> is a pointer to <code>int</code>, and <code>y[0]</code> is the first member of the array <code>x</code>. <code>y[0]</code> is <b>an</b> array member, but it is not <b>y\u2019s</b> array member. <code>y[0]</code> is a member of the array <code>x</code> because <code>y</code> points to <code>x[0]</code>, and the subscript operator evaluates to the object that is <code>x[0]</code>, so <code>y[0]</code> <b>is</b> <code>x[0]</code>. Further, the question asks about \u201cThe parameter <code>argv</code>.\u201d"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511410518, "post_id": 47443144, "comment_id": 81850129, "body": "I&#39;m just a simple person. When the standard says <code>&quot;the array members argv[0] through argv[argc-1]...&quot;</code> who am I to argue? I don&#39;t mean to mince words either. The array, as I understand it, is an array of pointers. Which is what allows indexing and pointer arithmetic, and why the declaration for main is <code>int main(int argc, char *argv[])</code>. I agree with the semantics that for all practical purposes within <code>main</code> argv is a <i>pointer to pointer to char</i>. Which is also why <code>int main (int argc, char **argv)</code> is a valid declaration. Beyond that, I&#39;ll defer to your wisdom <code>:)</code>"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 5, "last_activity_date": 1511394992, "last_edit_date": 1511394992, "creation_date": 1511381404, "answer_id": 47443144, "question_id": 47441911, "link": "https://stackoverflow.com/questions/47441911/the-parameter-argv-in-the-function-mainint-argc-char-argv/47443144#47443144", "title": "The parameter argv in the function main(int argc, char *argv[])", "body": "<p>The correct answer is E, none of the above. Although the parameter declaration looks like an array of pointer to <code>char</code>, the rules of C adjust it to pointer to pointer to <code>char</code>, and so do the rules of C++.</p>\n\n<p>Either your instructor mistakenly intended choice C or your instructor designed a question inappropriately tricky for an introductory class, unless it is extra credit.</p>\n"}, {"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511395272, "post_id": 47445552, "comment_id": 81846637, "body": "You confuse array and pointer in a question that ask about this difference ;). &quot;The data referred to by <code>argv</code> is an array,&quot; wrong, &quot;Please note <code>args</code> must be an array.&quot;, wrong. That remind me some funny mail, <a href=\"https://lkml.org/lkml/2015/9/3/428\" rel=\"nofollow noreferrer\">lkml.org/lkml/2015/9/3/428</a>. &quot;By definition, though, it&#39;s a pointer to the start of an array of char*&quot;, nope"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511399586, "post_id": 47445552, "comment_id": 81847640, "body": "I&#39;m not confused.  I described how an array is passed as a pointer. While exec(3) is free to construct an array of pointers for argv, or accept such an array and pass it verbatim (or copy it) the fact remains that argv points to the start of an array, else the locations up to argv[argc-1] wouldn&#39;t be valid.  If you think that&#39;s not so, you haven&#39;t offered any evidence."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511404453, "post_id": 47445552, "comment_id": 81848678, "body": "First <code>exec()</code> family are not a part of C standard. &quot;argv points to the start of an array, else the locations up to argv[argc-1] wouldn&#39;t be valid.&quot;, You confuse a pointer that contain the address of contigus numbers of element type and an array. An array is only with the syntax &quot;[5](fixed size) or [n](VLA) or [](automatic size at compilation time only if initialized)&quot;, <code>char **args;</code> is not an array, <code>char *argv[];</code> is not an array, <code>char *args[5]</code> is not an array but a pointer to an array of size 5. <code>int *p = (int [3]){1, 2, 3};</code> is a pointer. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p20\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.2.5p20</a>"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511451733, "post_id": 47445552, "comment_id": 81872685, "body": "&quot;<code>char *args[5]</code> is not an array but a pointer to an array of size 5&quot;.  Really?  What is <code>sizeof(args)</code> in that case?  If the answer surprises you, I can only refer you to K&amp;R.  I&#39;m sorry if &quot;points to the start of an array&quot; is unclear; to me your description is less clear because redundant, but equivalent."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511452067, "post_id": 47445552, "comment_id": 81872922, "body": "Oh yeah, my bad <code>char *argv[5];</code> is an array of size 5 of pointer. I confuse with <code>char (*argv)[5];</code> Whatever, <code>char *argv[];</code> is not an array. Array and pointer are not equivalent. Sorry, I&#39;m not a good english speaker, so I can&#39;t explain it very well."}], "tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 2, "last_activity_date": 1511394657, "creation_date": 1511394657, "answer_id": 47445552, "question_id": 47441911, "link": "https://stackoverflow.com/questions/47441911/the-parameter-argv-in-the-function-mainint-argc-char-argv/47445552#47445552", "title": "The parameter argv in the function main(int argc, char *argv[])", "body": "<p>I think your professor wants <strong>C</strong>, even though the pedanticly correct answer is <strong>E</strong>.  The data referred to by <code>argv</code> <em>is</em> an array, but the variable itself is a pointer.  I think it's worth exploring why, because it has nothing to do with the type of array or <code>main</code>.</p>\n\n<p>Consider an array of integers,</p>\n\n<pre><code>int a[] = { 1, 2, 3 };\n</code></pre>\n\n<p>This allocates 3 adjacent integers.  The size of the array is <code>sizeof(int) * 3</code>.</p>\n\n<p>Now let's write a function to double the values of each member,</p>\n\n<pre><code>void F( int m[], size_t n ) {\n    for( int i=0; i &lt; n; i++ ) {\n        m[i] *= 2;\n    }\n\nint main( int argc, char *argv[] ) {\n    F(a, sizeof(a)/sizeof(a[0]));\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>What is <code>m</code>?  It's declared to be an array, but it's really a pointer: <code>sizeof(m) == sizeof(int*)</code>.  That's because C <em>doesn't pass arrays as function arguments</em>.  The term of art in C is that an array argument <em>decays</em> to a pointer.</p>\n\n<p>It sorta kinda doesn't matter, because C <em>syntax</em> hides a host of sins, er, differences.  You can use the subscript notation with both arrays and pointers.  For that reason, our function <code>F</code> can treat <code>m</code> <em>almost</em> like an array, except that it requires the length, because it can't derive the length from the size, because the size is the size of the pointer.</p>\n\n<p>Let me say that a different way.  When <code>F</code> is called, the \"arguments on the stack\" are not the values of <code>a</code>, namely <code>1</code>, <code>2</code>, and <code>3</code>.  There is just one such argument, a pointer to the first element of <code>a</code> (often thought of as the address of the first element).  You can use that pointer as an array partly because the name of an array <em>also</em> refers to the address of the first element.  </p>\n\n<p>Now let's back up to your friend <code>argv</code>.  Array, or pointer?  Let's say your program <em>foo</em> is invoked on the command line:</p>\n\n<pre><code>$ foo sam I am\n</code></pre>\n\n<p>What does the operating system do?  Somehow, it has to pass those 4 strings (character arrays) to your program.  Somewhere, it has to allocate contiguous space for them.  <em>Conceptually</em>, the shell might do something like:</p>\n\n<pre><code>char **args = calloc(5, sizeof(char*));\nargs[0] = \"foo\"; \nargs[1] = \"sam\"; \nargs[2] = \"I\"; \nargs[3] = \"am\"; \n</code></pre>\n\n<p>or,</p>\n\n<pre><code>char args[5] = { \"foo\", \"sam\", \"I\", \"am\" };\n</code></pre>\n\n<p>Either way, it could pass <code>args</code> to <strong>execv</strong>(3), invoking your <code>main</code>, and passing you a ... pointer.  After all, it can't pass you an array, right?</p>\n\n<p>Please note <code>args</code> <em>must</em> be an array.  If it weren't <code>argv[1]</code> would be meaningless.  </p>\n\n<p>(Why 5 elements, you ask, when there are only 4 arguments?   There's a rule -- C or Posix, i don't remember -- that the last element in the array (!) must be a NULL pointer.)</p>\n\n<p>Array or pointer?  Wave or particle?  Where you stand depends on where you sit.  <code>argv</code> is pointer a to <code>char*</code>, certainly.  By definition, though, it's a pointer to the start of an array of <code>char*</code>.  </p>\n"}], "owner": {"reputation": 125, "user_id": 7618567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7db90d7271bd521a26d4eef5fb75c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7618567/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 47443144, "answer_count": 2, "score": 2, "last_activity_date": 1511394992, "creation_date": 1511376576, "last_edit_date": 1511382212, "question_id": 47441911, "link": "https://stackoverflow.com/questions/47441911/the-parameter-argv-in-the-function-mainint-argc-char-argv", "title": "The parameter argv in the function main(int argc, char *argv[])", "body": "<p>Sorry if this seems like a basic question. I've been studying for a midterm I have coming up and I can't seem to wrap my head around this. I understand that <code>argv</code> can be used in the command line when you need to send it arguments, but none of the answers my professor gave us seems to make sense.</p>\n\n<blockquote>\n  <p>The parameter <code>argv</code> in the function <code>main(int argc, char *argv[])</code> is:<br>\n  A. An array of characters<br>\n  B. A string<br>\n  C. An array of pointers to character<br>\n  D. A character pointer<br>\n  E. None of the above  </p>\n</blockquote>\n\n<p>I feel like it is none of the above, but it could be because I don't fully understand the concept of <code>argv</code>. Any help would be appreciated!</p>\n"}, {"tags": ["c", "linux", "unix", "operating-system"], "answers": [{"tags": [], "owner": {"reputation": 45398, "user_id": 873145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab6f2836e0722ea0cbfeb97a74f131d?s=128&d=identicon&r=PG", "display_name": "Thomas Orozco", "link": "https://stackoverflow.com/users/873145/thomas-orozco"}, "is_accepted": true, "score": 6, "last_activity_date": 1511376802, "creation_date": 1511376802, "answer_id": 47441976, "question_id": 47441871, "link": "https://stackoverflow.com/questions/47441871/why-should-we-check-wifexited-after-wait-in-order-to-kill-child-processes-in-lin/47441976#47441976", "title": "Why should we check WIFEXITED after wait in order to kill child processes in Linux system call?", "body": "<p><code>wait</code> returning <code>&gt;= 0</code> tells you a child process has terminated (and that calling <code>wait</code> didn't fail), but it does not tell you whether that process terminated successfully or not (or if it was signalled).</p>\n\n<p>But, here, looking at your code, it's fairly obvious the program does care about whether the child process that terminated did so successfully or not:</p>\n\n<blockquote>\n  <p><code>fprintf( stderr,\"Child failed. Killing all running children.\\n\");</code></p>\n</blockquote>\n\n<p>So, the program needs to do further tests on the <code>status</code> structure that was populated by <code>wait</code>:</p>\n\n<ul>\n<li><code>WIFEXITED(status)</code>: did the process exit normally? (as opposed to being signalled).</li>\n<li><code>WEXITSTATUS(status) == 0</code>: did the process exit with exit code 0 (aka \"success\"). For more information, see: <a href=\"https://stackoverflow.com/questions/20965762/meaning-of-exit-status-1-returned-by-linux-command\">Meaning of exit status 1 returned by linux command</a>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1511377225, "last_edit_date": 1511377225, "creation_date": 1511376912, "answer_id": 47441999, "question_id": 47441871, "link": "https://stackoverflow.com/questions/47441871/why-should-we-check-wifexited-after-wait-in-order-to-kill-child-processes-in-lin/47441999#47441999", "title": "Why should we check WIFEXITED after wait in order to kill child processes in Linux system call?", "body": "<p><code>wait(&amp;status)</code> waits on the termination of a child process. The termination may be due to a voluntary exit or due to the receipt of an unhandled signal whose default disposition is to terminate the process.</p>\n\n<p><code>WIFEXITED(status)</code> and <code>WIFSIGNALED(status)</code> allow you to distinguish the two* cases, and you can later use either <code>WEXITSTATUS</code> or <code>WTERMSIG</code> to retrieve either the exit status (<code>if(WIFEXITED(status)</code>) or termination signal (<code>if(WIFSIGNALED(status)</code>).</p>\n\n<hr>\n\n<p>*with <code>waitpid</code> and special flags (<code>WUNTRACED</code>, <code>WCONTINUED</code>), you can also wait on child process stops and resumptions, which you can detect with <code>WIFSTOPPED</code> or <code>WIFCONTINUED</code> (linux only) respectively. See <a href=\"https://linux.die.net/man/2/waitpid\" rel=\"nofollow noreferrer\">waitpid(2)</a> for more information.</p>\n"}], "owner": {"reputation": 1142, "user_id": 5863693, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101741963312f7ee577a74925672d234?s=128&d=identicon&r=PG&f=1", "display_name": "Yos", "link": "https://stackoverflow.com/users/5863693/yos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8357, "favorite_count": 1, "accepted_answer_id": 47441976, "answer_count": 2, "score": 5, "last_activity_date": 1511377225, "creation_date": 1511376419, "question_id": 47441871, "link": "https://stackoverflow.com/questions/47441871/why-should-we-check-wifexited-after-wait-in-order-to-kill-child-processes-in-lin", "title": "Why should we check WIFEXITED after wait in order to kill child processes in Linux system call?", "body": "<p>I came across some code in C where we check the return value of <code>wait</code> and if it's not an error there's yet another check of <code>WIFEXITED</code> and <code>WIFEXITSTATUS</code>. Why isn't this redundant? As far as I understand <code>wait</code> returns -1 if an error occurred while <code>WIFEXITED</code> returns non-zero value if <code>wait</code> child terminated normally. So if there wasn't any error in this line <code>if ( wait(&amp;status) &lt; 0 )</code> why would anything go wrong durng <code>WIFEXITED</code> check?</p>\n\n<p>This is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#define CHILDREN_NUM 5\n\nint main () {\n\n    int i, status, pid, p;\n    for(i = 0; (( pid = fork() ) &lt; 0) &amp;&amp; i &lt; CHILDREN_NUM;i++)\n        sleep(5);\n\n\n    if ( pid == 0 )\n    {\n        printf(\" Child %d : successfully created!\\n\",i);\n        exit( 0 );  /* Son normally exits here! */\n    }\n\n    p = CHILDREN_NUM;\n    /* The father waits for agents to return succesfully */\n    while ( p &gt;= 1 )\n    {\n        if ( wait(&amp;status) &lt; 0 ) {\n            perror(\"Error\");\n            exit(1);\n        }\n\n        if ( ! (WIFEXITED(status) &amp;&amp; (WEXITSTATUS(status) == 0)) )  /* kill all running agents */\n        {\n            fprintf( stderr,\"Child failed. Killing all running children.\\n\");\n           //some code to kill children here\n            exit(1);\n        }\n        p--;\n    }\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "casting", "int", "assign"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1511376196, "post_id": 47441789, "comment_id": 81838633, "body": "<code>uintptr_t</code> and friends."}, {"owner": {"reputation": 11664, "user_id": 207791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c9ffc6f77d7f8ee002acd0e9ebc872f2?s=128&d=identicon&r=PG", "display_name": "Victor Sergienko", "link": "https://stackoverflow.com/users/207791/victor-sergienko"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1511378930, "post_id": 47441789, "comment_id": 81840052, "body": "@EugeneSh. Make it an answer?"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1511380015, "post_id": 47441789, "comment_id": 81840603, "body": "@EugeneSh.&#39;s answer is spot on. Try that, if it doesn&#39;t work I also have the hunch that in this code the compiler could potentially optimize and never actually read from the location you&#39;ve specified."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511382080, "post_id": 47441789, "comment_id": 81841555, "body": "What happens if you make <code>result</code> volatile, as well as <code>volatile int* reg_addr;</code>? I am thinking the compiler, seeing it did not need <code>result</code>, decided it did not need to the value from <code>*reg_addr</code>. That value was volatile, so the compiler is required to read it if it needs it\u2014but it did not need it. Making <code>result</code> volatile forces the compiler to write it, which means it needs the value, which forces it to read <code>*reg_addr</code>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511384763, "post_id": 47441789, "comment_id": 81842821, "body": "Your question is <i>&quot;Is there a portable and compliant way of casting the value of an int variable to an int pointer?&quot;</i> and the answer is: &quot;no&quot;. Read the standard. Conversion of an integer to a pointer is <i>implementation defined</i>. The compiler manuals do tell how it happens."}, {"owner": {"reputation": 84, "user_id": 6693342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283a20aebacd5947887b8986bf39b2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius P.", "link": "https://stackoverflow.com/users/6693342/tiberius-p"}, "edited": false, "score": 0, "creation_date": 1511543781, "post_id": 47441789, "comment_id": 81910028, "body": "Thank you all for the useful comments! I found a workaround to get it to work. Instead of assigning the address value to a pointer variable I casted it like this <code>result = (*((volatile uint32 *)(addr)));</code>. Not sure if this is portable and not even sure why it works likes this and the other way. It&#39;s the result of trial and error. I don&#39;t want to publish it as an answer until I fully understand what&#39;s going on. I am using the gcc compiler for ARM to compile this. uint32 is a typedef for <code>unsigned int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2634, "user_id": 8985046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqc2A.jpg?s=128&g=1", "display_name": "GuidedHacking", "link": "https://stackoverflow.com/users/8985046/guidedhacking"}, "is_accepted": false, "score": 0, "last_activity_date": 1573536142, "creation_date": 1573536142, "answer_id": 58812501, "question_id": 47441789, "link": "https://stackoverflow.com/questions/47441789/assign-value-of-int-variable-to-int-pointer/58812501#58812501", "title": "Assign value of int variable to int pointer", "body": "<p>Your question is:</p>\n\n<blockquote>\n  <p>Is there a portable and compliant way of casting the value of an int\n  variable to an int pointer?</p>\n</blockquote>\n\n<p>There is not.  Summed up from the comments:</p>\n\n<blockquote>\n  <p>Conversion of an integer to a pointer is implementation defined - Antti Haapala</p>\n</blockquote>\n\n<p>It was suggested that you use uintptr_t or similar which is a good suggestion from Eugene Sh.</p>\n\n<p>In the example of uintptr_t</p>\n\n<pre><code>uintptr_t = unsigned integer type capable of holding a pointer\n</code></pre>\n\n<p>From the vadefs.h file from the Microsoft Visual C++ header file vadefs.h it is defined as:</p>\n\n<pre class=\"lang-C++ prettyprint-override\"><code>#ifdef _WIN64\n    typedef unsigned __int64  uintptr_t;\n#else\n    typedef unsigned int uintptr_t;\n#endif\n</code></pre>\n\n<p>In this manner, if you compile for x86 it would resolve to a 32bit data type and for x64, a 64 bit data type.</p>\n"}], "owner": {"reputation": 84, "user_id": 6693342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283a20aebacd5947887b8986bf39b2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius P.", "link": "https://stackoverflow.com/users/6693342/tiberius-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573536142, "creation_date": 1511375965, "last_edit_date": 1511485909, "question_id": 47441789, "link": "https://stackoverflow.com/questions/47441789/assign-value-of-int-variable-to-int-pointer", "title": "Assign value of int variable to int pointer", "body": "<p>I have the following C function used in an <strong>embedded software project</strong>. It's also used for the <strong>verification of the hardware</strong> and not in production.</p>\n\n<pre><code>void reg_read(int addr) {\n   int result;\n   int* reg_addr = (int*)(addr); // I cast the value of the addr variable to the reg_addr pointer hoping that it would point to the address stored in addr\n   result = (*reg_addr); // this should trigger a read transaction on the AXI interface of the ARM CPU that I'm simulating\n}\n// later on...in the main function\nreg_read(0x08000704);\n</code></pre>\n\n<p>The embedded software runs in a simulated environment(using QEMU+SystemC) and I can see if the AXI read transaction happens or not. In this case it doesn't happen.</p>\n\n<p>However, if I assign a constant value to the pointer like <code>int* reg_addr = (int*)0x08000704;</code> then the AXI transaction happens. </p>\n\n<p>I assume the compiler generates different instructions in each case. I also tried to declare reg_addr as <code>volatile int* reg_addr;</code> but it didn't work either.</p>\n\n<p>Is there a portable and compliant way of casting the value of an int variable to an int pointer?</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1511375365, "post_id": 47441579, "comment_id": 81838213, "body": "The warning says bool, your code only has int. Is there a copy-paste-edit problem? Did you copy the exact code which causes the quoted warnings?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1511375420, "post_id": 47441579, "comment_id": 81838236, "body": "The backslashes are redundant."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1511375442, "post_id": 47441579, "comment_id": 81838254, "body": "&quot;<i>Elements of ptr should point to any array size</i>&quot; &lt;- that&#39;s impossible. You need <code>int ((*ptr)[4])[2]</code> or something like that."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1511375462, "post_id": 47441579, "comment_id": 81838259, "body": "The type of <code>ptr[0]</code> is <code>int*</code>, while the type of <code>arr0</code> is (or can decay to) <code>int**</code>. What exactly are you hoping to achieve by assigning an <code>int**</code> value into an <code>int*</code> variable?"}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1511375595, "post_id": 47441579, "comment_id": 81838330, "body": "@klutt Are you sure?"}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 3, "creation_date": 1511375805, "post_id": 47441579, "comment_id": 81838447, "body": "@goodvibration <code>arr0</code> does not decay to <code>int**</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1511376359, "post_id": 47441579, "comment_id": 81838731, "body": "@goodvibration wrooong! The type of <code>arr0</code>, evaluated as a pointer, is <code>int (*)[4]</code>. See my previous comment."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1511376422, "post_id": 47441579, "comment_id": 81838776, "body": "cant you use like this,    <code>int (*ptr)[4];    ptr[2] = {arr0, arr1};</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1511376501, "post_id": 47441579, "comment_id": 81838816, "body": "@LethalProgrammer typedef?"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1511376717, "post_id": 47441579, "comment_id": 81838921, "body": "Yes, I missed typedef. <code>typedef int (*ptr)[4]; ptr[2] = {arr0, arr1};</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511379764, "post_id": 47441579, "comment_id": 81840479, "body": "And an identifier for the actual array..."}, {"owner": {"reputation": 57, "user_id": 6488245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a258c5b5b9b863667f4da747849304cc?s=128&d=identicon&r=PG&f=1", "display_name": "eyalasko", "link": "https://stackoverflow.com/users/6488245/eyalasko"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1511383978, "post_id": 47441579, "comment_id": 81842488, "body": "@LethalProgrammer, 4 is not always 4. The 2D arrays can be of any size. Does this affect your answer"}, {"owner": {"reputation": 57, "user_id": 6488245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a258c5b5b9b863667f4da747849304cc?s=128&d=identicon&r=PG&f=1", "display_name": "eyalasko", "link": "https://stackoverflow.com/users/6488245/eyalasko"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1511384172, "post_id": 47441579, "comment_id": 81842575, "body": "@EugeneSh. I understand that braces are redundant, they were just added for clarity. If I understand correctly arr0 is indeed pointer (int*) to a contiguous block of memory. I hope that the braces do not break this. Correct ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511418009, "post_id": 47441579, "comment_id": 81852508, "body": "@eyalasko you can&#39;t have pointers to arrays with <b>different</b> second dimension in one array -- the type of the pointers would differ! That&#39;s what I wrote in my very first comment. If you take a second to think about it: All dimensions of an array except for the first one must be present in the type information, so the compiler can calculate the correct offset from the indices you give. So, a pointer to a 2d array with second dimension <code>4</code> has the type <code>int (*)[4]</code>. You need a <b>different idea / design</b>!"}], "owner": {"reputation": 57, "user_id": 6488245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a258c5b5b9b863667f4da747849304cc?s=128&d=identicon&r=PG&f=1", "display_name": "eyalasko", "link": "https://stackoverflow.com/users/6488245/eyalasko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1511431702, "creation_date": 1511375157, "last_edit_date": 1511431702, "question_id": 47441579, "link": "https://stackoverflow.com/questions/47441579/array-of-pointers-to-2d-array", "title": "array of pointers to 2D array", "body": "<p>What would be the correct way to hold an array of pointers to a bunch of 2D arrays of the variable?</p>\n\n<pre><code>const int arr0[][4] = {{10, 11, 12, 13},    \\\n                       {14, 15, 16, 17},    \\\n                       {18, 19, 20, 21},    \\\n                       {22, 23, 24, 25}};\nconst int arr1[][4] = {{80, 81, 82, 83},    \\\n                       {84, 85, 86, 87},    \\\n                       {88, 89, 90, 91},    \\\n                       {92, 93, 94, 95}};\n\nint *ptr[2];     // Elements of ptr should point to any array size\nptr[0] = arr0;   // this give Warning C4047 '=': 'bool *' differs in levels of indirection from 'const bool (*)[4]'\n</code></pre>\n\n<p>Where do I miss * / &amp; / (  )   ??</p>\n\n<p>Thanks</p>\n\n<p>edit:\nAs I don't know in build time the actual size of arr0/1 (can vary), I want to hold two pointers <code>(*ptr[2] ?)</code> referring to arr0/arr1 and access their elements using some pointer arithmetic, something like (assuming I have width=4 stored dynamically):</p>\n\n<pre><code>int out_2_3 = *(ptr[0] + 2*width + 3) + *(ptr[1] + 2*width + 3);\n</code></pre>\n\n<p>//  desired: 20+90 </p>\n"}, {"tags": ["c", "malloc", "multiplication", "calloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1511375006, "post_id": 47441494, "comment_id": 81838041, "body": "If you have an array of size <code>x</code>, the last accessible element is indexed by <code>x-1</code>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1511375217, "post_id": 47441494, "comment_id": 81838157, "body": "Your function is declared <code>void</code>, when it wants to return an <code>int **</code>. Compiler warnings should have caught this."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1511376463, "last_edit_date": 1511376463, "creation_date": 1511375021, "answer_id": 47441541, "question_id": 47441494, "link": "https://stackoverflow.com/questions/47441494/multiplication-table-issue/47441541#47441541", "title": "Multiplication Table issue", "body": "<p>Here you access memory that you have not allocated. That is undefined behavior.</p>\n\n<p>Correct would be to consider <code>x</code> elements not <code>x+1</code>.</p>\n\n<pre><code>for(q = 0; q &lt; x; q++){\n        ptr[q] = (i * q);\n</code></pre>\n\n<p>Same goes with the outer loop also.</p>\n\n<pre><code>for(i = 0; i &lt; x; i++){\n</code></pre>\n\n<p>Also few other things - returning from a function which is declared void (Undefined behavior). Not checking the return value of <code>malloc</code> and <code>calloc</code> is problematic.</p>\n\n<p>So correct way to write the function would be</p>\n\n<pre><code>int** makeTable (int x) {\n    int** table = malloc(x * sizeof *table);\n    if(!table)\n    {\n        fprintf(stderr,\"Error in mem alloc\");\n        exit(1);\n    }\n    for(size_t i = 0; i &lt; x; i++){\n        int * ptr = calloc(x, sizeof *ptr);\n        if(!ptr)\n        {\n           fprintf(stderr,\"Error in mem alloc\");\n           exit(1);\n        }\n        for(size_t q = 0; q &lt; x; q++){\n            ptr[q] = (i * q);\n        }\n        table[i] = ptr;\n    }\n    return table;\n}\n</code></pre>\n\n<p>Also somewhere in this program you should add the logic to free all these dynamically allocated memory using <code>free</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 7120770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81565d779dd0f81fb96c9a55579d676?s=128&d=identicon&r=PG&f=1", "display_name": "A. Lewis", "link": "https://stackoverflow.com/users/7120770/a-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511376463, "creation_date": 1511374856, "question_id": 47441494, "link": "https://stackoverflow.com/questions/47441494/multiplication-table-issue", "title": "Multiplication Table issue", "body": "<p>I am trying to write a C function to store a multiplication table from the range 0-x. The function I have written has a bug in it where it only stores either the first 2 or 3 rows of the table and the function is also never returning a value and I am very confused, any help is appreciated.</p>\n\n<pre><code>void makeTable (int x) {\nint** table = malloc(x * sizeof(int*));\nint i;\nint q;\nint* ptr;\nfor(i = 0; i &lt;= x; i++){\n    ptr = calloc(x, sizeof(int));\n    for(q = 0; q &lt;= x; q++){\n        ptr[q] = (i * q);\n    }\n    table[i] = ptr;\n}\nreturn table;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "linux", "proc", "ps"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511374492, "post_id": 47441338, "comment_id": 81837764, "body": "There&#39;s nothing special about reading this file, just read it like any other file."}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "edited": false, "score": 0, "creation_date": 1511374627, "post_id": 47441338, "comment_id": 81837836, "body": "@FelixPalmen whenever i try my main loop break after writing 1 pid"}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "edited": false, "score": 0, "creation_date": 1511374713, "post_id": 47441338, "comment_id": 81837890, "body": "and how can i place variable in path to open it? @FelixPalmen"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511374890, "post_id": 47441338, "comment_id": 81837983, "body": "Try <code>sprintf()</code> / <code>snprintf()</code> to construct the path for <code>fopen()</code>."}], "owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 761, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511374251, "creation_date": 1511374251, "question_id": 47441338, "link": "https://stackoverflow.com/questions/47441338/read-file-proc-pid-comm-in-c-linux", "title": "Read file /proc/{pid}/comm in c linux", "body": "<p>I want read file /proc/{PID}/comm (the name of the proccess) and write near PID in my simple ps command</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\nint main()\n{\n    DIR *dir;\n    struct dirent *ent;\n    const char l[]=\"0123456789\";\n\n    if ((dir = opendir(\"/proc\")) == NULL)\n        perror(\"operation error\");\n    else \n    {\n        printf(\" PID      CMD\\n\");\n\n        while ((ent = readdir(dir)) != NULL)\n\n            if(strspn(ent-&gt;d_name, l)) \n            {\n                printf(\" %s\\n\", ent-&gt;d_name);\n            }\n\n        closedir(dir);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I readed lot of examples, but i don;t have idea how should it looks like in my code.</p>\n\n<p>Have somebody any ideas</p>\n"}, {"tags": ["c", "floating-point", "type-conversion", "type-promotion"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1511373930, "post_id": 47441258, "comment_id": 81837425, "body": "You need the function prototype above <code>main</code>. And compile with warnings, please."}, {"owner": {"reputation": 1325, "user_id": 8949166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zGGTy.png?s=128&g=1", "display_name": "realharry", "link": "https://stackoverflow.com/users/8949166/realharry"}, "edited": false, "score": 0, "creation_date": 1511374110, "post_id": 47441258, "comment_id": 81837529, "body": "Look up &quot;forward declaration&quot;. If you are new to the language (especially for C or C++), it is a very important concept."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374293, "post_id": 47441258, "comment_id": 81837635, "body": "You&#39;re using a compiler that either uses the obsolete <b>28</b> year old C standard revision that was cancelled and replaced 18 years ago, or you&#39;re not reading the compiler warnings (which you should consider as <b>errors</b> and diligently copy into your question!)."}, {"owner": {"reputation": 59, "user_id": 8992515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae4a2e1d330779be36e659497365e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nightowl", "link": "https://stackoverflow.com/users/8992515/nightowl"}, "edited": false, "score": 0, "creation_date": 1511374432, "post_id": 47441258, "comment_id": 81837723, "body": "Yes, thats actually a thing I could have done, sorry I&#39;m in my first weeks learning C and totally forgot such an important rule."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374617, "post_id": 47441258, "comment_id": 81837833, "body": "And at first start with google and the diagnostics message!"}, {"owner": {"reputation": 59, "user_id": 8992515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae4a2e1d330779be36e659497365e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nightowl", "link": "https://stackoverflow.com/users/8992515/nightowl"}, "edited": false, "score": 0, "creation_date": 1511374911, "post_id": 47441258, "comment_id": 81837999, "body": "@Antii Haapala That&#39;s a thing I considered doing before, however I thought my question had to do something with type promotion rules so after a longer time searching the web I thought posting a question would finally help me, and it did"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511374091, "post_id": 47441285, "comment_id": 81837518, "body": "This should include an explanation (&quot;implicit int&quot;)"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1511374128, "post_id": 47441285, "comment_id": 81837542, "body": "@FelixPalmen.: Oh ok"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511374192, "post_id": 47441285, "comment_id": 81837573, "body": "Nevermind, the dupe has it ;)"}, {"owner": {"reputation": 59, "user_id": 8992515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae4a2e1d330779be36e659497365e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nightowl", "link": "https://stackoverflow.com/users/8992515/nightowl"}, "edited": false, "score": 0, "creation_date": 1511374212, "post_id": 47441285, "comment_id": 81837588, "body": "JESUS what a rookie mistake, thank you."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1511374231, "post_id": 47441285, "comment_id": 81837601, "body": "@FelixPalmen.: So fast ..."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374447, "post_id": 47441285, "comment_id": 81837731, "body": "It should say declare your function before you <b>invoke</b> it, or use the symbol."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374491, "post_id": 47441285, "comment_id": 81837763, "body": "@AnttiHaapala.: Symbol?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374558, "post_id": 47441285, "comment_id": 81837801, "body": "well, you know, the identifier. You&#39;re not <i>&quot;declaring it before defining it&quot;</i> in the code above"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374635, "post_id": 47441285, "comment_id": 81837841, "body": "@AnttiHaapala.: So yes...either you put the def before you invoke or put the declaration before callign point and privde the definitio somewhere"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374692, "post_id": 47441285, "comment_id": 81837877, "body": "@AnttiHaapala.: Yes modified...invoked ofcourse..What use it has if they dont declare it before they invoke it..."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374772, "post_id": 47441285, "comment_id": 81837922, "body": "@AnttiHaapala.: Please Check once. I hope wordings are precise now?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374791, "post_id": 47441285, "comment_id": 81837933, "body": "Yea better now."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511374805, "post_id": 47441285, "comment_id": 81837940, "body": "@AnttiHaapala.: Not accurate? :)"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 2, "last_activity_date": 1511374514, "last_edit_date": 1511374514, "creation_date": 1511373979, "answer_id": 47441285, "question_id": 47441258, "link": "https://stackoverflow.com/questions/47441258/im-still-new-to-c-and-i-dont-have-a-clue-why-my-float-result-is-random-maybe-t/47441285#47441285", "title": "I&#39;m still new to C and I dont have a clue why my float result is random (maybe type promotion rules?)", "body": "<p>Declare the function before you invoke it. Here you need to put the definition above <code>main()</code> or just put a declaration before <code>main</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nfloat function(float value1, float value2) {\n    float calculation = value1 * value2;\n    return calculation;\n}\nint main() {\n\n    float result;\n    result = function(2.4, 4.9);\n\n    printf(\"Test: %.2f\\n\", result);\n\n    return 0;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nfloat function(float value1, float value2);\nint main() {\n\n    float result;\n    result = function(2.4, 4.9);\n\n    printf(\"Test: %.2f\\n\", result);\n\n    return 0;\n}\nfloat function(float value1, float value2) {\n    float calculation = value1 * value2;\n    return calculation;\n}\n</code></pre>\n\n<p>Also if you have turned on the warning then you will possibly see a message like this</p>\n\n<p><code>..: 'function' was not declared in this scope</code></p>\n"}], "owner": {"reputation": 59, "user_id": 8992515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae4a2e1d330779be36e659497365e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nightowl", "link": "https://stackoverflow.com/users/8992515/nightowl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "closed_date": 1511374156, "accepted_answer_id": 47441285, "answer_count": 1, "score": 0, "last_activity_date": 1511374514, "creation_date": 1511373828, "question_id": 47441258, "link": "https://stackoverflow.com/questions/47441258/im-still-new-to-c-and-i-dont-have-a-clue-why-my-float-result-is-random-maybe-t", "closed_reason": "Duplicate", "title": "I&#39;m still new to C and I dont have a clue why my float result is random (maybe type promotion rules?)", "body": "<p>I believe that it has something to do with type promotion rules, but I'm not sure and considering the fact that I'm still new to programming, I cant imagine why this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    float result;\n    result = function(2.4, 4.9);\n\n    printf(\"Test: %.2f\\n\", result);\n    system(\"PAUSE\");\n    return 0;\n}\n\nfloat function(float value1, float value2) {\n    float calculation = value1 * value2;\n    return calculation;\n}\n</code></pre>\n\n<p>would print out</p>\n\n<blockquote>\n  <p>Test: -858993472.00</p>\n</blockquote>\n\n<p>I'm typing in float values and I want my calculation to return an other float value as my result, what am I doing wrong? </p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1511373548, "post_id": 47441137, "comment_id": 81837222, "body": "assuming you don&#39;t need to process multiple clients simultaneously, your <code>accept()</code> call also needs to be inside a loop.    If you do need to process multiple clients simultaneously, stuff gets a <i>lot</i> harder."}], "answers": [{"comments": [{"owner": {"reputation": 1042, "user_id": 6822339, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/tYeiF.jpg?s=128&g=1", "display_name": "Kamsiinov", "link": "https://stackoverflow.com/users/6822339/kamsiinov"}, "edited": false, "score": 0, "creation_date": 1511374014, "post_id": 47441215, "comment_id": 81837467, "body": "That seems to do the trick and I also moved the accept part inside the while loop. Thanks."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1511373692, "creation_date": 1511373692, "answer_id": 47441215, "question_id": 47441137, "link": "https://stackoverflow.com/questions/47441137/c-drop-connection-after-sending-data/47441215#47441215", "title": "C drop connection after sending data", "body": "<pre><code>comm_fd = accept(listen_fd, (struct sockaddr*) NULL, NULL);\n\nwhile (1)\n{\n    bzero(str, 100);\n    write(comm_fd, str, strlen(str) + 1);\n}\n</code></pre>\n\n<p>The code inside the <code>while</code> loop is the code that will be repeated constantly...now look where you've placed the call to <code>accept</code> the new connection. It's outside of the <code>while</code> loop. As your code currently stands, you'll call it once and then constantly send data at the new connection.</p>\n\n<p>If you put the <code>accept</code> inside the <code>while</code> loop and also <code>close</code> that new connection, like the following code, you should get the result you're looking for.</p>\n\n<pre><code>while (1)\n{\n    comm_fd = accept(listen_fd, (struct sockaddr*) NULL, NULL);\n    bzero(str, 100);\n    write(comm_fd, str, strlen(str) + 1);\n    close(comm_fd);\n}\n</code></pre>\n"}], "owner": {"reputation": 1042, "user_id": 6822339, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/tYeiF.jpg?s=128&g=1", "display_name": "Kamsiinov", "link": "https://stackoverflow.com/users/6822339/kamsiinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 47441215, "answer_count": 1, "score": 0, "last_activity_date": 1511373692, "creation_date": 1511373433, "question_id": 47441137, "link": "https://stackoverflow.com/questions/47441137/c-drop-connection-after-sending-data", "title": "C drop connection after sending data", "body": "<p>How can I drop connection in plain C after I have sent the data? I have a server which creates socket and waits for connection. After getting connection it sends char array through that socket. After that it should drop the connection and go back to waiting next connection. How can I do that? This is my test code:</p>\n\n<pre><code>int main()\n{\nchar str[100];\nint listen_fd, comm_fd;\nstruct sockaddr_in servaddr;\nlisten_fd = socket(AF_INET, SOCK_STREAM, 0);\nbzero(&amp;servaddr, sizeof(servaddr));\nservaddr.sin_family = AF_INET;\nservaddr.sin_addr.s_addr = htons(INADDR_ANY);\nservaddr.sin_port = htons(22000);\nbind(listen_fd, (struct sockaddr *) &amp;servaddr, sizeof(servaddr));\nlisten(listen_fd, 10);\ncomm_fd = accept(listen_fd, (struct sockaddr*) NULL, NULL);\n\nwhile (1)\n{\n    bzero(str, 100);\n    write(comm_fd, str, strlen(str) + 1);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "list", "gtk"], "comments": [{"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1511436541, "post_id": 47441070, "comment_id": 81863319, "body": "You&#39;ve removed too much code, so it&#39;s hard to figure out what you&#39;re really doing."}], "answers": [{"comments": [{"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1511436326, "post_id": 47442362, "comment_id": 81863190, "body": "This is most likely a bad idea. It works on the short term, but makes your code more fragile."}], "tags": [], "owner": {"reputation": 91, "user_id": 8377865, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dab7faf0adf5a7eb7f1c94d40afc61fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Mohantu", "link": "https://stackoverflow.com/users/8377865/sagar-mohantu"}, "is_accepted": false, "score": 0, "last_activity_date": 1511378406, "creation_date": 1511378406, "answer_id": 47442362, "question_id": 47441070, "link": "https://stackoverflow.com/questions/47441070/data-pointer-has-changed-when-received-in-the-callback/47442362#47442362", "title": "Data pointer has changed when received in the callback", "body": "<p>the problem fixed by making start as static variable\nstatic struct node* start = 0;</p>\n"}, {"tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": true, "score": 1, "last_activity_date": 1512037255, "last_edit_date": 1512037255, "creation_date": 1511437172, "answer_id": 47454655, "question_id": 47441070, "link": "https://stackoverflow.com/questions/47441070/data-pointer-has-changed-when-received-in-the-callback/47454655#47454655", "title": "Data pointer has changed when received in the callback", "body": "<p>Your problem comes from the fact that <code>parameters-&gt;start = &amp;start;</code> can't work outside of that fuction. You're supposed to either allocate some memory through <code>g_new0</code> or <code>g_malloc</code> and have it filled by <code>deviceDiscovery</code>, or <code>deviceDiscovery</code> is supposed to return you an allocated node. As it takes a <code>node **</code>, it's more likely that's the second option.</p>\n\n<p>Then in your parameters, don't store a <code>node **start</code>, you only need the content, not where it is stored I suppose, so <code>node *start</code> should be enough. Then you'll be able to just write:</p>\n\n<pre><code>struct node *start = NULL;\ndeviceDiscovery(&amp;start); // Allocates structure memory and initializes it\n// You may want to check if start != NULL to avoid errors later.\nparameters-&gt;start = start;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8377865, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dab7faf0adf5a7eb7f1c94d40afc61fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Mohantu", "link": "https://stackoverflow.com/users/8377865/sagar-mohantu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 47454655, "answer_count": 2, "score": 0, "last_activity_date": 1512037255, "creation_date": 1511373208, "last_edit_date": 1511436200, "question_id": 47441070, "link": "https://stackoverflow.com/questions/47441070/data-pointer-has-changed-when-received-in-the-callback", "title": "Data pointer has changed when received in the callback", "body": "<p>I have a list store treeview. Clicking an item of that calls \"replace_tab\" and adds a back button to display. Clicking the back button calls Back.Back. The handler is passed an instance of pointer to a list. I have printed the value of pointer both before and after the back handler is called.</p>\n\n<pre><code>struct BTDeviceDetails\n{\n    char*addr;\n    char*name;\n};\n\nstruct node\n{\n    struct node* next;\n    struct BTDeviceDetails * data;\n};\n\nstruct param\n{\n    GtkWidget* backbutton;\n    GtkWidget* Okbutton;\n    GtkWidget* scrolledwindow;\n    GtkWidget*newChild;\n    GtkWidget*oldChild;\n    struct node** start;\n};\n\nstatic void Back (GtkButton *button, gpointer   user_data)\n{\n      struct param* parameters = (struct param*)user_data;\n      printf(\"\\nreplacetab=%p\\n\",(void*)*(parameters-&gt;start)); // prints-&gt; \"replacetab=0x7fffcd8b1320\"\n      ............\n}\n\nstatic void replace_tab(GtkTreeView *tree_view, GtkTreePath *path, GtkTreeViewColumn *column, gpointer user_data)\n{\n    struct node * start = 0;\n      deviceDiscovery(&amp;start);\n    .............\n    parameters-&gt;start = &amp;start;\n    printf(\"\\n replacetab=%p \\n\",(void*)*(parameters-&gt;start)); // prints-&gt; \"replacetab=(nil)\"\n    g_signal_connect(parameters-&gt;newChild,\"row-activated\", G_CALLBACK( registerDevice ) ,&amp;start);\n    g_signal_connect(parameters-&gt;backbutton, \"clicked\", G_CALLBACK(Back), (gpointer) parameters);\n}\n\nint main()\n{\n    ....................\n    g_signal_connect(treeview, \"row-activated\", G_CALLBACK(replace_tab), (gpointer) parameters);\n    ....................\n}\n</code></pre>\n"}, {"tags": ["c", "undefined-behavior", "restrict"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1511372427, "post_id": 47440830, "comment_id": 81836676, "body": "Because the object <code>d[1]</code> in the function <code>f</code> is accessed via both <code>p</code> and <code>q</code>. the comment is saying that."}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1511372479, "post_id": 47440830, "comment_id": 81836701, "body": "I don&#39;t think restrict helps here because &#39;the lifetime of the pointer&#39; is the function call - which effects both pointers anyway. The normal undefined behaviour applies"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1511372538, "post_id": 47440830, "comment_id": 81836738, "body": "@MartinBeckett in function <code>f</code> both pointers are restricted, yet pointing to the same object at different times."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1511372581, "post_id": 47440830, "comment_id": 81836758, "body": "@EugeneSh. d hold the base addres of array d[0]"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1511372651, "post_id": 47440830, "comment_id": 81836791, "body": "@rsp Hm What? <code>d</code> is an array. <code>d[0]</code> is an array element."}], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 5737217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6285a15aeccc9a50f8040a429e3a497?s=128&d=identicon&r=PG&f=1", "display_name": "Nergal", "link": "https://stackoverflow.com/users/5737217/nergal"}, "edited": false, "score": 0, "creation_date": 1532890811, "post_id": 47440914, "comment_id": 90132443, "body": "hello interjay, so it is undefined behavior when you access the object through the alias pointer or if the pointer aliases the object? Your statement sounds like it matters only if the pointer pointing to the object is dereferences and that it doesn&#39;t matter if another pointer aliases so long as it&#39;s not dereferenced?"}, {"owner": {"reputation": 310, "user_id": 5737217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6285a15aeccc9a50f8040a429e3a497?s=128&d=identicon&r=PG&f=1", "display_name": "Nergal", "link": "https://stackoverflow.com/users/5737217/nergal"}, "edited": false, "score": 0, "creation_date": 1532974009, "post_id": 47440914, "comment_id": 90165810, "body": "ahhh so If I had another pointer alias the restricted pointer just to save the address and then restore it back to the restricted pointer, that&#39;s not undefined behavior? the reason for the question is because I&#39;m working on a stack VM and the instruction pointer is restricted but the opcode needs to save the instruction pointer value to stack. I was worried this would&#39;ve caused UB."}], "tags": [], "owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "is_accepted": true, "score": 5, "last_activity_date": 1511372867, "last_edit_date": 1511372867, "creation_date": 1511372539, "answer_id": 47440914, "question_id": 47440830, "link": "https://stackoverflow.com/questions/47440830/confusion-about-undefined-behaviour-for-restrict-qualifier/47440914#47440914", "title": "Confusion about undefined behaviour for restrict qualifier", "body": "<p>The <code>restrict</code> qualifier on a pointer means that any object accessed through that pointer which is modified will not be accessed through other pointers during that pointer's lifetime. In other words, when an object is accessed through pointer <code>p</code> and modified during <code>p</code>'s scope, then it can only be accessed through <code>p</code> in that scope. Violating this constraint leads to undefined behavior.</p>\n\n<p>In <code>f(50, d + 50, d);</code>, <code>p</code> will be used to modify <code>d[50]</code> up to <code>d[99]</code>, and <code>q</code> will be used to access <code>d[0]</code> up to <code>d[49]</code>. There is no overlap so everything is fine.</p>\n\n<p>In <code>f(50, d + 1, d);</code>, <code>p</code> will be used to modify <code>d[1]</code> up to <code>d[50]</code>, and <code>q</code> will be used to access <code>d[0]</code> up to <code>d[49]</code>. Since some elements (for example, <code>d[1]</code>) are modified through <code>p</code> and read through <code>q</code>, this is a violation of the <code>restrict</code> qualifier.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 47440914, "answer_count": 1, "score": 1, "last_activity_date": 1511378901, "creation_date": 1511372229, "last_edit_date": 1511378901, "question_id": 47440830, "link": "https://stackoverflow.com/questions/47440830/confusion-about-undefined-behaviour-for-restrict-qualifier", "title": "Confusion about undefined behaviour for restrict qualifier", "body": "<p>I saw the following example on <a href=\"http://en.cppreference.com/w/c/language/operator_other\" rel=\"nofollow noreferrer\">cppreference</a>.</p>\n\n<pre><code>void f(int n, int * restrict p, int * restrict q)\n{\n    while(n-- &gt; 0)\n        *p++ = *q++; // none of the objects modified through *p is the same\n                     // as any of the objects read through *q\n                     // compiler free to optimize, vectorize, page map, etc.\n}\nvoid g(void)\n{\n    extern int d[100];\n    f(50, d + 50, d); // OK\n    f(50, d + 1, d); // Undefined behavior: d[1] is accessed through both p and q in f\n}\n</code></pre>\n\n<p>In that example,calling <code>f(50, d + 50, d);</code> is Ok. </p>\n\n<p>But, i don't understand, calling <code>f(50, d + 1, d)</code>; is undefined behaviour. Why?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1511372112, "post_id": 47440764, "comment_id": 81836500, "body": "do you know about the conversion specifiers?"}, {"owner": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1511373676, "post_id": 47440764, "comment_id": 81837293, "body": "As a matter of interest, which compiler (and C standard, if you know) are you using?  On my stock gcc 4.8.4, this does not happen."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7516093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58509f4b2c97ccfacda5b7c99d6c87db?s=128&d=identicon&r=PG&f=1", "display_name": "bootstrap", "link": "https://stackoverflow.com/users/7516093/bootstrap"}, "edited": false, "score": 0, "creation_date": 1511460904, "post_id": 47440847, "comment_id": 81877510, "body": "But, why it&#39;s printing 32566?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1511372271, "creation_date": 1511372271, "answer_id": 47440847, "question_id": 47440764, "link": "https://stackoverflow.com/questions/47440764/reading-integer-as-character-printing-it-as-integer/47440847#47440847", "title": "Reading integer as character &amp; printing it as integer", "body": "<p>In your code</p>\n\n<pre><code>   scanf(\"%c\", &amp;i);\n</code></pre>\n\n<p>causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. You are supplying an invalid type of argument to <code>%c</code> conversion specifier.</p>\n\n<p><code>%c</code> expects a pointer to a character type as corresponding argument, but you supply a pointer to an integer.</p>\n"}, {"comments": [{"owner": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1511373272, "post_id": 47440858, "comment_id": 81837067, "body": "I am indeed.  My apologies."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1511372927, "last_edit_date": 1511372927, "creation_date": 1511372316, "answer_id": 47440858, "question_id": 47440764, "link": "https://stackoverflow.com/questions/47440764/reading-integer-as-character-printing-it-as-integer/47440858#47440858", "title": "Reading integer as character &amp; printing it as integer", "body": "<p>Using the wrong format specifier invokes undefined behavior. Here you are doing the same thing. </p>\n\n<p>You should read it like this</p>\n\n<pre><code>scanf(\"%d\",&amp;i); // because you are reading an integer. \n</code></pre>\n\n<p>On your case you write </p>\n\n<pre><code>scanf(\"%c\", &amp;i); \n</code></pre>\n\n<p>You are passing an address of an int variable but here <code>%c</code> is supposed to get an address of a char variable. That discrepancy gives the undefined behavior.</p>\n\n<p>To give you a better idea - <code>scanf</code> expects a format speicifer and an address. from an address there is no way <code>scanf()</code> will understand what kind of data it needs to parse. But yes the format specifier tells that. So in this case on passing the wrong format specifier it messes up.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8992441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVRh8.jpg?s=128&g=1", "display_name": "Christian2017", "link": "https://stackoverflow.com/users/8992441/christian2017"}, "reply_to_user": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1511372999, "post_id": 47440952, "comment_id": 81836949, "body": "no, I have try the snippet. And I have init the variable &#39;i&#39;. Than it works."}, {"owner": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1511373353, "post_id": 47440952, "comment_id": 81837109, "body": "You are right, my apologies.  Interestingly, on my system I don&#39;t even have to initialize the variable for the snippet to work correctly."}], "tags": [], "owner": {"reputation": 11, "user_id": 8992441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVRh8.jpg?s=128&g=1", "display_name": "Christian2017", "link": "https://stackoverflow.com/users/8992441/christian2017"}, "is_accepted": false, "score": -2, "last_activity_date": 1511372715, "creation_date": 1511372715, "answer_id": 47440952, "question_id": 47440764, "link": "https://stackoverflow.com/questions/47440764/reading-integer-as-character-printing-it-as-integer/47440952#47440952", "title": "Reading integer as character &amp; printing it as integer", "body": "<p>Your program reads the ascii-code of letter 'A'. If you change the format symbol '%d' in '%c' than the output is 'A'. </p>\n\n<p>If you initialize the variable i with 0. Output is 65, if you enter 'A'</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8992441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVRh8.jpg?s=128&g=1", "display_name": "Christian2017", "link": "https://stackoverflow.com/users/8992441/christian2017"}, "is_accepted": false, "score": 1, "last_activity_date": 1511373251, "creation_date": 1511373251, "answer_id": 47441081, "question_id": 47440764, "link": "https://stackoverflow.com/questions/47440764/reading-integer-as-character-printing-it-as-integer/47441081#47441081", "title": "Reading integer as character &amp; printing it as integer", "body": "<p><a href=\"https://i.stack.imgur.com/8Dnij.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>You forgot initialze the variable 'i'. Than the program runs correctly</p>\n"}], "owner": {"reputation": 41, "user_id": 7516093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58509f4b2c97ccfacda5b7c99d6c87db?s=128&d=identicon&r=PG&f=1", "display_name": "bootstrap", "link": "https://stackoverflow.com/users/7516093/bootstrap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1511420442, "creation_date": 1511372014, "last_edit_date": 1511420442, "question_id": 47440764, "link": "https://stackoverflow.com/questions/47440764/reading-integer-as-character-printing-it-as-integer", "title": "Reading integer as character &amp; printing it as integer", "body": "<p>Output of this snippet is <strong>32566</strong> for the input <strong>65</strong>.\nplease explain the concept behind it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n  char ch;\n  int i;\n  scanf(\"%c\", &amp;i);\n  printf(\"%d\",i);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511382262, "post_id": 47440492, "comment_id": 81841648, "body": "You really should test the resulting item count of <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 8081675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dXuTKxOVtY/AAAAAAAAAAI/AAAAAAAAAGQ/THtjmsK5fsU/photo.jpg?sz=128", "display_name": "David Narum", "link": "https://stackoverflow.com/users/8081675/david-narum"}, "is_accepted": false, "score": 1, "last_activity_date": 1511382131, "last_edit_date": 1511382131, "creation_date": 1511371542, "answer_id": 47440648, "question_id": 47440492, "link": "https://stackoverflow.com/questions/47440492/why-doesnt-scanf-read-the-buffered-input-for-int/47440648#47440648", "title": "Why doesnt scanf read the buffered input for int?", "body": "<p><code>scanf(\"%c\",&amp;c)</code> reads a <em>character</em> (and could fail; read carefully about <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a>)</p>\n\n<p><code>scanf(\"%d\",&amp;i)</code> reads an <em>integer</em> (and could fail)</p>\n\n<p>What is a character? Well, 'a' is a character, but so is whitespace characters such as newline.\nWhen you enter a and press enter into the terminal input, you are sending both an a and a newline to the buffered input. The first scanf will read the a, and the second scanf will read the newline.</p>\n\n<p>When you do <code>scanf(\"%c\",&amp;c); scanf(\"%d\",&amp;i);</code> on the other hand, the first scanf will read the 'a' character. The second scanf will look for an integer, but since only whitespace (a newline) is available in the buffer it will skip over the whitespace and wait for something that it can parse as a number becomes available.</p>\n"}], "owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539790316, "creation_date": 1511370992, "last_edit_date": 1539790316, "question_id": 47440492, "link": "https://stackoverflow.com/questions/47440492/why-doesnt-scanf-read-the-buffered-input-for-int", "title": "Why doesnt scanf read the buffered input for int?", "body": "<p>Case I</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\n\n    char c;\n    int i;\n    scanf(\"%c\",&amp;c);\n\n    scanf(\"%d\",&amp;i);\n    printf(\"%d\",i);\n}\n\nInput:a\n      23\n\nOutput:23\n</code></pre>\n\n<p>Case II</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\n    char c;\n    int i;\n    scanf(\"%c\",&amp;c);\n    printf(\"%c\",c);\n\n    scanf(\"%c\",&amp;c);\n    printf(\"%c\",c);\n}\n\nInput:a\nOutPut:a\n</code></pre>\n\n<p>Why in case II only one input is required while in case I two inputs are required? </p>\n\n<p><strong>If in case II its reading the buffered characters why is n't the same thing happening in Case I?</strong></p>\n"}, {"tags": ["c", "sockets", "server", "chunked-encoding", "http-chunked"], "comments": [{"owner": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1511370549, "post_id": 47440303, "comment_id": 81835571, "body": "I checked path to file in other function and don&#39;t allow to read from other directories."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511371565, "post_id": 47440303, "comment_id": 81836202, "body": "Why are you using <code>unsigned</code> for something that clearly ought to be <code>size_t</code>?!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511371643, "post_id": 47440303, "comment_id": 81836238, "body": "also you can use <code>zd</code> for <code>ssize_t</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511372073, "post_id": 47440303, "comment_id": 81836481, "body": "<code>%x</code> format conversion requires an <code>unsigned int</code>, not a signed <code>int</code>. That&#39;s probably not your problem, but you should fix it. Also, you send the same (initial) chunk of <code>buf</code> on every iteration."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511372293, "post_id": 47440303, "comment_id": 81836591, "body": "... you should probably take a look at what your server is actually sending. You could use a tool like <code>curl</code> or even <code>netcat</code>."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1511373923, "post_id": 47440303, "comment_id": 81837423, "body": "<code>write</code> is not guaranteed to write all data. It might write less for example if the socket buffer is full. You need to check the return value of <code>write</code>."}], "owner": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511370341, "creation_date": 1511370341, "question_id": 47440303, "link": "https://stackoverflow.com/questions/47440303/err-invalid-chunked-encoding-for-chunked-transfer-encoding-for-http-server", "title": "ERR_INVALID_CHUNKED_ENCODING for chunked transfer encoding for HTTP server", "body": "<p>My task is to implement simple HTTP server with chunked transfer encoding.\nHere is function that read request and send response to the client.</p>\n\n<pre><code> static int serve_request(int sock, struct conf_arg *arg, char version[])\n    {\n        int html;\n        char buf[MAX_MSG];\n        const unsigned chunk = (unsigned)CHUNK_SIZE;\n        char tempbuf[CHUNK_SIZE + 3];\n        ssize_t size;\n        ssize_t bytes_read;\n\n        strcpy(buf, arg-&gt;root);\n        if(buf[strlen(buf) - 1] == '/')\n            strcat(buf, arg-&gt;defdoc);\n        html = open(buf, O_RDONLY);\n        if (html == -1) {\n            perror(\"Error in opening file\");\n            not_found(sock, version);\n            return -1;\n        }\n        good_responce(sock, version); \n        size = lseek(html, 0, SEEK_END);\n        lseek(html, 0, SEEK_SET);\n        printf(\"SIZE:%d\\n\", (int)size);\n        bytes_read = read(html, buf, size);\n        while (bytes_read &gt; chunk) {\n            sprintf(tempbuf, \"%x\\r\\n\", (int)chunk);\n            write(sock, tempbuf, strlen(tempbuf));\n            write(sock, buf, chunk);\n            write(sock, \"\\r\\n\", 2);\n            bytes_read -= chunk;\n        }\n        sprintf(tempbuf, \"%x\\r\\n\", (int)bytes_read);\n        printf(\"LAST PART:%d\\n\", (int)bytes_read);\n        write(sock, tempbuf, strlen(tempbuf));\n        write(sock, buf, bytes_read);\n        write(sock, \"\\r\\n\", 2);\n        strcpy(tempbuf, \"0\\r\\n\\r\\n\");\n        write(sock, tempbuf, strlen(tempbuf));\n        close(html);\n\n        return 0;\n    }\n</code></pre>\n\n<p>When I try to open simple site with my server I get error: ERR_INVALID_CHUNKED_ENCODING. So I hope you can help me to find the problem.</p>\n"}, {"tags": ["c", "compiler-errors", "fortran", "c-preprocessor", "lapacke"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1511970689, "post_id": 47439914, "comment_id": 82070821, "body": "I&#39;d suggest a <a href=\"https://stackoverflow.com/questions/tagged/c-preprocessor\">c-preprocessor</a> tag instead one of the less relevant tags (<a href=\"https://stackoverflow.com/questions/tagged/compiler-errors\">compiler-errors</a> or <a href=\"https://stackoverflow.com/questions/tagged/bare-metal\">bare-metal</a>). Do you know which if branch is taken by the pre-processor in your case? Which of the tested macros branches is or is not defined?"}, {"owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1511977767, "post_id": 47439914, "comment_id": 82075231, "body": "I added the suggested tag, and to answer, no, I don&#39;t know for sure, I will see if I can figure this out."}], "answers": [{"tags": [], "owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "is_accepted": true, "score": 0, "last_activity_date": 1512131458, "creation_date": 1512131458, "answer_id": 47593459, "question_id": 47439914, "link": "https://stackoverflow.com/questions/47439914/c-embedded-error-xxxx-declared-as-function-returning-a-function/47593459#47593459", "title": "C embedded error: \u2018XXXX\u2019 declared as function returning a function", "body": "<p>Actually the problem was that the preprocessor header file was not actually used with the cmake build system, instead a different header was supposed to be generated by cmake. Cmake did not generate the file corectly (probably because of cross-compilation). The patch below modifies the lapacke CMakeLists to add an option to force the use of this header file.</p>\n\n<pre><code>--- CMakeLists.txt  2017-11-30 12:07:46.007080017 +0000\n+++ newCMakeLists.txt   2017-11-30 12:06:54.491078643 +0000\n@@ -3,11 +3,18 @@\n\n set(LAPACK_INSTALL_EXPORT_NAME lapacke-targets)\n\n+option(FORCE_LAPACKE_MANGLING_WITH_FLAGS \"Force the use of the lapack_mangling_with_flags.h header rather than automatic detection\" OFF)\n+\n # Create a header file netlib.h for the routines called in my C programs\n-include(FortranCInterface)\n-FortranCInterface_HEADER( ${CMAKE_CURRENT_SOURCE_DIR}/include/lapacke_mangling.h\n-                          MACRO_NAMESPACE \"LAPACK_\"\n-                          SYMBOL_NAMESPACE \"LAPACK_\" )\n+if (FORCE_LAPACKE_MANGLING_WITH_FLAGS)\n+    # copy the lapacke_mangling_with_flags.h to lapacke_mangling.h\n+    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/include/lapacke_mangling_with_flags.h ${CMAKE_CURRENT_SOURCE_DIR}/include/lapacke_mangling.h)\n+else (FORCE_LAPACKE_MANGLING_WITH_FLAGS)\n+    include(FortranCInterface)\n+    FortranCInterface_HEADER( ${CMAKE_CURRENT_SOURCE_DIR}/include/lapacke_mangling.h\n+                              MACRO_NAMESPACE \"LAPACK_\"\n+                              SYMBOL_NAMESPACE \"LAPACK_\" )\n+endif (FORCE_LAPACKE_MANGLING_WITH_FLAGS)\n\n # Old way to detect mangling\n #include(FortranMangling)\n</code></pre>\n\n<p>With this, my definitions were picked up and the appropriate mangling applied.</p>\n"}], "owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 47593459, "answer_count": 1, "score": 0, "last_activity_date": 1512131458, "creation_date": 1511369097, "last_edit_date": 1511977644, "question_id": 47439914, "link": "https://stackoverflow.com/questions/47439914/c-embedded-error-xxxx-declared-as-function-returning-a-function", "title": "C embedded error: \u2018XXXX\u2019 declared as function returning a function", "body": "<p>I'm attempting to cross-compile the LAPACK library (fortran) and the C API, LAPACKE for bare-metal embedded targets powerpc-eabi target, using the gcc cross compilers for this target. Compiling proceeds but eventually hits this error:</p>\n\n<pre><code>[ 44%] Building C object LAPACKE/CMakeFiles/lapacke.dir/src/lapacke_cbbcsd.c.obj\ncd /home/rcrozier/build/powerpc-eabi/lapack/LAPACKE &amp;&amp; /usr/local/powerpc-eabi/bin/powerpc-eabi-gcc  -DADD_ -mcpu=750 -I/home/rcrozier/src/fast-v8-hg/cross-dependancies/lapack-3.6.0/LAPACKE/include    -o CMakeFiles/lapacke.dir/src/lapacke_cbbcsd.c.obj   -c /home/rcrozier/src/fast-v8-hg/cross-dependancies/lapack-3.6.0/LAPACKE/src/lapacke_cbbcsd.c\nIn file included from /home/rcrozier/src/fast-v8-hg/cross-dependancies/lapack-3.6.0/LAPACKE/include/lapacke_utils.h:37:0,\n                 from /home/rcrozier/src/fast-v8-hg/cross-dependancies/lapack-3.6.0/LAPACKE/src/lapacke_cbbcsd.c:34:\n/home/rcrozier/src/fast-v8-hg/cross-dependancies/lapack-3.6.0/LAPACKE/include/lapacke.h:145:22: error: \u2018LAPACK_GLOBAL\u2019 declared as function returning a function\n #define LAPACK_lsame LAPACK_GLOBAL(lsame,LSAME)\n                      ^\n</code></pre>\n\n<p>This error occurs when building the C interface to LAPACK, LAPACKE.</p>\n\n<p>A <a href=\"http://icl.cs.utk.edu/lapack-forum/viewtopic.php?f=2&amp;t=4564\" rel=\"nofollow noreferrer\">post on the LAPACK forums</a> suggests this is a problem with Fortran name mangling, and to add the <code>-DADD_</code> processor flag. Above I have attempted this, but it makes no difference.</p>\n\n<p>The preprocessor define is used in a header file, copied below:</p>\n\n<pre><code>#ifndef LAPACK_HEADER_INCLUDED\n#define LAPACK_HEADER_INCLUDED\n\n#ifndef LAPACK_GLOBAL\n#if defined(LAPACK_GLOBAL_PATTERN_LC) || defined(ADD_)\n#define LAPACK_GLOBAL(lcname,UCNAME)  lcname##_\n#elif defined(LAPACK_GLOBAL_PATTERN_UC) || defined(UPPER)\n#define LAPACK_GLOBAL(lcname,UCNAME)  UCNAME\n#elif defined(LAPACK_GLOBAL_PATTERN_MC) || defined(NOCHANGE)\n#define LAPACK_GLOBAL(lcname,UCNAME)  lcname\n#else\n#define LAPACK_GLOBAL(lcname,UCNAME)  lcname##_\n#endif\n#endif\n\n#endif\n</code></pre>\n\n<p>The error occurs in another header file which uses <code>LAPACK_GLOBAL</code> like so:</p>\n\n<pre><code>#include \"lapacke_mangling.h\"\n\n#define LAPACK_lsame LAPACK_GLOBAL(lsame,LSAME)\nlapack_logical LAPACK_lsame( char* ca,  char* cb,\n                              lapack_int lca, lapack_int lcb );\n</code></pre>\n\n<p>The <code>lapacke_mangling.h</code> file contents is shown below:</p>\n\n<pre><code>#ifndef LAPACK_HEADER_INCLUDED\n#define LAPACK_HEADER_INCLUDED\n\n#endif\n</code></pre>\n\n<p>The error does not occur when building natively, or when building for another linux target, <code>powerpc-linux-gnu</code>.</p>\n\n<p>Can anyone explain the problem?</p>\n"}, {"tags": ["c", "linux", "shell", "command", "proc"], "comments": [{"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1511369117, "post_id": 47439782, "comment_id": 81834591, "body": "Try to read into the /proc folder. There you may found some files of path /{pid}/stat containing intersting things (where pid is the process pid - a number)"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1511369240, "post_id": 47439782, "comment_id": 81834681, "body": "You mean restrict the search to only directories whose name is all numeric? Just scan it for a character which isn&#39;t a number."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1511369320, "post_id": 47439782, "comment_id": 81834751, "body": "Yes, into the folder /proc there&#39;re some folder named with numbers. They&#39;re the PIDs of the processes in execution. In each {pid} folder there&#39;s a text file named stat."}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1511369411, "post_id": 47439782, "comment_id": 81834819, "body": "@tripleee wchich command is good for that?"}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "reply_to_user": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1511369453, "post_id": 47439782, "comment_id": 81834846, "body": "@SergioFormiggini how to add variable to path?"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1511369603, "post_id": 47439782, "comment_id": 81834937, "body": "You have to scan the directory /proc, inside /proc to scan the directories having numeric values and then you have to read the file stat."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1511369669, "post_id": 47439782, "comment_id": 81834987, "body": "If you executes a line (in example) like: <code>cat &#47;proc&#47;{pid}&#47;stat</code> you&#39;ll see the contents of the file stat. This file contains the info you are looking for."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1511369949, "post_id": 47439782, "comment_id": 81835178, "body": "Why do you need to add a variable to the path? Which SO are you working on?"}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "edited": false, "score": 0, "creation_date": 1511370617, "post_id": 47439782, "comment_id": 81835618, "body": "Linux Ubuntu, because i want read file comm(there is  name of procces i need)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1511370624, "post_id": 47439782, "comment_id": 81835620, "body": "@Bombozaur666 Use <a href=\"http://www.cplusplus.com/reference/cstring/strspn/\" rel=\"nofollow noreferrer\"><code>strspn()</code></a>. Use this to search for the span of numeric characters in the name. If it&#39;s all numeric, this will be the same as the length."}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "edited": false, "score": 0, "creation_date": 1511370674, "post_id": 47439782, "comment_id": 81835656, "body": "i don;t know how to read if i dont give /path/ {pid} / comm"}], "answers": [{"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": true, "score": 0, "last_activity_date": 1511542338, "last_edit_date": 1511542338, "creation_date": 1511541321, "answer_id": 47477154, "question_id": 47439782, "link": "https://stackoverflow.com/questions/47439782/how-to-show-proccess-like-in-ps-e/47477154#47477154", "title": "how to show proccess like in ps -e", "body": "<p>This is an hint ... Try to develop your code starting from this! :)</p>\n\n<pre><code>#include &lt;dirent.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint readData(char *dirname);\n\nint readData(char *dirname)\n{\n    FILE * file;\n    char buffer[1024]={0};\n\n    sprintf(buffer,\"/proc/%s/stat\",dirname);\n\n    file = fopen(buffer,\"r\");\n    if (!file)\n        return errno;\n\n    while(fgets(buffer,sizeof(buffer),file))\n        puts(buffer);\n\n    if (file)\n        fclose(file);\n\n    return errno;\n}\n\nint main(void)\n{\n    DIR * dir;\n\n    struct dirent * entry;\n\n    if ( (dir = opendir(\"/proc\")) == NULL )\n        perror(\"operation error\");\n\n    while ((entry = readdir(dir))) {\n        if ( strlen(entry-&gt;d_name) == strspn(entry-&gt;d_name, \"0123456789\"))\n            if (readData(entry-&gt;d_name))\n                break;\n    }\n\n    if (dir)\n        closedir(dir);\n\n    return errno;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 47477154, "answer_count": 1, "score": -2, "last_activity_date": 1511542338, "creation_date": 1511368691, "question_id": 47439782, "link": "https://stackoverflow.com/questions/47439782/how-to-show-proccess-like-in-ps-e", "title": "how to show proccess like in ps -e", "body": "<p>Hello!</p>\n\n<p>I wanto to make simple c proggram what will work like ps -e. The only colums that should be shown are PID and CMD. Thats my code:</p>\n\n<pre><code>#include &lt;dirent.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;regex.h&gt;\nint main()\n{\nDIR *dir;\nstruct dirent *entry;\nif ((dir = opendir(\"/proc\")) == NULL)\nperror(\"operation error\");\nelse \n{\nprintf(\"PID      CMD\\n\");\nwhile ((entry = readdir(dir)) != NULL)\nprintf(\"  %s\\n\", entry-&gt;d_name);\nclosedir(dir);\n}\nreturn 0; \n}\n</code></pre>\n\n<p>My questins are:</p>\n\n<p>1) How i can show only folders with numbers(i don't know how to implement regcomp())?</p>\n\n<p>2)How to near PID write CMD (I can't glue(?) strings with path if is folder with number)? </p>\n"}, {"tags": ["c", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1511368386, "post_id": 47439641, "comment_id": 81834111, "body": "Not portably, no. All those standard library and user-defined functions you see passing a <code>size_t</code> length, in addition to a memory address in a pointer, are doing so for a reason. One of <i>many</i> related questions to this <a href=\"https://stackoverflow.com/questions/9390615/how-to-calculate-size-of-array-from-pointer-variable\">can be seen <b>here</b></a>."}], "answers": [{"tags": [], "owner": {"reputation": 2463, "user_id": 596273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecfd95ed7c25b54d6ca64d500cfb73e6?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/596273/seth"}, "is_accepted": false, "score": 1, "last_activity_date": 1511368346, "creation_date": 1511368346, "answer_id": 47439685, "question_id": 47439641, "link": "https://stackoverflow.com/questions/47439641/number-of-bytes-in-void-pointer/47439685#47439685", "title": "Number of bytes in void pointer", "body": "<p>No.  Without knowing what <code>param</code> is pointing to, you can't know what size it is.</p>\n"}, {"comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 400, "user_id": 8090636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSfcH.jpg?s=128&g=1", "display_name": "Hollyol", "link": "https://stackoverflow.com/users/8090636/hollyol"}, "edited": false, "score": 0, "creation_date": 1511369190, "post_id": 47439691, "comment_id": 81834645, "body": "@Hollyol you can&#39;t dereference a <code>void*</code>. Given your OP, what type is <code>param</code>? We don&#39;t know, the compiler doesn&#39;t know either. You have to cast it to its appropriate type before you can dereference it."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1511369897, "post_id": 47439691, "comment_id": 81835145, "body": "&quot; Especially when it comes to void pointers, it can be a bit ambiguous&quot; I&#39;d argue the opposite. There&#39;s no reasonable unit of measure for the size of the object pointed to by a <code>void*</code> except bytes."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1511370393, "post_id": 47439691, "comment_id": 81835482, "body": "@JeremyP True, I removed that."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 4, "last_activity_date": 1513277179, "last_edit_date": 1513277179, "creation_date": 1511368366, "answer_id": 47439691, "question_id": 47439641, "link": "https://stackoverflow.com/questions/47439641/number-of-bytes-in-void-pointer/47439691#47439691", "title": "Number of bytes in void pointer", "body": "<p>No, it is not possible. That's why almost all functions that takes pointers as arguments has an extra argument for size. It should be like this:</p>\n\n<pre><code>void func(void *param, int size);\n</code></pre>\n\n<p>Also note that it is up to the function to interpret the <code>size</code> argument. It can be number of bytes, number of elements or whatever. </p>\n\n<p>The important thing here to remember is the only thing <code>param</code> is, is a memory address. Nothing more, nothing less.</p>\n\n<p>Some functions doesn't utilize this. One example is <code>strcpy(char * dest, char * src)</code> that copies a string, but this function assumes two things. It assumes that <code>src</code> is a zero-terminated string. <code>strcpy</code> will read from <code>src</code> until it hits a <code>'\\0'</code> character. Furthermore, it assumes that <code>dest</code> points at a memory location big enough to hold the string.</p>\n\n<p><code>sizeof(*param)</code> will not work. <code>param</code> is only a pointer to where the memory chunk starts. It would be the same as using <code>sizeof(void)</code></p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1511369734, "creation_date": 1511369734, "answer_id": 47440112, "question_id": 47439641, "link": "https://stackoverflow.com/questions/47439641/number-of-bytes-in-void-pointer/47440112#47440112", "title": "Number of bytes in void pointer", "body": "<p>For starters the type <code>void</code> is an incomplete type that is its size in bytes is indeterminate.</p>\n\n<p>From the C Standard (6.2.5 Types)</p>\n\n<blockquote>\n  <p>19 The void type comprises an empty set of values; it is an incomplete\n  object type that cannot be completed.</p>\n</blockquote>\n\n<p>However if you have a pointer of some other type as an argument of a function as for example</p>\n\n<pre><code>T *param\n</code></pre>\n\n<p>then in general case you again will be unable to determine the number of bytes occupied by the referenced actual data.</p>\n\n<p>Pointers do not keep information whether they point to a single object or the first object of an array.</p>\n\n<p>For example if you have a function declared like this</p>\n\n<pre><code>void f( const char *s );\n</code></pre>\n\n<p>then it can be called for example for these objects of different types</p>\n\n<pre><code>char c = 'A';\nf( &amp;c );\n</code></pre>\n\n<p>and </p>\n\n<pre><code>char s[] = \"Hello\";\nf( s );\n</code></pre>\n\n<p>Of course you can get the number of bytes occupied by the element of an array or a single object referenced to by pointer as for example using expression</p>\n\n<pre><code>sizeof( *param )\n</code></pre>\n\n<p>But in case of the type <code>void *</code> you may not do even this though some compilers have their own language extensions that allow to apply the operator <code>sizeof</code> for the type void. In this case the returned value of the expression is usually equal to 1. </p>\n"}], "owner": {"reputation": 19, "user_id": 4689927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4e307163cc96e3c0a592b927d27ba00?s=128&d=identicon&r=PG&f=1", "display_name": "Naor Yehuda", "link": "https://stackoverflow.com/users/4689927/naor-yehuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1295, "favorite_count": 0, "closed_date": 1511373259, "answer_count": 3, "score": 1, "last_activity_date": 1513277179, "creation_date": 1511368223, "last_edit_date": 1511376214, "question_id": 47439641, "link": "https://stackoverflow.com/questions/47439641/number-of-bytes-in-void-pointer", "closed_reason": "Duplicate", "title": "Number of bytes in void pointer", "body": "<p>Let's say I have a C function:  </p>\n\n<pre><code>Func(void* param);\n</code></pre>\n\n<p>Is there a way to know number of bytes of param content?</p>\n"}, {"tags": ["c", "csv"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511368060, "post_id": 47439534, "comment_id": 81833898, "body": "You cannot return a pointer to a local variable."}, {"owner": {"reputation": 159, "user_id": 8404745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ccfc6ed4b44ad330b4a5279492e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Min", "link": "https://stackoverflow.com/users/8404745/min"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511368224, "post_id": 47439534, "comment_id": 81834009, "body": "@AnttiHaapala hmm how should I correct it.. Make the variable not local?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511368301, "post_id": 47439534, "comment_id": 81834064, "body": "You can use an array from the caller, or you can allocate it using <code>malloc</code>"}, {"owner": {"reputation": 159, "user_id": 8404745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ccfc6ed4b44ad330b4a5279492e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Min", "link": "https://stackoverflow.com/users/8404745/min"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511368374, "post_id": 47439534, "comment_id": 81834100, "body": "@AnttiHaapala ahh just saw you directed me to another answer. thanks a lot!"}], "owner": {"reputation": 159, "user_id": 8404745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ccfc6ed4b44ad330b4a5279492e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Min", "link": "https://stackoverflow.com/users/8404745/min"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1511368140, "answer_count": 0, "score": 0, "last_activity_date": 1511368465, "creation_date": 1511367890, "question_id": 47439534, "link": "https://stackoverflow.com/questions/47439534/converting-struct-in-main-into-function-version", "closed_reason": "Duplicate", "title": "Converting struct in main() into function version", "body": "<p>I'm new to C programming. I just figured out how to read csv files into C by struct, but struggling to convert the script into a function, then call this function in int main(). I'll need to read loads of csv files so a function will be very helpful.</p>\n\n<p>Here is my code which runs successfully (non-function version):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n#define MAXROWS 2\n\nstruct cudaScenarioStruct{\n    char *type;\n    int trial;\n    int yPC;\n    int yPE;\n    int n;\n};\n\nstruct cudaScenarioStruct cudaScenario[MAXROWS];\n\n\nint main(){\nint rowIndex = 0;\nchar line[128];\nchar* token = NULL;\nFILE* fp = fopen(\"C:/Users/ms710557/Desktop/cudaScenario1(2).csv\",\"r\");\nif (fp != NULL){\n    while (fgets( line, sizeof(line), fp) != NULL &amp;&amp; rowIndex &lt; MAXROWS){\n\n        cudaScenario[rowIndex].type = malloc(2);\n        token = strtok(line, \",\");\n        strcpy(cudaScenario[rowIndex].type, token);\n\n        token = strtok(NULL, \",\");\n        cudaScenario[rowIndex].trial = atoi(token);\n\n        token = strtok(NULL, \",\");\n        cudaScenario[rowIndex].yPC = atoi(token);\n\n        token = strtok(NULL, \",\");\n        cudaScenario[rowIndex].yPE = atoi(token);\n\n        token = strtok(NULL, \",\");\n        cudaScenario[rowIndex].n = atoi(token);\n\n        rowIndex++;\n    }\n    fclose(fp);\n}\n\nfor (int i = 0; i &lt; MAXROWS; ++i){\n    printf(\"%s, %i, %i, %i, %i \\n\", cudaScenario[i].type, cudaScenario[i].trial, cudaScenario[i].yPC, cudaScenario[i].yPE, cudaScenario[i].n);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>The results look like this:</p>\n\n<pre><code>NI, 1, 61, 55, 80 \nNI, 2, 54, 59, 80 \n</code></pre>\n\n<p>However when I convert it into a function and include the function in int main(), it's just not working... I've been googling for hours and couldn't find out why. This is my attempt:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXROWS 2\n\nstruct cudaScenarioStruct{\n    char *type;\n    int trial;\n    int yPC;\n    int yPE;\n    int n;\n};\n\n\nstruct cudaScenarioStruct *readCudaScenarioData(){\n    struct cudaScenarioStruct csvData[MAXROWS];\n\n    int rowIndex = 0;\n    char line[128];\n    char* token = NULL;\n    FILE* fp = fopen(\"C:/Users/ms710557/Desktop/cudaScenario1(2).csv\",\"r\");\n    if (fp != NULL){\n        while (fgets( line, sizeof(line), fp) != NULL &amp;&amp; rowIndex &lt; MAXROWS){\n\n            csvData[rowIndex].type = malloc(2);\n            token = strtok(line, \",\");\n            strcpy(csvData[rowIndex].type, token);\n\n            token = strtok(NULL, \",\");\n            csvData[rowIndex].trial = atoi(token);\n\n            token = strtok(NULL, \",\");\n            csvData[rowIndex].yPC = atoi(token);\n\n            token = strtok(NULL, \",\");\n            csvData[rowIndex].yPE = atoi(token);\n\n            token = strtok(NULL, \",\");\n            csvData[rowIndex].n = atoi(token);\n            rowIndex++;\n        }\n        fclose(fp);\n    }\n\n    return csvData;\n}\n\n\n\n\nint main()\n{\n\n    struct cudaScenarioStruct *cudaScenario;\n    cudaScenario = readCudaScenarioData();\n\n    for (int i = 0; i &lt; MAXROWS; ++i){\n        printf(\"%s, %i, %i, %i, %i \\n\", cudaScenario[i].type, \ncudaScenario[i].trial, cudaScenario[i].yPC, cudaScenario[i].yPE, \ncudaScenario[i].n);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Any help will be highly appreciated!</p>\n"}, {"tags": ["c", "arm", "stm32", "dma"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1511367878, "post_id": 47439458, "comment_id": 81833758, "body": "You can place a print (or dump to a local array) inside the hard-fault interrupt. What you need to print (or dump) is the CPU registers, in particularly, those that will give you a better indication of what the problem is. My guess - the bus between the CPU and the DMA controller allows only 32-bit access operations."}, {"owner": {"reputation": 394, "user_id": 4179130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ChCmGcSyIbE/AAAAAAAAAAI/AAAAAAAAFOg/Ce-4JcP2VSk/photo.jpg?sz=128", "display_name": "jedzej", "link": "https://stackoverflow.com/users/4179130/jedzej"}, "reply_to_user": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1511368871, "post_id": 47439458, "comment_id": 81834461, "body": "Thanks, for suggestion. I&#39;ve already checked that - Bus Fault Status Register points to precise bus fault at 0x40026401 which is an unaligned address 1 byte after DMA region begins. It looks like it&#39;s impossible to read it in unaligned manner and I&#39;m trying to understand why, since all other peripherals accept this approach."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1511369890, "post_id": 47439458, "comment_id": 81835142, "body": "OK, I posted that as an answer, and now added some info from the data sheet, specifically on DMA, that might shed some more light on this."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1511388460, "post_id": 47439458, "comment_id": 81844476, "body": "Because it is not memory. It only is seen be the core as the address. You have to  read or write those registers as words (with some exceptions)."}], "answers": [{"comments": [{"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1511370171, "post_id": 47440073, "comment_id": 81835325, "body": "The way I read the quote from the manual, the accesses <i>by the DMA</i> are not affected by the MPU. I think that paragraph is unrelated to the OPs problem, as he is reading the DMA control registers from the CPU."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1511370337, "post_id": 47440073, "comment_id": 81835440, "body": "@PaulR: For the first part of the quote - yes. But the second part of the quote specifically refers to <code>SW access to the DMA registers</code> (if I may quote the quote)."}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 1, "creation_date": 1511370954, "post_id": 47440073, "comment_id": 81835834, "body": "The <a href=\"http://www.st.com/content/ccc/resource/technical/document/reference_manual/3d/6d/5a/66/b4/99/40/d4/DM00031020.pdf/files/DM00031020.pdf/jcr:content/translations/en.DM00031020.pdf\" rel=\"nofollow noreferrer\">reference manual</a> confirms your initial guess: &quot;The AHB slave port is used to program the DMA controller (it supports only 32-bit  accesses)&quot;"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1511371734, "post_id": 47440073, "comment_id": 81836289, "body": "@PaulR: Nice! I opened two of them and searched for DMA in general, but didn&#39;t bump into this one."}, {"owner": {"reputation": 394, "user_id": 4179130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ChCmGcSyIbE/AAAAAAAAAAI/AAAAAAAAFOg/Ce-4JcP2VSk/photo.jpg?sz=128", "display_name": "jedzej", "link": "https://stackoverflow.com/users/4179130/jedzej"}, "edited": false, "score": 0, "creation_date": 1511425497, "post_id": 47440073, "comment_id": 81856126, "body": "Thank you both, I&#39;ve extended @goodvibration answer by latest docs findings and marked as resolved."}], "tags": [], "owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "is_accepted": true, "score": 1, "last_activity_date": 1511390786, "last_edit_date": 1511390786, "creation_date": 1511369588, "answer_id": 47440073, "question_id": 47439458, "link": "https://stackoverflow.com/questions/47439458/hardfault-when-attempting-to-read-unaligned-dma-register-address-on-stm32f4/47440073#47440073", "title": "Hardfault when attempting to read unaligned DMA register address on STM32F4", "body": "<p>My guess would be that the bus between the CPU and the DMA controller allows only 32-bit access operations.</p>\n\n<p>You can print (or dump to memory) from inside the hard-fault interrupt.</p>\n\n<p>What you need to print (or dump) is the CPU registers, in particularly, those that may give you a better indication of what the problem is.</p>\n\n<p>For example:</p>\n\n<pre><code>void HardFault_Handler(unsigned int* hardfault_args)\n{\n    printf(\"R0    = 0x%.8X\\r\\n\",hardfault_args[0]);         \n    printf(\"R1    = 0x%.8X\\r\\n\",hardfault_args[1]);         \n    printf(\"R2    = 0x%.8X\\r\\n\",hardfault_args[2]);         \n    printf(\"R3    = 0x%.8X\\r\\n\",hardfault_args[3]);         \n    printf(\"R12   = 0x%.8X\\r\\n\",hardfault_args[4]);         \n    printf(\"LR    = 0x%.8X\\r\\n\",hardfault_args[5]);         \n    printf(\"PC    = 0x%.8X\\r\\n\",hardfault_args[6]);         \n    printf(\"PSR   = 0x%.8X\\r\\n\",hardfault_args[7]);         \n    printf(\"BFAR  = 0x%.8X\\r\\n\",*(unsigned int*)0xE000ED38);\n    printf(\"CFSR  = 0x%.8X\\r\\n\",*(unsigned int*)0xE000ED28);\n    printf(\"HFSR  = 0x%.8X\\r\\n\",*(unsigned int*)0xE000ED2C);\n    printf(\"DFSR  = 0x%.8X\\r\\n\",*(unsigned int*)0xE000ED30);\n    printf(\"AFSR  = 0x%.8X\\r\\n\",*(unsigned int*)0xE000ED3C);\n    printf(\"SHCSR = 0x%.8X\\r\\n\",SCB-&gt;SHCSR);                \n    while (1);\n}\n</code></pre>\n\n<p>Or you can simply stop inside the hard-fault interrupt, and view those registers in your IDE...</p>\n\n<p>From the STM32F4 data sheet:</p>\n\n<pre><code>The MPU attributes don't affect DMA data accesses to the memory/peripherals address\nspaces. therefore, in order to protect the memory areas against inadvertent DMA accesses,\nthe MPU must control the SW/CPU access to the DMA registers.\n</code></pre>\n\n<p>So it looks like there are some restrictions specifically with regards to accessing DMA registers.</p>\n\n<hr>\n\n<p><strong>answer extended by OP according to PaulR's comment:</strong></p>\n\n<p>Documentation digging confirms that reason is a limitation of DMA AHB slave programming interface.</p>\n\n<p>In DM00031020 chapter <strong>10.2 DMA main features</strong> it's clearly written \"AHB slave programming interface supporting only 32-bit accesses\". As a contrary, e.g. DMA2D supports 8-bit,16-bit and 32-bit access, thus can be accessed byte-by-byte and doesn't cause bus fault.</p>\n"}], "owner": {"reputation": 394, "user_id": 4179130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ChCmGcSyIbE/AAAAAAAAAAI/AAAAAAAAFOg/Ce-4JcP2VSk/photo.jpg?sz=128", "display_name": "jedzej", "link": "https://stackoverflow.com/users/4179130/jedzej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1286, "favorite_count": 0, "accepted_answer_id": 47440073, "answer_count": 1, "score": 0, "last_activity_date": 1511390786, "creation_date": 1511367669, "question_id": 47439458, "link": "https://stackoverflow.com/questions/47439458/hardfault-when-attempting-to-read-unaligned-dma-register-address-on-stm32f4", "title": "Hardfault when attempting to read unaligned DMA register address on STM32F4", "body": "<p>I'm implementing peripherals dump on STM32F4. I'm reading most peripherals registers byte-by-byte and flush it over UART interface. It works well for almost every peripheral.</p>\n\n<p>When I'm trying to read the DMA1 (0x40026000...) or DMA2 (0x40026400...) registers <strong>byte-by-byte</strong> it fails with precise bus error at 0x40026401.</p>\n\n<p>When I'm trying to read it aligned to 4-byte words, it works fine.</p>\n\n<p>My question is: why it fails on DMA whilst all the other peripherals like SCB, RCC, SPI, UART, TIM and others allow me to do it? Is there any specific reason for this?</p>\n"}, {"tags": ["c", "algorithm", "matrix", "concatenation"], "comments": [{"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 2, "creation_date": 1511367616, "post_id": 47439416, "comment_id": 81833577, "body": "Please format your code!"}, {"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 1, "creation_date": 1511367640, "post_id": 47439416, "comment_id": 81833595, "body": "Add example Input and output and the output of your implementation."}, {"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 0, "creation_date": 1511367663, "post_id": 47439416, "comment_id": 81833616, "body": "What is the concrete problem?"}, {"owner": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1511368288, "post_id": 47439416, "comment_id": 81834052, "body": "While formatting your code, I note there are two <code>else</code> statements in the second section of code, that do not have curly braces, meaning only the first statement would be executed as part of the else.  Would that change your output?"}, {"owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "edited": false, "score": 0, "creation_date": 1511369009, "post_id": 47439416, "comment_id": 81834542, "body": "as you can see in the outputs image uploaded the required matrix is not what i need i tried two different arrangments but in both the result is not what i need. yah but else statement is related to the part where the rows have to be zero but the problem which i am facing is in the part where the data from original matrix have to be exactly same. As you can see in one method i am getting one column correct but then other is zero and then correct"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 5, "creation_date": 1511369225, "post_id": 47439416, "comment_id": 81834672, "body": "You should really start this by trying to do whatever you want to do to a 2x3 to a 5x2 or something."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1511430225, "post_id": 47439416, "comment_id": 81859149, "body": "Did you fix it meanwhile? Why is <code>e_m</code> and <code>e_mm</code> 1-dimensional?"}, {"owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1511433502, "post_id": 47439416, "comment_id": 81861465, "body": "they are not  1-dimensional as you can see in the images uploaded they&#39;re multidimensional. I am having a problem in the looping mechanism where the first rows have to be zero and then the data from the files which I am reading has to be written on remaining rows. @yacc"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1511435378, "post_id": 47439416, "comment_id": 81862639, "body": "There are declarations/definitions missing for <code>ROW</code>, <code>COL</code>, <code>ord1</code>, <code>real</code>, <code>imag</code>, <code>e_m</code> and <code>e_mm</code>. Update your code to show the relevant lines."}, {"owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "edited": false, "score": 0, "creation_date": 1511442263, "post_id": 47439416, "comment_id": 81866780, "body": "i had added the declarations of the missing in the code above. as the main code is very lengthy due to which i had not added the whole code"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1511459250, "post_id": 47439416, "comment_id": 81876719, "body": "This is what I addressed in my recent comment. You are declaring <code>e_m</code> and <code>e_mm</code> as 1-d arrays. Why did you do that? In your code you now face the endeavor to map a 2-d matrix to a 1-d array. And this is a potential source for wrong assignments. Why didn&#39;t you declare e_m and e_mm 2-dimensional?"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1511460018, "post_id": 47439416, "comment_id": 81877119, "body": "And what is <code>e_m1</code>? It&#39;s not used in the code. For the sake of clarity, bear in mind that code has to be indented properly, and identifiers (such as for variables or files) should be speaking for themselves."}, {"owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "edited": false, "score": 0, "creation_date": 1511475967, "post_id": 47439416, "comment_id": 81882676, "body": "Thank you for your suggestion and sorry for the confusion. as you can see the output of e_m in the uploaded image its correct and i want to get the same output as i had obtained from e_m but with the addition of rows of zeros in beginning. if for the same declaration is correct and I am getting what i needed(for the case of e_m) then I think i can get the same for the case of e_mm with just addition of rows in beginning. that&#39;s why I declared them in the same way and sorry about e_m1 I was using it to try two different approaches for the same thing."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "reply_to_user": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1511534535, "post_id": 47439416, "comment_id": 81905539, "body": "The way you&#39;re mapping to the 1-d array looks weird. I&#39;d use <code>i*COLS+j</code> instead of <code>i+ROWS*j</code>. Where you use loop counter <code>d</code> you access <code>real[i][j]</code>, but <code>i</code> is always the same. And the remark from @roelofs about the missing braces for the two <i>else</i> blocks is right. The least you should do is some refactoring to make the code more readable."}, {"owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "edited": false, "score": 0, "creation_date": 1511868767, "post_id": 47439416, "comment_id": 82017452, "body": "I made some changes in my code with the help of some of the suggestions which you people gave and few changes which i made as well. now i am getting what i needed but the only problem is that the first row of the data is not being written but all other rows are correct. i am getting first 24 rows as zeros and the remaining 11 rows with data, which i need and also the number of columns is correct which is 24, can anyone suggest me why I am not getting the first row of data. the code changes which I made and the output are uploaded in the main code section."}, {"owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "edited": false, "score": 0, "creation_date": 1511868772, "post_id": 47439416, "comment_id": 82017456, "body": "if you compare the two images uploaded you will see that the first row of the e_m is not present in e_m1 image."}], "owner": {"reputation": 13, "user_id": 8694897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5s0646j-nL8/AAAAAAAAAAI/AAAAAAAAAhs/zxTwhIGl7TQ/photo.jpg?sz=128", "display_name": "IMRAN SARWAR", "link": "https://stackoverflow.com/users/8694897/imran-sarwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511868470, "creation_date": 1511367571, "last_edit_date": 1511868470, "question_id": 47439416, "link": "https://stackoverflow.com/questions/47439416/matrix-concatenation-or-merging", "title": "Matrix concatenation or merging", "body": "<p><a href=\"https://i.stack.imgur.com/ZwlGA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZwlGA.jpg\" alt=\"new output from edited data\"></a>In my project, i have a matrix of order 11X24 but I need to convert/merge/concatenate it to a matrix of order 35X11 means 35 rows and 24 columns. </p>\n\n<p>What I need is to add 24 rows of rows and then the 11 rows of the other matrix just like horizontal concatenation in Matlab. </p>\n\n<p>The way the first matrix is computed is given by the following code and it is complex matrix so defined by double complex</p>\n\n<pre><code>//take real and imaginary part to build e_m matrix\nre = fopen(\"realpart.txt\",\"r\");\nfor(i=0;i&lt;ROWS;i++){\n    for(j=0;j&lt;COLS;j++){\n        fscanf(re,\"%lf\",&amp;real[i][j]);\n    }\n}\n\nfclose(re);\nim = fopen(\"imagepart.txt\",\"r\");\nfor(i=0;i&lt;ROWS;i++){\n    for(j=0;j&lt;COLS;j++){\n        fscanf(im,\"%lf\",&amp;imag[i][j]);\n    }\n}\n\nfclose(im);\n\n//compute e_m matrix\nfor(i=0;i&lt;ROWS;i++){\n    for(j=0;j&lt;COLS;j++){\n        e_m[i+ROWS*j].r = real[i][j];\n        e_m[i+ROWS*j].i = imag[i][j]; //defined cols-by-cols (i.e. z[0][1] is z[35])\n    }\n}\n</code></pre>\n\n<p>Where the files are being read by two .txt files and the output is e_m.txt file attached to this post.  To concatenate it i am using the following code:</p>\n\n<pre><code>for(d=0;d&lt;ord1;d++){\n    for(j=0;j&lt;COLS;j++){\n        if(d&gt;23){\n            e_mm[d+ord1*j].r = real[i][j];\n            e_mm[d+ord1*j].i = imag[i][j]; //defined cols-by-cols (i.e. z[0][1] is z[35]\n        }\n        else\n            e_mm[d+ord1*j].r= 0;\n        e_mm[d+ord1*j].i= 0;\n    }\n}\n\nFILE* file7=fopen(\"/dev/conc.txt\",\"w\");\nfor(i=0;i&lt;ord1;i++){\n    for(j=0;j&lt;COLS;j++){\n        fprintf(file7,\"%lf\\t %lf\\t\", e_mm[i+ord1*j].r,e_mm[i+ord1*j].i);\n    }\n    fprintf(file7,\"\\n\");\n}\nfclose(file7);\nfor(i=0;i&lt;ord1;i++){\n    for(j=0;j&lt;COLS;j++)\n    if (i&gt;23) {\n        concat[i].r=e_m[i].r;\n        concat[j].i=e_m[j].i;\n    }\n    else\n        concat[i].r = 0;\n    concat[j].i = 0;\n}\nFILE* file8=fopen(\"/dev/concat.txt\",\"w\");\n\nfor(i=0;i&lt;ord1;i++){\n    for(j=0;j&lt;COLS;j++){\n        fprintf(file8,\"%lf\\t %lf\\t\", concat[i].r, concat[j].i);\n    }\n    fprintf(file8,\"\\n\");\n}\n\nfclose(file8);\n*/\n</code></pre>\n\n<p>But the output is not what i need. Can someone guide me what i am doing wrong ?\n<a href=\"https://i.stack.imgur.com/jc6LJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jc6LJ.jpg\" alt=\"e_m image 11x24 matrix\"></a></p>\n\n<p>declaration of some veriable is here.. since the code is a lengty thats why i had included the whole code.</p>\n\n<pre><code>doublereal  real[ROWS][COLS];                //real coefficient to build E_m matrix\n  doublereal  imag[ROWS][COLS];                //imaginary coefficient to build E_m matrix\n  doublereal  real1[ROWS][COLS];                //real coefficient to build E_m matrix by me\n  doublereal  imag1[ROWS][COLS];  \n  doublecomplex e_m[ROWS*COLS]; \n  ROWS = 11;\n  integer COLS = 24;        \n  integer ldvt=COLS;    \n  integer ord1 = 35;doublecomplex e_m[ROWS*COLS];              \n  doublecomplex e_mm[ord1*COLS];\n  doublecomplex e_m1[ord1*COLS]; \n</code></pre>\n\n<p>Edited line of code </p>\n\n<pre><code> //take real and imaginary part to build e_m1 matrix\n            re1 = fopen(\"realpart.txt\",\"r\");\n             for(d=23;d&lt;ord1;d++){\n             for(j=0;j&lt;COLS;j++){\n              fscanf(re1,\"%lf\",&amp;real1[d][j]);\n               }\n              }\n              fclose(re1);\n\n            im1 = fopen(\"imagepart.txt\",\"r\");\n              for(d=23;d&lt;ord1;d++){\n              for(j=0;j&lt;COLS;j++){\n                fscanf(im1,\"%lf\",&amp;imag1[d][j]);\n              }\n             }\n            fclose(im1);\n\n                            for(d=0;d&lt;ord1;d++){\n                            for(j=0;j&lt;COLS;j++){\n                                if(d&lt;24)  {\n                                      e_m1[d*COLS+j].r =  0;\n                                      e_m1[d*COLS+j].i =  0;  //defined cols-by-cols (i.e. z[0][1] is z[35])\n                                                }\n                                                    else   {\n\n                                                            e_m1[d*COLS+j].r =  real1[d][j];\n                                                            e_m1[d*COLS+j].i =  imag1[d][j];\n                                                           }\n                                                }\n                           }\n\n\n            FILE* file5=fopen(\"/dev/e_m1.txt\",\"w\");\n                    for(d=0;d&lt;ord1;d++){\n                       for(j=0;j&lt;COLS;j++){\n                        fprintf(file5,\"%.3f\\t %.3f\\t\",e_m1[d*COLS+j].r,e_m1[d*COLS+j].i);[![enter image description here][4]][4]\n                     }\n                        fprintf(file5,\"\\n\");\n                    }\n                   fclose(file5);\n</code></pre>\n"}, {"tags": ["c", "scanf", "codeblocks"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1511367490, "post_id": 47439361, "comment_id": 81833489, "body": "You forgot to test if <code>fopen</code> returnn <code>NULL</code> which means that the file could not be opened, so any further attempt to read from <code>fp</code> will result in <i>undefined behaviour</i> (google that). And furthermore the file is opened in write mode so trying to read from it is also UB. And even if everything was OK you still need to rewindthe file before reading from it."}, {"owner": {"reputation": 95, "user_id": 8746042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-AMqnV6JDOGY/AAAAAAAAAAI/AAAAAAAAAD4/xVEqJLqwRUU/photo.jpg?sz=128", "display_name": "Finer", "link": "https://stackoverflow.com/users/8746042/finer"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1511367638, "post_id": 47439361, "comment_id": 81833594, "body": "I know about it, but there is same result with it"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511367802, "post_id": 47439361, "comment_id": 81833714, "body": "What was the data you were trying to read with an unrestricted <code>fscanf</code> into a buffer of length 20?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1511367803, "post_id": 47439361, "comment_id": 81833716, "body": "You&#39;re <b>reading</b> from a file that was opened <b>for writing and writing only</b>. <code>fscanf</code> <b>fails</b> and returns <code>EOF</code>, and sets <code>errno</code>; neither of which you never check."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511368844, "post_id": 47439361, "comment_id": 81834440, "body": "the posted code does not compile!  It is missing the needed statement: <code>#include &lt;stdio.h&gt;</code>  for functions: <code>fopen()</code>, <code>fclose()</code>, <code>fprintf()</code>, <code>fscanf()</code>, <code>FILE</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511369109, "post_id": 47439361, "comment_id": 81834586, "body": "when calling system functions: <code>fopen()</code>, <code>fscanf()</code>, <code>fprintf()</code>: always check the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511369369, "post_id": 47439361, "comment_id": 81834789, "body": "when calling <code>fscanf()</code>, the use of the input format specifier &#39;%s&#39; can overrun the input input buffer.   Always include a MAX CHARACTERS modifier that iis one less than the length of the input buffer because &#39;%s&#39; always appends a NUL byte to the input.   Suggest: <code>fscanf(fp,&quot;%19s&quot;, t);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511369574, "post_id": 47439361, "comment_id": 81834920, "body": "the posted code contains &#39;magic&#39; numbers. &#39;magic&#39; numbers are numbers with no basis.  I.E. 20.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using a <code>enum</code> statement or <code>#define</code> statement to give that &#39;magic&#39; number a meaningful name, then using that meaningful name throughout the code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511369761, "post_id": 47439361, "comment_id": 81835050, "body": "note even &#39;simple&#39; programs need appropriate error checking and understanding of the system functions being used.  Suggest: read the MAN pages for each of the system functions being used"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511370191, "post_id": 47439361, "comment_id": 81835336, "body": "for ease of readability and understanding: 1) consistently indent the code. Indent after every opening brace &#39;{&#39;. unindent before every closing brace &#39;}. Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "edited": false, "score": 0, "creation_date": 1511419407, "post_id": 47439361, "comment_id": 81853171, "body": "Did my answer solve the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "is_accepted": false, "score": 2, "last_activity_date": 1511367872, "creation_date": 1511367872, "answer_id": 47439529, "question_id": 47439361, "link": "https://stackoverflow.com/questions/47439361/fscanf-c-makes-program-stopped-working/47439529#47439529", "title": "fscanf C makes &quot;program stopped working&quot;", "body": "<h3>Problems</h3>\n\n<ul>\n<li>You are reading the file without reading permission</li>\n<li>At the end of the writing the file. Pointer is at the end of the file</li>\n</ul>\n\n<h3>Solution</h3>\n\n<ul>\n<li>Open the file with read and write permission using <code>w+</code></li>\n<li>rewind the file pointer to the beginning of the file using <code>rewind(fp)</code></li>\n</ul>\n\n<h3>Code</h3>\n\n<pre><code>int main()\n{\n    char t[20];\n    FILE *fp;\n    fp=fopen(\"a.txt\",\"w+\");\n    fprintf(fp,\"test\");\n    rewind(fp);\n    fscanf(fp,\"%s\", t);\n    printf(\"%s\", t);\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>Note:</p>\n\n<ul>\n<li><p>You should check whether the file has been opened successfully or not.</p>\n\n<pre><code>if(fp=fopen(\"a.txt\",\"w+\"))\n{\n   . . . \n}\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1511367883, "creation_date": 1511367883, "answer_id": 47439533, "question_id": 47439361, "link": "https://stackoverflow.com/questions/47439361/fscanf-c-makes-program-stopped-working/47439533#47439533", "title": "fscanf C makes &quot;program stopped working&quot;", "body": "<p>You want this:</p>\n\n<pre><code>int main() {  \n    char t[20];\n    FILE *fp;\n    fp = fopen(\"a.txt\", \"w+\");   // open in read/write mode\n    fprintf(fp, \"test\");\n    fseek(fp, 0, SEEK_SET);      // rewind file pointer to the beginning of file\n    fscanf(fp, \"%s\", t);\n    printf(\"%s\", t);\n    fclose(fp);\n    return 0;\n  }\n</code></pre>\n\n<p>The program is still bad, because:</p>\n\n<ol>\n<li>there is no error checking for <code>fopen</code></li>\n<li>the buffer might overflow, <code>fscanf(fp, \"%19s\", t)</code> would be more appropriate</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511369990, "post_id": 47439735, "comment_id": 81835208, "body": "readability by humans is highly important.  The posted code has random indenting  That random indenting makes the code very difficult to read/understand.  Suggest using 4 spaces for each indent level and never using tabs for indenting."}], "tags": [], "owner": {"reputation": 1, "user_id": 8807848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfdc922a809d4791da94f4d748ec5a66?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Xhaja", "link": "https://stackoverflow.com/users/8807848/mario-xhaja"}, "is_accepted": false, "score": 0, "last_activity_date": 1511368859, "last_edit_date": 1511368859, "creation_date": 1511368520, "answer_id": 47439735, "question_id": 47439361, "link": "https://stackoverflow.com/questions/47439361/fscanf-c-makes-program-stopped-working/47439735#47439735", "title": "fscanf C makes &quot;program stopped working&quot;", "body": "<p>You have opened the file in write mode.The problem occurs when you try to read from it with the fscanf function. After you write to the file, close it and reopen it in read mode.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n     char t[20];\n     FILE *fp;\n     fp=fopen(\"a.txt\",\"w\");\n     fprintf(fp,\"test\");\n     fclose(fp);\n     fp=fopen(\"a.txt\",\"r\");\n     fscanf(fp,\"%s\", t);\n     printf(\"%s\", t);\n     fclose(fp);\n     return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8746042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-AMqnV6JDOGY/AAAAAAAAAAI/AAAAAAAAAD4/xVEqJLqwRUU/photo.jpg?sz=128", "display_name": "Finer", "link": "https://stackoverflow.com/users/8746042/finer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1511373399, "creation_date": 1511367388, "last_edit_date": 1511373399, "question_id": 47439361, "link": "https://stackoverflow.com/questions/47439361/fscanf-c-makes-program-stopped-working", "title": "fscanf C makes &quot;program stopped working&quot;", "body": "<p>I'm learning about <code>fprintf</code> and <code>fscanf</code>. I wrote simple program:</p>\n\n<pre><code>int main()\n{\n  char t[20];\n  FILE *fp;\n  fp=fopen(\"a.txt\",\"w\");\n  fprintf(fp,\"test\");\n  fscanf(fp,\"%s\", t);\n  printf(\"%s\", t);\n  fclose(fp);\n  return 0;\n}\n</code></pre>\n\n<p><code>fscanf</code> makes error, which show window with \"program stopped working\". File was created proberly and it has \"test\" text inside.</p>\n\n<p>I dont know whats wrong with it. Im using Codeblocks</p>\n"}, {"tags": ["c", "linux", "unix"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511366754, "post_id": 47439059, "comment_id": 81832968, "body": "getline returns -1 on error or EOF <code>while (-1) {}</code> will run forever."}, {"owner": {"reputation": 656, "user_id": 6739197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/596ca15ff00c5f201050c7b3194d9fd2?s=128&d=identicon&r=PG&f=1", "display_name": "victor.ja", "link": "https://stackoverflow.com/users/6739197/victor-ja"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511366853, "post_id": 47439059, "comment_id": 81833047, "body": "Oh, I see, and how can I check if a line is empty?"}], "answers": [{"tags": [], "owner": {"reputation": 2291, "user_id": 3193876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89e4aba2480e6a7ef021bfaceb9bdc5?s=128&d=identicon&r=PG&f=1", "display_name": "Ronald", "link": "https://stackoverflow.com/users/3193876/ronald"}, "is_accepted": true, "score": 4, "last_activity_date": 1511366882, "creation_date": 1511366882, "answer_id": 47439184, "question_id": 47439059, "link": "https://stackoverflow.com/questions/47439059/exit-loop-when-line-is-empty-with-getline/47439184#47439184", "title": "Exit loop when line is empty with getline", "body": "<p>The problem you have is the newline you read.</p>\n\n<p>if you add</p>\n\n<pre><code>if (*line == '\\n') break;\n</code></pre>\n\n<p>to your loop, it will probably work as intended.\nTesting getline() for a -1 return value is a good idea; you might encounter an End Of File instead of an empty line </p>\n"}], "owner": {"reputation": 656, "user_id": 6739197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/596ca15ff00c5f201050c7b3194d9fd2?s=128&d=identicon&r=PG&f=1", "display_name": "victor.ja", "link": "https://stackoverflow.com/users/6739197/victor-ja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47439184, "answer_count": 1, "score": 1, "last_activity_date": 1511371014, "creation_date": 1511366460, "last_edit_date": 1511369286, "question_id": 47439059, "link": "https://stackoverflow.com/questions/47439059/exit-loop-when-line-is-empty-with-getline", "title": "Exit loop when line is empty with getline", "body": "<p>How can I exit the while loop when stdin line is empty?</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n\n    FILE* stream = popen(\"sort\", \"w\");\n    char *line = NULL;\n    size_t size;\n\n    while (getline(&amp;line, &amp;size, stdin)) {\n        fprintf(stream,\"%s\\n\", line);\n    }\n\n    pclose(stream);\n    return 0;\n}\n</code></pre>\n\n<p>I tried checking the length of line and checking if <code>getline != -1</code> and it doesn't work.</p>\n"}, {"tags": ["c", "microcontroller", "pic", "mplab", "xc8"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1511366613, "post_id": 47439010, "comment_id": 81832870, "body": "OT: Do you know <code>09</code> is illegal? Integer constants starting with <code>0</code> are in octal base."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1511367091, "creation_date": 1511367091, "answer_id": 47439258, "question_id": 47439010, "link": "https://stackoverflow.com/questions/47439010/data-from-uart-to-update-an-array/47439258#47439258", "title": "Data from UART to update an array", "body": "<p>You cannot simply copy the two bytes from the string \"04\" to an <code>int</code> variable and expect it to contain 4. You need to convert the string \"04\" into the value 4, for example by using <a href=\"http://www.cplusplus.com/reference/cstdlib/atoi/\" rel=\"nofollow noreferrer\"><code>atoi</code></a></p>\n\n<p>You want this:</p>\n\n<pre><code>  char uart[] = \"0430\";   // made up uart buffer just for debugging\n  char temp[3] = { 0 };   // buffer for 2 char string, all 3 bytes initialized to 0\n\n  temp[0] = uart[0];\n  temp[1] = uart[1];      // temp contains now \"04\"\n\n  int key = atoi(temp);   // convert from string to integer, key now contains 4\n\n  temp[0] = uart[2];      \n  temp[1] = uart[3];      // temp contains now \"30\"\n\n  int value = atoi(temp); // convert from string to integer, value now contains 30\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7941835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409b16f91652e8220fedd1b870ec7138?s=128&d=identicon&r=PG&f=1", "display_name": "Steveo", "link": "https://stackoverflow.com/users/7941835/steveo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511367091, "creation_date": 1511366311, "question_id": 47439010, "link": "https://stackoverflow.com/questions/47439010/data-from-uart-to-update-an-array", "title": "Data from UART to update an array", "body": "<p>Hope someone can help me here. Fairly new to C (come from a PHP background) and been stuck on this problem couple days now. Still trying to get head round pointers etc, a joy PHP doesn't have.</p>\n\n<p>So basiclly, I want to be able to update a specific value within the array to a value given via the UART. The UART is all working correctly. Just cant get the code to work to update the array. Data from the UART, will be in the string 'uart' in the code below and will have the value '0430' (First 2 digits refer to the array key and the 2nd two will be the value to update it to).</p>\n\n<pre><code>// Array values\nint unsigned array[15] = {05,76,33,02,11,07,34,32,65,04,09,32,90,03,44};\n\n// Split the UART string into required parts\n// Array Key\nint key;\nmemcpy (key, &amp;uart[0], 2);\n// New Value\nint value;\nmemcpy (value, &amp;uart[2], 2);\n\narray[key] = value; // Im sure this is wrong and needs to be done via a pointer?\n</code></pre>\n\n<p>The new array should now be:\n    {05,76,33,02,30,07,34,32,65,04,09,32,90,03,44};</p>\n\n<p>Any advice would be great and even a short explaination would be superb to help me understand.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "gcc", "typedef"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1511366532, "post_id": 47438872, "comment_id": 81832817, "body": "You may be able to increase compiler warning levels to see a diagnostic. On gcc you can use <code>-Wconversion</code> to see: <code>warning: negative integer implicitly converted to unsigned type [-Wsign-conversion]  x = -10;</code>"}, {"owner": {"reputation": 66, "user_id": 3290239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGRlb.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3290239/felix"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1511542975, "post_id": 47438872, "comment_id": 81909702, "body": "Great! This message really showed up by here (and some another ones)! An excellent tip! Thanks @DavidBowling"}], "answers": [{"comments": [{"owner": {"reputation": 66, "user_id": 3290239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGRlb.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3290239/felix"}, "edited": false, "score": 0, "creation_date": 1511540985, "post_id": 47438886, "comment_id": 81908856, "body": "Thanks @alinsoar! But the code written above, was a simple sample.In real code I didn&#39;t forget the semicolon :). My problem was that when I compile and print the variable natural_index, the value printed was &#39;-10&#39; and I expected at least a non negative number, or some error."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 2, "last_activity_date": 1511367993, "last_edit_date": 1511367993, "creation_date": 1511365921, "answer_id": 47438886, "question_id": 47438872, "link": "https://stackoverflow.com/questions/47438872/why-my-attempt-to-define-a-natural-type-with-typedef-doesnt-work/47438886#47438886", "title": "Why my attempt to define a natural type with typedef doesn&#39;t work?", "body": "<p>you forgot to separate the expression-statements with semicolon <code>;</code>.</p>\n\n<pre><code>natural_index = 10;\nnatural_index = -10;\n</code></pre>\n\n<p><code>-10</code> to a large signed number during the evaluation of assignment operator <code>=</code>.</p>\n\n<p><code>6.5.16.1p2</code> (Simple assignment) from ISO9899 says:</p>\n\n<blockquote>\n  <p>In simple assignment (=), the value of the right operand is converted to the type of the assignment expression.</p>\n</blockquote>\n\n<p>When you use the storage class specifier <code>typedef</code>, this tells the parser to add an alias identifier <code>nat</code> for the type <code>unsigned int</code> in the environment of the parser or in the parse tree that it outputs.  In this case <code>nat</code> will be evaluated to a type in declarations, so when you declare the object with identifier <code>natural_index</code>, the left-value associated with this object will have the type <code>unsigned int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 3290239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGRlb.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3290239/felix"}, "edited": false, "score": 0, "creation_date": 1511544016, "post_id": 47439054, "comment_id": 81910153, "body": "Great, @zwol! This was very well explained! But  there still have an issue in your second argument, because I print the variable &#39;natural_index&#39; and the value <code>-10</code> is printed. And I make some operations like: <code>natural_index - 1</code>, and the result is <code>-11</code>."}, {"owner": {"reputation": 66, "user_id": 3290239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGRlb.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3290239/felix"}, "edited": false, "score": 0, "creation_date": 1511569296, "post_id": 47439054, "comment_id": 81917860, "body": "I was printing with the <code>%d</code> argument instead <code>%u</code>. But I found interesting this conversion with <code>printf</code>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 66, "user_id": 3290239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGRlb.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3290239/felix"}, "edited": false, "score": 1, "creation_date": 1511576218, "post_id": 47439054, "comment_id": 81918961, "body": "@Vytor Yes, it&#39;s completely up to you to make your <code>printf</code> format specification match the arguments.  Your compiler may or may not have a mode in which it will warn you if they don&#39;t match, but that&#39;s as helpful as C gets."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 5, "last_activity_date": 1511625065, "last_edit_date": 1511625065, "creation_date": 1511366454, "answer_id": 47439054, "question_id": 47438872, "link": "https://stackoverflow.com/questions/47438872/why-my-attempt-to-define-a-natural-type-with-typedef-doesnt-work/47439054#47439054", "title": "Why my attempt to define a natural type with typedef doesn&#39;t work?", "body": "<p>C doesn't support what you are trying to do, on two different levels.</p>\n\n<p>First, a <code>typedef</code> in C does not create a new, distinct type; it just creates a shorthand name for the original type.  Thus, after</p>\n\n<pre><code>typedef unsigned int nat;\n</code></pre>\n\n<p>the declaration</p>\n\n<pre><code>nat natural_index;\n</code></pre>\n\n<p>is 100% equivalent to</p>\n\n<pre><code>unsigned int natural_index;\n</code></pre>\n\n<p>(What's the point of <code>typedef</code>, then?  It's most useful when the \"underlying type\" might differ based on the target architecture; for instance, the standard typedef <code>uint64_t</code> might be shorthand for <code>unsigned long</code> or <code>unsigned long long</code> depending on the architecture.)</p>\n\n<p>Second, C has no mechanism for changing whether or not arithmetic expressions perform <em>implicit conversions</em>.  In</p>\n\n<pre><code>natural_index = -10;\n</code></pre>\n\n<p>the assignment operator will convert the negative number <code>-10</code> (with type <code>int</code>) to a large unsigned number (namely <code>(UINT_MAX - 10) + 1</code>, which is probably, but not necessarily, 4,294,967,286) in the process, and there is no way to disable that.</p>\n\n<p>Your options are to work in a language that actually supports this kind of thing (e.g. Ada, Haskell, ML) or to write a \"linting\" program that parses C itself and enforces whatever rules you want it to enforce (existing examples are <code>lint</code> and <code>sparse</code>).</p>\n"}], "owner": {"reputation": 66, "user_id": 3290239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGRlb.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3290239/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 47439054, "answer_count": 2, "score": 0, "last_activity_date": 1511625065, "creation_date": 1511365876, "last_edit_date": 1511542488, "question_id": 47438872, "link": "https://stackoverflow.com/questions/47438872/why-my-attempt-to-define-a-natural-type-with-typedef-doesnt-work", "title": "Why my attempt to define a natural type with typedef doesn&#39;t work?", "body": "<p>I tried to define a 'natural' type, like that:</p>\n\n<pre><code>typedef unsigned int nat;\n</code></pre>\n\n<p>But if I define a nat variable, that variable behaves like an ordinary int:</p>\n\n<pre><code>nat natural_index;\nnatural_index = 10; // That's what I want. \nnatural_index = -10; // Still a valid option.\n</code></pre>\n\n<p>In resume, I wanted to know why the compiler does not show a message, like\n\"-10 is not a unsigned int\", and what could I do to define a 'natural' type.</p>\n\n<p><strong>extra information</strong>: I \"printf\" the variable natural_index, and the value '-10' was printed. I expected at least, another positive number (not exactly 10).</p>\n"}, {"tags": ["c", "distance", "sensors", "atmega", "lidar"], "comments": [{"owner": {"reputation": 11664, "user_id": 207791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c9ffc6f77d7f8ee002acd0e9ebc872f2?s=128&d=identicon&r=PG", "display_name": "Victor Sergienko", "link": "https://stackoverflow.com/users/207791/victor-sergienko"}, "edited": false, "score": 0, "creation_date": 1511379204, "post_id": 47438854, "comment_id": 81840191, "body": "Most likely, you&#39;ll have to seek a product support forum, or other hardware-related forums. Maybe arduino.stackexchange.com."}, {"owner": {"reputation": 11664, "user_id": 207791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c9ffc6f77d7f8ee002acd0e9ebc872f2?s=128&d=identicon&r=PG", "display_name": "Victor Sergienko", "link": "https://stackoverflow.com/users/207791/victor-sergienko"}, "edited": false, "score": 0, "creation_date": 1511379316, "post_id": 47438854, "comment_id": 81840250, "body": "In general, I recommend more fine-grained testing. Continuously read the sensor data from the board and visualize it on a PC with a small step like 0.1s. Wave your hand in front of the sensor and see what is wrong - the data or your interpretation."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8991310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0cd4babe5469357acb6d1969c04081?s=128&d=identicon&r=PG&f=1", "display_name": "Cas", "link": "https://stackoverflow.com/users/8991310/cas"}, "is_accepted": true, "score": 0, "last_activity_date": 1511471724, "last_edit_date": 1511471724, "creation_date": 1511446224, "answer_id": 47457452, "question_id": 47438854, "link": "https://stackoverflow.com/questions/47438854/speed-measurement-from-lidar-sensor-for-automatic-braking-system/47457452#47457452", "title": "Speed measurement from lidar sensor for automatic braking system", "body": "<p>I found it!</p>\n\n<pre><code>Distance = (8 &lt;&lt; distanceH);                            //Combine the data low and data high\nDistance |= distanceL;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>Distance = (distanceH &lt;&lt; 8);                            //Combine the data low and data high\nDistance |= distanceL;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8991310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0cd4babe5469357acb6d1969c04081?s=128&d=identicon&r=PG&f=1", "display_name": "Cas", "link": "https://stackoverflow.com/users/8991310/cas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 47457452, "answer_count": 1, "score": 1, "last_activity_date": 1511471795, "creation_date": 1511365852, "last_edit_date": 1511471795, "question_id": 47438854, "link": "https://stackoverflow.com/questions/47438854/speed-measurement-from-lidar-sensor-for-automatic-braking-system", "title": "Speed measurement from lidar sensor for automatic braking system", "body": "<p>For a school project I have been working on a system that will automatically brake when there is danger. Only the requirements are more strict (safety) than just using a ping sensor and detecting a fixed distance. I am going to implement the speed of an incoming object as well.</p>\n\n<p>On the internet I found this awesome 100Hz sample Lidar module that's very cheap. It uses UART with 2 header frames (0x59), after that a dataLowbyte and a dataHighbyte. Here is the <a href=\"http://www.robotshop.com/media/files/pdf/benewake-tfmini-micro-lidar-module-ip65-12-m-datasheet.pdf\" rel=\"nofollow noreferrer\">datasheet for the module</a>.</p>\n\n<p>So I've started inputting coffee and outputting code (in C) on the atmega328P (Arduino).</p>\n\n<p>As you can see here I've set up the code to read the sensor and process the data. The problem is that it gives back weird readings. Like a distance difference when I'm moving further away <em>and</em> when moving closer even though I stated it not to. Does anyone have experience using this module? Or maybe I misread something of the datasheet.</p>\n\n<pre><code>//Includes\n//============================================================================================//\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;math.h&gt;\n//============================================================================================//\n\n\n//Defines\n//============================================================================================//\n#define F_CPU 16000000                                          //CPU frequency\n#define Baudrate 115200                                         //UART Baudrate\n#define UBRR_VALUE (((F_CPU / (Baudrate * 8))) - 1)             //UART Baudrate set in Arduino\n// #define SafetyRating 8\n// #define sampleTime 0x65                                          //Time between 2 samples in 10^-4. This value comes from testing (its 1,01ms)\n//============================================================================================//\n\n\n//Enums\n//============================================================================================//\nenum {Safe, Warning, Danger}State;                              //Possible States\n//============================================================================================//\n\n\n//Global variables\n//============================================================================================//\nuint8_t distanceL;                                              //Distance (low value) data taken from the UART buffer coming from Lidar\nuint8_t distanceH;                                              //Distance (high value) data taken from the UART buffer coming from Lidar\nuint16_t Distance;                                              //Distance combined\nuint8_t frameByteCount = 0;                                     //To count which byte in the frame is current\nuint16_t Speed;                                                 //Speed variable\n//volatile uint8_t DangerLevel;                                 //Danger indicator\n\n\n//Function prototypes\n//============================================================================================//\nvoid calcSpeed(uint16_t Measurement);                       //Function to calculate the speed out of distance readings\nvoid UART_Transmit(uint8_t data);                               //Funtion to send data via uart\n//============================================================================================//\n\n\n//Interrupts\n//============================================================================================//\n/*UART receive complete interrupt*/\nISR(USART_RX_vect)                                              //Data taken from the UART buffer\n{\n    uint8_t sample;                                             \n\n    sample = UDR0;                                              //Read a sample from the receiver buffer\n\n    if(frameByteCount == 3)                                     //If its the 4th byte of the frame\n    {\n        frameByteCount = 0;                                     //Reset the counter\n        distanceH = sample;                                     //Read the distance data high byte\n        Distance = (8 &lt;&lt; distanceH);                            //Combine the data low and data high\n        Distance |= distanceL;\n\n        calcSpeed(Distance);                                //Send the data to laptop for debugging purposes\n\n    }\n\n    if(frameByteCount == 2)                                     //If its the 3rd byte in the frame read the distance data low byte\n    {\n        distanceL = sample;\n        frameByteCount++;                                       //Increment the counter\n    }\n\n    if (sample == 0x59)                                         //If a sample is a header increment a counter\n    {\n        frameByteCount++;\n    }\n    else if (frameByteCount != 2 &amp;&amp; frameByteCount != 3)        //If its not a header or distance data byte reset counter\n    {\n        frameByteCount = 0;\n    }   \n}\n//============================================================================================//\n\n//Timers and Counters\n//============================================================================================//\n/*Timer0 Counter, this decreases the danger level periodically so a really slow approach will not keep incrementing the danger level*/\nISR(TIMER0_OVF_vect)                \n{\n//  if (DangerLevel &gt; 0)\n//  {\n//      DangerLevel--;\n//  }\n}\n//============================================================================================//\n\n//Main\n//============================================================================================//\nint main(void)\n{\n    DDRB    |=      0x02;                                       //For debugging purposes LED pin PB1 (pin 9) as output\n\n    UBRR0H = (UBRR_VALUE &gt;&gt; 8);                                 //Setting the Baudrate register high value\n    UBRR0L =  UBRR_VALUE;                                       //Setting the Baudrate register low value\n    UCSR0A |= (1&lt;&lt;U2X0);                                        //Setting the data sample to double speed to make Baudrate error less\n    UCSR0C |= (1&lt;&lt;UCSZ01) | (1&lt;&lt;UCSZ00);                        //Initializing UART, setting frame to 8 data bits\n    UCSR0B |= (1&lt;&lt;RXCIE0) | (1&lt;&lt;TXEN0) | (1&lt;&lt;RXEN0);            //Setting receiver interrupt enable, transmitter enable and receiver enable... Transmitter for debugging purposes\n\n    TCCR0A = 0x00;                                              //Timer0 Setup\n    TCCR0B |= 0x05;                                             //Timer0 clock prescaler to 1024\n    TIMSK0 |= 0x01;                                             //Timer0 overflow interrupt enable\n\n    sei();                                                      //Set interrupts\n\n    State = Safe;                                               //Set state to safe\n\n    while (1)\n    {\n        //checkState(DangerLevel);\n    }\n}\n//============================================================================================//\n\n//Functions\n//============================================================================================//\n/*Calculate the danger level out of distance readings*/\nvoid calcSpeed(uint16_t Measurement)\n{\n    static uint8_t samplenumber = 0;                                //Sample tracker\n    static uint16_t value0 = 0;                                         //First sample\n    static uint16_t value1 = 0;                                         //Second sample\n\n\n    switch(samplenumber)                                            //To store the measurements alternately\n    {\n        case 0:\n            value0 = Measurement;                                   //Store first measurement\n            samplenumber = 1;                                       //So next measurement goes to a different variable\n        break;\n        case 1:\n            value1 = Measurement;                                   //Store 2nd measurement\n            samplenumber = 0;                                       //So next measurement goes to a different variable\n        break;\n        default:\n        break;\n    }\n\n    if (samplenumber == 0 &amp;&amp; value1 &lt; value0)                       //When value0 is first and value1 is second and the object is closing in\n    {\n        Speed = value0 - value1;\n    }\n    else if (samplenumber == 1 &amp;&amp; value0 &lt; value1)                  //When value1 is first and value0 is second and the object is closing in\n    {\n        Speed = value1 - value0;\n    }\n    else\n    {\n        Speed = 0;\n    }\n    UART_Transmit(Speed);       //I think sending an uint16_t over uint8_t uart is possible because 'Speed' is never greater than 255 when i'm testing it\n}\n\n/*Send data over UART when buffer is empty*/\nvoid UART_Transmit(uint8_t data)\n{\n    /* Wait for empty transmit buffer */\n    while ( !( UCSR0A &amp; (1&lt;&lt;UDRE0)) )\n    ;\n    /* Put data into buffer, sends the data */\n    UDR0 = data;\n}\n//============================================================================================//\n</code></pre>\n"}, {"tags": ["c", "struct", "x86", "stack", "offset"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1511365840, "post_id": 47438704, "comment_id": 81832312, "body": "Not related to your question but <code>point *init, *final;</code> doesn&#39;t allocate space for these structures. it only allocates space for the pointers themselves (and they are uninitialized). <code>funct</code> will probably crash when you attempt to alter data at an uninitialised pointer. You should probably use <code>point init, final;</code> to allocate space (on the stack in the case) and then pass the addresses with <code>func(&amp;init, &amp;final);</code>"}, {"owner": {"reputation": 369, "user_id": 5731585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/968096869922576/picture?type=large", "display_name": "dj1121", "link": "https://stackoverflow.com/users/5731585/dj1121"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1511366338, "post_id": 47438704, "comment_id": 81832679, "body": "I see, interesting as this was a problem given to me to solve, not my own code."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1511366538, "post_id": 47438704, "comment_id": 81832826, "body": "The fields of <code>sp1</code> and <code>sp2</code> won&#39;t be passed on the stack as arguments. Only the pointers <code>sp1</code> and <code>sp2</code> themselves."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1511366822, "post_id": 47438704, "comment_id": 81833022, "body": "<code>0x8(%ebp)</code> is the <code>sp1</code> parameter. <code>0xc(%ebp)</code> is the <code>sp2</code> parameter."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1511368043, "post_id": 47438704, "comment_id": 81833889, "body": "For a structure object the compiler will allocate a vector of memory and will generate code to read/write objects from that space, each object starting from different offsets. You can visualize the offset either via offsetof(field) or via (&amp;(char*)s.obj - &amp;(char*)s)  There are atomic instructions in x86 to implement field-access of structures in a single operation (in case of nested structures it computes the offset as well). -- I moved the answer as a comment, as it is just a general answer."}, {"owner": {"reputation": 369, "user_id": 5731585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/968096869922576/picture?type=large", "display_name": "dj1121", "link": "https://stackoverflow.com/users/5731585/dj1121"}, "edited": false, "score": 0, "creation_date": 1511368446, "post_id": 47438704, "comment_id": 81834156, "body": "As far as I can understand so far:  1. We move the pointer to sp1 into eax  2. Load address of sp1 + 0x4 (why?) into edx 3. Move pointer sp2 into eax 4. Move address of sp1+0x4 into address pointed at by eax (what does this do?)  I&#39;d like to understand this before moving forward as I think understanding this could help with the rest."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1511402318, "post_id": 47438704, "comment_id": 81848198, "body": "<code>sp1+4</code> is the address of <code>sp1-&gt;s</code>, which is also the address of <code>sp1-&gt;s.x</code>. So this sets <code>sp2-&gt;p = &amp;sp1-&gt;s.x</code>."}], "owner": {"reputation": 369, "user_id": 5731585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/968096869922576/picture?type=large", "display_name": "dj1121", "link": "https://stackoverflow.com/users/5731585/dj1121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511368997, "creation_date": 1511365378, "last_edit_date": 1511368997, "question_id": 47438704, "link": "https://stackoverflow.com/questions/47438704/visual-layout-of-structs-on-stack-att-x86-c", "title": "Visual layout of structs on stack (AT&amp;T x86, C)", "body": "<p>I'm currently trying to understand how the function <em>func</em> accesses variables in a structure. I have to fill in the ? based on given assembly code.</p>\n\n<pre><code>typdef struct point{\n    float *p;\n    struct{\n    float x;\n    float y;\n    } s;\n    struct point *next;\n} point;\n\nvoid func(point *sp1, point *sp2){\n    sp2-&gt;p = ?;\n    sp2-&gt;s.x = ?;\n    sp2-&gt;s.y = ?;\n    sp1-&gt;next = ?;\n    sp2-&gt;next = ?;\n}\n\nint main(){\n    point *init, *final;\n    // assume init has been initialized to some value\n    func(init, final);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/T1xvx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T1xvx.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm unsure how to visualize this for myself so that I can answer the question. Starting from when we call func,I get this far in drawing the stack:</p>\n\n<pre><code>STACK BASE\n   .           .\n   .           .\n   .           .\n  sp2        0xc(%ebp)\n  sp1        0x8(%ebp)\nret addr     0x4(%ebp)\n--ebp--\n   .\n   .\n   .\nTOP OF STACK\n</code></pre>\n\n<p>My confusion arises in: </p>\n\n<ol>\n<li>How to offset from ebp correctly (the space between addresses)</li>\n<li>How to deal with sp2</li>\n<li>If I've set up the sp1 variables correctly. </li>\n<li>How the assembly code interacts with the variables inside each struct.</li>\n</ol>\n"}, {"tags": ["c", "synchronization", "multiprocessing", "semaphore", "producer-consumer"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1511366361, "post_id": 47438701, "comment_id": 81832695, "body": "Unless this is an exercise to learn thread safety, there are easier ways.  For example, instead of having multiple copies of the array that need to be protected by semaphores , you could create an array of arrays, with <code>numProcess</code> elements as the first index.  (  eg array[numProcesses][M] ).  Then each process can write freely to its area of the array without conflict.  ( as explained <i><a href=\"https://stackoverflow.com/questions/31548355/threading-and-thread-safety-in-c\">here</a></i> )  See note 1 referenced in first answer of link."}, {"owner": {"reputation": 11, "user_id": 8979261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86968866a737dca967bb5564f6692c07?s=128&d=identicon&r=PG&f=1", "display_name": "crazaki", "link": "https://stackoverflow.com/users/8979261/crazaki"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1511366427, "post_id": 47438701, "comment_id": 81832742, "body": "As you said it is an exercise for thread safety. I can only share this structure(sharedMem) among processes along with shared semaphores."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1511368261, "post_id": 47438701, "comment_id": 81834036, "body": "It kinda looks like you&#39;re trying to use Sys V semaphores in the way one would use POSIX semaphores.  Sys V semaphores allow you to perform operations on an array of semaphores rather than having to operate on them one-by-one.  And it&#39;s an atomic operation, too.  Instead of trying to abstract out the Sys V semaphore operations to look like POSIX semaphore operations, consider implementing something more specific to your use-case like a read-write lock."}, {"owner": {"reputation": 11, "user_id": 8979261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86968866a737dca967bb5564f6692c07?s=128&d=identicon&r=PG&f=1", "display_name": "crazaki", "link": "https://stackoverflow.com/users/8979261/crazaki"}, "edited": false, "score": 0, "creation_date": 1511370713, "post_id": 47438701, "comment_id": 81835678, "body": "I can change that but i don&#39;t think it will solve my problem. I mean the semops are being treated correctly ( as far as I can see from printing messages at least)"}, {"owner": {"reputation": 11, "user_id": 8979261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86968866a737dca967bb5564f6692c07?s=128&d=identicon&r=PG&f=1", "display_name": "crazaki", "link": "https://stackoverflow.com/users/8979261/crazaki"}, "edited": false, "score": 0, "creation_date": 1511378916, "post_id": 47438701, "comment_id": 81840045, "body": "Ok so I used POSIX semaphores but to no avail. Problem still exists!"}], "owner": {"reputation": 11, "user_id": 8979261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86968866a737dca967bb5564f6692c07?s=128&d=identicon&r=PG&f=1", "display_name": "crazaki", "link": "https://stackoverflow.com/users/8979261/crazaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 688, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511743085, "creation_date": 1511365370, "last_edit_date": 1511743085, "question_id": 47438701, "link": "https://stackoverflow.com/questions/47438701/producer-consumer-using-semaphores-c", "title": "Producer Consumer using semaphores-c", "body": "<p>Problem: </p>\n\n<ul>\n<li>All processes have an array of elements. </li>\n<li>Producer stores a value in his array.</li>\n<li>All consumers(n) must store this value on their array before a producer can produce additional element.</li>\n<li>All consumers should store the element and wait until the producer creates a new one.</li>\n</ul>\n\n<p>So in my implementation I'm using three semaphores: all(as a barrier)=1, new=0 and a mutex=1. I'm also using a shared counter=0 to count how many consumers have read the element.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;sys/shm.h&gt;\n#include \"stdio.h\"\n#include \"sys/sem.h\"\n#include \"stdlib.h\"\n#include \"unistd.h\"\n\nint sem_id;\nint shmid;\ntypedef struct sharedMemory{\n    int value;\n}sharedMemory;\n\nunion semun {\n    int                 val;\n    struct semid_ds *   buf;\n    unsigned short *    array;\n};\n\n#define M 4\n#define N 2\n\ntypedef enum semIndex{\n    mutex= 0,\n    all=1,\n    new=2\n}semIndex;\n\n\nint sem_init(semIndex index,int val){\n    union semun sem_union;\n    sem_union.val = val;\n    if (semctl(sem_id, index, SETVAL, sem_union) == -1) return 0;\n    return 1;\n}\n\nint up(semIndex index) {\n    struct sembuf sem_b;\n    sem_b.sem_num = index;\n    sem_b.sem_op = 1;\n    if (semop(sem_id, &amp;sem_b, 1) == -1) {\n        perror(\"Failed to up\");\n        return 0;\n    }\n    return 1;\n}\n\nint down(semIndex index) {\n    struct sembuf sem_b;\n    sem_b.sem_num = index;\n    sem_b.sem_op = -1;\n    if (semop(sem_id, &amp;sem_b, 1) == -1) {\n        perror(\"Failed to up\");\n        return 0;\n    }\n    return 1;\n}\n\nvoid *getShMemory(int memory) {\n    shmid = shmget((key_t)1234+memory, sizeof(sharedMemory), 0666 | IPC_CREAT);\n    if (shmid == -1) {\n        fprintf(stderr, \"shmget failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n    void* shared_memory = shmat(shmid, (void *)0, 0);\n    if (shared_memory == (void *)-1) {\n        fprintf(stderr, \"shmat failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n    return shared_memory;\n}\n\nint main(void){\n    srand(getpid() + rand()%500);\n    int *array = malloc(M * sizeof(int));\n    for (int i = 0; i &lt; M; ++i) {\n        array[i] = rand() % 20;\n    }\n    sem_id = semget(6846, 3, 0666 | IPC_CREAT);\n    sharedMemory *sharedMem = (sharedMemory*) getShMemory(2);\n    sem_init(all,1);\n    sem_init(mutex,1);\n    sem_init(new,0);\n    pid_t pid = fork();\n    if (pid&gt;0){\n        for (int i = 0; i &lt; M; ++i) {\n            down(all);\n            down(mutex);\n            sharedMem-&gt;value = array[i];\n            up(mutex);\n            up(new);\n        }\n        for (int j = 0; j &lt; M; ++j) {\n            printf(\"%d,\",array[j]);\n        }\n        putchar('\\n');\n    }\n    else{\n        sem_id = semget(6846, 3, 0666 | IPC_CREAT);\n        int *array = malloc(M*sizeof(int));\n        sharedMemory* consumerMem = (sharedMemory*)getShMemory(1);\n        down(new);\n        consumerMem-&gt;value = 0;\n\n        for(int i=0;i&lt;N;++i){\n                if(fork() == 0) {\n                    for (int j = 0; j &lt; M; ++j) {\n                        down(mutex);\n                        consumerMem = (sharedMemory*)getShMemory(1);\n                        sharedMemory *sharedMem = (sharedMemory*) getShMemory(2);\n                        array[j] = sharedMem-&gt;value;\n                        consumerMem-&gt;value++;\n                        up(mutex);\n\n                        if (consumerMem-&gt;value == N) {\n                            down(mutex);\n                            consumerMem-&gt;value = 0;\n                            up(mutex);\n                            up(all);            //signal producer to create new element\n                        }\n                        down(new);   //wait for new element\n                        up(new);     //unblock one more consumer\n                    }\n                    for (int j = 0; j &lt; M; ++j) {\n                        printf(\"%d,\",array[j]);\n                    }\n                    putchar('\\n');\n                    exit(0);\n                }\n            }\n        }\n}\n</code></pre>\n\n<p>Sometimes it works as intended so it ought to be a race condition but I can't pinpoint it.Any clues?</p>\n\n<p><em>Update:</em>\nI managed to run debug with Clion. I can't replicate the problem with the debugger so it's even harder to pinpoint the problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1511363955, "post_id": 47438200, "comment_id": 81830879, "body": "Read about <code>printf</code> and the format specifiers. You are not using them correctly. Also your variables are uninitialized when used."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1511364052, "post_id": 47438200, "comment_id": 81830954, "body": "If you are new to programming, why don&#39;t you start with Visual Basic?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1511364096, "post_id": 47438200, "comment_id": 81830988, "body": "@PaulOgilvie Hm. I would go with Python...."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 5, "creation_date": 1511364111, "post_id": 47438200, "comment_id": 81831004, "body": "@PaulOgilvie Probably because he wants to learn about, you know, programming?"}, {"owner": {"reputation": 1820, "user_id": 7209631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ad26cdac82ab360fb4fd572febf351?s=128&d=identicon&r=PG&f=1", "display_name": "Baris Yakut", "link": "https://stackoverflow.com/users/7209631/baris-yakut"}, "edited": false, "score": 1, "creation_date": 1511364142, "post_id": 47438200, "comment_id": 81831040, "body": "Did you compile this with warnings on?"}, {"owner": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 0, "creation_date": 1511364160, "post_id": 47438200, "comment_id": 81831051, "body": "Think about the fact that your for loop is storing a value and replacing it at each turn. Think of doing the job inside your for loop."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1511364283, "post_id": 47438200, "comment_id": 81831144, "body": "@FelixPalmen, VB is a perfectly suitable language for many tasks. And it learns you how to program. C is like a chain saw in programming; you can do anything with it but has a steep and long learning curve."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1511364286, "post_id": 47438200, "comment_id": 81831146, "body": "If you compile with warnings the compiler will warn for reading variables before assigning them. Try initializing <code>ot</code>, <code>oc</code>, <code>et</code> and <code>ec</code> to <code>0 </code>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1511364296, "post_id": 47438200, "comment_id": 81831158, "body": "what&#39;s your reasoning behind using <code>float</code>s?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1511364433, "post_id": 47438200, "comment_id": 81831279, "body": "Note: <code>for(count=0;count&lt;=5;count++)</code> does not &quot;get 5 integer outputs&quot; but 6."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511364553, "post_id": 47438200, "comment_id": 81831372, "body": "You are supplying <code>int oc</code> and <code>int ec</code> as parameters for <code>%f</code> format which is expecting <code>double</code> (or <code>float</code> which will be promoted to <code>double</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1511364556, "post_id": 47438200, "comment_id": 81831377, "body": "@PaulOgilvie even IF you prefer a language without UB for a beginner (apart from that, C is nice, clean, relatively small and logical, so I personally think, quite suitable) -- VB is the worst choice ever, IMHO."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511364663, "post_id": 47438200, "comment_id": 81831457, "body": "@WeatherVane - actually, in the code he wrote he doesn&#39;t get 6 (or 5) inputs, he only gets one :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1511364696, "post_id": 47438200, "comment_id": 81831480, "body": "You should add a newline to the end of each of the format strings in the <code>printf()</code> calls so that each output appears on a different line.  Or you need a space at the start of the second and subsequent calls so that the output is not all run together."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1511364767, "post_id": 47438200, "comment_id": 81831529, "body": "@KevinDTimm he gets 6 inputs. Each overwrites the last."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511364962, "post_id": 47438200, "comment_id": 81831673, "body": "@WeatherVane - he gets an input 6 times - but leaves the loop with one value.  Also, note the :)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511365175, "post_id": 47438200, "comment_id": 81831826, "body": "regarding: <code>for(count=0;count&lt;=5;count++){         printf(&quot;enter a odd or even number :&quot;);         scanf(&quot;%d&quot;,&amp;n);     }</code>  this will overlay all the input values, so, in the end, the variable <code>n</code> will only contain the last value entered.  Also, always check the returned value from <code>scanf()</code>.  Suggest: <code>#define NUM_INPUTS 5  int n[ NUM_INPUTS ]]; for( count=0; count&lt;NUM_INPUTS; count++ ) {         printf(&quot;enter a odd or even number : &quot;);         if( 1 != scanf(&quot;%d&quot;,&amp;n[ count ]) ) { fprintf( stderr, &quot;scanf for  input %d failed\\n&quot;, count ); exit( EXIT_FAILURE ); }</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1511365852, "post_id": 47438200, "comment_id": 81832319, "body": "&quot;If you are new to programming, why don&#39;t you start with Visual Basic?&quot; Horrible advise. &quot;In programming indices start with 0. Except when they start with 1. Now write a program using arrays.&quot; Umm..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1511366546, "post_id": 47438200, "comment_id": 81832833, "body": "C is a very bad language to learn by trial&amp;error. For other&#39;s it is just a bad idea. Get a good C book and work through the lessons."}], "answers": [{"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 1, "creation_date": 1511375645, "post_id": 47438516, "comment_id": 81838358, "body": "And change your printf&#39;s to use %d instead of %f."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1511379963, "post_id": 47438516, "comment_id": 81840572, "body": "@DanKorn - edited"}], "tags": [], "owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1511379948, "last_edit_date": 1511379948, "creation_date": 1511364884, "answer_id": 47438516, "question_id": 47438200, "link": "https://stackoverflow.com/questions/47438200/why-does-this-code-print-big-values-instead-of-the-totals-i-expect/47438516#47438516", "title": "Why does this code print big values instead of the totals I expect?", "body": "<p>Change your accumulators to integers and initialize them:</p>\n\n<pre><code>int oc, ot, ec, et;\noc = ot = ec = et = 0;\n</code></pre>\n\n<p>Move the closing brace as follows:</p>\n\n<pre><code>for(count=0;count&lt;=5;count++){\n    printf(\"enter a odd or even number :\");\n    scanf(\"%d\",&amp;n);\n\n    answer=n%2; \n    if (answer&gt;0){  \n        oc=oc+1;\n        ot=n+ot;\n    }\n    else {\n        ec=ec+1;\n        et=n+et;\n    }\n}\n</code></pre>\n\n<p>and change your printf's to use %d instead of %f</p>\n\n<pre><code>printf(\"odd counter is %d\",oc);\nprintf(\"odd counter is %d\",ot);\nprintf(\"even counter is %d\",ec);\nprintf(\"even counter is %d\",et);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1511368165, "last_edit_date": 1511368165, "creation_date": 1511367468, "answer_id": 47439387, "question_id": 47438200, "link": "https://stackoverflow.com/questions/47438200/why-does-this-code-print-big-values-instead-of-the-totals-i-expect/47439387#47439387", "title": "Why does this code print big values instead of the totals I expect?", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>properly checks for errors</li>\n<li>has no undefined behavior</li>\n<li>documents why each header file is being included</li>\n<li>performs the desired functionality</li>\n<li>uses no 'magic' numbers, 'magic' numbers are numbers with no basis.  I.E. 5.  See the <code>#define</code> and where the resulting (meaningful) name is being used.</li>\n<li>handles each input, as it is input</li>\n<li>uses text in the <code>printf()</code> statements that accurately says what the value being output actually means</li>\n<li>uses proper formatting of each output value.</li>\n<li>caveat: does not check for overflow of the summed values</li>\n<li>properly writes the <code>for()</code> loop.</li>\n<li>follows the axiom: <em>only one statement per line and (at most) one variable declaration per statement.</em></li>\n<li>uses appropriate horizontal spacing (for readability) inside parens, after commas, after semicolons, around C operators.</li>\n<li>was compiled on linux using:\n<code>gcc -c main.c -Wall -Wextra -pedantic -Wconversion -std=gnu11 -o main.o</code></li>\n<li>was linked on linux using:\n<code>gcc main.o -o main</code></li>\n<li>was run using:\n<code>./main</code></li>\n</ol>\n\n<p>And now the proposed coded:</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // printf(), fprintf(), stderr, scanf()\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n\n#define MAX_INPUTS 5\n\nint main( void )\n{\n    int n;\n    int oc = 0;\n    int ec = 0;\n    int ot = 0;\n    int et = 0;\n\n    for( int count = 0; count &lt; MAX_INPUTS; count++ )\n    {\n        printf(\"enter a odd or even number :\");\n        if( 1 != scanf( \"%d\", &amp;n ) )\n        { // then input error\n            fprintf( stderr, \"scanf for input %d failed\\n\", count+1 );\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else, scanf successful\n\n        if ( (n%2) &gt; 0 )\n        {  // input was ODD\n            oc = oc + 1;\n            ot = n + ot;\n        }\n\n        else\n        {  // input was even\n            ec = ec + 1;\n            et = n + et;\n        }\n    }\n\n    printf( \"number of odd inputs is %d\\n\", oc );\n    printf( \"sum of odd inputs is %d\\n\", ot );\n    printf( \"number of even inputs is %d\\n\", ec );\n    printf( \"sum of even inputs is %d\\n\", et );\n}\n</code></pre>\n\n<p>the output of a typical run of the code:</p>\n\n<pre><code>enter a odd or even number :1\nenter a odd or even number :2\nenter a odd or even number :3\nenter a odd or even number :4\nenter a odd or even number :5\nnumber of odd inputs is 3\nsum of odd inputs is 9\nnumber of even inputs is 2\nsum of even inputs is 6\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5033535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28349debc1781793341caf57479a0bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/5033535/zen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1511400444, "accepted_answer_id": 47439387, "answer_count": 2, "score": -1, "last_activity_date": 1511379948, "creation_date": 1511363866, "last_edit_date": 1511364751, "question_id": 47438200, "link": "https://stackoverflow.com/questions/47438200/why-does-this-code-print-big-values-instead-of-the-totals-i-expect", "closed_reason": "Not suitable for this site", "title": "Why does this code print big values instead of the totals I expect?", "body": "<p>I'm trying to get 5 integer outputs and display odd count, even count, odd total and even total.  This code gives me bigger total values.  What's the problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int n,count,oc,ec;\n    float ot,et,answer;\n\n    for(count=0;count&lt;=5;count++){\n        printf(\"enter a odd or even number :\");\n        scanf(\"%d\",&amp;n);\n    }\n    answer=n%2; \n    if (answer&gt;0){  \n        oc=oc+1;\n        ot=n+ot;\n    }\n\n    else {\n        ec=ec+1;\n        et=n+et;\n    }\n    printf(\"odd counter is %f\",oc);\n    printf(\"odd counter is %f\",ot);\n    printf(\"even counter is %f\",ec);\n    printf(\"even counter is %f\",et);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "server"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511363760, "post_id": 47438111, "comment_id": 81830732, "body": "You&#39;re opening the file in text mode, this <i>might</i> be the problem."}, {"owner": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1511363939, "post_id": 47438111, "comment_id": 81830867, "body": "And what mode I should use?"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1511364006, "post_id": 47438111, "comment_id": 81830916, "body": "Binary mode.  That is very likely the problem"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511364009, "post_id": 47438111, "comment_id": 81830920, "body": "binary, of course?"}, {"owner": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1511364108, "post_id": 47438111, "comment_id": 81831001, "body": "I change code and now open file in binary mode, but it doesn&#39;t work either."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1511364272, "post_id": 47438111, "comment_id": 81831137, "body": "Are those few lines the only content of the packet captured with Wireshark?"}, {"owner": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1511364322, "post_id": 47438111, "comment_id": 81831180, "body": "Yes, only this."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511364442, "post_id": 47438111, "comment_id": 81831289, "body": "[apart from the open()-mode] You are reading a binary file with fgets(). (also: you seem to like strlen() a lot.) And: you should always use the return values you get from both read() and write()."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1511375984, "post_id": 47438111, "comment_id": 81838536, "body": "Yes, as a general rule, any network code with strlen() in it is broken."}], "answers": [{"comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1511364257, "post_id": 47438259, "comment_id": 81831121, "body": "Ah...  Updated answer"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1511365041, "post_id": 47438259, "comment_id": 81831732, "body": "In your case I\u2019d expect each element to be one byte. You would attempt to read the number of bytes matching the size of your read buffer."}], "tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 2, "last_activity_date": 1511364290, "last_edit_date": 1511364290, "creation_date": 1511364056, "answer_id": 47438259, "question_id": 47438111, "link": "https://stackoverflow.com/questions/47438111/c-http-server-on-sockets-doesnt-display-image-correct/47438259#47438259", "title": "c- HTTP server on sockets doesn&#39;t display image correct", "body": "<p>It is quite likely that you are not opening the image file in binary mode:</p>\n\n<pre><code> {\n   FILE *fp;\n   char buffer[512];\n\n   fp = fopen(\"image_file.png\", \"rb\");\n   while...\n</code></pre>\n\n<p>If you do not specify binary mode, you will have weird stuff happen to your binary data.</p>\n\n<p>Additionally, you are using <code>fgets</code>, which by its very nature will be incompatible with what you are trying to do with binary data.  You should look into using <code>fread()</code></p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 2, "last_activity_date": 1511365112, "last_edit_date": 1511365112, "creation_date": 1511364723, "answer_id": 47438461, "question_id": 47438111, "link": "https://stackoverflow.com/questions/47438111/c-http-server-on-sockets-doesnt-display-image-correct/47438461#47438461", "title": "c- HTTP server on sockets doesn&#39;t display image correct", "body": "<p>You must open the image file in binary mode.</p>\n\n<p>You must use binary file read operations. The buffer you now read does not have an <code>strlen</code> because it is binary; the size of the buffer is reported by the <code>read</code> operation.</p>\n\n<p>Writing to the socket will also be binary and so <code>write(sock, pbuf, strlen(pbuf));</code> will not work, rather use <code>write(sock, pbuf, n_bytes);</code> with <code>n_bytes</code> the number of bytes from the buffer you want to send.</p>\n\n<p>It could mean re-writing your code to use all binary operations. A css and html file can just as easily be transmitted treating it as binary as treating it as text. If you change your code to all-binary you will not have a problem with any type of file.</p>\n"}], "owner": {"reputation": 47, "user_id": 7828034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f9e89a3e9555b90e722c6c9d308abd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u0411\u0435\u043b\u0430\u043d", "link": "https://stackoverflow.com/users/7828034/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%91%d0%b5%d0%bb%d0%b0%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 47438461, "answer_count": 2, "score": 2, "last_activity_date": 1511365112, "creation_date": 1511363613, "last_edit_date": 1511364344, "question_id": 47438111, "link": "https://stackoverflow.com/questions/47438111/c-http-server-on-sockets-doesnt-display-image-correct", "title": "c- HTTP server on sockets doesn&#39;t display image correct", "body": "<p>My task is to implement a simple HTTP server. I try to open a site that  I download via HTTP. My server displays html, css and js files properly, but images(png, jpg) don't get displayed. I logged those response packets with Wireshark:</p>\n\n<pre><code>HTTP/1.1 200 OK\nConnection: keep-alive\nTransfer-Encoding: chunked\n.PNG\n.\n</code></pre>\n\n<p>Also this is my function that read request and send response to client.</p>\n\n<pre><code>static int serve_request(int sock, struct conf_arg *arg, char version[])\n{\n    FILE *html = NULL;\n    char buf[MAX_MSG];\n    const unsigned chunk = (unsigned)CHUNK_SIZE;\n    char *pbuf = NULL;\n    char tempbuf[CHUNK_SIZE + 3];\n    size_t len;\n\n    strcpy(buf, arg-&gt;root);\n    if(buf[strlen(buf) - 1] == '/')\n        strcat(buf, arg-&gt;defdoc);\n    html = fopen(buf, \"rb\");\n    if (!html) {\n        not_found(sock, version);\n        return -1;\n    }\n    good_responce(sock, version);\n    do {\n        if (fgets(buf, sizeof(buf), html) == NULL)\n            break;\n        pbuf = buf;\n        while ((len = strlen(pbuf)) != 0) {\n            if (len &lt; chunk) {\n                //printf(\"LEN:%d\\n\", (int)len);\n                sprintf(tempbuf, \"%x\\r\\n\", (int)len);\n                write(sock, tempbuf, strlen(tempbuf));\n                write(sock, pbuf, strlen(pbuf));\n                //printf(\"%s\", pbuf);\n                pbuf += len;\n                write(sock, \"\\r\\n\", 2);\n            } else {\n                sprintf(tempbuf, \"%x\\r\\n\", (int)chunk);\n                write(sock, tempbuf, strlen(tempbuf));\n                //strncpy(tempbuf, pbuf, chunk);\n                //printf(\"%d\\n%s\\n\", (int)chunk, tempbuf);\n                write(sock, pbuf, chunk);\n                pbuf += chunk;\n                write(sock, \"\\r\\n\", 2);\n            }\n        }\n    } while (!feof(html));\n    strcpy(tempbuf, \"0\\r\\n\\r\\n\");\n    write(sock, tempbuf, strlen(tempbuf));\n    fclose(html);\n    return 0;\n}\n</code></pre>\n\n<p>I can't figure out where the problem is, so I hope you can help me.<br>\nUPD: I change open mode to rb, but it doesn't help. I get same output in Wireshark. </p>\n"}, {"tags": ["c", "pointers", "syntax"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1511362777, "post_id": 47437772, "comment_id": 81829959, "body": "It&#39;s not dereferencing but a type. Context matters."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1511362952, "post_id": 47437772, "comment_id": 81830100, "body": "<code>*</code> can mean a whole lot of different things in the C language, depending on context. Your C programming book should make this clear."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511364030, "post_id": 47437772, "comment_id": 81830941, "body": "I have a sense of duplication."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1511364115, "post_id": 47437772, "comment_id": 81831007, "body": "Definitely duplication"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1511364231, "post_id": 47437772, "comment_id": 81831103, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3815095/c-pointers-different-address\">C pointers - Different address</a>"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1511370762, "post_id": 47437792, "comment_id": 81835712, "body": "@DavidBowling that&#39;s obviously there, comes with the understanding of types themselves."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1511370725, "last_edit_date": 1592644375, "creation_date": 1511362743, "answer_id": 47437792, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47437792#47437792", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p>That's the definition of a pointer, the type for <code>address_of_x</code> variable is <code>int *</code>, a pointer to <code>int</code>. There's no &quot;dereference&quot; happening there.</p>\n<blockquote>\n<p>Why isn't it written as:</p>\n<pre><code>   int address_of_x = &amp;x;\n</code></pre>\n</blockquote>\n<p>Well, two things</p>\n<ul>\n<li>C is a strongly typed language.</li>\n<li>the variable names do not carry any connection with their type</li>\n</ul>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1511363345, "creation_date": 1511363345, "answer_id": 47437999, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47437999#47437999", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p>In an <em>expression</em>, the <code>*</code> is the dereference operator. In a <em>declaration</em> (which you have here), it's part of the syntax of a <em>pointer declarator</em>. You're declaring <code>address_of_x</code> to be a <em>pointer to <code>int</code></em> rather than just an <code>int</code>.</p>\n\n<p>The idea that was behind this syntax is that declarations and usage of identifiers should look similar (you typically <strong>use</strong> a pointer by dereferencing it) for convenience.</p>\n\n<p>Also note that the <code>*</code> is needed for every identifier declared as a pointer, even if you declare multiple identifiers in a single declaration, like this:</p>\n\n<pre><code>int *a, *b;\n</code></pre>\n\n<p>If you write</p>\n\n<pre><code>int *a, b;\n</code></pre>\n\n<p>instead, <code>b</code> would <strong>not</strong> be a pointer. In general, it's best practice to avoid declaring more than one identifier per declaration, though.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1511363751, "creation_date": 1511363751, "answer_id": 47438157, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47438157#47438157", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p><code>int *address_of_x = &amp;x;</code> <em>declares</em> a variable of type \"pointer to int\" (<code>int *address_of_x</code>) and then <em>initializes</em> it with the address of x (<code>= &amp;x</code>).</p>\n\n<p>So this <code>*</code> is not the dereferencing but is part of the declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1511363782, "creation_date": 1511363782, "answer_id": 47438173, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47438173#47438173", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p>These two snippets are functionally the same:</p>\n\n<pre><code>int *address_of_x = &amp;x;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int *address_of_x;\naddress_of_x = &amp;x;\n</code></pre>\n\n<p>In the first case you defined and initialised the pointer all in one statement, but it can <em>look</em> like the wrong syntax. In the second example the definition and the value assignment are separate statements, and the code is clearer.</p>\n\n<p>There is no dereferencing (yet).</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 2, "last_activity_date": 1511363836, "creation_date": 1511363836, "answer_id": 47438190, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47438190#47438190", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p><code>int *address_of_x = &amp;x;</code> isn't an assignment. <code>int *address_of_x = &amp;x;</code> is a <strong>declaration</strong> (<code>int *address_of_x</code>) with <strong>initialization</strong> (<code>= &amp;x</code>) (note that in pre-historic C, initializations (as opposed to assignments) were done without the <code>=</code>, which made them even more distinct from assignments). </p>\n\n<p>Declarations in C mirror usage. <code>int *address_of_x</code> declares that <code>*address_of_x</code> is of type <code>int</code>, ergo <code>address_of_x</code> is of type <em>pointer to int</em>. The <code>= &amp;x</code> part then initializes this <em>pointer to int</em> to <code>&amp;x</code> (address of <code>x</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 1, "last_activity_date": 1511364467, "last_edit_date": 1511364467, "creation_date": 1511363941, "answer_id": 47438225, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47438225#47438225", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p>Simple answer: <strong>The asterisk in a variable declaration or definition statement is NOT a dereference operator.</strong> Instead it's a modifier.</p>\n\n<p>In the given context, an asterisk means \"Define the mext identifier as a pointer to the base type\".</p>\n\n<p>You surely won't ask why <code>[10]</code> doesn't mean \"take the 10th element of the array\" in <code>int a[10]</code>. Well, so-so. The brackets here also aren't the bracket operator, for exactly the same reason.</p>\n\n<blockquote>\n  <p>Why isn't it written as:</p>\n\n<pre><code>   int address_of_x = &amp;x;\n</code></pre>\n</blockquote>\n\n<p>The compiler <em>never</em> tries to interpret the literal meaning of identifiers. It only looks for modifiers when determining the type of an iddentifier in a declaration statement.</p>\n\n<p>i.e., this code will not work as what it looks like:</p>\n\n<pre><code>int *not_a_pointer, not_an_array[10];\nfloat a_character;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1511365863, "creation_date": 1511365863, "answer_id": 47438862, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres/47438862#47438862", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p><code>*</code> in <code>int *address_of_x = &amp;x;</code> is not de-referencing <a href=\"https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres#comment81829959_47437772\">@Eugene Sh</a>.<br>\nIt is part of the type declaration: <a href=\"https://cdecl.org/?q=int+*address_of_x%3B\" rel=\"nofollow noreferrer\">pointer to int</a>.</p>\n\n<pre><code>int x = 4;\nint *address_of_x = &amp;x;\n</code></pre>\n\n<p>same as  </p>\n\n<pre><code>int x = 4;          // declare x as int\nint *address_of_x;  // declare address_of_x as pointer to int\naddress_of_x = &amp;x;  // Assign the address of x to address_of_x\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Why isn't it written as: <code>int address_of_x = &amp;x;</code></p>\n</blockquote>\n\n<p><code>&amp;x</code> is not an <code>int</code>.  <code>&amp;x</code> is an <code>int *</code>, a pointer (or address).  A pointer is not an integer.</p>\n"}], "owner": {"reputation": 473, "user_id": 6515530, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HmvF7.jpg?s=128&g=1", "display_name": "Data", "link": "https://stackoverflow.com/users/6515530/data"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 47438862, "answer_count": 7, "score": 3, "last_activity_date": 1511370725, "creation_date": 1511362685, "last_edit_date": 1511362746, "question_id": 47437772, "link": "https://stackoverflow.com/questions/47437772/pointers-in-c-why-is-the-needed-in-address-of-x-x-when-getting-the-addres", "title": "Pointers in C: why is the * needed in *address_of_x = &amp;x when getting the address of x?", "body": "<p>Suppose we have the following code, which takes <code>x</code>, stores the value <code>4</code> in it, then stores the address of <code>x</code> in a pointer variable:</p>\n\n<pre><code>int x = 4;\nint *address_of_x = &amp;x;\n</code></pre>\n\n<p>What is the purpose of the <code>*</code> in <code>int *address_of_x</code>?\nI understand <code>*</code> to be used for dereferencing a pointer - it takes an address and tells you what's stored there. But if an address is being stored, then what are we dereferencing? Or are we not dereferencing anything at all? Why isn't it written as:</p>\n\n<pre><code>int address_of_x = &amp;x;\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1511362843, "post_id": 47437743, "comment_id": 81830013, "body": "If your table is <code>[Y][MAX]</code> the problem is probably that <code>x_size &lt; MAX</code> so you better do two loops."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1511362859, "post_id": 47437743, "comment_id": 81830028, "body": "@PaulOgilvie yes, true."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1511362881, "post_id": 47437743, "comment_id": 81830048, "body": "(1/3) is zero by the way."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1511362800, "creation_date": 1511362800, "answer_id": 47437809, "question_id": 47437743, "link": "https://stackoverflow.com/questions/47437743/iterating-using-pointers-works-only-on-half-of-an-array/47437809#47437809", "title": "Iterating using pointers works only on half of an array", "body": "<p>With</p>\n\n<pre><code>void blur(int table[][MAX], int x_size, int y_size)\n</code></pre>\n\n<p>the <code>table</code> in <code>blur</code> is a pointer to arrays of <code>int</code>, each of the size <code>MAX</code>. I'm not sure this is what you want, but if your array is indeed shaped that way, you'll have <code>MAX - x_size</code> <em>unused</em> entries in every \"row\". If you just try to access entries by an <code>int</code> pointer and an offset, you will access these unused entries as well.</p>\n\n<hr>\n\n<p>Apart from that, a conversion from <code>int (*)[MAX]</code> (pointer to an array of <code>int</code>, this is what you actually pass to your function) to <code>int *</code> (pointer to <code>int</code>) is not correct and not allowed. So better forget about your idea entirely.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1511363214, "creation_date": 1511363214, "answer_id": 47437953, "question_id": 47437743, "link": "https://stackoverflow.com/questions/47437743/iterating-using-pointers-works-only-on-half-of-an-array/47437953#47437953", "title": "Iterating using pointers works only on half of an array", "body": "<p>As Felix points out, your approach is not correct. Consider the following approach:</p>\n\n<pre><code>int matrix_main(void)\n{\n    int *matrix= malloc(x_size*y_size*sizeof(int));\n    //\n    // now fill matrix (not shown)\n    //\n    // now blur it\n    blur(matrix, x_size, y_size);\n    //...\n}\nvoid blur(int *ptr, int x_size, int y_size){\n   for(int i=0;i&lt;x_size*y_size-1;i++)\n      ptr[i]= (int) ((1/3.0)*(ptr[i-1]+ptr[i]+ptr[i+1]))\n}\n</code></pre>\n\n<p>Note that algorithmaticly speaking, you are processing each pixel muliple times. Maybe better to create a new matrix. Then you can properly process it as a blur of all surrounding pixels.</p>\n"}], "owner": {"reputation": 1, "user_id": 8179988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505986b3b93986ac5aa6b1eb9345c68a?s=128&d=identicon&r=PG&f=1", "display_name": "Moorzyn", "link": "https://stackoverflow.com/users/8179988/moorzyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511380354, "creation_date": 1511362605, "last_edit_date": 1511380354, "question_id": 47437743, "link": "https://stackoverflow.com/questions/47437743/iterating-using-pointers-works-only-on-half-of-an-array", "title": "Iterating using pointers works only on half of an array", "body": "<p>I have got problem with my program. I need to iterate over a two-dimensional array and operate on its values (actually it is a .pgm image). Double <em>for</em> loops works great, but I wanted to use pointers. So I tried something like this:</p>\n\n<pre><code>#define MAX 256\n.\n. \n.\nvoid blur(int table[][MAX], int x_size, int y_size){\n   int *ptr = table;\n   for(int i=0;i&lt;x_size*y_size;i++)\n      ptr[i]= (int) ((1/3)*(ptr[i-1]+ptr[i]+ptr[i+1]))\n}\n</code></pre>\n\n<p>And it works only for half of an array. Multiplying x_size*y_size by 2 solves the problem, but isn't it a bad practice?</p>\n\n<p>By the way, this function should blur given picture horizontally. Is it correct?</p>\n"}, {"tags": ["c", "printf", "stdin", "stdio"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511362017, "post_id": 47437507, "comment_id": 81829368, "body": "@EugeneSh. Depends."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511362034, "post_id": 47437507, "comment_id": 81829380, "body": "@iBug Yeah, it could be macro. Removed the comment"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1511362718, "post_id": 47437537, "comment_id": 81829905, "body": "The C standard (any version) requires them to be macros, &quot;which are expressions of type \u2018\u2018pointer to FILE\u2019\u2019 that point to the FILE objects associated, respectively, with the standard error, input, and output streams.&quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511365447, "post_id": 47437537, "comment_id": 81832010, "body": "POSIX avoids contradicting the C standard and requires macros, too: <i>The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdio.h.html\" rel=\"nofollow noreferrer\"><code>&lt;stdio.h&gt;</code></a> header shall define the following macros which shall expand to expressions of type &quot;pointer to FILE&quot; that point to the FILE objects associated, respectively, with the standard error, input, and output streams: <code>stderr</code> Standard error output stream. <code>stdin</code> Standard input stream. <code>stdout</code> Standard output stream.</i>. Nothing stops the macros being <code>#define stdin stdin</code> etc. On a Mac, they&#39;re mapped to internal names: <code>#define stdin __stdinp</code>."}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 1, "last_activity_date": 1511363320, "last_edit_date": 1511363320, "creation_date": 1511362006, "answer_id": 47437537, "question_id": 47437507, "link": "https://stackoverflow.com/questions/47437507/where-to-find-stdin-macro-declaration/47437537#47437537", "title": "Where to find `stdin` macro declaration?", "body": "<p>Find it here (Unix):</p>\n\n<pre><code>/usr/include/stdio.h\n</code></pre>\n\n<p>Or on Windows: </p>\n\n<pre><code>(Compiler Path)\\include\\stdio.h\n</code></pre>\n\n<p>Note that the ISO C standard requires <code>stdin</code>/<code>stdout</code>/<code>stderr</code> to be macros, while POSIX requires them to be external <code>FILE*</code> identifiers, so you may see this on POSIX-compliant systems (Linux and others):</p>\n\n<pre><code>#define stdin stdin\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1511362647, "post_id": 47437557, "comment_id": 81829833, "body": "No, the stdin macro is defined in stdio.h, period. This is explicitly specified by 7.21.1."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1511364109, "post_id": 47437557, "comment_id": 81831002, "body": "@Lundin If the <code>&lt;stdio.h&gt;</code> header consists entirely of <code>#include &lt;bits&#47;stdio.h&gt;</code>, and that defines <code>stdin</code>, then I would argue that this qualifies as <code>&lt;stdio.h&gt;</code> defining <code>stdin</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511364330, "post_id": 47437557, "comment_id": 81831188, "body": "However, when it comes time to <code>fclose(stream)</code>, you might want to avoid doing that if you previously set <code>stream = stdin;</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511364982, "post_id": 47437557, "comment_id": 81831693, "body": "@DanielH The standard explicitly says that stdin is a macro and <i>the macro</i> is defined in stdio.h. This isn&#39;t something to debate, C11 7.21.1. As for the contents of the macro, that may very well be something like an external pointer variable declaration."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1511367203, "post_id": 47437557, "comment_id": 81833292, "body": "I\u2019m not arguing about it being a macro. I\u2019m saying that the phrase \u201cThe header <i><code>&lt;stdio.h&gt;</code></i> defines several macros\u201d does not mean that there is a file called <code>stdio.h</code> somewhere on the filesystem which has a <code>#define</code> in it. The contents of <code>&lt;stdio.h&gt;</code> might be in a file not called <code>stdio.h</code>, or they might not be in any file, but hardcoded into the compiler or generated on the fly. See 6.10.2p2. If the implementation defines \u201cthe entire contents of the header\u201d to be \u201cthe pre-processed contents of the file /usr/include/stdio.h\u201d, then that file can include its own files which define the macros."}, {"owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "edited": false, "score": 0, "creation_date": 1511380119, "post_id": 47437557, "comment_id": 81840655, "body": "Yes, thats what I did when I thought a while longer about it. Thank you for your effort."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1511362053, "creation_date": 1511362053, "answer_id": 47437557, "question_id": 47437507, "link": "https://stackoverflow.com/questions/47437507/where-to-find-stdin-macro-declaration/47437557#47437557", "title": "Where to find `stdin` macro declaration?", "body": "<p>The <code>stdin</code> macro is defined either in stdio.h or a file that it eventually includes.  As long as you <code>#include &lt;stdio.h&gt;</code> you'll have access to it.</p>\n\n<p>For what you're doing, you don't need to perform a separate open.  Just copy <code>stdin</code> to your file pointer:</p>\n\n<pre><code>  if (mode == 'v')\n    stream = stdin;\n  else\n    fopen(stream, \"../stream\");\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "closed_date": 1511362091, "answer_count": 2, "score": 0, "last_activity_date": 1511363320, "creation_date": 1511361921, "question_id": 47437507, "link": "https://stackoverflow.com/questions/47437507/where-to-find-stdin-macro-declaration", "closed_reason": "Duplicate", "title": "Where to find `stdin` macro declaration?", "body": "<p>I been trying to write \"simple to use\" output redirection in my module. It suppose to change output of <code>fprintf</code> between some file and <code>stdin</code>.\nSo I been thinking about something like:</p>\n\n<pre><code>    void _connection(char mode) {   /* pass 'v' as an argument to set verbous mode*/\n      FILE *stream\n\n      if (mode == 'v')\n        fopen(stream, \"stdin location?\");\n      else\n        fopen(stream, \"../stream\");\n\n      fprintf(stream, \"Connecting to the queue...\");\n      ...\n      fprintf(stream, \"Some detail information...\");\n      ---\n</code></pre>\n\n<p>Searching my system I been not able to find any stdin declaration. The <code>stdio.h</code> source file, on my system, is using this macro, but I can't get where it get it from. I mean, there is no inputs file or any macro called <code>stdin</code> in this file.</p>\n"}, {"tags": ["c", "arrays", "string", "loops"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1511360354, "post_id": 47436863, "comment_id": 81828153, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1726302/removing-spaces-from-a-string-in-c\">Removing Spaces from a String in C?</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1511360465, "post_id": 47436863, "comment_id": 81828225, "body": "Note that <code>gets</code> is <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used/4309845\">obsolete</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1511360987, "post_id": 47436863, "comment_id": 81828606, "body": "@WeatherVane more importantly, <b><i>dangerous!!!</i></b>"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1511386086, "post_id": 47436863, "comment_id": 81843471, "body": "It seems also that you are mixing up <code>NULL</code> which is a null pointer, and the null character which is usually designated by <code>&#39;\\0&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 8990393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa65fc8304c7ec739ec34848f8abaf4?s=128&d=identicon&r=PG&f=1", "display_name": "\uc774\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/8990393/%ec%9d%b4%ec%a7%80%ec%9b%85"}, "edited": false, "score": 0, "creation_date": 1511360337, "post_id": 47436935, "comment_id": 81828138, "body": "Thank you for helping me! May i ask why i have to use two variables? Why don&#39;t i just use &#39;i&#39; to tell where to go and store elemts?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511360343, "post_id": 47436935, "comment_id": 81828144, "body": "Note that <code>NULL</code> is a pointer value, not a string terminator and has been changed here to <code>&#39;\\0&#39;</code> terminator."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 7, "user_id": 8990393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa65fc8304c7ec739ec34848f8abaf4?s=128&d=identicon&r=PG&f=1", "display_name": "\uc774\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/8990393/%ec%9d%b4%ec%a7%80%ec%9b%85"}, "edited": false, "score": 0, "creation_date": 1511360886, "post_id": 47436935, "comment_id": 81828522, "body": "@\uc774\uc9c0\uc6c5 because <code>str2</code> is <i>uninitialised</i> and you are skipping elements which remain so."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 7, "user_id": 8990393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa65fc8304c7ec739ec34848f8abaf4?s=128&d=identicon&r=PG&f=1", "display_name": "\uc774\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/8990393/%ec%9d%b4%ec%a7%80%ec%9b%85"}, "edited": false, "score": 0, "creation_date": 1511361006, "post_id": 47436935, "comment_id": 81828618, "body": "@\uc774\uc9c0\uc6c5 Take a piece of paper and write &quot;how are you&quot;, you write &quot;how&quot; to str2, then the space, you skip it, but what is at <code>str2[3]</code>? Garbage because you skipped that character in <code>str2</code> too. Using <code>j</code> allows you to track where is the next non-space character supposed to be written in <code>str2</code>."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 3, "last_activity_date": 1511360356, "last_edit_date": 1511360356, "creation_date": 1511360218, "answer_id": 47436935, "question_id": 47436863, "link": "https://stackoverflow.com/questions/47436863/delete-space-error-in-c-programming/47436935#47436935", "title": "Delete space error in C programming", "body": "<p>You need two index variables</p>\n\n<ul>\n<li>one to go through <code>str</code></li>\n<li>one to tell where to write next to <code>str2</code></li>\n</ul>\n\n<p>code:</p>\n\n<pre><code> len = strlen(str);\n int j;\n for (i=0, j=0 ; str[i] != '\\0' ; i++) {\n    if (str[i] != ' '){\n        str2[j++] = str[i]; // store to str2 and increment j\n    }\n}\n</code></pre>\n\n<p>Then store a final <code>\\0</code> to <code>str2</code> at index <code>j</code></p>\n\n<pre><code>str2[j] = '\\0';\n</code></pre>\n\n<p>Finally, to print the result, you can do that one shot</p>\n\n<pre><code>printf(\"%s\\n\", str2);\n</code></pre>\n\n<p>instead of printing one char at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 8990393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa65fc8304c7ec739ec34848f8abaf4?s=128&d=identicon&r=PG&f=1", "display_name": "\uc774\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/8990393/%ec%9d%b4%ec%a7%80%ec%9b%85"}, "edited": false, "score": 0, "creation_date": 1511362699, "post_id": 47437269, "comment_id": 81829892, "body": "Thanks! but it is little bit complicate for me to understand.. i m not good at that &#39;pointer&#39; things..  is better to get practice on using pointer?"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1511363002, "last_edit_date": 1511363002, "creation_date": 1511361254, "answer_id": 47437269, "question_id": 47436863, "link": "https://stackoverflow.com/questions/47436863/delete-space-error-in-c-programming/47437269#47437269", "title": "Delete space error in C programming", "body": "<p>For starters these headers</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n</code></pre>\n\n<p>can be removed because neither declaration from the headers is used in the program.</p>\n\n<p>The function <code>gets</code> is unsafe and is not supported by the C Standard any more. Instead use standard C function <code>fgets</code>.</p>\n\n<p>When <code>str</code> is copied in <code>str2</code> you have to use separate index to access characters in str2 because some characters from <code>str</code> are not copied. Otherwise the array <code>str2</code> will contain gaps. As result you can not use the previous value of the variable <code>len</code> with the array <code>str2</code>.</p>\n\n<p>Also it is desirable not to copy any other white space characters.</p>\n\n<p>The program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n#define SIZE    100\n\nint main(void)\n{\n    char str[SIZE];\n    char str2[SIZE];\n\n    fgets( str, sizeof( str ), stdin );\n\n    const char *p = str;\n    char *p2 = str2;\n\n    do\n    {\n        if ( !isspace( ( unsigned char )*p ) )\n        {\n            *p2++ = *p;\n        }\n    } while ( *p++ );\n\n    for ( p2 = str2; *p2; ++p2 )\n    {\n        printf( \"%c\", *p2 );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might be</p>\n\n<pre><code>Hello   World\nHelloWorld\n</code></pre>\n\n<p>If you do not study yet pointers then the program can look like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n#define SIZE    100\n\nint main(void)\n{\n    char str[SIZE];\n    char str2[SIZE];\n\n    fgets( str, sizeof( str ), stdin );\n\n    size_t i = 0, j = 0;\n\n    do\n    {\n        if ( !isspace( ( unsigned char )str[i] ) )\n        {\n            str2[j++] = str[i];\n        }\n    } while ( str[i++] );\n\n    for ( j = 0; str2[j]; ++j )\n    {\n        printf( \"%c\", str2[j] );\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8990393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa65fc8304c7ec739ec34848f8abaf4?s=128&d=identicon&r=PG&f=1", "display_name": "\uc774\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/8990393/%ec%9d%b4%ec%a7%80%ec%9b%85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511363115, "creation_date": 1511360014, "last_edit_date": 1511363115, "question_id": 47436863, "link": "https://stackoverflow.com/questions/47436863/delete-space-error-in-c-programming", "title": "Delete space error in C programming", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n#pragma warning(disable:4996)\n#define SIZE 100\n\nint main(void){\n\n    char str[SIZE];\n    char str2[SIZE];\n    int i;\n    int len;\n    gets(str);\n\n    len = strlen(str);\n    for (i = 0; str[i] != NULL; i++) {\n        if (str[i] != ' '){\n            str2[i] = str[i];\n        }\n    }\n    for (i = 0; i &lt; len; i++){\n\n        printf(\"%c\", str2[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It returns the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u4q1M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u4q1M.png\" alt=\"screenshot\"></a></p>\n\n<p>What is the problem?</p>\n\n<p>I just want to copy some elements in <em>str</em> to <em>str2</em> without spaces, but when I run, it has got some weird letters.</p>\n"}, {"tags": ["c", "pointers", "structure", "scanf"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1511359554, "post_id": 47436678, "comment_id": 81827619, "body": "Please don&#39;t type up code for the question on the fly. Do it offline first, compile it and then copy paste. Your code cannot be something you actually tried. It&#39;s ill-formed all around."}, {"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511359792, "post_id": 47436678, "comment_id": 81827765, "body": "it was a typo i have edited"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511359945, "post_id": 47436678, "comment_id": 81827857, "body": "Note that the local variable <code>i</code> in <code>main()</code> is unused, and wholly unrelated to the structure member of the same name."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1511360154, "post_id": 47436678, "comment_id": 81827991, "body": "Also note that the arrow operator is vastly preferable to the \u2018star-dot\u2019 notation when you need more than one level. For example, <code>p-&gt;next-&gt;next</code> is far easier to type and read than the equivalent using stars and dots and parentheses."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511360270, "post_id": 47436716, "comment_id": 81828078, "body": "Can you please explain why am i able to dereference (p-&gt;i)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511360425, "post_id": 47436716, "comment_id": 81828199, "body": "@rimiro not sure I understand your question. :("}, {"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511360621, "post_id": 47436716, "comment_id": 81828335, "body": "My question is why is  <code>&amp;(p-&gt;i)</code> representing the address of the member var <code>i</code>.   What is confusing me is since p is a pointer then why <code>p-&gt;i</code> not a pointer to the member variable i."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 1, "creation_date": 1511360809, "post_id": 47436716, "comment_id": 81828462, "body": "@rimiro nope, the <code>-&gt;</code> only gives you the member, not a pointer to the member."}, {"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511360928, "post_id": 47436716, "comment_id": 81828551, "body": "that was what i wanted to know"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1511359564, "creation_date": 1511359564, "answer_id": 47436716, "question_id": 47436678, "link": "https://stackoverflow.com/questions/47436678/using-pointer-to-struct-to-read-member-variables/47436716#47436716", "title": "Using Pointer to Struct to read member Variables", "body": "<p>In your case </p>\n\n<ul>\n<li><code>&amp;p-&gt;i</code> is the same as <code>&amp;(p-&gt;i)</code> because of the <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>.</li>\n<li><code>&amp;(*p).i</code> is the same as <code>&amp;(p-&gt;i)</code>.</li>\n</ul>\n\n<p>and they both produce a pointer to an integer, as required by the <code>scanf()</code> function argument based on the supplied conversion specifier.</p>\n\n<p>However, </p>\n\n<pre><code> scanf(\"%d\",p-&gt;i);\n</code></pre>\n\n<p>is not valid, as <code>p-&gt;i</code> gives you an <code>int</code>, whereas, you need a pointer to integer.</p>\n"}, {"tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 2, "last_activity_date": 1511359937, "creation_date": 1511359937, "answer_id": 47436842, "question_id": 47436678, "link": "https://stackoverflow.com/questions/47436678/using-pointer-to-struct-to-read-member-variables/47436842#47436842", "title": "Using Pointer to Struct to read member Variables", "body": "<p><code>scanf</code> expects a pointer to something, in order to <em>store</em> data according to the format you provide to the function.</p>\n\n<pre><code>scanf(\"%d\",&amp;p-&gt;i); // I am advised to use this,Can you interpret this??\n</code></pre>\n\n<p><code>p-&gt;i</code> gives you the integer <code>i</code> from the structure pointed to by <code>p</code>.<br>\n<code>&amp;p-&gt;i</code> gives the <em>address</em> of <code>i</code>, required by scanf.</p>\n\n<pre><code>scanf(\"%d\",&amp;(*p).i);  //Is this valid?\n</code></pre>\n\n<p>Yes, that's the same as above. <code>(*p).i</code> is <code>p-&gt;i</code></p>\n\n<pre><code>scanf(\"%d\",p-&gt;i);  //Why is this not valid since p is nothing but a pointer \n</code></pre>\n\n<p><code>scanf</code> needs a pointer to store a \"%d\", meaning an integer ; though, here you give the value of <code>i</code>, not a pointer to <code>i</code>.</p>\n"}], "owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1511370430, "creation_date": 1511359443, "last_edit_date": 1511370430, "question_id": 47436678, "link": "https://stackoverflow.com/questions/47436678/using-pointer-to-struct-to-read-member-variables", "title": "Using Pointer to Struct to read member Variables", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nstruct data{\n    int i;\n    struct data *p;\n};\n\nint main() {\n    struct data *p=malloc(sizeof(struct data));\n\n    //How do i use pointer to structure to read a integer in member variable i?\n\n    scanf(\"%d\",&amp;p-&gt;i);    // I am advised to use this,Can you interpret this??\n    scanf(\"%d\",&amp;(*p).i);  // Is this valid?\n    scanf(\"%d\",p-&gt;i);     // Why is this not valid since p is nothing but a pointer \n}\n</code></pre>\n\n<ol>\n<li><p>Interpret this  <code>&amp;p-&gt;i</code>. Why this represents the address of the member variable i?</p></li>\n<li><p>Is this  <code>scanf(\"%d\",&amp;(*p).i);</code> valid? Why?</p></li>\n</ol>\n"}, {"tags": ["c", "caching", "macros", "embedded", "reusability"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511359164, "post_id": 47436390, "comment_id": 81827361, "body": "It looks like you\u2019ll need to identify how the registers are used and make appropriate changes.  The changes are that the patterns of use are highly stylized and a carefully crafted Perl script (or other similar powerful scripting language of choice) can do the job 95+%, leaving a few cases to be mapped manually."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1511360918, "post_id": 47436390, "comment_id": 81828541, "body": "This isn&#39;t &quot;WITHOUT&quot;, but this is the correct way to do such a refactoring since wrapped register access is more future proof than hacks. (I&#39;ve done this before, it&#39;s worth it). Create the GET and SET functions for the registers on the old hardware. Change the registers accesses to use the functions on the old hardware, one by one, testing often just to make sure that things keep working. Your goal is to delete or at least rename all the old &quot;REGISTER_1&quot; and such variables. Once you achieve that, the only thing left will be to use the GET/SET functions from the new hardware."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1511392347, "post_id": 47436390, "comment_id": 81845823, "body": "If you could use c++ in the new project, you could do this. But foregoing that, @Art&#39;s idea is probably the best approach. You may even be able to do a binary compare on the output to make sure everything matches. One way to identify issues would be to change all accesses to GETs and let the compiler issue errors when it was expecting lvalues."}], "answers": [{"tags": [], "owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "is_accepted": false, "score": 1, "last_activity_date": 1511428231, "creation_date": 1511428231, "answer_id": 47451499, "question_id": 47436390, "link": "https://stackoverflow.com/questions/47436390/transparent-use-of-registers-though-hiding-of-get-set-wrapper/47451499#47451499", "title": "Transparent use of registers though hiding of get/set wrapper", "body": "<p>IMHO you are trying it the wrong way around. Accessing hardware registers is quite far from the C mental model of storing a value in a variable. While the standard mentions side-effects of operations in the respective paragraphs and provides <code>volatile</code> for cells changing contents outside the control of the compiler, chances are that the C programmer coming after you will have a different or no view alltogether on the deeper ramifications of the standard wording applied to your special case. Therefore a lot of information is lost/hidden when we are tricking the human reader into reading some seemingly harmless assignments. Worse yet if you are using interruptible tasks, where the nemesis of read-modify-write errors may come upon you (e.g. <code>DigiPort_A |= 1;</code>). </p>\n\n<p>Given that the register accesses will hopefully be uniform in your old codebase, I would try the approach recommended by Jonathan Leffler and let the extra work be an apprentice's due for the customer, signaling him that embedded programming shouldn't be seen as just an Electrical Engineer's side occupation.</p>\n"}], "owner": {"reputation": 157, "user_id": 4039207, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed35267961546abaae338b80f713747?s=128&d=identicon&r=PG&f=1", "display_name": "user259819", "link": "https://stackoverflow.com/users/4039207/user259819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511428231, "creation_date": 1511358593, "question_id": 47436390, "link": "https://stackoverflow.com/questions/47436390/transparent-use-of-registers-though-hiding-of-get-set-wrapper", "title": "Transparent use of registers though hiding of get/set wrapper", "body": "<p>I'm working in a embedded project where the functionality of a existing software is realized with a new software-architecture on a new hardware.</p>\n\n<p>The goal is to control a complex hardware unit.\nThe old software had the registers of the unit mapped into memory and the software is directly modifiying those registers.</p>\n\n<p>Like this:</p>\n\n<pre><code>/* Register is defined with offset */\n#define REGISTER_1 regMem[0x1234]\n\n/* And can be accessed like this (obvious) */\n\nREGISTER_1 = 0;\nif (REGISTER_1 == 0) {...}\n</code></pre>\n\n<p>On the new hardware a wrapper (which cannot be ommited) only allows access to those registers in a </p>\n\n<pre><code>SET(REG_ADDR,VALUE);\nGET(REG_ADDR);\n</code></pre>\n\n<p>manner.</p>\n\n<p>Do i have any change to reuse the old, big codebase controlling the registers WITHOUT rewriting every register access?</p>\n\n<p>Is there a way to hide GET/SET functions within a macro?</p>\n\n<pre><code>#define REGISTER_1 ??? /* Return value with \nGET(REGISTER_1) if not accessed with an assignment like REGISTER_1 = ... */\n</code></pre>\n\n<p>I thought about a cache like mechanism in macro code which sets a dirty flag on a local copy of the register and automatically updates / fetches the register on access...</p>\n"}, {"tags": ["c", "memory-mapped-files", "memory-mapping"], "answers": [{"tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": true, "score": 1, "last_activity_date": 1511359409, "creation_date": 1511359409, "answer_id": 47436665, "question_id": 47436137, "link": "https://stackoverflow.com/questions/47436137/mmap-access-file-content-and-perform-arithmetic-operations/47436665#47436665", "title": "Mmap access file content and perform arithmetic operations", "body": "<p>You could cast <code>mymap</code> to the type you want to work with, and perform operations like if you were working in memory.</p>\n\n<p>For instance, before <code>if (munmap(0,attr.st_size) == -1) {</code></p>\n\n<pre><code>char *str = (char *)mymap;\nint i;\nfor(i=0 ; i&lt;attr.st_size ; i++) {\n    str[i] += 3; // add 3 to each byte in the file\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for(i=0 ; i&lt;attr.st_size - 1 ; i+=2) {\n    str[i] *= str[i+1]; // multiply \"odd\" chars with the next one\n    str[i] &gt;&gt;= 2;       // shift 2 (divide by 4)\n}\n</code></pre>\n\n<p>After closing map &amp; fd, the file has changed according to the operations above.</p>\n"}], "owner": {"reputation": 362, "user_id": 6191842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/984823591566502/picture?type=large", "display_name": "Daniel Gretzke", "link": "https://stackoverflow.com/users/6191842/daniel-gretzke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 47436665, "answer_count": 1, "score": 0, "last_activity_date": 1511359409, "creation_date": 1511357842, "question_id": 47436137, "link": "https://stackoverflow.com/questions/47436137/mmap-access-file-content-and-perform-arithmetic-operations", "title": "Mmap access file content and perform arithmetic operations", "body": "<p>In this issue <a href=\"https://stackoverflow.com/questions/8309801/bit-shift-large-binary-file\">here</a> someone asked how to make a bit-shift with a file and the suggested way was to use a mmap.</p>\n\n<p>Now this is my mmap:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n\nextern int errno;\n\nint main(int argc, char *argv[]) {\n    int fd;\n    void *mymap;\n    struct stat attr;\n\n    char filePath[] = \"test.txt\";\n    fd = open(filePath, O_RDWR);\n    if (fd == -1) {\n        perror(\"Error opening file\");\n        exit(1);\n    }\n    if(fstat(fd, &amp;attr) &lt; 0) {\n        fprintf(stderr,\"Error fstat\\n\");\n        close(fd);\n        exit(1);\n    }\n    mymap = mmap(0, attr.st_size, PROT_READ|PROT_WRITE, MAPFILE|MAP_SHARED, fd, 0);\n\n    if(mymap == MAP_FAILED) {\n        fprintf(stderr, \"%s: Fehler bei mmap\\n\",strerror(errno));\n        close(fd);\n        exit(1);\n    }\n\n    if (munmap(0,attr.st_size) == -1) {\n        fprintf(stderr, \"%s: Error munmap\\n\",strerror(errno));\n        exit(0);\n    }\n    if (close(fd) == -1) {\n        perror(\"Error while closing file\");\n    }\n    exit(0);\n}\n</code></pre>\n\n<p>how can I access the data inside the mmap? and how could I perform a bit shift or other arithmetic operations like multiplication or addition or substaction, etc?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1511357279, "post_id": 47435877, "comment_id": 81826034, "body": "1) <code>for(i = 0; !feof(f1); i++){</code> :: feof() is wrong 2) why are you allocating 3*MAX*MAX items ? 3) <code>20000*20000*something</code> probably doesn&#39;t fit on the stack."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511357294, "post_id": 47435877, "comment_id": 81826046, "body": "<code>(*cart1).n = i+1;</code> changes the first struct only."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1511357453, "post_id": 47435877, "comment_id": 81826149, "body": "The <code>struct points cart1[MAX]</code> array is huge. It&#39;s an array of 20000 points, and each point has 60000 floats. That&#39;s over 4 gigabytes. Are you sure you intended this?"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1511357458, "post_id": 47435877, "comment_id": 81826152, "body": "if the x,y,z coordinates belong together, it would probably make more sense to have an array of structs, and not a struct of arrays"}, {"owner": {"reputation": 13, "user_id": 8990229, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208546948505004/picture?type=large", "display_name": "Luis Parente", "link": "https://stackoverflow.com/users/8990229/luis-parente"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511357568, "post_id": 47435877, "comment_id": 81826231, "body": "@wildplasser thanks for the quick answer. why is the feof() part wrong? 2) that was it, no more segmentation fault"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511357849, "post_id": 47435877, "comment_id": 81826415, "body": "<a href=\"https://stackoverflow.com/q/5431941/905902\">stackoverflow.com/q/5431941/905902</a> &lt;&lt;-- Read here."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1511357877, "post_id": 47435877, "comment_id": 81826436, "body": "If you have an error opening a file, then &quot;Error Reading File&quot; is a very misleading (and unhelpful) message. <code>if( (fp=fopen(path,mode)) == NULL) { perror(path); ...</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1511358277, "post_id": 47435877, "comment_id": 81826712, "body": "Maybe you should tell us in plain english what you are <i>actually</i>  trying to do. Please <a href=\"https://stackoverflow.com/posts/47435877/edit\">edit</a> your question and make that clear <i>there</i>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8990229, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208546948505004/picture?type=large", "display_name": "Luis Parente", "link": "https://stackoverflow.com/users/8990229/luis-parente"}, "edited": false, "score": 0, "creation_date": 1511359465, "post_id": 47436224, "comment_id": 81827560, "body": "Thank you, it solved the problem. But now I have only one question. By not using EOF, for will continue to execute until the return of fscanf  <code>r != 3</code>. And when the file ends, it will execute one more time <code>r = 0</code> and then ends the for, right?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 13, "user_id": 8990229, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208546948505004/picture?type=large", "display_name": "Luis Parente", "link": "https://stackoverflow.com/users/8990229/luis-parente"}, "edited": false, "score": 0, "creation_date": 1511359578, "post_id": 47436224, "comment_id": 81827629, "body": "@LuisParente That is correct.  When the end of the file is reached <code>r</code> will be 0 and the loop will end.  So when setting the count, you should actually use <code>i-1</code> instead of <code>i+1</code>.  Note also that you had to do the same with <code>feof</code>."}, {"owner": {"reputation": 13, "user_id": 8990229, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208546948505004/picture?type=large", "display_name": "Luis Parente", "link": "https://stackoverflow.com/users/8990229/luis-parente"}, "edited": false, "score": 0, "creation_date": 1511359953, "post_id": 47436224, "comment_id": 81827861, "body": "Yes, i understand now. Before i was not getting any feedback, and that was not visible. About the first question, if I didn&#39;t know about the number of coordinates, how could i use the arrays without the MAX? Is it not possible?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1511358114, "creation_date": 1511358114, "answer_id": 47436224, "question_id": 47435877, "link": "https://stackoverflow.com/questions/47435877/scanning-numbers-from-a-file-in-c/47436224#47436224", "title": "Scanning numbers from a file in C", "body": "<p>You have a very large array declared as a local variable:</p>\n\n<pre><code>struct points cart1[MAX];\n</code></pre>\n\n<p>There are 20000 element in the array, and each array element is (assuming <code>int</code> and <code>float</code> each take up 4 bytes) 4 + 4 * 20000 + 4 * 20000 + 4 * 20000 = 240004 bytes for a total size of 4,800,080,000 ( 4.8 GB ).  Even as a global variable, that's huge.  As a local, which on most implementations lives on the stack, this easily exceeds stack size which results in the core dump.</p>\n\n<p>You don't need an array of these structures, only a single one.  Then you use it like this:</p>\n\n<pre><code>int main (){\n\n  int i, r;\n  struct points cart1;\n  f1 = fopen(\"point_cloud1.txt\", \"r\");\n  if (f1 == NULL){\n    printf(\"Error Reading File\\n\");\n    exit (0);\n  }\n  for(i = 0, r = 3; r == 3; i++){\n    r = fscanf(f1, \"%f%f%f\", &amp;cart1.x[i], &amp;cart1.y[i], &amp;cart1.z[i]);\n  }\n  cart1.n = i+1;\n  printf(\"\\nNumber: %d coord1: %f, %f, %f\\n\", cart1.n, cart1.x[0], cart1.y[0], cart1.z[0]);\n\n  fclose(f1);\n\nreturn 0;\n}\n</code></pre>\n\n<p>Also, <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">don't use <code>feof</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1511359964, "creation_date": 1511359964, "answer_id": 47436850, "question_id": 47435877, "link": "https://stackoverflow.com/questions/47435877/scanning-numbers-from-a-file-in-c/47436850#47436850", "title": "Scanning numbers from a file in C", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define MAX 20000\n\n\nstruct point {          /* structure for *one* point */\n  int       n;\n  float x;\n  float y;\n  float z;\n};\n\nint main (void){\n\n  FILE *f1;\n  int ii;\n  char *name=\"point_cloud1.txt\";\n  struct point  points[MAX];    /* array of MAX structures, for MAX points */\n\n  f1 = fopen(name, \"r\");\n  if (f1 == NULL){              /* diagnostics to stderr, add relevant detail, such as the filename */\n    fprintf(stderr, \"Error Reading File:%s\\n\", name);\n    exit (0);\n  }\n\n  for(ii = 0; ii &lt; MAX ; ii++){ /*loop-sanity: test the array-bounds where you increment it */\n    int ret;\n    ret = fscanf(f1, \"%f%f%f\", &amp;points[ii].x, &amp;points[ii].y, &amp;points[ii].z); /* use the return value */\n    if(ret&lt;3) {\n        if( !feof(f1)) fprintf(stderr, \"Reading %s failed at %d\\n\", name, ii);\n        break;\n        }\n  points[ii].n = ii+1;\n  }\n\n  if (ii == MAX &amp;&amp; !feof(f1)) {\n        fprintf(stderr, \"Reading %s : array may be incomplete\\n\", name);\n        }\n\n  fclose(f1);\n\n  printf(\"Number: %d coord0: %f, %f, %f\\n\", ii, points[0].x, points[0].y, points[0].z);\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8990229, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208546948505004/picture?type=large", "display_name": "Luis Parente", "link": "https://stackoverflow.com/users/8990229/luis-parente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 47436224, "answer_count": 2, "score": 1, "last_activity_date": 1511360634, "creation_date": 1511357075, "last_edit_date": 1511360634, "question_id": 47435877, "link": "https://stackoverflow.com/questions/47435877/scanning-numbers-from-a-file-in-c", "title": "Scanning numbers from a file in C", "body": "<p>I tried to scan some coordinates [X, Y, Z] from a file, but always returned as segmentation fault. So, I've some questions to make:</p>\n\n<ol>\n<li><p>I don't know how many points are in the file, but if I leave the struct arrays empty, there will be an error. There is a way to do this without defining a max number?</p></li>\n<li><p>Are my use of pointers ok? I'm not very talented with them.</p></li>\n</ol>\n\n<p>I think that what is causing the segmentation fault is the fscanf, but I can't fix it</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define MAX 20000\n\nFILE *f1;\n\nstruct points{\n  int       n;\n  float x[MAX];\n  float y[MAX];\n  float z[MAX];\n};\n\nint main (){\n\n  int i;\n  struct points cart1[MAX];\n  f1 = fopen(\"point_cloud1.txt\", \"r\");\n  if (f1 == NULL){\n    printf(\"Error Reading File\\n\");\n    exit (0);\n  }\n  for(i = 0; !feof(f1); i++){\n    fscanf(f1, \"%f%f%f\", &amp;cart1[i].x[i], &amp;cart1[i].y[i], &amp;cart1[i].z[i]);\n  }\n  (*cart1).n = i+1;\n  printf(\"\\nNumber: %d coord1: %f, %f, %f\\n\", (*cart1).n, (*cart1).x[0], (*cart1).y[0], (*cart1).z[0]);\n\n  fclose(f1);\n\nreturn 0;\n}\n</code></pre>\n\n<p>The beginning of the file is like this:</p>\n\n<pre><code>2.84838 -1.21024 -0.829256\n7.09443 -3.01579 0.134558\n3.31221 -1.40868 -0.830969\n7.09813 -3.01883 0.404243\n4.05924 -1.72723 -0.857496\n</code></pre>\n"}, {"tags": ["c", "if-statement", "while-loop", "scanf"], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1511361785, "post_id": 47435941, "comment_id": 81829204, "body": "Alternatively, if the user is expected to press enter, put the getchar() after then scanf(), always."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1511359103, "last_edit_date": 1511359103, "creation_date": 1511357266, "answer_id": 47435941, "question_id": 47435867, "link": "https://stackoverflow.com/questions/47435867/c-an-if-else-statement-gets-stuck-and-crashes/47435941#47435941", "title": "C - An if-else statement gets stuck and crashes", "body": "<p>Well, you took care of half of the problems.</p>\n\n<p>You checked for the <code>scanf()</code> failure, that's fine, but when matching fails, the input in the buffer is not consumed, it remains there (waiting for the next occurrence of <code>scanf()</code> to read it).</p>\n\n<p>Thus, the same input (invalid) is fed over and over again. In the <code>else</code> part of the scanf check, you need to clean up the buffer of the invalid input. A very basic way of doing that would be</p>\n\n<pre><code>} else {\n    printf(\"invalid input\\n\");\n    while (getchar() != '\\n');\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8990302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/478ce4bdf0ad6a3f660f8cb899fc5516?s=128&d=identicon&r=PG&f=1", "display_name": "CK3", "link": "https://stackoverflow.com/users/8990302/ck3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 47435941, "answer_count": 1, "score": -1, "last_activity_date": 1511359103, "creation_date": 1511357038, "last_edit_date": 1511359085, "question_id": 47435867, "link": "https://stackoverflow.com/questions/47435867/c-an-if-else-statement-gets-stuck-and-crashes", "title": "C - An if-else statement gets stuck and crashes", "body": "<p>I have a problem with an code where i have and if-else statement and it needs an input of an integer and otherwise would ask again to enter the number. The code is in a while statement and the problem is that when i enter anything else than an integer the loop gets stuck giving the else statement and crashes</p>\n\n<pre><code>static inline void number_console(void)\n{\nint x = 0;\nfprintf_P(stdout, PSTR(GET_NR_MSG));\nlcd_goto(0x40);\n\nif (scanf(\"%d\", &amp;x) == 1 &amp;&amp; x &gt;= 0 &amp;&amp; x &lt;= 9) {\n    printf(\"\\nYou entered number: \");\n    fprintf_P(stdout, (PGM_P)pgm_read_word(&amp;numbers[x]));\n    fputc('\\n', stdout);\n    lcd_puts_P((PGM_P)pgm_read_word(&amp;numbers[x]));\n    lcd_putc(' ');\n} else {\n    printf(\"invalid input\\n\");\n    }\n}\n</code></pre>\n\n<p>Also the code is used in a while statement</p>\n\n<pre><code>while (1) {\n    blink_leds();\n    number_console();\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "getline"], "answers": [{"comments": [{"owner": {"reputation": 1040, "user_id": 1688998, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed678da7cc7d2fd03a2bda7cd790ac14?s=128&d=identicon&r=PG", "display_name": "xificurC", "link": "https://stackoverflow.com/users/1688998/xificurc"}, "edited": false, "score": 0, "creation_date": 1511357331, "post_id": 47435885, "comment_id": 81826071, "body": "So it&#39;s <code>FILE</code> that is keeping the context. Thanks."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 3, "last_activity_date": 1511357092, "creation_date": 1511357092, "answer_id": 47435885, "question_id": 47435859, "link": "https://stackoverflow.com/questions/47435859/how-does-getline-read-only-up-to-a-newline-without-seeking/47435885#47435885", "title": "how does getline read only up to a newline without seeking?", "body": "<p>The prototype is:</p>\n\n<pre><code>ssize_t getline(char **lineptr, size_t *n, FILE *stream);\n</code></pre>\n\n<p>So it's clearly using <code>FILE</code>, which is already buffered. So reading character-by-character is not inefficient at all.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1511357197, "creation_date": 1511357197, "answer_id": 47435923, "question_id": 47435859, "link": "https://stackoverflow.com/questions/47435859/how-does-getline-read-only-up-to-a-newline-without-seeking/47435923#47435923", "title": "how does getline read only up to a newline without seeking?", "body": "<p>That is what <em>buffered io</em> is for. Long story short, the C library reads a full buffer the size of which is implementation dependant but is rather large, and then the <code>getline</code> function looks for the first newline in that memory buffer, leaving the pointer positioned for next access.</p>\n"}], "owner": {"reputation": 1040, "user_id": 1688998, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed678da7cc7d2fd03a2bda7cd790ac14?s=128&d=identicon&r=PG", "display_name": "xificurC", "link": "https://stackoverflow.com/users/1688998/xificurc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 47435885, "answer_count": 2, "score": 1, "last_activity_date": 1511357197, "creation_date": 1511357018, "question_id": 47435859, "link": "https://stackoverflow.com/questions/47435859/how-does-getline-read-only-up-to-a-newline-without-seeking", "title": "how does getline read only up to a newline without seeking?", "body": "<p>I'm imagining reading <em>byte by byte</em> would be very inefficient, but reading in bulks would almost always read more than needed, requiring to store the rest of the read input in a global context for all subsequent read operations to find. What am I missing?</p>\n"}, {"tags": ["c", "json", "curl", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "reply_to_user": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 2, "creation_date": 1511360205, "post_id": 47436158, "comment_id": 81828023, "body": "add <code>--libcurl template.c</code> to the curl command line and see if there&#39;s something you&#39;ve missed"}], "tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": true, "score": 3, "last_activity_date": 1511357912, "creation_date": 1511357912, "answer_id": 47436158, "question_id": 47435770, "link": "https://stackoverflow.com/questions/47435770/malformed-json-string-error-in-c/47436158#47436158", "title": "malformed JSON string error in C", "body": "<pre><code>curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, \"PUT\");\n</code></pre>\n\n<p>Remove that option. Your command line doesn't set any custom method but uses POST (implied by <code>-d</code>).</p>\n\n<p>There's some confusion among the quotes at the end of your jsonObj string, it should probably be:</p>\n\n<pre><code>char* jsonObj = \"{\\\"Mode\\\":\\\"Auto\\\",\\\"type\\\":\\\"Single\\\",\\\"IP\\\":\\\"9.9.9.9\\\",\\\"FirmwarePath\\\":\\\"\\\" }\";\n</code></pre>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 47436158, "answer_count": 1, "score": 1, "last_activity_date": 1511357921, "creation_date": 1511356766, "last_edit_date": 1511357921, "question_id": 47435770, "link": "https://stackoverflow.com/questions/47435770/malformed-json-string-error-in-c", "title": "malformed JSON string error in C", "body": "<p>I am sending JSON string in JSON format using curl to post JSON data.</p>\n\n<p>I've used following curl command:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -d '{ \"Mode\":\"Auto\",\"Type\":\"Single\",\"IP\":\"9.9.9.9\",\"FirmwarePath\":\"\"}' http://1.1.1.1/cgi-bin/update_firmware.cgi\n</code></pre>\n\n<p>Output of the above command:</p>\n\n<pre><code>&lt;h1&gt;{ \"Mode\":\"Auto\",\"Type\":\"Single\",\"IP\":\"9.9.9.9\",\"FirmwarePath\":\"\"} &lt;/h1&gt;&lt;h1&gt;Check Mode&lt;/h1&gt;&lt;h1&gt;Auto&lt;/h1&gt;&lt;h1&gt;Single&lt;/h1&gt;&lt;h1 /&gt;&lt;h1&gt;Here Mode&lt;/h1&gt;&lt;h1&gt;{ \"Mode\":\"Auto\",\"Type\":\"Single\",\"IP\":\"9.9.9.9\",\"FirmwarePath\":\"\"}&lt;/h1&gt;&lt;h1&gt;Check Input&lt;/h1&gt;&lt;h1&gt;Inside Firmware updates&lt;/h1&gt;&lt;h1&gt;In CheckFirmware&lt;/h1&gt;&lt;h1&gt;curl -s --digest --basic -u root:UOIYTm7Aw52Z \"http://9.9.9.9/axis-cgi/operator/param.cgi?action=list&amp;group=Properties.Firmware.Version\" | cut -d'=' -f2&lt;/h1&gt;&lt;h1&gt;cam Firm:5.50.4.2\n&lt;/h1&gt;&lt;h1&gt;DB Firm: &lt;/h1&gt;Status: 200\nContent-Type: application/json; charset=ISO-8859-1\n\n{\"ReqStatus\":{\"Status\":\"Firmware is upto date or Firmaware update mode is off.\",\"IP\":null}}\n</code></pre>\n\n<p>So, it works fine &amp; gives me an expected output.</p>\n\n<p>Now I want this output stored in text file. So, I've made C program to achieve that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;curl/curl.h&gt;\n\nsize_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {\n    size_t written = fwrite(ptr, size, nmemb, stream);\n    return written;\n}\n\nint main(void) {\n    CURL *curl;\n\n    FILE *fp = fopen(\"request.txt\",\"w\");\n    CURLcode res;\n\n    curl = curl_easy_init();\n\n    char* jsonObj = \"{\\\"Mode\\\":\\\"Auto\\\",\\\"type\\\":\\\"Single\\\",\\\"IP\\\":\\\"9.9.9.9\\\",\\\"FirmwarePath\\\":\\\"\"\"\\\"}\";\n    puts(jsonObj);\n    struct curl_slist *headers = NULL;\n    curl_slist_append(headers, \"Accept: application/json\");\n    curl_slist_append(headers, \"Content-Type: application/json\");\n    curl_slist_append(headers, \"charsets: utf-8\");\n\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://1.1.1.1/cgi-bin/update_firmware.cgi\");\n\n    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, \"PUT\");\n    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, jsonObj);\n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION,write_data);\n    curl_easy_setopt(curl, CURLOPT_WRITEDATA,fp);\n\n    res = curl_easy_perform(curl);\n\n    curl_easy_cleanup(curl);\n    return res;\n}\n</code></pre>\n\n<p>But after executing this C program when I open request.txt file I see unexpected output. </p>\n\n<p>Contents of request.txt file:</p>\n\n<pre><code>&lt;h1&gt;Software error:&lt;/h1&gt;\n</code></pre>\n\n<pre>malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before &quot;(end of string)&quot;) at /var/www/cgi-bin/update_firmware.cgi line 496\n</pre>\n\n<pre><code>&lt;p&gt;\nFor help, please send mail to the webmaster (&lt;a href=\"mailto:root@localhost\"&gt;root@localhost&lt;/a&gt;), giving this error message \nand the time and date of the error.\n\n&lt;/p&gt;\n</code></pre>\n\n<p>JSON data that I want to send is:</p>\n\n<pre><code>{  \n   \"Mode\":\"Auto\",\n   \"Type\":\"Single\",\n   \"IP\":\"9.9.9.9\",\n   \"FirmwarePath\":\"\" \n}\n</code></pre>\n\n<p>What I am doing wrong here ? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1511356890, "post_id": 47435702, "comment_id": 81825742, "body": "Try compiling with <code>-std=c99</code>."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1511356987, "post_id": 47435702, "comment_id": 81825819, "body": "Obviously your are missing a library for your linker phase. But this will be difficult to track, because your system is really oooold. A gcc in its 10th year, probably not many remember how the C library was implemented back then and why there was this <code>isoc99</code> prefix to some functions."}, {"owner": {"reputation": 111, "user_id": 5820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41103f66511a6a3e726150c6c924d77c?s=128&d=identicon&r=PG&f=1", "display_name": "hrl", "link": "https://stackoverflow.com/users/5820730/hrl"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1511398812, "post_id": 47435702, "comment_id": 81847461, "body": "@JensGustedt Yeah,maybe I am missing a library, but the same code and some makefile can work successfully on an other machine which also is Suse 11 SP3.And I have tried to make out their differences like env or libary path.But none of them toke affect."}, {"owner": {"reputation": 111, "user_id": 5820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41103f66511a6a3e726150c6c924d77c?s=128&d=identicon&r=PG&f=1", "display_name": "hrl", "link": "https://stackoverflow.com/users/5820730/hrl"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1511398983, "post_id": 47435702, "comment_id": 81847498, "body": "@PaulR It seems not work."}, {"owner": {"reputation": 433, "user_id": 628116, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/168a3473c3a4ace47d4ecc1abc1c041f?s=128&d=identicon&r=PG", "display_name": "Ajit", "link": "https://stackoverflow.com/users/628116/ajit"}, "edited": false, "score": 0, "creation_date": 1536309413, "post_id": 47435702, "comment_id": 91385643, "body": "hey, you found any solution ?"}], "owner": {"reputation": 111, "user_id": 5820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41103f66511a6a3e726150c6c924d77c?s=128&d=identicon&r=PG&f=1", "display_name": "hrl", "link": "https://stackoverflow.com/users/5820730/hrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 809, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511356567, "creation_date": 1511356567, "question_id": 47435702, "link": "https://stackoverflow.com/questions/47435702/undefined-reference-to-isoc99-sscanf", "title": "undefined reference to `__isoc99_sscanf&#39;", "body": "<p>I am compiling a C code program on SUSE 11 SP3,and it always put the error just like the title showed.And I try my best to search some ways to fix it up.Unfortunately, they doesn't work.</p>\n\n<pre><code>aa/lib/sftp_fsmeg_proc.o /si/usr/aa/lib/rtsc_obm.a /si/usr/aa/lib/sftp.a /si/usr/aa/lib/fisc_app.a /si/usr/aa/lib/rtsc_app.a /si/usr/aa/lib/rtsc_db.a /si/usr/aa/lib/arch.a /si/usr/aa/lib/arch.a -lclntsh `cat /home2/oracle/product/11gr2/db/lib/ldflags`   `cat /home2/oracle/product/11gr2/db/lib/sysliblist` -ldl -lm  \n/si/usr/aa/lib/sftp_public.o\uff1afunction \u2018sftp_slip_filename\u2019\uff1a\n/si/usr/aa/src/arch/sftp/sftp_public.c:459\uff1aundefined reference to \u2018__isoc99_sscanf\u2019\n/si/usr/aa/lib/arch.a(arch_datetime.o)\uff1afunction \u2018arch_chk_date\u2019\uff1a\n/si/usr/aa/src/arch/arch_datetime.c:124\uff1aundefined reference to `__isoc99_sscanf'\n/si/usr/aa/lib/arch.a(arch_datetime.o)\uff1afunction \u2018arch_chk_time\u2019\uff1a\n/si/usr/aa/src/arch/arch_datetime.c:375\uff1aundefined reference to `__isoc99_sscanf'\n/si/usr/aa/lib/arch.a(arch_datetime.o)\uff1afunction \u2018arch_timestr_to_time\u2019\uff1a\n/si/usr/aa/src/arch/arch_datetime.c:847\uff1aundefined reference to `__isoc99_sscanf'\n</code></pre>\n\n<p>My gcc version is 4.3.4,and libc is 2.11.3.</p>\n\n<pre><code>$gcc --version\ngcc (SUSE Linux) 4.3.4 [gcc-4_3-branch revision 152973]\nCopyright (C) 2008 Free Software Foundation, Inc.\n$/lib64/libc.so.6\nGNU C Library stable release version 2.11.3 (20110527), by Roland McGrath et al.\nCopyright (C) 2009 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE.\nConfigured for x86_64-suse-linux.\nCompiled by GNU CC version 4.3.4 [gcc-4_3-branch revision 152973].\nCompiled on a Linux 2.6.32 system on 2013-05-10.\nAvailable extensions:\n        crypt add-on version 2.1 by Michael Glad and others\n        GNU Libidn by Simon Josefsson\n        Native POSIX Threads Library by Ulrich Drepper et al\n        BIND-8.2.3-T5B\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/libc/bugs.html&gt;.\n</code></pre>\n\n<p>And I try to write a miniel with the Line that the error info show,it seems work normal.When I add /lib64/libc.so.6,it also can compiles successfully.</p>\n\n<pre><code>$/usr/bin/gcc -m64 -fPIC -g -I . -DSFTP_DEBUG -I /si/usr/aa/include/arch -I /si/usr/aa/include/fisc/app -I /si/usr/aa/include/rtsc -I /si/usr/aa/include/rtsc/app -I /si/usr/aa/include/rtsc/db -I /si/usr/aa/include/arch -I /si/usr/aa/include/arch \\\n&gt; -o sftp_server -m64  -L/home2/oracle/product/11gr2/db/precomp/lib/ -L/home2/oracle/product/11gr2/db/lib/ -L/home2/oracle/product/11gr2/db/lib/stubs/ \\\n&gt; -o sftp_server sftp_server.o /si/usr/aa/lib/sftp_server_proc.o /si/usr/aa/lib/sftp_public.o /si/usr/aa/lib/sftp_lzari.o /si/usr/aa/lib/sftp_fsmeg_proc.o /si/usr/aa/lib/rtsc_obm.a /si/usr/aa/lib/sftp.a /si/usr/aa/lib/fisc_app.a /si/usr/aa/lib/rtsc_app.a /si/usr/aa/lib/rtsc_db.a /si/usr/aa/lib/arch.a /si/usr/aa/lib/arch.a \\\n&gt; -lclntsh `cat /home2/oracle/product/11gr2/db/lib/ldflags`   `cat /home2/oracle/product/11gr2/db/lib/sysliblist` -ldl **/lib64/libc.so.6** -lm \n$\n</code></pre>\n\n<p>Why?It is really puzzle me what's the wrong with.Can you give me some suggestion? Thanks for your reading.</p>\n"}, {"tags": ["c", "struct", "binary"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1511357132, "post_id": 47435688, "comment_id": 81825945, "body": "<i>I have a binary file with some lines into it</i> : this sounds somewhat contradictory. A text file has lines, a binary file doesn&#39;t. Now your code looks more or less correct, the problem may be that the structs in the file may not match the structure <code>struct linien</code> because of padding. We cannot tell without more information. How is the <code>Linien.pra</code> generated?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1511358673, "post_id": 47435688, "comment_id": 81827013, "body": "<code>x</code> is never initialized, please post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1511358970, "post_id": 47435688, "comment_id": 81827234, "body": "You aren&#39;t checking the return value of fopen or fread."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1801517"}, "is_accepted": false, "score": 1, "last_activity_date": 1511360063, "creation_date": 1511360063, "answer_id": 47436882, "question_id": 47435688, "link": "https://stackoverflow.com/questions/47435688/reading-binary-file-in-c-until-the-end-of-file/47436882#47436882", "title": "reading binary file in c until the end of file", "body": "<p>You should check the return value of fread so you can use fread in a while loop like that:</p>\n\n<pre><code>while (fread(&amp;x, sizeof(x), 1, fp) != 0)\n{\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8990461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uQCDyRQ9mUM/AAAAAAAAAAI/AAAAAAAAAA8/Zg3uqBoitdA/photo.jpg?sz=128", "display_name": "HrishiB", "link": "https://stackoverflow.com/users/8990461/hrishib"}, "is_accepted": false, "score": 0, "last_activity_date": 1511360173, "creation_date": 1511360173, "answer_id": 47436921, "question_id": 47435688, "link": "https://stackoverflow.com/questions/47435688/reading-binary-file-in-c-until-the-end-of-file/47436921#47436921", "title": "reading binary file in c until the end of file", "body": "<p>Make sure the structs in file match with the struct linien.\nCheck for the return value of fread , to check if you reached the end of the file.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 0, "last_activity_date": 1511362201, "creation_date": 1511362201, "answer_id": 47437611, "question_id": 47435688, "link": "https://stackoverflow.com/questions/47435688/reading-binary-file-in-c-until-the-end-of-file/47437611#47437611", "title": "reading binary file in c until the end of file", "body": "<blockquote>\n  <p>It prints only first 11 lines</p>\n</blockquote>\n\n<p>Let's see ....</p>\n\n<pre><code>struct linien\n{\n    short x1, x2, y1, y2;\n    unsigned char R, G, B;\n};\n\nint counter;\nstruct linien x;\n\n// [...]\n\nfor (counter = 0; counter &lt; sizeof(x); counter++)\n{\n    // code to read **one** instance of `struct linien`\n}\n</code></pre>\n\n<p>See something? What's <code>sizeof(x)</code>? We have 4 <code>short</code> and 3 <code>char</code> in <code>struct linien</code> -- assuming your typical platform where <code>short</code> has a size (and alignment requirement) of 2, this makes a total of 2*4 + 3 = 11. Suprise? ;)</p>\n\n<p>You're looping exactly 11 times, for what reason ever. So you read (and write) 11 items!</p>\n\n<p>Instead, you should only stop once your <code>fread()</code> call fails (test the return value!).</p>\n"}], "owner": {"reputation": 25, "user_id": 8871085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3027918edd7315a66806024e527c6b32?s=128&d=identicon&r=PG&f=1", "display_name": "arsy", "link": "https://stackoverflow.com/users/8871085/arsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2842, "favorite_count": 0, "accepted_answer_id": 47437611, "answer_count": 3, "score": 0, "last_activity_date": 1511362201, "creation_date": 1511356518, "question_id": 47435688, "link": "https://stackoverflow.com/questions/47435688/reading-binary-file-in-c-until-the-end-of-file", "title": "reading binary file in c until the end of file", "body": "<p>I have a binary file with some lines into it(I don't know how much exactly) and I want to read this lines into struct until the end of file and then rewrite this lines in new file.txt.\nMy question is: How can I read from binary file into struct until the end of file? It prints only first 11 lines. Must I allocate memory for this or smth?</p>\n\n<pre><code>    struct linien\n    {\n        short x1, x2, y1, y2;\n        unsigned char R, G, B;\n    };\n\n\n    FILE *fp; // pointer to a file type\n    FILE *fpa; // pointer to a file type\n\n    int counter;\n    struct linien x; //x is a variable of type struct linien\n\n    //open files - one for reading and another one for writing\n    fp = fopen(\"\\\\Linien.pra\", \"rb\");\n    fpa = fopen(\"\\\\Linien.txt\", \"w\");\n\n    //check to see if files opened succesfully \n    if ((fp == NULL)||(fpa == NULL))\n    {\n        printf(\"file failed to open\\n\");\n    }\n</code></pre>\n\n<p>the for loop doesn't seem to work correctly.    </p>\n\n<pre><code>    else\n    {\n        for (counter = 0; counter &lt; sizeof(x); counter++) //print and write lines\n        {\n            //read the file Linien.pra\n            fread(&amp;x, sizeof(x), 1, fp);\n            printf(\"%2d\\t %3d\\t %4d\\t %5d\\t %6d\\t %7d  %8d\\n\", x.x1, x.x2, x.y1, x.y2, x.R, x.G, x.B);  \n            //write struct linien to new file Linien.txt\n            fprintf(fpa, \"%2d\\t %3d\\t %4d\\t %5d\\t %6d\\t %7d  %8d\\n\", x.x1, x.x2, x.y1, x.y2, x.R, x.G, x.B);\n        }\n\n        fclose(fp); // close file\n        fclose(fpa); // close file\n    }\n</code></pre>\n"}, {"tags": ["python", "c", "sockets", "typeerror", "htonl"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511357903, "post_id": 47435650, "comment_id": 81826455, "body": "You do <b>not</b> have to <code>htonl</code> an int before sending. There is no reason at all, unless you have a protocol defined that needs it. If you are sure that both the server and client use the same endianness, just send it as it is."}, {"owner": {"reputation": 49, "user_id": 4193440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f7pVM.jpg?s=128&g=1", "display_name": "Gora", "link": "https://stackoverflow.com/users/4193440/gora"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511358086, "post_id": 47435650, "comment_id": 81826560, "body": "but i still have to convert the int array to a const char *buf which doenst work as it should"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4193440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f7pVM.jpg?s=128&g=1", "display_name": "Gora", "link": "https://stackoverflow.com/users/4193440/gora"}, "edited": false, "score": 0, "creation_date": 1511359297, "post_id": 47436426, "comment_id": 81827442, "body": "I think we are on the right way now. ntohl() was misleading, actually. With your code i get the error  TypeError: ord() expected string of length 1, but int found"}, {"owner": {"reputation": 3322, "user_id": 1381627, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/71dbcdf22ed2633fbe36cdb67c98f09e?s=128&d=identicon&r=PG", "display_name": "volcano", "link": "https://stackoverflow.com/users/1381627/volcano"}, "edited": false, "score": 0, "creation_date": 1511360131, "post_id": 47436426, "comment_id": 81827975, "body": "Python has tools for working with communication data - <i>struct</i> at the lowest level. You are re-inventing a wheel - and your shifts are in the wrong direction! And <i>range</i> function has a <i>step</i> argument"}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": -1, "last_activity_date": 1511361975, "last_edit_date": 1511361975, "creation_date": 1511358712, "answer_id": 47436426, "question_id": 47435650, "link": "https://stackoverflow.com/questions/47435650/python-socket-cannot-receive-int-array/47436426#47436426", "title": "Python socket: cannot receive int array", "body": "<p>You said you have managed to send strings over the connection. I assume you sent a <code>char*</code> and received it in python as a string. What you have done is sent a stream of bytes.</p>\n\n<p>Now you want to send an array of integers. In the memory, the integers are again stored as bytes.\nEach integer could occupy 4/8 bytes. You can check this before hand by printing </p>\n\n<pre><code>printf(\"Size of integer is %zu\", sizeof(int));\n</code></pre>\n\n<p>Okay, great now we know how many bytes we need to send. Say it is 4 for now.</p>\n\n<p>We also need to know the endianness of the integers but lets assume big endian for now.</p>\n\n<p>This means the lowest significant byte will be first and the highest significant byte at the end.</p>\n\n<p>So now you can send the integer array exactly lile you sent, by casting the array to <code>char*</code> and sending <code>sizeof(array)</code>.</p>\n\n<p>On the receiving side though, you just have a stream of bytes. To convert it to array of integers you need to get 4 bytes at a time and combine it into an integer.</p>\n\n<p>We can do that as follows.</p>\n\n<p>Say there are total 10 integers. You have to pass this information on separately somehow.</p>\n\n<pre><code>bytes = connection.recv(10*4)\n\narray = []\nfor i in range(10):\n    x = ord(bytes[i*4+0])\n    x += ord(bytes[i*4+1]) &lt;&lt; 8\n    x += ord(bytes[i*4+2]) &lt;&lt; 16\n    x += ord(bytes[i*4+3]) &lt;&lt; 24\n    array += [x]\nprint x\n</code></pre>\n\n<p>And you will be able to see you array of integers.</p>\n\n<p>Here the function <code>ord</code> converts a character to its ASCII equivalent integer.</p>\n\n<p>Side notes:</p>\n\n<p>Now, if your system has size of integer as 8 instead of 4, you need to extend the body of the loop in python. It will go till 56. Also each of the index in bytes will be <code>i*8+...</code></p>\n\n<p>Similarly if the endianess is different, the order of the elements will change. Basically the indices on <code>bytes</code> will go from <code>i*4+3</code> to <code>i*4+0</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 4193440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f7pVM.jpg?s=128&g=1", "display_name": "Gora", "link": "https://stackoverflow.com/users/4193440/gora"}, "edited": false, "score": 1, "creation_date": 1511361720, "post_id": 47436575, "comment_id": 81829161, "body": "i had to change it to   test =struct.unpack(&#39;&lt;4I&#39;, data). Now it works.  Thank you"}, {"owner": {"reputation": 49, "user_id": 4193440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f7pVM.jpg?s=128&g=1", "display_name": "Gora", "link": "https://stackoverflow.com/users/4193440/gora"}, "edited": false, "score": 0, "creation_date": 1511362101, "post_id": 47436575, "comment_id": 81829428, "body": "But it always throws the error: struct.error: unpack requires a bytes object of length 16. I checked the length of data and it IS 16. The print of the unpacked data is exact the same as it looks in the c socket"}, {"owner": {"reputation": 49, "user_id": 4193440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f7pVM.jpg?s=128&g=1", "display_name": "Gora", "link": "https://stackoverflow.com/users/4193440/gora"}, "edited": false, "score": 1, "creation_date": 1511440612, "post_id": 47436575, "comment_id": 81865821, "body": "I found my misstake: The unpack method is the right one as recv returns a bytes array. recv happens in a loop and at the second run the receive buffer is empty, which causes the fault. A simple check if data is empty solved the problem :)"}], "tags": [], "owner": {"reputation": 3322, "user_id": 1381627, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/71dbcdf22ed2633fbe36cdb67c98f09e?s=128&d=identicon&r=PG", "display_name": "volcano", "link": "https://stackoverflow.com/users/1381627/volcano"}, "is_accepted": true, "score": 1, "last_activity_date": 1511363680, "last_edit_date": 1511363680, "creation_date": 1511359162, "answer_id": 47436575, "question_id": 47435650, "link": "https://stackoverflow.com/questions/47435650/python-socket-cannot-receive-int-array/47436575#47436575", "title": "Python socket: cannot receive int array", "body": "<p>What you received is string of bytes, did not <em>ntohl</em> cause exception?\nYou may use <em>struct</em> module to unpack - for 16 bytes</p>\n\n<pre><code>struct.unpack('!4I', data)\n</code></pre>\n\n<p>Meaning - unpack 4 unsigned 32-bit integers in network order</p>\n\n<p><a href=\"https://docs.python.org/release/3.4.3/library/struct.html?highlight=struct\" rel=\"nofollow noreferrer\">RTM</a></p>\n\n<p>(I cannot test it - try it on your own)</p>\n\n<p>EDIT:\nOoops, did not read your comment through. According to <a href=\"https://docs.python.org/release/3.4.3/library/socket.html#socket-objects\" rel=\"nofollow noreferrer\">sockets docs</a>, <em>recv</em> should return object of type <em>bytes</em>. If it returns object of type <em>str</em> - you should convert it to <em>bytes</em> - in Python3 it would be <em>data.encode()</em> </p>\n\n<p>PS Which Python are you on?</p>\n"}], "owner": {"reputation": 49, "user_id": 4193440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f7pVM.jpg?s=128&g=1", "display_name": "Gora", "link": "https://stackoverflow.com/users/4193440/gora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 47436575, "answer_count": 2, "score": -1, "last_activity_date": 1514143642, "creation_date": 1511356428, "last_edit_date": 1513586484, "question_id": 47435650, "link": "https://stackoverflow.com/questions/47435650/python-socket-cannot-receive-int-array", "title": "Python socket: cannot receive int array", "body": "<p>I try to make a inter process communication between a Python and c program via winsockets. Sending a string does work, but now I try to send an int array from the c socket to the python socket.</p>\n\n<p>I already found out that I have to use htonl() to convert the int array into a byte stream as the send function of winsock2 cannot send int arrays directly.</p>\n\n<p>Now I want to use ntohl() in the python socket but the receive function returns bytes whereas ntohl() needs an integer value as input. </p>\n\n<p>Here is my code</p>\n\n<p>C-Side (just relevant parts):</p>\n\n<pre><code>uint32_t a[1] = {1231};\nuint32_t a_converted[1]={0};\na_converted[0] = htonl(a[0]);\niResult = send( ConnectSocket, ( char *)   a_converted, sizeof( a_converted), 0 );\n</code></pre>\n\n<p>Python Side (just relevant parts):</p>\n\n<pre><code>data = connection.recv(16)\ndata_i = socket.ntohl(data)\n</code></pre>\n"}, {"tags": ["c", "assembly", "linker", "binutils"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1511357182, "post_id": 47435457, "comment_id": 81825968, "body": "These are absolute relocations which are simply not allowed."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1511990000, "post_id": 47435457, "comment_id": 82081573, "body": "Do you mean no error when you use <code>-no-pie</code>?    On some distros, <code>-pie</code> and <code>-fpie</code> are on by default.  See <a href=\"https://stackoverflow.com/questions/43367427/32-bit-absolute-addresses-no-longer-allowed-in-x86-64-linux\" title=\"32 bit absolute addresses no longer allowed in x86 64 linux\">stackoverflow.com/questions/43367427/&hellip;</a>."}], "owner": {"reputation": 131, "user_id": 8198351, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a382cbf35a26b601c5ee55e641f87335?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay ", "link": "https://stackoverflow.com/users/8198351/akshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1452, "favorite_count": 0, "closed_date": 1511368621, "answer_count": 0, "score": 1, "last_activity_date": 1511990013, "creation_date": 1511355822, "last_edit_date": 1511355900, "question_id": 47435457, "link": "https://stackoverflow.com/questions/47435457/relocation-r-x86-64-32s-against-data-can-not-be-used-when-making-a-shared-obj", "closed_reason": "Duplicate", "title": "Relocation R_X86_64_32S against `.data&#39; can not be used when making a shared object; recompile with -fPIC", "body": "<p>I know that when i use -pie this error will not come but this error is coming for only some relocation types these are </p>\n\n<pre><code>R_X86_64_32:\nR_X86_64_8:\nR_X86_64_16:\nR_X86_64_32S:\n</code></pre>\n\n<p>I want to know why this error is coming for these types of relocations? are there any issues with relocation overflow while using position independent code?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1511355370, "post_id": 47435247, "comment_id": 81824652, "body": "<code>char baralho[208];</code> =&gt; <code>char baralho[NCARTAS*4];</code> would be cleaner. don&#39;t hardcode 208"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1511355393, "post_id": 47435247, "comment_id": 81824671, "body": "@Jean-Fran&#231;oisFabre, or, arguably, the 4."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511355582, "post_id": 47435247, "comment_id": 81824808, "body": "and <code>for(int i=0; i&lt;208; i++)</code> =&gt; <code>for(int i=0; i&lt;sizeof(baralho); i++)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1511355266, "creation_date": 1511355266, "answer_id": 47435289, "question_id": 47435247, "link": "https://stackoverflow.com/questions/47435247/join-4-decks-of-cards/47435289#47435289", "title": "Join 4 Decks of cards", "body": "<pre><code>posNaipe = i % NCARTAS / 13;\n</code></pre>\n\n<p>would do it. This is also a touchstone for your knowledge of operator precedence and associativity.</p>\n"}], "owner": {"reputation": 33, "user_id": 8990111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec4ffff97d96034cd71895648dcd3e8?s=128&d=identicon&r=PG&f=1", "display_name": "C0C45", "link": "https://stackoverflow.com/users/8990111/c0c45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 47435289, "answer_count": 1, "score": 3, "last_activity_date": 1511355474, "creation_date": 1511355124, "question_id": 47435247, "link": "https://stackoverflow.com/questions/47435247/join-4-decks-of-cards", "title": "Join 4 Decks of cards", "body": "<p>I have this code and I intend to create a set of 4 decks, the problem is that in the suits, after the card 51 the result of the division gives 4 and the arrays of the suits do not return the initial position, how can I solve this situation?</p>\n\n<p>Thank you</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define NCARTAS 52\nint main()\n{\n    const char *numero[]= {\"A\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"V\",\"D\",\"R\"};\n    const char *naipes[]= {\"P\",\"O\",\"C\",\"E\"};\n    char baralho[208];\n    int posNumero,posNaipe;\n    for(int i=0; i&lt;208; i++)\n    {\n        baralho[i]=i;\n        posNumero=i%13;\n        posNaipe=i/13;\n\n        printf(\"%s%s \\n\", numero[posNumero],naipes[posNaipe]);\n    }  \n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting", "count"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511354088, "post_id": 47434846, "comment_id": 81823807, "body": "<code>for(int j = 0; j &lt;= len; j++)</code> =&gt; <code>for(int j = 0; j &lt; len; j++)</code> else your last iteration reads in the unknown..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511354336, "post_id": 47434846, "comment_id": 81823944, "body": "Similarly <code>calloc(MAX_VALUE, sizeof(int));</code> should be <code>calloc(MAX_VALUE + 1, sizeof(int));</code> to allow <code>count_array</code> to be indexed by <code>MAX_VALUE</code>."}, {"owner": {"reputation": 1, "user_id": 8989844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fnZyIkAX1jI/AAAAAAAAAAI/AAAAAAAAAB0/vyvgT8rW4zc/photo.jpg?sz=128", "display_name": "Cpt Todt", "link": "https://stackoverflow.com/users/8989844/cpt-todt"}, "edited": false, "score": 0, "creation_date": 1511354506, "post_id": 47434846, "comment_id": 81824059, "body": "already did that but it changed nothing :/"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511646486, "post_id": 47434846, "comment_id": 81936954, "body": "please post the contents of <code>arrayio.h</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511647735, "post_id": 47434846, "comment_id": 81937245, "body": "when calling any of the heap allocation functions: (malloc, calloc, realloc) 1) always check (!=NULL) the returned value to assure the operation was successful.  2) the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511647964, "post_id": 47434846, "comment_id": 81937292, "body": "error messages should be output to <code>stderr</code>, not <code>stdout</code>,  In general, when notifying the user of a command line parameter missing, should output a <code>USAGE</code> message to <code>stderr</code>, similiar to: <code>fprintf( stderr, &quot;USAGE: %s  &lt;parm1&gt;\\n&quot;, argv[0] );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1511648222, "post_id": 47434846, "comment_id": 81937369, "body": "when sorting a file&#39;s contents, the best approach is to use <code>mmap</code> on the file. Then use something like <code>qsort()</code>  or <code>mergesort()</code> or similiar to perform the sorting."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511354560, "post_id": 47434993, "comment_id": 81824102, "body": "Shouldn&#39;t that be <code>int count_array[MAX_VALUE + 1];</code> to allow indexing by <code>MAX_VALUE</code>?"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511354689, "post_id": 47434993, "comment_id": 81824191, "body": "@WeatherVane: Might be, to be honest I haven&#39;t looked at that with the perspective you just presented. I almost thought it over thrice if <code>calloc</code> is needed, and I am doing something wrong."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1511354840, "post_id": 47434993, "comment_id": 81824299, "body": "I presume that <code>MAX_VALUE</code> is the maximum value expected. The array also needs to be initialised to <code>0</code> with <code>int count_array[MAX_VALUE + 1] =  { 0 };</code> to perform the same way as <code>calloc</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1511355889, "post_id": 47434993, "comment_id": 81825036, "body": "<i>This has already allocated memory (Size = MAX_VALUE x size of int) for <code>count_array</code> statically.</i> Using &quot;statically&quot; here could be confusing. <code>static</code> is a C keyword that effects how memory is allocated, especially for a local variable such as <code>count_array</code> in the posted code. As coded <code>count_array</code> exists as long as the <code>main</code> function is running, and should multiple <code>main</code> functions be running in a multithreaded process, each would have its own copy of <code>count_array</code>. <code>static count_array</code> means only <i>one</i> copy would exist for the life of the program, shared by all copies of <code>main</code>."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1511356046, "post_id": 47434993, "comment_id": 81825137, "body": "@AndrewHenle: Agreed. Changed it to as simple as &#39;compile-time&#39;. Thanks!"}], "tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 1, "last_activity_date": 1511355984, "last_edit_date": 1511355984, "creation_date": 1511354424, "answer_id": 47434993, "question_id": 47434846, "link": "https://stackoverflow.com/questions/47434846/countsort-core-dumped-error/47434993#47434993", "title": "Countsort &quot;core dumped&quot; error", "body": "<p>First thing, why do you need to allocate memory dynamically?</p>\n\n<pre><code>count_array = (int*)calloc(MAX_VALUE, sizeof(int));\n</code></pre>\n\n<p>You only need to allocate memory dynamically if you don't have an idea how much memory is required. Thats the case when you'd use <code>calloc()</code> and <code>malloc()</code> primarily. </p>\n\n<p>In <code>main()</code> function, </p>\n\n<pre><code>int count_array[MAX_VALUE];\n</code></pre>\n\n<p>This has already allocated memory (Size = <code>MAX_VALUE</code> x size of <code>int</code>) for <code>count_array</code> compile-time. So, you can get rid of the code which involves <code>calloc()</code>.</p>\n\n<p>If you want to initialize all array contents to <code>0</code>, then you can use:</p>\n\n<pre><code>int count_array[MAX_VALUE] = {0};\n</code></pre>\n\n<p>Secondly, there is an array going out of bounds:</p>\n\n<pre><code>for(int j = 0; j &lt;= len; j++)\n</code></pre>\n\n<p>Change it to</p>\n\n<pre><code>for(int j = 0; j &lt; len; j++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1511354433, "creation_date": 1511354433, "answer_id": 47434996, "question_id": 47434846, "link": "https://stackoverflow.com/questions/47434846/countsort-core-dumped-error/47434996#47434996", "title": "Countsort &quot;core dumped&quot; error", "body": "<p>this loop:</p>\n\n<pre><code>for(int j = 0; j &lt;= len; j++)\n{\n    count_array[input_array[j]] = count_array[input_array[j]] +1;\n}\n</code></pre>\n\n<p>goes 1 <code>int</code> too far so reads <code>input_array[j]</code> out of <code>input_array</code> bounds. Reading one more rarely triggers a crash, but the value is completely random &amp; possibly very high so <code>count_array[input_array[j]]</code> accesses a very far address, <em>very much</em> out of bounds, hence the crash.</p>\n\n<p>fix proposal (&amp; small simplification):</p>\n\n<pre><code>for(int j = 0; j &lt; len; j++)\n{\n    count_array[input_array[j]] ++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1511649505, "creation_date": 1511649505, "answer_id": 47491191, "question_id": 47434846, "link": "https://stackoverflow.com/questions/47434846/countsort-core-dumped-error/47491191#47491191", "title": "Countsort &quot;core dumped&quot; error", "body": "<p>when the code is going to change where a pointer, in the calling function, is pointing via some activity in a called function, then the pointer to the called function must be passed as the address of the pointer.</p>\n\n<p>Similar to:</p>\n\n<p>in function: <code>main()</code></p>\n\n<pre><code>int *output_array = NULL;\n\ncount_sort_calculate_counts(input_array, len, &amp;output_array);\n</code></pre>\n\n<p>in function: <code>count_sort_calculate_counts()</code></p>\n\n<pre><code>void count_sort_calculate_counts(int input_array[], int len, int **count_array)\n\n\n*count_array = calloc(MAX_VALUE, sizeof(int));\nif( !(*count_array) )\n{\n    // handle error then exit program\n}\n</code></pre>\n\n<p>this code block:</p>\n\n<pre><code>for(int j = 0; j &lt;= len; j++)\n{\n    count_array[input_array[j]] = count_array[input_array[j]] +1;\n}\n</code></pre>\n\n<p>can be greatly simplified to:</p>\n\n<pre><code>for(int j = 0; j &lt;= len; j++)\n{\n    (*count_array)[input_array[j]] += 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8989844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fnZyIkAX1jI/AAAAAAAAAAI/AAAAAAAAAB0/vyvgT8rW4zc/photo.jpg?sz=128", "display_name": "Cpt Todt", "link": "https://stackoverflow.com/users/8989844/cpt-todt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511649505, "creation_date": 1511354017, "last_edit_date": 1511357609, "question_id": 47434846, "link": "https://stackoverflow.com/questions/47434846/countsort-core-dumped-error", "title": "Countsort &quot;core dumped&quot; error", "body": "<p>I'm trying to implement a count sort algorithm in c but I'm getting this <code>\"core dumped\"</code> compiler message. Does anyone know where my mistake is?</p>\n\n<p>I need to sort an array filled with numbers from an external file.</p>\n\n<p>MY CODE:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"arrayio.h\"\n\nint MAX_LAENGE = 1000;\nint MAX_VALUE = 100;\nvoid count_sort_calculate_counts(int input_array[], int len, int count_array[]) \n{  \n    count_array = (int*)calloc(MAX_VALUE, sizeof(int));\n\n    for(int i = 0; i &lt; MAX_VALUE; i++)\n    {\n        count_array[i] = 0;\n    }\n\n    for(int j = 0; j &lt;= len; j++)\n    {\n        count_array[input_array[j]] = count_array[input_array[j]] +1;\n    }\n}\n\nvoid count_sort_write_output_array(int output_array[], int len, int count_array[]) \n{\n    int k = 0;\n\n    for(int i = 0; i &lt; MAX_VALUE; i++)\n    {\n        for(int j = 0; j &lt; count_array[i]; j++)\n        {\n        output_array[k] = i;\n        k = k + 1;\n        }   \n    }\n}\n\nint main(int argc, char *argv[]) {\n\n    if (argc &lt; 2){\n        printf(\"Aufruf: %s &lt;Dateiname&gt;\\n\", argv[0]);\n        printf(\"Beispiel: %s zahlen.txt\\n\", argv[0]);\n        exit(1);\n    }\n\n    char *filename = argv[1];\n\n    int input_array[MAX_LAENGE];\n    int len = read_array_from_file(input_array, MAX_LAENGE, filename);\n\n    printf(\"Unsortiertes Array:\");\n    print_array(input_array, len);\n\n    int count_array[MAX_VALUE];\n    int output_array[MAX_LAENGE];\n\n    count_sort_calculate_counts(input_array, len, output_array);\n    count_sort_write_output_array(output_array, len, count_array);\n    printf(\"Sortiertes Array:\");\n    print_array(output_array, len);\n\n    free(count_array);\n    return 0;\n}\n</code></pre>\n\n<p>I thought about it for days but I can't solve it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1511353943, "post_id": 47434802, "comment_id": 81823708, "body": "Show us the error message."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1511353954, "post_id": 47434802, "comment_id": 81823713, "body": "And the compilation statement, too."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 2, "creation_date": 1511353989, "post_id": 47434802, "comment_id": 81823743, "body": "Are you copying code from MS Word?"}, {"owner": {"reputation": 373, "user_id": 7194732, "user_type": "registered", "profile_image": "https://graph.facebook.com/1819340328284639/picture?type=large", "display_name": "Nadim Tareq", "link": "https://stackoverflow.com/users/7194732/nadim-tareq"}, "edited": false, "score": 0, "creation_date": 1511354064, "post_id": 47434802, "comment_id": 81823790, "body": "No copy from another"}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 3, "creation_date": 1511354394, "post_id": 47434802, "comment_id": 81823986, "body": "It seems to be a UTF-8 byte sequence for a BOM character, a zero-width space at the begin of the file to let Notepad on Windows detect it is a UTF-8 text file. With another editor like Notepad++ you can save it as UTF-8 without BOM. Or a couple of backspaces deleting the first char of the text. Maybe it would help to set the projects encoding to UTF-8 too; the compiler for instance."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 1, "creation_date": 1511354609, "post_id": 47434802, "comment_id": 81824134, "body": "@JoopEggen the BOM isn&#39;t a zero-width space, afaik."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1511355340, "post_id": 47434802, "comment_id": 81824635, "body": "I believe you should set Codeblocks Settings -&gt; Editor -&gt; Other settings tab -&gt; Use encoding when opening files: UTF-8. And then check &quot;use this encoding as fallback encoding&quot;."}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 0, "creation_date": 1511355386, "post_id": 47434802, "comment_id": 81824667, "body": "@FelixPalmen Wikipedia cited: <i>If the BOM (Byte Order Mark) character appears in the middle of a data stream, Unicode says it should be interpreted as a &quot;zero-width non-breaking space.&quot;</i> My description was intended to hint that the character is not seen, a ghost."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1511356781, "post_id": 47434802, "comment_id": 81825645, "body": "And please don&#39;t dump us with screen shots of compiler messages. Their text suffices."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 1, "creation_date": 1511360969, "post_id": 47434802, "comment_id": 81828591, "body": "@JoopEggen That&#39;s the wrong way around. The BOM is a different sequence and this just tells it should be seen as whitespace when appearing somewhere in the middle. The character codes in the error message are not the BOM."}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 1, "creation_date": 1511361467, "post_id": 47434802, "comment_id": 81828972, "body": "@FelixPalmen Apologies, I have checked the values, and they are not of a BOM. So there must be special chars. Could happen via an included macro too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 0, "creation_date": 1511361542, "post_id": 47434802, "comment_id": 81829023, "body": "@JoopEggen it&#39;s an <i>actual</i> &quot;zero width space&quot; here. But yes, a BOM would lead to a very similar error."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1614922326, "post_id": 47434802, "comment_id": 117538444, "body": "This is a duplicate. The canonical is <i><a href=\"https://stackoverflow.com/questions/19198332\">Compilation error: stray \u2018\\302\u2019 in program, etc.</a></i>."}], "answers": [{"comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511354456, "post_id": 47434894, "comment_id": 81824027, "body": "How do you remember the exact byte sequence of that zero-width-space?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 1, "creation_date": 1511354569, "post_id": 47434894, "comment_id": 81824109, "body": "@iBug convert octal to hex and google for the hex? With such a sequence of <code>&gt;0x7f</code> characters, it&#39;s pretty obvious it&#39;s an UTF-8 sequence."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1511355251, "post_id": 47434894, "comment_id": 81824561, "body": "<i>&quot;(even windows&#39; &quot;notepad&quot; should do)&quot;</i> Unfortunately, if you save file as UTF-8 it will include BOM too without telling you. Windows Notepad is so crap that it should not be used at all."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1511361030, "post_id": 47434894, "comment_id": 81828636, "body": "@user694733 well, the problem <i>here</i> wasn&#39;t a BOM, but good to know ... this would of course lead to a <i>similar</i> problem."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1614922533, "post_id": 47434894, "comment_id": 117538492, "body": "It is usually not caused by using word processors, but by copy-pasting code from web pages, PDF files, or chat (e.g. Skype Chat)."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 7, "last_activity_date": 1615058530, "last_edit_date": 1615058530, "creation_date": 1511354145, "answer_id": 47434894, "question_id": 47434802, "link": "https://stackoverflow.com/questions/47434802/error-stray-342-stray-200-stray-213-in-c-compiling/47434894#47434894", "title": "\u201cerror: stray &#39;\\342&#39; \u201d, \u201cstray &#39;\\200&#39; \u201d, \u201cstray &#39;\\213&#39; \u201d in C compiling", "body": "<p>You have &quot;crap characters&quot; in your source file.</p>\n<p><code>\\342 \\200 \\213</code> is octal for 0xE2 0x80 0x8B which is a <em><a href=\"https://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192&amp;number=128\" rel=\"nofollow noreferrer\">zero width space</a></em> in UTF-8 (Unicode <code>U+200B</code>), something no C compiler can make sense of (and something you can't see, zero-width after all, when UTF-8 is displayed correctly).</p>\n<p>-&gt; Use a text or code editor (even Windows' <a href=\"https://en.wikipedia.org/wiki/Notepad_%28software%29\" rel=\"nofollow noreferrer\">Notepad</a> should do, if not saving as UTF-8, but any other editor would be better) and/or an integrated development environment to write your code. Don't ever use word processors or the like, that might introduce unwanted characters.</p>\n"}, {"comments": [{"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1614922736, "post_id": 47434910, "comment_id": 117538538, "body": "This will not help with zero width space (U+200B) that seems <a href=\"https://stackoverflow.com/questions/47434802/error-stray-342-stray-200-stray-213-in-c-compiling/47434894#47434894\">to be the case here</a>. However, some code editors can do Unicode code point search and replace (e.g., <a href=\"https://en.wikipedia.org/wiki/Notepad%2B%2B\" rel=\"nofollow noreferrer\">Notepad++</a>)."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615058640, "post_id": 47434910, "comment_id": 117576605, "body": "To be more precise, in this case, use <code>\\x{200B}</code> in a regular expression search."}], "tags": [], "owner": {"reputation": 26959, "user_id": 979987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pJhEk.jpg?s=128&g=1", "display_name": "Wookie88", "link": "https://stackoverflow.com/users/979987/wookie88"}, "is_accepted": false, "score": 1, "last_activity_date": 1614922595, "last_edit_date": 1614922595, "creation_date": 1511354183, "answer_id": 47434910, "question_id": 47434802, "link": "https://stackoverflow.com/questions/47434802/error-stray-342-stray-200-stray-213-in-c-compiling/47434910#47434910", "title": "\u201cerror: stray &#39;\\342&#39; \u201d, \u201cstray &#39;\\200&#39; \u201d, \u201cstray &#39;\\213&#39; \u201d in C compiling", "body": "<p>This seem to be a problem with bad characters in your code. Characters that are non-printable like \u255a or something. Open your code for example in Notepad++, select menu option to view all characters, menu <em>View</em> \u2192 <em>Show invisible characters</em> \u2192 <em>Show all characters</em> and remove any bad characters from your code.</p>\n"}, {"comments": [{"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1614922860, "post_id": 47434911, "comment_id": 117538565, "body": "Or by copying code from web pages, PDF files, or through chat, like Skype Chat."}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 1, "last_activity_date": 1511354186, "creation_date": 1511354186, "answer_id": 47434911, "question_id": 47434802, "link": "https://stackoverflow.com/questions/47434802/error-stray-342-stray-200-stray-213-in-c-compiling/47434911#47434911", "title": "\u201cerror: stray &#39;\\342&#39; \u201d, \u201cstray &#39;\\200&#39; \u201d, \u201cstray &#39;\\213&#39; \u201d in C compiling", "body": "<p>The code <strong>looks</strong> fine.</p>\n\n<p>According to my personal experience, <code>stray '\\xxx'</code> is often caused by using invalid characters in your code (except in string literals), which happens more frequently if your language is not English.</p>\n\n<p>For example, this code generates such an error:</p>\n\n<pre><code>int main\uff08\uff09\uff5breturn 0\uff1b\uff5d\n</code></pre>\n\n<p>I can't find what's wrong, so my only suggestion is <strong>make sure your IME is switched to English, then type the code again</strong>.</p>\n"}], "owner": {"reputation": 373, "user_id": 7194732, "user_type": "registered", "profile_image": "https://graph.facebook.com/1819340328284639/picture?type=large", "display_name": "Nadim Tareq", "link": "https://stackoverflow.com/users/7194732/nadim-tareq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5088, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1615058743, "creation_date": 1511353884, "last_edit_date": 1615058743, "question_id": 47434802, "link": "https://stackoverflow.com/questions/47434802/error-stray-342-stray-200-stray-213-in-c-compiling", "title": "\u201cerror: stray &#39;\\342&#39; \u201d, \u201cstray &#39;\\200&#39; \u201d, \u201cstray &#39;\\213&#39; \u201d in C compiling", "body": "<p>Here is my code</p>\n<pre><code>int main()\u200b\n{\n    float avg, age[] = { 23.4, 55, 22.6, 3, 40.5, 18 };\n    avg = average(age); /* Only name of array is passed as argument. */\n    printf(&quot;Average age=%.2f&quot;, avg);\n    return 0;\n}\n</code></pre>\n<p>Compilation error in <code>int main()</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>error: stray '\\342' in program\nerror: stray '\\200' in program\nerror: stray '\\213' in program\n</code></pre>\n"}, {"tags": ["c", "string", "compiler-errors"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1511353398, "post_id": 47434619, "comment_id": 81823356, "body": "Stop here, C is not a language that you can learn randomly, get a C book. <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/562303/&hellip;</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1511353770, "post_id": 47434619, "comment_id": 81823588, "body": "Did not your compiler warn you?"}, {"owner": {"reputation": 54, "user_id": 6568831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rWAhMkUgkuU/AAAAAAAAAAI/AAAAAAAAACI/lB0swRV-en8/photo.jpg?sz=128", "display_name": "Adithya Santhosh", "link": "https://stackoverflow.com/users/6568831/adithya-santhosh"}, "edited": false, "score": 0, "creation_date": 1511353816, "post_id": 47434619, "comment_id": 81823623, "body": "No It just showed the error. Working on the problem now"}, {"owner": {"reputation": 54, "user_id": 6568831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rWAhMkUgkuU/AAAAAAAAAAI/AAAAAAAAACI/lB0swRV-en8/photo.jpg?sz=128", "display_name": "Adithya Santhosh", "link": "https://stackoverflow.com/users/6568831/adithya-santhosh"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511353885, "post_id": 47434619, "comment_id": 81823669, "body": "@Stargateur sure will get a book.Any suggestion for a good book?"}, {"owner": {"reputation": 54, "user_id": 6568831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rWAhMkUgkuU/AAAAAAAAAAI/AAAAAAAAACI/lB0swRV-en8/photo.jpg?sz=128", "display_name": "Adithya Santhosh", "link": "https://stackoverflow.com/users/6568831/adithya-santhosh"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1511354007, "post_id": 47434619, "comment_id": 81823756, "body": "@user3121023 sure"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1511355775, "post_id": 47434619, "comment_id": 81824949, "body": "1) Throw away this code. 2) Trap your teacher at the bottom of a deep hole by baiting them there with a MS DOS computer from 1991. 3) Uninstall Turbo C. 4) Download something modern, such as for example Codeblocks/gcc."}], "answers": [{"tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 2, "last_activity_date": 1511353741, "last_edit_date": 1511353741, "creation_date": 1511353419, "answer_id": 47434657, "question_id": 47434619, "link": "https://stackoverflow.com/questions/47434619/type-mismatch-in-c-programming/47434657#47434657", "title": "Type mismatch in c programming", "body": "<p>I can see one problem straight away:</p>\n\n<pre><code>printf(\"The Length of the String %s is %d \",a,len);\n</code></pre>\n\n<p><code>%s</code> is used with strings, and you are passing a <code>char</code>.</p>\n\n<p>And, I can see that</p>\n\n<pre><code>printlength(a);\n</code></pre>\n\n<p>And <code>a</code> is a char array here, so, you need to change to</p>\n\n<pre><code>void printlength(char *a)\n</code></pre>\n\n<p>Additinally, you must get rid of <code>&amp;</code> with <code>a</code> in your <code>scanf()</code>, and to avoid buffer overflows, use </p>\n\n<pre><code>scanf(\"%24s\",a);\n</code></pre>\n\n<p>A textbook in C programming very a good to start off, and also take a look at the warnings your compiler is providing you with, those are meant for something rather than avoiding.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1511354387, "creation_date": 1511354387, "answer_id": 47434981, "question_id": 47434619, "link": "https://stackoverflow.com/questions/47434619/type-mismatch-in-c-programming/47434981#47434981", "title": "Type mismatch in c programming", "body": "<p>For starters according to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Format specifier <code>%s</code> expects an argument of the type <code>char *</code>. So the statement with the call of <code>scanf</code> should be written at least like</p>\n\n<pre><code>scanf(\"%s\", a);\n           ^^^\n</code></pre>\n\n<p>though it is more safe to write</p>\n\n<pre><code>scanf(\"%24s\", a);\n</code></pre>\n\n<p>It is supposed that the function <code>printlength</code> deals with strings. So taking also in account that the pointed data is not changed in the function its parameter shall be declared like</p>\n\n<pre><code>void printlength( const char *a );\n                  ^^^^^^^^^^^^^\n</code></pre>\n\n<p>The return type of the standard function <code>strlen</code> is <code>size_t</code>. So the variable len should be declared as having the type <code>size_t</code>.</p>\n\n<p>So within the function there should be</p>\n\n<pre><code>size_t len = strlen(a);\nprintf(\"The Length of the String %s is %zu\\n\", a, len);\n</code></pre>\n\n<p>It is better to move the call of the non-standard function <code>getch</code> in main.</p>\n\n<pre><code>int main( void )\n{\n    //...\n\n    getch();\n}\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 6568831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rWAhMkUgkuU/AAAAAAAAAAI/AAAAAAAAACI/lB0swRV-en8/photo.jpg?sz=128", "display_name": "Adithya Santhosh", "link": "https://stackoverflow.com/users/6568831/adithya-santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1933, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511354387, "creation_date": 1511353313, "last_edit_date": 1511353771, "question_id": 47434619, "link": "https://stackoverflow.com/questions/47434619/type-mismatch-in-c-programming", "title": "Type mismatch in c programming", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;string.h&gt;\n\nvoid printlength(char a);\n\nvoid printlength(char a)\n{\n    int len = strlen(a);\n    printf(\"The Length of the String %s is %d \", a, len);\n    getch();\n}\n\nvoid main()\n{\n    char a[25];\n    clrscr();\n    printf(\"Enter the name\");\n    scanf(\"%s\", &amp;a);\n    printlength(a);\n}\n</code></pre>\n\n<p>I just started learning c and stuck in these error.\nI am getting both the error </p>\n\n<p>type mismatch in parameter error in c and \ntype mismatch in parameter redeclaration  </p>\n"}, {"tags": ["c", "function", "random"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1511352921, "post_id": 47434431, "comment_id": 81823053, "body": "hey <code>10^i</code> is not &quot;10 power i&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7511412"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511352935, "post_id": 47434431, "comment_id": 81823066, "body": "Sorry, I just forgot to write that <code>N_DIGITS</code> is a constant integer 4. I have edited."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 4, "creation_date": 1511353102, "post_id": 47434431, "comment_id": 81823171, "body": "Don&#39;t call <code>srand</code> more than once.  <a href=\"https://stackoverflow.com/questions/7343833/srand-why-call-it-only-once\" title=\"srand why call it only once\">stackoverflow.com/questions/7343833/srand-why-call-it-only-o&zwnj;&#8203;nce</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7511412"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511353998, "post_id": 47434431, "comment_id": 81823750, "body": "@Jean-Fran&#231;oisFabre Oops! Thanks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7511412"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1511354029, "post_id": 47434431, "comment_id": 81823774, "body": "@KlasLindb&#228;ck Got it! Thanks."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7511412"}, "edited": false, "score": 0, "creation_date": 1511354411, "post_id": 47434562, "comment_id": 81824000, "body": "Thank you very much for the detailed answers^_^! Just a further small question: as I fixed the function and tried to test the new returned value, it seemed that those returned value now usually, if not always, started with 1, 8, 2,3 and digit like 4, 5, 6 seldom appeared in the first place. Is it because that the computer cannot really generate the so-called random number as we wished? So what we can do is try to make the program generate the digits as random as possible."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511354540, "post_id": 47434562, "comment_id": 81824085, "body": "since random is <i>really</i> random now, I cannot really answer. try removing the <code>srand</code> to get the same sequence, always, just to test."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1511353506, "last_edit_date": 1511353506, "creation_date": 1511353116, "answer_id": 47434562, "question_id": 47434431, "link": "https://stackoverflow.com/questions/47434431/weird-pattern-when-i-try-to-generate-a-4-digit-integer-for-which-every-digit-is/47434562#47434562", "title": "Weird pattern when I try to generate a 4-digit integer for which every digit is distinct", "body": "<p>your <code>choose_N</code> method has several issues:</p>\n\n<ul>\n<li>First, if the number isn't valid, you're not resetting it to <code>0</code>, so it just grows and grows.</li>\n<li>Second, <code>srand(time(0))</code> is not necessary within the loop (and could yield the same result for several iterations), just do it at program start (<a href=\"https://stackoverflow.com/questions/7343833/srand-why-call-it-only-once\">srand() \u2014 why call it only once?</a>)</li>\n<li>Third and biggest mistake: <code>10 ^ i</code> is 10 xor i, not <code>10**i</code>. You can use an aux value and multiply by 10 in your loop. Since number of digits is low, no risk of overflow</li>\n<li>minor remark: you want to pass in the loop at least once, so use a <code>do/while</code> construct instead, so you don't have to force the first <code>while</code> test.</li>\n</ul>\n\n<p>I'm trying to fix your code:</p>\n\n<pre><code>int choose_N(void){\n  int i, number;\n  do\n  {\n    number = 0;\n    int p = 1;\n    for(i=0;i&lt;N_DIGITS;i++)\n    {      \n      number += p*(rand()%10);\n      p *= 10;\n    }\n  } while(!isvalid(number));\n\n  return number;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 0, "last_activity_date": 1511384109, "creation_date": 1511384109, "answer_id": 47443733, "question_id": 47434431, "link": "https://stackoverflow.com/questions/47434431/weird-pattern-when-i-try-to-generate-a-4-digit-integer-for-which-every-digit-is/47443733#47443733", "title": "Weird pattern when I try to generate a 4-digit integer for which every digit is distinct", "body": "<p>While @Jean-Fran\u00e7ois-Fabre answer is the right one, it is not optimal algorithm. Optimal algorithm in such case would be using <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">FIsher-Yates-Knuth shuffle</a> and Durstenfeld's implementation.</p>\n\n<p>Shuffling right array will produce numbers which are automatically valid, basically no need for <code>isvalid(n)</code> anymore.</p>\n\n<p>Code</p>\n\n<pre><code>// Swap selected by index digit and last one. Return last one\nint\nswap_array(int digits[], int idx, int last) {\n    if (idx != last) { // do actual swap\n        int tmp = digits[last];\n        digits[last] = digits[idx];\n        digits[idx]  = tmp;\n    }\n\n    return digits[last];\n}\n\nint\nchoose_N_Fisher_Yates_Knuth() {\n    int digits[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n\n    int r = 0;\n    for (int k = 0; k != N_DIGITS; ++k) {\n        int idx = rand() % (9 - k);\n\n        int n = swap_array(digits, idx, (9 - k) - 1);\n        r = r * 10 + n;\n    }\n    return r;\n}\n\nint\nmain() {\n    srand(12345);\n\n    int r, v;\n\n    r = choose_N_Fisher_Yates_Knuth();\n    v = isvalid(r);\n    printf(\"%d   %d\\n\", r, v);\n\n    r = choose_N_Fisher_Yates_Knuth();\n    v = isvalid(r);\n    printf(\"%d   %d\\n\", r, v);\n\n    r = choose_N_Fisher_Yates_Knuth();\n    v = isvalid(r);\n    printf(\"%d   %d\\n\", r, v);\n\n    r = choose_N_Fisher_Yates_Knuth();\n    v = isvalid(r);\n    printf(\"%d   %d\\n\", r, v);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>7514   1\n6932   1\n3518   1\n5917   1\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7511412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 47434562, "answer_count": 2, "score": 0, "last_activity_date": 1511384109, "creation_date": 1511352751, "last_edit_date": 1511355526, "question_id": 47434431, "link": "https://stackoverflow.com/questions/47434431/weird-pattern-when-i-try-to-generate-a-4-digit-integer-for-which-every-digit-is", "title": "Weird pattern when I try to generate a 4-digit integer for which every digit is distinct", "body": "<p>When I try to write a small program in C language that is intended to generate a 4-digit integer for which every digit is distinct and nonzero, the returned value is always in pattern like 1abc: the first digit seems to always be 1, and sometimes the returned value will be more than 4-digit like 56127254. Could anyone help me look into this? Thank you very much in advance.</p>\n\n<p>So basically the program includes two functions, <code>int isvalid(int n)</code> and <code>int choose_N(void)</code>.</p>\n\n<p><code>isValid</code> return 1 if the integer consists of exactly 4 decimal digits, and all these digits are nonzero and distinct, and 0 otherwise. </p>\n\n<p>And <code>int choose_N(void)</code> generates an integer that is 4-digit and all the digits are distinct and nonzero.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#define N_DIGITS 4\n\n....\n....//the main function \n\nint isvalid(int n){\n  int i, x; int check[N_DIGITS]={0};\n  for(i=1;i&lt;=N_DIGITS;i++){ //check whether all digits are nonzero\n    if((check[i-1]=n%10)==0){\n      return 0;\n    }\n    n /= 10;\n  }\n  for(i=0;i&lt;N_DIGITS-1;i++){ // check whether all digits are distinct\n    for(x=i+1;x&lt;N_DIGITS;x++){\n      if(check[i]==check[x])\n        return 0;\n    }\n  }\n  return 1;\n}\n\nint choose_N(void){\n  int i; int number=0;\n  while(!isvalid(number)){\n    for(i=0;i&lt;N_DIGITS;i++){\n      srand(time(0));\n      number += ((10^i)*(rand()%10));\n    }\n  }\n  return number;\n}\n</code></pre>\n\n<p>For <code>srand(time(0));</code>, I have tried various alternatives like <code>srand(time(0)+i);</code> or put this statement out of <code>while</code> loop, but those attempts seemingly did not work and still the returned value of <code>choose_N</code>still showed the werid pattern that I described.</p>\n"}, {"tags": ["c", "undefined-behavior"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1511352981, "post_id": 47434392, "comment_id": 81823102, "body": "The broader question is answered by 3.4.3.1. If some behavior is not imposed by the standard either explicitly or implicitly, it&#39;s UB."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511353335, "post_id": 47434392, "comment_id": 81823326, "body": "The real philosophical question is: what is really an implementation of C? (and the answer is not that simple)"}], "answers": [{"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1617292333, "post_id": 47434508, "comment_id": 118269739, "body": "A complication here is that many implementations may represent values in registers differently from values in memory, and even if all bit patterns that could fit in memory would represent valid values, it may be possible for registers to hold bit patterns which do not.  For example, an uninitialized automatic object of type <code>uint16_t</code> might behave as though it holds a value outside the range 0..0xFFFF."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1511353495, "last_edit_date": 1511353495, "creation_date": 1511352971, "answer_id": 47434508, "question_id": 47434392, "link": "https://stackoverflow.com/questions/47434392/does-undefined-behaviour-have-to-be-defined-to-be-undefined/47434508#47434508", "title": "Does undefined behaviour have to be defined to be undefined?", "body": "<p>When an object is not initialized then it has indeterminate<sup>*</sup> value. Accessing this object invoke undefined behavior only if this value is a trap representations.<br>\nThat says the answer you are referring to has wrong reasoning. <a href=\"https://stackoverflow.com/a/47432210/2455888\">Accepted answer</a> is the correct one.</p>\n\n<hr>\n\n<p><sub>* <strong>indeterminate value:</strong><br>\neither an unspecified value or a trap representation<br>\n<strong>unspecified value:</strong><br>\nvalid value of the relevant type where this International Standard imposes no requirements on which value is chosen in any instance<br>\nNOTE <strong>An unspecified value cannot be a trap representation</strong>.<br>\n<strong>trap representation:</strong><br>\nan object representation that need not represent a value of the object type<br>\n(\u00a73.19.2, \u00a73.19.3, \u00a73.19.4)\n</sub></p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1617292176, "post_id": 47435957, "comment_id": 118269672, "body": "The quoted text is nonsensically recursive: if the Standard says a behavior is undefined, then [the Standard says] the behavior is undefined.  A more accurate statement would be to say replace &quot;behavior that is undefined&quot; with its actual definition: &quot;behavior <i>over which the Standard imposes no requirements</i>&quot;"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1511357297, "creation_date": 1511357297, "answer_id": 47435957, "question_id": 47434392, "link": "https://stackoverflow.com/questions/47434392/does-undefined-behaviour-have-to-be-defined-to-be-undefined/47435957#47435957", "title": "Does undefined behaviour have to be defined to be undefined?", "body": "<p>No, behavior is undefined when it is not defined, forbidden \"shall not\" or explicitly marked as undefined. Here is the definition of these things in the C standard, clause 4 \"Conformance\", para 2:</p>\n\n<blockquote>\n  <p>If a \u201cshall\u201d or \u201cshall not\u201d requirement that appears outside of a\n  constraint or runtime-constraint is violated, the behavior is\n  undefined. Undefined behavior is otherwise indicated in this\n  International Standard by the words \u201cundefined behavior\u201d or by the\n  omission of any explicit definition of behavior. There is no\n  difference in emphasis among these three; they all describe \u201cbehavior\n  that is undefined\u201d.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1511472147, "creation_date": 1511472147, "answer_id": 47463405, "question_id": 47434392, "link": "https://stackoverflow.com/questions/47434392/does-undefined-behaviour-have-to-be-defined-to-be-undefined/47463405#47463405", "title": "Does undefined behaviour have to be defined to be undefined?", "body": "<p>The C89 Standard was written primarily from a descriptive rather than a prescriptive standpoint, at a time when many actions would have behaviors specified by some but not all implementations, based in significant measure upon the target platforms and application fields.  Further, many actions would have predictable and easily-specifiable consequences in some circumstances but not others.  The authors of the Standard made no effort to exhaustively describe all combinations of circumstances when quality implementations should be expected to behave predictably, and even go so far as to note in their rationale document that a sufficiently poor-quality implementation could be simultaneously conforming and useless.</p>\n\n<p>With reference to reading uninitialized data from an array, consider the following code:</p>\n\n<pre><code>float test(int a, int b, int c, int d)\n{\n  float result;\n  float *f = malloc(10*sizeof float);\n  f[a] = 1.0f; f[b] = 2.0f; f[c] = 3.0f;\n  result = f[d];\n  free(f);\n  return result;\n}\n</code></pre>\n\n<p>On some platforms, attempting to process certain bit patterns as floating-point numbers might trigger a possibly-non-configured trap handler.  I think it's pretty clear that the authors of the Standard wanted to avoid requiring that implementations for such platforms prevent code like the above from firing the trap handler if e.g. code calls `test(1,2,3,4), nor requiring that they limit the consequences of such a trap if it fires.  Further, I don't think they would have viewed negatively the quality implementations <em>on such platforms</em> where such code might yield  arbitrary and unpredictable effects.</p>\n\n<p>Suppose, however, the code had been:</p>\n\n<pre><code>typedef struct { float v; } flt;\n\nflt test2(int a, int b, int c, int d)\n{\n  flt result;\n  flt *f = malloc(10*sizeof flt);\n  f[a].v = 1.0f; f[b].v = 2.0f; f[c].v = 3.0f;\n  result = f[d];\n  free(f);\n  return result;\n}\n</code></pre>\n\n<p>The Standard explicitly forbids structures from having trap representations.  As a consequence, there would be no way that <code>f[d]</code> could hold a trap representation, and thus no reason for anything weird to happen when it is read.  If code which calls <code>test2</code> were to attempt to use field <code>v</code> of the result, <em>that</em> might trigger an unwanted trap handler, but if nothing ever does anything with that field there should be no problem.</p>\n\n<p>Unfortunately, because the authors of the Standard were not trying to list out all the combinations of circumstances where quality implementations should be expected to behave predictably, they didn't think it necessary to distinguish between cases where certain actions might have unpredictable actions in some circumstances, from those where the actions should be viewed as never having predictable consequences even in cases where other parts of the Standard or an implementation's documentation would otherwise guarantee the behavior.</p>\n\n<p>The authors of C89 stated that they wanted to avoid breaking existing code whenever possible, but they failed to explicitly specify behavior in many combinations of circumstances where programs would rely upon them.  Unless they were lying or incompetent, such failure would most logically be attributed to a belief that implementers shouldn't need a complete list of all such behaviors in order to recognize and support them where required.</p>\n\n<p>Should one be able to trust that a compiler which is configured to behave as a quality implementation suitable for low-level programming, which targets a platform that doesn't have trap representations, won't totally jump the rails when reading an uninitialized array value?  Given the low cost of supporting such a guarantee, I would suggest that any implementation that can't uphold it isn't a quality compiler suitable for low-level programming.</p>\n\n<p>Should one trust that gcc and clang won't behave oddly when given code which relies upon behaviors not mandated by the Standard, or even does things which are defined by the Standard but would, in the absence of optimization be equivalent to ones that aren't?  No.  It really doesn't matter whether the Standard defines a particular behavior if some compilers process the behaviors usefully and others try to avoid doing so and view the few cases where the Standard tries to explicitly defines the behavior as defects in the Standard.</p>\n"}], "owner": {"reputation": 1320, "user_id": 3013249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e43f8b866b98837f3454d63ed654b12b?s=128&d=identicon&r=PG&f=1", "display_name": "MrPaulch", "link": "https://stackoverflow.com/users/3013249/mrpaulch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511472147, "creation_date": 1511352617, "question_id": 47434392, "link": "https://stackoverflow.com/questions/47434392/does-undefined-behaviour-have-to-be-defined-to-be-undefined", "title": "Does undefined behaviour have to be defined to be undefined?", "body": "<p>Despite the appearance of the title, this is <strong>not</strong> a philosophical question.</p>\n\n<p>It is however strictly about semantics.</p>\n\n<h1>Background</h1>\n\n<p>This <a href=\"https://stackoverflow.com/a/47432220/3013249\">answer</a>, in an earlier edit, stated that reading uninitialized values is undefined behavior. I was in agreement with that assessment. Others were not.</p>\n\n<p>After some digging I came to the conclusion that it is undefined whether it is undefined behaviour.</p>\n\n<p>The subsection 2 in 6.3.2.1 of the standard only states that accessing an uninitialized object that </p>\n\n<blockquote>\n  <p>[...] could have been declared with the register storage class [...]</p>\n</blockquote>\n\n<p>is undefined behaviour.</p>\n\n<p>Other sections, such as 6.7.9 [Initializers] or 6.5.2.1 [Array subscripting] don't mention accessing uninitialized values.</p>\n\n<p>So there is no question about whether there is a mention that this particular case is called undefined behavior by the standard.</p>\n\n<h1>Semantics</h1>\n\n<p>However: 3.4.3 1 states that <em>undefined behaviour</em> is</p>\n\n<blockquote>\n  <p>behavior, upon use of a nonportable or erroneous program construct or of erroneous data,\n      for which this International Standard imposes no requirements</p>\n</blockquote>\n\n<p>Reading from an uninitialized array </p>\n\n<ul>\n<li>uses <em>erroneous data</em></li>\n<li>uses nonportable construct. (Namely the specifics of memory allocation<sup>1</sup>)</li>\n<li>leads to behaviour, that has</li>\n<li>has no requirements by the standard to produce a predictable effect</li>\n</ul>\n\n<p>I would call that \"undefined behavior\".\nBut maybe I'm missing something(?)</p>\n\n<p>And the broader question remains:</p>\n\n<p><strong>Does a behavior have to be explicitly mentioned as such, to be considered \"undefined behavior\"?</strong></p>\n\n<p>Notes:</p>\n\n<ul>\n<li>The question is specific to the C Language and it's community</li>\n<li>The question is about semantics. It does not question whether reading from uninitialized arrays is \"sensible\". (It's is not, unless you are a pen tester)</li>\n<li>I used <a href=\"http://iso-9899.info/n1570.html\" rel=\"nofollow noreferrer\">this</a> draft of the C11 Standard</li>\n</ul>\n\n<p>Footnotes:</p>\n\n<ol>\n<li><code>malloc</code> <code>calloc</code> and such, do have requirements on how the allocation is performed. But declaring a fixed length array does not specify the nature of the uninitialized data.</li>\n</ol>\n"}, {"tags": ["c", "struct", "file-io", "c99"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1511352806, "post_id": 47434168, "comment_id": 81822989, "body": "Even if you output the correct number of bytes to your file (<code>fwrite(hashMap, 1, sizeof(hashMap), fr);</code> \u2192 <code>fwrite(hashMap, 1, sizeof(BASE), fr);</code>), your binary file would still only contain a single <code>BASE</code> struct, containing one pointer (<code>struct node *head</code>) and one integer (<code>int length</code>). None of the data pointed to by <code>head</code> is going into the file at all."}, {"owner": {"reputation": 132, "user_id": 8939032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c1c3754a5f470b9559b864b338f7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/8939032/sean"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1511353210, "post_id": 47434168, "comment_id": 81823248, "body": "@squeamishossifrage that is what i though was happening. Any idea how i could get around this? Or would i have to go through the linked list one by one saving all the data to file"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1511354221, "post_id": 47434168, "comment_id": 81823884, "body": "Yes, you&#39;ll just have to work through the list. Bear in mind that you can&#39;t load pointers from disk and expect them to point to anything valid, so you&#39;ll also need to think about how the links in your list can be stored reliably."}, {"owner": {"reputation": 132, "user_id": 8939032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c1c3754a5f470b9559b864b338f7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/8939032/sean"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1511354378, "post_id": 47434168, "comment_id": 81823979, "body": "@squeamishossifrage yea thanks for the help"}], "owner": {"reputation": 132, "user_id": 8939032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c1c3754a5f470b9559b864b338f7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/8939032/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511351934, "creation_date": 1511351934, "question_id": 47434168, "link": "https://stackoverflow.com/questions/47434168/reading-and-writing-array-of-structs-to-a-binary-file-c99", "title": "Reading and Writing array of structs to a binary file c99", "body": "<p>I Have a basic version of a HashMap implemented in C. However, i am trying to save and load it to/from a binary file. I am losing the data held within the array during this process however. I am pretty sure it is a error within my sizeof(hashMap) logic.</p>\n\n<p>the hashMap structs:</p>\n\n<pre><code>typedef struct bucket{\nint Hash;\nint Key;\n}BUCKET;\n\ntypedef struct node{\nstruct bucket data;\nstruct node * next;\n}NODE;\n\ntypedef struct base{\nstruct node * head;\nint length;\n}BASE;\n</code></pre>\n\n<p>The decleration of the array</p>\n\n<pre><code>BASE * hashMap[hashMapWidth]\n</code></pre>\n\n<p>The code for saving:</p>\n\n<pre><code> printf(\"Saving to File\\n\");\n FILE *fr = fopen(\"LinkedListArray.bin\", \"wb\");\n fwrite(hashMap, 1, sizeof(hashMap), fr);\n fclose(fr);\n</code></pre>\n\n<p>The code for loading:</p>\n\n<pre><code>FILE *fw = fopen(\"LinkedListArray.bin\", \"rb\");\nlong pos = ftell(fw);\nfseek(fw, 0, SEEK_END);\nlong length = ftell(fw);\nfseek(fw, pos, SEEK_SET);\nfread(hashMap, (size_t) length, 1, fw);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1511350147, "post_id": 47433572, "comment_id": 81821278, "body": "Kindly show your research / debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1511350338, "post_id": 47433572, "comment_id": 81821434, "body": "Please format your code correctly first."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1511350409, "post_id": 47433572, "comment_id": 81821471, "body": "Both loops go from 0 to 9, but there are only 3 lines, not 10. Use the <code>D</code> and <code>L</code> macros instead of hardcoding the size in the for loops. And while you&#39;re at it rename <code>C</code> to <code>NB_COLUMNS</code> and <code>D</code> to <code>NB_LINES</code>."}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 2026478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690e9f3ca9d537e225449018c2581df7?s=128&d=identicon&r=PG", "display_name": "momosxp", "link": "https://stackoverflow.com/users/2026478/momosxp"}, "is_accepted": false, "score": 0, "last_activity_date": 1511432144, "creation_date": 1511432144, "answer_id": 47452967, "question_id": 47433572, "link": "https://stackoverflow.com/questions/47433572/c-finding-maximum-average-of-a-2-dimensional-array/47452967#47452967", "title": "C: Finding maximum average of a 2 dimensional array", "body": "<p>some suggestions were given in the comments already. define the size of the arrays and reuse the defines in the loops do avoid overflows.\nat first calculate the averages and memorize the maximum value.\nthen you can easily output them comparing your maximum value to the memorized avg values.</p>\n\n<pre><code>#define D  3\n#define C  10\n    float num[D][C] = {\n        {5.0, 8.0, 7.5, 4.5, 9.0, 9.0, 6.5, 3.0, 4.5, 8.5},\n        {6.0, 8.5, 7.0, 5.0, 9.5, 9.5, 6.5, 2.5, 5.0, 7.5},\n        {5.5, 8.0, 6.5, 7.5, 9.5, 9.5, 6.5, 4.0, 5.5, 9.5},\n    };\n    float avg[C]; /*will hold all the average values*/\n    float max = 0; /*will hold the maximum vlaue*/\n    int i, j;\n    for (i = 0; i &lt; C; i++) {\n        float sum = 0;\n        /*sum columns*/\n        for (j = 0; j &lt; D; j++) {\n            sum += num[j][i];\n        }\n        /*memorize calculated avg*/\n        avg[i] = sum / D;\n        /*check if maximum*/\n        if (max &lt; avg[i])\n            max = avg[i];\n    }\n    /*output index and average*/\n    for (i = 0; i &lt; C; i++)\n        if (avg[i] == max)\n            printf(\"%0.2f %d\\n\",max,i);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8941628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2695277f7dcd40017e09d987262fce3e?s=128&d=identicon&r=PG&f=1", "display_name": "Ducuh", "link": "https://stackoverflow.com/users/8941628/ducuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511432144, "creation_date": 1511350129, "last_edit_date": 1511351696, "question_id": 47433572, "link": "https://stackoverflow.com/questions/47433572/c-finding-maximum-average-of-a-2-dimensional-array", "title": "C: Finding maximum average of a 2 dimensional array", "body": "<p>The output that I want is the max of an average score and which row is that for example:</p>\n\n<pre><code>9.33(avg) 4(row)\n\n9.33(avg) 5(row)\n</code></pre>\n\n<p>But my output is this:</p>\n\n<pre><code>9.33 0\n\n9.33 4\n\n9.33 5\n</code></pre>\n\n<p>Can anyone explain for me why my output is like this and how I could fix it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define D 3\n#define C 10\n\nint main()\n{\n    float num[D][C] = \n    {\n        {5.0, 8.0, 7.5, 4.5, 9.0, 9.0, 6.5, 3.0, 4.5, 8.5},\n        {6.0, 8.5, 7.0, 5.0, 9.5, 9.5, 6.5, 2.5, 5.0, 7.5},\n        {5.5, 8.0, 6.5, 7.5, 9.5, 9.5, 6.5, 4.0, 5.5, 9.5},\n    };\n\n    int i, j,e,l;\n\n    float d,a,b,c,max,k,x,y,z,o;\n    float p1,p2,p3,p4;\n    k=0;\n    max=0;\n    for(j=0; j&lt;10; j++)\n    {\n        a=num[0][j];\n        b=num[1][j];\n        c=num[2][j];\n        d=(a+b+c)/3;\n        if(max&lt;=d )\n        {   \n            for(l=0; l&lt;10; l++)\n            {\n                x=num[0][l];\n                y=num[1][l];\n                z=num[2][l];\n                o=(x+y+z)/3;\n\n                if(max&lt;o)\n                {\n                    max=o;\n                }\n            }\n            printf(\"%0.2f %d\\n\",max,j);\n        }               \n    }   \n}\n</code></pre>\n"}, {"tags": ["c", "struct", "interface", "linker"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1511350093, "post_id": 47433505, "comment_id": 81821236, "body": "You can have more than one header. &quot;private&quot; headers are not uncommon."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511350125, "post_id": 47433505, "comment_id": 81821259, "body": "@StoryTeller How is this done?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511350518, "post_id": 47433505, "comment_id": 81821542, "body": "There&#39;s a whole book on the subject, by Axel-Tobias Schreiner. You can read a free online version of it here: <a href=\"http://www.planetpdf.com/codecuts/pdfs/ooc.pdf\" rel=\"nofollow noreferrer\">planetpdf.com/codecuts/pdfs/ooc.pdf</a>"}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511350762, "post_id": 47433505, "comment_id": 81821697, "body": "@StoryTeller This is actually what I was reading. I didn&#39;t read any part about encapsulation yet. I saw structures and function pointers being the critical components so I started with that."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1511350841, "post_id": 47433505, "comment_id": 81821739, "body": "Then you just need to carry on reading :) The book covers it."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511350920, "post_id": 47433505, "comment_id": 81821789, "body": "@StoryTeller Okay I will. But in regards to the issue at hand, a private header file can solve this? I guess there&#39;s nothing that stops the user from including that private header file of course"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1511351142, "post_id": 47433505, "comment_id": 81821939, "body": "Only if the user can get their hands on it"}], "owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511350394, "creation_date": 1511349951, "question_id": 47433505, "link": "https://stackoverflow.com/questions/47433505/undefined-reference-while-trying-to-implement-an-interface-in-c", "title": "Undefined reference while trying to implement an interface in C", "body": "<p>I was reading up on implementing interfaces in C and I really wanted to give it a shot. I thought I knew how to do it but I am stuck on one last piece of the puzzle. I can't continue without breaking <strong>encapsulation</strong>. I have two \"Objects\", \"Fruit\" and \"Apple\". I want the user to handle Fruit objects but never know the underlying type (Apple in this case). </p>\n\n<p>I can't seem to do it because I cannot find a way for <code>Apple</code> to know how to create itself with <code>Fruit</code>. I do not want to allow <code>Main.c</code> to see <code>constructor</code> but <code>Apple.c</code> needs to see it. I don't know how to proceed.</p>\n\n<p>I have the following project structure:</p>\n\n<p>Fruit.h</p>\n\n<pre><code>// fruit is too general to be created here\n// fruit objects can only be created in other files\ntypedef struct Fruit Fruit;\nvoid grow(Fruit *f);\n</code></pre>\n\n<p>Fruit.c</p>\n\n<pre><code>#include \"Fruit.h\"\n// It's very important user cannot see 'struct Fruit'\nstruct Fruit \n{ \n    void *fruit_obj;    // Fruit object of unknown type\n    void(*grow)(void*); // grow function for that type of fruit \n};\n\n// User should not see this!\n// Fruit objects can only be made from other files!\nFruit* constructor(void *fruit_obj, void(*grow)(void*))\n{\n    Fruit *f = malloc(sizeof(Fruit));\n    f-&gt;fruit_obj = fruit_obj;\n    f-&gt;grow = grow;\n    return f;\n}\n\nvoid grow(Fruit *f)\n{\n    f-&gt;grow(f-&gt;fruit_obj);\n}\n</code></pre>\n\n<p>Apple.h</p>\n\n<pre><code>#include \"Fruit.h\"\nFruit* createApple();\n</code></pre>\n\n<p>Apple.c</p>\n\n<pre><code>#include \"Apple.h\"\n// The user should never ever see this struct.\nstruct Apple\n{\n    int size;\n}\n\nvoid apple_grow(void *a)\n{\n    struct Apple *apple = (struct Apple*)a;\n    apple-&gt;size++;\n    printf(\"Your apple has grown to %d size!\\n\", apple-&gt;size);\n}\n\n// My attempt to make me able to create fruit from this file.\nextern Fruit* constructor(void *fruit_obj, void(*grow)(void*));\nFruit* createApple()\n{\n    struct Apple *a = malloc(sizeof(struct Apple));\n    a-&gt;size = 1;\n    Fruit *f = constructor(a, &amp;apple_grow);\n    // LINKER ERROR: 'undefined reference to 'constructor''\n    return f;\n}\n</code></pre>\n\n<p>Main.c</p>\n\n<pre><code>#include \"Apple.h\"\nint main()\n{\n    Fruit *f = createApple();\n    grow(f);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "multithreading"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1511349392, "post_id": 47433056, "comment_id": 81820766, "body": "You actual question is a bit unclear, perhaps you can work on it a bit. The use of &quot;not logical to ... otherwise ...&quot; makes little sense to be. I&#39;m not a native speaker, though."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1511358732, "post_id": 47433056, "comment_id": 81827057, "body": "Put them in the struct.  They&#39;re only pointers and the effort required to write them is swamped by that required to actually create the threads and, hopefully, by the cycles used by the threads when working on their bit of the array.  If it was me, I would malloc each struct each time round the loop anyway, dumping the array of structs and completely encapsulating the data for each thread.   This &#39;declare a fixed array for thread struct data and pthread_t&#39;s, call join() after&#39; design is now deeply ingrained on intro sites.  I wish they would all die a horrible death:)"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 1, "last_activity_date": 1511352365, "creation_date": 1511352365, "answer_id": 47434303, "question_id": 47433056, "link": "https://stackoverflow.com/questions/47433056/pass-an-array-to-a-thread-routine-in-c/47434303#47434303", "title": "Pass an array to a thread routine in C", "body": "<p>If you don't want <em>to pass it through the struct</em> (by adding and setting elements for data and results), you can pass them via global variables, e. g.</p>\n\n<pre><code>static float *data1, *data2, *result1, *result2;\n\nvoid *routine(void *thread_info)\n{\n   \u2026\n}\n\nvoid foo(float *Data1, float *Data2, float *Result1, float *Result2)\n{\n    data1 = Data1, data2 = Data2, result1 = Result1, result2 = Result2;\n   \u2026\n}\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 6650397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2fcc00075552f0fd192c2c13b4f6256b?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/6650397/a-nechi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 47434303, "answer_count": 1, "score": 1, "last_activity_date": 1511352365, "creation_date": 1511348590, "last_edit_date": 1511349721, "question_id": 47433056, "link": "https://stackoverflow.com/questions/47433056/pass-an-array-to-a-thread-routine-in-c", "title": "Pass an array to a thread routine in C", "body": "<p>I have a function that uses four threads to work on different parts of an array, the problem that, I don't know shall I pass the array to the threads routine, here a code example:</p>\n\n<pre><code>#define         RANGE_STEP1                 1024 / 4\n#define         QUARTER                     RANGE_STEP1 / 4\n\nstruct thread_data\n{\n   unsigned start;\n   unsigned stop;\n};\n\n#define         NUM_THREADS                     4\nstruct thread_data thread_data_array[NUM_THREADS];\npthread_t threads[NUM_THREADS];\n\nvoid routine(void *thread_info)\n{\n   int n;\n   unsigned t_start,t_stop;\n   struct thread_data *mydata;\n\n   mydata = (struct thread_data*) thread_info;\n   t_start = mydata-&gt;start;\n   t_stop  = mydata-&gt;stop;\n\n   for (n = 0; n &lt; RANGE_STEP1; n++)\n   { \n       result1[n] = (data1[n] + data2[n])/2; // Error : error: \u2018data1\u2019 undeclared (first use in this function) ...\n       result1[n] = (data1[n] - data2[n])/2; // Error . error: \u2018data2\u2019 undeclared (first use in this function) ...\n   }\n   pthread_exit(NULL);\n}\n\nvoid foo(float* data1, float* data2,float* result1,float* result2)\n{\n   unsigned t,i=0;\n   for(t=0;t&lt;RANGE_STEP1;t+=QUARTER)\n   {\n       thread_data_array[i].start       = t;\n       thread_data_array[i].stop           = t+QUARTER-1;\n       pthread_create(&amp;threads[i],NULL,routine,(void *)&amp;thread_data_array[i]);\n       i++;\n   }\n   pthread_exit(NULL);\n}\n</code></pre>\n\n<p>So, as you can see in the example <strong>data1</strong>, <strong>data2</strong>, <strong>result1</strong>, <strong>result2</strong> are the arrays that i want to the thread routine and I think it is not logical to pass it through the struct because it be re-written 4 times in the <code>for()</code> loop.</p>\n"}, {"tags": ["c", "struct", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511348870, "post_id": 47433041, "comment_id": 81820441, "body": "In C++ it&#39;s UB due to the potential for trapping <code>int</code>, and the default copy constructor performs a memberwise copy. See <a href=\"https://stackoverflow.com/questions/9163555/why-is-this-simple-assignment-undefined-behaviour\" title=\"why is this simple assignment undefined behaviour\">stackoverflow.com/questions/9163555/&hellip;</a>. But C and C++ diverge on these sort of things quite widely. I don&#39;t <i>think</i> the C copy works in the same way. Above my paygrade unfortunately, but FWIW I lean towards the &quot;yes, it&#39;s UB side&quot;."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511349151, "post_id": 47433041, "comment_id": 81820612, "body": "@Bathsheba I&#39;m leaning to the other side, because reading uninitialized values is only UB if the indeterminate value is a trap representation, and <code>int</code> values rarely (if ever?) have those. On the other hand, <a href=\"https://stackoverflow.com/a/11965368/440558\">there&#39;s this</a> so I&#39;m not so sure any more. Really above my paygrade as well... :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511349365, "post_id": 47433041, "comment_id": 81820749, "body": "@EricPostpischil: To keep the pedants at bay therefore, would it be wise amending the question to use <code>unsigned char</code> types?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1511349384, "post_id": 47433041, "comment_id": 81820760, "body": "I just edited to use <code>unsigned char</code> to make it clear we are not interested in trap representations, just the meaning of 6.3.2.1 2."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1511349428, "post_id": 47433041, "comment_id": 81820789, "body": "@Bathsheba: Yes. I was reluctant to edit the question at first, in case it would be a bit unfair to people drafting answers. But clearly I need to take pre-emptive measures."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511349516, "post_id": 47433041, "comment_id": 81820858, "body": "FYI, the question arose from <a href=\"https://stackoverflow.com/questions/47430860/do-a-union-or-struct-permit-assignment-from-an-uninitialised-instance\">this question</a>."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511370171, "post_id": 47433041, "comment_id": 81835326, "body": "@Someprogrammerdude Reading an uninitialized variable that could have been declared <code>register</code> is <code>UB</code> even if the type has no trap representations (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.1p2\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.3.2.1p2</a>)."}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 0, "creation_date": 1512666983, "post_id": 47433041, "comment_id": 82360713, "body": "Related: <a href=\"https://stackoverflow.com/questions/33393569/is-it-undefined-behaviour-to-memcpy-from-an-uninitialized-variable\" title=\"is it undefined behaviour to memcpy from an uninitialized variable\">stackoverflow.com/questions/33393569/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1512055846, "post_id": 47440061, "comment_id": 82110957, "body": "I accepted this answer and awarded the bounty because I think it is the correct answer\u2014technically, the behavior is undefined by the standard, even though that may not have been the intent."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1535668346, "post_id": 47440061, "comment_id": 91163361, "body": "I&#39;m not sure I follow your logic.  The guarantee that structure/union values will never be trap representations will be very useful if it implies that copying of such objects from one region of readable storage to a disjoint region of writable storage will at worst leave portions of the destination holding Indeterminate Value, and would seldom be useful otherwise.  At minimum, that should imply that quality implementations should behave in such fashion unless they document a compelling reason for doing otherwise.  As for what specialized or poor-quality implementations might do, who knows?"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 8, "last_activity_date": 1512055778, "last_edit_date": 1512055778, "creation_date": 1511369554, "answer_id": 47440061, "question_id": 47433041, "link": "https://stackoverflow.com/questions/47433041/is-using-a-structure-without-all-members-assigned-undefined/47440061#47440061", "title": "Is using a structure without all members assigned undefined?", "body": "<p>My opinion is that it is undefined behaviour simply because it is not explicitly defined by the standard. From 4 Conformance \u00a72 (emphasize mine) :</p>\n\n<blockquote>\n  <p>...Undefined behavior is otherwise\n  indicated in this International Standard by the words \u2018\u2018undefined behavior\u2019\u2019 <strong>or by the\n  omission of any explicit definition of behavior</strong>.</p>\n</blockquote>\n\n<p>After many reads in N1570 draft I cannot find any explicit definition of behaviour for using a <em>partially initialized struct</em>. On one hand 6.3.2.1 \u00a72 says:</p>\n\n<blockquote>\n  <p>...If\n  the lvalue designates an object of automatic storage duration that could have been\n  declared with the register storage class (never had its address taken), and that object\n  is uninitialized (not declared with an initializer and no assignment to it has been\n  performed prior to use), the behavior is undefined</p>\n</blockquote>\n\n<p>so here <code>x</code> is automatic, has never be initialized (only one of its members), and admitedly its address is never taken so we could think that it is explicitely UB</p>\n\n<p>On the other hand, 6.2.6.1 \u00a76 says:</p>\n\n<blockquote>\n  <p>... The value of a structure or union object is never a trap representation, even though the value of a member of the structure or union object may be a trap representation.</p>\n</blockquote>\n\n<p>As 6.2.6.1 \u00a75 has just defined a trap representation:</p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the object type. If the stored\n  value of an object has such a representation and is read by an lvalue expression that does\n  not have character type, the behavior is undefined. If such a representation is produced\n  by a side effect that modifies all or any part of the object by an lvalue expression that means 0 value for <code>a</code> member and an undefined value for <code>b</code> member.\n  does not have character type, the behavior is undefined.50) Such a representation is called\n  a trap representation.</p>\n</blockquote>\n\n<p>we could think that it is always legal to take the value of a struct because it cannot be a trap representation</p>\n\n<p>In addition, it is not clear for me if setting the value of a member of a struct actually leaves the struct in an <em>unitialized</em> state.</p>\n\n<p>For all those reasons, I think that the standard does not clearly defines what the behaviour should be and simply for that reason it is undefined behaviour.</p>\n\n<hr>\n\n<p>That being said I am pretty sure that any common compiler will accept it and will give <code>y</code> the current representation of <code>x</code>, that means 0 value for <code>a</code> member and an indeterminate value of same representation as the current one for <code>x.b</code> for the <code>b</code> member. </p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1511829997, "post_id": 47461085, "comment_id": 82000829, "body": "Trap representations are not relevant to this question. 6.3.2.1 2 does not involve trap representations; it makes behavior undefined given the stated conditions even if the object type has no trap representations."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511852005, "post_id": 47461085, "comment_id": 82007100, "body": "@EricPostpischil: In C89, the difference between an Unspecified Value and an Indeterminate Value is that the an object holding the former would be guaranteed to hold a value of its type, while the latter could hold either a value or a trap representation.  If you think the authors of the Standard did not intend the prohibition of structures having trap representations to guarantee that partially-written structures may be safely copied if nothing tries to access the indeterminate members of the copies (except for the purpose of making more copies of the structure), perhaps you can..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511852334, "post_id": 47461085, "comment_id": 82007259, "body": "...enlighten me as to what you think the intended purpose of that prohibition was?  I know that modern compiler writers want to process a language that requires that programs waste time writing things with known bit values even in cases where every possible combination of bit values would otherwise meet a program&#39;s requirements, but I don&#39;t think that&#39;s what the authors of C89 had in mind (if it is what the authors of later versions of the Standard had in mind, I&#39;d regard C89 as superior)."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511874744, "post_id": 47461085, "comment_id": 82021313, "body": "As M.M. notes, this sentence in 6.3.2.1 2 was created to support Itanium/IA-64\u2019s ability to detect uninitialized data in registers. It is completely separate of trap representations. It even applies to unsigned integers, including char, which have no trap representations. Itanium registers have an extra bit that indicates whether there is valid data in the register. If an object in such a register is used without being initialized or assigned a value, a hardware exception occurs. 6.3.2.1 2 was added to say a C implementation may do this, even if there is no trap representation in the type."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511876223, "post_id": 47461085, "comment_id": 82022366, "body": "@EricPostpischil: Long before Itanium, machines have had different representations in registers and memory, and it would not have been unusual to use a register for a type without all bit patterns being valid for that type.  If a two-member struct was assigned a pair of registers and one member was written before the struct was copied to a different pair of registers, the unwritten member might have a bit pattern that isn&#39;t valid for its type, which could cause trouble <i>if code actually tried to use the value</i>.  Perhaps the Itanium was sufficiently broken that supporting such semantics..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511876377, "post_id": 47461085, "comment_id": 82022469, "body": "...would have occasionally cost an extra instruction, but requiring an occasional extra instruction on one platform is far better than requiring that a lot of code be written needlessly inefficiently on every other platform in the universe (and arbitrarily malfunction if it isn&#39;t), even when that code isn&#39;t going to run on the Itanium.  Again, I&#39;d like someone to enlighten me as to what the point of the prohibition against structures having trap representations would be if not to define the behavior of copying partially-written structures."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511880965, "post_id": 47461085, "comment_id": 82025720, "body": "The Itanium is not broken. The sentence was added to the standard to support desired behavior\u2014it allows a C implementation to trap uninitialized behavior in an additional way, beyond trap representations. Yes, prohibiting structures from having trap representations was likely done to allow copying incompletely initialized structures without worrying about trap representations. And it accomplishes that purpose. But this sentence in 6.3.2.1 2 supports a new mechanism entirely separate from trap representations\u2026"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511880974, "post_id": 47461085, "comment_id": 82025724, "body": "\u2026 It even applies to types without trap representations, such as unsigned integers. If the standards committee had thought of it, maybe they would have exempted structures from this. But they did not."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511929424, "post_id": 47461085, "comment_id": 82046923, "body": "@EricPostpischil: There are a number of situations where it may be useful for an implementation to be configurable trap actions or constructs which, although defined, would not be used deliberately in certain application fields.  Implementations don&#39;t need any permission from the Standard to offer such options, nor do they need permission to offer options that would optimize based on assumptions that code won&#39;t do various things that would otherwise have defined behavior.  The ability to return partially-initialized structures existed in C from the beginning, and allows more efficient code..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511929499, "post_id": 47461085, "comment_id": 82046950, "body": "...than would otherwise be possible.  If there were a construct which would accept an lvalue and expressly indicate that a compiler must regard it as--at worst--holding an arbitrary bit pattern, then it would be reasonable to deprecate code that returns partially-written structures without using that directive.  As yet, however, no such directive exists."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": -3, "last_activity_date": 1511459262, "creation_date": 1511459262, "answer_id": 47461085, "question_id": 47433041, "link": "https://stackoverflow.com/questions/47433041/is-using-a-structure-without-all-members-assigned-undefined/47461085#47461085", "title": "Is using a structure without all members assigned undefined?", "body": "<p>The C Standard specifies that structure types cannot have trap representations, although members of structs may.  The primary circumstance in which that guarantee would be useful would be in cases involving partially-written structures.  Further, a prohibition on copying structures before one had written all members, even ones the recipient of the copy would never use, would require programmers to write needlessly-inefficient code and serve no useful purpose.  Imposing such a requirement in the name of \"optimization\" would be downright dumb, and I know of no evidence that the authors of the Standard intended to do so.</p>\n\n<p>Unfortunately, the authors of the Standard use the same terminology to describe two situations:</p>\n\n<ol>\n<li><p>Some implementations define the behavior of some action X in all cases, while some only define it for some; other parts of the Standard define the action in a few select cases.  The authors want to say that implementations need not behave like the ones that define the behavior in all cases, <em>without revoking guarantees made elsewhere in the Standard</em></p></li>\n<li><p>Although other parts of the Standard would define the behavior of action X in some cases, guaranteeing the behavior in all such cases could be expensive and implementations are not required to guarantee them <em>even cases where other parts of the Standard would define them</em>.</p></li>\n</ol>\n\n<p>Before the Standard was written, some implementations would zero-initialize all automatic variables.  Thus, those implementations would guarantee the behavior of reading uninitialized values, <em>even of types with trap representations</em>.  The authors of the Standard wished to make clear that they did not want to require all implementations do likewise.  Further, some objects may define the behavior of all bit patterns when stored in memory, but not when stored in registers.  Such treatment would generally be limtied to scalar types, however, rather than structures.</p>\n\n<p>From a practical perspective, defining the behavior of copying a structure as copying the state (defined or indeterminate) of all fields would not cost any more than allowing compilers to behave in arbitrary fashion when copying partially-written structures.  Unfortunately, some compiler writers erroneously believe that \"cleverness\" and \"stupidity\" are antonyms, and thus behave as though the authors of the Standard wished to invite compilers to assume that programs will never receive any input that would cause structures to be copied after having been partially written.</p>\n"}, {"comments": [{"owner": {"reputation": 1970, "user_id": 3700476, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/595e60aefb7da9a46b4c20a3fd4b0e1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dror K.", "link": "https://stackoverflow.com/users/3700476/dror-k"}, "edited": false, "score": 0, "creation_date": 1511839609, "post_id": 47523208, "comment_id": 82003162, "body": "With regards to your opinion about &quot;the intent&quot;, allow me to quote Dennis Ritchie: &quot;The intentions of the committee are irrelevant; only their document matters.&quot; ... also, allow me to quote the Rationale document: &quot;this Rationale is not part of the Standard. The C language is defined by the Standard alone.&quot;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1970, "user_id": 3700476, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/595e60aefb7da9a46b4c20a3fd4b0e1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dror K.", "link": "https://stackoverflow.com/users/3700476/dror-k"}, "edited": false, "score": 1, "creation_date": 1511839780, "post_id": 47523208, "comment_id": 82003211, "body": "@DrorK. that would be nice, if the document actually answered the questions on its own. But it does not"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1970, "user_id": 3700476, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/595e60aefb7da9a46b4c20a3fd4b0e1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dror K.", "link": "https://stackoverflow.com/users/3700476/dror-k"}, "edited": false, "score": 3, "creation_date": 1511840611, "post_id": 47523208, "comment_id": 82003443, "body": "@DrorK.: Is Dennis Ritchie a normative part of the standard?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511840842, "post_id": 47523208, "comment_id": 82003516, "body": "What if the compiler stores <code>x.a</code> and <code>x.b</code> in two registers? If the structure is initialized or both members are assigned, then both NaT bits are cleared. And we can safely assign either without reading it or the other first, so we are safe from triggering an exception. But, if only one were assigned/initialized, <code>y = x</code> would trigger an exception."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1511840966, "post_id": 47523208, "comment_id": 82003562, "body": "Sure. I think this question and discussion is academic\u2014it is an exercise for thinking about the standard. I expect we all agree on how compiler writers ought to interpret this\u2014undefined behavior is not intended for the code in the question. But we might end up with a defect to report to the standard committee."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511929050, "post_id": 47523208, "comment_id": 82046830, "body": "@EricPostpischil: Any decent compiler should generate code that even if one of the source registers contains a bit pattern that&#39;s not valid for its type, the worst that would happen is that the destination register would be left with a value that&#39;s not valid for its type.  If nothing actually does anything with the value in the destination register except blindly copy it as part of a structure copy, a good compiler should produce code that doesn&#39;t trap."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1512055398, "post_id": 47523208, "comment_id": 82110644, "body": "@EricPostpischil: As for whether any ambiguity here is a &quot;defect&quot;, that depends whether the Standard is <i>intended</i> to fully describe everything that a quality compiler must do, or whether it is intended to omit for brevity situations where (1) there is one obvious sensible behavior, and (2) there is no reason to expect that someone who is seeking to write a quality compiler would do anything else, outside of some diagnostic scenarios that needn&#39;t be bound by the Standard anyway. If code copies a partially-written structure, and ignores fields in the copy that weren&#39;t written in the original..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1512055781, "post_id": 47523208, "comment_id": 82110916, "body": "@EricPostpischil: ...there might plausibly be some benefit to allowing the copy operation to &quot;raise an implementation-defined signal&quot; to aid conformance with various coding standards, but unless an implementation documents such behavior, I see no reason to regard the cost-benefit ratio for defining the behavior as described as anything less than overwhelmingly in favor.  Significant benefit in reduced code size and execution time, generally at zero cost and never at significant cost."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1512055950, "post_id": 47523208, "comment_id": 82111025, "body": "@supercat: Sigh. Discussion about cost-benefits ratios is irrelevant. My question does not ask what is a good design or even what the intent was. My questions asks what the standard says. Unfortunately, your comments are not helpful in answering this."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1512057043, "post_id": 47523208, "comment_id": 82111715, "body": "@EricPostpischil: The rationale for the Standard recognizes the possibility of an implementation being conforming, but of such low quality as to be essentially useless.  Individual places where the Standard fails to mandate features that offer obvious benefits at essentially zero cost would only &quot;defects&quot; if the Standard were intended to completely specify everything needed to make something a useful quality implementation.  Do you think the Standard is intended to be a complete specification?  If not, by what means should readers fill in the gaps?"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1511837613, "creation_date": 1511837613, "answer_id": 47523208, "question_id": 47433041, "link": "https://stackoverflow.com/questions/47433041/is-using-a-structure-without-all-members-assigned-undefined/47523208#47523208", "title": "Is using a structure without all members assigned undefined?", "body": "<p>Firstly, let's note that the quoted part of 6.3.2.1/2, the so-called \"Itanium clause\" is the only clause under which this code might have a problem.  In other words,  if this clause were not present, the code is fine. Structs may not have trap representations, so <code>y = x;</code> is otherwise OK even if <code>x</code> is entirely uninitialized. The resolution of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_451.htm\" rel=\"nofollow noreferrer\">DR 451</a> clarifies that indeterminate values may be propagated by assignment, without causing UB.</p>\n\n<hr>\n\n<p>Back to the Itanium clause here. As you point out, the Standard does not clearly specify whether <code>x.a = 0;</code> negates the precondition \"<code>x</code> is uninitialized\".</p>\n\n<p>IMO, this means we should turn to the rationale for the Itanium clause to determine the intent. The purpose of the wording of the standard document, in general, is to implement an intent; generally speaking, I don't agree with being dogmatic about minute detail of the standard: taking shades of meaning out of the wording that were not intended by those who created the wording.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26451954/trap-representation-unsigned-char-and-ia64-nat\">This Q/A</a> gives a good explanation of the rationale. The potential problem is that <code>x</code> might be stored in a register with the NaT bit set, and then <code>y = x</code> will cause a hardware exception due to reading a register that has that bit set.</p>\n\n<hr>\n\n<p>So the question is: On IA64 does <code>x.a = 0;</code> clear the NaT bit?  I don't know and I guess we would need someone familar with that platform to give a conclusive answer here.</p>\n\n<p>Naively, I imagine that if <code>x</code> is in a register then, in general, <code>x.a = 0;</code> will need to read the old value, and apply a mask to clear the bits for <code>a</code>, thereby triggering the exception if <code>x</code> was <code>NaT</code>. However, <code>x.a = 0;</code> cannot trigger UB, so that logic must be incorrect. Perhaps IA64 compilers never store a struct in a register, or perhaps they clear the NaT bit on declaration of one, or perhaps there's a hardware instruction to implement <code>x.a = 0;</code> on a previously-NaT register, I don't know.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1535055917, "last_edit_date": 1535055917, "creation_date": 1535052904, "answer_id": 51993107, "question_id": 47433041, "link": "https://stackoverflow.com/questions/47433041/is-using-a-structure-without-all-members-assigned-undefined/51993107#51993107", "title": "Is using a structure without all members assigned undefined?", "body": "<p>Copying a partially-written structure falls in the category of actions which quality implementations will process in consistent fashion <em>absent a good reason to do otherwise</em>, specialized implementations might process differently because they have a good reason to do so, and poor-quality-but-conforming implementations may use as an excuse to behave nonsensically.</p>\n\n<p>Note that copying uninitialized values of an automatic-duration or malloc-created character array would fall in a similar category of actions, except that implementations that would trap on such an action (e.g. to help programmers identify and track down potential information leaks) would not be allowed to describe themselves as \"conforming\".</p>\n\n<p>An implementation which is specialized to diagnose accidental information leaks might sensibly trap efforts to copy a partially-written structure.  On an implementation where using an unitialized value of some type could result in strange behavior, copying a structure with an unitialized member of that type <em>and then attempting to use that member of the copy</em> might sensibly do likewise.</p>\n\n<p>The Standard doesn't particularly say whether a partially-written structure counts as having been written or not, because people seeking to produce quality implementations shouldn't care.  Quality implementations specialized for detecting potential information leakage should squawk at any attempt to copy uninitialized data, without regard for when the Standard would or would not allow such behavior (provided that they describe themselves as non-conforming).  Quality general-purpose implementations designed to support a wide variety of programs should allow partially-initialized structures to be copied in cases where programs don't look at the uninitialized portions outside the context of whole-structure copying (such treatment is useful and generally costs nothing in non-contrived cases).  The Standard could be construed as granting poor-quality-but-conforming implementations the right treat copying of partially-written structures as an excuse to behave nonsensically, but such implementations could use almost <em>anything</em> as such an excuse.  Quality implementations won't do anything unusual when copying structures unless they document a good reason for doing so.</p>\n"}], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 7, "accepted_answer_id": 47440061, "answer_count": 4, "score": 13, "last_activity_date": 1535055917, "creation_date": 1511348540, "last_edit_date": 1511400567, "question_id": 47433041, "link": "https://stackoverflow.com/questions/47433041/is-using-a-structure-without-all-members-assigned-undefined", "title": "Is using a structure without all members assigned undefined?", "body": "<p>Consider this code in block scope:</p>\n\n<pre><code>struct foo { unsigned char a; unsigned char b; } x, y;\nx.a = 0;\ny = x;\n</code></pre>\n\n<p>C [N1570] 6.3.2.1 2 says \u201cIf the lvalue designates an object of automatic storage duration that could have been declared with the <strong>register</strong> storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined.\u201d</p>\n\n<p>Although a member of <code>x</code> has been assigned a value, no assignment to <code>x</code> has been performed, and its address has not been taken. Thus, it appears 6.3.2.1 2 tells us the behavior of <code>x</code> in <code>y = x</code> is undefined.</p>\n\n<p>However, if we had assigned a value to every member of <code>x</code>, it would seem unreasonable to consider <code>x</code> to be uninitialized for the purposes of 6.3.2.1 2.</p>\n\n<p>(1) Is there anything in the standard which, strictly speaking, causes 6.3.2.1 2 not to apply to (make undefined) the code above?</p>\n\n<p>(2) Supposing we were modifying the standard or determining a reasonable modification to 6.3.2.1 2, are there reasons to prefer one of the following over the others? (a) 6.3.2.1 2 does not apply to structures. (b) If at least one member of a structure has been assigned a value, the structure is not uninitialized for purposes of 6.3.2.1 2. (c) If all named<sup>1</sup> members of a structure have been assigned a value, the structure is not uninitialized for purposes of 6.3.2.1 2.</p>\n\n<h3>Footnote</h3>\n\n<p><sup>1</sup> Structures may have unnamed members, so it is not always possible to assign a value to every member of a structure. (Unnamed members have indeterminate value even if the structure is initialized, per 6.7.9 9.)</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1511348590, "post_id": 47432950, "comment_id": 81820286, "body": "You should use <code>O_RDONLY</code> rather than a hard-coded 0 in your second argument to <code>open()</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1511349495, "post_id": 47432950, "comment_id": 81820841, "body": "What happens if <code>sizeof(int) != 4</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1511359750, "post_id": 47432989, "comment_id": 81827733, "body": "Also, 32 bits is small enough to be cracked by simply guessing the same value repeatedly until it turns out to be correct."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": false, "score": 2, "last_activity_date": 1511348809, "last_edit_date": 1511348809, "creation_date": 1511348407, "answer_id": 47432989, "question_id": 47432950, "link": "https://stackoverflow.com/questions/47432950/how-to-bypass-hack-urandom-value/47432989#47432989", "title": "How to bypass / Hack urandom value?", "body": "<p>No. It is not possible to predict the values resulting from <code>/dev/urandom</code> on a properly-functioning system.</p>\n\n<p>With that said, there is potential for error here:</p>\n\n<ul>\n<li><p><code>/dev/urandom</code> could be created incorrectly, actually referring to e.g. <code>/dev/zero</code> or <code>/dev/null</code></p></li>\n<li><p>There is no error handling in the code you've shown; a failure to open or read would go undetected, leaving the value of password unchanged.</p></li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 8260505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d11cd77acf79cfac7b44b97c535cd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8260505/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1537215644, "creation_date": 1511348270, "last_edit_date": 1537215644, "question_id": 47432950, "link": "https://stackoverflow.com/questions/47432950/how-to-bypass-hack-urandom-value", "title": "How to bypass / Hack urandom value?", "body": "<p>I have this C code and I want to know if possible how to bypass this check ?</p>\n\n<pre><code>int fd, password, input;\nfd = open(\"/dev/urandom\", 0);\nread(fd, &amp;password, 4);\nscanf(\"%d\", &amp;input);\n\nif (password == input)\n{\n    printf(\"OK\\n\")\n}\n</code></pre>\n\n<p>Or is it possible to predict urandom values ?</p>\n"}, {"tags": ["c", "fork", "getline"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1511348848, "post_id": 47432864, "comment_id": 81820423, "body": "Cannot duplicate.  Seems to work fine.  (other than the extra newlines, but that&#39;s unrelated to the question.)"}, {"owner": {"reputation": 1589, "user_id": 7205620, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d192b6e443c87744c05a745b951f8fde?s=128&d=identicon&r=PG&f=1", "display_name": "Krash", "link": "https://stackoverflow.com/users/7205620/krash"}, "edited": false, "score": 0, "creation_date": 1511352232, "post_id": 47432864, "comment_id": 81822649, "body": "are you sure? Becuase I tried it on a different machine, the same code and encountered this same error."}], "owner": {"reputation": 1589, "user_id": 7205620, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d192b6e443c87744c05a745b951f8fde?s=128&d=identicon&r=PG&f=1", "display_name": "Krash", "link": "https://stackoverflow.com/users/7205620/krash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511348269, "creation_date": 1511347994, "last_edit_date": 1511348269, "question_id": 47432864, "link": "https://stackoverflow.com/questions/47432864/getline-restarting-to-read-from-file-when-working-with-fork", "title": "getline restarting to read from file when working with fork", "body": "<p>I am not sure if fork is the culprit here, but here is my program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\nint main(){\n    char* a=NULL;\n    size_t sz_buf;\n    FILE* s = fopen(\"test.sh\", \"r\");    \n    while(getline(&amp;a,&amp;sz_buf,s)!=-1){\n        pid_t pid = fork();\n        if(pid==0){\n            printf(\"%s\\n\", a);\n            sleep(1);\n            exit(0);\n        }\n        int status;\n        wait(&amp;status);\n    }\n\n}\n</code></pre>\n\n<p>When I remove the fork and wait related statements, this program reads till end of file and prints each line and exits, but right now what it is doing is, reading till end of file, printing each line and then restarting from the beginning and continue doing this infinitely. What is causing this behavior ? This is my <code>test.sh</code> </p>\n\n<pre><code>help;pwd;pwd\npwd;help\nabc;dbc;pwd\n</code></pre>\n"}, {"tags": ["c", "linux", "button", "gtk"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1511347554, "post_id": 47432575, "comment_id": 81819557, "body": "You are using the uninitialized global <code>backbutton</code> rather than `parameters-&gt;backbutton&quot;, that seems very fishy."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1511350077, "post_id": 47432575, "comment_id": 81821226, "body": "Your code was already a bit large for a MCVE in your previous question and gets larger and larger. To show your problem there is no need to add that many items to your list view or to include any of your Bluetooth stuff. Please consider removing parts that are not related to your problem."}], "owner": {"reputation": 91, "user_id": 8377865, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dab7faf0adf5a7eb7f1c94d40afc61fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Mohantu", "link": "https://stackoverflow.com/users/8377865/sagar-mohantu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511359650, "creation_date": 1511347242, "last_edit_date": 1511359650, "question_id": 47432575, "link": "https://stackoverflow.com/questions/47432575/gtk-why-back-button-click-signal-handler-is-not-called", "title": "gtk-why back button click signal handler is not called", "body": "<p>I have a notebook with 5 pages. Each Page has a liststore treeview and back button.</p>\n\n<p>Originally back button is hidden. When you click an item of treeview, it searches nearest Bluetooth devices and returns a new treeview. But clicking back button should go back to the previous list. It is not going. the <code>printf</code> in back handler is also not getting called.\nmy code is:-</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;glib.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/hci.h&gt;\n#include &lt;bluetooth/hci_lib.h&gt;\nGtkWidget *scrolledwindow;\nGtkWidget *backbutton;\nstruct param\n{\n    GtkWidget* backbutton;\n    GtkWidget* Okbutton;\n    GtkWidget* scrolledwindow;\n    GtkWidget*newChild;\n    GtkWidget*oldChild;\n};\n\n\nstruct BTDeviceDetails\n{\n    char*addr;\n    char*name;\n};\nstruct node\n{\n    struct node* next;\n    struct BTDeviceDetails * data;\n};\n\nvoid insertNode(struct node ** start,struct BTDeviceDetails* resultData)\n{\n    struct node * temp = *start;\n    printf(\"insert node\\n\");\n    if(*start==0)\n    {\n        *start = (struct node*)malloc(sizeof(struct node));\n        (*start)-&gt;next = 0;\n        (*start)-&gt;data = resultData;\n        return;\n    }\n    for(;temp-&gt;next!=0;temp=temp-&gt;next);\n    printf(\"inserted %s\",resultData-&gt;name);\n    temp-&gt;next = (struct node*)malloc(sizeof(struct node));\n    temp-&gt;next-&gt;next = 0;\n    temp-&gt;next-&gt;data = resultData;\n}\n\nvoid emptyList(struct node * start)\n{\n    if(start == 0)\n    {\n       return; \n    }\n    struct node * temp = start-&gt;next;\n    for(;temp!=0;temp = temp-&gt;next)\n    {\n        free(start-&gt;data-&gt;addr);\n        free(start-&gt;data-&gt;name);\n        free(start-&gt;data);\n        free(start);\n        start = temp;\n    }\n    free(start-&gt;data-&gt;addr);\n    free(start-&gt;data-&gt;name);\n    free(start-&gt;data);\n    free(start);\n    start = 0;\n}\n\n\nGtkWidget * init_tree();\nGtkWidget * init_tree2(struct node ** start);\nstatic void destroy(GtkWidget *widget, gpointer data)\n{\n  gtk_main_quit();\n}\n\n\nvoid deviceDiscovery(struct node** start)\n{\n    inquiry_info *ii = NULL;\n    int max_rsp, num_rsp;\n    int dev_id, sock, len, flags;\n    int i;\n    char addr[19] = { 0 };\n    char name[248] = { 0 };\n\n    dev_id = hci_get_route(NULL);\n    sock = hci_open_dev( dev_id );\n    if (dev_id &lt; 0 || sock &lt; 0) {\n        perror(\"opening socket\");\n        exit(1);\n    }\n\n    len  = 8;\n    max_rsp = 255;\n    flags = IREQ_CACHE_FLUSH;\n    ii = (inquiry_info*)malloc(max_rsp * sizeof(inquiry_info));\n\n    num_rsp = hci_inquiry(dev_id, len, max_rsp, NULL, &amp;ii, flags);\n    if( num_rsp &lt; 0 ) perror(\"hci_inquiry\");\n\n    for (i = 0; i &lt; num_rsp; i++) {\n        ba2str(&amp;(ii+i)-&gt;bdaddr, addr);\n        memset(name, 0, sizeof(name));\n        if (hci_read_remote_name(sock, &amp;(ii+i)-&gt;bdaddr, sizeof(name), \n            name, 0) &lt; 0)\n        strcpy(name, \"[unknown]\");\n        struct BTDeviceDetails* resultData = (struct BTDeviceDetails *)malloc(sizeof(struct BTDeviceDetails)); \n        resultData-&gt;addr = (char*)malloc((strlen(addr)+1)*sizeof(char));\n        resultData-&gt; name = (char*)malloc((strlen(name)+1)*sizeof(char));\n        strcpy(resultData-&gt;addr,addr);\n        strcpy(resultData-&gt; name,name);\n        insertNode(start,resultData);\n        printf(\"%s  %s\\n\", addr, name);\n    }\n\n    free( ii );\n    close( sock );\n//    return 0;\n}\n\n\nstatic void Back (GtkButton *button, gpointer   user_data)\n{\n      printf(\"inside back handle\\n\");\n      struct param* parameters = (struct param*)user_data;\n      gtk_widget_hide(GTK_WIDGET(parameters-&gt;scrolledwindow));\n      gtk_container_remove(GTK_CONTAINER(parameters-&gt;scrolledwindow), GTK_WIDGET(parameters-&gt;newChild));\n      gtk_container_add(GTK_CONTAINER(parameters-&gt;scrolledwindow), parameters-&gt;oldChild);\n      gtk_widget_hide (GTK_WIDGET(parameters-&gt;backbutton));\n      gtk_widget_show_all (GTK_WIDGET(parameters-&gt;scrolledwindow));\n}\n\nstatic void Ok (GtkButton *button, gpointer   user_data)\n{\n\n}\n\nstatic void replace_tab(GtkTreeView *tree_view, GtkTreePath *path, GtkTreeViewColumn *column, gpointer user_data)\n{\n      struct param* parameters = (struct param*)user_data;\n      gchar *string;\n      GtkTreeIter iter;\n      GtkTreeModel *model = gtk_tree_view_get_model (tree_view);\n      gtk_tree_model_get_iter(model, &amp;iter, path); \n      gtk_tree_model_get (model, &amp;iter, 0, &amp;string, -1);\n      g_print (\"activated: %s\\n\", string);\n      if(!strcmp(string,\"Register\"))\n      {\n          struct node * start = 0;\n          deviceDiscovery(&amp;start);\n          parameters-&gt;newChild =  init_tree2(&amp;start);\n          g_signal_connect(backbutton, \"clicked\", G_CALLBACK(Back), (gpointer) parameters);\n          //GtkWidget* liststore = GTK_WIDGET(gtk_tree_view_get_model(tree_view));\n          gtk_widget_hide(GTK_WIDGET(parameters-&gt;scrolledwindow));\n          gtk_container_remove(GTK_CONTAINER(parameters-&gt;scrolledwindow), GTK_WIDGET(tree_view));\n          gtk_container_add(GTK_CONTAINER(parameters-&gt;scrolledwindow), parameters-&gt;newChild);\n          gtk_widget_show (GTK_WIDGET(parameters-&gt;backbutton));\n          //gtk_widget_show (GTK_WIDGET(parameters-&gt;Okbutton));\n          gtk_widget_show_all (GTK_WIDGET(parameters-&gt;scrolledwindow));\n\n      }\n      else if(!strcmp(string,\"New Configuration\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Edit Configuration\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Delete Configuration\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Add location to turn-off place list\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Disable Turn-off Places\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Enable Turn-off Places\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Disable Distance\"))\n      {\n\n      }\n\n      else if(!strcmp(string,\"Enable Distance\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Factory Reset\"))\n      {\n\n      }\n}\n\nGtkWidget * init_tree()\n{\n\n    GtkListStore *liststore = gtk_list_store_new(1, G_TYPE_STRING);\n    GtkTreeIter treeiter;\n\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Register\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"New Configuration\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Edit Configuration\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Delete Configuration\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Add location to turn-off place list\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Disable Turn-off Places\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Enable Turn-off Places\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Disable Distance\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Enable Distance\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Factory Reset\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    GtkWidget *treeview = gtk_tree_view_new_with_model(GTK_TREE_MODEL(liststore));\n\n    GtkCellRenderer *cellrenderertext = gtk_cell_renderer_text_new();\n\n    GtkTreeViewColumn *treeviewcolumn = gtk_tree_view_column_new_with_attributes(\"Settings\",\n                                                                                 cellrenderertext,\n                                                                                 \"text\", 0,\n                                                                                 NULL);\n    gtk_tree_view_append_column(GTK_TREE_VIEW(treeview), treeviewcolumn);\n\n    return treeview;\n}\n\nGtkWidget * init_tree2(struct node** start)\n{\n\n    GtkListStore *liststore = gtk_list_store_new(1, G_TYPE_STRING);\n    GtkTreeIter treeiter;\n    if(*start ==0) printf(\"\\nfailure\\n\");\n    struct node * temp = *start;\n    for(;temp!=0; temp = temp-&gt;next)\n    {\n        gtk_list_store_append(liststore, &amp;treeiter);\n        gtk_list_store_set(liststore, &amp;treeiter, 0, temp-&gt;data-&gt;name, -1);\n    }\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"b\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"c\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"d\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"e\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"f\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Aptosid\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"OpenSuSE\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Linux Mint\", -1);\n\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Arch Linux\", -1);\n\n    GtkWidget *treeview = gtk_tree_view_new_with_model(GTK_TREE_MODEL(liststore));\n\n    GtkCellRenderer *cellrenderertext = gtk_cell_renderer_text_new();\n\n    GtkTreeViewColumn *treeviewcolumn = gtk_tree_view_column_new_with_attributes(\"BTDevices\",\n                                                                                 cellrenderertext,\n                                                                                 \"text\", 0,\n                                                                                 NULL);\n    gtk_tree_view_append_column(GTK_TREE_VIEW(treeview), treeviewcolumn);\n\n    return treeview;\n}\n\nint main(int argc, char *argv[])\n{\n  gtk_init(&amp;argc, &amp;argv);\n\n  GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n  gtk_window_set_default_size(GTK_WINDOW(window), 200, 200);\n  g_signal_connect(window, \"destroy\", G_CALLBACK(destroy), NULL);\n\n  GtkWidget *notebook = gtk_notebook_new();\n  gtk_container_add(GTK_CONTAINER(window), notebook);\n\n\n  int count;\n  gchar *text;\n\n  for (count = 1; count &lt;= 5; count++)\n    {\n      text = g_strdup_printf(\"Page %d\", count);\n      GtkWidget *label = gtk_label_new(text);\n\n      GtkWidget *vbox = gtk_box_new(GTK_ORIENTATION_VERTICAL, 5);\n      GtkWidget *scrolledwindow = gtk_scrolled_window_new(NULL, NULL);\n\n      backbutton = gtk_button_new_with_label (\"Back\");\n      gtk_widget_set_no_show_all (backbutton, TRUE);\n\n      //GtkWidget *Okbutton = gtk_button_new_with_label (\"Ok\");\n      //gtk_widget_set_no_show_all (Okbutton, TRUE);\n\n      gtk_box_pack_start (GTK_BOX(vbox), scrolledwindow, TRUE, TRUE, 0);\n      gtk_box_pack_end (GTK_BOX(vbox), backbutton, FALSE, FALSE, 0);\n      //gtk_box_pack_end (GTK_BOX(vbox), Okbutton, FALSE, FALSE, 0);\n\n\n      GtkWidget* treeview = init_tree();\n      //GtkWidget* treeview2 = init_tree2();\n      struct param* parameters = malloc(sizeof(struct param));\n      parameters-&gt;backbutton = backbutton;\n      //parameters-&gt;Okbutton = Okbutton;\n      parameters-&gt;scrolledwindow = scrolledwindow;\n      parameters-&gt;oldChild= treeview;\n      //parameters-&gt;newChild= treeview2;\n\n      g_signal_connect(treeview, \"row-activated\", G_CALLBACK(replace_tab), (gpointer) parameters);\n      //g_signal_connect(Okbutton, \"clicked\", G_CALLBACK(Ok), (gpointer) parameters);\n\n      gtk_container_add(GTK_CONTAINER(scrolledwindow), treeview);\n      gtk_notebook_append_page(GTK_NOTEBOOK(notebook), vbox, label);\n    }\n\n  gtk_widget_show_all(window);\n\n  gtk_main();\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1511346824, "post_id": 47432174, "comment_id": 81819035, "body": "Is <code>string[strlen (string) - 1] = &#39;\\0&#39;;</code> for chopping off the linefeed?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511347297, "post_id": 47432174, "comment_id": 81819371, "body": "Referring to &quot;how does one make the non letters part?&quot; from @Mohammed below: by using <code>isalpha</code>. If that returns 0 the character is a non-letter, else it is a letter. Or to make it easier to derive the array index, you can use <code>isupper</code> and <code>islower</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511346472, "post_id": 47432210, "comment_id": 81818779, "body": "Here as well, it&#39;s a nitpick of course, but the behavior is not undefined. The result is indeterminate ;)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11, "user_id": 8353309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076058629195816/picture?type=large", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/8353309/mohammed"}, "edited": false, "score": 0, "creation_date": 1511346641, "post_id": 47432210, "comment_id": 81818913, "body": "@Mohammed you wrote: <i>but now how does one make the non letters part?</i> What do you mean?"}, {"owner": {"reputation": 11, "user_id": 8353309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076058629195816/picture?type=large", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/8353309/mohammed"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1511346973, "post_id": 47432210, "comment_id": 81819149, "body": "@MichaelWalz so the output shows: A appears 3 times; non-letters appear 4 times;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11, "user_id": 8353309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076058629195816/picture?type=large", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/8353309/mohammed"}, "edited": false, "score": 0, "creation_date": 1511347400, "post_id": 47432210, "comment_id": 81819448, "body": "@Mohammed if it&#39;s not between &#39;a&#39; and &#39;z&#39; increment the &quot;non-letter&quot; conter"}, {"owner": {"reputation": 11, "user_id": 8353309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076058629195816/picture?type=large", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/8353309/mohammed"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1511348067, "post_id": 47432210, "comment_id": 81819921, "body": "@MichaelWalz ty again, I was trying to make another loop and all haha, just added else {special ++} and printed it :D"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 4, "last_activity_date": 1511346532, "last_edit_date": 1511346532, "creation_date": 1511346259, "answer_id": 47432210, "question_id": 47432174, "link": "https://stackoverflow.com/questions/47432174/why-is-it-showing-random-numbers-c-program-to-read-string-letters/47432210#47432210", "title": "Why is it showing random numbers? C program to read string letters", "body": "<p>The contents of <code>letters</code> are not <em>initialised</em>. Formally the behaviour of your program is <em>indeterminate</em>.</p>\n\n<p>Sort that by writing <code>int letters[26] = {0};</code> Doing that sets all elements to zero, which is what you want in this case.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511346347, "post_id": 47432220, "comment_id": 81818681, "body": "Not undefined. Just indeterminate."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1511346363, "post_id": 47432220, "comment_id": 81818690, "body": "<code>You are reading an uninitialized value which is undefined behavior.</code>..that&#39;s an overstatement."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511346417, "post_id": 47432220, "comment_id": 81818736, "body": "<code>letters</code> is passed to a function, so it has it&#39;s address taken. Therefore, reading it isn&#39;t undefined behavior, even if it&#39;s uninitialized."}, {"owner": {"reputation": 1320, "user_id": 3013249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e43f8b866b98837f3454d63ed654b12b?s=128&d=identicon&r=PG&f=1", "display_name": "MrPaulch", "link": "https://stackoverflow.com/users/3013249/mrpaulch"}, "edited": false, "score": 1, "creation_date": 1511346461, "post_id": 47432220, "comment_id": 81818769, "body": "Guys.... the values them self are indeterminate. <i>Accessing</i> the values is technically speaking: <b>undefined behaviour</b>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1320, "user_id": 3013249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e43f8b866b98837f3454d63ed654b12b?s=128&d=identicon&r=PG&f=1", "display_name": "MrPaulch", "link": "https://stackoverflow.com/users/3013249/mrpaulch"}, "edited": false, "score": 1, "creation_date": 1511346512, "post_id": 47432220, "comment_id": 81818808, "body": "@MrPaulch no. It&#39;s only undefined behavior if the object being read could have been declared <code>register</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511346651, "post_id": 47432220, "comment_id": 81818917, "body": "Just answered this on a similar topic, see there for reference: <a href=\"https://stackoverflow.com/a/47431348/2371524\">stackoverflow.com/a/47431348/2371524</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1511347179, "post_id": 47432220, "comment_id": 81819286, "body": "@FelixPalmen that is a good discussion, it boils down to just about any non-aggregate type with automatic storage could have been declared register... The only bit I take issue with is one of the final comments &quot;writing a single member is enough to have an initialized object&quot;. It&#39;s not writing to a single member that does it, it is <i>initializing</i> a single member that causes all remaining members to be treated as if they had been declared with static storage duration (and thereby initialized to zero)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511347389, "post_id": 47432220, "comment_id": 81819436, "body": "@DavidC.Rankin could you move your comment over there? I&#39;d have some questions about it, but it&#39;s clearly off-topic here ;)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511347428, "post_id": 47432220, "comment_id": 81819470, "body": "Sure, glad to I&#39;ll give the standard cites as well."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 4, "last_activity_date": 1511347135, "last_edit_date": 1511347135, "creation_date": 1511346281, "answer_id": 47432220, "question_id": 47432174, "link": "https://stackoverflow.com/questions/47432174/why-is-it-showing-random-numbers-c-program-to-read-string-letters/47432220#47432220", "title": "Why is it showing random numbers? C program to read string letters", "body": "<p><code>letters[]</code> is uniinitialized.\nSolution <code>int letters[26]={0}</code>.</p>\n\n<p>You are reading an uninitialized value which is indeterminate. And the results doesn't conform to as you expect it to be. </p>\n\n<p>Here you want to initialize the elements with <code>0</code> denoting that you haven't seen any charcaters yet. (automatic storage duration).</p>\n\n<p>A better way to overwrite the <code>'\\n'</code> would be</p>\n\n<pre><code>string[strcspn(string, \"\\n\")] = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8955319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b30092575850f0529c083d88c036696?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8955319/adrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1511346489, "creation_date": 1511346489, "answer_id": 47432294, "question_id": 47432174, "link": "https://stackoverflow.com/questions/47432174/why-is-it-showing-random-numbers-c-program-to-read-string-letters/47432294#47432294", "title": "Why is it showing random numbers? C program to read string letters", "body": "<p>you should initialize <code>letters</code> with all 0 values</p>\n"}], "owner": {"reputation": 11, "user_id": 8353309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076058629195816/picture?type=large", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/8353309/mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 47432210, "answer_count": 3, "score": 0, "last_activity_date": 1511347135, "creation_date": 1511346171, "last_edit_date": 1511347025, "question_id": 47432174, "link": "https://stackoverflow.com/questions/47432174/why-is-it-showing-random-numbers-c-program-to-read-string-letters", "title": "Why is it showing random numbers? C program to read string letters", "body": "<p>So I have to create a program that reads the user input and shows how many times each letter appears in that string, and also how many non-letters but my code for alphabets is showing random numbers..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define SIZE 100\n\nvoid readInput (char string[]);\nvoid Calc(char string[], int letters[]);\n\nvoid\nreadInput (char string[])\n{\n    printf (\"Enter a String:\\n\");\n    fgets (string, SIZE, stdin);\n\n    string[strlen (string) - 1] = '\\0';\n}\n\nvoid\nCalc(char string[], int letters[])\n{\n    int c = 0, x;\n    while (string[c] != '\\0')\n    {\n        if (string[c] &gt;= 'a' &amp;&amp; string[c] &lt;= 'z')\n        {\n            x = string[c] - 'a';\n            letters[x]++;\n        }\n\n        c++;\n    }\n\n    for (c = 0; c &lt; 26; c++)\n        printf (\"%c occurs %d times in the entered string.\\n\", c + 'a', letters[c]);\n}\n\nint\nmain ()\n{\n    char string[SIZE];\n    int letters[26];\n\n    readInput (string);\n    Calc(string, letters);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1IGAI.png\" rel=\"nofollow noreferrer\">This is the output</a></p>\n\n<p>I'm new to strings I've googled examples but can't seem to find whats wrong with my code and no idea how I will include the non-letters part.</p>\n"}, {"tags": ["python", "c", "buffer", "benchmarking", "netcdf"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1511347440, "post_id": 47431704, "comment_id": 81819480, "body": "Are you saying that you want to write code that dynamically allocates a buffer of the appropriate size and reads a file into it?"}, {"owner": {"reputation": 535, "user_id": 493925, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a74238c6c191df0913ba247d61940437?s=128&d=identicon&r=PG", "display_name": "labrassbandito", "link": "https://stackoverflow.com/users/493925/labrassbandito"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1511352917, "post_id": 47431704, "comment_id": 81823052, "body": "No. As the binary read example shows, it is just for the purpose of reading each part of a file. So, I want to read, for example and if it is possible, from the NetCDF file each time 64KB, throw it away, and then read the next 64 KB until the end of the file (see the variable record in the above code excerpt). If this is not feasible or is against the purpose of NetCDF, I am also open to other ideas to compare the read performance of NetCDF against a plain binary file."}], "owner": {"reputation": 535, "user_id": 493925, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a74238c6c191df0913ba247d61940437?s=128&d=identicon&r=PG", "display_name": "labrassbandito", "link": "https://stackoverflow.com/users/493925/labrassbandito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530802799, "creation_date": 1511344926, "last_edit_date": 1530802799, "question_id": 47431704, "link": "https://stackoverflow.com/questions/47431704/specify-read-buffer-size-in-netcdf-python-or-c", "title": "Specify read buffer size in NetCDF (Python or C)", "body": "<p>I would like to benchmark <code>NetCDF</code> <code>I/O</code> performance compared to reading a plain binary file in <code>Python</code> and <code>C</code>.</p>\n\n<p>For reading the binary file, I have defined different buffer sizes to read. Here is the code of the read function in <code>Python</code>:</p>\n\n<pre><code>def parse_os_read(filename, buffersize):\n    f = open(filename, 'rb')\n    for loops in itertools.count():\n        record = f.read(buffersize)\n        if not record:\n            break\n    return loops\n</code></pre>\n\n<p>I can then call this function with different buffer sizes ranging from 64 KB to several 100 MB.</p>\n\n<p>I would like to implement now a comparable sequential reading benchmark for <code>NetCDF</code>. However, I could not identify a read function, where I can set a pre-defined buffer size. I assume the <code>NetCDF</code> file should have a 1D array with random <code>floats</code> as a data structure.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511344297, "post_id": 47431368, "comment_id": 81817349, "body": "@StoryTeller my mistake, fixed it"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1511345234, "post_id": 47431368, "comment_id": 81817944, "body": "Just remember that a pointer is just a variable that stores the address of something else as its value. So with <code>int a=5;</code> and <code>int *b = &amp;a;</code> the pointer <code>b</code> just stores the address of <code>a</code> as its value. When you dynamically allocate with <code>malloc, calloc or realloc</code>, those functions reserve a block of memory of the requested size and return <i>the address</i> of the beginning of the block of memory. So you are just storing the address to the block of memory in the pointer variable you assign the return to."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511345858, "post_id": 47431368, "comment_id": 81818344, "body": "@DavidC.Rankin: This is the second (that I have come across) pointer related comment you have made today, and I am fan of these! +1 to it."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511345874, "post_id": 47431368, "comment_id": 81818359, "body": "How could it crash <i>there</i>?! your code has <code>ptr = NULL</code> there, it doesn&#39;t even go to the <i>input</i> branch."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 1, "creation_date": 1511345983, "post_id": 47431368, "comment_id": 81818426, "body": "@WedaPashi - yes, that just seems to be one of the biggest stumbling blocks new C programmers have with pointers. So I try to drop a comment if it looks like that is what they are struggling with. (which means I end up dropping quite a few <code>:)</code>"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511346062, "post_id": 47431368, "comment_id": 81818481, "body": "@DavidC.Rankin: Absolutely fair and a nice thing to do. Thanks!"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1511347488, "post_id": 47431368, "comment_id": 81819520, "body": "I&#39;d also add that the abbreviation DMA usually refers to Direct Memory Access, not Dynamic Memory Allocate, so be aware of that when doing your research."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1511344480, "post_id": 47431459, "comment_id": 81817470, "body": "BTW, if OP enabled all warnings at compilation time (e.g. <code>gcc -Wall -Wextra -g</code>) he would have been warned for that wrong <code>if</code> test"}, {"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 1, "creation_date": 1511344544, "post_id": 47431459, "comment_id": 81817508, "body": "hi, i edited it, it still crash after i input values."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1511346520, "post_id": 47431459, "comment_id": 81818815, "body": "<code>scanf_s(&quot;%d%s%f&quot;, &amp;ptr-&gt;eno, ptr-&gt;ename, &amp;ptr-&gt;esal); </code> is dubious. See the <b>Remarks</b> section of <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow noreferrer\">&#91; scanf_s documentation &#93;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1511346678, "post_id": 47431459, "comment_id": 81818930, "body": "@sjsam it is not dubious, but wrong, I converted my deleted comment into an answer."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511346952, "post_id": 47431459, "comment_id": 81819132, "body": "@WeatherVane Indeed, I just meant the practice of writing such statements. It is pretty hard to find out the mistake there."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1511347036, "post_id": 47431459, "comment_id": 81819196, "body": "@sjsam those <code>_s</code> functions are really no safer at all. They might be safer in execution, but are just as easy to get wrong when coding."}, {"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511353129, "post_id": 47431459, "comment_id": 81823197, "body": "Thank you for your very kind explanation, one mistake but it has so many theoretical aspects to concern about."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1511347117, "last_edit_date": 1511347117, "creation_date": 1511344320, "answer_id": 47431459, "question_id": 47431368, "link": "https://stackoverflow.com/questions/47431368/dynamic-memory-allocate-how-to-use-pointer-correctly-when-dealing-with-structur/47431459#47431459", "title": "Dynamic Memory Allocate, how to use pointer correctly when dealing with Structure?", "body": "<p>This:</p>\n\n<pre><code>if (ptr=NULL)\n</code></pre>\n\n<p>doesn't do what you want. You want the comparison operator <code>==</code>, not the assignment operator <code>=</code>. This will always set <code>ptr</code> to NULL, making the rest of the code have undefined behavior (which often leads to crashes in practice). Enabling, and <em>looking at</em>, compiler warnings is a very good way of avoiding this problem.</p>\n\n<p>For the actual question, <code>&amp;ptr-&gt;eno</code> means \"the address of the field <code>eno</code> in the struct pointed to by <code>ptr</code>\". In practice it will evaluate to the value of <code>ptr</code>, plus the offset from the start of the structure to the field <code>eno</code>, which in this case will be 0 since <code>eno</code> is the first field.</p>\n\n<p>Furthermore, the <code>printf()</code> should of course be inside the <code>else</code>, since you can only run that if <code>ptr</code> is not NULL.</p>\n\n<p>And, importantly: you must provide a buffer size for the string to <code>scanf_s()</code>.):</p>\n\n<blockquote>\n  <p>Unlike <code>scanf</code> and <code>wscanf</code>, <code>scanf_s</code> and <code>wscanf_s</code> require the buffer size to be specified for all input parameters of type <code>c</code>, <code>C</code>, <code>s</code>, <code>S</code>, or string control sets that are enclosed in <code>[]</code>. The buffer size in characters is passed as an additional parameter immediately following the pointer to the buffer or variable.</p>\n</blockquote>\n\n<p>So, it should be:</p>\n\n<pre><code>const int num = scanf_s(\"%d%s%f\", &amp;ptr-&gt;eno, ptr-&gt;ename, (unsigned int) sizeof ptr-&gt;ename, &amp;ptr-&gt;esal);\nif (num == 3)  // All conversions succeeded, we can rely on them\n{\n  printf(\"the name is: %s \\t the number: %d \\t the salary: %f\", ptr-&gt;ename, ptr-&gt;eno, ptr-&gt;esal); //line2\n}\n</code></pre>\n\n<p>And you should check its return value, otherwise you risk using non-initialized variables if the input fails for some reason.</p>\n\n<p>Note that the size of the buffer seems to be specified as <code>unsigned int</code>, and not <code>size_t</code>, which is ... not optimal in my point of view so the cast is needed.</p>\n\n<p>By the way, \"DMA\" typically means \"<a href=\"https://en.wikipedia.org/wiki/Direct_memory_access\" rel=\"nofollow noreferrer\">direct memory access</a>\" and has nothing to do with this; that was confusing me for a while.</p>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 1, "last_activity_date": 1511345963, "last_edit_date": 1511345963, "creation_date": 1511345303, "answer_id": 47431827, "question_id": 47431368, "link": "https://stackoverflow.com/questions/47431368/dynamic-memory-allocate-how-to-use-pointer-correctly-when-dealing-with-structur/47431827#47431827", "title": "Dynamic Memory Allocate, how to use pointer correctly when dealing with Structure?", "body": "<p>It is not a good practice to cast the output of <code>malloc</code> (check <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">[ this ]</a> ), the simplest way to do it would be</p>\n\n<pre><code>struct emp *ptr;\nptr = malloc(1 * sizeof *ptr);\n</code></pre>\n\n<p>Then, <code>==</code> is used for equal to logical comparison, so </p>\n\n<pre><code>if (NULL == ptr)\n/* = changed to ==, also put the value first which will help you easily\n* fix accidental omission of the second =\n*/\n{\n    printf(\"out of memory error\");\n    exit(1); // Exiting with a non-zero status\n} \n</code></pre>\n\n<p><sup><strong>Note</strong> This should be taken as a supplement to <a href=\"https://stackoverflow.com/a/47431459/1620779\">\n[ this ]</a> answer </sup></p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511352398, "post_id": 47432315, "comment_id": 81822749, "body": "This mades it work as expect, i try to use %19s only but it didn&#39;t work, but add sizeof (ptr-&gt;ename) , or simply add 20, made it work as expected."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511352542, "post_id": 47432315, "comment_id": 81822835, "body": "<code>%19s</code> would be the solution with plain <code>scanf</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511352676, "post_id": 47432315, "comment_id": 81822921, "body": "Note that the cast <code>(unsigned)</code> or <code>(unsigned int)</code> is needed because the result of <code>sizeof</code> may not itself be the correct size for the argument. On some systems <code>sizeof</code> may return a value of 8 bytes size, but <code>scanf_s</code> is expecting an argument of <code>int</code> size."}, {"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511353624, "post_id": 47432315, "comment_id": 81823494, "body": "hello, i am curious, the size of memory is bytes and suppose to return unsigned int value. Its safe but is it necessary?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511353687, "post_id": 47432315, "comment_id": 81823538, "body": "<code>sizeof</code> returns a value of type <code>size_t</code>, not <code>unsigned int</code>. On my system they are both 4 bytes, but may not be, which is why the cast should be used. For the same reason when printing a size, you should use <code>%zu</code> and not <code>%u</code>."}, {"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511353942, "post_id": 47432315, "comment_id": 81823704, "body": "Thank you, i just did a bit of research about different of size_t and unsigned int. My lecture note considers size_t is similar to unsigned int, that made me confused"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511354176, "post_id": 47432315, "comment_id": 81823853, "body": "They are similar in that they are both unsigned integers but that is all."}, {"owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "edited": false, "score": 0, "creation_date": 1511354300, "post_id": 47432315, "comment_id": 81823924, "body": "Thank you for your very kind explanation, i understand much more now"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 4, "last_activity_date": 1511346553, "creation_date": 1511346553, "answer_id": 47432315, "question_id": 47431368, "link": "https://stackoverflow.com/questions/47431368/dynamic-memory-allocate-how-to-use-pointer-correctly-when-dealing-with-structur/47432315#47432315", "title": "Dynamic Memory Allocate, how to use pointer correctly when dealing with Structure?", "body": "<p>Assuming that</p>\n\n<pre><code>if (ptr=NULL)\n</code></pre>\n\n<p>was a typo (since the subsequent \"it crashed after i input the values\" could not have happened), there is a fault here:</p>\n\n<pre><code>scanf_s(\"%d%s%f\", &amp;ptr-&gt;eno, ptr-&gt;ename, &amp;ptr-&gt;esal);\n</code></pre>\n\n<p>is missing the required size argument for <code>%s</code></p>\n\n<pre><code>scanf_s(\"%d%s%f\", &amp;ptr-&gt;eno, ptr-&gt;ename, 20, &amp;ptr-&gt;esal);\n</code></pre>\n\n<p>or instead of hard coding, perhaps</p>\n\n<pre><code>scanf_s(\"%d%s%f\", &amp;ptr-&gt;eno, ptr-&gt;ename, (unsigned)sizeof ptr-&gt;ename, &amp;ptr-&gt;esal);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8861362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112470a3e82d6a08d3f5babce4f35a47?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa.Huynh", "link": "https://stackoverflow.com/users/8861362/khoa-huynh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 47432315, "answer_count": 3, "score": 0, "last_activity_date": 1511347117, "creation_date": 1511344062, "last_edit_date": 1511344275, "question_id": 47431368, "link": "https://stackoverflow.com/questions/47431368/dynamic-memory-allocate-how-to-use-pointer-correctly-when-dealing-with-structur", "title": "Dynamic Memory Allocate, how to use pointer correctly when dealing with Structure?", "body": "<p>I am learning about Dynamic Memory Allocate now and it's hard to understand, especially when the lecturer mentioned about DMA and structure using pointer.</p>\n\n<p>First, at the line 1 in my code, i get confused what \"&amp;ptr->eno\" means. we initiate ptr as a pointer so it means ptr hold the address of the memory we reserved, lets say ptr hold the address 2046, is that \"&amp;ptr->eno\" means writing value to the address of 2046 it point to?</p>\n\n<p>Second, at the line 2, how i can print out the value, cause \"ptr->eno\" contains value \"2046\" than when i print it out, it gonna give me the number 2046, not the value i try to stored in the memory location 2046.</p>\n\n<p>My code was copied from the lecture note, i tried to run it on Visual studio, it crashed after i input the values. I am so new with C, my assumption may looks stupid and painful to understand. if you can't understand my explanation, please tell me how to use pointer with structure, may be i can figure out my mistake. Thank you</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct emp\n{\n    int eno;\n    char ename[20];\n    float esal;\n};\nvoid main()\n{\n    struct emp* ptr;\n    ptr = (struct emp*)malloc(sizeof(struct emp));\n    if (ptr=NULL)\n    {\n        printf(\"out of memory error\");\n    }\n    else\n    {\n        printf(\"enter the value of employee: \\n\");\n        scanf_s(\"%d%s%f\", &amp;ptr-&gt;eno, ptr-&gt;ename, &amp;ptr-&gt;esal); // line 1\n    }\n    printf(\"the name is: %s \\t the number: %d \\t the salary: %f\", ptr-&gt;ename, ptr-&gt;eno, ptr-&gt;esal); //line2\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "macros"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1511344111, "post_id": 47431265, "comment_id": 81817224, "body": "I think you need to take a few steps back and <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">get a couple of good beginners books</a>. An expression like <code>token == &quot;server&quot;</code> will not do what you think it does."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1511344327, "post_id": 47431265, "comment_id": 81817369, "body": "Comparing strings: <a href=\"https://stackoverflow.com/questions/8004237/how-do-i-properly-compare-strings\" title=\"how do i properly compare strings\">stackoverflow.com/questions/8004237/&hellip;</a>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1511345071, "post_id": 47431265, "comment_id": 81817842, "body": "Actually you are not far off. Most is correct C, except for comparing strings, which requires the use of <code>strcmp</code>, for example <code>if( strcmp(token, &quot;server&quot;)==0 )</code>."}, {"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1511346883, "post_id": 47431265, "comment_id": 81819078, "body": "That was great help guys, and I am thankful @Someprogrammerdude for actually telling me to go through the books for getting my basics strong. Klas Lindback and Paul Ogilvie thank you for poiniting my mistake to me. I will get back to you guys once I implement these suggestions."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511351936, "post_id": 47431265, "comment_id": 81822452, "body": "<code>string = buffer;     token = strtok(string,s);</code>  buffer is not NUL-terminated. <code>valread=read()</code> can be anything from  -1 to 1024 ."}, {"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1511418346, "post_id": 47431265, "comment_id": 81852659, "body": "@PaulOgilvie thanks for that help man. Now i can use my C service to distinguish between what process to go through and which part of the code to execute. It was really because I did not use the right string compare method"}, {"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511418507, "post_id": 47431265, "comment_id": 81852742, "body": "@wildplasser You made a valid point sir, but the problem that I had, had nothing to do with my buffer. Moreover <code>valread=read()</code> is used to read the buffer only, which is later converted to <code>utf-8</code> coding or ASCII characters, which can further be broken down into tokens using the delimiters that I have used further. And it is not NULL terminated, once the front part of the string/buffer is read, it discards the value I guess as it is able to read the other part of the string easily as well. I can share my output if you want :)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1511428622, "post_id": 47431265, "comment_id": 81858050, "body": "@DevanshuMisra :just wait till Nagle kicks in.Or your IP-frames get fragmented."}, {"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511433916, "post_id": 47431265, "comment_id": 81861725, "body": "@wildplasser thank you for giving me a heads up on this and will surely read about this and implement your suggestions accordingly. Can you please give me some reference material about Nagle and IP-frames getting fragmented, that I can go through so that this problem(which you stated) gets tackled before it arises?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1511464214, "post_id": 47431265, "comment_id": 81878784, "body": "<a href=\"https://stackoverflow.com/q/6263829/905902\">stackoverflow.com/q/6263829/905902</a> [for buffering streams]"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9007689, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/007a6e058dadb0b97ffeb267527513c9?s=128&d=identicon&r=PG", "display_name": "bocz", "link": "https://stackoverflow.com/users/9007689/bocz"}, "is_accepted": false, "score": 0, "last_activity_date": 1511625338, "last_edit_date": 1511625338, "creation_date": 1511625027, "answer_id": 47487769, "question_id": 47431265, "link": "https://stackoverflow.com/questions/47431265/handling-multiple-clients-through-socket-programming-in-c/47487769#47487769", "title": "Handling multiple clients through socket programming in C", "body": "<p>C++ ssl server with multiple connections <a href=\"https://github.com/breakermind/cppSockets/tree/master/SslServerExample\" rel=\"nofollow noreferrer\">https://github.com/breakermind/cppSockets/tree/master/SslServerExample</a></p>\n\n<blockquote>\n  <p>Working example with C++ fork() function or with threads.</p>\n  \n  <p>fork() - server create new prossess for each new connection</p>\n  \n  <p>thread() - server create new thread for each new connection</p>\n</blockquote>\n\n<p>You need change only part in this function/method</p>\n\n<pre><code>void ServerLoop(SSL *ssl, string ipAddress){ }\n</code></pre>\n\n<p>You can test connections from openssl client</p>\n\n<pre><code>openssl s_client -connect hostname:999\n</code></pre>\n\n<p>If connect to smtp server then</p>\n\n<pre><code>openssl s_client -connect hostname:25 -starttls smtp\n</code></pre>\n"}], "owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511625338, "creation_date": 1511343748, "question_id": 47431265, "link": "https://stackoverflow.com/questions/47431265/handling-multiple-clients-through-socket-programming-in-c", "title": "Handling multiple clients through socket programming in C", "body": "<p>I am currently working on a server(basically a background service that allows the write in database to happen) in C which receives data streams in the form of a string from two different python clients, which in turn uses delimiters to seperate the tokens generated from the string and write them to the respective/different xml files. The code part might seem long, but it is a really simple program so please bear with me and try to help as I am a newbie when it comes to client-server architecture and would like to learn all these complexities. Thanks in advance.</p>\n\n<p>My C Program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt; //inet_addr\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\n\n\nint main(int argc , char *argv[])\n{\n    int socket_desc , new_socket , c, valread;\n    struct sockaddr_in server, client ;\n    char *message;\n    char buffer[1024] = {0};\n    char *hello = \"Hello from server\";\n    int opt = 1;\n    char *string;\n    const char s[2] = \";\";\n    char *token;\n    char *sid;\n    char *name;\n    char *host;\n    char *port;\n    char *proto;\n    char *user;\n    char *password;\n    char *key;\n    char *companyName;\n    char *officeAddress;\n    char *state;\n    char *country;\n    char *ladmin;\n    char *phone;\n    char *mobile;\n    char *email;\n    char *designation;\n    char *rmanager;\n    char *sip;\n    char *polname;\n    char *device;\n    char *status;\n    char *srczone;\n    char *dstzone;\n    char *srcaddr;\n    char *dstaddr;\n    char *srcuser;\n    char *app;\n    char *service;\n    char *urlcategory;\n    char *action;\n\n\n\n\n\n\n //Create socket\n    socket_desc = socket(AF_INET , SOCK_STREAM , 0);\n    if (socket_desc == 0)\n    {\n        printf(\"Could not create socket\");\n    }\n\n\n    if (setsockopt(socket_desc, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT, &amp;opt, sizeof(opt)))\n    {\n    perror(\"setsockopt\");\n    exit(EXIT_FAILURE);\n    }\n\n\n    //Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons( 8888 );\n\n\n\n    //Bind\n    if( bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n    {\n   puts(\"bind failed\");\n    }\n\n\n     puts(\"bind done\");\n\n\n\n\n    //Listen\n    listen(socket_desc , 3);\n  while(1){\n    //Accept and incoming connection\n  puts(\"Waiting for incoming connections...\");\n    c = sizeof(struct sockaddr_in);\n    new_socket = accept(socket_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c);\n    if (new_socket&lt;0)\n    {\n        perror(\"accept failed\");\n    }\n\n    puts(\"Connection accepted\\n\");\n\n\n\n\n    valread = read(new_socket, buffer, 1024);\n    printf(\"%s\\n\", buffer);\n    string = buffer;\n\n//Macro that I am using to distinguish between clients and the work to be done\n    token = strtok(string,s);\n\n//If server is passed as the first token, following code to be executed\n    printf(\"%s\", token);\n    if( token == \"server\" ){\n    sid = strtok(NULL, s);\n    printf(\"\\nSERVER-ID: %s\\n\", sid);\n    name = strtok(NULL, s);\n    printf(\"\\nName: %s\\n\", name);\n    host = strtok(NULL,s);\n    printf(\"\\nHost: %s\\n\", host);\n    port = strtok(NULL,s);\n    printf(\"\\nPort: %s\\n\", port);\n    proto = strtok(NULL,s);\n    printf(\"\\nProto: %s\\n\", proto);\n    user = strtok(NULL,s);\n    printf(\"\\nUser: %s\\n\", user);\n    password = strtok(NULL, s);\n    printf(\"\\nPassword: %s\\n\", password);\n    key = strtok(NULL,s);\n    printf(\"\\nKey: %s\\n\", key);\n    companyName = strtok(NULL,s);\n    printf(\"\\nCompanyName: %s\\n\", companyName);\n    officeAddress = strtok(NULL,s);\n    printf(\"\\nOfficeAddress: %s\\n\", officeAddress);\n    state = strtok(NULL,s);\n    printf(\"\\nState: %s\\n\", state);\n    country = strtok(NULL,s);\n    printf(\"\\nCountry: %s\\n\", country);\n    email = strtok(NULL,s);\n    printf(\"/nEmail: %s\\n\", email);\n    ladmin = strtok(NULL,s);\n    printf(\"\\nLAdmin: %s\\n\", ladmin);\n    phone = strtok(NULL,s);\n    printf(\"\\nPhone: %s\\n\", phone);\n    mobile = strtok(NULL,s);\n    printf(\"\\nMobile: %s\\n\", mobile);\n    designation = strtok(NULL, s);\n    printf(\"\\nDesignation: %s\\n\", designation);\n    rmanager = strtok(NULL, s);\n    printf(\"\\nReportingManager: %s\\n\", rmanager);\n\n    FILE *xml_file;\n    xml_file = fopen(\"/var/www/db/db_server_list.xml\", \"a+\");\n    fseek(xml_file, -8, SEEK_END);\n\n    ftruncate(fileno(xml_file),ftello(xml_file));\n\n\n\n\n\n    fprintf(xml_file, \"\\n&lt;server id='%s'&gt;\\n\", sid);\n    fprintf(xml_file, \"   &lt;name&gt;%s&lt;/name&gt;\\n\", name);\n    fprintf(xml_file, \"   &lt;host&gt;%s&lt;/host&gt;\\n\", host);\n    fprintf(xml_file, \"   &lt;port&gt;%s&lt;/port&gt;\\n\", port);\n    fprintf(xml_file, \"   &lt;proto&gt;%s&lt;/proto&gt;\\n\", proto);\n    fprintf(xml_file, \"   &lt;user&gt;%s&lt;/user&gt;\\n\", user);\n    fprintf(xml_file, \"   &lt;password&gt;%s&lt;/password&gt;\\n\", password);\n    fprintf(xml_file, \"   &lt;key&gt;%s&lt;/key&gt;\\n\", key);\n    fprintf(xml_file, \"   &lt;companyName&gt;%s&lt;/companyName&gt;\\n\", companyName);\n    fprintf(xml_file, \"   &lt;address&gt;\\n\");\n    fprintf(xml_file, \"     &lt;officeAddr&gt;%s&lt;/officeAddr&gt;\\n\", officeAddress);\n    fprintf(xml_file, \"     &lt;state&gt;%s&lt;/state&gt;\\n\", state);\n    fprintf(xml_file, \"     &lt;country&gt;%s&lt;/country&gt;\\n\", country);\n    fprintf(xml_file, \"   &lt;/address&gt;\\n\");\n    fprintf(xml_file, \"   &lt;contacts&gt;\\n\");\n    fprintf(xml_file, \"     &lt;ladmin&gt;%s&lt;/ladmin&gt;\\n\", ladmin);\n    fprintf(xml_file, \"     &lt;phone&gt;%s&lt;/phone&gt;\\n\", phone);\n    fprintf(xml_file, \"     &lt;mobile&gt;%s&lt;/mobile&gt;\\n\", mobile);\n    fprintf(xml_file, \"     &lt;email&gt;%s&lt;/email&gt;\\n\", email);\n    fprintf(xml_file, \"     &lt;designation&gt;%s&lt;/designation&gt;\\n\", designation);\n    fprintf(xml_file, \"     &lt;rManager&gt;%s&lt;/rManager&gt;\\n\", rmanager);\n    fprintf(xml_file, \"   &lt;/contacts&gt;\\n\");\n    fprintf(xml_file, \" &lt;/server&gt;\\n\", key);\n    fprintf(xml_file, \"&lt;/data&gt;\");\n\n    fclose(xml_file);\n send(new_socket, hello, 17, 0);\n    printf(\"\\nSocket: Sent data to the client!\\n\");\n}\nelse if (token == \"policy\"){\n    sip = strtok(NULL, s);\n    printf(\"\\nserverip: %s\\n\", sip);\n    polname = strtok(NULL, s);\n    printf(\"\\nPolicy Name: %s\\n\", polname);\n    device = strtok(NULL,s);\n    printf(\"\\nDevice Name: %s\\n\", device);\n    status = strtok(NULL,s);\n    printf(\"\\nStatus: %s\\n\", status);\n    srczone = strtok(NULL,s);\n    printf(\"\\nSrcZone: %s\\n\", srczone);\n    dstzone = strtok(NULL,s);\n    printf(\"\\nDstZone: %s\\n\", dstzone);\n    srcaddr = strtok(NULL, s);\n    printf(\"\\nSrcAddr: %s\\n\", srcAddr);\n    dstaddr = strtok(NULL,s);\n    printf(\"\\nDstAddr: %s\\n\", dstAddr);\n    srcuser = strtok(NULL,s);\n    printf(\"\\nSrcUser: %s\\n\", srcuser);\n    app = strtok(NULL,s);\n    printf(\"\\nApplication: %s\\n\", app);\n    service = strtok(NULL,s);\n    printf(\"\\nService: %s\\n\", service);\n    urlcategory = strtok(NULL,s);\n    printf(\"\\nUrlCategory: %s\\n\", urlcategory);\n    action = strtok(NULL,s);\n    printf(\"/nAction: %s\\n\", action);\n\n    FILE *xml_file;\n    xml_file = fopen(\"/var/www/db/db_policy.xml\", \"a+\");\n    fseek(xml_file, -14, SEEK_END);\n\n    ftruncate(fileno(xml_file),ftello(xml_file));\n\n\n\n\n\n    fprintf(xml_file, \"\\n&lt;policyDecryption&gt;\\n\",);\n    fprintf(xml_file, \"   &lt;policyName&gt;%s&lt;/policyName&gt;\\n\", polname);\n    fprintf(xml_file, \"   &lt;deviceName&gt;%s&lt;/deviceName&gt;\\n\", device);\n    fprintf(xml_file, \"   &lt;status&gt;%s&lt;/status&gt;\\n\", status);\n    fprintf(xml_file, \"   &lt;srcZone&gt;%s&lt;/srcZone&gt;\\n\", srczone);\n    fprintf(xml_file, \"   &lt;dstZone&gt;%s&lt;/dstZone&gt;\\n\", dstzone);\n    fprintf(xml_file, \"   &lt;srcAddr&gt;%s&lt;/srcAddr&gt;\\n\", srcaddr);\n    fprintf(xml_file, \"   &lt;dstAddr&gt;%s&lt;/dstAddr&gt;\\n\", dstaddr);\n    fprintf(xml_file, \"   &lt;srcUser&gt;%s&lt;/srcUser&gt;\\n\", srcuser);\n    fprintf(xml_file, \"   &lt;application&gt;%s&lt;/application&gt;\\n\", app);\n    fprintf(xml_file, \"   &lt;service&gt;%s&lt;/service&gt;\\n\", service);\n    fprintf(xml_file, \"   &lt;urlCategory&gt;%s&lt;/urlCategory&gt;\\n\", urlcategory);\n    fprintf(xml_file, \"   &lt;action&gt;%s&lt;/action&gt;\\n\", action);\n    fprintf(xml_file, \" &lt;/policyDecryption&gt;\\n\");\n    fprintf(xml_file, \"&lt;/policyList&gt;\");\n\n    fclose(xml_file);\n  send(new_socket, hello, 17, 0);\n    printf(\"\\nSocket: Sent data to the client!\\n\");\n\n\n}\n}\n\n    return 0;\n}\n</code></pre>\n\n<p>When I tried sending the data to this server without using the macro, it prints the macro as well and now that I have added the second macro and the followed by code as well, the client gets stuck and no printing/writing into the database takes place and I have to end the execution using <code>Ctrl+C</code> in order to stop.</p>\n\n<p>Is this a right approach to solve my problem? Am I doing anything wrong? I know this is not the best way to do this work, so any and all suggestions are welcome. </p>\n\n<p>The clients are python based CGI scripts which take dynamic data from a UI page and send that data as a string. I am attaching \"server\" and \"policy\" as two different macros that are supposed to be read and the following code to be executed accordingly.</p>\n"}, {"tags": ["c", "encryption", "input"], "comments": [{"owner": {"reputation": 29, "user_id": 7625751, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5177f87bca743bdac56318373425c958?s=128&d=identicon&r=PG&f=1", "display_name": "MoStack", "link": "https://stackoverflow.com/users/7625751/mostack"}, "edited": false, "score": 0, "creation_date": 1511343641, "post_id": 47431143, "comment_id": 81816922, "body": "I think I might have to add #include &lt;openssl/evp.h&gt; and then call OpenSSL_add_all_algorithms();"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 1, "creation_date": 1511343934, "post_id": 47431143, "comment_id": 81817105, "body": "<i>define it for me</i>, not that won&#39;t <b>define</b> it. Those are linker options, and its worth reading about it."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7625751, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5177f87bca743bdac56318373425c958?s=128&d=identicon&r=PG&f=1", "display_name": "MoStack", "link": "https://stackoverflow.com/users/7625751/mostack"}, "edited": false, "score": 0, "creation_date": 1511344021, "post_id": 47431234, "comment_id": 81817150, "body": "Yea so now I&#39;ve done #include &lt;openssl/sha.h&gt; but it can&#39;t seem to find that. Thanks for answering too!"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "reply_to_user": {"reputation": 29, "user_id": 7625751, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5177f87bca743bdac56318373425c958?s=128&d=identicon&r=PG&f=1", "display_name": "MoStack", "link": "https://stackoverflow.com/users/7625751/mostack"}, "edited": false, "score": 0, "creation_date": 1511344271, "post_id": 47431234, "comment_id": 81817331, "body": "it should be at /usr/include/openssl, but if openssl is installed on other non standard location you have search for this file and specify its directory name in -I option in your build"}, {"owner": {"reputation": 29, "user_id": 7625751, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5177f87bca743bdac56318373425c958?s=128&d=identicon&r=PG&f=1", "display_name": "MoStack", "link": "https://stackoverflow.com/users/7625751/mostack"}, "edited": false, "score": 0, "creation_date": 1511344593, "post_id": 47431234, "comment_id": 81817546, "body": "Yea thanks, I don&#39;t think the library was installed. I think it&#39;s in the libssl-dev library. Installed that and it seems to work fine. Thanks again! One last thing, when I print out the hash after calling SHA1 should I being getting nonstandard characters?"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "reply_to_user": {"reputation": 29, "user_id": 7625751, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5177f87bca743bdac56318373425c958?s=128&d=identicon&r=PG&f=1", "display_name": "MoStack", "link": "https://stackoverflow.com/users/7625751/mostack"}, "edited": false, "score": 0, "creation_date": 1511349176, "post_id": 47431234, "comment_id": 81820622, "body": "You probably have print non-ascii characters, you may print them in hex"}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 0, "last_activity_date": 1511343644, "creation_date": 1511343644, "answer_id": 47431234, "question_id": 47431143, "link": "https://stackoverflow.com/questions/47431143/sha-digest-length-undefined/47431234#47431234", "title": "SHA_DIGEST_LENGTH undefined", "body": "<p><code>SHA_DIGEST_LENGTH</code> is defined in <code>sha.h</code>, if you are using openssl, you need to include this header file</p>\n"}], "owner": {"reputation": 29, "user_id": 7625751, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5177f87bca743bdac56318373425c958?s=128&d=identicon&r=PG&f=1", "display_name": "MoStack", "link": "https://stackoverflow.com/users/7625751/mostack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1525, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511347452, "creation_date": 1511343384, "last_edit_date": 1511347452, "question_id": 47431143, "link": "https://stackoverflow.com/questions/47431143/sha-digest-length-undefined", "title": "SHA_DIGEST_LENGTH undefined", "body": "<p>So currently my code looks something like this:</p>\n\n<pre><code>int main(){\n    char input[1024]\n    size_t length;\n    unsigned char hash[SHA_DIGEST_LENGTH];\n    fgets(input,1024,stdin);\n    length = sizeof(input);\n    SHA(input,hash,length)\n}\n</code></pre>\n\n<p>I receive a compilation error telling me that <code>SHA_DIGEST_LENGTH</code> is undefined. I thought when compiling including <code>-lssl</code> and <code>-lcrypto</code> would sort of define it for me?</p>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 1505, "user_id": 4344586, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zmULe.png?s=128&g=1", "display_name": "Frank AK", "link": "https://stackoverflow.com/users/4344586/frank-ak"}, "edited": false, "score": 0, "creation_date": 1511342945, "post_id": 47430860, "comment_id": 81816462, "body": "Try <code>valgrind .&#47;a.out</code> . you will see what you need to know."}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511342962, "post_id": 47430860, "comment_id": 81816475, "body": "I think there is <i>no</i> undefined behavior. But uninitialized data, yes. Therefore: yes, you can write those assignments, they are legal, they are useless."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511343181, "post_id": 47430860, "comment_id": 81816633, "body": "undefined behaviour because you cannot know the values (auto variables). but of course it&#39;s safe: it does nothing as long as you don&#39;t use them for something useful..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511345074, "post_id": 47430860, "comment_id": 81817844, "body": "I think this 3rd example deserves the language-lawyer tag, so I&#39;m adding it. I&#39;m pretty sure it is well-defined as I wrote in my answer, but let&#39;s see."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1511348980, "post_id": 47430860, "comment_id": 81820510, "body": "related: <a href=\"https://stackoverflow.com/questions/45506400/consequences-of-uninitialised-variables-int-vs-unsigned-char/45507183#45507183\" title=\"consequences of uninitialised variables int vs unsigned char\">stackoverflow.com/questions/45506400/&hellip;</a>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511349488, "post_id": 47430860, "comment_id": 81820835, "body": "I have followed up questions raised in this in <a href=\"https://stackoverflow.com/questions/47433041/is-using-a-structure-without-all-members-assigned-undefined?noredirect=1#comment81820612_47433041\">this new question</a>."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511345109, "post_id": 47431348, "comment_id": 81817866, "body": "I am not sure 6.3.2.1 applies to (3). I do not see that the standard makes it clear what it means for a structure to be uninitialized in this situation. Clearly if all members of a structure were assigned a value, we would expect behavior to be defined, but this does not strictly satisfy the text in 6.3.2.1, as no assignment to the object that is the structure has been performed, just assignments to its members. But what if only some members have been assigned? Per 6.7.9 10, unnamed members of a structure have unspecified values even after initialization. So we can never give values to all\u2026"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511345178, "post_id": 47431348, "comment_id": 81817905, "body": "\u2026 members of a structure that has unnamed members. So, if <code>b = a</code> could be undefined if any member of <code>a</code> has not been initialized, then structures with unnamed members can never be used in expressions (unless you take their address)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511345196, "post_id": 47431348, "comment_id": 81817918, "body": "@EricPostpischil I completely forgot to consider that example <b>at all</b>, but edited a few minutes ago. It should be well-defined, the union is initialized after writing to one member. It would be even more interesting when asking about a struct."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511345267, "post_id": 47431348, "comment_id": 81817962, "body": "Oops, I was thinking of (3) with a structure, not a union. (Which is still an interesting question.) Let me think about a union."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511345493, "post_id": 47431348, "comment_id": 81818100, "body": "@EricPostpischil I <b>think</b> the answer is the same for unions and structs, writing a single member is enough to have an initialized object -- but it&#39;s more obvious for unions given 6.2.6.1p7: &quot;<i>When a value is stored in a member of an object of union type, the bytes of the object representation that do not correspond to that member but do correspond to other members take unspecified values.</i>&quot;"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511347632, "post_id": 47431348, "comment_id": 81819605, "body": "@FelixPalmen The only bit I take issue with is one of the final comments &quot;writing a single member is enough to have an initialized object&quot;. It&#39;s not writing to a single member that does it, it is <i>initializing</i> a single member that causes all remaining members to be treated as if they had been declared with static storage duration (and thereby initialized to zero). Cites. Start with <code>6.7.9 Initialization</code> then Notes <code>10</code> (aggregates are 3rd bullet), <code>12</code> (rest applies to aggregate or union) and finally <code>19</code> ."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511347962, "post_id": 47431348, "comment_id": 81819842, "body": "@DavidC.Rankin with a <code>union</code>, I think it doesn&#39;t matter given the passage I cited above. It would be interesting for a <code>struct</code>. I don&#39;t think initialization matters here, but merely the exact definition of when an object is considered <i>uninitialized</i>. The wording from 6.3.2.1 is just &quot;<i>not declared with an initializer and no assignment to it has been performed prior to use</i>&quot;. If there&#39;s no better definition regarding aggregate types, I think this particular case might be underspecified."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1511348193, "post_id": 47431348, "comment_id": 81820024, "body": "I completely agree. Once you set one of the members of a union, you are good. The problem is aggregates (structs). That is where initialization of one member is required. (the reference to <code>12</code> with the word <code>union</code> in it is just how the conglomeration of all notes <code>12</code> and beyond applying to both struct and union. <code>19</code> is where the meat and potatoes are at <code>:)</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 3, "last_activity_date": 1511344917, "last_edit_date": 1511344917, "creation_date": 1511344015, "answer_id": 47431348, "question_id": 47430860, "link": "https://stackoverflow.com/questions/47430860/do-a-union-or-struct-permit-assignment-from-an-uninitialised-instance/47431348#47431348", "title": "Do a union or struct permit assignment from an uninitialised instance?", "body": "<p>In general, assigning from an uninitialized object isn't <em>undefined behavior</em>, it only makes the result unspecified.</p>\n\n<p><strong>But</strong> the code you show indeed has <em>undefined behavior</em> -- for a different reason than you assume. Citing N1570 (latest C11 draft), <strong>\u00a76.3.2.1 p2</strong> here:</p>\n\n<blockquote>\n  <p>[...] If\n  the lvalue designates an object of automatic storage duration that could have been\n  declared with the <code>register</code> storage class (never had its address taken), and that object\n  is uninitialized (not declared with an initializer and no assignment to it has been\n  performed prior to use), the behavior is undefined.</p>\n</blockquote>\n\n<p>Explaining this a bit: The C standard is prepared to handle values that aren't stored in an <em>addressable location</em>. This is typically the case when they are held in one of the CPU's registers. Explicitly giving an object the <code>register</code> storage class is only a <em>hint</em> to the compiler that it should, if sensible, hold that object in a register. The other way around, a compiler is free to hold any object with <em>automatic storage duration</em> in a register as long as the code doesn't need to address it (by taking a pointer).</p>\n\n<p>In your code, you have uninitialized objects with <em>automatic storage duration</em> that never have their address taken, so the compiler would be free to place them in registers. This means there <strong>is no value</strong> for the object (not even an unspecified one) before it is initialized. Therefore, using this potentially non-existent value to initialize another object (or, for other purposes) is <strong>undefined behavior</strong>.</p>\n\n<p>If your code would take a pointer to the respective <code>a</code> in all these examples, the result of the assignment would be unspecified (of course), but the behavior would be defined.</p>\n\n<hr>\n\n<p>It's worth to add that <code>struct</code>s and <code>union</code>s have nothing to do with the answer to your question. The rules are the same for all kind of objects with automatic storage duration. That said, in your third example, <code>a</code> isn't uninitialized any more, after you assign one member of the <code>union</code>. So for your third example, the behavior is well-defined. It doesn't matter what's in the other member of the <code>union</code>, a <code>union</code> can only hold a value for one of its members at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 865, "user_id": 8429669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ed3e5cda5f6df13974c577d93e3261?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Colton", "link": "https://stackoverflow.com/users/8429669/ian-colton"}, "edited": false, "score": 0, "creation_date": 1511346478, "post_id": 47431532, "comment_id": 81818784, "body": "Thank you for this, in particular for taking the time to research (3)."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 4, "last_activity_date": 1511348719, "last_edit_date": 1511348719, "creation_date": 1511344534, "answer_id": 47431532, "question_id": 47430860, "link": "https://stackoverflow.com/questions/47430860/do-a-union-or-struct-permit-assignment-from-an-uninitialised-instance/47431532#47431532", "title": "Do a union or struct permit assignment from an uninitialised instance?", "body": "<p>The behavior is undefined in (1) and (2).</p>\n\n<p>Per the C standard, the value of an object with automatic storage duration that is not initialized is <strong>indeterminate</strong> (C 2011 [N1570] 6.7.9 10). Nominally, this means it has some value, but we do not know what it is while writing the program.</p>\n\n<p>However, the standard also says \u201cIf the lvalue designates an object of automatic storage duration that could have been declared with the <strong>register</strong> storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined\u201d (6.3.2.1 2). In your sample code, the address of <code>a</code> is never taken, and it is not initialized, and using it in an expression is an lvalue. Therefore, the behavior is undefined.</p>\n\n<p>(This passage, 6.3.2.1 2, was designed to accommodate processors that can detect use of an uninitialized register. Nonetheless, the rule in the C standard applies to all implementations.)</p>\n\n<p>(3) is not clearly addressed by the C standard. Although a member of the union has been assigned a value, and hence is not uninitialized for purposes of 6.3.2.1 2, the object being used in <code>b = a</code> is the union, not its member. Obviously, our intuitive notion is that, if a member of a union is assigned a value, the union has a value. However, I do not see this specified in the C standard.</p>\n\n<p>We can infer 6.3.2.1 2 is not intended to consider a union or structure to be uninitialized, at least if part of it has been assigned a value, because:</p>\n\n<ol>\n<li><p>Structures can have unnamed members, such as unnamed bit fields.</p></li>\n<li><p>Per C 6.7.9 9, unnamed members of structures have indeterminate value, even after initialization (of the structures).</p></li>\n<li><p>If 6.3.2.1 2 applied to structures in which not every member had been assigned a value, then <code>b = a</code> would always be undefined if <code>a</code> were a structure with an unnamed member and had automatic storage duration.</p></li>\n<li><p>That seems unreasonable and not what the standard intended.</p></li>\n</ol>\n\n<p>However, there is some wiggle room here. The standard could have specified that a structure is not uninitialized only if it were initialized or <strong>all</strong> of its named members have been assigned values. In that case (3) would be undefined if <code>a</code> were a structure in which only one member had been assigned a value. I do not think this wiggle room exists with a union; if a member of the union has been assigned a value, it is only reasonable to consider the union not to be uninitialized.</p>\n"}], "owner": {"reputation": 865, "user_id": 8429669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ed3e5cda5f6df13974c577d93e3261?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Colton", "link": "https://stackoverflow.com/users/8429669/ian-colton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 47431532, "answer_count": 2, "score": 3, "last_activity_date": 1511348719, "creation_date": 1511342445, "last_edit_date": 1511345086, "question_id": 47430860, "link": "https://stackoverflow.com/questions/47430860/do-a-union-or-struct-permit-assignment-from-an-uninitialised-instance", "title": "Do a union or struct permit assignment from an uninitialised instance?", "body": "<p>This question is about the definedness or otherwise of assigning an uninitalised automatic variable to another one of the same type.</p>\n\n<p>Consider</p>\n\n<pre><code>typedef struct\n{\n    int s1;\n    int s2;\n} Foo;\n\ntypedef union\n{\n    int u1;\n    Foo u2; \n} Bar;\n\nint main()\n{\n    {\n        int a;\n        int b = a; // (1)\n    }\n    {\n        Foo a;\n        Foo b = a; // (2)\n    }\n    {   \n        Bar a;\n        a.u1 = 0;\n        Bar b = a; // (3)\n    }\n}\n</code></pre>\n\n<p>Referring to the comments in <code>main</code>:</p>\n\n<p>(1) is undefined since <code>a</code> is uninitialised. That much I know.</p>\n\n<p>But what about (2)? The struct members <code>s1</code> and <code>s2</code> are uninitialised.</p>\n\n<p>Furthermore, what about (3)? The memory u2.s2 is uninitialised, so reading it is undefined behaviour no?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165, "user_id": 2867342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d371c33253d6bcf1e661d49ef47cd7?s=128&d=identicon&r=PG&f=1", "display_name": "user2867342", "link": "https://stackoverflow.com/users/2867342/user2867342"}, "edited": false, "score": 0, "creation_date": 1511342283, "post_id": 47430710, "comment_id": 81815983, "body": "scanf returns the number of items found. All your calls to scanf should return a 1 since they only read one value. If they ever return a 0, then the scanf has failed and there wasn&#39;t enough data."}, {"owner": {"reputation": 165, "user_id": 2867342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d371c33253d6bcf1e661d49ef47cd7?s=128&d=identicon&r=PG&f=1", "display_name": "user2867342", "link": "https://stackoverflow.com/users/2867342/user2867342"}, "edited": false, "score": 0, "creation_date": 1511342344, "post_id": 47430710, "comment_id": 81816024, "body": "You want to call malloc after the first scanf, otherwise dim won&#39;t have any value."}, {"owner": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "reply_to_user": {"reputation": 165, "user_id": 2867342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d371c33253d6bcf1e661d49ef47cd7?s=128&d=identicon&r=PG&f=1", "display_name": "user2867342", "link": "https://stackoverflow.com/users/2867342/user2867342"}, "edited": false, "score": 0, "creation_date": 1511342519, "post_id": 47430710, "comment_id": 81816144, "body": "The malloc call order fixed but how can i check the user input ?"}, {"owner": {"reputation": 165, "user_id": 2867342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d371c33253d6bcf1e661d49ef47cd7?s=128&d=identicon&r=PG&f=1", "display_name": "user2867342", "link": "https://stackoverflow.com/users/2867342/user2867342"}, "edited": false, "score": 0, "creation_date": 1511342672, "post_id": 47430710, "comment_id": 81816256, "body": "I&#39;ve already answered that."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511343422, "post_id": 47430710, "comment_id": 81816783, "body": "@DanaYeger: Please don&#39;t comment your own question, but do edit it. BTW, <i>do-my-homework</i> or <i>fix-my-code</i> questions are <b>off-topic</b> on SO"}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "edited": false, "score": 0, "creation_date": 1511342967, "post_id": 47430939, "comment_id": 81816483, "body": "No, the input should be in a single line."}, {"owner": {"reputation": 1271, "user_id": 1201416, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/31e802feeb8512d2bbd12dd5a8f04d0a?s=128&d=identicon&r=PG", "display_name": "mcsim", "link": "https://stackoverflow.com/users/1201416/mcsim"}, "edited": false, "score": 0, "creation_date": 1511342974, "post_id": 47430939, "comment_id": 81816487, "body": "Unless you know that all the input will be passed in one line there is no way to know that the rest of the input comes from the stdin. Simply because user can change her mind just after you call scanf."}, {"owner": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "edited": false, "score": 0, "creation_date": 1511343226, "post_id": 47430939, "comment_id": 81816664, "body": "i want to count the number and for example if the line start with 2 thats mean that i need more 4 numbers and if i have 3 and new line i want to pring error message"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511343377, "post_id": 47430939, "comment_id": 81816753, "body": "<b>You</b> definitely <b>should spend hours <i>reading</i> documentation</b> (notably of <code>malloc</code>, <code>calloc</code>, <code>scanf</code>, <code>getline</code>, <code>fgets</code>). We won&#39;t do your homework."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "edited": false, "score": 1, "creation_date": 1511344060, "post_id": 47430939, "comment_id": 81817182, "body": "@DanaYeger - the <code>&quot;%d&quot;</code> <i>format specifier</i> will skip <i>leading whitespace</i>. (a <code>&#39;\\n&#39;</code> is <i>whitespace</i>) So what he is saying is it does not matter if all your input is on one line, or if it is on 5 separate lines -- <code>scanf (&quot;%d&quot;,...</code> will read an integer and then skip all spaces and newlines and read the next value."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511344138, "post_id": 47430939, "comment_id": 81817243, "body": "@DavidC.Rankin: nitpicking, I think (but I am not entirely sure) that <code>scanf(&quot;%d&quot;,</code> will first skip spaces -including newlines- and then read one integer (not in the opposite order)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1511344540, "post_id": 47430939, "comment_id": 81817504, "body": "Hehe, that&#39;s one I had to prove to myself -- but it does. Example <code>while (scanf (&quot;%d&quot;, &amp;i) == 1) printf (&quot;%d\\n&quot;, i);</code> and feed it <code>printf &quot; 1\\n \\n2 3\\n4&quot; | .&#47;prog</code>. It will in fact skip <code>spaces</code> and <code>newlines</code> in any order (even multiple <code>newlines</code>) without the leading space (e.g. <code>&quot; %d&quot;</code>) in the format string. <code>:)</code>"}, {"owner": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "edited": false, "score": 0, "creation_date": 1511350231, "post_id": 47430939, "comment_id": 81821349, "body": "So from all  the comments what is the best way to read single line with numbers and from here continue ?"}, {"owner": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "edited": false, "score": 0, "creation_date": 1511350422, "post_id": 47430939, "comment_id": 81821482, "body": "i just very confuse now"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511350516, "post_id": 47430939, "comment_id": 81821541, "body": "I don&#39;t know. If you care only about stdin, use <code>getline</code> or <code>fgets</code> and then parse that line. If you really want an editable line from a terminal on Linux -not just from stdin-, consider <code>readline</code>, which BTW is really simple to use. I have no idea if you want your program to support redirections and pipelines. As I explained in my last paragraph, terminals are <i>really</i> complex. But your <i>question</i> is confusing and your code is wrong (every outside function e.g. <code>scanf</code> or <code>malloc</code> can fail, and you should test that!)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1511345545, "last_edit_date": 1511345545, "creation_date": 1511342717, "answer_id": 47430939, "question_id": 47430710, "link": "https://stackoverflow.com/questions/47430710/c-language-how-to-consider-new-line-with-scanf/47430939#47430939", "title": "C language: how to consider new line with scanf", "body": "<p>If you know that your <a href=\"https://en.wikipedia.org/wiki/Standard_streams\" rel=\"nofollow noreferrer\">standard input</a> is organized in <em>lines</em>, you could read each line entirely (probably with <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline(3)</a> like <a href=\"https://stackoverflow.com/a/9171511/841108\">here</a> or else with <code>fgets</code>) then parse that line appropriately in memory (keeping some internal pointer inside it, and using <a href=\"http://man7.org/linux/man-pages/man3/strtol.3.html\" rel=\"nofollow noreferrer\">strtol(3)</a> with its end pointer, or <a href=\"http://man7.org/linux/man-pages/man3/sscanf.3.html\" rel=\"nofollow noreferrer\">sscanf(3)</a> with <code>%n</code>). BTW what <em>exactly</em> defines a line is <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating system</a> specific (Windows vs Linux vs MacOSX have different definitions and line terminators).</p>\n\n<p>If you are not sure that the input is organized in lines, you'll use standard <a href=\"https://en.wikipedia.org/wiki/Parsing#Computer_languages\" rel=\"nofollow noreferrer\">parsing</a> techniques (e.g some <a href=\"https://en.wikipedia.org/wiki/Recursive_descent_parser\" rel=\"nofollow noreferrer\">recursive descent parser</a>), probably with a single token of look ahead.</p>\n\n<p>In all cases, you'll better <strong>specify</strong> on paper <strong>your <a href=\"https://en.wikipedia.org/wiki/File_format\" rel=\"nofollow noreferrer\">file format</a></strong>. A simple <a href=\"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">EBNF</a> notation is a good specification for most parsers.</p>\n\n<p>Your current code is wrong, because you don't test against failure of <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a>.  You need to test its returned scanned item count. BTW, it is also wrong to use <code>malloc</code> without testing its failure, and you probably should use <code>calloc</code> not  <code>malloc</code> because you should prefer zeroed memory.</p>\n\n<p>Notice that <code>scanf</code> with <code>%d</code> (or better yet, <code>\" %d\"</code>) is skipping spaces, including newline characters ending input lines. In other words, your <code>scanf</code> don't care about <em>lines</em>, as you say you want to.</p>\n\n<p>Compile your code with all warnings and debug info (so <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>) and use the debugger <code>gdb</code> to run it step by step and understand what is happening. Spend more time in reading documentation (notably of <a href=\"http://en.cppreference.com/w/c\" rel=\"nofollow noreferrer\">standard C functions</a>, and of your software tools: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">compiler</a>, <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">debugger</a>, ... that you would use on the command line).</p>\n\n<hr>\n\n<p>BTW, <a href=\"https://en.wikipedia.org/wiki/Computer_terminal\" rel=\"nofollow noreferrer\">terminals</a> are complex (virtual) devices. On my Linux system, they could be line buffered by the kernel's <a href=\"https://en.wikipedia.org/wiki/Line_discipline\" rel=\"nofollow noreferrer\">line discipline</a>. You might read the <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow noreferrer\">tty demystified</a> and consider using <a href=\"http://man7.org/linux/man-pages/man3/readline.3.html\" rel=\"nofollow noreferrer\">readline(3)</a> or <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses</a> (if you are <em>sure</em> to read from the terminal). Using <code>fgets</code>, <code>getline</code> and other <a href=\"http://man7.org/linux/man-pages/man3/stdio.3.html\" rel=\"nofollow noreferrer\">stdio(3)</a> functions is enough only if you are just reading from <code>stdin</code> and don't care about <a href=\"https://en.wikipedia.org/wiki/Pseudoterminal\" rel=\"nofollow noreferrer\">pseudo-terminals</a> vs <a href=\"https://en.wikipedia.org/wiki/Redirection_(computing)\" rel=\"nofollow noreferrer\">redirections</a> or command <a href=\"https://en.wikipedia.org/wiki/Pipeline_(Unix)\" rel=\"nofollow noreferrer\">pipelines</a>. See also <a href=\"http://man7.org/linux/man-pages/man3/isatty.3.html\" rel=\"nofollow noreferrer\">isatty(3)</a>.</p>\n\n<p><sup>(the last above paragraph is specific for Linux, and probably not for newbies. IMHO terminals are very complex, once you dive into details.)</sup></p>\n"}], "owner": {"reputation": 541, "user_id": 1303562, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/823124e930764239d3fbd841dc68f0b5?s=128&d=identicon&r=PG", "display_name": "Dana Yeger", "link": "https://stackoverflow.com/users/1303562/dana-yeger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 47430939, "answer_count": 1, "score": 0, "last_activity_date": 1511345545, "creation_date": 1511342004, "last_edit_date": 1511342483, "question_id": 47430710, "link": "https://stackoverflow.com/questions/47430710/c-language-how-to-consider-new-line-with-scanf", "title": "C language: how to consider new line with scanf", "body": "<p>So i have program that get numbers from user in single line for example:</p>\n\n<pre><code>2 1 2 3 4\n</code></pre>\n\n<p>The first number: 2 mean that the output should be matrix with 2 rows and 2 columns:</p>\n\n<pre><code>1 2\n3 4\n</code></pre>\n\n<p>So this is how i am populate my aray:</p>\n\n<pre><code>int dim;\nscanf(\"%d\", &amp;dim);\nint *m = (int *)malloc(dim* dim* sizeof(int))\n\nfor (r = 0; r &lt; dim; ++r)\n{\n    for (c = 0; c &lt; dim; ++c)\n    {\n        scanf(\"%d\", &amp;m[dim * r + c]);\n    }\n}\n</code></pre>\n\n<p>Now i want to add some value check, in case the user input start with <code>2</code> the next input should contain 4 number (<code>2\u00b2</code>) in a single line so in case the input is <code>2 1 2 3</code> i want to print error message but my problem is that after this input the <code>scanf</code> just ignored from the new line and wait.</p>\n"}, {"tags": ["c", "language-lawyer", "endianness", "unions"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511341849, "post_id": 47430607, "comment_id": 81815724, "body": "that sounds all right to me. but I&#39;m not an adept of the C standard."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1511341985, "post_id": 47430607, "comment_id": 81815813, "body": "Yes but it doesn&#39;t handle middle-endian machines ;-) Though you need not test the endianness at runtime - you&#39;d know that at compile time already."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1511342100, "post_id": 47430607, "comment_id": 81815870, "body": "What would be the use-case to detect it at run-time? Wouldn&#39;t a compiler macro be simpler?"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511342109, "post_id": 47430607, "comment_id": 81815877, "body": "@AnttiHaapala What is &quot;middle-endian&quot;? Storing 0x0001 as <code>80 00</code>?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1511342253, "post_id": 47430607, "comment_id": 81815962, "body": "Middle-endian refers to multibyte layout that is neither little nor big endian. You cannot detect a middle-endian system with 2 bytes. They&#39;re not exactly common nowadays..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1511342711, "post_id": 47430607, "comment_id": 81816290, "body": "@AnttiHaapala there&#39;s no compile-time endian detection in Standard C"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1511342821, "post_id": 47430607, "comment_id": 81816358, "body": "I feel compelled to point out that you usually should not care what the endianness is of your platform, and if you do, you&#39;re probably doing something wrong and could write endian-agnostic code instead. <i>Why</i> do you care?"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1511342887, "post_id": 47430607, "comment_id": 81816404, "body": "@jamesdlin I know. I&#39;m not going to write endianess-dependent code. I just want to know the safety of determining endianess like this."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511343734, "post_id": 47430607, "comment_id": 81816978, "body": "Why do you need to? Very few useful things depend on endianness, most of them are handled by existing libraries."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511344187, "post_id": 47430607, "comment_id": 81817270, "body": "@M.M of course there isn&#39;t. But depending on the implementation-level details like this is not strictly compliant either. On GCC the endianness can be detected from <code>__BYTE_ORDER__</code> which equals <code>__BIG_ENDIAN__</code>, <code>__LITTLE_ENDIAN__</code> or <code>__PDP_ENDIAN__</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511344757, "post_id": 47430607, "comment_id": 81817659, "body": "It might be safe, but why does it matter? This is not the best method to determine endianness."}, {"owner": {"reputation": 4344, "user_id": 988870, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b91462071f7b1d4d77c8ca5e1883d1a8?s=128&d=identicon&r=PG", "display_name": "Jarrod Smith", "link": "https://stackoverflow.com/users/988870/jarrod-smith"}, "edited": false, "score": 0, "creation_date": 1511401336, "post_id": 47430607, "comment_id": 81847980, "body": "There are plenty of legitimate scenarios where needing to know the endianess is not a sign of bad design. E.g. receiving quantised numerical data over the wire. Reading any kind of packed binary format. Emscripten integration. We\u2019re talking about C here. :S"}], "answers": [{"comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511342334, "post_id": 47430774, "comment_id": 81816016, "body": "What might be a trap representation in the last sentence?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511342464, "post_id": 47430774, "comment_id": 81816101, "body": "@iBug - <a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.19.4\" rel=\"nofollow noreferrer\">It&#39;s a bit representation that doesn&#39;t represent any valid value of the object</a>. For the integer types you use, there likely isn&#39;t one (I&#39;m still looking for a reference, at the moment). Since each bit representation for them is usually a valid value."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1511342598, "post_id": 47430774, "comment_id": 81816194, "body": "Maybe you understood me wrongly. I know what a trap representation is but am unsure what may become a TR, as stated in the last sentenct."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511342687, "post_id": 47430774, "comment_id": 81816266, "body": "If I&#39;m not much mistaken, this has been changed with the introduction of strict aliasing rules. Which version of the standard are you citing from?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1511342741, "post_id": 47430774, "comment_id": 81816310, "body": "<code>uintN_t</code> types are defined with <i>&quot;UINTN_MAX exactly 2^N \u2212 1&quot;</i> and no padding bits. There should be no trap presentation."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511342756, "post_id": 47430774, "comment_id": 81816325, "body": "@cmaster - Strict aliasing (though never mentioned like that by name in the standard) predates this behavior of unions. Also note, there is no aliasing going on here. I read members, don&#39;t alias them."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1511342853, "post_id": 47430774, "comment_id": 81816383, "body": "@user694733 - Aha, thank you. You comment actually led me directly to the quote I needed"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511342964, "post_id": 47430774, "comment_id": 81816478, "body": "Well, the two members refer to the same bytes in memory, so they do alias each other... But if that paragraph is in the current standard, I guess that overrides the more generally formulated strict aliasing rules. So, +1 from me."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511345641, "post_id": 47430774, "comment_id": 81818194, "body": "could you clarify why the compiler must place the objects in overlapping regions within the union boundary?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 1, "creation_date": 1511345903, "post_id": 47430774, "comment_id": 81818377, "body": "@lockcmpxchg8b - That&#39;s the basic function of a union. The members overlap."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511345974, "post_id": 47430774, "comment_id": 81818419, "body": "in former specs, the members &quot;may&quot; overlap.  I can&#39;t find anything stronger in this one. (Though it would be somewhat ridiculous if they didn&#39;t...but then again, we&#39;re already being pretty pedantic on this question... so a little more won&#39;t hurt)"}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 1, "creation_date": 1511347021, "post_id": 47430774, "comment_id": 81819185, "body": "My memory is apparently faulty.  that spec reads substantially like the one you cite.  I&#39;ll delete the earlier comment.  It would still be nice to find a prohibition on initial padding on all members of a union to make your answer air-tight."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511347430, "post_id": 47430774, "comment_id": 81819472, "body": "The old 1999 spec comes close.  It prohibits initial padding on structs."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511347879, "post_id": 47430774, "comment_id": 81819787, "body": "Hmm.  One of the undefined behaviors in J.2 is when &quot;An object is assigned to an <i>inexactly overlapping</i> object&quot;, so overlap is not necessarily simple."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511348087, "post_id": 47430774, "comment_id": 81819943, "body": "@lockcmpxchg8b - Not in general, no. In this particular case however, one can be fairly certain there is no undefined behavior. The quote presented by <b>greydet</b> bellow is a further guarantee. Since a pointer points at the first byte, and these objects overlap and have fixed width. There isn&#39;t wriggle room to sneak UB in."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511348976, "post_id": 47430774, "comment_id": 81820508, "body": "well, &quot;under suitable conversion&quot; is important in that phrase, and greydet ignores it.  In the same sense that conversion is used here: <a href=\"http://c-faq.com/null/ptrtest.html\" rel=\"nofollow noreferrer\">c-faq.com/null/ptrtest.html</a>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511349336, "post_id": 47430774, "comment_id": 81820726, "body": "@lockcmpxchg8b - Ah, but that&#39;s the crux of the matter. &quot;suitably converted&quot; is itself undefined (or at least, I could no find it). If the standard means it&#39;s merely a reinterpretation of the pointer value (my opinion), then there is nothing to worry about. If it includes value adjustment, we are in trouble. I consider it a wording defect. Because now that I think about it, not knowing the exact meaning here makes this question unanswerable. I think you should post the conclusions of this back and forth in an answer. It&#39;d be good one."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511349917, "post_id": 47430774, "comment_id": 81821127, "body": "@lockcmpxchg8b - On second thought, it also says <i>&quot;A pointer to a structure object, suitably converted, points to its initial member&quot;</i>. Is it the same &quot;suitably converted&quot;? I&#39;m starting to dislike this language lawyer question."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1513285204, "post_id": 47430774, "comment_id": 82606429, "body": "@StoryTeller: Because the Standard does not explicitly define the phrase &quot;suitably converted&quot;, the most natural meaning would be &quot;converted via any means defined by the Standard&quot;.  Such conversion need not imply simple reinterpretation of the bits, but the Standard offers no such reason the relation shouldn&#39;t be transitive."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1511342968, "last_edit_date": 1511342968, "creation_date": 1511342189, "answer_id": 47430774, "question_id": 47430607, "link": "https://stackoverflow.com/questions/47430607/is-it-safe-to-detect-endianess-with-union/47430774#47430774", "title": "Is it safe to detect endianess with union?", "body": "<p>Quoting from n1570:</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.2.3p3\" rel=\"nofollow noreferrer\">6.5.2.3 Structure and union members - p3</a></p>\n\n<blockquote>\n  <p>A postfix expression followed by the . operator and an identifier\n  designates a member of a structure or union object. <strong>The value is that\n  of the named member</strong>, and is an lvalue if the first expression is an\n  lvalue.</p>\n</blockquote>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.6.1p7\" rel=\"nofollow noreferrer\">6.2.6 Representations of types / 1 General - p7</a></p>\n\n<blockquote>\n  <p>When a value is stored in a member of an object of union type, the\n  bytes of the object representation that do not correspond to that\n  member but do correspond to other members take unspecified values.</p>\n</blockquote>\n\n<p>It's allowed. And your use case could even be considered one intended purpose, if <a href=\"http://port70.net/~nsz/c/c11/n1570.html#note95\" rel=\"nofollow noreferrer\">note 95</a> is taken into account (despite being only informative):</p>\n\n<blockquote>\n  <p>If the member used to read the contents of a union object is not the\n  same as the member last used to store a value in the object, the\n  appropriate part of the object representation of the value is\n  reinterpreted as an object representation in the new type as described\n  in 6.2.6 (a process sometimes called \"type punning\"). This might be\n  a trap representation.</p>\n</blockquote>\n\n<p>Now, since the uintN_t family of types are defined to have no padding bits</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.20.1.1p2\" rel=\"nofollow noreferrer\">7.20.1.1 Exact-width integer types - p2</a></p>\n\n<blockquote>\n  <p>The typedef name uintN_t designates an unsigned integer type with\n  width N and no padding bits. Thus, uint24_t denotes such an unsigned\n  integer type with a width of exactly 24 bits.</p>\n</blockquote>\n\n<p>All their bit representations are valid values, no trap representations are possible. So we must conclude that it will indeed check for the endianess of <code>uint16_t</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511343013, "post_id": 47430914, "comment_id": 81816516, "body": "The uintNN_t types cannot have trap representations"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511343207, "post_id": 47430914, "comment_id": 81816655, "body": "@M.M Reference?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511343271, "post_id": 47430914, "comment_id": 81816689, "body": "Read their specification in N1570"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1511342617, "creation_date": 1511342617, "answer_id": 47430914, "question_id": 47430607, "link": "https://stackoverflow.com/questions/47430607/is-it-safe-to-detect-endianess-with-union/47430914#47430914", "title": "Is it safe to detect endianess with union?", "body": "<p>The standard (available in the linked online draft) says in a <a href=\"http://port70.net/~nsz/c/c11/n1570.html#note95\" rel=\"nofollow noreferrer\">footnote</a> that it is allowed to access a different member of the same union than the member previously written:</p>\n\n<blockquote>\n  <p>95) If the member used to read the contents of a union object is not\n  the same as the member last used to store a value in the object, the\n  appropriate part of the object representation of the value is\n  reinterpreted as an object representation in the new type as described\n  in 6.2.6 (a process sometimes called ''type punning''). This might be\n  a trap representation.</p>\n</blockquote>\n\n<p>But the footnote also mentions a possible trap representation, and the only data type that is guaranteed by the standard to be safe concerning trap representations is <code>unsigned char</code>. Accessing trap representations may be undefined behaviour; and although I don't think that <code>unit_32</code> may yield a trap representation on your platform, it is actually implementation dependant whether accessing this member is UB or not. </p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1513286111, "post_id": 47821960, "comment_id": 82606900, "body": "@M.M: The OP code would detect some weird orderings, but would leave many undetected."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1513285283, "creation_date": 1513285283, "answer_id": 47821960, "question_id": 47430607, "link": "https://stackoverflow.com/questions/47430607/is-it-safe-to-detect-endianess-with-union/47821960#47821960", "title": "Is it safe to detect endianess with union?", "body": "<p>There is no requirement that the order of bits within a byte match the ordering of the corresponding bits in a larger type.  A conforming implementation which defines <code>uint32_t</code> and has an 8-bit <code>unsigned char</code> could, for example, store the upper 16 bits of the uint32_t using four bits from each byte, and store the bottom 16 bits using the remaining four bits of each byte.  From the point of view of the Standard, any of 32! permutations of bits would be equally acceptable.</p>\n\n<p>That having been said, any implementation that isn't being deliberately obtuse and is designed to run on a commonplace platform will use one of two orderings [treating bytes as groups of 8 consecutive bits, in the order 0123 or 3210], and one that doesn't use one of the above and targets any platform that isn't totally obscure will use 2301 or 1032.  The Standard doesn't forbid other orderings, but failure to accommodate them would be very unlikely to cause any trouble except when using obtusely-contrived implementations.</p>\n"}], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 1, "accepted_answer_id": 47430774, "answer_count": 3, "score": 10, "last_activity_date": 1513285283, "creation_date": 1511341627, "last_edit_date": 1511343323, "question_id": 47430607, "link": "https://stackoverflow.com/questions/47430607/is-it-safe-to-detect-endianess-with-union", "title": "Is it safe to detect endianess with union?", "body": "<p>In other words, according to the C <strong>standard</strong>, is this code safe? (Assume <code>uint8_t</code> is one byte)</p>\n\n<pre><code>void detectEndianness(void){\n    union {\n        uint16_t w;\n        uint8_t b;\n    } a;\n    a.w = 0x00FFU;\n    if (a.b == 0xFFU) {\n        puts(\"Little endian.\");\n    }\n    else if (a.b == 0U) {\n        puts(\"Big endian.\");\n    }\n    else {\n        puts(\"Stack Overflow endian.\");\n    }\n}\n</code></pre>\n\n<p>What if I change it into this? Note the third <code>if</code> case that I'm aware of.</p>\n\n<pre><code>a.w = 1U;\nif (a.b == 1U) { puts(\"Little endian.\"); }\nelse if (a.b == 0U) { puts (\"Big endian.\"); }\nelse if (a.b == 0x80U) { /* Special potential */ }\nelse { puts(\"Stack Overflow endian.\"); }\n</code></pre>\n"}, {"tags": ["c", "unions"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1511340841, "post_id": 47430347, "comment_id": 81815153, "body": "<code>b=a</code> is perfectly OK."}, {"owner": {"reputation": 8064, "user_id": 5910563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snpEp.jpg?s=128&g=1", "display_name": "Horia Coman", "link": "https://stackoverflow.com/users/5910563/horia-coman"}, "edited": false, "score": 3, "creation_date": 1511340903, "post_id": 47430347, "comment_id": 81815185, "body": "Why don&#39;t you try this up in a compiler? There&#39;s even an online <a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">one</a> if you don&#39;t have access to one."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1511340921, "post_id": 47430347, "comment_id": 81815198, "body": "Beware of <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianness</a> and packing."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 8064, "user_id": 5910563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snpEp.jpg?s=128&g=1", "display_name": "Horia Coman", "link": "https://stackoverflow.com/users/5910563/horia-coman"}, "edited": false, "score": 2, "creation_date": 1511341225, "post_id": 47430347, "comment_id": 81815362, "body": "@HoriaComan: being accepted by a compiler and being conformant C can be different things: not all compilers are fully standard compliant (MSVC used to be a good example for a long time, unsure for last versions), and others support extensions to the standard"}, {"owner": {"reputation": 8064, "user_id": 5910563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snpEp.jpg?s=128&g=1", "display_name": "Horia Coman", "link": "https://stackoverflow.com/users/5910563/horia-coman"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1511341902, "post_id": 47430347, "comment_id": 81815762, "body": "@SergeBallesta agreed on your point, but I think the question should have been asked as such. I was just making a point that it would have been easier to just test it out than to ask about it on SO. At the end of the day, if OP is asking for a work project, they&#39;re stuck with whatever compiler the company uses, rather than what the standard says and what the set of compilers implement. Granted, it&#39;s <i>good</i> for this question to exist for future reference."}], "answers": [{"tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 6, "last_activity_date": 1511340932, "creation_date": 1511340932, "answer_id": 47430400, "question_id": 47430347, "link": "https://stackoverflow.com/questions/47430347/c-union-assignment/47430400#47430400", "title": "C union assignment", "body": "<pre><code>b = a;\n</code></pre>\n\n<p>It's totally OK to do this.</p>\n\n<p>For structures and unions, assigning one to another of the same type is well-defined by the standard, and it's guaranteed that after the assignment, they should contain exactly the same data (padding excluded, if present).</p>\n"}], "owner": {"reputation": 31, "user_id": 2303749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ecbedf5b0ad32a4c82456444c12392?s=128&d=identicon&r=PG", "display_name": "user2303749", "link": "https://stackoverflow.com/users/2303749/user2303749"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1523890541, "creation_date": 1511340768, "last_edit_date": 1523890541, "question_id": 47430347, "link": "https://stackoverflow.com/questions/47430347/c-union-assignment", "title": "C union assignment", "body": "<p>I have union that represent some structures that all uint32 type but with different bit-fields. can i do assignment of one union to other like this:</p>\n\n<pre><code>typedef union foo_u\n{\n   // raw\n   uint32_t foo32;\n\n   // interpretation 1\n   struct\n   {\n      uint16_t a;\n      uint16_t b;\n   } foo_flavor1;\n\n   //interpretation 2\n   struct\n   {\n      uint32_t a        : 16;\n      uint32_t b        : 12;\n      uint32_t c        : 4;\n   } foo_flavor2;\n} foo;\nfoo a;\nfoo b;\na.foo32 = 10;\nb.foo32 = 30;\nb=a;\n</code></pre>\n\n<p>or i have to do the assignment like this:</p>\n\n<pre><code>b.foo32 = a.foo32; \n</code></pre>\n"}, {"tags": ["c++", "c", "security", "concurrency", "race-condition"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1511342090, "post_id": 47430121, "comment_id": 81815864, "body": "Asking for off-site resources is strictly off-topic. This is also highly opinion based"}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 1, "creation_date": 1511342429, "post_id": 47430121, "comment_id": 81816078, "body": "<a href=\"https://en.m.wikipedia.org/wiki/Therac-25\" rel=\"nofollow noreferrer\">Therac-25</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1511345545, "post_id": 47430121, "comment_id": 81818135, "body": "I think <i>popular</i> is not exactly something that any of them are."}], "answers": [{"tags": [], "owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "is_accepted": false, "score": 0, "last_activity_date": 1511340726, "creation_date": 1511340726, "answer_id": 47430332, "question_id": 47430121, "link": "https://stackoverflow.com/questions/47430121/comprehensible-race-conditions-bugs-resulting-in-security-flaws/47430332#47430332", "title": "Comprehensible race conditions bugs resulting in security flaws", "body": "<p>I remember reading in a book somewhere about a race condition problem with X11 that creates a file in <code>/tmp</code>, and there was a security flaw because one could change the content of the file between the time it was created and the time it was accessed. Not sure but I think it was this one: <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=988498\" rel=\"nofollow noreferrer\">https://bugzilla.redhat.com/show_bug.cgi?id=988498</a></p>\n"}], "owner": {"reputation": 59, "user_id": 7405068, "user_type": "registered", "profile_image": "https://graph.facebook.com/684859931690447/picture?type=large", "display_name": "junie", "link": "https://stackoverflow.com/users/7405068/junie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "closed_date": 1511342322, "answer_count": 1, "score": 3, "last_activity_date": 1511348616, "creation_date": 1511339950, "last_edit_date": 1511348616, "question_id": 47430121, "link": "https://stackoverflow.com/questions/47430121/comprehensible-race-conditions-bugs-resulting-in-security-flaws", "closed_reason": "Not suitable for this site", "title": "Comprehensible race conditions bugs resulting in security flaws", "body": "<p><br>\nI am looking for famous, easy and real-life security flaws (preferredly in C/C++, but not necessarily) that result from race conditions. <br>\nSo far I only found somewhat comprehensible, accessible and dangerous flaws in the glibc (setuid) and the Linux kernel, both of which are probably too complex as triggering them would result in a long and possibly boring demonstration. In addition, I found database race conditions, which are probably more useful but off-context. </p>\n\n<p>They already got a few small programs where race conditions occur, but only because of manual sleep() calls. <br> The question boils down to this: </p>\n\n<p><em>Are there any well-known race conditions in C or C++ that occured in the wild and are dangerous in a security context?</em> </p>\n\n<p>Context: Showing how Concurrency can become dangerous in real-life examples. Target audience are experienced C/C++ programmers who didn't think much about Concurrency beforehand. </p>\n\n<p>Thank you for your time. </p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1511340084, "post_id": 47430112, "comment_id": 81814750, "body": "<code>a*NRBF1</code> expands to <code>a*21+1</code>. Use parentheses as in <code>#define NRBF1  (NRBF+1)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511340666, "post_id": 47430112, "comment_id": 81815044, "body": "duplicate candidate: <a href=\"https://stackoverflow.com/questions/3719150/square-of-a-number-being-defined-using-define\" title=\"square of a number being defined using define\">stackoverflow.com/questions/3719150/&hellip;</a>. There are probably others."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511340576, "post_id": 47430151, "comment_id": 81814994, "body": "with <code>SQR(X) (X*X)</code> or even <code>SQR(X) ((X)*(X))</code> the problem is a little trickier, since <code>X</code> can be a side-effect expression or a function, and calling it twice may give unexpected results."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511340617, "post_id": 47430151, "comment_id": 81815019, "body": "@Jean-Fran&#231;oisFabre.: Yes that&#39;s why I am writing and putting it in a later edit otherwise it will be interpreted wrong way"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511340653, "post_id": 47430151, "comment_id": 81815036, "body": "looks very much like there: <a href=\"https://stackoverflow.com/questions/3719150/square-of-a-number-being-defined-using-define\" title=\"square of a number being defined using define\">stackoverflow.com/questions/3719150/&hellip;</a>"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511340708, "post_id": 47430151, "comment_id": 81815068, "body": "@Jean-Fran&#231;oisFabre.: I am writing. Yes it is problem when <code>SQR(i++)</code> that is expanded twice."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1511341340, "last_edit_date": 1511341340, "creation_date": 1511340045, "answer_id": 47430151, "question_id": 47430112, "link": "https://stackoverflow.com/questions/47430112/incorrect-multiplication-of-integers-in-c/47430151#47430151", "title": "Incorrect multiplication of integers in C", "body": "<p>It's basically calculating alright</p>\n\n<pre><code>0*21+1 = 1\n</code></pre>\n\n<p>The macro is expanded but the <code>*</code> has precedence over <code>+</code>. That's why this happens.</p>\n\n<p>A more detail explanation would be</p>\n\n<pre><code>#define NRBF       21\n#define NRBF1  NRBF+1\n</code></pre>\n\n<p>So what is going on </p>\n\n<pre><code>base = a*NRBF1;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>base = a*NRBF+1\n\nNow when a = 0 then base = 1\n    when a = 1 then base = 21+1 ...so on.\n</code></pre>\n\n<p>Correct way would be to wrap it aropund parentheses.</p>\n\n<pre><code>#define NRBF1  (NRBF+1)\n</code></pre>\n\n<hr>\n\n<p>Some more pitfalls:</p>\n\n<p>That when you add a macro like this <code>#define SQR(X) X*X</code></p>\n\n<p>For some example like this where same precedence operators are there next to next then it will be problematic.</p>\n\n<pre><code>int i = 100/SQR(10);\n</code></pre>\n\n<p>Then it will be expanded to </p>\n\n<pre><code>int i = 100/10*10\n</code></pre>\n\n<p>Now same precedence operators are here executed left to right.</p>\n\n<p>So it will result in <code>i=100</code>.</p>\n\n<p>Solution same <code>#define SQR(X) (X*X)</code></p>\n\n<p>Also when passing an expression like this <code>SQR(i+1)</code> then it will be expanded to <code>i+1*i+1</code>=<code>2*i+1</code>. So a bit more correct would be</p>\n\n<pre><code>#define SQR(X) ((X)*(X))\n</code></pre>\n\n<p>Even with that you wouldn't be able to avoid few things if you forget one thing <em>macro just expands - it does nothing more</em>.</p>\n\n<p>You can't use macro like this</p>\n\n<p><code>SQR(i++)</code> which will be expanded to <code>((i++)*(i++))</code>. So you are increasing the <code>i</code> twice which is what you didn't mean. Moreover this will result in <strong>undefined behavior</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1511340785, "post_id": 47430155, "comment_id": 81815119, "body": "the expression results to <code>43</code>, if <code>a</code> equals to <code>2</code>."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1511341805, "post_id": 47430155, "comment_id": 81815691, "body": "@mch Thanks, corrected. Pre-coffee small-integer arithmetic is nothing for me."}, {"owner": {"reputation": 377, "user_id": 4177094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/18078989babbe43b467fef11264e46ea?s=128&d=identicon&r=PG&f=1", "display_name": "Enrico Anderlini", "link": "https://stackoverflow.com/users/4177094/enrico-anderlini"}, "edited": false, "score": 0, "creation_date": 1511430999, "post_id": 47430155, "comment_id": 81859743, "body": "Thank you very much for your answer! Absolutely right!"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1511341778, "last_edit_date": 1511341778, "creation_date": 1511340053, "answer_id": 47430155, "question_id": 47430112, "link": "https://stackoverflow.com/questions/47430112/incorrect-multiplication-of-integers-in-c/47430155#47430155", "title": "Incorrect multiplication of integers in C", "body": "<p>With the macro expanded, the line looks like:</p>\n\n<pre><code>base = a*NRBF+1;\n</code></pre>\n\n<ul>\n<li>For <code>a</code> equal to 0, the expression is <code>0 * 21 + 1</code> which is 1.</li>\n<li>For <code>a</code> equal to 2, the expression is <code>2 * 21 + 1</code> which is 43.</li>\n</ul>\n\n<p>The solution is to put parentheses in the macro definition:</p>\n\n<pre><code>#define NRBF1 (NRBF + 1)\n</code></pre>\n\n<p>This is a good rule for any macro with an expression as its right-hand side.</p>\n\n<p>Remember that macros are just text-substituted into the code.</p>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 4177094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/18078989babbe43b467fef11264e46ea?s=128&d=identicon&r=PG&f=1", "display_name": "Enrico Anderlini", "link": "https://stackoverflow.com/users/4177094/enrico-anderlini"}, "edited": false, "score": 0, "creation_date": 1511430961, "post_id": 47430161, "comment_id": 81859713, "body": "Thank you very much! You are absolutely right. That was silly of me."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 5, "last_activity_date": 1511340824, "last_edit_date": 1511340824, "creation_date": 1511340096, "answer_id": 47430161, "question_id": 47430112, "link": "https://stackoverflow.com/questions/47430112/incorrect-multiplication-of-integers-in-c/47430161#47430161", "title": "Incorrect multiplication of integers in C", "body": "<p>The problem is here:</p>\n\n<p>You define your macros like this:</p>\n\n<pre><code>#define NRBF       21\n#define NRBF1  NRBF+1\n</code></pre>\n\n<p>When you write this:</p>\n\n<pre><code>base = a*NRBF1;\n</code></pre>\n\n<p>The preprocessor replaces <code>NRBF1</code> textually with <code>21+1</code> which results in this:</p>\n\n<pre><code>base = a*21+1;\n</code></pre>\n\n<p>but you intended this:</p>\n\n<pre><code>base = a*(21+1);\n</code></pre>\n\n<p>Therefore you need to define your macro like this:</p>\n\n<pre><code>#define NRBF1  (NRBF+1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7999704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f93bc1d9c49bf5bb45f48621be6706?s=128&d=identicon&r=PG&f=1", "display_name": "a-dot-slash", "link": "https://stackoverflow.com/users/7999704/a-dot-slash"}, "is_accepted": false, "score": 1, "last_activity_date": 1511340404, "creation_date": 1511340404, "answer_id": 47430239, "question_id": 47430112, "link": "https://stackoverflow.com/questions/47430112/incorrect-multiplication-of-integers-in-c/47430239#47430239", "title": "Incorrect multiplication of integers in C", "body": "<p>the define doesn't create a single value 22 but the expression 21 + 1. I wonder whether your problems go away if you change your second #define to\n #define NBRF1 (NBRF + 1)</p>\n"}], "owner": {"reputation": 377, "user_id": 4177094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/18078989babbe43b467fef11264e46ea?s=128&d=identicon&r=PG&f=1", "display_name": "Enrico Anderlini", "link": "https://stackoverflow.com/users/4177094/enrico-anderlini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 47430161, "answer_count": 4, "score": -2, "last_activity_date": 1511341778, "creation_date": 1511339904, "last_edit_date": 1511340203, "question_id": 47430112, "link": "https://stackoverflow.com/questions/47430112/incorrect-multiplication-of-integers-in-c", "title": "Incorrect multiplication of integers in C", "body": "<p>A C-coded S-function in Simulink was showing incorrect behaviour and I have managed to narrow down the problem to an incorrect multiplication of integers.</p>\n\n<p>At the start of the code, I have something like:</p>\n\n<pre><code>#define NRBF       21\n#define NRBF1  NRBF+1\n</code></pre>\n\n<p>Then, in a function in the script I have:</p>\n\n<pre><code>void function_name(SimStruct *S, const int_T a)\n{\n...\n    int_T base;\n    base = a*NRBF1;\n    printf(\"%i\\t\", a);\n    printf(\"%i\\t\", NRBF1);\n    printf(\"%i\\n\", base);\n..\n}\n</code></pre>\n\n<p>Now, if <code>a=0</code>, <code>NRBF=21</code>, I have (instead of <code>base=0</code>)</p>\n\n<pre><code>0  22  1\n</code></pre>\n\n<p>If <code>a=1</code>, <code>NRBF=21</code>, I have (as expected <code>base=22</code>)</p>\n\n<pre><code>1  22  22\n</code></pre>\n\n<p>If <code>a=2</code>, <code>NRBF=21</code>, I have (instead of <code>base=44</code>)</p>\n\n<pre><code>2  22  43 \n</code></pre>\n\n<p>Now, I must say I am a bit baffled. I tried to change the line of the multiplication to </p>\n\n<pre><code>base = a* (int_T)NRBF1;\n</code></pre>\n\n<p>but it does not solve the problem.</p>\n\n<p>Any help would be greatly appreciated! Thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1511339104, "post_id": 47429855, "comment_id": 81814216, "body": "<code>strncpy(mystring, TTF_Font_name, alen-4);</code>: that doesn&#39;t nul-terminate right?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1511339118, "post_id": 47429855, "comment_id": 81814224, "body": "@EdHeal it&#39;s to be sure that the C++ compiler isn&#39;t used :)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1511339156, "post_id": 47429855, "comment_id": 81814242, "body": "<a href=\"http://en.cppreference.com/w/c/string/byte/strncpy\" rel=\"nofollow noreferrer\">The <code>strncpy</code> function</a> might not terminate the string in one case. And that happens for you."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511339211, "post_id": 47429855, "comment_id": 81814267, "body": "And then <code>strcat</code> goes <i>WTF?</i> so add <code>mystring[alen-4] = 0;</code> after your first call to <code>strncpy</code> before <code>strcat</code> (and you will want to insure <code>mystring</code> is again <i>nul-terminated</i> after <code>strncpy(PFB_File, mystring, alen);</code>"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1511339292, "post_id": 47429855, "comment_id": 81814310, "body": "you forgot the null termination of string"}, {"owner": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511340050, "post_id": 47429855, "comment_id": 81814730, "body": "@DavidC.Rankin Thanks i have fixed it by adding a null termination. Can u suggest me if this is the right way to achieve what i want or can i improve it by some other way?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1511340050, "post_id": 47429855, "comment_id": 81814731, "body": "@EdHeal What&#39;s wrong with <code>new</code>? Should we really care about keywords from any language we don&#39;t use? If this will break the code in C++, that&#39;s a nice bonus."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1511341561, "post_id": 47429855, "comment_id": 81815553, "body": "@Gerhardh - It is a keyword for C++ and other languages - so may lead to confusion. Also it is not a meaningful variable name"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1511342498, "post_id": 47429855, "comment_id": 81816122, "body": "@EdHeal There are lots of keywords in other languages which are also not relevant for C. If it forces the reader to think a few seconds, that&#39;s not a bad thing. It reminds them that it is not C++."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1511339473, "post_id": 47429915, "comment_id": 81814398, "body": "@AmmarUlHassan:  sorry conflicting edits. But semicolon added thanks."}, {"owner": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1511339567, "post_id": 47429915, "comment_id": 81814445, "body": "I tried that but same garbage value. I have a similar function in same file which almost uses same variable names. can it be the cause of it?"}, {"owner": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1511339964, "post_id": 47429915, "comment_id": 81814674, "body": "Thanks it worked. Do you think it is the right way to do what i want to achieve can i improve this?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1511340322, "post_id": 47429915, "comment_id": 81814894, "body": "there&#39;s a way to use <code>printf</code> to limit the size but the formatting must be passed as literal, so in your case it&#39;s not very convenient. Handling strings is C is very manual, close to the asm level. Of course, using C++ would improve string handling (now that you renamed <code>new</code> :)) Seriously, I suggest that you create a small set of tested functions to handle those extension replacements. Once tested &amp; robust, you can use them everywhere in your project(s), instead of copying pasting some buggy code around."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1511340470, "post_id": 47429915, "comment_id": 81814956, "body": "also, make sure you&#39;re allocating enough bytes for your dest string. It seems OK but a bit complicated (with your many +1s). If you don&#39;t want to be bothered, use a big auto buffer like <code>char buf[1000];</code>, and use <code>strdup</code> in the end."}, {"owner": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1511340731, "post_id": 47429915, "comment_id": 81815083, "body": "ahh fine. Thanks alot. Actually i was trying to avoid creating a buffer (giving a manual size) but thats an alternate. As far as +1&#39;s are concerned actually as u noticed extensions may be 3 characters or 2 like &quot;mf&quot; and &quot;pfb&quot; in that case it varies so i had to do it manually."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1511343678, "post_id": 47429915, "comment_id": 81816945, "body": "Don&#39;t skimp on buffer sizes. Sure, be reasonable, but I would a lot rather have a buffer that is 1000 bytes too long, than one that is 1-byte too short <code>:)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511344016, "post_id": 47429915, "comment_id": 81817149, "body": "@DavidC.Rankin specially on auto memory, when allocation is done with a single addition. OK maybe 1000 is too much but shaving it too close like you&#39;re on a 8-bit 1980 machine is as stupid."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1511344213, "post_id": 47429915, "comment_id": 81817293, "body": "Yes, I agree. If I was sure the max was 30 chars, 64 or 128 would be reasonable. If I wanted to be 100% (or as close as possible safe), I would use <code>PATH_MAX</code> -- which with gcc gives a whopping 8192 bytes <code>:)</code>"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1511339748, "last_edit_date": 1511339748, "creation_date": 1511339205, "answer_id": 47429915, "question_id": 47429855, "link": "https://stackoverflow.com/questions/47429855/copying-string-using-strncpy-cause-garbage-value-in-output/47429915#47429915", "title": "Copying string using strncpy cause garbage value in output", "body": "<p>about <a href=\"https://linux.die.net/man/3/strncpy\" rel=\"nofollow noreferrer\"><code>strncpy</code></a>:</p>\n\n<blockquote>\n  <p>The strncpy() function is similar (to strcpy), except that at most n bytes of src are copied. Warning: If there is no null byte among the first n bytes of src, the string placed in dest will not be null-terminated. </p>\n</blockquote>\n\n<pre><code>strncpy(mystring, TTF_Font_name, alen-4);\nstrcat( mystring, extension );\n</code></pre>\n\n<p>this has undefined behaviour because <code>TTF_Font_name</code> is longer than <code>alen-4</code> so the warning/limitation above applies, and <code>strcat</code> cannot compute the size of <code>mystring</code> properly.</p>\n\n<p>One way to fix it: just insert this between the two lines:</p>\n\n<pre><code>mystring[alen-4] = '\\0';\n</code></pre>\n"}], "owner": {"reputation": 651, "user_id": 4688722, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-9a5dyu7y-iY/AAAAAAAAAAI/AAAAAAAAAA4/pBMG_fnd0hM/photo.jpg?sz=128", "display_name": "Ammar Ul Hassan", "link": "https://stackoverflow.com/users/4688722/ammar-ul-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "closed_date": 1511339382, "accepted_answer_id": 47429915, "answer_count": 1, "score": 2, "last_activity_date": 1511340745, "creation_date": 1511338940, "last_edit_date": 1511340745, "question_id": 47429855, "link": "https://stackoverflow.com/questions/47429855/copying-string-using-strncpy-cause-garbage-value-in-output", "closed_reason": "Duplicate", "title": "Copying string using strncpy cause garbage value in output", "body": "<p>I have a file name \"test.mf\" as a character pointer. I want to change extension of this file into \"test.pfb\". I am writing a simple code for this but it is resulting in printing some garbage characters. Running same code on online C compiler results in no garbage values but running it using GCC results in garbage value. \nIf I can achieve the same thing (changing file extension of .mf file to .pfb) in a much better, fast way please suggest. I am new in this so please ignore silly mistakes. </p>\n\n<p>Code</p>\n\n<pre><code>char *Get_PFB_font_file_name(char *TTF_Font_name) \n{\n    size_t alen = strlen(TTF_Font_name);\n    alen = alen+1; \n    char mystring[alen];\n    const char* extension = \".pfb\";\n    char *PFB_File= malloc(alen+1);\n    strncpy(mystring, TTF_Font_name, alen-4);\n    strcat( mystring, extension );\n    strncpy(PFB_File, mystring, alen);\n\n    if(!PFB_File)\n    {\n        printf(\"error in get TTX conversion function\");\n        exit(1);\n    } \n    return PFB_File;\n}\n\nint main ( void )\n{\n    char *MF_Font_file_name = \"test.mf\";\n    char *PFB_Font_file_name;\n    PFB_Font_file_name = Get_PFB_font_file_name(MF_Font_file_name);\n    printf(\"PFB font file name is %s \\n\", PFB_Font_file_name); // garbage value here (test\ufffd.p)\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1511341848, "post_id": 47429825, "comment_id": 81815722, "body": "This is far from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> because most of the code is unrelated to the question and you failed to say what is the output (or the errors) in it. Anyway, a simple way would be to randomly select 5 songs having an individual duration &lt; 500, and then only keep from them the firsts for which the sum or duration is &lt; 500."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1511356328, "post_id": 47429825, "comment_id": 81825321, "body": "What do you mean with &quot;random&quot;? Should all songs have the same probability (even though smaller songs are easier to fit in)?"}], "answers": [{"tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1511370186, "creation_date": 1511370186, "answer_id": 47440258, "question_id": 47429825, "link": "https://stackoverflow.com/questions/47429825/randomly-select-5-rows-in-c/47440258#47440258", "title": "randomly select 5 rows in c", "body": "<p>Let's think aloud a bit.</p>\n\n<p>If you just need to select 5 arbitrary numbers that happen to sum up to a number below a given <em>N</em>, you can cheat and select just the 5 smallest numbers; if they sum up to a number larger than <em>N</em>,choosing any other numbers won't help, too, and you register an error.</p>\n\n<p>If you want your numbers to sum up quite close to <em>N</em> (the user asked 20 minutes, you try to offer something like 19 minutes and not 5), it becomes a knapsack problem, which is hard, but maybe various approximate ways to solve it could help.</p>\n\n<p>If you just want to choose 5 random numbers that sum up to <em>N</em>, you can keep choosing 5 numbers (songs) randomly and check. You'll have to limit the number of tries done and/or time spent, and be ready to report a failure.</p>\n\n<p>A somehow more efficient algorithm would keep a list of songs chosen so far, and the sum of their lengths <em>s</em>. It would try to add to it a random song with length \u2264 <em>N</em> - <em>s</em>. If it failed after a few attempts, it would remove the longest song from the list and repeat. It must be ready to admit failure, too, based on the total number of attempts made and/or time spent.</p>\n\n<p>I don't think a simple SQL query could efficiently solve this problem. You can approximately encode the algorithm above as a very complex SQL query, though. I'd rather encode it in Python, because local SQLite lookups are pretty fast, provided that your songs are indexed by length.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1511426624, "last_edit_date": 1511426624, "creation_date": 1511373266, "answer_id": 47441088, "question_id": 47429825, "link": "https://stackoverflow.com/questions/47429825/randomly-select-5-rows-in-c/47441088#47441088", "title": "randomly select 5 rows in c", "body": "<p>A possible solution is to only select songs for which the individual length is &lt; 500. Then you keep as much of them as you can. If you have less than 5 or if the total time is &lt; 500, then you iterate or recurse for find some songs for the unused time.</p>\n\n<pre><code>def createtimeplay(timee, tot = None, tot_time = 0):\n    if tot is None: tot= []  # at first call initialize the result list\n    # exclude previously selected songs from the search\n    qry = \"SELECT * FROM songs WHERE length &lt;= ?\"\n    if len(tot) &gt; 0:\n        qry += \" and name not in (\" + ','.join(['?'] * len(tot)) + ')'\n    qry += \" ORDER BY RANDOM() LIMIT 5 \"\n    curs = c.execute(qry, [timee] + [song[0] for song in tot])\n    cur = (curs.fetchall())\n    if len(cur) == 0: return tot   # no song were found: we can return\n    # keep songs that fit in allowed time\n    cur_time = 0\n    for song in cur:\n        if cur_time + song[1] &lt;= timee:\n            cur_time += song[1]\n            tot.append(song)\n            if (len(tot) == 5) return tot  # never more than 5 songs\n    tot_time += cur_time                           # total songs time\n    if len(tot) != 5 and cur_time != timee:        # if not all recurse\n        createtimeplay(timee - tot_time, tot, tot_time)\n    return tot\n</code></pre>\n\n<p>The trick is that we pass a list which is a modifiable object, so all recursive calls add songs to the same list.</p>\n\n<p>You can then use:</p>\n\n<pre><code>&gt;&gt;&gt; print(createtimeplay(500))\n[('Song 18', 350, 'Country', 'z'), ('Song 4', 150, 'Pop', 'x')]\n&gt;&gt;&gt; print(createtimeplay(500))\n[('Song 12', 200, 'Country', 'z'), ('Song 3', 100, 'Country', 'z'), ('Song 14', 200, 'Rap', 'y')]\n&gt;&gt;&gt; print(createtimeplay(500))\n[('Song 5', 300, 'Rap', 'y'), ('Song 7', 200, 'Pop', 'x')]\n&gt;&gt;&gt;\n</code></pre>\n\n<hr>\n\n<p>But previous solution is very inefficient: it requires more than one query, when each query is a full table scan because of the <em>order by random()</em>, and uses recursion when it could easily be avoided. It would be both simpler and more efficient to only do a full table scan at sqlite level, shuffle the result in sqlite or Python, and then just scan once the full randomized list of songs, keeping a maximum number of 5  with a constraint of the total length.</p>\n\n<p>Code is now much simpler:</p>\n\n<pre><code>def createtimeplay(tim, n, con):\n    songs = c.execute(\"\"\"SELECT name, length, genre, artist\n        FROM songs\n        WHERE length &lt; ? ORDER BY RANDOM()\"\"\", (tim,)).fetchall()\n    result = []\n    tot = 0\n    for song in songs:\n        if song[1] &lt;= tim:\n            tim -= song[1]\n            result.append(song)\n            if len(result) == n or tim == 0: break\n    return result\n</code></pre>\n\n<p>In this code, I choosed to pass the maximum number and a cursor or a connection to the sqlite database as parameters.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8987338"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511458019, "creation_date": 1511338828, "last_edit_date": 1511458019, "question_id": 47429825, "link": "https://stackoverflow.com/questions/47429825/randomly-select-5-rows-in-c", "title": "randomly select 5 rows in c", "body": "<p>I want to be able to randomly select 5 rows in C</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c", "floating-point", "significant-digits"], "comments": [{"owner": {"reputation": 258, "user_id": 8083690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BrIvk.png?s=128&g=1", "display_name": "Sam Pagenkopf", "link": "https://stackoverflow.com/users/8083690/sam-pagenkopf"}, "edited": false, "score": 1, "creation_date": 1511338684, "post_id": 47429593, "comment_id": 81813989, "body": "In order to get all 8 of those digits of precision to stay consistent, only the exponent can change. So, 16,777,217 * 2^(x) is going to be represented correctly, but 16,777.217 is likely to lose precision."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511340046, "post_id": 47429593, "comment_id": 81814726, "body": "I don&#39;t understand the withdrawal of the C tag. From what I can tell, more floating point experts prowl around on the C tag than the C++ one."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511340221, "post_id": 47429593, "comment_id": 81814830, "body": "@FelixPalmen: I&#39;ve done what I think approaches a major edit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511340309, "post_id": 47429593, "comment_id": 81814885, "body": "@Bathsheba hmm alright. I still don&#39;t like the implicit assumption that the explanation for both languages is the same, but it is in this special case, so -- fine :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511340395, "post_id": 47429593, "comment_id": 81814924, "body": "@FelixPalmen: Yes I see your point. You could justifiably tag with Java and C# too (if they have the constants defined). It might even be better that way, since those languages mandate IEEE754. In that respect my answer is merely partial."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1511340762, "post_id": 47429593, "comment_id": 81815104, "body": "If the application of the numbers addresses &quot;fix point&quot; numbers, an alternative approach could be just to use <code>int</code> and simply format the output appropriately. Hence, no floating point issues... (Sorry, it&#39;s just an idea.)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1511382931, "post_id": 47429593, "comment_id": 81841954, "body": "@Scheff: That&#39;s no bad idea at all, a 64 bit int in particular is a pretty good way of representing money for example, even if you reserve the final 3 digits for the &quot;pence&quot; (you need 3 to support Tunisian Dinar for example. Bitcoin messes everything up)."}], "answers": [{"comments": [{"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1511339715, "post_id": 47429659, "comment_id": 81814526, "body": "So ... the TL;DR is that <code>digits10</code>is <i>not</i> about digits, but about <i>significant</i> digits over all exponents??"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1511339765, "post_id": 47429659, "comment_id": 81814561, "body": "I&#39;d say it&#39;s more to do with <i>digits</i> being in your context <i>denary digits</i>, but a <code>float</code> is about <i>binary digits</i>. E.g. <code>n.5</code> for integer <code>n</code> is exactly representable to the 23rd power of 2, and so on."}, {"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1511339906, "post_id": 47429659, "comment_id": 81814641, "body": "<code>digits10</code> <i>is</i> about denary digits. Hence the <code>10</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511340622, "post_id": 47429659, "comment_id": 81815023, "body": "Any number can be written such that all digits in the notation are significant."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511381368, "post_id": 47429659, "comment_id": 81841207, "body": "@chux: Ha. Funny I could have swore I checked properly. I&#39;ll find a decent one..."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 10, "last_activity_date": 1511382712, "last_edit_date": 1511382712, "creation_date": 1511338217, "answer_id": 47429659, "question_id": 47429593, "link": "https://stackoverflow.com/questions/47429593/c-digits10-is-6-for-ieee-float-but-the-first-non-representable-integer-alre/47429659#47429659", "title": "C++ `digits10` is 6 for IEEE float, but the first non-representable integer already has 8 digits?", "body": "<p>(Restricting this answer to IEEE754 <code>float</code>).</p>\n\n<p><code>8.589973e9</code> and <code>8.589974e9</code> both map to <code>8589973504</code>. That's a counter-example for an assertion that the 7th significant figure is preserved.</p>\n\n<p>Since no such counter-example exists on the 6th significant figure, <code>std::numeric_limits&lt;float&gt;::digits10</code> and <code>FLT_DIG</code> are 6.</p>\n\n<p>Indeed integers can be represented exactly up to the 24<sup>th</sup> power of 2. (<code>16,777,216</code> and <code>16,777,217</code> both map to <code>16,777,216</code>). That's because a <code>float</code> has a 24 bit <em>significand</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1511341960, "post_id": 47430632, "comment_id": 81815797, "body": "Why is this an answer?"}, {"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1511342858, "post_id": 47430632, "comment_id": 81816387, "body": "@PasserBy - because if I personally were to have arrived here via a google search with roughly the understanding I had <i>before</i> asking the question, I would <i>not</i> have been able to relate my own question to the answer given by Bathsheba. Hence: Shorter self answer, that I personally think is more to the point."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511382776, "post_id": 47430632, "comment_id": 81841893, "body": "@MartinBa: My counter example was incorrect; have tested yours and pinched it. Have an upvote so I maintain a clear conscience!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511382790, "post_id": 47430632, "comment_id": 81841899, "body": "@chux: I agree with you. What was I thinking?"}], "tags": [], "owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "is_accepted": true, "score": 3, "last_activity_date": 1511421565, "last_edit_date": 1511421565, "creation_date": 1511341724, "answer_id": 47430632, "question_id": 47429593, "link": "https://stackoverflow.com/questions/47429593/c-digits10-is-6-for-ieee-float-but-the-first-non-representable-integer-alre/47430632#47430632", "title": "C++ `digits10` is 6 for IEEE float, but the first non-representable integer already has 8 digits?", "body": "<p>As the other answer and comment establishes, <code>digits10</code> covers all \"exponent ranges\", that is it has to hold for <code>1234567</code> as well as for <code>1.234567</code> and <code>12345670000</code> -- and this only holds for <strong>6</strong> digits!</p>\n\n<p>Counter example for 7 digits:</p>\n\n<ul>\n<li><code>8.589,973 e9</code> vs. <code>8.589,974 e9</code> (from cppref example)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1511445192, "last_edit_date": 1511445192, "creation_date": 1511388763, "answer_id": 47444669, "question_id": 47429593, "link": "https://stackoverflow.com/questions/47429593/c-digits10-is-6-for-ieee-float-but-the-first-non-representable-integer-alre/47444669#47444669", "title": "C++ `digits10` is 6 for IEEE float, but the first non-representable integer already has 8 digits?", "body": "<p>Sometimes it is easy enough to look for counter examples.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n  int p6 = 1e6;\n  int p7 = 1e7;\n  for (int expo = 0; expo &lt; 29; expo++) {\n    for (int frac = p6; frac &lt; p7; frac++) {\n      char s[30];\n      sprintf(s, \"%d.%06de%+03d\", frac / p6, frac % p6, expo);\n      float f = atof(s);\n      char t[30];\n      sprintf(t, \"%.6e\", f);\n      if (strcmp(s, t)) {\n        printf(\"&lt;%s&gt; %.10e &lt;%s&gt;\\n\", s, f, t);\n        break;\n      }\n    }\n  }\n  puts(\"Done\");\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;8.589973e+09&gt; 8.5899735040e+09 &lt;8.589974e+09&gt;\n&lt;8.796103e+12&gt; 8.7961035080e+12 &lt;8.796104e+12&gt;\n&lt;9.007203e+15&gt; 9.0072024760e+15 &lt;9.007202e+15&gt;\n&lt;9.223377e+18&gt; 9.2233775344e+18 &lt;9.223378e+18&gt;\n&lt;9.444738e+21&gt; 9.4447374693e+21 &lt;9.444737e+21&gt;\n&lt;9.671414e+24&gt; 9.6714134744e+24 &lt;9.671413e+24&gt;\n&lt;9.903522e+27&gt; 9.9035214949e+27 &lt;9.903521e+27&gt;\n&lt;1.000000e+28&gt; 9.9999994421e+27 &lt;9.999999e+27&gt;  This is an interesting one\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1511405376, "last_edit_date": 1511405376, "creation_date": 1511397208, "answer_id": 47445869, "question_id": 47429593, "link": "https://stackoverflow.com/questions/47429593/c-digits10-is-6-for-ieee-float-but-the-first-non-representable-integer-alre/47445869#47445869", "title": "C++ `digits10` is 6 for IEEE float, but the first non-representable integer already has 8 digits?", "body": "<p>Another point of view:</p>\n\n<p>Consider between each pair of powers-of-2, a <code>float</code> like  <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">IEEE binary</a> encodes 2<sup>23</sup> values distributed linearly.</p>\n\n<hr>\n\n<p>Example: Between 2<sup>0</sup> and 2<sup>1</sup> or 1.0 and 2.0, </p>\n\n<p>The difference between <code>float</code> values is 1.0/2<sup>23</sup> or 10.192e-06.  </p>\n\n<p>Written in text form \"1.dddddd\", a 7 digit number, the numbers have a difference of 1.000e-06.</p>\n\n<p>So for every step of a decimal text number, there are about 10.2 <code>float</code>.<br>\nNo problems encoding these 7 digit numbers.<br>\nIn this range, no problems encoding 8 digits either.</p>\n\n<hr>\n\n<p>Example: Between 2<sup>23</sup> and 2<sup>24</sup> or 8,388,608.0 and 16,777,216.0. </p>\n\n<p>The difference between <code>float</code> values is 2<sup>23</sup>/2<sup>23</sup> or 1.0.  </p>\n\n<p>The numbers near the low end written in text form \"8or9.dddddd*10<sup>6</sup>\", a 7 significant digit number, have a difference of 1.0.</p>\n\n<p>No problems encoding these 7 digit numbers.  </p>\n\n<hr>\n\n<p>Example: Between 2<sup>33</sup> and 2<sup>34</sup> or 8,589,934,592.0 and 17,179,869,184.0, </p>\n\n<p>The difference between <code>float</code> values is 2<sup>33</sup>/2<sup>23</sup> or 1,024.0.  </p>\n\n<p>Numbers near the low end written in text form \"8or9.dddddd*10<sup>9</sup>\", a 7 significant digit number, have a difference of 1,000.0.</p>\n\n<p>Now we have a problem.  From 8,589,934,592.0, then next 1024 numbers in text form only have 1000 different <code>float</code> encoding.</p>\n\n<hr>\n\n<p>7 digits in the form d.dddddd * 10<sup>expo</sup> is too many combinations to uniquely encode using <code>float</code>.</p>\n"}], "owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 47430632, "answer_count": 4, "score": 4, "last_activity_date": 1511445192, "creation_date": 1511337958, "last_edit_date": 1511340188, "question_id": 47429593, "link": "https://stackoverflow.com/questions/47429593/c-digits10-is-6-for-ieee-float-but-the-first-non-representable-integer-alre", "title": "C++ `digits10` is 6 for IEEE float, but the first non-representable integer already has 8 digits?", "body": "<p>C++'s <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/digits10\" rel=\"nofollow noreferrer\"><code>std::numeric_limits&lt;float&gt;::digits10</code></a>, is described on cppref as such:</p>\n\n<blockquote>\n  <p>The value of <code>std::numeric_limits&lt;T&gt;::digits10</code> is the number of base-10 digits that can be represented by the type T without change, that is, any number with this many decimal digits can be converted to a value of type T and back to decimal form, without change due to rounding or overflow.</p>\n</blockquote>\n\n<p>A similar description exists for the C cousin <a href=\"http://en.cppreference.com/w/c/types/limits\" rel=\"nofollow noreferrer\">FLT_DIG</a>.</p>\n\n<p>The value given is:</p>\n\n<blockquote>\n<pre><code>float     FLT_DIG /* 6 for IEEE float */\n</code></pre>\n</blockquote>\n\n<p><em>However</em>, it is <a href=\"https://stackoverflow.com/questions/3793838/which-is-the-first-integer-that-an-ieee-754-float-is-incapable-of-representing-e\">shown here on S.O.</a> that all integers up to <code>16,777,216</code> (2<sup>24</sup>) are exactly representable in a 32 bit IEEE float type. And if I can count, that number has <strong>8</strong> digits, so the value for <code>digits10</code> should actually be <strong>7</strong>, now shouldn't it?</p>\n\n<p>Rather obviously, I misunderstand something about <code>digits10</code> here, so what does this <em>actually</em> tell me?</p>\n\n<hr>\n\n<p>Practical applicability:</p>\n\n<p>I was asked if we could store all numbers from <code>0.00</code> - <code>86,400.00</code> exactly in an IEEE 32 bit float. </p>\n\n<p>Now, I'm very confident that we could store all numbers from <code>0</code> - <code>8,640,000</code> in an IEEE 32 bit float, but does this hold for the same \"integer\" range shifted by 2 digits to the left?</p>\n"}, {"tags": ["c", "linux", "shell", "polling"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511337567, "post_id": 47429409, "comment_id": 81813351, "body": "I suggest you <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">read a <code>poll</code> manual page</a>, and pay some attention what it can return on an error, and think about if that is &quot;true&quot; or &quot;false&quot;."}, {"owner": {"reputation": 864, "user_id": 4624725, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-KB3KYmNbWw4/AAAAAAAAAAI/AAAAAAAAEpU/BgqrUE_Kev8/photo.jpg?sz=128", "display_name": "PoVa", "link": "https://stackoverflow.com/users/4624725/pova"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511337715, "post_id": 47429409, "comment_id": 81813457, "body": "@Someprogrammerdude sorry, &amp;&amp; was a typo."}, {"owner": {"reputation": 864, "user_id": 4624725, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-KB3KYmNbWw4/AAAAAAAAAAI/AAAAAAAAEpU/BgqrUE_Kev8/photo.jpg?sz=128", "display_name": "PoVa", "link": "https://stackoverflow.com/users/4624725/pova"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511337975, "post_id": 47429409, "comment_id": 81813611, "body": "@Someprogrammerdude alright, so so if I&#39;m not mistake, I should be using <code>if (poll(&amp;pfd, 1, timeout) &gt; 0)</code> instead of <code>if (poll(&amp;pfd, 1, timeout))</code>, but now the problem persists with <code>.&#47;a.out &lt; input</code>, but not with <code>cat input | a.out</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511338082, "post_id": 47429409, "comment_id": 81813684, "body": "<i>the poll returns instantly (does not wait for the timeout to run out)</i> as it should. Why would you expect to see any other behaviour?"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 8, "last_activity_date": 1511338212, "creation_date": 1511338212, "answer_id": 47429656, "question_id": 47429409, "link": "https://stackoverflow.com/questions/47429409/poll-works-on-stdin-when-entering-manually-but-not-when-input-is-piped-and-not/47429656#47429656", "title": "Poll works on stdin when entering manually, but not when input is piped and not redirected", "body": "<p>The problem is that <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"noreferrer\"><code>poll</code></a> (just like <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"noreferrer\"><code>select</code></a>) only tell you that a call to e.g. <a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"noreferrer\"><code>read</code></a> will not block. It doesn't tell you if there's actually anything to read.</p>\n\n<p>And if you read <a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"noreferrer\">the <code>read</code> manual page</a> you will see that when it returns <code>0</code> it means <em>end of file</em> (or connection closed for sockets).</p>\n\n<p>What <code>poll</code> is telling you is that <code>read</code> can be called without blocking, and what <code>read</code> tells you by returning <code>0</code> is that there is nothing more to read.</p>\n\n<p>You will get a similar \"false positive\" by pressing the end-of-file shortcut key (by default <kbd>Ctrl-D</kbd> on POSIX systems like Linux) for the non-piped or -redirected input example.</p>\n"}], "owner": {"reputation": 864, "user_id": 4624725, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-KB3KYmNbWw4/AAAAAAAAAAI/AAAAAAAAEpU/BgqrUE_Kev8/photo.jpg?sz=128", "display_name": "PoVa", "link": "https://stackoverflow.com/users/4624725/pova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 47429656, "answer_count": 1, "score": 2, "last_activity_date": 1511338212, "creation_date": 1511337298, "last_edit_date": 1511337691, "question_id": 47429409, "link": "https://stackoverflow.com/questions/47429409/poll-works-on-stdin-when-entering-manually-but-not-when-input-is-piped-and-not", "title": "Poll works on stdin when entering manually, but not when input is piped and not redirected", "body": "<p>Consider this C program: </p>\n\n<pre><code>#include &lt;poll.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\n#define TIMEOUT 500 // 0.5 s\n#define BUF_SIZE 512\n\nint fd_can_read(int fd, int timeout) {\n    struct pollfd pfd;\n\n    pfd.fd = fd;\n    pfd.events = POLLIN;\n\n    if (poll(&amp;pfd, 1, timeout)) {\n        if (pfd.revents &amp; POLLIN) {\n            return 1;\n        }\n    }\n\n    return 0;\n}\n\nint main(int argv, char **argc) {\n    int fd;\n    size_t bytes_read;\n    char buffer[BUF_SIZE];\n\n    fd = STDIN_FILENO;\n\n    while (1) {\n        if (fd_can_read(fd, TIMEOUT)) {\n            printf(\"Can read\\n\");\n            bytes_read = read(fd, buffer, sizeof(buffer));\n\n            printf(\"Bytes read: %zu\\n\", bytes_read);\n        }\n        else {\n            printf(\"Can't read\\n\");\n        }\n    }\n}\n</code></pre>\n\n<p>It tries to poll given file descriptor (which is the fd of stdin in this case), and tries to read from it when it's available for reading. Here's an example input file called \"input\":</p>\n\n<pre><code>stuff to be read\n</code></pre>\n\n<p>So let's say I run the program, give a few inputs and close it:</p>\n\n<pre><code>./a.out\ntest\nCan read\nBytes read: 5\nCan't read\nCan't read\n...\n</code></pre>\n\n<p>So lets try reading the input from a file by piping/redirecting the contents of it to <code>stdin</code> of my program:</p>\n\n<pre><code>cat input | ./a.out # Or ./a.out &lt; input\nBytes read: 0\nCan read\nBytes read: 0\nCan read\n...\n</code></pre>\n\n<p>Now, the poll returns instantly (does not wait for the timeout to run out), and gives the results I was not expecting. I do know <code>poll()</code> does not work on files correctly, but if I'm not mistaken, I'm not reading from a file.</p>\n"}, {"tags": ["c", "sanitization"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1511337334, "post_id": 47429340, "comment_id": 81813203, "body": "Have you tried <i>searching</i> for the term? What did you find then? What problems do you have with what you found?"}, {"owner": {"reputation": 638, "user_id": 7531823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1597768493573895/picture?type=large", "display_name": "Ari Sweedler", "link": "https://stackoverflow.com/users/7531823/ari-sweedler"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511385003, "post_id": 47429340, "comment_id": 81842937, "body": "@Someprogrammerdude Yeah, I tried searching, I try to be respectful of the community here. On google, I found results related to HTML and JavaScript, but nothing about C that I could understand. I&#39;m familiar with Java, so I just assumed that stuff like referencing out of bounds memory would cause my program to crash. I didn&#39;t realize how much I was taking for granted. That you can compile stuff like a[5] and 5[a] in C, or attacks by <code>stack smashing</code> or <code>row hammering</code> are all news to me. There&#39;re a lot of fundamentals I realize I&#39;m missing by starting to learn the answer to my question"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511386918, "post_id": 47429340, "comment_id": 81843811, "body": "Don&#39;t just search for &quot;sanitazion&quot; but <i>&quot;address sanitazion&quot;</i> specificallu, probably with a <i>C</i> added."}, {"owner": {"reputation": 638, "user_id": 7531823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1597768493573895/picture?type=large", "display_name": "Ari Sweedler", "link": "https://stackoverflow.com/users/7531823/ari-sweedler"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511472999, "post_id": 47429340, "comment_id": 81881827, "body": "@Someprogrammerdude Googling <code>address sanitization in C</code> didn&#39;t yield any resources I understood. In fact, the two links that people responded to this question with were the first 2 things I saw when googling. But I didn&#39;t get why we needed those tools, I didn&#39;t get the theory behind them, until I found a link talking about how potentially harmful illegal memory accesses are. I&#39;ve never seen their security downside, because as a java user, there simply IS no security downside, your program just stops."}, {"owner": {"reputation": 638, "user_id": 7531823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1597768493573895/picture?type=large", "display_name": "Ari Sweedler", "link": "https://stackoverflow.com/users/7531823/ari-sweedler"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511473212, "post_id": 47429340, "comment_id": 81881893, "body": "@Someprogrammerdude I think this is funny... but if I google <code>address sanitization C</code>, a link to this question is the first link that pops up. I don&#39;t think that I knew enough about address sanitization to ask a proper question when I asked this, though, so I got shot down. (I suppose what I should have asked is &quot;Why do we need to use address sanitization in C&quot;, which has an easy answer: &quot;they can cause vulnerabilities&quot;."}, {"owner": {"reputation": 638, "user_id": 7531823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1597768493573895/picture?type=large", "display_name": "Ari Sweedler", "link": "https://stackoverflow.com/users/7531823/ari-sweedler"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511555561, "post_id": 47429340, "comment_id": 81914134, "body": "@Someprogrammerdude Have you tried searching for the term? If you&#39;ve found any good resources that I&#39;ve missed, I&#39;d be interested."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1511557047, "post_id": 47429340, "comment_id": 81914607, "body": "The very first link I got was <a href=\"https://en.wikipedia.org/wiki/AddressSanitizer\" rel=\"nofollow noreferrer\">to the Wikipedia article on AddressSanitizer</a>. It should be a pretty good start IMO."}], "answers": [{"tags": [], "owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "is_accepted": true, "score": 7, "last_activity_date": 1511337233, "creation_date": 1511337233, "answer_id": 47429393, "question_id": 47429340, "link": "https://stackoverflow.com/questions/47429340/what-is-address-sanitization-in-c/47429393#47429393", "title": "What is address sanitization in C?", "body": "<p>It's a compiler feature (at least in Clang) that tries to detect memory addresses that are invalid, such as those that are out-of-bounds, or that are still being used after they are freed.</p>\n\n<p>You can enable it with the <code>-fsanitize=address</code> compiler flag. See <a href=\"https://clang.llvm.org/docs/AddressSanitizer.html\" rel=\"noreferrer\">here</a> for more info.</p>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 8083690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BrIvk.png?s=128&g=1", "display_name": "Sam Pagenkopf", "link": "https://stackoverflow.com/users/8083690/sam-pagenkopf"}, "is_accepted": false, "score": 1, "last_activity_date": 1511337306, "creation_date": 1511337306, "answer_id": 47429412, "question_id": 47429340, "link": "https://stackoverflow.com/questions/47429340/what-is-address-sanitization-in-c/47429412#47429412", "title": "What is address sanitization in C?", "body": "<p>A quick google search led me here:\n<a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizer\" rel=\"nofollow noreferrer\">https://github.com/google/sanitizers/wiki/AddressSanitizer</a></p>\n\n<p>If this is what is meant by sanitization, it's just a set of compile-time address safety checks.</p>\n"}], "owner": {"reputation": 638, "user_id": 7531823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1597768493573895/picture?type=large", "display_name": "Ari Sweedler", "link": "https://stackoverflow.com/users/7531823/ari-sweedler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "accepted_answer_id": 47429393, "answer_count": 2, "score": 0, "last_activity_date": 1511337306, "creation_date": 1511337000, "question_id": 47429340, "link": "https://stackoverflow.com/questions/47429340/what-is-address-sanitization-in-c", "title": "What is address sanitization in C?", "body": "<p>Sanitization keeps code clean, removing the \"dirty\" injections. In HTML and JavaScript, this is accomplished by removing unsafe tags or escaping user input.</p>\n\n<p>What does \"sanitization\" mean to C?</p>\n"}, {"tags": ["c", "linux", "bash", "shell"], "comments": [{"owner": {"reputation": 258, "user_id": 8083690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BrIvk.png?s=128&g=1", "display_name": "Sam Pagenkopf", "link": "https://stackoverflow.com/users/8083690/sam-pagenkopf"}, "edited": false, "score": 0, "creation_date": 1511337462, "post_id": 47429135, "comment_id": 81813274, "body": "I&#39;d personally just use <code>cat input | .&#47;target</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 258, "user_id": 8083690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BrIvk.png?s=128&g=1", "display_name": "Sam Pagenkopf", "link": "https://stackoverflow.com/users/8083690/sam-pagenkopf"}, "edited": false, "score": 3, "creation_date": 1511337620, "post_id": 47429135, "comment_id": 81813395, "body": "You indulge in <a href=\"https://stackoverflow.com/questions/11710552/useless-use-of-cat\">UUoC \u2014 Useless use of <code>cat</code></a>, then, @SamPagenkopf:"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1511337567, "creation_date": 1511337567, "answer_id": 47429490, "question_id": 47429135, "link": "https://stackoverflow.com/questions/47429135/execute-c-language-input-file-on-linux/47429490#47429490", "title": "Execute C language input file on linux", "body": "<p>Two of the three notations are peculiar to Bash; all three are shell notations.  The programs that are run need to process the data in quite different ways.</p>\n\n<ol>\n<li><p>(<strong><code>./target &lt;input</code></strong> \u2014 <a href=\"https://www.gnu.org/software/bash/manual/bash.html#Redirecting-Input\" rel=\"nofollow noreferrer\">input redirection</a>): the target program needs to read standard input to get the information.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int c;\n    while ((c = getchar()) != EOF)\n        putchar(c);\n    return 0;\n}\n</code></pre></li>\n<li><p>(<strong><code>./target &lt;$(cat input)</code></strong> \u2014 <a href=\"https://www.gnu.org/software/bash/manual/bash.html#Process-Substitution\" rel=\"nofollow noreferrer\">process substitution</a>): the target program needs to open the file name specified in a command-line argument to get the information.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: %s file\\n\", argv[0]);\n        return 1;\n    }\n    FILE *fp = fopen(argv[1], \"r\");\n    if (fp == 0)\n    {\n        fprintf(stderr, \"%s: failed to open file '%s' for reading\\n\",\n                argv[0], argv[1]);\n        return 1;\n    }\n\n    int c;\n    while ((c = getc(fp)) != EOF)\n        putchar(c);\n\n    fclose(fp);\n    return 0;\n}\n</code></pre></li>\n<li><p>(<strong><code>./target $(&lt;input)</code></strong> \u2014 <a href=\"https://www.gnu.org/software/bash/manual/bash.html#Command-Substitution\" rel=\"nofollow noreferrer\">command substitution</a>): the target program gets the contents of the file split into words as arguments to the program, one word per argument.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    int count = 0;\n    for (int i = 0; i &lt; argc; i++)\n    {\n       count += printf(\" %s\", argv[i]);\n       if (count &gt; 70)\n           putchar('\\n'), count = 0;\n    }\n    return 0;\n}\n</code></pre></li>\n</ol>\n\n<p>The processing needed is quite different, therefore.</p>\n"}], "owner": {"reputation": 49, "user_id": 8460738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a466890b9fd56b25c9461b8aa2edede?s=128&d=identicon&r=PG&f=1", "display_name": "Sword man", "link": "https://stackoverflow.com/users/8460738/sword-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511337567, "creation_date": 1511336185, "last_edit_date": 1511337442, "question_id": 47429135, "link": "https://stackoverflow.com/questions/47429135/execute-c-language-input-file-on-linux", "title": "Execute C language input file on linux", "body": "<p>I don't understand how different between</p>\n\n<p>a.  <code>./target &lt;input</code><br>\n  b. <code>./target &lt;$(cat input)</code><br>\n  c. <code>./target $(&lt;input)</code></p>\n\n<p><code>./target</code> is a C program and input is a file or payload  </p>\n\n<p>I want to know that how are they different and are there any more techniques or method?</p>\n"}, {"tags": ["c", "linux", "gtk"], "answers": [{"comments": [{"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1511346597, "post_id": 47430635, "comment_id": 81818875, "body": "@Sagar, notice that length and width in GtkGrid <code>attach</code> isn&#39;t pixel wise."}], "tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": false, "score": 1, "last_activity_date": 1511341737, "creation_date": 1511341737, "answer_id": 47430635, "question_id": 47428911, "link": "https://stackoverflow.com/questions/47428911/ok-button-and-back-button-showing-vertically-one-on-top-and-other-at-bottom-nee/47430635#47430635", "title": "ok button and back button showing vertically one on top and other at bottom ;need side by side layout", "body": "<p><code>GTK_ORIENTATION_VERTICAL</code> for a <code>GtkBox</code> means the widgets you put in it will be laid out vertically (surprising, isn't it?). If you want your buttons laid out horizontally, just add another <code>GtkBox</code> with a <code>GTK_ORIENTATION_HORIZONTAL</code> layout, and put that box inside your <code>vbox</code>.</p>\n\n<p>However, packing boxes is more a GTK 2 thing. In late GTK+ 2 versions, <code>GtkTable</code> was prefered for layout. In GTK+ 3, use <code>GtkGrid</code> instead.</p>\n"}], "owner": {"reputation": 91, "user_id": 8377865, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dab7faf0adf5a7eb7f1c94d40afc61fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Mohantu", "link": "https://stackoverflow.com/users/8377865/sagar-mohantu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511341737, "creation_date": 1511335245, "question_id": 47428911, "link": "https://stackoverflow.com/questions/47428911/ok-button-and-back-button-showing-vertically-one-on-top-and-other-at-bottom-nee", "title": "ok button and back button showing vertically one on top and other at bottom ;need side by side layout", "body": "<p>In my code OKButton and backButton are shown arranged vertically-OKButton on top, back on bottom.I want them to be arranged horizontally. I want them to be in the same row- back on left and OK on right.\nCurrently, I have a tab window of 5 tabs. In each tab there is a liststore treeview. On clicking register item of liststore new scrolledwindow is created which contains another lisstore with back and ok buttons. Clicking back goes back to previous menu and clicking ok fires row ctivated signal which has an empty callback function.I appreciate you suggestions\nPasted my code below-</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;glib.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/hci.h&gt;\n#include &lt;bluetooth/hci_lib.h&gt;\nGtkWidget *scrolledwindow;\nstruct param\n{\n    GtkWidget* backbutton;\n    GtkWidget* Okbutton;\n    GtkWidget* scrolledwindow;\n    GtkWidget*newChild;\n    GtkWidget*oldChild;\n};\nGtkWidget * init_tree();\nGtkWidget * init_tree2();\nstatic void destroy(GtkWidget *widget, gpointer data)\n{\n  gtk_main_quit();\n}\n\nstatic void Back (GtkButton *button, gpointer   user_data)\n{\n      struct param* parameters = (struct param*)user_data;\n      gtk_widget_hide(GTK_WIDGET(parameters-&gt;scrolledwindow));\n      gtk_container_remove(GTK_CONTAINER(parameters-&gt;scrolledwindow), GTK_WIDGET(parameters-&gt;newChild));\n      gtk_container_add(GTK_CONTAINER(parameters-&gt;scrolledwindow), parameters-&gt;oldChild);\n      gtk_widget_hide (GTK_WIDGET(parameters-&gt;backbutton));\n      gtk_widget_show_all (GTK_WIDGET(parameters-&gt;scrolledwindow));\n}\n\nstatic void Ok (GtkButton *button, gpointer   user_data)\n{\n\n}\n\nstatic void replace_tab(GtkTreeView *tree_view, GtkTreePath *path, GtkTreeViewColumn *column, gpointer user_data)\n{\n      struct param* parameters = (struct param*)user_data;\n      gchar *string;\n      GtkTreeIter iter;\n      GtkTreeModel *model = gtk_tree_view_get_model (tree_view);\n      gtk_tree_model_get_iter(model, &amp;iter, path);\n      gtk_tree_model_get (model, &amp;iter, 0, &amp;string, -1);\n      g_print (\"activated: %s\\n\", string);\n      if(!strcmp(string,\"Register\"))\n      {\n          GtkWidget* liststore = GTK_WIDGET(gtk_tree_view_get_model(tree_view));\n          gtk_widget_hide(GTK_WIDGET(parameters-&gt;scrolledwindow));\n          gtk_container_remove(GTK_CONTAINER(parameters-&gt;scrolledwindow), GTK_WIDGET(tree_view));\n          gtk_container_add(GTK_CONTAINER(parameters-&gt;scrolledwindow), parameters-&gt;newChild);\n          gtk_widget_show (GTK_WIDGET(parameters-&gt;backbutton));\n          gtk_widget_show (GTK_WIDGET(parameters-&gt;Okbutton));\n          gtk_widget_show_all (GTK_WIDGET(parameters-&gt;scrolledwindow));\n\n      }\n      else if(!strcmp(string,\"New Configuration\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Edit Configuration\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Delete Configuration\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Add location to turn-off place list\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Disable Turn-off Places\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Disable Distance\"))\n      {\n\n      }\n\n      else if(!strcmp(string,\"Enable Distance\"))\n      {\n\n      }\n      else if(!strcmp(string,\"Factory Reset\"))\n      {\n\n      }\n}\n\nGtkWidget * init_tree()\n{\n\n    GtkListStore *liststore = gtk_list_store_new(1, G_TYPE_STRING);\n    GtkTreeIter treeiter;\n\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Register\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"New Configuration\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Edit Configuration\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Delete Configuration\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Add location to turn-off place list\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Disable Turn-off Places\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Enable Turn-off Places\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Disable Distance\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Enable Distance\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Factory Reset\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    GtkWidget *treeview = gtk_tree_view_new_with_model(GTK_TREE_MODEL(liststore));\n\n    GtkCellRenderer *cellrenderertext = gtk_cell_renderer_text_new();\n\n    GtkTreeViewColumn *treeviewcolumn = gtk_tree_view_column_new_with_attributes(\"Settings\",\n                                                                                 cellrenderertext,\n                                                                                 \"text\", 0,\n                                                                                 NULL);\n    gtk_tree_view_append_column(GTK_TREE_VIEW(treeview), treeviewcolumn);\n\n    return treeview;\n}\n\nGtkWidget * init_tree2()\n{\n\n    GtkListStore *liststore = gtk_list_store_new(1, G_TYPE_STRING);\n    GtkTreeIter treeiter;\n\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"a\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"b\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"c\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"d\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"e\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"f\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Aptosid\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"OpenSuSE\", -1);\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Linux Mint\", -1);\n\n\n    gtk_list_store_append(liststore, &amp;treeiter);\n    gtk_list_store_set(liststore, &amp;treeiter, 0, \"Arch Linux\", -1);\n\n    GtkWidget *treeview = gtk_tree_view_new_with_model(GTK_TREE_MODEL(liststore));\n\n    GtkCellRenderer *cellrenderertext = gtk_cell_renderer_text_new();\n\n    GtkTreeViewColumn *treeviewcolumn = gtk_tree_view_column_new_with_attributes(\"Distributions\",\n                                                                                 cellrenderertext,\n                                                                                 \"text\", 0,\n                                                                                 NULL);\n    gtk_tree_view_append_column(GTK_TREE_VIEW(treeview), treeviewcolumn);\n\n    return treeview;\n}\n\nint main(int argc, char *argv[])\n{\n  gtk_init(&amp;argc, &amp;argv);\n\n  GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n  gtk_window_set_default_size(GTK_WINDOW(window), 200, 200);\n  g_signal_connect(window, \"destroy\", G_CALLBACK(destroy), NULL);\n\n  GtkWidget *notebook = gtk_notebook_new();\n  gtk_container_add(GTK_CONTAINER(window), notebook);\n\n\n  int count;\n  gchar *text;\n\n  for (count = 1; count &lt;= 5; count++)\n    {\n      text = g_strdup_printf(\"Page %d\", count);\n      GtkWidget *label = gtk_label_new(text);\n\n      GtkWidget *vbox = gtk_box_new(GTK_ORIENTATION_VERTICAL, 5);\n      GtkWidget *scrolledwindow = gtk_scrolled_window_new(NULL, NULL);\n\n      GtkWidget *backbutton = gtk_button_new_with_label (\"Back\");\n\n      gtk_widget_set_no_show_all (backbutton, TRUE);\n\n      GtkWidget *Okbutton = gtk_button_new_with_label (\"Ok\");\n      gtk_widget_set_no_show_all (Okbutton, TRUE);\n\n      gtk_box_pack_start (GTK_BOX(vbox), scrolledwindow, TRUE, TRUE, 0);\n      gtk_box_pack_end (GTK_BOX(vbox), backbutton, FALSE, FALSE, 0);\n      gtk_box_pack_end (GTK_BOX(vbox), Okbutton, FALSE, FALSE, 0);\n\n\n      GtkWidget* treeview = init_tree();\n      GtkWidget* treeview2 = init_tree2();\n      struct param* parameters = malloc(sizeof(struct param));\n      parameters-&gt;backbutton = backbutton;\n      parameters-&gt;Okbutton = Okbutton;\n      parameters-&gt;scrolledwindow = scrolledwindow;\n      parameters-&gt;oldChild= treeview;\n      parameters-&gt;newChild= treeview2;\n\n      g_signal_connect(treeview, \"row-activated\", G_CALLBACK(replace_tab), (gpointer) parameters);\n      g_signal_connect(backbutton, \"clicked\", G_CALLBACK(Back), (gpointer) parameters);\n      g_signal_connect(Okbutton, \"clicked\", G_CALLBACK(Ok), (gpointer) parameters);\n\n      gtk_container_add(GTK_CONTAINER(scrolledwindow), treeview);\n      gtk_notebook_append_page(GTK_NOTEBOOK(notebook), vbox, label);\n    }\n\n  gtk_widget_show_all(window);\n\n  gtk_main();\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "image-processing", "sobel"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 1, "creation_date": 1511334887, "post_id": 47428739, "comment_id": 81811917, "body": "Probably the matrix they used differs from yours."}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1511335951, "post_id": 47428739, "comment_id": 81812458, "body": "You don\u2019t show your code which saves or displays the image - maybe one of those two functions also normalises your image."}, {"owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "edited": false, "score": 0, "creation_date": 1511336167, "post_id": 47428739, "comment_id": 81812560, "body": "My output is a .pgm file.  In the output file the the instensity values [0,255] are there. (one value per line). output file is like this (as .pgm file is to be like):-  #p2 #comment #image dimension #max intensity value temp_image[1][1] temp_image[1][2] temp_image[1][3] ... and so on"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511336630, "post_id": 47428739, "comment_id": 81812813, "body": "@PaulOgilvie OP is avoiding problems associated with looking above, below, left and right of current pixel at image edges."}, {"owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "edited": false, "score": 0, "creation_date": 1511336641, "post_id": 47428739, "comment_id": 81812821, "body": "I am using 3 x 3 mask so I have padded the image 1 pixel at each side. so after that my padded_image is of size (y_size+2 ,  x_size+2 ).   As I have copied my image[][] to padded_image[][] so obviously my working space on padded_image[][] will be  from [1,y_size] [1, x_size] ..  Isn&#39;t it? @PaulOgilvie"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511336696, "post_id": 47428739, "comment_id": 81812851, "body": "Did you set the MAXINTENSITY to 255, or 65535? Or did you calculate it from the maximum pixel?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1511336765, "post_id": 47428739, "comment_id": 81812882, "body": "Assuming the matrix goes from <code>0</code> to <code>x_size-1</code> (and also for y), you go out of bounds a few times. In <code>padded_image[i][j]=image[i-1][j-1];</code> the left hand side goes out of bounds when <code>i</code> and <code>j</code> reaches <code>x_size</code> and <code>y_size</code> respectively and in <code>gx=(padded_image[i+1][...</code> when <code>i==x_size</code>, etcetera. Chek your bounds carefully."}, {"owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "edited": false, "score": 0, "creation_date": 1511336778, "post_id": 47428739, "comment_id": 81812888, "body": "255    .. As .pgm  works for 8bit grey value@mark setchell"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511336915, "post_id": 47428739, "comment_id": 81812967, "body": "Ok, good. PGM also works for 16-bit images by the way."}, {"owner": {"reputation": 1399, "user_id": 7359606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9eca7f3b7853fa067205299f3ebc89?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Artsimovich", "link": "https://stackoverflow.com/users/7359606/joseph-artsimovich"}, "edited": false, "score": 3, "creation_date": 1511337115, "post_id": 47428739, "comment_id": 81813086, "body": "One possible explanation is that the Sobel operator returns the mathematical gradient times 8. It&#39;s possible the gradient image on Wikipedia did account for that fact, by applying an additional 1/8 scaling factor."}, {"owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1511337317, "post_id": 47428739, "comment_id": 81813189, "body": "when i = y_size and  j = x_size   then padded_image[ y_size ][ x_size ] = image [ y_size - 1 ] [x _ size -1 ]  ...     range of my padded_image is [0 , y_size + 1]   and [0, x_size+1 ]   .. so when when i = y_size and  j = x_size     then    gx= (padded_image[y_size+1] [....   ]     ..   So I think there is  no array out of bound  issue..   Am I missing something ??  @Paul Ogilvie"}, {"owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "reply_to_user": {"reputation": 1399, "user_id": 7359606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9eca7f3b7853fa067205299f3ebc89?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Artsimovich", "link": "https://stackoverflow.com/users/7359606/joseph-artsimovich"}, "edited": false, "score": 0, "creation_date": 1511341105, "post_id": 47428739, "comment_id": 81815307, "body": "Thanks to all for your help.   I have found that the explanation by @Tulon is working.   It appears they have used scaling factor on each gradient value. Though the scaling factor is not 8 here (output is darker) , I have got the idea and have found that scaling factor is around 4. (as two images look like almost same) ."}, {"owner": {"reputation": 16892, "user_id": 461499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/OKnmM.png?s=128&g=1", "display_name": "RobAu", "link": "https://stackoverflow.com/users/461499/robau"}, "edited": false, "score": 0, "creation_date": 1511347917, "post_id": 47428739, "comment_id": 81819806, "body": "Are you sure the resolution of the input is the same for both images?"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "edited": false, "score": 0, "creation_date": 1511342415, "post_id": 47430226, "comment_id": 81816069, "body": "Thanks for your help. It may be useful for other images. But for my selected image newMax = Max =255 , newMin = Min = 0. So In = I ."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1511350977, "post_id": 47430226, "comment_id": 81821824, "body": "Depending on applications, it may be better to avoid saturation (to keep strength information on the strongest edges), or to enforce it (to keep low contrasted details). Nonlinear contrast stretching may also be useful."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 3, "last_activity_date": 1511340356, "creation_date": 1511340356, "answer_id": 47430226, "question_id": 47428739, "link": "https://stackoverflow.com/questions/47428739/sobel-gradient-operator-not-getting-desired-output/47430226#47430226", "title": "Sobel gradient operator: Not getting desired output", "body": "<p>The description in Wikipedia says that it is the <em><a href=\"https://en.wikipedia.org/wiki/Normalization_(image_processing)\" rel=\"nofollow noreferrer\">normalized</a> magnitude</em>, yet you've <a href=\"https://en.wikipedia.org/wiki/Clamping_(graphics)\" rel=\"nofollow noreferrer\"><em>clamped</em></a> the magnitude. To normalize the magnitude, find the maximum value and a divisor that maps this value to 255, and then divide each pixel value by that divisor.</p>\n"}], "owner": {"reputation": 105, "user_id": 3804152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c52045f370590c79f7cf958ae6c8068?s=128&d=identicon&r=PG&f=1", "display_name": "user3804152", "link": "https://stackoverflow.com/users/3804152/user3804152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 47430226, "answer_count": 1, "score": 1, "last_activity_date": 1511340356, "creation_date": 1511334485, "last_edit_date": 1511334861, "question_id": 47428739, "link": "https://stackoverflow.com/questions/47428739/sobel-gradient-operator-not-getting-desired-output", "title": "Sobel gradient operator: Not getting desired output", "body": "<p>I have applied sobel operator on an image from wikipedia (<a href=\"https://en.wikipedia.org/wiki/Sobel_operator#/media/File:Bikesgray.jpg\" rel=\"nofollow noreferrer\">Bikesgray</a>). But I am not getting desired output. My output is more brighter than the output shown in wikipedia. My code runs on .pgm file.  </p>\n\n<p><strong>Here are the output of my code and the output shown in wikipedia</strong>\n<a href=\"https://i.stack.imgur.com/0M9cd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0M9cd.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Here is my  C code:</strong></p>\n\n<pre><code>//image[][] is input image. temp_image[][] is output image. temp_image[][] and image[][] are global.\n// 3 x 3 region of an image will be  [z1   z2  z3]\n                                     [z4   z5  z6]\n                                     [z7   z8  z9]\n\n//x direction mask                   [-1  -2  -1]\n                                     [0    0   0]\n                                     [1    2   1]\n\n//y direction mask                   [-1   0   1]\n                                     [-2   0   2]\n                                     [-1   0   1]\n\nvoid find_sobel_gradient_image()\n{\n    int i,j;\n    int gx,gy;\n    double m;\n    int padded_image[700][700]={0};\n\n    //create padded image of 1pixel zero padding and copy data from image[][]\n    for(i=1;i&lt;=y_size;i++)\n    {\n        for(j=1;j&lt;=x_size;j++)\n        {       \n            padded_image[i][j]=image[i-1][j-1];\n        }\n    }\n\n    //resulting image\n    for(i=1;i&lt;=y_size;i++)\n    {\n        for(j=1;j&lt;=x_size;j++)\n        {\n            //gx = (z7 + 2*z8 + z9)-(z1 + 2*z2+ z3)\n            gx=(padded_image[i+1][j-1]+2*padded_image[i+1][j]+padded_image[i+1][j+1])-(padded_image[i-1][j-1]+2*padded_image[i-1][j]+padded_image[i-1][j+1]); \n\n            //gy = (z3 + 2*z6 +z9) - (z1+ 2*z4 +z7)\n            gy=(padded_image[i-1][j+1]+2*padded_image[i][j+1]+padded_image[i+1][j+1])-(padded_image[i-1][j-1]+2*padded_image[i][j-1]+padded_image[i+1][j-1]);     \n\n            m = sqrt(gx*gx+gy*gy);\n            temp_image[i][j]=round(m);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Note:</strong>  each temp[ i ][ j ] > 255   ==>  temp[ i ][ j ] = 255 </p>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 474, "user_id": 7710352, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4010885fe9cdcd706a3e25f60e2bd16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jagr", "link": "https://stackoverflow.com/users/7710352/jagr"}, "edited": false, "score": 0, "creation_date": 1511334299, "post_id": 47428626, "comment_id": 81811614, "body": "is this the other way instead of using a for loop?"}, {"owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "edited": false, "score": 1, "creation_date": 1511334435, "post_id": 47428626, "comment_id": 81811672, "body": "scanf with %s scans a string (without any whitespace or new line) to a char array. so you need not to scan each character using for loop. Yeah, this is perfect way instead of for loop."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 5, "creation_date": 1511334493, "post_id": 47428626, "comment_id": 81811708, "body": "But wait, there&#39;s more. You also get a buffer overflow, <i>absolutely free</i>!"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 1, "creation_date": 1511334547, "post_id": 47428626, "comment_id": 81811740, "body": "Actually, you want to protect from buffer overrun with <code>scanf(&quot;%20s&quot;, word)</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 4, "creation_date": 1511335032, "post_id": 47428626, "comment_id": 81811987, "body": "You should always <b><i>validate</i></b> the return of <code>scanf</code>, e.g. <code>if (scanf (&quot;%19s&quot;, word) != 1) { &#47;* handle error *&#47; }</code>. Otherwise you can have no confidence <code>printf(&quot;%s\\n&quot;, word);</code> won&#39;t invoke <i>Undefined Behavior</i>. (@wallyk -- it&#39;s <code>&quot;%19s&quot;</code> instead of <code>&quot;%20s&quot;</code> -- that can exceed the array bounds by <code>1</code>)"}], "tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": true, "score": 6, "last_activity_date": 1511334043, "creation_date": 1511334043, "answer_id": 47428626, "question_id": 47428438, "link": "https://stackoverflow.com/questions/47428438/store-display-user-input-in-an-array-in-c/47428626#47428626", "title": "Store &amp; display user input in an array in C", "body": "<p>All you want is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char word[20];\n    scanf(\"%s\", word);    // Read and store\n    printf(\"%s\\n\", word);    // Print\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 4754001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d79d6f43d39458e7c278adfabadec09e?s=128&d=identicon&r=PG&f=1", "display_name": "Abubaker Siddique", "link": "https://stackoverflow.com/users/4754001/abubaker-siddique"}, "is_accepted": false, "score": -3, "last_activity_date": 1511337570, "last_edit_date": 1511337570, "creation_date": 1511334239, "answer_id": 47428680, "question_id": 47428438, "link": "https://stackoverflow.com/questions/47428438/store-display-user-input-in-an-array-in-c/47428680#47428680", "title": "Store &amp; display user input in an array in C", "body": "<p>if you want to read via characters, ending character should be set to null character for it to be string.</p>\n\n<pre><code>char getWord(char word[]);\nint main() \n{\n    char word[20]\n    getWord(word);\n\n    printf(\"%s\\n\", word);\n    return 0;\n}\n\nchar getWord(char word[]) \n{\n    int i;\n    char c;\n    printf(\"Enter a word: \");\n    for (i = 0; i &lt; 19; i++)\n    {\n        scanf(\"%c\", &amp;c);\n        if ( c == '\\n' )\n            break;\n        word[i]=c;\n    }\n\n    word[i]='\\0';\n    return word;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 6716734, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8IT4-SqVd_k/AAAAAAAAAAI/AAAAAAAAAMg/SjqlcMUYn2g/photo.jpg?sz=128", "display_name": "Verma Aman", "link": "https://stackoverflow.com/users/6716734/verma-aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1511445221, "creation_date": 1511445221, "answer_id": 47457155, "question_id": 47428438, "link": "https://stackoverflow.com/questions/47428438/store-display-user-input-in-an-array-in-c/47457155#47457155", "title": "Store &amp; display user input in an array in C", "body": "<p>You can use fgets and puts to read and write a string.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define MAX 20\n\nint main()\n{\n    int ar[MAX], i, count;\n    fgets(ar, MAX, stdin);  //it will accept whitespaces as well\n    puts(ar);            //displaying entered string\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 474, "user_id": 7710352, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4010885fe9cdcd706a3e25f60e2bd16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jagr", "link": "https://stackoverflow.com/users/7710352/jagr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7707, "favorite_count": 1, "accepted_answer_id": 47428626, "answer_count": 3, "score": 0, "last_activity_date": 1511445221, "creation_date": 1511333355, "last_edit_date": 1511335107, "question_id": 47428438, "link": "https://stackoverflow.com/questions/47428438/store-display-user-input-in-an-array-in-c", "title": "Store &amp; display user input in an array in C", "body": "<p>I am trying to display and print a word from the user and store it into my array which is called</p>\n\n<pre><code>char word[20]\n</code></pre>\n\n<p>But I am having trouble. I know we use a \"for loop\" to scan it into the array but I keep going in circles and I believe the problem is with the <code>i &lt; 20</code>. \nI researched this and found that the answers to this are extremely experienced and I need a really basic way of doing it without the extra stuff. So all I want is to get word from the user, store it and print it onto the screen. </p>\n\n<p>Can someone help without experienced code?</p>\n\n<p>Code in C</p>\n\n<pre><code>char getWord(char word[]);\nint main()\n{   \n    char word[20];  \n    getWord(word);\n\n    return 0;\n}\n\nchar getWord(char word[])\n{ \n    int i;\n    printf(\"Enter a word: \");\n    for (i = 0; i &lt; 20; i++) \n    { \n        scanf(\" %c\", &amp;word[i]);\n    }\n\n    return word;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1511333121, "creation_date": 1511333121, "answer_id": 47428377, "question_id": 47428232, "link": "https://stackoverflow.com/questions/47428232/pthread-attribute-usage/47428377#47428377", "title": "Pthread attribute usage", "body": "<p>If you read the POSIX specification for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutexattr_init.html\" rel=\"nofollow noreferrer\"><code>pthread_mutexattr_init()</code></a>, it says:</p>\n\n<blockquote>\n  <p>After a mutex attributes object has been used to initialize one or more mutexes, any function affecting the attributes object (including destruction) shall not affect any previously initialized mutexes.</p>\n</blockquote>\n\n<p>Similarly, though not quite so clearly, the specification for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_attr_init.html\" rel=\"nofollow noreferrer\"><code>pthread_attr_init()</code></a> says:</p>\n\n<blockquote>\n  <p>The resulting attributes object (possibly modified by setting individual attribute values) when used by <code>pthread_create()</code> defines the attributes of the thread created. A single attributes object can be used in multiple simultaneous calls to <code>pthread_create()</code>.</p>\n</blockquote>\n\n<p>And the specification of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_create.html\" rel=\"nofollow noreferrer\"><code>pthread_create()</code></a> says:</p>\n\n<blockquote>\n  <p>The <code>pthread_create()</code> function shall create a new thread, with attributes specified by <code>attr</code>, within a process. If <code>attr</code> is NULL, the default attributes shall be used. If the attributes specified by <code>attr</code> are modified later, the thread's attributes shall not be affected. </p>\n</blockquote>\n\n<p>I think those quotes mean that the answers are:</p>\n\n<ol>\n<li><p>Yes, you may destroy the attribute object when it is convenient.  In effect, the POSIX calls make a copy of the attributes.</p></li>\n<li><p>Yes, it is safe to reuse attributes.</p></li>\n</ol>\n"}], "owner": {"reputation": 864, "user_id": 4624725, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-KB3KYmNbWw4/AAAAAAAAAAI/AAAAAAAAEpU/BgqrUE_Kev8/photo.jpg?sz=128", "display_name": "PoVa", "link": "https://stackoverflow.com/users/4624725/pova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 47428377, "answer_count": 1, "score": 4, "last_activity_date": 1511333121, "creation_date": 1511332462, "question_id": 47428232, "link": "https://stackoverflow.com/questions/47428232/pthread-attribute-usage", "title": "Pthread attribute usage", "body": "<p>I have a couple of questions regarding pthread attributes that I could not find answers to elsewhere.</p>\n\n<ol>\n<li>If I create an attribute (thread/mutex), can I free it right after assigning it to a thread/mutex, or do I have to keep it until the thread finishes?</li>\n<li>Is it safe to reuse attributes (thread/mutex) on multiple threads/mutexes?</li>\n</ol>\n"}, {"tags": ["c++", "c", "apache", "http", "https"], "comments": [{"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1511332624, "post_id": 47428006, "comment_id": 81810859, "body": "Applications wont need to bother about bit rates, they are taken care by lower layers of TCPIP stack, if you mean client sends requests faster than your server can process, i believe you need to optimize server procesing and make it reply faster."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1511333341, "post_id": 47428006, "comment_id": 81811182, "body": "If &#39;they&#39; really are &#39;handlling [HTTP] at socket level&#39; there is no reason why &#39;they&#39; can&#39;t use the same techniques via <code>ssl_write()</code>. But if the server only supports 1000Kbps, and that is also the desired bitrate, there doesn&#39;t seem to be any actual work to be done here. In any case I agree with @Pras: you don&#39;t want to waste any time whatsoever in your server: you want to get the request out as fast as possible and turn to the next one. Let TCP/IP and the network manage the bandwidth. They&#39;re good at that."}, {"owner": {"reputation": 107, "user_id": 5855982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/15d8a118a1b96af178a9241c979812ae?s=128&d=identicon&r=PG&f=1", "display_name": "udaya chandran", "link": "https://stackoverflow.com/users/5855982/udaya-chandran"}, "reply_to_user": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1511342687, "post_id": 47428006, "comment_id": 81816265, "body": "@pras::If we are dealing with one or two https requests,then it won&#39;t cause any issues.Incase if you are sending &quot;n&quot; nr of https requests,it causes some issues .   1)for first few requests,it allocates the complete bandwidth.But for the remaining requests,it doesn&#39;t have bandwidth to transfer data so it is getting hanged..."}, {"owner": {"reputation": 107, "user_id": 5855982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/15d8a118a1b96af178a9241c979812ae?s=128&d=identicon&r=PG&f=1", "display_name": "udaya chandran", "link": "https://stackoverflow.com/users/5855982/udaya-chandran"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1511343144, "post_id": 47428006, "comment_id": 81816608, "body": "@EJP:ssl_write is a library call used to transfer the https data in a secured manner.we can&#39;t fill the bitrate into that and can&#39;t force it to manage bandwidth.if we forced to do that,it fails"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1511392577, "post_id": 47428006, "comment_id": 81845886, "body": "You can choose how often you call it, but I don&#39;t see why any of this should be considered necessary. Your diagnosis of your problem seems flawed. If your server is hanging you should investigate the hanging, not try to throttle it."}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1511420537, "post_id": 47428006, "comment_id": 81853689, "body": "https is quite slower than http due to ssl handshake,one of the (possiblly many)reasons your server hangs could be cpu being driven so busy it cant process new request"}], "owner": {"reputation": 107, "user_id": 5855982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/15d8a118a1b96af178a9241c979812ae?s=128&d=identicon&r=PG&f=1", "display_name": "udaya chandran", "link": "https://stackoverflow.com/users/5855982/udaya-chandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511333225, "creation_date": 1511331425, "last_edit_date": 1511333225, "question_id": 47428006, "link": "https://stackoverflow.com/questions/47428006/regarding-https-bandwidth-control-on-server-side", "title": "Regarding HTTPs bandwidth control on server side", "body": "<p>Requirement:</p>\n\n<ul>\n<li>Client supports 2MBPS bitrate and it will be sending HTTPS CURL request to server</li>\n<li><p>Server supports 1000kbps bitrate.So it has to send the data at the speed of 1000kbps to the client..</p></li>\n<li><p>But In my case,Server doesn't validating the bitrate which i've set.Instead its sending the data at rapid speed to the client.Now my requirement is to control the bandwidth on server side and send the data at the specified rate of 1000kbps.</p></li>\n<li><p>Be able to fetch the bitrate from code level: I need some clue about how we need to handle the bitrate at socket level for HTTPS.</p></li>\n</ul>\n\n<p>Could someone please guide me on achieving this?</p>\n\n<p>Note:<br>\nFor HTTP, it works properly because bit-rate is handled at socket level whereas for HTTPS, they use <code>ssl_write</code> library call to transfer the data. In that call, they are not dealing with bitrate.</p>\n\n<p>If someone guide me about how to deal with this, it will be more helpful for me.</p>\n"}, {"tags": ["c", "callback", "gtk"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 3318270, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03ff48b06a7c0b5f2b00f7dacf2047a1?s=128&d=identicon&r=PG&f=1", "display_name": "c_spk", "link": "https://stackoverflow.com/users/3318270/c-spk"}, "is_accepted": false, "score": 0, "last_activity_date": 1511347791, "creation_date": 1511347791, "answer_id": 47432780, "question_id": 47427928, "link": "https://stackoverflow.com/questions/47427928/gtk-key-press-event-handling-while-shift-is-pressed/47432780#47432780", "title": "GTK: &quot;key-press-event&quot; handling while Shift is pressed", "body": "<p>I've finally found needed signal to select menuitems (\"move-current\"), so my own <code>menu_rotate_selection</code> function is no longer needed. That signal name is confusing though, I'd rather think its purpose to actually move the menuitem itself whithin the menu (first I thought the other obscure-named signal \"cycle-focus\" is for changing selection). Now it can be rewriten as following:</p>\n\n<pre><code>...\ncase GDK_KEY_Up:\ncase GDK_KEY_Down:\n    if ((key_event-&gt;type == GDK_KEY_PRESS) &amp;&amp;\n        (key_event-&gt;state &amp; GDK_SHIFT_MASK)) {\n        GtkMenuDirectionType dir = (key_event-&gt;keyval == GDK_KEY_Up) ?\n            GTK_MENU_DIR_PREV : GTK_MENU_DIR_NEXT;\n        g_signal_emit_by_name(menu, \"move-current\", dir);\n\n        return TRUE;\n    }\n    break;\n...\n</code></pre>\n\n<p>This pretty much answers my question.</p>\n"}], "owner": {"reputation": 169, "user_id": 3318270, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03ff48b06a7c0b5f2b00f7dacf2047a1?s=128&d=identicon&r=PG&f=1", "display_name": "c_spk", "link": "https://stackoverflow.com/users/3318270/c-spk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511347791, "creation_date": 1511331105, "last_edit_date": 1511331517, "question_id": 47427928, "link": "https://stackoverflow.com/questions/47427928/gtk-key-press-event-handling-while-shift-is-pressed", "title": "GTK: &quot;key-press-event&quot; handling while Shift is pressed", "body": "<p>I'm writing a small program: it's a lone drop-down menu with lowercase letters as menuitem labels:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gRoem.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gRoem.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you hold <code>Shift</code>, the labels become capitalized (I wrote a \"key-press-event\" and \"key-release-event\" handler for this). The problem is that while <code>Shift</code> is pressed, I still want to navigate the menu and choose items with <code>Enter</code> press. The default handlers aren't get triggered if some modifier is pressed, so I handle it in the following way:</p>\n\n<pre><code>static gboolean menu_key_event(GtkWidget *menu, GdkEvent *event, gpointer data) {\n    (void)data;\n\n    GdkEventKey *key_event = (GdkEventKey*)event;\n    switch (key_event-&gt;keyval) {\n    case GDK_KEY_Shift_L:\n    case GDK_KEY_Shift_R: ;\n        bool b = (key_event-&gt;type == GDK_KEY_PRESS) ? true : false;\n        gtk_container_foreach(GTK_CONTAINER(menu), menuitem_capitalize_label, &amp;b);\n\n        return TRUE;\n        break;\n\n    case GDK_KEY_Return:\n        if ((key_event-&gt;type == GDK_KEY_PRESS) &amp;&amp;\n            (key_event-&gt;state &amp; GDK_SHIFT_MASK)) {\n            // I want default callback to handle this\n            g_signal_emit_by_name(menu, \"activate-current\");\n\n            return TRUE;\n        }\n        break;\n\n    case GDK_KEY_Up:\n    case GDK_KEY_Down:\n        if ((key_event-&gt;type == GDK_KEY_PRESS) &amp;&amp;\n            (key_event-&gt;state &amp; GDK_SHIFT_MASK)) {\n            // Some function I wrote to fiddle with menu items,\n            // simulating default selection behavior\n            menu_rotate_selection(GTK_MENU_SHELL(menu), key_event-&gt;keyval);\n\n            return TRUE;\n        }\n        break;\n    }\n\n    return FALSE;\n}\n</code></pre>\n\n<p>Could this be done in a more elegant fashion? In short, I want my application handle <code>Enter</code>, arrow keys and <code>Shift+Enter</code>, <code>Shift</code>+ arrow keys the same way without needing to manually process it.</p>\n"}, {"tags": ["c", "string", "c99", "ansi-c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1511329471, "post_id": 47427506, "comment_id": 81809575, "body": "Have you looked inside the <a href=\"https://en.wikipedia.org/wiki/C11_(C_standard_revision)\" rel=\"nofollow noreferrer\">C11</a> standard document, <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a>? You really should download then read that specification. BTW ansi-c (and even C99) are obsolete standards."}, {"owner": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "edited": false, "score": 0, "creation_date": 1511329601, "post_id": 47427506, "comment_id": 81809616, "body": "<code>variable s</code> is not const (unless stated), you can still use it to point to other locations. <code>&quot;Hello&quot;</code> is stored in <code>data section</code> part of your program which is why it is immutable."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1511334041, "post_id": 47427690, "comment_id": 81811503, "body": "&quot;briefly until C++11&quot;?  That would be 22 years, or so. What do you consider to be a long time? :)"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 3, "last_activity_date": 1511329909, "creation_date": 1511329909, "answer_id": 47427690, "question_id": 47427506, "link": "https://stackoverflow.com/questions/47427506/how-do-strings-work-in-c/47427690#47427690", "title": "How do strings work in C?", "body": "<p>Syntax <code>char *s = \"Hello\";</code> is present from days when <code>const</code> keyword was not part of C specs. Later it remained for reverse compatibility. Writing to such <code>s[i]</code> would lead to undefined behaviour. (Seg fault observed in your case for few runs)</p>\n\n<p>This behaviour (Conversion from string literal or <code>const char []</code> to non-constant <code>char *</code>) was supported in C++ briefly until C++11 and then deprecated.</p>\n\n<p>Type safety in C is limited.</p>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511335212, "post_id": 47428724, "comment_id": 81812089, "body": "Even if you are sure that string literals are mutable in your implementation, mutating one is still undefined behaviour, so you can&#39;t do it. Similarly, you could be certain that your implementation doesn&#39;t trap on arithmetic overflow --indeed, GCC is documented as not trapping--, but the compiler can still produce surprising results. See <a href=\"https://blog.regehr.org/archives/759\" rel=\"nofollow noreferrer\">blog.regehr.org/archives/759</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511336255, "post_id": 47428724, "comment_id": 81812608, "body": "Whether or not you believe it to be a &quot;UB trick&quot;, the fact is that the compiler might constant fold the boolean <code>x &lt; x + 1</code> to <code>1</code> even though it would evaluate to <code>0</code> for a particular value of <code>x</code>, because it would only evaluate to <code>0</code> in the case of UB. Similarly, if the compiler knows that the value of <code>char* p</code> is a pointer to a string literal, it could choose not to compile <code>*p = &#39;a&#39;;</code> it could even choose to not compile the following code in that basic block on the assumption that the programmer must have done something to guarantee that UB doesn&#39;t occur."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511336889, "post_id": 47428724, "comment_id": 81812955, "body": "Do you have a reference for the reality you refer to? That is, a compiler which makes string literals mutable? If not, it is all theoretical, no? If so, how do you know that the compiler will never acquire the sort of optimisation I&#39;m talking about? When GCC acquired these optimizations, it certainly surprised the Linux authors, amongst other people, who were justifiably confident that their platform did not trap integer overflow. Anyway, that&#39;s it for me."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1511338126, "post_id": 47428724, "comment_id": 81813711, "body": "@rici for example <a href=\"http://cc65.github.io/doc/cc65.html\" rel=\"nofollow noreferrer\">cc65</a> with command-line option <code>--writable-strings</code> gives you that guarantee. I still edited the answer to make the <b>warning</b> about relying on such things more distinct. But really, UB doesn&#39;t mean &quot;you can&#39;t do that&quot;, it just means &quot;your code isn&#39;t well-defined C, so it could break easily&quot;."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 4, "last_activity_date": 1511337696, "last_edit_date": 1511337696, "creation_date": 1511334415, "answer_id": 47428724, "question_id": 47427506, "link": "https://stackoverflow.com/questions/47427506/how-do-strings-work-in-c/47428724#47428724", "title": "How do strings work in C?", "body": "<p>First of all, a <em>string</em> in C isn't immutable. C doesn't even know a <em>type</em> for strings -- a <em>string</em> is just defined as a sequence of <code>char</code> ending with <code>'\\0'</code>.</p>\n\n<p>What you're talking about are <em>string literals</em> and they <em>can</em> be immutable. The C standard defines that attempting to modify a string literal is <em>undefined behavior</em>, still their type is <code>char *</code>. So, if you are <em>sure</em> that in your implementation of C, a string literal is writable, you can do so! *)</p>\n\n<p>But your code won't be well-defined C any more and won't work on other platforms with read-only string literals. It will <em>compile</em>, because writing through <code>char *</code> is perfectly fine, but fail at runtime in unpredictable ways (like, possibly, a crash).</p>\n\n<p>Therefore, it's just best practice for portable code to assign string literals only to <code>const char *</code> pointers and, if you need a mutable string, use the string literal as an <em>initializer</em> for a <code>char []</code>.</p>\n\n<hr>\n\n<p>*) beware this is <strong>very</strong> uncommon, you'll find it nowadays only with specialized compilers targeting embedded or very old platforms. A modern platform <strong>will</strong> place string literals in a read-only data segment or similar.</p>\n"}], "owner": {"reputation": 2234, "user_id": 4669984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6e14021aae7f6d223e60ac4bd035440f?s=128&d=identicon&r=PG", "display_name": "Tarun Maganti", "link": "https://stackoverflow.com/users/4669984/tarun-maganti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 47428724, "answer_count": 2, "score": 3, "last_activity_date": 1511337696, "creation_date": 1511329052, "question_id": 47427506, "link": "https://stackoverflow.com/questions/47427506/how-do-strings-work-in-c", "title": "How do strings work in C?", "body": "<p>String is said to be a constant in <strong>C</strong> programming language.</p>\n\n<p>So, when I give a statement like <code>char *s = \"Hello\"</code>, I have learned that <code>s</code> points to a memory location of <em>H</em> since \"Hello\" is stored in some static memory of the program and also <code>\"Hello\"</code> is immutable.</p>\n\n<p>Does it mean the variable <code>s</code> is now a variable of type <em>pointer to constant data</em> such as <code>const int a = 3;const int *i = &amp;a;</code>. This seems so because I can't manipulate the data (when I do, it results in segmentation fault).</p>\n\n<p>But, if it is so, shouldn't compiler be able to detect and say that I have assigned qualified data to unqualified variable.\nSomething like <code>char *p</code> <em>p is a pointer to unqualified character</em> and when I say <code>char *p=\"Hello\"</code> <em>p, the pointer to unqualified character can't point to a const character type</em>?</p>\n\n<p>What am I missing here?</p>\n\n<p>If it is not the case as above, then how is an array of constant characters made immutable?</p>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 655, "user_id": 5565491, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/p79I1.jpg?s=128&g=1", "display_name": "iOShit I Screwed Up", "link": "https://stackoverflow.com/users/5565491/ioshit-i-screwed-up"}, "edited": false, "score": 0, "creation_date": 1511328121, "post_id": 47427301, "comment_id": 81809140, "body": "What do you mean use the C file? Are you trying to compile it and produce a .exe output file?"}, {"owner": {"reputation": 75, "user_id": 7666095, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SHxr1.jpg?s=128&g=1", "display_name": "Finn Maunsell", "link": "https://stackoverflow.com/users/7666095/finn-maunsell"}, "reply_to_user": {"reputation": 655, "user_id": 5565491, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/p79I1.jpg?s=128&g=1", "display_name": "iOShit I Screwed Up", "link": "https://stackoverflow.com/users/5565491/ioshit-i-screwed-up"}, "edited": false, "score": 0, "creation_date": 1511328154, "post_id": 47427301, "comment_id": 81809150, "body": "I&#39;m pretty sure with &#39;make&#39; I&#39;ve already compiled it? So what I want to do is actually use the .exe file"}, {"owner": {"reputation": 655, "user_id": 5565491, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/p79I1.jpg?s=128&g=1", "display_name": "iOShit I Screwed Up", "link": "https://stackoverflow.com/users/5565491/ioshit-i-screwed-up"}, "edited": false, "score": 0, "creation_date": 1511328211, "post_id": 47427301, "comment_id": 81809169, "body": "So what are you asking for? Are you just not sure where the output file is located?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511328412, "post_id": 47427301, "comment_id": 81809230, "body": "@FinnMaunsell there are no <code>.exe</code> files on Linux."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511328834, "post_id": 47427301, "comment_id": 81809363, "body": "Linux don&#39;t have folders (they are just GUI artefacts) but <i>directories</i>"}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511328786, "post_id": 47427430, "comment_id": 81809349, "body": "The <code>chmod +x</code> is not needed. The compiler will produce an executable"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511332028, "post_id": 47427430, "comment_id": 81810597, "body": "If you look at the source, your output would be from <code>printf(&quot;Wrote output as &#39;%s&#39;\\n&quot;,new_name);</code> where your modified file would be in <code>&quot;ml_filename&quot;</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511332534, "post_id": 47427430, "comment_id": 81810816, "body": "@BasileStarynkevitch I am sure it is not necessary. But there are <i>some old compilers</i> which don&#39;t and I just didn&#39;t want to leave out the possibility."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511332784, "post_id": 47427430, "comment_id": 81810936, "body": "I never encountered such compilers (and using C compilers since 1980s on Unix systems). Could you name such a compiler today for Linux? BTW, the linker won&#39;t make the file executable when it got some error, and then you don&#39;t want to <code>chmod +x</code> it"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511332991, "post_id": 47427430, "comment_id": 81811026, "body": "@BasileStarynkevitch Hmm, I agree. I will update the answer to address your comment."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 4, "last_activity_date": 1511333057, "last_edit_date": 1511333057, "creation_date": 1511328592, "answer_id": 47427430, "question_id": 47427301, "link": "https://stackoverflow.com/questions/47427301/how-to-use-c-file-in-ubuntu/47427430#47427430", "title": "How to use C file in Ubuntu", "body": "<p>On Linux you do not have <code>.exe</code> files. But instead files are marked with execute permission.</p>\n\n<p>If you look at your <a href=\"https://github.com/TheCacophonyProject/voice_scrubbing/blob/master/Makefile\" rel=\"nofollow noreferrer\"><code>Makefile</code></a>, you can see it defines the <code>TARGET=mute_low</code>. </p>\n\n<p>This is your executable.</p>\n\n<p>You can run it as </p>\n\n<pre><code>./mute_low # in the same directory where you did make\n</code></pre>\n\n<p>If for some reason it doesn't execute and you get errors like </p>\n\n<blockquote>\n  <p>./mute_low - Not an executable</p>\n</blockquote>\n\n<p>you can make it an executable as</p>\n\n<pre><code>chmod +x mute_low\n</code></pre>\n\n<p>Finally it would need the file name of the <code>.wav</code> file and you can provide that as </p>\n\n<pre><code>./mute_low filename.wav\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7666095, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SHxr1.jpg?s=128&g=1", "display_name": "Finn Maunsell", "link": "https://stackoverflow.com/users/7666095/finn-maunsell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 47427430, "answer_count": 1, "score": 0, "last_activity_date": 1511333057, "creation_date": 1511327861, "last_edit_date": 1511330050, "question_id": 47427301, "link": "https://stackoverflow.com/questions/47427301/how-to-use-c-file-in-ubuntu", "title": "How to use C file in Ubuntu", "body": "<p>I'm trying to get this <a href=\"https://github.com/TheCacophonyProject/voice_scrubbing\" rel=\"nofollow noreferrer\">https://github.com/TheCacophonyProject/voice_scrubbing</a> working on my ubuntu. I've managed to 'make' the thing using </p>\n\n<pre><code>make \n</code></pre>\n\n<p>Go me!</p>\n\n<p>But I don't know how to insert any files into it.\nI'm pretty sure the app takes a .wav file and edits that file inplace.\nSo could I get some help with doing this?</p>\n\n<p>All the best</p>\n\n<p>Edit:</p>\n\n<p>Here's my directory contents. I want to find a way of using that mute_low(.exe) file:</p>\n\n<pre><code>notebook@heyfinn:~/Cacophony/voice_scrubbing$ ls\nMakefile  mute_low.c  README.md   wavefile.h\nmute_low  mute_low.o  wavefile.c  wavefile.o\n</code></pre>\n\n<p>And here's the file contents on Jupyter notebooks to explain why I think there is an .exe file there:\n<a href=\"https://i.stack.imgur.com/yV4F4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yV4F4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1511327302, "post_id": 47427179, "comment_id": 81808881, "body": "This line <code>scanf(&quot;%[^\\t]&quot;, string);</code> is broken. You should be able to detect this using a debugger"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511327511, "post_id": 47427179, "comment_id": 81808935, "body": "What happens when <code>a=1</code>? What is in <code>string[1]</code>? (this presumes <code>scanf</code> succeeded -- but without validating the <b>return</b> there is no way to know)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511327686, "post_id": 47427179, "comment_id": 81808988, "body": "What happens if you move <code>if (scanf(&quot;%[^\\n]%*c&quot;, string[a]) != 1) return 1;</code> immediately after <code>while(string[a][0]!=&#39;\\0&#39;){</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1511332045, "last_edit_date": 1511332045, "creation_date": 1511328639, "answer_id": 47427440, "question_id": 47427179, "link": "https://stackoverflow.com/questions/47427179/variable-inside-2-while-loops-wont-reset/47427440#47427440", "title": "Variable inside 2 while loops won&#39;t reset", "body": "<p>Unlike what you are thinking, the <code>scanf</code> only scans the line in the <code>string[0]</code>. \nThe others are uninitialized. Trying to read them is undefined behavior.</p>\n\n<p>Now again there is one thing you are doing passing <code>string</code> in <code>scanf</code>. Value wise it contains the same\nvalue as that of <code>string[0]</code>. So it basically reads the lines in <code>string[0]</code>.</p>\n\n<p>Assuming that the <code>scanf</code> didn't fail now you get into the while loop.\nThe first check is redundant. When you <code>a</code> is anything other than <code>0</code> then it will invoke undefined Behavior.</p>\n\n<p>Counting the length via increasing <code>count</code>. Suprisingly then you try to increase value in <code>letterWords</code>.\nWhen the value <code>count</code> is not <code>&lt;=14</code> the again you access array index out of bound. Again this is undefined behavior.</p>\n\n<p>Now after so many undefined behaviors the usual assignment of <code>count=0</code> is supressed.\nSimply the program complains and then line is not executed even.(Maybe).</p>\n\n<p>In order to get multiple lines use <code>fgets</code> and read each of the line (<code>\\n</code>)seperated in different <code>string[i]</code>-s.\nThen you based on the number of lines read you run the loop. Then everything will work fine.\n<code>while(string[a][0]!='\\0')</code> is not a agood way rather try a check based on numbers of line read.(In your case)</p>\n\n<p>Also again <code>printf(\"%s\",string[i])</code> will print each of the lines.</p>\n\n<p>A better way to use <code>scanf()</code> is to check the return value of <code>scanf()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 0, "last_activity_date": 1511329461, "creation_date": 1511329461, "answer_id": 47427594, "question_id": 47427179, "link": "https://stackoverflow.com/questions/47427179/variable-inside-2-while-loops-wont-reset/47427594#47427594", "title": "Variable inside 2 while loops won&#39;t reset", "body": "<p>I took the liberty to reshape the code (too many things to change otherwise)</p>\n\n<pre><code>int main() {\n\n    char string[500][500];\n    int letterWords[15]={0}; // max line length is 14\n    int a,i,count;\n\n    printf(\"Enter several lines of text (end with ^D).\\n\");\n    for(a=0 ; a &lt; 500 &amp;&amp; fgets(string[a], 500, stdin) ;  a++) /* nothing */;\n\n    for(i=0 ; i&lt;a ; i++) {\n        for(count=0 ; string[i][count] &amp;&amp; string[i][count] != '\\n' ; count++)  /* nothing */ ;\n        printf(\"Line %d: %d\\n\", i, count);\n        letterWords[count]++;\n    }\n\n    for(i=0 ; i&lt;15 ; i++) {\n        if(letterWords[i]) {\n            printf(\"%d %d\\n\", i, letterWords[i]);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Explanations:</p>\n\n<pre><code>for(a=0 ; a &lt; 500 &amp;&amp; fgets(string[a], 500, stdin) ;  a++) /* nothing */;\n</code></pre>\n\n<p>Use <code>fgets</code> to read lines of a given max length. The line counter is <code>a</code>.<br>\nTo complete input, the user press <kbd>Control-D</kbd> (<code>EOF</code>) on a blank line.<br>\n<code>fgets</code> returns <code>NULL</code> when <code>EOF</code> is met (or an error occurred).</p>\n\n<pre><code>for(i=0 ; i&lt;a ; i++) {\n</code></pre>\n\n<p><code>i</code> is the index in <code>strings</code>, goes from <code>0</code> to <code>a-1</code>.</p>\n\n<pre><code>    for(count=0 ; string[i][count] &amp;&amp; string[i][count] != '\\n' ; count++)  /* nothing */ ;\n</code></pre>\n\n<p>No need of other variables. <code>count</code> counts the number of characters in the line, and stops whenever <code>\\n</code> or <code>\\0</code> is met.</p>\n\n<pre><code>    printf(\"Line %d: %d\\n\", i, count);\n    letterWords[count]++; // Increment the line-counter\n}\n</code></pre>\n\n<p>Note that no line should have more than 14 characters. Finally,</p>\n\n<pre><code>for(i=0 ; i&lt;15 ; i++) {\n    if(letterWords[i]) {\n        printf(\"%d %d\\n\", i, letterWords[i]);\n    }\n}\n</code></pre>\n\n<p>Prints the result, <code>Length Number_of_lines_of_that_length</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1511330328, "creation_date": 1511330328, "answer_id": 47427764, "question_id": 47427179, "link": "https://stackoverflow.com/questions/47427179/variable-inside-2-while-loops-wont-reset/47427764#47427764", "title": "Variable inside 2 while loops won&#39;t reset", "body": "<p>When reading <em>lines of input</em>, use a <em>line oriented</em> input function such as <code>fgets</code> or POSIX <code>getline</code>. <code>scanf</code> is full of pitfalls just waiting for new C-programmers to fall into.</p>\n\n<p>While your code, especially <code>linewords</code> is a bit hard to follow, you attempt to be capturing the length in it to print all lines with characters.</p>\n\n<p>One thing you have to understand is putting one <code>scanf</code> up top -- will just read one input. That makes your nested loops a bizarre effort in futility. Instead, you need to move your read within your outer loop so you are reading one line of input each go-round (technical term).</p>\n\n<p>Rather than using nested loops, simply use a single loop to loop continually taking user input until the user generates an <code>EOF</code> (<kbd>Ctrl+d</kbd> or <kbd>Ctrl+z</kbd> on windoze). There you simply validate the read (that the string actually fit in your allotted storage) and trim the trailing '<code>\\n'</code> read and included in your buffer by the <em>line oriented</em> input function.</p>\n\n<p>While you are free to store the length of each string in a separate array, for this exercise a simple call to <code>strlen</code> will suffice.</p>\n\n<p>Putting it altogether, you could do something like the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX 500     /* if you need constants, define them */\n\nint main () {\n\n    int n = 0;                          /* strings index */\n    char string[MAX][MAX] = { \"\" };     /* 2d array of char */\n\n    printf (\"\\nenter several lines of text\\n\"\n            \"[ctrl+d (ctrl+z on windows) when done]\\n\\n\");\n\n    for (; n &lt; MAX;) {      /* take input until n == MAX or user EOF */\n        printf (\"line[%2d]: \", n);              /* prompt for input */\n        if (fgets (string[n], MAX, stdin)) {    /* read line */\n            size_t len = strlen (string[n]);    /* get length */\n            if (len &amp;&amp; string[n][len - 1] == '\\n')  /* check last char '\\n' */\n                string[n][--len] = 0;   /* overwrite with nul-terminating char */\n            else {  /* line too long handle error */\n                fprintf (stderr, \"error: line too long '%d'.\\n\", n);\n                return 1;\n            }\n            n++;    /* increment line index */\n        }\n        else {  /* handle EOF */\n            printf (\"\\nall done!\\n\\n\");\n            break;\n        }\n    }\n\n    for (int i = 0; i &lt; n; i++)         /* output each line read */\n        printf (\"string[%2d] (%3zu chars) : '%s'\\n\", \n                i, strlen (string[i]), string[i]);\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> if you goal was to skip zero-length strings, then simply adding a check of <code>if (strlen(string[i]))</code> before the final <code>printf</code> would be fine. (you can save it in a variable in the final loop to prevent calling it twice))</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/rdstrings2d\n\nenter several lines of text\n[ctrl+d (ctrl+z on windows) when done]\n\nline[ 0]: my dog\nline[ 1]: has fleas\nline[ 2]: my cat is lucky, and\nline[ 3]: has none\nline[ 4]:\nall done!\n\nstring[ 0] (  6 chars) : 'my dog'\nstring[ 1] (  9 chars) : 'has fleas'\nstring[ 2] ( 20 chars) : 'my cat is lucky, and'\nstring[ 3] (  8 chars) : 'has none'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 167, "user_id": 8978833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345e2f95224802c86523ce8b18ad35ef?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/8978833/anil"}, "is_accepted": false, "score": 0, "last_activity_date": 1511334590, "creation_date": 1511334590, "answer_id": 47428769, "question_id": 47427179, "link": "https://stackoverflow.com/questions/47427179/variable-inside-2-while-loops-wont-reset/47428769#47428769", "title": "Variable inside 2 while loops won&#39;t reset", "body": "<p>// try using this code this seems to work just fine as you want\n  #include</p>\n\n<p>int main(){</p>\n\n<pre><code>char string[500];\nint letterWords[15]={0};\n\nprintf(\"Enter several lines of text.\\n\");\nscanf(\"%[^\\t]\", string);\n\nint a=0, b=0;\n//printf(\"%s\",string);\nint count=0, i;\n\nwhile(string[a]!='\\0'){\n    while(string[a]!='\\n'){\n        count++;\n        a++;\n        printf(\"%d\\n\", count);\n    }\n    printf(\"\\n\");\n    count-=1;\n    letterWords[count]++;\n    a++;\n    b=0;\n    count=0;  //the count doesn't reset to 0 for some reason\n}\n\nfor(i=0;i&lt;15;i++){\n    if(letterWords[i]==0){\n        continue;\n    }\n    printf(\"%d %d\\n\", i+1, letterWords[i]);\n}\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 1, "user_id": 7531986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa5ee11f37eb920654c1ad7ec996efd?s=128&d=identicon&r=PG&f=1", "display_name": "Oranges", "link": "https://stackoverflow.com/users/7531986/oranges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1511334590, "creation_date": 1511327167, "question_id": 47427179, "link": "https://stackoverflow.com/questions/47427179/variable-inside-2-while-loops-wont-reset", "title": "Variable inside 2 while loops won&#39;t reset", "body": "<p>Unless my computer is going crazy or I missed something. When I run the code the variable count does not reset to zero after each inner while loop. \nEx. If I enter:<br>\nxxx<br>\nyyyy<br>\nOutput of count is 1-9. But it should be 1-4 and 1-5.</p>\n\n<pre><code>int main(){\n\n    char string[500][500];\n    int letterWords[15]={0};\n\n    printf(\"Enter several lines of text.\\n\");\n    scanf(\"%[^\\t]\", string);\n\n    int a=0, b=0;\n\n    int count=0, i;\n\n    while(string[a][0]!='\\0'){\n        while(string[a][b]!='\\0'){\n            count++;\n            b++;\n            printf(\"%d\\n\", count);\n        }\n        printf(\"\\n\");\n        count-=2;\n        letterWords[count]++;\n        a++;\n        b=0;\n        count=0;  //the count doesn't reset to 0 for some reason\n    }\n\n    for(i=0;i&lt;15;i++){\n        if(letterWords[i]==0){\n            continue;\n        }\n        printf(\"%d %d\\n\", i+1, letterWords[i]);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "robotframework"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1511327579, "post_id": 47427011, "comment_id": 81808958, "body": "Not sure that answers your question, but <a href=\"https://stackoverflow.com/questions/2854831/using-robot-framework-for-atdd\">read this</a> for starters."}, {"owner": {"reputation": 3, "user_id": 8985609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39acfadc5836bb7441e301c391c5b672?s=128&d=identicon&r=PG&f=1", "display_name": "APS", "link": "https://stackoverflow.com/users/8985609/aps"}, "reply_to_user": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1511331051, "post_id": 47427011, "comment_id": 81810184, "body": "Hi Ringo, I have gone through the above links. They haven&#39;t provided full-proof solution to what I was trying to do in my project"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8985609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39acfadc5836bb7441e301c391c5b672?s=128&d=identicon&r=PG&f=1", "display_name": "APS", "link": "https://stackoverflow.com/users/8985609/aps"}, "edited": false, "score": 0, "creation_date": 1511330973, "post_id": 47427844, "comment_id": 81810154, "body": "Thanks Ankit, this is very similar to what I am trying to do in my project. I have run the above example which is working fine on my linux machine."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1511332011, "post_id": 47427844, "comment_id": 81810588, "body": "Plain copy from <a href=\"https://reformatcode.com/code/c/how-to-integrate-c-apis-in-robot-framework\" rel=\"nofollow noreferrer\">reformatcode.com/code/c/&hellip;</a> ..."}, {"owner": {"reputation": 46, "user_id": 8612787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49233a152cef9bc8ceeed38db8aef967?s=128&d=identicon&r=PG&f=1", "display_name": "AnkitD", "link": "https://stackoverflow.com/users/8612787/ankitd"}, "edited": false, "score": 0, "creation_date": 1511338228, "post_id": 47427844, "comment_id": 81813774, "body": "Hi Ringo, that is my answer only. Please check . I think reformatcode.com copies the question answers from stackoverflow.com"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1511596738, "post_id": 47427844, "comment_id": 81922389, "body": "@AnkitDeogirikar In this case, include the source of the answer - again this is a total copy-paste without even mention of the link, would it be from SO or somewhere else."}], "tags": [], "owner": {"reputation": 46, "user_id": 8612787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49233a152cef9bc8ceeed38db8aef967?s=128&d=identicon&r=PG&f=1", "display_name": "AnkitD", "link": "https://stackoverflow.com/users/8612787/ankitd"}, "is_accepted": true, "score": 2, "last_activity_date": 1511330720, "creation_date": 1511330720, "answer_id": 47427844, "question_id": 47427011, "link": "https://stackoverflow.com/questions/47427011/how-to-integrate-c-apis-in-robot-framework/47427844#47427844", "title": "How to integrate C++ APIs in Robot framework?", "body": "<p>C++ APIs can be easily called using python library <strong>ctypes</strong>. As you might already know python libraries can be integrated in robot framework. </p>\n\n<p>Let's say you have to call SendMesg C++ API using robot framework.\nPlease follow following steps:</p>\n\n<p><strong>1. Creating C++ APIs library .so file</strong></p>\n\n<p>connect.cpp</p>\n\n<p>extern \"C\"\n{</p>\n\n<pre><code>int Initialize(char* ip, int port)\n{\n    //creates socket connection with remote host\n}\n\nint SendMesg(char* msg)\n{\n    //Send mesg code\n}\n</code></pre>\n\n<p>}</p>\n\n<p>g++ -std=c++11 -fpic -c connect.cpp</p>\n\n<p>g++ -std=c++11 -shared -g -o connect.so connect.o</p>\n\n<p>Now you have created connect.so shared library in the same path as your cpp file. </p>\n\n<p><strong>2. Creating python wrapper for C++ APIs</strong></p>\n\n<p>connectWrapper.py</p>\n\n<p>import ctypes</p>\n\n<p>class connectWrapper:</p>\n\n<pre><code>def __init__(self, ip , port):\n    self.Lib = ctypes.cdll.LoadLibrary('absolute path to connect.so')\n    self.Lib.Initialize.argtypes = [ctypes.c_char_p, ctypes.c_int]\n    self.Lib.Initialize(ip, port)\n\ndef SendMessageWrapper(self, msg):\n    self.Lib.SendMesg.argtypes = [ctypes.c_char_p]\n    print self.Lib.SendMesg(msg)\n</code></pre>\n\n<p>4 things to remember while creating python wrapper APIs.</p>\n\n<p>a) python file name is same as class name</p>\n\n<p>b) While calling APIs using ctypes you should always specify the input parameter types. Otherwise you may get the following error while running robot file using this python library:</p>\n\n<blockquote>\n  <p>NotImplementedError: variadic functions not supported yet; specify a\n    parameter list</p>\n</blockquote>\n\n<p>In this case, we had specified parameters as ctypes.c_char_p for string types and ctypes.c_int as integer. For more information you may use follow:</p>\n\n<p>[<a href=\"http://python.net/crew/theller/ctypes/tutorial.html#specifying-the-required-argument-types-function-prototypes][1]\" rel=\"nofollow noreferrer\">http://python.net/crew/theller/ctypes/tutorial.html#specifying-the-required-argument-types-function-prototypes][1]</a></p>\n\n<p>c) Absolute path to connect.so is given in ctypes.cdll.LoadLibrary API.</p>\n\n<p>d) Set the python file to executable by using chmod +x connectWrapper.py</p>\n\n<p><strong>3. Adding python library to robot file</strong></p>\n\n<p>test.robot.txt</p>\n\n<p>** * Settings * **</p>\n\n<p>Library    \"absoulte path to connectWrapper.py\" 10.250.0.1    8080</p>\n\n<p>** * Test Cases * **</p>\n\n<p>Send Message</p>\n\n<pre><code>     SendMessageWrapper \"Hello World\"\n</code></pre>\n\n<p>As you may notice, python library is added in the settings section with arguments passed as IP and port. We have added SendMessage keyword in test cases section with the string message \"Hello World\" as input argument.</p>\n\n<p>I hope after running the command :</p>\n\n<p>robot test.robot.txt </p>\n\n<p>everything works fine :) </p>\n"}], "owner": {"reputation": 3, "user_id": 8985609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39acfadc5836bb7441e301c391c5b672?s=128&d=identicon&r=PG&f=1", "display_name": "APS", "link": "https://stackoverflow.com/users/8985609/aps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2023, "favorite_count": 0, "closed_date": 1511338396, "accepted_answer_id": 47427844, "answer_count": 1, "score": -2, "last_activity_date": 1511330720, "creation_date": 1511326116, "question_id": 47427011, "link": "https://stackoverflow.com/questions/47427011/how-to-integrate-c-apis-in-robot-framework", "closed_reason": "Needs more focus", "title": "How to integrate C++ APIs in Robot framework?", "body": "<p>I have developed C++ APIs for my project. Also created a linux .so shared library from this. I need to call these APIs using robot framework keywords.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86-64", "inline-assembly"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511325876, "post_id": 47426708, "comment_id": 81808482, "body": "How to you plan on restoring <code>%rsp</code> after returning, since your context <code>struct</code> is located on the old stack?"}, {"owner": {"reputation": 1199, "user_id": 2003558, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/B5OVf.jpg?s=128&g=1", "display_name": "Andrew Chang", "link": "https://stackoverflow.com/users/2003558/andrew-chang"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511327192, "post_id": 47426708, "comment_id": 81808850, "body": "I am actually learning coroutine with assemblly implementation. The context struct will not be used by <code>_func_to_go </code>, therefore it should be OK to re-assign another stack pointer."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511327273, "post_id": 47426708, "comment_id": 81808876, "body": "Yes, but do you plan to return back to the original (<code>main_func</code>) function? Or just exit from <code>_func_to_go</code>?"}, {"owner": {"reputation": 1199, "user_id": 2003558, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/B5OVf.jpg?s=128&g=1", "display_name": "Andrew Chang", "link": "https://stackoverflow.com/users/2003558/andrew-chang"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511327729, "post_id": 47426708, "comment_id": 81808999, "body": "I would return to another function which may free allocated memory for this <code>_func_to_go</code>. I planned to implement that after I successfully re-assign stack pointer, so the source code listed above may be not complete."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1511328151, "post_id": 47426708, "comment_id": 81809149, "body": "First thing I will ask you to do is check if <code>mmap</code> succeeds. It could have failed and you might be trying to read/write to inaccessible memory."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511328278, "post_id": 47426708, "comment_id": 81809185, "body": "Secondly there could be a misalignment (of <code>%rsp</code>) when calling into <code>_func_to_go</code>. You should read the ABI for the platform you are compiling for."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1511328327, "post_id": 47426708, "comment_id": 81809205, "body": "Finally you need to attach a debugger and single step from <code>asm_save_main_and_go</code> and check where exactly it fails."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1511328971, "post_id": 47426708, "comment_id": 81809397, "body": "@AjayBrahmakshatriya if really the <code>movq 8(%rsi), %rsp</code> is SIGSEGV, it can&#39;t be alignment issue, it&#39;s just simple <code>mov</code> into <code>rsp</code>. Alignment would cause problems later. So your point about invalid memory is lot more likely. But then I would expect it to crash already at <code>movq (%rsi), %rbx</code>."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 2, "creation_date": 1511329190, "post_id": 47426708, "comment_id": 81809468, "body": "Oh, and <code>pContexts[0].rsp += STACK_SIZE;</code> does sound fragile, if you <code>mmap</code> only <code>STACK_SIZE</code>. While it is technically correct, if the stack is completely empty, the <code>[rsp]</code> is still considered &quot;top of stack value&quot;, and any code reaching for that just for some check purposes will reach outside of <code>mmap</code> region, I would rather put some <code>nullptr</code> or &quot;canary&quot; value into the new stack, so it will be pointing at <code>stack_region.end()-8</code> address, not exactly at <code>end()</code>."}, {"owner": {"reputation": 1199, "user_id": 2003558, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/B5OVf.jpg?s=128&g=1", "display_name": "Andrew Chang", "link": "https://stackoverflow.com/users/2003558/andrew-chang"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1511330080, "post_id": 47426708, "comment_id": 81809786, "body": "@AjayBrahmakshatriya mmap() succeeded. And I had try writing the mmaped memory and it worked. I am current working. I will upload my project to GitHub when I return home. Thank you for your following !"}, {"owner": {"reputation": 1199, "user_id": 2003558, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/B5OVf.jpg?s=128&g=1", "display_name": "Andrew Chang", "link": "https://stackoverflow.com/users/2003558/andrew-chang"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1511330094, "post_id": 47426708, "comment_id": 81809796, "body": "@Ped7g I am current working. I will upload my project to GitHub when I return home. Thank you for your following !"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 2, "creation_date": 1511340494, "post_id": 47426708, "comment_id": 81814963, "body": "@Ped7g I don&#39;t think that instruction caused the issue. AFAIK there is <i>no</i> reason that instruction can fail. Like OP mentioned he has singled that instruction out by observing that the code works fine in its absence. So it must be something that happens because of that instruction. And misalignment here can definitely cause a crash somewhere in like libc."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1511354027, "post_id": 47426708, "comment_id": 81823773, "body": "@AjayBrahmakshatriya indeed, I agree. I have high doubts the code crashes on the <code>mov rsp,[...]</code> too. It may be possible, but it&#39;s highly unlikely. As I hate AT&amp;T syntax, and I find the topic of context switching mixed with C quite stressful (lot of work, lot of platform specific code, and riding on the edge of UB all the time), I&#39;m reluctant to dig deep into the posted code and seriously imagine what it does. Unless this is educational task, there&#39;s little point to implement your own context switching/MT handling code, that&#39;s already well implemented and custom solution is very rarely helpful"}], "owner": {"reputation": 1199, "user_id": 2003558, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/B5OVf.jpg?s=128&g=1", "display_name": "Andrew Chang", "link": "https://stackoverflow.com/users/2003558/andrew-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511359106, "creation_date": 1511324190, "last_edit_date": 1511359106, "question_id": 47426708, "link": "https://stackoverflow.com/questions/47426708/mixed-assembly-and-c-re-assigning-rsp-register-causes-segmentation-fault", "title": "Mixed assembly and C: re-assigning RSP register causes segmentation fault", "body": "<p>I was trying to re-assign stack for a sub-function. I tried to implement that by mix assembly and C on Linux, x86_64 architecture.</p>\n\n<p>Here is how I planed to to:\n1. Get a section of memory by <code>mmap</code> syscall.\n2. pass the mapped memory to asm func, then assign it to RSP register and jump to that function.</p>\n\n<p>C function:</p>\n\n<pre><code>typedef struct Context\n{\n    uint64_t    rbx;    // 0\n    uint64_t    rsp;    // 8\n    uint64_t    rbp;    // 16\n    uint64_t    r12;    // 24\n    uint64_t    r13;    // 32\n    uint64_t    r14;    // 40\n    uint64_t    r15;    // 48\n    uint64_t    rip;    // 56\n    uint64_t    break_point;    // 64\n} Context_st;\n\nmain_func()\n{\n    ...\n    Context_st contexts[1];\n    Context_st mainContexts;\n\n    // inittialize main stack and the function's stack. This should make the func return to main function, which is this one.\n    _init_contexts(contexts);\n\n    // This should backup main function's context and jump to another function with customized stack\n    _run_contexts(&amp;mainContexts, contexts);\n\n    printf(\"Successfully returned\\n\");       // This could not be executed.\n\n    ...\n}\n\nstatic void _init_contexts(Context_st pContexts[1])\n{\n    int mmapFlags = MAP_PRIVATE | MAP_ANONYMOUS;\n    const size_t STACK_SIZE = 512;\n\n    asm_init_context(&amp;(pContexts[0]));\n    pContexts[0].rip = (uint64_t)_some_func;\n    pContexts[0].break_point = (uint64_t)_func_to_go;\n    pContexts[0].rsp = (uint64_t)mmap(NULL, STACK_SIZE, PROT_READ | PROT_WRITE, mmapFlags, -1, 0);\n    pContexts[0].rsp += STACK_SIZE;\n\n    return;\n}\n\nstatic void _run_contexts(Context_st *pMainCtx, Context_st *pSubCtx)\n{\n    asm_save_main_and_go(pMainCtx, pSubCtx);\n    return;\n}\n</code></pre>\n\n<p>And assembly functions:</p>\n\n<pre><code>#################################################\n##\n    .text\n    .align 4\n    .globl asm_init_context\n    .type asm_init_context, @function\nasm_init_context:\n    movq %rbx, (%rdi)\n    movq %rsp, 8(%rdi)\n    movq %rbp, 16(%rdi)\n    movq %r12, 24(%rdi)\n    movq %r13, 32(%rdi)\n    movq %r14, 40(%rdi)\n    movq %r15, 48(%rdi)\n    retq\n\n#################################################\n##\n    .text\n    .align 4\n    .globl asm_save_main_and_go\n    .type asm_save_main_and_go, @function\nasm_save_main_and_go:\n\n    movq %rbx, (%rdi)\n    movq %rsp, 8(%rdi)\n    movq %rbp, 16(%rdi)\n    movq %r12, 24(%rdi)\n    movq %r13, 32(%rdi)\n    movq %r14, 40(%rdi)\n    movq %r15, 48(%rdi)\n\n    movl %esi, %eax\n    movq (%rsi), %rbx\n    movq 8(%rsi), %rsp      # This is the code which causes SIGSEGV\n    movq 16(%rsi), %rbp\n    movq 24(%rsi), %r12\n    movq 32(%rsi), %r13\n    movq 40(%rsi), %r14\n    movq 48(%rsi), %r15\n    movq 56(%rsi), %rdx\n    push %rdx\n    jmp 64(%rsi)\n</code></pre>\n\n<p>I have marked the asm code which causes SIGSEGV. If I comment it out, the program may correctly run and return to shell. But I do not know why. </p>\n\n<p>Is there anything wrong I did? Or If there is something I need to do additionally to make mmapped memory section capable for RSP register as a customized stack space?</p>\n\n<p>Thank you at advanced !!</p>\n\n<hr>\n\n<p>Updated on Nov 22:</p>\n\n<p>It was very strange: when I switched to another virtual machine, the _func_to_go() was successfully invoked. Although there is another segmentation fault after it returns, it may be known issue because of error stack...</p>\n\n<p>I will keep updated if I replicate the problem. But I hope this remains \"WorksForMe\". </p>\n\n<p>Special thanks to <a href=\"https://stackoverflow.com/users/2858773/ajay-brahmakshatriya\">@AjayBrahmakshatriya</a> and <a href=\"https://stackoverflow.com/users/4271923/ped7g\">@Ped7g</a>. Your discussion pointed out some of my error, and I have corrected or will correct them in my project <a href=\"https://github.com/Andrew-M-C/Linux-Linux_Programming_Template/commit/665f9e6ac4d0cbed21756b5f80a6bc0ec72972bd\" rel=\"nofollow noreferrer\">here</a>. :-)</p>\n"}]