[{"tags": ["c", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1445470246, "post_id": 33270731, "comment_id": 54342988, "body": "This is a compound literal. You have to use a C99 or C11 compiler; MSVC is not standard compliant and should not be used for modern C code. And this is C-only."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1445470576, "post_id": 33270731, "comment_id": 54343090, "body": "@HocineDJEMAI: No problem, we&#39;ve fixed the tagging."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1445470596, "post_id": 33270731, "comment_id": 54343096, "body": "@Olaf it <i>is</i> standard compliant, only problem is the standard it complies to is over 25 years old :D"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445470617, "post_id": 33270731, "comment_id": 54343109, "body": "You have an answer, so you cannot, because it is a compound work in the sense of copyright now. Why delete it? However, you may ask the answerers to delete their answers."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445470701, "post_id": 33270731, "comment_id": 54343126, "body": "Is there a chance that the file, despite being a <code>.c</code>, is set to compile as C++ in project settings? Also, ignore answers claiming that MSVC compiler does not support C99. MSVC compiler supports virtually all C99 core language features, including compound literals."}, {"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445470709, "post_id": 33270731, "comment_id": 54343130, "body": "So it&#39;s OK, I know now where is the problem"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445470753, "post_id": 33270731, "comment_id": 54343145, "body": "@FelixPalmen: This again?;-) The only valid standard is C11. All others have been withdrawn. Blame MS they are not able to support these few simple features (I could imagine there is just no one able/willing to maintain the code anymore)."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445470855, "post_id": 33270731, "comment_id": 54343172, "body": ".. which why I am asking whether it is somehow being compiled as C++. The feature you are trying to use would be accepted by MSVC compiler in C mode."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445470877, "post_id": 33270731, "comment_id": 54343180, "body": "@Olaf see the instant upvote. You can &quot;withdraw&quot; whatever you like, but you can&#39;t invalidate a standard. MSVC still conforms to it."}, {"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445470909, "post_id": 33270731, "comment_id": 54343194, "body": "Yes that&#39;s why I&#39;m surprised because <a href=\"https://msdn.microsoft.com/en-us/library/hh409293.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">here</a> they say that Visual Studio 2015 fully implements the C99 Standard"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445471065, "post_id": 33270731, "comment_id": 54343242, "body": "Hmm, seems as @AnT is correct. They seem to have condescended to finally <a href=\"http://www.infoq.com/news/2013/07/vs2013_CPP_compliance\" rel=\"nofollow noreferrer\">add C99 features</a>. Impressive. Wonder how long it takes they add C11 support."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1445471066, "post_id": 33270731, "comment_id": 54343243, "body": "This is probably off-topic, but ... consider it took them &gt;25 years to support C99 -- when would you expect C11? ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471187, "post_id": 33270731, "comment_id": 54343280, "body": "@Olaf yes, as I already commented, I remember having read something along these lines some time ago ... kind of feels like the hurd hitting stable :D"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471293, "post_id": 33270731, "comment_id": 54343316, "body": "@FelixPalmen: I would not give too much for an upvote... 1) MSVC is a pretty bad reference. Anyway, if a version of the standard has been withdrawn, it is no longer <b>the</b> standard. So done with every previous version once the then new version was released. This is normal, not just for C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471463, "post_id": 33270731, "comment_id": 54343370, "body": "@FelixPalmen: &gt;25 Years? Off-by-ten (roughly)?:-) Although I&#39;m always good for critisism to such lazy companies (which well-added to the bad reputation of C), You can only assume lagging once a standard has been released. Anyway, I don&#39;t care anymore what MS provides or not - luckily."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471497, "post_id": 33270731, "comment_id": 54343386, "body": "@Olaf you keep fighting for that, but that&#39;s <b>not</b> how real life works. Conforming is <b>still</b> conforming. Needing 25 years to conform to a newer standard <i>is</i> ridiculous, no doubts about that ... but &quot;withdrawing&quot; a document doesn&#39;t invalidate a standard."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471548, "post_id": 33270731, "comment_id": 54343399, "body": "@Olaf oh sure, that was the first standard. Sorry, replace all &quot;25&quot; by &quot;15&quot; ... STILL ridiculous :)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445471641, "post_id": 33270731, "comment_id": 54343429, "body": "@Felix Palmen: There&#39;s nothing &quot;ridiculous&quot; about Microsoft&#39;s C compiler."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471798, "post_id": 33270731, "comment_id": 54343470, "body": "@FelixPalmen: Not the standard, because that is always the most resent one, but the version. Of course you are free to implement the old version (and apparently some companies treat this as big news ...). Standard is always the latest version, however, the older ones are not approved by the ISO &amp; IEC, so the only ISO/IEC 9899 <b>standard</b> is ISO/IEC 9899:2011."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445471849, "post_id": 33270731, "comment_id": 54343485, "body": "@AnT: You are right. It is more of a drama. Or maybe a &quot;dramedy&quot; (drama for its users, comedy for those who can use other compilers). But maybe they just need(ed) all manpower for C#. Anyway, we should clean this up."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445471931, "post_id": 33270731, "comment_id": 54343507, "body": "@Felix Palmen: I hereby override that &quot;LOOOOOOOOL&quot;. One more time: There&#39;s nothing &quot;ridiculous&quot; about Microsoft&#39;s C compiler. And I&#39;m not really offering that for discussion. I&#39;m giving it here to be recorded and thoroughly memorized."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445471984, "post_id": 33270731, "comment_id": 54343523, "body": "@AnT: no need to discuss, just having a good laugh at that statement."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445471998, "post_id": 33270731, "comment_id": 54343526, "body": "Kids, please calm down! Look,there&#39;s a playstation in the corner! ;-)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445472071, "post_id": 33270731, "comment_id": 54343546, "body": "@Olaf: No, it is more of a litmus test to detect wannabees posing as software developers, naively believing that they won&#39;t be found out in the first 5 minutes. The well-researched symptom known as &quot;childish microhate&quot; is a dead giveaway :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445472195, "post_id": 33270731, "comment_id": 54343588, "body": "@AnT there&#39;s another giveaway of much greater expressive value: people who think to know shit about others just based on very few statements. In fact, I work exclusively with MS technologies and I&#39;m a huge fan of .NET -- MS just messed up ... (<b>big time</b>) with C and everything related (like legacy win32 API, MFC, ...)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445472264, "post_id": 33270731, "comment_id": 54343609, "body": "@Felix Palmen: Laughing is OK. I&#39;m just trying to point out that sometimes laughter can mean something pertinent to the topic and sometimes it is just means that... well... we are dealing with a reddit-grade LOL-kiddie."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445472356, "post_id": 33270731, "comment_id": 54343627, "body": "@AnT sorry but <i>not</i> acknowledging all the crap MS created in context of the C language ... I think that <i>is</i> laughable. And no, that&#39;s definitely <b>not</b> hate towards a company -- I don&#39;t care much ;)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445472398, "post_id": 33270731, "comment_id": 54343638, "body": "@AnT: I would not take someone not being up-to-date with MS&#39; release announcements as a signal for his expertise. MS is well known to announce features they will cancel silently the next day. Just think of what they announced for Vista and have not realised until W10 (e.g. Dtabase File-storage, etc.). Anyway, I&#39;m out of this kindergarten; happily not needing MS stuff and not really caring anymore unless it crosses into my way."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445472420, "post_id": 33270731, "comment_id": 54343643, "body": "@Felix Palmen: Some &quot;very few statements&quot; are a far cry from other &quot;very few statements&quot;. Sometimes &quot;very few statements&quot; is more than enough. And I know to tell one from the other. So in this particular case I know very well what I&#39;m talking about."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445472544, "post_id": 33270731, "comment_id": 54343681, "body": "@Olaf: I don&#39;t see what &quot;MS release announcements&quot; have to do with this. Frankly, I don&#39;t remember ever paying any attention to any of such announcements."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445472891, "post_id": 33270731, "comment_id": 54343762, "body": "@AnT you really think a compiler reaching C99 compliance <i>this year</i> isn&#39;t  pityful? Really, MS should probably just give up on C. The &quot;core&quot; CLR looks kind of promising."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445473000, "post_id": 33270731, "comment_id": 54343786, "body": "@Felix Palmen: &quot;crap MS created in context of the C language&quot; Er.. What crap? MS&#39;s C89/90 compiler is rightfully the most respected C89/90 compiler. They fell behind with their modern C support, but the development community is glad they are catching up. After all, there&#39;s no credible replacement for Visual Studio as development environment, regardless of target platform."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445473324, "post_id": 33270731, "comment_id": 54343867, "body": "@AnT this gets close to &quot;fanboy speech&quot;. VS does a good job, but a lot more for .NET / CLR code than for C. &quot;The most respected compiler&quot;? Well, <b>long</b> time ago. A few years ago, I could get significantly smaller code size with <i>msvc</i>, compared to <i>gcc</i>. But these times are over. right now, my cross-gcc on linux beats msvc. In the future, the new star will probably be <i>llvm/clang</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445473385, "post_id": 33270731, "comment_id": 54343887, "body": "@AnT and just for completeness .. for quite some while, intel&#39;s <i>icc</i> was the most respected compiler. And by <i>crap</i>, I mean everything around C, especially including the catastrophic win32 API, riddled of crazy all-caps <i>typedefs</i> and <i>hungarian notation</i>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1445473768, "post_id": 33270731, "comment_id": 54343962, "body": "@Felix Palmen: Your cross-gcc might beat msvc as much as it wants (and no, this is not true, as we have seen quite a few times here on SO), but that will only make it a good choice for release builds. I work in a Linux, Linux and only Linux oriented industry, but nevertheless our everyday development (C++ and C in equal proportions) is done in Visual Studio. There&#39;s, again, simply no credible competition to VS as an everyday development tool. Not even remotely."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445473962, "post_id": 33270731, "comment_id": 54344008, "body": "@Felix Palmen: Whatever &quot;fanboy speech&quot; might be present in what I said above (if any), it is there for one purpose only: to carefully counterbalance your &quot;fanboy speech&quot;. In real life I use absolutely everything without any favoritism."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445475660, "post_id": 33270731, "comment_id": 54344462, "body": "@AnT -- you&#39;re the one praising something to be &quot;the best of the best&quot; -- not me."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445476514, "post_id": 33270731, "comment_id": 54344697, "body": "@Felix Palmen: When it comes to fanboyism, there&#39;s no fundamental difference between praising something as &quot;best&quot; or bashing something as &quot;worst&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1445476848, "post_id": 33270731, "comment_id": 54344801, "body": "@AnT no &quot;bashing&quot; is needed for Microsoft when it comes to the language <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>. Although I didn&#39;t ever say &quot;worst&quot; (a candidate could be &quot;turbo C&quot; or something like that) ... it just IS a mess."}, {"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445477058, "post_id": 33270731, "comment_id": 54344864, "body": "I used turbo C++ 3.0 in the past, it was interesting"}, {"owner": {"reputation": 1649, "user_id": 577052, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e9a2c83672830756d239164011622850?s=128&d=identicon&r=PG", "display_name": "Bernhard D&#246;bler", "link": "https://stackoverflow.com/users/577052/bernhard-d%c3%b6bler"}, "edited": false, "score": 3, "creation_date": 1451793843, "post_id": 33270731, "comment_id": 56891435, "body": "I had the same issue and gogole brought me here. I&#39;m annoyed by the amount of hatred that is spread in comments to this question against Visual Studio. To resolve the error using the C++ compiler simply remove the brackets around <code>AVRationale</code> <a href=\"https://reviews.facebook.net/D41889?id=208287\" rel=\"nofollow noreferrer\">reviews.facebook.net/D41889?id=208287</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445469030, "post_id": 33270757, "comment_id": 54342645, "body": "is there an option to compile with C99 with the VS2015 compiler ?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445469281, "post_id": 33270757, "comment_id": 54342716, "body": "@HocineDJEMAI I don&#39;t think so. Your choices are C89, or C++. (Alternatively, edit the code in question to not use C99 syntax. For this particular case, that should be simple)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1445469330, "post_id": 33270757, "comment_id": 54342724, "body": "Uhm, msvc can compile C (it decides by default based on the input filename), and I recently read something about <a href=\"https://stackoverflow.com/questions/tagged/c99\">c99</a> support, but can&#39;t remember where..."}, {"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445469498, "post_id": 33270757, "comment_id": 54342774, "body": "Thanks, i&#39;ll search how to compile with C99"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 2, "creation_date": 1445469599, "post_id": 33270757, "comment_id": 54342807, "body": "@HocineDJEMAI really, save yourself the hassle of fighting with <i>msvc</i> and try mingw-w64."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445470470, "post_id": 33270757, "comment_id": 54343050, "body": "This does not recify adding C++ tag, because it is not a problem with the language itself, but a C++ or broken compiler. Edding the VC(++)-tag would be ok, however, as that is the actual problem."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1445468887, "creation_date": 1445468887, "answer_id": 33270757, "question_id": 33270731, "link": "https://stackoverflow.com/questions/33270731/error-c4576-in-vs2015-enterprise/33270757#33270757", "title": "Error C4576 in VS2015 enterprise", "body": "<p>Looks like a question where the C and C++ tags make sense. You're trying to compile C99 code with a C++ compiler. That doesn't work.</p>\n"}, {"comments": [{"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445471433, "post_id": 33271165, "comment_id": 54343361, "body": "Ok I used the file Source.cpp as proposed by VS2015 and I pasted the content of transcoding.c inside Source.cpp"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 1, "creation_date": 1445471486, "post_id": 33271165, "comment_id": 54343381, "body": "@Hocine DJEMAI: Well, then that&#39;s the root of the issue. C and C++ are two very different languages, you know. Trying to compile C code as C++ will expectedly lead to problems. Which is exactly what you observed. Your code is written in C. Compile it as C, not as C++."}, {"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445471886, "post_id": 33271165, "comment_id": 54343494, "body": "There is no C project in VS that&#39;s why I tried that, usually it works every time I handle a C code"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1445472725, "post_id": 33271165, "comment_id": 54343720, "body": "@Hocine DJEMAI: Firstly, the fact that &quot;worked every time&quot; for you means nothing. &quot;It worked&quot; for you before by pure random coincidence, since C and C++ do share some common features. But you just discovered that it does not work in general case, since C and C++ also have a lot of incompatible features. Secondly, VS does not need &quot;C projects&quot;. You simply create a project and then freely mix C and C++ translation units in that project. Just remember to compile C units as C and C++ units as C++."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 8, "last_activity_date": 1445471164, "creation_date": 1445471164, "answer_id": 33271165, "question_id": 33270731, "link": "https://stackoverflow.com/questions/33270731/error-c4576-in-vs2015-enterprise/33271165#33271165", "title": "Error C4576 in VS2015 enterprise", "body": "<p>Despite what some other answers incorrectly claim, VS2015 compiler provides comprehensive support for C99 features, including the <em>compound literal</em> feature you are trying to use in that problematic line.</p>\n\n<p>One possible explanation for the error message is that it the source file, despite being named as <code>.c</code> file, is being compiled as C++ file. The project settings might explicitly request C++ compiler for this file. In C++ this code is invalid.</p>\n\n<p>Check your compilation settings to see if it by any chance includes a <code>/TP</code> (\"compile as C++\") switch.</p>\n"}, {"tags": [], "owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "is_accepted": false, "score": 5, "last_activity_date": 1463734091, "creation_date": 1463734091, "answer_id": 37342117, "question_id": 33270731, "link": "https://stackoverflow.com/questions/33270731/error-c4576-in-vs2015-enterprise/37342117#37342117", "title": "Error C4576 in VS2015 enterprise", "body": "<p>Old question, but...\nThe solution is pretty simple:</p>\n\n<pre><code>AVRational tb;\ntb.num = 1;\ntb.den = enc_ctx-&gt;sample_rate;\n\nenc_ctx-&gt;time_base = tb;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>enc_ctx-&gt;time_base.num = 1;\nenc_ctx-&gt;time_base.den = enc_ctx-&gt;sample_rate;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 8108245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wH88y2b9cA4/AAAAAAAAAAI/AAAAAAAASno/E9zjILZgoD8/photo.jpg?sz=128", "display_name": "GANESH B K", "link": "https://stackoverflow.com/users/8108245/ganesh-b-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1568061613, "creation_date": 1568061613, "answer_id": 57860930, "question_id": 33270731, "link": "https://stackoverflow.com/questions/33270731/error-c4576-in-vs2015-enterprise/57860930#57860930", "title": "Error C4576 in VS2015 enterprise", "body": "<p>Remove the parenthesis around the type in the macro definition.\nThat should work.</p>\n\n<pre><code>enc_ctx-&gt;time_base = AVRational { 1, enc_ctx-&gt;sample_rate };\n</code></pre>\n"}], "owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6396, "favorite_count": 1, "accepted_answer_id": 33271165, "answer_count": 4, "score": 7, "last_activity_date": 1568061613, "creation_date": 1445468725, "last_edit_date": 1488560872, "question_id": 33270731, "link": "https://stackoverflow.com/questions/33270731/error-c4576-in-vs2015-enterprise", "title": "Error C4576 in VS2015 enterprise", "body": "<p>I have the error <strong>C4576</strong> in Visual studio 2015 when I tried to compile the file: transcoding.c. </p>\n\n<p>The source code of this file is here: <a href=\"https://ffmpeg.org/doxygen/trunk/doc_2examples_2transcoding_8c-example.html\" rel=\"noreferrer\">transcoding.c</a></p>\n\n<blockquote>\n  <p>error C4576: a parenthesized type followed by an initializer list is a non-standard explicit type conversion syntax</p>\n</blockquote>\n\n<p>The error arise at line 127 in this instruction:</p>\n\n<pre><code>enc_ctx-&gt;time_base = (AVRational) { 1, enc_ctx-&gt;sample_rate };\n</code></pre>\n\n<p>I used the source of ffmpeg in my project \n<a href=\"https://www.ffmpeg.org/download.html\" rel=\"noreferrer\">https://www.ffmpeg.org/download.html</a></p>\n\n<p>I searched around for a solution but I'm not able to correct the error</p>\n\n<p>If someone have found something similar, please provide an idea</p>\n"}, {"tags": ["android", "c"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1445468110, "post_id": 33270551, "comment_id": 54342354, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/13654138/what-exactly-is-the-difference-between-pass-by-reference-in-c-and-in-c\">What exactly is the difference between &quot;pass by reference&quot; in C and in C++?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1445467830, "creation_date": 1445467830, "answer_id": 33270573, "question_id": 33270551, "link": "https://stackoverflow.com/questions/33270551/how-can-i-overwrite-the-data-in-an-element-of-an-array-of-structures/33270573#33270573", "title": "How can I overwrite the data in an element of an array of structures?", "body": "<pre><code>void overwrite(Products store){\n</code></pre>\n\n<p>C is pass by value, you need to pass a pointer to <code>Products</code> (i.e., <code>Products *store</code>) and modify the <code>overwrite</code> call in <code>editData</code> accordingly.</p>\n"}, {"comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1445468509, "post_id": 33270647, "comment_id": 54342476, "body": "What&#39;s the point to answer after requesting to close as duplicate?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1445468657, "post_id": 33270647, "comment_id": 54342529, "body": "@ouah: If the question gets closed it&#39;s irrelevant if I answered or not, since I spent my time answering I don&#39;t see your point. I would argue: what&#39;s the point of answering to a question obviously already asked before without searching for a duplicate and marking it, as you did."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1445468957, "post_id": 33270647, "comment_id": 54342627, "body": "For your question, simple, my point is not to explain or re-explain the pass-by-value vs pass-by-reference, my goal is to spot the bug in his code and to show to OP where it is."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1445468315, "creation_date": 1445468315, "answer_id": 33270647, "question_id": 33270551, "link": "https://stackoverflow.com/questions/33270551/how-can-i-overwrite-the-data-in-an-element-of-an-array-of-structures/33270647#33270647", "title": "How can I overwrite the data in an element of an array of structures?", "body": "<p>Basically the problem is that in C you pass arguments by value. So when you specify this signature</p>\n\n<pre><code>void overwrite(Products store)\n</code></pre>\n\n<p>and you invoke it somewhere:</p>\n\n<pre><code>Products myStore;\noverwrite(myStore);\n</code></pre>\n\n<p>what happens is that a copy of <code>myStore</code> is created and placed on the stack, then the value is passed to the function. This means that every modification done to the <code>Products</code> object inside <code>overwrite</code> applies on the passed copy, not on the original object. This copy is then discarded when exiting the scope of <code>overwrite</code> function.</p>\n\n<p>To solve this problem you must pass a pointer to the object, that is passed by value but being an address will point to the exact same <code>myStore</code> object. This is done in this way:</p>\n\n<pre><code>void overwrite(Products* store)\n{\n  ..\n  scanf(\"%f\", &amp;store-&gt;price);\n  ..\n}\n\nProducts myStore;\noverwrite(&amp;myStore);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4724018, "user_type": "registered", "profile_image": "https://graph.facebook.com/354528071401091/picture?type=large", "display_name": "Michael Kied Armstread", "link": "https://stackoverflow.com/users/4724018/michael-kied-armstread"}, "is_accepted": false, "score": 0, "last_activity_date": 1445469049, "creation_date": 1445469049, "answer_id": 33270785, "question_id": 33270551, "link": "https://stackoverflow.com/questions/33270551/how-can-i-overwrite-the-data-in-an-element-of-an-array-of-structures/33270785#33270785", "title": "How can I overwrite the data in an element of an array of structures?", "body": "<p>According to Ouah, I passed the structure as the value itself, which did happen in my code. </p>\n\n<p>So what I did is... </p>\n\n<pre><code>void overwrite(Products * store){ //formal parameter changed into a pointer\n  //codes here\n}\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>overwrite(&amp;(store[choice])); /* actual parameter changed into a pointer by affixing ampersand*/\n</code></pre>\n\n<p>Further explanations of the codes' misbehavior were explained by Jack. I extend my gratitudes to you. The code now worked as it should be.</p>\n"}], "owner": {"reputation": 19, "user_id": 4724018, "user_type": "registered", "profile_image": "https://graph.facebook.com/354528071401091/picture?type=large", "display_name": "Michael Kied Armstread", "link": "https://stackoverflow.com/users/4724018/michael-kied-armstread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1445469049, "creation_date": 1445467670, "question_id": 33270551, "link": "https://stackoverflow.com/questions/33270551/how-can-i-overwrite-the-data-in-an-element-of-an-array-of-structures", "title": "How can I overwrite the data in an element of an array of structures?", "body": "<p>So, I have this structure:</p>\n\n<pre><code>typedef struct{\n    int serialNumber;\n    char name[100];\n    float price;\n    int quantity;\n }Products;\n</code></pre>\n\n<p>And I created an array of structures dynamically. </p>\n\n<p>The task was to 'simulate' a grocery store, with the user able to add and edit the items sold by the store. The following code snippets are for editing structure data.</p>\n\n<pre><code>void overwrite(Products store){\n   printf(\"Enter new serial number: \");\n   scanf(\"%d\", &amp;(store.serialNumber));\n\n   getchar();\n\n   printf(\"Enter new product name: \");\n   fgets(store.name, 100, stdin);\n   store.name[strlen(store.name)-1]='\\0';\n\n   printf(\"Enter new product price: \");\n   scanf(\"%f\", &amp;(store.price));\n\n   printf(\"Enter new product quantity: \");\n   scanf(\"%d\", &amp;(store.quantity));\n }\n\nvoid editData(Products *store, int storeCapacity){ //storeCapacity needed to invoke printData(), assume a working code for the function.\n\n  int choice;\n\n  printData(store, storeCapacity);\n  printf(\"Enter slot number of product here: \");\n  scanf(\"%d\", &amp;choice);\n\n  overwrite(store[choice]);\n}\n</code></pre>\n\n<p>Here's the catch, even though this code works, when I try to print the data, the data displays the values which should be overwritten. Have I forgotten to do something? I wish you could help me. </p>\n\n<p>BTW, I code on an Android phone. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 4, "creation_date": 1445466765, "post_id": 33270372, "comment_id": 54341930, "body": "I&#39;m voting to close this question as off-topic because it shows no effort when posting."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1445467046, "post_id": 33270372, "comment_id": 54342024, "body": "Am voting to close too, no effort, had to take liberty in reformatting the code. Shows laziness on OP&#39;s part. We are not here to do work for you. Show us what you have done/debugged/tried?"}, {"owner": {"reputation": 16544, "user_id": 4346285, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8e2aac571a1fb790a21ebf5c7e4a484e?s=128&d=identicon&r=PG&f=1", "display_name": "JenB", "link": "https://stackoverflow.com/users/4346285/jenb"}, "edited": false, "score": 0, "creation_date": 1445467346, "post_id": 33270372, "comment_id": 54342116, "body": "Is it giving an error message (if so, what)? What test data did you use and what did the function return. Please clarify what you are actually asking."}], "answers": [{"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 0, "last_activity_date": 1445468985, "creation_date": 1445468985, "answer_id": 33270773, "question_id": 33270372, "link": "https://stackoverflow.com/questions/33270372/palindromic-numbers-code-not-working/33270773#33270773", "title": "Palindromic numbers, code not working", "body": "<p>You should be setting <code>reverse</code> back to 0 for each new <code>n</code></p>\n\n<pre><code>while ( n &lt;= 999)\n{\n    reverse = 0; # &lt;== otherwise you are using old value in reverse\n    temp = n;\n    while(temp!=0)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5473584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9569ca50374e41a7d5d7e23872c7a0f2?s=128&d=identicon&r=PG&f=1", "display_name": "D0013", "link": "https://stackoverflow.com/users/5473584/d0013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1445470337, "accepted_answer_id": 33270773, "answer_count": 1, "score": -6, "last_activity_date": 1445468985, "creation_date": 1445466682, "last_edit_date": 1445466971, "question_id": 33270372, "link": "https://stackoverflow.com/questions/33270372/palindromic-numbers-code-not-working", "closed_reason": "Not suitable for this site", "title": "Palindromic numbers, code not working", "body": "<p>Can someone tell what wrong with my code?</p>\n\n<p>This code is attempting to deduce a palindrome for numbers from 100-999</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ()\n{\n    int  temp, n, reverse = 0, rem;\n    n = 100;\n    while ( n &lt;= 999)\n    {\n        temp = n;\n        while(temp!=0)\n        {\n            rem = temp%10;\n            reverse = reverse*10+rem;\n            temp/=10;\n        }\n        if ( reverse == n )\n        {\n            printf(\" %d \\t\", n);\n        }\n        n = n + 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "sockets", "select"], "comments": [{"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 1, "creation_date": 1445465025, "post_id": 33269990, "comment_id": 54341232, "body": "When select says that sock_client is readable, what happens when you read from it? Specifically, what does the read() call return?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1445465076, "post_id": 33269990, "comment_id": 54341251, "body": "When you get to EOF, the socket is always readable, and returns <code>0</code> when you read from it. You need to close the socket then and stop selecting on it."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1445465294, "post_id": 33269990, "comment_id": 54341346, "body": "Select()ing readable actually means: &quot;a read() will not block&quot; (in most cases, etc) And: after select()ing readable, you should do the read(), and use its return value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1445465903, "post_id": 33269990, "comment_id": 54341589, "body": "Isn&#39;t this enough for a valid answer? Combine the <i>reading won&#39;t block</i> semantics of <code>select()</code> with the hint this might be caused by EOF, I&#39;d say this <i>is</i> an answer ..."}, {"owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "edited": false, "score": 0, "creation_date": 1445465988, "post_id": 33269990, "comment_id": 54341617, "body": "Thanks for your answers, the problem is that the program is blocked on the read. I mean that the program is waiting to get something to read from &quot;sock_client&quot;, so I don&#39;t have any call return from read()."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1445466099, "post_id": 33269990, "comment_id": 54341667, "body": "Why are you selecting on <code>sock_client</code> but reading from <code>server_socket</code>? Looks like a simple typo. Could that be the problem?"}, {"owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "edited": false, "score": 0, "creation_date": 1445466691, "post_id": 33269990, "comment_id": 54341896, "body": "You definitely right, I&#39;m sorry ! Shame on me, I have this in front of me for 2 hours and I didn&#39;t see it. However, now I am receiving the call return from read() which is -1. But the problem remains, sock_client is always detected as readable indefinitely."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1445466840, "post_id": 33269990, "comment_id": 54341957, "body": "Please post the exact code  and the new behaviour in the question proper (not as comments). Please leave the original code there so that the comments trail remains valid. Add the new code below the current."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1445467952, "post_id": 33269990, "comment_id": 54342311, "body": "Is your <code>sock_client</code> actually connected? I&#39;m guessing your <code>do_socket</code> only creates (and perhaps binds) the socket. But where is the connect?"}, {"owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "edited": false, "score": 0, "creation_date": 1445468169, "post_id": 33269990, "comment_id": 54342369, "body": "I think the connexion is OK, the connexion happens with &#39;do_connect&#39;. It worked well before I add a select to detect messages from server in fact."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1445468278, "post_id": 33269990, "comment_id": 54342406, "body": "Well, what does read() returning -1 <i>mean</i>? Why don&#39;t you check errno?"}, {"owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "edited": false, "score": 0, "creation_date": 1445468595, "post_id": 33269990, "comment_id": 54342507, "body": "You&#39;re right, I haven&#39;t good automatism yet. I get this with perror() : Transport endpoint is not connected"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1445468765, "post_id": 33269990, "comment_id": 54342571, "body": "So you&#39;re still, after all this, reading from the wrong socket, or else you&#39;ve never accepted a client in the first place. I don&#39;t see that anywhere. NB Don&#39;t think that error checking is something you add later when it&#39;s all working. You&#39;ll never get it working without the error checking."}, {"owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "edited": false, "score": 0, "creation_date": 1445469437, "post_id": 33269990, "comment_id": 54342761, "body": "Thank you for your time, I am surely doing something wrong ;)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1445469657, "post_id": 33269990, "comment_id": 54342827, "body": "But there is no <code>do_connect</code> shown that uses <code>sock_client</code>. And that&#39;s exactly what the perror told you - it&#39;s not connected."}, {"owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "edited": false, "score": 0, "creation_date": 1445470970, "post_id": 33269990, "comment_id": 54343208, "body": "Correct ! I just realized that I hadn&#39;t understood well the connect() function ... And it worked before by chance. Thank you all again for your time, I&#39;ve learned a lot."}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 2, "last_activity_date": 1445467169, "creation_date": 1445467169, "answer_id": 33270467, "question_id": 33269990, "link": "https://stackoverflow.com/questions/33269990/c-select-always-detects-a-socket-readable/33270467#33270467", "title": "C select always detects a socket readable", "body": "<p>You don't need the <code>memset(),</code> and you cannot convince me that reading from the listening socket blocks. The real problem here is that you are:</p>\n\n<ul>\n<li>reading from the wrong socket FD, and</li>\n<li>completely ignoring the value returned by <code>read()</code>.</li>\n</ul>\n\n<p>You need to:</p>\n\n<ol>\n<li>Store it in a value.</li>\n<li>Compare it to -1, and if so call <code>perror()</code> or one of its friends immediately, and close the socket.</li>\n<li>Otherwise, compare it to zero, and if so clos the socket.</li>\n<li>Otherwise, use the positive value that must remain as the length of the incoming data? That's why you don't need the <code>memset()</code>.</li>\n</ol>\n"}], "owner": {"reputation": 763, "user_id": 5035392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/BKinx.png?s=128&g=1", "display_name": "ImbaBalboa", "link": "https://stackoverflow.com/users/5035392/imbabalboa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 33270467, "answer_count": 1, "score": 1, "last_activity_date": 1445467518, "creation_date": 1445464665, "last_edit_date": 1445467518, "question_id": 33269990, "link": "https://stackoverflow.com/questions/33269990/c-select-always-detects-a-socket-readable", "title": "C select always detects a socket readable", "body": "<p>I looked for an answered on quite similar topic, but I have not find a good answer (I think). </p>\n\n<p>First my code :</p>\n\n<pre><code>fd_set readset;\nint result;\n\nwhile(1) {\n    FD_ZERO(&amp;readset);\n    FD_SET(sock_client, &amp;readset);\n    FD_SET(fileno(stdin), &amp;readset);\n    result = select(sock_client + 1, &amp;readset, NULL, NULL, NULL);\n\n    if (result &gt; 0) {\n        if (FD_ISSET(sock_client, &amp;readset)) {\n            memset(buffer, 0, sizeof(buffer));\n             read(server_socket, buffer, 5000);\n            printf(\"%s\", buffer);\n        } \n\n        if (FD_ISSET(fileno(stdin), &amp;readset)) {\n            memset(msg, 0, sizeof(msg));\n            read(fileno(stdin), msg, 5000);\n            printf(\"%s\", msg);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT (error in the read() corrected):</strong></p>\n\n<pre><code>// socket client\nsock_client = do_socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\n// socket server\nserver_socket = do_socket(AF_INET, SOCK_STREAM, 0);\n\n// server connexion\ndo_connect(server_socket, \n    (struct sockaddr *) &amp; addr_sock_host, sizeof(addr_sock_host));\n\nfd_set readset;\nint result;\n\nwhile(1) {\n    FD_ZERO(&amp;readset);\n    FD_SET(sock_client, &amp;readset);\n    FD_SET(fileno(stdin), &amp;readset);\n    result = select(sock_client + 1, &amp;readset, NULL, NULL, NULL);\n\n    if (result &gt; 0) {\n        if (FD_ISSET(sock_client, &amp;readset)) {\n            memset(buffer, 0, sizeof(buffer));\n            int size = read(sock_client, buffer, 5000);\n            printf(\"size : %i\\n\", size);\n        } \n\n        if (FD_ISSET(fileno(stdin), &amp;readset)) {\n            memset(msg, 0, sizeof(msg));\n            read(fileno(stdin), msg, 5000);\n            printf(\"%s\", msg);\n        }\n    }\n}\n</code></pre>\n\n<p>When I run it : </p>\n\n<pre><code>size : -1\nsize : -1\nsize : -1\nsize : -1\nsize : -1\nsize : -1\nsize : -1\nsize : -1\n</code></pre>\n\n<p>... infinitely</p>\n\n<p><strong>END OF EDIT</strong></p>\n\n<p>Actually, select returns always 1 because sock_client is always in readset whereas there is nothing to read on it. Over more, my FD_SET are in the infinite loop. That's why I don't understand how it's possible that sock_client be detected as readable (always) ?</p>\n\n<p>I hope you will understand my problem and I apologize if the question has already been asked.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445463208, "post_id": 33269647, "comment_id": 54340413, "body": "There was an equivalent question recently asked here. There are tons of duplicates here on SO, I think."}, {"owner": {"reputation": 997, "user_id": 2085282, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7f3c60909c612ccd978a2e381c4ac45?s=128&d=identicon&r=PG", "display_name": "user2085282", "link": "https://stackoverflow.com/users/2085282/user2085282"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1445463245, "post_id": 33269647, "comment_id": 54340437, "body": "@cad right <a href=\"http://stackoverflow.com/questions/33269283/scanf-not-reading-in-double#33269387\" title=\"scanf not reading in double%2333269387\">stackoverflow.com/questions/33269283/&hellip;</a> here, in fact"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445470844, "post_id": 33269647, "comment_id": 54343169, "body": "...but <a href=\"http://stackoverflow.com/questions/33180158/why-is-the-program-printing-0s\" title=\"why is the program printing 0s\">stackoverflow.com/questions/33180158/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445470822, "post_id": 33269659, "comment_id": 54343162, "body": "OTOH... <a href=\"http://stackoverflow.com/questions/33180158/why-is-the-program-printing-0s\" title=\"why is the program printing 0s\">stackoverflow.com/questions/33180158/&hellip;</a>"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 3, "last_activity_date": 1445463194, "creation_date": 1445463194, "answer_id": 33269659, "question_id": 33269647, "link": "https://stackoverflow.com/questions/33269647/not-working-real-number-in-c/33269659#33269659", "title": "Not working real number in c", "body": "<p>Use <code>%lf</code> conversion specification to read a <code>double</code>, <code>%f</code> is for <code>float</code>.</p>\n"}], "owner": {"reputation": 3436, "user_id": 1370062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/uersX.png?s=128&g=1", "display_name": "RMachnik", "link": "https://stackoverflow.com/users/1370062/rmachnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1445463271, "accepted_answer_id": 33269659, "answer_count": 1, "score": 0, "last_activity_date": 1445463229, "creation_date": 1445463141, "last_edit_date": 1445463229, "question_id": 33269647, "link": "https://stackoverflow.com/questions/33269647/not-working-real-number-in-c", "closed_reason": "Duplicate", "title": "Not working real number in c", "body": "<p>I am facing very very strange issue. \nI am writing very simple program in <code>C</code>.</p>\n\n<p>Program needs to do: read real number and display it on console.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    double a;\n    printf(\"Give a: \");\n    scanf(\"%f\",&amp;a);\n    printf(\"Result for a = %f \\n\",a);\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>sh-4.3$ gcc -o main *.c                                                                                                                                                                                                                                \nsh-4.3$ main                                                                                                                                                                                                                                           \nGive a: 123.345                                                                                                                                                                                                                                        \nResult for a = 0.000000 \n</code></pre>\n\n<p><a href=\"http://goo.gl/4j2Bjv\" rel=\"nofollow\">http://goo.gl/4j2Bjv</a></p>\n\n<p>Why there is 0.0000 instead of my number?\nPersonally I have no idea.... code from this <a href=\"http://www.dailyfreecode.com/code/reading-real-numbers-2569.aspx\" rel=\"nofollow\">site</a> is working fine.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["c", "arrays", "random", "swap"], "comments": [{"owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1445462953, "post_id": 33269540, "comment_id": 54340276, "body": "I&#39;m not sure if I&#39;m generating these two random elements from this array correctly because my program will not print them"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1445463164, "post_id": 33269540, "comment_id": 54340389, "body": "If you want to swap them, you better to keep their indicies rather than values..."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1445463837, "post_id": 33269664, "comment_id": 54340715, "body": "Okay I fixed that and it seems to generate two random indices now. So in my original code, is the swapping elements portion correct?"}, {"owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "reply_to_user": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1445463916, "post_id": 33269664, "comment_id": 54340747, "body": "No, you swapped just the variables. I have added the swap to my answer"}], "tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": false, "score": 0, "last_activity_date": 1445463895, "last_edit_date": 1445463895, "creation_date": 1445463211, "answer_id": 33269664, "question_id": 33269540, "link": "https://stackoverflow.com/questions/33269540/randomly-choose-two-elements-from-array-and-swap-values-in-c/33269664#33269664", "title": "Randomly choose two elements from array and swap values in C", "body": "<p>You have 2 big problems:</p>\n\n<ol>\n<li>You need to generate random indices and swap the elements at those indices, not take 2 random elements of the array:</li>\n</ol>\n\n<p>.</p>\n\n<pre><code>randomOne = rand() % ORD_SIZE;\nrandomTwo = rand() % ORD_SIZE;\nprintf(\"%d\", ord[randomOne]);\nprintf(\"%d\", ord[randomTwo]);\n\nint temporary = ord[randomOne];\nord[randomOne] = ord[randomTwo];\nord[randomTwo] = temporary;\n</code></pre>\n\n<ol start=\"2\">\n<li>Your array, <code>ord</code>, is not initialized.</li>\n</ol>\n\n<p>Also, take a look at <a href=\"http://blog.codinghorror.com/the-danger-of-naivete/\" rel=\"nofollow\">http://blog.codinghorror.com/the-danger-of-naivete/</a>. Your \"randomness\" may be a bit biased towards certain indices.</p>\n"}], "owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445463895, "creation_date": 1445462728, "last_edit_date": 1445463092, "question_id": 33269540, "link": "https://stackoverflow.com/questions/33269540/randomly-choose-two-elements-from-array-and-swap-values-in-c", "title": "Randomly choose two elements from array and swap values in C", "body": "<p>I'm writing a program where part of the instructions is to randomly choose two different ord[] elements and then swap their contents. I'm firstly having issues even generating a random element from the array, let alone swapping them (I can't even get it to print the random values). What am I doing wrong? I'm sorry if I'm messing everything up completely. Here is what I have so far: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\nint main()\n{\n#define MMAX 5;\n#define ORD_SIZE ( sizeof((ord)) / sizeof((ord[0])) )\nint randomOne = 0;\nint randomTwo = 0;\nint ord[MMAX];\n\nsrand(time(NULL));\nrandomOne = ord[rand() % ORD_SIZE];\nrandomTwo = ord[rand() % ORD_SIZE];\nprintf(\"%d\", randomOne);\nprintf(\"%d\", randomTwo);\n\nint tmp = 0;\ntmp = randomOne;\nrandomOne = randomTwo;\nrandomTwo = tmp;\nprintf(\"%d\", ord[randomOne]);\nprintf(\"%d\", ord[randomTwo]);\n\nreturn 0;}\n</code></pre>\n"}, {"tags": ["c", "floating-point", "double", "scanf"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1445461702, "post_id": 33269283, "comment_id": 54339618, "body": "why is result int and not double ?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1445462396, "post_id": 33269283, "comment_id": 54339964, "body": "@user3121023 I was only curious  to know the intention of OP by doing that. :)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536467157, "post_id": 33269283, "comment_id": 91431218, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27657977/scanf-for-double-not-working-in-dev-c\">Scanf for double not working in Dev C++</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536467174, "post_id": 33269283, "comment_id": 91431226, "body": "<a href=\"https://stackoverflow.com/q/19890748/995714\">Problems with scanf and doubles</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 8, "last_activity_date": 1445461967, "creation_date": 1445461967, "answer_id": 33269345, "question_id": 33269283, "link": "https://stackoverflow.com/questions/33269283/scanf-not-reading-in-double/33269345#33269345", "title": "Scanf not reading in double", "body": "<p>You lied to the compiler: when scanning, <code>%f</code> says you supply a pointer to <code>float</code>. But you provided a pointer to <code>double</code>.</p>\n\n<p>To fix, either use <code>%lf</code> <strong>or</strong> declare <code>input</code> as <code>float</code>.</p>\n\n<p>Note that there is an asymmetry with <code>printf</code> formats, which uses <code>%f</code> for both <code>float</code> and <code>double</code> arguments. This works because <code>printf</code> arguments are promoted to <code>double</code> (and are not pointers).</p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1445462822, "post_id": 33269387, "comment_id": 54340205, "body": "Should it be <code>!= EOF</code> or <code>== 1</code>?"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1445463849, "post_id": 33269387, "comment_id": 54340722, "body": "@FiddlingBits, you are correct, answer updated. <a href=\"http://www.rowleydownload.co.uk/arm/documentation/index.htm?http://www.rowleydownload.co.uk/arm/documentation/scanf.htm\" rel=\"nofollow noreferrer\">scanf returns the value of the macro EOF if an input failure occurs before any conversion. Otherwise, scanf returns the number of input items assigned, which can be fewer than provided for, or even zero, in the event of an early matching failure.</a>"}], "tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": false, "score": 3, "last_activity_date": 1445463797, "last_edit_date": 1445463797, "creation_date": 1445462148, "answer_id": 33269387, "question_id": 33269283, "link": "https://stackoverflow.com/questions/33269283/scanf-not-reading-in-double/33269387#33269387", "title": "Scanf not reading in double", "body": "<blockquote>\n  <p>I am trying to read in a double value <strong>continuously</strong> from the user using scanf.</p>\n</blockquote>\n\n<p>To do so you need a loop, like the following:</p>\n\n<pre><code>while(scanf(\"%lf\", &amp;input) == 1) {\n    //code goes here...\n    printf(\"INPUT: %lf\\n\", input);\n    //code goes here...\n}\n</code></pre>\n\n<p>Note that, as the primitive type of <code>input</code> is <code>double</code>, you need to use <code>%lf</code> instead of <code>%f</code> (<code>%f</code>used for <code>float</code>).</p>\n"}], "owner": {"reputation": 69, "user_id": 3235947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CkIYt.jpg?s=128&g=1", "display_name": "code", "link": "https://stackoverflow.com/users/3235947/code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2099, "favorite_count": 0, "accepted_answer_id": 33269345, "answer_count": 2, "score": 2, "last_activity_date": 1445463797, "creation_date": 1445461656, "last_edit_date": 1445461790, "question_id": 33269283, "link": "https://stackoverflow.com/questions/33269283/scanf-not-reading-in-double", "title": "Scanf not reading in double", "body": "<p>I am trying to read in a <code>double</code> value continuously from the user  using <code>scanf</code>.</p>\n\n<p>Code: </p>\n\n<pre><code>printf(\"Enter A value: \\n\");\ndouble input;\nint result = scanf(\"%f\", &amp;input);\nprintf(\"INPUT: %f\\n\", input);\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>INPUT: 0.000\n</code></pre>\n"}, {"tags": ["c#", "c", "dll"], "comments": [{"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1445461309, "post_id": 33269068, "comment_id": 54339397, "body": "Personally, I&#39;d use the first method, and then add it to the project as an &quot;existing item&quot; then set the build action to none, and the &quot;Copy to Output Directory&quot; as &quot;Copy Always&quot; or &quot;Copy If Newer&quot;. The problem comes in if you change your directory structure even a little, your build will break, and if you ever move into source control, somebody else will not have the same folder structure."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 1, "creation_date": 1445461648, "post_id": 33269068, "comment_id": 54339590, "body": "Take a look at <a href=\"https://msdn.microsoft.com/en-us/library/7d83bc18.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/7d83bc18.aspx</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1445461427, "post_id": 33269162, "comment_id": 54339460, "body": "See my comment about forcing it into the output directory of your application."}], "tags": [], "owner": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "is_accepted": false, "score": 0, "last_activity_date": 1445461276, "creation_date": 1445461276, "answer_id": 33269162, "question_id": 33269068, "link": "https://stackoverflow.com/questions/33269068/where-does-a-c-program-look-for-a-dll/33269162#33269162", "title": "Where does a C# program look for a DLL?", "body": "<p>I found that the search base is where the .EXE is so the import needs to be like this:</p>\n\n<pre><code>[DllImport(\"\\\\..\\\\..\\\\..\\\\..\\\\..\\\\Debug\\\\C_dll.dll\", CharSet = CharSet.Unicode)]\n</code></pre>\n\n<p>If anyone could suggest a way to force C_dll.dll to land where the .EXE is then I would really appreciate the information.</p>\n\n<p>Thanks</p>\n"}, {"comments": [{"owner": {"reputation": 1462, "user_id": 445159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db78d0607a60347d9f61acf0b0451ef?s=128&d=identicon&r=PG", "display_name": "bigtlb", "link": "https://stackoverflow.com/users/445159/bigtlb"}, "edited": false, "score": 1, "creation_date": 1445462388, "post_id": 33269405, "comment_id": 54339960, "body": "Scott Hanselman has a good <a href=\"http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx\" rel=\"nofollow noreferrer\">blog post about FUSLOGVW</a>"}, {"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1445463601, "post_id": 33269405, "comment_id": 54340611, "body": "Unfortunately FUSLOGVW and assembly loading don&#39;t apply here, since the reference is not a project reference, but a p/invoke one. The DLL is not added as a project reference, its just referenced in code via <code>DLLImport</code>."}, {"owner": {"reputation": 1462, "user_id": 445159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db78d0607a60347d9f61acf0b0451ef?s=128&d=identicon&r=PG", "display_name": "bigtlb", "link": "https://stackoverflow.com/users/445159/bigtlb"}, "reply_to_user": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1445463926, "post_id": 33269405, "comment_id": 54340754, "body": "Sorry I didn&#39;t think about that.  @RonBeyer:  Your earlier comment about &quot;Build Action&quot; and &quot;Copy Directory&quot; are still valid.  Fusion rules are very similar to <a href=\"https://msdn.microsoft.com/en-us/library/ms682586%28VS.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">Win32 LoadLibrary rules</a>  (minus the GAC of course).  So the advise of putting the dll next to the currently executing assembly is still a good one."}, {"owner": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "edited": false, "score": 0, "creation_date": 1445471934, "post_id": 33269405, "comment_id": 54343509, "body": "Where do I find &quot;Build Action&quot;? Can you please be more specific on how to navigate to the various places?"}], "tags": [], "owner": {"reputation": 1462, "user_id": 445159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db78d0607a60347d9f61acf0b0451ef?s=128&d=identicon&r=PG", "display_name": "bigtlb", "link": "https://stackoverflow.com/users/445159/bigtlb"}, "is_accepted": false, "score": 0, "last_activity_date": 1445462209, "creation_date": 1445462209, "answer_id": 33269405, "question_id": 33269068, "link": "https://stackoverflow.com/questions/33269068/where-does-a-c-program-look-for-a-dll/33269405#33269405", "title": "Where does a C# program look for a DLL?", "body": "<p>As stated, the best thing to do is set the \"Build Action\" to <code>None</code> and the \"Copy to Output Directory\" to <code>Copy Always</code> or <code>Copy if Newer</code>.</p>\n\n<p>.Net uses an assembly loading schema called <a href=\"https://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow\">Fusion</a>, this will look along an explicit path, locally (to the executing assembly), in the GAC and then along the path environment variable.  This logic can be different if your application is running from the internet or intranet.</p>\n\n<p>FUSLOGVW would be a good tool to see where Fusion is looking to find your dll.  But, the simplest thing is to include your assemblies in the currently executing assembly folder.</p>\n"}, {"comments": [{"owner": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "edited": false, "score": 0, "creation_date": 1445470122, "post_id": 33269585, "comment_id": 54342955, "body": "I went to Configuration Manager but it doesn&#39;t have a properties/General. Maybe you mean the properties of the project. So I went there for the dll project and there is an output section and that says &quot;$(SolutionDir)$(Configuration)\\&quot;. On the dll project, select Properties, under Configuration Properties click General, then Output Directory.  So I changed it to &quot;$(ProjectDir)\\..\\Call_C\\bin\\$(Configuration)\\&quot;. Then changed the import statement to &quot;[DllImport(&quot;C_dll.dll&quot;, CharSet = CharSet.Unicode)]&quot;. Then did the same thing for the release configuration.  That works perfectly .... thanks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5447154"}, "reply_to_user": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "edited": false, "score": 0, "creation_date": 1445503536, "post_id": 33269585, "comment_id": 54354187, "body": "@user3389362 yes that&#39;s what I wanted to say ... sorry for my english"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5447154"}, "is_accepted": false, "score": 1, "last_activity_date": 1445462911, "creation_date": 1445462911, "answer_id": 33269585, "question_id": 33269068, "link": "https://stackoverflow.com/questions/33269068/where-does-a-c-program-look-for-a-dll/33269585#33269585", "title": "Where does a C# program look for a DLL?", "body": "<p>this <code>[DllImport(\"C_dll.dll\", CharSet = CharSet.Unicode)]</code>is correct. Just configure the output of C_dll.dll in the same directory of your EXE (Call_C.exe). In Visual Studio Go to Configuration Manager and Configure the  output directory of your C_dll.dll in Configuration properties/General</p>\n"}], "owner": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1445462911, "creation_date": 1445460957, "question_id": 33269068, "link": "https://stackoverflow.com/questions/33269068/where-does-a-c-program-look-for-a-dll", "title": "Where does a C# program look for a DLL?", "body": "<p>I wrote a very simple C# program that opens a DLL. There are two projects ... (1) a project being a C function built as a DLL and (2) the C# program that uses the DLL.</p>\n\n<p>The C# program has the following line:</p>\n\n<pre><code>[DllImport(\"C_dll.dll\", CharSet = CharSet.Unicode)]\n</code></pre>\n\n<p>But when I run it doesn't find the DLL.</p>\n\n<p>Since the build shows the DLL here: </p>\n\n<pre><code>\"W:\\Dropbox\\DSI (His)\\Windows Apps\\Debug\\C_dll.dll\"\n</code></pre>\n\n<p>I changed the DllImport to:</p>\n\n<pre><code>[DllImport(\"W:\\\\Dropbox\\\\DSI (His)\\\\Windows Apps\\\\Debug\\\\C_dll.dll\", CharSet = CharSet.Unicode)]\n</code></pre>\n\n<p>And, of course, it runs. But I want the location to be relative. So I tried these paths:</p>\n\n<pre><code>[DllImport(\"..\\\\..\\\\..\\\\Debug\\\\C_dll.dll\", CharSet = CharSet.Unicode)]\n    (that is relative to where the projects are)\n    and\n[DllImport(\"Debug\\\\C_dll.dll\", CharSet = CharSet.Unicode)]\n    (that is relative to where the solution is)\n</code></pre>\n\n<p>To check my relative paths I did some dirs:</p>\n\n<pre><code>W:\\Dropbox\\DSI (His)\\Windows Apps\\Testing\\C_sharp\\C_dll&gt;dir /s/b \"..\\\\..\\\\..\\\\debug\\\\C_dll.dll\" C_dll.vcxproj\nW:\\Dropbox\\DSI (His)\\Windows Apps\\debug\\C_dll.dll\nW:\\Dropbox\\DSI (His)\\Windows Apps\\Testing\\C_sharp\\C_dll\\C_dll.vcxproj\n\nW:\\Dropbox\\DSI (His)\\Windows Apps&gt;dir /s/b \"Debug\\C_dll.dll\" Apps.sln\nW:\\Dropbox\\DSI (His)\\Windows Apps\\Debug\\C_dll.dll\nW:\\Dropbox\\DSI (His)\\Windows Apps\\Apps.sln\n</code></pre>\n\n<p>So I'm perplexed. Does anyone know what I'm doing wrong?????</p>\n\n<p>The build output is:</p>\n\n<pre><code>1&gt;------ Rebuild All started: Project: C_dll, Configuration: Debug Win32 ------\n1&gt;  C_dll.c\n1&gt;     Creating library W:\\Dropbox\\DSI (His)\\Windows Apps\\Debug\\C_dll.lib and object W:\\Dropbox\\DSI (His)\\Windows Apps\\Debug\\C_dll.exp\n1&gt;  C_dll.vcxproj -&gt; W:\\Dropbox\\DSI (His)\\Windows Apps\\Debug\\C_dll.dll\n2&gt;------ Rebuild All started: Project: Call_C, Configuration: Debug Any CPU ------\n2&gt;  Call_C -&gt; W:\\Dropbox\\DSI (His)\\Windows Apps\\Testing\\C_sharp\\Call_C\\bin\\Debug\\Call_C.exe\n========== Rebuild All: 2 succeeded, 0 failed, 0 skipped ==========\n</code></pre>\n\n<p>The tree for my solution follows:</p>\n\n<pre><code>W:\\DROPBOX\n\u2514\u2500\u2500\u2500DSI\n    \u2514\u2500\u2500\u2500Windows Apps\n        \u251c\u2500\u2500\u2500c_sharp_test\n        \u2502   \u251c\u2500\u2500\u2500bin\n        \u2502   \u2502   \u251c\u2500\u2500\u2500Debug\n        \u2502   \u2502   \u2514\u2500\u2500\u2500Release\n        \u2502   \u251c\u2500\u2500\u2500obj\n        \u2502   \u2502   \u2514\u2500\u2500\u2500Debug\n        \u2502   \u2502       \u2514\u2500\u2500\u2500TempPE\n        \u2502   \u2514\u2500\u2500\u2500Properties\n        \u2514\u2500\u2500\u2500Debug\n</code></pre>\n\n<p>The .sln file path is: </p>\n\n<pre><code>W:\\Dropbox\\DSI (His)\\Windows Apps\\Apps.sln\n</code></pre>\n\n<p>The two project paths are:</p>\n\n<pre><code>W:\\Dropbox\\DSI (His)\\Windows Apps\\Testing\\C_sharp\\Call_C\\Call_C.csproj\nW:\\Dropbox\\DSI (His)\\Windows Apps\\Testing\\C_sharp\\C_dll\\C_dll.vcxproj\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1445461011, "post_id": 33269046, "comment_id": 54339228, "body": "You just discovered <b>Undefined Behavior</b>!! Let&#39;s have party!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1445461016, "post_id": 33269046, "comment_id": 54339230, "body": "It&#39;s your unlucky day. A buggy program <i>seems</i> to work fine."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1445461047, "post_id": 33269046, "comment_id": 54339244, "body": "@RSahu Not really.. there is some &quot;trap&quot; in the end.."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1445461085, "post_id": 33269046, "comment_id": 54339274, "body": "@EugeneSh. The trap is one manifestation of undefined behavior. Agreed, it does <i>not</i> seem to work fine though."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1445461108, "post_id": 33269046, "comment_id": 54339288, "body": "@EugeneSh., oh yeah. Not such an unlucky day, after all :) :)"}], "answers": [{"tags": [], "owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "is_accepted": true, "score": 3, "last_activity_date": 1445461015, "creation_date": 1445461015, "answer_id": 33269086, "question_id": 33269046, "link": "https://stackoverflow.com/questions/33269046/array-with-less-elements-being-defined/33269086#33269086", "title": "Array with less elements being defined", "body": "<blockquote>\n  <p>When I put 3 elements in there, the program still seems to accept the values into ratingCounts[4] and above? Can someone explain why this is happening?</p>\n</blockquote>\n\n<p>You are writing into memory beyond the end of memory allocated for your array.  The results of that action are undefined.  There is a good chance that you will overwrite storage for other variables.</p>\n\n<p>Some programming languages provide for an automatic bounds check when accessing an array.  C does not.</p>\n"}], "owner": {"reputation": 385, "user_id": 5299019, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/gnNn9.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5299019/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 33269086, "answer_count": 1, "score": 1, "last_activity_date": 1445461066, "creation_date": 1445460864, "last_edit_date": 1445461066, "question_id": 33269046, "link": "https://stackoverflow.com/questions/33269046/array-with-less-elements-being-defined", "title": "Array with less elements being defined", "body": "<p>I am learning C from Kochans book and have struck this array exercise. \nIt states <code>ratingCount[11]</code>, but i have tried different values to see what happens. </p>\n\n<p>When I put 3 elements in there, the program still seems to accept the values into <code>ratingCounts[4]</code> and above?\nCan someone explain why this is happening?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n    int ratingCount[3], i, response;\n\n    for (i = 1; i &lt;= 10; ++i) \n        ratingCount[i] = 0;\n\n    printf (\"Enter your response\\n\");\n\n    for (i = 1; i &lt;= 20; ++i)\n    {\n        scanf (\" %d\", &amp;response);\n\n        if (response &lt; 1 || response &gt; 10)\n            printf (\"Bad entry \\n\");\n        else\n            ++ratingCount[response]; \n    }\n\n    printf (\"\\n\\n Rating\\nNumber of Responses\\n\");\n\n    for (i = 1; i &lt;= 10; ++i)\n    {\n        printf (\"%d\\t\\t%d\\n\", i, ratingCount[i]);         \n    }\n    return 0;\n    }\n</code></pre>\n\n<p>Output</p>\n\n<pre><code> Rating\nNumber of Reponses\n1       1\n2       1\n3       1\n4       1\n5       1\n6       2\n7       2\n8       4\n9       5\n10      1\nAbort trap: 6\n</code></pre>\n"}, {"tags": ["c", "file", "scanf"], "comments": [{"owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1445460466, "post_id": 33268798, "comment_id": 54338928, "body": "actually its not only that lu that I dont want , I am trying to get these info from the proc ...   State of the process. The PID of the parent. Priority. The nice value. Real&#173;time  scheduling priority. CPU number last executed on. Virtual memory size in bytes. Total program size in pages. Resident Set Size (RSS) in bytes. Resident Set Size (RSS): number of pages the process has in real memory in  pages. Text (code) size in pages. Data + stack size in pages. Page table entries size in KB. Size of data in KB. Size of stack in KB. Size of text segment KB."}], "answers": [{"tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": false, "score": 2, "last_activity_date": 1445460419, "creation_date": 1445460419, "answer_id": 33268931, "question_id": 33268798, "link": "https://stackoverflow.com/questions/33268798/how-to-choose-what-you-want-to-scan-form-a-file-in-c/33268931#33268931", "title": "how to choose what you want to scan form a file in C", "body": "<p>As pointed in a comment, you can use the asterisk to discard the input. From the <code>scanf</code> family of functions <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\">manual</a>:</p>\n\n<blockquote>\n  <p>An optional '*' assignment-suppression character: scanf()\n                reads input as directed by the conversion specification, but\n                discards the input.  No corresponding pointer argument is\n                required, and this specification is not included in the count\n                of successful assignments returned by scanf().</p>\n</blockquote>\n\n<p>And an example using the <code>scanf</code> function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a, b;\n\n    scanf(\"%d %*d %d\", &amp;a, &amp;b);\n    printf(\"A: %d\\nB: %d\\n\", a, b);\n    return 0;\n}\n</code></pre>\n\n<p>And if you input \"1 2 3\", it will output \"A: 1 B: 3\"</p>\n\n<p>You can do the same thing with <strong>fscanf</strong> and discard as many fields as necessary.</p>\n"}], "owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447676042, "creation_date": 1445459967, "last_edit_date": 1447676042, "question_id": 33268798, "link": "https://stackoverflow.com/questions/33268798/how-to-choose-what-you-want-to-scan-form-a-file-in-c", "title": "how to choose what you want to scan form a file in C", "body": "<p>I am trying to scan from proc/stat using <code>fscanf</code>. \nI want to get some info but not all, how do I declare the info I want it to scan or should I just declare every single info and scan it all, but I really dont think this is the right way to do it.</p>\n\n<p>For example: I scan with </p>\n\n<pre><code>fscanf (\"%d %s %c %d %d %d %d %d  %u) %lu( %lu %lu %lu %lu)\n</code></pre>\n\n<p>so I want everything but not the <code>%LU</code> that I keep it out. How can this be written?</p>\n"}, {"tags": ["c", "pointers", "stack", "heap"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 5, "creation_date": 1445459781, "post_id": 33268605, "comment_id": 54338571, "body": "Why do you think <code>buffer_one</code> and <code>buffer_two</code> would be on the heap, rather than the stack? They are all local/automatic variables after all."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1445459935, "post_id": 33268605, "comment_id": 54338649, "body": "<code>value</code>, <code>buffer_one</code> and <code>buffer_two</code> are all on the stack. <code>value</code> is at the lowest address then we have <code>buffer_one</code> and at the higest address we have <code>buffer_two</code>. Where is the problem ? BTW: the compiler is free to arrange the variables on the stack in any order."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1445464096, "post_id": 33268605, "comment_id": 54340823, "body": "<code>the stack has higher adresses than the heap</code> - what makes you think that? You may have observed this once somewhere, but the standard doesn&#39;t say anything at all about it, they are free to be located anywhere in the address space. Also, nitpick, but it&#39;s <code>address</code> and <code>contains</code>, not <code>addresse</code> and <code>containt</code>."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1445461565, "post_id": 33268796, "comment_id": 54339543, "body": "&quot;how variables are placed on the stack&quot; is NOT implementation-defined.  The C standard does not mention a stack at all, it only requires that local variables work."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1445459959, "creation_date": 1445459959, "answer_id": 33268796, "question_id": 33268605, "link": "https://stackoverflow.com/questions/33268605/address-of-variable-lower-than-address-of-a-pointer/33268796#33268796", "title": "Address of variable lower than address of a pointer?", "body": "<p>Because all three variables are defined within a function, they all live on the stack.  The stack typically grows downward, so it looks like space for <code>buffer_two</code> was pushed onto the stack first, followed by 8 padding bytes, followed by <code>buffer_one</code>, followed by <code>value</code>.</p>\n\n<p>That being said, how variables are placed on the stack is implementation defined, and could vary in the same implementation when seemingly unrelated code changes are made.</p>\n\n<p>For example, on my system this code outputs the following:</p>\n\n<pre><code>[BEFORE] buffer_two is at 0xbfb16110 and containt 'two' \n [BEFORE] buffer_one is at 0xbfb16118 and containt 'one' \n [BEFORE] value is at 0xbfb16120 and is 5 (0x00000005)\n</code></pre>\n\n<p>In this case, the variables were placed on the stack in the opposite order, and without the 8 byte padding.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1445464136, "last_edit_date": 1445464136, "creation_date": 1445463872, "answer_id": 33269810, "question_id": 33268605, "link": "https://stackoverflow.com/questions/33268605/address-of-variable-lower-than-address-of-a-pointer/33269810#33269810", "title": "Address of variable lower than address of a pointer?", "body": "<p>There is no requirement for the compiler to store separate objects in any particular order (whether that storage comes from the stack, heap, or some other section of memory).  It does not have to lay them out in the order in which you declared them, nor do they have to be adjacent in memory.  </p>\n\n<p><code>struct</code> members must be laid out in the order in which they are declared, but they may or may not be adjacent; there may be \"padding\" bytes between members, again due to alignment requirements.  </p>\n"}], "owner": {"reputation": 83, "user_id": 5473243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-i3aSTMAlwU8/AAAAAAAAAAI/AAAAAAAAAKk/7gBruX-poxA/photo.jpg?sz=128", "display_name": "mohamed tehami", "link": "https://stackoverflow.com/users/5473243/mohamed-tehami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544856099, "creation_date": 1445459245, "last_edit_date": 1544856099, "question_id": 33268605, "link": "https://stackoverflow.com/questions/33268605/address-of-variable-lower-than-address-of-a-pointer", "title": "Address of variable lower than address of a pointer?", "body": "<pre><code>int main(int argc  , char *argv[] ) \n{\n    int value = 5;\n    char buffer_one[8] , buffer_two[8];\n\n    strcpy(buffer_one,\"one\");\n    strcpy(buffer_two,\"two\");\n    printf(\"[BEFORE] buffer_two is at %p and containt \\'%s\\' \\n \",buffer_two,buffer_two);\n\n    printf(\"[BEFORE] buffer_one is at %p and containt \\'%s\\' \\n \",buffer_one,buffer_one);\n    printf(\"[BEFORE] value is at %p and is %d (0x%08x)\\n\",&amp;value,value,value);\n}\n</code></pre>\n\n<p>I got this result:</p>\n\n<pre><code>[BEFORE] buffer_two is at 0x7ffd75d46720 and containt 'two' \n [BEFORE] buffer_one is at 0x7ffd75d46710 and containt 'one' \n [BEFORE] value is at 0x7ffd75d4670c and is 5 (0x00000005)\n</code></pre>\n\n<p>As you can see the address of buffer_two is higher then buffer_one (because it's pushed on the heap and and the heap goes up to higher addresses) here everything is okey. </p>\n\n<p>What I don't understand why the address of the Value variable is smaller than both , I think it must be higher because variables are stored on the stack! and the stack has higher addresses than the heap! </p>\n"}, {"tags": ["c", "string", "pointers", "printf"], "answers": [{"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 4370, "user_id": 2648216, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37b11074888dfa4007bdfd51c5d7cdea?s=128&d=identicon&r=PG", "display_name": "Ajay Gaur", "link": "https://stackoverflow.com/users/2648216/ajay-gaur"}, "edited": false, "score": 0, "creation_date": 1445460789, "post_id": 33268650, "comment_id": 54339098, "body": "No - if they were pointers that happened to be pointing to memory with the contents <code>&quot;(null)&quot;</code> then you would not get a crash when using <code>printf(&quot;%s\\n&quot;,a[i])</code>.  The declaration of <code>a[]</code> has an initializer that sets to <code>0</code> all elements that aren&#39;t explicitly initialized. The &quot;(null)&quot; displays are <code>printf()</code> handling null string pointers specially."}], "tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": true, "score": 7, "last_activity_date": 1445484317, "last_edit_date": 1445484317, "creation_date": 1445459422, "answer_id": 33268650, "question_id": 33268545, "link": "https://stackoverflow.com/questions/33268545/printfs-n-str-gives-segmentation-fault-but-printfs-str-dont-where/33268650#33268650", "title": "printf(&quot;%s\\n&quot;,str); gives segmentation fault but printf(&quot;%s&quot;,str); don&#39;t, where &quot;str&quot; is a string pointer", "body": "<p>Passing a null pointer for a <code>%s</code> format specifier in <code>prinf()</code> is undefined behavior.  In the one case, the runtime is trying to be nice and display \"(null)\" for this situation.  In the other case the undefined behavior is to crash.</p>\n\n<p>One possible reason for the difference is that a compiler toolchain will sometimes transform <code>printf(\"%s\\n\", xxx)</code> to the equivalent <code>puts(xxx)</code> (GCC certainly does this in many cases). I guess <code>puts()</code> isn't being as nice with your null pointers.</p>\n\n<p>Personally, I like it when <code>\"%s\"</code> displays null pointers as \"(null)\" - it makes it a little more convenient when adding some quick-n-dirty debug logging.  However, if you do this you can't complain when a program crashes, so you shouldn't rely on it for anything else.</p>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 1, "last_activity_date": 1445461462, "last_edit_date": 1445461462, "creation_date": 1445459796, "answer_id": 33268755, "question_id": 33268545, "link": "https://stackoverflow.com/questions/33268545/printfs-n-str-gives-segmentation-fault-but-printfs-str-dont-where/33268755#33268755", "title": "printf(&quot;%s\\n&quot;,str); gives segmentation fault but printf(&quot;%s&quot;,str); don&#39;t, where &quot;str&quot; is a string pointer", "body": "<p>you are declaring an array of 10 <code>char</code> pointers. the assignment <code>a[0] = \"hey\"</code>,causes the pointer a[0] to point to the string literal \"hey\" which is stored in read-only memory,and you lost track of the string literal \"hi\".</p>\n\n<p>The segmentation fault is caused by passing the null pointers to the function printf() in the loop,beyond the third element.This is known as Undefined Behavior.</p>\n"}], "owner": {"reputation": 4370, "user_id": 2648216, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37b11074888dfa4007bdfd51c5d7cdea?s=128&d=identicon&r=PG", "display_name": "Ajay Gaur", "link": "https://stackoverflow.com/users/2648216/ajay-gaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 33268650, "answer_count": 2, "score": 1, "last_activity_date": 1445484317, "creation_date": 1445459022, "last_edit_date": 1445460026, "question_id": 33268545, "link": "https://stackoverflow.com/questions/33268545/printfs-n-str-gives-segmentation-fault-but-printfs-str-dont-where", "title": "printf(&quot;%s\\n&quot;,str); gives segmentation fault but printf(&quot;%s&quot;,str); don&#39;t, where &quot;str&quot; is a string pointer", "body": "<p>When I tried to run the following code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n    char *a[10] = {\"hi\", \"hello\", \"how\"};\n    int i = 0, j = 0;\n    a[0] = \"hey\";\n    for (i = 0;i &lt; 10; i++)\n    printf(\"%s\", a[i]);\n}\n</code></pre>\n\n<p>It gave me output as :  </p>\n\n<pre><code>heyhellohow(null)(null)(null)(null)(null)(null)(null)\n</code></pre>\n\n<p><strong>Whereas when I inserted '\\n' in the printf statement :</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n    char *a[10] = {\"hi\", \"hello\", \"how\"};\n    int i = 0, j = 0;\n    a[0] = \"hey\";\n    for (i = 0;i &lt; 10; i++)\n        printf(\"%s\\n\", a[i]);\n}\n</code></pre>\n\n<p><strong>It gave me the following output :</strong></p>\n\n<pre><code>hey\nhello\nhow  \nSegmentation fault\n</code></pre>\n\n<p>I tried reading online material for this and I found this is because of format specifier and automatically converting <strong>printf</strong> to <strong>puts</strong> by the compiler and <strong>puts</strong> not recognizing <strong>\"%s\\n\"</strong>, but I am still not able to understand. Can anyone explain this in simple terms.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1445457924, "post_id": 33268192, "comment_id": 54337562, "body": "Step through with a debugger, line by line.  That works wonders understanding this type of issue."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1445458026, "post_id": 33268192, "comment_id": 54337620, "body": "You should exit if <code>first == NULL</code>."}, {"owner": {"reputation": 1317, "user_id": 54256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xeM9M.jpg?s=128&g=1", "display_name": "Gonfva", "link": "https://stackoverflow.com/users/54256/gonfva"}, "edited": false, "score": 0, "creation_date": 1445458431, "post_id": 33268192, "comment_id": 54337830, "body": "My C is a bit rusty but are you sure you don&#180;t need to allocate space for name before the scanf?"}, {"owner": {"reputation": 830, "user_id": 3454650, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6ccec193e74c155b5575cf893799e694?s=128&d=identicon&r=PG&f=1", "display_name": "spanishgum", "link": "https://stackoverflow.com/users/3454650/spanishgum"}, "edited": false, "score": 1, "creation_date": 1445458607, "post_id": 33268192, "comment_id": 54337911, "body": "You should be allocating memory for (char *name) inside each of your structs before writing to them."}, {"owner": {"reputation": 9, "user_id": 5357240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ee9806161fb0ea917f615145180ff28?s=128&d=identicon&r=PG&f=1", "display_name": "M.Ser", "link": "https://stackoverflow.com/users/5357240/m-ser"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1445458612, "post_id": 33268192, "comment_id": 54337913, "body": "@FiddlingBits But I set pNames = to first, and the while loop runs when pNames (first) is not equal to NULL, which would mean it exits when pNames is equal to NULL"}], "answers": [{"comments": [{"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1445458827, "post_id": 33268438, "comment_id": 54338034, "body": "For sake of consistency, be best not to mix C++&#39;s namespace with the OP&#39;s question tagged as C."}], "tags": [], "owner": {"reputation": 788, "user_id": 5037458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1a34a94f1f7f3ee63ad2be94de183d?s=128&d=identicon&r=PG&f=1", "display_name": "Nandu", "link": "https://stackoverflow.com/users/5037458/nandu"}, "is_accepted": false, "score": 0, "last_activity_date": 1445458601, "creation_date": 1445458601, "answer_id": 33268438, "question_id": 33268192, "link": "https://stackoverflow.com/questions/33268192/linked-list-segmentation-fault/33268438#33268438", "title": "Linked List - Segmentation Fault", "body": "<pre><code>allocate space for \"name\", preferably use std::string\n\n    you need to get \"next\" node.\n\n      for(i = 0; i&lt;10; i++)\n            {\n                    printf(\"Enter a name: \");\n                    scanf(\"%s\", &amp;pNames-&gt;name);\n                    if(i == 9)\n                            next = NULL;\n                    else\n                            next = (NL*)malloc(sizeof(NL));\n                    pNames-&gt;nname = next;\n                    pNames = next;\n            }\n\n              pNames = first;\n                while(pNames != NULL)\n                {\n                        printf(\"%s\\n\", pNames-&gt;name);\n                        pNames = pNames-&gt;next;\n                }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 1, "creation_date": 1445458988, "post_id": 33268439, "comment_id": 54338126, "body": "Better yet <code>fgets(buf, 20, stdin)</code> to avoid buffer over-runs."}], "tags": [], "owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "is_accepted": true, "score": 2, "last_activity_date": 1445459145, "last_edit_date": 1445459145, "creation_date": 1445458602, "answer_id": 33268439, "question_id": 33268192, "link": "https://stackoverflow.com/questions/33268192/linked-list-segmentation-fault/33268439#33268439", "title": "Linked List - Segmentation Fault", "body": "<p>This line is the source:</p>\n\n<pre><code>printf(\"Enter a name: \");\nscanf(\"%s\", &amp;pNames-&gt;name);\n</code></pre>\n\n<p>Would be best to create a static buffer like this:</p>\n\n<pre><code>char buf[20];\n</code></pre>\n\n<p>then</p>\n\n<pre><code>printf(\"Enter a name: \");\nscanf(\"%s\", buf);\n</code></pre>\n\n<p>finally:</p>\n\n<pre><code>pNames-&gt;name = strdup(buf);\n</code></pre>\n\n<p><strong>Edit:</strong> For sake of completeness, there is a risk of buffer overflow. where more than certain characters go past the end of the buffer inducing undefined behaviour. This can be mitigated as suggested by <strong><em>@ebyrob</em></strong>, in this fashion</p>\n\n<pre><code>fgets(buf, 20, stdin);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4588, "user_id": 3470414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eUip5.jpg?s=128&g=1", "display_name": "Always Learning", "link": "https://stackoverflow.com/users/3470414/always-learning"}, "is_accepted": false, "score": 0, "last_activity_date": 1445459410, "creation_date": 1445459410, "answer_id": 33268644, "question_id": 33268192, "link": "https://stackoverflow.com/questions/33268192/linked-list-segmentation-fault/33268644#33268644", "title": "Linked List - Segmentation Fault", "body": "<p>You have not allocated memory to hold the <code>name</code> field of your <code>NameList</code> objects.  The <code>name</code> field is of type <code>char *</code> which has enough room for a pointer, not a string of characters.  When you perform <code>scanf(%s, &amp;pNames-&gt;name);</code> you are telling <code>scanf</code> to write the name into that memory location, but that will overwrite a lot more than the bytes needed to store a pointer.  </p>\n\n<p>Instead you could have <code>scanf</code> load into a temporary array first, then <code>malloc</code> enough space to hold it</p>\n\n<pre><code>char *tempbuff = malloc(128); // or some large enough buffer\nfor (i = 0; i&lt;10; ++i) {\n    // load the input into tempbuff first\n    scanf(\"%s\", tempbuff);\n    // now make room for the string in the current object\n    pNames-&gt;name = malloc(strlen(tempbuff)+1); // leave room for trailing null\n    // now copy it from the tempbuff to its new home\n    strcpy(pNames-&gt;name,tempbuff);\n    .... // rest of code\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5357240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ee9806161fb0ea917f615145180ff28?s=128&d=identicon&r=PG&f=1", "display_name": "M.Ser", "link": "https://stackoverflow.com/users/5357240/m-ser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 33268439, "answer_count": 3, "score": 0, "last_activity_date": 1445459410, "creation_date": 1445457694, "question_id": 33268192, "link": "https://stackoverflow.com/questions/33268192/linked-list-segmentation-fault", "title": "Linked List - Segmentation Fault", "body": "<p>This code is supposed to make a link list of ten names inputed by the user \nand it should print out that list. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct NameList\n{\n    char *name;\n    struct NameList *nname;\n};\ntypedef struct NameList NL;\n\nint main()\n{\n    int i;\n    NL *first;\n    NL *next;\n    first = (NL*)malloc(sizeof(NL));\n    if (first ==NULL)\n            printf(\"Memory not properly allocated\\n\");\n    NL *pNames;\n    pNames =  first;\n    for(i = 0; i&lt;10; i++)\n    {\n            printf(\"Enter a name: \");\n            scanf(\"%s\", &amp;pNames-&gt;name);\n            if(i == 9)\n                    next = NULL;\n            else\n                    next = (NL*)malloc(sizeof(NL));\n            pNames-&gt;nname = next;\n            pNames = pNames-&gt;nname;\n    }\n</code></pre>\n\n<p>Up to here there are no issues, I input the ten names but as soon as I enter\nthe last name I get a segmentation fault.\nI'm guessing it's originating from here but I am not sure at all</p>\n\n<pre><code>        pNames = first;\n        while(pNames != NULL)\n        {\n                printf(\"%s\\n\", pNames-&gt;name);\n                pNames = pNames-&gt;nname;\n        }\n\n\n    }\n</code></pre>\n"}, {"tags": ["c", "file", "parsing", "configuration", "spaces"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1445457446, "post_id": 33268023, "comment_id": 54337326, "body": "Consider using <code>fgets</code> to read a line at a time and <code>strtok</code> to help you parse the key/value pair. <code>strtok</code> will easily solve the extra white space problems for you."}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1445457697, "post_id": 33268023, "comment_id": 54337447, "body": "Everyone seems to love strtok but it doesn&#39;t work well with 64-bit systems as the string pointer gets messed up when passed in. Also, fgets works with file handles of type FILE*, not of type int. I&#39;m using open because I want an unbuffered read of the config file since I could change it between the time I finished testing the program and the time I test it again."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1445458047, "post_id": 33268023, "comment_id": 54337632, "body": "&quot;Everyone seems to love strtok but it doesn&#39;t work well with 64-bit systems as the string pointer gets messed up when passed in.&quot;. That doesn&#39;t sound right at all. Are you sure you haven&#39;t got mixed up 32 and 64 bit libraries? If it appears a standard library doesn&#39;t work in your code then I think you should start with the assumption that something is wrong on your end and not the standard library."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445458356, "post_id": 33268023, "comment_id": 54337795, "body": "@Mike, <code>strtok()</code> works just fine on 64-bit systems.  If you find otherwise then either your program is wrong (most likely) or your C library is broken (highly unlikely).  C does not allow implementations to break as you assert."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445469099, "post_id": 33268023, "comment_id": 54342668, "body": "&quot;make a less CPU-intensive version&quot;  --&gt;  My money is that all the I/O activity swamps any parsing issues.  Use <code>fgets()</code> and then parse sensible."}, {"owner": {"reputation": 1224, "user_id": 2052755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ec83e8c62d4ad62a26ab4ee7771177d1?s=128&d=identicon&r=PG", "display_name": "user31986", "link": "https://stackoverflow.com/users/2052755/user31986"}, "edited": false, "score": 0, "creation_date": 1451994123, "post_id": 33268023, "comment_id": 56966720, "body": "Try this: <a href=\"http://criticalindirection.com/2016/01/05/lex-based-config-parserreader/\" rel=\"nofollow noreferrer\">criticalindirection.com/2016/01/05/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1445462747, "post_id": 33268721, "comment_id": 54340166, "body": "What makes you think that <code>read</code> sets <code>c</code> to <code>0</code> at the end of file?"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1445463308, "post_id": 33268721, "comment_id": 54340461, "body": "@user58697 That&#39;s true, don&#39;t know where I got that from. I&#39;ll edit. Thanks for pointing it out."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445463700, "post_id": 33268721, "comment_id": 54340656, "body": "If you&#39;re going to read one <code>char</code> at a time, then it would be better to use <code>fgetc()</code>, which is likely to buffer the input stream.  Using <code>read()</code> to input the whole file one byte at a time is likely to be costly."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445463849, "post_id": 33268721, "comment_id": 54340723, "body": "@JohnBollinger I agree with you. But this is just a way of showing how the <i>parsing method</i> works. OP was reading the whole file at once, and when he converts this bit of code into a function, he may just use <code>while(*s)</code> instead of the <code>read</code> thing. Do you think it&#39;s worthing pointing that out in the answer (for completeness)? Or even changing the code?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445464462, "post_id": 33268721, "comment_id": 54341016, "body": "@EnzoFerber, the OP did express a performance concern, and you could switch from <code>read()</code> to <code>fgetc()</code> without many other changes.  I do, therefore, think it worthwhile to present the <code>fgetc()</code> variation on your method.  Or alternatively, buffer-at-a-time I/O and in-memory parsing.  Or at that point, why not just <code>mmap()</code> the config file?"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445464904, "post_id": 33268721, "comment_id": 54341179, "body": "@JohnBollinger I added a buffer parsing function. That way, OP can decide which input method he wants. The only thing the <code>parse</code> function now expects is a null-terminated string."}], "tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": false, "score": 0, "last_activity_date": 1445468029, "last_edit_date": 1445468029, "creation_date": 1445459683, "answer_id": 33268721, "question_id": 33268023, "link": "https://stackoverflow.com/questions/33268023/parsing-simple-name-value-pair-settings-in-config-file-with-leading-and-terminat/33268721#33268721", "title": "Parsing simple name/value pair settings in config file with leading and terminating spaces - C", "body": "<p>I'll provide a straight-forward version, with everything being done in <code>main</code> and no <code>key:value</code> <em>saving</em> - the function only recognizes where they are and print them. I used the input file you gave and added one more line in the end as <code>something = more_data</code>.</p>\n\n<p>This version of the parser <strong>does not</strong> recognize multiple data itens (itens separated by spaces in the data fields, you'll have to figure it out as an exercise).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main(void)\n{\n    int fd = open(\"file.conf\", O_RDONLY, 0);\n    int i = 0;\n    char kv[100];\n    char c;\n\n    while (read(fd,&amp;c,1) == 1) {\n        /* ignoring spaces and tabs */\n        if (c == '\\t' || c == ' ') continue;\n        else if (c == '=') {\n            /* finished reading a key */\n            kv[i] = 0x0;\n            printf(\"key found [%s] \", kv);\n            i = 0;\n            continue;\n        } else if (c == '\\n') {\n            /* finished reading a value */\n            kv[i] = 0x0;\n            printf(\" with data [%s]\\n\", kv);\n            i = 0;\n            continue;\n        }\n        kv[i++] = c;\n    }\n\n    close(fd);\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>key found [something]  with data [data]\nkey found [apples]  with data [oranges]\nkey found [fruit]  with data [banana]\nkey found [animals]  with data [cats]\nkey found [fried]  with data [chicken]\nkey found [something]  with data [more_data]\n</code></pre>\n\n<hr>\n\n<h2>Explanation</h2>\n\n<ol>\n<li><p><strong><code>while (read(fd,&amp;c,1) == 1)</code></strong>: reads one character at a time from the file.</p></li>\n<li><p><strong><code>if (c == '\\t' || c == ' ') continue;</code></strong>: this is responsible for ignoring the white-spaces and tabs wherever they are.</p></li>\n<li><p><strong><code>else if (c == '=')</code></strong>: If the program finds a <code>=</code> character, it concludes that what it just read was a key and treats it. What's inside that <code>if</code> should be easy to understand.</p></li>\n<li><p><strong><code>else if (c == '\\n')</code></strong>: Then it uses a new-line character to recognize the end of a value. Again, what's inside the <code>if</code> is not hard to understand.</p></li>\n<li><p><strong><code>kv[i++] = c;</code></strong>: This is where we save the char value into the buffer <code>kv</code>. </p></li>\n</ol>\n\n<p><hr>\nSo, with some minor changes, you can adapt this bit of code to become a parsing function that will suit your needs. </p>\n\n<hr>\n\n<h2>Edit and new code</h2>\n\n<p>As pointed out by <a href=\"http://www.pbm.com/~lindahl/mel.html\" rel=\"nofollow\">John Bollinger</a> in the comments, using <code>read</code> inside a <code>while</code> to read one character at a time is very costly. I'll post a second version of the program using the same input method OP was using (reading the whole file at once into a buffer) and then parsing it with another function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\nvoid parse(char *s)\n{\n    char c, kv[100];\n    int i;\n    while ((c = *s++)) {\n        /* ignoring spaces and tabs */\n        if (c == '\\t' || c == ' ') continue;\n        else if (c == '=') {\n            /* finished reading a key */\n            kv[i] = 0x0;\n            printf(\"key found [%s] \", kv);\n            i = 0;\n            continue;\n        } else if (c == '\\n') {\n            /* finished reading a value */\n            kv[i] = 0x0;\n            printf(\" with data [%s]\\n\", kv);\n            i = 0;\n            continue;\n        }\n        kv[i++] = c;\n    }\n}\n\nint main(void)\n{\n    int fd = open(\"file.conf\", O_RDONLY, 0);\n    char buffer[1000];\n\n    /* use the reading method that suits you best */\n    read(fd, buffer, sizeof buffer);\n\n    /* only thing parse() expects is a null-terminated string */\n    parse(buffer);\n\n    close(fd);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1445468747, "last_edit_date": 1445468747, "creation_date": 1445463294, "answer_id": 33269689, "question_id": 33268023, "link": "https://stackoverflow.com/questions/33268023/parsing-simple-name-value-pair-settings-in-config-file-with-leading-and-terminat/33269689#33269689", "title": "Parsing simple name/value pair settings in config file with leading and terminating spaces - C", "body": "<p>It is very unusual to read a whole config file into memory as a flat image, and especially to <em>keep</em> such an image as the internal representation.  One would ordinarily parse the file contents into key/value pairs as you go, and store a representation of those pairs.</p>\n\n<p>Also, your use of <code>read()</code> is incorrect, as you cannot safely assume that it will read all bytes of the file in one call.  One normally must call <code>read()</code> in a loop, keeping track of the return value from each call to know both when the end of the file is reached and where in the buffer to put the next bytes read.</p>\n\n<p>If the configuration is supposed to be completely generic, so that you don't know in advance what keywords to expect, then you might organize the configuration data in a hash table or a binary search tree, with the parameter names as the keys.  If you <em>do</em> know what parameters to expect (or at least which to allow), then you might have a variable or a struct member for each one.</p>\n\n<p>Naturally, the approach to parameter lookup must be paired correctly with the data structure in which you store the parameters.  Any of the approaches I suggested will make looking up multiple configuration parameters far faster.  They would also avoid wasting memory, and would adapt to extremely large configurations (or at least <em>could</em> do so).</p>\n\n<p>How best to approach reading the file depends on details of your config file format, such as whether keys and/or values are permitted to contain internal spaces, whether more than one key/value pair may appear on the same line, and whether there is an upper bound on the allowed length of config file lines or of keys and values.  Here's an approach that expects one key/value pair per line, supports keys and values that contain internal whitespace (but not newlines), but neither of which is longer than 1023 characters, and where keys are not permitted to contain the <code>'='</code> character:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;assert.h&gt;\n\nint main() {\n    char key[1024];\n    char value[1024];\n    FILE *config;\n    int done;\n\n    config = fopen(\"file.conf\", \"r\");\n    if (!config) {\n        perror(\"while opening file.conf\");\n        return 1;\n    }\n\n    do {\n        char nl = '\\0';\n        int nfields = fscanf(config, \" %1023[^=\\n]= %1023[^\\n]%c\", key, value, &amp;nl);\n        int i;\n\n        done = 1;\n\n        if (nfields == EOF) {\n            if (ferror(config)) {\n                /* handle read error ... */\n                perror(\"while reading file.conf\");\n            } else {\n                /* trailing empty line(s); ignore ... */\n            }\n            break;\n        } else if (nfields == 3) {\n            if (nl != '\\n') {\n                /* handle excessive-length value ... */\n            } else {\n                done = 0;\n            }\n        } else if (nfields == 1) {\n            /* handle excessive-length key ... */\n            break;\n        } else {\n            assert(nfields == 2);\n            /* last key/value pair, not followed by a newline */\n        }\n\n        if (key[0] == '=') {\n            /* handle missing key ... */\n            break;\n        }\n\n        /* successfully read a key / value pair; truncate trailing whitespace */\n        for (i = strlen(key); key[--i] == ' '; ) {\n            /* nothing */\n        }\n        key[i + 1] ='\\0';\n        for (i = strlen(value); value[--i] == ' '; ) {\n            /* nothing */\n        }\n        value[i + 1] ='\\0';\n\n        /* record the key / value pair somewhere (but here we just print it) ... */\n        printf(\"key: [%s]   value: [%s]\\n\", key, value);\n    } while (!done);\n\n    fclose(config);\n\n    return 0;\n}\n</code></pre>\n\n<p>Important points to note about that include:</p>\n\n<ul>\n<li>No mechanism for <em>storing</em> the key / value pairs is provided.  I gave you a few options, and there are others, but you must decide what's best for your own purposes.  Rather, the program above addresses the problem of parsing your config data once for all, so that you can avoid parsing it <em>de novo</em> every time you perform a lookup.</li>\n<li>The code relies on <code>fscanf()</code> to consume any leading whitespace before the key and value, but in order to accommodate internal whitespace in the key and value, it cannot do the same for trailing whitespace.</li>\n<li>Instead, it manually trims trailing whitespace from key and value.</li>\n<li>The <code>fscanf()</code> format uses explicit field widths to avoid buffer overruns.  It uses the <code>%[</code> and <code>%c</code> field descriptors to scan data that may be or include whitespace.</li>\n<li>Although it may look longish, do note how much of that code is dedicated to error handling.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1445471244, "creation_date": 1445471244, "answer_id": 33271178, "question_id": 33268023, "link": "https://stackoverflow.com/questions/33268023/parsing-simple-name-value-pair-settings-in-config-file-with-leading-and-terminat/33271178#33271178", "title": "Parsing simple name/value pair settings in config file with leading and terminating spaces - C", "body": "<p>Divide and conquer.</p>\n\n<p>Getting the data and parsing it are best handled with 2 separate routines.</p>\n\n<p>1) Use <code>fgets()</code> or other code with <code>read()</code> to read a <em>line</em></p>\n\n<pre><code>int foo(FILE *inf) {\n  char buffer[1000];\n  while (fgets(buffer, sizeof buffer, inf)) {\n    if (Parse_KeyValue(buffer, &amp;key_offset, &amp;value_offset)) {\n      fprintf(stderr, \"Bad Line '%s'\\n\", buffer);\n      return 1;\n    }\n    printf(\"'%s'='%s'\\n\", &amp;buffer[key_offset], &amp;buffer[value_offset]);\n  }\n}\n</code></pre>\n\n<p>2) Parse the line. (Sample unchecked code)</p>\n\n<pre><code>// 0: Success\n// 1: failure\nint Parse_KeyValue(char *line, size_t *key_offset, size_t *value_offset) {\n  char *p = line;\n  while (isspace((unsigned char) *p)) p++;\n  *key_offset = p - line;\n  const char *end = p;\n  while (*p != '=') {\n    if (*p == '\\0') return 1;  // fail, no `=` found\n    if (!isspace((unsigned char) *p)) {\n      end = p+1;\n    }\n    p++;\n  }\n  *end = '\\0';\n\n  p++; // consume `=`    \n  while (isspace((unsigned char) *p)) p++;\n  *value_offset = p - line;\n  end = p;\n  while (*p) {\n    if (!isspace((unsigned char) *p)) {\n      end = p+1;\n    }\n    p++;\n  }\n  *end = '\\0';\n  return 0;\n}\n</code></pre>\n\n<p>This does allow for valid <code>\"\"</code> key and value.  Adjust as needed.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3812944, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005126523873/picture?type=large", "display_name": "Andriy", "link": "https://stackoverflow.com/users/3812944/andriy"}, "is_accepted": false, "score": 0, "last_activity_date": 1595515169, "creation_date": 1595515169, "answer_id": 63056868, "question_id": 33268023, "link": "https://stackoverflow.com/questions/33268023/parsing-simple-name-value-pair-settings-in-config-file-with-leading-and-terminat/63056868#63056868", "title": "Parsing simple name/value pair settings in config file with leading and terminating spaces - C", "body": "<p>Behold is a small (~15 lines) sscanf-based read_params() function which does the job. As a bonus, it understands the comments and complains about erroneous lines (if any):</p>\n<pre><code>$ cat config_file.c \n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;sys/errno.h&gt;\n\n#define ARRAY_SIZE(a) ((sizeof (a)) / (sizeof (a)[0]))\n\nenum { MAX_LEN=128 };\n\nstruct param {\n    char name[MAX_LEN];\n    char value[MAX_LEN];\n};\n\nvoid strtrim(char *s)\n{\n    char *p = s + strlen(s);\n\n    while (--p &gt;= s &amp;&amp; isspace(*p))\n        *p = '\\0';\n}\n\nint read_params(FILE *in, struct param *p, int max_params)\n{\n    int ln, n=0;\n    char s[MAX_LEN];\n\n    for (ln=1; max_params &gt; 0 &amp;&amp; fgets(s, MAX_LEN, in); ln++) {\n        if (sscanf(s, &quot; %[#\\n\\r]&quot;, p-&gt;name)) /* emty line or comment */\n            continue;\n        if (sscanf(s, &quot; %[a-z_A-Z0-9] = %[^#\\n\\r]&quot;,\n                   p-&gt;name, p-&gt;value) &lt; 2) {\n            fprintf(stderr, &quot;error at line %d: %s\\n&quot;, ln, s);\n            return -1;\n        }\n        strtrim(p-&gt;value);\n        printf(&quot;%d: name='%s' value='%s'\\n&quot;, ln, p-&gt;name, p-&gt;value);\n        p++, max_params--, n++;\n    }\n\n    return n;\n}\n\nint main(int argc, char *argv[])\n{\n    FILE *f;\n    struct param p[32];\n\n    f = argc == 1 ? stdin : fopen(argv[1], &quot;r&quot;);\n    if (f == NULL) {\n        fprintf(stderr, &quot;failed to open `%s': %s\\n&quot;, argv[1],\n            strerror(errno));\n        return 1;\n    }\n\n    if (read_params(f, p, ARRAY_SIZE(p)) &lt; 0)\n        return 1;\n\n    return 0;\n}\n</code></pre>\n<p>Let's see how it works (quotes mark the beginning and the end of each line for clarity):</p>\n<pre><code>$ cat bb | sed -e &quot;s/^/'/&quot; -e &quot;s/$/'/&quot; | cat -n\n     1  'msg = Hello World! '\n     2  'p1=v1'\n     3  ' p2=v2 # comment'\n     4  ' '\n     5  'P_3 =v3'\n     6  'p4= v4#comment'\n     7  ' P5 = v5 '\n     8  '   # comment'\n     9  'p6 ='\n$ ./config_file bb\n1: name='msg' value='Hello World!'\n2: name='p1' value='v1'\n3: name='p2' value='v2'\n5: name='P_3' value='v3'\n6: name='p4' value='v4'\n7: name='P5' value='v5'\nerror at line 9: p6 =\n</code></pre>\n<p>Note: as an additional bonus, the value can be anything, except <code>#\\n\\r</code> chars, including spaces, as can be seen above with the 'Hello World!' example. If it's not what needed, add space and tab into the exception list at the second sscanf() for the value (or specify accepted characters there instead) and drop strtrim() function.</p>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1320, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1595515169, "creation_date": 1445457059, "last_edit_date": 1445458232, "question_id": 33268023, "link": "https://stackoverflow.com/questions/33268023/parsing-simple-name-value-pair-settings-in-config-file-with-leading-and-terminat", "title": "Parsing simple name/value pair settings in config file with leading and terminating spaces - C", "body": "<p>This is the code I made so far. I apologize if my buffer sizes are an overkill.</p>\n\n<p>The idea is to read the entire configuration file (in this example, it's <code>file.conf</code>), and for now we assume it exists. I'll add error checking later.</p>\n\n<p>Once the file is read into stack space, then the <code>getcfg()</code> function searches the configuration data for the specified name, and if it's found, returns the corresponding value.  My function works when the configuration file contains leading spaces before names or values; such spaces are ignored.</p>\n\n<p>Say this is my configuration file:</p>\n\n<pre><code>something=data\napples=oranges\nfruit=banana\n      animals=       cats\nfried    =chicken  \n</code></pre>\n\n<p>My code will work correctly with the first four entries of the config file. for example, if I use \"something\" as the name, then \"data\" will be returned.</p>\n\n<p>The last item won't work as of yet because of the trailing spaces after \"fried\" and before the <code>=</code>. I want to be able to have my function automatically remove those spaces, too, especially in case an option format such as</p>\n\n<pre><code>somethingelse = items\n</code></pre>\n\n<p>begins to be used.  (Note the spaces on both sides of the <code>=</code> sign.)</p>\n\n<p>What can I do to make a less CPU-intensive version of my program that also detects and removes trailing spaces from the name and value when processing the name and values?</p>\n\n<p>Here's my current code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint getcfg(char* buf, char *name, char *val) {\n    int fl = 0, n = 0;\n    char cfg[1][10000], *p = buf;\n\n    memset(cfg, 0, sizeof(cfg));\n    while (*p) {\n        if (*p == '\\n') {\n            if (strcmp(cfg[0], name) == 0) {\n                strcpy(val, cfg[1]);\n                return 1;\n            }\n            memset(cfg, 0, sizeof(cfg));\n            n = 0;\n            fl = 0;\n        } else {\n            if (*p == '=') {\n                n = 0;\n                fl = 1;\n            } else {\n                if (n != 0 || *p != ' ') {\n                    cfg[fl][n] = *p;\n                    n++;\n                }\n            }\n        }\n        p++;\n    }\n\n    return 0;\n}\n\nint main() {\n    char val[10000], buf[100000]; //val=value of config item, buf=buffer for entire config file ( &gt; 100KB config file is nuts)\n\n    memset(buf, 0, sizeof(buf));\n    memset(val, 0, sizeof(val));\n\n    int h = open(\"file.conf\", O_RDONLY);\n\n    if (read(h, buf, sizeof(buf)) &lt; 1) {\n        printf(\"Can't read\\n\");\n    }\n    close(h);\n\n    printf(\"Value stat = %d \", getcfg(buf, \"Item\", val));\n    printf(\"Result = '%s'\\n\", val);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "edited": false, "score": 0, "creation_date": 1445459399, "post_id": 33267990, "comment_id": 54338365, "body": "What OS, API or Framework ... are you using?"}, {"owner": {"reputation": 11, "user_id": 5473086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475d355cad547dcce3e9f5399a58ee95?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5473086/pavel"}, "reply_to_user": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "edited": false, "score": 0, "creation_date": 1445877692, "post_id": 33267990, "comment_id": 54497437, "body": "I&#39;m working under Linux (specifically on Debian) and I&#39;m writing a program in C/C++. For reading a data from the wheel I use functions open and read from fcntl.h library."}], "owner": {"reputation": 11, "user_id": 5473086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475d355cad547dcce3e9f5399a58ee95?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5473086/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445456911, "creation_date": 1445456911, "question_id": 33267990, "link": "https://stackoverflow.com/questions/33267990/reading-data-from-buttons-of-a-racing-wheel-genius-speedwheel-3-mt", "title": "Reading data from buttons of a racing wheel Genius speedwheel 3 mt", "body": "<p>I would like to read the data from buttons of a racing wheel Genius speedwheel 3 mt in C programming language (mainly because I want to reckognize which button was exactly pressed) but I'm not sure what format of data the wheel has. I'm guessing that the wheel sends some bytes but I don't know how many or what means each byte. Any ideas?</p>\n"}, {"tags": ["c", "algorithm", "bit-manipulation"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445456793, "post_id": 33267926, "comment_id": 54336990, "body": "Cast to <code>char*</code> and use the subscript operator. Be aware of endianess, though."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1445456983, "post_id": 33267926, "comment_id": 54337094, "body": "@cad a cleaner and more portable solution would be bitshift/mask."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1445457023, "post_id": 33267926, "comment_id": 54337115, "body": "@EugeneSh. Yeah, good point."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1445457878, "post_id": 33268194, "comment_id": 54337536, "body": "This will have different results on big and little endian systems."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1445458009, "post_id": 33268194, "comment_id": 54337613, "body": "well, i am not so sure, @Barmar do you think it does?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1445459159, "post_id": 33268194, "comment_id": 54338232, "body": "It will be <code>0x5421FB32</code> on big endian and <code>0x32FB2154</code> on little endian, but it is also undefined behaviour to access the value via <code>a</code> directly after this because of the strict aliasing rule. You also forgot the <code>;</code> at the end of the lines."}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": -1, "last_activity_date": 1445457702, "creation_date": 1445457702, "answer_id": 33268194, "question_id": 33267926, "link": "https://stackoverflow.com/questions/33267926/how-to-modify-a-specific-byte-in-an-interger/33268194#33268194", "title": "How to Modify a specific Byte in an Interger", "body": "<pre><code>int a;\n((char*)&amp;a)[0]=0x54\n((char*)&amp;a)[1]=0x21\n((char*)&amp;a)[2]=0xFB\n((char*)&amp;a)[3]=0x32\n</code></pre>\n\n<p>it is preferably to use bitwise shifting, but this one is easy to use and remember.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1445748068, "creation_date": 1445748068, "answer_id": 33326263, "question_id": 33267926, "link": "https://stackoverflow.com/questions/33267926/how-to-modify-a-specific-byte-in-an-interger/33326263#33326263", "title": "How to Modify a specific Byte in an Interger", "body": "<p>Simply use unsigned bit shifts.</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n\nunsigned ByteReplace(unsigned x, unsigned byte_index, unsigned char byte_new) {\n  assert(sizeof x * CHAR_BIT &gt;= 4 * 8);\n  printf(\"Input: Byte_Location = %u and Value = 0x%02X\\n\", byte_index,\n          byte_new);\n\n  // Typically I'd expect byte_index to imply the least significant byte.  OP has otherwise\n  byte_index = 3 - byte_index;\n\n  unsigned mask = 0xFFu &lt;&lt; byte_index * 8;\n  unsigned y = (~mask &amp; x) | (byte_new &lt;&lt; byte_index * 8);\n  printf(\"Output: 0x%08X\\n\", y);\n  return y;\n}\n\nint main(void) {\n  unsigned int u4Val = 0xAABBCCDD;\n  ByteReplace(u4Val, 0, 0x54);\n  ByteReplace(u4Val, 1, 0x21);\n  ByteReplace(u4Val, 2, 0xFB);\n  ByteReplace(u4Val, 3, 0x32);\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Input: Byte_Location = 0 and Value = 0x54\nOutput: 0x54BBCCDD\nInput: Byte_Location = 1 and Value = 0x21\nOutput: 0xAA21CCDD\nInput: Byte_Location = 2 and Value = 0xFB\nOutput: 0xAABBFBDD\nInput: Byte_Location = 3 and Value = 0x32\nOutput: 0xAABBCC32\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5269367, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/4b0ece1b4c77e2a9eb6a4e325891ab46?s=128&d=identicon&r=PG&f=1", "display_name": "Hakkim Ansari", "link": "https://stackoverflow.com/users/5269367/hakkim-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1445748068, "creation_date": 1445456730, "last_edit_date": 1445458913, "question_id": 33267926, "link": "https://stackoverflow.com/questions/33267926/how-to-modify-a-specific-byte-in-an-interger", "title": "How to Modify a specific Byte in an Interger", "body": "<p>I have the following code -</p>\n\n<pre><code>int main ()\n{\n    unsigned int    u4Val       = 0xAABBCCDD;\n    unsigned char   u1User_Val  = 0x00;\n\n    int Byte_Location = 0;\n\n    printf (\"\\n %08X \\n\", val);\n\n    printf (\"\\n Enter Byte Location : \");\n    scanf  (\"%d\", &amp;Byte_Location);  /* Get - 0 or 1 or 2 or 3 */\n\n    printf (\"\\n Enter Value to Write : \");\n    scanf (\"%02X\", &amp;u1User_Val);\n\n    /*====== Code to Write on the Byte Location in u4Val ======*/\n\n    printf (\"\\n %08X \\n\", u4Val);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Sample IO</strong></p>\n\n<ul>\n<li><p>Case 1:</p>\n\n<p>Input:  Byte_Location = 0  and  Value = 0x54</p>\n\n<p>Output: 0x54BBCCDD</p></li>\n<li><p>Case 2:</p>\n\n<p>Input:  Byte_Location = 1  and  Value = 0x21</p>\n\n<p>Output: 0xAA21CCDD</p></li>\n<li><p>Case 3:</p>\n\n<p>Input:  Byte_Location = 2  and  Value = 0xFB</p>\n\n<p>Output: 0xAABBFBDD</p></li>\n<li><p>Case 4:</p>\n\n<p>Input:  Byte_Location = 3  and  Value = 0x32</p>\n\n<p>Output: 0xAABBCC32</p></li>\n</ul>\n\n<p>Please help me to code on the pending part. Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445457484, "post_id": 33267916, "comment_id": 54337340, "body": "A couple of nested ternary operators?  Use one to pick out that largest of two inputs, the other to pick the smallest of that result and the third input number."}], "answers": [{"comments": [{"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1445458730, "post_id": 33268009, "comment_id": 54337982, "body": "C/C++ are used pretty synonymous these days.  I hope you down vote the qsort suggestion too :)"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1445460080, "post_id": 33268009, "comment_id": 54338737, "body": "@mjr C doesn&#39;t provide vectors natively, so now he has to write an entire set of vector functions or find a library just to choose three numbers."}], "tags": [], "owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "is_accepted": false, "score": 0, "last_activity_date": 1445457007, "creation_date": 1445457007, "answer_id": 33268009, "question_id": 33267916, "link": "https://stackoverflow.com/questions/33267916/how-to-know-what-is-the-second-greatest-number-of-3-numbers-c/33268009#33268009", "title": "How to know what is the second greatest number (of 3 numbers)? (C)", "body": "<p>Put the numbers in a list(vector) and sort them. </p>\n\n<p><a href=\"http://www.cplusplus.com/reference/algorithm/sort/\" rel=\"nofollow\">http://www.cplusplus.com/reference/algorithm/sort/</a></p>\n\n<p>Once they are in order, it is trivial to pick out the biggest, 2nd biggest, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1445457844, "post_id": 33268201, "comment_id": 54337514, "body": "A sort on three numbers?"}, {"owner": {"reputation": 47, "user_id": 5467677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/109KQ.jpg?s=128&g=1", "display_name": "darthir21", "link": "https://stackoverflow.com/users/5467677/darthir21"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1445458391, "post_id": 33268201, "comment_id": 54337815, "body": "Author asked how to sort 3 numbers but also a better option to sort more numbers than 3"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1445458570, "post_id": 33268201, "comment_id": 54337895, "body": "He didn&#39;t ask how to sort them; he asked which was biggest, which was smallest, and which was in the middle. It&#39;s a subtle but important difference. Sorting 3 numbers is hugely wasteful. Just calling <code>qsort</code> probably takes more processor time than calculating the answer with <code>if</code> statements."}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 1, "creation_date": 1445458754, "post_id": 33268201, "comment_id": 54337997, "body": "So if he had 1000 numbers would you still suggest to use <code>if</code> statements? This answer is almost right (Didn&#39;t say how to get the greatests and the smalles though). And OP doesn&#39;t want the number in the middle he wants the 2 greatest numbers and the smallest. Sorting is the best approach"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 1, "creation_date": 1445459981, "post_id": 33268201, "comment_id": 54338673, "body": "@Mr.E No, of course 1000 is a different case. This is at the very heart of sorting theory. Sorting small sets such as 3 numbers is wasteful and should never be done. Consult Knuth."}], "tags": [], "owner": {"reputation": 47, "user_id": 5467677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/109KQ.jpg?s=128&g=1", "display_name": "darthir21", "link": "https://stackoverflow.com/users/5467677/darthir21"}, "is_accepted": false, "score": 1, "last_activity_date": 1445461923, "last_edit_date": 1445461923, "creation_date": 1445457729, "answer_id": 33268201, "question_id": 33267916, "link": "https://stackoverflow.com/questions/33267916/how-to-know-what-is-the-second-greatest-number-of-3-numbers-c/33268201#33268201", "title": "How to know what is the second greatest number (of 3 numbers)? (C)", "body": "<p>If you had 3 numbers you can use:</p>\n\n<pre><code>if(a&gt;c)\nswap(a,c)\n\nif (a &gt; b)\nswap(a, b)\n\n//Now the smallest element is the first one. \n\nif (b &gt; c)\nswap(b, c);\n//sorted \n</code></pre>\n\n<p>If you had much more number than 3:</p>\n\n<p>C/C++ standard library  contains qsort function.</p>\n\n<p>This is not the best quick sort implementation in the world but it fast enough and VERY EASY to be used... the formal syntax of qsort is:</p>\n\n<p>qsort(,,sizeof(),compare_function);</p>\n\n<pre><code>int arr[] = {3,5,8};\n\nqsort(values, 3, sizeof(int), cmpfunc);\n\n\nfor( n = 0 ; n &lt; 3; n++ ) \n{   \n   printf(\"%d \", values[n]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 3337689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2f501ed4c5c59c36ed20c7327c09022?s=128&d=identicon&r=PG&f=1", "display_name": "EnderEgg", "link": "https://stackoverflow.com/users/3337689/enderegg"}, "edited": false, "score": 0, "creation_date": 1445459184, "post_id": 33268295, "comment_id": 54338243, "body": "That (top part) plus correcting a mistake I made did it. Thank you!"}], "tags": [], "owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "is_accepted": true, "score": 1, "last_activity_date": 1445458050, "creation_date": 1445458050, "answer_id": 33268295, "question_id": 33267916, "link": "https://stackoverflow.com/questions/33267916/how-to-know-what-is-the-second-greatest-number-of-3-numbers-c/33268295#33268295", "title": "How to know what is the second greatest number (of 3 numbers)? (C)", "body": "<p>your assumption <code>greatest2=l1;</code> is incorrect if <code>l1</code> is the second biggest.\nThe correct code should be</p>\n\n<pre><code>if (l1 != greatest)\n    greatest2 = l1;\nelse\n    greatest2 = l2;\n</code></pre>\n\n<p>If you have an array of numbers:<br>\nYou can do it in 1 loop: if you find a new maximum, the old maximum is the new second maximum, else if it is larger than the second, it is the new second maximum.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int a[] = {12,10,15,17,18,14,15,20};\n    int max = a[0], second = a[0];\n    unsigned size = sizeof a / sizeof a[0];\n    if (size &lt;= 1) //there would be no second number\n        return -1;\n    for (unsigned i = 1; i &lt; size; i++)\n    {\n        if (a[i] &gt;= max)\n        {\n            second = max;\n            max = a[i];\n        }\n        else if (a[i] &gt; second)\n        {\n            second = a[i];\n        }\n    }\n    printf(\"max: %d, second: %d\\n\", max, second);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "is_accepted": false, "score": 2, "last_activity_date": 1445460131, "creation_date": 1445460131, "answer_id": 33268848, "question_id": 33267916, "link": "https://stackoverflow.com/questions/33267916/how-to-know-what-is-the-second-greatest-number-of-3-numbers-c/33268848#33268848", "title": "How to know what is the second greatest number (of 3 numbers)? (C)", "body": "<p>Short and sweet:</p>\n\n<pre><code>greatest = l1 &gt; l2 ? l1 &gt; l3 ? l1 : l3 : l2 &gt; l3 ? l2 : l3;\nsmallest = l1 &lt; l2 ? l1 &lt; l3 ? l1 : l3 : l2 &lt; l3 ? l2 : l3;\nmiddle = greatest == l1 ? (smallest == l2 ? l3 : l2) : greatest == l2 ? (smallest == l3 ? l1 : l3) : l2;\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 3337689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2f501ed4c5c59c36ed20c7327c09022?s=128&d=identicon&r=PG&f=1", "display_name": "EnderEgg", "link": "https://stackoverflow.com/users/3337689/enderegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 33268295, "answer_count": 4, "score": 0, "last_activity_date": 1445461923, "creation_date": 1445456708, "last_edit_date": 1445458948, "question_id": 33267916, "link": "https://stackoverflow.com/questions/33267916/how-to-know-what-is-the-second-greatest-number-of-3-numbers-c", "title": "How to know what is the second greatest number (of 3 numbers)? (C)", "body": "<p>I want to know the \"greatest\", \"greatest2\", and \"smallest\" numbers. What I wrote doesn't work. Not even sure why. How can I fix this and If I had more numbers, is there a better option? Thanks in advance. (l1,l2,l3 would be the sides of a triangle) (also, it's in C)</p>\n\n<pre><code>greatest=l1;\n    if(greatest&lt;l2){\n        greatest=l2;\n    }if(greatest&lt;l3){\n        greatest=l3;\n    }\n\n    greatest2=l1;\n    if(greatest2&lt;l2&amp;&amp;l2&lt;greatest){\n        greatest2=l2;\n    }if(greatest2&lt;l3&amp;&amp;l3&lt;greatest){\n        greatest2=l3;\n    }\n\n    smallest=l1;\n    if(smallest&gt;l2){\n        smallest=l2;\n    }if(smallest&gt;l3){  //had a mistake here, instead of &gt; I had &lt;\n        smallest=l3;\n</code></pre>\n\n<p>I can mention that I don't really know much, but any advice is highly appreciated </p>\n"}, {"tags": ["c++", "c", "file", "arr"], "comments": [{"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1445456541, "post_id": 33267772, "comment_id": 54336859, "body": "fp = open(&quot;text.txt&quot;,r); should be fp = fopen(&quot;text.txt&quot;,r);"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1445456555, "post_id": 33267772, "comment_id": 54336872, "body": "Is there a newline character (<code>\\n</code>) at the end of the string of integers also?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445458303, "post_id": 33267772, "comment_id": 54337759, "body": "<a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1445461218, "post_id": 33267772, "comment_id": 54339341, "body": "Which language are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1445456453, "creation_date": 1445456453, "answer_id": 33267834, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th/33267834#33267834", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>You could actually use C++:</p>\n\n<pre><code>std::ifstream file(\"text.txt\");\nstd::string line;\nwhile (std::getline(file, line)) {\n    std::istringstream iss(line);\n    int i;\n    while (iss &gt;&gt; i) {\n        // ...\n    }\n}\n</code></pre>\n\n<p>The inner loop could simply load all of the ints into a vector directly or something:</p>\n\n<pre><code>std::ifstream file(\"text.txt\");\nstd::string line;\nwhile (std::getline(file, line)) {\n    std::istringstream iss(line);\n    std::vector&lt;int&gt; all_the_ints{\n        std::istream_iterator&lt;int&gt;{iss},\n        std::istream_iterator&lt;int&gt;{}\n    };\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1445458395, "post_id": 33267946, "comment_id": 54337818, "body": "Note that you&#39;ll not only need to check it, but reset it before the call to <code>strtol</code> you care about.  Otherwise you could see an error that occurred much earlier."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": true, "score": 0, "last_activity_date": 1445461441, "last_edit_date": 1445461441, "creation_date": 1445456780, "answer_id": 33267946, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th/33267946#33267946", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>Ben's answer was so good, it should be part of the answer</p>\n\n<p>Set errno to 0 before calling strtol.</p>\n\n<p>Check errno. From man page</p>\n\n<p>ERANGE</p>\n\n<p>The resulting value was out of range.\nThe implementation may also set errno to EINVAL in case no conversion was performed <strong>(no digits seen, and 0 returned)</strong>. </p>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1445458322, "creation_date": 1445458322, "answer_id": 33268369, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th/33268369#33268369", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>You're throwing away the information available from <code>strtol</code>.</p>\n\n<p>In particular, after a call</p>\n\n<pre><code>val = strtol(p, &amp;endp, radix);\n</code></pre>\n\n<p>you are interested in whether <code>p == endp</code>.</p>\n\n<p>In your call <code>strtol(p, &amp;p, radix)</code> you're overwriting <code>p</code> too soon and losing the chance to perform the test.</p>\n"}], "owner": {"reputation": 23, "user_id": 5473081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4693bf71da42a000f4c0dc041645838c?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Johnson", "link": "https://stackoverflow.com/users/5473081/mark-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 33267946, "answer_count": 3, "score": 2, "last_activity_date": 1445461441, "creation_date": 1445456211, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>If I'm reading in lines from a .txt file of varying length, (i.e. 5 integers on line 1, then 2 integers on line 2, then 10 integers on line 3, and etc.), using fgets (although I don't necessarily need to use it, just seemed like a good tool in my situation). Every solution I find returns an error of 0 (like strtol or atio).</p>\n\n<pre><code>char str[100];\nchar* p = str;\nFILE* fp;\nfp = open(\"text.txt\",r);\nif(fp == NULL) \n    printf(\"aborting.. Cannot open file! \\n\");\nwhile(!foef(fp))\n{\nif(fgets(p,100,fp) != NULL)\n{\n    for (int j = 0 ; j &lt; 20 ; j+=2) \n    {\n        temp1 = strtol(p, &amp;p, 10);\n        // need to store temp1 into arr[j] if it is a valid integer (0-&gt;inf)\n        // but should discard if we are at the end of the line\n}\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "terminal", "daemon", "dev-null"], "answers": [{"tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": false, "score": 6, "last_activity_date": 1445459086, "creation_date": 1445459086, "answer_id": 33268567, "question_id": 33267559, "link": "https://stackoverflow.com/questions/33267559/linux-close-or-redirect-standard-output-to-dev-null-after-detaching-from-term/33268567#33268567", "title": "linux : close or redirect standard output to /dev/null after detaching from terminal", "body": "<p>You can do either, but redirecting to <code>/dev/null</code> is safer and easier.</p>\n\n<p>If you choose to close, you must make sure that any external programs or libraries you invoke still work when stdin/stdout/stderr is closed. Libraries and frameworks differ in how they handle this:</p>\n\n<ul>\n<li>Shell scripts may abort or misbehave as <code>echo</code> unexpectedly returns non-success.</li>\n<li>Python programs will see an arbitrary print statement fail with exceptions when the underlying buffer is written.</li>\n<li>Ruby will just ignore it.</li>\n</ul>\n\n<p>Even if your invoked programs or libraries normally doesn't print anything, you don't know what kind of conditional logging they do and how they handle failures there.</p>\n\n<p>Unless all the code you run is known to handle not having standard i/o, it's better to just redirect.</p>\n"}], "owner": {"reputation": 401, "user_id": 5473016, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c81298e5616be0ce939ff6977488a564?s=128&d=identicon&r=PG&f=1", "display_name": "drus", "link": "https://stackoverflow.com/users/5473016/drus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1850, "favorite_count": 4, "answer_count": 1, "score": 2, "last_activity_date": 1589527807, "creation_date": 1445455419, "last_edit_date": 1589527807, "question_id": 33267559, "link": "https://stackoverflow.com/questions/33267559/linux-close-or-redirect-standard-output-to-dev-null-after-detaching-from-term", "title": "linux : close or redirect standard output to /dev/null after detaching from terminal", "body": "<p>We have a linux code that does detaching from terminal based on implementation found on <a href=\"https://web.archive.org/web/20180223192524/http://www.itp.uzh.ch/~dpotter/howto/daemonize\" rel=\"nofollow noreferrer\">http://www.itp.uzh.ch/~dpotter/howto/daemonize</a>.</p>\n\n<p>Here a code snippet from it :</p>\n\n<pre><code>....\nfreopen( \"/dev/null\", \"r\", stdin);\nfreopen( \"/dev/null\", \"w\", stdout);\nfreopen( \"/dev/null\", \"w\", stderr);\n\nkill( parent, SIGUSR1 );\n}\n</code></pre>\n\n<p>Instead of redirecting to <strong>/dev/null</strong> I can just close standard file descriptors in the following way and achieve the same result:</p>\n\n<pre><code>close(STDIN_FILENO);     \nclose(STDOUT_FILENO); \nclose(STDERR_FILENO);\n</code></pre>\n\n<p>For now, I'm a bit stuck with what approach to use : redirect or close ? what are potential issues of each approach ?</p>\n"}, {"tags": ["c", "trie"], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": true, "score": 0, "last_activity_date": 1445455436, "creation_date": 1445455436, "answer_id": 33267562, "question_id": 33267465, "link": "https://stackoverflow.com/questions/33267465/printing-out-a-trie-in-c/33267562#33267562", "title": "Printing out a Trie in C", "body": "<p>To my understanding, if the recursion is performed in the part</p>\n\n<pre><code>for (i = 0; i &lt; 26; i++)\n{    \n    if (subtree-&gt;children[i] != NULL)\n    {   \n        word[level] = 97 + i;\n        level++;\n        printSubtree(subtree-&gt;children[i], word, level);\n    }\n}\n</code></pre>\n\n<p>the variable <code>level</code> is increased, but never decreased, which means that it accumulates for every child. The following change should work as desired.</p>\n\n<pre><code>for (i = 0; i &lt; 26; i++)\n{    \n    if (subtree-&gt;children[i] != NULL)\n    {   \n        word[level] = 97 + i;\n        // increment level for the recursive calls\n        printSubtree(subtree-&gt;children[i], word, level + 1);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5466072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed594f0ab7f614ca01f37f055e0e56?s=128&d=identicon&r=PG&f=1", "display_name": "Ab123", "link": "https://stackoverflow.com/users/5466072/ab123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1359, "favorite_count": 0, "accepted_answer_id": 33267562, "answer_count": 1, "score": 1, "last_activity_date": 1445455436, "creation_date": 1445455057, "last_edit_date": 1445455384, "question_id": 33267465, "link": "https://stackoverflow.com/questions/33267465/printing-out-a-trie-in-c", "title": "Printing out a Trie in C", "body": "<p>Almost done with printing this trie out. But running into a little of trouble. I currently have: </p>\n\n<pre><code>    void printSubtree(struct trie *subtree, char word[100], int level) {\n    int i;\n\n        if (subtree == NULL){\n        return;\n        }\n\n       if (subtree-&gt;wordEnd) {     \n            word[level] =0;\n            printf( \"%s \\n \", word);\n\n        }\n            for (i = 0; i&lt;26;i++) {    \n                if (subtree-&gt;children[i]!= NULL) {   \n                    word[level] = 97 + i;\n                    level++;\n                    printSubtree( subtree-&gt;children[i], word, level);\n            }   \n    }           \n }\n</code></pre>\n\n<p>When I do this, it skips the first letter, so I have another that includes this snippet which prints the first letter, then calls printSubtree to print the rest of the letters for that corresponding first letter. </p>\n\n<pre><code>    for (i = 0; i&lt;26;i++) {\n    if (temp-&gt;children[i]!= NULL) {\n        arr[0] = temp-&gt;children[i]-&gt;letter;\n        printSubtree(temp-&gt;children[i], arr, 1);  \n        }\n    } \n</code></pre>\n\n<p>What happens though is that it doesn't print the trie out correctly. For example, if \"bro\" and \"brim\" are in my trie, this prints out \"bro\" then \"brio\", instead of brim. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c", "gcc", "padding", "compiler-optimization"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1445455050, "post_id": 33267393, "comment_id": 54336059, "body": "I don&#39;t think you can summon someone to your question by mentioning their name in the <code>@</code> notation; they have to have made a comment already (to this question) and your comment is then a reply to theirs.  So you should not be surprised if Ambroz does not notice this question because of your comment."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1445455452, "post_id": 33267393, "comment_id": 54336275, "body": "You cannot use the at sign syntax to ping someone unless they&#39;ve already participated in the thread in which you&#39;re posting. Addressing a question to a specific user is also inappropriate here. This isn&#39;t a chat room or &quot;be my personal consultant or teacher&quot; site."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1445455931, "post_id": 33267393, "comment_id": 54336543, "body": "This is one of those for which the target is of extreme importance. For example alignment isn&#39;t even really a thing on z80, mostly optional on x86, but critical on some RISC architecture. So, for what target do you want to consider this question?"}, {"owner": {"reputation": 814, "user_id": 5171437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh5.googleusercontent.com/-dVd6QfUoAc8/AAAAAAAAAAI/AAAAAAAAAEQ/Xxcp3CY7CF8/photo.jpg?sz=128", "display_name": "noman pouigt", "link": "https://stackoverflow.com/users/5171437/noman-pouigt"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1445456082, "post_id": 33267393, "comment_id": 54336629, "body": "@harold: basically i work on embedded environment which uses arm.Anyway this question is answered by Barmer excellent reply."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1445456272, "post_id": 33267393, "comment_id": 54336729, "body": "For ARM it depends on the version."}], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 5171437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh5.googleusercontent.com/-dVd6QfUoAc8/AAAAAAAAAAI/AAAAAAAAAEQ/Xxcp3CY7CF8/photo.jpg?sz=128", "display_name": "noman pouigt", "link": "https://stackoverflow.com/users/5171437/noman-pouigt"}, "edited": false, "score": 0, "creation_date": 1445455771, "post_id": 33267587, "comment_id": 54336448, "body": "@Barmer: oh that is why i remember sometime back somewhere that the misaligned memory access causing more reads than aligned memory access as compiler issues more instructions for reading the memory compare to aligned access. So in the case of misaligned integer access  the compiler issues 4 instructions to get integer memory compare to only one access in the case of aligned memory right?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1445455976, "post_id": 33267587, "comment_id": 54336564, "body": "Is it though? An unaligned read like that is just one instruction on x86, unless the compiler is being silly."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1445456022, "post_id": 33267587, "comment_id": 54336588, "body": "It depends on the specific hardware architecture."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1445455529, "creation_date": 1445455529, "answer_id": 33267587, "question_id": 33267393, "link": "https://stackoverflow.com/questions/33267393/how-does-the-compiler-handle-the-misalignment/33267587#33267587", "title": "How does the compiler handle the misalignment?", "body": "<p>When the compiler sees the notation <code>p-&gt;y</code>, it knows you're accessing a structure member, and that the structure is packed, because of the declaration of <code>p</code>. It translates this into code that reads byte by byte, and performs the necessary bit shifting to combine them into a <code>uint32_t</code> variable. Essentially, it treats the expression <code>p-&gt;y</code> as if it were something like:</p>\n\n<pre><code>*((char*)p+3) &lt;&lt; 24 + *((char*)p+2) &lt;&lt; 16 + *((char*p)+1) &lt;&lt; 8 + *(char*)p\n</code></pre>\n\n<p>But when you indirect through <code>*py</code>, the compiler doesn't know where the value of that variable came from. It doesn't know that it points into a packed structure, so that it would need to perform this shifting. <code>py</code> is declared to point to <code>uint32_t</code>, which can normally be accessed using an instruction that reads an entire 32-bit word at once. But this instruction expects the pointer to be aligned to a 4-byte boundary, so when you try to do this you'll get a bus error due to the misalignment.</p>\n"}], "owner": {"reputation": 814, "user_id": 5171437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh5.googleusercontent.com/-dVd6QfUoAc8/AAAAAAAAAAI/AAAAAAAAAEQ/Xxcp3CY7CF8/photo.jpg?sz=128", "display_name": "noman pouigt", "link": "https://stackoverflow.com/users/5171437/noman-pouigt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 33267587, "answer_count": 1, "score": 1, "last_activity_date": 1445455529, "creation_date": 1445454738, "last_edit_date": 1495539861, "question_id": 33267393, "link": "https://stackoverflow.com/questions/33267393/how-does-the-compiler-handle-the-misalignment", "title": "How does the compiler handle the misalignment?", "body": "<p>The SO question <a href=\"https://stackoverflow.com/questions/1756811/does-gccs-attribute-packed/7956942#7956942\">Does GCC's <code>__attribute__((__packed__))</code>\u2026?</a> mentions that <code>__attribute__((__packed__))</code> does \"packing which introduces alignment issues when accessing the fields of a packed structure. The compiler will account for that when the the fields are accessed directly, but not when they are accessed via pointers\".</p>\n\n<p>How does the compiler makes sure that the fields are accessed directly? I suppose it internally add some padding or does some pointer magic. In the case below, how does the compiler makes sure that the <code>y</code> is accessed correctly compared to the pointer?</p>\n\n<pre><code>struct packet {\n    uint8_t x;\n    uint32_t y;\n} __attribute__((packed));\n\nint main ()\n{\n    uint8_t bytes[5] = {1, 0, 0, 0, 2};\n    struct packet *p = (struct packet *)bytes;\n\n    // compiler handles misalignment because it knows that\n    // \"struct packet\" is packed\n    printf(\"y=%\"PRIX32\", \", ntohl(p-&gt;y));\n\n    // compiler does not handle misalignment - py does not inherit\n    // the packed attribute\n    uint32_t *py = &amp;p-&gt;y;\n    printf(\"*py=%\"PRIX32\"\\n\", ntohl(*py));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "math", "modulus"], "comments": [{"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1445456131, "post_id": 33267331, "comment_id": 54336655, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2708851/what-is-an-efficient-way-to-get-the-least-non-negative-residue-modulo-n-in-c\">What is an efficient way to get the least non-negative residue modulo n in C?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1445454931, "creation_date": 1445454931, "answer_id": 33267438, "question_id": 33267331, "link": "https://stackoverflow.com/questions/33267331/obtaining-two-large-numbers-and-reducing-their-difference-by-taking-their-mod-va/33267438#33267438", "title": "obtaining two large numbers and reducing their difference by taking their mod values iteratively in C", "body": "<p>If <code>((A mod M) - (B mod M)) mod M</code> gives you a negative result (as it may, since older C leaves the result of modulus implementation-defined when either argument is negative, and C99 defines it so that the result is negative if the dividend is negative), simply add <code>M</code> to get the result you want. After all, x and x+M are equivalent, mod M.</p>\n"}], "owner": {"reputation": 546, "user_id": 4633925, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/pwk3O.jpg?s=128&g=1", "display_name": "alchemist95", "link": "https://stackoverflow.com/users/4633925/alchemist95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 33267438, "answer_count": 1, "score": 0, "last_activity_date": 1445454931, "creation_date": 1445454553, "last_edit_date": 1445454742, "question_id": 33267331, "link": "https://stackoverflow.com/questions/33267331/obtaining-two-large-numbers-and-reducing-their-difference-by-taking-their-mod-va", "title": "obtaining two large numbers and reducing their difference by taking their mod values iteratively in C", "body": "<p>Well, let us say i am supposed to obtain D = (A - B) mod M, where A and B are very large, large as in, long long wont help. A and B were obtained iteratively and independently and i would obtain A mod M at each iteration and B mod M at each iteration. Now, let us say B is always smaller than A, but (B mod M) can be larger than (A mod M), then when D is evaluated, a negative number will be obtained, which isnt right, because, well, B is smaller than A. How do I go about this? Thanx in advance.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445454525, "post_id": 33267223, "comment_id": 54335784, "body": "Hi, I am quite a newbie, so it would be good to stick with just plain old looping if possible. Actually, for the first function, I just wanted to make sure for the 2D array, each row has unique values. Similarly, I also want to search in column fashion to make sure it is unique and if so, output true."}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445454531, "post_id": 33267223, "comment_id": 54335787, "body": "Well, I forgot to metion that its in java... You could use stl vector in C++, and make use of the find() method"}, {"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445454563, "post_id": 33267223, "comment_id": 54335801, "body": "Hmm...I am dealing with C only."}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445454806, "post_id": 33267223, "comment_id": 54335924, "body": "Wait... Looping, huh? Then I&#39;ve got an idea. Simply create an array(a temporary one), and scan it to check if the element of the 2D matrix exists. If not, add it to the temp array. If yes, you found a duplicate."}, {"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445454998, "post_id": 33267223, "comment_id": 54336024, "body": "Hmm...Is my above code workable for looking for duplicates for row?"}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445455023, "post_id": 33267223, "comment_id": 54336041, "body": "Whoa, I just re read your code. Its an O(n^4) algorithm, and most of it isn&#39;t what you want. I&#39;ll instead post a code snippet for you in the answer below."}, {"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445455176, "post_id": 33267223, "comment_id": 54336133, "body": "Actually I am thinking do I even need 4 for loops since I am just checking for row. Would 2 do the job?"}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445456189, "post_id": 33267223, "comment_id": 54336677, "body": "@kenny, look at my other answer. I used 3 loops. It is still inefficient, but better than having 4 loops."}], "tags": [], "owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "is_accepted": false, "score": 1, "last_activity_date": 1445458893, "last_edit_date": 1445458893, "creation_date": 1445454190, "answer_id": 33267223, "question_id": 33267144, "link": "https://stackoverflow.com/questions/33267144/finding-duplicates-in-2d-array-row-and-column/33267223#33267223", "title": "Finding duplicates in 2D array - Row and Column", "body": "<p>If you are not concerned about the efficiency (your code is already in O(n^2)), use a <code>HashSet</code> to add elements to it using the <code>add(elem)</code> method, and look for duplicates for every single element in the 2D matrix using the <code>contains(elem)</code> method. </p>\n\n<p>You add an element to the HashSet if it doesn't already contain it - no duplicates can be stored. </p>\n\n<p>Is that what you are looking for?</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445460323, "post_id": 33267566, "comment_id": 54338861, "body": "is the ; after the second for loop intended? or should it be another {}?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445460425, "post_id": 33267566, "comment_id": 54338903, "body": "it is intended <code>for(;;);</code> is same as <code>for(;;){}</code>"}, {"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445460820, "post_id": 33267566, "comment_id": 54339114, "body": "That&#39;s strange then cause it doesn&#39;t seems to work. I edited a little to fit in my functions. Can you help me take a look at my edited code above? I need to return false if there are duplicates."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "is_accepted": false, "score": 1, "last_activity_date": 1445455459, "creation_date": 1445455459, "answer_id": 33267566, "question_id": 33267144, "link": "https://stackoverflow.com/questions/33267144/finding-duplicates-in-2d-array-row-and-column/33267566#33267566", "title": "Finding duplicates in 2D array - Row and Column", "body": "<p>here is a loop example that would work:</p>\n\n<pre><code>int i, j, rowLenght = 6, colLenght = 6, arr[rowLenght][colLenght];\nfor(i = 0; i &lt; rowLenght; ++i) {\n   for(j = i; i &lt; colLenght &amp;&amp; arr[i][i] != arr[i][j]; ++j);\n\n   if(arr[i][i] == arr[i][j])\n     printf(\"We have mathch at arr[%d][%d] is same as arr[%d][%d]\", i, i, i, j);\n}\n</code></pre>\n\n<p>and simply you swap around few variables and you got column matching one</p>\n\n<pre><code>int i, j, rowLenght = 6, colLenght = 6, arr[rowLenght][colLenght];\nfor(i = 0; i &lt; rowLenght; ++i) {\n  for(j = i; i &lt; colLenght &amp;&amp; arr[i][i] != arr[j][i]; ++j);\n\n  if(arr[i][i] == arr[j][i])\n    printf(\"We have mathch at arr[%d][%d] is same as arr[%d][%d]\", i, i, j, i);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445461413, "post_id": 33267698, "comment_id": 54339451, "body": "May I know what is the purpose of the size?"}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445489361, "post_id": 33267698, "comment_id": 54347908, "body": "Here, &quot;size&quot; is the integer variable which stores the size of the array &quot;tmp&quot;. Oh, I&#39;m sorry, I forgot to increment the value of size. I&#39;ll update the answer."}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445489782, "post_id": 33267698, "comment_id": 54348052, "body": "@kenny , Size of &quot;tmp&quot; increases as unique elements are found in the array. We know that the maximum size of &quot;tmp&quot; could be &quot;n&quot;, as it is the maximum number of elements in a row."}, {"owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "reply_to_user": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1445490305, "post_id": 33267698, "comment_id": 54348181, "body": "And, @kenny , the answer posted by GRC is logically flawed. It wouldn&#39;t work. He is checking diagonals&#39; elements with every other element, so duplicates will only be found if they are in the diagonal of the 2D array, else it&#39;ll just slip off. And, don&#39;t forget to mark this as your answer."}], "tags": [], "owner": {"reputation": 37, "user_id": 5194842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1572d54e284f45bc9f26f8bda62d49?s=128&d=identicon&r=PG", "display_name": "Layman806", "link": "https://stackoverflow.com/users/5194842/layman806"}, "is_accepted": false, "score": 1, "last_activity_date": 1445489522, "last_edit_date": 1445489522, "creation_date": 1445455931, "answer_id": 33267698, "question_id": 33267144, "link": "https://stackoverflow.com/questions/33267144/finding-duplicates-in-2d-array-row-and-column/33267698#33267698", "title": "Finding duplicates in 2D array - Row and Column", "body": "<p>Here, take this code instead:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//Assuming int a[][] contains all input elements,\r\n//and that n is the number of rows and columns\r\n\r\nfor(int i=0; i&lt;n; i++)\r\n  {\r\n    int tmp[n], size=0, dup=0;\r\n    for(int j=0; j&lt;n; j++){\r\n      if(size&gt;0)\r\n        {\r\n          int k=0;\r\n          while(k&lt;size)\r\n            {\r\n              //comparing each element of tmp with current row's(i) current(j) element\r\n              if(a[j]==tmp[k])\r\n                {\r\n                  dup=1;\r\n                  break;\r\n                }\r\n              else\r\n                k++;\r\n            }\r\n          if(k==size&amp;&amp;k&lt;n){ //updated here,\r\n            tmp[k]=a[j];    //\r\n            size++;         //and here, incrementing size\r\n            }\r\n        }\r\n      if(dup==1)\r\n        printf(\"Duplicate found\");\r\n    }\r\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This will compare each element of the row to a temporary array of element containing unique elements of the row. You can take a similar approach for columns.</p>\n"}], "owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9519, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1445489522, "creation_date": 1445453936, "last_edit_date": 1445460911, "question_id": 33267144, "link": "https://stackoverflow.com/questions/33267144/finding-duplicates-in-2d-array-row-and-column", "title": "Finding duplicates in 2D array - Row and Column", "body": "<p>I would like to know how do I find duplicates separately - Row and Column.</p>\n\n<p>So far I think I have this for the row, haven't really tested it out. But I am kinda confuse how to find duplicates for a 2D array in column fashion? I need to implement 2 functions one to find duplicate for row and the other one to find duplicate for column.</p>\n\n<pre><code>bool uniqueRow(int square[][MAX_SIZE], int sqrSize, int i) {\n\n   int j;\n\n   for(i = 0; i &lt; sqrSize; ++i) {\n      for(j = i; i &lt; sqrSize &amp;&amp; square[i][i] != square[i][j]; ++j) {\n\n         if(square[i][i] == square[i][j])\n            return false;\n\n         else\n            return true;\n      }\n   }\n\n   return false;\n}\nbool uniqueCol(int square[][MAX_SIZE], int sqrSize, int i) {\n\n   int j;\n\n   for(i = 0; i &lt; sqrSize; ++i) {\n      for(j = i; i &lt; sqrSize &amp;&amp; square[i][i] != square[j][i]; ++j) {\n\n         if(square[i][i] == square[j][i])\n            return false;\n\n         else \n            return true;\n      }\n   }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1445454268, "post_id": 33267000, "comment_id": 54335668, "body": "There are <code>2*3^8</code> possibilities, because you can have nothing or a <code>-</code> in front of the <code>1</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445455516, "post_id": 33267000, "comment_id": 54336311, "body": "Off the wall. Am at a total loss to understand where ternary number system might help, since your example input has 9 different values."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445458664, "post_id": 33267000, "comment_id": 54337942, "body": "@WeatherVane At each position, there are three possible things you can put, <code>+</code>, <code>-</code>, or nothing. So each possibility corresponds to a number in a ternary number system."}], "answers": [{"tags": [], "owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "is_accepted": false, "score": 0, "last_activity_date": 1445457843, "creation_date": 1445457843, "answer_id": 33268232, "question_id": 33267000, "link": "https://stackoverflow.com/questions/33267000/c-programming-122-12-34-5-6-78-9/33268232#33268232", "title": "C programming 122 = 12 + 34 - 5 - 6 + 78 + 9", "body": "<p>Your code is running fine for me, here is the screenshot for the output:</p>\n\n<p><a href=\"http://i.stack.imgur.com/9Ptme.jpg\" rel=\"nofollow\">Input: n=145 Output: 123-4-56-7+89</a></p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 5470088, "user_type": "registered", "profile_image": "https://graph.facebook.com/960124424061463/picture?type=large", "display_name": "Ph&#225;t V&#245;", "link": "https://stackoverflow.com/users/5470088/ph%c3%a1t-v%c3%b5"}, "is_accepted": false, "score": 1, "last_activity_date": 1445528714, "creation_date": 1445528714, "answer_id": 33285151, "question_id": 33267000, "link": "https://stackoverflow.com/questions/33267000/c-programming-122-12-34-5-6-78-9/33285151#33285151", "title": "C programming 122 = 12 + 34 - 5 - 6 + 78 + 9", "body": "<p>I have solved the problem.</p>\n\n<p>Just have to change the result variable's type into double. Because pow statement require a double type variable</p>\n"}], "owner": {"reputation": 43, "user_id": 5470088, "user_type": "registered", "profile_image": "https://graph.facebook.com/960124424061463/picture?type=large", "display_name": "Ph&#225;t V&#245;", "link": "https://stackoverflow.com/users/5470088/ph%c3%a1t-v%c3%b5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1445528714, "creation_date": 1445453464, "last_edit_date": 1445458408, "question_id": 33267000, "link": "https://stackoverflow.com/questions/33267000/c-programming-122-12-34-5-6-78-9", "title": "C programming 122 = 12 + 34 - 5 - 6 + 78 + 9", "body": "<p>Input n. Put + or - betweeen 1,2,3,4,5,6,7,8,9 to found a expression equal to n\n(122 = 12 + 34 - 5 - 6 + 78 + 9 or 146 = 123 + 45 + 67 - 89)</p>\n\n<p>My idea is that we could fill between 2 numbers 3 values: 0 for no blank, 1 for + and 2 for -\nfor example 1 + 2 + 3456 - 78 + 9 is 11000201. And this is base-3-number\nThere are 3^8 expressions to test because we have 8 position to fill, each one has 3 ways.\nStart for loop, i from 1 to 3^8. Convert each i to base-3-number and and convert each character of i into + - or no blank to calculate if the present expression is equal to n or not. If equal, print out the expression and end the loop...</p>\n\n<p>My problem is that the program give me the wrong answer and I can't find out a bug.\nfor example I input 145 but it give me 123 + 45 + 67 - 89 (=146)</p>\n\n<p>This is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n\nint main()\n{\n    int n, result, a[100],count, i,j, test,temp, checkpoint,num,checkresult=0;\n    printf(\"Input n\\n\");\n    scanf(\"%d\",&amp;n);\n\n\n    for (num=1;num&lt;=6561;num++)\n   {\n\n        count=1;\n        test = num;\n        result = 0;\n        checkpoint=0;\n        a[0]=1;\n        //convert to base 3\n        while (test&gt;0)\n        {\n            a[count]=test%3;\n            //printf(\"%d \",a[count]);\n            test = test/3;\n            count++;\n        }\n        count--;\n        //put 0 to fill full 8 blank\n        while (count&lt;8)\n            {\n                count++;\n                a[count]=0;\n                //printf(\"%d \",a[count]);\n\n            }\n        //inverse the sequence to have the right\n        for (i=1;i&lt;=count/2;i++)\n        {\n            temp = a[i];\n            a[i] = a[count+1-i];\n            a[count+1-i] = temp;\n        }\n\n\n        //calculate the number\n        //1 is +, 2 is -, 0 is no blank\n\n        for (i=1;i&lt;=8;i++)\n        {\n            if ((a[i]==1) || (a[i]==2))\n            {\n                if (a[checkpoint]==1)\n                    for (j=checkpoint+1;j&lt;=i;j++)\n                        result = result + j*pow(10,i-j);\n                if (a[checkpoint]==2)\n                    for (j=checkpoint+1;j&lt;=i;j++)\n                        result = result - j*pow(10,i-j);\n                checkpoint=i;\n            }\n        }\n        if (i==9)\n        {\n            if (a[checkpoint]==1)\n                for (j=checkpoint+1;j&lt;=i;j++)\n                    result = result + j*pow(10,i-j);\n            if (a[checkpoint]==2)\n                for (j=checkpoint+1;j&lt;=i;j++)\n                    result = result - j*pow(10,i-j);\n        }\n        //check if the result is correct or not. If correct, print it out and break the loop\n        if (result == n)\n        {\n            checkresult=1;\n            for (i=1;i&lt;=8;i++)\n            {\n                printf(\"%d\",i);\n                if (a[i]==1)\n                    printf(\"+\");\n                if (a[i]==2)\n                    printf(\"-\");\n            }\n            printf(\"9\\n\");\n            break;\n        }\n    }\n    if (checkresult==0)\n        printf(\"Can't found...\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory", "segmentation-fault", "memcpy"], "comments": [{"owner": {"reputation": 2397, "user_id": 996142, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/22f659c828b9c60e26aa2359387cebfb?s=128&d=identicon&r=PG", "display_name": "user996142", "link": "https://stackoverflow.com/users/996142/user996142"}, "edited": false, "score": 0, "creation_date": 1445453836, "post_id": 33266998, "comment_id": 54335418, "body": "<code>record* rec</code> creates pointer on stack that points to nowhere (null or junk). You should create rec on stack (<code>record rec</code>) or use malloc and then fill it on heap"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5301422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1241f453e5024958c39c1360ef683cb1?s=128&d=identicon&r=PG&f=1", "display_name": "ottocay", "link": "https://stackoverflow.com/users/5301422/ottocay"}, "edited": false, "score": 0, "creation_date": 1445453817, "post_id": 33267054, "comment_id": 54335405, "body": "Oh I see ... how could I have missed that? Thank you for your speedy help"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 29, "user_id": 5301422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1241f453e5024958c39c1360ef683cb1?s=128&d=identicon&r=PG&f=1", "display_name": "ottocay", "link": "https://stackoverflow.com/users/5301422/ottocay"}, "edited": false, "score": 0, "creation_date": 1445525590, "post_id": 33267054, "comment_id": 54368204, "body": "@ottocay If you have chosen the best answer, accept it. I don&#39;t say this because I&#39;m a rep-who*e but because it marks this question as solved and contributes to keep the state of this site clean."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1445453639, "creation_date": 1445453639, "answer_id": 33267054, "question_id": 33266998, "link": "https://stackoverflow.com/questions/33266998/not-quite-sure-segfault-on-memcpy/33267054#33267054", "title": "Not quite sure, segfault on memcpy?", "body": "<p><code>rec</code> doesn't point to any allocated memory. Dereferencing it yields undefined behavior. Already the line's</p>\n\n<pre><code>char* ptr = rec-&gt;buffer;\n</code></pre>\n\n<p>result is undefined.</p>\n\n<p>Instead of the pointer, just define</p>\n\n<pre><code>record rec;\n</code></pre>\n\n<p>and initialize <code>ptr</code> like</p>\n\n<pre><code>char* ptr = rec.buffer;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5301422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1241f453e5024958c39c1360ef683cb1?s=128&d=identicon&r=PG&f=1", "display_name": "ottocay", "link": "https://stackoverflow.com/users/5301422/ottocay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1445453639, "creation_date": 1445453461, "question_id": 33266998, "link": "https://stackoverflow.com/questions/33266998/not-quite-sure-segfault-on-memcpy", "title": "Not quite sure, segfault on memcpy?", "body": "<p>I'm having some trouble with memcpy throwing a segmentation fault, and I can't seem to locate the source of the error.</p>\n\n<pre><code>typedef struct {\n    int   record_code;                  \n    char* record_name;          \n    char  buffer[6004];     \n} record;\n\nrecord* rec;\nchar* ptr = rec-&gt;buffer;\n\n//--DEBUG\nprintf(\"ADDR OF PTR: %p\\n\", ptr);\nprintf(\"SIZE OF BUFFER: %d\\n\", sizeof(ptr-&gt;buffer)); \n//--End DEBUG\n\ncreate_record(ptr);\n</code></pre>\n\n<p>I want to add an int value into my buffer, but I'm getting a SEGFAULT on this line</p>\n\n<pre><code>memcpy(ptr, &amp;key, sizeof(key));\n</code></pre>\n\n<p>in this function</p>\n\n<pre><code>int counter = 0;\nint create_record(char* ptr) {\n    int key = counter;\n\n    //--DEBUG\n    printf(\"ADDR OF PTR: %p\\n\", ptr);\n    printf(\"SIZE OF KEY: %d\\n\", sizeof(key));\n    //--End DEBUG\n\n    memcpy(ptr, &amp;key, sizeof(key));\n    ptr += sizeof(key); \n\n    int integer = rand_int();\n    memcpy(ptr, &amp;integer, sizeof(integer));\n    ptr += sizeof(integer);\n\n    char* word = rand_string();\n    memcpy(ptr, word, strlen(word));\n    ptr += strlen(word);    \n\n    counter++;\n}\n</code></pre>\n\n<p>The only reasons I could think of memcpy throwing a segfault is if either pointers are garbage or the size of the thing I'm trying to throw into the memory location is greater than the memory I have allocated. But I'm merely trying to put an integer (size = 4 bytes) into a buffer allocated to be 6004 bytes, so it doesn't appear to be a sizing issue... and the address of the pointer I have matches what it had been when initially created (I'm not sure if that actually matters tbh...). </p>\n\n<p>The output I get from the prints are these</p>\n\n<pre><code>ADDR OF PTR: 0x10\nSIZE OF BUFFER: 64004\n\n(now inside create_record)\n\nADDR OF PTR: 0x10\nSIZE OF KEY: 4\n</code></pre>\n\n<p>Can anyone tell me where I'm going wrong?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "variables", "variable-declaration", "letter"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445452760, "post_id": 33266722, "comment_id": 54334761, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.2\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.4.4.2</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445453249, "post_id": 33266722, "comment_id": 54335053, "body": "&quot;<i>The output is the same.</i>&quot; but not the compiler output, which warns that a <code>double</code> is truncated to <code>float</code> (without the <code>f</code>). Stop using <code>float</code> anyway, it&#39;s so 20th century. You wouldn&#39;t use <code>char</code> for numbers."}], "answers": [{"tags": [], "owner": {"reputation": 963, "user_id": 805796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/351bc6b115265f0a9fbcb328c4532ced?s=128&d=identicon&r=PG", "display_name": "MCG", "link": "https://stackoverflow.com/users/805796/mcg"}, "is_accepted": true, "score": 1, "last_activity_date": 1445453571, "last_edit_date": 1495541681, "creation_date": 1445453118, "answer_id": 33266912, "question_id": 33266722, "link": "https://stackoverflow.com/questions/33266722/declaration-of-a-variable/33266912#33266912", "title": "Declaration of a variable", "body": "<p>So that it will be interpret as float not double by the compiler. </p>\n\n<p>See here:\n<a href=\"https://stackoverflow.com/questions/5026570/suffix-of-f-on-float-value\">Suffix of &quot;f&quot; on float value?</a></p>\n"}], "owner": {"reputation": 448, "user_id": 5468199, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff33f8a4d1cbc0da3ec742cb07a5199?s=128&d=identicon&r=PG", "display_name": "Revnic Robert-Nick", "link": "https://stackoverflow.com/users/5468199/revnic-robert-nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1445453250, "accepted_answer_id": 33266912, "answer_count": 1, "score": -3, "last_activity_date": 1445453571, "creation_date": 1445452420, "last_edit_date": 1445452909, "question_id": 33266722, "link": "https://stackoverflow.com/questions/33266722/declaration-of-a-variable", "closed_reason": "Duplicate", "title": "Declaration of a variable", "body": "<p>I am new in C programming language and I have a question related to a variable:</p>\n\n<pre><code>float a=12.34f;\n</code></pre>\n\n<p>What does \"f\" stand for? I tried to see what happens if I remove the letter, but I couldn't find anything. The output is the same.</p>\n"}, {"tags": ["c", "double", "precision"], "comments": [{"owner": {"reputation": 13041, "user_id": 466611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4acb374856006427ab9b84ff57c37371?s=128&d=identicon&r=PG", "display_name": "starrify", "link": "https://stackoverflow.com/users/466611/starrify"}, "edited": false, "score": 1, "creation_date": 1445452659, "post_id": 33266709, "comment_id": 54334699, "body": "Seems you&#39;re casting the numbers in a &quot;truncated&quot; way, not &quot;rounding&quot;. <code>So, I multiplied them all by 100.0, and cast them in an unsigned array.</code> Please show some of your code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1445452686, "post_id": 33266709, "comment_id": 54334720, "body": "<b>Never use floating point for precise calculations like currency!</b> Read the description of the C tag carefully!"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1445452751, "post_id": 33266709, "comment_id": 54334754, "body": "@Olaf: But that&#39;s what the OP wants to do: To convert fractional dollar amounts to pennies to get rid of the problems with floating-point values."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1445452885, "post_id": 33266709, "comment_id": 54334852, "body": "@MOehm: The problem already starts reading the value using floats. Correct way is to read them as two unsigned values (integer.fraction) and combine later. (or just do not use a decimal point in the input format at all as WeatherVane states)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1445452993, "post_id": 33266709, "comment_id": 54334916, "body": "@KorganRivera you forgot to post the code that creates the problem."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445453516, "post_id": 33266709, "comment_id": 54335200, "body": "How do you know that you only need two places of precision?"}, {"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1445453554, "post_id": 33266709, "comment_id": 54335227, "body": "@MOehm That&#39;s actually what I&#39;m about to do.  I was just throwing this question out there in case I had overlooked a simpler solution."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1445453657, "post_id": 33266709, "comment_id": 54335304, "body": "@Olaf: Yeah, yeah. Still there&#39;s no need to chide the OP (in bold face, even) for something he&#39;s aware of and just doesn&#39;t know how to achieve."}, {"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1445454481, "post_id": 33266709, "comment_id": 54335760, "body": "@Olaf The values seem to read well.  The file contains &quot;90.72&quot; and when I read it and printf it, I get &quot;90.7200000&quot;.  So that seems to work.  But after multiplying it, the value changes.  That&#39;s what doesn&#39;t make sense to me."}, {"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445454618, "post_id": 33266709, "comment_id": 54335824, "body": "@WeatherVane Fixed.  Thanks."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1445454640, "post_id": 33266709, "comment_id": 54335833, "body": "@KorganRivera, no they aren&#39;t right. The imprecision when printing things out need much more digits to be visible."}, {"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1445455575, "post_id": 33266709, "comment_id": 54336348, "body": "@JensGustedt Ah, ok.  That&#39;s frustrating."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1445464360, "post_id": 33266709, "comment_id": 54340961, "body": "@MOehm: If he were aware, he would not have that problem, Make it simple - ok - but not too simple"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445825956, "post_id": 33266709, "comment_id": 54471620, "body": "@Olaf Disagree with &quot;Never use floating point for precise calculations like currency!&quot;.  1) Directing what not to do is not so nearly useful as suggesting what to do.  2) Using FP with currency, like many programming problems, has its pitfalls, like rounding errors - especially for learners.   A knowledgeable programmer can code successfully using <code>double</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13041, "user_id": 466611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4acb374856006427ab9b84ff57c37371?s=128&d=identicon&r=PG", "display_name": "starrify", "link": "https://stackoverflow.com/users/466611/starrify"}, "edited": false, "score": 1, "creation_date": 1445453435, "post_id": 33266836, "comment_id": 54335155, "body": "Oh that&#39;s correct. I thought it was <code>float</code>. (It was not me who gave the downvote.)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1445453599, "post_id": 33266836, "comment_id": 54335265, "body": "Multiplying <code>90.719999999999998863131622783839702606201171875</code> by <code>100</code> actually produces a double with value exactly <code>9072</code>. There must have been some additional source of error somewhere."}, {"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "edited": false, "score": 0, "creation_date": 1445453647, "post_id": 33266836, "comment_id": 54335298, "body": "@mch That&#39;s what confused me.  If the real value is 90.7199..., then why would it tell me the value is &quot;90.72000000000&quot; ?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1445453663, "post_id": 33266836, "comment_id": 54335308, "body": "I suspect <code>9071.99</code> would suffice for purposes of example? Considering a <code>long long unsigned</code> will have a maximum of <code>1.8447e+19</code>, all digits beyond that are suspect."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "edited": false, "score": 1, "creation_date": 1445453838, "post_id": 33266836, "comment_id": 54335419, "body": "@KorganRivera because <code>90.719999999999998863131622783839702606201171875</code> rounded to 11 decimal digits is <code>90.72000000000</code>. You can print it with <code>printf(&quot;%.80f\\n&quot;, number);</code> like I did in the example."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1445453924, "post_id": 33266836, "comment_id": 54335470, "body": "@user2357112 please take a look at the example, if you save <code>90.72</code> to a double variable, multiply this variable with <code>100</code> and cast to <code>unsigned</code>, the result would be <code>9071</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1445454194, "post_id": 33266836, "comment_id": 54335618, "body": "@mch: I think we&#39;re seeing the effects of 80-bit extended precision. <a href=\"http://ideone.com/hLW4Wo\" rel=\"nofollow noreferrer\">My own test results</a> show that the result is exactly <code>9072</code>, but if the compiled code converts an extended-precision intermediate value directly to an integer, that would produce 9071."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1445454990, "post_id": 33266836, "comment_id": 54336021, "body": "@user2357112 I learned that every exact <code>double</code> number is also exact as an <code>long double</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1445456270, "post_id": 33266836, "comment_id": 54336725, "body": "@mch: But not vice versa. The mathematically exact value of <code>90.719999999999998863131622783839702606201171875*100</code> may be representable in extended precision, but converting it to an IEEE754 double produces exactly <code>9072</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445825326, "post_id": 33266836, "comment_id": 54471488, "body": "Corner case failure with &quot;add 0.5 (or any other small number &lt; 1) to the result of the multiplication before you cast it to an integer.&quot; fails for the the FP number just before 0.5.  <code>volatile double x = nextafter(0.5, 0.0);   volatile double y = x + 0.5;   printf(&quot;%.17e %d\\n&quot;, x, (int) y);</code> typically produces <code>1</code> rather than the desired <code>0</code>"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445851992, "post_id": 33266836, "comment_id": 54480476, "body": "@chux you forgot to multiply by <code>100</code> before adding the <code>0.5</code>. It is a solution to this specific problem. A double number with 2 significant decimal digits will never end up with <code>.5</code> after multipying with <code>100</code>, but with <code>.9999999</code> or <code>.00000001</code> or similar."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445871905, "post_id": 33266836, "comment_id": 54493328, "body": "Agreed - with currency values near a multiple of 0.01."}], "tags": [], "owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "is_accepted": true, "score": 2, "last_activity_date": 1445453232, "last_edit_date": 1445453232, "creation_date": 1445452833, "answer_id": 33266836, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency/33266836#33266836", "title": "How do I convert double to unsigned for currency?", "body": "<p>The real value is <code>90.719999999999998863131622783839702606201171875</code>. If you multiply by <code>100</code> the result is <code>9071.9999999999998863131622783839702606201171875</code> and casted to an integer  leads to <code>9071</code>.</p>\n\n<p>Example: <a href=\"http://ideone.com/QQ7Ddm\" rel=\"nofollow\">http://ideone.com/QQ7Ddm</a></p>\n\n<p>You can add <code>0.5</code> (or any other small number &lt; 1) to the result of the multiplication before you cast it to an integer.</p>\n\n<p>Another option would be the use of the <code>round</code> function.</p>\n"}, {"comments": [{"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "edited": false, "score": 0, "creation_date": 1445455909, "post_id": 33266941, "comment_id": 54336524, "body": "Yeah I thought of that.  I was just hoping it wasn&#39;t necessary, and that instead I&#39;d overlooked something basic.  Thanks!"}, {"owner": {"reputation": 6280, "user_id": 1895611, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0680f63c9adbb7840df6e6a38a61e3b6?s=128&d=identicon&r=PG", "display_name": "AwokeKnowing", "link": "https://stackoverflow.com/users/1895611/awokeknowing"}, "reply_to_user": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "edited": false, "score": 0, "creation_date": 1445459783, "post_id": 33266941, "comment_id": 54338573, "body": "@if you&#39;re working with stock price data, they you&#39;ll actually find that they are regularly quoted in 4 decimal places.  So you may want to keep that in mind and do &quot;cents of cents&quot;, in that case."}], "tags": [], "owner": {"reputation": 6280, "user_id": 1895611, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0680f63c9adbb7840df6e6a38a61e3b6?s=128&d=identicon&r=PG", "display_name": "AwokeKnowing", "link": "https://stackoverflow.com/users/1895611/awokeknowing"}, "is_accepted": false, "score": 1, "last_activity_date": 1445453228, "creation_date": 1445453228, "answer_id": 33266941, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency/33266941#33266941", "title": "How do I convert double to unsigned for currency?", "body": "<p>if those doubles you're reading from the file are in text format (you didn't specify) then rather than read them into doubles then cast, you can read it as text and parse the text manually. (eg remove the period and skip the zeros and then convert to uint</p>\n"}, {"comments": [{"owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "edited": false, "score": 0, "creation_date": 1445454741, "post_id": 33267301, "comment_id": 54335898, "body": "This works.  All my numbers are coming out correctly now after the conversion.  It&#39;s frustrating that this is even an issue in C."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445456778, "post_id": 33267301, "comment_id": 54336985, "body": "@Jason please give an example where it fails. <code>double</code> has greater significance than 32-bit <code>int</code>."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445457157, "post_id": 33267301, "comment_id": 54337189, "body": "Any value that converts from decimal to binary floating point with a thousandths decimal smaller than 9 (after multiplying by 100 in binary floating point).  Even adding 0.5 won&#39;t necessarily give a correct result."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445457832, "post_id": 33267301, "comment_id": 54337508, "body": "@Jason <i>any value</i>? These don&#39;t. I asked for an example please."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445459395, "post_id": 33267301, "comment_id": 54338359, "body": "It would take a while to construct the actual counter example.  I admit, with fewer bits in the fixed point than the floating point mantissa, there may not be a counter example.  Without a formal proof, I&#39;m still be hesitant to use this code over parsing the digits manually."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445460134, "post_id": 33267301, "comment_id": 54338769, "body": "@Jason the proof is simple. I ran a loop testing every 32-bit <code>unsigned int</code> apart from <code>UINT_MAX</code> in my above snippet, without a fault."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445461481, "post_id": 33267301, "comment_id": 54339495, "body": "It is probably correct, but it potentially munges the double value in the conversion.  It&#39;s still vastly simpler and safer to just parse the decimal value."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445462427, "post_id": 33267301, "comment_id": 54339986, "body": "@Jason the same also works with div 10000, the &quot;cents of cents&quot; mentioned in another answer. But the question was about values that are <i>already</i> in decimal point format (to 1 cent significance), something I would never advocate."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445463003, "post_id": 33267301, "comment_id": 54340306, "body": "I included code to parse without using floating point in my answer as well (in case there&#39;s a need for 64 bits)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445463048, "post_id": 33267301, "comment_id": 54340334, "body": "@Jason agreed - 64 bits is where it falls down."}, {"owner": {"reputation": 6280, "user_id": 1895611, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0680f63c9adbb7840df6e6a38a61e3b6?s=128&d=identicon&r=PG", "display_name": "AwokeKnowing", "link": "https://stackoverflow.com/users/1895611/awokeknowing"}, "edited": false, "score": 0, "creation_date": 1445488345, "post_id": 33267301, "comment_id": 54347627, "body": "@WeatherVane I just got a moderator message about my &quot;edit&quot;.  I had my phone in my pocket with the SO app on it, and it managed to press edit and paste random stuff in your answer!  I apologize profusely.  I had no idea what you were even talking about since it was fixed by the time I pulled my phone out again."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1445458829, "last_edit_date": 1445458829, "creation_date": 1445454435, "answer_id": 33267301, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency/33267301#33267301", "title": "How do I convert double to unsigned for currency?", "body": "<p>Given a file with the values you quote, this prints them in cents with the same 2 decimal digits in cents.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    FILE *inf;\n    unsigned cents;\n    double money;\n    if((inf = fopen(\"test.txt\", \"r\")) == NULL)\n        return 1;\n    while (fscanf(inf, \"%lf\", &amp;money) == 1) {\n        cents = (unsigned)(money * 100.0 + 0.1);\n        printf(\"File %f, cents %u\\n\", money, cents);\n    }\n    fclose(inf);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>File 90.720000, cents 9072\nFile 33.800000, cents 3380\nFile 43.150000, cents 4315\nFile 37.970000, cents 3797\nFile 46.810000, cents 4681\nFile 48.770000, cents 4877\nFile 81.800000, cents 8180\nFile 19.360000, cents 1936\nFile 6.760000, cents 676\n</code></pre>\n\n<p><strong>Edit</strong> for unbelievers who commented. This takes the maximum 32 bit <code>unsigned</code> cents, converts to <code>double</code> dollars, and back to cents without loss. The <code>double</code> mantissa has 53 bits, 21 bits more than <code>int</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint main()\n{\n    double money;\n    unsigned cents = UINT_MAX;\n    printf(\"cents = %u\\n\", cents);\n    money = ((double)cents) / 100;\n    printf(\"money = %.2f\\n\", money);\n    cents = (unsigned)(money * 100.0 + 0.1);\n    printf(\"cents = %u\\n\", cents);\n    return 0;\n}\n</code></pre>\n\n<p>Progam output:</p>\n\n<pre><code>cents = 4294967295\nmoney = 42949672.95\ncents = 4294967295\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1445509394, "post_id": 33267802, "comment_id": 54357862, "body": "You make valid points about floating-point precision and that using fixed-point notation won&#39;t automatically solve all your problems. Unfortunately, the code you posted &quot;for posterity&quot; scans the given input (with sub-penny precision), but little else. It also misprints values like &quot;1.02&quot; as &quot;1.2&quot;."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1445518352, "post_id": 33267802, "comment_id": 54363293, "body": "@MOehm You&#39;re absolutely right, the printing was done incorrectly (updated).  I explicitly didn&#39;t include a generalized version since two places of precision were what the OP stated they were working with."}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 2, "last_activity_date": 1445517463, "last_edit_date": 1445517463, "creation_date": 1445456324, "answer_id": 33267802, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency/33267802#33267802", "title": "How do I convert double to unsigned for currency?", "body": "<p>I'm honestly a little disappointed to see people encouraging parsing the values to floating point and doing <em>any</em> math on those values.</p>\n\n<p>There are two issues.  The first is that decimal values aren't representable in fixed precision floating point.  For example, 0.01 is not representable in floating point.</p>\n\n<p>The next issue is fundamental to multiplication and division.  Both change the number of digits after the decimal.  Fundamentally you can not have infinite accuracy with any finite precision data type like <code>double</code> or <code>uint32_t</code>.</p>\n\n<p>Decimal values (like currency) can be handled using fixed point arithmetic, but accuracy will still be lost in calculations.</p>\n\n<p>For example, 1% of $0.50 would be $0.005 and rounded up to $0.01.  However, with fixed point arithmetic using two places of precision...</p>\n\n<pre><code> 0.50\nx0.01\n----- \n=0.00\n</code></pre>\n\n<p>Here, the result is $0, but the actual value should be $0.01.  And, if this is multiplied by 25 (e.g. compound interest), the result is now off by 2500%.</p>\n\n<p>For posterity, here's the code to read values without using floating point.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char* argv[argc]) {\n\n  unsigned dollars = 0;\n  char dimes = 0;\n  char pennies = 0;\n\n  unsigned fixed = 0;\n\n  FILE* values;\n\n  values = fopen(\"values\", \"r\");\n\n  while (fscanf(values, \"%u.%c%c%*i\\n\", &amp;dollars, &amp;dimes, &amp;pennies) != EOF) {\n\n    dimes -= '0';\n    pennies -= '0';\n\n    fixed = (dollars * 100) + (dimes * 10) + pennies;\n    printf(\"$%u.%u%u -&gt; %u (cents)\\n\", dollars, dimes, pennies, fixed);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>outputs...</p>\n\n<pre><code>$90.72 -&gt; 9072 (cents)\n$33.80 -&gt; 3380 (cents)\n$43.15 -&gt; 4315 (cents)\n$37.97 -&gt; 3797 (cents)\n$46.81 -&gt; 4681 (cents)\n$48.77 -&gt; 4877 (cents)\n$81.80 -&gt; 8180 (cents)\n$19.36 -&gt; 1936 (cents)\n$6.76 -&gt; 676 (cents)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1445492032, "creation_date": 1445492032, "answer_id": 33273998, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency/33273998#33273998", "title": "How do I convert double to unsigned for currency?", "body": "<blockquote>\n  <p>Why do some of these numbers have errors and some don't? Is there\n  another way around this? Why would the code tell me it has the value\n  90.72, if it really has 90.71?</p>\n</blockquote>\n\n<p>The answer to your question has to do with how floating point numbers are stored in memory. Floating-point values are stored in memory in <em>IEEE-754 single-precision</em> (<code>32-bit float</code>) or <em>IEEE-754 double-precision</em> (<code>64-bit double</code>) floating-point format. The format (in binary) is comprised from a 3-part encoded number where the most significant bit (31 or 63) is the <code>sign bit</code>, the next 8 or 11 bits (float/double) are an exponent in excess format, and finally the next 23 or 52 bits (float/double) are the normalized mantissa/significand. </p>\n\n<p>For example your <em>double</em> value of <code>90.72</code> is stored in memory as:</p>\n\n<pre><code> IEEE-754 dbl  : 0100000001010110101011100001010001111010111000010100011110101110\n                |- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - |\n                |s|   exp    |                     mantissa                      |\n</code></pre>\n\n<p>The format allows the storage of all floats or doubles within their respective ranges in 32 or 64 bits in memory, respectively. However, the formats suffer from a limitation on accuracy imposed by the limited number of bits available.</p>\n\n<p>You can best understand this limitation by considering the binary number that represents each floating point value. In memory, it is nothing more than a <code>32-bit</code> or <code>64-bit</code> sequence of <code>'0's</code> of <code>'1's</code>. Since the number of bits taken by each format (single/double precision) is the same as the number of bits used by an <code>unsigned int</code> or <code>unsigned long</code> (or <code>unsigned long long</code> on some hardware), for every floating-point value, there is an unsigned int or unsigned long with the <em>exact-same</em> binary representation in memory.</p>\n\n<p>This will help expose why some of your numbers have errors and some don't. If you consider the equivalent unsigned integer for your double value of <code>90.72</code>, you will see that there is a limitation on how <code>90.72</code> can be represented in IEEE-754 double-precision format in memory. Specifically:</p>\n\n<pre><code>Actual Value as double, and unsigned long equivalent:\n\n double        : 90.7199999999999989\n long unsigned : 4636084269408667566\n binary        : 01000000-01010110-10101110-00010100-01111010-11100001-01000111-10101110\n</code></pre>\n\n<p>Here is where considering the <em>unsigned long</em> equivalent helps. What is the next possible larger number that can be represented in memory? (<em>Answer:</em> <code>1</code> more than the current value of the <em>unsigned long</em> equivalent)</p>\n\n<pre><code>Closest next larger value:\n\n double        : 90.7200000000000131\n long unsigned : 4636084269408667567\n binary        : 01000000-01010110-10101110-00010100-01111010-11100001-01000111-10101111\n</code></pre>\n\n<p>(<strong>note:</strong> this change of <code>1</code> in the <em>unsigned long</em> equivalent (or change in <em>one-bit</em> in memory) only effects the value out near the 13th decimal place, but can have huge consequences if you attempt to multiply by <code>100.0</code> and cast as you have found)</p>\n\n<p>Looking at how your current double of <code>90.72</code> is stored in memory, and the next possibe larger value that can be stored, should show you clearly why <em>some of your values have errors and some don't.</em></p>\n\n<p>If any given double value is one represented in memory by a value slightly less than the currency value (e.g. <code>90.719...</code> instead of <code>90.720...</code>), you will <em>create rounding error</em> by using your <em>multiply by 100.0 and cast</em> approach. That's why you are better served using on of the schemes provided in the other answers that is not subject to this type of error and also why you want to avoid (or properly manage) floating-point inaccuracies when dealing with money.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1445827204, "last_edit_date": 1445827204, "creation_date": 1445824726, "answer_id": 33337365, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency/33337365#33337365", "title": "How do I convert double to unsigned for currency?", "body": "<p>Concert from currency to integers carefully.</p>\n\n<p>1) Scale.<br>\n2) Round via <code>round()</code>.  Do <em>not</em> use +0.5 trick - too many problems.<br>\n3) Insure in range.<br>\n4) Cast</p>\n\n<pre><code>unsigned convert_double_to_unsigned_scaled_rounded(double x, double scale) {\n  double x_scaled = x*scale;\n  double x_rounded = round(x_scaled);\n  assert(x_rounded &gt;= 0 &amp;&amp; x_rounded &lt;= UINT_MAX);\n  return (unsigned) x_rounded;\n}\n\n// u_itemweights[i] = itemweights[i] * 100.0;\nu_itemweights[i] = convert_double_to_unsigned_scaled_rounded(itemweights[i], 100.0);\n</code></pre>\n\n<p>A key problem with currency coding is the need for exactness - and this involves rounding to rectify.  A simple <code>(unsigned) x</code> will too often have issues - as you have seen - as it truncates the fraction.  Another example: calculating 7.3% on a loan is an issue should code use <code>double</code> or integers.</p>\n"}], "owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 33266836, "answer_count": 6, "score": 1, "last_activity_date": 1445827204, "creation_date": 1445452372, "last_edit_date": 1445685654, "question_id": 33266709, "link": "https://stackoverflow.com/questions/33266709/how-do-i-convert-double-to-unsigned-for-currency", "title": "How do I convert double to unsigned for currency?", "body": "<p>I know there are issues with accuracy with doubles, but this situation surprised me.</p>\n\n<p>I read some doubles from a file.  These are the values:</p>\n\n<pre><code>90.720000 33.800000 43.150000 37.970000 46.810000 48.770000 81.800000 19.360000 6.760000\n</code></pre>\n\n<p>Since they represent currency, they always have up to 2 decimals of precision.  I want these values to be stored as unsigned values.  So, I multiplied them all by 100.0, and cast them in an unsigned array.</p>\n\n<p>When I print the unsigned values, I got this:</p>\n\n<pre><code>9071 3379 4314 3796 4681 4877 8179 1935 675\n</code></pre>\n\n<p>Why do some of these numbers have errors and some don't?  Is there another way around this? Why would the code tell me it has the value 90.72, if it really has 90.71?  </p>\n\n<p>As requested, here's the relevant code:</p>\n\n<pre><code>unsigned itemprices[MAXITEMS];\nunsigned u_itemweights[MAXITEMS];\ndouble itemweights[MAXITEMS];\n\nnumberofobjects=0;\ndo{\n    fscanf(fp, \" (%*u,%lf,$%u)\", &amp;itemweights[numberofobjects], &amp;itemprices[numberofobjects]);\n    numberofobjects++;\n    if(fgetc(fp)==' ') continue;\n    else break;\n}while(1);\n\nputs(\"\\nitemweights before convert:\");\nfor(i=0; i&lt;numberofobjects; i++) printf(\"%f \", itemweights[i]);\n\n//  convert itemweights to unsigned.\nfor(i=0; i&lt;numberofobjects; i++) u_itemweights[i] = itemweights[i] * 100.0;\n\nputs(\"\\nitemweights after convert:\");\nfor(i=0; i&lt;numberofobjects; i++) printf(\"%u \", u_itemweights[i]);\n</code></pre>\n\n<p>Here's an output sample:</p>\n\n<pre><code>itemweights before convert:\n90.720000 33.800000 43.150000 37.970000 46.810000 48.770000 81.800000 19.360000 6.760000\nitemweights after convert:\n9071 3379 4314 3796 4681 4877 8179 1935 675\n</code></pre>\n"}, {"tags": ["c", "linux", "fedora"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1445452358, "post_id": 33266678, "comment_id": 54334524, "body": "<b>match the example bellow</b>  which one ?"}, {"owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1445454079, "post_id": 33266678, "comment_id": 54335560, "body": "@PedroLobito the editor put everything in  one line  the out put should be  the compete command line for the process state of the process ,  pid of the parent  priority , and so on , there is few more if you looked up,  thanks for any help."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "edited": false, "score": 0, "creation_date": 1445455104, "post_id": 33267169, "comment_id": 54336091, "body": "yes, I am a having a hard time to start , and been trying to find the starting point for a long time , thanks for the info , I will try it out  , and try to complete the task hopefully will be able to do it right , Thanks for  the help :D"}, {"owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "edited": false, "score": 0, "creation_date": 1445455478, "post_id": 33267169, "comment_id": 54336284, "body": "I am sorry to bother you again, I am trying to compile the file, and it always give me one line which is the PID, then give me an error (segmentation fault (core dumped) )"}, {"owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "reply_to_user": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "edited": false, "score": 0, "creation_date": 1445459540, "post_id": 33267169, "comment_id": 54338443, "body": "Yes, when you run <code>.&#47;a.out &lt;pid&gt;</code>, the <code>pid</code> has to be the pid of a running program. <code>29519</code> is a valid pid on my computer, but probably not yours. To see some valid pids, try running <code>ps a</code>. All of the numbers on the left are pids."}, {"owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "edited": false, "score": 0, "creation_date": 1445460082, "post_id": 33267169, "comment_id": 54338741, "body": "yea , was willing to get back to you about that, I figured out later what was the issue, but really thank you so much for the help, If I may ask one more thing , as for the fscanf ,.. If I want to ship some values, I tried so , the values were all missed up.. how can I skip something I dont want to scan and then scan the rest.  Thanks ."}, {"owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "reply_to_user": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "edited": false, "score": 0, "creation_date": 1445462529, "post_id": 33267169, "comment_id": 54340031, "body": "Use <code>%*d</code> (or <code>%*s</code>, <code>%*c</code>, etc.). For example, instead of writing <code>fscanf(f, &quot;%d %s %c %d&quot;, &amp;unused, comm, &amp;state, &amp;ppid);</code>, I could have written <code>fscanf(f, &quot;%*d %s %c %d&quot;, comm, &amp;state, &amp;ppid);</code>."}], "tags": [], "owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "is_accepted": true, "score": 5, "last_activity_date": 1445453997, "creation_date": 1445453997, "answer_id": 33267169, "question_id": 33266678, "link": "https://stackoverflow.com/questions/33266678/how-to-extract-information-from-the-content-of-proc-files-on-linux-using-c/33267169#33267169", "title": "How to extract information from the content of /proc files on Linux using C?", "body": "<p>It sounds like you don't know where to start. Let me try to explain the information in <code>/proc</code>:</p>\n\n<p>If we <code>cat /proc/29519/stat</code>, we get this info:</p>\n\n<p><code>29519 (vim) S 5997 29519 5997 34835 29519 24576 1275 0 47 0 5 0 0 0 20 0 2 0 49083340 188043264 3718 18446744073709551615 4194304 6665820 140737488349264 140737488347024 140737280970147 0 0 12288 1837256447 18446744073709551615 0 0 17 3 0 0 21 0 0 8764120 8861948 8925184 140737488349925 140737488349929 140737488349929 140737488351211 0</code></p>\n\n<p>What do all those numbers represent? The answer is in <a href=\"http://linux.die.net/man/5/proc\" rel=\"noreferrer\">man proc</a>, in the section called <code>/proc/[pid]/stat</code>. From this we see the first four things are:</p>\n\n<blockquote>\n  <p>pid %d</p>\n  \n  <p>(1) The process ID.</p>\n  \n  <p>comm %s</p>\n  \n  <p>(2) The filename of the executable, in parentheses. This is visible\n  whether or not the executable is swapped out.</p>\n  \n  <p>state %c</p>\n  \n  <p>(3) One character from the string \"RSDZTW\" where R is running, S is\n  sleeping in an interruptible wait, D is waiting in uninterruptible\n  disk sleep, Z is zombie, T is traced or stopped (on a signal), and W\n  is paging.</p>\n  \n  <p>ppid %d</p>\n  \n  <p>(4) The PID of the parent.</p>\n</blockquote>\n\n<p>With this knowledge we can parse it out with <code>fscanf(f, \"%d %s %c %d\", ...)</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\nvoid main(int argc, char **argv) {\n    int pid;\n    sscanf(argv[1], \"%d\", &amp;pid);\n    printf(\"pid = %d\\n\", pid);\n\n    char filename[1000];\n    sprintf(filename, \"/proc/%d/stat\", pid);\n    FILE *f = fopen(filename, \"r\");\n\n    int unused;\n    char comm[1000];\n    char state;\n    int ppid;\n    fscanf(f, \"%d %s %c %d\", &amp;unused, comm, &amp;state, &amp;ppid);\n    printf(\"comm = %s\\n\", comm);\n    printf(\"state = %c\\n\", state);\n    printf(\"parent pid = %d\\n\", ppid);\n    fclose(f);\n}\n</code></pre>\n\n<p>Now if I compile that file and run <code>./a.out 29519</code>, I get</p>\n\n<pre><code>pid = 29519\ncomm = (vim)\nstate = S\nparent pid = 5997\n</code></pre>\n\n<p>Does that give you enough information to get started?</p>\n"}], "owner": {"reputation": 13, "user_id": 5472868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156172964025228/picture?type=large", "display_name": "Khaled Abdo", "link": "https://stackoverflow.com/users/5472868/khaled-abdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7826, "favorite_count": 1, "accepted_answer_id": 33267169, "answer_count": 1, "score": 0, "last_activity_date": 1596324419, "creation_date": 1445452270, "last_edit_date": 1596324419, "question_id": 33266678, "link": "https://stackoverflow.com/questions/33266678/how-to-extract-information-from-the-content-of-proc-files-on-linux-using-c", "title": "How to extract information from the content of /proc files on Linux using C?", "body": "<p>I have been working on this for over 7 hours a day for 5 days. I am not exactly the best coder, so I need some help. I need to know how should I get the info from /proc using a C program on Linux.\nThe info has to be printed out and include the following:</p>\n<ul>\n<li>The\u00a0complete\u00a0command\u00a0line\u00a0for\u00a0the\u00a0process.</li>\n<li>State\u00a0of\u00a0the\u00a0process.</li>\n<li>The\u00a0PID\u00a0of\u00a0the\u00a0parent.</li>\n<li>Priority.</li>\n<li>The\u00a0nice\u00a0value.</li>\n<li>Real\u00adtime\u00a0\u00a0scheduling\u00a0priority.</li>\n<li>CPU\u00a0number\u00a0last\u00a0executed\u00a0on.</li>\n<li>Amount\u00a0of\u00a0time\u00a0that\u00a0this\u00a0process\u00a0has\u00a0been\u00a0scheduled\u00a0\u00a0in\u00a0\u00a0user\u00a0\u00a0mode.</li>\n<li>Amount\u00a0of\u00a0time\u00a0that\u00a0this\u00a0process\u00a0has\u00a0been\u00a0scheduled\u00a0in\u00a0kernel\u00a0\u00a0mode.</li>\n<li>Virtual\u00a0memory\u00a0size\u00a0in\u00a0bytes.</li>\n<li>Total\u00a0program\u00a0size\u00a0in\u00a0pages.</li>\n<li>Resident\u00a0Set\u00a0Size\u00a0(RSS)\u00a0in\u00a0bytes.</li>\n<li>Resident\u00a0Set\u00a0Size\u00a0(RSS):\u00a0number\u00a0of\u00a0pages\u00a0the\u00a0process\u00a0has\u00a0in\u00a0real\u00a0memory\u00a0in\u00a0\npages.</li>\n<li>Text\u00a0(code)\u00a0size\u00a0in\u00a0pages.</li>\n<li>Data\u00a0+\u00a0stack\u00a0size\u00a0in\u00a0pages.</li>\n<li>Page\u00a0table\u00a0entries\u00a0size\u00a0in\u00a0KB.</li>\n<li>Size\u00a0of\u00a0data\u00a0in\u00a0KB.</li>\n<li>Size\u00a0of\u00a0stack\u00a0in\u00a0KB.</li>\n<li>Size\u00a0of\u00a0text\u00a0segment\u00a0KB.</li>\n</ul>\n"}, {"tags": ["c", "validation", "token", "tokenize", "delimiter"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1445452555, "post_id": 33266656, "comment_id": 54334650, "body": "<code>char * input[]</code> is the declaration for an array of pointers (if you add a semicolon ,that is) , which is probably not what you want. Please post real code."}], "answers": [{"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 0, "last_activity_date": 1445453203, "creation_date": 1445453203, "answer_id": 33266934, "question_id": 33266656, "link": "https://stackoverflow.com/questions/33266656/issue-using-strtok-to-validate-a-user-entered-date-in-c/33266934#33266934", "title": "Issue using strtok to validate a user-entered date in C", "body": "<p>You might consider using </p>\n\n<pre><code>if ( sscanf ( input, \"%d/%d/%d-%d:%d\", &amp;mm, &amp;dd, &amp;yyyy, &amp;hr, &amp;m) == 5)\n</code></pre>\n\n<p>The format string scans an int, a <code>'/'</code>, an int, a <code>'/'</code>, an int, a <code>'-'</code>, an int, a <code>':'</code>, and an int. If successful scan of all items, the return is 5.</p>\n"}], "owner": {"reputation": 139, "user_id": 4472674, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100000182004403/picture?type=large", "display_name": "Hani Al-shafei", "link": "https://stackoverflow.com/users/4472674/hani-al-shafei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 33266934, "answer_count": 1, "score": -1, "last_activity_date": 1445453203, "creation_date": 1445452206, "question_id": 33266656, "link": "https://stackoverflow.com/questions/33266656/issue-using-strtok-to-validate-a-user-entered-date-in-c", "title": "Issue using strtok to validate a user-entered date in C", "body": "<p>I am trying to validate a user-entered date in C. However, I can't seem to get strtok to separate by the \"-\" delimiter. For example, I want to verify that a user has entered a date correctly in the format mm/dd/yyyy-hh:mm where hh is the 2 digit representation of the hour and mm is minutes past the hour in 2 digits also.</p>\n\n<p>This is what I have been doing. </p>\n\n<pre><code> char* input[] //--user input\n\n char* token[];//-- used to seperate each portion and verify them individually.\n\n token = strtok(input, \" /-:\"); //-- token is now the mm.\n ...todo\n\ntoken = strtok(NULL, \"/\"); //---token is now the dd.\n...todo\n\ntoken = strtok(NULL, \"/\"); //---token is now the yyyy.\n...todo\n</code></pre>\n\n<p>I've been using prinf token every step to verify and everything runs smoothly until I try to get to the hh.</p>\n\n<p>HERE'S THE ISSUE: When I try to call</p>\n\n<pre><code>token = strtok(NULL, \"-\") //for the hours in a valid input\n</code></pre>\n\n<p>the token is NULL. within todo I verify that token is not null but in this case it always is even when I enter a valid date.</p>\n"}, {"tags": ["c", "escaping", "ascii"], "comments": [{"owner": {"reputation": 4192, "user_id": 2446071, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3f590d99e58f1370b9846fcd29e0d43f?s=128&d=identicon&r=PG", "display_name": "sherrellbc", "link": "https://stackoverflow.com/users/2446071/sherrellbc"}, "edited": false, "score": 0, "creation_date": 1445452784, "post_id": 33266655, "comment_id": 54334781, "body": "After a little more testing I noticed there was not a &quot;less 2&quot; relationship between the two as mentioned above. The answers below explain this directly."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 1, "last_activity_date": 1445452460, "creation_date": 1445452460, "answer_id": 33266734, "question_id": 33266655, "link": "https://stackoverflow.com/questions/33266655/printing-escaped-characters-directly-and-their-relationship-with-the-ascii-table/33266734#33266734", "title": "Printing escaped characters directly and their relationship with the ASCII table", "body": "<p><code>strace</code> is using standard C string notation, in which a backslash followed by digits is an <em>octal</em> character code.</p>\n\n<p>10 octal = 8 decimal<br>\n12 octal = 10 decimal</p>\n"}, {"tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1445452983, "last_edit_date": 1445452983, "creation_date": 1445452468, "answer_id": 33266737, "question_id": 33266655, "link": "https://stackoverflow.com/questions/33266655/printing-escaped-characters-directly-and-their-relationship-with-the-ascii-table/33266737#33266737", "title": "Printing escaped characters directly and their relationship with the ASCII table", "body": "<p>The escaped character is not encoded in decimal. It is a one to three digit <strong>octal</strong> number.</p>\n\n<p>C has several forms of character escapes:</p>\n\n<ol>\n<li>Backslash and character specifier (i.e. <code>'\\n'</code>, '<code>\\r'</code>, etc.)</li>\n<li>Backslash and 1 to 3 digits (octal specifier, digits must not be 8 or 9. i.e. <code>'\\377'</code>)</li>\n<li>Backslash and <code>x</code>, then hexadecimal number (i.e. <code>'\\x40'</code>)</li>\n<li>Backslash and <code>u</code>, then hexadecimal number (Unicode constant)</li>\n</ol>\n\n<p><code>10</code> in octal is <code>8</code> in decimal, hence your result. There is not a \"less two\" relationship, though, because <code>20</code> octal is <code>16</code> decimal, <code>30</code> octal is <code>24</code> decimal, etc.</p>\n"}], "owner": {"reputation": 4192, "user_id": 2446071, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3f590d99e58f1370b9846fcd29e0d43f?s=128&d=identicon&r=PG", "display_name": "sherrellbc", "link": "https://stackoverflow.com/users/2446071/sherrellbc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445452983, "creation_date": 1445452206, "question_id": 33266655, "link": "https://stackoverflow.com/questions/33266655/printing-escaped-characters-directly-and-their-relationship-with-the-ascii-table", "title": "Printing escaped characters directly and their relationship with the ASCII table", "body": "<p>I was looking at the output of an <code>strace</code> call when I came across something I had not seen before. The example output was the following (from a call to <code>recv</code>, to elaborate): </p>\n\n<pre><code>recv(13, \"%\\0\\0\\0\\23\\0\\1\\0\\5\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\26\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\5\\0\\20\\0\\5\", 37, 0)\n</code></pre>\n\n<p>While other results look like:</p>\n\n<pre><code>recv(10, \"OK\\n\", 3, 0)\n</code></pre>\n\n<p>Regardless of what the actual recv intended to convey, I noticed that each of the characters being sent were escaped. I thought that perhaps these escaped characters were related to the <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">ASCII Table</a> in a one-to-one fashion (i.e. <code>\\10</code> being equivalent to <code>\\n</code>). </p>\n\n<p>So, a quick test like:</p>\n\n<pre><code>printf(\"Before newline \\10  After newline);\n</code></pre>\n\n<p>Gives the following result: </p>\n\n<pre><code>Before newline   After newline\n</code></pre>\n\n<p>I then tried to just print the value of the character itself in decimal form:</p>\n\n<pre><code>printf(\"Value: %d\", '\\10');\n</code></pre>\n\n<p>Gives the result:</p>\n\n<pre><code>Value: 8 \n</code></pre>\n\n<p>So, naturally, since the difference was two I tried: </p>\n\n<pre><code>printf(\"Before newline \\12  After newline);\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>Before newline\nAfter newline\n</code></pre>\n\n<hr>\n\n<p>So, it appears that escaped characters of this format <em>do</em> relate to the ascii table with a \"less 2\" relationship. </p>\n\n<ul>\n<li><p>Why is there a difference of two between the ascii table and the escaped character?</p></li>\n<li><p>What is the point of this and why does it work in this way?</p></li>\n<li><p>Is this just a nuance of <code>strace</code>? </p></li>\n</ul>\n"}, {"tags": ["c", "multithreading", "igraph"], "answers": [{"tags": [], "owner": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "is_accepted": true, "score": 0, "last_activity_date": 1445802271, "creation_date": 1445802271, "answer_id": 33334263, "question_id": 33266530, "link": "https://stackoverflow.com/questions/33266530/how-can-i-use-non-deterministic-igraph-functions-in-a-multithreaded-program/33334263#33334263", "title": "How can I use non-deterministic igraph functions in a multithreaded program?", "body": "<p><em>This is not really an answer yet but it's too long for a comment so I'm posting it as an answer</em>.</p>\n\n<p>Thread-safety is still not guaranteed by igraph, although there were efforts that tried to replace global variables with thread-local ones. (That's what the <code>IGRAPH_THREAD_SAFE</code> macro does).</p>\n\n<p>Internally, non-deterministic igraph functions that require the RNG call the <code>RNG_BEGIN()</code> macro to signal their intention to use the RNG (and then call <code>RNG_END()</code> to signal that they don't need the RNG any more). <code>RNG_BEGIN()</code> calls <code>igraph_rng_default()</code> to get hold of the \"default\" random number generator (and also seeds it if this is the first time the RNG is used). The race condition that <code>helgrind</code> identified possibly represents the seeding of the RNG by two threads at the same time. Interestingly enough, <code>igraph_rng_default()</code> returns the address of a thread-local struct (<code>igraph_i_rng_default</code>, see <code>src/random.c</code> in the source code), and this thread-local struct contains a flag that stores whether the RNG has been seeded already or not. On the other hand, the <em>state</em> of the RNG seems to be shared between threads, so what probably happens is that two or more threads try to mess around with the state vector of the <em>same</em> RNG because all the threads have their own thread-local flag that denotes whether the RNG is seeded.</p>\n\n<p>If my hunch is correct, then the problems with the RNG can be solved by patching <code>src/random.c</code> and making <code>igraph_i_rng_default_state</code> thread-local by adding <code>IGRAPH_THREAD_LOCAL</code> to its declaration. Either way, this is definitely a bug in the current version of igraph, so you should <a href=\"https://github.com/igraph/igraph/issues\" rel=\"nofollow\">file an issue</a> on Github.</p>\n"}], "owner": {"reputation": 462, "user_id": 3353501, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MvyZ7.png?s=128&g=1", "display_name": "rmccloskey", "link": "https://stackoverflow.com/users/3353501/rmccloskey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 33334263, "answer_count": 1, "score": 0, "last_activity_date": 1445802271, "creation_date": 1445451747, "last_edit_date": 1445466948, "question_id": 33266530, "link": "https://stackoverflow.com/questions/33266530/how-can-i-use-non-deterministic-igraph-functions-in-a-multithreaded-program", "title": "How can I use non-deterministic igraph functions in a multithreaded program?", "body": "<p>I'm using the <code>igraph</code> C library in a multi-threaded program. Each of the threads creates a random graph using <code>igraph_barabasi_game</code>. Although the <code>IGRAPH_THREAD_SAFE</code> macro is set to 1, I'm still experiencing crashes which are apparently thread related. </p>\n\n<p>Here's a minimal program which demonstrates the problem. I call the <code>do_work</code> function, which just creates a random graph, from two threads.</p>\n\n<pre><code>#include &lt;pthread.h&gt;                                                         \n#include &lt;igraph/igraph.h&gt;                                                   \n\nvoid *do_work(void *arg)                                                     \n{                                                                            \n    igraph_t g;                                                                 \n    igraph_barabasi_game(&amp;g, 100, 1, 4, NULL, 0, 1, 0, IGRAPH_BARABASI_PSUMTREE, NULL);\n    igraph_destroy(&amp;g);                                                      \n}                                                                            \n\npthread_t threads[2];                                                        \n\nint main (void)                                                              \n{                                                                               \n#if IGRAPH_THREAD_SAFE == 0                                                  \n    fprintf(stderr, \"igraph is not thread safe\\n\");                             \n    return 1;                                                                   \n#endif                                                                          \n\n    pthread_create(&amp;threads[0], NULL, do_work, NULL);                           \n    pthread_create(&amp;threads[1], NULL, do_work, NULL);                           \n    pthread_join(threads[0], NULL);                                             \n    pthread_join(threads[1], NULL);                                             \n\n    return 0;                                                                   \n}\n</code></pre>\n\n<p>This can be compiled with <code>gcc test.c -ligraph -lpthread</code>. This particular program doesn't crash, however when I run it through helgrind, there are errors related to the random number generator.</p>\n\n<pre><code>==20144== Possible data race during write of size 8 at 0x547D038 by thread #3\n==20144== Locks held: none                                                      \n==20144==    at 0x4F172A5: igraph_rng_mt19937_get (random.c:354)                \n    ==20144==    by 0x4F17358: igraph_rng_mt19937_get_real (random.c:381)       \n    ==20144==    by 0x4F17951: igraph_rng_get_unif (random.c:805)               \n    ==20144==    by 0x4ED3F68: igraph_i_barabasi_game_psumtree (games.c:381) \n    ==20144==    by 0x400828: do_work (in /home/rmcclosk/test/a.out)            \n    ==20144==    by 0x4C30E26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)\n    ==20144==    by 0x5488181: start_thread (pthread_create.c:312)              \n    ==20144==    by 0x579847C: clone (clone.S:111)                              \n    ==20144==                                                                   \n    ==20144== This conflicts with a previous write of size 8 by thread #2       \n    ==20144== Locks held: none                                                  \n    ==20144==    at 0x4F17400: igraph_rng_mt19937_seed (string3.h:84)           \n    ==20144==    by 0x4F177F1: igraph_rng_seed (random.c:684)                   \n    ==20144==    by 0x4ED4354: igraph_i_barabasi_game_psumtree (games.c:340) \n    ==20144==    by 0x400828: do_work (in /home/rmcclosk/test/a.out)            \n    ==20144==    by 0x4C30E26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)\n    ==20144==    by 0x5488181: start_thread (pthread_create.c:312)              \n    ==20144==    by 0x579847C: clone (clone.S:111)\n</code></pre>\n\n<p>I think the solution would be to pass a different random number generator object to each thread, but I don't see a way to do that here, since <code>igraph_barabasi_game</code> doesn't take a generator as a parameter. Is there a proper way to use these non-deterministic functions in a multi-threaded program?</p>\n"}, {"tags": ["c", "apache", "gcc", "compiler-errors", "compiler-warnings"], "answers": [{"comments": [{"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1445456410, "post_id": 33267563, "comment_id": 54336794, "body": "Now my error from trying that is <code>.&#47;sample.c:178: warning: missing braces around initializer .&#47;sample.c:178: warning: (near initialization for &#39;example_directives[4].func&#39;)</code>"}, {"owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "reply_to_user": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1445459230, "post_id": 33267563, "comment_id": 54338272, "body": "Ah, I see. cmd_func is a union, not a plain pointer. The second field should be { NULL }."}], "tags": [], "owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "is_accepted": true, "score": 0, "last_activity_date": 1445459169, "last_edit_date": 1445459169, "creation_date": 1445455440, "answer_id": 33267563, "question_id": 33266465, "link": "https://stackoverflow.com/questions/33266465/apache-module-creation-tutorial-contains-code-with-errors-how-to-fix/33267563#33267563", "title": "Apache module creation tutorial contains code with errors. How to fix?", "body": "<p>gcc wants you to initialize all members of the structure apparently. Try replacing the last entry with { NULL, { NULL }, NULL, 0, 0, NULL }. The values should match command_rec structure definition typically found in /usr/include/httpd/http_config.h</p>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 33267563, "answer_count": 1, "score": 0, "last_activity_date": 1445459169, "creation_date": 1445451465, "question_id": 33266465, "link": "https://stackoverflow.com/questions/33266465/apache-module-creation-tutorial-contains-code-with-errors-how-to-fix", "title": "Apache module creation tutorial contains code with errors. How to fix?", "body": "<p>I went to the following URL for instructions on building an apache module:</p>\n\n<p><a href=\"https://httpd.apache.org/docs/2.4/developer/modguide.html\" rel=\"nofollow\">https://httpd.apache.org/docs/2.4/developer/modguide.html</a></p>\n\n<p>It states halfway down the page that code similar to the following is required for a custom module to process entries in the apache configuration file:</p>\n\n<pre><code>static const command_rec example_directives[] =\n{\n    AP_INIT_TAKE1(\"exampleEnabled\", example_set_enabled, NULL, RSRC_CONF, \"Enable or disable mod_example\"),\n    AP_INIT_TAKE1(\"examplePath\", example_set_path, NULL, RSRC_CONF, \"The path to whatever\"),\n    AP_INIT_TAKE2(\"exampleAction\", example_set_action, NULL, RSRC_CONF, \"Special action value!\"),\n    { NULL }\n};\n</code></pre>\n\n<p>It compiles fine under apxs using no gcc options. it doesn't compile with extended error checking on. For example, I issued this command:</p>\n\n<pre><code>apxs -i -a -Wc,Werror -Wc,-Wall -Wc,-Wextra -Wc,-O2 -c ./sample.c --enable-debug=YES\n</code></pre>\n\n<p>That attempts to execute <code>gcc -Wall -Wextra -O2 sample.c</code> and the errors I receive are:</p>\n\n<pre><code>./sample.c:178: warning: missing initializer\n./sample.c:178: warning: (near initialization for 'example_directives[4].func')\n</code></pre>\n\n<p>The line of the error points to the line that only contains <code>{ NULL }</code>.</p>\n\n<p>The apache module tutorial also suggests we use functions with parameters programmers will rarely use.  As a result, I've been receiving these warnings:</p>\n\n<pre><code>warning: unused parameter\n</code></pre>\n\n<p>How do I fix all these errors with extended error checking enabled?</p>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445451854, "post_id": 33266450, "comment_id": 54334272, "body": "There is no need for masking, presuming <code>val</code> is at least <code>uint32_t</code> (and smaller makes no sense)."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445452339, "post_id": 33266450, "comment_id": 54334514, "body": "FYI, most of the time there&#39;s a <code>#define</code> for the system endianness (e.g. <code>BIG_ENDIAN</code>, <code>LITTLE_ENDIAN</code>) as well as some <code>bswap</code> intrinsic."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1445625938, "post_id": 33266450, "comment_id": 54417529, "body": "neither there&#39;s need for masking nor for casting, as the result array is supposed to be in <code>unit8_t</code> cells."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 7, "last_activity_date": 1445451547, "creation_date": 1445451547, "answer_id": 33266485, "question_id": 33266450, "link": "https://stackoverflow.com/questions/33266450/does-bit-shifting-properly-isolate-bytes-on-different-endian-systems/33266485#33266485", "title": "Does bit-shifting properly isolate bytes on different endian systems?", "body": "<p>Yes, this will work correctly. The bit-shifting operators deal with the abstract numeric values, not the way they're represented in the hardware registers or RAM. <code>&gt;&gt; N</code> is essentially equivalent to dividing by 2<sup>N</sup>.</p>\n"}], "owner": {"reputation": 3868, "user_id": 318811, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3d03167ed57857f7e7564bac118a4d03?s=128&d=identicon&r=PG", "display_name": "MarkP", "link": "https://stackoverflow.com/users/318811/markp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1445451547, "creation_date": 1445451405, "question_id": 33266450, "link": "https://stackoverflow.com/questions/33266450/does-bit-shifting-properly-isolate-bytes-on-different-endian-systems", "title": "Does bit-shifting properly isolate bytes on different endian systems?", "body": "<p>I'm attempting to write an integer to a byte buffer. Will the following code always write in big endian format, regardless of the endianness of the system:</p>\n\n<pre><code>byte[0] = (uint8_t) (val &amp; 0xFF000000) &gt;&gt; 24;\nbyte[1] = (uint8_t) (val &amp; 0x00FF0000) &gt;&gt; 16;\nbyte[2] = (uint8_t) (val &amp; 0x0000FF00) &gt;&gt; 8;\nbyte[3] = (uint8_t) (val &amp; 0x000000FF);\n</code></pre>\n\n<p>Unfortunately, I don't have access to htonl() and similar functions.</p>\n"}, {"tags": ["c", "assembly", "inline-assembly"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1445450662, "post_id": 33266153, "comment_id": 54333608, "body": "Maybe you could explain what this is attempting to do?  For example, <code>inEax</code> is doing something with the <code>eax</code> register, but it isn&#39;t clear what, or why."}, {"owner": {"reputation": 27, "user_id": 2062298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a5b4f337087b25ff36a95be3ef2953?s=128&d=identicon&r=PG", "display_name": "SEnergy", "link": "https://stackoverflow.com/users/2062298/senergy"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1445450896, "post_id": 33266153, "comment_id": 54333737, "body": "inEax is just supposed to get the value from eax and print it to console, that&#39;s why it is moving value from eax to a"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445451955, "post_id": 33266153, "comment_id": 54334314, "body": "Use proper prototype declarators! And there is no guarantee the compiler will not reorder the statements. And use the debugger! &quot;My code isn&#39;t working is no <b>specific</b> problem description."}, {"owner": {"reputation": 27, "user_id": 2062298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a5b4f337087b25ff36a95be3ef2953?s=128&d=identicon&r=PG", "display_name": "SEnergy", "link": "https://stackoverflow.com/users/2062298/senergy"}, "edited": false, "score": 0, "creation_date": 1445452761, "post_id": 33266153, "comment_id": 54334766, "body": "the hell is proper prototype declarator? and why would compiler reorder statements? yes, the SPECIFIC problem description is above the code, how about you read it?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1445454117, "post_id": 33266153, "comment_id": 54335580, "body": "It may reorder statements as an optimization. As for inline assembler and gcc I suggest you read this <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">gcc documentation</a>. Half way through the document it discusses potential reordering of separate <i>asm</i> blocks, deletion of <i>asm</i> blocks altogether, along with suggested changes to avoid these problems."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1445456208, "post_id": 33266153, "comment_id": 54336690, "body": "Look at assembly produced by <i>gcc</i>, either by using a debugger in disassembler more, or using <code>-S</code> switch to get assembly output from <i>gcc</i>."}, {"owner": {"reputation": 27, "user_id": 2062298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a5b4f337087b25ff36a95be3ef2953?s=128&d=identicon&r=PG", "display_name": "SEnergy", "link": "https://stackoverflow.com/users/2062298/senergy"}, "edited": false, "score": 0, "creation_date": 1445456894, "post_id": 33266153, "comment_id": 54337046, "body": "while that is great I have no idea how to use that output from gcc"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2062298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a5b4f337087b25ff36a95be3ef2953?s=128&d=identicon&r=PG", "display_name": "SEnergy", "link": "https://stackoverflow.com/users/2062298/senergy"}, "edited": false, "score": 0, "creation_date": 1445458054, "post_id": 33268021, "comment_id": 54337634, "body": "well, I changed the setFlag to move value into ebx instead of eax, the code looks as this; <a href=\"http://pastebin.com/LpcbZgdH\" rel=\"nofollow noreferrer\">pastebin.com/LpcbZgdH</a> but I&#39;m getting &quot;smaller&quot; now all the time, no matter what number I put as flags, I even tried moving the flag value to the eax and compare eax with ebx (all in compare function) but got the same result"}, {"owner": {"reputation": 27, "user_id": 2062298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a5b4f337087b25ff36a95be3ef2953?s=128&d=identicon&r=PG", "display_name": "SEnergy", "link": "https://stackoverflow.com/users/2062298/senergy"}, "edited": false, "score": 0, "creation_date": 1445458768, "post_id": 33268021, "comment_id": 54338009, "body": "edit: updated main post with more information and what&#39;s going on"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1445459639, "last_edit_date": 1445459639, "creation_date": 1445457035, "answer_id": 33268021, "question_id": 33266153, "link": "https://stackoverflow.com/questions/33266153/c-inline-assembly-storing-a-number-goes-wrong/33268021#33268021", "title": "C - inline assembly, storing a number goes wrong", "body": "<p>Here's the disassembly of your compare function:</p>\n\n<pre><code>  00000000004005e0 &lt;compare&gt;:\n  4005e0:   b8 03 00 00 00          mov    $0x3,%eax\n  4005e5:   39 c0                   cmp    %eax,%eax\n  4005e7:   74 10                   je     4005f9 &lt;eq&gt;\n  4005e9:   7f 07                   jg     4005f2 &lt;lrg&gt;\n  4005eb:   e8 10 00 00 00          callq  400600 &lt;smaller&gt;\n  4005f0:   eb 0c                   jmp    4005fe &lt;out&gt;\n</code></pre>\n\n<p>Notice anything?</p>\n\n<p>You're mixing your metaphors.  When using %0, etc, you can't use %%eax directly.  The compiler may assign %0 to %eax because you didn't tell it that you wanted to use it.</p>\n\n<p>What you need is a register specific constraint.  The constraint for %eax is \"a\".  Then apply that.  For example, if you had two registers, and one had to be %eax, do <code>=a (p), =r (q)</code>.  Now the p variable [using %0] maps to %eax and the q variable [using %1] maps to any available register.</p>\n\n<p><strong>HOWEVER</strong> After calling inEax, which stuffs %eax, it has no chance of not being overwritten immediately.  In fact, you can't expect <em>any</em> register to have <em>any</em> specific state/value after a function returns.</p>\n\n<p>You <em>can</em> do this if you put all your assembly code in a manually crafted .s file.  You can have whatever calling conventions you want (e.g. return value in %ecx)</p>\n"}], "owner": {"reputation": 27, "user_id": 2062298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a5b4f337087b25ff36a95be3ef2953?s=128&d=identicon&r=PG", "display_name": "SEnergy", "link": "https://stackoverflow.com/users/2062298/senergy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1445459639, "creation_date": 1445450324, "last_edit_date": 1445458709, "question_id": 33266153, "link": "https://stackoverflow.com/questions/33266153/c-inline-assembly-storing-a-number-goes-wrong", "title": "C - inline assembly, storing a number goes wrong", "body": "<p>I'm pretty new to assembly. Actually, I never touched it before, and I kinda need to use it within the school project (I don't really need it, but I find it somehow necessary). I can't use variables, so What I need to do is an assembly code that will move a number to eax (or other register), and with another function it will compare input with the value in register - if that's possible. I'm doing this in C using asm function, but the assembly part is the one that needs fixing.. AT&amp;T syntax, linux, compiling with gcc -std=gnu99, some values I tried:</p>\n\n<p>Flag : Curr : Result</p>\n\n<p>1 : 0 : equal,</p>\n\n<p>0 : 0 : equal,</p>\n\n<p>-1 : 0 : equal,</p>\n\n<p>1 : 1 : smaller</p>\n\n<p>0 : 1 : smaller</p>\n\n<p>-1 : 1 : smaller</p>\n\n<p>1 : -1 : larger</p>\n\n<p>0 : -1 : larger</p>\n\n<p>1 : -1 : larger</p>\n\n<p>so the flag is being overwritten to 0 all the time, how do I prevent that?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid setFlag(), compare(), smaller(), larger(), equal();\nint getFlag(), getCurr();\n\nint main()\n{\n    setFlag();\n    compare();\n    return 0;\n}\n\nvoid setFlag()\n{\n    asm(\"movl %0, %%ebx;\"\n        :: \"r\" (getFlag())\n        : \"%ebx\");\n}\n\nvoid compare()\n{\n    asm(\"cmpl %0, %%ebx;\"\n        \"je 2f;\"\n        \"jg 1f;\"\n\n        \"call smaller;\"\n        \"jmp 3f;\"\n\n        \"1:\"\n        \"call larger;\"\n        \"jmp 3f;\"\n\n        \"2:\"\n        \"call equal;\"\n\n        \"3:\"\n        :: \"r\" (getCurr()));    \n}\n\nvoid smaller() { printf(\"smaller\\n\"); }\n\nvoid larger() { printf(\"larger\\n\"); }\n\nvoid equal() { printf(\"equal\\n\"); }\n\nint getFlag() { return 5; }\n\nint getCurr() { return 3; }\n</code></pre>\n"}, {"tags": ["c++", "c", "linker", "cairo", "xlib"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445449602, "post_id": 33265930, "comment_id": 54333016, "body": "Did you check to make sure <code>surface</code> is a valid pointer?"}, {"owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445449923, "post_id": 33265930, "comment_id": 54333200, "body": "Yes! It is valid in the sense that it is not NULL and it points to a readable address. More about its validity I&#39;m unable to say because I do not know cairo. However, I remark that this code works perfectly when all the libraries are dynamically linked"}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1445450965, "post_id": 33265930, "comment_id": 54333773, "body": "Are you sure that the program has write access to a file file_name and this file isn&#39;t opened in another application?"}, {"owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "edited": false, "score": 0, "creation_date": 1445457630, "post_id": 33265930, "comment_id": 54337406, "body": "Yes I am. I verified that"}, {"owner": {"reputation": 3870, "user_id": 773849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc313492ba01cdb794a218eeeeab8ee?s=128&d=identicon&r=PG", "display_name": "Alex Barker", "link": "https://stackoverflow.com/users/773849/alex-barker"}, "edited": false, "score": 0, "creation_date": 1498264761, "post_id": 33265930, "comment_id": 76445924, "body": "Can you add a backtrace?"}], "answers": [{"tags": [], "owner": {"reputation": 3870, "user_id": 773849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc313492ba01cdb794a218eeeeab8ee?s=128&d=identicon&r=PG", "display_name": "Alex Barker", "link": "https://stackoverflow.com/users/773849/alex-barker"}, "is_accepted": true, "score": 1, "last_activity_date": 1502738739, "creation_date": 1502738739, "answer_id": 45681666, "question_id": 33265930, "link": "https://stackoverflow.com/questions/33265930/seg-fault-in-cairo-when-using-some-static-libraries/45681666#45681666", "title": "Seg fault in cairo when using some static libraries", "body": "<p>I did just patch a crash on linux due to xcb in the 2.1 branch.  That may fix your issue when 2.1.1.  I would recommend trying 2.0 which does not contain xcb to see if that fixes your problem.</p>\n"}], "owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 45681666, "answer_count": 1, "score": 0, "last_activity_date": 1502738739, "creation_date": 1445449518, "last_edit_date": 1495541029, "question_id": 33265930, "link": "https://stackoverflow.com/questions/33265930/seg-fault-in-cairo-when-using-some-static-libraries", "title": "Seg fault in cairo when using some static libraries", "body": "<p>I have the following routine for taking a screenshot:</p>\n\n<pre><code>void take_screenshot(const std::string &amp; file_name)\n{\n  Display *disp;\n  Window root;\n  cairo_surface_t *surface;\n  int scr;\n\n  disp = XOpenDisplay(nullptr);\n  scr = DefaultScreen(disp);\n  root = DefaultRootWindow(disp);\n\n  surface = cairo_xlib_surface_create(disp, root, DefaultVisual(disp, scr),\n                      DisplayWidth(disp, scr), \n                      DisplayHeight(disp, scr));\n  cairo_surface_write_to_png(surface, file_name.c_str()); // &lt;-- here is the seg fault\n  cairo_surface_destroy(surface);\n}\n</code></pre>\n\n<p>This routine was taken from the answer of <a href=\"https://stackoverflow.com/users/436275/uli-schlachter\">https://stackoverflow.com/users/436275/uli-schlachter</a> to this question <a href=\"https://stackoverflow.com/questions/15507788/making-a-screenshot-using-xlib-and-cairo-libs-fail\">Making a screenshot using Xlib and Cairo libs [fail]</a> (credits to the authors)</p>\n\n<p>The routine is part of a program called <code>collector</code>. which is linked as follows:</p>\n\n<pre><code>clang -o collector -g -O2 -fno-strict-aliasing collector.o common-vars.o \\\ncollector-events.o listeners.o active_window.o \\\n../lib/libperfq-common.a -lPocoNet -lPocoFoundation -luiohook\\\n-lstdc++ -lgsl -lgslcblas -lm -lcairo -lXt -lXtst -lXinerama \\\n-lX11 -lpthread -lc\n</code></pre>\n\n<p>So far so good. The program works very well.</p>\n\n<p>However, when I statically link the poco and uiohook libraries, the program throws a seg fault at the line indicated above. </p>\n\n<p>The executable with poco and uiohook libraries statically linked is produced as follows:</p>\n\n<pre><code>clang -o collector -g -O2 -fno-strict-aliasing collector.o \\\ncommon-vars.o collector-events.o listeners.o active_window.o \\\n../lib/libperfq-common.a /home/lrleon/poco/lib/libPocoNet.a \\\n/home/lrleon/poco/lib/libPocoFoundation.a \\\n/home/lrleon/uiohook/lib/libuiohook.a -lstdc++ -lgsl -lgslcblas \\\n-lm -lcairo -lXt -lXtst -lXinerama -lX11 -lpthread -lc\n</code></pre>\n\n<p>With this version, I have a segfault. And after switching some dynamic libraries, watch with a debugger, I do know what is causing the error.</p>\n\n<p>I guess the fact that some libraries statically chained make the call to <code>cairo_surface_write_to_png()</code> fails. But I have no idea why.</p>\n\n<p>Any idea? Thanks in advance</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1445449605, "post_id": 33265851, "comment_id": 54333019, "body": "Quis custodiet ipsos custodes?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1445449965, "post_id": 33265851, "comment_id": 54333216, "body": "You are supposed to only call reentrant functions in signal handlers."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1445451082, "post_id": 33265851, "comment_id": 54333845, "body": "What happens when an armor piercing bullet pierces armor?"}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 1, "creation_date": 1445458074, "post_id": 33265851, "comment_id": 54337648, "body": "<a href=\"http://coliru.stacked-crooked.com/a/40fc467ac87e9cfa\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/40fc467ac87e9cfa</a> My results show: 1&amp;2 - segfault in handler crashes program instantly. 3 - signal handler recurses for about 13k times (varying) and then crashes."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 1, "creation_date": 1445458862, "post_id": 33265851, "comment_id": 54338050, "body": "<a href=\"http://man7.org/linux/man-pages/man2/sigprocmask.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/sigprocmask.2.html</a> - the answer to logical trap: &quot;       If SIGBUS, SIGFPE, SIGILL, or SIGSEGV are generated while they are        blocked, the result is undefined, unless the signal was generated by        kill(2), sigqueue(3), or raise(3).&quot;"}, {"owner": {"reputation": 63, "user_id": 4560121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84660fb1fcd77c03a8952e3b11de8cea?s=128&d=identicon&r=PG&f=1", "display_name": "Anders H", "link": "https://stackoverflow.com/users/4560121/anders-h"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1445503412, "post_id": 33265851, "comment_id": 54354110, "body": "@black: There are no rules to stop me from attempting to write data through a pointer inside a signal handler, are there? This can segfault. (Of course there may be guidelines against this.)"}, {"owner": {"reputation": 63, "user_id": 4560121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84660fb1fcd77c03a8952e3b11de8cea?s=128&d=identicon&r=PG&f=1", "display_name": "Anders H", "link": "https://stackoverflow.com/users/4560121/anders-h"}, "reply_to_user": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1445503860, "post_id": 33265851, "comment_id": 54354384, "body": "Thanks @zch, I believe I have got the answers I was looking for. But I don&#39;t understand how to flag it as answered."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 1, "creation_date": 1445621317, "post_id": 33265851, "comment_id": 54415201, "body": "You can&#39;t mark comments as accepted answers, but you can mark the answer."}], "answers": [{"tags": [], "owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "is_accepted": true, "score": 4, "last_activity_date": 1445621036, "creation_date": 1445621036, "answer_id": 33308138, "question_id": 33265851, "link": "https://stackoverflow.com/questions/33265851/what-happens-if-i-catch-sigsegv-and-the-signal-handler-causes-another-sigsegv/33308138#33308138", "title": "What happens if I catch SIGSEGV and the signal handler causes another SIGSEGV?", "body": "<p>By default, while signal is being handled it is masked, so it can't be triggered recursively. If masked signal is triggered by program execution (invalid memory access, segfault, division by 0 etc.), the behavior is undefined:</p>\n\n<blockquote>\n  <p>If SIGBUS, SIGFPE, SIGILL, or SIGSEGV are generated while they are\n         blocked, the result is undefined, unless the signal was generated by\n         kill(2), sigqueue(3), or raise(3).</p>\n</blockquote>\n\n<p>On my system, it causes process to crash.</p>\n\n<p>With <code>SA_NODEFER</code> there is no masking, so signal can be handled recursively until stack overflows. And adding <code>SA_RESETHAND</code> would restore default action (crash for SIGSEGV).</p>\n\n<p>I adapted your example to simple testing program, so you can verify this behavior:</p>\n\n<pre><code>#include&lt;signal.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n\nvolatile char *ptr;\n\nstatic void DisasterSignals(int signal)\n{\n  /* We cannot save the situation, the purpose of catching the signal is\n     only to do something clever to aid debugging before we go. */\n  write(1, \"11\\n\", 3);\n  *ptr = 1;\n  write(1, \"13\\n\", 3);\n  abort(); /* This should give us the expected core dump (if we survive to this point) */\n}\n\nstruct sigaction sa = {}; /* initialised to all zero (I vote for GCC style breach of standard here) */\n\nint main()\n{\n  sa.sa_handler = DisasterSignals;\n  sa.sa_flags = /*SA_RESETHAND | */SA_NODEFER;  /* To have or have not */\n  sigaction(SIGSEGV, &amp;sa, NULL);\n\n  write(1, \"25\\n\", 3);\n  *ptr = 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4560121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84660fb1fcd77c03a8952e3b11de8cea?s=128&d=identicon&r=PG&f=1", "display_name": "Anders H", "link": "https://stackoverflow.com/users/4560121/anders-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2890, "favorite_count": 1, "accepted_answer_id": 33308138, "answer_count": 1, "score": 6, "last_activity_date": 1445621036, "creation_date": 1445449231, "question_id": 33265851, "link": "https://stackoverflow.com/questions/33265851/what-happens-if-i-catch-sigsegv-and-the-signal-handler-causes-another-sigsegv", "title": "What happens if I catch SIGSEGV and the signal handler causes another SIGSEGV?", "body": "<p>This question is asked with Linux in mind. GCC compiler is used.</p>\n\n<p>What behaviour can be expected if SIGSEGV (I mean a violation that normally causes SIGSEGV) occurs within a signal handler whose purpose was to catch SIGSEGV? Code example to aid the discussion:</p>\n\n<pre><code>/* In main or whatever */\n{\n  struct sigaction sa = {}; /* initialised to all zero (I vote for GCC style breach of standard here) */\n  sa.sa_handler = DisasterSignals;\n  sa.sa_flags = SA_RESETHAND | SA_NODEFER;  /* To have or have not */\n  sigaction(SIGSEGV, &amp;sa, NULL);\n}\n\nstatic void DisasterSignals(int signal)\n{\n  /* We cannot save the situation, the purpose of catching the signal is\n     only to do something clever to aid debugging before we go. */\n\n  /* Q: What if we segfault in here?? */\n\n  abort(); /* This should give us the expected core dump (if we survive to this point) */\n}\n</code></pre>\n\n<p>Imagine, in the point \"Q\", There is an offending machine instruction.</p>\n\n<p>1) Without the <code>SA_RESETHAND | SA_NODEFER</code>: This appears to put the system in a logical trap: At \"Q\", SIGSEGV should be generated. But SIGSEGV is blocked in the signal handler (default sigaction behaviour). How can the execution continue? Will it freeze? Will it jump past the offending instruction (I guess not)?</p>\n\n<p>2) With the <code>SA_RESETHAND | SA_NODEFER</code>: I guess in this case the program will crash in a \"normal\" fashion when SIGSEGV is repeated.</p>\n\n<p>3) With only <code>SA_NODEFER</code>: I guess in this case the signal handler is recursively called when SIGSEGV is repeated; if the SIGSEGV is always repeated, we get a freeze until the stack overflows, and then what.</p>\n"}, {"tags": ["c", "operating-system", "system-calls", "kernel-mode", "usermode"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445447442, "post_id": 33265239, "comment_id": 54331756, "body": "No.  Assuming a non-trivial OS, it cannot even get loaded into memory without kernel calls, never mind obtain execution."}, {"owner": {"reputation": 149, "user_id": 430051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d88b6de53064bde2445ff6fe3e6822?s=128&d=identicon&r=PG", "display_name": "user430051", "link": "https://stackoverflow.com/users/430051/user430051"}, "edited": false, "score": 1, "creation_date": 1445449696, "post_id": 33265239, "comment_id": 54333071, "body": "&quot;When we compile the C program it just generates the machine understandable code. This code can directly run on the hardware.&quot; - This machine understandable code does system calls to the kernel to allocate resources. If you want to go bare metal, your application will be loaded on boot and then, yeah, you can do whatever you want. Except for that, you&#39;re in line with whatever the kernel allow."}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 2809547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7099a6779ed5874b59f7029b767574bb?s=128&d=identicon&r=PG&f=1", "display_name": "shiv garg", "link": "https://stackoverflow.com/users/2809547/shiv-garg"}, "edited": false, "score": 0, "creation_date": 1445448522, "post_id": 33265311, "comment_id": 54332346, "body": "i think sys calls are in non binary format that kernel understands. so either the executable contain the non machine understandable components (non binary) or system calls must be in binary format. which of the argument is right?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 671, "user_id": 2809547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7099a6779ed5874b59f7029b767574bb?s=128&d=identicon&r=PG&f=1", "display_name": "shiv garg", "link": "https://stackoverflow.com/users/2809547/shiv-garg"}, "edited": false, "score": 0, "creation_date": 1445448628, "post_id": 33265311, "comment_id": 54332405, "body": "no. the kernel doesn&#39;t &quot;understand&quot; any of this. It&#39;s being <i>called</i> by the program in cquestion. None of your arguments are right, and you will have to study what computers work like a little more."}, {"owner": {"reputation": 671, "user_id": 2809547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7099a6779ed5874b59f7029b767574bb?s=128&d=identicon&r=PG&f=1", "display_name": "shiv garg", "link": "https://stackoverflow.com/users/2809547/shiv-garg"}, "edited": false, "score": 0, "creation_date": 1445448745, "post_id": 33265311, "comment_id": 54332482, "body": "ok you want to tell that when program compiles all the information gets embedded in it, about the resources, how much can it use"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 671, "user_id": 2809547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7099a6779ed5874b59f7029b767574bb?s=128&d=identicon&r=PG&f=1", "display_name": "shiv garg", "link": "https://stackoverflow.com/users/2809547/shiv-garg"}, "edited": false, "score": 0, "creation_date": 1445449164, "post_id": 33265311, "comment_id": 54332727, "body": "exactly, the job of the compiler and linker is to transform your source code into machine code, which might contain calls to symbols e.g. from userland libraries and also might contain calls to the kernel. The linker takes the names of the functions called, and transforms them basically to addresses - and there&#39;s no trace left of the original names of the kernel functions left in your executable."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 5, "last_activity_date": 1445450140, "last_edit_date": 1445450140, "creation_date": 1445447377, "answer_id": 33265311, "question_id": 33265239, "link": "https://stackoverflow.com/questions/33265239/c-and-resource-protection-in-memory/33265311#33265311", "title": "C and resource protection in memory", "body": "<p>Whilst the program is in machine code, to do anything not within its own memory region, it will need to <em>call</em> the kernel via <em>syscalls</em>.</p>\n\n<p>The CPU actually has a notion of the privilege of code. Unprivileged code can't directly access physical memory etc; it <strong>has</strong> to go through the OS and ask it to give access.</p>\n\n<p>Hence, every program does directly run on the CPU, but that doesn't mean it can do anything with the hardware \u2013 there's hardware measurements against that. The privilege that you'd need to do certain things is one of these.</p>\n"}, {"comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445448906, "post_id": 33265691, "comment_id": 54332580, "body": "good answer! Note that there&#39;s actually <a href=\"https://events.ccc.de/congress/2014/Fahrplan/events/6129.html\" rel=\"nofollow noreferrer\">further rings of protection</a> against firmware updates that not even a privileged process can&#39;t do. But that&#39;s totally irrelevant for anyone but hardware designers and really frightening attackers."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445449005, "post_id": 33265691, "comment_id": 54332642, "body": "I don&#39;t really agree with the &quot;it doesn&#39;t run on the actual hardware&quot; bottom line, though: <i>Of course</i> the program is actually run by the actual CPU (it&#39;s not being instrumentalized e.g. like in an emulator), but the execution is severely restricted."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445449766, "post_id": 33265691, "comment_id": 54333109, "body": "@MarcusM&#252;ller: I think you&#39;ve missed the point. The fact that the physical CPU executes the code is not the issue. He&#39;s clearly talking about the different modes under which a program can execute. The fact remains that a program cannot directly mess around with hardware resources and stuff in the context of the distinction between usermode &amp; kernelmode."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1445449808, "post_id": 33265691, "comment_id": 54333135, "body": "@ray: I&#39;d agree with you, but I don&#39;t think OP is at that level of understanding."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445449956, "post_id": 33265691, "comment_id": 54333214, "body": "@MarcusM&#252;ller: You may be right, but that still does not change the fact that the distinction is accurate. The OP will get to that level sooner or later, if he/she really isn&#39;t there yet."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 1, "creation_date": 1445450086, "post_id": 33265691, "comment_id": 54333286, "body": "@ray: Ok, can we agree on this: The bottom line is that whilst the program does directly run on the CPU, it&#39;s limited privilege inhibits direct access to hardware and physical memory in general."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1445450191, "post_id": 33265691, "comment_id": 54333340, "body": "@MarcusM&#252;ller: We can indeed. The distinction should be fairly easy for the OP to get."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445451490, "post_id": 33265691, "comment_id": 54334087, "body": "@Downvoter Hey, what&#39;s wrong (I mean the answer)? If its because of the reason MarcusM&#252;ller gave in the first comment to this answer, I&#39;ll fix that now."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445451683, "post_id": 33265691, "comment_id": 54334178, "body": "@MarcusM&#252;ller Edited it, is it disambiguated now?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445451867, "post_id": 33265691, "comment_id": 54334277, "body": "@MarcusM&#252;ller Regarding your first comment with the &quot;further rings of protection&quot;, I don&#39;t see the OP mention x86 specifically anywhere. Also, I wasn&#39;t talking about &quot;rings of protection&quot; but about privilege modes, which are one abstraction level above &quot;rings&quot;, IMO. And thank you of course for your &quot;good answer!&quot;. :-)"}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 3, "last_activity_date": 1445802925, "last_edit_date": 1445802925, "creation_date": 1445448723, "answer_id": 33265691, "question_id": 33265239, "link": "https://stackoverflow.com/questions/33265239/c-and-resource-protection-in-memory/33265691#33265691", "title": "C and resource protection in memory", "body": "<blockquote>\n  <p>how can kernel handle the resource allocation to this program</p>\n</blockquote>\n\n<p>The kernel provides functions and mechanisms to allocate memory, do I/O (write to the screen, interact with the network/sound card), etc., called <em>system calls</em> to user programs. These system calls are the interface between kernel and user programs, alas between the hardware and user programs.</p>\n\n<blockquote>\n  <p>how do the privileged and non-privileged mode work?</p>\n</blockquote>\n\n<p>User programs are in Unprivileged Mode (userspace) while the kernel runs in Privileged Mode (kernelspace). The user can't be trusted, so if he messes up (accesses higher-privileged memory or dereferences a null pointer, for example) he's prevented from it (by a segmentation fault and the following termination of the program, for example).</p>\n\n<p>The kernel on the other hand runs in Privileged Mode. It can do whatever it wants: write to userspace programs, steal data (like passwords) from user programs, write to the processor's firmware - everything. Furthermore, there are different kinds of kernels: monolithic kernels and microkernels are the heaviliest (does that word exist at all?) used ones.</p>\n\n<p>Linux (initiated by Linus Torvalds) is an example for a monolithic kernel. Here, the kernel is one big system, where every piece of kernel code has ultimate access to the system.</p>\n\n<p>Minix (initiated by Andrew S. Tanenbaum) is an example for a microkernel. The part, which can access everything is rather small. It contains only the functionality that has to be privileged (managing the MMU, accessing hardware), etc. Other functionality, like filesystems, run in the Unprivileged Mode, where they are protected from possible bugs by the usual protection mechanisms employed in userspace (Unprivileged Mode), like Segmentation Faults.</p>\n\n<p>An  interesting read concerning the benefits/drawbacks of monolithic kernels and microkernels is the <a href=\"http://www.oreilly.com/openbook/opensources/book/appa.html\" rel=\"nofollow\">debate</a> between Linus Torvalds (at that time some guy who created an OS) and Andrew S. Tanenbaum (at that time an established professor for CS; has written some <em>amazing</em> books, BTW).</p>\n\n<blockquote>\n  <p>a program can directly run on hardware not through the kernel</p>\n</blockquote>\n\n<p>It indeed runs directly on the hardware, executed by the CPU. <strong>It cannot access certain resources directly</strong>, though, like memory, and, in order to access these resources, is <strong>required</strong> to interact with the kernel. That's one of the major improvements (next to maybe virtual processors, that is, processes) over earlier OSes like DOS: userspace programs cannot run directly on the hardware. If they could, they possibly could mess up the whole machine with irreparable causes (intentionally - like viruses, or unintentionally). Instead, as mentioned in the beginning of this answer, system calls are used.</p>\n\n<p>In DOS you had the <strong>option</strong> to use routines provided by the OS (commonly a trap at IV (Interrupt Vector, the offset (and physical memory address) into the Real Mode IDT (Interrupt Descriptor Table)) 0x21 (invoked via <code>int 0x21</code>/<code>int 21h</code>), while <code>ax</code> contained a function number identifying the call to the system<sup>1</sup>). Roughly the same mechanisms as nowadays where <strong>available</strong> but <strong>not</strong> strictly enforced. One could overwrite the whole OS, replace it with one's own program and destroy the machine (load random values into CMOS registers, for example). One could also just use the BIOS-provided routines, bypassing the OS.</p>\n\n<hr>\n\n<p><sup>1</sup> I use \"call to the system\" instead of \"system call\" intentionally here. Here, system calls only denote the requests from userspace to kernelspace to do something for it. As DOS (i.e., Real Mode) didn't provide a real distinction between userspace and kernelspace, it doesn't really have system calls.</p>\n"}, {"tags": [], "owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "is_accepted": true, "score": 5, "last_activity_date": 1445450916, "last_edit_date": 1445450916, "creation_date": 1445449341, "answer_id": 33265884, "question_id": 33265239, "link": "https://stackoverflow.com/questions/33265239/c-and-resource-protection-in-memory/33265884#33265884", "title": "C and resource protection in memory", "body": "<blockquote>\n  <p>If a C program can directly run on the\n  hardware how can kernel handle the resource allocation to this\n  program.</p>\n</blockquote>\n\n<p>The kernel is responsible for managing the resources of the computer as a whole, including resources like the hardware. This means that, for user-level applications to be able to access things like hardware devices, write to a terminal, or read a file, they have to ask the kernel for permission. This is done by using the <em>system calls</em> exposed by the OS, as mentioned by @Marcus.</p>\n\n<p>However, I wouldn't say that the program runs <em>directly</em> on hardware <strong>in the sense that</strong> it does not interact with the hardware directly, as a kernel module/driver would. A client program will set up the arguments for a system call and then <em>interrupt</em> the kernel and wait until the kernel <em>services</em> the interrupt request the program made.</p>\n\n<p>This is why OSes today are said to run in <em>protected mode</em>, as opposed to the old days when they ran in <em>real mode</em> and a program could, for example, mess around with hardware resources directly --and potentially screw things up.</p>\n\n<p>This distinction becomes very clear if you try writing a trivial \"hello world\" program in x86 assembly. I wrote and documented <a href=\"https://en.wikipedia.org/wiki/X86_assembly_language#.22Hello_world.21.22_program_for_Linux_in_NASM_style_assembly\" rel=\"nofollow\">this one</a> several years ago, reproduced below:</p>\n\n<pre><code>;\n; This program runs in 32-bit protected mode.\n;  build: nasm -f elf -F stabs name.asm\n;  link:  ld -o name name.o\n;\n; In 64-bit long mode you can use 64-bit registers (e.g. rax instead of eax, rbx instead of ebx, etc.)\n; Also change \"-f elf \" for \"-f elf64\" in build command.\n;\nsection .data                           ; section for initialized data\nstr:     db 'Hello world!', 0Ah         ; message string with new-line char at the end (10 decimal)\nstr_len: equ $ - str                    ; calcs length of string (bytes) by subtracting the str's start address\n                                            ; from this address ($ symbol)\n\nsection .text                           ; this is the code section\nglobal _start                           ; _start is the entry point and needs global scope to be 'seen' by the\n                                            ; linker --equivalent to main() in C/C++\n_start:                                 ; definition of _start procedure begins here\n    mov eax, 4                   ; specify the sys_write function code (from OS vector table)\n    mov ebx, 1                   ; specify file descriptor stdout --in gnu/linux, everything's treated as a file,\n                                             ; even hardware devices\n    mov ecx, str                 ; move start _address_ of string message to ecx register\n    mov edx, str_len             ; move length of message (in bytes)\n    int 80h                      ; interrupt kernel to perform the system call we just set up -\n                                             ; in gnu/linux services are requested through the kernel\n    mov eax, 1                   ; specify sys_exit function code (from OS vector table)\n    mov ebx, 0                   ; specify return code for OS (zero tells OS everything went fine)\n    int 80h                      ; interrupt kernel to perform system call (to exit)\n</code></pre>\n\n<p>Notice how the program sets up the write system call, <code>sys_write</code>, and then specifies the file descriptor of where to write, being <code>stdout</code>, the string to write, and so on.</p>\n\n<p>In other words, the <em>program</em> itself does not perform the write operation; it sets things up and asks the kernel to do it on its behalf by using a special interrupt, <code>int 80h</code>.</p>\n\n<p>A possible analogy here might be when you go to a restaurant. The server will take your order, but the chef is the one that will do the cooking. In this analogy, you are the user-level application, the server taking your food order is the system call, and the chef in the kitchen is the OS kernel.</p>\n\n<blockquote>\n  <p>If the executable generated from the gcc is in pure machine\n  understandable form then how do the privileged and non-privileged mode\n  work?</p>\n</blockquote>\n\n<p>Keying off from the previous section, user level programs always run in <em>user</em> mode. When the program needs access to something (e.g. terminal, read a file, etc.), it sets things up, as with the <code>sys_write</code> example above, and asks the kernel to do it on its behalf with an interrupt. The interrupt causes the program to go into <em>kernel</em> mode and remains there until the kernel has completed servicing the client's request --which may include denying it altogether (e.g. trying to read a file the user has no privilege to read).</p>\n\n<p>Internally, it's the system call that's responsible for issuing the <code>int 80h</code> instruction. User-level applications just see the system call, which is the common interface between the client and the OS.</p>\n\n<blockquote>\n  <p>How does the kernel manage the permission of hardware resources when a\n  program can directly run on hardware not through the kernel?</p>\n</blockquote>\n\n<p>If you followed the previous explanations, you can now see that the kernel acts as a <em>gatekeeper</em> and that programs \"knock\" on this gate by using the <code>int 80h</code> instruction.</p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 2, "last_activity_date": 1445452883, "last_edit_date": 1445452883, "creation_date": 1445450365, "answer_id": 33266164, "question_id": 33265239, "link": "https://stackoverflow.com/questions/33265239/c-and-resource-protection-in-memory/33266164#33266164", "title": "C and resource protection in memory", "body": "<blockquote>\n  <p>So my first question is if a C program can directly run on the hardware how can kernel handle the resource allocation to this program.</p>\n</blockquote>\n\n<p>CPUs carry a notion of privileges when executing code.  For example, on x86 there is a <em>Real Mode</em> where code is allowed to access any resource, and a <em>Protected Mode</em> where code executes in distinct <a href=\"https://en.wikipedia.org/wiki/Protection_ring\" rel=\"nofollow\">security rings</a>.  Most Operating Systems will switch to Protected Mode, where numerically lower rings imply higher privileges.</p>\n\n<p>The kernel typically executes in Ring 0, which gives direct access to the hardware, while user programs run in Ring 3 which restricts access.  When the user program needs to access a privileged resource, the CPU calls into the Operating System, which is privileged, either implicitly or directly through a <em>system call</em> instruction (e.g. <code>syscall</code> in x86-64 assembly).</p>\n\n<blockquote>\n  <p>If the executable generated from the gcc is in pure machine understandable form then how do the privileged and non-privileged mode work?</p>\n</blockquote>\n\n<p>Again, things like memory access are checked by the CPU.  So for example if a program tries to access a <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow\">virtual address</a> that it doesn't have permission for, the Operating System catches the invalid page access and generally signals the process (i.e. <code>SIGSEGV</code>).</p>\n\n<blockquote>\n  <p>How does the kernel manage the permission of hardware resources when a program can directly run on hardware not through the kernel?</p>\n</blockquote>\n\n<p>The CPU has to interact directly with the Operating System through specific <a href=\"https://en.wikipedia.org/wiki/Control_register#Control_registers_in_x86_series\" rel=\"nofollow\">control registers</a> and tables.  For example, the address of the virtual address page table is stored in the <code>CR3</code> register for x86.</p>\n"}], "owner": {"reputation": 671, "user_id": 2809547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7099a6779ed5874b59f7029b767574bb?s=128&d=identicon&r=PG&f=1", "display_name": "shiv garg", "link": "https://stackoverflow.com/users/2809547/shiv-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 2, "accepted_answer_id": 33265884, "answer_count": 4, "score": 5, "last_activity_date": 1445802925, "creation_date": 1445447119, "last_edit_date": 1495542223, "question_id": 33265239, "link": "https://stackoverflow.com/questions/33265239/c-and-resource-protection-in-memory", "title": "C and resource protection in memory", "body": "<p>When we compile a C program, it just generates some machine-understandable code. This code can directly run on the hardware, telling from <a href=\"https://stackoverflow.com/questions/23338684/does-a-c-c-program-run-the-cpu-or-on-the-kernel\">this question</a>.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>If a C program can directly run on the hardware, how can the kernel handle the resource allocation for this program?</p></li>\n<li><p>If the executable generated from the compiler is in pure machine-understandable form, then how do the privileged and non-privileged modes work?</p></li>\n<li><p>How does the kernel manage the permission of hardware resources if a program can directly run on the hardware not through the kernel?</p></li>\n</ol>\n"}, {"tags": ["c", "zip", "zipfile"], "owner": {"reputation": 11, "user_id": 5472494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0eb68af668cea7c7f73e49fb08763d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Linsan", "link": "https://stackoverflow.com/users/5472494/sam-linsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445446849, "creation_date": 1445446849, "question_id": 33265157, "link": "https://stackoverflow.com/questions/33265157/zip-2-0-decryption-produces-unexpected-results", "title": "ZIP 2.0 decryption produces unexpected results", "body": "<p>I am trying to implement the 'Traditional PKWARE Decryption' described in Section 6.1 of the .ZIP File Format Specification (<a href=\"https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\" rel=\"nofollow\">https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT</a>), but the results are not as expected.</p>\n\n<p>For testing, I am using a small text file zipped with TUGZip using no compression.</p>\n\n<p>The CRC-32 of the original file is <strong>0x7259B728</strong>.</p>\n\n<p>The 12 byte 'encryption header' in the .ZIP file contains <code>E6-8B-FE-EB-40-28-E1-55-4E-44-28-E0</code></p>\n\n<p>The 'password' is <code>61-7A-62-79-63</code> (azbyc).</p>\n\n<p>Encryption header after decryption contains <code>C3-7D-EE-4C-11-B3-39-A3-97-55-21-B3</code></p>\n\n<p>Section 6.1.6 of the specification says:</p>\n\n<p><em>\"After the header is decrypted, the last 1 or 2 bytes in Buffer should be the high-order word/byte of the CRC for the file being decrypted ....\"</em></p>\n\n<p>so I would expect 0x72, but I get 0xB3.</p>\n\n<p>As far as I can tell, I followed the spec exactly, but I am still quite new to C so I recreated the program in C#, and got the same results. I'm obviously missing or misunderstanding something. Any help would be greatly appreciated.</p>\n\n<p>Thank you in advance.</p>\n\n<p><strong>zip.c</strong></p>\n\n<pre><code>//struct ZIP_INFO contains member 'uint32_t *keys'\n//\n//At initialisation, the values are:\n//keys[0] = 0x12345678\n//keys[1] = 0x23456789\n//keys[2] = 0x34567890\n\nunsigned char zip_decrypt_byte(uint32_t *keys)\n{\n    uint16_t u = (uint16_t)((keys[2] &amp; 0xFFFF) | 0x02);\n    return (unsigned char)(((u * (u ^ 0x01)) &gt;&gt; 8) &amp; 0xFF);\n}\n\nvoid zip_decrypt_bytes(ZIP_INFO *info, unsigned char *buf, size_t len)\n{\n    unsigned char *u = buf;\n    while (len--)\n    {\n        *u ^= zip_decrypt_byte(info-&gt;keys);\n        zip_update_keys(info-&gt;keys, u++);\n    }\n}\n\nvoid zip_set_password(ZIP_INFO *info, unsigned char *password, size_t len)\n{\n    unsigned char *u = password;\n    while (len--)\n        zip_update_keys(info-&gt;keys, u++);\n}\n\nvoid zip_update_keys(uint32_t *keys, unsigned char *c)\n{\n    unsigned char u;\n    keys[0] = crc_32(keys[0], c, 1);\n    keys[1] += (keys[0] &amp; 0xFF);\n    keys[1] = ((keys[1] * 134775813) + 1);\n    u = (unsigned char)((keys[1] &gt;&gt; 24) &amp; 0xFF);\n    keys[2] = crc_32(keys[2], &amp;u, 1);\n}\n</code></pre>\n\n<p><strong>crc.c</strong></p>\n\n<pre><code>static uint32_t crc_table[256];\n\nuint32_t crc_32(uint32_t crc, unsigned char *buf, size_t len)\n{\n    unsigned char *p;\n    crc ^= 0xFFFFFFFF;\n    p = buf;\n    while (len--)\n        crc = (crc_table[((crc ^ *p++) &amp; 0xFF)] ^ (crc &gt;&gt; 8));\n    return (crc ^ 0xFFFFFFFF);\n}\n\nvoid crc_initialise()\n{\n    uint32_t u0, u1, u2;\n    for (u0 = 0; u0 &lt; 256; u0++)\n    {\n        u1 = u0;\n        for (u2 = 0; u2 &lt; 8; u2++)\n        {\n            if (u1 &amp; 0x01)\n                u1 = ((u1 &gt;&gt; 1) ^ 0xEDB88320);\n            else\n                u1 &gt;&gt;= 1;\n        }\n        crc_table[u0] = u1;\n    }\n}\n</code></pre>\n\n<p><strong>Contents of <em>'test.zip'</em></strong></p>\n\n<blockquote>\n  <p>50-4B-03-04-14-00-01-00-00-00-F9-1E-55-47-28-B7-59-72-2B-00-00-00-1F-00-00-00-08-00-00-00-74-65-78-74-2E-74-78-74-E6-8B-FE-EB-40-28-E1-55-4E-44-28-E0-15-8E-13-49-CD-B0-B7-E4-43-40-9D-BA-5D-41-A8-BD-EA-47-07-AD-0E-4A-2F-BA-BD-1F-55-94-D3-6E-77-50-4B-01-02-14-00-14-00-01-00-00-00-F9-1E-55-47-28-B7-59-72-2B-00-00-00-1F-00-00-00-08-00-00-00-00-00-00-00-01-00-20-00-00-00-00-00-00-00-74-65-78-74-2E-74-78-74-50-4B-05-06-00-00-00-00-01-00-01-00-36-00-00-00-51-00-00-00-00-00</p>\n</blockquote>\n"}, {"tags": ["c", "ssl", "openssl", "ssl-certificate"], "answers": [{"tags": [], "owner": {"reputation": 844, "user_id": 1677270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c634cd03921a567ba850d7c53202e3ee?s=128&d=identicon&r=PG", "display_name": "SergA", "link": "https://stackoverflow.com/users/1677270/serga"}, "is_accepted": true, "score": 0, "last_activity_date": 1445449755, "creation_date": 1445449755, "answer_id": 33265994, "question_id": 33265014, "link": "https://stackoverflow.com/questions/33265014/openssl-communication-between-client-and-server/33265994#33265994", "title": "OpenSSL communication between client and server", "body": "<p>You work with pointers incorrectly.</p>\n\n<p>In server part code should be like this:</p>\n\n<pre><code>SSL_read(ssl, &amp;TempValue, sizeof(TempValue));\nTempValue++;\nSSL_write(ssl, &amp;TempValue, sizeof(TempValue));\n</code></pre>\n\n<p>Client part:</p>\n\n<pre><code>SSL_write(ssl, &amp;UserInput, sizeof(UserInput));\nSSL_read(ssl, &amp;ServerOutput, sizeof(ServerOutput));\nprintf(\"UserInput=%d, ServerOutput=%d\\n\", UserInput, ServerOutput);\n</code></pre>\n\n<p>Also read in documentation what should return <a href=\"https://www.openssl.org/docs/manmaster/ssl/SSL_read.html\" rel=\"nofollow\">SSL_read</a> and <a href=\"https://www.openssl.org/docs/manmaster/ssl/SSL_write.html\" rel=\"nofollow\">SSL_write</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3152415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 1, "accepted_answer_id": 33265994, "answer_count": 1, "score": 0, "last_activity_date": 1445449755, "creation_date": 1445446392, "question_id": 33265014, "link": "https://stackoverflow.com/questions/33265014/openssl-communication-between-client-and-server", "title": "OpenSSL communication between client and server", "body": "<p>I have got this assignment of establishing a communication between client and server using openSSL:\n[1] Client --> Server: Prompt to ask the user to input a number X\n[2] Server --> Client: X + 1.\n[3] Client --> Check whether the answer from the server is correct, and output the result. The client\nrepeats step 1.</p>\n\n<p>I have done the following steps but I am getting segmentation fault, can you guys suggest me where I am going wrong</p>\n\n<p><strong>sserver.cc</strong></p>\n\n<pre><code>#include &lt;openssl/ssl.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n\nint main(int argc, char* argv[])\n{\n  if (argc != 4) {\n    printf(\"./exec CertFile KeyFile port\");\n    return -1;\n  }\n\n  char* cert_file = argv[1];\n  char* key_file = argv[2];\n  int port = atoi(argv[3]);\n\n  // init the ssl lib\n  SSL_library_init();\n\n  //SSL_METHOD* method;\n  //SSL_CTX *ctx;\n  OpenSSL_add_all_algorithms();\n  SSL_load_error_strings();\n\n  const SSL_METHOD* method = SSLv3_server_method();\n  SSL_CTX *ctx = SSL_CTX_new(method);\n\n  // load the server's certificate\n  SSL_CTX_use_certificate_file(ctx, cert_file, SSL_FILETYPE_PEM);\n  // load the server's private key\n  SSL_CTX_use_PrivateKey_file(ctx, key_file, SSL_FILETYPE_PEM);\n  // check the private against the known certificate\n  if (!SSL_CTX_check_private_key(ctx)) {\n    printf(\"Private key does not match\\n\");\n    abort();\n  }\n\n  // standard tcp server setup and connection\n  int sd, client;\n  struct sockaddr_in addr;\n  sd = socket(PF_INET, SOCK_STREAM, 0);\n  memset(&amp;addr, 0, sizeof(addr));\n  addr.sin_family = AF_INET;\n  addr.sin_port = htons(port);\n  addr.sin_addr.s_addr = INADDR_ANY;\n  bind(sd, (struct sockaddr*)&amp;addr, sizeof(addr));\n  listen(sd, 10);\n  client = accept(sd, 0, 0);\n\n  SSL* ssl = SSL_new(ctx);\n  SSL_set_fd(ssl, client);\n  SSL_accept(ssl);\n\n  char buf[1024];\n  int buf_size = 1024;\n    int ClientResponse,StoredValue;\n    int TempValue;\n\n  // real work here\n  while(1) {\n\n    // read message from client, plus one, then send back to client\n    //ClientResponse=SSL_read(ssl,(void*)StoredValue,3);\n    ClientResponse=SSL_read(ssl,(void*)buf,buf_size);\n    ClientResponse=ClientResponse+1;\n    SSL_write(ssl,(const void*)ClientResponse,buf_size);\n  }\n\n  client = SSL_get_fd(ssl);\n  SSL_free(ssl);\n  close(sd);\n}\n</code></pre>\n\n<p><strong>sclient.cc</strong></p>\n\n<pre><code>#include &lt;openssl/ssl.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[])\n{\n  if (argc != 3) {\n    printf(\"./exec hostname port\");\n    return -1;\n  }\n\n  char* hostname = argv[1];\n  int port = atoi(argv[2]);\n\n  // init the ssl lib\n  SSL_library_init();\n  printf(\"client...1\\n\");\n\n  //SSL_METHOD* method;\n  SSL_CTX *ctx;\n  OpenSSL_add_all_algorithms();\n  SSL_load_error_strings();\n\n  const SSL_METHOD* method = SSLv3_client_method();\n  ctx = SSL_CTX_new(method);\n\n  // create a standard tcp client\n  int server;\n  struct hostent* host;\n  struct sockaddr_in addr;\n  printf(\"client...2\\n\");\n\n  host = gethostbyname(hostname);\n  server = socket(PF_INET, SOCK_STREAM, 0);\n  memset(&amp;addr, 0, sizeof(addr));\n  addr.sin_family = AF_INET;\n  addr.sin_port = htons(port);\n  addr.sin_addr.s_addr = *(long*)(host-&gt;h_addr);\n  printf(\"client...3\\n\");\n\n  connect(server, (struct sockaddr*)&amp;addr, sizeof(addr));\n  printf(\"client...4\\n\");\n\n  SSL* ssl;\n  ssl = SSL_new(ctx);\n  SSL_set_fd(ssl, server);\n\n  printf(\"client...5\\n\");\n  int sv = SSL_connect(ssl);\n  printf(\"client...6\\n\");\n  printf(\"sv = %d\\n\", sv);\n  if (sv != 1) {\n    printf(\"Can't establish ssl connection with server...\\n\");\n    // send a string to\n    SSL_free(ssl);\n    return -1;\n  }\n    int UserInput,ServerOutput;\n    int StoredValue;\n    int TempValue;\n\n  // real work here\n  while(1) {\n\n    // 1. ask the user to input a random number, and send to server using SSL library\n    printf(\"Enter a number user:\\n\");\n    scanf(\"%d\",&amp;UserInput);\n    TempValue=UserInput;\n    SSL_write(ssl,(const void*)UserInput,TempValue);\n\n    // 2. wait for the response from the server\n\n    // 3. Check if the response is correct or not\n    ServerOutput=SSL_read(ssl,(void*)StoredValue,TempValue);\n    if(ServerOutput==UserInput)\n        printf(\"\\nCorrect %d\",UserInput);\n    else\n        printf(\"\\nFalse\");\n  }\n\n  SSL_free(ssl);\n}\n</code></pre>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1445446476, "post_id": 33264887, "comment_id": 54331177, "body": "Very simply put: a hosted environment means the program runs in/under an OS. Freestanding is for writing an OS."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 1, "creation_date": 1445446805, "post_id": 33264887, "comment_id": 54331374, "body": "@Kninnug: Not only for writing an OS. Embedded systems often have not all features available required for the standard library and/or the added bloat makes no sense. And strictly speaking, gcc for instance is also just a freestanding implementation. It requires a C library like newlib or glibc."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1445447324, "post_id": 33264887, "comment_id": 54331682, "body": "@Kninnug If a program runs in/under an OS, we can say &quot;It runs in a hosted environment&quot;, right? If so, why need not it be provided?"}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1445447461, "post_id": 33264887, "comment_id": 54331765, "body": "@Kninnug The definition of &quot;hosted environment&quot; will be helpful. I&#39;ve search for it, but found nothing."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445447503, "post_id": 33264887, "comment_id": 54331794, "body": "@Olaf that&#39;s why I prefixed it with &#39;very simply&#39; ;). OS-writing was one of the original design goals for C though. And GCC isn&#39;t an execution environment but a translation environment (C11&#167;5.1.1)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1445447841, "post_id": 33264887, "comment_id": 54331950, "body": "@Kninnug: No, gcc provides the (freestanding) <a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.12\" rel=\"nofollow noreferrer\"><i>implementation</i></a> of the C standard. The <i>translation environment</i> is that gcc is running in, e.g. Linux or Windows (see the link). I did not even mention the execution environment."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445449851, "post_id": 33264887, "comment_id": 54333151, "body": "@Olaf fair enough, but the question <i>is</i> talking about execution environments..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1445450478, "post_id": 33264887, "comment_id": 54333504, "body": "@Kninnug: That was the first part for. I primarily wanted to correct/extend your statement that &quot;Freestanding is for writing an OS&quot;. gcc was mostly supplemental information."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445448261, "post_id": 33265471, "comment_id": 54332187, "body": "&quot;some features may not be available.&quot; Yes, for example without any OS <code>malloc</code> etc and <code>free</code> must be implemented in total, having already been assigned a pool of memory to work with, and without being able to request memory from an OS."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445448622, "post_id": 33265471, "comment_id": 54332400, "body": "So an OS is run in a freestanding environment (provided that it is written in C and it&#39;s run on a physical machine), while a program run under/in it is run in a hosted environment?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445448991, "post_id": 33265471, "comment_id": 54332628, "body": "@sunqingyao the OS does not have to be written in C. Nor does any program that runs under it (or without it)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445449270, "post_id": 33265471, "comment_id": 54332805, "body": "@sunqingyao an OS need not run on a physical machine, it might run on a virtual machine. As an example, simulations on a PC of 1980s microcomputers, or more modern PICs. Layers upon layers!"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445449610, "post_id": 33265471, "comment_id": 54333023, "body": "@sunqingyao The <i>program execution</i> happens in a freestanding or hosted environment. Remember that we&#39;re talking about where the C program runs and IOW whether there&#39;s an OS underlying or not. Is that helpful?"}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445449802, "post_id": 33265471, "comment_id": 54333130, "body": "@WeatherVane And programs run in such simulations are run in a hosted environment or a freestanding environment? I think all layers are run in different hosted environments other than the bottom layer, am I right?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445450852, "post_id": 33265471, "comment_id": 54333713, "body": "@sunqingyao go back to the third comment under the question itself (your comment). An OS need not be provided. If not, the program must do everything for itself, with no resources available. If there is an OS, your question quote applies. Don&#39;t get bogged down with semantics."}], "tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 2, "last_activity_date": 1445453710, "last_edit_date": 1445453710, "creation_date": 1445447928, "answer_id": 33265471, "question_id": 33264887, "link": "https://stackoverflow.com/questions/33264887/why-need-not-a-hosted-environment-be-provided/33265471#33265471", "title": "Why need not a hosted environment be provided?", "body": "<blockquote>\n  <p>I'm confused about it, how can I execute a program without an\n  execution environment?</p>\n</blockquote>\n\n<p>\"Hosted\" basically means with an OS underlying. Given the targets C aims to, requiring one could be very limiting, however. Consider many microcontrollers or real-time systems: the only program running is the one you coded, therefore without limitations; that's why it's said to be <em>free-standing</em>.</p>\n\n<p>As N1124 says itself (emphasis mine)</p>\n\n<blockquote>\n  <p>In a freestanding environment (in which C <strong>program execution may take\n  place without any bene\ufb01t of an operating system</strong>)</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Is it implied that a hosted environment is not necessary, while a freestanding environment does?</p>\n</blockquote>\n\n<p>The standard defines the two types of environments the C code is expected to run on along with the requirements for them. Freestanding environments have lower requirements than hosted ones: this could mean that some features may not be available whereas they would instead on hosted environments, which would mean that it's \"necessary\" to have one.</p>\n"}, {"comments": [{"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445468291, "post_id": 33266517, "comment_id": 54342408, "body": "Is it true that any hosted environment is a freestanding environment, since the requirement of the former is more strict?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1445469908, "post_id": 33266517, "comment_id": 54342888, "body": "As there are some requirements for the freestanding environment more relaced, e.g. which function to call at startup and its signature, this is not <b>exactly</b> true. But, apart from those few more restrictive requirements, you can see it as a superset of the freestanding environment, yes. Just see the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2\" rel=\"nofollow noreferrer\">standard</a>, this is quite clear about the requirements."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446362004, "post_id": 33266517, "comment_id": 54706155, "body": "Technically an implementation that provides a <code>malloc</code> which always returns NULL could be a conforming hosted environment"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 1, "creation_date": 1446362034, "post_id": 33266517, "comment_id": 54706160, "body": "@sunqingyao no, hosted means <i>not freestanding</i>. But the requirements for a freestanding implementation are a subset of those for a hosted one."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446387472, "post_id": 33266517, "comment_id": 54711939, "body": "@M.M: I disagree about <code>malloc</code>. A function which by design never returns a memory block does not provide the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.3.4p2\" rel=\"nofollow noreferrer\">functionality</a> as defined by the standard, but returns a constant value. Things are <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.3.5p3\" rel=\"nofollow noreferrer\">different</a> (last sentence) for <code>realloc</code>, however. So you can use a memory allocator which cannot realloc."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 2, "last_activity_date": 1445451660, "creation_date": 1445451660, "answer_id": 33266517, "question_id": 33264887, "link": "https://stackoverflow.com/questions/33264887/why-need-not-a-hosted-environment-be-provided/33266517#33266517", "title": "Why need not a hosted environment be provided?", "body": "<p>The differentiation between a hosted and a freedstanding environment and implementation is the presence of the C standard library. Language features themselves are available for both (except for few optional features).</p>\n\n<p>But <strong>iff</strong> an environment is called \"hosted\", it has to provide the full (library) features as required by the standard. There is no half-way.</p>\n\n<p>A C program written for a hosted environment can expect all mandatory features to be present, thus can use <code>malloc</code>, etc. Once such a feature is missing, e.g. dynamic memory allocation, it is not a hosted environment, but a freestanding. This does not mean the latter cannot supply some of the standard libraries (or some functions of it). Actually, even for a freestanding environment there might be e.g. conversion functions avilable.</p>\n\n<p>So if there is no standard library available, how can a program operate? Simply put: It does not use these functions. Instead, it has to use its own functions to access the underlying hardware or a specialised non-standard library. If you do not have a car, you have to walk, bike or build one on your own. There is no fundamental law you have to use e.g. <code>printf</code>, but can also send the characters to a serial interface directly or call the OS function to send a character to <code>stdout</code>.</p>\n\n<p>Typical scenario are bare-metal (i.e. without a full-grown OS) embedded systems. They often do not need to print characters, but toogle an LED, control a motor, detect a push-button by monitoring a digital input, etc.</p>\n\n<p>As others already mentioned, an OS is another example. Obviously, you cannot expect an OS to be available for the OS - there's no <a href=\"https://en.wikipedia.org/wiki/Turtles_all_the_way_down\" rel=\"nofollow\">turtles all the way down</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446362064, "post_id": 33458703, "comment_id": 54706165, "body": "Can you explain what this has to do with the difference between freestanding and hosted environments?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446398014, "post_id": 33458703, "comment_id": 54715314, "body": "@M.M: The PIC example above is a freestanding environment.  If one were to feed the above code to a PIC compiler, the compiler would generate a little bit of code at address zero to clear out RAM, and aside from that the only code in the chip would be the machine code generated from the above C; most lines would translate into--literally--one instruction except that the write to 0x86 would take 4 (movlw 3 / bsf 3,5 / movwf 6 / bcf 3,5), <code>b=a+1</code> would take two (incf _a,w / movwf _b)&quot;, and <code>while(--b)</code> would take 2 (decfsz _b,f / goto LOOP).  No operating system or anything else to speak of."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446398347, "post_id": 33458703, "comment_id": 54715398, "body": "@M.M: The PIC16C84 falls short of some of the implementation limits for even a freestanding C environment (e.g. I think an implementation is supposed to allow at least one function call with 128 parameters, but with 36 bytes of RAM that would be hard to satisfy), but C is still a very useful language when writing code for that platform.  On the other hand, there are no &quot;command-line arguments&quot; or anything of the sort, since there&#39;s nothing resembling a command line.  The application isn&#39;t launched by an OS--it&#39;s literally the only thing in the machine."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446398880, "post_id": 33458703, "comment_id": 54715557, "body": "@M.M: I just edited the post.  Does that make things clearer?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446421555, "post_id": 33458703, "comment_id": 54722761, "body": "Not really. On hosted implementations you can manipulate hardware resources by writing to particular addresses too (e.g. in MS-DOS, <code>0xB800</code> writes to the screen)."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1446420185, "last_edit_date": 1446420185, "creation_date": 1446345762, "answer_id": 33458703, "question_id": 33264887, "link": "https://stackoverflow.com/questions/33264887/why-need-not-a-hosted-environment-be-provided/33458703#33458703", "title": "Why need not a hosted environment be provided?", "body": "<p>Free-standing environments are used to run programs that are often quite different from the sort of thing many programs encounter.  The following would be an example of a minimal but valid C program which could perform a useful function if compiled for use on a number of PIC processors such as the PIC 16C84 which provide free-standing environments.</p>\n\n<pre><code>// Example of a program for a free-standing environment\nint main(void)\n{\n  unsigned char a;\n  ((unsigned char volatile*)0x86) = 3; // Set port B0 and B1 to output\n  a=0;\n  while(1)\n  {\n    ((unsigned char volatile*)0x6) |= 1; // Output high on B0\n    ((unsigned char volatile*)0x6) &amp;= ~1; // Output low on B0\n    a&amp;=127;\n    b=++a;\n    do\n    {\n      ((unsigned char volatile*)0x6) |= 2; // Output high on B1\n      ((unsigned char volatile*)0x6) &amp;= ~2; // Output low on B1\n    } while(--b);\n  }\n}\n</code></pre>\n\n<p>If one were to compile this program and feed the resulting file into a\ndevice programmer, that would cause the device to, any time it was powered\nup, output a pulse on pin B0, then one on B1, then one on B0, two on B1,\none on B0, three on B1, etc. up to 128 on B1, and then the pattern would\nrepeat.</p>\n\n<p>The above program wouldn't be launched by any sort of operating system--with storage for 1024 instructions and 36 bytes of\nRAM there isn't really room for one.  Instead, the processor will transfer control to a small compiler-generated initialization routine that clears out RAM and then jumps to main, which must then never return.  The lack of an operating system isn't a problem, however, since all the program needs to do is wiggle a couple of I/O pins, and it can do that by writing to the addresses associated with those pins.</p>\n\n<p>In practice, rather than writing code using port addresses, I would use a\ncompiler-supplied header file that defines names for all the I/O registers,\nbut the code is valid without them.  The point of interest is that the above code doesn't call any library functions for its I/O (or call any functions at all for that matter) since hardware will respond to attempts to write addresses 0x86 and 0x06 by altering the condition of some output pins, which is all this application requires.  Aside from less than a dozen instructions of compiler-generated startup code, the only code anywhere in the entire system would be the machine code generated from the above C (about 16 instructions).</p>\n"}], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 33266517, "answer_count": 3, "score": 3, "last_activity_date": 1446420185, "creation_date": 1445445919, "last_edit_date": 1445446550, "question_id": 33264887, "link": "https://stackoverflow.com/questions/33264887/why-need-not-a-hosted-environment-be-provided", "title": "Why need not a hosted environment be provided?", "body": "<p>The C11 standard says:</p>\n\n<blockquote>\n  <p>\u00a75.1.2.2 <strong>Hosted environment</strong><br>\n  A hosted environment need not be provided, but shall conform to the following specifications if present. </p>\n</blockquote>\n\n<p>I'm confused about it, how can I execute a program without an execution environment? Is it implied that a hosted environment is not necessary, while a freestanding environment does?</p>\n"}, {"tags": ["c", "file", "unix", "io", "wildcard"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1445445923, "post_id": 33264741, "comment_id": 54330856, "body": "The wild card will get expanded by the shell - your program won&#39;t see it."}, {"owner": {"reputation": 43, "user_id": 1883412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LU3gn.gif?s=128&g=1", "display_name": "tmbs", "link": "https://stackoverflow.com/users/1883412/tmbs"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1445645185, "post_id": 33264741, "comment_id": 54425088, "body": "I needed to write a program in C type the &#39;GNU grep&#39;, and read the text input. I used the glob () method to it, as indicated by &#39;@Sleafar&#39; and worked well. Example: <a href=\"http://delorie.com/djgpp/doc/libc/libc_426.html\" rel=\"nofollow noreferrer\">delorie.com/djgpp/doc/libc/libc_426.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1406, "user_id": 5114938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d86da9d18d258110186a0cd8659b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Sleafar", "link": "https://stackoverflow.com/users/5114938/sleafar"}, "is_accepted": true, "score": 2, "last_activity_date": 1445446093, "creation_date": 1445446093, "answer_id": 33264929, "question_id": 33264741, "link": "https://stackoverflow.com/questions/33264741/manipulating-input-txt-with-wildcard/33264929#33264929", "title": "Manipulating input .txt with wildcard", "body": "<p>If you call your program from a shell like <code>bash</code> the wildcards are resolved by the shell before the result is passed to your program. If you really need to resolve wildcards in a C program you can use the function <a href=\"http://linux.die.net/man/3/glob\" rel=\"nofollow\">glob()</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 1883412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LU3gn.gif?s=128&g=1", "display_name": "tmbs", "link": "https://stackoverflow.com/users/1883412/tmbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 33264929, "answer_count": 1, "score": 1, "last_activity_date": 1445446093, "creation_date": 1445445431, "last_edit_date": 1445445504, "question_id": 33264741, "link": "https://stackoverflow.com/questions/33264741/manipulating-input-txt-with-wildcard", "title": "Manipulating input .txt with wildcard", "body": "<p>I have a question about manipulating wildcards when these are text entries. \nFor example:</p>\n\n<ol>\n<li><p>have the following command line, where can I get two texts as input. Texts of the directory itself or passes the path of the texts</p>\n\n<pre><code>prog -a text.txt text2.txt\n</code></pre></li>\n<li><p>another option for the command 1 is using wildcard, which is carried out a search in the root directory or spending the directory path </p>\n\n<pre><code>prog - the text * .txt\n</code></pre></li>\n</ol>\n\n<p>I wanted to know if there is any GNU library function that can return me these files or directory of these files when using wildcard as in option 2.</p>\n"}, {"tags": ["c", "arrays", "substring", "wildcard"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1445445430, "post_id": 33264616, "comment_id": 54330560, "body": "Look for the next exclamation mark, when found add one to the iterator, ..."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1445445588, "post_id": 33264616, "comment_id": 54330657, "body": "if user inputs <code>bca</code> what will be the output?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445445990, "post_id": 33264616, "comment_id": 54330901, "body": "Can you post any code where your input matched the array <i>without</i> a wildcard? And subsequent attempt when using a wildcard? If you had got to the first step, you would have posted the big array <code>letter</code> correctly, surely?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445447682, "post_id": 33265028, "comment_id": 54331888, "body": "Should <code>if (!*target) return str</code> be <code>if (!*target) return p1</code> (after reversing the two statements) to avoid compiler warning? Or even <code>return NULL</code>? Or would the function be better to return an index or -1, to satisfy the question without tinkering with the returned pointer?"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1445447994, "post_id": 33265028, "comment_id": 54332030, "body": "@WeatherVane Probably, otherwise it will give false output."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445548723, "post_id": 33265028, "comment_id": 54382040, "body": "result - letter gives the position, but how would I loop this if the target is found later on in the array? I tried using a while (result != NULL) but it still only provides one position"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445552913, "post_id": 33265028, "comment_id": 54383935, "body": "@Rain74 That&#39;d be because you only call StrStr once. You rewrite your loop like <code>while((result = StrStr(letter, &quot;b!d&quot;)) != NULL) {</code> And then you increment <code>letter</code> with <code>position</code>+1 inside the while loop: <code>letter += position+1</code>. That way you will not get the same position if &quot;b!d&quot; is found more than once."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445561032, "post_id": 33265028, "comment_id": 54386139, "body": "@Linus I tried doing it but it give mes an infinite loop, and keeps printing one answer: &quot; the element is found at 60&quot; infinitely."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445562162, "post_id": 33265028, "comment_id": 54386410, "body": "<code>char *result = searchArray(DNA, inputstring);</code> is my code where searchArray is basically the StrStr function you wrote. <code>while((result = searchArray(DNA, inputstring)) != NULL)</code> <code>{ int position = result - DNA; DNA += position+1; printf(&quot; ....&quot;, position);</code> will only give me infinite loop. What am I doing wrong? I can&#39;t figure it out."}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445583039, "post_id": 33265028, "comment_id": 54392004, "body": "@Rain74 You need to make a pointer to DNA first, see my updated answer and please tick the green mark if it helped."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445608148, "post_id": 33265028, "comment_id": 54406644, "body": "@Linus what type is pointer? Like &quot; char* pointer &quot; ? Is char* result I wrote above correct?"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445608985, "post_id": 33265028, "comment_id": 54407246, "body": "@Rain74 yes exactly. Look at my <a href=\"https://ideone.com/aM9b9F\" rel=\"nofollow noreferrer\">example</a> if you&#39;re unsure."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445610218, "post_id": 33265028, "comment_id": 54408174, "body": "@Linus I&#39;m looking at it but I do not know what char(buf) is or what fgets does. (Relatively new with C)"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445611097, "post_id": 33265028, "comment_id": 54408784, "body": "@Rain74 I added some comments explaining the code a bit. If you&#39;re still unsure of what <code>fgets</code> does, <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\">here</a> is where you can read about it."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445614829, "post_id": 33265028, "comment_id": 54411490, "body": "I followed your example, but when I run the program, it executes and immediately finishes. My printf statements don&#39;t even appear."}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445615389, "post_id": 33265028, "comment_id": 54411860, "body": "@Rain74 Can you put your code on something like pastebin so I can take a look at it?"}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445619885, "post_id": 33265028, "comment_id": 54414426, "body": "<a href=\"http://pastebin.com/jdwPkGPk\" rel=\"nofollow noreferrer\">pastebin.com/jdwPkGPk</a> My code is almost complete. I checked with the outputs, only 1 testcase doesn&#39;t work where if the user types TT*, not all elements are reported. 3 of the 7 are printed. I&#39;m not sure if this is due to the searching algorithm or something."}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445620972, "post_id": 33265028, "comment_id": 54415006, "body": "@Rain74 You should use <code>pointer = DNA + position + 1;</code> instead of <code>pointer += position + 1;</code>. Otherwise it will skip over some elements. <a href=\"http://pastebin.com/7fSZVbwC\" rel=\"nofollow noreferrer\">This</a> is how your code should look like now."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445631214, "post_id": 33265028, "comment_id": 54420251, "body": "@Linus thanks so much, it worked. However, if I type G**, why does it still print element 99? element 99 is a G, but there isn&#39;t any more characters after as the array ends, so is this a pointer error?"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445635227, "post_id": 33265028, "comment_id": 54422135, "body": "@Rain74 You probably want to change the parentheses in the <code>searchArray</code> function. You want to change <code>while ((*p1 &amp;&amp; *p2 &amp;&amp; *p1 == *p2) || *p2 == &#39;*&#39;) {</code> to <code>while (*p1 &amp;&amp; *p2 &amp;&amp; (*p1 == *p2 || *p2 == &#39;*&#39;)) {</code>. This will make sure the character isn&#39;t actually a NUL terminator."}, {"owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445705294, "post_id": 33265028, "comment_id": 54439287, "body": "@Linus i used an array instead to scan the letters, why does the program immediately execute without me even entering anything when I run it? <a href=\"http://pastebin.com/A0wmBPCr\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "edited": false, "score": 0, "creation_date": 1445722549, "post_id": 33265028, "comment_id": 54444807, "body": "@Rain74 because you forgot to use curly brackets around the if statement <code>if(dna &lt;= 0)</code>..."}], "tags": [], "owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "is_accepted": true, "score": 0, "last_activity_date": 1445635255, "last_edit_date": 1445635255, "creation_date": 1445446430, "answer_id": 33265028, "question_id": 33264616, "link": "https://stackoverflow.com/questions/33264616/finding-substring-in-a-char-with-wildcard-character/33265028#33265028", "title": "Finding substring in a char[] with wildcard character", "body": "<p>You can implement your own version of <code>strstr</code> which adds a simple extra condition. Let us call the function <code>StrStr</code>.</p>\n\n<pre><code>char* StrStr(const char *str, const char *target) {\n  if (!*target) return NULL;\n  char *p1 = (char*)str;\n  while (*p1) {\n    char *p1Begin = p1, *p2 = (char*)target;\n    while (*p1 &amp;&amp; *p2 &amp;&amp; (*p1 == *p2 || *p2 == '!')) {\n      p1++;\n      p2++;\n    }\n    if (!*p2)\n      return p1Begin;\n    p1 = p1Begin + 1;\n  }\n  return NULL;\n}\n</code></pre>\n\n<p>This will simply test if <code>target</code> is found in <code>str</code> and will compare each character. If the character is a exclamation mark it will ignore if they are different.</p>\n\n<p>You can call it like this and then use <code>result - letter</code> to get the position.</p>\n\n<pre><code>result = StrStr(letter, \"b!d\");\n\nif(result != NULL) {\n  int position = result - letter;\n  printf(\"%d\\n\", position);\n}else {\n  printf(\"-1\\n\");\n}\n</code></pre>\n\n<p>If you want to check for multiple occurences you can make a pointer to letter and then set it equal to the address of <code>letter</code> plus position plus one to check if the substring is found later on in the array.</p>\n\n<pre><code>pointer = letter;\nwhile((result = StrStr(pointer, \"a!c\")) != NULL) {\n  int position = result - letter;\n  pointer = letter + position+1;\n  printf(\"%d\\n\", position);\n}\n</code></pre>\n\n<p>Here is a <a href=\"https://ideone.com/aM9b9F\" rel=\"nofollow\">live</a> example.</p>\n"}], "owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1715, "favorite_count": 0, "accepted_answer_id": 33265028, "answer_count": 1, "score": 0, "last_activity_date": 1445635255, "creation_date": 1445445025, "last_edit_date": 1445446018, "question_id": 33264616, "link": "https://stackoverflow.com/questions/33264616/finding-substring-in-a-char-with-wildcard-character", "title": "Finding substring in a char[] with wildcard character", "body": "<p>I have an array of characters, and once the user enters a string of characters, my program needs to find string of characters in my big array of characters and report its index. However, if there's a wildcard letter such as <code>!</code>, this will represent any character in my array, how would I allow my program to read the <code>!</code> as any letter?</p>\n\n<p>Example:</p>\n\n<pre><code>char letter [] = {a,b,c,d,e,d,s,f,e}\n</code></pre>\n\n<p>If the user enters <code>ab!</code>, the program can interpret it as abc and will return its index value of where <code>abc</code> is found. </p>\n"}, {"tags": ["c", "process", "operating-system", "fork"], "comments": [{"owner": {"reputation": 129197, "user_id": 464988, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2b7216361772f42fefdb90cbc8bd7855?s=128&d=identicon&r=PG", "display_name": "MByD", "link": "https://stackoverflow.com/users/464988/mbyd"}, "edited": false, "score": 1, "creation_date": 1445443615, "post_id": 33264100, "comment_id": 54329431, "body": "<a href=\"http://linux.die.net/man/3/getppid\" rel=\"nofollow noreferrer\">linux.die.net/man/3/getppid</a>"}, {"owner": {"reputation": 2072, "user_id": 2380470, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/42ef03fb39625b4f70d4374ea3900858?s=128&d=identicon&r=PG", "display_name": "Alexis", "link": "https://stackoverflow.com/users/2380470/alexis"}, "edited": false, "score": 0, "creation_date": 1445443618, "post_id": 33264100, "comment_id": 54329434, "body": "getppid in the child ?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1445443731, "post_id": 33264100, "comment_id": 54329516, "body": "Just call getpid() before you call fork() and you&#39;ll get it handed to you on a silver platter."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1445443785, "post_id": 33264100, "comment_id": 54329548, "body": "@HansPassant Thats neat.. :)"}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 5472362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pPvtD.jpg?s=128&g=1", "display_name": "Fawzi", "link": "https://stackoverflow.com/users/5472362/fawzi"}, "edited": false, "score": 0, "creation_date": 1445444414, "post_id": 33264151, "comment_id": 54329930, "body": "well i tried it , and lol that might seems funny , but my program killed my os , my linux machine shuted down"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1445451350, "post_id": 33264151, "comment_id": 54334005, "body": "It&#39;s a bit hard to believe that you could kill it. But if that happened is cause parent pid was 1 (The init process in linux). Are you sure you did it in the child process?"}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "reply_to_user": {"reputation": 337, "user_id": 5472362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pPvtD.jpg?s=128&g=1", "display_name": "Fawzi", "link": "https://stackoverflow.com/users/5472362/fawzi"}, "edited": false, "score": 0, "creation_date": 1445489522, "post_id": 33264151, "comment_id": 54347959, "body": "@CaptainZi That is happening because your parent process is completed even before you call <code>kill</code> on it. I&#39;ll post a detailed answer in sometime if you are not able to figure it out."}, {"owner": {"reputation": 337, "user_id": 5472362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pPvtD.jpg?s=128&g=1", "display_name": "Fawzi", "link": "https://stackoverflow.com/users/5472362/fawzi"}, "edited": false, "score": 0, "creation_date": 1445492134, "post_id": 33264151, "comment_id": 54348668, "body": "so i guess i should wait in the parent process"}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 2, "last_activity_date": 1445443645, "creation_date": 1445443645, "answer_id": 33264151, "question_id": 33264100, "link": "https://stackoverflow.com/questions/33264100/getting-the-id-of-a-parent-process-from-its-child-in-c/33264151#33264151", "title": "Getting the id of a Parent Process from its child in C", "body": "<p>You can use the function <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/getppid.html\" rel=\"nofollow\"><code>getppid()</code></a></p>\n\n<blockquote>\n  <p>getppid() returns the process ID of the parent of the calling process.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "is_accepted": true, "score": 3, "last_activity_date": 1445493487, "last_edit_date": 1495541681, "creation_date": 1445492225, "answer_id": 33274032, "question_id": 33264100, "link": "https://stackoverflow.com/questions/33264100/getting-the-id-of-a-parent-process-from-its-child-in-c/33274032#33274032", "title": "Getting the id of a Parent Process from its child in C", "body": "<p>As Haris mentioned in his <a href=\"https://stackoverflow.com/a/33264151/4042839\">answer</a>, You should use <a href=\"http://linux.die.net/man/3/getppid\" rel=\"nofollow noreferrer\">getppid()</a> to get the <code>pid</code> of the parent.</p>\n\n<hr>\n\n<p>In response to your comment <a href=\"https://stackoverflow.com/questions/33264100/getting-the-id-of-a-parent-process-from-its-child-in-c#comment54329930_33264151\">here</a>,</p>\n\n<blockquote>\n  <p>well i tried it , and lol that might seems funny , but my program killed my os , my linux machine shuted down</p>\n</blockquote>\n\n<p>Let's have a look at your code,</p>\n\n<pre><code>else if (pid==0){ //child\n        sleep(5);\n        printf(\"%s\",\"I am ready to murder my parent!\");\n        kill(//parent id here,SIGINT);\n        printf(\"%s\",\"I am an orphan now\");\n}\nelse{ // parent\n        printf(\"%s\\n\",\"I am the parent\");\n}\n</code></pre>\n\n<p>What will the parent process do after it finishes executing <code>printf(\"%s\\n\",\"I am the parent\");</code> ? It terminates.</p>\n\n<p>So, who is the parent of a process whose original parent has terminated ? The child process becomes an orphan. Quoting from <a href=\"https://en.wikipedia.org/wiki/Orphan_process\" rel=\"nofollow noreferrer\">Wikipedia</a></p>\n\n<blockquote>\n  <p>An orphan process is a computer process whose parent process has finished or terminated, though it remains running itself. In a Unix-like operating system any orphaned process will be immediately adopted by the special init system process.</p>\n</blockquote>\n\n<p>Therefore, when you are invoking <code>kill()</code> you are doing so on the <code>init</code> process. This is the reason for <code>lol that might seems funny , but my program killed my os , my linux machine shuted down</code></p>\n\n<p>Do have a look at <a href=\"https://stackoverflow.com/a/21031583/4042839\">this answer</a>.</p>\n"}], "owner": {"reputation": 337, "user_id": 5472362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pPvtD.jpg?s=128&g=1", "display_name": "Fawzi", "link": "https://stackoverflow.com/users/5472362/fawzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 33274032, "answer_count": 2, "score": 1, "last_activity_date": 1445493487, "creation_date": 1445443485, "question_id": 33264100, "link": "https://stackoverflow.com/questions/33264100/getting-the-id-of-a-parent-process-from-its-child-in-c", "title": "Getting the id of a Parent Process from its child in C", "body": "<p>I am a computer science student , i am curently taking a operating systems course that requires us to work with C \none question that i am trying to solve is the following : </p>\n\n<p>Write a program that forks a child.</p>\n\n<p>The child should sleep for 5 sec.</p>\n\n<p>The child should print \u201cI am ready to murder my parent!\u201d</p>\n\n<p>The child should kill its parent via a signal(use kill(parent_id,SIGINT)).</p>\n\n<p>The child should print \u201cI am an orphan now\u201d.</p>\n\n<p>The parent should wait for the child and print \u201cI am the parent\u201d. </p>\n\n<p>i have tried to solve it using the following code , but i wasnt able to find a way to get the parent's id .any help is appreciated , thanks in advance :) </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n\n\nint main ()\n{\n  pid_t pid =fork();\n\n\n  if (pid&lt;0)\n    {\n      printf(\"%s\\n\",\"Error in forking\");\n    }\n\n  else if (pid==0)//child\n    {\n      sleep(5);\n      printf(\"%s\",\"I am ready to murder my parent!\");\n       kill(//parent id here,SIGINT);\n      printf(\"%s\",\"I am an orphan now\");\n\n\n    }\n  else{ // parent\n\n    printf(\"%s\\n\",\"I am the parent\");\n\n\n\n  }\n  return 0;\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "encryption", "aes"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1445443007, "post_id": 33263877, "comment_id": 54329040, "body": "Welcome to Stack Overflow! Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the <b>desired behavior</b>, a <b>specific problem or error</b> and the <b>shortest code necessary to reproduce</b> it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1445443917, "post_id": 33263877, "comment_id": 54329631, "body": "If your code works fine, why are you asking us?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "edited": false, "score": 0, "creation_date": 1445443943, "post_id": 33263877, "comment_id": 54329645, "body": "What is type of input[][] array? How do you declare it?"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1445444353, "post_id": 33263877, "comment_id": 54329896, "body": "If both <code>j</code> and <code>C1</code> are unsigned int, then <code>j-C1</code> could be an overflow, and <code>(j-C1)%Nb</code> may be wrong. Does it seem possible to you ? What happens if you add a mulitple of Nb ? Could you try something like <code>(j+(C1*Nb-C1))%Nb</code> ?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1445445209, "post_id": 33263877, "comment_id": 54330404, "body": "@francis Good question about the type of <code>j</code>. That may affect the result only if <code>j</code> is signed. In that case the index value may be negative. For unsigned type the overflow gives expected result, since <code>Nb=4</code>. Anyway better to use protection adding <code>Nb</code>: <code>(j + Nb - C) % Nb</code>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1445452713, "post_id": 33263877, "comment_id": 54334727, "body": "If j is a signed value, and  assuming that abs(j-C1) &lt; Nb, then use [(j-C1+Nb)%Nb) to avoid a negative result, or use an unsigned int or size_t for j."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 5472344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-S8sNccD9P6U/AAAAAAAAAAI/AAAAAAAAAII/AXQdesDI_7A/photo.jpg?sz=128", "display_name": "Saleh Faisal", "link": "https://stackoverflow.com/users/5472344/saleh-faisal"}, "is_accepted": false, "score": 0, "last_activity_date": 1445521307, "creation_date": 1445521307, "answer_id": 33282478, "question_id": 33263877, "link": "https://stackoverflow.com/questions/33263877/aes-lookup-tables-implementation/33282478#33282478", "title": "AES Lookup Tables implementation", "body": "<p>I have figured out what was wrong in my code ... :)</p>\n\n<p>i am using the input as an output which affects the results.. All I did to fix it is to use another array as an output and then copy the results back to the input once the round is done. </p>\n\n<p>Thank you guys for trying with me....</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3442839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9549666f080da5e553a2941bd94dddfc?s=128&d=identicon&r=PG&f=1", "display_name": "mojtaba gazmeh", "link": "https://stackoverflow.com/users/3442839/mojtaba-gazmeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1577783749, "creation_date": 1577783749, "answer_id": 59541998, "question_id": 33263877, "link": "https://stackoverflow.com/questions/33263877/aes-lookup-tables-implementation/59541998#59541998", "title": "AES Lookup Tables implementation", "body": "<p>for creating the AES lookup table, you must apply the above code to all of the 256 input states per byte.</p>\n"}], "owner": {"reputation": 39, "user_id": 5472344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-S8sNccD9P6U/AAAAAAAAAAI/AAAAAAAAAII/AXQdesDI_7A/photo.jpg?sz=128", "display_name": "Saleh Faisal", "link": "https://stackoverflow.com/users/5472344/saleh-faisal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1118, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577783749, "creation_date": 1445442896, "last_edit_date": 1445443222, "question_id": 33263877, "link": "https://stackoverflow.com/questions/33263877/aes-lookup-tables-implementation", "title": "AES Lookup Tables implementation", "body": "<p>I am trying to implement the lookup tables in AES encryption (Rijndael). The formula is as follows (<a href=\"http://csrc.nist.gov/archive/aes/rijndael/Rijndael-ammended.pdf\" rel=\"nofollow noreferrer\">based on their paper</a>):</p>\n\n<p><img src=\"https://i.stack.imgur.com/II9a7.png\" alt=\"enter image description here\"></p>\n\n<p>My Code is (for only one round):</p>\n\n<pre><code>for(j = 0; j &lt; 4; ++j)\n    {\n        unsigned int xorOperation;\n        xorOperation  = T_0_enc_2[input[0][j]]\n                      ^ T_1_enc_2[input[1][(j-C1) % Nb]] // Nb = 4, C1 = 1, C2 = 2, C3 = 3\n                      ^ T_2_enc_2[input[2][(j-C2) % Nb]]\n                      ^ T_3_enc_2[input[3][(j-C3) % Nb]];\n\n        xorOperation ^= (w[0][j + (Nb * (i+1))] &lt;&lt;  24)  // w[x] is the key array, (i+1) is the round number\n                      | (w[1][j + (Nb * (i+1))] &lt;&lt;  16)\n                      | (w[2][j + (Nb * (i+1))] &lt;&lt;   8)\n                      | (w[3][j + (Nb * (i+1))]);\n\n        input[0][j] = xorOperation &gt;&gt; 24;\n        input[1][j] = xorOperation &gt;&gt; 16;\n        input[2][j] = xorOperation &gt;&gt;  8;\n        input[3][j] = xorOperation;\n    }\n</code></pre>\n\n<p>the question is:</p>\n\n<p>Does my code map exactly the formula? because when I cipher a plain text with a certain key, I don't get the expected cipher.</p>\n"}, {"tags": ["c", "pointers", "pass-by-reference"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1445441976, "post_id": 33263493, "comment_id": 54328315, "body": "<code>char str[c_size];</code> is not enough to hold a <i>nul-terminated</i> string of length <code>c_size</code>."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1445442089, "post_id": 33263493, "comment_id": 54328392, "body": "<i>What am I doing wrong here?</i> You&#39;re doing nothing to change the place <code>str2</code> points to. You already figured out that you need to change where it points to solve this problem... but context is important too! <code>str_const = str;</code> has no effect on <code>str2</code>, which is in <code>main()</code>s context."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445443361, "post_id": 33263493, "comment_id": 54329264, "body": "&quot;I can modify the location str2 points to&quot; Not if that location is constant. A pointer is not an array or a string (and an array is not a string). Please read about pointers, arrays and string literals in a good C book."}, {"owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445443663, "post_id": 33263493, "comment_id": 54329463, "body": "@Olaf Maybe I should have said &quot;I can change the address that str2 is pointing to, but not the value at the original address.&quot;?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445443850, "post_id": 33263493, "comment_id": 54329600, "body": "<code>str2</code> (use markup!) does not point to an address. All you can change is its own value as given. And <code>str2</code> is still <b>not a string!</b> neither constant nor non-constant! And forget that xor-swapping, which is just more difficult to read/understand. Use a temporary variable and put that into its own function. Making it <code>static</code> will very likely make the compiler inline it automatically. This will not work slower."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1445442221, "creation_date": 1445442221, "answer_id": 33263634, "question_id": 33263493, "link": "https://stackoverflow.com/questions/33263493/modify-const-char-in-c/33263634#33263634", "title": "Modify const char * in C", "body": "<p>The problem here is that you modify the argument passed to <code>reverse_const</code>, but arguments in C are passed <em>by value</em> meaning that they are copied. The variable you modify in the function is a <em>copy</em> of the original pointer, changing a copy will of course not change the original.</p>\n\n<p>C doesn't have <em>pass by reference</em> which is needed here, but it can be <em>emulated</em> by using pointers, in the case of your function you need to pass a pointer to the pointer, then use the dereference operator <code>*</code> to modify what the pointer to pointer points to, and use the address-of operator <code>&amp;</code> when calling the function.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 2, "last_activity_date": 1445442715, "last_edit_date": 1445442715, "creation_date": 1445442268, "answer_id": 33263654, "question_id": 33263493, "link": "https://stackoverflow.com/questions/33263493/modify-const-char-in-c/33263654#33263654", "title": "Modify const char * in C", "body": "<p>When you pass by arguments, the function gets a copy.  <code>str_const = str;</code> assigns to that copy. You could pass a pointer to pointer to be able change the value of a pointer outside of your function, however you're allocating the string copy on the stack, and therefore the string copy becomes invalid once you leave the scope of <code>reverse_const</code> so this wouldn't make sense here. </p>\n\n<p>If you want a string copy that survives the end of the <code>reverse_const</code>, allocate the array with <code>malloc</code> or do both the allocation and the copying with <code>strdup</code>. That you have to return the <code>malloc'ed</code> pointer somehow (by a return value of via a pointer to pointer argument) and the caller will then have the responsibility to <code>free</code> that <code>malloc</code>'ed memory once it's done with it.</p>\n"}, {"comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1445443329, "post_id": 33263819, "comment_id": 54329242, "body": "Any suggestion of using memory allocation without providing details of releasing that allocation is often dangerous to the reader (who likely doesn&#39;t understand dynamic allocations enough to see the full requirements)."}], "tags": [], "owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "is_accepted": false, "score": 2, "last_activity_date": 1445443708, "last_edit_date": 1445443708, "creation_date": 1445442731, "answer_id": 33263819, "question_id": 33263493, "link": "https://stackoverflow.com/questions/33263493/modify-const-char-in-c/33263819#33263819", "title": "Modify const char * in C", "body": "<p>You need to write your function so that you have some way to return the argument modified.</p>\n\n<p>One such solution is <em>pass-by-reference</em>:</p>\n\n<pre><code>void reverse_const(const char **str_const){\n    const char *in = *str_const;\n    char *out = malloc(strlen(in)+1);\n\n    /* write to out */\n\n    *str_const = out;\n}\n</code></pre>\n\n<p>But a better way would be to use the return value:</p>\n\n<pre><code>char *reverse_const(const char *str_const){\n    const char *in = str_const;\n    char *out = malloc(strlen(in)+1);\n\n    /* write to out */\n\n    return out;\n}\n</code></pre>\n\n<p>The return type could be <code>const char *</code>, but that's an unnecessary restriction since you know the returned string may be safely modified.</p>\n\n<p>Note that both examples use <code>malloc</code>. Arrays cannot be passed back, in this manner, in C, as they exist on the stack and are destroyed when the function exits.</p>\n\n<p>Whenever a long-running program uses <code>malloc</code>, there really ought to be a matching <code>free</code> somewhere in the code, or else you'll have a memory leak. It's a pain, but something all C programmers must master.</p>\n"}, {"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1445445089, "post_id": 33263925, "comment_id": 54330323, "body": "I&#39;d like the <code>reverse_const</code> function a lot more if you returned the pointer to the reversed string, rather than overwrite <code>str2</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1445445193, "post_id": 33263925, "comment_id": 54330395, "body": "Agreed, I was just working with the form of the function given and didn&#39;t know if that was subject to change."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1445445684, "post_id": 33263925, "comment_id": 54330707, "body": "@JohnBode - added the return as a second example."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1445445645, "last_edit_date": 1445445645, "creation_date": 1445442993, "answer_id": 33263925, "question_id": 33263493, "link": "https://stackoverflow.com/questions/33263493/modify-const-char-in-c/33263925#33263925", "title": "Modify const char * in C", "body": "<p>If you want the reversed <code>str2</code> back in <code>main()</code>, you will either need to pass an adequately sized buffer to <code>reverse_const</code> to hold the reversed string, or you will need to dynamically allocate storage for it in <code>reverse_const</code> (a local variable length array won't do):</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n...\nvoid reverse_const (const char **str_const)\n{\n    int c_size = strlen (*str_const);\n    char *str = calloc (c_size + 1, sizeof *str);\n    strcpy (str, *str_const);\n    char *c_begin = str, *c_end = str + (c_size - 1);\n\n    int i;\n    for (i = 0; i &lt; c_size / 2; i++) {\n        *c_begin ^= *c_end;\n        *c_end ^= *c_begin;\n        *c_begin ^= *c_end;\n\n        c_begin++;\n        c_end--;\n    }\n\n    *str_const = str;\n    printf (\"%s\\n\", *str_const);\n}\n\nint main (void) {\n\n    char str1[] = \"Indiana\";\n    char *str2 = \"Kentucky\";\n\n    printf (\"TESTS:\\nString 1 pre-reversal: %s\\n\", str1);\n\n    reverse (str1);\n\n    printf (\"String 1 post-reversal: %s\\n\", str1);\n    printf (\"Constant string 2 pre-reversal: %s\\n\", str2);\n\n    reverse_const ((const char **)&amp;str2);\n\n    printf (\"Constant string 2 post-reversal: %s\\n\", str2);\n\n    free (str2);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/revconststr\nTESTS:\nString 1 pre-reversal: Indiana\nString 1 post-reversal: anaidnI\nConstant string 2 pre-reversal: Kentucky\nykcutneK\nConstant string 2 post-reversal: ykcutneK\n</code></pre>\n\n<p><strong>Returning The Pointer</strong></p>\n\n<p>You have an additional option to return the pointer to <code>str</code> to assign to <code>str2</code> in <code>main()</code>. This is more what you would normally expect to see. Let me know if you have any questions:</p>\n\n<pre><code>char *reverse_const2 (const char **str_const)\n{\n    int c_size = strlen (*str_const);\n    char *str = calloc (c_size + 1, sizeof *str);\n    strcpy (str, *str_const);\n    char *c_begin = str, *c_end = str + (c_size - 1);\n\n    int i;\n    for (i = 0; i &lt; c_size / 2; i++) {\n        *c_begin ^= *c_end;\n        *c_end ^= *c_begin;\n        *c_begin ^= *c_end;\n\n        c_begin++;\n        c_end--;\n    }\n\n    //*str_const = str;\n    printf (\"%s\\n\", *str_const);\n\n    return str;\n}\n\nint main (void)\n{\n\n    char str1[] = \"Indiana\";\n    char *str2 = \"Kentucky\";\n\n    printf (\"TESTS:\\nString 1 pre-reversal: %s\\n\", str1);\n\n    reverse (str1);\n\n    printf (\"String 1 post-reversal: %s\\n\", str1);\n    printf (\"Constant string 2 pre-reversal: %s\\n\", str2);\n\n    str2 = reverse_const2 ((const char **)&amp;str2);\n\n    printf (\"Constant string 2 post-reversal: %s\\n\", str2);\n\n    free (str2);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2996, "favorite_count": 1, "accepted_answer_id": 33263925, "answer_count": 4, "score": 0, "last_activity_date": 1445445645, "creation_date": 1445441788, "last_edit_date": 1445444250, "question_id": 33263493, "link": "https://stackoverflow.com/questions/33263493/modify-const-char-in-c", "title": "Modify const char * in C", "body": "<p>I am practicing for interviews. The problem Im currently stuck on is reversing a constant string in C. I know that since str2 is const, I can modify the location str2 points to, but not its value. I have a function below called reverse_const. It will reverse the const char *str_const in place and print it. However, when I try to print st2 after reversal from the main method, the string isn't reversed anymore. Its like reverse_const() is temporarily changing the memory location of str2. What am I doing wrong here?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid reverse(char *str){\n    int c_size = strlen(str);\n    char *c_begin = str, *c_end = str + (c_size - 1);\n\n    int i;\n    for(i = 0; i &lt; c_size / 2; i++){\n        *c_begin ^= *c_end;\n        *c_end ^= *c_begin;\n        *c_begin ^= *c_end;\n\n        c_begin++;\n        c_end--;\n    }\n}\n\nvoid reverse_const(const char *str_const){\n    int c_size = strlen(str_const);\n    char str[c_size];\n    strcpy(str, str_const);\n    char *c_begin = str, *c_end = str + (c_size - 1);\n\n    int i;\n    for(i = 0; i &lt; c_size / 2; i++){\n        *c_begin ^= *c_end;\n        *c_end ^= *c_begin;\n        *c_begin ^= *c_end;\n\n        c_begin++;\n        c_end--;\n    }\n\n    str_const = str;\n    printf(\"%s\\n\", str_const);\n}\n\nint main(){\n    char str1[] = \"Indiana\";\n    char *str2 = \"Kentucky\";\n    printf(\"TESTS:\\nString 1 pre-reversal: %s\\n\", str1);\n    reverse(str1);\n    printf(\"String 1 post-reversal: %s\\n\", str1);\n    printf(\"Constant string 2 pre-reversal: %s\\n\", str2);\n    reverse_const(str2);\n    printf(\"Constant string 2 post-reversal: %s\\n\", str2);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "function"], "comments": [{"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "reply_to_user": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 1, "creation_date": 1445440607, "post_id": 33262979, "comment_id": 54327342, "body": "@ResidentBiscuit the link you pasted is not the answer to this question"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445440893, "post_id": 33262979, "comment_id": 54327560, "body": "Pick a language! These are not recommended declarators in C."}], "answers": [{"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 0, "last_activity_date": 1445440479, "creation_date": 1445440479, "answer_id": 33263042, "question_id": 33262979, "link": "https://stackoverflow.com/questions/33262979/how-can-i-know-which-function-or-file-and-which-line-called-a-function/33263042#33263042", "title": "How can I know which function or file and which line called a function?", "body": "<p>On Linux, you might use <a href=\"http://man7.org/linux/man-pages/man3/backtrace.3.html\" rel=\"nofollow\">backtrace</a> to dump the stack:</p>\n\n<blockquote>\n<pre><code>   backtrace() returns a backtrace for the calling program, in the array\n   pointed to by buffer.  A backtrace is the series of currently active\n   function calls for the program.  Each item in the array pointed to by\n   buffer is of type void *, and is the return address from the\n   corresponding stack frame.  The size argument specifies the maximum\n   number of addresses that can be stored in buffer.  If the backtrace\n   is larger than size, then the addresses corresponding to the size\n   most recent function calls are returned; to obtain the complete\n   backtrace, make sure that buffer and size are large enough.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1445440893, "answer_count": 1, "score": 0, "last_activity_date": 1445440479, "creation_date": 1445440295, "question_id": 33262979, "link": "https://stackoverflow.com/questions/33262979/how-can-i-know-which-function-or-file-and-which-line-called-a-function", "closed_reason": "Duplicate", "title": "How can I know which function or file and which line called a function?", "body": "<p><strong>For example</strong></p>\n\n<pre><code>void MyFunction()\n{\n    printf( \"This function is called by %s in file %s on line $i.\\n\", func, file, line ); // Where func, file and lines should be replaced\n}\n\nint main()\n{\n    MyFunction();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "ternary-operator"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 6, "creation_date": 1445440627, "post_id": 33262920, "comment_id": 54327357, "body": "Why would you <b>ever</b> want to do anything like that?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1445442420, "post_id": 33262920, "comment_id": 54328624, "body": "With gcc 4.9.3:  <code>a = (a &lt; b) ? a++ : b++;</code> reports &quot;warning: operation on &#39;a&#39; may be undefined [-Wsequence-point]&quot;."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1445442776, "post_id": 33262920, "comment_id": 54328902, "body": "relevant: <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\" title=\"undefined behavior and sequence points\">stackoverflow.com/questions/4176328/&hellip;</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1445443704, "post_id": 33262920, "comment_id": 54329490, "body": "More trash code to explain:(("}], "answers": [{"comments": [{"owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1445440648, "post_id": 33262982, "comment_id": 54327367, "body": "why? can you describe please? @haccks"}], "tags": [], "owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "is_accepted": false, "score": 4, "last_activity_date": 1445457745, "last_edit_date": 1445457745, "creation_date": 1445440302, "answer_id": 33262982, "question_id": 33262920, "link": "https://stackoverflow.com/questions/33262920/using-increment-in-ternary-operator-in-c/33262982#33262982", "title": "Using increment in ternary operator in C", "body": "<pre><code>a = (a &lt; b) ? a++ : b++;\n</code></pre>\n\n<p>here, we stored <strong><em>a</em></strong> in a, and then incremented it. But it is like </p>\n\n<pre><code>a = a++; // as a&lt;b\n</code></pre>\n\n<p>which shows undefined behaviour. </p>\n\n<pre><code>a = (a++ &lt; b++) ? a : b;\n</code></pre>\n\n<p>here, a is being incremented at the time of comparison, so now a is 6, which is stored in a.</p>\n"}, {"comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1445440736, "post_id": 33263090, "comment_id": 54327432, "body": "Why would increment and assignment be performed in different order for the two cases?"}, {"owner": {"reputation": 125, "user_id": 5467461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9407dcf629841a100c86880e9b004629?s=128&d=identicon&r=PG&f=1", "display_name": "Pyranth", "link": "https://stackoverflow.com/users/5467461/pyranth"}, "edited": false, "score": 1, "creation_date": 1445440938, "post_id": 33263090, "comment_id": 54327591, "body": "In the first case, a remains 5, it doesn&#39;t increment to 6."}], "tags": [], "owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "is_accepted": true, "score": 2, "last_activity_date": 1445443952, "last_edit_date": 1445443952, "creation_date": 1445440574, "answer_id": 33263090, "question_id": 33262920, "link": "https://stackoverflow.com/questions/33262920/using-increment-in-ternary-operator-in-c/33263090#33263090", "title": "Using increment in ternary operator in C", "body": "<p>Both cases involve undefined behaviour of some sort because you are incrementing <code>a</code>, returning <code>a</code> and assigning to <code>a</code> on the left side within 2 sequence points. 3 would be required for a clearly defined result.</p>\n\n<p>In this case :\n<code>a = (a &lt; b) ? a++ : b++;</code></p>\n\n<ol>\n<li>if <code>a</code> is smaller than <code>b</code></li>\n<li><code>a</code> is returned (value = 5) as the result of the ternary operator</li>\n<li><code>a</code> is incremented (value = 6).</li>\n<li>the result of the ternary operator (5) is assigned to the left hand side variable <code>a</code> (over-writing 6)</li>\n</ol>\n\n<p>The order of steps 3 and 4 is not defined. It is equivalent to <code>a = a++;</code></p>\n\n<p>In this case :\n<code>a = (a++ &lt; b++) ? a : b;</code></p>\n\n<ol>\n<li>If <code>a</code> is smaller that <code>b</code></li>\n<li><code>a</code> and <code>b</code> are incremented (regardless which is smaller)</li>\n<li><code>a</code> is returned as the result of the ternary operator</li>\n<li>it is assigned to the left hand side variable <code>a</code></li>\n</ol>\n\n<p>The order of steps 2 and 3 is not clearly defined.</p>\n\n<p>It's important to keep track of sequence points in such cases. Relevant rules :</p>\n\n<ul>\n<li>The 1st expression of ternary operator on the left of <code>?</code> is sequenced before the 2nd or 3rd expressions. And either of them is sequenced before assignment.</li>\n<li>The comparison is sequenced before the <code>?</code></li>\n<li>In expressions like <code>a++</code> the value is returned before incrementing</li>\n</ul>\n\n<p>Undefined behaviour:</p>\n\n<ul>\n<li>In expressions like <code>a = a++;</code> there is no sequence point between (post)incrementing <code>a</code> and assigning to <code>a</code> on the left side. Both happen after the original value of <code>a</code> is returned</li>\n<li>In expressions like <code>a++ ? a : b</code> there is no sequence point between (post)incrementing <code>a</code> and returning <code>a</code> from the ternary operator. Both happen after the <code>?</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 1, "last_activity_date": 1445442866, "creation_date": 1445442866, "answer_id": 33263864, "question_id": 33262920, "link": "https://stackoverflow.com/questions/33262920/using-increment-in-ternary-operator-in-c/33263864#33263864", "title": "Using increment in ternary operator in C", "body": "<p>The one line that gives you the unexpected result has an error: you are not allow to modify an object (here <code>a</code>) twice in the same expression without separating them by a \"sequence point\". </p>\n\n<p>The <code>?</code> in the other one is a sequence point, so that one works.</p>\n\n<p>If you do so (modify twice without sequence point) the behavior of your program becomes undefined. That is you can't make any reasonable assumption of what the program should produce and thus you see some unexpected results that even will vary according to the compiler and its version.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1445447581, "creation_date": 1445447581, "answer_id": 33265367, "question_id": 33262920, "link": "https://stackoverflow.com/questions/33262920/using-increment-in-ternary-operator-in-c/33265367#33265367", "title": "Using increment in ternary operator in C", "body": "<p>From the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">horse's mouth</a>:</p>\n\n<blockquote>\n<strong>6.5 Expressions</strong><br>\n...<br>\n2 If a side effect on a scalar object is unsequenced relative to either a different side effect\non the same scalar object or a value computation using the value of the same scalar\nobject, the behavior is undefined. If there are multiple allowable orderings of the\nsubexpressions of an expression, the behavior is undefined if such an unsequenced side\neffect occurs in any of the orderings.<sup>84)</sup>\n<hr>\n<sup>\n84) This paragraph renders undefined statement expressions such as<pre><code>    i = ++i + 1;\n    a[i++] = i;</code></pre>\nwhile allowing<pre><code>    i = i + 1;\n    a[i] = i;</code></pre>\n</sup>\n</blockquote>\n\n<blockquote>\n<strong>6.5.15 Conditional operator</strong><br>\n...<br>\n4 The first operand is evaluated; <strong>there is a sequence point between its evaluation and the\nevaluation of the second or third operand (whichever is evaluated)</strong>. The second operand\nis evaluated only if the first compares unequal to 0; the third operand is evaluated only if\nthe first compares equal to 0; the result is the value of the second or third operand\n(whichever is evaluated), converted to the type described below.<sup>110)</sup>\n<hr>\n<sup>110) A conditional expression does not yield an lvalue.\n</sup>\n</blockquote>\n\n<blockquote>\n<strong>6.5.16 Assignment operators</strong><br>\n...<br>\n3 An assignment operator stores a value in the object designated by the left operand. An\nassignment expression has the value of the left operand after the assignment,<sup>111)</sup> but is not\nan lvalue. The type of an assignment expression is the type the left operand would have\nafter lvalue conversion. The side effect of updating the stored value of the left operand is\nsequenced after the value computations of the left and right operands. <strong>The evaluations of\nthe operands are unsequenced.</strong>\n<hr>\n<sup>111) The implementation is permitted to read the object to determine the value but is not required to, even\nwhen the object has volatile-qualified type.</sup>\n</blockquote>\n\n<p>In the expression</p>\n\n<pre><code>a = (a &lt; b ) ? a++ : b++\n</code></pre>\n\n<p>there is a sequence point between the evaluation of <code>(a &lt; b)</code> and <code>a++</code>, but there is no sequence point between the evaluation of <code>a</code> on the LHS of the <code>=</code> operator and <code>a++</code>; thus, the behavior is undefined.</p>\n\n<p>In the expression</p>\n\n<pre><code>a = (a++ &lt; b++) ? a : b\n</code></pre>\n\n<p>there is a sequence point between <code>(a++ &lt; b++)</code> and the <code>a</code> on the RHS of the <code>?</code> operator, but there's no sequence point between the <code>a</code> on the LHS of the <code>=</code> operator and <code>(a++ &lt; b++)</code>; again, the behavior is undefined.  </p>\n"}], "owner": {"reputation": 125, "user_id": 5467461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9407dcf629841a100c86880e9b004629?s=128&d=identicon&r=PG&f=1", "display_name": "Pyranth", "link": "https://stackoverflow.com/users/5467461/pyranth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2664, "favorite_count": 5, "accepted_answer_id": 33263090, "answer_count": 4, "score": 9, "last_activity_date": 1445457745, "creation_date": 1445440101, "last_edit_date": 1445441243, "question_id": 33262920, "link": "https://stackoverflow.com/questions/33262920/using-increment-in-ternary-operator-in-c", "title": "Using increment in ternary operator in C", "body": "<p>For the example, after I use</p>\n\n<pre><code>int a = 5, b = 6;\nx = (a &lt; b) ? a++ : b++;\n</code></pre>\n\n<p>x gets the value of a, which is 5, and a increments to 6, which is expected.</p>\n\n<p>When I use</p>\n\n<pre><code>a = (a &lt; b) ? a++ : b++;\n</code></pre>\n\n<p>After this line, a still remains 5.</p>\n\n<p>But</p>\n\n<pre><code>a = (a++ &lt; b++) ? a : b;\n</code></pre>\n\n<p>a is now 6.</p>\n\n<p>Why is this happening and why isn't increment operator executed in the first case?</p>\n\n<p>EDIT: Just to clarify, I'm asking why this happens when I'm using these lines separately, one by one, not all three in the same time.</p>\n"}, {"tags": ["c", "opengl", "struct", "include"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 3, "creation_date": 1445440454, "post_id": 33262877, "comment_id": 54327235, "body": "your error message doesn&#39;t match your code -- notice how <code>2D</code> is differently capitalized! You will need to make double sure you don&#39;t have typos. Try to make a minimal example. Try to omit <code>struct</code> inside of <code>sizeof()</code>"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1445440742, "post_id": 33262877, "comment_id": 54327435, "body": "@MarcusM&#252;ller Removing <code>struct</code> from <code>sizeof</code> probably won&#39;t work, because OP hasn&#39;t <code>typedef</code>&#39;d any of his structs."}, {"owner": {"reputation": 807, "user_id": 946799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01edb82b84877f2632415c0296e6c375?s=128&d=identicon&r=PG", "display_name": "Pihhan", "link": "https://stackoverflow.com/users/946799/pihhan"}, "edited": false, "score": 0, "creation_date": 1445441109, "post_id": 33262877, "comment_id": 54327707, "body": "What compiler do you use? What include paths and flags? Does it omit some warnings about invalid paths for example? Can you enable more warnings? I think relative include paths may be a problem."}, {"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1445441177, "post_id": 33262877, "comment_id": 54327751, "body": "i didn&#39;t typedefs yet since it&#39;s very low level stuff at this moment. There are no file path errors. I am using vim &amp; youcompleteme."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445444137, "post_id": 33262877, "comment_id": 54329750, "body": "The error message complains that at the point where the error occurs, the full declaration of type <code>struct renderable_2d</code> is not visible.  Of course, as  Marcus M&#252;ller observed, that doesn&#39;t match up with your code (identifiers are case-sensitive).  There&#39;s not much more we can say, as we can hardly divine what is the actual source code."}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445439995, "creation_date": 1445439995, "question_id": 33262877, "link": "https://stackoverflow.com/questions/33262877/c-header-files-include-statements-and-dependencies", "title": "C header files #include statements and dependencies", "body": "<p>This is a question that I have been reading a lot about but I am still unclear how things work as I am getting building errors or incomplete type lint errors.</p>\n\n<p>I have a project requiring opengl that I am writing low level opengl function, then I want to build on top of those translation [here after referred to as TU] units to build more higher level TU.</p>\n\n<p>for example.</p>\n\n<p>I have a common_structs.h that defines a few things like this:</p>\n\n<pre><code>common_structs.h\n#ifndef COMMON_STRUCTS_H\n#define COMMON_STRUCTS_H\n\n#include &lt;OpenGL.h&gt;\n\nstruct renderable_2D {\n    ...\n    float angle;\n    GLshort vertex_count;\n    GLfloat vertices[12];\n    GLfloat colors[16];\n    GLshort indices[6];\n    GLfloat tex_coords[8];\n    ...\n};\n\nstruct texture_2D {\n    ...\n    GLuint texture_id;\n    ...\n};\n\nstruct default_shader {\n    const char* vertex_shader_srouce;\n    const char* fragment_shader_source;\n    GLuint shader_program;\n};\n\nstruct camera_2D {....};\n\n#endif /* COMMON_STRUCTS_H */\n</code></pre>\n\n<p>I declared these structs in their own header file to avoid circular dependencies.\nThis file isn't compiled but I need to <code>#include opengl</code> to clear the lint warnings for the GLtypes.\nNext up there are header and source TU that implement the functionality for these types. Typically</p>\n\n<p>Let's look at renderable_2D for example:</p>\n\n<pre><code>#ifndef RENDERABLE_2D_H\n#define RENDERABLE_2D_H\n\n#include \"../../common/common_structs.h\" //include the definition of renderable_2d\n\nstruct renderable_2D* ren2d_new(void);\nstruct renderable_2D* ren2d_set_uv(struct renderable_2D* out, const float uv[]);\nstruct renderable_2D* ren2d_set_tint(struct renderable_2D* out, const float r,\n                                     const float g, const float b,\n                                     const float a);\nstruct renderable_2D* ren2d_set_alpha(struct renderable_2D* out, const float a);\nstruct renderable_2D* rend2d_set_z_index(struct renderable_2D* out,\n                                         const int index);\nstruct renderable_2D* rend2d_set_angle(struct renderable_2D* out,\n                                          const float angle);\n\n#endif /* RENDERABLE_2D_H */\n</code></pre>\n\n<p>and the some of the source file for this:</p>\n\n<pre><code>#include \"../headers/renderable_2D.h\"\n#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>this file includes the header and implement the functions. Next there's one more header only file.</p>\n\n<p>core_graphics.h</p>\n\n<pre><code>#ifndef CORE_GRAPHICS_H\n#define CORE_GRAPHICS_H\n\n\n#include \"renderable_2D/headers/renderable_2D.h\"\n#include \"default_shader/headers/default_shader_2D.h\"\n#include \"default_camera_2D/headers/default_camera_2D.h\"\n\n#endif /* CORE_GRAPHICS_H */\n</code></pre>\n\n<p>this is a header only TU again and will include all the sub TU that make up this part of the library. It's supposed to be built as a shared library so next up the ladder is another shared library that will \n<code>#include core_graphics/core_graphics.h</code></p>\n\n<p>this is where the problem comes in. Say I have another TU main.c, main looks like this.</p>\n\n<p>main.c</p>\n\n<pre><code>#include \"core_graphics/core_graphics.h\"\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[])\n{\n   struct renderable_2D* rend = (struct renderable_2D*)calloc(1, sizeof(struct renderable_2D));\n   return 0;\n}\n</code></pre>\n\n<p>the line where I try to calloc the struct I get lint errors saying </p>\n\n<pre><code>invalid application of 'sizeof' to an incomplete type 'struct renderable_2d'\n</code></pre>\n\n<p>now incomplete types says it cant find the definition of the struct renderable_2D but, from the source listed above, should it get included?</p>\n\n<p>core_graphics.h has the definition of common_structs.h which holds the definition of the struct?</p>\n\n<p>struct renderable_2D --> common_structs.h --> core_graphics.h --> main.c</p>\n"}, {"tags": ["c++", "c", "windows", "drop-down-menu", "win32gui"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1445440202, "post_id": 33262811, "comment_id": 54327018, "body": "Doesn&#39;t an empty drop-down menu feel strange? I would not be surprised if it actually violated some Windows design guideline."}], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 5440504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe47f914866496c6553ae875778c9aae?s=128&d=identicon&r=PG&f=1", "display_name": "clq", "link": "https://stackoverflow.com/users/5440504/clq"}, "is_accepted": false, "score": 0, "last_activity_date": 1445440046, "creation_date": 1445440046, "answer_id": 33262896, "question_id": 33262811, "link": "https://stackoverflow.com/questions/33262811/windows-control-drop-down-list-still-show-a-blank-after-clear-all-items/33262896#33262896", "title": "Windows Control: drop down list still show a blank after clear all items", "body": "<p>You should probably first clear and then add.</p>\n"}], "owner": {"reputation": 182, "user_id": 1048811, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/izHcn.png?s=128&g=1", "display_name": "Sonny", "link": "https://stackoverflow.com/users/1048811/sonny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445476331, "creation_date": 1445439818, "last_edit_date": 1445476331, "question_id": 33262811, "link": "https://stackoverflow.com/questions/33262811/windows-control-drop-down-list-still-show-a-blank-after-clear-all-items", "title": "Windows Control: drop down list still show a blank after clear all items", "body": "<p>I create a drop down list using pure Win32 api. First it's empty(when click, no blank rect occur), then I add 10 items into it, then clear all of them. When I click the drop down list, it show a big blank rect. </p>\n\n<p>Does anyone know how to solve it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/5stfr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5stfr.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/JGWj1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JGWj1.png\" alt=\"after insert items\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ABJ5o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ABJ5o.png\" alt=\"blank drop down list\"></a> </p>\n"}, {"tags": ["c++", "c"], "owner": {"reputation": 49, "user_id": 5471990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1be2b9235a0555fd095d3df50adc74?s=128&d=identicon&r=PG&f=1", "display_name": "LucaDaf", "link": "https://stackoverflow.com/users/5471990/lucadaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1445439760, "creation_date": 1445439760, "last_edit_date": 1592644375, "question_id": 33262793, "link": "https://stackoverflow.com/questions/33262793/cc3100-p2p-application-256-type-name-is-not-allowed", "title": "CC3100 p2p application, 256 type name is not allowed", "body": "<p>I'm working on a p2p sample application of texas instrument, working with cc3100 and MSP430ff5529.\nSo we are speaking about a connection between android and the cc3100.</p>\n<p>to know, CLI is just to write on the console</p>\n<p>Here is my problem, after some manipulation the program enters in this function LOOP_FOREVER</p>\n<pre><code>/* Stop the CC3100 device */\nretVal = sl_Stop(SL_STOP_TIMEOUT);\nif(retVal &lt; 0)\n    LOOP_FOREVER();\n</code></pre>\n<p>LOOP_FOREVER is this function</p>\n<pre><code>#define LOOP_FOREVER() \\\n            {\\\n                while(1); \\\n            }\n</code></pre>\n<p>so it is blocked.\nI changed with a new function, which should do something if an event appears(like disconnect or something like this), I'm not sure it works because I can't build it.\nThis is how i modified the program</p>\n<pre><code>CLI_Write(&quot; stop device \\n\\r&quot;);\n  /* Stop the CC3100 device */\n    retVal = sl_Stop(SL_STOP_TIMEOUT);\n    if(retVal &lt; 0) function1(&amp;SlWlanEvent_t);\n    //  LOOP_FOREVER();\n    return 0;\n</code></pre>\n<p>this is the function</p>\n<pre><code>void function1(void* handle)\n{SlWlanEvent_t* oref=(SlWlanEvent_t*) handle;\n    CLI_Write(&quot; mia funzione \\n\\r&quot;);\n    _u32 EventParam = oref-&gt;Event;\n    while(oref-&gt;Event == EventParam);}\n</code></pre>\n<p>and this is the structure I call</p>\n<pre><code>typedef struct\n{\n   _u32     Event;\n   SlWlanEventData_u        EventData;\n} SlWlanEvent_t;\n</code></pre>\n<p>The problem is when I call the function.</p>\n<h1>256 type name is not allowed   main.c  /p2p    line 538    C/C++ Problem</h1>\n<p>I tryed to change it:</p>\n<pre><code>if(retVal &lt; 0) function1(&amp;SlWlanEvent_t);\n\nif(retVal &lt; 0) function1(SlWlanEvent_t);\n\nif(retVal &lt; 0) function1(*SlWlanEvent_t);\n</code></pre>\n<p>but noone of this works, can you help me fix this?\nI need to modify my program more than this but I'm not a genius of programmation so I go step by step.</p>\n<p>Thank you</p>\n<p>Luca</p>\n"}, {"tags": ["c", "printf", "output", "system-calls"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1445439069, "post_id": 33262499, "comment_id": 54326144, "body": "TL;DR! Please narrow down the code to just the parts you have problem with. Or better yet, please make a <a href=\"http://stackoverflow.com/help/mcve\"><b>Minimal</b>, Complete, and Verifiable Example</a> to show us."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1445439078, "post_id": 33262499, "comment_id": 54326149, "body": "Is there any reason why you didn&#39;t use <code>strncmp</code> to test for the occurrence of <code>w</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445439186, "post_id": 33262499, "comment_id": 54326233, "body": "But in the parts I <i>did</i> read I see some <i>undefined behavior</i> almost immediately. You treat the array <code>w</code> as a string, but you seem to forget that strings in C are <i>terminated</i>, and the array <code>w</code> does not have this terminator, so when you e.g. call <code>strlen</code> it will go out of bounds and you will have UB."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1445439480, "post_id": 33262499, "comment_id": 54326472, "body": "Use <code>char w[]=&quot;Hello&quot;;</code> instead of <code>char w[]={&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;};</code>. This is more readable and (most important in your case), it adds a zero terminator. See comments before."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1445440919, "post_id": 33262499, "comment_id": 54327577, "body": "You forgot to ask a question. Is your question &quot;How do you debug C code?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1445443967, "post_id": 33263064, "comment_id": 54329659, "body": "What do you mean by buffer[i] = 0x0?"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1445444546, "post_id": 33263064, "comment_id": 54330012, "body": "@Raghad Inside the first <code>if</code> <i>condition</i>, it checks if the read character was a null character. Inside the <code>if</code> <i>scope</i> it sets the last character to a null terminated byte - that way, we effectively remove the <code>\\n</code> that was read into <code>buffer[i]</code>."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446217524, "post_id": 33263064, "comment_id": 54666059, "body": "How do I know if the word I&#39;m looking for is in the middle or the end of the buffer?"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446217660, "post_id": 33263064, "comment_id": 54666134, "body": "@Raghad You&#39;ll have to parse the line character by character doing <code>strncmp</code> in each part to find. This version only looks for matches in the beginning of the string."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446217743, "post_id": 33263064, "comment_id": 54666184, "body": "@Raghad Instead of testing for the ocurrency of words only after newlines, keep a buffer of what you have already read, then compare against that buffer."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446218648, "post_id": 33263064, "comment_id": 54666819, "body": "You mean that I create another buffer to store the word I&#39;ve read and compare it to the other buffer?"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446219605, "post_id": 33263064, "comment_id": 54667450, "body": "@Raghad If you want to search within the line, you must hold at least the amount of bytes being compared. I suggest you read the line and then use <a href=\"http://man7.org/linux/man-pages/man3/strstr.3.html\" rel=\"nofollow noreferrer\">strstr</a> for simplicity."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446221074, "post_id": 33263064, "comment_id": 54668458, "body": "I changed the while-loop condition to rio_readn(fd, &amp;buffer, 152) to read line by line. and used strstr in if-statement. if((chr=strstr(buffer,w))!=NULL){ printf(&quot;w was found in line %d\\n&quot;, line); puts(buffer); found++;} but it prints the whole file content not just the first line."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446221254, "post_id": 33263064, "comment_id": 54668592, "body": "@Raghad <code>buffer</code> is gonna have 152 bytes at max. So that probably means your file is 152 bytes. To strip things line by line you&#39;ll need to detect <code>\\n</code> characters. Also, I have no idea what <code>rio_readn</code> does, but I&#39;m guessing it reads the whole file, not line by line."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446223192, "post_id": 33263064, "comment_id": 54669832, "body": "I changed again to read(fd,&amp;buffer,152) to read line by line. but it still reads several lines cus the line might be less than 152. how do I stop it till the \\n? And I also used   if((chr=strstr(buffer,w))!=NULL){ printf(&quot;w was found in line %d\\n&quot;, line); puts(buffer); found++;}"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446223556, "post_id": 33263064, "comment_id": 54670085, "body": "@Raghad If you want to read line by line, use <a href=\"http://man7.org/linux/man-pages/man3/fgets.3.html\" rel=\"nofollow noreferrer\">fgets</a>. <code>read</code> will read <code>count</code> bytes, it doesn&#39;t care what character it is."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446223598, "post_id": 33263064, "comment_id": 54670114, "body": "@Raghad Note that to use <code>fgets</code> you&#39;ll need a file descriptor returned by <code>fopen</code>. You can&#39;t use the <code>fd</code> returned by an <code>open</code> call."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446228217, "post_id": 33263064, "comment_id": 54672708, "body": "I can&#39;t use fgets and fopen. I have to use systemcalls"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446228299, "post_id": 33263064, "comment_id": 54672761, "body": "@Raghad Right, I forgot about that. So, have a buffer called <code>line</code> where you store your information. When you find a <code>\\n</code> character you know you just finished reading the line, then you use <code>strstr</code> on that buffer."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446232096, "post_id": 33263064, "comment_id": 54674713, "body": "I have another question, why do I get a segmentation fault every time before the code terminates?"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446232161, "post_id": 33263064, "comment_id": 54674749, "body": "@Raghad Maybe you&#39;re trying to free some memory you shouldn&#39;t. Or writing somewhere you can&#39;t... Hard to say without looking at code. Ah, Please upvote my answer if I helped. ;)"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446233384, "post_id": 33263064, "comment_id": 54675333, "body": "@Raghad Sure, you can use CodePad, PasteBin, Ideone, Git, or something like that..."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446241420, "post_id": 33263064, "comment_id": 54678947, "body": "Yep. thanks. but I&#39;m having a problem reading a huge file (over 5 GB). It says that it can&#39;t allocate memory and the program is too slow"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446241702, "post_id": 33263064, "comment_id": 54679037, "body": "@Raghad Don&#39;t allocate 5GB to load a file, instead, read it in <i>chunks</i>. For instance, make your own &quot;fgets&quot;, say, &quot;file_gets&quot;, that will read into a buffer until a newline is found. Have that buffer be one chunk large, for instance, 4096 bytes (I don&#39;t think your file has a line with more than 4096 bytes, does it?). Then you can abstract away the <code>read</code> system call and use your own function that reads lines. Again, don&#39;t try to allocate 5GB of memory to load and parse a file."}, {"owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "edited": false, "score": 0, "creation_date": 1446241792, "post_id": 33263064, "comment_id": 54679063, "body": "I know that I have to get the size of the file and then decrement the buffer size from the file size each time. so I can reach the end of the file"}], "tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": true, "score": 4, "last_activity_date": 1445440508, "creation_date": 1445440508, "answer_id": 33263064, "question_id": 33262499, "link": "https://stackoverflow.com/questions/33262499/reading-files-using-system-calls-and-printing-lines/33263064#33263064", "title": "Reading files using system calls and printing lines", "body": "<ol>\n<li>I suggest you read some C material. You code suggests you don't know much about the language yet. </li>\n<li>I won't change your code, since that'd be hard.</li>\n<li>I'll post the relevant parts of my code and explain the bits.</li>\n</ol>\n\n<hr>\n\n<p>So, the code bits:</p>\n\n<pre><code>const char fname[] = \"hello.txt\";\nconst char w[] = \"hello\";\n\n(...)    \n\nwhile (read(fd, &amp;buffer[i], 1) == 1) {\n    /* end of line */\n    if (buffer[i] == '\\n' || buffer[i] == 0x0) {\n        buffer[i] = 0;\n        if (!strncmp(buffer, w, strlen(w))) {\n            printf(\"w was found in line %d\\n\", line);\n            puts(buffer);\n            n++;\n        }\n        line++;\n        i = 0;\n        continue;\n    }\n    i++;\n}\n</code></pre>\n\n<hr>\n\n<h2>Explanation</h2>\n\n<ol>\n<li><p><strong><code>while (read(fd, &amp;buffer[i], 1) == 1)</code></strong>: \nThis will read one character from your <code>fd</code> (which was returned by an earlier <code>open</code> call) and store that at buffer[i]. The relevant thing to note here is that before this you should have declared <code>int i = 0</code> and make sure <code>buffer</code> is either a defined array or a <code>malloc</code>ed memory region. This <code>while</code> will go on until the amount of bytes read is different than 1 (which was what we asked for).</p></li>\n<li><p><strong><code>if (buffer[i] == '\\n' || buffer[i] == 0x0)</code></strong>: This <code>if</code> detects an end of line. Pretty straight-forward.</p></li>\n<li><p><strong><code>buffer[i] = 0;</code></strong> and <strong><code>if (!strncmp(buffer, w, strlen(w)))</code></strong>: <code>buffer[i] = 0</code> will set the last character of the current buffer to zero. What this does is it gets rid of the last <code>\\n</code> we read, so we can print it nicely with <code>puts</code>. The bit I suggested in the comments is the use of <a href=\"http://man7.org/linux/man-pages/man3/strncmp.3.html\" rel=\"nofollow\">strncmp</a>. This function is just like <code>strcmp</code>, but it will only compare <em>at most</em> a defined number of bytes. So, with this function, you can effectively determine if a string starts with the substring you're looking for. If this string is found, we print the line in which it is, print the buffer itself and increment <code>n</code>, which is our counter on how many times <code>w</code> was found. You should have declared <code>int n = 0;</code> in the beginning of the code...</p></li>\n<li><p><strong><code>line++; i = 0; continue;</code></strong> :This is inside the end-of-line detection <code>if</code>. So, what this does is it increments our line counter, sets <code>i</code> to zero - this is important, because at a new line we're gonna read a new buffer, and that buffer index must start at 0. And <code>continue</code> forces a loop repetition without executing the rest of the code.</p></li>\n<li><p>Finally, the rest of the <code>while</code> scope is defined as <strong><code>i++</code></strong>. As our while loop executes at every character, the buffer index must get incremented after every character read.</p></li>\n</ol>\n\n<hr>\n\n<p>The file I tested with is the one you provided. The output I got was:</p>\n\n<pre><code>w was found in line 1\nhello\nw was found in line 2\nhello world\nw was found in line 6\nhello\nw was found 3 times\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4592286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WdCS5.jpg?s=128&g=1", "display_name": "Raghad", "link": "https://stackoverflow.com/users/4592286/raghad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10869, "favorite_count": 5, "accepted_answer_id": 33263064, "answer_count": 1, "score": 0, "last_activity_date": 1445441133, "creation_date": 1445438907, "last_edit_date": 1445441133, "question_id": 33262499, "link": "https://stackoverflow.com/questions/33262499/reading-files-using-system-calls-and-printing-lines", "title": "Reading files using system calls and printing lines", "body": "<p>This program reads a text file \"hello.txt\" and looks for the occurrence of the string w in it and prints the number of the line and the whole line. It also prints how many times the string w has occurred in the file. The program compiles with no errors, here is the code:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n\n    int fd;\n    char c;\n    char str[152];\n    int i = 0, j = 0;\n    int bytesread;\n    int flag = 1;\n    int found = 0;\n    int line = 1;\n    int foundflag = 1;\n\n    char w[] = {'h', 'e', 'l', 'l', 'o'};\n    int len = strlen(w);\n\n    if ((fd = open(\"hello.txt\", O_RDONLY, 0)) != -1) { //if 1\n\n        bytesread = read(fd, &amp;c, 1);\n        str[j] = c;\n        j++;\n\n        if (bytesread != -1) { //if 2\n\n            while (bytesread != 0) { //while\n\n                if (c == '\\n')\n                    line++;\n\n                if (c == w[i]) { //if 3\n                    i++;\n                    flag = 0;\n                } else if (flag == 0 || i == len) //end of f3\n                { // else 3\n                    i = 0;\n                    flag = 1;\n                }// end of else 3\n                else if (flag == 1) {\n                    while (read(fd, &amp;c, 1)) {\n                        str[j] = c;\n                        j++;\n                        if (c == ' ')\n                            break;\n                        if (c == '\\n') {\n                            line++;\n                            break;\n                        }\n                    }\n                }\n\n                bytesread = read(fd, &amp;c, 1);\n                str[j] = c;\n                j++;\n\n                if ((c == ' ' || c == '\\n') &amp;&amp; flag == 0 &amp;&amp; i == len) {\n                    found++;\n                    foundflag = 0;\n                    printf(\"w was found in line %d.\\n\", line);\n                }\n\n                if ((c == '\\n')&amp;&amp;(foundflag == 0)) {\n\n                    for (j = 0; str[j] != '\\n'; j += 5) {\n                        printf(\"%c\", str[j]);\n\n                        if (str[j + 1] != '\\n')\n                            printf(\"%c\", str[j + 1]);\n                        else {\n                            j++;\n                            break;\n                        }\n\n                        if (str[j + 2] != '\\n')\n                            printf(\"%c\", str[j + 2]);\n                        else {\n                            j += 2;\n                            break;\n                        }\n\n                        if (str[j + 3] != '\\n')\n                            printf(\"%c\", str[j + 3]);\n                        else {\n                            j += 3;\n                            break;\n                        }\n\n                        if (str[j + 4] != '\\n')\n                            printf(\"%c\", str[j + 4]);\n                        else {\n                            j += 4;\n                            break;\n                        }\n                    }\n\n                    for (; str[j] != '\\n'; j++)\n                        printf(\"%c\", str[j]);\n\n                    printf(\"\\n\");\n                    j = 0;\n\n                } else if (c == '\\n')\n                    foundflag = 1;\n\n            } //end of while\n            printf(\"w has occured %d times.\\n\", found);\n\n        } else //end of if 2\n            printf(\"couldn't read file.\\n\");\n\n    } else //end of if 1\n        printf(\"Couldn't open file for read.\\n\");\n\n    close(fd);\n} //end of main\n</code></pre>\n\n<p>This is the output in the terminal:</p>\n\n<pre><code>w was found in line 1.\nhello\nw was found in line 2.\nw was found in line 6.\nhello world\nhellooooo\nw has occured 3 times.\n</code></pre>\n\n<p>and here is the content of \"hello.txt\":</p>\n\n<pre><code>hello\nhello world\nhallo\nI'm here\nwe're here\nhello\nhellooooo\n</code></pre>\n\n<p>the number of lines printed in the output are 1,2 &amp; 6, but this is what the output should look like:</p>\n\n<pre><code>w was found in line 1.\nhello\nw was found in line 2.\nhello world\nw was found in line 6.\nhello\nw has occured 3 times.\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1445439413, "post_id": 33262456, "comment_id": 54326415, "body": "Please format your code. Did you run it in a debugger ? If you don&#39;t know how to use a debugger, it&#39;s time to start learning it now."}, {"owner": {"reputation": 89, "user_id": 4819696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UdQyF2_HDgs/AAAAAAAAAAI/AAAAAAAAAkI/AGsAoYz_Y-U/photo.jpg?sz=128", "display_name": "Anant Barthwal", "link": "https://stackoverflow.com/users/4819696/anant-barthwal"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445439879, "post_id": 33262456, "comment_id": 54326795, "body": "i think i have formatted the code .can you explain please what is it that you are talking about formatting .actually i am new to programming"}, {"owner": {"reputation": 89, "user_id": 4819696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UdQyF2_HDgs/AAAAAAAAAAI/AAAAAAAAAkI/AGsAoYz_Y-U/photo.jpg?sz=128", "display_name": "Anant Barthwal", "link": "https://stackoverflow.com/users/4819696/anant-barthwal"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445440571, "post_id": 33262456, "comment_id": 54327320, "body": "done formatting .now please can someone ans this question please."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445440669, "post_id": 33262456, "comment_id": 54327388, "body": "Formatting is better, but still not very good. For example corresponding { and } should be aligned. There is tons of correctly formatted code out there, and the code in your C textbook is (hopefully) also formatted correctly."}, {"owner": {"reputation": 89, "user_id": 4819696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UdQyF2_HDgs/AAAAAAAAAAI/AAAAAAAAAkI/AGsAoYz_Y-U/photo.jpg?sz=128", "display_name": "Anant Barthwal", "link": "https://stackoverflow.com/users/4819696/anant-barthwal"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445441346, "post_id": 33262456, "comment_id": 54327868, "body": "now they are aligned.please solve this problem now ."}, {"owner": {"reputation": 89, "user_id": 4819696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UdQyF2_HDgs/AAAAAAAAAAI/AAAAAAAAAkI/AGsAoYz_Y-U/photo.jpg?sz=128", "display_name": "Anant Barthwal", "link": "https://stackoverflow.com/users/4819696/anant-barthwal"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445441433, "post_id": 33262456, "comment_id": 54327939, "body": "and i have debugged the program it stops running at line 54 i.e temp2=temp-&gt;next;  and shows segmentation fault.and works perfectly fine when there is an element in the list to delete."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445443823, "post_id": 33262456, "comment_id": 54329583, "body": "@AnantBarthwal - OK, given that, did it not occur to you that temp was invalid when the list was empty, maybe NULL?"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1445441699, "creation_date": 1445441699, "answer_id": 33263468, "question_id": 33262456, "link": "https://stackoverflow.com/questions/33262456/when-i-am-selecting-delete-option-before-inserting-any-value-in-linked-list-i-am/33263468#33263468", "title": "when i am selecting delete option before inserting any value in linked list i am getting segmentation fault error", "body": "<p>The problem is here:</p>\n\n<pre><code>temp = *ptr;\ntemp2 = temp-&gt;next;\n</code></pre>\n\n<p>You have <code>temp</code> set to <code>*ptr</code>, but you haven't yet checked if <code>*ptr</code> is NULL.  So when you try to dereference it with <code>temp-&gt;next</code>, you get the segfault.</p>\n\n<p>Since you're not using <code>temp2</code> until later, move this line right before your <code>while</code> loop:</p>\n\n<pre><code>temp2 = temp-&gt;next;\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4819696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UdQyF2_HDgs/AAAAAAAAAAI/AAAAAAAAAkI/AGsAoYz_Y-U/photo.jpg?sz=128", "display_name": "Anant Barthwal", "link": "https://stackoverflow.com/users/4819696/anant-barthwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 33263468, "answer_count": 1, "score": -1, "last_activity_date": 1445441699, "creation_date": 1445438810, "last_edit_date": 1445441272, "question_id": 33262456, "link": "https://stackoverflow.com/questions/33262456/when-i-am-selecting-delete-option-before-inserting-any-value-in-linked-list-i-am", "title": "when i am selecting delete option before inserting any value in linked list i am getting segmentation fault error", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\n\ntypedef struct nnode\n{\n    int value;\n    struct nnode *next;\n\n} node;\n\nvoid insert(node **ptr, int val) //for insertion\n{\n    node *temp, *temp2;\n    temp = *ptr;\n    if (*ptr == NULL)//if list is empty\n  {\n        temp = (node *) malloc(sizeof (node));\n        temp-&gt;value = val;\n        temp-&gt;next = NULL;\n        *ptr = temp;\n  }       \n        else \n     {\n        while (temp-&gt;next != NULL)     \n        {\n            temp = temp-&gt;next;\n        }\n        temp2 = (node *) malloc(sizeof (node));\n        temp2-&gt;value = val;\n        temp2-&gt;next = NULL;\n        temp-&gt;next = temp2;\n     }\n}\n\nvoid display_node(node **ptr)\n{\n    node *temp;\n    temp = *ptr;\n    while (temp != NULL) \n   {\n    printf(\"%d---&gt;\", temp-&gt;value);\n    temp = temp-&gt;next;\n   }\n    printf(\"null\");\n}\n\nvoid de_node(node **ptr)\n{\n    int val;\n\n    node *temp, *temp2;\n    temp = *ptr;\n    temp2 = temp-&gt;next;\n    printf(\"\\nenter the value to be deleted\\n\");\n    scanf(\"%d\", &amp;val);\n    if ((*ptr) == NULL)\n     {\n        printf(\"list is empty .....\");\n        return;\n     } \n    else if ((*ptr)-&gt;value == val)\n     {\n\n        *ptr = (*ptr)-&gt;next;\n        free(temp);\n\n     } \n     else \n       {\n     while ((temp-&gt;next-&gt;value != val)&amp;&amp;(temp2-&gt;next != NULL))\n         {\n            temp = temp-&gt;next;\n            temp2 = temp-&gt;next;\n         }\n        if (temp2-&gt;next == NULL)\n           {\n            printf(\"\\nvalue not found\");\n           }\n        if (temp-&gt;next-&gt;value == val)             \n            {\n            temp-&gt;next = temp2-&gt;next;\n            free(temp2);\n            }\n\n        }\n\n }\n\nvoid main() \n{\n    node *head = NULL;\n    int ch;\n    int n;\n    while (1) \n{\n        printf(\"\\nenter your choice\\n\");\n        printf(\"1.ADD ELEMENT\\n\");\n        printf(\"2.DELETE ELEMENT\\n\");\n        printf(\"3.DISPLAY LIST\\n\");\n        printf(\"4.EXIT\\n\");\n        scanf(\"%d\", &amp;ch);\n        switch (ch)\n        {\n            case 1:printf(\"\\n enter data \\n\");\n                scanf(\"%d\", &amp;n);\n                insert(&amp;head, n);\n                display_node(&amp;head);\n                break;\n            case 2:de_node(&amp;head);\n                display_node(&amp;head);\n                break;\n            case 3:display_node(&amp;head);\n                break;\n            case 4:exit(0);\n\n        }\n        }\n        }\n</code></pre>\n\n<p>\n    my problem is before inserting anything in list when i am deleting element<br>\n    i.e when i am trying to delete an element when list is empty<br>\n     then according to my code it should print \"list is empty.....\"\n    but instead it is giving segmentation fault error.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445438791, "post_id": 33262393, "comment_id": 54325905, "body": "What is &quot;slow_cal.h&quot; ?"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 2, "creation_date": 1445438799, "post_id": 33262393, "comment_id": 54325912, "body": "That code doesn&#39;t even compile, does it? You have two variables with the same name."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445438872, "post_id": 33262393, "comment_id": 54325984, "body": "@MichaelWalz it&#39;s a header file with the definition of calibration variable structure with storage"}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1445438958, "post_id": 33262393, "comment_id": 54326055, "body": "@CarlNorum What do you mean ? i cannot find this variable."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 1, "creation_date": 1445438969, "post_id": 33262393, "comment_id": 54326065, "body": "are you allow to do? is same name, different type   extern const slow_struct_type slow_struct; extern const slow_struct_type *slow_struct;"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1445439039, "post_id": 33262393, "comment_id": 54326121, "body": "@CarlNorum. The compiler may not get that far. The OP&#39;s error hits first."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1445439253, "post_id": 33262393, "comment_id": 54326283, "body": "@CarlNorum the one is pointer and the other is the struct. Is it false ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445439284, "post_id": 33262393, "comment_id": 54326306, "body": "@poprock <code>extern const slow_struct_type slow_struct; extern const slow_struct_type *slow_struct;</code> : here you are declaring <code>slow_struct</code> once as <code>slow_struct_type*</code> and once as <code>slow_struct_type</code>. It&#39;s almost like declaring <code>int x; char x;</code>."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1445439497, "post_id": 33262393, "comment_id": 54326492, "body": "@MichaelWalz It is <i>exactly</i> like declaring <code>int x; char x;</code>. The two types are not compatible at all."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1445439516, "post_id": 33262393, "comment_id": 54326508, "body": "@CarlNorum Could you explain the error of the operating system ?  The compiler make the process without a warning or an error."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445439617, "post_id": 33262393, "comment_id": 54326593, "body": "@poprock so your compiler is compiling this piece of code without warning/error ? Which compiler do you use ?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445439635, "post_id": 33262393, "comment_id": 54326608, "body": "@poprock You have to 1) get a proper standards-compliant compiler (suggested: clang or gcc), 2) enable warnings in it (<code>-Wall -Wextra</code> at a minimum, possibly <code>-Weverything</code> on clang), 3) enable standard conforming mode (<code>-pedantic-errors</code>, i.e. no custom compiler extensions)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445441581, "post_id": 33262393, "comment_id": 54328059, "body": "@poprock, whereas we do strongly prefer you to present <i>minimal</i> code that demonstrates your problem, that does still have to be complete in the internal consistency sense.  Missing declarations and other errors introduced in the process abbreviating your code interfere with diagnosing problems even more than piles of extraneous code do."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445442217, "post_id": 33262393, "comment_id": 54328490, "body": "@John Bollinger I wrote a minimal code and i didn&#39;t miss a declaration or an error, the problem was only in foo() because i have forgotten that the variable is constant. The solution is on my comment at the Zenith&#39;s answer and some other developers have found some other issues.  So i think you are undue and you want only to vote down. Look please again the html tip <code>&lt;a class=&quot;vote-up-off&quot; title=&quot;This question shows research effort; it is useful and clear (click again to undo)&quot;&gt;up vote&lt;&#47;a&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445439127, "post_id": 33262492, "comment_id": 54326185, "body": "you mean like this <code>foo(&amp;(slow_struct-&gt;b_t[0]));</code>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 1, "creation_date": 1445439199, "post_id": 33262492, "comment_id": 54326246, "body": "@poprock Yes. After you decide whether <code>slow_struct</code> is a <code>slow_struct_type</code> or a <code>slow_struct_type*</code>. It can&#39;t be both."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445439370, "post_id": 33262492, "comment_id": 54326379, "body": "The other guys above say that i am wrong if i use the same name for both types. Are you Agree ?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445439440, "post_id": 33262492, "comment_id": 54326430, "body": "@poprock Yes, in C, identifiers must be unique, and re-declarations of different types are not allowed."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445440857, "post_id": 33262492, "comment_id": 54327526, "body": "Do you have a reference from something like ISO, so i could assert this issue ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445442180, "post_id": 33262492, "comment_id": 54328460, "body": "@poprock: &quot;All declarations that refer to the same object or function shall have compatible type; otherwise, the behavior is undefined&quot; (C2011, 6.2.7/2).  &quot;Compatible type&quot; is defined in C2011, 6.2.7/1 and other sections referenced from there; for our purposes, suffice it to say that pointer types can be compatible only with other pointer types (but not <i>all</i> other pointer types).  Equivalent provisions exist in C99 and C90."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1445442443, "post_id": 33262492, "comment_id": 54328647, "body": "@JohnBollinger Thank you and sorry if i was &quot;jerky&quot; but sometimes the users are undue with (my) questions."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 3, "last_activity_date": 1445439383, "last_edit_date": 1445439383, "creation_date": 1445438884, "answer_id": 33262492, "question_id": 33262393, "link": "https://stackoverflow.com/questions/33262393/why-is-it-wrong-to-give-the-address-of-a-variable-to-a-pointer/33262492#33262492", "title": "Why is it wrong to give the address of a variable to a pointer?", "body": "<p><code>b_t</code> is a <strong>member</strong> of <code>slow_struct_type</code>, and thus you need an object of type <code>slow_struct_type</code> first before any <code>b_t</code> can exist.</p>\n\n<p>Even then you would refer to <code>b_t</code> via the object that holds it, i.e.</p>\n\n<ul>\n<li><code>x.b_t</code> if <code>x</code> is of type <code>slow_struct_type</code>, or </li>\n<li><code>x-&gt;b_t</code> if <code>x</code> is of type <code>slow_struct_type*</code>.</li>\n</ul>\n\n<p>After that you will have to fix the multiple declarations of <code>slow_struct</code> with different types:</p>\n\n<pre><code>extern const slow_struct_type slow_struct;\nextern const slow_struct_type *slow_struct;\n</code></pre>\n\n<p>You can't have both: either <code>slow_struct</code> is a  <code>const slow_struct_type *</code>, or it is a <code>const slow_struct_type</code>, but not both.</p>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445440661, "post_id": 33262755, "comment_id": 54327380, "body": "This is not the whole of code, because the whole of code is from MATLAB generated and is in 7 different files, so i tried to make an example.  except the <code>main()</code> and the <code>foo()</code> the rest code is the same."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445441797, "post_id": 33262755, "comment_id": 54328205, "body": "@poprock, does my deduced code then <i>not</i> capture the essence of your question?  Even after your edit, it&#39;s not evident to me that that would be the case."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1445440526, "last_edit_date": 1445440526, "creation_date": 1445439650, "answer_id": 33262755, "question_id": 33262393, "link": "https://stackoverflow.com/questions/33262393/why-is-it-wrong-to-give-the-address-of-a-variable-to-a-pointer/33262755#33262755", "title": "Why is it wrong to give the address of a variable to a pointer?", "body": "<p>Your code is seriously broken, and will not compile.  Perhaps what you really want to ask about boils down to this:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\n/* slow Struct data */\ntypedef struct slow_struct_tag {\n    const int16_t b_t[7]; \n} slow_struct_type;\n\nextern const slow_struct_type slow_struct;\n\nvoid foo(int16_t *pY);\n\nint main() {\n    foo(&amp;slow_struct.b_t[0]);\n    return 0;\n}\n\nvoid foo(int16_t *pY) {\n    *pY++;\n}\n</code></pre>\n\n<p>Relative to your code, that eliminates a missing header (<code>slow.h</code>), corrects data types (<code>int16_u</code>, <code>int16_T</code> -> <code>int16_t</code>), includes <code>stdint.h</code> for the declaration of <code>int16_t</code>, removes a duplicate declaration of global variable <code>slow_struct</code>, makes <code>foo()</code>'s prototype visible in <code>main()</code>, and in the call to <code>foo()</code> uses <code>slow_struct.b_t</code> in place of bare <code>b_t</code> (which does not exist in any code you presented).</p>\n\n<p>Even in that case, problems remain.  Although you <em>can</em> use a pointer to a <code>struct</code> member as a function argument, the particular usage above is not <code>const</code>-correct.  As a result, if the compiler accepts it (which will depend to some extent on compilation options) then it may break at run time, and if not then it will produce the surprising effect of a <code>const</code> variable's value changing.</p>\n\n<p>Note also that in this particular case, <code>&amp;slow_struct.b_t[0]</code> is rather verbose, as in that context it means exactly the same thing as <code>slow_struct.b_t</code>.  Additionally, that code uses global variable <code>slow_struct</code> before initializing it (indirectly through <code>*pY++</code> in <code>foo()</code>), and therefore exhibits undefined behavior.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Regarding the specific error message revised into the question, \"Symbol 'b_t' could not be resolved\", the problem is what I already said: there is no variable <code>b_t</code> declared anywhere in the code you presented.  The type <code>slow_struct_type</code> has a <em>member</em> of that name, but you can only refer to such a member in the context of an overall <code>slow_struct_type</code> object.</p>\n"}], "owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445447756, "creation_date": 1445438627, "last_edit_date": 1445447756, "question_id": 33262393, "link": "https://stackoverflow.com/questions/33262393/why-is-it-wrong-to-give-the-address-of-a-variable-to-a-pointer", "title": "Why is it wrong to give the address of a variable to a pointer?", "body": "<p>I am trying to find out what is wrong with my code. I have this code and everything is properly included, but the compiler said <code>Symbol 'b_t' could not be resolved</code>: </p>\n\n<pre><code>#ifndef slow_CAL_H\n#define slow_CAL_H\n\n/* slow Struct data */\ntypedef struct slow_struct_tag {\n    const int16_T b_t[7]; \n} slow_struct_type;\n\nextern const slow_struct_type slow_struct;\nextern const slow_struct_type *slow_struct;\n#endif\n</code></pre>\n\n<p>slow_private.h </p>\n\n<pre><code>#ifndef slow_private_h_\n#define slow_private_h_\n#include \"slow_cal.h\"\n\n#endif \n</code></pre>\n\n<p>slow.c </p>\n\n<pre><code>#include \"slow.h\"\n#include \"slow_private.h\"\n\nint main() {\n    foo(&amp;b_t[0]);\n    return 0;\n}\n\nvoid foo(int16_T *pY) {\n    *pY++;\n}\n</code></pre>\n\n<p>This <code>foo()</code> is not the real function, the real function is the following:</p>\n\n<pre><code>void INTERPOLATE_S16_S16_ZERO(int16_T *pY, int16_T yL, int16_T yR,\nint16_T  x, int16_T xL, int16_T xR)\n{\n    int32_T bigProd;\n    int16_T yDiff;\n    int16_T xNum;\n    int16_T xDen;\n    *pY = yL;\n\n    /* If x is not strictly between xR and xL\n    * then an interpolation calculation is not necessary x == xL\n    * or not valid.  The invalid situation is expected when the input\n    * is beyond the left or right end of the table.  The design is\n    * that yL holds the correct value for *pY\n    * in invalid situations.\n    */\n    if ((xR &gt; xL) &amp;&amp; (x &gt; xL) ) {\n        xDen = xR;\n        xDen = (int16_T)(xDen - xL);\n        xNum = x;\n        xNum = (int16_T)(xNum - xL);\n        yDiff = yR;\n        yDiff = (int16_T)(yDiff - yL);\n        bigProd = yDiff * xNum;\n        yDiff = div_s16s32(bigProd, (int32_T)xDen);\n        *pY = (int16_T)(*pY + yDiff);\n     }\n}\n</code></pre>\n\n<p>However, I don't want to post a chaotic code with five or six different files. </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1445438632, "post_id": 33262343, "comment_id": 54325782, "body": "The error message is pretty clear. You <i>do</i> know the meaning of the <code>void</code> &quot;type&quot;?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445438685, "post_id": 33262343, "comment_id": 54325830, "body": "There&#39;s also some other weird things in your code, like why are you passing the values to the function using pointers? Is there a special reason you do that? Also, in your <code>printf</code> call you attempt to print the <i>address</i> of the <code>finalAnswer</code> variable, not its value."}, {"owner": {"reputation": 73, "user_id": 5368677, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4055358bf9fc2c6122b4d3d226040ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woods", "link": "https://stackoverflow.com/users/5368677/joe-woods"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445438814, "post_id": 33262343, "comment_id": 54325931, "body": "void means nothing. I returns nothing, but I am not returning anything. Even if I comment out the return command I still get the same error."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1445438889, "post_id": 33262343, "comment_id": 54325999, "body": "That&#39;s right, the function doesn&#39;t return anything, so what do you expect to happen when you assign this &quot;nothing&quot; to <code>finalAnswer</code>? I think you need to think about what the function you call is actually supposed to do, because it doesn&#39;t make sense it should not return anything."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445534384, "post_id": 33262343, "comment_id": 54373804, "body": "You in the same class as @Batool?"}, {"owner": {"reputation": 73, "user_id": 5368677, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4055358bf9fc2c6122b4d3d226040ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woods", "link": "https://stackoverflow.com/users/5368677/joe-woods"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445540384, "post_id": 33262343, "comment_id": 54377172, "body": "@MartinJames what do you mean?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1445438695, "creation_date": 1445438695, "answer_id": 33262423, "question_id": 33262343, "link": "https://stackoverflow.com/questions/33262343/error-void-value-not-ignored-as-it-ought-to-be-in-c-programming/33262423#33262423", "title": "Error: Void value not ignored as it ought to be in C programming", "body": "<p>This:</p>\n\n<pre><code>void function_1(int *num1, int *num2)\n</code></pre>\n\n<p>returns nothing. <code>void</code> is kind of a \"nothing\" type, in an expression, it means to ignore the result, as a return type, it means nothing is returned. Assigning the (non-existent) return value of a <code>void</code> function doesn't make sense.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 5368677, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4055358bf9fc2c6122b4d3d226040ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woods", "link": "https://stackoverflow.com/users/5368677/joe-woods"}, "edited": false, "score": 0, "creation_date": 1445439341, "post_id": 33262468, "comment_id": 54326354, "body": "Thanks for pointing the error. Is there a way I can have num1 and num2 both pointers. I want both of them to be pointers. When I removed void and changed it with int it worked, meaning there is something wrong I am doing with void."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 73, "user_id": 5368677, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4055358bf9fc2c6122b4d3d226040ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woods", "link": "https://stackoverflow.com/users/5368677/joe-woods"}, "edited": false, "score": 1, "creation_date": 1445439537, "post_id": 33262468, "comment_id": 54326527, "body": "Unless you plan on changing <code>num1</code> and <code>num2</code> inside of your function, there&#39;s no reason to pass them as pointers.  You can have them as pointers, but there&#39;s no apparent reason for it.  In the example I gave, <code>total</code> is a pointer because it changes a variable in the calling function by dereferencing the pointer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1445440214, "post_id": 33262468, "comment_id": 54327028, "body": "&quot;I want both of them to be pointers.&quot; because .... you just like the look of those nice little stars? --- &quot;When I removed void and changed it with int it worked, meaning there is something wrong I am doing with void.&quot; ... yes, you expect it (&quot;nothing&quot;) to be a value."}, {"owner": {"reputation": 4251, "user_id": 2171689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37198fb9e562d45b14f52669c207e08d?s=128&d=identicon&r=PG&f=1", "display_name": "This isn&#39;t my real name", "link": "https://stackoverflow.com/users/2171689/this-isnt-my-real-name"}, "edited": false, "score": 0, "creation_date": 1445453307, "post_id": 33262468, "comment_id": 54335091, "body": "For clarification: The <code>void</code> type does not mean &quot;untyped value&quot;, it means &quot;there isn&#39;t anything here&quot;. A function declared as type <code>void</code> is a function that <i>does not have a return value at all</i>. Trying to use the return value of such a function is therefore a wrong thing to do."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1445438836, "last_edit_date": 1495542594, "creation_date": 1445438836, "answer_id": 33262468, "question_id": 33262343, "link": "https://stackoverflow.com/questions/33262343/error-void-value-not-ignored-as-it-ought-to-be-in-c-programming/33262468#33262468", "title": "Error: Void value not ignored as it ought to be in C programming", "body": "<p>As mentioned in your <a href=\"https://stackoverflow.com/questions/33243014/how-does-a-void-function-in-c-works-with-pointers\">previous question</a>, a <code>void</code> function returns nothing, so you can't assign its return value to anything.  That's why you're getting the error.</p>\n\n<p>If you want the function to send back a value but have a <code>void</code> return type, define it like this:</p>\n\n<pre><code>void function_1(int num1, int num2, int *total) \n{\n    *total = num1 / num2;\n}\n</code></pre>\n\n<p>And call it like this:</p>\n\n<pre><code>function_1(numerator, denominator, &amp;finalAnswer);\n</code></pre>\n\n<p>Also, your final <code>printf</code> should be this:</p>\n\n<pre><code>printf(\"%d / %d = %d \\n\", numerator,denominator,finalAnswer);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5368677, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4055358bf9fc2c6122b4d3d226040ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woods", "link": "https://stackoverflow.com/users/5368677/joe-woods"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4804, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1445438836, "creation_date": 1445438510, "question_id": 33262343, "link": "https://stackoverflow.com/questions/33262343/error-void-value-not-ignored-as-it-ought-to-be-in-c-programming", "title": "Error: Void value not ignored as it ought to be in C programming", "body": "<p>I am writing  a C program which has two functions. One function is the usual main function and the other is a pointer void function. When I try to compile my program in a Linux based system I get the following error: </p>\n\n<pre><code>host1@matrix:~/cprog/practice&gt; gcc -o function1 function1.c\nprog1.c: In function \u2018main\u2019:\nprog1.c:16:14: error: void value not ignored as it ought to be\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid function_1(int *num1, int *num2);\n\nint main(void) {\n\n    int numerator;\n    int denominator;\n    int finalAnswer;\n\n    printf(\"Numerator: \");\n    scanf(\"%d\", &amp;numerator);\n\n    printf(\"Denominator: \");\n    scanf(\"%d\", &amp;denominator);\n\n    finalAnswer = function_1(&amp;numerator, &amp;denominator);\n    printf(\"%d / %d = %d \\n\", numerator,denominator,&amp;finalAnswer);\n\n    return 0;\n}\n\nvoid function_1(int *num1, int *num2) {\n\n    int total;\n\n    total = *num1 / *num2;\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "typedef", "c99", "c11"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1445437085, "post_id": 33261771, "comment_id": 54324604, "body": "Does the compiler give you a hint or does it just refuse to compile this without producing any error messages?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 5, "creation_date": 1445437152, "post_id": 33261771, "comment_id": 54324653, "body": "@PravasiMeet I haven&#39;t because I haven&#39;t got any votes left today, but probably because your question lacks thoroughness and the errors you are getting are missing."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1445437164, "post_id": 33261771, "comment_id": 54324663, "body": "@juanchopanza: by default GCC compiles this as a compiler extension but If I use -pedantic-errors option then it fails in compilation? Compiler gives warnings."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1445437246, "post_id": 33261771, "comment_id": 54324747, "body": "Interesting. And do you want to keep those warnings/errors secret? Or can you share them with us?"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1445437250, "post_id": 33261771, "comment_id": 54324752, "body": "@PravasiMeet with GCC, compile with -std=c11 and -Wall then follow any warnings."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1445437449, "post_id": 33261771, "comment_id": 54324902, "body": "Develop a habit of including any error/warning messages from compilers/linkers."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 2, "creation_date": 1445437527, "post_id": 33261771, "comment_id": 54324954, "body": "@PravasiMeet if anything, complaining about downvotes will attract significantly more. And wether or not your question shows research and effort is for the community to decide, not you."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "reply_to_user": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 0, "creation_date": 1445438258, "post_id": 33261771, "comment_id": 54325513, "body": "@tinky_winky: who says that? It is completely well defined."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1445438266, "post_id": 33261771, "comment_id": 54325520, "body": "@MartinJames That is not how SO works. You downvote to encourage edits. If the problems with the post are fixed, the downvote is no longer locked and can be removed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1445438838, "post_id": 33261771, "comment_id": 54325956, "body": "Anyway, as a C nerd I think this was the most interesting question today, +1."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445439103, "post_id": 33261771, "comment_id": 54326164, "body": "Found a duplicate when I was looking for a rationale."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1445437605, "post_id": 33261909, "comment_id": 54325009, "body": "How weird is that? I believe you and upvoted, but I just sorta wonder why they did that?"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1445437702, "post_id": 33261909, "comment_id": 54325093, "body": "@MartinJames it struck me as weird too. My guess would be to allow multiple <code>typedef</code>s of the same thing over multiple headers, just like tags can be. Especially since <code>typedef struct { ... } type;</code> combos are so popular."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445438768, "post_id": 33261909, "comment_id": 54325886, "body": "I have some vague memory about C++ allowing multiple typedefs, so it could be an attempt to harmonize C with C++? As for what the rationale for it in C++ would be, I have no idea."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445439230, "post_id": 33261909, "comment_id": 54326272, "body": "@Lundin doesn&#39;t C++ automagically <code>typedef</code> <code>struct</code>s to their tag (<code>struct foo { ... };</code> -&gt; <code>typedef struct foo { ... } foo;</code>)? They might allow it to accomodate redundant <code>typedef</code>s coming over from C. So the harmonisation has come full circle :)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1445439290, "post_id": 33261909, "comment_id": 54326315, "body": "@Kninnug The answer to the duplicate I linked seems to suggest this was for C++ harmonization indeed. That&#39;s the only explanation I can find."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1445440028, "post_id": 33261909, "comment_id": 54326905, "body": "Found the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1360.htm\" rel=\"nofollow noreferrer\">rationale</a>."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1445440411, "post_id": 33261909, "comment_id": 54327211, "body": "@Lundin nice. Edited my answer, for what it&#39;s still worth..."}], "tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 8, "last_activity_date": 1445440309, "last_edit_date": 1445440309, "creation_date": 1445437332, "answer_id": 33261909, "question_id": 33261771, "link": "https://stackoverflow.com/questions/33261771/why-this-program-compiles-fine-in-c11-but-not-in-c99/33261909#33261909", "title": "why this program compiles fine in C11 but not in C99?", "body": "<p>This was (apparently) changed in C11. C99\u00a76.7/3:</p>\n\n<blockquote>\n  <p>If an identifier has no linkage, there shall be no more than one declaration of the identifier (in a declarator or type specifier) with the same scope and in the same name space, except for tags as specified in 6.7.2.3.</p>\n</blockquote>\n\n<p>C11\u00a76.7/3:</p>\n\n<blockquote>\n  <p>If an identifier has no linkage, there shall be no more than one declaration of the identifier (in a declarator or type specifier) with the same scope and in the same name space, except that:</p>\n  \n  <p>\u2014 <strong>a typedef name may be redefined to denote the same type as it currently does</strong>, provided that type is not a variably modified type;</p>\n  \n  <p>\u2014 tags may be redeclared as specified in 6.7.2.3.</p>\n</blockquote>\n\n<p><s>While I can't find a rationale document for C11, my guess as to the reason for this change is to allow multiple <code>struct</code> <code>typedef</code>s, possibly over multiple headers. Since re-declaring <code>struct</code>/<code>union</code>/<code>enum</code> tags is allowed already and <code>typedef</code>ing <code>struct</code>s is a fairly common idiom.</s></p>\n\n<p><strong>Edit</strong></p>\n\n<p>@Lundin has found the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1360.htm\" rel=\"nofollow\">rationale</a> for this: it is to enhance compatibility with C++:</p>\n\n<blockquote>\n  <p>C++ allows a typedef redefinition with the same name as a previous typedef to appear in the same scope, as long as it names the same type. Some C compilers allow similar typedef redefinition as an extension, though C99 does not allow it. Adding benign typedef redefinition to C1x would enhance consistency with C++, standardize some existing practice, and safely eliminate a constraint that is unhelpful and an occasional nuisance to users.</p>\n</blockquote>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "closed_date": 1445439154, "accepted_answer_id": 33261909, "answer_count": 1, "score": -6, "last_activity_date": 1445440309, "creation_date": 1445437004, "last_edit_date": 1445437342, "question_id": 33261771, "link": "https://stackoverflow.com/questions/33261771/why-this-program-compiles-fine-in-c11-but-not-in-c99", "closed_reason": "Duplicate", "title": "why this program compiles fine in C11 but not in C99?", "body": "<p>Consider following program: (See live demo <a href=\"http://melpon.org/wandbox/permlink/inVtCg7v1GRnVsMz\" rel=\"nofollow\">here</a>) .</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct Test\n{\n    int a;\n};\ntypedef struct Test t;\ntypedef struct Test t;\nint main()\n{\n    t T={9};\n    printf(\"%d\",T.a);\n}\n</code></pre>\n\n<p>The program compiles fine in C11 compiler but fails in compilation in C99 compiler. Why? What is the reason?\nMy compiler gcc 4.8.1 gives following warnings:</p>\n\n<pre><code>[Warning] redefinition of typedef 't' [-Wpedantic]\n[Note] previous declaration of 't' was here\n</code></pre>\n"}, {"tags": ["python", "c", "linux", "pipe", "subprocess"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445435979, "post_id": 33261183, "comment_id": 54323702, "body": "If you read <a href=\"https://docs.python.org/2/library/subprocess.html#popen-objects\" rel=\"nofollow noreferrer\">the <code>Popen</code> object documentation</a> you will see a warning that you should use <a href=\"https://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate\" rel=\"nofollow noreferrer\"><code>communicate</code></a> instead of e.g. <code>stdout.read</code>."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1445436234, "post_id": 33261183, "comment_id": 54323886, "body": "@JoachimPileborg: <code>.communicate()</code>  would help here because the input is finite and it does not depend on the child process&#39; output but it is unrelated to the core issue: the buffering behavior may change if stdin/stdout are not connected to a tty. The warning in the subprocess&#39; docs is about the case when the pipes are not consumed and therefore the child process hangs as soon as corresponding OS pipe buffers are full. <code>.readline()</code> would work here if the C program adjusts its stdout buffering mode. Read the answer to the duplicate question."}], "owner": {"reputation": 263, "user_id": 4707338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f29afc35b587d0a5b6539f7e6a3a94?s=128&d=identicon&r=PG&f=1", "display_name": "gagou7", "link": "https://stackoverflow.com/users/4707338/gagou7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "closed_date": 1445435876, "answer_count": 0, "score": 0, "last_activity_date": 1445435678, "creation_date": 1445435478, "question_id": 33261183, "link": "https://stackoverflow.com/questions/33261183/python-popen-with-stdout-and-stdin-piped-read-freeze", "closed_reason": "Duplicate", "title": "Python Popen with stdout and stdin piped : read freeze", "body": "<p>I'm currently facing a strange problem. I would like to manage the execution of this simple binary with Python:</p>\n\n<pre><code>int main()\n{\n        char test[5];\n        printf(\"Reading\\n\");\n        fgets(test, 5, stdin);\n        printf(\"Data read : %s\\n\", test);\n}\n</code></pre>\n\n<p>What I have done so far is the following code:</p>\n\n<pre><code>child = subprocess.Popen(\"./example.bin\", stdout=subprocess.PIPE, stdin=subprocess.PIPE)\nchild.stdout.readline()\n</code></pre>\n\n<p>My question is why does the readline() block forever? I mean, I know that the fgets() function will wait for inputs but in a standard terminal, the \"Reading\\n\" string is correctly printed BEFORE it start waiting for user input.</p>\n\n<p>Also, I though about the fgets() which is blocking on stdin which is, in fact, the same file descriptor as stdout (/dev/ttyX). Then, I understand that reading on stdin could block stdout. But, child.stdout is a BufferedIO and should have received the data sent by printf(). I tried to detach() stdout hoping that will cut the link with the file descriptor before doing a readline() on it without success.</p>\n\n<p>I read a lot of thing in relation with pipes, tty and whatever. Unfortunately, it seems I'm missing something here. I also tried unsuccessfully lot of different parameters like bufsize=0, shell=True, etc. The communicate() function write data and close child.stdin which is not what I want to do (in my real program, I have more fgets()/printf() call).</p>\n\n<p>Finally, if I write to child.stdin, flush it, check that the process have been terminated with poll(), child.stdout become finally readable.</p>\n\n<p>Also, this deadlock problem seems to happen only when I pipe both stdin and stdout.</p>\n\n<p>Does anyone know how to resolve this problem? How to read data that have been \"printed\" right before the reading?</p>\n\n<p>Thank you in advance !</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1445435114, "post_id": 33261009, "comment_id": 54323020, "body": "What exactly &quot;goes wrong&quot;? And don&#39;t use <code>gets</code> but <code>fgets</code> instead!"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1445435714, "post_id": 33261009, "comment_id": 54323475, "body": "<code>scanf(&quot;%d&quot;</code> --&gt; <code>scanf(&quot;%d%*c&quot;</code>"}, {"owner": {"reputation": 29, "user_id": 5441399, "user_type": "registered", "profile_image": "https://graph.facebook.com/943721265689517/picture?type=large", "display_name": "Tawhidur Rahman Tanim", "link": "https://stackoverflow.com/users/5441399/tawhidur-rahman-tanim"}, "edited": false, "score": 0, "creation_date": 1445435777, "post_id": 33261009, "comment_id": 54323541, "body": "it stop taking string"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5441399, "user_type": "registered", "profile_image": "https://graph.facebook.com/943721265689517/picture?type=large", "display_name": "Tawhidur Rahman Tanim", "link": "https://stackoverflow.com/users/5441399/tawhidur-rahman-tanim"}, "edited": false, "score": 0, "creation_date": 1445444204, "post_id": 33261222, "comment_id": 54329795, "body": "it works perfectly. can you please explain how is this while loop working?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 29, "user_id": 5441399, "user_type": "registered", "profile_image": "https://graph.facebook.com/943721265689517/picture?type=large", "display_name": "Tawhidur Rahman Tanim", "link": "https://stackoverflow.com/users/5441399/tawhidur-rahman-tanim"}, "edited": false, "score": 0, "creation_date": 1445444427, "post_id": 33261222, "comment_id": 54329942, "body": "@TawhidurRahmanTanim Value returned from <code>getchar</code> is assigned to <code>c</code>  . If value returned and stored in <code>c</code> is <code>EOF</code> or <code>&#39;\\n&#39;</code> loop exits  and if not then loop extracted ,until <code>EOF</code> or <code>&#39;\\n&#39;</code> is encountered . In this way if <code>&#39;\\n&#39;</code> is present in <code>stdin</code> it is read from it ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 1, "last_activity_date": 1445435820, "last_edit_date": 1445435820, "creation_date": 1445435591, "answer_id": 33261222, "question_id": 33261009, "link": "https://stackoverflow.com/questions/33261009/taking-string-and-integer-in-structure-variable/33261222#33261222", "title": "taking string and integer in structure variable", "body": "<p>First of all stop using <code>gets</code>, use <code>fgets</code> instead -</p>\n\n<pre><code>fgets(ct1[i].name,sizeof ct1[i].name,stdin );\n</code></pre>\n\n<p>And after your <code>scanf</code> you can do this -</p>\n\n<pre><code>while((c=getchar())!=EOF &amp;&amp; c!='\\n');       \n</code></pre>\n\n<p>declare <code>c</code> as <code>int</code> before <code>for</code> loop . </p>\n\n<p>This is to remove <code>'\\n'</code> from <code>stdin</code> which remains after <code>scanf</code> in each iteration and causes <code>fgets</code> to return . </p>\n"}, {"comments": [{"owner": {"reputation": 78, "user_id": 5471401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e700fe05539426e86849494d907d6afa?s=128&d=identicon&r=PG&f=1", "display_name": "Haritha Elango", "link": "https://stackoverflow.com/users/5471401/haritha-elango"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445447221, "post_id": 33263847, "comment_id": 54331607, "body": "Never knew that. Thanks a lot @chux"}], "tags": [], "owner": {"reputation": 78, "user_id": 5471401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e700fe05539426e86849494d907d6afa?s=128&d=identicon&r=PG&f=1", "display_name": "Haritha Elango", "link": "https://stackoverflow.com/users/5471401/haritha-elango"}, "is_accepted": false, "score": 0, "last_activity_date": 1445442808, "creation_date": 1445442808, "answer_id": 33263847, "question_id": 33261009, "link": "https://stackoverflow.com/questions/33261009/taking-string-and-integer-in-structure-variable/33263847#33263847", "title": "taking string and integer in structure variable", "body": "<p>After <code>scanf</code> include this line to remove the newline character remaining in stdin</p>\n\n<pre><code>fflush(stdin)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5441399, "user_type": "registered", "profile_image": "https://graph.facebook.com/943721265689517/picture?type=large", "display_name": "Tawhidur Rahman Tanim", "link": "https://stackoverflow.com/users/5441399/tawhidur-rahman-tanim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 33261222, "answer_count": 2, "score": 0, "last_activity_date": 1445442808, "creation_date": 1445435062, "question_id": 33261009, "link": "https://stackoverflow.com/questions/33261009/taking-string-and-integer-in-structure-variable", "title": "taking string and integer in structure variable", "body": "<pre><code>#include &lt;stdio.h&gt;\nstruct book\n{\n  char name[1000];\n  int price;\n};\n\nint main()\n\n{\n\n    struct book ct1[5];\n    int i;\n\n    for (i = 0; i &lt; 5; i++)\n   {\n    printf(\"Please Enter %d Number Book Name: \",i+1);\n    gets(ct1[i].name);\n    printf(\"Price: \");\n    scanf(\"%d\", &amp;ct1[i].price);\n  }\n\nfor (i = 0; i &lt; 5; i++)\n{\n    printf(\"%d Nuumber Book's name and price : \\n\",i+1);\n    printf(\"%s = %d\\n\", ct1[i].name, ct1[i].price);\n}\n\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>I write this code to take book names and price and to print it.</p>\n\n<p>like</p>\n\n<p>input:\nPlease Enter 1 Number Book Name: Sherlock</p>\n\n<p>price:100</p>\n\n<p>...................</p>\n\n<p>...................</p>\n\n<p>output:</p>\n\n<p>Number Book's name and price:\nSherlock = 100</p>\n\n<p>.................</p>\n\n<p>................</p>\n\n<p>but it taking input like this\nPlease Enter 1 Number Book Name: sherlock holmes</p>\n\n<p>price: 100</p>\n\n<p>Please Enter 2 Number Book Name: price: ........</p>\n\n<p>first time it is correct but from the second time something goes wrong. please help me.</p>\n"}, {"tags": ["c", "linker", "linker-errors", "gnu-make", "cmocka"], "answers": [{"tags": [], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1445496892, "creation_date": 1445496892, "answer_id": 33275008, "question_id": 33260973, "link": "https://stackoverflow.com/questions/33260973/how-do-i-link-with-cmocka/33275008#33275008", "title": "How do I link with cmocka?", "body": "<p>Ok, I found the answer <a href=\"http://www.linuxquestions.org/questions/programming-9/problem-with-g-linker-cannot-find-library-734085/\" rel=\"nofollow\">here</a> and will quote from it:</p>\n\n<blockquote>\n  <p>The -L option works like a search path for libraries, just like $PATH\n  in the shell is a search path for executable files.</p>\n  \n  <p>And just like the shell has a default search path, the linker also has\n  a default library search path, with should include /usr/lib. So you\n  should not even need to have to use a -L/usr/lib option. The reason\n  why that did not work for you is that you use a full path with the -l\n  option.</p>\n  \n  <p><strong>Normally with the -l option the \"extension\" is left out from the file\n  name, as well the lib prefix, and the directory</strong>.</p>\n</blockquote>\n\n<p>So, in my case, I told Eclipse to link with <code>cmocka</code>, which caused the makefile to be generated with this command</p>\n\n<pre><code>gcc -L/usr/lib -o \"unit_test_C_code_example_project\"  ./test_scripts/test_factorial.o  ./software_under_test/factorial.o   -lcmocka\n</code></pre>\n\n<p>which links successfully.</p>\n\n<p>Of course, I <em>knew</em> this , but had forgotten it. D'oh!</p>\n"}], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4457, "favorite_count": 1, "accepted_answer_id": 33275008, "answer_count": 1, "score": 1, "last_activity_date": 1469238871, "creation_date": 1445434930, "last_edit_date": 1469238871, "question_id": 33260973, "link": "https://stackoverflow.com/questions/33260973/how-do-i-link-with-cmocka", "title": "How do I link with cmocka?", "body": "<p>I am using Eclipse under Ubuntu.</p>\n\n<p>I just installed cmocka:</p>\n\n<pre><code>Install the project...\n-- Install configuration: \"Debug\"\n-- Installing: /usr/lib/pkgconfig/cmocka.pc\n-- Installing: /usr/lib/cmake/cmocka/cmocka-config.cmake\n-- Installing: /usr/lib/cmake/cmocka/cmocka-config-version.cmake\n-- Installing: /usr/include/cmocka.h\n-- Installing: /usr/include/cmocka_pbc.h\n-- Installing: /usr/lib/libcmocka.so.0.3.1\n-- Installing: /usr/lib/libcmocka.so.0\n-- Installing: /usr/lib/libcmocka.so\n</code></pre>\n\n<p>When I build a simple test project, I get linker errors. From this code</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;setjmp.h&gt;\n#include &lt;cmocka.h&gt;\n\n#include \"factorial.h\"\n\nstatic void test_factorial_zeo()\n{\n    assert_int_equal(factorial(0), 1);\n}\n\nint main(int argc, char **argv)\n{\n    const UnitTest tests[] =\n    {\n            unit_test(test_factorial_zeo),\n    };\n\n    return run_tests(tests);\n}\n</code></pre>\n\n<p>I get these errors:</p>\n\n<pre><code>make all \nBuilding target: unit_test_C_code_example_project\nInvoking: GCC C Linker\ngcc  -o \"unit_test_C_code_example_project\"  ./test_scripts/test_factorial.o  ./software_under_test/factorial.o   \n./test_scripts/test_factorial.o: In function `test_factorial_zeo':\n/home/me/workspace/unit_test_C_code_example_project/Debug/../test_scripts/test_factorial.c:10: undefined reference to `_assert_int_equal'\n./test_scripts/test_factorial.o: In function `main':\n/home/me/workspace/unit_test_C_code_example_project/Debug/../test_scripts/test_factorial.c:20: undefined reference to `_run_tests'\ncollect2: ld returned 1 exit status\nmake: *** [unit_test_C_code_example_project] Error 1\n\n**** Build Finished ****\n</code></pre>\n\n<p>So, it seems that I ought to add the cmocka library to the linker path. But then I get</p>\n\n<pre><code>make all \nBuilding target: unit_test_C_code_example_project\nInvoking: GCC C Linker\ngcc  -o \"unit_test_C_code_example_project\"  ./test_scripts/test_factorial.o  ./software_under_test/factorial.o   -llibcmocka.so.0.3.1\n/usr/bin/ld: cannot find -llibcmocka.so.0.3.1\ncollect2: ld returned 1 exit status\nmake: *** [unit_test_C_code_example_project] Error 1\n\n**** Build Finished ****\n</code></pre>\n\n<p>I get the same results with libcmocka.so.0.3.1, libcmocka.so.0 and libcmocka.so</p>\n\n<p>Obviously, I am doing something very basic wrongly, but what?</p>\n\n<pre><code>ls -lAF /usr/lib/libcmocka.so*\nlrwxrwxrwx 1 root root    14 Oct 21 15:03 /usr/lib/libcmocka.so -&gt; libcmocka.so.0*\nlrwxrwxrwx 1 root root    18 Oct 21 15:03 /usr/lib/libcmocka.so.0 -&gt; libcmocka.so.0.3.1*\n-rwxrwxrwx 1 root root 77216 Oct 21 15:02 /usr/lib/libcmocka.so.0.3.1*\n</code></pre>\n"}, {"tags": ["c", "random-sample"], "comments": [{"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1445435462, "post_id": 33260957, "comment_id": 54323314, "body": "What is your expected output and what is the actual output? Give an example of input."}, {"owner": {"reputation": 357, "user_id": 5459868, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ad96fbf5de6508ad668a54f64564a5d?s=128&d=identicon&r=PG", "display_name": "some_name", "link": "https://stackoverflow.com/users/5459868/some-name"}, "reply_to_user": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1445435688, "post_id": 33260957, "comment_id": 54323456, "body": "The output I get is a m<i>n matrix that just consists of the same 2 random normal distributed numbers. I expect the output to be a m</i>n matrix with m<i>n random normal distributed numbers. The only input is just the size go the matrix, m and n. I am trying to make the Box muller transform on polar form, but i am not only supposed to make 2 random numbers, but m</i>n"}, {"owner": {"reputation": 1792, "user_id": 1836044, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d266fe239d1eaef65e0e234a4dae7a2c?s=128&d=identicon&r=PG", "display_name": "parrowdice", "link": "https://stackoverflow.com/users/1836044/parrowdice"}, "edited": false, "score": 0, "creation_date": 1445436314, "post_id": 33260957, "comment_id": 54323954, "body": "Can you edit your question to include <code>malloc_array2d</code> and <code>free_array2d(A)</code> please?"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1445436461, "post_id": 33260957, "comment_id": 54324080, "body": "Can you give an example of the matrix?"}, {"owner": {"reputation": 357, "user_id": 5459868, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ad96fbf5de6508ad668a54f64564a5d?s=128&d=identicon&r=PG", "display_name": "some_name", "link": "https://stackoverflow.com/users/5459868/some-name"}, "edited": false, "score": 0, "creation_date": 1445436651, "post_id": 33260957, "comment_id": 54324240, "body": "if for example i input m=3 and n=3 i get a matrix looking like this [-0.03,-1.84,-0.03;-1.84,-0.03,-1.84;-0.03,-1.84-0.03]  but what i really want is 9 different normally distributed numbers, where they pairwise are independently normally distributed."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1445626622, "post_id": 33260957, "comment_id": 54417897, "body": "what do you mean with <i>normally distributed numbers</i> ? are they distributed with a normal(0, 1), diferent mean, different standard dev?"}, {"owner": {"reputation": 357, "user_id": 5459868, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ad96fbf5de6508ad668a54f64564a5d?s=128&d=identicon&r=PG", "display_name": "some_name", "link": "https://stackoverflow.com/users/5459868/some-name"}, "edited": false, "score": 0, "creation_date": 1445627006, "post_id": 33260957, "comment_id": 54418106, "body": "oooh, I already fixed my problem - but yeah the user would have to input mean and variance too :)"}], "answers": [{"tags": [], "owner": {"reputation": 1792, "user_id": 1836044, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d266fe239d1eaef65e0e234a4dae7a2c?s=128&d=identicon&r=PG", "display_name": "parrowdice", "link": "https://stackoverflow.com/users/1836044/parrowdice"}, "is_accepted": true, "score": 4, "last_activity_date": 1445527481, "last_edit_date": 1445527481, "creation_date": 1445437146, "answer_id": 33261830, "question_id": 33260957, "link": "https://stackoverflow.com/questions/33260957/c-trying-to-make-a-matrix-of-mn-random-normal-distributed-numbers-box-muller/33261830#33261830", "title": "C: Trying to make a matrix of m*n random normal distributed numbers (Box muller 2 on polar form)", "body": "<p>Your problem is that you call <code>srand(time(NULL));</code> <em>every</em> time you generate random numbers in your <code>rejection_sampling</code> function.</p>\n\n<p>You need to move <code>srand(time(NULL));</code> to the start of your <code>main</code> function :)</p>\n\n<p><strong>Explanation</strong></p>\n\n<p>Imagine you have a list of \"random\" numbers, and every time you call <code>rand()</code> it gives you the value in the list, then moves onto the next value. The problem is that every time you run your program, you will get the same sequence of \"random\" numbers. The solution is to pick a \"random\" starting position in that list - which is \"seeding\" - generally done by using the current time. What you are inadvertently doing, is resetting to the same position in this \"random\" list every time you want a random numbers, so you will get the same values (per second at least).</p>\n"}, {"tags": [], "owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1445437314, "creation_date": 1445437314, "answer_id": 33261898, "question_id": 33260957, "link": "https://stackoverflow.com/questions/33260957/c-trying-to-make-a-matrix-of-mn-random-normal-distributed-numbers-box-muller/33261898#33261898", "title": "C: Trying to make a matrix of m*n random normal distributed numbers (Box muller 2 on polar form)", "body": "<p>Maybe it goes too fast and <code>srand(time(NULL));</code> gives you always the same seed. Try giving a feed-back to <code>rejection_sampling</code> like this</p>\n\n<pre><code>rv rejection_sampling(int feedback){ //This feedback could be the i in your loop\n    // ...\n    srand(time(NULL)+feedback);\n</code></pre>\n\n<p>Or simply seed the random before loop and don't seed it again</p>\n"}], "owner": {"reputation": 357, "user_id": 5459868, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ad96fbf5de6508ad668a54f64564a5d?s=128&d=identicon&r=PG", "display_name": "some_name", "link": "https://stackoverflow.com/users/5459868/some-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 33261830, "answer_count": 2, "score": 0, "last_activity_date": 1445527481, "creation_date": 1445434907, "last_edit_date": 1445436943, "question_id": 33260957, "link": "https://stackoverflow.com/questions/33260957/c-trying-to-make-a-matrix-of-mn-random-normal-distributed-numbers-box-muller", "title": "C: Trying to make a matrix of m*n random normal distributed numbers (Box muller 2 on polar form)", "body": "<p>I'm trying to fill an <code>m x n</code> array with normally-distributed random numbers, where normally-distributed numbers are defined as seen in the code, where you first have to find two uniformly distributed numbers and r, to define 2 normally-distributed numbers. When I run the program it just prints the same two numbers over and over in the array, as if variable <code>rv_new</code> in the code just keeps being the same struct. </p>\n\n<p>Here are the parts of the code that are supposed to generate and print the numbers.  I'm guessing that maybe the mistake has something to do with the <code>rejection_sampling()</code> function (is it stupid to make it as a struct?).</p>\n\n<pre><code>typedef struct rv rv;\nstruct rv {\n    double v1;\n    double v2;\n    double r;\n};\n\n/*Function prototypes*/\ndouble **malloc_array2d(size_t m, size_t n);\nrv rejection_sampling(void);\nvoid free_array2d(double ** B);\n\nint main(void) {\n\n    unsigned int m, n;\n    double **A;\n\n    ... (user input to get m and n)\n\n    /*Dynamically allocate a m-by-n array of doubles*/\n    A = malloc_array2d(m,n);\n    if (A == NULL) {\n        free_array2d(A);\n        printf(\"Memory allocation failed\\n\");\n        return EXIT_FAILURE;\n    }\n\n    //it is here I try to make the matrix: \n    for (int i = 0; i &lt;= m * n - 1; i++) {\n        if (i % 2 == 0) {\n            rv rv_new = rejection_sampling();\n            A[0][i] = rv_new.v1 * (sqrt(-2 * log(pow(rv_new.r, 2)))) / rv_new.r; \n            A[0][i+1] = rv_new.v2 * (sqrt(-2 * log(pow(rv_new.r, 2)))) / rv_new.r;      \n        }\n        else {;}\n    }\n\n    /*printing of the 2D-array with the m*n normally uniformly distributed numbers*/\n    for (int i = 0; i &lt; m; i++) {\n        for (int j = 0; j &lt; n; j++) {\n            printf(\" %5.2f\", A[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\n/*Free memory and return*/\nfree_array2d(A);\nreturn 0;\n\n}\n\nrv rejection_sampling(void) {    // Function that returns a struct containing a sample (v1,v2) and r\n    double v1 = 0;\n    double v2 = 0;\n    double r = 0;\n    double Randmax = RAND_MAX;\n\n    srand(time(NULL));                               //Seed to the rand-function\n\n    do {                                           \n        v1 = rand() / Randmax;  //uniformly distributed random numbers between [0,1]\n        v2 = rand() / Randmax;\n        v1 = -1 + 2 * v1;      //uniformly distributed random numbers between [-1,1]\n        v2 = -1 + 2 * v2;\n        r = sqrt(pow(v1, 2) + pow(v2, 2));\n\n    } while (r &gt;= 1 || r == 0);\n\n    rv new_rv;                                      //creates struct\n    new_rv.v1 = v1;\n    new_rv.v2 = v2;\n    new_rv.r = r;\n\n    return new_rv;\n}\n\nvoid free_array2d(double ** A){   \nif ( A == NULL) return;\nfree(A[0]);                   \nfree(A);                      \nreturn;\n}\n\ndouble ** malloc_array2d(size_t m, size_t n){    \n\ndouble **A;\nsize_t i;\n\nA = (double **) malloc(m*sizeof(double *));     \nif (A == NULL)\n    return NULL;\n\nA[0]=(double *)malloc(m*n*sizeof(double));    \nif ( A[0] == NULL) {\n    free(A);\n    return NULL;}\n\nfor(i = 1; i &lt; m; i++)\n    A[i]=A[0]+i*n;     \n    return A;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf", "strcmp"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1445434883, "post_id": 33260914, "comment_id": 54322834, "body": "What does &quot;it wont work&quot; mean? How are the variables declared?"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1445434941, "post_id": 33260914, "comment_id": 54322884, "body": "Please add the code part where you declare the variables and the actual behaviour"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445435094, "post_id": 33260914, "comment_id": 54323003, "body": "Please provide a complete and verifiable example, the above code does not compile."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1445435314, "post_id": 33260914, "comment_id": 54323181, "body": "try <code>&quot; %[^:]:%[^:]:%f:%d:%d&quot;</code>"}, {"owner": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 0, "creation_date": 1445436181, "post_id": 33260914, "comment_id": 54323853, "body": "The things that happens is, i enter the 1st ISBN no. from the file and it works, but then once i use the 2nd or 3rd or 4th, it gets stuck in a infinite loop, i&#39;m assuming this is due to the while condition not being met."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 0, "creation_date": 1445439493, "post_id": 33262018, "comment_id": 54326489, "body": "Using this, evn if the ISBN&#39;s dnt match it breaks :\\"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 1, "creation_date": 1445439544, "post_id": 33262018, "comment_id": 54326530, "body": "@MuntaseerAlam  Did you forgot the space before <code>fscanf</code> ? Because it worked perfectly for me ."}, {"owner": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 0, "creation_date": 1445439656, "post_id": 33262018, "comment_id": 54326631, "body": "Would u please post your whole source code, it would help alot."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 0, "creation_date": 1445439752, "post_id": 33262018, "comment_id": 54326692, "body": "@MuntaseerAlam Yes , sure ."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 0, "creation_date": 1445439944, "post_id": 33262018, "comment_id": 54326839, "body": "@MuntaseerAlam I have posted program .Please take a look ."}, {"owner": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 0, "creation_date": 1445440856, "post_id": 33262018, "comment_id": 54327525, "body": "For some reason this is not working on mine, i&#39;m using codeblocks btw and am quite new to coding. I do understand your code, but in mine it isnt working. Mine just exits without printing anything regardless of ISBNs matching or not. :\\"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "edited": false, "score": 1, "creation_date": 1445441147, "post_id": 33262018, "comment_id": 54327732, "body": "@MuntaseerAlam I tried it on code blocks also , but I work correctly for me ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 0, "last_activity_date": 1445444456, "last_edit_date": 1445444456, "creation_date": 1445437634, "answer_id": 33262018, "question_id": 33260914, "link": "https://stackoverflow.com/questions/33260914/in-c-how-do-i-scan-from-a-file-and-compare-with-another-scan/33262018#33262018", "title": "In C how do i scan from a file and compare with another scan", "body": "<p>You can modify your loop as follows -</p>\n\n<pre><code> if(fp!=NULL){                         // checking success of fopen\nwhile(fscanf(fp,\" %[^:]:%[^:]:%f:%d:%d\",ISBN1, BT, &amp;BP, &amp;dis, &amp;quant)==5){   //check success of fscanf\n\n       if(strcmp(ISBN,ISBN1)==0){     // compare both strins \n               break;                 // if equal break \n          }\n      }\n printf(\"\\n%.2f\", BP);                // print corresponding value\n}\n</code></pre>\n\n<p>Using <code>fscanf</code> as condition for your <code>while</code> loop (loop will iterate until <code>fscanf</code> fails )-</p>\n\n<pre><code>while(fscanf(fp,\" %[^:]:%[^:]:%f:%d:%d\",ISBN1, BT, &amp;BP, &amp;dis, &amp;quant)==5)\n   /*            ^ don't forget to put this space its intentionally there */\n</code></pre>\n\n<p>Also note the changes made in <code>fscanf</code>'s format specifiers . </p>\n\n<h2>EDIT</h2>\n\n<p>Whole program -</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main(void)\n{\n     FILE *fp;\n     char ISBN[50],ISBN1[50],BT[50];\n     int dis,quant;\n     float BP;\n     fp=fopen(\"Results.txt\",\"r\");\n     scanf(\"%s\", ISBN);\n\n     if(fp!=NULL){\n        while(fscanf(fp,\" %[^:]:%[^:]:%f:%d:%d\",ISBN1, BT, &amp;BP, &amp;dis, &amp;quant)==5){\n\n            if(strcmp(ISBN,ISBN1)==0) \n                 break;\n          }\n        printf(\"\\n%.2f\", BP);\n        fclose(fp);\n      }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1445441065, "creation_date": 1445441065, "answer_id": 33263244, "question_id": 33260914, "link": "https://stackoverflow.com/questions/33260914/in-c-how-do-i-scan-from-a-file-and-compare-with-another-scan/33263244#33263244", "title": "In C how do i scan from a file and compare with another scan", "body": "<p>OP is certainly having problems with entering a title with spaces in it like \"C How to Program\" which will only populate <code>ISBN</code> with <code>\"C\"</code>.</p>\n\n<p>The key problem is using <code>scanf()</code> and <code>fscanf()</code> incorrectly. Rather than mess with that approach, uses <code>fgets()</code> to read user input and file input and then process the data that was read.</p>\n\n<pre><code>char ISBN[100+2]; // +1 \\n \\0\nprintf(\"\\nEnter the ISBN:\");\nfgets(ISBN, sizeof ISBN, stdin);\nISBN[strcspn(ISBN, \"\\r\\n\")] = 0; // lop off end-of-line of line chars\n\nchar fileline[700];\nwhile (fgets(fileline, sizeof fileline, fp)) {\n  if (sscanf(fileline,\"%99[^:]:%511[^:]:%f:%d:%d\",ISBN1, BT, &amp;BP, &amp;dis, &amp;quant) == 5) {\n    if (strcmp(ISBN, ISBN1) == 0) {\n      printf(\"%.2f\", BP);\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5467133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1070020336343683/picture?type=large", "display_name": "Anononon", "link": "https://stackoverflow.com/users/5467133/anononon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 33262018, "answer_count": 2, "score": 0, "last_activity_date": 1445444456, "creation_date": 1445434784, "last_edit_date": 1445437592, "question_id": 33260914, "link": "https://stackoverflow.com/questions/33260914/in-c-how-do-i-scan-from-a-file-and-compare-with-another-scan", "title": "In C how do i scan from a file and compare with another scan", "body": "<p>Why does my code not compare my strings properly, it does not exit the do loop even when I enter same as from the file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char ISBN[100];\n    char ISBN1[100];\n    char BT [512];\n    float BP;\n    int dis;\n    int quant;\n\n    FILE *fp;\n\n    fp=fopen(\"bookstore.txt\", \"r\");\n    printf(\"\\nEnter the ISBN:\");\n    scanf(\"%s\", ISBN);\n    do\n        {\n            fscanf(fp,\"%[^':']:%[^':']:%f:%d:%d\",ISBN1, BT, &amp;BP, &amp;dis, &amp;quant);\n        }\n    while(strcmp(ISBN, ISBN1) !=0);\n    printf(\"%.2f\", BP);\n}\n</code></pre>\n\n<p>This is the data my the file contains:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>9780273776840:C How to Program:95.90:30:0  \n9780131193710:The C Programming Language:102.90:20:30  \n9780470108543:Programming fo Dummies:60.20:25:50  \n9781118380932:Hacking for Dummies:50.90:78:0  \n9781939457318:The 20/20 Diet:80.90:73:10\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 5550, "user_id": 2416394, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/daugZ.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/2416394/samuel"}, "edited": false, "score": 2, "creation_date": 1445434445, "post_id": 33260747, "comment_id": 54322549, "body": "Nope, you are free to shoot you in your own knee at will in C/C++. Bookkeeping every single address would be quite an overhead."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1445434478, "post_id": 33260747, "comment_id": 54322574, "body": "You could start a thread which checks the contents of the memory area every x second... not recommended though."}, {"owner": {"reputation": 597, "user_id": 3780453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb497d2db4258621936c283d2fa22e67?s=128&d=identicon&r=PG&f=1", "display_name": "Slyps", "link": "https://stackoverflow.com/users/3780453/slyps"}, "edited": false, "score": 0, "creation_date": 1445434959, "post_id": 33260747, "comment_id": 54322905, "body": "C doesn&#39;t have anything for that, but your operating system might provide debugging API that could do what you want. Still, as Samuel said, it will be quite an overhead, and you might be hunted with hayforks and fire."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1445438082, "post_id": 33260747, "comment_id": 54325366, "body": "Look into valgrind and malloc with guard pages."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1445438217, "post_id": 33260747, "comment_id": 54325480, "body": "@MichaelWalz that it just a terrible comment, (because I did not think of it first:).  You should promote it to an answer so I can give you an upvote."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445438636, "post_id": 33260747, "comment_id": 54325789, "body": "@MartinJames done, thanks. I deleted my comment."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445438688, "post_id": 33262383, "comment_id": 54325835, "body": "I may actually use this plan later myself:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445438913, "post_id": 33262383, "comment_id": 54326027, "body": "Oh.. it&#39; not there.  I&#39;ll have to import it explicitly from Kernel32:(   I&#39;ll make a separate unit for it so I can use it across projects."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445439067, "post_id": 33262383, "comment_id": 54326143, "body": "@MartinJames what is not where ??`Which SDK do you have ??"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445443523, "post_id": 33262383, "comment_id": 54329369, "body": "S&#39;OK - I have it.  I mistyped the name, but I have VirtualAlloc() and VirtualAllocEx() to chose from now:)"}, {"owner": {"reputation": 744, "user_id": 4877405, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/104Vt.jpg?s=128&g=1", "display_name": "Ringo_D", "link": "https://stackoverflow.com/users/4877405/ringo-d"}, "edited": false, "score": 0, "creation_date": 1451013914, "post_id": 33262383, "comment_id": 56661590, "body": "What is the same thing on *nix?"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1445438602, "creation_date": 1445438602, "answer_id": 33262383, "question_id": 33260747, "link": "https://stackoverflow.com/questions/33260747/is-it-possible-to-detect-a-block-of-memory-was-changed-by-stray-or-wild-pointer/33262383#33262383", "title": "Is it possible to detect a block of memory was changed by stray or wild pointer on C?", "body": "<p>If you are on Windows : don't use <code>malloc</code> but <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx\" rel=\"nofollow\">VirtualAlloc</a>. Then fill the memory with whatever you want, then use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366898(v=vs.85).aspx\" rel=\"nofollow\">VirtualProtect</a> to protect that memory.</p>\n\n<p>Then as soon as someone writes to that memory region, your program will crash (or crash into the debugger if debugged). For other systems use a similar method (depending on the system).</p>\n"}], "owner": {"reputation": 744, "user_id": 4877405, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/104Vt.jpg?s=128&g=1", "display_name": "Ringo_D", "link": "https://stackoverflow.com/users/4877405/ringo-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1445438602, "creation_date": 1445434395, "last_edit_date": 1445434433, "question_id": 33260747, "link": "https://stackoverflow.com/questions/33260747/is-it-possible-to-detect-a-block-of-memory-was-changed-by-stray-or-wild-pointer", "title": "Is it possible to detect a block of memory was changed by stray or wild pointer on C?", "body": "<p>For example, I have a block of memory allocated on C.</p>\n\n<pre><code>void* block = malloc(1024*10);\n</code></pre>\n\n<p>In runtime, I never change it manually. But, it might be changed because of memory corruption, stray pointer or wild pointer for example.</p>\n\n<pre><code>memset(straypointer, 1, 1);\n</code></pre>\n\n<p>This will happen in very very rare, BUT, it still has the chance.<br>\nSo, I wonder whether is possible to know my memory block has be changed unexpected.  </p>\n\n<p>I guess some kind of memory pool can do it, but I don't have further idea.</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 5, "creation_date": 1445433345, "post_id": 33260333, "comment_id": 54321777, "body": "<code>x</code> in <code>main</code> is not a pointer, it&#39;s an array (which decays to a pointer in many uses, but is not the same; you can&#39;t assign to <code>x</code> directly). <code>arr</code> in <code>foo</code> is a pointer."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1445433397, "post_id": 33260333, "comment_id": 54321810, "body": "<code>void foo(int arr[])</code>is actually exactly the same as <code>void foo(int *arr)</code>."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 2, "creation_date": 1445433455, "post_id": 33260333, "comment_id": 54321855, "body": "To add to the above comment. <code>x</code> in <code>main()</code> is a non-modifiable L-value. You cannot assign to it or increment it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445433729, "post_id": 33260333, "comment_id": 54322047, "body": "Gj at finding a duplicate, I failed but came across some other posts that may be of interest: <a href=\"http://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c\">Is array name a pointer?</a>, <a href=\"http://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a>."}], "owner": {"reputation": 97, "user_id": 2049708, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0e73970ce326485f89eee9df46ffecd4?s=128&d=identicon&r=PG", "display_name": "mrsinister", "link": "https://stackoverflow.com/users/2049708/mrsinister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1445433545, "answer_count": 0, "score": 0, "last_activity_date": 1445433223, "creation_date": 1445433223, "question_id": 33260333, "link": "https://stackoverflow.com/questions/33260333/incrementing-a-pointer-in-a-function", "closed_reason": "Duplicate", "title": "Incrementing a pointer in a function", "body": "<p>I have the following function:</p>\n\n<pre><code>void foo(int arr[])\n{\n   arr++;        // No error. If I dereference arr and print it, I get 2\n}\n\nint main()\n{\n  int x[3];\n  x[0]=1;\n  x[1]=2;\n  x[2]=3;\n  foo(x);       //No error\n  x++;          //Error. \n}\n</code></pre>\n\n<p>Why don't I get an error when I carry out the operation in foo() but I get one when I do it in main?\nAs far as I know, both arr in foo() and x in main() are pointers to the exact same location, the first element in x. So I should've been able to perform both x++ and arr++.</p>\n"}, {"tags": ["c", "windows", "cmd", "tasklist"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1445432431, "post_id": 33259911, "comment_id": 54321086, "body": "Use <code>popen</code> instead of <code>system</code>, then you can process the output prior to displaying it."}, {"owner": {"reputation": 191, "user_id": 3867884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f7f03940f62d434c8f6a3a937deba5?s=128&d=identicon&r=PG&f=1", "display_name": "Steen", "link": "https://stackoverflow.com/users/3867884/steen"}, "edited": false, "score": 0, "creation_date": 1445434114, "post_id": 33259911, "comment_id": 54322318, "body": "Or pipe output to a file, for processing, before display. Use <code>&gt;filename</code>"}, {"owner": {"reputation": 1, "user_id": 5471559, "user_type": "registered", "profile_image": "https://graph.facebook.com/897735493613411/picture?type=large", "display_name": "Jaime Elso de Blas", "link": "https://stackoverflow.com/users/5471559/jaime-elso-de-blas"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1445456950, "post_id": 33259911, "comment_id": 54337077, "body": "Can you show me a example with popen? I don&#39;t know how it works. @PaulR"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1445461573, "post_id": 33259911, "comment_id": 54339548, "body": "Lots of examples right here on StackOverflow, see e.g. <a href=\"http://stackoverflow.com/questions/30259086/how-to-use-popen\">stackoverflow.com/questions/30259086/how-to-use-popen</a>"}], "owner": {"reputation": 1, "user_id": 5471559, "user_type": "registered", "profile_image": "https://graph.facebook.com/897735493613411/picture?type=large", "display_name": "Jaime Elso de Blas", "link": "https://stackoverflow.com/users/5471559/jaime-elso-de-blas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 694, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477073784, "creation_date": 1445432115, "last_edit_date": 1477073784, "question_id": 33259911, "link": "https://stackoverflow.com/questions/33259911/tasklist-in-c-image-name-filter", "title": "Tasklist in C, Image Name filter", "body": "<p>I'm running the tasklist command from a program written in C, the problem is that I need the program to return to the screen just the \"Image Name\" column omitting the other columns.  Is there any way to filter it to just leave me the name processes and not the PID column or other?</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n\nprintf(\"IP number:\\t\");\nscanf(\"%s\", ip);\n\nsprintf(command, \"tasklist /fo TABLE /nh /s %s\", ip);\nsystem(command);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11", "casting", "char"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 4, "creation_date": 1445431629, "post_id": 33259690, "comment_id": 54320479, "body": "This is pretty much undefined behaviour. It works because probably out of bounds accessed memory has value 0."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1445431659, "post_id": 33259690, "comment_id": 54320502, "body": "For the second case, C and C++ <a href=\"http://stackoverflow.com/q/32586834/1708801\">guarantees the order of  digit characters</a>"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1445431676, "post_id": 33259690, "comment_id": 54320519, "body": "You are confusing strings and chars. A <code>char</code> is always a single character."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1445432091, "post_id": 33259690, "comment_id": 54320828, "body": "Please pick one of C and C++."}, {"owner": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445432148, "post_id": 33259690, "comment_id": 54320863, "body": "@FUZxxl Is there a difference? I am interested in both."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445433450, "post_id": 33259690, "comment_id": 54321849, "body": "@Slazer There might be, I don&#39;t know. Point is, asking about \u201csomething in C/C++\u201d is not much different from \u201csomething in Ada/Pascal/PHP.\u201d Few people are knowledgeable about tiny language details in <i>both</i> of C and C++, so policy is that you ask a question only for one language at a time. If you are interested in an answer for both, then ask two questions, you can refer to the first one in your second."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445434244, "post_id": 33259690, "comment_id": 54322406, "body": "I am not a downvoter but as the question reads now, it sure seems like a C question. Are you compiling as C++? If so you should note that but why add the C tag? Are you compiling for both, if so you should also specify that in your question. There are cases where the answer in C and C++ will be very different which can lead to some confusing answers. Although I don&#39;t know if I agree with @FUZxxl that this particular question should be two questions."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 5, "creation_date": 1445432148, "post_id": 33259753, "comment_id": 54320860, "body": "@Slazer That&#39;s undefined behaviour. It may work, but it can also make d&#230;mons fly out of your nose."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 0, "creation_date": 1445432194, "post_id": 33259753, "comment_id": 54320891, "body": "@Slazer Ah, I see, that&#39;s what you mean. Will clarify that."}, {"owner": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 0, "creation_date": 1445432215, "post_id": 33259753, "comment_id": 54320905, "body": "Well it may work and it works in my case. So the statement &quot;This will not work at all&quot; is false. I understand what undefined behaviour is, though."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 0, "creation_date": 1445432409, "post_id": 33259753, "comment_id": 54321063, "body": "@Slazer OK, fixed it."}, {"owner": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 0, "creation_date": 1445433560, "post_id": 33259753, "comment_id": 54321934, "body": "Its quite ridiculous there is no such function is C/C++ library. The stoi() mentioned by David Haim is perfect, except only for strings. It even has exceptions!"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1445433636, "post_id": 33259753, "comment_id": 54321988, "body": "The <a href=\"http://stackoverflow.com/q/781668/1708801\">C version of the question</a> on order of digits."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1445433977, "post_id": 33259753, "comment_id": 54322225, "body": "@ShafikYaghmour Thank you very much!"}, {"owner": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 0, "creation_date": 1445434241, "post_id": 33259753, "comment_id": 54322405, "body": "I just wonder how come that there is no warning because of the typecast (even with -Wall and -Wextra)? Because my first try was simply write {char c; int i=c;} which would give me ASCII values instead of digits. A warning would definitely be in order here."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 5, "last_activity_date": 1446649197, "last_edit_date": 1495540317, "creation_date": 1445431653, "answer_id": 33259753, "question_id": 33259690, "link": "https://stackoverflow.com/questions/33259690/is-char-variable-always-represented-as-dereferenced-char2-with-x-0/33259753#33259753", "title": "Is char variable always represented as dereferenced char*[2] with {&#39;x&#39;,\\0}?", "body": "<p>This compiles but it's undefined behavior.</p>\n\n<p>A <code>char</code> is just a character. No null byte following. <code>std::atoi</code> expects a null byte, though, so invoking <code>std::atoi(&amp;c)</code> compiles but yields undefined behavior. This line,</p>\n\n<pre><code>int i = std::atoi(\"x\");\n</code></pre>\n\n<p>is well-defined, though, because the string <code>\"x\"</code> is a <code>char[2]</code> and null-terminated.</p>\n\n<pre><code>int i = c - '0';\n</code></pre>\n\n<p>is alright because<sup>1</sup> the <a href=\"https://stackoverflow.com/q/32586834/1708801\">C++11 standard</a> and the <a href=\"https://stackoverflow.com/q/781668/1708801\">C99 standard</a><sup>2</sup> guarantee the order of character digits.</p>\n\n<hr>\n\n<p><sub><sup>1</sup> as @ShafikYaghmour noted in the comments to your question</sub></p>\n\n<p><sub><sup>2</sup> Thanks to @ShafikYaghmour again!</sub></p>\n"}, {"comments": [{"owner": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "edited": false, "score": 0, "creation_date": 1445433231, "post_id": 33259838, "comment_id": 54321676, "body": "Using a string seems to me too heavy for such a simple task. The exception functionality seems nice, though."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1445431881, "creation_date": 1445431881, "answer_id": 33259838, "question_id": 33259690, "link": "https://stackoverflow.com/questions/33259690/is-char-variable-always-represented-as-dereferenced-char2-with-x-0/33259838#33259838", "title": "Is char variable always represented as dereferenced char*[2] with {&#39;x&#39;,\\0}?", "body": "<p><code>atoi</code> expects null terminated C-string. </p>\n\n<p>since you didn't provide it (you provided a pointer to character) this is undefined behaviour.</p>\n\n<p>for the second line of code - this generally works if you can guarantee that the character is indeed a digit. for example , the character <code>#</code> will yield a result but may not the result you'd expect.</p>\n\n<p>some solution is to use <code>std::stoi</code>:</p>\n\n<pre><code>try{ int x = std::stoi(std::string() + c) } catch(...) {/*handle*/}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1445432709, "post_id": 33259842, "comment_id": 54321299, "body": "Most likely because you claimed that an undefined program will work. The actual value (possibly) stored in <code>&amp;c + 1</code> doesn&#39;t matter, as accessing it has undefined behaviour."}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1445433829, "post_id": 33259842, "comment_id": 54322117, "body": "But it&#39;s the explanation of why his program worked (at least when OP tested it). Undefined behaviour != not working, in the best case it won&#39;t work, in the worst it will work when you test it and crash later (Like this)"}], "tags": [], "owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1445431890, "creation_date": 1445431890, "answer_id": 33259842, "question_id": 33259690, "link": "https://stackoverflow.com/questions/33259690/is-char-variable-always-represented-as-dereferenced-char2-with-x-0/33259842#33259842", "title": "Is char variable always represented as dereferenced char*[2] with {&#39;x&#39;,\\0}?", "body": "<p>This will work as long as next to the memory space where c is allocated is a \\0. In other words, it's just luck. You should use <code>int i = c - '0'</code></p>\n\n<p>But be aware that every character will be mapped to int (f.e. <code>int i = 'a' - '0'</code>)</p>\n\n<p>To avoid this you could do something like:</p>\n\n<pre><code>int i = c=&gt;'0' &amp;&amp; c&lt;='9' ? c-'0' : -1; //-1 represents not valid values\n</code></pre>\n"}], "owner": {"reputation": 4080, "user_id": 1459339, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edd61ce7298383d8686c8fecb14b5708?s=128&d=identicon&r=PG", "display_name": "Slazer", "link": "https://stackoverflow.com/users/1459339/slazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33259753, "answer_count": 3, "score": 0, "last_activity_date": 1446649197, "creation_date": 1445431492, "question_id": 33259690, "link": "https://stackoverflow.com/questions/33259690/is-char-variable-always-represented-as-dereferenced-char2-with-x-0", "title": "Is char variable always represented as dereferenced char*[2] with {&#39;x&#39;,\\0}?", "body": "<p>I tried this method to convert a char digit to an integer digit ('3'->3) and it seems to work. </p>\n\n<pre><code>char c='x';\nint i=atoi(&amp;c);\n</code></pre>\n\n<p>My question is, will this always work?</p>\n\n<p>Is there always a NULL character after the first character?</p>\n\n<p>There is another way to do this using implicit typecast, but I am not sure it is a good practice. Actually, I am pretty surprised there are no warnings even using -Wall and -Wextra. </p>\n\n<pre><code>int i = c - '0';\n</code></pre>\n\n<p>Note I am using GCC 4.8.2 and MinGW.</p>\n"}, {"tags": ["c", "time", "parallel-processing", "mpi", "clock"], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1445431519, "creation_date": 1445431519, "answer_id": 33259699, "question_id": 33259582, "link": "https://stackoverflow.com/questions/33259582/mpi-total-run-time/33259699#33259699", "title": "MPI Total run time", "body": "<p>Yes of course what you get is correct.</p>\n\n<p>If you want the TOTAL TIME, i.e. the sum of the time spent in every process, then send the local <code>time_spent</code> of every node in the master node, perform the summation of the local <code>time_spent</code>'s there and print it.</p>\n"}, {"tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 7, "last_activity_date": 1445433096, "creation_date": 1445433096, "answer_id": 33260287, "question_id": 33259582, "link": "https://stackoverflow.com/questions/33259582/mpi-total-run-time/33260287#33260287", "title": "MPI Total run time", "body": "<p>Assuming what you want is the sum of the individual times for each of your processes, you will need to:</p>\n\n<ol>\n<li>Move your measure of the end of time before the call to <code>MPI_Finalize()</code>, as you'll need an extra communication; </li>\n<li>Collect the individual times via an <code>MPI_Reduce()</code> to process #0 (for example); and finally</li>\n<li>Print this time with process 0.</li>\n</ol>\n\n<p>Aside from this, unless you have a compelling reason for doing otherwise, I would encourage you to use <code>MPI_Wtime()</code> as timer rather than the somewhat misleading <code>clock()</code> timer.</p>\n\n<p>The code could then look as follow:</p>\n\n<pre><code>int main( int *argc, char* argv[] ) {\n    MPI_Init( &amp;argc, &amp;argv );\n    double tbeg = MPI_Wtime();\n\n    // a lot of stuff here\n\n    // you might want a barrier here...\n    // MPI_Barrier( MPI_COMM_WORLD );\n    double elapsedTime = MPI_Wtime() - tbeg;\n    double totalTime;\n    MPI_Reduce( &amp;elapsedTime, &amp;totalTime, 1, MPI_DOUBLE, MPI_SUM, 0, MPI_COMM_WORLD );\n    if ( rank == 0 ) {\n        printf( \"Total time spent in seconds id %f\\n\", totalTime );\n    }\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 4950263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-1p8YufmiRAs/AAAAAAAAAAI/AAAAAAAAALw/8wyB0q464BE/photo.jpg?sz=128", "display_name": "Isma Haro", "link": "https://stackoverflow.com/users/4950263/isma-haro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 1, "accepted_answer_id": 33260287, "answer_count": 2, "score": 3, "last_activity_date": 1445433096, "creation_date": 1445431202, "last_edit_date": 1445431776, "question_id": 33259582, "link": "https://stackoverflow.com/questions/33259582/mpi-total-run-time", "title": "MPI Total run time", "body": "<p>I have one program (which calculates the matrix multiplication with cannon algorithm), is implemented in MPI for C, I have set a clock to see the TOTAL time of this program, with total I mean all the process sum.</p>\n\n<p>But as a result I get the time of each process.</p>\n\n<p>Part of my code at the beginning of my main:</p>\n\n<pre><code> clock_t begin, end;\n double time_spent;\n begin = clock();\n\n /* Initializing */\n MPI_Init (&amp;argc, &amp;argv);\n</code></pre>\n\n<p>Then at the end of my code I have:</p>\n\n<pre><code>  MPI_Finalize();\n\n  end = clock();\n  time_spent = (double)(end - begin) / CLOCKS_PER_SEC;\n  printf(\"\\n\\nTIME: %f SECONDS\\n\\n\", time_spent);\n</code></pre>\n"}, {"tags": ["c", "arrays", "conways-game-of-life"], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1445431266, "post_id": 33259536, "comment_id": 54320172, "body": "So this should be done first before all other functions? Create a toroidal 2D array and then my code stated in my question will work upon that new toroidal array?"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1445431592, "post_id": 33259536, "comment_id": 54320445, "body": "This is just a sketch; the direct access via <code>[i][j]</code> would be replaced by <code>GetElement(i,j)</code>. Note that additional fine-tuning may be necessary if <code>i</code> and <code>j</code> are permitted to be negative."}, {"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 1, "creation_date": 1445431722, "post_id": 33259536, "comment_id": 54320552, "body": "Ah so for example <code>if (GetElement(i + 1, j + 1) == 1</code> etc?"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1445431777, "post_id": 33259536, "comment_id": 54320588, "body": "Yes, exactly - the function &#39;makes the array toridial&#39; by performing suitable index manipulation."}, {"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1445431814, "post_id": 33259536, "comment_id": 54320609, "body": "Awesome dude. Thank you. Amazing username by the way!"}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": true, "score": 3, "last_activity_date": 1445431087, "creation_date": 1445431087, "answer_id": 33259536, "question_id": 33259436, "link": "https://stackoverflow.com/questions/33259436/making-a-2d-array-toroidal/33259536#33259536", "title": "Making a 2D array toroidal", "body": "<p>The 'toridiality' (if that is actually a word) could be implemented by using an accessor function which does the mapping (by using the division remainder operator) instead of the bracket operators on the arrays directly. The function could be implemented as follows, where <code>m</code> and <code>n</code> are the number of rows and columns of <code>board</code>, respectively.</p>\n\n<pre><code>int GetElement(int i, int j)\n{\n    return board[i % m][j % n];\n}\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1492, "favorite_count": 1, "accepted_answer_id": 33259536, "answer_count": 1, "score": 3, "last_activity_date": 1445432100, "creation_date": 1445430800, "last_edit_date": 1445432100, "question_id": 33259436, "link": "https://stackoverflow.com/questions/33259436/making-a-2d-array-toroidal", "title": "Making a 2D array toroidal", "body": "<p>How can I make the array toroidal (wrap bottom to top and left to right), i.e the leftmost cell is regarded as the rightmost cell, like [0][0] and [5][5] are the same cells in <code>int array[5][5]</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1445430947, "post_id": 33259430, "comment_id": 54319951, "body": "What <code>struct</code> are you talking about? There isn&#39;t any as of now in the code you have posted."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1445431032, "post_id": 33259430, "comment_id": 54320001, "body": "Aren&#39;t you getting warnings?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1445431145, "post_id": 33259430, "comment_id": 54320088, "body": "You can pass a variable by reference."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 61736, "user_id": 43846, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TGOxx.png?s=128&g=1", "display_name": "stuartd", "link": "https://stackoverflow.com/users/43846/stuartd"}, "edited": false, "score": 2, "creation_date": 1445431232, "post_id": 33259430, "comment_id": 54320150, "body": "@stuartd it&#39;s hard to return two values using <code>union</code>, though."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1445431427, "post_id": 33259430, "comment_id": 54320313, "body": "<a href=\"http://ideone.com/WrB2PG\" rel=\"nofollow noreferrer\">ideone.com/WrB2PG</a>"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1445431408, "creation_date": 1445431408, "answer_id": 33259653, "question_id": 33259430, "link": "https://stackoverflow.com/questions/33259430/how-to-return-two-values-in-one-function-without-using-struct/33259653#33259653", "title": "how to return two values in one function without using struct?", "body": "<p>You made the function almost right, it's the call that must be done differently.</p>\n\n<p>First, don't return <code>*gtr</code> from the function; return <code>average</code>. Do it at the end, though, not in the middle.</p>\n\n<p>Then, change the call to</p>\n\n<pre><code>int gtr;\nresult = calculate(ar,4, &amp;gtr);\nprintf(\"%lf %d\\n\",result, gtr);\n</code></pre>\n\n<p>Make sure that you set <code>*gtr</code> to zero before the second loop, otherwise it would remain uninitialized.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 5448630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206811297715131/picture?type=large", "display_name": "Daniel ", "link": "https://stackoverflow.com/users/5448630/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1445431719, "creation_date": 1445431719, "answer_id": 33259781, "question_id": 33259430, "link": "https://stackoverflow.com/questions/33259430/how-to-return-two-values-in-one-function-without-using-struct/33259781#33259781", "title": "how to return two values in one function without using struct?", "body": "<p>For return both value you can do this:</p>\n\n<pre><code>    double calculate(int ar[], int npts, int *gtr)\n    {\n        double total =0;\n        int i = 0;\n\n        double average;\n\n        for(i=0; i&lt;npts; i++)\n        {\n            total = total + ar[i];\n        }\n\n        average = total / npts;\n        return average;\n\n        for(i=0; i&lt;npts; i++)\n        {\n            if(average &lt; ar[i])\n            {\n                *gtr++; \n            }\n        }     \n\n        return avergage;\n    }\n</code></pre>\n\n<p>so, returning avergage you have the first variable, and using the puntator value of gtr you can have that value.</p>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": true, "score": 1, "last_activity_date": 1445433649, "last_edit_date": 1445433649, "creation_date": 1445431804, "answer_id": 33259809, "question_id": 33259430, "link": "https://stackoverflow.com/questions/33259430/how-to-return-two-values-in-one-function-without-using-struct/33259809#33259809", "title": "how to return two values in one function without using struct?", "body": "<p>from what i understand,you want to return the average,and somehow get the value of gtr.you can return the average value,and save the gtr value to another variable by using a pointer.</p>\n\n<pre><code>int main()\n{\n\n    int ar[4] = {1,2,3,0};\n    double result;\n    int gtr = 0;\n    result = calculate(ar,4,&amp;gtr);\n    printf(\"%lf\\n\",result );\n    printf(\"gtr : %d\\n\",gtr);\n\n\n    return 0;\n}\n\n\ndouble calculate(int ar[], int npts, int *gtr)\n{\n    double total = 0 , average;\n\n    int i = 0;\n\n    for(i=0; i&lt;npts; i++)\n    {\n        total = total + ar[i];\n    }\n\n    average = total / npts;\n\n    for( i = 0 ; i &lt; npts ; i++ )\n    {\n         if(average &lt; ar[i])\n                 {\n                      *gtr += 1; \n                  }\n           }\n    return average;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5359828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c41e89016bdff924019cff481a6d416?s=128&d=identicon&r=PG&f=1", "display_name": "stardust", "link": "https://stackoverflow.com/users/5359828/stardust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 33259809, "answer_count": 3, "score": -1, "last_activity_date": 1445433649, "creation_date": 1445430768, "question_id": 33259430, "link": "https://stackoverflow.com/questions/33259430/how-to-return-two-values-in-one-function-without-using-struct", "title": "how to return two values in one function without using struct?", "body": "<pre><code>        #include &lt;stdio.h&gt;\n        #include &lt;stdlib.h&gt;\n\n\n        double calculate(int ar[], int npts, int *gtr);\n\n\n        int main()\n        {\n\n            int ar[4] = {1,2,3,0};\n            double result;\n            result = calculate(ar,4, &amp;ar);\n            printf(\"%lf \",result );         \n\n\n            return 0;\n        }\n\n\n        double calculate(int ar[], int npts, int *gtr)\n        {\n            double total =0;\n            int i = 0;\n\n            double average;\n\n            for(i=0; i&lt;npts; i++)\n            {\n                total = total + ar[i];\n            }\n\n            average = total / npts;\n            return average;\n\n            for(i=0; i&lt;npts; i++)\n            {\n                if(average &lt; ar[i])\n                {\n                    *gtr++; \n                }\n            }     \n\n            return *gtr;\n        }\n</code></pre>\n\n<p>when i call function calculate i want to return both average and *gtr value\nbut avergage only average value return. *gtr is for counting how many numbers greater than average numbers in arrary. </p>\n"}, {"tags": ["c++", "c", "portability"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1445431018, "post_id": 33259429, "comment_id": 54319991, "body": "do you want to add a new <code>operator</code> to the language?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1445431028, "post_id": 33259429, "comment_id": 54319998, "body": "It is unclear what you are trying to ask.  can you demonstrate what you would like to replace?"}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445431956, "post_id": 33259429, "comment_id": 54320731, "body": "@NathanOliver I&#39;ve updated the question to make it clearer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445432149, "post_id": 33259429, "comment_id": 54320864, "body": "In C++ you&#39;d do this through inheritance."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1445432346, "post_id": 33259429, "comment_id": 54321016, "body": "it&#39;s still uncler what you&#39;re asking"}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1445432401, "post_id": 33259429, "comment_id": 54321055, "body": "@DavidHaim What is it that you think is unclear?"}], "answers": [{"comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1445432316, "post_id": 33259530, "comment_id": 54320992, "body": "this is extremly dangerous. you may undef some critical macro the system or the platform has supllied."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1445494328, "post_id": 33259530, "comment_id": 54349460, "body": "The problem with macros are that if redefinition will only have effect at compile time only in the compilation unit where it&#39;s redefined. The library will still use the variant that was defined during library compilation."}], "tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1445442733, "last_edit_date": 1445442733, "creation_date": 1445431072, "answer_id": 33259530, "question_id": 33259429, "link": "https://stackoverflow.com/questions/33259429/is-there-a-portable-way-of-defining-replaceable-function-variable-constant/33259530#33259530", "title": "Is there a portable way of defining replaceable function/variable/constant?", "body": "<p>Sure, for anything except operators. Note that C does not have operator overloading, so your question is mis-tagged.</p>\n\n<p>For functions/variables/constants, you could define a macro to perform the intended operation. When overloading (or, rather, replacing), <code>#undef</code> the macro and define a new one. Works for either C or C++, although incredibly dangerous.</p>\n\n<p>In C, overloading or replacing functions is not an option. Either you would have to use the preprocessor, as mentioned above, or actually edit the resulting binary to use your functions.</p>\n\n<p>In C++, you could make a polymorphic class that uses virtual functions, overriding the definition that was previously there. This would be the easiest solution to override the operation of the library itself.</p>\n\n<p>In either language, it would be extremely difficult to change the type of a variable or value of a constant without recompiling.</p>\n"}, {"comments": [{"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1445437155, "post_id": 33260033, "comment_id": 54324655, "body": "Tell me exactly the advantage of your virtual function over regular function pointers? Extra indirection comes at a cost."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1446642960, "post_id": 33260033, "comment_id": 54826876, "body": "It&#39;s context dependant. the functor approach allow for a stateful function."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": -2, "last_activity_date": 1445437104, "last_edit_date": 1445437104, "creation_date": 1445432441, "answer_id": 33260033, "question_id": 33259429, "link": "https://stackoverflow.com/questions/33259429/is-there-a-portable-way-of-defining-replaceable-function-variable-constant/33260033#33260033", "title": "Is there a portable way of defining replaceable function/variable/constant?", "body": "<ol>\n<li>Global function pointer ?</li>\n<li>Functor overload ?</li>\n</ol>\n\n<h3>Global function pointer</h3>\n\n<p>Let say your library defines a <code>doCoffee()</code> function this way:</p>\n\n<pre><code>void doCoffee_impl() { /* ... */ }\nvoid (doCoffee*)(void) = doCoffee_impl;\n</code></pre>\n\n<p>Your library users can then replace the behaviour of doCoffee by reaffecting the global variable.</p>\n\n<h3>Functor overload</h3>\n\n<p>But, hey! you're coding C++. Why not use a virtual <code>operator()</code> ?</p>\n\n<pre><code>struct Brewer\n{\n    virtual operator()() { /* ... */ }\n} brewer;\nbrewer *doCoffee = &amp;brewer;\n</code></pre>\n\n<p>Your users may overload this:</p>\n\n<pre><code>struct UserBrewer : public Brewer\n{\n    virtual operator()() { /* ... */ }\n} userBrewer;\ndoCoffee = &amp;userBrewer;\n</code></pre>\n\n<p>Let to the reader: either declare variables static in the source header or define it extern and define the variable in a provided compilation unit.</p>\n"}, {"comments": [{"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1445494021, "post_id": 33261386, "comment_id": 54349332, "body": "The problem here is that the one that&#39;s declared at the point of the call that wins. After compilation it&#39;s cut in stone which one that has won and that&#39;s the one that has to be overridden."}, {"owner": {"reputation": 1459, "user_id": 5410505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XNWBi.png?s=128&g=1", "display_name": "kamikaze", "link": "https://stackoverflow.com/users/5410505/kamikaze"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1445503965, "post_id": 33261386, "comment_id": 54354448, "body": "If you want to override at runtime you have to use function pointers or virtual functions and pay for the overhead."}], "tags": [], "owner": {"reputation": 1459, "user_id": 5410505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XNWBi.png?s=128&g=1", "display_name": "kamikaze", "link": "https://stackoverflow.com/users/5410505/kamikaze"}, "is_accepted": false, "score": 2, "last_activity_date": 1445454579, "last_edit_date": 1445454579, "creation_date": 1445436000, "answer_id": 33261386, "question_id": 33259429, "link": "https://stackoverflow.com/questions/33259429/is-there-a-portable-way-of-defining-replaceable-function-variable-constant/33261386#33261386", "title": "Is there a portable way of defining replaceable function/variable/constant?", "body": "<p>In C++ you can use the fact that a template has a lower priority than an implementation that does not require implicit casts/construction of arguments.</p>\n\n<pre><code>// library function\ntemplate &lt;class = void&gt;\nint the_answer() { return 42; }\n\n// optional override\nint the_answer() { return 43; }\n</code></pre>\n\n<p>Note that the definition order is not important, the template always loses.</p>\n"}], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1445454579, "creation_date": 1445430767, "last_edit_date": 1445432655, "question_id": 33259429, "link": "https://stackoverflow.com/questions/33259429/is-there-a-portable-way-of-defining-replaceable-function-variable-constant", "title": "Is there a portable way of defining replaceable function/variable/constant?", "body": "<p>By replaceable function I mean something like the <code>new</code> and <code>delete</code> operators in C++ which are replaced if a user-provided definition is supplied. </p>\n\n<p>Is there a reasonably portable way of achieving this in a library for other cases than operator <code>new</code> and <code>delete</code> (in C/C++)? Or would one need to solve this separately for each implementation?</p>\n\n<p>For a concrete example let's assume that the library contains:</p>\n\n<pre><code>int the_answer(void) {\n    return 42;\n}\n</code></pre>\n\n<p>and then a program using that would want to override this:</p>\n\n<pre><code>int the_answer(void) {\n    return 43;\n}\n\nint main() {\n    printf(\"The answer is %d\\n\", the_answer());\n}\n</code></pre>\n\n<p>it should result in it printing \"The answer is 43\" (but if commenting out the last definition of <code>the_answer</code> it would write \"The answer is 42\").</p>\n\n<p>The actual use case is to be able to customize the behavior of the library by overriding data for default behavior. </p>\n"}, {"tags": ["c", "text", "scanf", "words"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 5, "creation_date": 1445430726, "post_id": 33259350, "comment_id": 54319822, "body": "<code>fscanf(&quot;%s&quot;)</code> will just read one word. If you want to process lines, use <code>fgets()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 5424170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a767920dba233a0276ab57eca2eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ibmicroapple", "link": "https://stackoverflow.com/users/5424170/ibmicroapple"}, "is_accepted": false, "score": 0, "last_activity_date": 1445433301, "creation_date": 1445433301, "answer_id": 33260362, "question_id": 33259350, "link": "https://stackoverflow.com/questions/33259350/fscanf-how-to-go-in-the-next-line/33260362#33260362", "title": "fscanf() how to go in the next line?", "body": "<p>Use fread() to read the file contents to a char[] buffer. Then iterate through this buffer and whenever you find a $ you perform a strncmp to detect with which value to replace it (keep in mind, that there is a 2nd $ at the end of the word). To replace $word$ with a number you need to either shrink or extend the buffer at the position of the word - this depends on the string size of the number in ascii format (look solutions up on google, normally you should be able to use memmove). Then you can write the number to the cave, that arose from extending the buffer (just overwrite the $word$ aswell).\nThen write the buffer to the file, overwriting all its previous contents.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1445440140, "last_edit_date": 1445440140, "creation_date": 1445434072, "answer_id": 33260618, "question_id": 33259350, "link": "https://stackoverflow.com/questions/33259350/fscanf-how-to-go-in-the-next-line/33260618#33260618", "title": "fscanf() how to go in the next line?", "body": "<p><code>fscanf()</code> <em>does</em> recognize '\\0', under select circumstances, but that is not the issue here.</p>\n\n<p>Code needs to detect <code>'\\n'</code>.  <code>fscanf(fp,\"%s\"...</code> will not do that.  The first thing <code>\"%s\"</code> directs is to consume (and not save) any leading white-space including <code>'\\n'</code>. Read a line of text with <code>fgets()</code>.</p>\n\n<p>Simple read 1 line at a time.  Then march down the buffer looking for words.<br>\nFollowing uses <code>\"%n\"</code> to track how far in the buffer scanning stopped.</p>\n\n<pre><code>// more room for \\n \\0\n#define BUF_SIZE (N + 1 + 1) \nchar buffer[BUF_SIZE];\n\nwhile (fgets(buffer, sizeof buffer, stdin) != NULL) {\n  char *p = buffer;\n  char word[sizeof buffer];\n  int n;\n  while (sscanf(p, \"%s%n\", word, &amp;n) == 1) {\n    // do something with word\n    if (strcmp(word, \"$zero$\") == 0) fputs(\"0\", stdout);\n    else if (strcmp(word, \"$one$\") == 0) fputs(\"1\", stdout);\n    else fputs(word, stdout);\n    fputc(' ', stdout);\n    p += n;\n  }\n  fputc('\\n', stdout);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5471417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075caa016fe6eedcd918448ec48dfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "giux", "link": "https://stackoverflow.com/users/5471417/giux"}, "edited": false, "score": 0, "creation_date": 1445436091, "post_id": 33260641, "comment_id": 54323787, "body": "I know that <code>fgets()</code> works the problem is that I avoided using it because It reads all the line so I don&#39;t know how can I only change the words between $ signs. I thought to read word for word and then if two $ sign were found I would switch the word with a number."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 13, "user_id": 5471417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075caa016fe6eedcd918448ec48dfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "giux", "link": "https://stackoverflow.com/users/5471417/giux"}, "edited": false, "score": 0, "creation_date": 1445438189, "post_id": 33260641, "comment_id": 54325455, "body": "The fact remains that <code>scanf()</code> does not easily do what you want.  What everyone is suggesting to you is to use <i>string-manipulation</i> functions or even plain arithmetic operations to analyze each line after you read it, so as to pick out the <code>$</code>-delimited words."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 13, "user_id": 5471417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075caa016fe6eedcd918448ec48dfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "giux", "link": "https://stackoverflow.com/users/5471417/giux"}, "edited": false, "score": 0, "creation_date": 1445438286, "post_id": 33260641, "comment_id": 54325540, "body": "Nevertheless, if you insist on using <code>fscanf()</code> to do your parsing, then you&#39;ll need to rely on the field descriptors that do not skip whitespace: <code>%[</code> and <code>%c</code>.  Such an approach would be tricky and a bit obscure, but possible."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1445434156, "creation_date": 1445434156, "answer_id": 33260641, "question_id": 33259350, "link": "https://stackoverflow.com/questions/33259350/fscanf-how-to-go-in-the-next-line/33260641#33260641", "title": "fscanf() how to go in the next line?", "body": "<p>Not only will <code>fscanf(\"%s\")</code> read one whitespace-delimited string at a time, it will also eat all whitespace between those strings, including line terminators.  If you want to reproduce the input whitespace in the output, as your example suggests you do, then you need a different approach.</p>\n\n<blockquote>\n  <p>Also lines are not defined and columns should be max 80 characters.</p>\n</blockquote>\n\n<p>I take that to mean the <em>number</em> of lines is not known in advance, and that it is acceptable to assume that no line will contain more than 80 characters (not counting any line terminator).</p>\n\n<p>When you say</p>\n\n<blockquote>\n  <p>My problem is that fscanf doesn't recognize '\\0' so it doesn't go in the next line when I print the array</p>\n</blockquote>\n\n<p>I suppose you're talking about this code:</p>\n\n<blockquote>\n<pre><code>        char matr[MAX][N];\n            /* ... */\n            if(matr[i] == '\\0')\n</code></pre>\n</blockquote>\n\n<p>Given that declaration for <code>matr</code>, the given condition will <em>always</em> evaluate to <code>false</code>, regardless of any other consideration.  <code>fscanf()</code> does not factor in at all.  The type of <code>matr[i]</code> is <code>char[N]</code>, an array of <code>N</code> elements of type <code>char</code>.  That evaluates to a pointer to the first element of the array, which pointer will never be <code>NULL</code>.  It looks like you're trying to determine when to write a newline, but nothing remotely resembling this approach can do that.</p>\n\n<p>I suggest you start by taking @Barmar's advice to read line-by-line via <code>fgets()</code>.  That might look like so:</p>\n\n<pre><code>char line[N+2]; /* N + 2 leaves space for both newline and string terminator */\n\nif (fgets(line, sizeof(line), fp) != NULL) {\n    /* one line read; handle it ... */\n} else {\n    /* handle end-of-file or I/O error */\n}\n</code></pre>\n\n<p>Then for each line you read, parse out the <code>\"$word$\"</code> tokens by whatever means you like, and output the needed results (everything but the <code>$</code>-delimited tokens verbatim; the bracket substitution number for each token).  Of course, you'll need to memorialize the substitution tokens for later output.  Remember to make <em>copies</em> of those, as the buffer will be overwritten on each read (if done as I suggest above).</p>\n"}], "owner": {"reputation": 13, "user_id": 5471417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075caa016fe6eedcd918448ec48dfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "giux", "link": "https://stackoverflow.com/users/5471417/giux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11167, "favorite_count": 0, "accepted_answer_id": 33260641, "answer_count": 3, "score": 1, "last_activity_date": 1445440140, "creation_date": 1445430540, "last_edit_date": 1445430907, "question_id": 33259350, "link": "https://stackoverflow.com/questions/33259350/fscanf-how-to-go-in-the-next-line", "title": "fscanf() how to go in the next line?", "body": "<p>So I have a wall of text in a file and I need to recognize some words that are between the $ sign and call them as numbers then print the modified text in another file along with what the numbers correspond to.\nAlso lines are not defined and columns should be max 80 characters.</p>\n\n<p>Ex: </p>\n\n<pre><code>I $like$ cats.  \nI [1] cats.  \n[1] --&gt; like\n</code></pre>\n\n<p>That's what I did:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    #define N 80\n    #define MAX 9999\n    int main()\n    {\n        FILE *fp;\n        int i=0,count=0;\n        char matr[MAX][N];\n\n        if((fp = fopen(\"text.txt\",\"r\")) == NULL){\n            printf(\"Error.\");\n            exit(EXIT_FAILURE);\n        }\n\n        while((fscanf(fp,\"%s\",matr[i])) != EOF){\n            printf(\"%s \",matr[i]);\n            if(matr[i] == '\\0')\n                printf(\"\\n\");\n\n            //I was thinking maybe to find two $ but Idk how to replace the entire word     \n            /*                                 \n            if(matr[i] == '$')\n                count++;\n            if(count == 2){\n                ...code...\n            }\n            */\n            i++;\n        }\n\n\n\n        fclose(fp);\n        return 0;\n   }\n</code></pre>\n\n<p>My problem is that fscanf doesn't recognize <code>'\\0'</code> so it doesn't go in the next line when I print the array..also I don't know how to replace <code>$word$</code> with a number.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1445430361, "post_id": 33259219, "comment_id": 54319582, "body": "If you don&#39;t want to include SDL everywhere, you should encapsulate the <code>sprite</code> and <code>ghost</code> objects by, for example, making your own <code>Entity</code> struct, not by relying on this trick."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1445430457, "post_id": 33259300, "comment_id": 54319638, "body": "He <b>has</b> to define <code>SDL_Surface</code>.  That&#39;s the <b>only</b> answer."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445430606, "post_id": 33259300, "comment_id": 54319743, "body": "@AndrewHenle No. He only has to <i>declare</i> <code>SDL_Surface</code>. This declaration needs not be complete."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1445430374, "creation_date": 1445430374, "answer_id": 33259300, "question_id": 33259219, "link": "https://stackoverflow.com/questions/33259219/extern-void-pointer-in-c-file/33259300#33259300", "title": "extern void pointer in C file", "body": "<p><code>SDL_Surface</code> is not defined in unit.c.</p>\n\n<p>Add</p>\n\n<pre><code>#include \"SDL.h\"\n</code></pre>\n\n<p>to unit.c</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5471256"}, "edited": false, "score": 0, "creation_date": 1445465559, "post_id": 33259392, "comment_id": 54341443, "body": "as described in this post:"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5471256"}, "edited": false, "score": 0, "creation_date": 1445466576, "post_id": 33259392, "comment_id": 54341846, "body": "as described in this post:  <a href=\"http://stackoverflow.com/questions/1433204/how-do-i-use-extern-to-share-variables-between-source-files-in-c\">link</a>  best practice is to declare the globals in one header file with the keyword <code>extern</code>, so they are only declared and not defined, and then you can include that file everywhere. you only need to define a global in one source file.  good explanation of the <code>extern</code> keyword:  <a href=\"http://www.geeksforgeeks.org/understanding-extern-keyword-in-c/\" rel=\"nofollow noreferrer\">link</a>  i don&#39;t even have to declare:  <code>extern void* ghost</code>  but <code>extern ghost</code> is enough"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1445849435, "post_id": 33259392, "comment_id": 54479030, "body": "@b&#39;stard I don&#39;t think that omitting type is a good idea. As far as I know, <code>extern ghost</code> is interpreted as <code>extern int ghost</code>."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 1, "last_activity_date": 1445430657, "creation_date": 1445430657, "answer_id": 33259392, "question_id": 33259219, "link": "https://stackoverflow.com/questions/33259219/extern-void-pointer-in-c-file/33259392#33259392", "title": "extern void pointer in C file", "body": "<p>No, it's <strong>not</strong> legal. You can <em>convert</em> any data pointer to <code>void*</code>, but you cannot <em>pretend</em> that existing pointer is <code>void*</code>.</p>\n\n<p>Workaround is to create header <code>program.h</code>, and include that into <code>unit.c</code>:</p>\n\n<pre><code>#ifndef PROGRAM_H\n#define PROGRAM_H\n#include \"SDL.h\"\nextern int a;\nextern SDL_Surface* sprite;\nextern SDL_Surface* ghost;\n#endif\n</code></pre>\n\n<p>Don't try to avoid including headers into .c files at all cost; it's a standard practice in C, and best way to avoid problems. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5471256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1625, "favorite_count": 0, "accepted_answer_id": 33259392, "answer_count": 2, "score": 1, "last_activity_date": 1445430657, "creation_date": 1445430154, "question_id": 33259219, "link": "https://stackoverflow.com/questions/33259219/extern-void-pointer-in-c-file", "title": "extern void pointer in C file", "body": "<p>i am making a program that i have decided to split in two .c files. the first program.c file has all the include files and declarations and the other unit.c file has a dozen functions and some extern declarations of global variables defined in the the main program.c</p>\n\n<p>everything was working fine (compilation/linking) so far the extern variables declared in unit.c and defined in program.c are of the build in type like int or float. when i tried to use a variable of a new type from a header file that is included in program.c but not in unit.c normally the compiler complained.</p>\n\n<p>to be specific the situation is like this:</p>\n\n<p>program.c</p>\n\n<pre><code>#include \"SDL.h\"\nint a;\nSDL_Surface* sprite;\nSDL_Surface* ghost;\n</code></pre>\n\n<p>unit.c</p>\n\n<pre><code>extern int a; //works fine\nextern SDL_Surface* sprite; //compiler error\nextern SDL_Surface* ghost; //compiler error\nvoid funct1 (void)\n{\n    if (sprite == ghost)\n    ....\n}\n</code></pre>\n\n<p>if i include SDL.h at the top of unit.c the problem is solved, but i don't want to include everything everywhere so i figured a round solution. i have declared sprite and ghost to be of type void pointer only in unit.c but the definition in program.c remains the same. like this:</p>\n\n<p>unit.c</p>\n\n<pre><code>extern void* sprite;\nextern void* ghost;\n</code></pre>\n\n<p>the compiler did not complain. i only need those extern pointers to test if they point to the same address. i did a very little bit of testing on the executable and it's working fine.</p>\n\n<p>i am using the free command line Borland compiler ver 5.5.1</p>\n\n<p>the question is, can this be considered legitimate in ANSI C or is it some quirk of the Borland compiler?\nis the only true (best practice) solution to my situation to include SDL.h in unit.c or can you please point me to some other legitimate alternative?</p>\n"}, {"tags": ["c", "mingw", "codeblocks", "static-linking", "unresolved-external"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445430703, "post_id": 33259134, "comment_id": 54319807, "body": "<code>gettimeofday</code> is not a standard C function, it might not be available. I don&#39;t have enough experience with MinGW to answer this question completely though."}, {"owner": {"reputation": 1, "user_id": 4961626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf0d086e6697b786fa017ef9076d2e13?s=128&d=identicon&r=PG&f=1", "display_name": "JohnLee", "link": "https://stackoverflow.com/users/4961626/johnlee"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445430912, "post_id": 33259134, "comment_id": 54319930, "body": "Hi. So you mean that this would only occur with non-standard libraries? How could we ensure that such libraries are linked then?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1445431958, "post_id": 33259134, "comment_id": 54320732, "body": "Usually you would supply the flag <code>-l&lt;library&gt;</code> to the compiler but I&#39;m not sure how this works on Windows."}], "owner": {"reputation": 1, "user_id": 4961626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf0d086e6697b786fa017ef9076d2e13?s=128&d=identicon&r=PG&f=1", "display_name": "JohnLee", "link": "https://stackoverflow.com/users/4961626/johnlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445429916, "creation_date": 1445429916, "question_id": 33259134, "link": "https://stackoverflow.com/questions/33259134/why-static-library-not-working", "title": "Why static library not working?", "body": "<p>I tried making this simple static library in Code::Blocks with MinGW:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt;\n#include \"header.h\"\n\nextern int go(int x)\n{\n  struct timeval t;\n  gettimeofday(&amp;t, NULL);\n  return 1;\n}\n</code></pre>\n\n<p>This same snippet works if compiled as a console app <em>(with printf)</em>, but when compiled as a static library, the calling code keeps getting this error:</p>\n\n<pre><code>unresolved external symbol \"_gettimeofday\"\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 3, "creation_date": 1445429842, "post_id": 33259013, "comment_id": 54319247, "body": "Why should it stop after student 5?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 1, "creation_date": 1445429849, "post_id": 33259013, "comment_id": 54319254, "body": "@Kotshi OP took input in <code>score</code> ."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1445429891, "post_id": 33259013, "comment_id": 54319281, "body": "&#39;What should I do?&#39; RUN IT UNDER A DEBUGGER OR PRINTF OUT STUFF. You made it, why can you not debug it?  Is your debugger broken?  Does printf() not work for intermediate results?"}, {"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1445429968, "post_id": 33259013, "comment_id": 54319334, "body": "@ameyCU Woups, missread."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1445429972, "post_id": 33259013, "comment_id": 54319335, "body": "Always check return value of <code>scanf</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1445430082, "post_id": 33259013, "comment_id": 54319413, "body": "&#39;if (score[i][k]&gt;min) max = score[i][k];&#39; - copypasta/edit FAIL."}], "owner": {"reputation": 9, "user_id": 5456223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ffba56c19c9b14b995165f88391e99?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz Abdu", "link": "https://stackoverflow.com/users/5456223/abdulaziz-abdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445429602, "creation_date": 1445429602, "question_id": 33259013, "link": "https://stackoverflow.com/questions/33259013/find-min-max-average-values-throw-array", "title": "Find min,max,average values throw array", "body": "<p>I made this code but I can't stop it. This code abou finding min, max, average values.  What should I do?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid get_stat_per_test(int score[][3])\n{\n    int i, k, min, max, sum;\n    for (k = 0; k&lt;3; k++){\n        min = max = score[0][k];\n        sum = 0;\n        for (i = 0; i&lt;10; i++){\n            if (score[i][k]&lt;min) min = score[i][k];\n            if (score[i][k]&gt;min) max = score[i][k];\n            sum += score[i][k];\n        }\n        printf(\"Max=%d\\n\", max);\n        printf(\"MIn=%d\\n\", min);\n        printf(\"Average=%f\\n\", sum / (3.0 * 10));\n    }\n}\n\nint main(void)\n\n{\n    int i, k;\n    int score[10][3];\n    for (i = 0; i&lt;10; i++){\n        for (k = 0; k&lt;3; k++){\n            printf(\"The result is %d student in %d exam: \", i, k);\n            scanf(\"%d\", &amp;score[i][k]);\n        }\n    }\n    get_stat_per_test(score);\n    return 0;\n}\n</code></pre>\n\n<p>After student 5 should stop.</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1445437816, "post_id": 33258679, "comment_id": 54325181, "body": "More information than you ever wanted about scroll bars at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb787527.aspx#scroll_position_and_range\" rel=\"nofollow noreferrer\">MSDN</a>"}, {"owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 0, "creation_date": 1445828481, "post_id": 33258679, "comment_id": 54472225, "body": "Scrolling range means 0 through the (number of lines - 1) for vertical scrolling, since indexing starts from 0"}], "answers": [{"tags": [], "owner": {"reputation": 136245, "user_id": 223386, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/tfslu.jpg?s=128&g=1", "display_name": "hsz", "link": "https://stackoverflow.com/users/223386/hsz"}, "is_accepted": false, "score": 2, "last_activity_date": 1445428788, "creation_date": 1445428788, "answer_id": 33258739, "question_id": 33258679, "link": "https://stackoverflow.com/questions/33258679/what-does-a-scrolling-range-means/33258739#33258739", "title": "What does a &quot;scrolling range&quot; means?", "body": "<p>You have <code>100</code> possible values in range from (including) <code>0</code> to <code>99</code>.</p>\n"}], "owner": {"reputation": 573, "user_id": 5031477, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5191880a917c1cd3e15048d9d953e89a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5031477/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445428788, "creation_date": 1445428612, "question_id": 33258679, "link": "https://stackoverflow.com/questions/33258679/what-does-a-scrolling-range-means", "title": "What does a &quot;scrolling range&quot; means?", "body": "<p>I am currently learning about scrollbars, and I encountered the term \"scrolling range\", but I am not sure what it means exactly, I think it means one of the following two definitions:</p>\n\n<p>Say I have a scrollbar with a min position of 0, and a max position of 99.</p>\n\n<p>1) The scrolling range is 100.</p>\n\n<p>2) The scrolling range is 0 to 99.</p>\n\n<p>Which one of these two definitions is correct?</p>\n"}, {"tags": ["c", "pcap", "libpcap"], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 3375166, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-ueMaK6yqY_0/AAAAAAAAAAI/AAAAAAAAABM/bubjZpCCPLk/photo.jpg?sz=128", "display_name": "Charrette", "link": "https://stackoverflow.com/users/3375166/charrette"}, "edited": false, "score": 0, "creation_date": 1445690154, "post_id": 33271246, "comment_id": 54434435, "body": "Thank you that&#39;s what i needed to understand"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": true, "score": 2, "last_activity_date": 1445471907, "creation_date": 1445471907, "answer_id": 33271246, "question_id": 33258589, "link": "https://stackoverflow.com/questions/33258589/how-to-use-pcap-structures-with-the-good-includes/33271246#33271246", "title": "How to use pcap structures with the good includes", "body": "<blockquote>\n  <p>For instance, pcap-int.h doesn't seem to exist in my system.</p>\n</blockquote>\n\n<p>It's not supposed to.  It's part of the pcap source code, but it's internal to libpcap, and the data structures it defines are subject to change from cap release to release, so you can't use them in a pcap program.</p>\n\n<p>You rarely if ever need to the file descriptor associated with a <code>pcap_t</code>, but, in those rare cases where you do, you get it with the <code>pcap_fileno()</code> function:</p>\n\n<pre><code>printf(\"fd=%d\\n\", pcap_fileno(result));\n</code></pre>\n\n<p><em>However</em>, when you open a capture file, using <code>pcap_open_offline()</code>, rather than opening a device for a live capture, there <em>is</em> no file descriptor associated with it, there's just a \"standard I/O\" <code>FILE *</code>.  As the man page for <code>pcap_fileno()</code> says:</p>\n\n<pre><code>   If p refers to a ``savefile'' that was opened using functions  such  as\n   pcap_open_offline()  or  pcap_fopen_offline(), a ``dead'' pcap_t opened\n   using pcap_open_dead(), or a pcap_t that was created with pcap_create()\n   but  that  has  not yet been activated with pcap_activate(), it returns\n   -1.\n</code></pre>\n\n<p>so it should print \"fd=-1\" in your program.</p>\n\n<blockquote>\n  <p>The first answer is saying \"The error is because the compiler cannot see the definition of the structure\" but in my case the structure is pcap_t and is typedef in pcap.h, which i included.</p>\n</blockquote>\n\n<p>It's typedefed as a structure in <code>pcap.h</code>, but that structure isn't fully <em>defined</em> in <code>pcap.h</code>.  C allows a pointer to a structure that's not fully defined; this allows a library to provide a \"handle\" for a data structure that only the library itself can look at or modify.  That's the case with the <code>pcap_t</code> structure; code outside libpcap should <em>not</em> look at it or modify it, it should make calls to libpcap routines to do that.</p>\n\n<blockquote>\n  <p>Also, I'm on Ubuntu, and i cannot find all my .h file about cap.</p>\n</blockquote>\n\n<p>You probably need to install the \"libpcap-dev\" package.  The \"libpcap\" package just installs enough libraries to allow programs already compiled with libpcap to run; the \"libpcap-dev\" package installs the header files to allow programs to be compiled with libpcap.</p>\n\n<blockquote>\n  <p>When I look on google, I only find .h from apple and windows</p>\n</blockquote>\n\n<p>It doesn't find <a href=\"https://github.com/the-tcpdump-group/libpcap\" rel=\"nofollow\">the GitHub repository for libpcap</a>?  That's surprising.</p>\n\n<blockquote>\n  <p>so I assume that i'm using the same as the apple one</p>\n</blockquote>\n\n<p>Apple's libpcap is based on the one from <a href=\"http://www.tcpdump.org\" rel=\"nofollow\">the Tcpdump Group</a>, which is the one on GitHub.  The one in Ubuntu is also based on the one from the Tcpdump Group, as is WinPcap, which is the version for Windows.</p>\n"}], "owner": {"reputation": 630, "user_id": 3375166, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-ueMaK6yqY_0/AAAAAAAAAAI/AAAAAAAAABM/bubjZpCCPLk/photo.jpg?sz=128", "display_name": "Charrette", "link": "https://stackoverflow.com/users/3375166/charrette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 33271246, "answer_count": 1, "score": 0, "last_activity_date": 1445471907, "creation_date": 1445428340, "last_edit_date": 1495535418, "question_id": 33258589, "link": "https://stackoverflow.com/questions/33258589/how-to-use-pcap-structures-with-the-good-includes", "title": "How to use pcap structures with the good includes", "body": "<p>Since yesterday i'm learning how to use pcap to parse a pcap file.</p>\n\n<p>And since yesterday i'm getting an error :</p>\n\n<p>Here is my simple code, trying to write the fd in pcap_t structure:</p>\n\n<pre><code>#include &lt;pcap/pcap.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;pcap-bpf.h&gt;\n#include &lt;stdio.h&gt;\n\nint             main() {\n  char          errbuf[PCAP_ERRBUF_SIZE];\n  pcap_t        *result;\n\n  if ((result = pcap_open_offline(\"test.pcap\", errbuf)) == NULL) {\n    printf(\"%s\\n\", errbuf);\n    return -1;\n  }\n  printf(\"fd=%d\\n\", result-&gt;fd);\n  return 0;\n}\n</code></pre>\n\n<p>and here is my error: </p>\n\n<pre><code>gcc -Wextra -Wall -Werror -I./includes   -c -o main.o main.c\nmain.c: In function \u2018main\u2019:\nmain.c:14:27: error: dereferencing pointer to incomplete type\n   printf(\"fd=%d\\n\", result-&gt;fd);\n                           ^\nmake: *** [main.o] Error 1\n</code></pre>\n\n<p>I saw this post: <a href=\"https://stackoverflow.com/questions/9733536/pcap-incomplete-type\">Pcap Incomplete Type</a></p>\n\n<p>Where the guy is having almost the same problem as I have, but still, I can't find a solution, I included what pcap_open_offline needs, I also included pcap-bpf.h because I saw that pcap_t is using bpf_program.</p>\n\n<p>The first answer is saying \"The error is because the compiler cannot see the definition of the structure\" but in my case the structure is pcap_t and is typedef in pcap.h, which i included.</p>\n\n<p>I just don't get how to include correclty with pcap.</p>\n\n<p>Also, I'm on Ubuntu, and i cannot find all my .h file about pcap. When I look on google, I only find .h from apple and windows, so I assume that i'm using the same as the apple one, but i'm not sure about that !</p>\n\n<p>I'm reading this documentation to see structures fields :\n<a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-18/libpcap/pcap.h\" rel=\"nofollow noreferrer\">http://www.opensource.apple.com/source/libpcap/libpcap-18/libpcap/pcap.h</a>\n<a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/pcap-int.h\" rel=\"nofollow noreferrer\">http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/pcap-int.h</a></p>\n\n<p>But again, the apple.com is scaring me, i'm not sure that I should rely on that. For instance, pcap-int.h doesn't seem to exist in my system.</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1445427457, "post_id": 33258266, "comment_id": 54317680, "body": "It may be convenient to include one file over several files, but it may so include unneeded files each time it is used."}, {"owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1445427511, "post_id": 33258266, "comment_id": 54317722, "body": "@Jarod42 Are there disadvantages to that?"}, {"owner": {"reputation": 8982, "user_id": 549472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/204826500d9e0377aac56eaafe38c300?s=128&d=identicon&r=PG", "display_name": "LeleDumbo", "link": "https://stackoverflow.com/users/549472/leledumbo"}, "edited": false, "score": 1, "creation_date": 1445427604, "post_id": 33258266, "comment_id": 54317772, "body": "@Zola Precompiled headers are subject to implementation (compiler), even those who have the features (GCC, MSVC) set it off by default. The preprocessor will parse all included files by each .c / .cpp."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1445427707, "post_id": 33258266, "comment_id": 54317830, "body": "Building time is a non-issue. It is not something you should even consider when designing programs."}, {"owner": {"reputation": 8982, "user_id": 549472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/204826500d9e0377aac56eaafe38c300?s=128&d=identicon&r=PG", "display_name": "LeleDumbo", "link": "https://stackoverflow.com/users/549472/leledumbo"}, "edited": false, "score": 1, "creation_date": 1445427721, "post_id": 33258266, "comment_id": 54317845, "body": "@Talaria you will notice longer (noticability depends on the complexity of the header files) compilation time. Preprocessing time becomes equal for each .c / .cpp, because they include the same set of header files despite each may only be using a few parts of it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1445427860, "post_id": 33258266, "comment_id": 54317938, "body": "@Lundin It is when the build-time of a project closes in a couple of hours. :)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1445427972, "post_id": 33258266, "comment_id": 54318006, "body": "The major disadvantage of having such a collection of header files in one place, is that if you make a change in one header file, <i>all</i> source files have to be recompiled. It won&#39;t matter for small projects with only a few files and building takes just a couple of seconds, but for huge projects with several thousands of files and build times of maybe hours it&#39;s not a very good solution."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445428200, "post_id": 33258266, "comment_id": 54318156, "body": "@JoachimPileborg It is at that very moment you should insist that you need a better computer."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445428974, "post_id": 33258266, "comment_id": 54318693, "body": "You&#39;ve included Time.h in one file, possibly polluting your namespace for all other files.  Perhaps some other file includes your file and your file includes that file and ... god knows what.  Include files are hell so keep it simple.  Don&#39;t #include anything in your header files.  #include them in your source files only and then for ease of use collapse them into one or two headers only.  Worried about &quot;coupling&quot;?  Don&#39;t.  Your code is reusable as you&#39;re working at the library, not individual source file level."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445430556, "post_id": 33258266, "comment_id": 54319709, "body": "Build time is only a non-issue to those who do not test/debug software,  Empirically, I find that eliminating 99% of all household bugs is MUCH faster when using a language with modules instead of C++.  Also, it keep my caffeine consumption down if I can add debug/fix lines and rebuild in less time than it takes for my kettle to boil."}], "answers": [{"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445429257, "post_id": 33258343, "comment_id": 54318910, "body": "There are tools for minimizing unnecessary includes in language/environments like C# and Visual Studio.  In the absence of that kind of thing with C or C++ (though I&#39;m sure there&#39;s a plug-in somewhere), don&#39;t manage your includes at the individual source file level.  That&#39;s far too fine grained.  Do it at the library level."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445465206, "post_id": 33258343, "comment_id": 54341311, "body": "There&#39;s include-what-you-use, which is a standalone tool."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445501632, "post_id": 33258343, "comment_id": 54353052, "body": "Unfortunately that advertises itself as &quot;alpha quality&quot; written specifically for the Google source tree, and &quot;even for Google code, the tool still makes a lot of mistakes&quot;.  Apparently it&#39;s a hard problem to automate."}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": false, "score": 1, "last_activity_date": 1445427501, "creation_date": 1445427501, "answer_id": 33258343, "question_id": 33258266, "link": "https://stackoverflow.com/questions/33258266/what-if-any-are-the-disadvantages-having-a-header-file-of-header-files/33258343#33258343", "title": "What, if any, are the disadvantages having a header file of header files?", "body": "<p>The main downside is increased build times. Every source file includes every header of the project, whether it needs it or not.</p>\n\n<p>It's also conceptually unclean. A source file should include the headers it needs. It should be possible to search for a header's name to find the parts of the source code that uses these facilities. Minimizing unnecessary includes is evidence of a loosely coupled system. However, include-what-you-use is hard to enforce, because you cannot prevent transitive availability of facilities through headers in C.</p>\n\n<p>It should not lead to increased executable size. Even if the headers contain code (which is rare in C, but common in C++), the linker should eliminate duplicates and remove unused code.</p>\n"}, {"comments": [{"owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "edited": false, "score": 0, "creation_date": 1445427715, "post_id": 33258363, "comment_id": 54317842, "body": "What do you mean by tight coupling dependancy?"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445427812, "post_id": 33258363, "comment_id": 54317906, "body": "I disagree, except to add that it&#39;s perfectly fine to have tight coupling between modules in the same library."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1445427995, "post_id": 33258363, "comment_id": 54318024, "body": "@Robinson Tight coupling is something 100% bad, there is never a reason why you would strive for it. It makes the code harder to maintain and trouble-shoot, it makes the code more complex, and worst of all, any bugs in your code will escalate throughout the program, tearing down functionality which is completely unrelated to the bug. This is one of the main reasons why object-oriented design was invented."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445428265, "post_id": 33258363, "comment_id": 54318200, "body": "Again, why?  I have a Font library that&#39;s emphatically very tightly coupled to FreeType 2.  I couldn&#39;t care less if it doesn&#39;t work with some other font rendering library X.  In the real world development is about making choices and for that library I&#39;ve made a choice."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1445430617, "post_id": 33258363, "comment_id": 54319755, "body": "@Robinson Obviously, you need a coupling between one module and the resources that it uses. What I&#39;m saying is that it should not have a tight coupling with completely unrelated modules. That is, if you update the font library and the update contains a bug, it shouldn&#39;t cause the coffee machine to suddenly stop working."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1445431079, "post_id": 33258363, "comment_id": 54320032, "body": "I see, yes, we agree.  I have found through experience that because, particularly in C/C++, you don&#39;t necessarily know what the library you&#39;re including will include, or what those includes will include, you rapidly lose track of what you&#39;re in fact coupled too.  Hence my &quot;system&quot; for making it explicit."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1445431668, "post_id": 33258363, "comment_id": 54320515, "body": "@Robinson You shouldn&#39;t be losing track though. When I design programs, before I write a single line of code, I draw up a &quot;design chart&quot; over all modules I expect the program to have and their dependencies. It doesn&#39;t necessarily have to be something fancy/formal (like UML), just as long as there&#39;s some sort of document which covers dependencies and heritage. You can then update this chart as the program is written. Ideally, there will be some coupling (!) between the specification, the chart, the code and the test cases."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1445427575, "creation_date": 1445427575, "answer_id": 33258363, "question_id": 33258266, "link": "https://stackoverflow.com/questions/33258266/what-if-any-are-the-disadvantages-having-a-header-file-of-header-files/33258363#33258363", "title": "What, if any, are the disadvantages having a header file of header files?", "body": "<p>To have such a header file is poor practice and bad design. The problem is that it will create a tight coupling dependency between every single file of your project, even if they are completely unrelated.</p>\n\n<p>Good program design is to create autonomous modules that only include the resources they are using. They should do this from their own h files, to document exactly which dependencies a particular module has.</p>\n"}, {"tags": [], "owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1445429351, "last_edit_date": 1445429351, "creation_date": 1445428026, "answer_id": 33258504, "question_id": 33258266, "link": "https://stackoverflow.com/questions/33258266/what-if-any-are-the-disadvantages-having-a-header-file-of-header-files/33258504#33258504", "title": "What, if any, are the disadvantages having a header file of header files?", "body": "<p>Most of my libraries have one precompiled header containing external includes and one \"main\" header for each library that contains the precompiled header items + all the .h files for the library in question.  All of my .cpp files first include the precompiled header and then the main header.  </p>\n\n<p>That's it.  None of my other .h files have any includes in at all.  My .cpp files only include these two headers.  Other libraries that need to use the library will #include that same main header.</p>\n\n<p>Doing this has greatly simplified header file headache/complexity issue for me though I would add that most of my libraries are relatively small in the grand scheme of things.  I don't know if this would work for a very large (monster) project.  Perhaps not.</p>\n\n<p>The way this works is actually quite nice.  Others above, concerned about \"coupling\" want to minimise it, but if you don't include <em>any</em> headers at all you're 100% uncoupled, even from your dependencies.  If you want to reuse the class, use the library that contains it.  </p>\n\n<p>Simple.</p>\n"}, {"tags": [], "owner": {"reputation": 2525, "user_id": 1283273, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4kBME.jpg?s=128&g=1", "display_name": "Alexander Perechnev", "link": "https://stackoverflow.com/users/1283273/alexander-perechnev"}, "is_accepted": false, "score": 0, "last_activity_date": 1445429091, "last_edit_date": 1445429091, "creation_date": 1445428610, "answer_id": 33258678, "question_id": 33258266, "link": "https://stackoverflow.com/questions/33258266/what-if-any-are-the-disadvantages-having-a-header-file-of-header-files/33258678#33258678", "title": "What, if any, are the disadvantages having a header file of header files?", "body": "<p>All previous answers were clear enough, but.</p>\n\n<p>The main disadvantage of \"one big header file\" is the problem with code reusability. For example, you've created some module as a part of your application. Let's say, this module implements API for some hardware. And then you want to make another application, which should use this module.</p>\n\n<p>In this case you have to remember which header files you have to include to compile this module, or, if you just copy your previous \"big header file\", it requires a lot of unnecessary third party libraries and header files.</p>\n\n<p>Nobody wants to spend a lot of time to make some module working. It's much better if you can use it right out-of-the-box, isn't it?</p>\n"}], "owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 33258363, "answer_count": 4, "score": 0, "last_activity_date": 1445429351, "creation_date": 1445427272, "last_edit_date": 1445427795, "question_id": 33258266, "link": "https://stackoverflow.com/questions/33258266/what-if-any-are-the-disadvantages-having-a-header-file-of-header-files", "title": "What, if any, are the disadvantages having a header file of header files?", "body": "<p>I came onto a project that employs the method of using a header file <code>MyProject.h</code> that has all the headers of each .c file. Each .c file has their own header file that has <code>#include \"MyProject.h\"</code>, whatever libraries are needed, and any other declarations necessary for the file. </p>\n\n<p>To me it seems redundant and somewhat unnatural, but it compiles and subsequently runs as expected. My thought is that the compiler would be doing way more work than necessary and is possibly over-bloating the .exe. What are the disadvantages, if any, to doing this?</p>\n\n<p>A subsequent question I have is, say I included a library like Time.h in one file using the above example. Will the compiler only build Time.h once into the binary or for every file now because of MyProject.h? What about with structs, enums, etc...?</p>\n"}, {"tags": ["c++", "c", "linux", "events", "device-driver"], "comments": [{"owner": {"reputation": 96, "user_id": 5140224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed591022683f255557d2f4e1ceb6c593?s=128&d=identicon&r=PG", "display_name": "Mirar", "link": "https://stackoverflow.com/users/5140224/mirar"}, "edited": false, "score": 0, "creation_date": 1445426945, "post_id": 33258007, "comment_id": 54317323, "body": "Yes, because &#39;ls&#39; is written in C... if you looking to replace ls, look around &#39;getdirentries&#39; function. Are you looking to replace ls, or are you looking for using the mouse? /dev/input/eventX and libevdev is probably the way to go."}, {"owner": {"reputation": 13, "user_id": 5251572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a51bfacb49f8d96d5510b830e190d3?s=128&d=identicon&r=PG&f=1", "display_name": "Toniy", "link": "https://stackoverflow.com/users/5251572/toniy"}, "reply_to_user": {"reputation": 96, "user_id": 5140224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed591022683f255557d2f4e1ceb6c593?s=128&d=identicon&r=PG", "display_name": "Mirar", "link": "https://stackoverflow.com/users/5140224/mirar"}, "edited": false, "score": 0, "creation_date": 1445427224, "post_id": 33258007, "comment_id": 54317516, "body": "Libevdev is certainly the solution, but there is no ability to embed it onto target computer."}, {"owner": {"reputation": 1998, "user_id": 2283078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008b29961534cf4b1e499eb430231c3c?s=128&d=identicon&r=PG", "display_name": "Alejandro D&#237;az", "link": "https://stackoverflow.com/users/2283078/alejandro-d%c3%adaz"}, "edited": false, "score": 0, "creation_date": 1445427635, "post_id": 33258007, "comment_id": 54317790, "body": "@Toniy static linking?"}, {"owner": {"reputation": 13, "user_id": 5251572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a51bfacb49f8d96d5510b830e190d3?s=128&d=identicon&r=PG&f=1", "display_name": "Toniy", "link": "https://stackoverflow.com/users/5251572/toniy"}, "edited": false, "score": 0, "creation_date": 1445427683, "post_id": 33258007, "comment_id": 54317822, "body": "Accidentally posted previous comment. It seems to be my fault that I wrote too much unnecessary information :) Usage of <code>ls</code> was just one of steps of problem exploration and I don&#39;t need to use it. Libevdev is certainly the solution, but there is no ability to embed it onto target computer (it is quite young project which is not presented in linux by default and in packet managers as <code>yum</code> yet), so I must use some standard solutions (like system calls or Xlib or something else) that are presented in linux by default."}, {"owner": {"reputation": 13, "user_id": 5251572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a51bfacb49f8d96d5510b830e190d3?s=128&d=identicon&r=PG&f=1", "display_name": "Toniy", "link": "https://stackoverflow.com/users/5251572/toniy"}, "reply_to_user": {"reputation": 1998, "user_id": 2283078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008b29961534cf4b1e499eb430231c3c?s=128&d=identicon&r=PG", "display_name": "Alejandro D&#237;az", "link": "https://stackoverflow.com/users/2283078/alejandro-d%c3%adaz"}, "edited": false, "score": 0, "creation_date": 1445427713, "post_id": 33258007, "comment_id": 54317839, "body": "@AlejandroD&#237;az, what do you mean?"}, {"owner": {"reputation": 1998, "user_id": 2283078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008b29961534cf4b1e499eb430231c3c?s=128&d=identicon&r=PG", "display_name": "Alejandro D&#237;az", "link": "https://stackoverflow.com/users/2283078/alejandro-d%c3%adaz"}, "edited": false, "score": 0, "creation_date": 1445427824, "post_id": 33258007, "comment_id": 54317918, "body": "@Toniy you could link against libevdev statically then you would only need to deploy your binary to the target system"}, {"owner": {"reputation": 13, "user_id": 5251572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a51bfacb49f8d96d5510b830e190d3?s=128&d=identicon&r=PG&f=1", "display_name": "Toniy", "link": "https://stackoverflow.com/users/5251572/toniy"}, "reply_to_user": {"reputation": 1998, "user_id": 2283078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008b29961534cf4b1e499eb430231c3c?s=128&d=identicon&r=PG", "display_name": "Alejandro D&#237;az", "link": "https://stackoverflow.com/users/2283078/alejandro-d%c3%adaz"}, "edited": false, "score": 0, "creation_date": 1445434013, "post_id": 33258007, "comment_id": 54322257, "body": "@AlejandroD&#237;az, thanks, that is solution that I overlooked. I&#39;ll make it."}], "answers": [{"tags": [], "owner": {"reputation": 290, "user_id": 2345428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1981449a295357c313b9c7640cc89fa?s=128&d=identicon&r=PG", "display_name": "whot", "link": "https://stackoverflow.com/users/2345428/whot"}, "is_accepted": true, "score": 0, "last_activity_date": 1447208987, "creation_date": 1447208987, "answer_id": 33643308, "question_id": 33258007, "link": "https://stackoverflow.com/questions/33258007/device-event-handling-with-dev-input-eventx-and-c-c/33643308#33643308", "title": "Device event handling with /dev/input/eventX and c/c++", "body": "<p>The core of libevdev is relatively simple and not much more than a read() that reads in a set of struct input_event. Those are defined in linux/input.h and you can get type, code and value from those.</p>\n\n<p>Most of what libevdev provides is type-safety so you can't screw up the ioctls and some of the corner cases of event handling (most of them to do with multitouch).</p>\n\n<p>If your need is fairly simple and straightforward, writing the code directly will work just as well, especially if even static linking isn't an option. All you need then is open(), read() and ioctl().</p>\n"}], "owner": {"reputation": 13, "user_id": 5251572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a51bfacb49f8d96d5510b830e190d3?s=128&d=identicon&r=PG&f=1", "display_name": "Toniy", "link": "https://stackoverflow.com/users/5251572/toniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2553, "favorite_count": 0, "accepted_answer_id": 33643308, "answer_count": 1, "score": 1, "last_activity_date": 1447208987, "creation_date": 1445426437, "last_edit_date": 1495539870, "question_id": 33258007, "link": "https://stackoverflow.com/questions/33258007/device-event-handling-with-dev-input-eventx-and-c-c", "title": "Device event handling with /dev/input/eventX and c/c++", "body": "<p>I need to detect device of certain type (e.g. mouse) and catch its events in linux with daemon.</p>\n\n<p>Usage of <code>Xlib</code> seems useless because <code>Xlib</code> can only catch an event with window created by application but not all system events (but if I am wrong, please correct me).</p>\n\n<p>One of solutions was using of <code>/dev/input/eventX</code> files (where <code>X</code> is number). In command line with <code>ls -l by-id</code> I can detect which event file handles certain device.</p>\n\n<p>Further googling led me to <a href=\"http://www.freedesktop.org/wiki/Software/libevdev/\" rel=\"nofollow noreferrer\">libevdev</a>. It is actually wrapper around system calls (you even have to obtain file descriptor of event file manually before handling this file with libevdev) but it can also find out <strong>types and codes</strong> of events that this device can emit before these events are emitted. But I can't use it because there is some difficulties with embedding it onto destination computers.</p>\n\n<p>So the question is: can I do this with C/C++ without parsing of <code>ls -l by-id</code> output? I mean can I detect type of device binded to certain <code>/dev/input/eventX</code> file or at least get types of events that it can emit with only system calls?</p>\n\n<p>And if there any solutions for detecting device events in linux else?</p>\n\n<p>Thanks in advance.</p>\n\n<p>=======</p>\n\n<p><strong>[UPD]:</strong> Another solution in addition to one that given by @AlejandroDiaz in comments to this post (by the way, did not found how to paste reference to certain comment) without using <code>libevdev</code> is reading event bits with ioctl and parsing them like this:</p>\n\n<pre><code>int c_iHd = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK);\nif(c_iHd == -1)\n{\n    exit(1);\n}\nunsigned long c_uEventBits;\nioctl(c_iHd, EVIOCGBIT(0, EV_MAX), &amp;c_uEventBits);\nint hasButtonsEvent = (c_uEventBits &gt;&gt; EV_KEY) &amp; 1;\nclose(c_iHd);\n</code></pre>\n\n<p>Verbose solution is described in <a href=\"https://stackoverflow.com/questions/10341349/finding-the-description-of-the-device-connected-to-dev-input-eventx?rq=1\">this thread</a>.</p>\n"}, {"tags": ["c", "algorithm", "statistics", "probability"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1445425839, "post_id": 33257659, "comment_id": 54316555, "body": "<code>rand() % NUM_ROWS</code> is biased towards lower values (for <i>most</i> values of NUM_ROWS)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 6, "creation_date": 1445425999, "post_id": 33257659, "comment_id": 54316669, "body": "You really should adopt are more conventional coding style. This code is very hard to read for anyone but you. Hint: to make the code compact, use functions instead of omitting new lines."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1445428509, "post_id": 33257659, "comment_id": 54318354, "body": "You might also want to explain about using 15,14,13,10,12 vs 15,14,13,12,10 in different places."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1445428635, "post_id": 33257659, "comment_id": 54318447, "body": "@Lundin, I find the code is well formatted and compact, using column-based symmetry. Take 5 minutes to study it and you get his style. The &quot;conventional style&quot; will blow it up to several hundred lines of code and won&#39;t give you a better overview."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1445429378, "post_id": 33257659, "comment_id": 54318990, "body": "&quot;The determined Real Programmer can write FORTRAN programs in any language.&quot; -- <a href=\"http://www.ee.ryerson.ca/~elf/hack/realmen.html\" rel=\"nofollow noreferrer\">Ed Post.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1445436777, "creation_date": 1445436777, "answer_id": 33261676, "question_id": 33257659, "link": "https://stackoverflow.com/questions/33257659/c-battleship-program-non-statistical-output-after-10k-iterations/33261676#33261676", "title": "C &quot;Battleship&quot; program non-statistical output after 10k+ iterations", "body": "<p>I don't see any bugs that would produce the bias you're talking about, but I do see some unnecessary complication, and I can offer some suggestions:</p>\n\n<ul>\n<li><p>As suggested by wildplasser in the comments, using <code>%</code> to extract small random numbers from the C runtime library <code>rand()</code> often gives notoriously bad performance.  Try a stronger RNG, or even better, actual randomness from the likes of <code>/dev/urandom</code>.  At the very least, try using this for seeding another RNG.</p></li>\n<li><p>As a quick but not conclusive test, try changing <code>polShipDir  = (rand()%2) * 90;</code> to <code>polShipDir  = (1 - rand()%2) * 90;</code>.  Is the bias now for vertical ships?  If so, then the problem is definitely the RNG, since with a good RNG, the preceding two statements should be equivalent on average.</p></li>\n<li><p>In two separate places, you're unnecessarily randomising <em>the order in which you perform two tests whose order doesn't matter!</em>  First:</p></li>\n</ul>\n\n<p>(need this line for formatting apparently...)</p>\n\n<pre><code>if(rand()%2==0){\n            if( polShipDir==90 &amp;&amp; jShipStart  &gt; lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n            if( polShipDir==90 &amp;&amp; jShipStart &lt;= lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n            if( polShipDir== 0 &amp;&amp; iShipStart  &gt; lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n            if( polShipDir== 0 &amp;&amp; iShipStart &lt;= lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n        }\n        else{\n            if( polShipDir== 0 &amp;&amp; iShipStart &lt;= lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n            if( polShipDir== 0 &amp;&amp; iShipStart  &gt; lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n            if( polShipDir==90 &amp;&amp; jShipStart &lt;= lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n            if( polShipDir==90 &amp;&amp; jShipStart  &gt; lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n        }\n</code></pre>\n\n<p>can be simplified to</p>\n\n<pre><code>if( polShipDir==90){ jShipDir=(rand()%2) * (-2) + 1; }\nif( polShipDir== 0){ iShipDir=(rand()%2) * (-2) + 1; }\n</code></pre>\n\n<p>Second, much the same happens in the loop beginning with the comment <code>//Check to see if ANY part of the ship runs off map.</code>.  (BTW, you don't need a loop for this test at all: it suffices to check whether the beginning and ending points of the ship are at valid locations.)</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 3027106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/373db3cb9e78af88be1bc398dab8d76e?s=128&d=identicon&r=PG&f=1", "display_name": "user3027106", "link": "https://stackoverflow.com/users/3027106/user3027106"}, "is_accepted": false, "score": 1, "last_activity_date": 1445780710, "creation_date": 1445780710, "answer_id": 33330382, "question_id": 33257659, "link": "https://stackoverflow.com/questions/33257659/c-battleship-program-non-statistical-output-after-10k-iterations/33330382#33330382", "title": "C &quot;Battleship&quot; program non-statistical output after 10k+ iterations", "body": "<p>Thank you everyone for general suggestions.\nThank you wildplasser and j_random_hacker who mentioned the problems with rand().\nI went and got a real random generator (<a href=\"http://www.makelinux.net/alp/046\" rel=\"nofollow\">http://www.makelinux.net/alp/046</a>), the problem persisted, and I then found a programming error in my code. I had insufficient barriers to stop ships from word-wrapping off the right side and coming back one down on the left. That was causing the bias.\nMy probability maps with this fix and the same old rand() do reproduce the findings from the link mentioned, so that means to me that rand() is not \"that\" bad for my low level requirements.\nI am happy to hear that I can improve that randomness if I need to.\nThanks again.</p>\n\n<p>My map for (4-long) B now at 900000 (which tighten up at higher iteration). You can see where the ' outlines a shadow of the (5-long) A, and also where the % intrudes on the sides and interacts with &amp;, another shadow of the (5-long) A.</p>\n\n<pre><code>    \" # $ % % % % $ # \"\n    # $ % &amp; % &amp; &amp; % $ #\n    $ % &amp; &amp; &amp; &amp; &amp; &amp; % $\n    % &amp; &amp; ' &amp; &amp; ' &amp; &amp; %\n    % % &amp; &amp; &amp; &amp; ' &amp; % %\n    % % &amp; &amp; &amp; &amp; &amp; &amp; % %\n    % &amp; &amp; ' &amp; &amp; ' &amp; &amp; %\n    $ % &amp; &amp; &amp; &amp; &amp; &amp; % $\n    # $ % &amp; % % &amp; % $ #\n    \" # $ % % % % $ # \"\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3027106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/373db3cb9e78af88be1bc398dab8d76e?s=128&d=identicon&r=PG&f=1", "display_name": "user3027106", "link": "https://stackoverflow.com/users/3027106/user3027106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1445780710, "creation_date": 1445425399, "question_id": 33257659, "link": "https://stackoverflow.com/questions/33257659/c-battleship-program-non-statistical-output-after-10k-iterations", "title": "C &quot;Battleship&quot; program non-statistical output after 10k+ iterations", "body": "<p>I'm trying to duplicate the findings at <a href=\"http://thevirtuosi.blogspot.com/2011/10/linear-theory-of-battleship.html\" rel=\"nofollow\">http://thevirtuosi.blogspot.com/2011/10/linear-theory-of-battleship.html</a>. His finding is that the observation / empirical probability map for ships of subsequently smaller size forces them out from the center, where the ships of increasing size tend to gather.\nWhereas his results are symmetric between vertical and horizontal axes, the code I have written yields results where the horizontal axis gets noticeably more placement in ships - even though I am doing everything I can think of to thoroughly randomize the process between whether vertical or horizontal goes first. This asymmetry persists at any size of map. The minimum code to communicate the problem is 171 lines. Is this forum appropriate for this? This is not homework, work, or class related. I just have an interest in Battleship algorithms. The output is actual number of iterations that placed a certain ship in a certain spot, a percentage of such, and an ASCII character map of such - for easier eyeballing of asymmetries. Any direction appreciated. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\nclock_t start, end;\ndouble cpu_time_used;\nsrand(time(NULL));\nint obstruction;\nint done;\nint waysVert=0;\nint waysHorz=0;\nint counter=0;\nint vertCounter=0;\nint horzCounter=0;\nint iGuess=0;\nint jGuess=0;\nint shipType=0;\nint shotCounter=0;\nint hitCounter=0;\nint shipCellCounter=0;\nint guessCounter=0;\nint lenShip=0;\nint highestProb=0;\nint highestOccur=0;\nint iteration=0;\nint i=0;//x dimension\nint j=0;//y dimension\nint k=0;//z dimension and information dimension\nint n=0;//number dimension\nchar shipChar;\nchar shipName[20]=\"\";\nchar shipList[]=\"ABCDS\";//question for later: How does placement order affect heat map?\nint numberShips=strlen(shipList);\nint jShipStart=0;\nint iShipStart=0;\nint polShipDir=0;\nint biasShipDir=0;\nint jShipDir=0;\nint iShipDir=0;\nint NUM_COLS=10;//x dimension\nint NUM_ROWS=10;//y dimension\nint NUM_LEVS=21;//[0,7] Theoretical Prob. [10,16] Empirical Prob. 20 Presentation Level\nchar                grid[NUM_LEVS][NUM_ROWS][NUM_COLS];\nlong int empiricalGrid[NUM_LEVS][NUM_ROWS][NUM_COLS];\n\n\nfor(k=0;k&lt;NUM_LEVS;k++){for(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){           grid[k][j][i]=0;}}}//initialize 1-byte levels\nfor(k=0;k&lt;NUM_LEVS;k++){for(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){empiricalGrid[k][j][i]=0;}}}//initialize 4-byte levels\nk=20;//k=20 is the presentation level\n//for(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){grid[k][j][i]='~';}}//initialize water character (first time, single run)\n\nstart = clock();\nfor(iteration=0;iteration&lt;50000;iteration++){//has run at 50000000 iteration//could put scaling onto the printout using digit length of iterations\n    for(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){grid[k][j][i]='~';}}//initialize water character (every time, in loop)\n\n    //PLACEMENT ROUTINE FOR-LOOP AND DO-WHILE LOOP\n    for (shipType = 0; shipType &lt; strlen(shipList); shipType++){\n        shipChar=shipList[shipType];\n\n        switch(shipChar){\n        case 'A':lenShip=5;break;\n        case 'B':lenShip=4;break;\n        case 'C':lenShip=3;break;\n        case 'D':lenShip=2;break;\n        case 'S':lenShip=3;break;//since ran out of 3, think low number as in low elevation, beneath any other ships \n        }\n        shipCellCounter+=lenShip;\n        k=20;\n\n        do{\n            jShipStart=0;\n            iShipStart=0;\n            polShipDir=0;\n            biasShipDir=0;\n            jShipDir=0;\n            iShipDir=0;\n            obstruction=0;//printf(\"\\nSet to no obstruction to %d\\n\",obstruction);\n            if(rand()%2==0){\n                jShipStart=rand()%NUM_ROWS;//printf(\"jShipStart %d starting row (0-%d)\\n\",jShipStart,NUM_ROWS-1);//\n                iShipStart=rand()%NUM_COLS;//printf(\"iShipStart %d starting col (0-%d)\\n\",iShipStart,NUM_COLS-1);//\n            }\n            else{\n                iShipStart=rand()%NUM_COLS;//printf(\"iShipStart %d starting col (0-%d)\\n\",iShipStart,NUM_COLS-1);//\n                jShipStart=rand()%NUM_ROWS;//printf(\"jShipStart %d starting row (0-%d)\\n\",jShipStart,NUM_ROWS-1);//\n            }\n            polShipDir  = (rand()%2) * 90;//printf(\"polShipDir %d degrees\\n\",polShipDir);//polarity 00 deg =&gt; prop horz, 90 = prop vert\n            biasShipDir = (rand()%2) * (-2) + 1;//printf(\"biasShipDir %d\\n\",biasShipDir);\n\n            if(rand()%2==0){\n                if( polShipDir==90 &amp;&amp; jShipStart  &gt; lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n                if( polShipDir==90 &amp;&amp; jShipStart &lt;= lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n                if( polShipDir== 0 &amp;&amp; iShipStart  &gt; lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n                if( polShipDir== 0 &amp;&amp; iShipStart &lt;= lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n            }\n            else{\n                if( polShipDir== 0 &amp;&amp; iShipStart &lt;= lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n                if( polShipDir== 0 &amp;&amp; iShipStart  &gt; lenShip-1){ iShipDir=(rand()%2) * (-2) + 1; }\n                if( polShipDir==90 &amp;&amp; jShipStart &lt;= lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n                if( polShipDir==90 &amp;&amp; jShipStart  &gt; lenShip-1){ jShipDir=(rand()%2) * (-2) + 1; }\n            }\n\n            for(n=0;n&lt;lenShip;n++){//Check to see if ANY part of the ship runs off map.\n                if(rand()%2==0){\n                    if( polShipDir== 90 &amp;&amp; jShipStart + n * jShipDir &gt;= NUM_ROWS || polShipDir==  0 &amp;&amp; iShipStart + n * iShipDir &gt;= NUM_COLS ){\n                        obstruction=1;\n                    }\n                }\n                else{\n                    if( polShipDir==  0 &amp;&amp; iShipStart + n * iShipDir &gt;= NUM_COLS || polShipDir== 90 &amp;&amp; jShipStart + n * jShipDir &gt;= NUM_ROWS){\n                        obstruction=1;\n                    }\n                }\n            }\n\n            for(n=0;n&lt;lenShip;n++){//Check to see if ANY part of the ship DID NOT hit water.\n                if( grid [ k ] [ jShipStart + n * jShipDir ] [ iShipStart + n * iShipDir ] != '~' ){\n                obstruction=1;\n                }//ANY single obstruction means start over for this ship.\n            }\n\n            if(obstruction==0){//If prior loop HAS NOT resulted in ANY obstruction: THEN assign this ship\n                for(n=0;n&lt;lenShip;n++){\n                    grid [ k ] [ jShipStart + n * jShipDir ] [ iShipStart + n * iShipDir ] = shipChar;\n                }\n            }\n        }\n        while(obstruction==1);\n    }\n\n    for(i=0;i&lt;NUM_COLS;i++){for(j=0;j&lt;NUM_ROWS;j++){\n             if(grid[20][j][i]=='A'){empiricalGrid[15][j][i]++;}\n        else if(grid[20][j][i]=='B'){empiricalGrid[14][j][i]++;}\n        else if(grid[20][j][i]=='C'){empiricalGrid[13][j][i]++;}\n        else if(grid[20][j][i]=='S'){empiricalGrid[10][j][i]++;}//DONT CHANGE THIS RECORD OF SEQUENCE ANYWHERE ELSE. KEEP IT HERE.\n        else if(grid[20][j][i]=='D'){empiricalGrid[12][j][i]++;}\n        }\n    }\n}\nend = clock();\ncpu_time_used = ((double) (end - start)) / CLOCKS_PER_SEC;\n\nfor(k=16;k&gt;=10;k--){for(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){if(highestOccur&lt;=empiricalGrid[k][j][i]){highestOccur=empiricalGrid[k][j][i];}}}}\nprintf(\"Level %d Highest occurance = %d\\n\",k,highestOccur);\n\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%10lu\", empiricalGrid[15][j][i]);}printf(\"\\n\");}printf(\"A\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%10lu\", empiricalGrid[14][j][i]);}printf(\"\\n\");}printf(\"B\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%10lu\", empiricalGrid[13][j][i]);}printf(\"\\n\");}printf(\"C\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%10lu\", empiricalGrid[12][j][i]);}printf(\"\\n\");}printf(\"D\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%10lu\", empiricalGrid[10][j][i]);}printf(\"\\n\");}printf(\"S\\n\");\nprintf(\"Iterations: %d. CPU time used: %lf seconds. CLOCKS_PER_SEC = %d\\n\",iteration,cpu_time_used,CLOCKS_PER_SEC);\n\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2.2lf \", (double) empiricalGrid[15][j][i]/highestOccur);}printf(\"\\n\");}printf(\"A^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2.2lf \", (double) empiricalGrid[14][j][i]/highestOccur);}printf(\"\\n\");}printf(\"B^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2.2lf \", (double) empiricalGrid[13][j][i]/highestOccur);}printf(\"\\n\");}printf(\"C^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2.2lf \", (double) empiricalGrid[12][j][i]/highestOccur);}printf(\"\\n\");}printf(\"D^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2.2lf \", (double) empiricalGrid[10][j][i]/highestOccur);}printf(\"\\n\");}printf(\"S^\\n\");\nprintf(\"Iterations: %d. CPU time used: %lf seconds. CLOCKS_PER_SEC = %d\\n\",iteration,cpu_time_used,CLOCKS_PER_SEC);\n\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2c\", 33+(int)(10*((double) empiricalGrid[15][j][i]/highestOccur)));}printf(\"\\n\");}printf(\"A^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2c\", 33+(int)(10*((double) empiricalGrid[14][j][i]/highestOccur)));}printf(\"\\n\");}printf(\"B^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2c\", 33+(int)(10*((double) empiricalGrid[13][j][i]/highestOccur)));}printf(\"\\n\");}printf(\"C^\\n\");\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2c\", 33+(int)(10*((double) empiricalGrid[10][j][i]/highestOccur)));}printf(\"\\n\");}printf(\"S^\\n\");//SWITCH BACK\nfor(j=0;j&lt;NUM_ROWS;j++){for(i=0;i&lt;NUM_COLS;i++){printf(\"%2c\", 33+(int)(10*((double) empiricalGrid[12][j][i]/highestOccur)));}printf(\"\\n\");}printf(\"D^\\n\");\n\nprintf(\"Iterations: %d. CPU time used: %lf seconds. CLOCKS_PER_SEC = %d\\n\",iteration,cpu_time_used,CLOCKS_PER_SEC);\nprintf(\"!=00s, \\\"=10s, #=20s, $=30s, %%=40s, &amp;=50s, \\'=60s, (=70s, )=80s, *=90s\\n\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5471131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153024407341666/picture?type=large", "display_name": "Hussein Barada", "link": "https://stackoverflow.com/users/5471131/hussein-barada"}, "edited": false, "score": 0, "creation_date": 1445429030, "post_id": 33257885, "comment_id": 54318735, "body": "Ok. But why they used two loops: 1) for (val = 0.0; isdigit(s[i]); i++)        val = 10.0 * val + (s[i] - &#39;0&#39;); and 2) for (power = 1.0; isdigit(s[i]); i++) {        val = 10.0 * val + (s[i] - &#39;0&#39;);        power *= 10.0;    } Can&#39;t we simply merge both for loops in one loop as follows: for (val = 0.0, power = 1.0; isdigit(s[i]); i++) {        val = 10.0 * val + (s[i] - &#39;0&#39;);        power *= 10.0;    } I hope i made my question clear?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 107, "user_id": 5471131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153024407341666/picture?type=large", "display_name": "Hussein Barada", "link": "https://stackoverflow.com/users/5471131/hussein-barada"}, "edited": false, "score": 1, "creation_date": 1445429165, "post_id": 33257885, "comment_id": 54318837, "body": "@HusseinBarada First one to convert string to numbers until <code>&#39;.&#39;</code> is encountered . It ends as any non-digit is encountered. Second loop is to covert characters after <code>&#39;.&#39;</code> to numbers ."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 107, "user_id": 5471131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153024407341666/picture?type=large", "display_name": "Hussein Barada", "link": "https://stackoverflow.com/users/5471131/hussein-barada"}, "edited": false, "score": 1, "creation_date": 1445429262, "post_id": 33257885, "comment_id": 54318914, "body": "@HusseinBarada <code>-12.83</code>  first loop will convert  first two characters (<i>after</i>  <code>&#39;-&#39;</code> in string) to integers and store in <code>val</code> , and second loop will do it for characters after <code>&#39;.&#39;</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 107, "user_id": 5471131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153024407341666/picture?type=large", "display_name": "Hussein Barada", "link": "https://stackoverflow.com/users/5471131/hussein-barada"}, "edited": false, "score": 1, "creation_date": 1445429393, "post_id": 33257885, "comment_id": 54318999, "body": "@HusseinBarada  This <code>if (s[i] == &#39;.&#39;)++i;</code> is to get index of <code>&#39;.&#39;</code> and then increment <code>i</code>  and use it in second loop .  This <code>if</code> is to take action as <code>&#39;.&#39;</code> is encountered ."}, {"owner": {"reputation": 107, "user_id": 5471131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153024407341666/picture?type=large", "display_name": "Hussein Barada", "link": "https://stackoverflow.com/users/5471131/hussein-barada"}, "edited": false, "score": 0, "creation_date": 1445431081, "post_id": 33257885, "comment_id": 54320035, "body": "ok got it. The whole function makes more sense to me. Thanks for your help @ameyCU"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 5, "last_activity_date": 1445426566, "last_edit_date": 1445426566, "creation_date": 1445426065, "answer_id": 33257885, "question_id": 33257619, "link": "https://stackoverflow.com/questions/33257619/kr-book-exercise-4-2/33257885#33257885", "title": "K&amp;R book exercise 4-2", "body": "<p>Variable <code>power</code> is for division of number by power , to get result as float point .</p>\n\n<p>Let your string be <code>-12.83</code> , then  first <code>for</code> loop will check for space and increment <code>i</code> as no space so ,<code>i=0</code> . </p>\n\n<p><code>sign</code> will be <code>-1</code> as <code>s[i]=s[0]='-'</code> . </p>\n\n<p>In next two loops string's values are converted to integers and stored in <code>val</code> ( <em>excluding</em> <code>.</code> - figure out yourself) . </p>\n\n<p>Now after both loop <code>val</code> will be <code>1283</code> .  But last loop will iterate for <code>2</code> times and <code>power</code> will be changed to <code>100.00</code> (<code>10*1.0</code> in first iteration and <code>10*10.0</code> in second iteration) . </p>\n\n<p>Now to get value as float point <code>val</code> is divided by <code>power</code>  and multiplied by <code>sign</code> . </p>\n\n<p>So , what it will return is <code>-1*1283/100</code> , thus <code>-12.83</code> is your float point number .</p>\n"}], "owner": {"reputation": 107, "user_id": 5471131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153024407341666/picture?type=large", "display_name": "Hussein Barada", "link": "https://stackoverflow.com/users/5471131/hussein-barada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 33257885, "answer_count": 1, "score": 3, "last_activity_date": 1445426566, "creation_date": 1445425284, "last_edit_date": 1445426075, "question_id": 33257619, "link": "https://stackoverflow.com/questions/33257619/kr-book-exercise-4-2", "title": "K&amp;R book exercise 4-2", "body": "<p>I'm studying K&amp;R book. I'm currently at chapter 4. I was reading the atof() function on page 71. Function atof(s) converts string to its double precision floating point equivalent.</p>\n\n<p>The code of atof() is as following:<br>\n//atof: convert string s to double</p>\n\n<pre><code>double atof2(char s[])\n{\n   double val, power;\n   int i, sign;\n\n   for (i = 0; isspace(s[i]); ++i) //skip white space\n       ;\n   sign = (s[i] == '-') ? -1: 1;\n   if (s[i] == '-' || s[i] == '-')\n       ++i;\n\n   for (val = 0.0; isdigit(s[i]); i++)\n       val = 10.0 * val + (s[i] - '0');\n\n   if (s[i] == '.')\n       ++i;\n   for (power = 1.0; isdigit(s[i]); i++) {\n       val = 10.0 * val + (s[i] - '0');\n       power *= 10.0;\n   }\n\n   return sign * val / power;\n</code></pre>\n\n<p>}</p>\n\n<p>My question is about variable: power. Why do we need it for? </p>\n\n<p>I do understand the use of variable: \"val\" but i'm not sure about variable: \"power\". Why do we divide val by power? </p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 5, "creation_date": 1445425495, "post_id": 33257597, "comment_id": 54316306, "body": "missing <code>#include &lt;string.h&gt;</code>. this has the prototype for <code>strtok</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1445425611, "post_id": 33257597, "comment_id": 54316397, "body": "and <code>for (i = 0; i &lt; (n_spaces+1); ++i)</code> --&gt; <code>for (i = 0; i &lt; n_spaces; ++i)</code> or <code>for (i = 0; res[i]; ++i)</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 1, "creation_date": 1445426037, "post_id": 33257597, "comment_id": 54316694, "body": "Are you running 32-bit Windows and 64-bit Linux?  The missing header noted by @amdixon would therefore cause <code>strtok()</code>&#39;s 64-bit pointer return value to be truncated to a 32-bit integer value, as by default functions without a prototype are assumed to return <code>int</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1445426075, "post_id": 33257597, "comment_id": 54316716, "body": "When you invoke undefined behavior, anything can happen. It might give a segfault, it might appear to run OK."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1445426899, "post_id": 33257597, "comment_id": 54317289, "body": "in Windows the pointer of string returned by <code>getenv()</code> is not write protected. and <code>strtok </code> causes segmentation fault if you passe to its first argument a protected string (const). check if in linux <code>getenv()</code> returned pointer is not protected"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1445427549, "post_id": 33257597, "comment_id": 54317739, "body": "<code>res[n_spaces-1] = p;</code>    in the first iteration of the loop (n_spaces starts as 0 )"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 1, "creation_date": 1445427673, "post_id": 33257597, "comment_id": 54317818, "body": "@milevyo I dug a little and found that the pointer returned by getenv() can be in read-only areas according to the C Standard, Sec. 7.20.4.5, The getenv function"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445428154, "post_id": 33257597, "comment_id": 54318129, "body": "@Magisch i did right now in both windows 10 64bit and ubuntu 15.4 64bit  <code>strcpy(getenv(&quot;path&quot;),&quot;hello world); printf(&quot;%s\\n&quot;,getenv(&quot;path&quot;));</code> and guess what? it printed &quot;Hello world&quot;. how it can be explained?"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1445428427, "post_id": 33257597, "comment_id": 54318304, "body": "i have ubuntu64 15.4 on a virtual machine. and the code is working perfectly. so, the only suspected thing is that <code>getenv()</code> in your machine is returning a read-only pointer."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1445428524, "post_id": 33257597, "comment_id": 54318367, "body": "Wether or not that works is irrelevant, as he is invoking undefined behaviour by modifying the getenv() pointer, which is illegal. Additionally he hasn&#39;t included &lt;string.h&gt; which means his strtok is not prototyped."}, {"owner": {"reputation": 58, "user_id": 4937441, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4290A3ZCX78/AAAAAAAAAAI/AAAAAAAAACI/wyRnYex-qRA/photo.jpg?sz=128", "display_name": "Hassan Mohamed", "link": "https://stackoverflow.com/users/4937441/hassan-mohamed"}, "edited": false, "score": 0, "creation_date": 1445451012, "post_id": 33257597, "comment_id": 54333809, "body": "Thanks all for your help . the problem was forgetting: &lt;string.h&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1445427412, "post_id": 33258072, "comment_id": 54317646, "body": "Depends on the version of the C standard. Obsolete versions of C allowed implicit function declarations, which in this case would cause the code to go haywire. Newer versions of C will probably give compiler errors."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445427708, "post_id": 33258072, "comment_id": 54317831, "body": "@Lundin he is also modifying a pointer returned by the getenv() function, which is prohibited under the c standart <code>C Standard, Sec. 7.20.4.5, The getenv function</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1445429064, "post_id": 33258072, "comment_id": 54318757, "body": "@Magisch You are right, but I cannot find the quote you posted in the C standard. The quote in the C standard is different from what you&#39;ve posted."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1445429157, "post_id": 33258072, "comment_id": 54318830, "body": "@CoolGuy I have it from here: <a href=\"http://www.cse.psu.edu/~deh25/cmpsc311/Lectures/Environment-Variables/Environment-Variables-2.html\" rel=\"nofollow noreferrer\">cse.psu.edu/~deh25/cmpsc311/Lectures/Environment-Variables/&hellip;</a>    I assumed they would at least quote verbatim from the C Standard, but apparently not. I&#39;ll edit in the link, as the reference seems not quite enough."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": true, "score": 4, "last_activity_date": 1445429222, "last_edit_date": 1445429222, "creation_date": 1445426647, "answer_id": 33258072, "question_id": 33257597, "link": "https://stackoverflow.com/questions/33257597/segmentation-fault-in-c-linux-but-not-in-windows/33258072#33258072", "title": "segmentation fault in c linux but not in windows", "body": "<p>You are missing an include, namely <code>#include &lt;string.h&gt;</code> which is responsible for providing the prototype for the <code>strtok</code> function you are using. Missing the prototype for this is undefined behaviour, and should not surprise you to not work.   </p>\n\n<p>Additionally (credit to @milevyo for pointing this out):</p>\n\n<p>You are not supposed to modify the pointer beeing returned by <code>getenv()</code>.</p>\n\n<p><a href=\"http://www.cse.psu.edu/~deh25/cmpsc311/Lectures/Environment-Variables/Environment-Variables-2.html\" rel=\"nofollow\">C Standard, Sec. 7.20.4.5, The getenv function</a></p>\n\n<blockquote>\n  <p>Using getenv()</p>\n  \n  <p>The return value might be aimed at</p>\n\n<pre><code>a read-only section of memory\na single buffer whose contents are modified on each call\n    getenv() returns the same value on each call\na dynamically-allocated buffer that might be reallocated on the next call\na tightly packed set of character strings with no room for expansion\n</code></pre>\n  \n  <p>Use the returned string before calling getenv() again. Do not modify\n  the returned string.</p>\n</blockquote>\n\n<p>So by calling <code>strtok</code> to a variable assigned a pointer that has been returned from <code>getenv()</code> you are invoking additional undefined behaviour.</p>\n\n<p>To correct this, copy the string that the pointer which <code>getenv()</code> returned is pointing to into an auxiliary variable with <code>strdup()</code></p>\n"}], "owner": {"reputation": 58, "user_id": 4937441, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4290A3ZCX78/AAAAAAAAAAI/AAAAAAAAACI/wyRnYex-qRA/photo.jpg?sz=128", "display_name": "Hassan Mohamed", "link": "https://stackoverflow.com/users/4937441/hassan-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1535, "favorite_count": 0, "accepted_answer_id": 33258072, "answer_count": 1, "score": 0, "last_activity_date": 1445429222, "creation_date": 1445425223, "last_edit_date": 1445426016, "question_id": 33257597, "link": "https://stackoverflow.com/questions/33257597/segmentation-fault-in-c-linux-but-not-in-windows", "title": "segmentation fault in c linux but not in windows", "body": "<p>I am trying to write a code to split given Path by the character \":\" and there is my code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid parser()\n{\n    char ** res  = NULL;\n    char *  p    = strtok (getenv(\"PATH\"), \":\");\n    int n_spaces = 0, i;\n\n    /* split string and append tokens to 'res' */\n\n     while (p)\n     {\n         res = realloc (res, sizeof (char*) * ++n_spaces);\n\n         if (res == NULL)\n             exit (-1); /* memory allocation failed */\n\n         res[n_spaces-1] = p;\n\n         p = strtok (NULL, \":\");\n     }\n\n     /* realloc one extra element for the last NULL */\n\n      res = realloc (res, sizeof (char*) * (n_spaces+1));\n      res[n_spaces] = 0;\n\n    /* print the result */\n\n      for (i = 0; i &lt; (n_spaces+1); ++i)\n          printf (\"res[%d] = %s\\n\", i, res[i]);\n\n    /* free the memory allocated */\n\n     free (res);\n}\n\nint main(int argc , char* argv[])\n{\n    parser();\n    return 0;\n}\n</code></pre>\n\n<p>this code gives me segmentation fault in linux but when a tried to run it on windows , it worked fine !!  </p>\n"}, {"tags": ["c", "dynamic-allocation", "dma", "calloc"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1445425165, "post_id": 33257531, "comment_id": 54316083, "body": "Are you talking about virtual or physical memory? If you allocate &gt; page size of memory, the physical memory might not be contigous."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1445425323, "post_id": 33257531, "comment_id": 54316190, "body": "Punctuation wasn&#39;t invented for nothing. And where did you hear that <code>calloc</code> doesn&#39;t allocate contigous memory?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445429343, "post_id": 33257531, "comment_id": 54318967, "body": "I think this is &#39;how does virtual memory work?&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 0, "last_activity_date": 1445426639, "last_edit_date": 1445426639, "creation_date": 1445425293, "answer_id": 33257625, "question_id": 33257531, "link": "https://stackoverflow.com/questions/33257531/calloc-and-non-contiguous-memory-blocks-and-void-pointer/33257625#33257625", "title": "calloc and non contiguous memory blocks and void pointer", "body": "<p>Where did you read that:</p>\n\n<blockquote>\n  <p>it my allocate different different non contiguous blocks but starting address > we get\n  as return value of calloc will only point to contiguous memory from\n  starting address</p>\n</blockquote>\n\n<p>The C library function <code>void *calloc(size_t nitems, size_t size)</code> allocates the requested memory and returns a pointer to it. The difference in <strong><code>malloc</code></strong> and <strong><code>calloc</code></strong> is that <code>malloc</code> does not set the memory to zero where as <code>calloc</code> sets allocated memory to zero. </p>\n\n<p><a href=\"http://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow\">http://en.cppreference.com/w/c/memory/calloc</a></p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 4109702, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001921880052/picture?type=large", "display_name": "Niravsinh Parmar", "link": "https://stackoverflow.com/users/4109702/niravsinh-parmar"}, "edited": false, "score": 0, "creation_date": 1446043256, "post_id": 33257713, "comment_id": 54579343, "body": "hey bro search in internet you will find that calloc gives non contiguous blocks of memory and it uses linked list for that and here i am talking about logical address only (calloc will assigned blocks of non contiguous logical address ."}, {"owner": {"reputation": 109, "user_id": 4109702, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001921880052/picture?type=large", "display_name": "Niravsinh Parmar", "link": "https://stackoverflow.com/users/4109702/niravsinh-parmar"}, "edited": false, "score": 0, "creation_date": 1446749801, "post_id": 33257713, "comment_id": 54884647, "body": "Go to the site given below and see your self  in side is is given that calloc  may or may not give contiguous locations .....                     <a href=\"http://r4r.co.in/answer/index.php?id=22&amp;option=C%20SUB\" rel=\"nofollow noreferrer\">r4r.co.in/answer/index.php?id=22&amp;option=C%20SUB</a>"}, {"owner": {"reputation": 109, "user_id": 4109702, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001921880052/picture?type=large", "display_name": "Niravsinh Parmar", "link": "https://stackoverflow.com/users/4109702/niravsinh-parmar"}, "edited": false, "score": 0, "creation_date": 1446750281, "post_id": 33257713, "comment_id": 54884919, "body": "here is one other where it is mentioned that may or may not continuous     <a href=\"http://www.cprogrammingexpert.com/C/Tutorial/dynamic_memmory_allocation/calloc.aspx\" rel=\"nofollow noreferrer\">cprogrammingexpert.com/C/Tutorial/dynamic_memmory_allocation&zwnj;&#8203;/&hellip;</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1445425569, "creation_date": 1445425569, "answer_id": 33257713, "question_id": 33257531, "link": "https://stackoverflow.com/questions/33257531/calloc-and-non-contiguous-memory-blocks-and-void-pointer/33257713#33257713", "title": "calloc and non contiguous memory blocks and void pointer", "body": "<blockquote>\n  <p>but it is said that it may not allocate in contiguous address space</p>\n</blockquote>\n\n<p>Where is this \"said\" and what's the context?</p>\n\n<p><code>calloc()</code> returns a pointer to a contiguous block (in virtual address space) of size <code>nelem * size</code>.</p>\n\n<p>Consecutive calls to <code>calloc()</code> don't give you <em>adjacent</em> blocks (in general).</p>\n"}], "owner": {"reputation": 109, "user_id": 4109702, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001921880052/picture?type=large", "display_name": "Niravsinh Parmar", "link": "https://stackoverflow.com/users/4109702/niravsinh-parmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1445426639, "creation_date": 1445425075, "last_edit_date": 1445425731, "question_id": 33257531, "link": "https://stackoverflow.com/questions/33257531/calloc-and-non-contiguous-memory-blocks-and-void-pointer", "title": "calloc and non contiguous memory blocks and void pointer", "body": "<p>calloc function used to reserve memory and gives starting address of memory block but it is said that it may not allocate  in contiguous address space and rather it my allocate different different non contiguous blocks but starting address we get as return value of calloc will only   point to contiguous memory from starting address then if memory is allocated with two memory block then how pointer will jump to other memory block when one contiguous block will be occupied</p>\n\n<pre><code>void * calloc (size_t n, size_t size)\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445434630, "post_id": 33257404, "comment_id": 54322665, "body": "Can you do an experiment for us, please?  Change your memory allocation line to read <code>size_t size = ((size_t) 1) * 1024 * 1024 * 1024;</code> and re-run the program.  It should complete almost immediately.  Now increase the 1 to a 2 and run it again.  Again, it should complete almost immediately, 2GB is peanuts these days.  Keep increasing the number by 1 and re-running the program until it gets stuck.  Report the smallest number at which the program gets stuck."}], "answers": [{"comments": [{"owner": {"reputation": 1652, "user_id": 221965, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/kitvT.jpg?s=128&g=1", "display_name": "Dapeng", "link": "https://stackoverflow.com/users/221965/dapeng"}, "edited": false, "score": 0, "creation_date": 1445426866, "post_id": 33257682, "comment_id": 54317267, "body": "it is taking way too much time, 30minute as shown from top and it has no will to stop, <b>and</b> not responding to my kill command either. very curious, what is the kernel/hypervisor doing now"}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 1, "creation_date": 1445427305, "post_id": 33257682, "comment_id": 54317570, "body": "I think usage of <code>madvise()</code> with <code>MADV_SEQUENTIAL</code> might be helpful (or not, I haven&#39;t tested this)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1445434393, "post_id": 33257682, "comment_id": 54322513, "body": "You&#39;re right overall, but you&#39;re a little confused about signal handling.  If this program weren&#39;t stuck <i>inside the kernel</i> it would get killed by <code>SIGTERM</code> just fine.  A signal can be delivered at any point where the CPU is executing user-space instructions, as long as it isn&#39;t blocked.  <code>ps -ef</code> will probably report this process is in <code>D</code> state, which means <i>uninterruptible</i> I/O wait inside the kernel -- that is the only situation where signals don&#39;t work."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445435039, "post_id": 33257682, "comment_id": 54322967, "body": "@zwol: hm, you seem to be right, but I doubt execution is stuck in kernel land"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 1652, "user_id": 221965, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/kitvT.jpg?s=128&g=1", "display_name": "Dapeng", "link": "https://stackoverflow.com/users/221965/dapeng"}, "edited": false, "score": 0, "creation_date": 1445435063, "post_id": 33257682, "comment_id": 54322985, "body": "@Dapeng: could you run <code>ps -ef</code> when your process hangs."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445438279, "post_id": 33257682, "comment_id": 54325533, "body": "I see that the OP did post a <code>ps</code> line.  It&#39;s unfortunate that <code>ps</code> uses <code>R</code> for both &quot;executing instructions in user space&quot; and &quot;executing instructions in the kernel&quot;.  In the kernel, what Marcus originally said about signals is true more or less: they can&#39;t be delivered just anywhere."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1445438448, "post_id": 33257682, "comment_id": 54325655, "body": "<a href=\"http://lxr.free-electrons.com/source/mm/mprotect.c#L213\" rel=\"nofollow noreferrer\">Looking at the code</a>, I think it&#39;s probably spinning inside the loop on lines 227-233, and if you trace downward, that does a <i>ton</i> of work which may well involve hypervisor calls for every single page, and there&#39;s no check for needing to reschedule or anything.  On a uniprocessor this would lock up the entire machine until it finished."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445438483, "post_id": 33257682, "comment_id": 54325679, "body": "I&#39;m starting to think the answer here is &quot;file a bug report against the kernel&quot;."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445439078, "post_id": 33257682, "comment_id": 54326150, "body": "@zwol: <b>please</b> post this as an answer here."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445449896, "post_id": 33257682, "comment_id": 54333182, "body": "@MarcusM&#252;ller If we can&#39;t just leave things as is, which would be my first choice, I would prefer that you edit my observations into <i>your</i> answer."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1445449997, "post_id": 33257682, "comment_id": 54333234, "body": "@zwol: Ok, I see your point. I think your comment is clear enough here. Maybe OP should also get in touch with the amazon guys -- people renting humongous VMs and then not being able to sequentially access RAM does indeed sound like a support case."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 2, "last_activity_date": 1445433964, "last_edit_date": 1445433964, "creation_date": 1445425480, "answer_id": 33257682, "question_id": 33257404, "link": "https://stackoverflow.com/questions/33257404/why-update-big-array-makes-change-protection-kernel-call-dominating-cpu/33257682#33257682", "title": "why update big array makes &quot;change_protection&quot; kernel call dominating CPU?", "body": "<p>So what happens is:</p>\n\n<ol>\n<li>you <code>malloc</code> code. That means the kernel maps pages into your program's space; for that, the pages don't even have to be available, its more of a \"notify me once you actually access that memory\" situation.</li>\n<li>your first loop sequentially access the pages. Thus, the kernel frequently has to actually assign real memory to your formerly unused pages. Probably, the AWS hypervisor is fast at providing that memory from its pool</li>\n<li>you access these pages again -- but as bad luck might have it, the pages at the start of your 160GB area might be \"far\" away now, and getting them back close to the CPU your code is running on might be slow. Remember, you're running on a <strong>VM</strong> on something resembling a NUMA machine.</li>\n</ol>\n\n<p><strong>EDIT</strong> the fact that it doesn't react to <code>SIGTERM</code> etc isn't surprising -- there's no explicit context switch happening and no signal checking done in the <code>for</code> loops, so there's no place that your program could react to signals.</p>\n"}], "owner": {"reputation": 1652, "user_id": 221965, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/kitvT.jpg?s=128&g=1", "display_name": "Dapeng", "link": "https://stackoverflow.com/users/221965/dapeng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1445433964, "creation_date": 1445424710, "last_edit_date": 1495539886, "question_id": 33257404, "link": "https://stackoverflow.com/questions/33257404/why-update-big-array-makes-change-protection-kernel-call-dominating-cpu", "title": "why update big array makes &quot;change_protection&quot; kernel call dominating CPU?", "body": "<p>here are the codes <code>gcc test.c -std=c99</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid main() {\n        size_t size = (long) 40 * 1024 * 1024 * 1024;\n        int* buffer = malloc(size * sizeof(int));\n        for (size_t i = 0; i &lt; size; i++) {\n                buffer[i] = 1;\n        }\n        printf(\"hello\\n\");\n        for (size_t i = 0; i &lt; size; i++) {\n                buffer[i] = 2;\n        }\n        printf(\"hello\\n\");\n}\n</code></pre>\n\n<p>160G ram allocated in one go, and traversed twice </p>\n\n<p>the first loop runs happily </p>\n\n<p>however the program kinda stuck inside the 2nd loop</p>\n\n<p>with <code>perf top</code> showing this </p>\n\n<pre><code>Samples: 7M of event 'cpu-clock', Event count (approx.): 14127849698\n 74.95%  [kernel]             [k] change_protection\n 23.52%  [kernel]             [k] vm_normal_page\n  0.40%  [kernel]             [k] _raw_spin_lock\n  0.34%  [kernel]             [k] _raw_spin_unlock\n</code></pre>\n\n<p>with <code>top</code> showing this </p>\n\n<pre><code>top - 10:52:36 up 55 min,  4 users,  load average: 1.16, 1.18, 1.04\nTasks: 240 total,   2 running, 238 sleeping,   0 stopped,   0 zombie\nCpu(s):  0.0%us,  3.1%sy,  0.0%ni, 96.9%id,  0.0%wa,  0.0%hi,  0.0%s\nMem:  251913536k total, 170229472k used, 81684064k free,    27820k b\nSwap:        0k total,        0k used,        0k free,   352816k cac\n\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND\n12825 dapeng    20   0  160g 160g  376 R 100.0 66.6  30:38.55 a.out\n</code></pre>\n\n<p>and the best part is now this program doesn't answer to <code>kill</code> command any more </p>\n\n<p>gcc version <code>gcc (GCC) 4.8.2 20140120 (Red Hat 4.8.2-16)</code></p>\n\n<p>server <code>AWS EC2 r3.8xlarge</code></p>\n\n<p>Operating System <code>Amazon Linux AMI release 2014.09</code></p>\n\n<p>This is related question to <a href=\"https://stackoverflow.com/questions/32919929/why-does-change-protection-hog-cpu-while-loading-a-large-amount-of-data-into-r\">Why does `change_protection` hog CPU while loading a large amount of data into RAM?</a></p>\n"}, {"tags": ["c", "while-loop", "increment"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1445426317, "post_id": 33257394, "comment_id": 54316891, "body": "Why not use a <code>for()</code> loop? That&#39;s the normal way to increment a variable through a range."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445427125, "post_id": 33257534, "comment_id": 54317450, "body": "How will it be equal to MAXWORD when the code enters the while body? After the first iteration,  it will be <code>1</code>, it will <i>not</i> be <code>155</code>, it should have been <code>0</code>."}], "tags": [], "owner": {"reputation": 66, "user_id": 5469100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874cad9657c1ab5b7a7f03cd6e9c81bb?s=128&d=identicon&r=PG&f=1", "display_name": "xcervilla", "link": "https://stackoverflow.com/users/5469100/xcervilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1445425077, "creation_date": 1445425077, "answer_id": 33257534, "question_id": 33257394, "link": "https://stackoverflow.com/questions/33257394/incrementation-in-while-false-result/33257534#33257534", "title": "incrementation in while false result", "body": "<p>It is because of the postincrement operator, first reads the value of your variable, and increments it by one after reading the value so in your code, the i variable will be &lt; than MAXWORD when you do the comparison in the while, and will be equal to MAXWORD when enters the while body. </p>\n\n<p>Hope that this will help you.</p>\n"}, {"comments": [{"owner": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1445428216, "post_id": 33258086, "comment_id": 54318169, "body": "I understand but the thing I don&#39;t is that <code>matrice[1][0] = MAXWORD (155)</code> and <code>matrice[2][0] = 2</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1445428438, "post_id": 33258086, "comment_id": 54318311, "body": "I don&#39;t understand it, either. Is that really the whole function?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1445426692, "creation_date": 1445426692, "answer_id": 33258086, "question_id": 33257394, "link": "https://stackoverflow.com/questions/33257394/incrementation-in-while-false-result/33258086#33258086", "title": "incrementation in while false result", "body": "<p>WHen you do the increment in the <code>while()</code> statement, you're adding <code>1</code> to <code>i</code> <strong>before</strong> you enter the body of the loop. So on the first iteration, the value of <code>i</code> will be <code>1</code>, not <code>0</code>. That's why you never initialize<code>matrice[0][0]</code>.</p>\n\n<p>Moving the increment to the end of the loop means you enter it with the current value. So the first time through the loop <code>i</code> will be <code>0</code>, not <code>1</code>.</p>\n\n<p>A better way to loop through a range of values is with <code>for</code>, not <code>while</code>:</p>\n\n<pre><code>for (i = 0; i &lt; MAXWORD; i++) {\n    matrice[i][0] = i;\n    matrice[0][i] = i;\n}\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33258086, "answer_count": 2, "score": 2, "last_activity_date": 1445426692, "creation_date": 1445424697, "last_edit_date": 1445426311, "question_id": 33257394, "link": "https://stackoverflow.com/questions/33257394/incrementation-in-while-false-result", "title": "incrementation in while false result", "body": "<p>I am working on a project where I must creat a matrice and initialize it.\nSo this is what I have done to <code>init</code> the matrice :</p>\n\n<pre><code>int     levenshtein(char *string1, char *string2)\n{\n  int32_t       firstWord = strlen(string1);\n  int32_t       secondWord = strlen(string2);\n  int32_t       matrice[MAXWORD][MAXWORD]; //MAXWORD = 155\n  int32_t       i = 0;\n  int32_t       j = 0;\n\n  while (i++ &lt; MAXWORD)\n    {\n      matrice[i][0] = i;\n      matrice[0][i] = i;\n    }\n}\n</code></pre>\n\n<p>So when I print the matrice I should get in <code>matrice[0][0] = 0</code>, <code>matrice[1][0] = 1</code> etc</p>\n\n<p>But when I print the matrice everything will be good exepte that <code>matrice[1][0]</code> it is equal to <code>MAXWORD</code>.</p>\n\n<p>But if increment like this it while work perfectly </p>\n\n<pre><code>while (i &lt; MAXWORD)\n  {\n    matrice[i][0] = i;\n    matrice[0][i] = i;\n    i++\n  }\n</code></pre>\n\n<p>Why the  <code>while (i++ &lt; MAXWORD)</code> will change the result of <code>matrice[1][0]</code> (and only <code>matrice[1][0]</code>) after exiting the <code>while</code> ?</p>\n"}, {"tags": ["c++", "c", "arrays", "string", "arduino"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445423734, "post_id": 33257028, "comment_id": 54315170, "body": "Do you know the size before parsing ? Have you tried something ?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1445423911, "post_id": 33257028, "comment_id": 54315289, "body": "Do you know the number of elements and the size before parsing?"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445425170, "post_id": 33257028, "comment_id": 54316086, "body": "@&#212;rel i don&#39;t know the size before parsing, we cannot tell, that&#39;s part of the trick actually, it depends on the size of the string which can vary. i have posted my attempt below."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445425297, "post_id": 33257028, "comment_id": 54316171, "body": "@Magisch the generated array size depends on the length of the string, which can vary, i am reading the string directly from a text file stored on a micro sd card, basically it will give me a string object <code>String str;</code>."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1445431018, "post_id": 33257028, "comment_id": 54319990, "body": "format is not consistent why have you a <code>;</code> before the <code>.</code> or why don&#39;t you have a <code>,</code> before the <code>;</code> and why do you have <code>;.</code> to finish the data ?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445431601, "post_id": 33257028, "comment_id": 54320453, "body": "@&#212;rel That&#39;s a really good call. I was wondering why it was so hard to get my regex to work. I didn&#39;t even recognize it till after you said something."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445432288, "post_id": 33257028, "comment_id": 54320965, "body": "Please create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a> or in this case I&#39;d recommend removing the code, as it demonstrates effort, but the architecture should unfortunately be simplified."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445435703, "post_id": 33257028, "comment_id": 54323464, "body": "@&#212;rel it is consistent my friend, they are separators <code>1,2,3,4444444444;5,6,7,8888888888;.9,10,11,1212121212;.</code> becomes <code>1,2,3,4444444444;5,6,7,8888888888;</code> and  <code>9,10,11,1212121212;</code>, then they become <code>1,2,3,4444444444</code> and <code>5,6,7,8888888888</code> and <code>9,10,11,1212121212</code> and so on."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445436071, "post_id": 33257028, "comment_id": 54323764, "body": "@JonathanMee i believe that the format of the string is valid, three delimiters, they will split the string into three parts. am i missing something?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1445436588, "post_id": 33257028, "comment_id": 54324193, "body": "No, it is not, you don&#39;t have a <code>,</code> after  <code>4444444444</code> in your example so you why have a <code>;</code> after <code>5,6,7,8888888888</code> ? Other way to show the pblm you have 3 <code>,</code> for 4 elements but 3 <code>;</code> for  3 elements"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445437032, "post_id": 33257028, "comment_id": 54324566, "body": "@&#212;rel a parent <code>d1</code> can have any number of <code>d2</code> childs, they don&#39;t have to be equal. in this particular string we have <code>a</code> and <code>b</code>, <code>a</code> splits to <code>a0</code>, <code>a1</code>, while <code>b</code> splits to <code>b0</code> only."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445437354, "post_id": 33257028, "comment_id": 54324824, "body": "@user5470921 If you have code that works I&#39;d suggest posting that as an answer. And at a minimum you should only accept answers that actually answer the question. <a href=\"http://stackoverflow.com/a/33257838/2642059\">milevyo&#39;s answer does not</a> if you are looking for C code <a href=\"http://stackoverflow.com/a/33260205/2642059\">&#212;rel&#39;s answer does answer the question</a> and if you like C++ goodness my answer is viable."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445438169, "post_id": 33257028, "comment_id": 54325440, "body": "@JonathanMee i&#39;ll do that, sure, you got a point. i am still in the middle of going through both of the solutions you mentioned, you see, i need to get these working on an arduino board chip, which is different from using a direct c/c++ compiler."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445441235, "post_id": 33257028, "comment_id": 54327798, "body": "@user5470921 delimiter is to separate you don&#39;t put it a the end but between element. For example this string: <code>a00,a01,a02;a10,a11,a12.b00,b01,b02;b10,b11,b12</code> seems better than <code>a00,a01,a02;a10,a11,a12;.b00,b01,b02;b10,b11,b12;.</code>"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1445443394, "post_id": 33257028, "comment_id": 54329285, "body": "@&#212;rel i agree, it does seem better, and more logical for a human reader, the thing is that the string itself is generated with a set of loops, that&#39;s why we have some of delimiters appearing at the end, it shouldn&#39;t be a problem as long as we are aware and taking care of it, i am still in with you on having an appropriate style of where and how we should put the delimiters."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445431490, "post_id": 33257838, "comment_id": 54320360, "body": "This does not put the <code>int</code>s in an array."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445436349, "post_id": 33257838, "comment_id": 54323990, "body": "@JonathanMee the heavy work is already done though, i got it working after some tweaking, i&#39;ll have the post updated with my code that takes care of this part."}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1445425934, "creation_date": 1445425934, "answer_id": 33257838, "question_id": 33257028, "link": "https://stackoverflow.com/questions/33257028/splitting-a-string-into-a-3d-array/33257838#33257838", "title": "splitting a string into a 3d array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint c1,c2,c3;\n\nint n=0;\nchar sResult[20];\n\nvoid PrintLevel(int lvl){\n    if(n){\n        printf(\"d[%d][%d][%d] = \\\"%s\\\"\\n\",c3,c2,c1,sResult);\n        n=0;\n    }\n    switch(lvl){\n        case 3:\n            c3++;\n            c2=c1=0;\n            break;\n        case 2:\n            c2++;\n            c1=0;\n            break;\n        case 1:\n            c1++;\n    }\n\n    return ;\n}\n\nvoid addChar(char c){\n    sResult[n]=c;\n    n++;\n    sResult[n]=c=0;\n}\n/*______________________________________________________________________\n*/\n\nint main(){\n    char buff[]= \"0,1,2,4444444444;5,6,7,8888888888;.9,10,11,12121212;.\";\n    PrintLevel(0);\n    char *p=buff;\n    char c;\n    int ret;\n    int lvl;\n    while(c=*p){\n\n        lvl=(c==',')?1:((c==';')?2:((c=='.')?3:0) );\n\n        if(lvl)\n            PrintLevel(lvl);\n        else\n            addChar(c);\n        p++;\n    }\n    PrintLevel(lvl);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445437902, "post_id": 33259668, "comment_id": 54325229, "body": "you are right about 4444444444 and larger, these digits represent a unix timestamp actually (1445303228 for example), so they are in the range of long, my bad with the dummy string."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1445431445, "creation_date": 1445431445, "answer_id": 33259668, "question_id": 33257028, "link": "https://stackoverflow.com/questions/33257028/splitting-a-string-into-a-3d-array/33259668#33259668", "title": "splitting a string into a 3d array", "body": "<p>First note that a <code>long</code> is too small to hold even: <code>4444444444</code> <a href=\"https://msdn.microsoft.com/en-us/library/296az74e.aspx\" rel=\"nofollow\">It's max size is: <code>2147483647</code></a></p>\n\n<p>If a <code>long long</code> is used however the string can be eloquently parsed by a <a href=\"http://en.cppreference.com/w/cpp/regex/regex_token_iterator\" rel=\"nofollow\"><code>regex_token_iterator</code></a>. The parsing function should take in the input <code>string</code> and the delimiter and return separated <code>strings</code>. These inputs enable reuse in a function similar to this one:</p>\n\n<pre><code>auto parse(const string&amp; input, const string&amp; delimiter) {\n    const regex re(\"([^\" + delimiter + \"]+)\" + delimiter + '?');\n\n    return vector&lt;string&gt;(sregex_token_iterator(input.begin(), input.end(), re, 1), sregex_token_iterator());\n}\n</code></pre>\n\n<p>This will return the <code>input</code> in a partitioned <code>vector&lt;string&gt;</code>. This return can then be partitioned until the third dimension in which each partition will contain only numeric characters. At that point <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow\"><code>stoll</code></a> can be used to convert the <code>string</code> to a <code>long long</code>. This partitioning can be accomplished in nested loops like this:</p>\n\n<pre><code>vector&lt;vector&lt;vector&lt;long long&gt;&gt;&gt; foo;\n\nfor (auto&amp; i : parse(str, \"\\\\.\")) {\n    foo.resize(foo.size() + 1);\n    for (auto&amp; j : parse(i, \";\")) {\n        foo.back().resize(foo.back().size() + 1);\n        for (auto&amp; k : parse(j, \",\")) {\n            foo.back().back().push_back(stoll(k));\n        }\n    }\n}\n</code></pre>\n\n<p>One key aspect of this is that each partition must contain a number. This is enforced by the <code>'+'</code> in <code>re</code> which will not match if consecutive delimiters occur. <code>stoll</code> is very robust and will eat whitespace if that is in the input <code>string</code>, however if a <code>string</code> containing only whitespace or generally does not contain a number is fed to it it will throw an error. If that is a concern be sure to check your inputs before calling <code>stoll</code>.</p>\n\n<p>You can see a live example of this here: <a href=\"http://ideone.com/4vjdBx\" rel=\"nofollow\">http://ideone.com/4vjdBx</a></p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445434902, "post_id": 33260205, "comment_id": 54322846, "body": "I wouldn&#39;t mind upvoting a pure C solution, but it would need to put the values in a 3d array, not a 1d array that is indexed similarly to the 3d array."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445437398, "post_id": 33260205, "comment_id": 54324866, "body": "Gotta say the <code>goto</code> is painful, but I have given the +1 as promised."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1445440947, "post_id": 33260205, "comment_id": 54327599, "body": "@JonathanMee I know the <code>goto</code> is painful, but I choose to write the parser for a correct syntax and highlight the ack to support the format error."}], "tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": false, "score": 1, "last_activity_date": 1445436623, "last_edit_date": 1445436623, "creation_date": 1445432846, "answer_id": 33260205, "question_id": 33257028, "link": "https://stackoverflow.com/questions/33257028/splitting-a-string-into-a-3d-array/33260205#33260205", "title": "splitting a string into a 3d array", "body": "<p>With a dynamic flat array in pure C and then alloc the 3D array\nThe array size is double each time needed\nYou can set the first size with the define:</p>\n\n<pre><code>#define DEFAULT_SIZE 8 \n</code></pre>\n\n<p>as said in my comment the format is strange <code>;.</code> should be <code>.</code> and the final <code>;.</code> should be removed</p>\n\n<p>I add test to check if next line as the same size than the first one.</p>\n\n<pre><code>int main(void) { \n    char *data = \"1,2,3,1445303228;4,5,6,1445303228;.7,8,9,1445303273;.\"; \n    char *p; \n    int size = DEFAULT_SIZE; \n    int nb_element = 0; \n    int s1 = 0; \n    int s2 = 0; \n\n    int cur1 = 0; \n    int cur2 = 0; \n    int cur3 = 0; \n\n    int *d = malloc(sizeof(int) * DEFAULT_SIZE); \n    int ***d3; \n\n    if (!d) { \n        return -1; \n    } \n\n    p = data; \n    while (*p) { \n        if (nb_element == size) { \n            size *= 2; \n            d = realloc(d, size * sizeof(int)); \n            if (!d) { \n                return -1; \n            } \n        } \n        d[nb_element++] = strtol(p, &amp;p, 10); \n        switch (*p) { \n          case ',': \n            cur1++; \n            if (s1 &amp;&amp; cur1 &gt; s1) { \n                fprintf(stderr, \"Too many element for %d, %d:\" \n                        \" get %d, expect %d\\n\", cur2, cur3, cur1, s1); \n                return -1; \n            } \n            break; \n          case ';': \n            cur1++; \n            cur2++; \n            if (s1 == 0) { \n                s1 = cur1; \n            } \n            cur1 = 0; \n            if (s2 &amp;&amp; cur2 &gt; s2) { \n                fprintf(stderr, \"Too many element for %d:\" \n                        \" get %d, expect %d\\n\", cur3, cur2, s2); \n                return -1; \n            } \n            break; \n          case '.': \n          dot: \n            cur2++; \n            cur3++; \n            if (s2 == 0) { \n                s2 = cur2; \n            } \n            cur2 = 0; \n            cur1 = 0; \n            break; \n        } \n        p++; \n        /* XXX: ack due to strange format */ \n        if (*p == '.') \n            goto dot; \n    } \n    /*XXX! remove empty final line */ \n    cur3--; \n\n    d3 = malloc(sizeof(int **) * cur3); \n    for (int i = 0; i &lt; cur3; i++) { \n        d3[i] = malloc(sizeof(int *) * s2); \n        for (int j = 0; j &lt; s2; j++) { \n            d3[i][j] = malloc(sizeof(int) * s1); \n            for (int k = 0; k &lt; s1; k++) {  \n                d3[i][j][k] = d[i * s2 + j * s1 + k]; \n            } \n        } \n    } \n    free(d); \n    for (int i = 0; i &lt; cur3; i++) { \n        for (int j = 0; j &lt; s2; j++) { \n            for (int k = 0; k &lt; s1; k++) { \n                fprintf(stdout, \"d[%d][%d][%d] = %d\\n\", i,j,k, d3[i][j][k]); \n            } \n        } \n    } \n    return 0; \n} \n</code></pre>\n\n<p>output:</p>\n\n<pre><code>d[0][0][0] = 1\nd[0][0][1] = 2\nd[0][0][2] = 3\nd[0][0][3] = 1445303228\nd[0][1][0] = 4\nd[0][1][1] = 5\nd[0][1][2] = 6\nd[0][1][3] = 1445303228\nd[0][2][0] = 7\nd[0][2][1] = 8\nd[0][2][2] = 9\nd[0][2][3] = 1445303273\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "is_accepted": true, "score": 0, "last_activity_date": 1445658760, "last_edit_date": 1495541030, "creation_date": 1445438323, "answer_id": 33262285, "question_id": 33257028, "link": "https://stackoverflow.com/questions/33257028/splitting-a-string-into-a-3d-array/33262285#33262285", "title": "splitting a string into a 3d array", "body": "<p>got it working with a code that is mainly based on <a href=\"https://stackoverflow.com/a/33257838/5470921\">@milevyo's answer</a>.</p>\n\n<pre><code>struct ds { int a = 0, b = 0, c = 0; long d = 0; };\n\nstruct data {\n  struct ds array[32][8];\n  int i, j[24];\n\n  int n = 0, d1, d2, d3; char r[11];\n  void get(String array) {\n    if (array.length() + 1 != 1) {\n      char buff[array.length() + 1];\n      array.toCharArray(buff, array.length() + 1);\n      char c; char *p = buff; int l;\n      while (c = *p) {\n        l = (c == ',') ? 1 : ((c == ';') ? 2 : ((c == '.') ? 3 : 0));\n        if (l) a(l); else ch(c); p++;\n      }\n      a(l);\n    }\n  }\n  void a(int l) {\n    if (n) {\n      if (d1 == 0) array[d3][d2].a = atoi(r);\n      else if (d1 == 1) array[d3][d2].b = atoi(r);\n      else if (d1 == 2) array[d3][d2].c = atoi(r);\n      else if (d1 == 3) array[d3][d2].d = atol(r);\n      i = d3 + 1; j[d3] = d2 + 1; n = 0;\n    }\n    switch (l) {\n      case 3: d3++; d2 = d1 = 0; break;\n      case 2: d2++; d1 = 0; break;\n      case 1: d1++; break;\n    }\n  }\n  void ch(char c) { r[n] = c; n++; r[n] = c = 0; }\n} data;\n\nvoid setup () {\n  Serial.begin(19200); \n  Serial.println(\"..\"); \n\n  data.get(\"1,2,3,1445433855;4,5,6,1445433855;.7,8,9,1445438763;.\");\n\n  for (int i = 0; i &lt; data.i; i++) {\n    for (int j = 0; j &lt; data.j[i]; j++) {\n      for (int k = 0; k &lt; 4; k++) {\n        if (k == 0) Serial.print(data.array[i][j].a);\n        else if (k == 1) Serial.print(data.array[i][j].b);\n        else if (k == 2) Serial.print(data.array[i][j].c);\n        else if (k == 3) Serial.print(data.array[i][j].d);\n        Serial.print(\"\\t\");\n      }\n      Serial.println();\n    }\n    Serial.println();\n  }\n}\n\nvoid loop () { }\n</code></pre>\n\n<p>from</p>\n\n<pre><code>1,2,3,1445433855;4,5,6,1445433855;.7,8,9,1445438763;.\n</code></pre>\n\n<p>to</p>\n\n<pre><code>..\n1   2   3   1445433855  \n4   5   6   1445433855  \n\n7   8   9   1445438763  \n</code></pre>\n\n<p>via</p>\n\n<pre><code>..\ndata.array[0][0].a  data.array[0][0].b  data.array[0][0].c  data.array[0][0].d\ndata.array[0][1].a  data.array[0][1].b  data.array[0][1].c  data.array[0][1].d\n\ndata.array[1][0].a  data.array[1][0].b  data.array[1][0].c  data.array[1][0].d\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445555719, "post_id": 33265128, "comment_id": 54384856, "body": "can you elaborate further more? are you saying that i can have a struct as an array? how can i access all the elements? how about something like this <code>struct { int x, y; long d; } arr[4];</code>, <code>arr[0].x = 0; arr[3].y = 1;</code>, is this possible?"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445557020, "post_id": 33265128, "comment_id": 54385238, "body": "it works! i am mind-blown! for a 3D we can easily use <code>struct { int x = 0, y = 0; long t = 0; } arr[4][4]</code>;"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445568441, "post_id": 33265128, "comment_id": 54387836, "body": "i added an example ( source code) for demonstration purpose. please ensure that input string ends with a semicolon &quot;;&quot;"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445605195, "post_id": 33265128, "comment_id": 54404643, "body": "you even took it further with the dynamic memory allocation, which is essential in my case since i only have 8 kb to utilize. i really appreciate your input my friend. i had to use <code>data = (DATA *) calloc(nb, sizeof(DATA));</code> to get it running on my chip, the arduino ide is avr-gcc based."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445605228, "post_id": 33265128, "comment_id": 54404665, "body": "i am trying to make it 2D now by taking &quot;.&quot; into account, resulting an overall 3D structure <code>arr[i][j].a</code> along with the dynamic memory allocation, if this works it would be more than perfect. so far i am still having some difficulty implementing it, can you point me to a direction that can help me with this regard?"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445605748, "post_id": 33265128, "comment_id": 54404990, "body": "should i just add <code>case 3: data[i].d = atol(pp); break;</code> to have the long taking care of as well? will that be sufficient?"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445606915, "post_id": 33265128, "comment_id": 54405806, "body": "changing <code>sscanf(pp, &quot;%u&quot;, &amp;(data[i].d));</code> to <code>data[i].d = atol(pp);</code> did it for me. all set, except for the 2D part. i&#39;ll share my working code on a new answer, please have a look."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445612958, "post_id": 33265128, "comment_id": 54410230, "body": "@user5470921 it is possible to make it 2D array, the data[1][1]  will be null then."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445614499, "post_id": 33265128, "comment_id": 54411273, "body": "i mean how can we structure the array to be 2D and fill it with the appropriate values"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445614878, "post_id": 33265128, "comment_id": 54411528, "body": "it is little bit complicated than 1D array. i want to ask you. can this string array be longer? if so, how much items of  &quot;;&quot; in each &quot;.&quot; ?"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445616338, "post_id": 33265128, "comment_id": 54412423, "body": "it is indeed more complicated, but it will make the usage of memory much better, hence a much better hardware performance. the string can be longer, we have to figure the size ourselves (we already did), the same with <code>;</code>s inside a <code>.</code>, we cannot tell, it can have as many as the string dictates, we have to extract that info ourselves that&#39;s why it&#39;s a little challenging, if we knew the sizes before then using a direct static array size def. would do it, but that&#39;s not the case, all dynamic here. the string can vary within the program (inside a loop), i am reading a live feed from a text file."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445631447, "post_id": 33265128, "comment_id": 54420366, "body": "much much appreciated! i am getting a <code>&#39;DATA&#39; does not name a type</code> error from my compiler, once i work this out, it all should go very well. i&#39;ll let you know."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445653678, "post_id": 33265128, "comment_id": 54426646, "body": "i guess that &#39;DATA&#39; does not name a type  means that the compiler do not accept unnamed struct. i corrected this, it should go OK this time"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445654392, "post_id": 33265128, "comment_id": 54426742, "body": "same error i am afraid, still there, if you wish to test this out yourself, the compiler is available here <a href=\"https://www.arduino.cc/en/Main/Software\" rel=\"nofollow noreferrer\">arduino.cc/en/Main/Software</a>."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445654629, "post_id": 33265128, "comment_id": 54426772, "body": "i have internet issue, it is too slow, it will take a wile until i get the download"}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445656024, "post_id": 33265128, "comment_id": 54426960, "body": "for some reason, it now works! even though hours ago it didn&#39;t, don&#39;t know why or how. hey man, if you were in my town, i&#39;d buy you dinner, seriously, thank you."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445656256, "post_id": 33265128, "comment_id": 54426991, "body": "alright, i know why, your last edit did it, i didn&#39;t notice it, you changed it two minutes exactly after i tested the last code."}, {"owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "edited": false, "score": 0, "creation_date": 1445656828, "post_id": 33265128, "comment_id": 54427071, "body": "can&#39;t, not enough rep., i will once it goes up."}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1445654237, "last_edit_date": 1445654237, "creation_date": 1445446774, "answer_id": 33265128, "question_id": 33257028, "link": "https://stackoverflow.com/questions/33257028/splitting-a-string-into-a-3d-array/33265128#33265128", "title": "splitting a string into a 3d array", "body": "<p>i hope you saved the last post, this is an update to the last one, it handle 2D arrays as requested. hope you find it useful, if so send me a postcard :) </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n\n/*__________________________________________________________________________\n*/\n\nstruct DATA{\n   char a;\n   char b;\n   char c;\n   unsigned long d;\n};\n\n\n/*__________________________________________________________________________\n\n  allocate DATA struct, and fill it.\n  on error or no data, returns NULL\n*/\nstruct DATA *ParseString(char **pstr){\n    int val=0;\n    char *p;\n    struct DATA *data;\n    if(!pstr) return NULL;\n\n    char *str=*pstr;\n    if(!str) return NULL;\n\n    // can be ommited\n    // skipping non digital chars\n    while(*str &amp;&amp; !isdigit(*str))\n        str++;\n\n    //no digits?\n    if(!*str) return NULL;\n\n    p=str;\n    //ok at least one\n    data=(struct DATA*) calloc(1,sizeof(struct DATA));//calloc to initialize all to 0\n    for(int n=0;n&lt;4;n++){\n        val=0;\n        while(isdigit(*p)){\n            val*=10;\n            val+=(*p)-'0';\n            p++;\n        }\n        switch(n){\n            case 0:\n                data-&gt;a=val;\n                break;\n            case 1:\n                data-&gt;b=val;\n                break;\n            case 2:\n                data-&gt;c=val;\n                break;\n            case 3:\n                data-&gt;d=val;\n                break;\n        }\n        val=0;\n        if(*p!=',')\n            break;\n        p++;\n\n    }\n    *pstr=p;\n    return data;\n}\n/*__________________________________________________________________________\n\n    calculate the size of DATA * arra[c1][c2]\n*/\nvoid countArrBoudaries(char *s,unsigned short *c1,unsigned short *c2){\n    *c1=*c2=0;\n    unsigned short _c1=0;\n    while(*s){\n        switch(*s){\n            case ';':\n                _c1++;\n                break;\n            case '.':\n                if(_c1&gt;*c1)\n                    *c1=_c1;\n                _c1=0;\n                *c2+=1;\n                break;\n        }\n        s++;\n    }\n}\n/*__________________________________________________________________________\n*/\nint main(void){\n\n    struct DATA **pdata,*data;\n    char buff[]=\"1,2,3,1445303228;4,5,6,1445303228;.7,8,9,1445303273;.\";\n    char *p=buff;\n    unsigned short c1,c2;\n    countArrBoudaries(buff,&amp;c1,&amp;c2);\n    pdata=(struct DATA**)calloc((c2*c1),sizeof(pdata));\n\n    if(pdata){\n        // loading\n        for(int i=0;i&lt;c1;i++)\n            for(int j=0;j&lt;c2;j++)\n                pdata[i+(j*c1)]=ParseString(&amp;p);\n\n        // printing:\n        for(int i=0;i&lt;c1;i++)\n            for(int j=0;j&lt;c2;j++){\n                data=pdata[i+(j*c1)];\n                if(data){\n                    printf(\"data[%u][%u]={%d,%d,%d,%u};\\n\",i,j,data-&gt;a,data-&gt;b,data-&gt;c,data-&gt;d);\n                }else{\n                    printf(\"data[%u][%u]=NULL;\\n\",i,j);\n                }\n            }\n\n        // freeing memory:\n        for(int i=0;i&lt;(c1*c2);i++)\n            free(pdata[i]);\n        free(pdata);\n\n    }\n    printf(\"\\n\\nDONE\\n\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 5470921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce6ee6dd8eb86d90248a4189ba115d3?s=128&d=identicon&r=PG&f=1", "display_name": "user5470921", "link": "https://stackoverflow.com/users/5470921/user5470921"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 33262285, "answer_count": 5, "score": 1, "last_activity_date": 1445658760, "creation_date": 1445423584, "last_edit_date": 1445437706, "question_id": 33257028, "link": "https://stackoverflow.com/questions/33257028/splitting-a-string-into-a-3d-array", "title": "splitting a string into a 3d array", "body": "<p>let's say that we have a string <code>str</code>:</p>\n\n<pre><code>String str = \"1,2,3,4444444444;5,6,7,8888888888;.9,10,11,1212121212;.\";\n</code></pre>\n\n<p>defining three dimensions <code>d1</code>, <code>d2</code> and <code>d3</code> that are embedded in the string as follow:</p>\n\n<ul>\n<li><code>d1</code> has elements that are separated by a dot \".\"</li>\n<li><code>d2</code> has elements that are separated by a semicolon \";\"</li>\n<li><code>d3</code> has elements that are separated by a comma \",\"</li>\n</ul>\n\n<p><code>d3</code> is a child of <code>d2</code> and <code>d2</code> is a child of <code>d1</code> (parent). <code>d1 &gt; d2 &gt; d3</code>.</p>\n\n<p>we wish to have access to every element embedded in the string, meaning that we should have -as a result- an array as follows:</p>\n\n<pre><code>d[0][0][0] = \"1\";\nd[0][0][1] = \"2\";\nd[0][0][2] = \"3\";\nd[0][0][3] = \"4444444444\";\nd[0][1][0] = \"5\";\nd[0][1][1] = \"6\";\nd[0][1][2] = \"7\";\nd[0][1][3] = \"8888888888\";\nd[1][0][0] = \"9\";\nd[1][0][1] = \"10\";\nd[1][0][2] = \"11\";\nd[1][0][3] = \"12121212\";\n</code></pre>\n\n<ul>\n<li>you can see that <code>d[i][j][k]</code> where <code>k = [0, 2]</code> are integers.</li>\n<li>you can see that <code>d[i][j][k]</code> where <code>k = 3</code> are long integers.</li>\n</ul>\n\n<p>we wish to convert these strings to their appropriate integer type now (either a regular integer or a long integer). meaning that our final array should look like this:</p>\n\n<pre><code>d[0][0][0] = 1; // int\nd[0][0][1] = 2; // int\nd[0][0][2] = 3; // int\nd[0][0][3] = 4444444444; // long int\nd[0][1][0] = 5; // int\nd[0][1][1] = 6; // int\nd[0][1][2] = 7; // int\nd[0][1][3] = 8888888888; // long int\nd[1][0][0] = 9; // int\nd[1][0][1] = 10; // int\nd[1][0][2] = 11; // int\nd[1][0][3] = 12121212; // long int\n</code></pre>\n\n<p>this idea is to be implemented on an arduino microcontroller, which is c/c++ based.</p>\n\n<p>here is my take on it, not working properly unfortunately.</p>\n\n<pre><code>  String data = \"1,2,3,1445303228;4,5,6,1445303228;.7,8,9,1445303273;.\";\n\n  int data_length = data.length() + 1;\n\n  if (data_length != 1) {\n\n    char d0[data_length]; // couldn't do it with String, let's try char\n    data.toCharArray(d0, data_length);\n\n    int size1 = 32, size2 = 64; // intuitive sizes\n\n    char d1[size1][136]; // strlen(\"1,2,3,1445303228\") * 8, 17 * 8 = 136\n\n    int i = 0;\n    for (char *p = strtok(d0, \".\"); p != NULL; p = strtok(NULL, \".\"))\n    strcpy(d1[i++], p); // d1\n\n    int d1_length = i;\n\n    char d2[d1_length][size2][17]; // strlen(\"1,2,3,1445303228\") = 16\n\n    int d2_length[size2];\n    for (int i = 0; i &lt; size2; i++) d2_length[i] = 0; // initialize array = 0\n\n    for (int i = 0; i &lt; d1_length; i++) {\n      int j = 0;\n      for (char *p = strtok(d1[i], \";\"); p != NULL; p = strtok(NULL, \";\"))\n      strcpy(d2[i][j++], p); // d2\n\n      d2_length[i] = j;\n    }\n\n    int d2_length_max = 0;\n    for (int i = 0; i &lt; size2; i++)\n    if (d2_length[i] &gt; d2_length_max) d2_length_max = d2_length[i];\n\n    char d3[d1_length][d2_length_max][4][10];\n    // d2 can have 4 d3's max, d3 can have 10 chars max\n\n    for (int i = 0; i &lt; d1_length; i++) {\n      for (int j = 0; j &lt; d2_length[i]; j++) {\n        int k = 0;\n        for (char *p = strtok(d2[i][j], \",\"); p != NULL; p = strtok(NULL, \",\"))\n        strcpy(d3[i][j][k++], p); // d3\n      }\n    }\n\n    int rows[d1_length][d2_length_max][3];\n    long rows_long[d1_length][d2_length_max];\n\n    for (int i = 0; i &lt; d1_length; i++)\n    for (int j = 0; j &lt; d2_length[i]; j++)\n    for (int k = 0; k &lt; 3; k++)\n    rows[i][j][k] = atoi(d3[i][j][k]); // char array to integer\n\n    for (int i = 0; i &lt; d1_length; i++)\n    for (int j = 0; j &lt; d2_length[i]; j++) {\n      char temp[10];\n      for (int k = 0; k &lt; 10; k++) temp[k] = d3[i][j][3][k];\n      rows_long[i][j] = atol(temp); // char array to long\n    }\n\n  }\n</code></pre>\n\n<p>please note that the long integer is infact a unix timestamp.</p>\n"}, {"tags": ["c", "ubuntu", "tcp"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445422607, "post_id": 33256652, "comment_id": 54314498, "body": "We don&#39;t write code or do your research for you. What have you tried?"}, {"owner": {"reputation": 38, "user_id": 4094411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f3d71735386a152d374fa5a72ca7a?s=128&d=identicon&r=PG&f=1", "display_name": "sdfsfssfsdf", "link": "https://stackoverflow.com/users/4094411/sdfsfssfsdf"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445422750, "post_id": 33256652, "comment_id": 54314590, "body": "@Arc676 I&#39;m not asking you to write codes. I&#39;m just asking for links to does who have knowledge about it."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445423147, "post_id": 33256652, "comment_id": 54314827, "body": "Flagging questions on SO: Flag &gt; Close &gt; Off topic &gt; Questions asking for [an off-site resource]. I believe this include tutorials. @Community, correct me if I&#39;m wrong."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1445424735, "post_id": 33256652, "comment_id": 54315797, "body": "@Arc676 you are not wrong and I have applied the appropriate close vote.  Also downvote, since Googling the title gives: &#39;About 1,050,000 results&#39;."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445429314, "post_id": 33256652, "comment_id": 54318947, "body": "Your profile says you&#39;re from the Philippines and with some changes in spelling from what you wrote &quot;ung goy kau&quot; &gt; &quot;unggoy ka&quot; and Google Translate detects this as Filipino and translates it to &quot;monkey&quot;. How am I meant to interpret this?"}], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 4094411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f3d71735386a152d374fa5a72ca7a?s=128&d=identicon&r=PG&f=1", "display_name": "sdfsfssfsdf", "link": "https://stackoverflow.com/users/4094411/sdfsfssfsdf"}, "edited": false, "score": 0, "creation_date": 1445477953, "post_id": 33258205, "comment_id": 54345099, "body": "Thanks. I&#39;m glad someone understands my problem. I only have 1 day left to create a program and I cannot just browse and test 1,050,000 as Martin James said and realize in the end that the tutorial is deprecated or won&#39;t work. that&#39;s why I&#39;m asking for help to those programmers that has an experienced in this particular subject. I know @Arc676 will never understand cause he&#39;s  a genius."}], "tags": [], "owner": {"reputation": 121, "user_id": 5424170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a767920dba233a0276ab57eca2eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ibmicroapple", "link": "https://stackoverflow.com/users/5424170/ibmicroapple"}, "is_accepted": true, "score": 0, "last_activity_date": 1445427076, "creation_date": 1445427076, "answer_id": 33258205, "question_id": 33256652, "link": "https://stackoverflow.com/questions/33256652/connect-read-write-to-a-device-using-tcp-ip-in-c/33258205#33258205", "title": "Connect, read, write to a device using TCP/IP in C", "body": "<p>I do not know what you mean by device (any device located in /dev?), but here is a tutorial on c sockets using write and read:\n<a href=\"https://vcansimplify.wordpress.com/2013/03/14/c-socket-tutorial-echo-server/\" rel=\"nofollow\">https://vcansimplify.wordpress.com/2013/03/14/c-socket-tutorial-echo-server/</a>\n If you would like to gain access to a device in /dev then you just need to open it like a file and also treat it like a file (read / write from it like you would from a file).</p>\n"}], "owner": {"reputation": 38, "user_id": 4094411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f3d71735386a152d374fa5a72ca7a?s=128&d=identicon&r=PG&f=1", "display_name": "sdfsfssfsdf", "link": "https://stackoverflow.com/users/4094411/sdfsfssfsdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1446020871, "accepted_answer_id": 33258205, "answer_count": 1, "score": -5, "last_activity_date": 1445427076, "creation_date": 1445422532, "question_id": 33256652, "link": "https://stackoverflow.com/questions/33256652/connect-read-write-to-a-device-using-tcp-ip-in-c", "closed_reason": "Not suitable for this site", "title": "Connect, read, write to a device using TCP/IP in C", "body": "<p>Good day, I just want to ask some help about connecting to a device using TCP/IP and how to properly <code>read()</code> and <code>write()</code> command to it.</p>\n\n<p>Any sample codes or references would be a very big help. I don't have any idea in this particular matter but I have some knowledge in C programming and serial ports.</p>\n\n<p>By the way, I'm currently using ubuntu. Thanks</p>\n"}, {"tags": ["c", "struct", "fread"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1445421922, "post_id": 33256373, "comment_id": 54314064, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445421936, "post_id": 33256373, "comment_id": 54314072, "body": "Call <code>free</code> after <code>malloc</code>."}, {"owner": {"reputation": 35, "user_id": 3649959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ed6c05c8b0c2a9119edabb81d374183?s=128&d=identicon&r=PG&f=1", "display_name": "user3649959", "link": "https://stackoverflow.com/users/3649959/user3649959"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445422845, "post_id": 33256373, "comment_id": 54314651, "body": "I call free, but never happens! And Yes, I have 2 duplicated value printed!"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1445427061, "post_id": 33256373, "comment_id": 54317411, "body": "Sidenote: Nothing wrong with <code>malloc</code>, but if you are allocating 1 <code>Today</code> temporarily, it would be more straightforward to just define it locally as <code>Today d;</code>. Then you don&#39;t have to deal with <code>malloc&#47;free</code> hassle. Your structure is really small in size, so size shouldn&#39;t really be an issue."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3649959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ed6c05c8b0c2a9119edabb81d374183?s=128&d=identicon&r=PG&f=1", "display_name": "user3649959", "link": "https://stackoverflow.com/users/3649959/user3649959"}, "edited": false, "score": 0, "creation_date": 1445424428, "post_id": 33257060, "comment_id": 54315614, "body": "Thank you! But casually, I insert between fwrite() and fread() this line: fsee(pF, 0L, SEEK_SET); and I am able to read the whole FILE :D However I get your tips :D Now unique problem is that while(!feof(f)) do last cycle 2 times and print 2 times the same value!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445425247, "post_id": 33257060, "comment_id": 54316143, "body": "...which is why your post is marked up as a dup.  &#39;read/check/act&#39; is fine.  &#39;check/read/act&#39; is wrong."}], "tags": [], "owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "is_accepted": true, "score": 0, "last_activity_date": 1445423707, "creation_date": 1445423707, "answer_id": 33257060, "question_id": 33256373, "link": "https://stackoverflow.com/questions/33256373/how-can-i-shift-in-a-binary-file-while-reading/33257060#33257060", "title": "How can I shift In a binary file while reading?", "body": "<p>You may want to allocate space for all your blocks first e.g.</p>\n\n<pre><code>fp = fopen( \"temp.bin\", \"rb\" );\nif ( fp != NULL )\n{\n   fseek( fp, 0L, SEEK_END );\n   size_t size = ftell(fp);\n   rewind(fp);\n\n   Today *d;\n   d = malloc(size);\n   fread( d, sizeof(Today), size/sizeof(Today), fp );\n   fclose(fp);\n}\n</code></pre>\n\n<p>then you got the structs in an array</p>\n\n<p>e.g. <code>printf( \"month: %d\", d[5].month);</code></p>\n\n<p>then do what you need to do on each element in the array then later write it back. Depends on how large your file is though</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 3649959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ed6c05c8b0c2a9119edabb81d374183?s=128&d=identicon&r=PG&f=1", "display_name": "user3649959", "link": "https://stackoverflow.com/users/3649959/user3649959"}, "edited": false, "score": 0, "creation_date": 1445424478, "post_id": 33257094, "comment_id": 54315642, "body": "As write above, the last part of code with while cycle, read 2 times the last value! Im working to fix it!  Thank you"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 35, "user_id": 3649959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ed6c05c8b0c2a9119edabb81d374183?s=128&d=identicon&r=PG&f=1", "display_name": "user3649959", "link": "https://stackoverflow.com/users/3649959/user3649959"}, "edited": false, "score": 0, "creation_date": 1445426226, "post_id": 33257094, "comment_id": 54316824, "body": "@user3649959 the code is working correctly now, i changed the test to the return of <code>fread</code> instead of <code>eof</code>"}, {"owner": {"reputation": 35, "user_id": 3649959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ed6c05c8b0c2a9119edabb81d374183?s=128&d=identicon&r=PG&f=1", "display_name": "user3649959", "link": "https://stackoverflow.com/users/3649959/user3649959"}, "edited": false, "score": 0, "creation_date": 1445512398, "post_id": 33257094, "comment_id": 54359662, "body": "Thank you! It is been useful"}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1445426110, "last_edit_date": 1445426110, "creation_date": 1445423817, "answer_id": 33257094, "question_id": 33256373, "link": "https://stackoverflow.com/questions/33256373/how-can-i-shift-in-a-binary-file-while-reading/33257094#33257094", "title": "How can I shift In a binary file while reading?", "body": "<p>there is nothing about your code, i guess your file format is not as you think. </p>\n\n<p>i also wander why you have to allocate memory for struct.</p>\n\n<p>the code here is similar to that you provided. it just demonstrate the writing of the data in the format you described and then retrieving it without any lose.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\ntypedef struct\n{\n    int year;\n    int month; \n} Today;\n\n#define DataFile    \"temp.bin\"\nint main(){\n    Today d;\n    printf(\"sizeof(Today)=%d\\n\",sizeof(Today));\n\n    FILE  *fp = fopen(DataFile, \"wb\");\n    for(int i=1;i&lt;13;i++){\n        d.month=i;\n        d.year=2000+i;\n         fwrite(&amp;d, sizeof(Today), 1, fp);\n    } \n    fclose(fp);\n\n    printf(\"write complete, press a key to read\\n\");\n    _getch();\n\n    fp = fopen(DataFile, \"rb\"); \n\n    while(fread(&amp;d, sizeof(Today), 1, fp)){ \n         printf(\"Year = %i\\t\", d.year);\n         printf(\"Month = %i\\n\", d.month);     \n    } \n    fclose(fp);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3649959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ed6c05c8b0c2a9119edabb81d374183?s=128&d=identicon&r=PG&f=1", "display_name": "user3649959", "link": "https://stackoverflow.com/users/3649959/user3649959"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 33257060, "answer_count": 2, "score": 1, "last_activity_date": 1445426110, "creation_date": 1445421835, "question_id": 33256373, "link": "https://stackoverflow.com/questions/33256373/how-can-i-shift-in-a-binary-file-while-reading", "title": "How can I shift In a binary file while reading?", "body": "<p>I would able to read all my struct bytes by bytes (block of bytes are large \"sizeof(Today)\" so it's 8 bytes large). I attempt more and more times, but I can't! Give me help please!</p>\n\n<p>Bin file: \"temp.bin\"</p>\n\n<p>My struct:</p>\n\n<pre><code>typedef struct\n{\n    int year;\n    int month; \n} Today;\n</code></pre>\n\n<p>And this is part of code that should be read 8 bytes each cycle:</p>\n\n<pre><code> Today *d;\n d = malloc(sizeof(Today));\n\n fp = fopen(\"temp.bin\", \"rb\"); \n\n while(!feof(fp))\n { \n     fread(d, sizeof(Today), 1, fp);\n\n     printf(\"Year = %i\\n\", d-&gt;year);\n     printf(\"Month = %i\\n\", d-&gt;month);     \n } \n\n fclose(fp);\n</code></pre>\n\n<p>More probably is wrong the while condition and fread() function, but I tried all possible combination but the output is never the right one! \nThank you all</p>\n"}, {"tags": ["c", "multithreading", "memory", "allocation"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1445422113, "post_id": 33256289, "comment_id": 54314182, "body": "Your memory allocation appears to be correct but inefficient. You&#39;re making <code>MAX_THREADS</code> allocations of <code>sizeof(MYDATA)</code>. You could equally well make one allocation of <code>sizeof(MYDATA) * MAX_THREADS</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5435181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4911ad87e2c516b411173cf778cbbf18?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/5435181/steven"}, "edited": false, "score": 0, "creation_date": 1445423597, "post_id": 33256518, "comment_id": 54315097, "body": "Thank you, I have assigned <code>lparam</code> to <code>pDataArray</code> and was able to access <code>val1</code>!."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1445422205, "creation_date": 1445422205, "answer_id": 33256518, "question_id": 33256289, "link": "https://stackoverflow.com/questions/33256289/how-do-i-properly-allocate-memory-in-my-c-program/33256518#33256518", "title": "How do I properly allocate memory in my C program?", "body": "<p>In <code>MyFunction</code>, <code>PMYDATA pDataArray;</code> doesn't magically become equal to the <code>pDataArray</code> in <code>main</code>. It's an uninitialized pointer, and <code>pDataArray-&gt;val1;</code> tries to write to a random memory location.</p>\n\n<p>Hint: you also have a <code>LPVOID lparam</code> which you ignore.</p>\n"}], "owner": {"reputation": 9, "user_id": 5435181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4911ad87e2c516b411173cf778cbbf18?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/5435181/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 33256518, "answer_count": 1, "score": 0, "last_activity_date": 1445422205, "creation_date": 1445421624, "question_id": 33256289, "link": "https://stackoverflow.com/questions/33256289/how-do-i-properly-allocate-memory-in-my-c-program", "title": "How do I properly allocate memory in my C program?", "body": "<p>I am writing a Windows program in C for a homework assignment and I am running into a problem that causes my program to crash with program.exe has stopped working. I believe that this is due to the memory not being allocated correctly.</p>\n\n<p>The program is supposed to start multiple threads to perform a task, I have found an example on MSDN on creating threads. I have added parts of the code into my program.</p>\n\n<p>My program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;Windows.h&gt;\n\n#define MAX_THREADS 4\n#define BUFFER_SIZE 65000\n\nDWORD WINAPI SomeFunction( LPVOID lpParam );\n\nchar fileBuffer[BUFFER_SIZE];\n\ntypedef struct MyData {\n    int val1;\n    int val2;\n} MYDATA, *PMYDATA;\n\nint main(int argc, char *argv[])\n{\n    int i = 0;\n    int j = 0;\n    PMYDATA pDataArray[MAX_THREADS];\n    DWORD   dwThreadIdArray[MAX_THREADS];\n    HANDLE  hThreadArray[MAX_THREADS]; \n\n\n        for (i; i &lt; MAX_THREADS; i++)\n        {\n            pDataArray[i] = (PMYDATA) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY,\n                    sizeof(MYDATA));\n\n            if( pDataArray[i] == NULL )\n            {\n               // If the array allocation fails, the system is out of memory\n               // so there is no point in trying to print an error message.\n               // Just terminate execution.\n                ExitProcess(2);\n            }\n\n            // Create the thread to begin execution on its own.\n            hThreadArray[i] = CreateThread(NULL, 0, SomeFunction, pDataArray[i], 0, &amp;dwThreadIdArray[i]);\n\n            if (hThreadArray[i] == NULL)\n            {\n                printf(\"%s\\n\", \"Error creating thread!\");\n                ExitProcess(3);\n            }\n\n        }\n\n        for (j; j &lt; MAX_THREADS; j++)\n        {\n            printf(\"%s%d\\n\", \"j=\", j);\n            WaitForSingleObject(hThreadArray[j], INFINITE);\n        }\n\n        //WaitForMultipleObjects(MAX_THREADS, hThreadArray, TRUE, INFINITE);\n        i = 0;\n        for(i; i&lt;MAX_THREADS; i++)\n        {\n            CloseHandle(hThreadArray[i]);\n            if(pDataArray[i] != NULL)\n            {\n                HeapFree(GetProcessHeap(), 0, pDataArray[i]);\n                pDataArray[i] = NULL;    // Ensure address is not reused.\n            }\n        }\n\n        printf(\"%s\\n\", \"DONE!\");\n\n        return 0;\n\n}\n\nDWORD WINAPI SomeFunction( LPVOID lpParam)\n{\n    PMYDATA pDataArray;\n    int anotherInt;\n\n    anotherInt = pDataArray-&gt;val1; // PROBLEM OCCURS HERE!\n\n    printf(\"%s%d\\n\", \"Printing int \", anotherInt);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The program above should be able to start multiple threads which execute <code>SomeFunction()</code>. I have isolated bug to this function, specifically the line <code>anotherInt = pDataArray-&gt;val1;</code>. <code>pdataArray</code> is an array of <code>MyData</code> defined in a struct and each element is passed into a thread.</p>\n\n<p>Did I not allocate the memory for the array correctly? If not, how would I access the members of the struct that was passed in as the parameter to <code>SomeFunction()</code>? I have gone over my code a couple of times and could not find anything wrong that I know of. The example I followed on MSDN is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682516(v=vs.85).aspx\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1445421268, "post_id": 33256032, "comment_id": 54313622, "body": "Please add your entire sample code to your post, as well as the output \u2013 in this case it is important for the answer!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1445421277, "post_id": 33256032, "comment_id": 54313626, "body": "You might want to read <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">a <code>printf</code> (and family) reference</a>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445421311, "post_id": 33256032, "comment_id": 54313649, "body": "Oh and all that the <code>printf</code> call you show us does is print 9 spaces."}, {"owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 0, "creation_date": 1445421373, "post_id": 33256032, "comment_id": 54313692, "body": "This might help <a href=\"http://stackoverflow.com/questions/30606791/confusion-regarding-a-printf-statement/30607107#30607107\" title=\"confusion regarding a printf statement\">stackoverflow.com/questions/30606791/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1445421374, "post_id": 33256032, "comment_id": 54313693, "body": "Ah, now with the edit it&#39;s much clearer, and the answer will be clear if you read the reference I linked to before, especially what <code>printf</code> <i>returns</i>."}], "answers": [{"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1445421658, "post_id": 33256223, "comment_id": 54313889, "body": "No, <code>printf(&quot;%*c&quot;,N,C)</code> prints the char C in a field of size N."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1521784131, "post_id": 33256223, "comment_id": 85887920, "body": "Typo fixed. Thanks."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 7, "last_activity_date": 1445581683, "last_edit_date": 1445581683, "creation_date": 1445421456, "answer_id": 33256223, "question_id": 33256032, "link": "https://stackoverflow.com/questions/33256032/what-is-cc-in-printf/33256223#33256223", "title": "What is %*c%*c in `printf`?", "body": "<p><code>printf</code> returns the number of characters printed.</p>\n\n<p><code>printf(\"%*c\", N, C);</code> prints <code>N-1</code> blanks followed by the character C.</p>\n\n<p>More generally, <code>printf</code> prints <code>N - length_of_text</code> blanks (if that number is <code>&gt; 0</code>, zero blanks otherwise) followed by the text. The same applies to numbers as well. </p>\n\n<p>therefore</p>\n\n<pre><code>return printf(\"%*c%*c\", x, ' ', y, ' ');\n</code></pre>\n\n<p>prints a space prefixed with <code>x</code> minus length_of_space other spaces (<code>x-1</code>), then does the same for <code>y</code>. That makes <code>4+5</code> spaces in your case. Then <code>printf</code> returns the total number of characters printed, 9.</p>\n\n<pre><code>printf(\"%d\",add(4,5));\n</code></pre>\n\n<p>This <code>printf</code> prints the integer returned by the <code>add()</code> function, 9.</p>\n\n<p>By default, <code>printf</code> is right-aligned (blanks before text). To make it <em>left</em>-aligned, either</p>\n\n<ul>\n<li>give a negative <code>N</code>, or</li>\n<li>add a <code>-</code> before the <code>*</code>, e.g. <code>%-*s</code>, or</li>\n<li>the static version works as well, e.g. <code>%-12s</code>, <code>%-6d</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 5, "last_activity_date": 1445421464, "creation_date": 1445421464, "answer_id": 33256225, "question_id": 33256032, "link": "https://stackoverflow.com/questions/33256032/what-is-cc-in-printf/33256225#33256225", "title": "What is %*c%*c in `printf`?", "body": "<p><code>printf(\"%*c%*c\", 4, ' ', 5, ' ');</code> prints a space in a field of size 4 followed by a space in a field of size 5. So a total of 9 chars.</p>\n\n<p>In your posted code, the function returns the result of <code>printf</code> which gives the number of printed chars, so 9. In main you then print this number 9.</p>\n"}, {"tags": [], "owner": {"reputation": 4793, "user_id": 1099230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9d86aa069778820dfc676147d432c2d?s=128&d=identicon&r=PG", "display_name": "luoluo", "link": "https://stackoverflow.com/users/1099230/luoluo"}, "is_accepted": false, "score": 1, "last_activity_date": 1445421670, "creation_date": 1445421670, "answer_id": 33256302, "question_id": 33256032, "link": "https://stackoverflow.com/questions/33256032/what-is-cc-in-printf/33256302#33256302", "title": "What is %*c%*c in `printf`?", "body": "<p>Everything is as expected. According to the <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow\">manual</a></p>\n\n<blockquote>\n  <p><strong>format</strong><br>\n  (optional) . followed by integer number or *, or neither that specifies precision of the conversion. <strong>In the case when * is used, the precision is specified by an additional argument of type int.</strong> If the value of this argument is negative, it is ignored. If neither a number nor * is used, the precision is taken as zero. See the table below for exact effects of precision.</p>\n  \n  <p><strong>Return value</strong><br>\n  1-2) Number of characters written if successful or negative value if an error occurred.</p>\n</blockquote>\n\n<p>So in your case:</p>\n\n<pre><code>int add(int x, int y)\n{\n    return printf(\"%*c%*c\",x,' ', y,' ');\n    //              ^ x is for the first *, y for the second *\n}\n</code></pre>\n\n<p>As a result, the <code>x + y</code> number of space(including the precision) written, which is the return value.</p>\n"}], "owner": {"reputation": 13132, "user_id": 4558437, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/qZulX.png?s=128&g=1", "display_name": "Tharif", "link": "https://stackoverflow.com/users/4558437/tharif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6809, "favorite_count": 1, "accepted_answer_id": 33256225, "answer_count": 3, "score": 7, "last_activity_date": 1490853610, "creation_date": 1445420947, "last_edit_date": 1445421921, "question_id": 33256032, "link": "https://stackoverflow.com/questions/33256032/what-is-cc-in-printf", "title": "What is %*c%*c in `printf`?", "body": "<p>When i use printf in <code>%*c%*c</code> in <code>printf</code>,  it requires 4 values and also prints the sum of 4 and 5. I could not find a valid reason for this.</p>\n\n<p>When researching, I found that <code>%*c</code> denotes the width. But what is width and how come the sum is derived for below example ?</p>\n\n<pre><code>printf(\"%*c%*c\", 4, ' ', 5, ' ');\n</code></pre>\n\n<p><a href=\"https://ideone.com/XiQcdk\" rel=\"nofollow\">Ideone link</a></p>\n\n<p>Code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint add(int x, int y)\n{\n    return printf(\"%*c%*c\",x,' ', y,' ');\n}\n\nint main()\n{\n    printf(\"%d\",add(4,5));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "visual-c++", "gtk"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1445431369, "post_id": 33255976, "comment_id": 54320254, "body": "First, the constant name is not <code>GTK_WINDOW_TOP_LEVEL</code>, it is <code>GTK_WINDOW_TOPLEVEL</code>."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1445431442, "post_id": 33255976, "comment_id": 54320324, "body": "Second, you need to declare <code>key_press_event()</code> before you can refer to it in <code>main()</code>. You have two options: either move the function itself to before <code>main()</code>, or add the line <code>static gboolean key_press_event(GtkWidget* window, GdkEvent* event, gpointer label);</code> to before <code>main()</code>."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1445431502, "post_id": 33255976, "comment_id": 54320374, "body": "Third, you want <code>key_press_event()</code> to return <code>FALSE</code>, not <code>false</code>."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1445431598, "post_id": 33255976, "comment_id": 54320451, "body": "Last, however, your program is illogical. It sounds like you really want a GtkEntry and to watch the <code>changed</code> event, as it seems like you want to be able to type in a window title. GtkLabel isn&#39;t good for the job."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1445438343, "post_id": 33255976, "comment_id": 54325581, "body": "@andlabs : lifesaver !!  Wonder how these carelessness creeped into .the program.I was a bit tired though taking a day to configure the whole gtk stack.. Thankyou so much.. :-), Sorted things out,, I agree, the program is not of much use, but just to test if things are in place.."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1445873844, "post_id": 33255976, "comment_id": 54494751, "body": "All right then; good luck!"}], "answers": [{"tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 1, "last_activity_date": 1445873834, "creation_date": 1445873834, "answer_id": 33349741, "question_id": 33255976, "link": "https://stackoverflow.com/questions/33255976/gtk-visual-studio-issue/33349741#33349741", "title": "GTK : Visual Studio Issue", "body": "<p>First, the constant name is not <code>GTK_WINDOW_TOP_LEVEL</code>, it is <code>GTK_WINDOW_TOPLEVEL</code>.</p>\n\n<p>Second, you need to declare <code>key_press_event()</code> before you can refer to it in <code>main()</code>. You have two options: either move the function itself to before <code>main()</code>, or add the line</p>\n\n<pre><code>static gboolean key_press_event(GtkWidget* window, GdkEvent* event, gpointer label);\n</code></pre>\n\n<p>to before <code>main()</code>.</p>\n\n<p>Third, you want key_press_event() to return <code>FALSE</code>, not <code>false</code>.</p>\n"}], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33349741, "answer_count": 1, "score": 1, "last_activity_date": 1445873834, "creation_date": 1445420797, "last_edit_date": 1445426333, "question_id": 33255976, "link": "https://stackoverflow.com/questions/33255976/gtk-visual-studio-issue", "title": "GTK : Visual Studio Issue", "body": "<p>I  had to build a debug version of GTK stack for developement reason.\nAfter building it I set up the pkg-config for GTK and below is my\nsample program in Visual Studio</p>\n\n<pre><code>#include&lt;gtk/gtk.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(int argv, char* argc)\n{\n    GtkWidget *window, *label;\n    gtk_init(&amp;argv, &amp;argc);\n    window = gtk_window_new(GTK_WINDOW_TOP_LEVEL);\n    gtk_window_set_title(GTK_WINDOW(window), \"Window\");\n    gtk_window_set_size_request(window, 300, 100);\n    label = gtk_label_new(\"Click Me\");\n    gtk_label_set_selectable(GTK_LABEL(label), TRUE);\n    gtk_container_add(GTK_CONTAINER(window), label);\n    g_signal_connect(G_OBJECT(window), \"key_press_event\", G_CALLBACK(key_press_event), label);\n    gtk_window_show_all(window);\n    gtk_main();\n}\n\nstatic gboolean key_press_event(GtkWidget* window, GdkEvent* event, gpointer label)\n{\n    GtkWidget* newlabel;\n    newlabel = GTK_LABEL(label);\n    const gchar wtitle[100];\n    strncpy(wtitle, gtk_window_get_title(GTK_WINDOW(window)), sizeof(wtitle));\n    gtk_window_set_title(GTK_WINDOW(window),gtk_label_get_text(GTK_LABEL(newlabel)));\n    gtk_label_set_text(GTK_LABEL(newlabel), wtitle);\n    return false;\n}\n</code></pre>\n\n<p>Below is my <code>pkg-config --cflags gtk-3-vs12 --msvc-syntax</code>  which I have included at Project Properties -> C/C++ -> Command Line -> Additional Options :</p>\n\n<pre><code>/Ic:/gtk_compilation/vs12/win32/include /Ic:/gtk_compilation/vs12/win32/include/gtk /Ic:/gtk_compilation/vs12/win32/include/gdk /Ic:/gtk_compilation/vs12/win32/include/pango /Ic:/gtk_compilation/vs12/win32/include/atk /Ic:/gtk_compilation/vs12/win32/include/cairo  /Ic:/gtk_compilation/vs12/win32/include/fontconfig /Ic:/gtk_compilation/vs12/win32/include/gdk-pixbuf /Ic:/gtk_compilation/vs12/win32/include/glib \n</code></pre>\n\n<p>Below is my <code>pkg-config --libs gtk-3-vs12 --msvc-syntax</code>  which I have included at Project Properties -> Linker -> Command Line -> Additional Options :</p>\n\n<pre><code>/libpath:c:/gtk_compilation/vs12/win32/lib gtk-3-vs12.lib gdk3-win32.lib gdi32.lib imm32.lib shell32.lib ole32.lib -Wl,-luuid pangocairo.lib pangowin32.lib pango-1-vs12.lib m.lib atk-1-vs12.lib cairo-gobject.lib cairo-vs10.lib gdk_pixbuf-2-vs12.lib gio-2-vs12.lib gobject-2-vs12.lib glib-2-vs12.lib intl.lib \n</code></pre>\n\n<p>Still I am getting the below errors:</p>\n\n<pre><code>Error   9   error C2065: 'false' : undeclared identifier    c:\\users\\sajith\\documents\\visual studio 2013\\projects\\consoleapplication8\\consoleapplication8\\testapp.c 28  1   ConsoleApplication8\nError   3   error C2065: 'GTK_WINDOW_TOP_LEVEL' : undeclared identifier c:\\users\\sajith\\documents\\visual studio 2013\\projects\\consoleapplication8\\consoleapplication8\\testapp.c 9   1   ConsoleApplication8\nError   5   error C2065: 'key_press_event' : undeclared identifier  c:\\users\\sajith\\documents\\visual studio 2013\\projects\\consoleapplication8\\consoleapplication8\\testapp.c 15  1   ConsoleApplication8\n</code></pre>\n\n<p>Could anybody enlighten me sorting this out?</p>\n"}, {"tags": ["c", "splint"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445420500, "post_id": 33255778, "comment_id": 54313092, "body": "It is probably not a wise idea to declare a struct variable with the same name as one of its members."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1445420581, "post_id": 33255778, "comment_id": 54313143, "body": "And which line is line 57?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445420632, "post_id": 33255778, "comment_id": 54313177, "body": "Oh and the usual warning: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast the result of <code>malloc</code> in C</a> (or of any function returning <code>void *</code>)."}, {"owner": {"reputation": 91, "user_id": 3881453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cedc5711b89f0c2ea238f886c3c6aaa?s=128&d=identicon&r=PG&f=1", "display_name": "Minifig666", "link": "https://stackoverflow.com/users/3881453/minifig666"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445420943, "post_id": 33255778, "comment_id": 54313396, "body": "@JoachimPileborg the error is at the last return in the function. Thanks!"}], "owner": {"reputation": 91, "user_id": 3881453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cedc5711b89f0c2ea238f886c3c6aaa?s=128&d=identicon&r=PG&f=1", "display_name": "Minifig666", "link": "https://stackoverflow.com/users/3881453/minifig666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445421253, "creation_date": 1445420265, "last_edit_date": 1445421253, "question_id": 33255778, "link": "https://stackoverflow.com/questions/33255778/splint-warns-undefined-storage-sanity-check-please", "title": "Splint warns undefined storage. Sanity check please?", "body": "<p><br/>\nI'm working on a game at the moment, and I'm having an issue with splint on the following code to add new enemy structs to my linked list.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void generate_enemy(enemy_struct* enemy)\n{\n    enemy_struct* new_enemy;\n\n    // Make sure the incoming enemy isn't null.\n    if(enemy == NULL)\n    {\n        return;\n    }\n\n    // Run through till we find the last enemy in the list.\n    while(NULL != enemy-&gt;next_enemy)\n    {\n        enemy = enemy-&gt;next_enemy;\n    }\n\n    // Create a new enemy and point the last enemy to it.\n    new_enemy = malloc(sizeof(enemy_struct));\n\n    // If we're out of memory, don't bother making the new enemy.\n    if(NULL == new_enemy)\n    {\n        return;\n    }\n    else\n    {\n        // Initialise the new enemy.\n        new_enemy-&gt;location = 1;\n        new_enemy-&gt;motion = ENEMY_STATIC;\n        new_enemy-&gt;dead = false;//true;\n        // Ensure it carries the last enemy flag.\n        new_enemy-&gt;next_enemy = NULL;\n\n        // Put new enemy in previous enemy.\n        enemy-&gt;next_enemy = new_enemy;\n    }\n    return;\n}\n</code></pre>\n\n<p>Splint gives the warning:</p>\n\n<pre><code>enemy.c: (in function generate_enemy)\nenemy.c:57:12: Storage *(enemy-&gt;next_enemy) reachable from parameter contains 4\n                  undefined fields: location, motion, dead, next_enemy\n  Storage derivable from a parameter, return value or global is not defined.\n  Use /*@out@*/ to denote passed or returned storage which need not be defined.\n  (Use -compdef to inhibit warning)\n</code></pre>\n\n<p>Line 57 is the last return in the function.</p>\n\n<p>Now, I'm fairly confident my code cannot return undefined values, as I either set all fields, or don't change anything and drop out.</p>\n\n<p>Is there some case I'm missing out where I send back stuff undefined? If not, what's the best way to stop splint giving this warning? </p>\n"}, {"tags": ["c", "getchar"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1445419317, "post_id": 33255370, "comment_id": 54312258, "body": "Because <a href=\"http://stackoverflow.com/a/8853198/2564301\">stackoverflow.com/a/8853198/2564301</a>"}, {"owner": {"reputation": 1, "user_id": 5470811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f8fc65d9f0a74713010fdb04897cb?s=128&d=identicon&r=PG", "display_name": "user5470811", "link": "https://stackoverflow.com/users/5470811/user5470811"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1445419505, "post_id": 33255370, "comment_id": 54312376, "body": "Is used to get blank spaces?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1445419870, "post_id": 33255370, "comment_id": 54312647, "body": "The code is outside the <code>main()</code> function, so it doesn&#39;t do anything."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1445420300, "post_id": 33255370, "comment_id": 54312939, "body": "Well, it does something: it refuses to compile. OP, please make sure you&#39;re posting correct and properly indented code the next time."}], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445420185, "post_id": 33255660, "comment_id": 54312862, "body": "In is case it does nothing though since its called outside of the <code>main()</code> and not in a function."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445420295, "post_id": 33255660, "comment_id": 54312934, "body": "@Magisch Thats not relevant i guess, its a small error.. However i will include that in the answer."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445420324, "post_id": 33255660, "comment_id": 54312952, "body": "@Haris I agree, but it should be mentioned."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1445420420, "post_id": 33255660, "comment_id": 54313033, "body": "<code>It is done to consume the left out newline character \\n</code> - this is not correct, you don&#39;t need to do this if you&#39;re using <code>%d</code>, <code>%f</code> etc."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1445420456, "post_id": 33255660, "comment_id": 54313061, "body": "@Michi yes, thats wat i meant."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1445420513, "post_id": 33255660, "comment_id": 54313104, "body": "&quot;<i>most of your code is outside the <code>main()</code> function, so it won&#39;t get executed</i>&quot; -- It won&#39;t even get compiled!"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1445421060, "post_id": 33255660, "comment_id": 54313481, "body": "&quot;<i>This issue can also be solved by adding a space to the next <code>scanf()</code></i>&quot; -- That <code>scanf</code> will behave the same with or without the space."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1445421110, "post_id": 33255660, "comment_id": 54313509, "body": "@CoolGuy, i guess m mixing things up here, Does this solves problems only for <code>char</code> inputs."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1445421779, "post_id": 33255660, "comment_id": 54313974, "body": "@Haris What? Could you explain?"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1445421876, "post_id": 33255660, "comment_id": 54314036, "body": "@CoolGuy <i>Note that if the next input is *scanf( &quot;%d&quot; ) or *scanf( &quot;%f&quot; ) or really any *scanf() beginning with a conversion other than %c, %[ and %n, leading whitespace will be skipped anyway, which would make the getchar() redundant.</i> Taken from an answer above. This i didn&#39;t know."}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": -1, "last_activity_date": 1445420649, "last_edit_date": 1445420649, "creation_date": 1445419938, "answer_id": 33255660, "question_id": 33255370, "link": "https://stackoverflow.com/questions/33255370/what-is-the-getchar-used-for-in-this-c-code/33255660#33255660", "title": "What is the getchar() used for in this c code?", "body": "<p>It is done to consume the left out newline character <code>\\n</code> after the previous <code>scanf()</code> gets executed.</p>\n\n<p>This issue can also be solved by adding a space to the next <code>scanf()</code>, like in your code..</p>\n\n<pre><code>scanf(\u201c %d\u201d,&amp;v_empregados[i].idade);\n</code></pre>\n\n<p><strong>NOTE</strong></p>\n\n<blockquote>\n  <p>Don't use <code>gets()</code>, it has been deprecated.</p>\n</blockquote>\n\n<p><em>However, most of your code is outside the <code>main()</code> function, so it won't get compiled.</em></p>\n"}, {"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 2, "last_activity_date": 1445422089, "last_edit_date": 1445422089, "creation_date": 1445421191, "answer_id": 33256131, "question_id": 33255370, "link": "https://stackoverflow.com/questions/33255370/what-is-the-getchar-used-for-in-this-c-code/33256131#33256131", "title": "What is the getchar() used for in this c code?", "body": "<p><strong>This is broken code.</strong></p>\n\n<p>The programmer uses that <code>getchar()</code> to clear the unread newline from the input buffer after the previous <code>*scanf()</code>. It's a common pattern.</p>\n\n<p>Note that if the next input is <code>*scanf( \"%d\" )</code> or <code>*scanf( \"%f\" )</code> or really any <code>*scanf()</code> beginning with a conversion other than <code>%c</code>, <code>%[</code> and <code>%n</code>, leading whitespace will be skipped anyway, which would make the <code>getchar()</code> redundant.</p>\n\n<p>But more importantly:</p>\n\n<p><strong>Don't use <code>gets()</code>, ever.</strong> There is <strong>no way</strong> this function can be protected against buffer overflow, and it has been <strong>removed</strong> from newer versions of the language standard for exactly that reason. <strong>Use <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow\"><code>fgets()</code></a> instead.</strong></p>\n\n<p>Secondly:</p>\n\n<p><strong>If</strong> you are using <code>*scanf()</code> to read user input (1), <strong>at least check the return value</strong>. If the user entered something that didn't match expectations, input matching will have failed, leaving the arguments (e.g. <code>v_empregados[i].nome</code>) <em>uninitialized</em>.</p>\n\n<hr>\n\n<p>(1) <code>*scanf()</code> is good when reading back formatted data that has been written previously by your own application. But if there is any chance that the input might <em>not</em> be in the expected format (like when asking the user for input), the abilities to recover gracefully from that condition are limited. The general advice here is to use <code>fgets()</code> to read a full line of input, and then parse that in-memory using e.g. <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow\"><code>strtol()</code></a> or <a href=\"http://en.cppreference.com/w/c/string/byte/strtof\" rel=\"nofollow\"><code>strtod()</code></a>, which are superior in many ways. You can also go back and try a different parsing as often as you like.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1445421558, "creation_date": 1445421558, "answer_id": 33256261, "question_id": 33255370, "link": "https://stackoverflow.com/questions/33255370/what-is-the-getchar-used-for-in-this-c-code/33256261#33256261", "title": "What is the getchar() used for in this c code?", "body": "<p>The <code>getchar()</code> is added in order to discard the <code>\\n</code>(newline character) left over by the previous <code>scanf()</code> (Remember pressing <kbd>Enter</kbd> after entering a number for the <code>scanf</code>?).</p>\n\n<p>Without the <code>getchar()</code>s, the <code>\\n</code> will be left in the <code>stdin</code> and once the execution reaches <code>gets</code>, it sees the newline character in the <code>stdin</code>, consumes it, and thus, does not wait for further input. </p>\n"}], "owner": {"reputation": 1, "user_id": 5470811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f8fc65d9f0a74713010fdb04897cb?s=128&d=identicon&r=PG", "display_name": "user5470811", "link": "https://stackoverflow.com/users/5470811/user5470811"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1445422089, "creation_date": 1445419031, "last_edit_date": 1445420929, "question_id": 33255370, "link": "https://stackoverflow.com/questions/33255370/what-is-the-getchar-used-for-in-this-c-code", "title": "What is the getchar() used for in this c code?", "body": "<pre><code>struct   Empregado  v_empregados[10];\n\nmain() {\n    int i;\n    for(i=0; i&lt;10; i++){\n        printf  (\u201cNome  e  apelidos?  \u201c);\n        gets  (v_empregados[i].nome);\n\n        printf  (\u201cIdade?  \u201c);\n        scanf(\u201c%d\u201d,&amp;v_empregados[i].idade);\n        getchar();\n\n        printf(\u201cDomicilio?  \u201c);\n        gets  (v_empregados[i].domicilio);\n\n        printf  (\u201cSalario?  \u201c);\n        scanf(\u201c%f\u201d,&amp;v_empregados[i].salario);\n        getchar();\n}\n</code></pre>\n\n<p>In this code what is the purpose of using getchar()?</p>\n"}, {"tags": ["c", "shell"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1445418560, "post_id": 33255126, "comment_id": 54311799, "body": "You might want to read about the <a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\"><code>popen</code></a> function."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445418678, "post_id": 33255126, "comment_id": 54311872, "body": "Oh, and <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\"><code>system</code></a> is equivalent to do <code>&#47;bin&#47;sh -c &quot;...&quot;</code> in a shell, so if you try to actually use your macro <code>SHELLSCRIPT</code> then it won&#39;t work very well."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445419067, "post_id": 33255126, "comment_id": 54312109, "body": "Finally, to dynamically build a string in C then use <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5259408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730552987073845/picture?type=large", "display_name": "Dezhi Zhou", "link": "https://stackoverflow.com/users/5259408/dezhi-zhou"}, "edited": false, "score": 0, "creation_date": 1445494097, "post_id": 33255521, "comment_id": 54349368, "body": "Thanks! Could you just give a very simple pseudo code here for solving the problem?"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1445419518, "creation_date": 1445419518, "answer_id": 33255521, "question_id": 33255126, "link": "https://stackoverflow.com/questions/33255126/how-to-pass-a-value-from-shell-script-to-c-program/33255521#33255521", "title": "How to pass a value from shell script to C program", "body": "<p>First problem:</p>\n\n<p>The best way is to create a temporary file that contains your shell script and execute it. For example you can create it <em>via</em> <code>tmpnam</code>/<code>creat</code> to get a filename, create the file and open it. Then, you have to fill its content with your shell script instructions and use <code>system</code> to execute it after having modify its permissions to execute it (see <code>chmod</code>).</p>\n\n<p>Second problem:</p>\n\n<p>To receive data from a subprocess you need to establish some communication, either by writing/reading in a file, or using a pipe for example. A pipe can be easily established using <code>popen</code> in place of <code>system</code>.</p>\n\n<p>Finally, don't forget to remove every temporary object.</p>\n"}], "owner": {"reputation": 11, "user_id": 5259408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730552987073845/picture?type=large", "display_name": "Dezhi Zhou", "link": "https://stackoverflow.com/users/5259408/dezhi-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1445433602, "creation_date": 1445418263, "last_edit_date": 1445433602, "question_id": 33255126, "link": "https://stackoverflow.com/questions/33255126/how-to-pass-a-value-from-shell-script-to-c-program", "title": "How to pass a value from shell script to C program", "body": "<p>I am trying to use system() in C to call shell script to modify a file and execute a executable file and get some output in another directory (not the C working directory). How can I pass the value I got in the shell script to the main C program. Thanks in advance!</p>\n\n<pre><code>#define shell \"\\\n#/bin/bash \\n\\\ncd home/path \\n\\\n\"input modification\" \\n\\\n./ exe \\n\\ #output a parameter b in the file out\nb=$(cat &lt;out) \\n\\\necho \"b\" \\n\\\n\"\nvoid main()\n{\n system(shell);\n printf(\"b=d%\",b);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "can-bus", "canutils"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1445417233, "post_id": 33254700, "comment_id": 54310953, "body": "Is your receiver function blocking or non-blocking? Can it provide a status? Where is your code?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445418102, "post_id": 33254700, "comment_id": 54311502, "body": "Please narrow down the question. Do you need help with the CAN reception, or with the timeout, or how to programmatic reboot?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1445418124, "post_id": 33254700, "comment_id": 54311514, "body": "Code your receiver with select, where you can specify a timeout."}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "edited": false, "score": 0, "creation_date": 1445419394, "post_id": 33254700, "comment_id": 54312308, "body": "I have updated my question"}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "edited": false, "score": 0, "creation_date": 1445419650, "post_id": 33254700, "comment_id": 54312473, "body": "I need to detect no reception within x seconds and reboot if my condition is true otherwise I can receive can traffics when I receive a new packet after expiration of timeout and my condition is false"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1445586608, "post_id": 33254700, "comment_id": 54393787, "body": "Your code looks ok for me. BTW what is strage is that you use fd_max but you have only a single file descriptor added to your set. If you have more than 1 file descriptor you must FD_SET all descriptors."}], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445447418, "creation_date": 1445417035, "last_edit_date": 1445447418, "question_id": 33254700, "link": "https://stackoverflow.com/questions/33254700/how-to-develop-timeout-on-reception", "title": "How to develop timeout on reception?", "body": "<p>I have developed a C program that receive can traffics from vcan0 interface.</p>\n\n<p>I would like to add timeout on reception, I mean when a timeout expired (10 seconds for example) with no data received during this time, I print \"no data received during 10 seconds\" and I make a reboot of my pc(the reboot is made if a specific condition is satisfied).</p>\n\n<p>I have tested with select function I get the timeout but when the specific condition is not satisfied I can't receive can traffics anymore.</p>\n\n<p>should I add something for reactivate reception when I have timeout and specific condition is not satisfied? if yes how?</p>\n\n<p>My program is like this:</p>\n\n<pre><code>...\nwhile(1)\n{\n    FD_ZERO(&amp;set); /* clear the set */\n    FD_SET(filedesc, &amp;set); /* add our file descriptor to the set */\n\n    timeout.tv_sec = 0;\n    timeout.tv_usec = 10000000; // 10 second\n\n    rv = select(fd_max + 1, &amp;set, NULL, NULL, &amp;timeout);\n    if(rv == -1)\n        perror(\"select\"); /* an error accured */\n    else if(rv == 0)\n    {\n        printf(\"no data received within 10 second\"); /* a timeout occured */\n        if (specific condition is true) \n        {\n            reboot(RB_AUTOBOOT);\n        }\n    }\n    else\n        int s;\n        /* loop on all sockets */\n        for(i=s;i&lt;=fd_max;i++)  \n        {\n            read( i, buff, len );\n            /* some other instruction*/\n        }\n}\n...\n</code></pre>\n"}, {"tags": ["c", "fork"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5387687"}, "edited": false, "score": 0, "creation_date": 1445416493, "post_id": 33254402, "comment_id": 54310449, "body": "When you do fork, you create exactly the same child proccess which has output as its parent."}, {"owner": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "edited": false, "score": 0, "creation_date": 1445416841, "post_id": 33254402, "comment_id": 54310677, "body": "Sorry i have edited the question"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 5, "creation_date": 1445417086, "post_id": 33254402, "comment_id": 54310851, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2530663/printf-anomaly-after-fork\">printf anomaly after &quot;fork()&quot;</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445421171, "post_id": 33254402, "comment_id": 54313550, "body": "Please tell you prof/TA to stop setting this as homework.   It&#39;s starting to get annoying."}], "answers": [{"comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1445417129, "post_id": 33254611, "comment_id": 54310876, "body": "Please don&#39;t copy or link answers, please mark the question as duplicate."}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 2, "last_activity_date": 1445416775, "last_edit_date": 1495542208, "creation_date": 1445416775, "answer_id": 33254611, "question_id": 33254402, "link": "https://stackoverflow.com/questions/33254402/unexpected-behaviour-of-fork/33254611#33254611", "title": "Unexpected behaviour of fork()", "body": "<p>This issue is happening because of buffering.</p>\n\n<p>Quoting <a href=\"https://stackoverflow.com/questions/2530663/printf-anomaly-after-fork\">this</a> post.</p>\n\n<blockquote>\n  <p>When the output of your program is going to a terminal (screen), it is line buffered. When the output of your program goes to a pipe, it is fully buffered.</p>\n</blockquote>\n\n<p>The posts also contains line by line explanation.</p>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "edited": false, "score": 0, "creation_date": 1445416886, "post_id": 33254621, "comment_id": 54310709, "body": "try with \\n at end of printf() like printf(&quot;Start of Program\\n&quot;); It will gives another Output."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "edited": false, "score": 0, "creation_date": 1445416995, "post_id": 33254621, "comment_id": 54310789, "body": "@SwapnilDewakar same, except there is 1 additional line break between the lines."}, {"owner": {"reputation": 33896, "user_id": 1611055, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e0a298478afff848f791de8fcbcbc7e?s=128&d=identicon&r=PG", "display_name": "Andreas Fester", "link": "https://stackoverflow.com/users/1611055/andreas-fester"}, "edited": false, "score": 0, "creation_date": 1445417145, "post_id": 33254621, "comment_id": 54310896, "body": "Use <code>fflush(stdout);</code> after the first <code>printf()</code> and you will see the difference. <code>fork()</code> continues <b>after</b> the fork in the child and the parent process, so it looks like the first printf is executed twice which it is not - the output is a result of buffering. See answer by  @Haris."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "edited": false, "score": 0, "creation_date": 1445417476, "post_id": 33254621, "comment_id": 54311079, "body": "@SwapnilDewakar Corrected the Answer."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": -2, "last_activity_date": 1445417427, "last_edit_date": 1445417427, "creation_date": 1445416807, "answer_id": 33254621, "question_id": 33254402, "link": "https://stackoverflow.com/questions/33254402/unexpected-behaviour-of-fork/33254621#33254621", "title": "Unexpected behaviour of fork()", "body": "<p>I compiled that code myself, and I get following output:</p>\n\n<blockquote>\n  <p>Start of Program </p>\n  \n  <p>End of Program </p>\n  \n  <p>Start of Program </p>\n  \n  <p>End of Program</p>\n</blockquote>\n\n<p><strike>Which is correct since <code>fork()</code> spawns exactly the same child process its forked from.</strike></p>\n\n<p>Edit: Thanks to the comments, I found out whats really going on. Fork behaves as expected, but the input buffer is not getting flushed before the child process is executed. I've modified the original code to this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain(){\n  printf(\"\\nStart of Program\\n\");\n  fflush(stdout);\n  fork();\n  printf(\"\\nEnd of Program\\n\");\n}\n</code></pre>\n\n<p>And the output now reads:</p>\n\n<blockquote>\n  <p>Start of Program</p>\n  \n  <p>End of Program</p>\n  \n  <p>End of Program</p>\n</blockquote>\n\n<p>Which indicates that indeed, <code>fork()</code> only spawns the child process executing downwards from after the <code>fork()</code> call.</p>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1445417089, "creation_date": 1445417089, "answer_id": 33254714, "question_id": 33254402, "link": "https://stackoverflow.com/questions/33254402/unexpected-behaviour-of-fork/33254714#33254714", "title": "Unexpected behaviour of fork()", "body": "<p>This is because of <code>printf()</code>,  printf is buffering the output and only print when he reaches a '\\n', so when reaching <code>printf(\"\\nEnd of Program\");</code> printf() prints the content of the buffer which is \"Start of Program\".\nBecause fork() duplicates your stack, printf() buffer is duplicated too.\nTry:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nmain(){\nprintf(\"Start of Program\\n\");\nfork();\nprintf(\"End of Program\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "is_accepted": false, "score": 0, "last_activity_date": 1445417445, "last_edit_date": 1445417445, "creation_date": 1445417143, "answer_id": 33254741, "question_id": 33254402, "link": "https://stackoverflow.com/questions/33254402/unexpected-behaviour-of-fork/33254741#33254741", "title": "Unexpected behaviour of fork()", "body": "<p>Few things here need to check.</p>\n\n<p>From where it is printing \"student\". I do not see any where you are printing student in your code.</p>\n\n<p>The ideal output is</p>\n\n<blockquote>\n  <p>Start of Program <br>\n  End of Program <br>\n  End of Program</p>\n</blockquote>\n\n<p>If you are not getting above output I will suspect, when fork executed and child got created probably your standard output print was not complete. Flush or \\n as last char in print is a must to complete the print job,</p>\n\n<p>To verify this what you can do is, before fork just use fflush.\nAlso in printf use \\n as last char.  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nmain()\n{\n    printf(\"Start of Program\\n\");\n    fflush(NULL);\n    fork();\n    printf(\"End of Program\\n\");\n}\n</code></pre>\n\n<p>Try this and let us know.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5400886, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--6CbrrbkZII/AAAAAAAAAAI/AAAAAAAAAFY/s12AO5C_1lg/photo.jpg?sz=128", "display_name": "Neel Desai", "link": "https://stackoverflow.com/users/5400886/neel-desai"}, "is_accepted": false, "score": 0, "last_activity_date": 1445428562, "creation_date": 1445428562, "answer_id": 33258656, "question_id": 33254402, "link": "https://stackoverflow.com/questions/33254402/unexpected-behaviour-of-fork/33258656#33258656", "title": "Unexpected behaviour of fork()", "body": "<pre><code>when fork is come then new process is created. \n</code></pre>\n\n<p>so end of program before fork call process and after fork call is printed. so that's logic.</p>\n"}], "owner": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1445428562, "creation_date": 1445416097, "last_edit_date": 1445416800, "question_id": 33254402, "link": "https://stackoverflow.com/questions/33254402/unexpected-behaviour-of-fork", "title": "Unexpected behaviour of fork()", "body": "<p>I m doing some C program using <code>fork()</code><br/>\nBut I'm getting unexpected output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain(){\n  printf(\"\\nStart of Program\");\n  fork();\n  printf(\"\\nEnd of Program\");\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Start of Program<BR/>\n  End of ProgramStart of Program<BR/>\n  End of Program<BR/></p>\n</blockquote>\n\n<p>Why do I get this output ?</p>\n\n<p>Output should be this:</p>\n\n<blockquote>\n  <p>Start of Program<BR/>\n  End of Program<BR/>\n  End of Program<BR/></p>\n</blockquote>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1445416141, "post_id": 33254393, "comment_id": 54310210, "body": "On the 8086, <code>cx</code> was intended for counting, yes. Nowadays, it may be used to hold addresses and more. You should show us the whole code."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445416911, "post_id": 33254393, "comment_id": 54310732, "body": "50h is 50 in hex notation, meaning 5*16^1 + 0*16^0 = 80"}, {"owner": {"reputation": 171, "user_id": 2523112, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8ec3c3b4a0bc0a3af2eab9bcf569772c?s=128&d=identicon&r=PG", "display_name": "user2523112", "link": "https://stackoverflow.com/users/2523112/user2523112"}, "edited": false, "score": 0, "creation_date": 1445416986, "post_id": 33254393, "comment_id": 54310780, "body": "I added rest assembly code"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1445417048, "post_id": 33254393, "comment_id": 54310827, "body": "@user2523112 add some of the c code"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 3, "creation_date": 1445417320, "post_id": 33254393, "comment_id": 54310995, "body": "&quot;What is the meaning of this line&quot; ... do you actually understand assembly at all? What part don&#39;t you understand? The <i>entire</i> line?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1445417560, "post_id": 33254393, "comment_id": 54311135, "body": "The source is C++, not C. And that is also important when analyzing the generated assembly because of virtual function calls."}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1445428113, "last_edit_date": 1445428113, "creation_date": 1445417220, "answer_id": 33254771, "question_id": 33254393, "link": "https://stackoverflow.com/questions/33254393/i-try-to-understand-c-code-assembly-code/33254771#33254771", "title": "I try to understand [c code -&gt; assembly] code", "body": "<pre><code>push ebp\nmov ebp,esp \n</code></pre>\n\n<p>This saves the caller's stackframe pointer (<code>push ebp</code>) and sets up your stackframe pointer (<code>mov ebp,esp</code>).</p>\n\n<pre><code>push ebx \n</code></pre>\n\n<p>This saves <code>ebx</code> on the stack. Somewhere later, before the return,  you will see a <code>pop ebx</code>.</p>\n\n<pre><code>mov ebx,dword ptr [_data1]\n</code></pre>\n\n<p>This moves the content of location <code>_data1</code> into the <code>ebx</code> register. The debugger shows you a symbolic name; if you would look more closely you will see <code>move ebx,dword ptr [ebp+12]</code>. Here the parameters of the caller are accessed using your stackframe pointer in <code>ebp</code>.</p>\n\n<pre><code>push esi\nmov esi,ecx\n</code></pre>\n\n<p>This saves <code>esi</code> and then moves the value of <code>ecx</code> into <code>esi</code>.</p>\n\n<pre><code>mov eax,dword ptr [esi+50h]\n</code></pre>\n\n<p>This moves the value of the memory location at <code>esi+50h</code> into <code>eax</code>.</p>\n\n<p>Sometimes you musn't worry too much about the assembler the compiler generates. It maybe sub-optimal or may be so optimized that you can't recognize your original statements.</p>\n"}], "owner": {"reputation": 171, "user_id": 2523112, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8ec3c3b4a0bc0a3af2eab9bcf569772c?s=128&d=identicon&r=PG", "display_name": "user2523112", "link": "https://stackoverflow.com/users/2523112/user2523112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33254771, "answer_count": 1, "score": -1, "last_activity_date": 1445428113, "creation_date": 1445416065, "last_edit_date": 1445420703, "question_id": 33254393, "link": "https://stackoverflow.com/questions/33254393/i-try-to-understand-c-code-assembly-code", "title": "I try to understand [c code -&gt; assembly] code", "body": "<p>I try to understand [c code -> assembly] code</p>\n\n<pre><code>void node::Check( data &amp; _data1, vector&lt;data2*&gt;&amp; _data2)\n{\n\n-&gt; push ebp\n-&gt; mov ebp,esp \n-&gt; push ebx\n\nif (TryToCheck(_data1.a, _data1.b))\n\n-&gt; mov ebx,dword ptr [_data1]\n</code></pre>\n\n<ol>\n<li><p>I'm not sure what this line does\nWhat is the meaning of this line,</p>\n\n<pre><code>push esi\nmov esi,ecx\n</code></pre></li>\n<li><p><code>ecx</code> is a value for counting as I know .\nWhy save the value of <code>ecx</code> in <code>esi</code>?</p>\n\n<pre><code>mov eax,dword ptr [esi+50h]\n</code></pre></li>\n<li><p>What does this mean the value, <code>50h</code>?</p>\n\n<pre><code>mov eax,dword ptr [eax+4]\nlea edx,[ebx+40h] \nlea ecx,[esi+50h] \npush edx \nlea edx,[ebx+50h] \npush edx \ncall eax \ntest al,al \nje node::Check+7Fh\n</code></pre></li>\n</ol>\n"}, {"tags": ["c", "vb.net", "mono", "dynamic-linking", "raspberry-pi2"], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 1294284, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6988277c9dace5e58a4403af0dd4a6c6?s=128&d=identicon&r=PG", "display_name": "narancha", "link": "https://stackoverflow.com/users/1294284/narancha"}, "is_accepted": false, "score": 0, "last_activity_date": 1445417646, "creation_date": 1445417646, "answer_id": 33254917, "question_id": 33254386, "link": "https://stackoverflow.com/questions/33254386/send-string-from-native-c-dynamic-library-so-to-vb-net-in-mono-linux/33254917#33254917", "title": "Send string from native C dynamic library (.so) to VB .net in Mono Linux", "body": "<p>After hours of debugging I realized that I did not add the .so library in a correct way to Linux. The above code works. I hope that It'll will be of help to someone..</p>\n"}], "owner": {"reputation": 189, "user_id": 1294284, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6988277c9dace5e58a4403af0dd4a6c6?s=128&d=identicon&r=PG", "display_name": "narancha", "link": "https://stackoverflow.com/users/1294284/narancha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1445417646, "creation_date": 1445416027, "question_id": 33254386, "link": "https://stackoverflow.com/questions/33254386/send-string-from-native-c-dynamic-library-so-to-vb-net-in-mono-linux", "title": "Send string from native C dynamic library (.so) to VB .net in Mono Linux", "body": "<p>I want to send a string from unmanaged C-code to managed VB .Net that runs at a Raspberry pi running Linux and mono. I debug the Dynamic C library (.so) in netbeans by calling the dynamic C library from c++. This works like a charm, but when I call the same function from VB .Net running in Linux with Mono it returns a empty string.</p>\n\n<p>Here's the code</p>\n\n<pre><code>C\nvoid HelloCstr(/*OUT*/ char* hello)\n{\n    string s = (\"Hello World\");\n    strcpy(hello, s.c_str());\n}\n</code></pre>\n\n<p>_</p>\n\n<pre><code>C++\nstd::string ss;\nHelloCstr((char*)ss.c_str()); // ss is filled with \"Hello World\"\n</code></pre>\n\n<p>_</p>\n\n<pre><code>VB .Net\n\n&lt;DllImport(\"libDllTest\", CharSet:=CharSet.Ansi)&gt;\nPublic Shared Sub HelloCstr(str As System.Text.StringBuilder)\nEnd Sub\n\n\nPublic Shared Function HelloWorld() As String\n    Dim sb As System.Text.StringBuilder = New System.Text.StringBuilder(200)\n    HelloCstr(sb) //After this call sb.Length == 0\n    Return sb.ToString() // this returns an empty string\nEnd Function\n</code></pre>\n\n<p>What am I doing wrong??</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445416390, "post_id": 33254228, "comment_id": 54310390, "body": "It is not necessary, but good practice. That way you can guarantee the data type of the constant. <a href=\"http://stackoverflow.com/questions/33232075/is-it-reasonable-to-use-enums-instead-of-defines-for-compile-time-constants-in/33232548#33232548\">See this</a> for examples."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445416494, "post_id": 33254271, "comment_id": 54310450, "body": "All constants have types though, even if they are not variables. It is good practice to be explicit about which type a certain constant has. There are cases when you cannot use <code>const</code> but have to use defines."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445416642, "post_id": 33254271, "comment_id": 54310540, "body": "@Lundin in these cases you can use something like <code>#define var (int) 15000</code> but that doesnt change the fact that its just text replacement."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 5, "last_activity_date": 1445415689, "creation_date": 1445415689, "answer_id": 33254271, "question_id": 33254228, "link": "https://stackoverflow.com/questions/33254228/is-it-necessary-in-define-to-set-the-data-type/33254271#33254271", "title": "Is it necessary in #define to set the data type?", "body": "<p>You can't declare variables in <code>#define</code> statements. These are statements only for the preprocessor, and are only text replacements.</p>\n\n<p><code>VAR</code> in your case is NOT a variable, but a sort of constant that is processed by the preprocessor.</p>\n\n<p>You can do</p>\n\n<pre><code>#define VAR 15000\nuint_16 a = VAR;\n</code></pre>\n\n<p>But VAR itself is decidedly not a variable but only preprocessor text replacement. The compiler will, after the preprocessor has run, treat the above code as;</p>\n\n<pre><code>uint_16 a = 15000;\n</code></pre>\n\n<p>If you need a constant to use, you can do:</p>\n\n<pre><code>const int VAR = 15000;\n</code></pre>\n\n<p>Instead.</p>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "edited": false, "score": 0, "creation_date": 1445416108, "post_id": 33254285, "comment_id": 54310192, "body": "Could you write an example about your last note ?"}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 5, "last_activity_date": 1445416277, "last_edit_date": 1445416277, "creation_date": 1445415733, "answer_id": 33254285, "question_id": 33254228, "link": "https://stackoverflow.com/questions/33254228/is-it-necessary-in-define-to-set-the-data-type/33254285#33254285", "title": "Is it necessary in #define to set the data type?", "body": "<p><strong>No</strong>, it is not necessary. Macros do textual substitution. They have no idea about data types.</p>\n\n<p>If want to define constants with a type, use <code>const T</code>:</p>\n\n<pre><code>const int var = 15000;\n</code></pre>\n\n<p>Otherwise, you could, just as you did, cast the constant in the macro:</p>\n\n<pre><code>#define VAR (unit_8) 15000\n</code></pre>\n\n<p>Note that integer literals may have different types (<code>15000</code> is <strong>always</strong> an <code>int</code>). You may adjust the type of a literal by appending <a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"noreferrer\">suffixes</a> like <code>u</code>, <code>l</code>, etc.</p>\n\n<pre><code>15000lu = unsigned long\n16000u = unsigned int\n15000 = int\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1491615368, "creation_date": 1445415584, "last_edit_date": 1491615368, "question_id": 33254228, "link": "https://stackoverflow.com/questions/33254228/is-it-necessary-in-define-to-set-the-data-type", "title": "Is it necessary in #define to set the data type?", "body": "<p>I have a question. When I make a <code>#define VAR 5</code> in c, is it necessary to define the type? like: <code>#define VAR (unit_8) 5</code> </p>\n\n<p>I imagine, what is going on when I make this C code. </p>\n\n<pre><code>#define VAR 15000\nvoid foo(uint_8);\nvoid foo(uint_8 c) { c++; }\nint main() {\n  foo(VAR);\n  return 0; \n}  \n</code></pre>\n"}, {"tags": ["c", "windows", "gcc", "windows-7"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1445414754, "post_id": 33253909, "comment_id": 54309388, "body": "remove <code>-c</code> option E.g <code>gcc -Wall HelloWorld.c -o HelloWorld.exe</code>"}, {"owner": {"reputation": 1, "user_id": 5470446, "user_type": "registered", "profile_image": "https://graph.facebook.com/1702466556653735/picture?type=large", "display_name": "Melissa Rose", "link": "https://stackoverflow.com/users/5470446/melissa-rose"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1445447517, "post_id": 33253909, "comment_id": 54331801, "body": "That did it! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5470446, "user_type": "registered", "profile_image": "https://graph.facebook.com/1702466556653735/picture?type=large", "display_name": "Melissa Rose", "link": "https://stackoverflow.com/users/5470446/melissa-rose"}, "edited": false, "score": 0, "creation_date": 1445447680, "post_id": 33253977, "comment_id": 54331886, "body": "Interestingly, I tried all the variations on the mingw and gcc executables such as: i686-pc-cygwin-gcc, i686-pc-cygwin-gcc-4.9.3, i686-pc-mingw32-gcc, i686-pc-mingw32-gcc-4.7.3, i686-w64-mingw32-gcc, i686-w64-mingw32-gcc-4.9.2 and their 64 bit versions just for the hell of it. All of them replicated the same error."}], "tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": false, "score": 1, "last_activity_date": 1445414649, "creation_date": 1445414649, "answer_id": 33253977, "question_id": 33253909, "link": "https://stackoverflow.com/questions/33253909/c-programs-compiled-with-gcc-causing-nvtdm-errors-when-exes-are-run-on-windows/33253977#33253977", "title": "C programs compiled with GCC causing NVTDM errors when .exes are run on Windows 7 32 bit", "body": "<p>If you installed GCC through Cygwin and calling it as <code>gcc</code>, you're not compiling MinGW/native executables, but rather Cygwin executables. If you want non-Cygwin executables, you'll need to install and call <code>{i686,x86_64}-w64-mingw32-gcc</code>.</p>\n\n<p>The runtime crash seems quite mysterious, but it might be due to a missing Cygwin DLL (which of course is required for Cygwin applications. But that's not what you want, so try the above.</p>\n"}], "owner": {"reputation": 1, "user_id": 5470446, "user_type": "registered", "profile_image": "https://graph.facebook.com/1702466556653735/picture?type=large", "display_name": "Melissa Rose", "link": "https://stackoverflow.com/users/5470446/melissa-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445414649, "creation_date": 1445414412, "last_edit_date": 1445414500, "question_id": 33253909, "link": "https://stackoverflow.com/questions/33253909/c-programs-compiled-with-gcc-causing-nvtdm-errors-when-exes-are-run-on-windows", "title": "C programs compiled with GCC causing NVTDM errors when .exes are run on Windows 7 32 bit", "body": "<p>I am attempting to get GCC/G++ running on a 32 bit Windows 7 machine, installed via Cygwin. I can compile and link my basic \"Hello World\" program just fine, but when I try to run it, I get a \"NVTDM.EXE has stoppped working\" error. </p>\n\n<p>I have been googling for the last hour or so, and all I can find is a bunch of references to the fact that NTVDM is supposed to run old 16 bit legacy code, and apparently a Windows XP patch broke it. </p>\n\n<p>I have tried using the -m32 compiler tag to force compilation in 32 bit code, and compiled using both the 32 bit GCC/MinGW executables, and the 64 bit ones just out of curiosity, and I get the same NVTDM error every time. Any ideas on what is going wrong?</p>\n\n<p><strong>Source Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n  printf(\"Hello World!\\n\");\n\n  return 0;\n}\n</code></pre>\n\n<p>Base GCC compile line used:</p>\n\n<pre><code>gcc -Wall -c HelloWorld.c -o HelloWorld.exe\n</code></pre>\n\n<p>Error Details:</p>\n\n<pre><code>Problem signature:\nProblem Event Name: APPCRASH\nApplication Name: ntvdm.exe\nApplication Version: 6.1.7600.16385\nApplication Timestamp: 4a5bc158\nFault Module Name: StackHash_2264\nFault Module Version: 0.0.0.0\nFault Module Timestamp: 00000000\nException Code: c0000005\nException Offset: 00000229\nOS Version: 6.1.7601.2.1.0.256.1\nLocale ID: 1033\nAdditional Information 1: 2264\nAdditional Information 2: 2264db07e74365624c50317d7b856ae9\nAdditional Information 3: 875f\nAdditional Information 4: 875fa2ef9d2bdca96466e8af55d1ae6e\n</code></pre>\n"}, {"tags": ["c", "pointers", "null", "variable-assignment", "unions"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1445412846, "post_id": 33253435, "comment_id": 54308411, "body": "Did you mean to use a <code>union</code> rather than a <code>struct</code>?"}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1445414561, "post_id": 33253435, "comment_id": 54309284, "body": "@Bathsheba you are spot on, a union does not make sense."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445416973, "post_id": 33253435, "comment_id": 54310770, "body": "<code>*a=s1;</code> doesn&#39;t make sense either and will likely cause the program to crash"}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 2, "last_activity_date": 1445414188, "last_edit_date": 1445414188, "creation_date": 1445412751, "answer_id": 33253458, "question_id": 33253435, "link": "https://stackoverflow.com/questions/33253435/null-pointer-assignment-error-union/33253458#33253458", "title": "Null pointer assignment error union", "body": "<ol>\n<li><p>The line</p>\n\n<pre><code>*a = s1;\n</code></pre>\n\n<p>copies <code>s1</code> to the memory <code>a</code> is pointing to, although you didn't allocate any memory.</p>\n\n<p>I think your actual intent was to load <code>a</code> with the address of <code>s1</code>:</p>\n\n<pre><code>a = &amp;s1;\n</code></pre></li>\n<li><p>You need to provide the <strong>address</strong> of an object to <code>scanf</code> to read from <code>stdin</code>:</p>\n\n<pre><code>scanf(\"%d\",&amp;a-&gt;roll_no);\n</code></pre></li>\n<li><p>The line</p>\n\n<pre><code>scanf(\"%s\",a-&gt;name);\n</code></pre>\n\n<p>may cause a buffer overflow because it reads any string, no matter which length. Write</p>\n\n<pre><code>scanf(\"%9s\", a-&gt;name);\n</code></pre>\n\n<p>to be safe, or better, use <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets</code></a>.</p></li>\n<li><p><code>void main()</code> is no strictly-conforming definition of <code>main</code>. If your system allows it, OK, but otherwise that should be <code>int main()</code> or <code>int main(int argc, char** argv)</code>.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1445414390, "post_id": 33253507, "comment_id": 54309188, "body": "Turbo C dislikes <code>int main</code> ;)"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1445415468, "post_id": 33253507, "comment_id": 54309810, "body": "@AlterMann Then probably its time for OP to say Good Bye !!  to Turbo C :-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1445417102, "post_id": 33253507, "comment_id": 54310862, "body": "@AlterMann No, Turbo C accepted <code>int main</code> just fine."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 4, "last_activity_date": 1445412922, "creation_date": 1445412922, "answer_id": 33253507, "question_id": 33253435, "link": "https://stackoverflow.com/questions/33253435/null-pointer-assignment-error-union/33253507#33253507", "title": "Null pointer assignment error union", "body": "<pre><code>  *a=s1;\n</code></pre>\n\n<p>Change this to -</p>\n\n<pre><code>  a=&amp;s1;\n</code></pre>\n\n<p>And this statement-</p>\n\n<pre><code>scanf(\"%d\",a-&gt;roll_no);     // %d expects address of int variable\n</code></pre>\n\n<p>should be -</p>\n\n<pre><code>scanf(\"%d\",&amp;a-&gt;roll_no);\n</code></pre>\n\n<p><strong><em>Note-</em></strong> - <code>void main()</code> <strong>-></strong> <code>int main(void)</code> or <code>int main(int argc, char **argv)</code></p>\n"}], "owner": {"reputation": 9, "user_id": 5470385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd4c0549d1f900cc8223b0f0daa0b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/5470385/anirudh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1490544217, "creation_date": 1445412682, "last_edit_date": 1490544217, "question_id": 33253435, "link": "https://stackoverflow.com/questions/33253435/null-pointer-assignment-error-union", "title": "Null pointer assignment error union", "body": "<p>in the above code i cannot enter the name of student as it gives a null pointer assignment error. how to resolve this , i can enter the roll no and it displays the result just fine</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nunion student\n{\n    int roll_no;\n    char name[10];\n}s1,*a;\nvoid main()\n{\n    clrscr();\n    *a=s1;\n    printf(\"Enter roll_no : \");\n    scanf(\"%d\",a-&gt;roll_no);\n    clrscr();\n    printf(\"Roll No : %d\",a-&gt;roll_no);\n    getch();\n    clrscr();\n    printf(\"Enter name : \");\n    scanf(\"%s\",a-&gt;name);\n    clrscr();\n    printf(\"Name : %s\",a-&gt;name);\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445412302, "post_id": 33253232, "comment_id": 54308030, "body": "What &quot;every element&quot;? There are just two <i>members</i> in the structure? Do you have an array or a pointer to some allocated memory? What have you tried yourself? What does your code look like? What&#39;s wrong with your code?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445412353, "post_id": 33253232, "comment_id": 54308054, "body": "1. What is some methods you tried yourself? 2. What exactly do you want? 3. What do you mean by &quot;every elements&quot;?"}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445412563, "post_id": 33253232, "comment_id": 54308207, "body": "@Magisch Thanks for your reply. I just want to print out every member&#39;s name."}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445412681, "post_id": 33253232, "comment_id": 54308294, "body": "@JoachimPileborg Thanks for your time. I mean I know there is a struct, but I don&#39;t know what it looks like. I want to print out every member&#39;s name."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445412722, "post_id": 33253232, "comment_id": 54308331, "body": "@HuangJie So what you really want is find out how many members there are, and print out what they are and their names?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1445412795, "post_id": 33253232, "comment_id": 54308376, "body": "C doesn&#39;t have <a href=\"https://en.wikipedia.org/wiki/Type_introspection\" rel=\"nofollow noreferrer\">introspection</a> so it&#39;s not possible (if I understand your question correctly)."}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445413405, "post_id": 33253232, "comment_id": 54308697, "body": "@Magisch Yes, that&#39;s what I&#39;m thinking."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1445413600, "post_id": 33253232, "comment_id": 54308801, "body": "@HuangJie refer to my Answer or better yet Alter Mann&#39;s Answer."}], "answers": [{"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1445412931, "creation_date": 1445412931, "answer_id": 33253509, "question_id": 33253232, "link": "https://stackoverflow.com/questions/33253232/print-every-members-name-of-the-struct/33253509#33253509", "title": "print every member&#39;s name of the struct", "body": "<p>That is not possible with C. You cannot find all members of a struct you don't know the definition of, and you cannot print the names of variables either without knowing it before.</p>\n"}, {"comments": [{"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "edited": false, "score": 1, "creation_date": 1445413371, "post_id": 33253542, "comment_id": 54308679, "body": "Now I got it, thanks for your time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1445415444, "post_id": 33253542, "comment_id": 54309792, "body": "I wouldn&#39;t really recommend to create things like this for any purpose. The only reason why you would want to print struct member names is for debug/diagnostic purposes. You shouldn&#39;t let such a peripheral thing as system diagnostics determine the whole program design."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 4, "last_activity_date": 1445413086, "creation_date": 1445413086, "answer_id": 33253542, "question_id": 33253232, "link": "https://stackoverflow.com/questions/33253232/print-every-members-name-of-the-struct/33253542#33253542", "title": "print every member&#39;s name of the struct", "body": "<p>Member names are unknown at runtime, so you can not (unless you manually specify them).</p>\n\n<p><a href=\"http://www.drdobbs.com/the-new-c-x-macros/184401387\" rel=\"nofollow\">X Macros</a> can help:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define NODE_MEMBERS \\\nX(int a, \"a\")        \\\nX(char b, \"b\")\n\n#define X(a, b) a;\nstruct node {\n    NODE_MEMBERS\n};\n#undef X\n\n#define X(a, b) b,\nchar *node_member_name[] = {\n    NODE_MEMBERS\n};\n#undef X\n\nint main(void)\n{\n    printf(\"%s, %s\\n\", node_member_name[0], node_member_name[1]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1445415461, "accepted_answer_id": 33253542, "answer_count": 2, "score": 1, "last_activity_date": 1445413231, "creation_date": 1445412119, "last_edit_date": 1445413231, "question_id": 33253232, "link": "https://stackoverflow.com/questions/33253232/print-every-members-name-of-the-struct", "closed_reason": "Not suitable for this site", "title": "print every member&#39;s name of the struct", "body": "<p>Suppose I have a <code>struct</code>, it's defined like this:</p>\n\n<pre><code>struct node {\n  int a;\n  char b;\n};\n</code></pre>\n\n<p>How can I find and print every struct members name using pointers or something? (Example output here: <code>a</code> and <code>b</code>.</p>\n"}, {"tags": ["c", "linux", "unix", "posix", "epoch"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1445411110, "post_id": 33252904, "comment_id": 54307301, "body": "its byte, not bit. Just use one of the string function to extract the value you need and convert it into the form you need for strptime."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1445411675, "post_id": 33252904, "comment_id": 54307625, "body": "Have you tried &quot;%m%d%Y&quot; as a format? I don&#39;t think that separators are required by strptime(). It won&#39;t work with the year 1520 though. Is the string really in the MMDDYYYY format or is the example just badly chosen?"}], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1445413498, "creation_date": 1445413498, "answer_id": 33253644, "question_id": 33252904, "link": "https://stackoverflow.com/questions/33252904/how-can-i-convert-10131520-into-unix-epoch-time-in-c/33253644#33253644", "title": "How Can I Convert 10131520 Into Unix Epoch Time In C?", "body": "<p>This works, there are different ways, this is a simple, easy to understand way. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n    // to change  10131520 into  10-13-1520\n\n\nmain(  )\n{\n  char string[] = \"10131520\";\n  char stringout[11];\n  char year_str[5];\n  char month_str[3];\n  char day_str[3];\n\n  month_str[0] = string[0];\n  month_str[1] = string[1];\n  month_str[2] = '\\0';\n\n  day_str[0] = string[2];\n  day_str[1] = string[3];\n  day_str[2] = '\\0';\n\n  year_str[0] = string[4];\n  year_str[1] = string[5];\n  year_str[2] = string[6];\n  year_str[3] = string[7];\n  year_str[4] = '\\0';\n\n  strcpy( stringout, month_str );\n  strcat( stringout, \"-\" );\n  strcat( stringout, day_str );\n  strcat( stringout, \"-\" );\n  strcat( stringout, year_str );\n\n  printf( \"\\n the date is %s\", stringout );\n  getchar(  );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 5140224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed591022683f255557d2f4e1ceb6c593?s=128&d=identicon&r=PG", "display_name": "Mirar", "link": "https://stackoverflow.com/users/5140224/mirar"}, "is_accepted": false, "score": 0, "last_activity_date": 1445415973, "creation_date": 1445415973, "answer_id": 33254363, "question_id": 33252904, "link": "https://stackoverflow.com/questions/33252904/how-can-i-convert-10131520-into-unix-epoch-time-in-c/33254363#33254363", "title": "How Can I Convert 10131520 Into Unix Epoch Time In C?", "body": "<p>First, get year, month and day out of your string:</p>\n\n<pre><code>char my_date=\"10131520\";\nint my_date_n=atoi(my_date); // or any better method\n\nint month = (my_date_n/1000000)%100; \nint day   = (my_date_n/  10000)%100;\nint year  = (my_date_n/      1)%10000;\n</code></pre>\n\n<p>(There's a lot of ways of doing this. This might not be the best.)</p>\n\n<p>Then, normally for far away dates you would use julian days:\n<a href=\"https://en.wikipedia.org/wiki/Julian_day#Converting_Julian_or_Gregorian_calendar_date_to_Julian_Day_Number\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Julian_day#Converting_Julian_or_Gregorian_calendar_date_to_Julian_Day_Number</a></p>\n\n<p>for instance:</p>\n\n<pre><code>double calc_jd(int y, int mo, int d,\n               int h, int mi, float s)\n{\n   // variant using ints\n   int A=(14-mo)/12;\n   int Y=y+4800-A;\n   int M=mo+12*A-3;\n   int JD=d + ((153*M+2)/5) + 365*Y + (Y/4) - (Y/100) + (Y/400) - 32045;\n\n   // add time of day at this stage\n   return JD + (h-12)/24.0 + mi/1440.0 + s*(1.0/86400.0);\n}\n</code></pre>\n\n<p>Then you convert this one to unix time, which is the inverse of the answer in this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/466321/convert-unix-timestamp-to-julian\">Convert unix timestamp to julian</a></p>\n\n<pre><code>double unix_time_from_jd(double jd)\n{\n   return (jd-2440587.5)*86400.0;\n}\n</code></pre>\n\n<p>so </p>\n\n<pre><code>double jd = calc_jd(year,month,day,12,0,0); // time of day, timezone?\ndouble unix_time = unix_time_from_jd(jd);\n</code></pre>\n\n<p>note that you might get way outside any range that you can use with\nthe normal tools that uses this kind of date if we're talking about\nthe year 1520. (That's why I keep using a double here.)</p>\n"}], "owner": {"reputation": 161, "user_id": 4441275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d4d7c918db17d9da583a7c17dadaefcb?s=128&d=identicon&r=PG&f=1", "display_name": "esx0001", "link": "https://stackoverflow.com/users/4441275/esx0001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1445415973, "creation_date": 1445410850, "question_id": 33252904, "link": "https://stackoverflow.com/questions/33252904/how-can-i-convert-10131520-into-unix-epoch-time-in-c", "title": "How Can I Convert 10131520 Into Unix Epoch Time In C?", "body": "<p>I have a string 10131520 that I am trying to convert to Unix Epoch time in C. If the numbers were separated like 10-13-1520 I could use something like strptime() but I'm having trouble because there are no deliminators. I was thinking about perhaps splitting the bits up by reading the first 2 bits and storing them into a month variable, then the next 2 bits would be stored into day, and then the last 4 would be stored into time. </p>\n\n<p>If anyone could point me in the right direction I would greatly appreciate it.</p>\n\n<p>Thanks </p>\n"}]