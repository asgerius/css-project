[{"tags": ["c", "function-pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1548287005, "post_id": 54337280, "comment_id": 95491889, "body": "<i>&quot;... and crated another function that uses that pointer as an argument.&quot;</i> - that&#39;s not what you&#39;re passing as an argument. The formal argument for <code>cheama_transforma0</code> is <code>int (*p)(int **pointer)</code>. You&#39;re passing the <i>result</i> of <i>invoking</i> the function pointer <code>p</code> via <code>p(pointer_d)</code>. That function invoke returns <code>int</code>, not <code>int (*p)(int **pointer)</code>, so the compiler is correct to complain."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1548287386, "post_id": 54337280, "comment_id": 95491971, "body": "It&#39;s just a good thing <code>chaema_transforma0</code> doesn&#39;t try to do anything at all with <code>p</code>, since it does not in fact point at a function."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10807665"}, "edited": false, "score": 0, "creation_date": 1548287965, "post_id": 54337383, "comment_id": 95492077, "body": "so...what do you recommend?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548288047, "post_id": 54337383, "comment_id": 95492094, "body": "Depends on what do you want to do. What is <code>cheama_transforma0</code> function supposed to do? (I advise to name all symbols in english, so others can simply understand you). There is no function body, so I don&#39;t know what the function should do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10807665"}, "edited": false, "score": 0, "creation_date": 1548288260, "post_id": 54337383, "comment_id": 95492138, "body": "suppose to manifest the function transforma_in0 using a pointer"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548288370, "post_id": 54337383, "comment_id": 95492162, "body": "<a href=\"https://en.oxforddictionaries.com/definition/manifest\" rel=\"nofollow noreferrer\">manifest</a> ? You mean <i>call</i> ? With what parameters. I think what you mean is <code>int cheama_transforma0(int (*func)(int **pointer), int **data){    return func(data); }</code> and to call <code>cheama_transforma0(p, pointer_d)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10807665"}, "edited": false, "score": 0, "creation_date": 1548288420, "post_id": 54337383, "comment_id": 95492178, "body": "i wanted to make a function that calls another function and modifies the array"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10807665"}, "edited": false, "score": 0, "creation_date": 1548288945, "post_id": 54337383, "comment_id": 95492297, "body": "yesssss...thx man... now it is working ...thank you very much"}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1548286972, "creation_date": 1548286972, "answer_id": 54337383, "question_id": 54337280, "link": "https://stackoverflow.com/questions/54337280/my-program-is-working-correctly-but-i-get-a-warning/54337383#54337383", "title": "My program is working correctly, but I get a warning", "body": "<blockquote>\n  <p>\"passing argument 1 of 'cheama_transforma0' makes pointer from integer without a cast\"</p>\n</blockquote>\n\n<pre><code>void cheama_transforma0(int (*p)(int **pointer));\nint **pointer_d;\nint (*p)(int **cacat);\ncheama_transforma0(p(pointer_d));\n</code></pre>\n\n<p>The <code>p</code> is a function pointer to a function that returns an <code>int</code>. If you pass the return value from the <code>p</code> function as the first argument to <code>cheama_transforma0</code> function, the compiler will cast the <code>int</code> value returned by the <code>p</code> function to an <code>int (*)(int **pointer)</code> function pointer type. Thus the warning.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10807665"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1548293068, "creation_date": 1548286172, "last_edit_date": 1548293068, "question_id": 54337280, "link": "https://stackoverflow.com/questions/54337280/my-program-is-working-correctly-but-i-get-a-warning", "title": "My program is working correctly, but I get a warning", "body": "<p>I have allocated memory for a double pointer and I have populated it with some values. (1) After that, I created a function that populates the ints with 0. Then I have made a pointer to that function and created another function that uses that pointer as an argument.</p>\n\n<p>I ran the program and it was working, but the problem was that I was getting a warning:</p>\n\n<blockquote>\n  <p>passing argument 1 of 'cheama_transforma0' makes pointer from integer without a cast</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nvoid printeaza_pointer(int **cacat){\n    for(int i = 0; i &lt; 3; i++){\n        for(int j = 0; j &lt; 3; j++){\n            printf(\"%d\\n\",cacat[i][j]);\n        }\n        putchar('\\n');\n    }\n}\nint transforma_in0(int **cacat){\n    for(int i = 0; i &lt; 3; i++){\n        for(int j = 0; j &lt; 3; j++){\n            cacat[i][j] = 0;\n        }\n    }\n    return 0;\n}\nvoid cheama_transforma0(int (*p)(int **pointer)){\n\n}\nint main()\n{\n    int (*p)(int **cacat);\n    int **pointer_d = (int **)malloc(sizeof(int*)*3);\n    for(int i = 0; i &lt; 3; i++){\n        pointer_d[i] = (int *)malloc(sizeof(int)*3);\n    }\n\n    for(int i = 0; i &lt; 3; i++){\n        for(int j = 0; j &lt; 3; j++){\n            pointer_d[i][j] = 1;\n        }\n    }\n    p = transforma_in0;\n    printeaza_pointer(pointer_d);\n    cheama_transforma0(p(pointer_d));\n    printeaza_pointer(pointer_d);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "networking", "ip"], "comments": [{"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1548285647, "post_id": 54337139, "comment_id": 95491549, "body": "what is <b>ip_addr</b>?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1548286391, "post_id": 54337139, "comment_id": 95491759, "body": "<code>memcpy()</code> would be more appropiate, IMHO (avoiding the cast and the alignment woes)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1548288519, "post_id": 54337139, "comment_id": 95492202, "body": "It will be the address of destination_ip instead of the bytes in it."}], "answers": [{"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": false, "score": 0, "last_activity_date": 1548293092, "creation_date": 1548293092, "answer_id": 54338109, "question_id": 54337139, "link": "https://stackoverflow.com/questions/54337139/is-it-safe-to-write-an-unsigned-byte-array-in-network-order-directly-to-ip-ip-de/54338109#54338109", "title": "Is it safe to write an unsigned byte array in network order directly to ip.ip_dest?", "body": "<p>from <a href=\"http://man7.org/linux/man-pages/man7/ip.7.html\" rel=\"nofollow noreferrer\"><code>man ip</code></a></p>\n\n<blockquote>\n  <p>The <code>s_addr</code> member of <code>struct in_addr</code>\n         contains the host interface address in network byte order.</p>\n</blockquote>\n\n<p>So you are ok copying bytes, but it's better to use a memcpy instead of the cast.</p>\n\n<pre><code>memcpy(&amp;my_packet_header.ip_dest.s_addr, destination_ip);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1548308556, "last_edit_date": 1548308556, "creation_date": 1548308226, "answer_id": 54339967, "question_id": 54337139, "link": "https://stackoverflow.com/questions/54337139/is-it-safe-to-write-an-unsigned-byte-array-in-network-order-directly-to-ip-ip-de/54339967#54339967", "title": "Is it safe to write an unsigned byte array in network order directly to ip.ip_dest?", "body": "<p>Aside from endian, at least one concern exists: Alignment.</p>\n\n<p><code>struct ip my_packet_header</code> may have a more stringent alignment requirement than <code>unsigned char destination_ip[]</code></p>\n\n<blockquote>\n  <p>A pointer to an object type may be converted to a pointer to a different object type. If the resulting pointer is not correctly aligned  for the referenced type, the <strong>behavior is\n  undefined</strong>.   C11 \u00a76.3.2.3 7</p>\n</blockquote>\n\n<hr>\n\n<p><code>memcpy()</code> handles that issue and eliminates woes <a href=\"https://stackoverflow.com/questions/54337139/is-it-safe-to-write-an-unsigned-byte-array-in-network-order-directly-to-ip-ip-de/54339967#comment95491759_54337139\">@wildplasser</a></p>\n\n<pre><code>assert(sizeof my_packet_header &gt;= sizeof destination_ip);\nmemcpy(&amp;my_packet_header, destination_ip, sizeof destination_ip);\n</code></pre>\n\n<p>An optimizing compiler can be expected to analyze this <code>memcpy()</code> call and emit efficient code - possible without a true function call.</p>\n"}], "owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548308556, "creation_date": 1548285190, "last_edit_date": 1548290061, "question_id": 54337139, "link": "https://stackoverflow.com/questions/54337139/is-it-safe-to-write-an-unsigned-byte-array-in-network-order-directly-to-ip-ip-de", "title": "Is it safe to write an unsigned byte array in network order directly to ip.ip_dest?", "body": "<p>In netinet/ip.h there is struct \"ip\" which is used to transmit IP packets. The address fields are \"ip_src\"  and \"ip_dest\".</p>\n\n<p>If I have my IPv4 addresses in network order in an unsigned byte array, am I safe copying this array directly to ip_src and ip_dest?</p>\n\n<p>For example, if I am sending a packet to 23.45.167.92 and I have the following unsigned char[4]:</p>\n\n<pre><code>destination_ip[0] = 23;\ndestination_ip[1] = 45;\ndestination_ip[2] = 167;\ndestination_ip[3] = 92;\n</code></pre>\n\n<p>Can I then safely do this:</p>\n\n<pre><code>struct ip my_packet_header;\nmy_packet_header.ip_dest = *((ip_addr*)destination_ip);\n</code></pre>\n\n<p>By \"safely\" I mean it will work on both big endian and little endian machines.</p>\n"}, {"tags": ["c", "graphics", "sdl", "sdl-2", "renderer"], "answers": [{"tags": [], "owner": {"reputation": 1625, "user_id": 2334407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kites.jpg?s=128&g=1", "display_name": "haneefmubarak", "link": "https://stackoverflow.com/users/2334407/haneefmubarak"}, "is_accepted": false, "score": 1, "last_activity_date": 1548323823, "creation_date": 1548323823, "answer_id": 54343822, "question_id": 54337074, "link": "https://stackoverflow.com/questions/54337074/sdl-createrenderer-vs-sdl-createsoftwarerenderer/54343822#54343822", "title": "SDL_CreateRenderer() vs SDL_CreateSoftwareRenderer()", "body": "<p>Nope! They should behave the same.</p>\n\n<p>SDL2 has quite a list of convenience functions which are equivalent to simply calling another function with a specific set of arguments. For instance, looking at the <a href=\"https://wiki.libsdl.org/CategoryAPI\" rel=\"nofollow noreferrer\">API listing by name</a>, you'll find that the <code>SDL_LogMessage ()</code> function is matched with a variety of other functions that implicitly specify the <code>priority</code> field, like <code>SDL_LogVerbose ()</code> or <code>SDL_LogError ()</code>.</p>\n\n<p>To some extent, in addition to providing ease-of-use, these combined convenience functions help provide brevity to code while still maintaining clarity. As such, I would advise and advocate for their use when possible!</p>\n"}, {"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 4, "last_activity_date": 1548332695, "creation_date": 1548332695, "answer_id": 54346644, "question_id": 54337074, "link": "https://stackoverflow.com/questions/54337074/sdl-createrenderer-vs-sdl-createsoftwarerenderer/54346644#54346644", "title": "SDL_CreateRenderer() vs SDL_CreateSoftwareRenderer()", "body": "<p>There are differences on how these two operate, or even their intended use. <code>SDL_CreateSoftwareRenderer</code> creates software renderer drawing to given surface. There is no requirement for this surface to be window surface, you can draw to backbuffer, convert it to texture and feed the result to d3d or opengl renderer.</p>\n\n<p><code>SDL_CreateRenderer</code> creates renderer for a given window, meaning it is supposed to draw to that window - with some checks, like opengl or vulkan requires window to be created with specific flags. It goes through list of available rendering backends and tries to find the one that matches your <code>flags</code> the best. Eventually if it decides to use software renderer (either nothing else is supported or software is explicitly requested, although there is more than one way to do so - see the last paragraph) it <a href=\"https://hg.libsdl.org/SDL/file/05aff4771d9a/src/render/software/SDL_render_sw.c#l823\" rel=\"nofollow noreferrer\">calls</a> more-or-less <code>SDL_CreateSoftwareRenderer(SDL_GetWindowSurface(window))</code> (not exactly so, but if you'll trace the code it is the same).</p>\n\n<p><code>flags</code> in <code>SDL_CreateRenderer</code> are not absolute; if a <a href=\"https://wiki.libsdl.org/CategoryHints\" rel=\"nofollow noreferrer\">hint</a> says to use direct3d or opengl, your <code>SDL_RENDERER_SOFTWARE</code> will be ignored. <code>SDL_CreateSoftwareRenderer</code> is always software.</p>\n"}], "owner": {"reputation": 4076, "user_id": 173630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/N1fXR.jpg?s=128&g=1", "display_name": "nnyby", "link": "https://stackoverflow.com/users/173630/nnyby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 0, "accepted_answer_id": 54346644, "answer_count": 2, "score": 2, "last_activity_date": 1548332695, "creation_date": 1548284765, "question_id": 54337074, "link": "https://stackoverflow.com/questions/54337074/sdl-createrenderer-vs-sdl-createsoftwarerenderer", "title": "SDL_CreateRenderer() vs SDL_CreateSoftwareRenderer()", "body": "<p>Does a renderer created with <code>SDL_CreateSoftwareRenderer()</code> behave any differently than one created with <code>SDL_CreateRenderer()</code> using the <code>SDL_RENDERER_SOFTWARE</code> flag?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1548284435, "post_id": 54336919, "comment_id": 95491183, "body": "What happens in <code>mysort()</code> when <code>N</code> is zero?"}, {"owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "edited": false, "score": 3, "creation_date": 1548284786, "post_id": 54336919, "comment_id": 95491292, "body": "Have you verified that it&#39;s related to array size and not just some specific array characteristics which become more likely as size increases? Consider what happens inside your merge loop when <code>first[a] == second[b]</code>."}], "owner": {"reputation": 1, "user_id": 10958416, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rAwttBs029Y/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYBAkkAISquuFi_hF-t0PojID3U8A/mo/photo.jpg?sz=128", "display_name": "Han Sun", "link": "https://stackoverflow.com/users/10958416/han-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548283955, "creation_date": 1548283955, "question_id": 54336919, "link": "https://stackoverflow.com/questions/54336919/why-my-mergesort-fails-at-large-of-numbers", "title": "Why my &#39;mergesort&#39; fails at large # of numbers?", "body": "<p>I have a code of mergesort, it works well with N=68,000 or less, but when the # of numbers increase to 70,000, there's error that some of the elements are not sorted. My friend guess it's because I used too many malloc, but I don't know why.</p>\n\n<p>keytype is just an \"unsigned long\" type defined by myself. \nA is a pre-set array by\nkeytype* A = (keytype *)malloc(N * sizeof(keytype));\nand filled by random numbers.</p>\n\n<pre><code>typedef unsigned long keytype;\nkeytype *new_part(int start, int end, keytype* A) {\n    int N = end - start + 1;\n    keytype* cc = (keytype *)malloc(N * sizeof(keytype));\n    for (int i = 0; i &lt; N; i++) {\n        cc[i] = A[start + i];\n    }\n    return cc;\n}\nvoid mySort(int N, keytype* A){\n    if (N == 1) return;\n    int mid = N / 2;\n    keytype* first = new_part(0, mid - 1, A);\n    keytype* second = new_part(mid, N - 1, A);\n    mySort(mid, first);\n    mySort(N - mid, second);\n    int a = 0, b = 0;\n    for (int i = 0; i &lt; N; i++) {\n        if (a &gt;= mid) {\n            A[i] = second[b];\n            b++;\n            continue;\n        }\n        if (b &gt;= N - mid) {\n            A[i] = first[a];\n            a++;\n            continue;\n        }\n        if (first[a]&gt;second[b]) {\n            A[i] = second[b];\n            b++;\n            continue;\n        }\n        if (first[a] &lt; second[b]) {\n            A[i] = first[a];\n            a++;\n            continue;\n        }\n    }\n    free(first);\n    free(second);\n}\n</code></pre>\n"}, {"tags": ["c", "char", "language-lawyer", "memcpy"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1548305792, "post_id": 54336811, "comment_id": 95495605, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/187221/discussion-on-question-by-jason-orendorff-is-it-technically-impossible-to-implem\">moved to chat</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548307124, "post_id": 54336811, "comment_id": 95495943, "body": "It would seem to be prudent to not lose the <code>const</code> of <code>source</code> and use <code>const unsigned char *src</code>, although <code>src[]</code> does not modify anything, so I would say it is not <i>needed</i>, but <code>const</code> absence distracts from the main issue."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548307486, "post_id": 54336811, "comment_id": 95496026, "body": "The <i>effective type</i> issue seems to be relevant here - defined in  C11 &#167;6.5 6."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1548342708, "post_id": 54336811, "comment_id": 95514771, "body": "As far as I can tell, this Howard Chu is writing nonsense. I don&#39;t see any rules of C violated in your implementation of <code>memcpy</code>, and the &quot;effective type&quot; thing is not new in the latest C spec (it&#39;s been there for twenty years now)."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1548344558, "creation_date": 1548344558, "answer_id": 54350375, "question_id": 54336811, "link": "https://stackoverflow.com/questions/54336811/is-it-technically-impossible-to-implement-memcpy-from-scratch-in-standard-c/54350375#54350375", "title": "Is it technically impossible to implement memcpy from scratch in Standard C?", "body": "<p><strong>TL;DR</strong><br>\nIt should be fine, as long as the <code>memcpy</code> is based on naive character-by-character copy. </p>\n\n<p>And not optimized to move chunks of the size of the largest aligned type that can be copied in a single instruction. The latter is how standard lib implementations do it.</p>\n\n<hr>\n\n<p>What's concerning is something like this scenario:</p>\n\n<pre><code>void* my_int = malloc(sizeof *my_int);\nint another_int = 1;\n\nmy_memcpy(my_int, &amp;another_int, sizeof(int));\n\nprintf(\"%d\", *(int*)my_int); // well-defined or strict aliasing violation?\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>The data pointed at my <code>my_int</code> has no effective type.</li>\n<li>When we copy the data into the <code>my_int</code> location, one might be concerned that we force the effective type to become <code>unsigned char</code>, since that's what <code>my_memcpy</code> uses.</li>\n<li>And then when we read that memory location through <code>int*</code>. Would we violate strict aliasing?</li>\n</ul>\n\n<p><em>However</em>, the key here is a special exception in the rule for effective type, specified in C17 6.5/6, emphasis mine:</p>\n\n<blockquote>\n  <p><strong>If a value is copied into an object</strong> having no declared type <strong>using\n  <code>memcpy</code></strong> or <code>memmove</code>, <strong>or is copied as an array of character type</strong>, <strong>then the effective type of the modified object</strong> for that access and for subsequent accesses that do not modify the\n  value <strong>is the effective type of the object from which the value is copied</strong>, if it has one.</p>\n</blockquote>\n\n<p>Since we do copy the array as character type, the effective type of what <code>my_int</code> points at will become that of the object <code>another_int</code> from which the value was copied.</p>\n\n<p>So everything should be fine.</p>\n\n<p>In addition, you <code>restrict</code>-qualified the parameters so there should be no fuss regarding if the two pointers might alias each other, just like real <code>memcpy</code>.</p>\n\n<p>Notably, this rule has remained the same through C99, C11 and C17. One might argue that it is a very bad rule abused by compiler vendors, but that's another story.</p>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1548349248, "post_id": 54350779, "comment_id": 95518996, "body": "Wouldn&#39;t the value of <code>i</code> in your example be implementation defined (and possibly trap representation) rather than undefined?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1548349613, "post_id": 54350779, "comment_id": 95519227, "body": "@ChristianGibbons: I would say that what happens is unspecified by the standard. An implementation can specify it, but I could not find an evidence that it is required to."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1548350326, "post_id": 54350779, "comment_id": 95519627, "body": "I would think it would be implicitly implementation defined.  Specifically as it relates to the representation of <code>float</code>s and the representation of <code>int</code>s.  Both of those are implementation defined.  <code>memcpy</code> operation to copy the bytes from the <code>float</code> to the <code>int</code> should be well-defined (copy the bytes exactly as they are).  Therefore the value held by <code>i</code> should be resolvable given the implementation details of <code>float</code> and <code>int</code>, with the only caveat being the possibility of trap representation."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1548458873, "post_id": 54350779, "comment_id": 95562670, "body": "But <code>i</code> has a <i>declared type</i>, so that rule does not apply."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1548345837, "creation_date": 1548345837, "answer_id": 54350779, "question_id": 54336811, "link": "https://stackoverflow.com/questions/54336811/is-it-technically-impossible-to-implement-memcpy-from-scratch-in-standard-c/54350779#54350779", "title": "Is it technically impossible to implement memcpy from scratch in Standard C?", "body": "<p>For the <code>malloc</code> function, paragraph 6.5 \u00a76 makes it clear that it is not possible to write a conformant and portable C implementation :</p>\n\n<blockquote>\n  <p>The effective type of an object for an access to its stored value is the declared type of the\n  object, if any<sup>(87)</sup>...</p>\n</blockquote>\n\n<p>The (non normative) note 87 says:</p>\n\n<blockquote>\n  <p>Allocated objects have no declared type.</p>\n</blockquote>\n\n<p>The only way to declare a object with no declared type is... through the allocation function which is required to return such an object! So inside the allocation function, you must have <em>something</em> that cannot be allowed by the standard to setup a memory zone with no declared type.</p>\n\n<p>In common implementations, the standard library malloc and free are indeed implemented in C, but the system knows about it and assumes that the character array  which has been provided inside <code>malloc</code> just has no declared type. Full stop.</p>\n\n<p>But the remaining part of the same paragraph explains that there is no real problem in writing a <code>memcpy</code> implementation (emphasize mine):</p>\n\n<blockquote>\n  <p>... If a value is stored into an object having no declared type through an\n  lvalue having a type that is not a character type, then the type of the lvalue becomes the\n  effective type of the object for that access and for subsequent accesses that do not modify\n  the stored value. If a value is copied into an object having no declared type using\n  memcpy or memmove, or <strong>is copied as an array of character type</strong>, then the effective type\n  of the modified object for that access and for subsequent accesses that do not modify the\n  value is the effective type of the object from which the value is copied, if it has one. For\n  all other accesses to an object having no declared type, the effective type of the object is\n  simply the type of the lvalue used for the access.</p>\n</blockquote>\n\n<p>Provided you copy the object as an array of character type, which is a special access allowed per the strict aliasing rule, there is no problem in implementing <code>memcpy</code>, and your code is a possible and valid implementation.</p>\n\n<p>IMHO the rant of Howard Chu is about that old good <code>memcpy</code> usage, which is no longer valid (assuming <code>sizeof(float) == sizeof(int)</code>):</p>\n\n<pre><code>float f = 1.0;\nint i;\nmemcpy(&amp;i, &amp;f, sizeof(int));         // valid: copy at byte level, but the value of i is undefined\nprint(\"Repr of %f is %x\\n\", i, i);   // UB: i cannot be accessed as a float\n</code></pre>\n"}], "owner": {"reputation": 36975, "user_id": 94977, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8341c5bff3dcbd8ed34d9d68bd4169f2?s=128&d=identicon&r=PG", "display_name": "Jason Orendorff", "link": "https://stackoverflow.com/users/94977/jason-orendorff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 2, "answer_count": 2, "score": 13, "last_activity_date": 1548345837, "creation_date": 1548283329, "last_edit_date": 1548342432, "question_id": 54336811, "link": "https://stackoverflow.com/questions/54336811/is-it-technically-impossible-to-implement-memcpy-from-scratch-in-standard-c", "title": "Is it technically impossible to implement memcpy from scratch in Standard C?", "body": "<p>Howard Chu <a href=\"https://twitter.com/hyc_symas/status/1088187814477553678\" rel=\"nofollow noreferrer\">writes</a>: </p>\n\n<blockquote>\n  <p>In the latest C spec it is impossible to write a \"legal\" implementation of malloc or memcpy.</p>\n</blockquote>\n\n<p>Is this right? My impression is that in the past, the intent (at least) of the standard was that something like this would work:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void * memcpy(void * restrict destination, const void * restrict source, size_t nbytes)\n{\n    size_t i;\n    unsigned char *dst = (unsigned char *) destination;\n    const unsigned char *src = (const unsigned char *) source;\n\n    for (i = 0; i &lt; nbytes; i++)\n        dst[i] = src[i];\n    return destination;\n}\n</code></pre>\n\n<p>What rules in the latest C standard are violated here? Or, what part of the specification of <code>memcpy</code> is not correctly implemented by this code?</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 537, "user_id": 9155551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cbd8ead1da74944a44c3e0c85ee1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Itai Steinherz", "link": "https://stackoverflow.com/users/9155551/itai-steinherz"}, "edited": false, "score": 1, "creation_date": 1548282858, "post_id": 54336716, "comment_id": 95490682, "body": "What output/errors are you currently getting?"}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 1, "creation_date": 1548283190, "post_id": 54336716, "comment_id": 95490786, "body": "What is <code>data</code>? What output are you getting? What is <code>entry</code>?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1548283423, "post_id": 54336716, "comment_id": 95490843, "body": "on stackoverflow, the expectation is the posting of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> not just some code snippets."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548310934, "post_id": 54336716, "comment_id": 95497082, "body": "Tip: remove the <i>potential</i> <code>&#39;\\n&#39;</code> from <code>input</code> with <code>input[strcspn(input,&quot;\\n&quot;)] = 0;</code> right after the <code>if (fgets() ....</code> or add it to the token list <code>&quot;|\\n&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1548284177, "last_edit_date": 1548284177, "creation_date": 1548283869, "answer_id": 54336905, "question_id": 54336716, "link": "https://stackoverflow.com/questions/54336716/how-to-input-string-tokens-into-a-2d-array/54336905#54336905", "title": "How to input string tokens into a 2d array?", "body": "<p>the posted code keeps adding 1 to <code>element</code>, even when it is a new line/new customer.</p>\n\n<p>Suggest, after the statement: </p>\n\n<pre><code>customer++; \n</code></pre>\n\n<p>to insert the statement:</p>\n\n<pre><code>element = 0;\n</code></pre>\n\n<p>also regarding:</p>\n\n<pre><code>char customerData[NUM_FIELDS][FIELD_LENGTH];\n</code></pre>\n\n<p>I would expect the first part of the array to be a customer number, then NUM_FIELDS and then FIELD_LENGTH</p>\n\n<p>Also, for clarity suggest <code>element</code> be replaced with <code>fieldNum</code></p>\n"}], "owner": {"reputation": 19, "user_id": 10703254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RmtAT.jpg?s=128&g=1", "display_name": "metisMusings", "link": "https://stackoverflow.com/users/10703254/metismusings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548284177, "creation_date": 1548282719, "question_id": 54336716, "link": "https://stackoverflow.com/questions/54336716/how-to-input-string-tokens-into-a-2d-array", "title": "How to input string tokens into a 2d array?", "body": "<p>Trying to get a list of inputs with delimiter \"|\":</p>\n\n<blockquote>\n  <p>Public|Jane|Q|Ms.|600|Maple Street|Your Town|Iowa|12345</p>\n</blockquote>\n\n<p>And then would like to input them into a 2d array (customerData) that I can manipulate.</p>\n\n<p>I realize I'm missing int main() and code for reading file/input. Just including the relevant code. I can get the input, its the putting into customerData getting out of that I'm struggling with.</p>\n\n<pre><code>#define INPUT_LENGTH 128\n#define FIELD_LENGTH 30\n#define NUM_FIELDS   9\n\n\nchar input[INPUT_LENGTH];                    \nchar customerData[NUM_FIELDS][FIELD_LENGTH];  \nint  element = 0;\nint customer = 0;\n\nwhile ( fgets( input, INPUT_LENGTH, data ) != NULL ) {\n  char* token = strtok(input, \"|\"); // start tokeninzing\n  while (token) { // end of string last token is NULL\n    strcpy(customerData[customer][element], token); \n    token = strtok(NULL, \"|\"); \n    element++;\n  }\n  customer++;  \n}\n\nfor (int i = 0; i &lt; entry; i++) {\n  for (int k = 0; k &lt; element; k++) {\n    printf(\"%s\\n\", customerData[i][k]);\n  }\n}\n</code></pre>\n\n<p>I'm expecting output like this: </p>\n\n<pre><code>Public\nJane\nQ\nMs.\n600\nMaple Street\nYour Town\nIowa\n12345\n</code></pre>\n"}, {"tags": ["c", "string", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 1, "last_activity_date": 1548289307, "last_edit_date": 1548289307, "creation_date": 1548289088, "answer_id": 54337634, "question_id": 54336542, "link": "https://stackoverflow.com/questions/54336542/how-to-arrange-comma-separated-string-in-arrays-of-string-in-c/54337634#54337634", "title": "How to arrange comma separated string in Arrays of String in c?", "body": "<p>replace </p>\n\n<pre><code>printf(\"%.*s\\n\", (int)field_len, s);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>sprintf(ArrayOfString[i],\"%.*s\\n\", (int)field_len, s);\n</code></pre>\n\n<p>then you can print the 4 first elements with</p>\n\n<pre><code>for( i=0 ; i&lt;4 ; i++)\n   printf(\"%s\" , ArrayOfString[i] );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548312051, "post_id": 54337830, "comment_id": 95497476, "body": "<code>if ((len = strlen (s)) &lt; COL - 1)</code> --&gt; <code>if ((len = strlen (s)) &lt; COL)</code>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548312344, "post_id": 54337830, "comment_id": 95497579, "body": "Arrgh!, I&#39;m taking my glasses off and just using you -- far more reliable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548312351, "post_id": 54337830, "comment_id": 95497582, "body": "OP&#39;s good use of <code>strcspn()</code> allows <code>string</code> as <code>const char *</code> negating the need to allocate temp memory and copy the string.  IMO, better than <code>strtok()</code> with its additional thread concerns."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548312574, "post_id": 54337830, "comment_id": 95497665, "body": "Agreed, but that becomes a little more esoteric -- do we not suggest standard library functions in lieu of a bit more creative use of different functions to accomplish the same goal, or ... That was my thought process in selecting <code>strtok</code>. I do like <code>strcspn</code> though. Only drawback would be the multi-delimiter case where you would then need to scan forward past the remaining delimiters -- which <code>strtok</code> handles for you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548313303, "post_id": 54337830, "comment_id": 95497954, "body": "To scan forward though delimiters, use <code>strspn()</code>.  <code>strspn()</code> and <code>strcspn()</code> are standard functions.  <code>strtok()</code> also destroys <code>string</code>, a potential surprise when someone calls <code>vSeperateSringByComma(string)</code>.  To prevent that, <code>strtok()</code> also then needs <code>malloc(), strcpy(), free()</code>.  IMO, <code>strspn()</code>.  <code>strcspn()</code> makes for cleaner code."}, {"owner": {"reputation": 105, "user_id": 10231078, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Gx6TcQWl7w/AAAAAAAAAAI/AAAAAAAAMOM/fM0mkALJ_Xg/photo.jpg?sz=128", "display_name": "Ehsan Habib", "link": "https://stackoverflow.com/users/10231078/ehsan-habib"}, "edited": false, "score": 0, "creation_date": 1548314088, "post_id": 54337830, "comment_id": 95498275, "body": "When i exactly copied and pasted your code and ran it on dev c++ ide, It did not work though your explanation helped me to work through the problem by my own. I will post the solution. Thanks for your suggestion."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548314280, "post_id": 54337830, "comment_id": 95498371, "body": "Sure, let me know, there should be no issues. If you are interested, I&#39;m happy to add a <code>strcspn&#47;strspn</code> approach as well."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 3, "last_activity_date": 1548316451, "last_edit_date": 1548316451, "creation_date": 1548290654, "answer_id": 54337830, "question_id": 54336542, "link": "https://stackoverflow.com/questions/54336542/how-to-arrange-comma-separated-string-in-arrays-of-string-in-c/54337830#54337830", "title": "How to arrange comma separated string in Arrays of String in c?", "body": "<p>You have several issues to work through to convert your function from simply printing the separated strings to <code>stdout</code> to saving the separated strings in <code>ArrayOfString</code>. Before getting to the changes, let's avoid using <em>magic numbers</em> in your code.</p>\n\n<pre><code>char ArrayOfString[10][5];\n</code></pre>\n\n<p>In <code>ArrayOfString</code> above, <code>10</code> and <code>5</code> are <em>magic numbers</em>. They are hardcoded values that will govern everything from the declaration size to required validation checks to protect your array bounds. Instead of hardcoding values, if you need a constant, define one (or more), e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ROW 10\n#define COL  5\n\nchar ArrayOfString[ROW][COL];\n</code></pre>\n\n<p>Now on to separating your string into <em>tokens</em>. The C-library provides a function specifically tailored to separating delimited strings into tokens. Conveniently named <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow noreferrer\"><code>strtok</code></a>. The only caveat to know about <code>strtok</code> is that it modifies the string, so if you need to preserve the original, make a copy first.</p>\n\n<p>To use <code>strtok (string, delims)</code> to separate <code>string</code> into tokens at <code>delims</code>, your first call to <code>strtok</code> takes <code>string</code> as the 1st parameter. All subsequent calls use <code>NULL</code> in its place. You can either make an initial call to <code>strtok</code> and then use a while loop to complete the process, or a <code>for</code> loop is tailor made for handling the initial call, as well as all subsequent calls with <code>NULL</code>.</p>\n\n<p>For example your function utilizing <code>strtok</code> to separate <code>string</code> into tokens and providing a <code>size_t</code> return of the number of tokens copied to <code>ArrayOfString</code> could be similar to:</p>\n\n<pre><code>char ArrayOfString[ROW][COL];\n\nsize_t vSeparateSringByComma (char* string)\n{\n    const char *delims = \",\\n\";\n    char *s = string;\n    size_t n = 0, len;\n\n    for (s = strtok (s, delims); s &amp;&amp; n &lt; ROW; s = strtok (NULL, delims))\n        if ((len = strlen (s)) &lt; COL)\n            strcpy (ArrayOfString[n++], s);\n        else\n            fprintf (stderr, \"error: '%s' exceeds COL - 1 chars.\\n\", s);\n\n    return n;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> how your array bounds are protected both by the check with <code>n &lt; ROW</code> and each row array bound is protected with <code>(len = strlen (s)) &lt; COL</code> before the copy to <code>ArrayOfString[n++]</code> is made)</p>\n\n<p>(<strong>also note:</strong> how by not using <em>magic numbers</em>, if you change the <code>ROW</code> or <code>COL</code> size in the future, only the constants need changing and the change is automatically incorporated throughout your code by virtue of using constants)</p>\n\n<p>Your example program would then be:</p>\n\n<pre><code>int main(void) {\n\n    char string[] = \"$,0,3,307,183,18,5,119,1,#\";\n    size_t n = vSeparateSringByComma (string);\n\n    for (size_t i = 0; i &lt; n; i++)\n        printf (\"ArrayOfString[%zu] : '%s'\\n\", i, ArrayOfString[i]);\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/arrayofstrings\nArrayOfString[0] : '$'\nArrayOfString[1] : '0'\nArrayOfString[2] : '3'\nArrayOfString[3] : '307'\nArrayOfString[4] : '183'\nArrayOfString[5] : '18'\nArrayOfString[6] : '5'\nArrayOfString[7] : '119'\nArrayOfString[8] : '1'\nArrayOfString[9] : '#'\n</code></pre>\n\n<p><strong>Using <code>strcspn</code> and <code>strspn</code> Instead of <code>strtok</code></strong></p>\n\n<p>As discussed in the comments, using <code>strcspn</code> to report the number of sequential characters not containing a delimiter allowing you to determined the length of each field. You then need to skip over the delimiters (which in many cases can be made up of more than one delimiter (e.g. <code>$, 0, 3, ...</code>). </p>\n\n<p>While <code>strtok</code> considers multiple sequential delimiters a single delimiter, you would need a similar way to skip over the intervening delimiters to position your self to read the next field. <code>strspn</code> will work nicely using the same <code>delims</code>, but this time reporting the number of characters made up of only characters within <code>delims</code> (allowing you to add that to your <code>len</code> and then <code>len</code> to <code>s</code> to position yourself for the next read)</p>\n\n<p>A short variation using <code>strcspn</code> and <code>strspn</code> could be:</p>\n\n<pre><code>size_t vSeperateSringByComma (char* string)\n{\n    const char *delims = \",\\n\";\n    char *s = string;\n    size_t n = 0, len;\n\n    while ((len = strcspn (s, delims))) {   /* number of non-delim chars */\n        if (len &lt; COL) {                    /* validate it will fit */\n            memcpy (ArrayOfString[n], s, len);  /* copy len chars */\n            ArrayOfString[n++][len] = 0;    /* nul terminate at len */\n        }\n        else\n            fprintf (stderr, \"error: '%s' exceeds COL - 1 chars.\\n\", s);\n\n        len += strspn (s + len, delims);    /* scan past delimiter(s) */\n        s += len;               /* update s to beginning of next field */\n    }\n\n    return n;\n}\n</code></pre>\n\n<p>(the output is the same)</p>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1548316766, "post_id": 54341543, "comment_id": 95499542, "body": "<code>sprintf(ArrayOfString[++i]</code> should be <code>sprintf(ArrayOfString[i++]</code> or your 1st element will be empty <code>:)</code> You should also add to <code>delims = &quot;,\\n&quot;;</code> to avoid the newline dangling off your last token."}], "tags": [], "owner": {"reputation": 105, "user_id": 10231078, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Gx6TcQWl7w/AAAAAAAAAAI/AAAAAAAAMOM/fM0mkALJ_Xg/photo.jpg?sz=128", "display_name": "Ehsan Habib", "link": "https://stackoverflow.com/users/10231078/ehsan-habib"}, "is_accepted": false, "score": 0, "last_activity_date": 1548315579, "creation_date": 1548315579, "answer_id": 54341543, "question_id": 54336542, "link": "https://stackoverflow.com/questions/54336542/how-to-arrange-comma-separated-string-in-arrays-of-string-in-c/54341543#54341543", "title": "How to arrange comma separated string in Arrays of String in c?", "body": "<p>I have learned about both the standard functions <code>strtok()</code> and <code>strcspn()</code> and i am posting both version of the solution.</p>\n\n<p><strong>Using strtok()</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ROW  10\n#define COL  30\n\nchar ArrayOfString[ROW][COL];\n\nsize_t vSeperateSringByComma_New(char* string, char *delims)\n{\n  char *p;\n  p = strtok (string,delims);\n  int i = 0,j;\n  while (p!= NULL)\n  {\n    strcpy(ArrayOfString[++i], p);\n    p = strtok (NULL, delims);\n  }\n  return i;\n}\n\nint main ()\n{\n  char string[] =\"$,0,3,307,183,18,5,119,1,#\";\n  char delim[] = \",:\";\n  printf (\"String  \\\"%s\\\" is split into tokens:\\n\",string);\n  size_t len = vSeperateSringByComma_New (string, delim);\n  int i;\n  for (i = 0; i &lt; len+1; i++)   {\n    printf (\"%s\\n\",ArrayOfString[i]);\n  }\n  return 0;\n}\n</code></pre>\n\n<p><strong>Using strcspn()</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ROW  10\n#define COL  30\n\nchar ArrayOfString[ROW][COL];\n\nsize_t vSeperateSringByComma(char* string, char *delims)\n{\n    const char *s = string;\n    int i = 0;\n    do {\n        size_t field_len = strcspn(s, delims);\n        sprintf(ArrayOfString[++i],\"%.*s\", (int)field_len, s);\n        s += field_len;\n    } while (*s++); \n    return i; \n}\n\nint main() {\n    char string[] = \"$,0,3,307,183,18,5,119,1,#\";\n    char delims[] = \",\";\n    printf (\"String  \\\"%s\\\" is split into tokens:\\n\",string);\n    int len = vSeperateSringByComma(string, delims);\n    int i;\n    for (i = 0; i &lt; len+1; i++) {\n        printf (\"%s\\n\",ArrayOfString[i]);\n    }\n}\n</code></pre>\n\n<p>Thanks for your suggestions</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12941793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6d1af84ff8cb76e4c716b93a53b41d?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjit", "link": "https://stackoverflow.com/users/12941793/ranjit"}, "is_accepted": false, "score": 0, "last_activity_date": 1582336787, "creation_date": 1582336787, "answer_id": 60348356, "question_id": 54336542, "link": "https://stackoverflow.com/questions/54336542/how-to-arrange-comma-separated-string-in-arrays-of-string-in-c/60348356#60348356", "title": "How to arrange comma separated string in Arrays of String in c?", "body": "<p>Use strncpy() to put your values into array. This <strong>char *strncpy(char *dest, const char *src, size_t n)</strong> copies up to n characters from the string pointed to, by src to dest.</p>\n\n<pre><code>do\n{\n    size_t field_len = strcspn(str, delims);\n    printf(\"%.*s\\n\", (int)field_len, str);\n    strncpy (ArrayOfString[cnt++], str, (int)field_len);\n    str += field_len;\n    i++;\n} while (*str++);\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 10231078, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Gx6TcQWl7w/AAAAAAAAAAI/AAAAAAAAMOM/fM0mkALJ_Xg/photo.jpg?sz=128", "display_name": "Ehsan Habib", "link": "https://stackoverflow.com/users/10231078/ehsan-habib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 0, "accepted_answer_id": 54337830, "answer_count": 4, "score": 0, "last_activity_date": 1582336787, "creation_date": 1548281780, "last_edit_date": 1548314151, "question_id": 54336542, "link": "https://stackoverflow.com/questions/54336542/how-to-arrange-comma-separated-string-in-arrays-of-string-in-c", "title": "How to arrange comma separated string in Arrays of String in c?", "body": "<p>I'm writing a <code>C</code> program which will parse comma separated string in Arrays of String.</p>\n\n<p>I have already tried a source code which prints the comma separated string. But I want those strings to be stored in an array of string. The following code uses <code>strcspn</code> and uses this following line</p>\n\n<pre><code>printf(\"%.*s\\n\", (int)field_len, s);\n</code></pre>\n\n<p>to print the strings which I am not able to understand. How can I transfer the printed string in the arrays of string?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar ArrayOfString[10][5];\n\nvoid vSeparateSringByComma(char* string)\n  {\n    const char delims[] = \",\";\n    const char *s = string;\n    int i = 0, j;\n    do \n      {\n        size_t field_len = strcspn(s, delims);\n        printf(\"%.*s\\n\", (int)field_len, s);\n        s += field_len;\n        i++;\n      } \n\n    while (*s++);   \n   }\n\nint main() {\n    char string[] = \"$,0,3,307,183,18,5,119,1,#\";\n    vSeparateSringByComma(string);\n}\n</code></pre>\n\n<p>The output i am getting is</p>\n\n<pre><code>$\n0\n3\n307\n183\n18\n5\n119\n1\n#\n</code></pre>\n\n<p>(after every string there is a newline)\nwhich is perfectly fine. My problem is to transfer these strings to my array of strings.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c", "file", "binary", "fseek"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548282210, "post_id": 54336521, "comment_id": 95490456, "body": "<code>fread(&amp;x,sizeof(STUDENT),nrfete,fe);</code> should be <code>fread(x,sizeof(STUDENT),nrfete,fe);</code>"}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548282296, "post_id": 54336521, "comment_id": 95490499, "body": "I modified but i get the same error"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548282368, "post_id": 54336521, "comment_id": 95490526, "body": "Please don&#39;t modify what you posted, unless it wasn&#39;t the actual code you are having problems with."}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548282479, "post_id": 54336521, "comment_id": 95490558, "body": "Oh, okay. I understand. However, that mistake was not the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1548282546, "post_id": 54336521, "comment_id": 95490575, "body": "How can the code possibly work without the <code>fseek</code> when <code>ftell</code> returns <code>0</code>, <code>0</code> bytes memory are allocated, and <code>fread</code> reads <code>0</code> bytes from file? Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem."}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548282638, "post_id": 54336521, "comment_id": 95490609, "body": "I explained myself wrong. By &quot;working&quot; i meant &quot;not having an error&quot;. I do not get the &quot;core dumped&quot; error anymore if i remove the fseek. I am sorry."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548283006, "post_id": 54336521, "comment_id": 95490733, "body": "It is unlucky that it &quot;worked&quot; because in that case you are accessing memory with <code>x[0].prenume</code> you don&#39;t own. It still needs the MCVE. That will show the <code>STUDENT</code> definition, and whether its <code>prenume</code> member is a pointer or an array. If it&#39;s a pointer, the code will fail."}, {"owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "edited": false, "score": 0, "creation_date": 1548283043, "post_id": 54336521, "comment_id": 95490752, "body": "how STUDENT::prenume is defined ? as I can see, you print it as string, are you sure that you don&#39;t need allocate memory for this variable?"}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "reply_to_user": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "edited": false, "score": 0, "creation_date": 1548283183, "post_id": 54336521, "comment_id": 95490780, "body": "@sandro this is how i defined my structure:   &#39;typedef struct {     char prenume[20];     char sex;     float nota; } STUDENT; &#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548284660, "post_id": 54336521, "comment_id": 95491247, "body": "do not place code in a comment.  Rather edit the question"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548284784, "post_id": 54336521, "comment_id": 95491290, "body": "OT: regarding: <code>printf(&quot;eroare&quot;);</code>  Error messages are to be output to <code>stderr</code>, not <code>stdout</code> and when the error is from a  C library function,  should also output the text reason the system thinks the error occurred to <code>stdout</code>.  The function: <code>perror()</code> performs all the above, correctly"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548284874, "post_id": 54336521, "comment_id": 95491311, "body": "OT: Regarding the definition of STUDENT, a struct definition should always include a &#39;tag&#39; name because most debuggers use the tag name to reference the individual fields in the struct."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548285291, "post_id": 54336521, "comment_id": 95491428, "body": "OT: regarding: <code>x=(STUDENT*)malloc(nrfete*sizeof(STUDENT));</code>  1) in C, the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc.  2) when calling any of the heap allocation functions: <code>malloc</code> <code>calloc</code> <code>realloc</code>, always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548285397, "post_id": 54336521, "comment_id": 95491468, "body": "OT: regarding: <code>fread(&amp;x,sizeof(STUDENT),nrfete,fe);</code>  This is trying to read the whole file in one gulp.  However, always check the returned value to assure the operation was successful.  In this case, the returned value should equal <code>nrfete</code>  BTW: the variable: <code>nrfete</code> should have type <code>size_t</code> because that is what the function: <code>fread()</code> is expecting"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548285957, "post_id": 54336521, "comment_id": 95491629, "body": "the call to <code>fseek()</code> has not direct effect on why the program causes a core dump.  Rather the problem is calling <code>printf()</code> to print a field that does not contain a string.  BTW <code>fread()</code> will not append a NUL byte to each field (and your question does not claim that each field is already NUL terminated.)  Suggest your researching that detail to determine if the file contains NUL terminated strings"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548286083, "post_id": 54336521, "comment_id": 95491658, "body": "when calling <code>fread()</code>, always check the returned value.  That would have told you that the call to <code>fread()</code> failed because the &#39;file pointer&#39; is already at the end of the file (it would have returned 0)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548311738, "post_id": 54336521, "comment_id": 95497348, "body": "@MaryPoppins Re: &quot;However, that mistake was not the problem.&quot;.  Code has many problems.  That mistake was one of the many errors.  They all need fixing."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548311848, "post_id": 54336521, "comment_id": 95497391, "body": "What was the result of <code>printf(&quot;%ld&quot;,ftell(fe));</code>?  Tip: recode as <code>fprintf(stderr, &quot;%ld\\n&quot;,ftell(fe));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "edited": false, "score": 0, "creation_date": 1548283918, "post_id": 54336861, "comment_id": 95491013, "body": "I did all the modifications, but i get the  same error"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "edited": false, "score": 1, "creation_date": 1548284309, "post_id": 54336861, "comment_id": 95491154, "body": "And you <i>still</i> have not posted the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem. Have you read the link? The MCVE is a <b>complete program</b> that can be copy/pasted, compiled and run to reproduce the problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548311407, "post_id": 54336861, "comment_id": 95497230, "body": "Perhaps out-of-memory."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1548287954, "last_edit_date": 1548287954, "creation_date": 1548283668, "answer_id": 54336861, "question_id": 54336521, "link": "https://stackoverflow.com/questions/54336521/core-dumped-after-using-fseek-in-c/54336861#54336861", "title": "Core dumped after using fseek in c", "body": "<p>Two errors in particular:</p>\n\n<p>You must <code>rewind</code> or <code>fseek</code> the file back to the beginning, before <code>fread</code> is done. As it stands, it won't read any data and so the memory allocated still contains garbage values.</p>\n\n<p>And always check the return value of I/O functions like <code>fread</code>, which would have told you no data was read.</p>\n\n<p>Another problem is the buffer passed to <code>fread</code> which should be the pointer obtained by <code>malloc</code>, not the address where the pointer is stored. So </p>\n\n<pre><code>fread(&amp;x,sizeof(STUDENT),nrfete,fe);\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>if(fread(x, sizeof(STUDENT), nrfete, fe) != nrfete) {\n    // report error\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "edited": false, "score": 0, "creation_date": 1548283931, "post_id": 54336876, "comment_id": 95491020, "body": "Thank you, i modified the code, but the error is not gone"}, {"owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "reply_to_user": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "edited": false, "score": 0, "creation_date": 1548284111, "post_id": 54336876, "comment_id": 95491084, "body": "what modifications have you made?"}], "tags": [], "owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "is_accepted": false, "score": 1, "last_activity_date": 1548283986, "last_edit_date": 1548283986, "creation_date": 1548283720, "answer_id": 54336876, "question_id": 54336521, "link": "https://stackoverflow.com/questions/54336521/core-dumped-after-using-fseek-in-c/54336876#54336876", "title": "Core dumped after using fseek in c", "body": "<p>as I can see, you seek to the end of file</p>\n\n<pre><code>fseek(fe,0L,SEEK_END);\n</code></pre>\n\n<p>then you allocate data for STUDENT struct</p>\n\n<pre><code>x=(STUDENT*)malloc(nrfete*sizeof(STUDENT));\n</code></pre>\n\n<p>then you try to read it:</p>\n\n<pre><code>fread(&amp;x,sizeof(STUDENT),nrfete,fe);\n</code></pre>\n\n<p>but I think you get an error here. Because you are already at the end of file. So you don't fill data, and you have garbage in the x variable. In this case x[0].prenume is not a null terminated string. So you get an error when try to print it.</p>\n\n<p>to check if I am correct or not you can fill allocated memory with zeros after allocation, in this case you will not get an error (but the struct still will be empty):</p>\n\n<p>memset(x, '\\0', nrfete*sizeof(STUDENT));</p>\n\n<p>you can also print the result of fread()</p>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "is_accepted": false, "score": 0, "last_activity_date": 1548326422, "creation_date": 1548326422, "answer_id": 54344683, "question_id": 54336521, "link": "https://stackoverflow.com/questions/54336521/core-dumped-after-using-fseek-in-c/54344683#54344683", "title": "Core dumped after using fseek in c", "body": "<pre><code>STUDENT* x;\n...\nx=(STUDENT*)malloc(nrfete*sizeof(STUDENT));\n..\nfread(&amp;x,sizeof(STUDENT),nrfete,fe);\n</code></pre>\n\n<p><code>x</code> points to a memory block,  &amp;x is a pointer of x which is only 4 bytes.  </p>\n\n<p>Change <code>fread</code> to the following should fix the problem:</p>\n\n<pre><code>fread(x, sizeof(STUDENT),nrfete,fe);\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548326422, "creation_date": 1548281689, "last_edit_date": 1548311583, "question_id": 54336521, "link": "https://stackoverflow.com/questions/54336521/core-dumped-after-using-fseek-in-c", "title": "Core dumped after using fseek in c", "body": "<p>I wrote a code and I'm having some trouble with a specific part of a function. I get \"core dumped\" if I add the <code>fseek</code> function, but if I remove it, everything works fine.</p>\n\n<p>This is the part of my code with the problem: </p>\n\n<pre><code>    FILE* fe;\n\n    fe=fopen(\"fete\",\"rb\");\n    if (fe==NULL)\n    {\n        printf(\"eroare\");\n        exit(1);\n    }\n\n    STUDENT* x;\n    int i;\n    long int nrfete=0;\n    **fseek(fe,0L,SEEK_END);**\n    printf(\"%ld\",ftell(fe));\n    nrfete = ftell(fe)/sizeof(STUDENT);\n    x=(STUDENT*)malloc(nrfete*sizeof(STUDENT));\n\n    fread(&amp;x,sizeof(STUDENT),nrfete,fe);\n    printf(\"%s\",x[0].prenume);//pt verificare\n    fclose(fe);\n</code></pre>\n\n<hr>\n\n<p>From <a href=\"https://stackoverflow.com/questions/54336521/core-dumped-after-using-fseek-in-c#comment95490780_54336521\">comment</a></p>\n\n<pre><code>typedef struct { \n  char prenume[20];\n  char sex;\n  float nota;\n} STUDENT;\n</code></pre>\n"}, {"tags": ["c", "linux", "network-programming"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1548281578, "post_id": 54336485, "comment_id": 95490237, "body": "Look at <a href=\"http://man7.org/linux/man-pages/man3/getifaddrs.3.html\" rel=\"nofollow noreferrer\"><code>getifaddrs()</code></a> for enumerating local interfaces and getting their names, capabilities, and local addresses."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1548281651, "post_id": 54336485, "comment_id": 95490259, "body": "Looks like dreadful C++ code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1548281727, "post_id": 54336485, "comment_id": 95490289, "body": "@Remy <code>name = new char[IF_NAMESIZE];</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1548281742, "post_id": 54336485, "comment_id": 95490294, "body": "@RemyLebeau <code>safe::strcpy</code> is C++. The rest could be either, although it&#39;s not idiomatic C++."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1548281790, "post_id": 54336485, "comment_id": 95490307, "body": "&quot;sysfs&quot; is great ... but it might <i>NOT</i> the easiest way to identify &quot;ethernet devices&quot;.  Alternative suggestion (one of many): <code>lspci | grep -i eth</code> (e.g. from a <a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\">popen()</a> call)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548281794, "post_id": 54336485, "comment_id": 95490308, "body": "<code>sizeof(name)</code> is wrong. That&#39;s the size of the pointer, not <code>IF_NAMESIZE</code>"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1548281975, "post_id": 54336485, "comment_id": 95490373, "body": "It&#39;s a 20+ year codebase moving to C++ from C, so most adheres to C."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 1, "creation_date": 1548282413, "post_id": 54336485, "comment_id": 95490537, "body": "Changed the example to adhere to C and recategorized."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1548284036, "post_id": 54336485, "comment_id": 95491059, "body": "virtual interfaces can also be type 1.  Check <code>speed</code> for a reasonable value (10-40000)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1548284312, "post_id": 54336485, "comment_id": 95491155, "body": "My current machine has 3 ethernet adapters, which one do you want to use? One on the laptop itself, one on the docking station, and another one is a USB adapter."}], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548284743, "creation_date": 1548281482, "last_edit_date": 1548284743, "question_id": 54336485, "link": "https://stackoverflow.com/questions/54336485/how-can-i-identify-ethernet-adapters-on-gnu-linux-using-c", "title": "How can I identify Ethernet adapters on GNU/Linux using C", "body": "<p>I am updating some software which uses a hardcoded network iface (<code>eth0</code>) for various purposes. What I'd like to do is detect which ethernet interface would be first. I understand the changes with systemd and how <code>eth0</code> may very well not exist on these systems with the new naming scheme. So what I am trying to do is run through all the interfaces and detect the ethernet adapters. I would like to avoid <code>lo</code>, <code>tun</code> and other virtual devices. So far so good with this code:</p>\n\n<pre><code>char* getMainEthernetIfaceName() {\n    char *name = NULL;\n    struct if_nameindex *ifacenames = if_nameindex(), *idx;\n\n    if (!ifacenames) return name;\n\n    for (idx = ifacenames; !(!idx-&gt;if_index &amp;&amp; !idx-&gt;if_name); ++idx) {\n        char path[256];\n        sprintf(path,\"/sys/class/net/%s/type\", idx-&gt;if_name);\n        FILE *fp = fopen(path, \"re\");\n        if (fp) {\n            int type;\n            if (fscanf(fp, \"%d\", &amp;type) == 1) {\n                if (type == ARPHRD_ETHER) {\n                    name = malloc(IF_NAMESIZE);\n                    strncpy(name, idx-&gt;if_name, IF_NAMESIZE-1);\n\n                    fclose(fp);\n                    break;\n                }\n            }\n            fclose(fp);\n        }\n    }\n\n    if_freenameindex(ifacenames);\n    return name;\n}\n</code></pre>\n\n<p>However, my test still detects <code>pan0</code> as valid since it's type is <code>ARPHRD_ETHER</code>.</p>\n\n<p>First part of the question, is it sensible to use <code>sysfs</code> to identify this as an ethernet device?</p>\n\n<p>Second part, if so, how can I rule out Bluetooth PAN and potentially other devices as being chosen when I only want ethernet adapters?</p>\n\n<p>Please note, this needs to work on both systemd and non-systemd systems, and I would rather avoid inferring the type from the iface name (no <code>strncmp(if_name, \"eth\", 3) == 0</code>, <code>strncmp(if_name, \"en\", 2) == 0</code>, and the sort for forwards compatibility and manually configured naming.)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1548280335, "post_id": 54336245, "comment_id": 95489747, "body": "Please fix your indenting"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548280336, "post_id": 54336245, "comment_id": 95489748, "body": "I don&#39;t understand why it is that complicated. You only need to scan the array and compare each element to the currently found minimum."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1548280546, "post_id": 54336245, "comment_id": 95489843, "body": "Why are you changing the array?  You&#39;re doing more work than expected."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 10480821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SQ53M.jpg?s=128&g=1", "display_name": "vrtex", "link": "https://stackoverflow.com/users/10480821/vrtex"}, "is_accepted": true, "score": 5, "last_activity_date": 1548281057, "last_edit_date": 1548281057, "creation_date": 1548280575, "answer_id": 54336306, "question_id": 54336245, "link": "https://stackoverflow.com/questions/54336245/smallest-element-in-an-array/54336306#54336306", "title": "Smallest element in an array", "body": "<p>You need to remember current minimum (it can start equal to array's first element), then just loop through the array. If the current element is less than current minimum change the value of current minimum.</p>\n\n<pre><code>...    \nint min = elements[0];\nint i;\nfor (i = 1; i &lt; size; ++i)\n    if (elements[i] &lt; min)\n        min = elements[i];\n...\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10958257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4bccf214c3da71c862550bc89a5c61?s=128&d=identicon&r=PG&f=1", "display_name": "coderx123", "link": "https://stackoverflow.com/users/10958257/coderx123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 54336306, "answer_count": 1, "score": 0, "last_activity_date": 1548281057, "creation_date": 1548280205, "question_id": 54336245, "link": "https://stackoverflow.com/questions/54336245/smallest-element-in-an-array", "title": "Smallest element in an array", "body": "<p>I have written a small program to find the smallest element in an array. I have to use a similar format even though there are much shorter ways to do this. I can't seem to find wha is wrong with the code. The tests are as follows:-</p>\n\n<p>Testing smallest:</p>\n\n<p>array:</p>\n\n<p>Your answer = 2147483647</p>\n\n<p>----pass----</p>\n\n<p>array: 0 -1 5</p>\n\n<p>Your answer = -1</p>\n\n<p>----pass----</p>\n\n<p>array: -1 0 3 -10 3 100</p>\n\n<p>Your answer = 100</p>\n\n<p>----fail----</p>\n\n<p>array: 0 0</p>\n\n<p>Your answer = 0</p>\n\n<p>----pass----</p>\n\n<p>array:</p>\n\n<p>Your answer = 2147483647</p>\n\n<p>----pass----</p>\n\n<pre><code>int smallest(int elements[], int size) {\nint i;\nint temp1 = 0;\nint temp2 = elements[0];\nif (size &lt;= 0)\n{\n  return INT_MAX;\n}\nelse\n{\nfor (i = 0; i&lt;size; i++)\n{\n  if (elements[i] &lt; temp1)\n  {\n    elements[i-1] = elements[i];\n    temp2 = elements[i];\n    elements[i] = temp1;\n    temp1 = temp2;\n  }\n  else\n    temp1 = elements[i];\n}\n\nreturn temp1;\n}\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548279022, "post_id": 54335934, "comment_id": 95489190, "body": "Try formatting this question again. Here: <a href=\"https://stackoverflow.com/posts/54335934/edit\">edit</a>."}, {"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 1, "creation_date": 1548279038, "post_id": 54335934, "comment_id": 95489202, "body": "how about you post the effort you made the question &amp; we will help you"}, {"owner": {"reputation": 1034, "user_id": 6280433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245a781c8e21350a17c5e0919cb0431f?s=128&d=identicon&r=PG&f=1", "display_name": "Arpit Svt", "link": "https://stackoverflow.com/users/6280433/arpit-svt"}, "edited": false, "score": 1, "creation_date": 1548279291, "post_id": 54335934, "comment_id": 95489320, "body": "If you are having trouble in formatting the code then refer this <a href=\"https://stackoverflow.com/help/formatting\">stackoverflow.com/help/formatting</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1548282162, "post_id": 54335934, "comment_id": 95490443, "body": "please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  We are not mind readers so cannot guess as to what you have written"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1548323859, "post_id": 54335934, "comment_id": 95503338, "body": "<code>I wrote code</code> - show it."}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 7927200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a94c975d5ce0fe1b5f06edf3dc043a?s=128&d=identicon&r=PG&f=1", "display_name": "Niloy Rashid", "link": "https://stackoverflow.com/users/7927200/niloy-rashid"}, "is_accepted": false, "score": 0, "last_activity_date": 1548323530, "creation_date": 1548323530, "answer_id": 54343725, "question_id": 54335934, "link": "https://stackoverflow.com/questions/54335934/two-arrays-gives-third-array-with-maximum-values/54343725#54343725", "title": "Two arrays gives third array with maximum values", "body": "<p>If you just want to <strong>PRINT</strong> the field 3, than you can do this like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n, i;\n    scanf(\"%d\", &amp;n);\n    int ara1[n], ara2[n];\n    for(i = 0; i &lt; n; i++){\n        scanf(\"%d\", &amp;ara1[i]);\n    }\n    for(i = 0; i &lt; n; i++){\n        scanf(\"%d\", &amp;ara2[i]);\n    }\n    printf(\"{\");\n    for(i = 0; i &lt; n; i++){\n        printf(\"max(%d.%d)\", ara1[i], ara2[i]);\n        if(i != n-1) printf(\",\");\n    }\n    printf(\"}\");\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10941863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LYVwxNrACHs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcblF-QwISQm0cuiOp_cIWIw7Zls2w/mo/photo.jpg?sz=128", "display_name": "Josip Brlas", "link": "https://stackoverflow.com/users/10941863/josip-brlas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1548323737, "creation_date": 1548278930, "last_edit_date": 1548323737, "question_id": 54335934, "link": "https://stackoverflow.com/questions/54335934/two-arrays-gives-third-array-with-maximum-values", "title": "Two arrays gives third array with maximum values", "body": "<p>I wrote code, but I don't know how to get maximum values after comparison between two arrays.</p>\n\n<p>The program defines 2 fields of equal numbers of the same length, whereby the user initially defines the length of the field \ud83d\udc4e. After entering the elements, another field is created that will place a higher number in the first or second field in the same position in each position. Print in a row: elements of the 1st field of element 2 of the field fields of the new field.</p>\n\n<p>Example: </p>\n\n<pre><code>If field1 = {2, 4, 32, 7} and field2 = {22, 1, 3, 2} then\nfield3 = {max (2.22), max (4.1), max 32.3), max (7.2)} = {22, 4, 32, 7}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1548278613, "last_edit_date": 1548278613, "creation_date": 1548277989, "answer_id": 54335730, "question_id": 54335434, "link": "https://stackoverflow.com/questions/54335434/unable-to-understand-linked-list-c/54335730#54335730", "title": "Unable to understand linked list (c)", "body": "<p><strong>x1</strong></p>\n\n<blockquote>\n  <p>struct trip *next;                       //X1</p>\n</blockquote>\n\n<p>Inside a \"trip\" data structure, it contains a pointer to a another trip data structure. </p>\n\n<p>You can use this to \"link\" elements for the linked list by having it point to another structure.</p>\n\n<p><strong>x2</strong></p>\n\n<blockquote>\n  <p>}TRIP;                                       //X2</p>\n</blockquote>\n\n<p>This will (I forget the appropriate word) alias the structure. TRIP = trip. </p>\n\n<p>This is to say </p>\n\n<pre><code>trip a; // OR\nTRIP a;\n</code></pre>\n\n<p>Would both be valid</p>\n\n<p><strong>x3</strong></p>\n\n<blockquote>\n  <p>TRIP *p_a, *p_p;                         //X3</p>\n</blockquote>\n\n<p>This is declaring two variables, p_a, p_p, of type <em>TRIP *</em> (or <em>trip *</em>, they're equivalent)</p>\n\n<p>This type is a pointer to a trip data structure.</p>\n\n<p><strong>x4</strong></p>\n\n<blockquote>\n  <p>p_a->next = NULL;                        //X4</p>\n</blockquote>\n\n<p>This is member selection in a pointer. That is to say, it now sets the value of the \"next\" element in the trip structure pointed to by p_a is equal to NULL. </p>\n\n<p>If it would be of help, it would be equivalent to</p>\n\n<pre><code>(*p_a).next = NULL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2209, "user_id": 88056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4dc48a2044368d6b349c942ef2c4be?s=128&d=identicon&r=PG", "display_name": "Powertieke", "link": "https://stackoverflow.com/users/88056/powertieke"}, "is_accepted": false, "score": 1, "last_activity_date": 1548278262, "creation_date": 1548278262, "answer_id": 54335782, "question_id": 54335434, "link": "https://stackoverflow.com/questions/54335434/unable-to-understand-linked-list-c/54335782#54335782", "title": "Unable to understand linked list (c)", "body": "<pre><code>typedef struct trip {                       \n    int id, year, something;\n    char name[100], destination[100];\n    struct trip *next;                   //Define a pointer to a trip struct\n                                         //called next. This will hold a\n                                         //pointer to the next element in\n                                         //the list.\n\n}TRIP;                                   //The name of the typedef statement\n                                         //After this you can define a trip \n                                         //without writing 'struct trip' but \n                                         //just 'TRIP'\n\nFILE *fr;\nTRIP *p_a, *p_p;                         //Define two pointers to trip structs\nfr =fopen(\"list.txt\",\"r\");\nint j=0;\np_p = (TRIP *) malloc(sizeof(TRIP));\np_a = p_p;\nwhile ((fscanf(fr,\"%d\",&amp;p_a-&gt;id)), p_a-&gt;id&gt;0 )\n{\n        fscanf(fr,\"%s\",&amp;p_a-&gt;name);\n        fscanf(fr,\"%s\",&amp;p_a-&gt;destination);\n        fscanf(fr,\"%d\",&amp;p_a-&gt;year);\n        fscanf(fr,\"%d\",&amp;p_a-&gt;something);\n        p_a-&gt;next = (TRIP *) malloc(sizeof(TRIP));\n        p_a = p_a-&gt;next;\n\n}\np_a-&gt;next = NULL;                        //After the last line has been added\n                                         //to the list, end the list by making\n                                         //the next pointer NULL\nfclose(fr);\nreturn p_p;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1548283273, "creation_date": 1548283273, "answer_id": 54336800, "question_id": 54335434, "link": "https://stackoverflow.com/questions/54335434/unable-to-understand-linked-list-c/54336800#54336800", "title": "Unable to understand linked list (c)", "body": "<p>x1: <code>next</code> is a pointer to another instance of <code>struct trip</code>.  A picture might help:</p>\n\n<pre><code>+-------+------+       +-------+------+       +-------+------+\n| stuff | next | ----&gt; | stuff | next | ----&gt; | stuff | next | ----|||\n+-------+------+       +-------+------+       +-------+------+\n</code></pre>\n\n<p>where <code>stuff</code> is all the other data you're storing in that node (<code>id</code>, <code>year</code>, <code>something</code>, <code>name</code>, <code>destination</code>).  The <code>next</code> member stores the address of another node.  </p>\n\n<p>C allows you to declare pointers to a <code>struct</code> type within that <code>struct</code> type's definition:</p>\n\n<pre><code>struct foo {\n  ...\n  struct foo *fooptr;\n  ...\n};\n</code></pre>\n\n<p>You don't need to know the size of the <code>struct</code> type in order to create a pointer to it, and pointers to all <code>struct</code> types have the same size and representation.  That is, a pointer to <code>struct foo</code> has the same size as a pointer to <code>struct bar</code>, even though <code>struct foo</code> and <code>struct bar</code> may have radically different definitions.  </p>\n\n<p>x2: The <code>typedef</code> facility allows you to create aliases for types - <code>TRIP</code> is an alias for the type name <code>struct trip</code>.  This is useful if you want to simplify a complex type or abstract away implementation details (the <code>FILE</code> typedef name in <code>stdio.h</code> is an example of the latter).  </p>\n\n<p>x3: This line declares <code>p_a</code> and <code>p_p</code> as pointers to <code>struct trip</code>.  </p>\n"}], "owner": {"reputation": 1031, "user_id": 9817924, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Juraj Jakubov", "link": "https://stackoverflow.com/users/9817924/juraj-jakubov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54335730, "answer_count": 3, "score": 0, "last_activity_date": 1548283273, "creation_date": 1548276701, "question_id": 54335434, "link": "https://stackoverflow.com/questions/54335434/unable-to-understand-linked-list-c", "title": "Unable to understand linked list (c)", "body": "<p>I cant understand how linked list work. </p>\n\n<p>Lets say i have some code</p>\n\n<pre><code>typedef struct trip {\n    int id, year, something;\n    char name[100], destination[100];\n    struct trip *next;                       //X1\n\n}TRIP;                                       //X2\n    FILE *fr;\n    TRIP *p_a, *p_p;                         //X3\n    fr =fopen(\"list.txt\",\"r\");\n    int j=0;\n    p_p = (TRIP *) malloc(sizeof(TRIP));\n    p_a = p_p;\n    while ((fscanf(fr,\"%d\",&amp;p_a-&gt;id)), p_a-&gt;id&gt;0 )\n    {\n            fscanf(fr,\"%s\",&amp;p_a-&gt;name);\n            fscanf(fr,\"%s\",&amp;p_a-&gt;destination);\n            fscanf(fr,\"%d\",&amp;p_a-&gt;year);\n            fscanf(fr,\"%d\",&amp;p_a-&gt;something);\n            p_a-&gt;next = (TRIP *) malloc(sizeof(TRIP));\n            p_a = p_a-&gt;next;\n\n    }\n    p_a-&gt;next = NULL;                        //X4\n    fclose(fr);\n    return p_p;\n}\n</code></pre>\n\n<p>I am not sure what some lines do. Those lines are commented with x1 x2 x3 x4.\nPlease can somebody explain it to me?</p>\n"}, {"tags": ["c", "multithreading", "unix", "pthreads", "pthread-join"], "answers": [{"comments": [{"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1549663992, "post_id": 54335664, "comment_id": 95998264, "body": "Having read the part of the book addressing  <i>Thread Cancellation(Chapter 32)</i>, I now grasp it better. Thanks."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 1, "last_activity_date": 1548277644, "creation_date": 1548277644, "answer_id": 54335664, "question_id": 54335311, "link": "https://stackoverflow.com/questions/54335311/what-is-the-problem-for-pthread-canceled-and-thread-s-start-function-return-valu/54335664#54335664", "title": "What is the problem for PTHREAD_CANCELED and thread\u2019s start function return value", "body": "<p>This is a typical definition of <code>PTHREAD_CANCELED</code> (quoted verbatim from <code>/usr/include/pthread.h</code> on the machine where I'm typing this, which runs Linux with GNU libc):</p>\n\n<pre><code>#define PTHREAD_CANCELED ((void *) -1)\n</code></pre>\n\n<p>So if you have code like this to check for cancellation:</p>\n\n<pre><code>void *thread_result;\nint rv = pthread_join(child, &amp;thread_result);\nif (rv)\n    error_exit(\"pthread_join failed\", rv);\nif (thread_result == PTHREAD_CANCELED)\n    error_exit(\"thread canceled\", 0);\n</code></pre>\n\n<p>you must not also have a thread procedure like this:</p>\n\n<pre><code>static void *appears_to_be_canceled(void *unused)\n{\n    return ((void *) -1);\n}\n</code></pre>\n\n<p>because <code>PTHREAD_CANCELED</code> and <code>((void *) -1)</code> are equal.  Note that the number  is not guaranteed to be &minus;1, it could differ from system to system, and there's no good way to find out what it is at compile time because <code>((void *)...)</code> isn't usable in an <code>#if</code> expression.</p>\n\n<p>There are two good ways to avoid this problem:</p>\n\n<ul>\n<li>Don't use thread cancellation, so you don't have to check for <code>PTHREAD_CANCELED</code> and don't have to care what its numeric value is.  This is a good idea for several other reasons, most importantly that cancellation makes it even harder to write robust multithreaded code than it already is.  </li>\n<li><p>Return only valid pointers from your thread procedures, not numbers.  A good idiom to follow is like this:</p>\n\n<pre><code>struct worker_data\n{\n   // put _everything_ your thread needs to access in here\n};\nstatic void *worker_proc (void *data_)\n{\n   struct worker_data *data = data_;\n   // do stuff with `data` here \n   return data_;\n}\n</code></pre>\n\n<p>Returning the <code>worker_data</code> object means the code that calls <code>pthread_join</code> doesn't have to track which <code>worker_data</code> object corresponds to which <code>pthread_t</code>.  And it also means the return value of a successfully completed thread is guaranteed not to be equal to <code>PTHREAD_CANCELED</code>, because <code>PTHREAD_CANCELED</code> is guaranteed not to compare equal to any valid pointer.</p></li>\n</ul>\n"}], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 54335664, "answer_count": 1, "score": 3, "last_activity_date": 1548277644, "creation_date": 1548276098, "question_id": 54335311, "link": "https://stackoverflow.com/questions/54335311/what-is-the-problem-for-pthread-canceled-and-thread-s-start-function-return-valu", "title": "What is the problem for PTHREAD_CANCELED and thread\u2019s start function return value", "body": "<p>I'm reading <a href=\"https://rads.stackoverflow.com/amzn/click/com/B004OEJMZM\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Kerrisk's book</a> and see that the following as a note,</p>\n\n<blockquote>\n  <p><strong>Caution is required when using a cast integer as the return value of a thread\u2019s start function.</strong> The reason for this is that\n  <code>PTHREAD_CANCELED</code>, the value returned when a thread is canceled (see\n  Chapter 32), is usually some implementation-defined integer value cast\n  to <code>void *</code>. If a thread\u2019s start function returns the same integer\n  value, then, to another thread that is doing a <code>pthread_join()</code>, it\n  will wrongly appear that the thread was canceled. In an application\n  that employs thread cancellation and chooses to return cast integer\n  values from a thread\u2019s start functions, we must ensure that a normally\n  terminating thread does not return an integer whose value matches\n  <code>PTHREAD_CANCELED</code> on that Pthreads implementation. <strong>A portable\n  application would need to ensure that normally terminating threads\n  don\u2019t return integer values that match <code>PTHREAD_CANCELED</code> on any of\n  the implementations on which the application is to run.</strong></p>\n</blockquote>\n\n<p>I don't understand importance of the note. Could you codify(show its simple code snippet) it simply to illustrate? What is the issue in th(ese)is case(s)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548275461, "post_id": 54335066, "comment_id": 95487739, "body": "That could be because <code>char foo [29] = &quot;1021+2551&quot;</code> does not contain the newlines that <code>scanf(&quot;%c&quot;, foo[i])</code> will. Please see <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">scanf() leaves the newline char in the buffer</a>. But I can&#39;t see why you want a loop inputting only one character. Have you tried using <code>fgets</code> to input a single line?"}], "answers": [{"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1548276421, "post_id": 54335200, "comment_id": 95488124, "body": "Note, that <code>scanf(&quot;%s&quot;,foo);</code> shouldn&#39;t be advised. It&#39;s better to use <code>scanf(&quot;%28s&quot;,foo);</code> to set the max character size. But remember - scanf will read up to a space. To handle spaces, one could use <code>fgets</code>."}, {"owner": {"reputation": 21, "user_id": 9749879, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brook", "link": "https://stackoverflow.com/users/9749879/brook"}, "edited": false, "score": 0, "creation_date": 1548277072, "post_id": 54335200, "comment_id": 95488368, "body": "thanks, it worked. Also what if I want to print left or right or op separately out side the for loop? Can I say    printf(&quot;%c&quot;, right); ?"}, {"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 0, "creation_date": 1548278669, "post_id": 54335200, "comment_id": 95489030, "body": "well given the structure you are using my opinion would  be to let it in the for loop otherwise you will have to be making copies this is why :  1- printf(&quot;%c&quot;,character) will print the one character you assign to it &amp; not the whole string of characters so you either copy it in a char array or leave it this way with a loop :)"}], "tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": true, "score": 2, "last_activity_date": 1548278533, "last_edit_date": 1548278533, "creation_date": 1548275589, "answer_id": 54335200, "question_id": 54335066, "link": "https://stackoverflow.com/questions/54335066/how-can-i-make-the-array-read-from-user/54335200#54335200", "title": "how can I make the array read from user?", "body": "<p>Something like this simple and quick :)</p>\n\n<pre><code>    int main(){\n\n    int i;\n    char foo[29];\n\n    printf(\"Enter the number and opperator\\n\");\n    fgets(foo, 29 , stdin);\n\n    int index;\n    int len = strlen(foo);\n\n    for (int i=0; i &lt; len; i++)\n    {\n    if(foo[i] == '+' || foo[i] == '-' || foo[i] == '*' || foo[i] == '/' || foo[i] == '%'){\n       char op = foo[i];\n       printf(\"%c\", op);\n       index = i;\n        }\n    } printf(\" \");\n    char left;\n    for(int j=0; j &lt; index; j++){\n       left = printf(\"%c\",foo[j]);\n    } printf(\" \");\n    char right;\n    for(int k=index + 1; k &lt; len; k++){\n       right = printf(\"%c\",foo[k]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9749879, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brook", "link": "https://stackoverflow.com/users/9749879/brook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 54335200, "answer_count": 1, "score": 0, "last_activity_date": 1548278533, "creation_date": 1548274966, "last_edit_date": 1548275085, "question_id": 54335066, "link": "https://stackoverflow.com/questions/54335066/how-can-i-make-the-array-read-from-user", "title": "how can I make the array read from user?", "body": "<p>All I want is a user input for the array foo and print op, left, and right from it.</p>\n\n<p>I tried adding the following code, but can't get the same result.</p>\n\n<p>Instead of writing <code>char foo [29] = \"1021+2551\";</code> I wrote:</p>\n\n<pre><code>int i;\n\nprintf(\"Enter the number and opperator\");\n\nfor(i=0; i&lt;1; i++)      // I used i &lt; 1 b/c I want to get only one line input\n\n{\n\nscanf(\"%c\", foo[i]);\n\n}\n</code></pre>\n\n<p><BR/></p>\n\n<pre><code>void main(){\n\n    int index;\n    char foo[29] = \"1021+2551\";\n    int len = strlen(foo);\n\n    for (int i=0; i &lt; len; i++)\n    {\n    if(foo[i] == '+' || foo[i] == '-' || foo[i] == '*' || foo[i] == '/' || foo[i] == '%'){\n       char op = foo[i];\n       printf(\"%c\", op);\n       index = i;\n        }\n    }\n    char left;\n    for(int j=0; j &lt; index; j++){\n       left = printf(\"%c\",foo[j]);\n    }\n    char right;\n    for(int k=index + 1; k &lt; len; k++){\n       right = printf(\"%c\",foo[k]);\n    }\n}\n</code></pre>\n\n<p>If I enter 100+200 in the user input the result should be </p>\n\n<p>+100200</p>\n"}, {"tags": ["c", "struct", "malloc"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1548275314, "post_id": 54335042, "comment_id": 95487680, "body": "You forgot to ask a question."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1548275843, "post_id": 54335042, "comment_id": 95487900, "body": "What do you mean by <i>isn&#39;t working</i>? What is it supposed to do and what actually happens?"}, {"owner": {"reputation": 102, "user_id": 4685974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BdpVkFClVTE/AAAAAAAAAAI/AAAAAAAABgk/3vDJC6gnJ54/photo.jpg?sz=128", "display_name": "Moschte", "link": "https://stackoverflow.com/users/4685974/moschte"}, "edited": false, "score": 1, "creation_date": 1548276081, "post_id": 54335042, "comment_id": 95488007, "body": "When I run the above code it prints 10 in the first line and &quot;Segmentation fault&quot;.in the second line"}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1548276612, "post_id": 54335042, "comment_id": 95488208, "body": "<code>sizeof(struct rle_element*)</code> is the size of a pointer (probably either 4 or 8 bytes depending on your hardware). You want <code>sizeof(struct rle_element)</code>."}, {"owner": {"reputation": 102, "user_id": 4685974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BdpVkFClVTE/AAAAAAAAAAI/AAAAAAAABgk/3vDJC6gnJ54/photo.jpg?sz=128", "display_name": "Moschte", "link": "https://stackoverflow.com/users/4685974/moschte"}, "edited": false, "score": 0, "creation_date": 1548277046, "post_id": 54335042, "comment_id": 95488359, "body": "I tried this but I get the same error message."}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 4685974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BdpVkFClVTE/AAAAAAAAAAI/AAAAAAAABgk/3vDJC6gnJ54/photo.jpg?sz=128", "display_name": "Moschte", "link": "https://stackoverflow.com/users/4685974/moschte"}, "edited": false, "score": 0, "creation_date": 1548278056, "post_id": 54335376, "comment_id": 95488766, "body": "I am trying to use rle as an array."}, {"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "reply_to_user": {"reputation": 102, "user_id": 4685974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BdpVkFClVTE/AAAAAAAAAAI/AAAAAAAABgk/3vDJC6gnJ54/photo.jpg?sz=128", "display_name": "Moschte", "link": "https://stackoverflow.com/users/4685974/moschte"}, "edited": false, "score": 0, "creation_date": 1548278924, "post_id": 54335376, "comment_id": 95489147, "body": "You shouldn&#39;t need an rle_pointer then. I updated a bit at the end to explain the next problem, afaik it&#39;s reading and writing to unallocated memory causing UB that  happens to work out."}], "tags": [], "owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1548278825, "last_edit_date": 1548278825, "creation_date": 1548276413, "answer_id": 54335376, "question_id": 54335042, "link": "https://stackoverflow.com/questions/54335042/dynamic-array-of-structs-in-c-malloc-realloc/54335376#54335376", "title": "Dynamic array of structs in c (malloc, realloc)", "body": "<p>While it's already mentioned that you're allocating the space of a pointer and not the structure itself, there's another, issue. </p>\n\n<pre><code>rle_pointer = &amp;rle+1;\n</code></pre>\n\n<p>Will <em>not</em> get you the address of a pointer to rle[1]. </p>\n\n<p>With the other change proposed, you'll still get a segfault, however if you also try</p>\n\n<pre><code>rle[1].length=20;\nprintf(\"%d\\n\", rle[1].length);\n</code></pre>\n\n<p>Instead of</p>\n\n<pre><code>(*rle_pointer)-&gt;length = 20;\nprintf(\"%d\\n\", (*rle_pointer)-&gt;length);\n</code></pre>\n\n<p>You'll have the code successfully work. This would indicate your realloc() has worked successfully. </p>\n\n<p>To explain a bit better, a double pointer is actually a pointer to a pointer. There is no pointer at &amp;rle+1. Your code is trying to dereference a pointer that doesn't exist. </p>\n\n<p>Instead of </p>\n\n<pre><code> rle_pointer = &amp;rle+1;\n</code></pre>\n\n<p>You could just say</p>\n\n<pre><code>rle += 1;\n</code></pre>\n\n<p>If you <em>insist</em> upon doing it this way. Otherwise, I'd suggest sticking to using rle as an array and avoiding the double pointer.</p>\n\n<p>For the update: it's writing and reading unallocated memory (causing UB) afaik.</p>\n\n<p>You can validate this by freeing rle and trying to do the same behaviour, on gcc 7.4.0 I can do the same.</p>\n"}, {"tags": [], "owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "is_accepted": true, "score": 1, "last_activity_date": 1548278980, "last_edit_date": 1548278980, "creation_date": 1548276692, "answer_id": 54335433, "question_id": 54335042, "link": "https://stackoverflow.com/questions/54335042/dynamic-array-of-structs-in-c-malloc-realloc/54335433#54335433", "title": "Dynamic array of structs in c (malloc, realloc)", "body": "<p>There are various problems with your code (pointed out in comments and other answers). One critical thing that you are missing is that you are not tracking the size of the allocated region. <code>sizeof()</code> is evaluated at compile-time (unless you are using C99 VLAs). So doing <code>sizeof(rle)</code> is not going to evaluate to the number of bytes that your array is using. You have to store that separately. Here is a working implementation that tracks the size with a <code>struct rle_parent</code> structure with comments included to help you understand:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct rle_element {\n    int length;\n    char character;\n};\n\nstruct rle_parent {\n    struct rle_element *arr;\n    size_t count;\n};\n\nstatic void get_rle(struct rle_parent *p, int length, char character) {\n    struct rle_element *e;\n\n    /* Allocate enough space for the current number of elements plus 1 */\n    e = realloc(p-&gt;arr, (p-&gt;count + 1) * sizeof(struct rle_element));\n    if (!e) {\n        /* TODO: (Re)allocation failed, we should handle this */\n        return;\n    }\n\n    /* Update the parent to point to the reallocated array */\n    p-&gt;arr = e;\n\n    /* Update our newly added element */\n    e = &amp;p-&gt;arr[p-&gt;count];\n    e-&gt;length = length;\n    e-&gt;character = character;\n\n    /* Bump the count so we know how many we have */\n    p-&gt;count++;\n}\n\nint main() {\n    struct rle_parent p;\n    size_t i;\n\n    /* Initialize */\n    p.arr = NULL;\n    p.count = 0;\n\n    get_rle(&amp;p, 10, 'a');\n    get_rle(&amp;p, 20, 'b');\n    get_rle(&amp;p, 30, 'c');\n\n    /* Print out our array */\n    for (i = 0; i &lt; p.count; i++) {\n        struct rle_element *e = &amp;p.arr[i];\n        printf(\"%d -- %c\\n\", e-&gt;length, e-&gt;character);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Alternatively, if you don't want to maintain a count, you could add another field to <code>struct rle_element</code> that indicates that it is the last element in the array. You would have to update that each time you add a new element (clearing it on the \"current\" last element and setting it on the \"new\" last element), but you could get rid of the <code>struct rle_parent</code> in that case.</p>\n\n<p>Also, passing <code>NULL</code> as the first argument to <code>realloc()</code>, makes it behave like a call to <code>malloc()</code>, so it works out cleanly here.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10958264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a40718a9d108eff6d84f52801e31e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Ali ZORGATI", "link": "https://stackoverflow.com/users/10958264/mohamed-ali-zorgati"}, "is_accepted": false, "score": 0, "last_activity_date": 1548284202, "creation_date": 1548284202, "answer_id": 54336971, "question_id": 54335042, "link": "https://stackoverflow.com/questions/54335042/dynamic-array-of-structs-in-c-malloc-realloc/54336971#54336971", "title": "Dynamic array of structs in c (malloc, realloc)", "body": "<p>malloc and realloc required the size of the space to reserve(allocate) in the memory, so if you want to make an array you must allocate the size of 1 element multiplied by the number of elements in the array, I suggest you make a variable to hold the size of the array.\nBTW \"Segmentation fault\" as far as I know, means you are using space that you did not allocate for.</p>\n"}], "owner": {"reputation": 102, "user_id": 4685974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BdpVkFClVTE/AAAAAAAAAAI/AAAAAAAABgk/3vDJC6gnJ54/photo.jpg?sz=128", "display_name": "Moschte", "link": "https://stackoverflow.com/users/4685974/moschte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 54335433, "answer_count": 3, "score": 1, "last_activity_date": 1548284202, "creation_date": 1548274869, "last_edit_date": 1548277930, "question_id": 54335042, "link": "https://stackoverflow.com/questions/54335042/dynamic-array-of-structs-in-c-malloc-realloc", "title": "Dynamic array of structs in c (malloc, realloc)", "body": "<p>I am trying to create a array of structure elements and reallocate if I need new elements. The array has to be a pointer because I want to return it from the function. </p>\n\n<p>I have the following code:</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #include &lt;stdlib.h&gt;\n\n  struct rle_element {\n    int length;\n    char character;\n  };\n\n  void get_rle() {\n    struct rle_element *rle = malloc(sizeof(struct rle_element*));\n    struct rle_element **rle_pointer = &amp;rle;\n\n    rle = realloc(rle, sizeof(rle) + sizeof(struct rle_element*));\n\n    (*rle_pointer)-&gt;length = 10;\n    printf(\"%d\\n\", (*rle_pointer)-&gt;length);\n\n    rle_pointer = &amp;rle+1;\n\n    (*rle_pointer)-&gt;length = 20;\n    printf(\"%d\\n\", (*rle_pointer)-&gt;length);\n\n  }\n\n  int main() {\n      get_rle();\n\n      return EXIT_SUCCESS;\n  }\n</code></pre>\n\n<p>But this code isn't really working. \nI think the reallocate is not right.</p>\n\n<p>Now I have the following code which works fine. \nBut I can also use rle[2] or rle[3] without allocate. I think my programm only allocate space for two items.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n\n  struct rle_element {\n    int length;\n    char character;\n  };\n\n  void get_rle() {\n    struct rle_element *rle = malloc(sizeof(struct rle_element));\n    struct rle_element **rle_pointer = &amp;rle;\n\n    rle = realloc(rle, sizeof(rle) + sizeof(struct rle_element));\n\n    rle[0].length = 10;\n    printf(\"%d\\n\", rle[0].length);\n\n    rle[1].length = 20;\n    printf(\"%d\\n\", rle[1].length);\n  }\n\n  int main() {\n      get_rle();\n\n      return EXIT_SUCCESS;\n  }\n</code></pre>\n"}, {"tags": ["c", "openssl", "diffie-hellman", "libcrypto"], "answers": [{"tags": [], "owner": {"reputation": 12010, "user_id": 23235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6281820b28d03f98e85bb3d901ae3f39?s=128&d=identicon&r=PG", "display_name": "Shane Powell", "link": "https://stackoverflow.com/users/23235/shane-powell"}, "is_accepted": true, "score": 1, "last_activity_date": 1548289874, "creation_date": 1548289874, "answer_id": 54337740, "question_id": 54334633, "link": "https://stackoverflow.com/questions/54334633/libcrypt-how-to-get-my-generated-public-key-using-low-level-apis/54337740#54337740", "title": "LibCrypt how to get my generated public key using low level apis", "body": "<p>If you read the documentation for <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/DH_generate_key.html\" rel=\"nofollow noreferrer\">DH_generate_key</a>, it does (as the comment says).</p>\n\n<blockquote>\n  <p>DH_generate_key() expects dh to contain the shared parameters dh->p and dh->g. It generates a random private DH value unless dh->priv_key is already set, and computes the corresponding public value dh->pub_key, which can then be published.</p>\n</blockquote>\n\n<p>So the public \"key\" part of the Diffie Hellman exchange is in \"<strong>privkey->pub_key</strong>\" and you publish that along with your shared parameters \"<strong>privkey->p</strong>\" and \"<strong>privkey->g</strong>\" to the other side.</p>\n"}], "owner": {"reputation": 6282, "user_id": 4706711, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-dlNFOguGD_A/AAAAAAAAAAI/AAAAAAAABwA/BMlWtrTgZtY/photo.jpg?sz=128", "display_name": "Dimitrios Desyllas", "link": "https://stackoverflow.com/users/4706711/dimitrios-desyllas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 54337740, "answer_count": 1, "score": 1, "last_activity_date": 1548420180, "creation_date": 1548272945, "last_edit_date": 1548420180, "question_id": 54334633, "link": "https://stackoverflow.com/questions/54334633/libcrypt-how-to-get-my-generated-public-key-using-low-level-apis", "title": "LibCrypt how to get my generated public key using low level apis", "body": "<p>In my project in order to implement a Group key agreement I decided to use the low-level apis of OpenSSl for Diffie Hellman (code snippet taken from <a href=\"https://wiki.openssl.org/index.php/Diffie_Hellman\" rel=\"nofollow noreferrer\">documentation</a> )</p>\n\n<pre><code>#include &lt;libssl/dh.h&gt;\n// Some code here\n\nDH *privkey;\nint codes;\nint secret_size;\n\n/* Generate the parameters to be used */\nif(NULL == (privkey = DH_new())) handleErrors();\nif(1 != DH_generate_parameters_ex(privkey, 2048, DH_GENERATOR_2, NULL)) handleErrors();\n\nif(1 != DH_check(privkey, &amp;codes)) handleErrors();\nif(codes != 0)\n{\n    /* Problems have been found with the generated parameters */\n    /* Handle these here - we'll just abort for this example */\n    printf(\"DH_check failed\\n\");\n    abort();\n}\n\n/* Generate the public and private key pair */\nif(1 != DH_generate_key(privkey)) handleErrors();\n\n/* Send the public key to the peer.\n * How this occurs will be specific to your situation (see main text below)\n */\n\n// Another code here\n\n//Cleanups\nOPENSSL_free(secret);\nBN_free(pubkey);\nDH_free(privkey);\n</code></pre>\n\n<p>But from a generated <code>DH</code> struct how I can generate a public key?</p>\n"}, {"tags": ["c", "string", "printf", "stdin"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1548272364, "post_id": 54334484, "comment_id": 95486485, "body": "you don&#39;t set the final <code>\\0</code> of the string"}, {"owner": {"reputation": 117, "user_id": 8044351, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bf0185dc1479853cd8eb53007532533a?s=128&d=identicon&r=PG&f=1", "display_name": "aDabOfRanch", "link": "https://stackoverflow.com/users/8044351/adabofranch"}, "edited": false, "score": 0, "creation_date": 1548272488, "post_id": 54334484, "comment_id": 95486544, "body": "What do you mean?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1548272542, "post_id": 54334484, "comment_id": 95486570, "body": "@&#212;rel it is copied."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1548272619, "post_id": 54334484, "comment_id": 95486603, "body": "<code>char allPermissions[10];</code> has enough space for <b>9 characters plus null-terminator</b>. Since you write 10 characters into it in <code>scanf</code> you invoke <i>undefined behavior</i>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548272707, "post_id": 54334484, "comment_id": 95486647, "body": "@WeatherVane I count 10 characters in <code>drwx------</code>- 4 letters and 6 dashes"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548272735, "post_id": 54334484, "comment_id": 95486663, "body": "Yes sorry deleted, I thought you meant when they are copied."}], "answers": [{"comments": [{"owner": {"reputation": 5842, "user_id": 205997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7836af1d27fbdd942001c9c6c09ebe1a?s=128&d=identicon&r=PG", "display_name": "Arash Milani", "link": "https://stackoverflow.com/users/205997/arash-milani"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548273698, "post_id": 54334717, "comment_id": 95487055, "body": "@GovindParmar Can you clarify what is missing? The OP issue was bcz of not taking the <code>null terminator</code> into account in char string."}], "tags": [], "owner": {"reputation": 5842, "user_id": 205997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7836af1d27fbdd942001c9c6c09ebe1a?s=128&d=identicon&r=PG", "display_name": "Arash Milani", "link": "https://stackoverflow.com/users/205997/arash-milani"}, "is_accepted": false, "score": 1, "last_activity_date": 1548273793, "last_edit_date": 1548273793, "creation_date": 1548273287, "answer_id": 54334717, "question_id": 54334484, "link": "https://stackoverflow.com/questions/54334484/how-to-retrieve-a-portion-of-a-string/54334717#54334717", "title": "How to retrieve a portion of a string?", "body": "<p>You should add <code>null-terminator</code> character to the end of your character strings. So although <code>drwx------</code> is 10 characters to you, it will take 11 chars (including the <code>\\0</code>) to store it in the memory.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(){\n  char allPermissions[11];\n  char permissions[10];\n\n  scanf(\"%s\", allPermissions);\n\n  for(int i = 1; i &lt;= 10; i++) {\n    char temp = allPermissions[i];\n    //printf(\"%c\", temp);\n    permissions[i-1] = temp;\n  }\n  printf(\"%s\\n\", permissions);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1548274893, "last_edit_date": 1548274893, "creation_date": 1548273407, "answer_id": 54334754, "question_id": 54334484, "link": "https://stackoverflow.com/questions/54334484/how-to-retrieve-a-portion-of-a-string/54334754#54334754", "title": "How to retrieve a portion of a string?", "body": "<p>Looping through the entire string and copying each element one by one into the destination string works, but it is inefficient and unidiomatic C. You can accomplish this in O(1); after reading the string from <code>stdin</code>, just point one after the start of the string:</p>\n\n<pre><code>printf(\"%s\\n\", allPermissions + 1);\n</code></pre>\n\n<p>This will also work for operations such as copying the string to a new buffer:</p>\n\n<pre><code>strcpy(permissions, allPermissions + 1);\n</code></pre>\n\n<p>Do note that an array size of 10 is insufficient for reading a string like 'drwx------' since you also need to take the null terminator into account. In general, I wouldn't use <code>scanf</code>-family functions to read from <code>stdin</code>; <code>fgets</code> is a better choice.</p>\n"}], "owner": {"reputation": 117, "user_id": 8044351, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bf0185dc1479853cd8eb53007532533a?s=128&d=identicon&r=PG&f=1", "display_name": "aDabOfRanch", "link": "https://stackoverflow.com/users/8044351/adabofranch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 54334754, "answer_count": 2, "score": 1, "last_activity_date": 1548274893, "creation_date": 1548272264, "last_edit_date": 1548272441, "question_id": 54334484, "link": "https://stackoverflow.com/questions/54334484/how-to-retrieve-a-portion-of-a-string", "title": "How to retrieve a portion of a string?", "body": "<p>I'm reading in a string of file permissions from stdin and I want to create another string that will hold all characters expect the first from the string the user inputs in stdin.</p>\n\n<pre><code>int main(){\n  char allPermissions[10];\n  char permissions[9];\n\n  scanf(\"%s\", allPermissions);\n\n\n  for(int i = 1; i &lt;= 9; i++) {\n    char temp = allPermissions[i];\n    //printf(\"%c\", temp);\n    permissions[i-1] = temp;\n  }\n  printf(\"%s\\n\", permissions);\n\n  return 0;\n}\n</code></pre>\n\n<p>If the user inputs: drwx------</p>\n\n<p>Then I expect the program to output: rwx------</p>\n\n<p>But what I get is: rwx------drwx-------</p>\n\n<p>And I'm not entirely sure why.</p>\n"}, {"tags": ["c", "interrupt", "avr", "i2c"], "answers": [{"comments": [{"owner": {"reputation": 256, "user_id": 7467472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1316751078383568/picture?type=large", "display_name": "Sim Son", "link": "https://stackoverflow.com/users/7467472/sim-son"}, "edited": false, "score": 0, "creation_date": 1548275479, "post_id": 54334948, "comment_id": 95487745, "body": "Thanks a lot for this! In case of the master transmitting while interrupts are disabled, will the I2C-ISR be triggered after ATOMIC_BLOCK has finished? If the TW interrupt flag (TWINT) is set and the TW interrupts get enabled, the ISR gets executed right away. Is it the same when TWINT is set and global interrupts become enabled?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 256, "user_id": 7467472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1316751078383568/picture?type=large", "display_name": "Sim Son", "link": "https://stackoverflow.com/users/7467472/sim-son"}, "edited": false, "score": 0, "creation_date": 1548277256, "post_id": 54334948, "comment_id": 95488439, "body": "That is the idea. only atomic block is protected"}, {"owner": {"reputation": 256, "user_id": 7467472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1316751078383568/picture?type=large", "display_name": "Sim Son", "link": "https://stackoverflow.com/users/7467472/sim-son"}, "edited": false, "score": 0, "creation_date": 1548280500, "post_id": 54334948, "comment_id": 95489823, "body": "allright! last question: when using <code>ATOMIC_BLOCK</code>, will this actually disable interrupts during runtime (like <code>cli();</code> does) or is the block &quot;made atomic&quot; in any different way during compile time. if I access my variable in a for-loop, would I &quot;<code>ATOMIC_BLOCK</code>&quot; each single iteration or would I wrap the whole loop?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 256, "user_id": 7467472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1316751078383568/picture?type=large", "display_name": "Sim Son", "link": "https://stackoverflow.com/users/7467472/sim-son"}, "edited": false, "score": 0, "creation_date": 1548282226, "post_id": 54334948, "comment_id": 95490462, "body": "try to keep as the time when ISRs are disabled as short as possible"}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "reply_to_user": {"reputation": 256, "user_id": 7467472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1316751078383568/picture?type=large", "display_name": "Sim Son", "link": "https://stackoverflow.com/users/7467472/sim-son"}, "edited": false, "score": 0, "creation_date": 1548318852, "post_id": 54334948, "comment_id": 95500525, "body": "@SimSon: &quot;If the global interrupt state were uncertain before entering the ATOMIC_BLOCK, it should be executed with the parameter ATOMIC_RESTORESTATE rather than ATOMIC_FORCEON. ATOMIC_BLOCK operates via manipulation of the Global Interrupt Status (I) bit of the SREG register.&quot; <a href=\"https://www-user.tu-chemnitz.de/~heha/viewchm.php/hs/avr-libc.chm/util_atomic.html\" rel=\"nofollow noreferrer\">Source</a>"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1548274349, "creation_date": 1548274349, "answer_id": 54334948, "question_id": 54334200, "link": "https://stackoverflow.com/questions/54334200/avr-main-isr-interference/54334948#54334948", "title": "AVR: main()/ISR interference", "body": "<p>In general you need to create a critical section in the main process (main program). You need to disable the interrupts when your main program accesses the shared variable. </p>\n\n<p>You have a ready made standard solution:</p>\n\n<pre><code> #include &lt;util/atomic.h&gt;\n\n /* ....*/ \n\n ATOMIC_BLOCK(ATOMIC_FORCEON)\n {\n     /* potentially non atomic opeartions */\n }\n</code></pre>\n"}], "owner": {"reputation": 256, "user_id": 7467472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1316751078383568/picture?type=large", "display_name": "Sim Son", "link": "https://stackoverflow.com/users/7467472/sim-son"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 54334948, "answer_count": 1, "score": 0, "last_activity_date": 1548274349, "creation_date": 1548270985, "last_edit_date": 1548271325, "question_id": 54334200, "link": "https://stackoverflow.com/questions/54334200/avr-main-isr-interference", "title": "AVR: main()/ISR interference", "body": "<p>I'm using I2C on an ATmega168 (slave) in C (compiling with avr-gcc), but this might be a general question about interrupts.</p>\n\n<p>In my C program I have a global variable of type <code>uint8_t i2c_buffer[32]</code> storing some sensor and configuration data. This array is also accessed by the I2C-ISR whenever the bus master reads or writes to the slave.\nAs communication is driven in hardware the transmission into ram (my I2C buffer variable) is triggered by an interrupt.</p>\n\n<p>I understand that accessing the variable from both ISR and main routine carelessly might lead to corrupted data due to the race condition between the ISR and my main routine, but I'm not sure, how to handle this properly.\nI was told to disable interrupts while main is accessing the variable in question.\nThis will protect the variable from getting corrupted, but won't this lead to loss of data on the other hand?\nWhat if the master tries to send data while interrupts are disabled?</p>\n\n<p>I guess, as the I2C interface is still enabled, an incoming byte will at least be written to the TWDR. Is that correct?\nIf yes: is there a way to trigger the ISR right after the main-routine has finished accessing the variable?</p>\n\n<p>And: does this problem persist if one instance (ISR or main) is only reading and not writing to specific parts of the buffer?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 3, "creation_date": 1548270114, "post_id": 54333950, "comment_id": 95485558, "body": "Can you write a program to print the characters &quot;A&quot; to &quot;Z&quot; by using a loop using the numbers 0 to 25 and the fact that the ASCII value of &quot;A&quot; is 65?"}, {"owner": {"reputation": 23, "user_id": 8615823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1901479486781987/picture?type=large", "display_name": "Wojciech Wincenty Jarosi\u0144ski", "link": "https://stackoverflow.com/users/8615823/wojciech-wincenty-jarosi%c5%84ski"}, "reply_to_user": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 0, "creation_date": 1548270348, "post_id": 54333950, "comment_id": 95485650, "body": "I can&#39;t sadly, and I have no idea where to even start"}, {"owner": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1548271035, "post_id": 54333950, "comment_id": 95485931, "body": "<a href=\"https://gist.github.com/ardrabczyk/631379a8e25d59c01f7922dfdd26be92\" rel=\"nofollow noreferrer\">gist.github.com/ardrabczyk/631379a8e25d59c01f7922dfdd26be92</a>"}, {"owner": {"reputation": 23, "user_id": 8615823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1901479486781987/picture?type=large", "display_name": "Wojciech Wincenty Jarosi\u0144ski", "link": "https://stackoverflow.com/users/8615823/wojciech-wincenty-jarosi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1548271495, "post_id": 54333950, "comment_id": 95486140, "body": "Thank you, this will help!"}], "answers": [{"tags": [], "owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "is_accepted": false, "score": 0, "last_activity_date": 1548270761, "last_edit_date": 1548270761, "creation_date": 1548270299, "answer_id": 54334054, "question_id": 54333950, "link": "https://stackoverflow.com/questions/54333950/how-to-do-different-kinds-of-triangles-in-c/54334054#54334054", "title": "How to do different kinds of triangles in C?", "body": "<p>I would just first define strings of characters you want to display</p>\n\n<pre><code>const char* LETTERS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nconst char* HEX = \"0123456789ABCDEF\";\n</code></pre>\n\n<p>And then you can easily access the char you want by indexing these strings, modulo their lengths, like this:</p>\n\n<pre><code>char c;\nconst int LETTERS_LEN = strlen(LETTERS);\nfor (int i = 0; i &lt; N; i++) {\n    c = LETTERS[i % LETTERS_LEN];\n    // place c in your triangle\n}\n</code></pre>\n\n<p>The <code>i % LETTERS_LEN</code> causes <code>i</code> to take values from <code>0</code> to <code>LETTERS_LEN - 1</code> periodically, which is exactly what you need (if I understand your example correctly).</p>\n\n<p>Alternative solution would be to use the fact that 'A' ASCII code is 65, and you could just do <code>c = 65 + i % 26</code> but the solution I wrote is more versatile - you can define any set of characters you want.</p>\n\n<p>Note: I haven't used pure C for a while now, I might have gotten the initialization part wrong. If you get compilation errors, just use <code>#define LETTERS \"ABC...\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8615823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1901479486781987/picture?type=large", "display_name": "Wojciech Wincenty Jarosi\u0144ski", "link": "https://stackoverflow.com/users/8615823/wojciech-wincenty-jarosi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1548270735, "post_id": 54334079, "comment_id": 95485822, "body": "Thank you very much, that&#39;s a good start. I still have to find a way to link the array characters with the actual traingle though, but your help is life saving"}], "tags": [], "owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "is_accepted": false, "score": 0, "last_activity_date": 1548270410, "creation_date": 1548270410, "answer_id": 54334079, "question_id": 54333950, "link": "https://stackoverflow.com/questions/54333950/how-to-do-different-kinds-of-triangles-in-c/54334079#54334079", "title": "How to do different kinds of triangles in C?", "body": "<p>I won't write the complete program for you since it's a homework assignment. It sounds like you got the drawing of the triangles down and you just need help on how to use different characters. What I would probably do is create an array of characters:</p>\n\n<pre><code>char symbols[] = \"0123456789ABCDEF\";\n</code></pre>\n\n<p>Then create an index pointer, starting at 0:</p>\n\n<pre><code>int index = 0;\n</code></pre>\n\n<p>Then, as you draw your symbol using <code>symbols[index]</code>, you just increment <code>index</code> and check to make sure it's not over the length. If it is, you reset <code>index</code> back to <code>0</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 8615823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1901479486781987/picture?type=large", "display_name": "Wojciech Wincenty Jarosi\u0144ski", "link": "https://stackoverflow.com/users/8615823/wojciech-wincenty-jarosi%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1548270761, "creation_date": 1548269843, "question_id": 54333950, "link": "https://stackoverflow.com/questions/54333950/how-to-do-different-kinds-of-triangles-in-c", "title": "How to do different kinds of triangles in C?", "body": "<p>Question is pretty basic, but I need to learn it to pass my first programming exam in college, so any help is above appreciated. \nSo far I can only do normal, pyramid schemed triangle consisted of stars, with height dependent on input, which suggests how limited my knowledge is. </p>\n\n<p>What I need to learn is how to do triangles that consist of different characters than star using for loops, for example:</p>\n\n<p>for n=7</p>\n\n<p><code>ABCDEFG\n  HIJKLM\n   NOPQR\n    STUV\n     WXY\n      ZA\n       B</code></p>\n\n<p>or using hexadecimals</p>\n\n<p><code>0\n 12\n 345\n 6789\n ABCDE\n F01234\n 56789AB</code></p>\n\n<p>Any additional help would be highly appreciated, but code alone would be just as much fine, since I need to figure out how to put repeating alphabet or other symbols in place of stars.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "utf-8"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548270454, "post_id": 54333893, "comment_id": 95485702, "body": "iveqy, See <a href=\"https://www.compart.com/en/unicode/U+00F6\" rel=\"nofollow noreferrer\">Unicode Character \u201c&#246;\u201d</a> and look for <i>UTF-8 Encoding:</i>.  Is that enough?"}, {"owner": {"reputation": 10853, "user_id": 2389707, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d002fe1a582bbd7e4dece1ba833a1f90?s=128&d=identicon&r=PG", "display_name": "iveqy", "link": "https://stackoverflow.com/users/2389707/iveqy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548270633, "post_id": 54333893, "comment_id": 95485789, "body": "@chux no, that just tells me that &#246; has the utf-8 hex representation of C3B6, but I already know this. My question is how I can convert the string =C3=B6 to binary (I believe).  So that the string str will print &#246; with printf(&#39;%s\\n&#39;, str)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548271335, "post_id": 54333893, "comment_id": 95486065, "body": "C does have this footnote about <code>fprintf()</code> and <code>s</code>:&quot;No special provisions are made for multibyte characters.&quot; so a multiplatform solution will not necessarily work on all platforms.  What output do you get with <code>printf(&quot;%s\\n&quot;, &quot;\\xC3\\xB6&quot;)</code>? With  <code>printf(&quot;%s\\n&quot;, &quot;&#246;&quot;)</code>?"}, {"owner": {"reputation": 10853, "user_id": 2389707, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d002fe1a582bbd7e4dece1ba833a1f90?s=128&d=identicon&r=PG", "display_name": "iveqy", "link": "https://stackoverflow.com/users/2389707/iveqy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548271793, "post_id": 54333893, "comment_id": 95486259, "body": "both prints &#246;, So then my only step (and the one I really struggle with) is how to go from const char * str = &quot;=c3=b6&quot;; to char * str = &quot;\\c3\\b6&quot;     1 #include &quot;stdio.h&quot;   2   3 int main()   4 {   5         char * str = &quot;=c3=b6&quot;;   6         printf(&quot;%s\\n&quot;, &quot;&#246;&quot;);   7         printf(&quot;%s\\n&quot;, &quot;\\xC3\\xB6&quot;);   8         printf(&quot;%s\\n&quot;, str);   9         for (int i = 0; i &lt; 6; i++) {  10                 if (str[i] == &#39;=&#39;) {  11                         str[i] = &#39;\\\\&#39;;  12                 }  13         }  14         printf(&quot;%s\\n&quot;, str);  15         return 0;  16 }  seg fault"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548272038, "post_id": 54333893, "comment_id": 95486356, "body": "It is UB to attempt to modify a string literal like <code>&quot;\\c3\\b6&quot;</code>.  That is the seg fault source."}, {"owner": {"reputation": 2923, "user_id": 3434508, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/gFffm.png?s=128&g=1", "display_name": "Stavr00", "link": "https://stackoverflow.com/users/3434508/stavr00"}, "edited": false, "score": 0, "creation_date": 1548275299, "post_id": 54333893, "comment_id": 95487675, "body": "Take a look at Chilkat MIME Library.  The form you are using is <code>quoted-printable</code> of a <code>UTF-8</code> entity. There should be no need to write custom code for that."}], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548272369, "post_id": 54334309, "comment_id": 95486489, "body": "@chux Thanks. It also had other issues as well. I&#39;ve coded [and tested] the full program"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1548272314, "last_edit_date": 1548272314, "creation_date": 1548271477, "answer_id": 54334309, "question_id": 54333893, "link": "https://stackoverflow.com/questions/54333893/convert-c3-b6-to-%c3%b6-assuming-utf-8/54334309#54334309", "title": "Convert =C3=B6 to &#246; assuming UTF-8", "body": "<p>Here is something that should get you started.</p>\n\n<p>I've tested it and it seems to work for the input you gave. It has <em>some</em> error checking, but not a lot.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// hexnib -- convert ascii hex digit to binary value\nint\nhexnib(int chr)\n{\n\n    chr &amp;= 0xFF;\n\n    do {\n        if ((chr &gt;= '0') &amp;&amp; (chr &lt;= '9')) {\n            chr -= '0';\n            break;\n        }\n\n        if ((chr &gt;= 'A') &amp;&amp; (chr &lt;= 'F')) {\n            chr -= 'A';\n            chr += 10;\n            break;\n        }\n\n        // error ...\n    } while (0);\n\n    return chr;\n}\n\nvoid\nconvert(char *utf8,const char *quo)\n{\n    int chr;\n    int acc;\n\n    while (1) {\n        chr = *quo++;\n        if (chr == 0)\n            break;\n\n        // handle ordinary char (i.e. _not_ start of =XY)\n        if (chr != '=') {\n            *utf8++ = chr;\n            continue;\n        }\n\n        // hex value accumulator\n        acc = 0;\n\n        // get X value\n        chr = *quo++;\n        if (chr == 0)\n            break;\n\n        // convert to binary\n        chr = hexnib(chr);\n        acc &lt;&lt;= 8;\n        acc |= chr;\n\n        // get Y value\n        chr = *quo++;\n        if (chr == 0)\n            break;\n\n        // convert to binary\n        chr = hexnib(chr);\n        acc &lt;&lt;= 8;\n        acc |= chr;\n\n        // store utf sequence\n        *utf8++ = acc;\n    }\n\n    // store end of string\n    *utf8 = 0;\n}\n\nint\nmain(int argc,char **argv)\n{\n    char *fname;\n    FILE *fi;\n    char ibuf[1000];\n    char obuf[1000];\n\n    --argc;\n    ++argv;\n\n    fname = *argv;\n    if (fname != NULL)\n        fi = fopen(fname,\"r\");\n    else\n        fi = stdin;\n\n    while (1) {\n        char *cp = fgets(ibuf,sizeof(ibuf),fi);\n        if (cp == NULL)\n            break;\n\n        convert(obuf,ibuf);\n\n        fputs(obuf,stdout);\n    }\n\n    if (fname != NULL)\n        fclose(fi);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1548274276, "last_edit_date": 1548274276, "creation_date": 1548272481, "answer_id": 54334538, "question_id": 54333893, "link": "https://stackoverflow.com/questions/54333893/convert-c3-b6-to-%c3%b6-assuming-utf-8/54334538#54334538", "title": "Convert =C3=B6 to &#246; assuming UTF-8", "body": "<p>Something to get OP started.</p>\n\n<p>Parse the string <code>\"=C3=B6\"</code>, looking for 2 bytes as hexadecimal characters.  Then form a string to print (and hope <code>printf</code> will interpret as UTF-8) - Compliant compliers with <code>printf(\"%s\", ...)</code> have \"No special provisions are made for multibyte characters\". <a href=\"https://dictionary.cambridge.org/us/dictionary/english/ymmv\" rel=\"nofollow noreferrer\">YMMV</a>.</p>\n\n<pre><code>#include \"stdio.h\"\nint main() {\n  char * str = \"=C3=B6\";\n  printf(\"%s\\n\", str);\n  printf(\"1 %s\\n\", \"\u00f6\");\n  printf(\"2 %s\\n\", \"\\xC3\\xB6\");\n  unsigned char a[3] = { 0 };\n  if (sscanf(\"=c3=b6\", \"=%hhx=%hhx\", &amp;a[0], &amp;a[1]) == 2) {\n    printf(\"3 %s\\n\", a);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>=C3=B6\n1 \u00f6\n2 \u00f6\n3 \u00f6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1548283074, "creation_date": 1548283074, "answer_id": 54336771, "question_id": 54333893, "link": "https://stackoverflow.com/questions/54333893/convert-c3-b6-to-%c3%b6-assuming-utf-8/54336771#54336771", "title": "Convert =C3=B6 to &#246; assuming UTF-8", "body": "<p>Decoding <a href=\"https://en.wikipedia.org/wiki/Quoted-printable\" rel=\"nofollow noreferrer\">quoted-printable</a> strings involves three things:</p>\n\n<ul>\n<li><p>Ignore soft newlines. These are <code>=</code> followed by a newline.</p></li>\n<li><p>Convert <code>=</code> followed by two hexadecimal digits, to the character whose code matches that hexadecimal value</p></li>\n</ul>\n\n<p>There are three main approaches to decoding data:</p>\n\n<ol>\n<li><p>Input filter.  Instead of e.g. <code>fgetc()</code>, you use a function that reads and decodes the quoted-printable input.</p></li>\n<li><p>Conversion to a new buffer.  See the <code>convert()</code> function in <a href=\"https://stackoverflow.com/a/54334309/1475978\">Craig Esteys answer</a> to this same question.</p></li>\n<li><p>Conversion in place.  This is possible, because every valid quoted-printable -encoded string is at least as long as the same decoded.</p></li>\n</ol>\n\n<hr>\n\n<p>Input filter.  For simplicity, let's look at one char at a time. (Do note that many UTF-8 characters are longer than one char.)</p>\n\n<p>First, we do need a helper function to convert hexadecimal digit characters to their respective arithmetic values:</p>\n\n<pre><code>static inline int hex_digit(const int c)\n{\n    switch (c) {\n    case '0':           return  0;\n    case '1':           return  1;\n    case '2':           return  2;\n    case '3':           return  3;\n    case '4':           return  4;\n    case '5':           return  5;\n    case '6':           return  6;\n    case '7':           return  7;\n    case '8':           return  8;\n    case '9':           return  9;\n    case 'A': case 'a': return 10;\n    case 'B': case 'b': return 11;\n    case 'C': case 'c': return 12;\n    case 'D': case 'd': return 13;\n    case 'E': case 'e': return 14;\n    case 'F': case 'f': return 15;\n    default:            return -1;\n    }\n}\n</code></pre>\n\n<p>In most cases, you could also write that as</p>\n\n<pre><code>static inline int hex_digit(const int c)\n{\n    if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n        return c - '0';\n    else\n    if (c &gt;= 'A' &amp;&amp; c &lt;= 'F')\n        return c - 'A' + 10;\n    else\n    if (c &gt;= 'a' &amp;&amp; c &lt;= 'F')\n        return c - 'a' + 10;\n    else\n        return -1;\n}\n</code></pre>\n\n<p>or even as</p>\n\n<pre><code>static signed char  hex_digit_value[UCHAR_MAX + 1];\n\nstatic inline int hex_digit(const int c)\n{\n    return hex_digit_value[(unsigned char)c];\n}\n\nstatic inline void init_hex_digit_values(void)\n{\n    int  i;\n    for (i = 0; i &lt;= UCHAR_MAX; i++)\n        hex_digit_value[i] = -1;\n\n    hex_digit_value['0'] = 0;\n    hex_digit_value['1'] = 1;\n    hex_digit_value['2'] = 2;\n    hex_digit_value['3'] = 3;\n    hex_digit_value['4'] = 4;\n    hex_digit_value['5'] = 5;\n    hex_digit_value['6'] = 6;\n    hex_digit_value['7'] = 7;\n    hex_digit_value['8'] = 8;\n    hex_digit_value['9'] = 9;\n    hex_digit_value['A'] = hex_digit_value['a'] = 10;\n    hex_digit_value['B'] = hex_digit_value['b'] = 11;\n    hex_digit_value['C'] = hex_digit_value['c'] = 12;\n    hex_digit_value['D'] = hex_digit_value['d'] = 13;\n    hex_digit_value['E'] = hex_digit_value['e'] = 14;\n    hex_digit_value['F'] = hex_digit_value['f'] = 15;\n}\n</code></pre>\n\n<p>where <code>init_hex_digit_values()</code> is called once at the beginning of the program.  I prefer the first form as it is the most portable, but the second form is what you normally see.</p>\n\n<p>The third form, using the <code>hex_digit_value[]</code> array, is an example of premature optimization.  It may be slightly faster than the others in some cases (but the differences are definitely too small to matter in practice), but it can be useful if one were to support widely different single-byte character sets (EBDIC and ASCII, for example) using the same code.</p>\n\n<p>First, reading a decoded character from a stream (file or handle) that contains quoted-printable data:</p>\n\n<pre><code>int get_quoted_printable_char(FILE *from)\n{\n    int  c, c2, hi, lo;\n\n    /* Paranoid check. */\n    if (!from || ferror(from) || feof(from))\n        return EOF;\n\n    while (1) {\n\n        c = fgetc(from);\n        if (c != '=')\n            return c;\n\n        /* Soft newline? */\n        c = fgetc(from);\n        if (c == '\\n')\n            continue;\n\n        /* '=' at the end of input? */\n        if (c == EOF)\n            return EOF;\n\n        hi = hex_digit(c);\n        if (hi &lt; 0) {\n            /* Invalid input; emit '=' instead. */\n            ungetc(c, from);\n            return '=';\n        }\n\n        c2 = fgetc(from);\n        if (c2 == EOF) {\n            /* Invalid input; emit '=' &lt;c&gt; instead. */\n            ungetc(c, from);\n            return '=';\n        }\n\n        low = hex_digit(c2);\n        if (lo &lt; 0) {\n            /* Invalid input; try to emit '=' &lt;c&gt; &lt;c2&gt; instead. */\n            ungetc(c2, from);\n            ungetc(c, from);\n            return '=';\n        }\n\n        return low + 16 * high;\n    }\n}\n</code></pre>\n\n<p>The loop is there in case the input has more than one consecutive soft-newline. It should not really happen, but if it did, we do want to ignore them all.</p>\n\n<p>If you wanted to copy quoted-printable stream to a file, you'd only need the above and for example</p>\n\n<pre><code>int save(FILE *source, const char *filename)\n{\n    FILE  *target;\n    int    c;\n\n    if (!source || ferror(source))\n        return -1;  /* Invalid source handle */\n\n    if (!filename || !*filename)\n        return -2;  /* Invalid filename */\n\n    target = fopen(filename, \"w\");\n    if (!target)\n        return -3;  /* Cannot open filename for writing */\n\n    while (1) {\n        c = get_quoted_printable_char(source);\n        if (c == EOF)\n            break;\n\n        if (fputc(c, target) == EOF)\n            break;\n    }\n\n    if (!feof(source) || ferror(source)) {\n        fclose(target);\n        remove(filename);\n        return -4; /* Error reading source. */\n    }\n    if (fclose(source)) {\n        fclose(target);\n        remove(filename);\n        return -4; /* Error closing source (delayed read error). */\n    }\n\n    if (ferror(target) || fflush(target)) {\n        fclose(target);\n        remove(filename);\n        return -5; /* Write error */\n    }\n    if (fclose(target)) {\n        remove(filename);\n        return -5; /* Error closing target; delayed write error */\n    }\n\n    /* Success. */\n    return 0;\n}\n</code></pre>\n\n<p>which is particularly careful against read and write errors.  It is not blazingly fast, because it relies on the C library to buffer the input, but it is not horribly slow, either.  The fact that it does not use any explicit buffers (relying on the standard C library to decide how to buffer the source and the file being written) makes it quite acceptable overall, actually.</p>\n\n<p>Conversion to a new buffer, or in place, is rather similar:</p>\n\n<pre><code>size_t  decode_quoted_printable(char *dst, const char *src)\n{\n    const char *const origin = dst;\n\n    /* Neither pointer may be NULL. src == dst is okay, however. */\n    if (!dst || !src) {\n        errno = EINVAL;\n        return 0;\n    }\n\n    /* Copy loop. */\n    while (*src)\n        if (*src == '=') {\n            if (src[1] == '\\0') {\n                /* '=' at the end of string. Skipped. */\n                break;\n            } else\n            if (src[1] == '\\n') {\n                /* Soft newline. Skip both =\\n and =\\n\\r newlines. */\n                if (src[2] == '\\r')\n                    src += 3;\n                else\n                    src += 2;\n            } else\n            if (src[1] == '\\r') {\n                /* Soft newline. Skip both =\\r and =\\r\\n newlines. */\n                if (src[2] == '\\n')\n                    src += 3;\n                else\n                    src += 2;\n            } else {\n                const int  hi = hex_digit((unsigned char)(src[1]));\n                const int  lo = hex_digit((unsigned char)(src[2]));\n                if (hi &gt;= 0 &amp;&amp; lo &gt;= 0) {\n                    *(dst++) = lo + 16*hi;\n                    src += 3;\n                } else {\n                    /* Error in input format. We are permissive,\n                       and reproduce the erroneous `=XY` as-is. */\n                    *(dst++) = *(src++);\n                }\n            }\n        } else\n        if (*src == '\\n') {\n            if (src[1] == '\\r')\n                src += 2;\n            else\n                src += 1;\n            *(dst++) = '\\n';\n        } else\n        if (*src == '\\r') {\n            if (src[1] == '\\n')\n                src += 2;\n            else\n                src += 1;\n            *(dst++) = '\\n';\n        } else\n           *(dst++) = *(src++);\n\n    /* Terminate result to make it a string. */\n    *dst = '\\0';\n\n    /* Just in case the source was an empty string, we clear\n       errno to zero.  This also means we always set errno,\n       which is a bit rare, but makes the use of this function\n       easy: errno is nonzero iff there was an error. */\n    errno = 0;\n    return (size_t)(dst - origin);\n}\n</code></pre>\n\n<p>Note that because string literals cannot be modified, you cannot do <code>char *data = \"foo\"; decode_quoted_printable(foo, foo);</code>.</p>\n\n<p>You can do <code>char data[] = \"foo\"; decode_quoted_printable(foo, foo);</code>, however, because that declares an array of chars that just happens to be initialized to the string <code>\"foo\"</code>.                            </p>\n\n<p>Note that the above function also does automatic universal newline conversion.  That is, it supports all four newline conventions, <code>\\r\\n</code>, <code>\\n\\r</code>, <code>\\r</code>, and <code>\\n</code>, and converts them all to the standard C <code>\\n</code> newlines.</p>\n\n<p>The destination buffer must be at least as long as the source buffer, and you can use the same destination buffer as the source, as long as it is mutable (not a literal string, nor pointing to a literal string).</p>\n\n<p>The difference to the get-one-decoded-character from a stream approach is that this latter one requires the entire content to be in an in-memory buffer.  Whether that is a plus or a minus, depends on the context.</p>\n"}], "owner": {"reputation": 10853, "user_id": 2389707, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d002fe1a582bbd7e4dece1ba833a1f90?s=128&d=identicon&r=PG", "display_name": "iveqy", "link": "https://stackoverflow.com/users/2389707/iveqy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 0, "accepted_answer_id": 54334538, "answer_count": 3, "score": 0, "last_activity_date": 1548283074, "creation_date": 1548269677, "last_edit_date": 1548269931, "question_id": 54333893, "link": "https://stackoverflow.com/questions/54333893/convert-c3-b6-to-%c3%b6-assuming-utf-8", "title": "Convert =C3=B6 to &#246; assuming UTF-8", "body": "<p>So I am trying to read an email, it is encoded in quoted printable and thus contains for example:</p>\n\n<pre><code>=C3=B6\n</code></pre>\n\n<p>That should be converted into</p>\n\n<pre><code>\u00f6\n</code></pre>\n\n<p>So I get that c3b6 is the hex representation of the <code>utf-8</code> value <code>\u00f6</code>, but I fail to actually understand how to convert a <code>char * str = '=C3=B6'</code> into <code>char * str '\u00f6'</code>.</p>\n\n<p>I'm using linux but will port the code to windows so I want a multiplatform solution for this.</p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["c", "pointers", "memory-management", "malloc"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 2, "creation_date": 1548267882, "post_id": 54333382, "comment_id": 95484528, "body": "What are <code>wordList</code>, <code>MAX_STRING_SIZE</code>, and <code>determineUniqueWords</code>? Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your post."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548268009, "post_id": 54333382, "comment_id": 95484580, "body": "@GovindParmar you are correct, sorry about that. I added those and some more stuff"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 3, "creation_date": 1548268061, "post_id": 54333382, "comment_id": 95484612, "body": "With <code>uniqueWords[i] = wordList[i];</code> you are replacing the values in <code>uniqueWords</code> you got from: <code>uniqueWords[i] = malloc_or_end(MAX_STRING_SIZE * sizeof(char));</code> So, trying to free these values is wrong [and the old values disappear--a memory leak]. <code>wordList</code> is not defined anywhere. We need to see more."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1548268108, "post_id": 54333382, "comment_id": 95484637, "body": "@CraigEstey i added the complete program, sorry about that. Should i be doing <code>*wordCounts[i] = new_value</code> ?"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1548268181, "post_id": 54333382, "comment_id": 95484669, "body": "You overwrite the pointer stored in <code>uniqueWords</code> with those from <code>wordList</code> so some of <code>wordList</code> are double freed and some of <code>wordList</code> are not freed."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1548268281, "post_id": 54333382, "comment_id": 95484714, "body": "@t.niese oh i see now, i still get confused when it comes to assigning new values to the allocated memory. Should i be doing something like this : <code>*uniqueWords[i] = wordList[i];</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 1, "creation_date": 1548269104, "post_id": 54333553, "comment_id": 95485084, "body": "i would have never realized my mistake on that. Thank you very much now it makes sense. So i should always use <code>strcpy</code> to assign new values to my allocated memory when it comes to strings?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1548270534, "post_id": 54333553, "comment_id": 95485741, "body": "@SteliosPapamichail Yes, otherwise you&#39;re losing your pointer to the memory and can no longer <code>free</code> it"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1548268319, "creation_date": 1548268319, "answer_id": 54333553, "question_id": 54333382, "link": "https://stackoverflow.com/questions/54333382/double-free-or-corruption-when-using-char/54333553#54333553", "title": "double free or corruption when using char**", "body": "<p>You are overwriting the value of a pointer to heap memory on line 185:</p>\n\n<pre><code>uniqueWords[i] = wordList[i];\n</code></pre>\n\n<p>This means that when you <code>free</code> it later, you are actually freeing the allocated rows in <code>wordList</code>. Now you have two problems:</p>\n\n<ol>\n<li>When you free the <code>wordList</code> rows on lines 244-246, it will be a double-free</li>\n<li>You are losing your reference to the <code>uniqueWords</code> rows.</li>\n</ol>\n\n<p>Use <code>strcpy</code> to assign to a dynamically-allocated string rather than the <code>=</code> operation.</p>\n"}], "owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54333553, "answer_count": 1, "score": 1, "last_activity_date": 1548268319, "creation_date": 1548267554, "last_edit_date": 1548268076, "question_id": 54333382, "link": "https://stackoverflow.com/questions/54333382/double-free-or-corruption-when-using-char", "title": "double free or corruption when using char**", "body": "<p>I'm allocating memory for my <code>int *occurrences</code> <code>int *wordCounts</code> and <code>char **uniqueWords</code> pointers and then at the end of the function that allocates the memory, i free them. However, when i compile the program i get an <code>double free or corruption (!prev) aborting</code> error. Is it caused by <code>malloc</code>,<code>free</code> or could it be due to how i initialize them inside the <code>for loop</code> ?</p>\n\n<p>PS: I'm talking about the <code>sortedCount()</code> method, located towards the end</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define MAX_STRING_SIZE 512 /* each line in the file can have up to 512 chars */\n\nvoid populateWordsArray(int); \nvoid reverse(int);\nvoid first(int);\nvoid middle(int);\nvoid last(int);\nint count(int, char*, int);\nvoid sortedCount(int);\nvoid determineUniqueWords(int *,char **, int);\nvoid *malloc_or_end(size_t);\n\nvoid* malloc_or_end(size_t sz) {\n  void *pointer;\n  pointer = malloc(sz);\n  if(pointer == NULL) {\n    printf(\"Out of memory, terminating.\\n\");\n    exit(-1);\n  }\n  return pointer;\n}\n\n/* turn into local */\nFILE *file; \nchar **wordList; \n\nvoid determineUniqueWords(int *occurrences, char **word, int N) {\n    int i = 0;\n    int j = 0;\n    for(i = 0; i &lt; N; i++) {\n\n        if(occurrences[i] &lt; 1) {\n            continue;\n        }\n\n        for(j = i + 1; j &lt; N; j++) {\n            if(occurrences[j] == 1 &amp;&amp; (strcmp(word[i],word[j])) == 0) {\n                occurrences[i]++;\n                occurrences[j] = 0;\n            }\n        }\n    }\n}\n\n/**\n * Function populateWordsArray: reads N words from\n * the given file and populates the wordList array with them.\n * Has one argument: int N - the number of words to read. \n * */\nvoid populateWordsArray(int N) {\n    int i = 0;\n\n    while(i &lt; N &amp;&amp; (fscanf(file,\"%s\",wordList[i]) == 1)) { /* fscanf returns the number of successfully read items. If it's not 1, the read failed. Same as checking if fscanf reads the eof char. */\n        i++;\n    }\n}\n\n/**\n * Function reverse: prints the words of the\n * text file in reverse order.\n * */\nvoid reverse(int N) {\n    int i = 0;\n    for(i = N-1; i &gt;= 0; i--) {\n        if(i == 0) {\n            printf(\"%s \\n\",wordList[i]);\n        } else if(strcmp(wordList[i],\"\") == 0) { /* improve this in main-&gt; memory allocation */\n            continue;\n        }else {\n            printf(\"%s \",wordList[i]);\n        }\n    }\n    return;\n}\n\n/**\n * Function first: Prints the first char of each\n * word in the file.\n * */\nvoid first(int N) {\n    char firstChar;\n    int i = 0;\n\n    for(i = 0; i &lt; N; i++) {\n        firstChar = *wordList[i];\n        printf(\"%c\",firstChar);\n    }\n    printf(\"\\n\");\n    return;\n}\n\n/**\n * Function middle: Prints the middle char of each word\n * from the given file.\n * */\nvoid middle(int N) {\n    int middleIndex = 0;\n    int i = 0;\n    char midChar;\n\n    for(i = 0; i &lt; N; i++) {\n        if((strlen(wordList[i]) % 2) == 0) { /* artios */\n            middleIndex = ((strlen(wordList[i]) / 2) - 1);\n            midChar = wordList[i][middleIndex];\n        }\n        else { /* peritos */\n            middleIndex = (int) ceil((strlen(wordList[i]) / 2));\n            midChar = wordList[i][middleIndex];\n        }\n        printf(\"%c\",midChar);\n    }\n    printf(\"\\n\");\n    return;\n}\n\n/**\n * Function last: Prints the last char of each\n * word from the given file.\n * */\nvoid last(int N) {\n    int i = 0;\n    char lastChar;\n    int lastPos;\n\n    for(i = 0; i &lt; N; i++) {\n        lastPos = strlen(wordList[i]) - 1;\n        lastChar = wordList[i][lastPos];\n        printf(\"%c\",lastChar);\n    }\n    printf(\"\\n\");\n    return;\n}\n\n/**\n * Function count: Prints the number of times\n * that the selected word is found inside the N first words\n * of the file.\n * */\nint count(int N, char *word, int callID) {\n    int i = 0;\n    int count = 0;\n    for(i = 0; i &lt; N; i++) {\n        if(strcmp(word,wordList[i]) == 0) {\n            count++;\n        }\n    }\n    if(callID == 0) { /* if callID == 0 (main called count and we want the output) */\n        printf(\"%d\",count);\n        printf(\"\\n\");\n    }\n    return count;\n}\n\nvoid sortedCount(int N) {\n    int i,j = 0;\n    int *occurrences;\n    int *wordCounts;\n    char **uniqueWords;\n\n    /* mem allocation */\n    uniqueWords = malloc_or_end(N * sizeof(char*)); /* worst case: every word is unique */\n    wordCounts = malloc_or_end(N * sizeof(int));\n    occurrences = malloc_or_end(N * sizeof(int));\n\n    /* initialize rootWord and occurrences for the \"each word is unique and occurs only once\" scenario */\n    for(i = 0; i &lt; N; i++) {\n        uniqueWords[i] = malloc_or_end(MAX_STRING_SIZE * sizeof(char));\n        occurrences[i] = 1;\n    }\n\n    determineUniqueWords(occurrences,wordList,N);\n\n    /* populate the wordCounts &amp; uniqueWords \"arrays\" with the appropriate data in order to sort them successfully */\n    for(i = 0; i &lt; N; i++) {\n        if(occurrences[i] &gt; 0) {\n            wordCounts[i] = count(N,wordList[i],1);\n            uniqueWords[i] = wordList[i];\n        }\n    }\n\n    for(i = 0; i &lt; N; i++) {\n        free(uniqueWords[i]);\n    }\n    free(uniqueWords);\n    free(occurrences);\n    free(wordCounts);\n    return;\n}\n\nint main(int argc,char *argv[]) { /* argv[1] = op argv[2] = name argv[3] = &lt;word&gt; */\n    int N = -1;\n    int i = 0;\n    int spaceNum,nlNum = -1;\n\n\n    file = fopen(argv[2],\"r\");\n\n    if(file == (FILE *) NULL) { /* check if the file opened successfully */\n        fprintf(stderr,\"Cannot open file\\n\");\n    }\n\n    fscanf(file,\"%d\",&amp;N); /* get the N number */\n\n    wordList = malloc_or_end(N * sizeof(char *)); /* allocate memory for pointers */\n\n    for(i = 0; i &lt; N; i++) {\n        wordList[i] = malloc_or_end(MAX_STRING_SIZE * sizeof(char)); /* allocate memory for strings */\n    }\n\n    populateWordsArray(N);\n\n    if(strcmp(argv[1],\"-reverse\") == 0) {\n        reverse(N);\n    } else if(strcmp(argv[1],\"-first\") == 0) {\n        first(N);\n    } else if(strcmp(argv[1],\"-middle\") == 0) {\n        middle(N);\n    } else if(strcmp(argv[1],\"-last\") == 0) {\n        last(N);\n    } else if((strcmp(argv[1],\"-count\") == 0) &amp;&amp; argv[3] != NULL) {\n        i = count(N,argv[3],0);\n    } else if((strcmp(argv[1],\"-sorted\") == 0) &amp;&amp; (strcmp(argv[3],\"-count\") == 0)) {\n        sortedCount(N);\n    } else {\n        /* i only wish i could print something here */\n    }\n\n\n    /* End of program operations */\n    for(i = 0; i &lt; N; i++) {\n        free(wordList[i]);\n    }\n    free(wordList);\n    fclose(file);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c", "bluetooth", "stm32", "spi"], "comments": [{"owner": {"reputation": 78, "user_id": 5787535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e52135326d02527ae2d15ccaf1a5f75?s=128&d=identicon&r=PG&f=1", "display_name": "markos14", "link": "https://stackoverflow.com/users/5787535/markos14"}, "edited": false, "score": 0, "creation_date": 1548350588, "post_id": 54333279, "comment_id": 95519758, "body": "In addition, looking at the time stamps of the inputStream, there are tiny time delays between the arrival of the different bits of the packet. (in the region of 0.03 seconds. So although my STM is sending the full packet out in a single command, Android is receiving the different bits of the packet with very small time delays."}], "owner": {"reputation": 78, "user_id": 5787535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e52135326d02527ae2d15ccaf1a5f75?s=128&d=identicon&r=PG&f=1", "display_name": "markos14", "link": "https://stackoverflow.com/users/5787535/markos14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548274020, "creation_date": 1548267223, "last_edit_date": 1548274020, "question_id": 54333279, "link": "https://stackoverflow.com/questions/54333279/not-receiving-full-packet-when-sending-data-from-stm32-to-android-via-bluetooth", "title": "Not receiving full packet when sending data from STM32 to Android via Bluetooth", "body": "<p>I am sending accelerometer data from STM32 microcontroller to a HC-06 Bluetooth module, and I have developed an Android app to receive the data. </p>\n\n<p>On STM32, I make a 3 byte packet (uartBuffer) which has the following structure: [0] counter, [1] xdata, [2] ydata.\nI then send this data via UART to the HC-06 module. \n    <code>HAL_UART_Transmit(&amp;uartHand, uartBuffer, 3, 10);   // {uartHandle, data, dataSize, timeout}</code></p>\n\n<p>On Android, I have no problem connecting with the device, etc. However, when I receive the packet, it doesn't arrive together. It does always arrive eventually (in the correct order as well), but I might get a packet with only the 1st byte, then a packet with the last 2 bytes, and sometimes other combinations, as can be seen in the logcat picture below. The value which always increments by one (i.e. 20, 21, 22, etc..) is the 1st byte of the packet as sent by STM32. </p>\n\n<p><img src=\"https://i.ibb.co/Dz8yJmv/Android-Logcat.jpg\" alt=\"Android logcat\"></p>\n\n<p>I have tested this with different sampling rates between up to 100Hz, and with bigger packets (up to 5 bytes).. I never lose any bytes, but the packet arrangement is further divided at higher sampling rates and data sizes.</p>\n\n<p>Here is the ConnectedThread class which does the reading of data in the run method.</p>\n\n<pre><code>`\nprivate class ConnectedThread extends Thread {\n\n    private final BluetoothSocket mmBTSocket;\n    private final InputStream mInStream;\n    private final OutputStream mOutStream;\n\n    public ConnectedThread(BluetoothSocket mSocket) {\n        Log.d(TAG, \"ConnectedThread: Starting\");\n\n        mmBTSocket = mSocket;\n        InputStream mTempIn = null;\n        OutputStream mTempOut = null;\n\n        try {\n            mTempIn = mmBTSocket.getInputStream();\n            mTempOut = mmBTSocket.getOutputStream();\n        } catch (IOException e) {\n            Log.e(TAG, \"Failed to get I/O Stream\", e);\n        }\n        mInStream = mTempIn;\n        mOutStream = mTempOut;\n    }\n\n\n    public void run(){\n        byte[] mBuffer = new byte[3]\n        int mBytes = 0; // bytes returned from read\n        String mIncomingMessage = new String();\n        mIncomingStringBuilder = new StringBuilder();\n\n        while (true) {\n            try {\n                mIncomingStringBuilder.setLength(0);\n                mBytes = mInStream.read(mBuffer, 0, 3);\n                for (int i=0; i&lt;mBytes; i++) {\n                    mIncomingMessage = String.valueOf(mBuffer[i]);\n                    mIncomingStringBuilder.append(mIncomingMessage + \",\");\n                }\n                Log.d(TAG, \"run: ConnectedThread - InputStream: \" + mIncomingStringBuilder);\n                Intent incomingMessageIntent = new Intent(\"incomingMessage\");\n                incomingMessageIntent.putExtra(\"theMessage\", mIncomingStringBuilder.toString());\n                LocalBroadcastManager.getInstance(mContext).sendBroadcast(incomingMessageIntent);\n            } catch (IOException e) {\n                Log.e(TAG, \"error reading from inputStream, e);\n                break;\n            }\n        }\n}\n`\n</code></pre>\n\n<p>So my questions are:</p>\n\n<p>1) Why am I not receiving the full packets in the same structure as they are sent from the STM32? A commentor here mentions <a href=\"https://stackoverflow.com/questions/9231598/how-to-read-all-bytes-together-via-bluetooth\">here</a> that:</p>\n\n<blockquote>\n  <p>The bluetooth connection is stream based, not packet based. There is no guarantee or attempt to preserve packetization. So any number of writes can result in any number of reads, just the stream of bytes are guaranteed to be correct. If you need to detect packets, you need to provide your own packet structure to wrap your data.</p>\n</blockquote>\n\n<p>Is this true? Can Bluetooth really not preserve the full packet structure? Can anyone verify this? </p>\n\n<p>2) If this is true, then what is the best method to construct a package which is easy for Android to detect the start of and end? I assume I need a sync/start byte. How do I ensure this sync byte doesn't occur in my accelerometer data? Should I use 2 consecutive sync bytes? Is a checksum at the end of the packet enough to detect if the packet has errors?</p>\n\n<p>3) Finally, is it good practice to only use connectedThread on Android to receive the byte, convert to string and send to main activity so that its free to receive the next as quickly as possible? Then in main activity, I would reconstruct the packet? Or would this be too much work for main activity too?</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["c", "database", "pointers", "malloc", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "edited": false, "score": 1, "creation_date": 1548267500, "post_id": 54333160, "comment_id": 95484345, "body": "Can we start with what context you know about this? Without having some idea of how much of this you already get, it&#39;s hard to give a good answer."}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "edited": false, "score": 0, "creation_date": 1548268131, "post_id": 54333160, "comment_id": 95484647, "body": "I am able to read and write to an external file and changing the data within. Structs are very simple for me and I have no problem using them. However pointers are not my strong point. It takes me a while figure them out and I still don&#39;t understand them. Like I said, I have no idea about memory allocation."}], "owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548266695, "creation_date": 1548266695, "question_id": 54333160, "link": "https://stackoverflow.com/questions/54333160/how-to-get-started-with-creating-a-database-using-pointer-and-memory-allocation", "title": "How to get started with creating a database using pointer and memory allocation", "body": "<p>I have an assignment where I have to create a song database with 3 inputs (Song name, duration and copyright). Our professor instructed us to use pointers to make linked lists and to use malloc, calloc and free. I am not looking for exact answers but I'm looking for how to go about doing this. I have never touched memory allocation in my life so it's something new that I have to learn. </p>\n\n<p>How should I start with the program? Should I create a new .txt that the program should write to when adding a new entry?</p>\n\n<p>The program should let the user enter an unknown number of songs including their duration and copyright. Using structs in a singly linked list, allocate each node using malloc. The program should print the database in the reverse order (from being entered) at any time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1548265415, "post_id": 54332790, "comment_id": 95483340, "body": "Depending on where the source for the file comes from, you have possibly introduced a really big security hole into your server. Running foreign code without any kind of filtering or containment could let a hacker into your system."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548265475, "post_id": 54332790, "comment_id": 95483371, "body": "On a totally unrelated note, the size passed to the <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> function is <i>including</i> the terminator. So no need for that <code>-1</code>."}, {"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1548265702, "post_id": 54332790, "comment_id": 95483477, "body": "Looks like g++&#39;s output is written to stdout. This is why <code>popen()</code> catches it (stdout is the default) whereas you redirect stderr to your textfile when using <code>system()</code>"}, {"owner": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "reply_to_user": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1548265814, "post_id": 54332790, "comment_id": 95483534, "body": "@flowit i removed the &#39;&amp;&#39; (system(&quot;g++ file.cpp &gt; err.txt&quot;);) caracter so that i redirect the stdout insead of stderr and still same problem. It still prints in the console instead of redirecting it."}, {"owner": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548266198, "post_id": 54332790, "comment_id": 95483723, "body": "@Someprogrammerdude Thank you for the worries but i&#39;ve got that covered. :)) The problem is this file compile at the moment -_-"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "edited": false, "score": 0, "creation_date": 1548266491, "post_id": 54333088, "comment_id": 95483856, "body": "Does it work for c++ sources too? I mean the difference is gcc to g++ so it should. Also i am already in a thread with this code."}, {"owner": {"reputation": 6218, "user_id": 821497, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG", "display_name": "ciamej", "link": "https://stackoverflow.com/users/821497/ciamej"}, "reply_to_user": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "edited": false, "score": 0, "creation_date": 1548267006, "post_id": 54333088, "comment_id": 95484103, "body": "@TeodorO. I doesn&#39;t matter whether you use c++ or c. These are system calls. Using both threads and processes in the same program is usually a bad idea and difficult to get right, however in this simple scenario where the child pretty much only invokes <code>dup2</code> and <code>execlp</code> you&#39;ll be fine."}, {"owner": {"reputation": 6218, "user_id": 821497, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG", "display_name": "ciamej", "link": "https://stackoverflow.com/users/821497/ciamej"}, "reply_to_user": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "edited": false, "score": 0, "creation_date": 1548267035, "post_id": 54333088, "comment_id": 95484111, "body": "You could also move file opening before the <code>fork()</code> call."}, {"owner": {"reputation": 6218, "user_id": 821497, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG", "display_name": "ciamej", "link": "https://stackoverflow.com/users/821497/ciamej"}, "reply_to_user": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "edited": false, "score": 0, "creation_date": 1548267358, "post_id": 54333088, "comment_id": 95484256, "body": "If you&#39;re afraid of using both threads and forks in one program, then you can write a simple c program whose only task is to compile the specified file using gcc and store the results in an appriopriate file (by invoking exec, like I&#39;ve shown in the answer) and then call <code>system</code> to invoke that small program from your main multi-threaded one."}, {"owner": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "edited": false, "score": 0, "creation_date": 1548268596, "post_id": 54333088, "comment_id": 95484864, "body": "Thank you very much! I will try your solution tomorrow and reply with the conclusion."}], "tags": [], "owner": {"reputation": 6218, "user_id": 821497, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG", "display_name": "ciamej", "link": "https://stackoverflow.com/users/821497/ciamej"}, "is_accepted": false, "score": 1, "last_activity_date": 1548267145, "last_edit_date": 1548267145, "creation_date": 1548266356, "answer_id": 54333088, "question_id": 54332790, "link": "https://stackoverflow.com/questions/54332790/how-to-handle-a-c-file-compile-inside-a-c-server/54333088#54333088", "title": "How to handle a c++ file compile inside a C server?", "body": "<p>You can accomplish it the old-school way:</p>\n\n<ol>\n<li><p><code>fork()</code> and in the child:</p></li>\n<li><p>Open a file for storing standard output and another one for errors.</p></li>\n<li><p>Use <code>dup2(oldfd, newfd)</code> to duplicate the two files' descriptors to <code>stdout</code>, and <code>stderr</code> respectively.</p></li>\n<li><p>Invoke <code>execlp</code> with gcc and its arguments.</p></li>\n<li><p>In the parent process you can add <code>waitpid</code> call to wait for the child to finish.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1548335798, "creation_date": 1548335798, "answer_id": 54347572, "question_id": 54332790, "link": "https://stackoverflow.com/questions/54332790/how-to-handle-a-c-file-compile-inside-a-c-server/54347572#54347572", "title": "How to handle a c++ file compile inside a C server?", "body": "<p>Ok so in the end apparently this one was pretty close: system(\"g++ file.cpp &amp;> err.txt\");\n<strong>The solution is: system(\"g++ file.cpp > err.txt 2>&amp;1\");</strong></p>\n"}], "owner": {"reputation": 23, "user_id": 8111332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74267485fd9c8c321fdd4a9304fab678?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor O.", "link": "https://stackoverflow.com/users/8111332/teodor-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 54347572, "answer_count": 2, "score": 1, "last_activity_date": 1548335798, "creation_date": 1548265116, "last_edit_date": 1548266412, "question_id": 54332790, "link": "https://stackoverflow.com/questions/54332790/how-to-handle-a-c-file-compile-inside-a-c-server", "title": "How to handle a c++ file compile inside a C server?", "body": "<p>I need to make a server that:\n 1) compiles a c++ file and saves the errors in a file if they exist;\n 2) if there are no errors i must run the a.out file and extract the output in another file.\n The problem resides in the first one.</p>\n\n<p>In order to compile and extract errors i used more methods:\n 1) system(\"g++ file.cpp &amp;> err.txt\") - not working: it prints the errors in the console but the file remains empty\n 2) popen - Reference link: <a href=\"https://stackoverflow.com/questions/646241/c-run-a-system-command-and-get-output\">C: Run a System Command and Get Output?</a> : the only difference is that i opened another file and instead of printing in the console i used fprintf to write in file.\n <strong>I forgot to add that the first method works if written as command in console but inside the server is problematic.</strong></p>\n\n<pre><code>// This code is to show what i have already tried and if you find any\n// syntax errors like ; or ' pls ignore them as i couldn't copy the code\n// from the docker console. Thank you very much!\n//1\nsystem(\"g++ file.cpp &amp;&gt; err.txt\");\nif( access( \"a.out\", F_OK ) != -1 ) {\n    system(\"./a.out &gt; output.txt\");\n\n//2\n    FILE *f;\nchar buff[200];\n\nf = popen(\"g++ file.cpp\", \"r\");\nif (f == NULL) {\n    printf(\"Failed to run command\\n\" );\n    exit(1);\n}\nFILE *o;\no = fopen(\"err.txt\", \"w\");\nwhile (fgets(buff, sizeof(buff)-1, f) != NULL) {\n    fprintf(o, \"%s\", buff);\n}\nfclose(o);\nfclose(f);\n</code></pre>\n\n<p>I expected the errors to be written in the err.txt not to be printed in console and in all the above examples it prints in the console and err.txt remains empty.</p>\n"}, {"tags": ["c", "neural-network", "backpropagation", "mini-batch"], "answers": [{"comments": [{"owner": {"reputation": 1300, "user_id": 2653173, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/eFGuO.jpg?s=128&g=1", "display_name": "Andrea Catania", "link": "https://stackoverflow.com/users/2653173/andrea-catania"}, "edited": false, "score": 0, "creation_date": 1558769296, "post_id": 54364902, "comment_id": 99216696, "body": "I&#39;ve currently your same problem, and what you said now make the things more logical. What I don&#39;t get is that if you have to calculate the weights anyway, per each operation, how is it possible that minibatch is more performant than the online back propagation?"}, {"owner": {"reputation": 21, "user_id": 10956932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181c3473c5d533f14ef07809a3a2243?s=128&d=identicon&r=PG&f=1", "display_name": "C Geeeee", "link": "https://stackoverflow.com/users/10956932/c-geeeee"}, "reply_to_user": {"reputation": 1300, "user_id": 2653173, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/eFGuO.jpg?s=128&g=1", "display_name": "Andrea Catania", "link": "https://stackoverflow.com/users/2653173/andrea-catania"}, "edited": false, "score": 0, "creation_date": 1558860102, "post_id": 54364902, "comment_id": 99233600, "body": "Andrea Catania very good question to ask. I had the exact same question. There are two performance benefits when using mini batches. The first being that you can forward propogate and back propogate each training sample independently of one another. For example, when you doing online stochastic training, one sample gets propogated forward, then gradients are propogated backwards, then weights are updated. Only until the weights are updated, can you begin to propogate the next training sample forward. This limits you to only training 1 sample at a time which is a serial process."}, {"owner": {"reputation": 21, "user_id": 10956932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181c3473c5d533f14ef07809a3a2243?s=128&d=identicon&r=PG&f=1", "display_name": "C Geeeee", "link": "https://stackoverflow.com/users/10956932/c-geeeee"}, "reply_to_user": {"reputation": 1300, "user_id": 2653173, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/eFGuO.jpg?s=128&g=1", "display_name": "Andrea Catania", "link": "https://stackoverflow.com/users/2653173/andrea-catania"}, "edited": false, "score": 1, "creation_date": 1558860250, "post_id": 54364902, "comment_id": 99233625, "body": "With mini batches, no weights are updated until all the samples in the mini batch have been propogated forward and gradients have been propogated back (weights not updated) so in this instance the state of your network (weight values) does not change until all mini batch samples have been processed. This allows you to run as many samples as you want or can in parallel using multiple CPU or GPU threads. The forward and backwards passes become independent of one another as the network state remains the same."}, {"owner": {"reputation": 21, "user_id": 10956932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181c3473c5d533f14ef07809a3a2243?s=128&d=identicon&r=PG&f=1", "display_name": "C Geeeee", "link": "https://stackoverflow.com/users/10956932/c-geeeee"}, "reply_to_user": {"reputation": 1300, "user_id": 2653173, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/eFGuO.jpg?s=128&g=1", "display_name": "Andrea Catania", "link": "https://stackoverflow.com/users/2653173/andrea-catania"}, "edited": false, "score": 1, "creation_date": 1558860321, "post_id": 54364902, "comment_id": 99233642, "body": "The other performance benefit is that you are only updating your weights once every N times. N being the size of your mini batch. As N becomes larger so does the performance benefit"}, {"owner": {"reputation": 1300, "user_id": 2653173, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/eFGuO.jpg?s=128&g=1", "display_name": "Andrea Catania", "link": "https://stackoverflow.com/users/2653173/andrea-catania"}, "edited": false, "score": 0, "creation_date": 1558864070, "post_id": 54364902, "comment_id": 99234378, "body": "Perfect and really clear explanation! This post is very important. Many thanks man."}], "tags": [], "owner": {"reputation": 21, "user_id": 10956932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181c3473c5d533f14ef07809a3a2243?s=128&d=identicon&r=PG&f=1", "display_name": "C Geeeee", "link": "https://stackoverflow.com/users/10956932/c-geeeee"}, "is_accepted": false, "score": 1, "last_activity_date": 1548417419, "creation_date": 1548417419, "answer_id": 54364902, "question_id": 54332566, "link": "https://stackoverflow.com/questions/54332566/how-to-update-weights-when-using-mini-batches/54364902#54364902", "title": "How to update weights when using mini batches?", "body": "<p>Ok so i figured it out. When using mini batches you should not accumulate and average out the error at the output of the network. Each training examples error gets propogated back as you would normally except instead of updating the weights you accumulate the changes you would have made to each weight. When you have looped through the mini batch you then average the accumulations and change the weights accordingly. </p>\n\n<p>I was under the impression that when using mini batches you do not have to propogate any error back until you have looped through the mini batch. I was wrong you still need to do that the only difference is you only update the weights once you have looped through your mini batch size.</p>\n"}], "owner": {"reputation": 21, "user_id": 10956932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181c3473c5d533f14ef07809a3a2243?s=128&d=identicon&r=PG&f=1", "display_name": "C Geeeee", "link": "https://stackoverflow.com/users/10956932/c-geeeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548417419, "creation_date": 1548264300, "last_edit_date": 1548266393, "question_id": 54332566, "link": "https://stackoverflow.com/questions/54332566/how-to-update-weights-when-using-mini-batches", "title": "How to update weights when using mini batches?", "body": "<p>I am trying to implement mini batch training to my neural network instead of the \"online\" stochastic method of updating weights every training sample.  </p>\n\n<p>I have developed a somewhat novice neural network in C whereby i can adjust the number of neurons in each layer , activation functions etc. This is to help me understand neural networks. I have trained the network on mnist data set but it takes around 200 epochs to get down do an error rate of 20% on the training set which seams very poor to me. I am currently using online stochastic gradient decent to train the network. What i would like to try is use mini batches instead. I understand the concept that i must accumulate and average the error from each training sample before i propagate the error back. My problem comes in when i want to calculate the changes i must make to the weights. To explain this better consider a very simple perceptron model. One input, one hidden layer one output. To calculate the change i need to make to the weight between the input and the hidden unit i will use this following equation:</p>\n\n<p>\u2202C/\u2202w1=  \u2202C/\u2202O*\u2202O/\u2202h*\u2202h/\u2202w1</p>\n\n<p>If you do the partial derivatives you get:</p>\n\n<p>\u2202C/\u2202w1=  (Output-Expected Answer)<em>(w2)</em>(input)</p>\n\n<p>Now this formula says that you need to multiply the back propogated error by the input. For online stochastic training that makes sense because you use 1 input per weight update. For minibatch training you used many inputs so which input does the error get multiplied by?\nI hope you can assist me with this.</p>\n\n<pre><code>void propogateBack(void){\n\n\n    //calculate 6C/6G\n    for (count=0;count&lt;network.outputs;count++){\n            network.g_error[count] = derive_cost((training.answer[training_current])-(network.g[count]));\n    }\n\n\n\n    //calculate 6G/6O\n    for (count=0;count&lt;network.outputs;count++){\n        network.o_error[count] = derive_activation(network.g[count])*(network.g_error[count]);\n    }\n\n\n    //calculate 6O/6S3\n    for (count=0;count&lt;network.h3_neurons;count++){\n        network.s3_error[count] = 0;\n        for (count2=0;count2&lt;network.outputs;count2++){\n            network.s3_error[count] += (network.w4[count2][count])*(network.o_error[count2]);\n        }\n    }\n\n\n    //calculate 6S3/6H3\n    for (count=0;count&lt;network.h3_neurons;count++){\n        network.h3_error[count] = (derive_activation(network.s3[count]))*(network.s3_error[count]);\n    }\n\n\n    //calculate 6H3/6S2\n    network.s2_error[count] = = 0;\n    for (count=0;count&lt;network.h2_neurons;count++){\n        for (count2=0;count2&lt;network.h3_neurons;count2++){ \n            network.s2_error[count] = += (network.w3[count2][count])*(network.h3_error[count2]);\n        }\n    }\n\n\n\n    //calculate 6S2/6H2\n    for (count=0;count&lt;network.h2_neurons;count++){\n        network.h2_error[count] = (derive_activation(network.s2[count]))*(network.s2_error[count]);\n    }\n\n\n    //calculate 6H2/6S1\n    network.s1_error[count] = 0;\n    for (count=0;count&lt;network.h1_neurons;count++){\n        for (count2=0;count2&lt;network.h2_neurons;count2++){\n            buffer += (network.w2[count2][count])*network.h2_error[count2];\n        }\n    }\n\n\n    //calculate 6S1/6H1\n    for (count=0;count&lt;network.h1_neurons;count++){\n        network.h1_error[count] = (derive_activation(network.s1[count]))*(network.s1_error[count]);\n\n    }\n\n\n}\n\n\n\n\n\nvoid updateWeights(void){\n\n\n    //////////////////w1\n    for(count=0;count&lt;network.h1_neurons;count++){\n        for(count2=0;count2&lt;network.inputs;count2++){\n            network.w1[count][count2] -= learning_rate*(network.h1_error[count]*network.input[count2]);\n        }\n\n    }\n\n\n\n\n\n    //////////////////w2\n    for(count=0;count&lt;network.h2_neurons;count++){\n        for(count2=0;count2&lt;network.h1_neurons;count2++){\n            network.w2[count][count2] -= learning_rate*(network.h2_error[count]*network.s1[count2]);\n        }\n\n    }\n\n\n\n    //////////////////w3\n    for(count=0;count&lt;network.h3_neurons;count++){\n        for(count2=0;count2&lt;network.h2_neurons;count2++){\n            network.w3[count][count2] -= learning_rate*(network.h3_error[count]*network.s2[count2]);\n        }\n\n    }\n\n\n    //////////////////w4\n    for(count=0;count&lt;network.outputs;count++){\n        for(count2=0;count2&lt;network.h3_neurons;count2++){\n            network.w4[count][count2] -= learning_rate*(network.o_error[count]*network.s3[count2]);\n        }\n\n    }\n}\n</code></pre>\n\n<p>The code i have attached is how i do the online stochastic updates. As you can see in the updateWeights() function the weight updates are based on the input values (dependent on the sample fed in) and the hidden unit values (also dependent on the input sample value fed in). So when i have the minibatch average gradient that i am propogating back how will i update the weights? which input values do i use?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 1, "creation_date": 1548262817, "post_id": 54332176, "comment_id": 95482188, "body": "you can make a copy without the 2nd element"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1548262819, "post_id": 54332176, "comment_id": 95482190, "body": "You could create a new array and pass it, or you pass an additional variable which indicates which element is excluded. If it is every time the second element you could hande it in your code directly."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1548263186, "post_id": 54332176, "comment_id": 95482394, "body": "Reversed out the seemingly-obligatory -1 on the question!"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1548266370, "post_id": 54332176, "comment_id": 95483795, "body": "Possible X-Y problem.  Why do you want to pass an array without the second element?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548270010, "post_id": 54332176, "comment_id": 95485517, "body": "C does not pass arrays at all though functions.  Only an address is passed.  Providing more detail would help."}, {"owner": {"reputation": 830, "user_id": 4606185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P60xS.png?s=128&g=1", "display_name": "Axifive", "link": "https://stackoverflow.com/users/4606185/axifive"}, "edited": false, "score": 0, "creation_date": 1548371768, "post_id": 54332176, "comment_id": 95528494, "body": "@Mathing, If you were given a comprehensive answer, can you choose it as a solution? Or write a comment if the answers didn&#39;t suit you."}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 2542165, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/27a8186d2f0f6d88ad56327bacbeb258?s=128&d=identicon&r=PG", "display_name": "jaudo", "link": "https://stackoverflow.com/users/2542165/jaudo"}, "is_accepted": false, "score": 2, "last_activity_date": 1548262914, "creation_date": 1548262914, "answer_id": 54332230, "question_id": 54332176, "link": "https://stackoverflow.com/questions/54332176/how-to-pass-array-without-the-second-element-in-c/54332230#54332230", "title": "How to pass array without the second element in c?", "body": "<p>If you can't change the called function, and also can't change <code>a</code>:</p>\n\n<ul>\n<li>Allocate memory <code>b</code> for n - 1 elements</li>\n<li>Copy element <code>a[0]</code> in <code>b[0]</code></li>\n<li>Copy from element <code>a[2]</code> to <code>a[n-1]</code> in <code>b[1]</code> to <code>b[n-2]</code> using memcpy for example.</li>\n</ul>\n\n<p>If you can change <code>a</code>, Axifive's solution is more efficient.</p>\n"}, {"comments": [{"owner": {"reputation": 1692, "user_id": 2542165, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/27a8186d2f0f6d88ad56327bacbeb258?s=128&d=identicon&r=PG", "display_name": "jaudo", "link": "https://stackoverflow.com/users/2542165/jaudo"}, "edited": false, "score": 3, "creation_date": 1548262951, "post_id": 54332234, "comment_id": 95482271, "body": "a+1, not *(a+1) which is equivalent to a[1]"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1548263296, "post_id": 54332234, "comment_id": 95482447, "body": "This is all very well but you can still reach the other element by pointer arithmetic."}, {"owner": {"reputation": 830, "user_id": 4606185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P60xS.png?s=128&g=1", "display_name": "Axifive", "link": "https://stackoverflow.com/users/4606185/axifive"}, "reply_to_user": {"reputation": 1692, "user_id": 2542165, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/27a8186d2f0f6d88ad56327bacbeb258?s=128&d=identicon&r=PG", "display_name": "jaudo", "link": "https://stackoverflow.com/users/2542165/jaudo"}, "edited": false, "score": 0, "creation_date": 1548263298, "post_id": 54332234, "comment_id": 95482448, "body": "@jaudo, Thanks!"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1548263465, "post_id": 54332234, "comment_id": 95482533, "body": "@Bathsheba Yes but must be ensured that you can not reach the other elements with pointer arithmetic? <code>a[-1]</code> would be the initial second element, but why would a function access the <code>-1</code> index? If you copy the array,  the <code>a[-1]</code> would lead to undefined behavior anyway."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548263544, "post_id": 54332234, "comment_id": 95482578, "body": "@Osiris: Dunno. It&#39;s just that you can&#39;t <i>forbid</i> a function from accessing the second element (thinking in terms of &quot;security&quot; here), so you may as well pass the thing in."}, {"owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "edited": false, "score": 3, "creation_date": 1548263553, "post_id": 54332234, "comment_id": 95482586, "body": "I like this solution.  Swap a[0] and a[1], call the function with &amp;a[1], and then swap them back.  Simple and efficient."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1548263891, "post_id": 54332234, "comment_id": 95482753, "body": "I like it a lot too: it generalises readily to missing out any element."}], "tags": [], "owner": {"reputation": 830, "user_id": 4606185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P60xS.png?s=128&g=1", "display_name": "Axifive", "link": "https://stackoverflow.com/users/4606185/axifive"}, "is_accepted": false, "score": 6, "last_activity_date": 1548262952, "last_edit_date": 1548262952, "creation_date": 1548262924, "answer_id": 54332234, "question_id": 54332176, "link": "https://stackoverflow.com/questions/54332176/how-to-pass-array-without-the-second-element-in-c/54332234#54332234", "title": "How to pass array without the second element in c?", "body": "<p>You can swap <code>a[0]</code> and <code>a[1]</code> and then pass the array from the second element: <code>(a + 1)</code></p>\n"}, {"tags": [], "owner": {"reputation": 290, "user_id": 3248305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066a0036a704bfd5bd014570fd7ca057?s=128&d=identicon&r=PG", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/3248305/eduardo"}, "is_accepted": false, "score": 1, "last_activity_date": 1548262968, "creation_date": 1548262968, "answer_id": 54332245, "question_id": 54332176, "link": "https://stackoverflow.com/questions/54332176/how-to-pass-array-without-the-second-element-in-c/54332245#54332245", "title": "How to pass array without the second element in c?", "body": "<p>You can pass the value of the first element and the address of the third element as two parameters, for example. But I think that passing the whole array and not using the second element in the function is the clearer solution</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1548263378, "last_edit_date": 1548263378, "creation_date": 1548262974, "answer_id": 54332246, "question_id": 54332176, "link": "https://stackoverflow.com/questions/54332176/how-to-pass-array-without-the-second-element-in-c/54332246#54332246", "title": "How to pass array without the second element in c?", "body": "<p>One way would be to call the function <code>foo</code> with</p>\n\n<pre><code>foo(a[0], a + 2)\n</code></pre>\n\n<p>assuming that <code>a</code> has at least 1 element. Personally though I'd pass the whole lot and ignore the second element in the function, particularly if <code>foo</code> is allowed to modify the first element, in which case my idea won't work. My suggestion will also wreak havoc with array indexing, and, technically you can always reach the forbidden element with pointer arithmetic.</p>\n\n<p>Because of this ability to reach the element by pointer arithmetic, a way to obviate that is to copy the array <em>sans</em> element, call the function, then write back any modifications to the original array in the caller.</p>\n"}], "owner": {"reputation": 41, "user_id": 9111262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b6fa1fe758703e69e614ccb99ef0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Mathing", "link": "https://stackoverflow.com/users/9111262/mathing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1548263378, "creation_date": 1548262702, "question_id": 54332176, "link": "https://stackoverflow.com/questions/54332176/how-to-pass-array-without-the-second-element-in-c", "title": "How to pass array without the second element in c?", "body": "<p>How can I pass to function my array without the second element of the array?  </p>\n\n<p>for example, in given array <code>a</code> , I want to pass <code>a[0],a[2],...,a[n-1]</code> to the function <code>f</code>.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 1, "creation_date": 1548262486, "post_id": 54332027, "comment_id": 95482015, "body": "Think about the problem on paper: how would you draw such a pyramid by hand? The program logic will be highly similar to the different actions and calculations you need to perform when drawing manually."}, {"owner": {"reputation": 1, "user_id": 9331661, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156068131554785/picture?type=large", "display_name": "Trevor Hough", "link": "https://stackoverflow.com/users/9331661/trevor-hough"}, "reply_to_user": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1548264638, "post_id": 54332027, "comment_id": 95483042, "body": "By drawing x amount of blank spaces before the # character. Which is what I am having a problem with."}], "answers": [{"tags": [], "owner": {"reputation": 108, "user_id": 9004851, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ULIdtpj8PUI/AAAAAAAAAAI/AAAAAAAAEMQ/YnDMtLYXbZQ/photo.jpg?sz=128", "display_name": "Arthur Green", "link": "https://stackoverflow.com/users/9004851/arthur-green"}, "is_accepted": false, "score": 0, "last_activity_date": 1548283468, "last_edit_date": 1548283468, "creation_date": 1548272142, "answer_id": 54334461, "question_id": 54332027, "link": "https://stackoverflow.com/questions/54332027/how-do-i-print-a-pyramid-with-text-based-on-number-given-by-user/54334461#54334461", "title": "How do I print a pyramid with text based on number given by user?", "body": "<p>You need a loop which prints spaces until the second loop's counter (j) is less than n-i. Please see below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int n, i, j, k;\n\n    printf(\"Number: \");\n    scanf(\"%d\", &amp;n);\n\n    for (i = 0; i &lt; n; i++)\n    {\n\n        for (j = 0; j &lt; n-i; j++)\n        {\n            printf(\" \");\n        }\n\n        for (k =0; k &lt;= i; k++)\n        {\n            printf(\"# \");\n        }\n\n        printf(\"\\n\");\n    }\n\n} // end main function\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9331661, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156068131554785/picture?type=large", "display_name": "Trevor Hough", "link": "https://stackoverflow.com/users/9331661/trevor-hough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548283468, "creation_date": 1548262193, "question_id": 54332027, "link": "https://stackoverflow.com/questions/54332027/how-do-i-print-a-pyramid-with-text-based-on-number-given-by-user", "title": "How do I print a pyramid with text based on number given by user?", "body": "<p>Currently stuck on creating a pyramid out of hashes (#'s) based on a number given by user input. The example for CS50 only describes how to create a square based on the number given. </p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int n = get_int(\"Number:\\n\");\n    if(n&gt;0 &amp;&amp; n&lt;9)\n    for (int i = 0; i &lt; n; i++)\n  {\n    for (int j = 0; j &lt; n; j++)\n    {\n      printf(\"#\");\n    }\n  printf(\"\\n\");\n  }\n}\n</code></pre>\n\n<p>Expected result is to create a pyramid that is x amount of #'s wide and tall based on the input given by user. </p>\n\n<p>Actual result is a square that is x amount of #'s wide and tall based on the input given by user.</p>\n"}, {"tags": ["python", "c++", "c"], "answers": [{"tags": [], "owner": {"reputation": 2343, "user_id": 9448377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wim Lavrijsen", "link": "https://stackoverflow.com/users/9448377/wim-lavrijsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1548301947, "last_edit_date": 1548301947, "creation_date": 1548280792, "answer_id": 54336340, "question_id": 54331986, "link": "https://stackoverflow.com/questions/54331986/resolve-a-c-c-call-method-from-python-by-using-cppyy/54336340#54336340", "title": "Resolve a C (C++) call method from Python by using cppyy", "body": "<p>cppyy assumes C++, i.e. name mangling will be applied. To make sure the declarations in your project's header files can be used both from C and C++, add extern \"C\" when used from C++. Like so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nvoid pocket(void);\nint pocket_add(int op1, int op2);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>This will also be generally helpful for anyone using your code from C++, so it's not just for Python/cppyy.</p>\n\n<p>Edit: forgot to add that you can also use \"cppyy.c_include\" instead of \"cppyy.include\" for C headers.</p>\n"}], "owner": {"reputation": 94, "user_id": 5569333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8IPM6.jpg?s=128&g=1", "display_name": "Gromph", "link": "https://stackoverflow.com/users/5569333/gromph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 54336340, "answer_count": 1, "score": 1, "last_activity_date": 1548301947, "creation_date": 1548262047, "last_edit_date": 1548272132, "question_id": 54331986, "link": "https://stackoverflow.com/questions/54331986/resolve-a-c-c-call-method-from-python-by-using-cppyy", "title": "Resolve a C (C++) call method from Python by using cppyy", "body": "<p>In a C project, I would like to do the tests with the Python tools, so I integrated the Cling and Cppyy python package tool.</p>\n\n<p>After that, I created a simple project like <a href=\"http://www.benjack.io/2018/02/02/python-cpp-revisited.html\" rel=\"nofollow noreferrer\">this</a>. And found <a href=\"https://stackoverflow.com/questions/145270/calling-c-c-from-python\">this help</a>.</p>\n\n<p>I have one source and one header.</p>\n\n<h1>header/pocket.h</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid pocket(void);\nint pocket_add(int op1, int op2);\n</code></pre>\n\n<h1>source/pocket.c</h1>\n\n<pre><code>#include &lt;pocket.h&gt;\nvoid pocket(void)\n{\n  printf(\"Hello, pocket!\\n\");\n}\n\nint pocket_add(int op1, int op2)\n{\n  return op1 + op2;\n}\n</code></pre>\n\n<p><strong>I have this error on python interpreter</strong></p>\n\n<blockquote>\n  <p>IncrementalExecutor::executeFunction: symbol '_Z6pocketv' unresolved while linking symbol '__cf_6'!\n  You are probably missing the definition of pocket()\n  Maybe you need to load the corresponding shared library?\n  Error in : Failed to compile</p>\n</blockquote>\n\n<p><strong>Check the result via Python interpreter:</strong></p>\n\n<pre><code>import cppyy\ncppyy.include('include/pocket.h')\ncppyy.load_library('build/libpocket.so')\ncppyy.gbl.pocket()\n</code></pre>\n\n<blockquote>\n  <p>IncrementalExecutor::executeFunction: symbol '_Z6pocketv' unresolved while linking symbol '__cf_6'!\n  You are probably missing the definition of pocket()\n  Maybe you need to load the corresponding shared library?\n  Error in : Failed to compile</p>\n</blockquote>\n\n<h1>Source</h1>\n\n<pre><code>#pragma clang diagnostic push\n#pragma clang diagnostic ignored \"-Wformat-security\"\n__attribute__((used)) extern \"C\" void __cf_6(void* obj, int nargs, void** args, void* ret)\n{\n    ((void (&amp;)())pocket)();\n    return;\n}\n#pragma clang diagnostic pop\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1548261230, "post_id": 54331673, "comment_id": 95481359, "body": "You&#39;re setting nothing, you&#39;re just telling it to stop when it reaches end of file (at which point it returns <code>NULL</code>)"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1548262251, "post_id": 54331673, "comment_id": 95481914, "body": "You don&#39;t read with <code>fopen</code>.  You use <code>fopen</code> to create a data structure which you pass to <code>fgets</code> to read from the file.  <code>fgets</code> reads one line each time it is called.  You are calling it multiple times in a while loop, and it will read one line on each iteration.  When there are no more lines to read, <code>fgets</code> returns NULL and the loop terminates."}, {"owner": {"reputation": 437, "user_id": 5308157, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ITfDp.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5308157/kevin"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1548262373, "post_id": 54331673, "comment_id": 95481965, "body": "@WilliamPursell Sorry, my bad. It was a typo. Edited."}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 5308157, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ITfDp.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5308157/kevin"}, "edited": false, "score": 0, "creation_date": 1548261467, "post_id": 54331752, "comment_id": 95481491, "body": "If we set the first line to let&#39;s say, as 30 characters, and the second line as 30 characters, wouldn&#39;t the loop stop at the second cycle? Because we defined <code>str</code> as <code>char str[53];</code>."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "reply_to_user": {"reputation": 437, "user_id": 5308157, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ITfDp.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5308157/kevin"}, "edited": false, "score": 1, "creation_date": 1548262810, "post_id": 54331752, "comment_id": 95482183, "body": "@kevin <code>fgets()</code> does NOT append to <code>str</code>, with each call you overwrite the previous content."}, {"owner": {"reputation": 437, "user_id": 5308157, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ITfDp.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5308157/kevin"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1548267425, "post_id": 54331752, "comment_id": 95484300, "body": "Thank you @AdrianoRepetti"}], "tags": [], "owner": {"reputation": 1514, "user_id": 1291628, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7eca596c7dc7b82b63243bb8af928128?s=128&d=identicon&r=PG", "display_name": "ikkentim", "link": "https://stackoverflow.com/users/1291628/ikkentim"}, "is_accepted": false, "score": 1, "last_activity_date": 1548261215, "creation_date": 1548261215, "answer_id": 54331752, "question_id": 54331673, "link": "https://stackoverflow.com/questions/54331673/why-in-order-to-read-multiple-lines-of-a-text-with-fgets-we-need-to-set-fgets/54331752#54331752", "title": "Why in order to read multiple lines of a text with fgets we need to set fgets()!=NULL?", "body": "<p>According to the documentation:</p>\n\n<blockquote>\n  <p>On success, the function returns str.\n  If the end-of-file is encountered while attempting to read a character, the eof indicator is set (feof). If this happens before any characters could be read, the pointer returned is a null pointer (and the contents of str remain unchanged).\n  If a read error occurs, the error indicator (ferror) is set and a null pointer is also returned (but the contents pointed by str may have changed).</p>\n</blockquote>\n\n<p>str is the buffer you specified as the first argument. If <code>fgets</code> is done reading, NULL is returned.</p>\n"}], "owner": {"reputation": 437, "user_id": 5308157, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ITfDp.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5308157/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548262357, "creation_date": 1548260966, "last_edit_date": 1548262357, "question_id": 54331673, "link": "https://stackoverflow.com/questions/54331673/why-in-order-to-read-multiple-lines-of-a-text-with-fgets-we-need-to-set-fgets", "title": "Why in order to read multiple lines of a text with fgets we need to set fgets()!=NULL?", "body": "<p>If I would like to read multiple lines from a text with <code>fgets</code>, and according to my textbok,  I would do something like this:</p>\n\n<pre><code> char str[53];\n ...\n while(fgets(str, max, f)!=NULL){\n   ...\n }\n</code></pre>\n\n<p>If <code>str</code> is just a string of n characters of a line, how does the program read the second line? According to a documentation, shouldn't the loop stop when it reaches the end of line?</p>\n\n<blockquote>\n  <p><strong>fgets</strong>\n  Reads characters from stream and stores them as a C string into str\n  until (num-1) characters have been read or either a newline or the\n  end-of-file is reached, whichever happens first.</p>\n</blockquote>\n"}, {"tags": ["c", "avr", "atmega"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1548261105, "post_id": 54331621, "comment_id": 95481287, "body": "May be asked @ <a href=\"https://arduino.stackexchange.com/\">arduino.stackexchange.com</a>"}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 1, "creation_date": 1548261112, "post_id": 54331621, "comment_id": 95481292, "body": "I&#39;d definitely ommit ISR &quot;prototype&quot;."}, {"owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "reply_to_user": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1548261154, "post_id": 54331621, "comment_id": 95481312, "body": "@KIIV I did not know that. I will remove it."}, {"owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1548261209, "post_id": 54331621, "comment_id": 95481346, "body": "@AlexK. It is not about <code>arduino</code> it is about the C code which I need to proceed. It is more over about <code>AVR</code> I think"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548261239, "post_id": 54331621, "comment_id": 95481363, "body": "How does <code>buttonWasPressed</code> effect your main code at all?"}, {"owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548261298, "post_id": 54331621, "comment_id": 95481397, "body": "@Osiris I noticed also that there I need to do something and I am not sure what .:)"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548261368, "post_id": 54331621, "comment_id": 95481433, "body": "You should maybe call <code>play</code> only if <code>buttonWasPressed</code> is true. But you should create a variable which is toggled rather than set when you press the button."}, {"owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548261576, "post_id": 54331621, "comment_id": 95481545, "body": "@Osiris I already did that, but the function <code>play()</code> runs from beginning starting from led <code>PB0</code> to <code>PB5</code> and this is not what I want."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "edited": false, "score": 0, "creation_date": 1548261944, "post_id": 54331887, "comment_id": 95481749, "body": "Almost working, but once I press the button the function <code>play()</code> stops and if i press the button again only <code>PD7</code> LED blink."}], "tags": [], "owner": {"reputation": 251, "user_id": 10248196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZtFh.jpg?s=128&g=1", "display_name": "Althaf1467", "link": "https://stackoverflow.com/users/10248196/althaf1467"}, "is_accepted": true, "score": 2, "last_activity_date": 1548261730, "creation_date": 1548261730, "answer_id": 54331887, "question_id": 54331621, "link": "https://stackoverflow.com/questions/54331621/setting-up-interrupts-on-atmega328-in-pure-c/54331887#54331887", "title": "Setting up Interrupts on atmega328 in pure C", "body": "<p>Try something like this. </p>\n\n<pre><code>#ifndef F_CPU\n#define F_CPU 16000000UL\n#endif\n\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;util/delay.h&gt;\n\nvoid play( unsigned int a );\nISR (INT0_vect);\n\nvolatile uint8_t buttonWasPressed = 0;\nconst unsigned char LEDS[] = { PB0, PB1, PB2, PB3, PB4, PB5 };\nunsigned int ledNum = 0;\n\nint main(void)\n{\n    DDRB = 0xFF;  /// Set PORTD as OUTPUT\n\n    DDRD  |=  ( 1 &lt;&lt; PD7 );     /// Set PIN7 IN DDRD as INPUT\n    PORTD &amp;= ~( 1 &lt;&lt; PD7 );     /// Set PIN7 on PORTD to LOW\n    DDRD  &amp;= ~( 1 &lt;&lt; PD2 );     // Clear the PD2 pin and set PD2 (PCINT0 pin) now as input\n    PORTD |= (1 &lt;&lt; PD2);        // Set PIN PD2 as INPUT with pull-up enabled\n\n    EICRA |= (1 &lt;&lt; ISC00);      // set INT0 to trigger on ANY logic change\n    EIMSK |= (1 &lt;&lt; INT0);       // Turns on INT0\n    sei();                      // turn on interrupts\n\n    while(1)\n    {\n        if(buttonWasPressed == 1)\n            play(ledNum);\n\n    }\n}\n\nISR (INT0_vect)\n{\n\n    uint8_t buttonState = PIND &amp; ( 1 &lt;&lt; PD2 );\n    if ( buttonState )\n    {\n        if ( buttonWasPressed == 0 )\n        {\n            PORTD ^= ( 1 &lt;&lt; PD7 );  /// SET PIN 4 IN PORT B TO LOW\n            _delay_ms( 200 );\n            buttonWasPressed = 1;   /// update button state\n        }\n    }\n    else                            /// The button is not pressed\n    {\n        buttonWasPressed = 0;       /// Update the button state\n    }\n}\n\nvoid play( unsigned int a )\n{\n    for ( uint8_t i = a ; i &lt; 6 ; i++ )\n    {\n        PORTB |= ( 1 &lt;&lt; LEDS[i] );  ///Turn LED ON\n        _delay_ms( 250 );\n        PORTB &amp;= ~( 1 &lt;&lt; LEDS[i] ); ///Turn LED OFF\n        _delay_ms( 250 );\n        ledNum=i;\n    }\n}\n</code></pre>\n\n<p>by defining a variable to save which LED it was on then whenever it is resumed it will start from the last lit LED. check it out. Change if there is anything. I just gave the idea. hope it helps :)</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1548321288, "last_edit_date": 1548321288, "creation_date": 1548262674, "answer_id": 54332168, "question_id": 54331621, "link": "https://stackoverflow.com/questions/54331621/setting-up-interrupts-on-atmega328-in-pure-c/54332168#54332168", "title": "Setting up Interrupts on atmega328 in pure C", "body": "<p>I managed to fix it with the help of @Althaf1467.</p>\n\n<p>The working code is:</p>\n\n<pre><code>#ifndef F_CPU\n#define F_CPU 16000000UL\n#endif\n\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;util/delay.h&gt;\n\n#define LEDS_LENGTH 6\n\nvoid play( void );\n\nvolatile uint8_t state = 0 ;\nconst unsigned char LEDS[] = { PB0, PB1, PB2, PB3, PB4, PB5 };\n\nint main( void )\n{\n    DDRB = 0xFF;                    /// Set PORTD as OUTPUT\n\n    DDRD  |=  ( 1UL &lt;&lt; PD7   );     /// Set PIN7 IN DDRD as INPUT\n    PORTD &amp;= ~( 1UL &lt;&lt; PD7   );     /// Set PIN7 on PORTD to LOW\n    DDRD  &amp;= ~( 1UL &lt;&lt; PD2   );     /// Clear the PD2 pin and set PD2 (PCINT0 pin) now as input\n    PORTD |=  ( 1UL &lt;&lt; PD2   );     /// Set PIN PD2 as INPUT with pull-up enabled\n\n    EICRA |=  ( 1UL &lt;&lt; ISC00 );     /// set INT0 to trigger on ANY logic change\n    EIMSK |=  ( 1UL &lt;&lt; INT0  );     /// Turns on INT0\n    sei();                          /// turn on interrupts\n\n    while(1)\n    {\n        play();\n    }\n}\n\nISR ( INT0_vect )\n{\n    if ( PIND &amp; ( 1UL &lt;&lt; PD2 ) )\n    {\n        PORTD ^= ( 1UL &lt;&lt; PD7 );    /// SET PIN 4 IN PORT B TO LOW\n        state ^= ( 1 &lt;&lt; 0 );        /// Swap the Buton State from 0 to 1 and back to 0 ...\n        _delay_ms( 500 );\n    }\n}\n\nvoid play( void )\n{\n    static uint8_t step = 0;\n    while( step &lt; LEDS_LENGTH )\n    {\n        if ( state == 1 )\n        {\n            break;\n        }\n        PORTB |=  ( 1UL &lt;&lt; LEDS[ step ] );  /// Turn LED ON\n        _delay_ms( 250 );\n\n        PORTB &amp;= ~( 1UL &lt;&lt; LEDS[ step ] );  /// Turn LED OFF\n        _delay_ms( 250 );\n\n        step++;\n    }\n\n    if ( step == LEDS_LENGTH )\n    {\n        step = 0;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 10956851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-syJcVzYV9Yk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZfHuKvQrMIkSZTUeJpPXstqP9bag/mo/photo.jpg?sz=128", "display_name": "John Doe", "link": "https://stackoverflow.com/users/10956851/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 54331887, "answer_count": 2, "score": 2, "last_activity_date": 1548321288, "creation_date": 1548260761, "last_edit_date": 1548284506, "question_id": 54331621, "link": "https://stackoverflow.com/questions/54331621/setting-up-interrupts-on-atmega328-in-pure-c", "title": "Setting up Interrupts on atmega328 in pure C", "body": "<p>I am currently working on an Arduino Uno Board and I am trying to write it in pure <code>C</code> without the use of Arduino's Libraries.</p>\n\n<p>My project which I am working should work like this:</p>\n\n<ul>\n<li><p>Set LEDs <code>PB0</code> to <code>BP7</code> <code>ON</code> and <code>OFF</code>.</p></li>\n<li><p>Set interrupt on PD2 connected to a Button.</p></li>\n<li><p>When the Button is pressed the LEDs should STOP (pause).</p></li>\n<li><p>When the Button is pressed Again the LEDs should turn <code>ON</code> again<br>\nstarting  from the last LED which was <code>OFF</code>.</p></li>\n</ul>\n\n<p>To be more precise:</p>\n\n<ul>\n<li>The function <code>play()</code> is called</li>\n<li>LEDs are starting to blink one after other</li>\n<li>If I press the BUTTON the <code>play()</code> function should STOP</li>\n</ul>\n\n<p>This means that if the LED connected to <code>PB3</code> was last LED ON, when I press the Button again the function <code>play()</code> should continue from <code>PB4</code>.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>#ifndef F_CPU\n#define F_CPU 16000000UL\n#endif\n\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;util/delay.h&gt;\n\nvoid play( void );\n\nvolatile uint8_t buttonWasPressed = 0;\nconst unsigned char LEDS[] = { PB0, PB1, PB2, PB3, PB4, PB5 };\n\nint main(void)\n{\n    DDRB = 0xFF;  /// Set PORTB as OUTPUT\n\n    DDRD  |=  ( 1 &lt;&lt; PD7 );     /// Set PIN7 IN DDRD as INPUT\n    PORTD &amp;= ~( 1 &lt;&lt; PD7 );     /// Set PIN7 on PORTD to LOW\n    DDRD  &amp;= ~( 1 &lt;&lt; PD2 );     // Clear the PD2 pin and set PD2 (PCINT0 pin) now as input\n    PORTD |= (1 &lt;&lt; PD2);        // Set PIN PD2 as INPUT with pull-up enabled\n\n    EICRA |= (1 &lt;&lt; ISC00);      // set INT0 to trigger on ANY logic change\n    EIMSK |= (1 &lt;&lt; INT0);       // Turns on INT0\n    sei();                      // turn on interrupts\n\n    while(1)\n    {\n        play();\n    }\n}\n\nISR (INT0_vect)\n{\n\n    uint8_t buttonState = PIND &amp; ( 1 &lt;&lt; PD2 );\n    if ( buttonState )\n    {\n        if ( buttonWasPressed == 0 )\n        {\n            PORTD ^= ( 1 &lt;&lt; PD7 );  /// SET PIN 4 IN PORT B TO LOW\n            _delay_ms( 200 );\n            buttonWasPressed = 1;   /// update button state\n        }\n    }\n    else                            /// The button is not pressed\n    {\n        buttonWasPressed = 0;       /// Update the button state\n    }\n}\n\nvoid play( void )\n{\n    for ( uint8_t i = 0 ; i &lt; 6 ; i++ )\n    {\n        PORTB |= ( 1 &lt;&lt; LEDS[i] );  ///Turn LED ON\n        _delay_ms( 250 );\n        PORTB &amp;= ~( 1 &lt;&lt; LEDS[i] ); ///Turn LED OFF\n        _delay_ms( 250 );\n    }\n}\n</code></pre>\n\n<p>At this point the function <code>play()</code> runs forever and if I press the Button the LED connected to <code>PD7</code> goes <code>ON</code> and <code>OFF</code>.</p>\n"}, {"tags": ["c", "debian", "syslog", "rsyslog"], "comments": [{"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 0, "creation_date": 1548260218, "post_id": 54331240, "comment_id": 95480794, "body": "why don&#39;t you show your config file when you assume there is something wrong with it?"}, {"owner": {"reputation": 600, "user_id": 7176243, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-dLD6kFec4Bg/AAAAAAAAAAI/AAAAAAAAAJ0/CQ6lkIKBWPI/photo.jpg?sz=128", "display_name": "vk-code", "link": "https://stackoverflow.com/users/7176243/vk-code"}, "edited": false, "score": 1, "creation_date": 1548260254, "post_id": 54331240, "comment_id": 95480819, "body": "may be logging level is not set properly?  try using appropriate level using setlogmask (LOG_UPTO (LOG_NOTICE)); i generally set the local through openlog call."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1548261926, "post_id": 54331240, "comment_id": 95481742, "body": "Do /var/log/messages see it? And if you increase the priority?"}, {"owner": {"reputation": 31, "user_id": 10956757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627f2594779e4c6f2b45f9f736d145cc?s=128&d=identicon&r=PG&f=1", "display_name": "mojosound", "link": "https://stackoverflow.com/users/10956757/mojosound"}, "edited": false, "score": 0, "creation_date": 1548261985, "post_id": 54331240, "comment_id": 95481774, "body": "The conf file is long.  How do I post it?"}, {"owner": {"reputation": 31, "user_id": 10956757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627f2594779e4c6f2b45f9f736d145cc?s=128&d=identicon&r=PG&f=1", "display_name": "mojosound", "link": "https://stackoverflow.com/users/10956757/mojosound"}, "edited": false, "score": 0, "creation_date": 1548262148, "post_id": 54331240, "comment_id": 95481863, "body": "Vikram - I will try that and see.  Thanks."}, {"owner": {"reputation": 31, "user_id": 10956757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627f2594779e4c6f2b45f9f736d145cc?s=128&d=identicon&r=PG&f=1", "display_name": "mojosound", "link": "https://stackoverflow.com/users/10956757/mojosound"}, "edited": false, "score": 0, "creation_date": 1548263038, "post_id": 54331240, "comment_id": 95482317, "body": "Giacomo - the messages are not in /var/log/messages."}, {"owner": {"reputation": 31, "user_id": 10956757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627f2594779e4c6f2b45f9f736d145cc?s=128&d=identicon&r=PG&f=1", "display_name": "mojosound", "link": "https://stackoverflow.com/users/10956757/mojosound"}, "edited": false, "score": 0, "creation_date": 1548263146, "post_id": 54331240, "comment_id": 95482379, "body": "Setting the logmask was what I needed.  The messages are now being seen.  Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10956757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627f2594779e4c6f2b45f9f736d145cc?s=128&d=identicon&r=PG&f=1", "display_name": "mojosound", "link": "https://stackoverflow.com/users/10956757/mojosound"}, "is_accepted": false, "score": 0, "last_activity_date": 1578676615, "creation_date": 1578676615, "answer_id": 59686223, "question_id": 54331240, "link": "https://stackoverflow.com/questions/54331240/syslog-not-logging-with-local0-and-priority-on-debian-jessie/59686223#59686223", "title": "syslog not logging with local0 and priority on Debian Jessie", "body": "<p>rc.local was killing the rsyslog service at the end of startup.  Took a while but finally found it.</p>\n"}], "owner": {"reputation": 31, "user_id": 10956757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627f2594779e4c6f2b45f9f736d145cc?s=128&d=identicon&r=PG&f=1", "display_name": "mojosound", "link": "https://stackoverflow.com/users/10956757/mojosound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578676615, "creation_date": 1548259488, "question_id": 54331240, "link": "https://stackoverflow.com/questions/54331240/syslog-not-logging-with-local0-and-priority-on-debian-jessie", "title": "syslog not logging with local0 and priority on Debian Jessie", "body": "<p>I am running a Debian Jessie server and want to log some custom messages using syslog.  I added the following line to rsyslog.conf\nlocal0.*                       -/var/log/mojosound.log</p>\n\n<p>When I use the syslog function in my c program with this syntax:</p>\n\n<pre><code>syslog(LOG_LOCAL0, \"Test Message\");\n</code></pre>\n\n<p>I see the mojosound.log file created and updated each time I run the sample program.  However, if I try and add a priority to the command, the message goes nowhere that I can find.</p>\n\n<pre><code>  int priority = LOG_MAKEPRI(LOG_LOCAL0, LOG_INFO);\n  syslog(pritority, \"Test Message\");\n</code></pre>\n\n<p>There are no other references to local0 in the conf file and no other rules that look like they should matter.</p>\n\n<p>I am thinking that it must be an issue with my conf file but I cannot find anything in the rsyslog documentation that would point to what it is.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["android", "c", "android-ndk", "shared-libraries"], "comments": [{"owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "edited": false, "score": 0, "creation_date": 1548916258, "post_id": 54331154, "comment_id": 95717304, "body": "vote up for a good question!"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 8294830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417216669d8fd2601e9896c32e02f725?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/8294830/learner"}, "edited": false, "score": 0, "creation_date": 1548321633, "post_id": 54339565, "comment_id": 95501994, "body": "Thanks for your time to edit the question &amp; for your answer. The flat &#39;RTLD_LOCAL&#39; still resolves the function foo() present in the second library B.so. I tried dlopen( &quot;A.so&quot;, RTLD_LOCAL) to obtain the handle. Is there a way to obtain the library from which the method was resolved ? It will also be fine, if I get to know if foo() was from B.so"}, {"owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "reply_to_user": {"reputation": 117, "user_id": 8294830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417216669d8fd2601e9896c32e02f725?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/8294830/learner"}, "edited": false, "score": 0, "creation_date": 1548331244, "post_id": 54339565, "comment_id": 95507707, "body": "Maybe you can check the symbols type is external reference or not"}], "tags": [], "owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "is_accepted": false, "score": 0, "last_activity_date": 1548305534, "last_edit_date": 1592644375, "creation_date": 1548305534, "answer_id": 54339565, "question_id": 54331154, "link": "https://stackoverflow.com/questions/54331154/android-ndk-loading-the-symbol-of-only-the-main-dll-so-from-dlsym/54339565#54339565", "title": "Android NDK - Loading the symbol of only the main DLL\\SO from dlsym()", "body": "<p>According to <a href=\"https://linux.die.net/man/3/dlsym\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/dlsym</a></p>\n<blockquote>\n<p><strong>RTLD_LOCAL</strong></p>\n<p>This is the converse of <strong>RTLD_GLOBAL</strong>, and the default if\nneither flag is specified. Symbols defined in this library are not\nmade available to resolve references in subsequently loaded libraries.</p>\n</blockquote>\n<p>Try to use flag <code>RTLD_LOCAL</code> in <code>dlopen()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 8294830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417216669d8fd2601e9896c32e02f725?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/8294830/learner"}, "is_accepted": false, "score": 2, "last_activity_date": 1548338249, "creation_date": 1548338249, "answer_id": 54348327, "question_id": 54331154, "link": "https://stackoverflow.com/questions/54331154/android-ndk-loading-the-symbol-of-only-the-main-dll-so-from-dlsym/54348327#54348327", "title": "Android NDK - Loading the symbol of only the main DLL\\SO from dlsym()", "body": "<p>For anyone who want to know how I achieved the desired results.\nSince <code>RTLD_LOCAL</code> &amp; other related flags were not providing the desired results, obtain the address of the method using <code>dlsym()</code> &amp; pass that address to <code>dladdr(const void* __addr, Dl_info* __info)</code>. <code>dladdr()</code> returns adequate method details in <code>Dl_info</code>, at least what I wanted. The <code>Dl_info-&gt;dli_fname</code> pointer, contains the complete path of the DLL/Library in which the method was found.</p>\n"}], "owner": {"reputation": 117, "user_id": 8294830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417216669d8fd2601e9896c32e02f725?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/8294830/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1548338249, "creation_date": 1548259207, "last_edit_date": 1548304845, "question_id": 54331154, "link": "https://stackoverflow.com/questions/54331154/android-ndk-loading-the-symbol-of-only-the-main-dll-so-from-dlsym", "title": "Android NDK - Loading the symbol of only the main DLL\\SO from dlsym()", "body": "<p>Using Android NDK and with generated libraries (<code>.so</code>)</p>\n\n<p>I need to get the address of a method which is present only in the main SO. Using <code>dlsym()</code> after <code>dlopen()</code> will provide the address of the method but it will search for that method in all the linked SO's. But I need to get the address of the method only if that method is part of the main SO and NOT if it's part of any other linked SO's.</p>\n\n<p>For example, if I have opened <code>A.so</code> using <code>dlopen()</code> and then call <code>dlsym()</code> to check for the function <code>foo()</code>, using the handle provided by <code>dlopen()</code>, then I should get the handle only if it is part of <code>A.so</code>. currently, <code>dlsym()</code> provides the address even if <code>foo()</code> is part of <code>B.so</code> which is linked to <code>A.so</code> ( I need the <code>dlsym()</code> to search only in <code>A.so</code> and not in it's other linked or dependent libraries). </p>\n\n<p>On Linux if we use <code>dlopen()</code> with the flag '<code>RTLD_FIRST</code>' the desired behavior can be achieved. But '<code>RTLD_FIRST</code>' doesn't seem to be supported in Android. I verified the '<code>dlfcn.h</code>' header file for the macro '<code>RTLD_FIRST</code>' &amp; is not present.</p>\n\n<p>If this is completely not possible in Android-NDK, then can we somehow get the name of the SO in which the method is present. In the above example if I can get that <code>foo()</code> is part of <code>B.so</code>, I can do a simple check to determine if it's from the desired library.</p>\n\n<p>The code is in C language.\nCan anyone please let me know how this can be achieved? Thanks in advance. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 2, "creation_date": 1548258754, "post_id": 54330961, "comment_id": 95479922, "body": "You will not be able to use an array local as a result, because when you exit the routine, that storage is deallocated.   Start googling how to use <code>malloc</code>"}, {"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 1, "creation_date": 1548258879, "post_id": 54330961, "comment_id": 95479993, "body": "@infixed it won&#39;t be deallocated if marked as <code>static</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1548258989, "post_id": 54330961, "comment_id": 95480044, "body": "Compile with all warnings enabled and treat them as errors."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "reply_to_user": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "edited": false, "score": 0, "creation_date": 1548259149, "post_id": 54330961, "comment_id": 95480153, "body": "@leo, true, I missed the <code>static</code>.   But I do notice now that calc does not have a return type of <code>int*</code>, which I suspect is a problem.  While the compiler didn&#39;t complain I can&#39;t guess.   Defining it after <code>main()</code> isn&#39;t going to help much either."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548519928, "post_id": 54330961, "comment_id": 95573933, "body": "regarding: <code>void main()</code>  There are two valid signatures for the <code>main</code> function both of those signatures have a return type of <code>int</code>.  <code>int main( int argc, char *argv[] )</code>  and <code>int main( void )</code>  Suggest using the signature: <code>int main( void )</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6114, "user_id": 3070060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a936bdd7a67a345d312281305d5adde?s=128&d=identicon&r=PG&f=1", "display_name": "PaulF", "link": "https://stackoverflow.com/users/3070060/paulf"}, "is_accepted": true, "score": 3, "last_activity_date": 1548259215, "creation_date": 1548259215, "answer_id": 54331157, "question_id": 54330961, "link": "https://stackoverflow.com/questions/54330961/returning-an-array-in-c-for-calculating-number/54331157#54331157", "title": "Returning an array in c for calculating number", "body": "<p>in the calc function - </p>\n\n<pre><code>int *result[3] = {0,0,0};\n</code></pre>\n\n<p>is an array of 3 pointers to integers. </p>\n\n<p>An array of integers should just be declared as </p>\n\n<pre><code>int result[3] = {0,0,0};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1548259412, "creation_date": 1548259412, "answer_id": 54331211, "question_id": 54330961, "link": "https://stackoverflow.com/questions/54330961/returning-an-array-in-c-for-calculating-number/54331211#54331211", "title": "Returning an array in c for calculating number", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint *calc(int x, int y, int z);\nint main()\n{\n    int x,y,z;\n    printf(\"Enter any three numbers separated with a single space : \");\n    scanf(\"%d %d %d\", &amp;x, &amp;y, &amp;z);\n    int * result = calc(x,y,z);\n    printf(\"The big number is %d \\n The middle number is %d \\n The small number is %d\", result[0], result[1], result[2]);\n}\nint *calc(int x, int y, int z){ // first this the right way to declare it\n     static  int result[3] = {0,0,0};\n\n    if(x&gt;y &amp;&amp; x&gt;z){\n        result[0] = x;\n        if(y&lt;z){\n            result[2] = y;\n            result[1] = z;\n        } // second you forgot to consider the else case like this :) i 've changed it on the other ifs too\n        else{\n             result[1] = y;\n            result[2] = z;\n        }\n    }\n     if(y&gt;x &amp;&amp; y&gt;z){\n        result[0] = y;\n        if(x&lt;z){\n            result[2] = x;\n            result[1] = z;\n        }else{\n         result[1] = x;\n            result[2] = z;\n        }\n\n    }\n     if(z&gt;x &amp;&amp; z&gt;y){\n        result[0] = z;\n        if(y&lt;x){\n            result[2] = y;\n            result[1] = x;\n        }else{\n        result[1] = y;\n            result[2] = x;}\n    }\n    return result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 1, "last_activity_date": 1548259987, "last_edit_date": 1548259987, "creation_date": 1548259669, "answer_id": 54331298, "question_id": 54330961, "link": "https://stackoverflow.com/questions/54330961/returning-an-array-in-c-for-calculating-number/54331298#54331298", "title": "Returning an array in c for calculating number", "body": "<p>There are a few problems with your program.</p>\n\n<ol>\n<li><p><code>int * result = calc(x,y,z);</code> - but <code>calc</code> returns an <code>int</code> (as the return type is not specified)</p></li>\n<li><p><code>static int * result[3] = {0,0,0};</code> - <code>result</code> is an array of size <code>3</code> of pointers to int. But, you have initialized them as <code>0</code> each. This is not a problem exactly if you understand what is happening here. In fact, just a plain array would have been just fine.</p></li>\n<li><code>return result;</code> you are returning <code>result</code> but the return type of the function <code>calc</code> is int by default.</li>\n<li>There is no prototype for the <code>calc</code> function.</li>\n</ol>\n\n<p>This is what your program should look like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint * calc(int, int, int);\n\nvoid main()\n{\n    int x,y,z;\n    printf(\"Enter any three numbers separated with a single space : \");\n    scanf(\"%d %d %d\", &amp;x, &amp;y, &amp;z);\n    int * result = calc(x,y,z);\n    printf(\"The big number is %d \\n The middle number is %d \\n The small number is %d\", result[0], result[1], result[2]);\n}\nint *calc(int x, int y, int z){\n    static int result[3] = {0,0,0};\n    if(x&gt;y &amp;&amp; x&gt;z){\n        result[0] = x;\n        if(y&lt;z){\n            result[2] = y;\n            result[1] = z;\n        }\n    }else if(y&gt;x &amp;&amp; y&gt;z){\n        result[0] = y;\n        if(x&lt;z){\n            result[2] = x;\n            result[1] = z;\n        }\n    }else if(z&gt;x &amp;&amp; z&gt;y){\n        result[0] = z;\n        if(y&lt;x){\n            result[2] = y;\n            result[1] = x;\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>Having said that, your program does not seem to work as you intend it to. Have a look at the outputs below:</p>\n\n<pre><code>Enter any three numbers separated with a single space : 12 33 4\nThe big number is 33 \n The middle number is 0 \n The small number is 0\nshell returned 69\n\n\nEnter any three numbers separated with a single space : 100 3 4\nThe big number is 100 \n The middle number is 4 \n The small number is 3\nshell returned 70\n</code></pre>\n\n<p>You might want to work on the logic.</p>\n"}, {"tags": [], "owner": {"reputation": 490, "user_id": 10907391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca22ed936e2ff650833d947c8e93762?s=128&d=identicon&r=PG&f=1", "display_name": "DanBrezeanu", "link": "https://stackoverflow.com/users/10907391/danbrezeanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1548259817, "creation_date": 1548259817, "answer_id": 54331350, "question_id": 54330961, "link": "https://stackoverflow.com/questions/54330961/returning-an-array-in-c-for-calculating-number/54331350#54331350", "title": "Returning an array in c for calculating number", "body": "<ol>\n<li>Don't use static, unless you know the implications. Considering you are a beginner, try to stick to local variables only</li>\n<li>What you are trying to do is to return an array of 3 integers after it's been processed by the <code>calc</code> function. Here you have 2 choices:\n\n<ul>\n<li>Pass the \"empty\" <code>( {0,0,0} )</code> array as a parameter for the function and so <code>result</code> will be modified in the <code>main</code> scope too.</li>\n<li>Return an array that has been initialized in <code>calc</code> function.</li>\n</ul></li>\n</ol>\n\n<p>Either way you have to learn how C manages dynamically allocated memory.</p>\n\n<p>1) You declare a pointer to the data type you desire</p>\n\n<pre><code>int *result;\n</code></pre>\n\n<p>2) You allocate memory for that pointer (basically beginner-ish speaking, it becomes an array)</p>\n\n<pre><code>result = malloc(3 * sizeof(int));\n</code></pre>\n\n<p>You can either use <code>void* malloc(size_t memory_block)</code> (which doesn't initialize memory) or <code>void* calloc(size_t number_of_blocks, size_t block_size)</code> which sets all memory on 0</p>\n\n<p>3) You process your data in <code>calc</code> function using <code>result</code> array.</p>\n\n<p>4) Either way you choose do it (regarding 2.), your function should return something.\nIf you pass the array as a parameter it should return <code>void</code> else it should return <code>int*</code>, which basically translates as <em>it returns an pointer to an int</em> (and regarding that you allocated memory for that pointer, now it basically returns an array)</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1548260288, "creation_date": 1548260288, "answer_id": 54331496, "question_id": 54330961, "link": "https://stackoverflow.com/questions/54330961/returning-an-array-in-c-for-calculating-number/54331496#54331496", "title": "Returning an array in c for calculating number", "body": "<p>For various reasons, you cannot <em>return</em> an array from a function.  Usually the better option is to pass the target array as an argument to the function (assuming you know what the size of the array needs to be ahead of time):</p>\n\n<pre><code>/**\n * This version of calc doesn't return anything, so it's typed void\n */\nvoid calc( int x, int y, int z, int *result, size_t result_size )\n{\n  if ( x &gt; y &amp;&amp; x &gt; z )\n    result[0] = x;\n  ...\n}\n\n/**\n * Unless your compiler documentation *explicitly* lists void main()\n * as a valid signature, use int main( void ) instead.  \n */\nint main( void )\n{\n  int result[3] = {0, 0, 0};\n  ...\n  calc( x, y, z, result, sizeof result / sizeof result[0] );\n  ...\n}\n</code></pre>\n\n<p>Unless your function is messing with a 0-terminated string (or some other sentinel value in the array contents), you need to pass the array size as a separate parameter.  Array expressions lose their \"array-ness\" when passed as a function argument, so you need to track their size separately (the <code>sizeof arr / sizeof arr[0]</code> won't work on a pointer).  </p>\n"}], "owner": {"reputation": 3, "user_id": 10956690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc14583a9893444b72a17901179a78f?s=128&d=identicon&r=PG&f=1", "display_name": "Dipon Saha", "link": "https://stackoverflow.com/users/10956690/dipon-saha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 54331157, "answer_count": 5, "score": 0, "last_activity_date": 1548260288, "creation_date": 1548258566, "last_edit_date": 1548258703, "question_id": 54330961, "link": "https://stackoverflow.com/questions/54330961/returning-an-array-in-c-for-calculating-number", "title": "Returning an array in c for calculating number", "body": "<p>As I am a beginner with c programming. I was trying to return an array in my program but it's not working properly.\nHere is the code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int x,y,z;\n    printf(\"Enter any three numbers separated with a single space : \");\n    scanf(\"%d %d %d\", &amp;x, &amp;y, &amp;z);\n    int * result = calc(x,y,z);\n    printf(\"The big number is %d \\n The middle number is %d \\n The small number is %d\", result[0], result[1], result[2]);\n}\ncalc(int x, int y, int z){\n    static int * result[3] = {0,0,0};\n    if(x&gt;y &amp;&amp; x&gt;z){\n        result[0] = x;\n        if(y&lt;z){\n            result[2] = y;\n            result[1] = z;\n        }\n    }else if(y&gt;x &amp;&amp; y&gt;z){\n        result[0] = y;\n        if(x&lt;z){\n            result[2] = x;\n            result[1] = z;\n        }\n    }else if(z&gt;x &amp;&amp; z&gt;y){\n        result[0] = z;\n        if(y&lt;x){\n            result[2] = y;\n            result[1] = x;\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>I've searched a lot but either i don't understand or the code isn't working for me.</p>\n"}, {"tags": ["c", "pointers", "memory", "malloc"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1548260953, "post_id": 54330888, "comment_id": 95481206, "body": "Not related but you probably mean <code>A = malloc(sizeof(double*)*n);</code> instead of <code>A = malloc(sizeof(double*)*n*m);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1548258520, "creation_date": 1548258520, "answer_id": 54330942, "question_id": 54330888, "link": "https://stackoverflow.com/questions/54330888/function-that-calculates-memory-reserved-in-different-function/54330942#54330942", "title": "Function that calculates memory reserved in different function", "body": "<p>You simply cannot derive the size of memory (m)alloced somewhere when solely having a pointer to that memory. You need to pass the dimension(s) separately.</p>\n"}], "owner": {"reputation": 65, "user_id": 9302611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2da9f5cc6541a37679bb2d33e7992ae?s=128&d=identicon&r=PG&f=1", "display_name": "alpitaka", "link": "https://stackoverflow.com/users/9302611/alpitaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548260822, "creation_date": 1548258360, "last_edit_date": 1548260598, "question_id": 54330888, "link": "https://stackoverflow.com/questions/54330888/function-that-calculates-memory-reserved-in-different-function", "title": "Function that calculates memory reserved in different function", "body": "<p>I have two functions, one that creates a double array,fill it with zeros and reserve memory for it. The other function 'noarr' is supposed to calculate the memory I have reserved in the 'myarr' function for the array. I'm pretty sure I have successfully filled the array with zeros,\nbut I am not sure how I can access the array from another function? Am I on the right track of doing it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid noarr(double *** myarr(int n, int m));\ndouble** myarr(int n, int m);\n\ndouble** myarr(int n, int m){\n  int i, j;\n  double ** A;\n\n  A = malloc(sizeof(double*)*n*m);\n\n  for(i = 0; i &lt; n; i++){\n    A[i] = malloc(m*sizeof(double));\n    for(j = 0; j &lt; m; j++){\n        A[i][j] = 0;\n    }\n  }\n  return A;\n}\n\n\nvoid noarr(double *** myarr(int n, int m)){\n  printf(\"%d\\n\", sizeof(myarr));\n}\n\nint main(int argc, const char * argv[]){  \n  int i,j;\n  int n,m;\n  double (*A)[n];\n  A = myarr(n,m);\n  printf(\"%.1f   %.1f \\n\",A[0][0],A[2][9]);\n  noarr(A);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures", "struct", "types", "language-lawyer"], "comments": [{"owner": {"reputation": 52664, "user_id": 717214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9075315c5f4b734a8f2567be54a4cc45?s=128&d=identicon&r=PG", "display_name": "Aleks G", "link": "https://stackoverflow.com/users/717214/aleks-g"}, "edited": false, "score": 0, "creation_date": 1548256830, "post_id": 54330283, "comment_id": 95478831, "body": "Have you tried actually doing it?  I suspect if you try to link the two units, you&#39;ll get a linker error about duplicate symbol."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "reply_to_user": {"reputation": 52664, "user_id": 717214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9075315c5f4b734a8f2567be54a4cc45?s=128&d=identicon&r=PG", "display_name": "Aleks G", "link": "https://stackoverflow.com/users/717214/aleks-g"}, "edited": false, "score": 0, "creation_date": 1548256862, "post_id": 54330283, "comment_id": 95478851, "body": "@AleksG Yes, it works with gcc and clang with no linker error."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548257152, "post_id": 54330283, "comment_id": 95479014, "body": "@GovindParmar: No, it is not."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548257861, "post_id": 54330283, "comment_id": 95479400, "body": "@EricPostpischil The question itself may not be a duplicate but the answer OP is looking for (do tag and member names affect compatibility?) is discussed in the accepted answer for that question"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548258144, "post_id": 54330283, "comment_id": 95479558, "body": "@GovindParmar: A question is a duplicate if it duplicates another question. If it does not duplicate another question, it is not a duplicate. The fact that an answer to a different question provides information relevant to a question does not make a question a duplicate. When somebody else is looking, in the future, for information on Question A, they will not know to look for different Question B. They will search for Question A and might not find or might overlook closed questions. They will not be served by the fact that some different question contains an answer."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548259923, "post_id": 54330283, "comment_id": 95480599, "body": "@EricPostpischil We can discuss this further on <a href=\"https://meta.stackoverflow.com/questions/379293/closing-as-a-duplicate-based-on-answer-content\">Meta</a>"}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 4, "last_activity_date": 1548257449, "creation_date": 1548257449, "answer_id": 54330625, "question_id": 54330283, "link": "https://stackoverflow.com/questions/54330283/structs-with-same-name-and-same-meber-types-but-different-member-names/54330625#54330625", "title": "structs with same name and same meber types but different member names", "body": "<p>C 2018 6.2.7 1 specifies the conditions for two structure types declared in separate translation units to be compatible (emphasis added):</p>\n\n<blockquote>\n  <p>\u2026\u00a0Moreover, two structure, union, or enumerated types declared in separate translation units are compatible if their tags and members satisfy the following requirements: If one is declared with a tag, the other shall be declared with the same tag. If both are completed anywhere within their respective translation units, then the following additional requirements apply: there shall be a one-to-one correspondence between their members such that each pair of corresponding members are declared with compatible types; if one member of the pair is declared with an alignment specifier, the other is declared with an equivalent alignment specifier; and <strong>if one member of the pair is declared with a name, the other is declared with the same name</strong>\u2026</p>\n</blockquote>\n\n<p>Since <code>struct my_struct</code> is declared with different member names in the different translation units, the <code>struct my_struct</code> in one translation unit is not compatible with the <code>struct my_struct</code> in another translation unit.</p>\n\n<p>This causes the <code>my_struct_init</code> and other functions declared in one translation unit not to be compatible with the <code>my_struct_init</code> and other functions declared and defined in the other translation unit.</p>\n"}], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "closed_date": 1548267973, "accepted_answer_id": 54330625, "answer_count": 1, "score": 3, "last_activity_date": 1548257449, "creation_date": 1548256351, "last_edit_date": 1548257430, "question_id": 54330283, "link": "https://stackoverflow.com/questions/54330283/structs-with-same-name-and-same-meber-types-but-different-member-names", "closed_reason": "Duplicate", "title": "structs with same name and same meber types but different member names", "body": "<p>In the first compilation unit:</p>\n\n<pre><code>/* From .h file */\n\nstruct my_struct {\n    int foo;\n    long bar;\n};\n\nvoid my_struct_init(struct my_struct*);\nint my_struct_get_int(struct my_struct*);\nlong my_struct_get_long(struct my_struct*);\n\n/* From .c file */\n\nvoid my_struct_init(struct my_struct* o) {\n    o-&gt;foo = 0;\n    o-&gt;bar = 0L;\n}\n\nint my_struct_get_int(struct my_struct* o) {\n    return o-&gt;foo;\n}\n\nlong my_struct_get_long(struct my_struct* o) {\n    return o-&gt;bar;\n}\n</code></pre>\n\n<p>In the second compilation unit:</p>\n\n<pre><code>/* From .h file */\n\nstruct my_struct {\n    /* Named differently */\n    int foo_different;\n    long bar_different;\n};\n\nvoid my_struct_init(struct my_struct*);\nint my_struct_get_int(struct my_struct*);\nlong my_struct_get_long(struct my_struct*);\n\n/* From .c file */\n\nint main(void) {\n    struct my_struct o;\n    my_struct_init(&amp;o);\n    if (o.foo_different != 0 || o.bar_different != 0L) {\n        /* (Just assume EXIT_FAILURE is 1) */\n        return 1;\n    }\n    o.foo_different = 1;\n    o.bar_different = 2L;\n    if (my_struct_get_int(&amp;o) != 1 || my_struct_get_long(&amp;o) != 2L) {\n        return 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Although the two structs have the same name and the members have the same types and order, the members have different names.</p>\n\n<p>Does that mean that the above is not defined? Or will this always succeed?</p>\n\n<p>(For context, I am using this to prefix members with \"_my_type_private_\" if a header file is included normally, but kept the same if it is included from an internal implementation file, so that the type is not incomplete but it is harder to modify the struct accidentally)</p>\n\n<p>EDIT: the question is not a duplicate of that question but it does provide the correct answer:</p>\n\n<blockquote>\n  <p>Moreover, two structure, union, or enumerated types declared in separate translation units are compatible if [for each pair of member declarations] one member of the pair is declared with a name, the other is declared with the same name</p>\n</blockquote>\n\n<p>So they are not compatible types.</p>\n"}, {"tags": ["c", "udp", "structure", "transmission"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1548257712, "post_id": 54330226, "comment_id": 95479305, "body": "How can you compile with <code>buffer[n] = &quot;\\0&quot;;</code> rather than <code>buffer[n] = &#39;\\0&#39;;</code> ?"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1548258700, "post_id": 54330226, "comment_id": 95479892, "body": "Please show the declaration of <code>buffer</code> and <code>MAXLINE</code>. With &quot;the data is always zero&quot; do you mean <code>recvbytes = 3</code> and <code>&quot;recvFromBoard.a = 0,recvFromBoard.b = 0,recvFromBoard.c = 0</code>?"}, {"owner": {"reputation": 1, "user_id": 10919942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XFUCu2Pup8I/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbpiuKmAaNBf65cG1fbzoRxu3_ecA/mo/photo.jpg?sz=128", "display_name": "viayta wang", "link": "https://stackoverflow.com/users/10919942/viayta-wang"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1548405803, "post_id": 54330226, "comment_id": 95537541, "body": "@bruno,yes,you remind me of this, but I actually can compile this symbol &quot;\\0&quot; in visual studio 2013"}, {"owner": {"reputation": 1, "user_id": 10919942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XFUCu2Pup8I/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbpiuKmAaNBf65cG1fbzoRxu3_ecA/mo/photo.jpg?sz=128", "display_name": "viayta wang", "link": "https://stackoverflow.com/users/10919942/viayta-wang"}, "edited": false, "score": 0, "creation_date": 1548406034, "post_id": 54330226, "comment_id": 95537641, "body": "<code>MAXLINE = 20;char buffer[MAXLINE];</code>"}], "owner": {"reputation": 1, "user_id": 10919942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XFUCu2Pup8I/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbpiuKmAaNBf65cG1fbzoRxu3_ecA/mo/photo.jpg?sz=128", "display_name": "viayta wang", "link": "https://stackoverflow.com/users/10919942/viayta-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548258504, "creation_date": 1548256156, "last_edit_date": 1548258504, "question_id": 54330226, "link": "https://stackoverflow.com/questions/54330226/send-a-structure-to-server-using-udp-why-the-server-get-the-wrong-number", "title": "Send a structure to server using UDP, why the server get the wrong number?", "body": "<p>I am trying to send a structure to a server, but when I run the server, the data is always zero.</p>\n\n<p>Here is the define of the structure in both side of client and server:</p>\n\n<pre><code>typedef struct {\nunsigned char a;     \nunsigned char b;\nunsigned char c;\n}S_sendtoScreen;\n</code></pre>\n\n<p>The content of client main function below:</p>\n\n<pre><code>S_sendtoScreen sendtoScreen,net_sendtoScreen;\nsendtoScreen.a = 1;\nsendtoScreen.b = 2;\nsendtoScreen.c = 3;\n\nnet_sendtoScreen.a = htons(sendtoScreen.a);\nnet_sendtoScreen.b = htons(sendtoScreen.b);\nnet_sendtoScreen.c = htons(sendtoScreen.c);\n\n// Filling client information \nservaddr.sin_family = AF_INET; // IPv4                      \nservaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\u673a IP\nservaddr.sin_port = htons(8882);\n\n// Filling server information       loccal port 8082\nclientaddr.sin_family = AF_INET;\nclientaddr.sin_port = htons(8881);\nclientaddr.sin_addr.s_addr =htonl(INADDR_ANY);\n\nif (bind(sockfd, (const struct sockaddr *)&amp;clientaddr, \n      sizeof(clientaddr)) == SOCKET_ERROR)\n{\n    perror(\"bind failed\");\n    getchar();\n}\n\nint n, len;\nlen = sizeof(struct sockaddr);\nwhile (1){\n    //int nochecksum = 0;\n    //setsockopt(sockfd, IPPROTO_IP, IPPROTO_UDP, &amp;nochecksum, sizeof(nochecksum));\n    memcpy(buffer,&amp;net_sendtoScreen,sizeof(net_sendtoScreen));\n    if((n = sendto(sockfd, (const char *)buffer, sizeof(buffer),\n            0, (const struct sockaddr *) &amp;servaddr,sizeof(servaddr)))&lt;0)\n            {\n                printf(\"send error\\n\");\n            }\n    printf(\"n=%d\", n);\n    printf(\"struc sendtoScreen message sent.\\n\");\n    Sleep(200); \n}\n</code></pre>\n\n<p>And here is the server code below:</p>\n\n<pre><code>servaddr.sin_family = AF_INET; // IPv4 \nservaddr.sin_addr.s_addr = htonl(INADDR_ANY);\nservaddr.sin_port = htons(8882);\n\ncliaddr.sin_family = AF_INET; // IPv4 \ncliaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\ncliaddr.sin_port = htons(8881);\n</code></pre>\n\n<p>using recvfrom() accept the structure:</p>\n\n<pre><code>int len, n,m;\nlen = sizeof(struct sockaddr_in);\nwhile (1){\n    FD_ZERO(&amp;fds);\n    FD_SET(sockfd, &amp;fds);\n    rc = select(0, &amp;fds, NULL, NULL, &amp;wait);\n    if (rc == 0)\n    {\n        printf(\"time out\\n\");\n    }\n    else if (rc &lt; 0){\n        perror(\"select() error\\n\");\n    }\n    else if (FD_ISSET(sockfd, &amp;fds))\n    {\n        n = recvfrom(sockfd, (char *)buffer, MAXLINE, 0, \n            (struct sockaddr *) &amp;cliaddr, &amp;len);\n        if (n &lt; 0){\n            printf(\"recvfrom() error,can't recieve the package\\n\");\n        }\n        else{\n            printf(\"recvbytes = %d\\n\", n);\n            buffer[n] = \"\\0\"; \n            memcpy(&amp;net_recvFromBoard, buffer, sizeof(buffer));\n            recvFromBoard.a = ntohs(net_recvFromBoard.a);\n            recvFromBoard.b = ntohs(net_recvFromBoard.b);\n            recvFromBoard.c = ntohs(net_recvFromBoard.c);\n\n    //this three value always equal to zero         \n            printf(\"recvFromBoard.a = %u,recvFromBoard.b = \n              %u,recvFromBoard.c = %u\", net_recvFromBoard.a, \n              net_recvFromBoard.b,net_recvFromBoard.c);\n        }   \n    }\n</code></pre>\n\n<p>Hope for your help, thanks in advance.</p>\n"}, {"tags": ["c", "error-handling", "char", "atoi"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1548255835, "post_id": 54330130, "comment_id": 95478243, "body": "<i>&quot;Is it because ch is a char nor string eg. char ch; and not char ch[20];&quot;</i> That&#39;s right. It works on strings and there&#39;s no overload for just a single <code>char</code>."}, {"owner": {"reputation": 120, "user_id": 10845583, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3a6JmuW6DFw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca81X3N_lQyQQvH_Ql0OS1sR-Q2sA/mo/photo.jpg?sz=128", "display_name": "Mr Josh", "link": "https://stackoverflow.com/users/10845583/mr-josh"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1548256005, "post_id": 54330130, "comment_id": 95478342, "body": "so using atoi() function possible in anyway @Blaze and what do you mean by overload?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1548256237, "post_id": 54330130, "comment_id": 95478483, "body": "If you want to transform a <code>char</code> that represents a number from 0 to 9 to the respective integer, simply subtract <code>&#39;0&#39;</code> like you&#39;re already doing in your code. If you want it to keep the same value (so for instance  <code>&#39;0&#39;</code> is <code>48</code> in ASCII), just assign the char to the int variable."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1548257099, "post_id": 54330130, "comment_id": 95478987, "body": "<code>atoi(ch)</code> shouldn&#39;t even compile. Your compiler is either terribly bad or it is not configured correctly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548257118, "post_id": 54330130, "comment_id": 95478994, "body": "Add <code>default: printf(&quot;&lt;%d&gt;\\n&quot;, ch);</code> to see a problem."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1548257488, "post_id": 54330130, "comment_id": 95479193, "body": "Compile with all warnings enabled and treat them as errors, especially the warning displayed at the line containing <code>atoi</code>. Hint: <code>atoi</code> expects a pointer to a string, but you&#39;re passing a <code>char</code>. You&#39;re mixung up strings and chars, read the chapter dealing with strings in your C text book."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548257773, "post_id": 54330130, "comment_id": 95479348, "body": "<code>if(tos==MAX)</code> test is off by 1."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1548257824, "post_id": 54330130, "comment_id": 95479378, "body": "You pass a <code>char</code> where a <code>char*</code> is expected. The documentation to <code>atoi()</code> should have told you that and the compiler should have warned you."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1548257871, "creation_date": 1548257871, "answer_id": 54330763, "question_id": 54330130, "link": "https://stackoverflow.com/questions/54330130/atoi-does-not-seem-to-be-working-for-my-program/54330763#54330763", "title": "atoi does not seem to be working for my program", "body": "<blockquote>\n  <p>Is it because ch is a char nor string eg. char ch; and not char ch[20];</p>\n</blockquote>\n\n<p>Yes. <code>atoi(ch)</code> is not even valid C and is not allowed to compile cleanly.</p>\n\n<p>In this case you can create a temporary string based on <code>ch</code> and a null terminator. For example through a compound literal: <code>(char[2]){ch, '\\0'}</code>.</p>\n\n<p>And you should never use <code>atoi</code> for any purpose, since it has poor error handling and is a completely superfluous function. Use the <code>strtol</code> family of functions instead.</p>\n\n<p>You can call <code>strtol</code> like this:</p>\n\n<pre><code>strtol( (char[2]){ch, '\\0'}, // string to convert from\n        NULL,                // end pointer, not used, set to NULL\n        10 );                // base 10 = decimal\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>printf(\" %d \", (int)strtol( (char[2]){ch, '\\0'}, NULL, 10) );\n</code></pre>\n\n<p>Which is completely equivalent to the more readable:</p>\n\n<pre><code>char tmp[2] = { ch, '\\0' };\nint result = (int) strtol(tmp, NULL, 10);\nprintf(\" %d \", result);\n</code></pre>\n"}], "owner": {"reputation": 120, "user_id": 10845583, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3a6JmuW6DFw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca81X3N_lQyQQvH_Ql0OS1sR-Q2sA/mo/photo.jpg?sz=128", "display_name": "Mr Josh", "link": "https://stackoverflow.com/users/10845583/mr-josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548258006, "creation_date": 1548255774, "question_id": 54330130, "link": "https://stackoverflow.com/questions/54330130/atoi-does-not-seem-to-be-working-for-my-program", "title": "atoi does not seem to be working for my program", "body": "<p>here is a simple program for postfix calculator using stack, but the atoi() causes it to crash. Why is it happening? \nI have tried converting the char to string using ch-'0' and it works but the atoi() function for char to int conversion does not seem to work in this case.</p>\n\n<p>Is it because ch is a char nor string \neg. char ch; and not char ch[20];</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAX 100\nint num[MAX],tos=-1;\n\npush(int x)\n{\n    if(tos==MAX)\n    {\n        printf(\"the stack is full\");\n    }\n    else\n    {\n        printf(\"  l\");\n        tos++;\n        num[tos]=x;\n    }\n}\nint pop()\n{\n    if(tos&lt;0)\n    {\n        printf(\"stack underflow\");\n    }\n    else\n    return num[tos--];\n}\nint main()\n{\n    char postfix[MAX],exp[MAX],ch,val;\n    int a,b;\n    printf(\"enter the postfix expression\");\n    fgets(postfix,MAX,stdin);\n    strcpy(exp,postfix);\n    for(int i=0;i&lt;strlen(postfix);i++)\n    {\n         printf(\" xox \");\n        ch=postfix[i];\n        if(isdigit(ch))\n        {\n            push(ch - '0');\n            printf(\" %d \",atoi(ch));\n        }\n      else\n      {\n          printf(\"%d\",tos);\n          a=pop();\n          b=pop();\n          switch(ch)\n          {\n          case '+':\n            val=a+b;\n            break;\n          case '-':\n            val=a-b;\n            break;\n          case '*':\n            val=a*b;\n            break;\n          case '/':\n            val=a/b;\n            break;\n        }\n        printf(\"%d\",val);\n        push(val);\n      }\n    }\n    printf(\"the result of the expression %s = %d\",exp,num[0]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1548255766, "post_id": 54330088, "comment_id": 95478205, "body": "What&#39;s <code>u_func</code>, <code>u_file</code>, and <code>u_msg</code>? I only see <code>func</code>, <code>file</code>, and <code>msg</code> being defined."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1548255769, "post_id": 54330088, "comment_id": 95478207, "body": "No, you cannot. Even less with ASLR. There are cases where you know that some pointers cannot point to some types, but that&#39;s it."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1548255791, "post_id": 54330088, "comment_id": 95478220, "body": "I think this will largely depend on your platform ..."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1548255879, "post_id": 54330088, "comment_id": 95478267, "body": "<i>De facto</i> or by the standard? Afaik, on Linux, Windows and Mac, the result of <code>malloc</code> is always 16 byte aligned, so you could use the 4 LSB for additional storage. I think LLVM does exactly that. The standard does, of course, not guarantee anything like that."}, {"owner": {"reputation": 914, "user_id": 287933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c3a4ca1f47c52d346edabbec92535c0?s=128&d=identicon&r=PG", "display_name": "Machta", "link": "https://stackoverflow.com/users/287933/machta"}, "edited": false, "score": 0, "creation_date": 1548255880, "post_id": 54330088, "comment_id": 95478269, "body": "Sorry there are some ugly casts I left out."}, {"owner": {"reputation": 522, "user_id": 5446052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e342174339c93b895a1cd3c0f57d905?s=128&d=identicon&r=PG&f=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/5446052/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1548255910, "post_id": 54330088, "comment_id": 95478286, "body": "What is the target language? Please read descriptions like <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> before applying the tags!"}, {"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "edited": false, "score": 0, "creation_date": 1548256022, "post_id": 54330088, "comment_id": 95478355, "body": "Pretty sure some of the bits on a pointer for x64 arch are guaranteed to be the same. I think Clang uses these bits to store data for its vector like data structure. Google &quot;tagged pointer&quot;. I don&#39;t think it&#39;s portable, though."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1548256048, "post_id": 54330088, "comment_id": 95478368, "body": "<code>std::uintptr_t</code> seems better than <code>unsigned long</code>."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1548256095, "post_id": 54330088, "comment_id": 95478393, "body": "0x400 = 1k which isn&#39;t too bad of a guess but ..."}, {"owner": {"reputation": 914, "user_id": 287933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c3a4ca1f47c52d346edabbec92535c0?s=128&d=identicon&r=PG", "display_name": "Machta", "link": "https://stackoverflow.com/users/287933/machta"}, "edited": false, "score": 0, "creation_date": 1548256140, "post_id": 54330088, "comment_id": 95478419, "body": "The language of the example is C"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1548256247, "post_id": 54330088, "comment_id": 95478488, "body": "On embedded systems, the values depend on what is implemented by the hardware.  Some systems may allocate the entire address range, while others may only implement blocks or ranges of addresses.  The compiler can&#39;t know this information unless you provide it to the compiler."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1548256423, "post_id": 54330088, "comment_id": 95478584, "body": "IMHO, detecting an invalid pointer is easier done in hardware.  There are devices that can be programmed to check if an address is within a range or not, then generate an exception.  Many processors can throw an exception if there was an error fetching from an address, a.k.a. dereferencing a pointer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548258310, "post_id": 54330088, "comment_id": 95479666, "body": "There&#39;s nothing C++ specific to this question so it should have been tagged C only. Too late now though, answers are already posted."}, {"owner": {"reputation": 522, "user_id": 5446052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e342174339c93b895a1cd3c0f57d905?s=128&d=identicon&r=PG&f=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/5446052/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1558520138, "post_id": 54330088, "comment_id": 99125859, "body": "Just to mention the obvious: Null pointers are probably not valid for use as arguments to the function above."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1548256434, "post_id": 54330166, "comment_id": 95478589, "body": "A bit related, but &quot;safely derived pointer&quot; isn&#39;t really about memory regions like the example attempts to check - it&#39;s more about a concern that a pointer which has exactly the same byte representation as a valid pointer might not be correct to use."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1548256674, "post_id": 54330166, "comment_id": 95478734, "body": "@aschepler the way I read it it applies. Standard outlines what safety derived pointers are (<a href=\"http://eel.is/c++draft/basic.stc.dynamic.safety\" rel=\"nofollow noreferrer\">eel.is/c++draft/basic.stc.dynamic.safety</a>) and than says it&#39;s implementation defined if non-safely derived pointers are allowed. Which to me is a direct answer to initial question (&quot;Does the standard restrict possible memory addresses ... which I would interpret as possible values for a pointer&quot;)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1548256911, "post_id": 54330166, "comment_id": 95478875, "body": "@SergeyA But does the standard specify a subset of memory address values that could potentially be safely derived?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1548257054, "post_id": 54330166, "comment_id": 95478962, "body": "@eerorika Not to my knowledge :)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1548255908, "creation_date": 1548255908, "answer_id": 54330166, "question_id": 54330088, "link": "https://stackoverflow.com/questions/54330088/what-are-the-possible-values-for-a-valid-pointer/54330166#54330166", "title": "What are the possible values for a valid pointer?", "body": "<p>The standard term is 'safely derived pointer'. It is implementation defined if you can use not safely derived pointers - for example, numeric constants - in your program.</p>\n\n<p>You can check pointer safety model with <code>std::pointer_safety</code>: <a href=\"https://en.cppreference.com/w/cpp/memory/gc/pointer_safety\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/memory/gc/pointer_safety</a></p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1548258646, "last_edit_date": 1548258646, "creation_date": 1548256779, "answer_id": 54330425, "question_id": 54330088, "link": "https://stackoverflow.com/questions/54330088/what-are-the-possible-values-for-a-valid-pointer/54330425#54330425", "title": "What are the possible values for a valid pointer?", "body": "<blockquote>\n  <p>Does the standard restrict possible memory addresses (which I would interpret as possible values for a pointer)?</p>\n</blockquote>\n\n<p>The C++ (nor C to my knowledge) standard does not restrict possible memory addresses.</p>\n\n<blockquote>\n  <p>Can your code rely on some values to be never used and still be fully portable?</p>\n</blockquote>\n\n<p>A program that unconditionally relies on such implementation defined (or unspecified by standard) detail would not be fully portable to all concrete and theoretical standard implementations.</p>\n\n<p>However, using platform detection macros, it may be possible to make the program portable by relying on the detail conditionally only on systems where the detail is reliable.</p>\n\n<hr>\n\n<p>P.S. Another thing that you cannot technically rely on: <code>unsigned long</code> is not guaranteed to be able to represent all pointer values (<code>uintptr_t</code> is).</p>\n"}], "owner": {"reputation": 914, "user_id": 287933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c3a4ca1f47c52d346edabbec92535c0?s=128&d=identicon&r=PG", "display_name": "Machta", "link": "https://stackoverflow.com/users/287933/machta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1558521514, "creation_date": 1548255654, "last_edit_date": 1558521514, "question_id": 54330088, "link": "https://stackoverflow.com/questions/54330088/what-are-the-possible-values-for-a-valid-pointer", "title": "What are the possible values for a valid pointer?", "body": "<p>Does the standard restrict possible memory addresses (which I would interpret as possible values for a pointer)? Can your code rely on some values to be never used and still be fully portable?</p>\n\n<p>I just saw this in our code base (it's a C library), and I was wondering if it would be always OK. I'm not sure what the author meant by this, but it's obviously not just a check for possible null.</p>\n\n<pre><code>int LOG(const char* func, const char* file,\n                 int lineno, severity level, const char* msg)\n{\n    const unsigned long u_func = (unsigned long)func;\n    const unsigned long u_file = (unsigned long)file;\n    const unsigned long u_msg   = (unsigned long)msg;\n\n    if(u_func &lt; 0x400 || u_file &lt; 0x400 || u_msg  &lt; 0x400 ||\n       (unsigned)lineno &gt; 10000 || (unsigned)level &gt; LOG_DEBUG)\n    {\n        fprintf(stderr, \"log function called with bad args\");\n        return -1;\n    }\n    //...\n}\n</code></pre>\n\n<p>Another possible use case for this would be storing boolean flags inside a pointer, instead in a separate member variable as an optimization. I think the C++11 small string optimization does this, but I might be wrong.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If it's implementation defined, as some of you have mentioned, can you detect it at compile time?</p>\n"}, {"tags": ["c", "algorithm", "sorting", "permutation"], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1548257834, "creation_date": 1548257834, "answer_id": 54330745, "question_id": 54329924, "link": "https://stackoverflow.com/questions/54329924/how-to-calculate-all-possible-permutations-for-a-tree-diagram/54330745#54330745", "title": "How to calculate all possible permutations for a tree diagram", "body": "<p>You should look into the concept of \"abstract datatypes\" as your current design won't scale. Every time you add a new level, you need to create a new array and then update your code to know about this new array.</p>\n\n<p>And the process of searching one level before moving on to the next is known as \"breadth first\" searching. If you create a list type, you can add all the nodes from the current level to the list and then as you process the list, you add the child nodes to the end of the list.</p>\n\n<p>But that isn't really applicable to generating all permutations - doing \"depth first\" is more suitable as you travel down the tree and when you can't go no further, the path you've taken is a permutation.</p>\n"}], "owner": {"reputation": 1, "user_id": 6827344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc5b79bb153792f357b9c77953707b6?s=128&d=identicon&r=PG&f=1", "display_name": "Amr", "link": "https://stackoverflow.com/users/6827344/amr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548257834, "creation_date": 1548255158, "question_id": 54329924, "link": "https://stackoverflow.com/questions/54329924/how-to-calculate-all-possible-permutations-for-a-tree-diagram", "title": "How to calculate all possible permutations for a tree diagram", "body": "<p>I have a problem of tee diagram that represents city roads and need to calculate all possible ways -permutations- to establish these roads. </p>\n\n<p>The role is \" you can not start level 2 without finishing level 1\" and so on for higher levels </p>\n\n<p>this image illustrates the idea<a href=\"https://i.stack.imgur.com/HmSKr.png\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>i tried to think of it as an array for every level and then a single column for every branch like this </p>\n\n<pre><code>level1=[1 2]\nlevel2=[3 4\n        5 6]\n</code></pre>\n\n<p>and \nl</p>\n\n<pre><code>;evel1=[1 2 3]\nlevel2=[4 5 0; \n       6 7 8; \n       9 10 0]\nlevel3=[11 12;\n13 0;\n14 15;\n16 17;\n0 0;\n0 0;\n18 19]\n</code></pre>\n\n<p>But i stopped and have no idea how to complete. so i need to know how to think in this kind of problems. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1548254731, "post_id": 54329743, "comment_id": 95477527, "body": "Please indent your code properly. Consider posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548255135, "post_id": 54329743, "comment_id": 95477812, "body": "Create look-up tables instead of this."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548255445, "post_id": 54329743, "comment_id": 95478014, "body": "Just by looking on this code for 5 seconds I can tell you that the number of lines of this code can probably be divided by a factor of 8 or so."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1548257783, "post_id": 54329743, "comment_id": 95479350, "body": "What result do you want to achieve? Should <code>i</code>  and <code>j</code> somehow correspond to the characters of the input file?"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1548255298, "creation_date": 1548255298, "answer_id": 54329972, "question_id": 54329743, "link": "https://stackoverflow.com/questions/54329743/looping-through-array-doesnt-seem-to-work/54329972#54329972", "title": "Looping through array doesnt seem to work", "body": "<p>Yes of course it does that:</p>\n\n<p>For <strong><em>each</em></strong> character read, iterare over <strong><em>all</em></strong> array elements and for each check if the character read is in a-zA-Z. If so, (and that will always be true) then set the array element to 0 or 1 as per your if statements. In effect the array values will all be based on the last character read.</p>\n\n<p>Now, what you really want is unclear so I can't give a full solution.</p>\n"}, {"tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": true, "score": 0, "last_activity_date": 1548260598, "last_edit_date": 1548260598, "creation_date": 1548258441, "answer_id": 54330916, "question_id": 54329743, "link": "https://stackoverflow.com/questions/54329743/looping-through-array-doesnt-seem-to-work/54330916#54330916", "title": "Looping through array doesnt seem to work", "body": "<p>Something like this might work.<br>\nCreate an array of valid characters.<br>\nRead a character from the file into <code>znak</code>.<br>\n<code>strchr</code> will check to see if <code>znak</code> is one of the valid characters.<br>\nIf so, set a zero. If not, set a one.<br>\nIncrement <code>j</code>. If <code>j</code> is equal to <code>c</code>, reset <code>j</code> to zero and increment <code>i</code>.<br>\nRead another character.<br>\nWhen <code>i</code> is equal to <code>a</code>, the array is full. <code>Break</code> out of the loop.</p>\n\n<pre><code>char valid[] = \"aBcDeFgHiJkLmNoPqRsTuVwXyZ\";\nwhile ( (znak = fgetc(plik2)) != EOF) {\n    if ( strchr ( valid, znak)) {\n        tab_a[i][j] = 0;\n    }\n    else {\n        tab_a[i][j] = 1;\n    }\n    j++;\n    if ( j &gt;= c) {\n        j = 0;\n        i++;\n        if ( i &gt;= a) {\n            break;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10956221, "user_type": "registered", "profile_image": "https://graph.facebook.com/444574806076084/picture?type=large", "display_name": "Kamil G&#243;rny", "link": "https://stackoverflow.com/users/10956221/kamil-g%c3%b3rny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 54330916, "answer_count": 2, "score": 1, "last_activity_date": 1548260598, "creation_date": 1548254560, "last_edit_date": 1548255294, "question_id": 54329743, "link": "https://stackoverflow.com/questions/54329743/looping-through-array-doesnt-seem-to-work", "title": "Looping through array doesnt seem to work", "body": "<p>This program supposed to go through the file and when character matches one of the given patterns assign either 0 or 1 to its array cell. And later display hidden message from spaces and stars. But it assigns either 0 or 1 to all cells in the array based on the last character in the file.</p>\n\n<p>EXAMPLE FILE TO LOOP THROUGH(30A.dat):\nZuVbJJgFyMuVaXsRkgPuHJmNgiNPFJmHDVRFmPcNLgDykaFugooidgyBhgNEsVdXCcsaYyaYQEGsNhpIxOJHyFjluiNvoFJLSTRVlEPPHGNowGeavuRnNySivmuQXXLgxDKRXPutaBOgNYiZvtPwoYHXEFcrVVOJwirHoOwmxDqFILoHfygqNcBfXLsDMXtNymytqEgCeoMoIosuctXbsmDUsmfBwzJqBMyTHjaunrlTWjzxMuBhvUGIxRAqcrFheCGUzlhLKeLHAcsvaZCaNyzuwiMgkVBbLzBHPUiXlXDXTIwjqTHvIeWFTXLdDYccceSQBfIXDagvZPesYQdjeeUVZVqdyxPcFwxaWJywgWXviFkyKoz</p>\n\n<pre><code>int tab_a[a][c];\n\nint i = 0;\nint j = 0;\n\nwhile((znak = fgetc(plik2)) != EOF){\n    for(int i = 0; i &lt; a; i++){\n        for(int j = 0; j &lt; c; j++){\n            if((znak == 'a') || \n                 (znak == 'B') || \n                 (znak == 'c') || \n                 (znak == 'D') || \n                 (znak == 'e') || \n                 (znak == 'F') || \n                 (znak == 'g') || \n                 (znak == 'H') || \n                 (znak == 'i') || \n                 (znak == 'J') || \n                 (znak == 'k') || \n                 (znak == 'L') || \n                 (znak == 'm') || \n                 (znak == 'N') || \n                 (znak == 'o') || \n                 (znak == 'P') || \n                 (znak == 'q') || \n                 (znak == 'R') || \n                 (znak == 's') || \n                 (znak == 'T') || \n                 (znak == 'u') || \n                 (znak == 'V') || \n                 (znak == 'w') || \n                 (znak == 'X') || \n                 (znak == 'y') || \n                 (znak == 'Z'))\n                {\n                    tab_a[i][j] = 0;\n                }\n            else if((znak == 'A') || \n                        (znak == 'b') || \n                            (znak == 'C') || \n                            (znak == 'd') || \n                            (znak == 'E') || \n                            (znak == 'f') || \n                            (znak == 'G') || \n                            (znak == 'h') || \n                            (znak == 'I') || \n                            (znak == 'j') || \n                            (znak == 'K') || \n                            (znak == 'l') || \n                            (znak == 'M') || \n                            (znak == 'n') || \n                            (znak == 'O') || \n                            (znak == 'p') || \n                            (znak == 'Q') || \n                            (znak == 'r') || \n                            (znak == 'S') || \n                            (znak == 't') || \n                            (znak == 'U') || \n                            (znak == 'v') || \n                            (znak == 'W') || \n                            (znak == 'x') || \n                            (znak == 'Y') || \n                            (znak == 'z'))\n                {\n                    tab_a[i][j] = 1;\n                }\n            }\n        }\n    }\nfor(int i = 0; i &lt; a; i++){\n    for(int j = 0; j &lt; c; j++){\n        if(tab_a[i][j] == 1){\n            printf(\"*\");\n        }\n        else{\n            printf(\" \");\n        }\n     }\n     printf(\"\\n\");\n}\n\nfclose(plik);\n</code></pre>\n"}, {"tags": ["c", "arrays", "dynamic", "udp"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548255119, "post_id": 54329610, "comment_id": 95477800, "body": "I&#39;m sorry, but this is really broad.  In fact, it seems to contain at least two separate questions, <i>both</i> very broad, and furthermore it&#39;s a bit unclear because the code you&#39;ve presented (just one declaration) seems to be pseudocode, not actual C.  Refer to <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> for ideas on how to transform this question into one that we&#39;re prepared to address."}], "answers": [{"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": true, "score": 1, "last_activity_date": 1548413549, "last_edit_date": 1548413549, "creation_date": 1548257494, "answer_id": 54330636, "question_id": 54329610, "link": "https://stackoverflow.com/questions/54329610/sending-dynamic-arrays-in-struct-over-udp-in-c/54330636#54330636", "title": "Sending dynamic arrays in struct over UDP in C", "body": "<p>You could define a structure that has a minimal array and allocate memory for a structure with a bigger array. </p>\n\n<p>The following code example is not valid C, it is incomplete. It also doesn't handle possible byte order or size differences of the <code>int</code> values when sent over the network to a different machine.</p>\n\n<pre><code>struct foo\n{\n    unsigned int ID;\n    unsigned int Num;\n    unsigned int size;\n    char arr[1];\n};\n\nint size = 123;\n\nint i;\nint ret;\n\nstruct foo *ptr = malloc(offsetof(struct foo, arr) + size);\n\nptr-&gt;ID = 42;\nptr-&gt;Num = 99;\nptr-&gt;size = size;\nfor(i=0; i&lt;ptr-&gt;size; i++)\n{\n     ptr-&gt;arr[i] = data;\n}\n\n\nret = sendto(sockfd, ptr, offsetof(struct foo, arr) + size, flags,\n           dest_addr, addrlen);\n</code></pre>\n\n<p>The compiler doesn't care that you access an array index bigger than what you defined in the structure declaration. You have to check the index in your code to avoid memory access errors.</p>\n\n<p>The receiver can use <code>recvfrom()</code> with <code>MSG_PEEK</code> and the size of the header (<code>offsetof(struct foo, arr)</code>) into a temporary structure <code>struct foo tmp;</code> first, next allocate memory according to the <code>size</code> field, then read the full size of the structure into the dynamically allocated memory. See also <a href=\"https://stackoverflow.com/q/8003170/10622916\">How to read UDP packet with variable length in C</a></p>\n\n<p>Or use a fixed buffer of the maximum size for <code>recvfrom()</code>, then copy the data to a dynamically allocated structure. The return value of <code>recvfrom()</code> will tell you the necessary size.</p>\n\n<p><strong>Edit according to suggestions in Matthias Simon's answer:</strong></p>\n\n<p>If your compiler supports zero-sized arrays the code can be simplified a bit.</p>\n\n<p>In the structure definition you can use <code>char arr[0];</code> instead of <code>char arr[1];</code>. This allows to use <code>sizeof struct foo</code> instead of <code>offsetof(struct foo, arr)</code> in <code>malloc()</code>, <code>sendto()</code> and in <code>recvfrom()</code> with <code>MSG_PEEK</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 8187195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6mEnU.jpg?s=128&g=1", "display_name": "Matthias Simon", "link": "https://stackoverflow.com/users/8187195/matthias-simon"}, "is_accepted": false, "score": 2, "last_activity_date": 1548259256, "creation_date": 1548259256, "answer_id": 54331169, "question_id": 54329610, "link": "https://stackoverflow.com/questions/54329610/sending-dynamic-arrays-in-struct-over-udp-in-c/54331169#54331169", "title": "Sending dynamic arrays in struct over UDP in C", "body": "<p>There's nothing special about sending structs with dynamic size over UDP. Generally you just have to allocate enough memory, like Bodo described in his answer.\nAlso, have a look at the GCC manual: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">Arrays of Length Zero</a> and <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">Arrays of Variable Length</a>, I hope this helps. And don't forget that UDP messages have a size limit.</p>\n\n<blockquote>\n  <p>[...] I'm trying to avoid serialization as well.</p>\n</blockquote>\n\n<p>I regularly see people avoiding codecs, because they aim for good performance. In the end they get the opposite, because of endianess swapping and packing issues. \nSerialization is your friend, especially when communicating with other processes. Worth reading is <a href=\"https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html\" rel=\"nofollow noreferrer\">Rob Pike's article about byte-order</a> </p>\n"}], "owner": {"reputation": 3, "user_id": 10956238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c94283301d9b8de955d29b099ffc8d?s=128&d=identicon&r=PG&f=1", "display_name": "Khal", "link": "https://stackoverflow.com/users/10956238/khal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 1, "accepted_answer_id": 54330636, "answer_count": 2, "score": 0, "last_activity_date": 1548413549, "creation_date": 1548254141, "question_id": 54329610, "link": "https://stackoverflow.com/questions/54329610/sending-dynamic-arrays-in-struct-over-udp-in-c", "title": "Sending dynamic arrays in struct over UDP in C", "body": "<p>I'm working on a code where I have a struct with one of it's members is a dynamic array (size unknown until runtime).\nI need to send this struct over a UDP connection and be able to read and process the data on the other end.</p>\n\n<p>I know I can use a pointer and malloc to define a dynamic array  but I can't send the pointer over UDP. and I'm trying to avoid serialization as well.</p>\n\n<p>the struct is something like this where user has to enter ID to define message type as well as the message in the array.</p>\n\n<pre><code>struct foo\n{\n    unsigned int ID;\n    unsigned int Num;\n    unsigned int size;\n    char arr[size]; //I know this is not acceptable in C, just typing to show my question.\n};\n</code></pre>\n\n<p>Is there another method to create a dynamic array that can be sent over UDP socket? and what is the best way to handle this on the receiving party as well?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548253388, "post_id": 54329288, "comment_id": 95476608, "body": "can you use a debugger to see where it fails. Memory is contiguous so it doesn&#39;t matter the order of i and j with those arrays."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548253430, "post_id": 54329288, "comment_id": 95476630, "body": "&quot;I am using gcc version 4.2.1&quot; isn&#39;t that a prehistoric version? gcc current version is 8."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 4, "creation_date": 1548253602, "post_id": 54329288, "comment_id": 95476739, "body": "You have a misconception about the layout of the <code>y</code> array. <code>myArray y[2];</code> is equivalent to <code>y[2][10]</code>, not what the code comment says."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548253836, "post_id": 54329288, "comment_id": 95476902, "body": "yes, but that&#39;s not the issue, memory is contiguous on 2D arrays"}, {"owner": {"reputation": 2579, "user_id": 3302424, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70d64f2369ad3cfd0d9271792bdccf3c?s=128&d=identicon&r=PG&f=1", "display_name": "Hari Krishna", "link": "https://stackoverflow.com/users/3302424/hari-krishna"}, "edited": false, "score": 0, "creation_date": 1548253868, "post_id": 54329288, "comment_id": 95476928, "body": "@Blastfurnance, thanks for the correction. I would like to know, why the program running perfectly on &#39;<a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">onlinegdb.com/online_c_compiler</a>&#39;. Is it because, gcc is strict in boundary checks?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548253924, "post_id": 54329288, "comment_id": 95476974, "body": "@Jean-Fran&#231;oisFabre I know, but I think it&#39;s useful to point out that the code comment and the loops show a fundamental misunderstanding."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548253936, "post_id": 54329288, "comment_id": 95476983, "body": "have you tried to invert the boundaries on i and j and see if it works for you? out of bounds for an array is undefined behaviour. If the 2D arrays are contiguous it works but it&#39;s still not clean"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1548253945, "post_id": 54329288, "comment_id": 95476990, "body": "@HariKrishna there is no boundary check in C. Accessing an array out of bounds results in <i>undefined behaviour</i> (google that). Undefined behaviour includes &quot;apparently working fine&quot;."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1548253961, "post_id": 54329288, "comment_id": 95477002, "body": "@Blastfurnace you&#39;re right. I started commenting exactly what you said, but I thought &quot;that&#39;s not the issue&quot;"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1548254117, "post_id": 54329288, "comment_id": 95477115, "body": "@Jean-Fran&#231;oisFabre : the order of <code>i</code> and <code>j</code> does matter : <code>y[9][1]</code> has an address that is <code>(10 * 9 + 1) * sizeof(int)</code> beyond the start of the array, whereas the array only has room for 20 <code>int</code>s."}, {"owner": {"reputation": 2579, "user_id": 3302424, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70d64f2369ad3cfd0d9271792bdccf3c?s=128&d=identicon&r=PG&f=1", "display_name": "Hari Krishna", "link": "https://stackoverflow.com/users/3302424/hari-krishna"}, "edited": false, "score": 0, "creation_date": 1548254575, "post_id": 54329288, "comment_id": 95477412, "body": "Thanks for clarifying"}], "answers": [{"tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 5, "last_activity_date": 1548255190, "creation_date": 1548255190, "answer_id": 54329938, "question_id": 54329288, "link": "https://stackoverflow.com/questions/54329288/why-gcc-printing-segmentation-fault-11/54329938#54329938", "title": "why gcc printing &quot;Segmentation fault: 11&quot;?", "body": "<p>The comment here is wrong :</p>\n\n<pre><code>myArray y[2]; //equivalant to y[10][2]\n</code></pre>\n\n<p><code>y</code> is actually defined as :</p>\n\n<pre><code>int y[2][10];\n</code></pre>\n\n<p>ie. <code>y</code> has 2 rows of 10 <code>int</code>'s each.</p>\n\n<p>When you then access <code>y[i][j]</code> with row index <code>i</code> ranging from <code>0</code> to <code>9</code> and column index <code>j</code> from <code>0</code> to <code>1</code>, you end up accessing the array out of bounds whenever <code>i * ROW_SIZE + j</code> (or <code>i * 10 + j</code>) is larger than or equal to <code>ROW_SIZE * ROW_CNT</code> (or <code>10 * 2</code>).</p>\n\n<p>For example, <code>y[9][1]</code> tries to access the 2nd value on the 10th row. But there are only 2 rows in <code>y</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15646973/how-dangerous-is-it-to-access-an-array-out-of-bounds\">Trying to access an array out of bounds has undefined behavior</a>. <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined behavior</a> means anything at all can happen, including appearing to run fine or crashing.</p>\n\n<p>To fix your code, define <code>y</code> as follows (so it matches the comment) :</p>\n\n<pre><code>int y[10][2];\n</code></pre>\n"}], "owner": {"reputation": 2579, "user_id": 3302424, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70d64f2369ad3cfd0d9271792bdccf3c?s=128&d=identicon&r=PG&f=1", "display_name": "Hari Krishna", "link": "https://stackoverflow.com/users/3302424/hari-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 54329938, "answer_count": 1, "score": 3, "last_activity_date": 1548255190, "creation_date": 1548253138, "last_edit_date": 1548253776, "question_id": 54329288, "link": "https://stackoverflow.com/questions/54329288/why-gcc-printing-segmentation-fault-11", "title": "why gcc printing &quot;Segmentation fault: 11&quot;?", "body": "<p>When I ran below program using gcc compiler, I end up in \"Segmentation fault: 11\", but when I ran the same at \"<a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">https://www.onlinegdb.com/online_c_compiler</a>\", it is executing perfectly fine. I would like to know, why gcc is throwing segmentation fault here?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n    typedef int myArray[10];\n\n    myArray x = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29};//Equivalant to x[10]\n    myArray y[2]; //equivalant to y[10][2]\n\n    int counter = 0;\n\n    for(int i = 0; i &lt; 10; i++){\n        for(int j = 0; j &lt; 2; j++){\n            //printf(\"%i %i\\n\", i, j);\n            y[i][j] = counter++;\n        }\n    }\n\n    printf(\"\\n\\nElements in array x are\\n\");\n    for(int i = 0; i &lt; 10; i++){\n        printf(\"x[%i] = %i\\n\", i, x[i]);\n    }\n\n    printf(\"\\n\\nElements in array y are\\n\");\n\n    for(int i = 0; i &lt; 10; i++){\n        for(int j = 0; j &lt; 2; j++){\n            printf(\"y[%i][%i] = %i\\t\", i, j, y[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I am using gcc version 4.2.1. Operating System: MAC</p>\n\n<pre><code>$gcc --version\nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\nApple LLVM version 10.0.0 (clang-1000.10.44.4)\nTarget: x86_64-apple-darwin18.2.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n</code></pre>\n"}, {"tags": ["c", "formula"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 2, "creation_date": 1548252071, "post_id": 54328965, "comment_id": 95475839, "body": "<code>double (*s)(double) = sin;</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 25, "creation_date": 1548252083, "post_id": 54328965, "comment_id": 95475850, "body": "The only effect using <code>#define</code> to shorten <code>sin</code> to <code>s</code> is to make your code unreadable"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1548252117, "post_id": 54328965, "comment_id": 95475863, "body": "It doesn&#39;t affect the runtime. It might slightly affect the time it takes to compile your program because it has to do the textual replacement every time. I wouldn&#39;t recommend it either way because if someone else looked at the resulting code, they won&#39;t know what it does. If you think that shortening <code>sin</code> to <code>s</code> will make your code more readable, then there are probably better ways to refactor your code."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1548252277, "post_id": 54328965, "comment_id": 95475959, "body": "If you use this often, make a function: <code>float calc(float a, float b, float c)</code>. Maybe you can use <code>va_arg</code> if there are a variable number of arguments. Also, optionally make it <code>inline</code>."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 1, "creation_date": 1548252280, "post_id": 54328965, "comment_id": 95475960, "body": "You could write an emac macro that writes for you <code>sin</code>, whenever you type e.g. <code>CTRL + s</code>. In Vim you could write once <code>sin</code> and then use the <code>.</code> to repeat typing that as many times as you want."}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "edited": false, "score": 5, "creation_date": 1548252361, "post_id": 54328965, "comment_id": 95476014, "body": "I understand there might be reasons to disagree with OP&#39;s coding style but this seems to be a perfectly valid and to-the-point question. I don&#39;t see why it should be downvoted."}, {"owner": {"reputation": 1130, "user_id": 2368681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80488f6f8c93ca4aeab533a7b125153?s=128&d=identicon&r=PG", "display_name": "pm101", "link": "https://stackoverflow.com/users/2368681/pm101"}, "edited": false, "score": 0, "creation_date": 1548252742, "post_id": 54328965, "comment_id": 95476252, "body": "Probably because a lot of folk here prefer code-readability to short-handedness. If the code if only for OP&#39;s eyes only, then fine, but if it&#39;s going to be read by others then they&#39;ll probably be prying their own eyes out! I have not downvoted it for the record."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 6, "creation_date": 1548252914, "post_id": 54328965, "comment_id": 95476335, "body": "Not downvoting but I encourage you to reconsider youe idea. Renaming standard library functions can create confusion for future code readers and maintainers. Make your expressions more readable by using whitespace and if necessary splitting them over more than one line."}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "edited": false, "score": 1, "creation_date": 1548254087, "post_id": 54328965, "comment_id": 95477086, "body": "BTW, if you want to fine-tune performance, there is always the option of inspecting the compiler output :) <a href=\"https://godbolt.org/z/mxrKlC\" rel=\"nofollow noreferrer\">godbolt.org/z/mxrKlC</a>"}, {"owner": {"reputation": 187, "user_id": 9127891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da5cb2d94eeebd47cb85c4c4056aaac?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9127891/ben"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548257846, "post_id": 54328965, "comment_id": 95479392, "body": "@EricPostpischil I agree with you, I am a mathematics student. If a formula is very long, use <code>s</code> can make the code more readable. @rici reminded me, splitting formula over more than one line is also a good idea.  :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1548264535, "post_id": 54328965, "comment_id": 95483004, "body": "Whatever reservations you might have on this idea, that does not make this a bad question. I don&#39;t understand the -5. In what way is this question not useful in the context of a Q &amp; A site? Voting here ought not be along the lines of the policy adopted in the meta sites."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1548264800, "post_id": 54328965, "comment_id": 95483106, "body": "@Ben: A few summers ago I have a lovely break in California helping (for fun) on the wormhole modelling project for the film &quot;Interstellar&quot;. Not only was the weather fantastic but we punched out a whole load of command-line C++ solving Einstein&#39;s field equations on some absolutely awesome hardware! Using natural units was impractical (a mere quixotic mathematician&#39;s invention). The speed of light is always <code>c</code> and crops up all over the place in relativity. Please, please, please don&#39;t abbreviate a trig function to it!"}, {"owner": {"reputation": 187, "user_id": 9127891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da5cb2d94eeebd47cb85c4c4056aaac?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9127891/ben"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1548292898, "post_id": 54328965, "comment_id": 95493050, "body": "@Bathsheba Thank you for your reminder, I have learned a lot from the friendly comments and answers."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1548253531, "post_id": 54329002, "comment_id": 95476699, "body": "Macro substitution substitutes preprocessor tokens, not text."}], "tags": [], "owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "is_accepted": false, "score": 16, "last_activity_date": 1548252576, "last_edit_date": 1548252576, "creation_date": 1548252163, "answer_id": 54329002, "question_id": 54328965, "link": "https://stackoverflow.com/questions/54328965/can-i-shorten-a-function-name-i-use-repeatedly/54329002#54329002", "title": "Can I shorten a function name I use repeatedly?", "body": "<blockquote>\n  <p>if I use define, does it affect runtime?</p>\n</blockquote>\n\n<p><code>define</code> works by doing text-based substitution at compile time. If you <code>#define s(x) sin(x)</code> then the C pre-processor will rewrite all the <code>s(x)</code> into <code>sin(x)</code> before the compiler gets a chance to look at it.</p>\n\n<p>BTW, this kind of low-level text-munging is exactly why define can be dangerous to use for more complex expressions. For example, one classic pitfall is that if you do something like <code>#define times(x, y) x*y</code> then <code>times(1+1,2)</code> rewrites to <code>1+1*2</code>, which evaluates to <code>3</code> instead of the expected <code>4</code>. For more complex expressions like it is often a good idea to use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Inline.html\" rel=\"noreferrer\">inlineable functions</a> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 17, "last_activity_date": 1548254352, "creation_date": 1548254352, "answer_id": 54329680, "question_id": 54328965, "link": "https://stackoverflow.com/questions/54328965/can-i-shorten-a-function-name-i-use-repeatedly/54329680#54329680", "title": "Can I shorten a function name I use repeatedly?", "body": "<p>There are at least three options for using <code>s</code> for <code>sin</code>:</p>\n\n<p>Use a preprocessor macro:</p>\n\n<pre><code>#define s(x) (sin(x))\n#define c(x) (cos(x))\nfloat a = s(b)*c(c)+s(c+d)*c(d)....\n#undef c\n#undef s\n</code></pre>\n\n<p>Note that the macros definitions are immediately removed with <code>#undef</code> to prevent them from affecting subsequent code. Also, you should be aware of the basics of preprocessor macro substitution, noting the fact that the first <code>c</code> in <code>c(c)</code> will be expanded but the second <code>c</code> will not since the function-like macro <code>c(x)</code> is expanded only where <code>c</code> is followed by <code>(</code>.</p>\n\n<p>This solution will have no effect on run time.</p>\n\n<p>Use an inline function:</p>\n\n<pre><code>static inline double s(double x) { return sin(x); }\nstatic inline double c(double x) { return cos(x); }\n</code></pre>\n\n<p>With a good compiler, this will have no effect on run time, since the compiler should replace a call to <code>s</code> or <code>c</code> with a direct call to <code>sin</code> or <code>cos</code>, having the same result as the original code. Unfortunately, in this case, the <code>c</code> function will conflict with the <code>c</code> object you show in your sample code. You will need to change one of the names.</p>\n\n<p>Use function pointers:</p>\n\n<pre><code>static double (* const s)(double) = sin;\nstatic double (* const c)(double) = cos;\n</code></pre>\n\n<p>With a good compiler, this also will have no effect on run time, although I suspect a few more compilers might fail to optimize code using this solution than than previous solution. Again, you will have the name conflict with <code>c</code>. Note that using function pointers creates a direct call to the <code>sin</code> and <code>cos</code> functions, bypassing any macros that the C implementation might have defined for them. (C implementations are allowed to implement library function using macros as well as functions, and they might do so to support optimizations or certain features. With a good quality compiler, this is usually a minor concern; optimization of a direct call still should be good.)</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 9, "last_activity_date": 1548273367, "last_edit_date": 1548273367, "creation_date": 1548255856, "answer_id": 54330150, "question_id": 54328965, "link": "https://stackoverflow.com/questions/54328965/can-i-shorten-a-function-name-i-use-repeatedly/54330150#54330150", "title": "Can I shorten a function name I use repeatedly?", "body": "<p>Don't do this.</p>\n\n<p>Mathematicians have been abbreviating the trigonometric functions to <em>sin</em>, <em>cos</em>, <em>tan</em>, <em>sinh</em>, <em>cosh</em>, and <em>tanh</em> for many many years now. Even though mathematicians (like me) like to use their favourite and often idiosyncratic notation so puffing up any paper by a number of pages, these have emerged as pretty standard. Even LaTeX has commands like <code>\\sin</code>, <code>\\cos</code>, and <code>\\tan</code>.</p>\n\n<p>The Japanese immortalised the abbreviations when releasing scientific calculators in the 1970s (the shorthand can fit easily on a button), and the C standard library adopted them.</p>\n\n<p>If you deviate from this then your code immediately becomes difficult to read. This can be particularly pernicious with mathematical code where you can't immediately see the effects of a bad implementation.</p>\n\n<p>But if you <em>must</em>, then a simple</p>\n\n<pre><code>static double(*const s)(double) = sin;\n</code></pre>\n\n<p>will suffice.</p>\n"}], "owner": {"reputation": 187, "user_id": 9127891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da5cb2d94eeebd47cb85c4c4056aaac?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9127891/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 54329680, "answer_count": 3, "score": 13, "last_activity_date": 1548613098, "creation_date": 1548252014, "last_edit_date": 1548613098, "question_id": 54328965, "link": "https://stackoverflow.com/questions/54328965/can-i-shorten-a-function-name-i-use-repeatedly", "title": "Can I shorten a function name I use repeatedly?", "body": "<p>I have a long formula, like the following:</p>\n\n<pre><code>float a = sin(b)*cos(c)+sin(c+d)*sin(d)....\n</code></pre>\n\n<p>Is there a way to use <code>s</code> instead of <code>sin</code> in C, to shorten the formula, <strong>without</strong> affecting the running time?</p>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548252518, "post_id": 54328963, "comment_id": 95476109, "body": "Unrelated to your problem, but please read <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/\">Do I cast the result of malloc?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1548265057, "post_id": 54328963, "comment_id": 95483204, "body": "Have you tried debugging your own code? <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1548252352, "creation_date": 1548252352, "answer_id": 54329053, "question_id": 54328963, "link": "https://stackoverflow.com/questions/54328963/unable-to-create-stack-with-proper-node/54329053#54329053", "title": "Unable to create stack with proper node", "body": "<p>In the first variant, you define <code>k</code> locally inside the loop. That means it will really go out of scope and end its life-time <em>every iteration of the loop</em>. A pointer to that variable will become invalid each and every iteration as well as when the loop ends.</p>\n\n<p>As for the reason all elements seems to be the same, it's because all elements <em>are</em> the same as all pointers in the stack will be to the single instance <code>k</code>. But as noted, these pointers (which are all the same) will immediately become invalid, and dereferencing them will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10956116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMLJJeP-Qqc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZSNo05ZRx_91pXynyFWvzhwW3sqQ/mo/photo.jpg?sz=128", "display_name": "Kshitij Jaiswal", "link": "https://stackoverflow.com/users/10956116/kshitij-jaiswal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14, "favorite_count": 0, "accepted_answer_id": 54329053, "answer_count": 1, "score": 0, "last_activity_date": 1548252352, "creation_date": 1548252005, "question_id": 54328963, "link": "https://stackoverflow.com/questions/54328963/unable-to-create-stack-with-proper-node", "title": "Unable to create stack with proper node", "body": "<p>This is the initial part of main function I used:</p>\n\n<pre><code>int main() {\nint q;\nstruct ListNode* S = NULL;\nscanf(\"%d\\n\",&amp;q);\nint i;\nfor (i=0;i&lt;q;i++){\n    int queryType;\n    scanf(\"%d\", &amp;queryType);\n    struct NumOp* j;\n    struct NumOp k;\n    if(queryType == 1){\n        double num;\n        scanf(\"%lf\", &amp;num);\n        if(num&gt;=1 &amp;&amp; num&lt;=100){\n            k.type='n';\n            k.num=num;\n            k.op='\\0';\n            j=&amp;k;\n            Push(&amp;S,j);\n        }\n    }\n</code></pre>\n\n<p>Now the issue is this would create a stack consisting of the last pushed element in all the nodes pushed by this time.\nOn making certain changes the following code seemed to work fine. Could anyone tell me why this didn't work in first place.</p>\n\n<pre><code>int main() {\nint q;\nstruct ListNode* S = NULL;\nscanf(\"%d\\n\",&amp;q);\nint i;\nfor (i=0;i&lt;q;i++){\n    int queryType;\n    scanf(\"%d\", &amp;queryType);\n    struct NumOp* j = (struct NumOp*) malloc(sizeof(struct NumOp));\n    if(queryType == 1){\n        double num;\n        scanf(\"%lf\", &amp;num);\n        if(num&gt;=1 &amp;&amp; num&lt;=100){\n            j-&gt;type='n';\n            j-&gt;num=num;\n            j-&gt;op='\\0';\n            Push(&amp;S,j);\n        }\n</code></pre>\n\n<p>The explanation is what I m looking for.</p>\n"}, {"tags": ["c", "arrays", "optimization", "char"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1548251809, "post_id": 54328882, "comment_id": 95475689, "body": "<code>return (*N1 - &#39;0&#39;) + (*N2 - &#39;0&#39;);</code>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1548251819, "post_id": 54328882, "comment_id": 95475699, "body": "Wouldn&#39;t the most significat digit just be the first character?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548254575, "post_id": 54328882, "comment_id": 95477413, "body": "Since you want to add the most significant digits, do you want to skip leading zeros?"}], "answers": [{"comments": [{"owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1548257523, "post_id": 54329074, "comment_id": 95479209, "body": "Assumes ASCII character encodings -- don&#39;t try this on an EBCDIC host. There, you&#39;d have to use atoi(3), violating OP&#39;s &quot;without using library functions&quot; caveat. Yes, most hosts currently encountered would use ASCII encodings for digits."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 3, "creation_date": 1548258468, "post_id": 54329074, "comment_id": 95479762, "body": "@mpez0 Disagree with <a href=\"https://stackoverflow.com/questions/54328882/sum-of-most-significant-digits-of-two-large-numbers-of-char-type#comment95479209_54329074\">don&#39;t try this on an EBCDIC host</a>.  What about <code>(N1[0] - &#39;0&#39;) + (N2[0] - &#39;0&#39;)</code> would not work with EBCDIC as all C encoding is done with contiguous &#39;0&#39;, &#39;1&#39;,&#39;2&#39;, ... &#39;9&#39;?  be it EBCDIC, ASCII, etc."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 1, "creation_date": 1548272368, "post_id": 54329074, "comment_id": 95486487, "body": "@mpez0 the C standard mandates that digit characters are encoded sequentially, therefore <code>*N - &#39;0&#39;</code> will always work. See 5.2.1 3 which states <i>... the value of each character after 0 in the above list of decimal digits shall be one greater than the value of the previous.</i>"}, {"owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1549995941, "post_id": 54329074, "comment_id": 96104289, "body": "Yes, I spoke too soon. Digits in EBCIDIC are contiguous; the alphabet is not"}], "tags": [], "owner": {"reputation": 511, "user_id": 9549012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61be3eb9f8efed0c2a9e24e1f7a6a8ab?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/9549012/nullptr"}, "is_accepted": true, "score": 2, "last_activity_date": 1548252435, "creation_date": 1548252435, "answer_id": 54329074, "question_id": 54328882, "link": "https://stackoverflow.com/questions/54328882/sum-of-most-significant-digits-of-two-large-numbers-of-char-type/54329074#54329074", "title": "Sum of Most Significant digits of two large numbers of char type", "body": "<p>This should work.</p>\n\n<pre><code>int sumMsd(char *N1, char *N2) {\n    return (N1[0] - '0') + (N2[0] - '0');\n}\n</code></pre>\n\n<p>Let the first digit of N1 be '3'. Then '3' - '0' is 3, the difference between their ASCII values. </p>\n"}], "owner": {"reputation": 109, "user_id": 8292840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0043a1284efad61123d96e92530cb912?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/8292840/jennifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 54329074, "answer_count": 1, "score": -1, "last_activity_date": 1548252435, "creation_date": 1548251707, "last_edit_date": 1548252141, "question_id": 54328882, "link": "https://stackoverflow.com/questions/54328882/sum-of-most-significant-digits-of-two-large-numbers-of-char-type", "title": "Sum of Most Significant digits of two large numbers of char type", "body": "<p>I have two numbers of char type say </p>\n\n<pre><code>char* N1;\nchar* N2;\n\nN1 = \"92345610172222\";\nN2 = \"12351097654671\";\n</code></pre>\n\n<p>I need to add MSD's of two numbers i.e </p>\n\n<p>9 + 1 = 10</p>\n\n<p>I solved by typecasting and dividing the number until it encounters a single digit using two loops.Sum it and return the result.</p>\n\n<pre><code>int sumMsd(char *N1, char *N2) {\n    int one = (int)*N1;\n    int two = (int)*N2;\n    while (one &gt;= 10)\n        one /= 10;\n    while (two &gt;= 10)\n        two /= 10;\n    return one+two;\n}\n</code></pre>\n\n<p>The logic fails when int size is very large. So,I need to optimize my solution without using library functions. I am looking out for a solution in C.</p>\n"}, {"tags": ["c", "mapping"], "comments": [{"owner": {"reputation": 163297, "user_id": 418556, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/yOfDr.png?s=128&g=1", "display_name": "Andrew Thompson", "link": "https://stackoverflow.com/users/418556/andrew-thompson"}, "edited": false, "score": 0, "creation_date": 1586737096, "post_id": 54328808, "comment_id": 108231400, "body": "Please <a href=\"http://meta.stackexchange.com/a/5235/155831\">accept an answer</a> if it helped solve the problem."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10955997, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kZ6I3Z1pZR4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb_NhR3Q7JgAnrbJvIajAMxUXMGTg/mo/photo.jpg?sz=128", "display_name": "Siddharth Teli", "link": "https://stackoverflow.com/users/10955997/siddharth-teli"}, "edited": false, "score": 0, "creation_date": 1548253073, "post_id": 54328959, "comment_id": 95476420, "body": "Thanks alot i was hoping such solution&#39;s ."}], "tags": [], "owner": {"reputation": 579, "user_id": 1272266, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/1KsSL.jpg?s=128&g=1", "display_name": "Nabuchodonozor", "link": "https://stackoverflow.com/users/1272266/nabuchodonozor"}, "is_accepted": false, "score": 1, "last_activity_date": 1548251999, "creation_date": 1548251999, "answer_id": 54328959, "question_id": 54328808, "link": "https://stackoverflow.com/questions/54328808/how-to-assign-unique-int-value-to-string-or-char/54328959#54328959", "title": "How to assign Unique int value to string or Char?", "body": "<p>If ASCII coding doesn't meet your requirements, you must implement your own translating functions, for example:</p>\n\n<pre><code>struct TranslationMapRecord\n{\n   char character;\n   int code;\n};\n\nstruct TranslationMapRecord map[] =\n{\n { 'C', 100 },\n { 'D', 101 },\n...\n { 'B', 126 }\n}\n\nint translate(char c)\n{\n  int i;\n  for (i = 0; i &lt; (sizeof(map)/sizeof(map[0]); ++i)\n  {\n    if (map[i].character == c)\n      return map[i].code;\n  }\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 10955997, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kZ6I3Z1pZR4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb_NhR3Q7JgAnrbJvIajAMxUXMGTg/mo/photo.jpg?sz=128", "display_name": "Siddharth Teli", "link": "https://stackoverflow.com/users/10955997/siddharth-teli"}, "edited": false, "score": 0, "creation_date": 1548253098, "post_id": 54329039, "comment_id": 95476438, "body": "Thanks alot i would try this solution."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 1, "last_activity_date": 1548252294, "creation_date": 1548252294, "answer_id": 54329039, "question_id": 54328808, "link": "https://stackoverflow.com/questions/54328808/how-to-assign-unique-int-value-to-string-or-char/54329039#54329039", "title": "How to assign Unique int value to string or Char?", "body": "<p>You can use designated array initializers:</p>\n\n<pre><code>// UCHAR_MAX is from header &lt;limits.h&gt;\nint const map[UCHAR_MAX] = {\n    ['C'] = 100,\n    ['D'] = 101,\n    ['B'] = 126,\n};\n</code></pre>\n\n<p>Unassigned characters will have zero value.</p>\n\n<p>You would then get single value with expression:</p>\n\n<pre><code>int value = map[(unsigned char)character];\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10955997, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kZ6I3Z1pZR4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb_NhR3Q7JgAnrbJvIajAMxUXMGTg/mo/photo.jpg?sz=128", "display_name": "Siddharth Teli", "link": "https://stackoverflow.com/users/10955997/siddharth-teli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1548255247, "accepted_answer_id": 54329039, "answer_count": 2, "score": 1, "last_activity_date": 1548252294, "creation_date": 1548251447, "question_id": 54328808, "link": "https://stackoverflow.com/questions/54328808/how-to-assign-unique-int-value-to-string-or-char", "closed_reason": "Needs more focus", "title": "How to assign Unique int value to string or Char?", "body": "<p>I want to assign integer value to character.Where 'C' has the least  and 'B' largest value.</p>\n\n<p>Is there something better than mapping ?</p>\n\n<p>For eg:-'C'=100,'D'=101,'E'=102....'B'=126.Is There any better way compared to mapping ?\nIf Input string is \"BYE\",Ouput should be 351 (Because 'B'=126,'Y'=123,E='102').</p>\n"}, {"tags": ["c", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 579, "user_id": 1272266, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/1KsSL.jpg?s=128&g=1", "display_name": "Nabuchodonozor", "link": "https://stackoverflow.com/users/1272266/nabuchodonozor"}, "edited": false, "score": 1, "creation_date": 1548250159, "post_id": 54328192, "comment_id": 95474680, "body": "I think the malloc has wrong parameter - it should be <code>sizeof(struct ListNode)</code> instead of <code>sizeof(struct ListNode *)</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548250177, "post_id": 54328192, "comment_id": 95474691, "body": "Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and then <a href=\"https://stackoverflow.com/posts/54328192/edit\">edit</a> your question and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as well as minimum input that triggers the problem."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548250286, "post_id": 54328192, "comment_id": 95474778, "body": "Complement to 1st comment: instead of <code>dummyNode = (struct ListNode *)malloc(sizeof(struct ListNode));</code> write <code>dummyNode = (struct ListNode *)malloc(sizeof(*dummyNode));</code> which is less error prone. You even can drop the cast : <code>dummyNode = malloc(sizeof(*dummyNode));</code>"}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 1272266, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/1KsSL.jpg?s=128&g=1", "display_name": "Nabuchodonozor", "link": "https://stackoverflow.com/users/1272266/nabuchodonozor"}, "is_accepted": false, "score": 2, "last_activity_date": 1548250428, "creation_date": 1548250428, "answer_id": 54328488, "question_id": 54328192, "link": "https://stackoverflow.com/questions/54328192/getting-runtime-load-of-address-error-while-writing-code-for-merging-two-sorted/54328488#54328488", "title": "Getting runtime load of address error while writing code for merging two sorted linked list", "body": "<p>Insufficient space is allocated because of passing to malloc sizeof pointer to structure <code>sizeof(struct ListNode *)</code>.\nIt should be changed to allocating space for whole structure - </p>\n\n<pre><code>dummyNode = (struct ListNode *)malloc(sizeof(struct ListNode));\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10955918, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hvY7gNW7gvg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZIzecL2E5eIZGo9t5XB83EczbNOA/mo/photo.jpg?sz=128", "display_name": "ANSHUL SHANKAR", "link": "https://stackoverflow.com/users/10955918/anshul-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548250428, "creation_date": 1548249523, "question_id": 54328192, "link": "https://stackoverflow.com/questions/54328192/getting-runtime-load-of-address-error-while-writing-code-for-merging-two-sorted", "title": "Getting runtime load of address error while writing code for merging two sorted linked list", "body": "<p>Using a dummy node to add the lesser node of list l1 and list l2. At the end returning the location pointing next to the dummy node to get the actual merged sorted list but getting a runtime load of address with insufficient space for an object of type struct ListNode at return dummyNode->next.</p>\n\n<pre><code>struct ListNode* mergeTwoLists(struct ListNode* l1, struct ListNode* l2) {\n        if (l1 == NULL &amp;&amp; l2 != NULL) {\n                return l2;\n        }\n        if (l1 != NULL &amp;&amp; l2 == NULL) {\n                return l1;\n        }\n        struct ListNode *dummyNode = NULL;\n        struct ListNode *head = NULL;\n\n        dummyNode = (struct ListNode *)malloc(sizeof(struct ListNode *));\n        head = dummyNode;\n\n        while (l1 != NULL &amp;&amp; l2 != NULL) {\n                if (l1-&gt;val &lt;= l2-&gt;val) {\n                        head-&gt;next = l1;\n                        l1 = l1-&gt;next;\n                        head = head-&gt;next;\n                }\n                else {\n                        head-&gt;next = l2;\n                        l2 = l2-&gt;next;\n                        head = head-&gt;next;\n                }\n        }\n        if (l1 != NULL) {\n                head-&gt;next = l1;\n        }\n        if (l2 != NULL) {\n                head-&gt;next = l2;\n        }    \n        return dummyNode-&gt;next;\n}\n\n\n</code></pre>\n"}, {"tags": ["c", "function", "pointers", "gcc", "parameters"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1548249272, "post_id": 54328063, "comment_id": 95474142, "body": "Compilers tend not to do such deep analysis. There are other tools that can do static analysis of code and that might be able to figure it out. It&#39;s <i>very</i> hard though, especially if the function is defined in a different translation unit."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548249480, "post_id": 54328063, "comment_id": 95474280, "body": "Even when defined as <code>void foo(uint8 par_var[2])</code> the compiler ignores the <code>2</code> which places no restriction on the indexing."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1548249542, "post_id": 54328063, "comment_id": 95474314, "body": "To increase odds of getting any kind of warning, declaration should include the array size: <code>extern void foo(uint8 par_var[2])</code>. I would expect that this kind of warning would be generated by compiler, not linker."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 2, "creation_date": 1548249727, "post_id": 54328063, "comment_id": 95474414, "body": "Boundaries check are nod checked by compiler. You have the same for a string char[2] and char*. Note: the declaration defines the API (for programmers), so that API should be make clear that you want two pairs. If you need to have better checks, use struct"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1548252316, "post_id": 54328063, "comment_id": 95475981, "body": "@GiacomoCatenazzi: The question requests type checking, not boundary checking. Ideally for the OP, the compiler would recognize that <code>&amp;par_var</code> is a pointer to a single <code>char</code> while the parameter to <code>foo</code> is an array of 2 <code>char</code> (that was adjusted to a pointer). Of course, we know C defeats this by its automatic adjustment, but the fact remains that no boundary check (no check of what actual indices are used) is requested here, just a type check."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548253225, "post_id": 54328063, "comment_id": 95476512, "body": "@EricPostpischil : RIght"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10314409, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C_iC-U9We5I/AAAAAAAAAAI/AAAAAAAAAa0/PuZQCXtCwQw/photo.jpg?sz=128", "display_name": "Alex Arpenteur", "link": "https://stackoverflow.com/users/10314409/alex-arpenteur"}, "edited": false, "score": 0, "creation_date": 1548313280, "post_id": 54329216, "comment_id": 95497944, "body": "Thank all for comments, it would be not bad if the using of the keyword <i>static</i> in array size in parameter declaration would pop up a corresponding error, but at least <i>gcc</i> totally ignores it. Moreover, <i>MISRA-C:2012, Rule 17.6</i> explicitly forbids such declarations. I had in fact the warning issued by declaring the parameter of <code>foo()</code> in SWC1 as a pointer to an array of two elements, as was proposed by @EricPostpischil."}, {"owner": {"reputation": 21, "user_id": 10314409, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C_iC-U9We5I/AAAAAAAAAAI/AAAAAAAAAa0/PuZQCXtCwQw/photo.jpg?sz=128", "display_name": "Alex Arpenteur", "link": "https://stackoverflow.com/users/10314409/alex-arpenteur"}, "edited": false, "score": 0, "creation_date": 1548313336, "post_id": 54329216, "comment_id": 95497965, "body": "At present SWC2, that uses the function <code>foo()</code>, is a generated code. Whereas SWC1 is a hand-written code. Moreover, the code generation tool does not/cannot generate a pointer to an array. So the way we are going is to reinforce the code review of the generated code and its corresponding API."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548568857, "post_id": 54329216, "comment_id": 95583436, "body": "The question is whether <code>typedef int a2T[2]; uint8 a4[4]; void foo(uint8 (*par_var)[2]); void f(){foo((a2T*)(a4+1));}</code> is legal (I&#39;d say yes). In that case the usability/size restrictions of such a pointer-to-array declaration wouldn&#39;t be as bad."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 5, "last_activity_date": 1548253274, "last_edit_date": 1548253274, "creation_date": 1548252906, "answer_id": 54329216, "question_id": 54328063, "link": "https://stackoverflow.com/questions/54328063/no-compiler-warning-by-inconsistent-function-parameter-use/54329216#54329216", "title": "No compiler warning by inconsistent function parameter use", "body": "<p>There is a C feature that could aid a compiler in diagnosing this, but I am not aware of a compiler that takes advantage of it and warns. If <code>foo</code> were declared as <code>void foo(uint8 par_var[static 2]);</code>, then a caller is required to pass a pointer to at least two elements, per C 2018 6.7.6.3 7:</p>\n\n<blockquote>\n  <p>If the keyword <code>static</code> also appears within the <code>[</code> and <code>]</code> of the array type derivation, then for each call to the function, the value of the corresponding actual argument shall provide access to the first element of an array with at least as many elements as specified by the size expression.</p>\n</blockquote>\n\n<p>So, a compiler seeing <code>uint8 par_var; foo(&amp;par_var);</code> could recognize the failure to pass two elements and provide a warning. (While I am not aware of compilers that check the declared size, some compilers will warn when a null pointer is passed for such a parameter.)</p>\n\n<p>As is well known, in the declaration <code>void foo(uint8 par_var[2])</code>, <code>par_var</code> is automatically adjusted to <code>uint8 *par_var</code>. As an alternative, instead of passing a pointer to <code>uint8</code>, you could pass a pointer to an array of <code>uint8</code> by declaring <code>foo</code> as <code>void foo(uint8 (*par_var)[2]);</code>.</p>\n\n<p>Then you would have to pass it an array, such as:</p>\n\n<pre><code>uint8 A[2];\nfoo(&amp;A);\n</code></pre>\n\n<p>If it were called with a pointer to <code>uint8</code>, the compiler should issue a warning. Unfortunately, this also constraints the routine; you <strong>must</strong> pass it a pointer to an array of two <code>uint8</code> and cannot pass it a pointer to a larger array or a pointer to a <code>uint8</code> in a larger array. So it has limited use. Nonetheless, it could serve in certain situations.</p>\n"}], "owner": {"reputation": 21, "user_id": 10314409, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C_iC-U9We5I/AAAAAAAAAAI/AAAAAAAAAa0/PuZQCXtCwQw/photo.jpg?sz=128", "display_name": "Alex Arpenteur", "link": "https://stackoverflow.com/users/10314409/alex-arpenteur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548253274, "creation_date": 1548249100, "last_edit_date": 1548251872, "question_id": 54328063, "link": "https://stackoverflow.com/questions/54328063/no-compiler-warning-by-inconsistent-function-parameter-use", "title": "No compiler warning by inconsistent function parameter use", "body": "<p>During a C code review of the software that did not want to run on the target HW, the  following inconsistency has been discovered in a function use:</p>\n\n<p>The SW component 1 implements the function:</p>\n\n<pre><code>void foo(uint8 par_var[2])\n</code></pre>\n\n<p>The function <code>foo()</code> also writes the two element of the <code>par_var</code> array.</p>\n\n<p>The SW component 2 gets an external declaration of the foo() as following</p>\n\n<pre><code>extern void foo(uint8 *par_var)\n</code></pre>\n\n<p>and uses it as following :</p>\n\n<pre><code>uint8 par_var;\n\nfoo(&amp;par_var); //-&gt; sending a pointer to a scalar\n               //   instead to an array of 2 elements.\n</code></pre>\n\n<p>Obviously, it may lead and leads actually to the program failure.</p>\n\n<p>The question is, if it could be possible for compiler/linker to intercept the inconsistency by issuing a warning, for example.</p>\n\n<p>I have scanned and tried some of the gcc (CygWin) compiler options along with the standard ones (-Wall, -pedantic  ) <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Warning-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Warning-Options.html</a></p>\n\n<p>but could not find one that could issue a corresponding warning .</p>\n"}, {"tags": ["c", "shell", "operating-system", "system-calls"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1548248985, "post_id": 54327962, "comment_id": 95473983, "body": "<a href=\"//stackoverflow.com/q/2605130\">Redirecting exec output to a buffer or file</a>. Also, check the return code from the program."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548248995, "post_id": 54327962, "comment_id": 95473990, "body": "Have you looked at the <code>execvp</code> <a href=\"https://linux.die.net/man/3/execvp\" rel=\"nofollow noreferrer\">manpage</a>? It discusses the return value of the function call and the <code>errno</code> variable. This and your course material should be enough information to solve your task."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548249029, "post_id": 54327962, "comment_id": 95474010, "body": "Some commands when they fail will exit with a specific value. You can retreive that exit value with the <code>wait</code> function from the parent process, and if it&#39;s an &quot;error&quot; you can print your message. For what values a program might exit with, reads its manual page."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1548249039, "post_id": 54327962, "comment_id": 95474017, "body": "<i>Before</i>? Hmm. You&#39;d have to capture the ls process&#39; standard error, wait for it to exit, check its exit status for success or not, and display the appropriate output."}], "owner": {"reputation": 303, "user_id": 8161586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCkxw.jpg?s=128&g=1", "display_name": "Black Jack 21", "link": "https://stackoverflow.com/users/8161586/black-jack-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548248700, "creation_date": 1548248700, "question_id": 54327962, "link": "https://stackoverflow.com/questions/54327962/displaying-my-own-error-messages-for-system-calls", "title": "Displaying my own error messages for system calls", "body": "<p>So I have this beginner's assignment problem which requires me to make some system calls using already present executables. I just need to fork and call <code>execvp</code> for simple commands like <code>ls</code> and <code>cat</code>. The problem is that I also need to display a custom error for incorrect commands (like <code>cat a.txt</code> even though a.txt doesn't exist) and further, display the normal error messages these commands show.\n<br>\nSecond part is very easy, <code>execvp</code> would automatically ensure that the program prints its normal error messages. My problem is that I don't know how to detect whether <code>execvp</code> has run into some error. How do I print out my own error message before the executable of <code>ls</code> shows its own error message?</p>\n"}, {"tags": ["c", "cmake"], "comments": [{"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "edited": false, "score": 1, "creation_date": 1548252436, "post_id": 54327842, "comment_id": 95476055, "body": "Where is your <code>set(CMAKE_C_COMPILER armcc)</code> command located? It should be placed before the project call to take effect. And as you mentioned crosscompiling <code>CMAKE_TOOLCHAIN_FILE</code> are the proposed way to go."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10955733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50df32f146e1475784f6270c27cff4a3?s=128&d=identicon&r=PG&f=1", "display_name": "cool_kuba", "link": "https://stackoverflow.com/users/10955733/cool-kuba"}, "edited": false, "score": 0, "creation_date": 1548404679, "post_id": 54329094, "comment_id": 95537025, "body": "Thank you, you are right I used enable_language before set command and now it works!!! Do you know why this should be avoided?"}], "tags": [], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "is_accepted": true, "score": 1, "last_activity_date": 1548252482, "creation_date": 1548252482, "answer_id": 54329094, "question_id": 54327842, "link": "https://stackoverflow.com/questions/54327842/cmake-proper-way-to-select-compiler-without-hard-coding-its-path/54329094#54329094", "title": "CMake: Proper way to select compiler without hard coding its path", "body": "<p>This is spelled out in the <a href=\"https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-do-i-use-a-different-compiler\" rel=\"nofollow noreferrer\">CMake FAQ</a>:</p>\n\n<h2>Method 1: use environment variables</h2>\n\n<p>For C and C++, set the <code>CC</code> and <code>CXX</code> environment variables. This method\nis not guaranteed to work for all generators. (Specifically, if you are\ntrying to set Xcode's <code>GCC_VERSION</code>, this method confuses Xcode.)</p>\n\n<p>For example:</p>\n\n<pre><code>CC=gcc-4.2 cmake -G \"Your Generator\" path/to/your/source\n</code></pre>\n\n<h2>Method 2: use <code>cmake -D</code></h2>\n\n<p>Set the appropriate <code>CMAKE_FOO_COMPILER</code> variable(s) to a valid compiler\nname or full path on the command-line using <code>cmake -D</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>cmake -G \"Your Generator\" -D CMAKE_C_COMPILER=gcc-4.2 path/to/your/source\n</code></pre>\n\n<h2>Method 3 (avoid): use <code>set()</code></h2>\n\n<p>Set the appropriate <code>CMAKE_FOO_COMPILER</code> variable(s) to a valid compiler\nname or full path in a list file using <code>set()</code>. This must be done\nbefore any language is set (ie before any <code>project()</code> or\n<code>enable_language()</code> command).</p>\n\n<p>For example:</p>\n\n<pre><code>set(CMAKE_C_COMPILER \"gcc-4.2\")\n\nproject(\"YourProjectName\")\n</code></pre>\n\n<p>My guess, since you haven't provided any code and didn't read the manual, is that you are trying to set the compiler <em>after</em> setting the language.</p>\n\n<p>For your purpose, I would go with CMake's recommendation and use either Method 1 or Method 2 since you do not want to hardcode a path.</p>\n"}], "owner": {"reputation": 11, "user_id": 10955733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50df32f146e1475784f6270c27cff4a3?s=128&d=identicon&r=PG&f=1", "display_name": "cool_kuba", "link": "https://stackoverflow.com/users/10955733/cool-kuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 54329094, "answer_count": 1, "score": 0, "last_activity_date": 1548252482, "creation_date": 1548248319, "last_edit_date": 1548248669, "question_id": 54327842, "link": "https://stackoverflow.com/questions/54327842/cmake-proper-way-to-select-compiler-without-hard-coding-its-path", "title": "CMake: Proper way to select compiler without hard coding its path", "body": "<p>I am new to CMake and I am trying to create CMake for existing project which has to crosscompile ARM code on multiple Linux and Windows machines so hard coding path to compiler is not an option.\nSo far path to compiler was added to each user path so you can just call armcc from console and correct compiler version would execute.\nI haven't found a way to specify compiler like that in CMake I tried:</p>\n\n<ol>\n<li><code>SET(CMAKE_C_COMPILER \"armcc\")</code> - It returns: The CMAKE_C_COMPILER:\narmcc is not a full path and was not found in the PATH.</li>\n<li><code>find_program(CMAKE_C_COMPILER NAMES armcc)</code> - it always returns\n/usr/bin/cc</li>\n</ol>\n\n<p>I am sure that first message is not true because path to armcc is in PATH variable. I am using cmake version 3.6.2.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1548247945, "post_id": 54327651, "comment_id": 95473418, "body": "Difference in address is typed, means that the unit is the number of places that exists to store things in between. If you understand why ptr++ &quot;points&quot; to 40, then a simple arithmetic will give you the result : ptr++ is ptr=ptr+1, so after increment ptr+1-ptr = 1!"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1548249424, "post_id": 54327651, "comment_id": 95474248, "body": "alternate duplicate : <a href=\"https://stackoverflow.com/questions/3238482/pointer-subtraction-confusion\">Pointer subtraction confusion</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1548248023, "post_id": 54327723, "comment_id": 95473464, "body": "You know that this is duplicate, so for the sake of the site, please mark it as is."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1548248180, "post_id": 54327723, "comment_id": 95473531, "body": "@Jean-BaptisteYun&#232;s I don&#39;t think there is a good canonical dupe for this question. The linked ones were quite bad."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548248241, "post_id": 54327723, "comment_id": 95473565, "body": "Uh wait I had added such a question to the C FAQ myself... <a href=\"https://stackoverflow.com/questions/5610298/why-does-int-pointer-increment-by-4-rather-than-1\">Why does int pointer &#39;++&#39; increment by 4 rather than 1?</a>."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548248748, "post_id": 54327723, "comment_id": 95473861, "body": "@Lundin : <a href=\"https://stackoverflow.com/questions/3238482/pointer-subtraction-confusion\">Pointer subtraction confusion</a> isn&#39;t too bad either (found it too late)"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548321028, "post_id": 54327723, "comment_id": 95501622, "body": "@Lundin This is a standard recurrent question answered at least fifty times..."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1548248084, "last_edit_date": 1548248084, "creation_date": 1548247922, "answer_id": 54327723, "question_id": 54327651, "link": "https://stackoverflow.com/questions/54327651/how-is-this-code-functioning-inside-the-computer-p-s-im-a-first-year-b-tech/54327723#54327723", "title": "How is this code functioning inside the computer? P.S - I&#39;m a first year b.tech student", "body": "<p>No, that's not how pointer subtraction works. When you subtract two pointers (belonging to the same array), you get the difference in the subscript, i.e., the element number.</p>\n\n<p>Quoting <code>C11</code>, chapter 6.5.6, P7</p>\n\n<blockquote>\n  <p>When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array object; the result is the difference of the subscripts of the two array elements. [....]</p>\n</blockquote>\n\n<p>That said, the pointer subtraction yields a result of type <code>ptrdiff_t</code> and you should use <code>%td</code> to print the result.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1548248057, "creation_date": 1548248057, "answer_id": 54327759, "question_id": 54327651, "link": "https://stackoverflow.com/questions/54327651/how-is-this-code-functioning-inside-the-computer-p-s-im-a-first-year-b-tech/54327759#54327759", "title": "How is this code functioning inside the computer? P.S - I&#39;m a first year b.tech student", "body": "<p>Pointer arithmetic is done on \"pointed-at items\", not on bytes. If you have <code>int* ptr = array; ptr++;</code> then <code>ptr</code> is increased by <code>sizeof(int)</code> bytes.</p>\n\n<p>In your case, which is some seriously obscure code, pointer arithmetic is done on a <code>int**</code>. The difference between <code>p</code> and <code>p+1</code> is <code>1</code> item (1 <code>int*</code> pointer item). So you get the result <code>1</code>.</p>\n\n<p>If you want to know the difference in bytes, you could print the addresses:</p>\n\n<pre><code>int **ptr = p;\nprintf(\"%p\\n\", ptr);\nptr++;\nprintf(\"%p\\n\", ptr);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7226261, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MDqpt-IYOwM/AAAAAAAAAAI/AAAAAAAABWw/1aqJsjDI6Dk/photo.jpg?sz=128", "display_name": "Aditya Mishra", "link": "https://stackoverflow.com/users/7226261/aditya-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1548248097, "answer_count": 2, "score": 0, "last_activity_date": 1548248371, "creation_date": 1548247683, "last_edit_date": 1548247861, "question_id": 54327651, "link": "https://stackoverflow.com/questions/54327651/how-is-this-code-functioning-inside-the-computer-p-s-im-a-first-year-b-tech", "closed_reason": "Duplicate", "title": "How is this code functioning inside the computer? P.S - I&#39;m a first year b.tech student", "body": "<p>I do not understand why the \"C program\" is giving the output <code>1</code> in line 1?</p>\n\n<pre><code>int main()\n{\n\n    static int a[]= {10,20,30,40,50};\n    static int *p[]= {a,a+3,a+4,a+1,a+2};\n    int **ptr = p;\n    ptr++;\n    printf(\"%d,%d\",ptr-p,**ptr); //line 1\n    return 0;\n}\n</code></pre>\n\n<p>I ran the code on CodeBlocks:IDE. The output is <code>1,40</code>. I got why <code>40</code> part. But I don't understand is why <code>1</code>? From my understanding <code>ptr-p</code> should give the difference in their address and that should be 4 as in 4 bytes.</p>\n\n<p>Please kindly give a detailed explanation.</p>\n\n<p>Thank you.  </p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1548247162, "post_id": 54327484, "comment_id": 95472960, "body": "Instead of <code>float avg = 8&#47;3;</code>, try <code>float avg = 8.0&#47;3.0;</code> <code>8</code> and <code>3</code> are integer literals, so <code>8&#47;3</code> will do the integer division, which results in <code>2</code>, and when you assign that to <code>avg</code>, it gets casted to <code>2.0</code>. By having them as <code>8.0</code> and <code>3.0</code> you ensure that they are already floats when the division occurs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548247398, "post_id": 54327484, "comment_id": 95473103, "body": "This is perhaps the most common beginner FAQ ever. I would recommend reading the chapter about float numbers in your beginner-level C book. It will address this very bug explicitly."}, {"owner": {"reputation": 2188, "user_id": 3157428, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NdasB.jpg?s=128&g=1", "display_name": "Ruli", "link": "https://stackoverflow.com/users/3157428/ruli"}, "edited": false, "score": 0, "creation_date": 1548247409, "post_id": 54327484, "comment_id": 95473113, "body": "Exactly, and workaround is to multiply numbers by 1.0, <code>float avg = 8&#47;(3*1.0)</code> which will produce float result"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1548247412, "post_id": 54327484, "comment_id": 95473115, "body": "@Blaze: Noting that <code>8.0</code> is a <code>double</code> constant although the compiler will sort this all out for you. Prefer <code>8.0f</code>?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1548247566, "post_id": 54327484, "comment_id": 95473210, "body": "@Bathsheba Right, I keep forgetting about that. Thanks for reminding me."}], "owner": {"reputation": 69, "user_id": 10751259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_aS7GYh8U-M/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gUO09i83Fl_LHa09QZ4z41JnATZA/mo/photo.jpg?sz=128", "display_name": "Eitan", "link": "https://stackoverflow.com/users/10751259/eitan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1548247258, "answer_count": 0, "score": 3, "last_activity_date": 1548247122, "creation_date": 1548247122, "question_id": 54327484, "link": "https://stackoverflow.com/questions/54327484/float-number-is-allways-0", "closed_reason": "Duplicate", "title": "float number is allways .0", "body": "<p>I have written the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\nfloat avg = 8/3;\nprintf(\"Average: %.1f\", avg);\nreturn 0;\n}\n</code></pre>\n\n<p>When I run the program, the output is:</p>\n\n<pre><code>Average: 2.0\n</code></pre>\n\n<p>the output I want is the avg var will be 2.6.</p>\n\n<p>I understood from google this should be the output, but it's not.\nWhat am I doing wrong?</p>\n"}, {"tags": ["c", "linux", "gcc", "debian"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548246271, "post_id": 54327150, "comment_id": 95472490, "body": "Did you install a 64- or 32-bit GCC? How about the <code>binutils</code> package (which contains the <code>ld</code> linker program)?"}, {"owner": {"reputation": 142, "user_id": 3969844, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wCiM0.jpg?s=128&g=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/3969844/bharat"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548246467, "post_id": 54327150, "comment_id": 95472598, "body": "gcc came pre-installed and since the image is 32 bit, the gcc would be 32 bit. here&#39;s version on commandline                                             guest@debian:~$ gcc --version gcc (Debian 4.7.2-5) 4.7.2"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 1, "creation_date": 1548247992, "post_id": 54327150, "comment_id": 95473446, "body": "What do <code>file &#47;usr&#47;lib&#47;gcc&#47;i486-linux-gnu&#47;4.7&#47;crtbegin.o</code> or <code>readelf -h &#47;usr&#47;lib&#47;gcc&#47;i486-linux-gnu&#47;4.7&#47;crtbegin.o</code> report?"}, {"owner": {"reputation": 142, "user_id": 3969844, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wCiM0.jpg?s=128&g=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/3969844/bharat"}, "edited": false, "score": 0, "creation_date": 1548248934, "post_id": 54327150, "comment_id": 95473959, "body": "root@debian:/usr/lib/gcc/i486-linux-gnu/4.7# file /usr/lib/gcc/i486-linux-gnu/4.7/crtbegin.o <b>/usr/lib/gcc/i486-linux-gnu/4.7/crtbegin.o: data</b> root@debian:/usr/lib/gcc/i486-linux-gnu/4.7# readelf -h crtbegin.o <b>readelf: Error: Not an ELF file - it has the wrong magic bytes at the start</b>"}], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 3969844, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wCiM0.jpg?s=128&g=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/3969844/bharat"}, "is_accepted": false, "score": 0, "last_activity_date": 1548250173, "creation_date": 1548250173, "answer_id": 54328410, "question_id": 54327150, "link": "https://stackoverflow.com/questions/54327150/gcc-linker-not-linking-programs-under-debian-7-4-wheezy-32-bit-gnome-3-4-2/54328410#54328410", "title": "gcc linker not linking programs under debian 7.4 wheezy 32-bit, gnome 3.4.2", "body": "<p>Reinstalled the following packages:\ncpp-4.7 (4.7.2-5)\ngcc-4.7 (4.7.2-5)\ngcc-4.7-base (4.7.2-5)</p>\n\n<p>Thanks to @David Collins, I realized that the crtbegin.o file and the other one were kind of not ok. So I reinstalled gcc packages above. I had gcc base, gcc 4.6 and 4.7, i only reinstalled the latest ones which resolved the issue. Thank you David Collins.</p>\n"}], "owner": {"reputation": 142, "user_id": 3969844, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wCiM0.jpg?s=128&g=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/3969844/bharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1548250173, "creation_date": 1548246051, "question_id": 54327150, "link": "https://stackoverflow.com/questions/54327150/gcc-linker-not-linking-programs-under-debian-7-4-wheezy-32-bit-gnome-3-4-2", "title": "gcc linker not linking programs under debian 7.4 wheezy 32-bit, gnome 3.4.2", "body": "<p>My system is 64 bit but i installed debian 7.4 wheezy with Gnome 3.4.2\nwhen I run gcc, i get the following error from linker</p>\n\n<pre><code>&gt;gcc -o first first.c\n\n/usr/bin/ld:/usr/lib/gcc/i486-linux-gnu/4.7/crtbegin.o: file format not recognized; treating as linker script\n/usr/bin/ld:/usr/lib/gcc/i486-linux-gnu/4.7/crtbegin.o:1: syntax error\n</code></pre>\n\n<p>I tried reinstalling gcc, glibc and binutils.\nMy system is actually 64 bit, but I had 32 bit debian image, could that be the issue ?</p>\n\n<p>I am not cross compiling and first.c is a hello world application.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n\nprintf(\"hello world\");\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1548246240, "post_id": 54327109, "comment_id": 95472461, "body": "Put a <code>while(1) { ... }</code> around the relevant code and when you find a free spot do a return"}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 1, "creation_date": 1548246259, "post_id": 54327109, "comment_id": 95472474, "body": "<i>&quot;it rolls again until...&quot;</i> - This statement implies a loop, but none has been written."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1548247348, "post_id": 54327109, "comment_id": 95473085, "body": "Your &quot;AI&quot; is basically just rolling a random number? Get rid of <code>boardchar[0][0] == &#39;1&#39;</code>, <code>boardchar[0][1] == &#39;2&#39;</code>, this doesn&#39;t make sense, you shouldn&#39;t have numbers written to the board in the first place."}], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1548247538, "post_id": 54327287, "comment_id": 95473192, "body": "If <code>AIChoice</code> is random, as it probably is with OP&#39;s code, this will work (so +1 from me), but won&#39;t make much sense otherwise. Alternative approach with a random &quot;AI&quot; would be to count empty slots before rolling (<code>E</code>) and then roll a random number from <code>0</code> to <code>E-1</code>, this would make it <code>O(1)</code> complexity for the fixed board size, but would make the code a bit more complex."}, {"owner": {"reputation": 13906, "user_id": 1187220, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AwroB.jpg?s=128&g=1", "display_name": "Michel Keijzers", "link": "https://stackoverflow.com/users/1187220/michel-keijzers"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1548256185, "post_id": 54327287, "comment_id": 95478446, "body": "@Groo I didn&#39;t focus much on the random part, because I assume (hope) that the random will just be be an &#39;initial&#39; version, later I hope a better implementation will be used. Although your solution is indeed better in performance, for O(n) where n is less than 9 on average, most CPUs will not having a problem. In theory my algorithm could never finish though."}], "tags": [], "owner": {"reputation": 13906, "user_id": 1187220, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AwroB.jpg?s=128&g=1", "display_name": "Michel Keijzers", "link": "https://stackoverflow.com/users/1187220/michel-keijzers"}, "is_accepted": false, "score": 2, "last_activity_date": 1548246483, "creation_date": 1548246483, "answer_id": 54327287, "question_id": 54327109, "link": "https://stackoverflow.com/questions/54327109/tic-tac-toe-player-vs-ai-ai-issue/54327287#54327287", "title": "Tic-Tac-Toe Player vs AI -- AI Issue", "body": "<p>You can use a while or do-while statement.</p>\n\n<p>Also make a 3x3 twodimensional array that keeps track of the spots: 0 = unfilled, 1 = Human, 2 = AI (better is to use an enum).</p>\n\n<p>In pseudo code:</p>\n\n<p>Global variable:</p>\n\n<pre><code>int spots[3][3]; // 3x3 array\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>Setup(); // Setup of board, sets 0's to spots.\n\nwhile (!endOfGame())\n{\n    Player(); // Handle player, assuming it plays first, sets a 1 in one spot\n\n    if (!endOfGame())\n    {\n         AI();\n    }\n}\n\n\nvoid AI() \n{\n    do\n    {\n       square = AIChoice();\n    } while (spots[square] == 0);\n\n    // Now we know spots[square] == 0, thus unfilled\n    spots[square] = 2; // AI\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10955425, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rq-pccrPYwU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP996tky5Bn_jZ0y8gy7h0yu-xmcQ/mo/photo.jpg?sz=128", "display_name": "Fernaldy Aristo", "link": "https://stackoverflow.com/users/10955425/fernaldy-aristo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1548246483, "creation_date": 1548245932, "question_id": 54327109, "link": "https://stackoverflow.com/questions/54327109/tic-tac-toe-player-vs-ai-ai-issue", "title": "Tic-Tac-Toe Player vs AI -- AI Issue", "body": "<p>This is a player vs AI tic-tac-toe game in C. If the AI rolls into an occupied spot, how do I make it so that it rolls again until it reaches an unoccupied spot?</p>\n\n<pre><code>char boardchar[3][3] = { {'1', '2', '3'}, {'4', '5', '6'}, {'7', '8', '9'} }; \n\n\nvoid Turn()\n{\n    /*Player's Turn*/\n\n    AIrandomizer();\n    AI = AI_roll();\n\n\n        if (AI == 1 &amp;&amp; boardchar[0][0] == '1')\n        {\n            boardchar[0][0] = symbAI;\n        }\n\n        else if (AI == 2 &amp;&amp; boardchar[0][1] == '2')\n        {\n            boardchar[0][1] = symbAI;                   \n        }\n\n\n        else if (AI == 3 &amp;&amp; boardchar[0][2] == '3')\n        {\n            boardchar[0][2] = symbAI;               \n        }\n\n\n        else if (AI == 4 &amp;&amp; boardchar[1][0] == '4')\n        {\n            boardchar[1][0] = symbAI;       \n        }\n\n        else if (AI == 5 &amp;&amp; boardchar[1][1] == '5')\n        {\n            boardchar[1][1] = symbAI;               \n        }\n\n\n        else if (AI == 6 &amp;&amp; boardchar[1][2] == '6')\n        {\n            boardchar[1][2] = symbAI;               \n        }\n\n        else if (AI == 7 &amp;&amp; boardchar[2][0] == '7')\n        {\n            boardchar[2][0] = symbAI;               \n        }\n\n        else if (AI == 8 &amp;&amp; boardchar[2][1] == '8')\n        {\n            boardchar[2][1] = symbAI;               \n        }\n\n        else if (AI == 9 &amp;&amp; boardchar[2][2] == '9')\n        {\n            boardchar[2][2] = symbAI;           \n        }\n\n}\n</code></pre>\n\n<p>I've tried switch(case) and multiple ifs and else ifs but I still can't manage to figure out a way to fix this issue.</p>\n"}, {"tags": ["c", "visual-c++"], "comments": [{"owner": {"reputation": 125, "user_id": 10591725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jfu5OShbIC0/AAAAAAAAAAI/AAAAAAAAABM/iNW-EufqVHA/photo.jpg?sz=128", "display_name": "IT World", "link": "https://stackoverflow.com/users/10591725/it-world"}, "edited": false, "score": 0, "creation_date": 1548242049, "post_id": 54325940, "comment_id": 95470291, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8609842/how-to-concat-an-int-to-a-wchar-t-in-c\">How to concat an int to a wchar_t* in C++?</a>"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1548242174, "post_id": 54325940, "comment_id": 95470355, "body": "Why do you tag &quot;c++&quot; then? :P"}, {"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548242215, "post_id": 54325940, "comment_id": 95470373, "body": "I am working on vc++ with c file"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1548242269, "post_id": 54325940, "comment_id": 95470400, "body": "@sijith I&#39;m a bit confused. You are using VC++ and you are trying to compile a &quot;C file&quot; in C++ mode? (Since AFAIK VC++ does not support real &quot;C&quot;)"}, {"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548242383, "post_id": 54325940, "comment_id": 95470464, "body": "Actually my project is c++ but one file alone in c and in that c file I need to apped integer to wchar_t"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 3, "creation_date": 1548242409, "post_id": 54325940, "comment_id": 95470478, "body": "<code>wchar_t buffer[1] = L&quot;\\n&quot;;</code> You do not have sufficient memory to hold a string. You need to provide a place for terminating 0."}, {"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548242771, "post_id": 54325940, "comment_id": 95470675, "body": "I incresed size to 5 but still crashing on wcscat(mySalvo, buffer);"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1548242782, "post_id": 54325940, "comment_id": 95470679, "body": "@L.F. yes VS does support real C, but some parts like VLAs (and maybe others) are missing."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1548242794, "post_id": 54325940, "comment_id": 95470687, "body": "The C specific solution seems to be <a href=\"https://en.cppreference.com/w/c/io/fwprintf\" rel=\"nofollow noreferrer\">swprintf() or better snwprintf_s()</a>."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548242978, "post_id": 54325940, "comment_id": 95470776, "body": "@Jabberwocky Thank you! I did not know that :)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1548243484, "post_id": 54325940, "comment_id": 95471051, "body": "you&#39;ve made <code>mySalvo</code> a const, so that is telling the compiler you won&#39;t ever change the contents of it..."}], "answers": [{"comments": [{"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548244553, "post_id": 54326627, "comment_id": 95471582, "body": "Thsi worked but crashed on wcscat(mySalvo, buffer); even after increasing buffer size"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548244646, "post_id": 54326627, "comment_id": 95471622, "body": "See the rest of UBs in your code (BTW I think you hold the world record  of UBs/line)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548244695, "post_id": 54326627, "comment_id": 95471647, "body": "Remove <code>const</code> as well :)"}, {"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548245744, "post_id": 54326627, "comment_id": 95472189, "body": "mySalvo is already declared an assigned gloabally so wcscat crashes as its size is exceding while copying"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548245877, "post_id": 54326627, "comment_id": 95472258, "body": "<code>const wchar_t mySalvo[10] = L&quot;Group:&quot;;  &#47;&#47; THis is global</code> =&gt; <code>wchar_t mySalvo[16] = L&quot;Group:&quot;;  &#47;&#47; THis is global</code>"}, {"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1548247589, "post_id": 54326627, "comment_id": 95473219, "body": "THanks P__J__ I done some thing like this \tint size = wcslen(mySalvo); \tmySalvo[size-1] = (salvo + 1) + &#39;0&#39;;  My salvo count is below 10"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1548244215, "creation_date": 1548244215, "answer_id": 54326627, "question_id": 54325940, "link": "https://stackoverflow.com/questions/54325940/how-to-concat-integer-with-wchar-t/54326627#54326627", "title": "How to concat integer with wchar_t", "body": "<p>mySalvo is const - which was spotted by Chris.</p>\n\n<p>And on top of it</p>\n\n<pre><code>wchar_t buffer[1] = L\"\\n\";\nitoa(salvo, buffer, 1); -\nwcscat(mySalvo, buffer);  // app crashes here\n</code></pre>\n\n<p>it is undefined behavior asd you do not have enough space to accommodate <code>L\"\\n\"</code>. Both calls invoke the UB. <code>itoa</code> will not work with the wchar_t strings. You need to find the appropriate function. </p>\n\n<p>try <code>wchar_t buffer[2] = L\"\\n\";</code> instead</p>\n"}, {"tags": [], "owner": {"reputation": 16850, "user_id": 172642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2a18a04255beea3beff827eecedd64?s=128&d=identicon&r=PG", "display_name": "gavinb", "link": "https://stackoverflow.com/users/172642/gavinb"}, "is_accepted": true, "score": 1, "last_activity_date": 1548246176, "creation_date": 1548246176, "answer_id": 54327188, "question_id": 54325940, "link": "https://stackoverflow.com/questions/54325940/how-to-concat-integer-with-wchar-t/54327188#54327188", "title": "How to concat integer with wchar_t", "body": "<p>There are numerous issues with this code:</p>\n\n<pre><code>const wchar_t mySalvo[10] = L\"Group:\";  // THis is global\nint salvo = 0;  \nwchar_t buffer[1] = L\"\\n\";\nitoa(salvo, buffer, 1);\nwcscat(mySalvo, buffer);  // app crashes here\n</code></pre>\n\n<ul>\n<li>First of all, using a global is not best practice. There doesn't appear to be any good reason for it to be global, so just make it local to where you need it.</li>\n<li>Second, you've specified it is a constant string, and initialised it to a string literal, which means it will probably be stored in a read-only segment of memory. Yet you're writing into it with <code>wcscat</code> (your compiler surely gave you a warning??).</li>\n<li>Also the string is limited to 10 <code>wchar_t</code> elements, so even if it weren't read-only, it would only be long enough to store a 3 digit number.</li>\n<li>the buffer intended to store your converted string is one wide character long (and the initialisation to newline is pointless) so you will overflow your buffer with any value of salvo above 9.</li>\n<li>the third parameter to <code>itoa</code> is the number base, which would normally be 10. It is meaningless to have a number of base 1.</li>\n<li>you're using <code>wcscat</code> to write into a constant string, which is verboten, even assuming it were long enough.</li>\n</ul>\n\n<p>So there's a lot of fundamentals here you need to come to terms with. String allocation, memory initialisation, arrays, constant variables and constant literals, and more.</p>\n\n<p>What you are trying to do is simply produce a formatted string. The <a href=\"https://en.cppreference.com/w/c/io/fwprintf\" rel=\"nofollow noreferrer\"><code>sprintf</code> family of string formatting functions</a> provide all you could possibly need, plus a secure way of doing it.</p>\n\n<p>The simplest solution would be something like this:</p>\n\n<pre><code>void show_message(unsigned salvo)\n{\n    wchar_t message[64];\n    swprintf_s(message, sizeof(message), L\"Group: %u\\n\", salvo);\n\n    // do something with message!\n}\n</code></pre>\n\n<p>So if you called <code>show_message(123)</code>, the resulting value in <code>message</code> would be: <code>\"Group: 123\\n\"</code>.</p>\n"}], "owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 54327188, "answer_count": 2, "score": 0, "last_activity_date": 1548246176, "creation_date": 1548241938, "last_edit_date": 1548245062, "question_id": 54325940, "link": "https://stackoverflow.com/questions/54325940/how-to-concat-integer-with-wchar-t", "title": "How to concat integer with wchar_t", "body": "<p>I want to concat an integer with wchar_t, tried below method but its crashing</p>\n\n<pre><code>const wchar_t mySalvo[10] = L\"Group:\";  // THis is global\nint salvo = 0;  \nwchar_t buffer[1] = L\"\\n\";\nitoa(salvo, buffer, 1);\nwcscat(mySalvo, buffer);  // app crashes here\n</code></pre>\n\n<p>ITs in C</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 0, "creation_date": 1548241181, "post_id": 54325635, "comment_id": 95469789, "body": "It is a side effect of an undefined behaviour."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1548241243, "post_id": 54325635, "comment_id": 95469824, "body": "For <i>undefined behavior</i> anything is possible."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548241695, "post_id": 54325635, "comment_id": 95470069, "body": "Your car does not always roll away when you leave the parking brake off. It&#39;s not worth the time to investigate why though."}, {"owner": {"reputation": 568, "user_id": 10816404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UU34KIKCsDo/AAAAAAAAAAI/AAAAAAAAAFs/ddSxo0F-UBc/photo.jpg?sz=128", "display_name": "Duck Ling", "link": "https://stackoverflow.com/users/10816404/duck-ling"}, "edited": false, "score": 0, "creation_date": 1548256775, "post_id": 54325635, "comment_id": 95478792, "body": "thanks Jose, Ian, and Weather!"}], "owner": {"reputation": 568, "user_id": 10816404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UU34KIKCsDo/AAAAAAAAAAI/AAAAAAAAAFs/ddSxo0F-UBc/photo.jpg?sz=128", "display_name": "Duck Ling", "link": "https://stackoverflow.com/users/10816404/duck-ling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "closed_date": 1548243936, "answer_count": 0, "score": 1, "last_activity_date": 1548241026, "creation_date": 1548241026, "question_id": 54325635, "link": "https://stackoverflow.com/questions/54325635/how-can-fgets-sscanf-write-to-an-array-larger-than-its-size", "closed_reason": "Duplicate", "title": "how can fgets() + sscanf() write to an array larger than it&#39;s size?", "body": "<p>Consider the following. Say you have an     char arr[3]    , like in the code below. you use      fgets(arr, 20, stdin) //20 being any number above 3//; and sscanf() to get an input from the user, then print out the array.     sizeof(arr)   still implies it's size 3, but it prints out correctly until it reaches 20 characters. how is this possible?also, it doesn't always produce segmentation fault. does it have to bump at already written-in memory block to do so? </p>\n\n<p>summary:\n-how is it possible that char arr[3] prints out 3+(in fact, as many as we want) chars?\n-why segmentation fault doesn't always appear when we keep writing to an array that's already reached (and went past) its size?</p>\n\n<p>thank you!\nPawel</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char arr[3];\n    int x,y,z;\n    fgets(arr, 20, stdin);\n    sscanf(arr, \"%d, %d, %d,\", &amp;x, &amp;y, &amp;z);\n    printf(\"x%i, y%i, z%i\\n\",x, y, z);\n    printf(\"%s\", arr);\n    printf(\"%lu\\n\", sizeof(arr));\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548240291, "post_id": 54325322, "comment_id": 95469277, "body": "The line <code>fill(a,b);</code> generates two compiler warnings: <i>uninitialized local variable used</i>. The values set in the function do not find their way back to the variables in <code>main</code> so they are still uninitialised in <code>printArray(a,b);</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1548240331, "post_id": 54325322, "comment_id": 95469301, "body": "You&#39;re passing your pointers by value - you need to add another level of indirection so that you can pass them by reference. Alternatively do the allocation/freeing in main and keep the functions as they are."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1548240347, "post_id": 54325322, "comment_id": 95469312, "body": "You should pass the address of the pointers: <code>fill(&amp;a, &amp;b);</code> and then make necessary changes to the function"}], "answers": [{"tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": true, "score": 2, "last_activity_date": 1548240558, "last_edit_date": 1548240558, "creation_date": 1548240471, "answer_id": 54325481, "question_id": 54325322, "link": "https://stackoverflow.com/questions/54325322/i-get-trash-values-when-trying-to-print-them-and-a-segmentation-fault/54325481#54325481", "title": "I get trash values when trying to print them and a segmentation fault", "body": "<p>You should pass pointers to pointers as arguments to the <code>fill</code> function so you can effectively modify the pointers <code>a</code> and <code>b</code>.</p>\n\n<pre><code>void fill(int** a, int** b){\n    *a = malloc(LENGTH * sizeof(int));\n    (*a)[i]=i;\n\nfill(&amp;a,&amp;b);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 0, "last_activity_date": 1548242292, "last_edit_date": 1548242292, "creation_date": 1548241787, "answer_id": 54325891, "question_id": 54325322, "link": "https://stackoverflow.com/questions/54325322/i-get-trash-values-when-trying-to-print-them-and-a-segmentation-fault/54325891#54325891", "title": "I get trash values when trying to print them and a segmentation fault", "body": "<p>Whenever you send args to a function in c they are always sent by value.\nhere, you send by value the addresses that a and b point to - they are uninitialized- so junk values.</p>\n\n<p>When you use malloc- it returns a pointer to an address on the heap.\nin your function the local values of a and b change. but in your main function they do not. if you want your function to change the address the pointers are pointing to in outside of the function  you must send **a and **b. now when you change the address for a : * <em>a= malloc()</em> you change the value the pointer is holding. So now your a and b pointers will hold the new addresses allocated.</p>\n\n<pre><code>void fill(int** a, int** b)/*here you send by value the pointers addrsses */\n{\n int* aptr = NULL;\n int* bptr = NULL;\n\n\n *a = (int*) malloc(LENGTH * sizeof(int));/*update the value pointe a is pointing to */\n *b = (int*) malloc(LENGTH * sizeof(int));\n\n aptr = *a;\n bptr = *b;\n\n for(int i=0; i&lt; LENGTH;i++){\n  aptr[i]=i;\n  bptr[i]=i+10;\n }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7196794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b36e8a94c9858192a48916b65f340ea?s=128&d=identicon&r=PG&f=1", "display_name": "Pash", "link": "https://stackoverflow.com/users/7196794/pash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1548245064, "accepted_answer_id": 54325481, "answer_count": 2, "score": 1, "last_activity_date": 1548242292, "creation_date": 1548239965, "last_edit_date": 1548240182, "question_id": 54325322, "link": "https://stackoverflow.com/questions/54325322/i-get-trash-values-when-trying-to-print-them-and-a-segmentation-fault", "closed_reason": "Duplicate", "title": "I get trash values when trying to print them and a segmentation fault", "body": "<p>I wrote this simple code to test a bigger implementation I have and I get trash values plus a seg fault. One solution is to declare int* a and int* b as global and take out the arguments of fill. My question is, what is the consideration of memory handling in both cases, and why does it throw an error? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#define LENGTH 4\n\nvoid fill(int* a, int* b){\n  a = (int*) malloc(LENGTH * sizeof(int));\n  b = (int*) malloc(LENGTH * sizeof(int));\n\n  for(int i=0; i&lt; LENGTH;i++){\n    a[i]=i;\n    b[i]=i+10;\n  }\n }\n\nvoid printArray(int* a, int* b){\n   for(int i = 0 ; i &lt; LENGTH; i++)\n    printf(\"%d\\n\",a[i] );\n\n  for(int i = 0 ; i &lt; LENGTH; i++)\n    printf(\"%d\\n\",b[i] );\n}\n\nint main(){\n\n    int* a;\n    int* b;\n\n    fill(a,b);\n    printArray(a,b);\n\n}\n</code></pre>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 5, "creation_date": 1548239718, "post_id": 54325180, "comment_id": 95468958, "body": "Thats just plain old undefined behavior, there is no &quot;why&quot;."}, {"owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1548239780, "post_id": 54325180, "comment_id": 95468992, "body": "Is that a coincidence that 3 came up the very first time?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1548239892, "post_id": 54325180, "comment_id": 95469055, "body": "Yes, it could&#39;ve been 7 or 42 or &quot;format c&quot; instead."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1548240165, "post_id": 54325180, "comment_id": 95469209, "body": "<b>It is UB: don&#39;t do it!</b> The first time you use <code>*stackAddr</code> it has stuff from <code>ptr()</code>; the second time it has stuff from <code>printf()</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1548242013, "post_id": 54325180, "comment_id": 95470264, "body": "The behaviour of that code is undefined, which means the C standard doesn&#39;t specify any constraints on what happens.   What happens CAN BE (but is not required to be) different for different compilers, different for the same compiler with different settings (e.g. optimisation), or even be different for different phases of the moon."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1548247527, "post_id": 54325180, "comment_id": 95473182, "body": "Please read the top-voted answer of the linked duplicate. It answers everything asked here."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1548241064, "creation_date": 1548241064, "answer_id": 54325649, "question_id": 54325180, "link": "https://stackoverflow.com/questions/54325180/what-happens-when-you-access-the-previous-stack-variable/54325649#54325649", "title": "What happens when you access the previous stack variable?", "body": "<p>The lecture notes are more about a study of the behaviour of a particular compiler rather than anything else: The assertion in your picture that \"Pointers in C allow access to deallocated memory\" is not true from a language perspective; the behaviour is merely <em>undefined</em> by the C standard.</p>\n\n<p>Your best bet here therefore is to inspect the generated assembly; this is unanswerable at the language level as the language does not define the behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "edited": false, "score": 0, "creation_date": 1548246604, "post_id": 54326908, "comment_id": 95472682, "body": "Thanks. I was thinking that the de-referencing is happening <i>inside</i> the function i.e we are <i>passing</i> the pointer inside. Anyway, other answers are super useful as well."}, {"owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "edited": false, "score": 0, "creation_date": 1548265348, "post_id": 54326908, "comment_id": 95483310, "body": "The lecture also said why he was doing it in two steps, <code>content</code> and <code>*stackAddr</code> instead of directly using <code>*stackAddr</code> i.e <code>printf(&quot;%d&quot;, *stackAddr);</code> which might lead to some confusion about the order of evaluation. Looking back, it all makes sense now."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "edited": false, "score": 0, "creation_date": 1548265536, "post_id": 54326908, "comment_id": 95483395, "body": "@Nishant that doesn&#39;t make any difference. All parameters must be known before they can ne passed to a function. Once the called function ist entered, it&#39;s too late."}, {"owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "edited": false, "score": 0, "creation_date": 1548301826, "post_id": 54326908, "comment_id": 95494797, "body": "Yeah @Gerhardh, but at-least in that case it is implicit. The order in the syntax and evaluation are different. The lecturer made it explicit by avoiding all these confusions, but even then I managed to get confused xD."}], "tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": true, "score": 1, "last_activity_date": 1548245160, "creation_date": 1548245160, "answer_id": 54326908, "question_id": 54325180, "link": "https://stackoverflow.com/questions/54325180/what-happens-when-you-access-the-previous-stack-variable/54326908#54326908", "title": "What happens when you access the previous stack variable?", "body": "<p>Your assumption is not exactly true:</p>\n\n<blockquote>\n  <p>If printf didn't use that slot for something else, that behavior should have happened the second time as well no?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>For the first call the illegal memory access is done before calling <code>printf</code> as the parameter must be evaluated before you can call the function. For the second call the expression is evaluated again and anything could have happened in the meantime.</p>\n\n<p>That's what happens if you invoke UB.</p>\n"}], "owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1548247481, "accepted_answer_id": 54326908, "answer_count": 2, "score": 1, "last_activity_date": 1548245160, "creation_date": 1548239534, "last_edit_date": 1548239821, "question_id": 54325180, "link": "https://stackoverflow.com/questions/54325180/what-happens-when-you-access-the-previous-stack-variable", "closed_reason": "Duplicate", "title": "What happens when you access the previous stack variable?", "body": "<p>I was trying to access a variable from the previous stack and it gave me the following error in Linux:</p>\n\n<pre><code>.... terminated by signal SIGSEGV (Address boundary error\n</code></pre>\n\n<p>However in CS61C lecture from 2014, the output was coming as:</p>\n\n<pre><code>3\nSomething Random\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Ck9Vy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ck9Vy.png\" alt=\"enter image description here\"></a></p>\n\n<ol>\n<li>How did it even work in that machine vs my Linux?</li>\n<li>Why did it print <code>3</code> the <strong>first</strong> time but not the <strong>second</strong> time? If <code>printf</code> didn't use that slot for something else, <strong>that</strong> behavior should have happened the second time as well no?</li>\n</ol>\n\n<p>Below is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint *ptr() {\n    int y;\n    y = 3;\n    return &amp;y;\n}\n\nmain() {\n    int *stackAddr, content;\n    stackAddr = ptr();\n    content = *stackAddr;\n    printf(\"%d\", content);\n    content = *stackAddr;\n    printf(\"%d\", content);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "android-source", "stack-trace", "android.mk"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548238515, "post_id": 54324757, "comment_id": 95468237, "body": "<code>not show properly function&#39;s names</code> the function names (or function themselves) are probably removed after the code is compiled. You can try to compile with debugging symbols enabled and try writing some smart library that in case of call stack dump will try to extract the debugging symbols from specified program location, but you will / can still see some functions names missing (inlined, optimized, merged, etc...). C is not java, in C there is only assembly."}], "owner": {"reputation": 31, "user_id": 10691263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BKegOKg4xmY/AAAAAAAAAAI/AAAAAAAAAEs/Bm2yh3uCSwo/photo.jpg?sz=128", "display_name": "\u0413\u0440\u0438\u0446\u044c \u0425\u0443\u0434\u0438\u0439", "link": "https://stackoverflow.com/users/10691263/%d0%93%d1%80%d0%b8%d1%86%d1%8c-%d0%a5%d1%83%d0%b4%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1548238205, "creation_date": 1548238205, "question_id": 54324757, "link": "https://stackoverflow.com/questions/54324757/aosp-print-method-call-stack-trace", "title": "AOSP print method call stack trace", "body": "<p>I need to see a stack trace in AOSP C/C++ code. I have found some solutions but all of them not show properly function's names.<br><br>\n1. The solution from <a href=\"http://yongbingchen.github.io/blog/2013/05/09/dump-stack-in-android-native-c-code/\" rel=\"nofollow noreferrer\">http://yongbingchen.github.io/blog/2013/05/09/dump-stack-in-android-native-c-code/</a> gives the following result:\n<br><code>01-22 11:19:24.737 CallStack ( 3304): #00 pc 0004440b  /system/lib/hw/bluetooth.default.so (dump_stack_android+42)\n01-22 11:19:24.737 CallStack ( 3304): #01 pc 0008b7f5  /system/lib/hw/bluetooth.default.so (btif_gatt_check_encrypted_link+32)\n01-22 11:19:24.737 CallStack ( 3304): #02 pc 0008870f  /system/lib/hw/bluetooth.default.so\n01-22 11:19:24.737 CallStack ( 3304): #03 pc 0007ea5f  /system/lib/hw/bluetooth.default.so\n01-22 11:19:24.737 CallStack ( 3304): #04 pc 00126c5f  /system/lib/hw/bluetooth.default.so\n01-22 11:19:24.737 CallStack ( 3304): #05 pc 00125673  /system/lib/hw/bluetooth.default.so\n01-22 11:19:24.737 CallStack ( 3304): #06 pc 00126963  /system/lib/hw/bluetooth.default.so\n01-22 11:19:24.737 CallStack ( 3304): #07 pc 00047313  /system/lib/libc.so (_ZL15__pthread_startPv+22)\n01-22 11:19:24.737 CallStack ( 3304): #08 pc 00019e5d  /system/lib/libc.so (__start_thread+6)</code><br><br>\nAs you can see the lines from <code>#02</code> to <code>#06</code> have no function's names<br><br>\n2. The solution from <a href=\"https://stackoverflow.com/a/28858941/10691263\">https://stackoverflow.com/a/28858941/10691263</a> working fine for the desctop project after adding <code>-rdynamic</code> flag. However, after integrating this code with AOSP I got the same result as in the previous example.<br>\nIt looks like some symbols in bluetooth.default.so are hidden. I tried to change <code>-fvisibility</code> flag in <code>Android.mk</code> from <code>hidden</code> to <code>default</code> but received the following compiling error:\n<code>system/bt/btcore/src/hal_util.c:90: error: undefined reference to 'hw_get_module'\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)</code><br><br>\nPlease help me find a solution that will be able to show a callstack with all function's names for AOSP.</p>\n"}, {"tags": ["c", "encapsulation", "naming"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1548238447, "post_id": 54324688, "comment_id": 95468189, "body": "<i>&quot;both same type(function pointer) and differ in argument&#39;s number&quot;</i> - If the number of arguments differs, they are not the same type, are they?"}, {"owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548238549, "post_id": 54324688, "comment_id": 95468258, "body": "In book OOP by Axel Schreiner <b>&quot;What exactly is a data type? We can take several points of view. A data type is a set of values. Alternatively, we can define a data type as a set of values plus operations to work with them.&quot;</b> I think I still cannot understand it."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548238604, "post_id": 54324688, "comment_id": 95468285, "body": "And calling with a <b>specific number of arguments</b> is an operation, which is different from calling with <b>another number of arguments</b>."}, {"owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548238737, "post_id": 54324688, "comment_id": 95468362, "body": "@StoryTeller May you please give me more direction of this very sentence? I&#39;m not good at this concept"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548238871, "post_id": 54324688, "comment_id": 95468431, "body": "I would suggest you put the book aside for now, and focus on learning C and OOP separately. Schreiner&#39;s books assumes (a lot of) familiarity with both. You&#39;ll only get more confused as you go along."}, {"owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548238881, "post_id": 54324688, "comment_id": 95468439, "body": "<b>If the number of arguments differs, they are not the same type, are they?</b> I&#39;m not sure about that. Moreover, I&#39;m not getting notion of data type."}, {"owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548238962, "post_id": 54324688, "comment_id": 95468494, "body": "@StoryTeller Okay...I&#39;ll listen to you. How do I do now?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548239046, "post_id": 54324688, "comment_id": 95468546, "body": "Well, the <a href=\"https://accu.org/index.php/book_reviews_redirect\" rel=\"nofollow noreferrer\">ACCU</a> publishes reviews of books. They are reviewed by seasoned programmers, <i>for</i> other programmers. You can look for reviews (and books) by searching there according to topic."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548239308, "post_id": 54324688, "comment_id": 95468703, "body": "@AndyLin Please drop that book already. It is needlessly complex and has lots of confused ideas. It is valuable to prove a point - yes you can do OO in C just fine - but beyond that, it is not good studying material for how to do OO in practice."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548239428, "post_id": 54324688, "comment_id": 95468770, "body": "Also, this question isn&#39;t necessarily opinion-based. How to name opaque types and member functions when doing OO C isn&#39;t really subjective - you have to rely on prefix naming rather than <code>this</code> pointers, as explained in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "edited": false, "score": 0, "creation_date": 1548298760, "post_id": 54325058, "comment_id": 95494248, "body": "Hi, thanks to you. I&#39;m a bit confused regarding your comment about function pointer. How<code>DEVICE_s* DeviceManager_Ctor</code>become <code>typedef DEVICE_s DeviceManager_Ctor_t</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "edited": false, "score": 0, "creation_date": 1548319463, "post_id": 54325058, "comment_id": 95500823, "body": "@AndyLin Sorry there was a typo, it should be <code>typedef DEVICE_s* DeviceManager_Ctor_t</code>. Fixed. That is, you typedef a function type called <code>DeviceManager_Ctor_t</code>, returning a <code>DEVICE_s*</code>. Then <code>DeviceManager_Ctor_t*</code> is a function pointer of that function type. But as mentioned at the bottom of the answer, I would rather recommend to not have ctor/dtor as function pointers, but simply indicate that they are member functions by the use of a function naming prefix."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1548319335, "last_edit_date": 1548319335, "creation_date": 1548239120, "answer_id": 54325058, "question_id": 54324688, "link": "https://stackoverflow.com/questions/54324688/how-to-name-a-good-meaningful-type/54325058#54325058", "title": "How to name a good/meaningful type?", "body": "<p>This is all a bit subjective, but I would start with dropping the style of hiding pointers behind typedef and smear some manner of \"Hungarian notation\" over it. A whole lot of C programmers will agree there.</p>\n\n<p>So the first suggestion is to go with </p>\n\n<pre><code>typedef struct DEVICE_s DEVICE_s;\n</code></pre>\n\n<p>And then define your opaque interface based on <code>DEVICE_s*</code> instead. Not only is it easier to read, you filter out obfuscation like a caller attempting to pass <code>p_DEVICE*</code> to the user-defined functions etc, because they don't realize they already have a pointer. (Win32 API suffers heavily from this problem.)</p>\n\n<p>Then your constructor becomes</p>\n\n<pre><code>DEVICE_s* DeviceManager_Ctor ( ...\n</code></pre>\n\n<p>And all member functions will take a <code>DEVICE_s*</code> parameter rather than a <code>p_DEVICE</code> by value. The caller will have to declare pointers instead of objects, making it clear to them that they have a pointer to incomplete type and nothing they can/should play around with.</p>\n\n<p>Next up you can drop the pointer hiding in the function pointer too. This is less of an issue, but it is nice to be consistent:</p>\n\n<pre><code>typedef DEVICE_s* DeviceManager_Ctor_t ( ...\n</code></pre>\n\n<p>Your function pointer definitions would then become:</p>\n\n<pre><code>DeviceManager_Ctor_t* Ctor;\n</code></pre>\n\n<p>You can drop the \"fp\" naming as it is already obvious that the type is a function pointer.</p>\n\n<hr>\n\n<p>As a side note, I would recommend to avoid mimicking C++ member functions with <code>obj.member</code> notation. Because in C, lacking a <code>this</code> pointer, you will end up with <code>obj.member(&amp;obj, ...)</code> which is kind of redundant.</p>\n\n<p>Rather just accept that C is the way it is and call member functions as <code>DeviceManager_Ctor(obj);</code> where <code>obj</code> is declared as <code>DEVICE_s* obj;</code>. The key to readable OO code is to use a consistent source code prefix for all functions belonging to the \"class\", as you already do: <code>DeviceManager_</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1548250266, "post_id": 54328266, "comment_id": 95474761, "body": "Implementing vtable is only really necessary for virtual methods. And whenever that happens it&#39;s time to think if C is really the right tool for the job or if the program design should be reconsidered. I heavily recommend the advice in Lundins answer that these function pointers should be avoided whenever possible."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548319638, "post_id": 54328266, "comment_id": 95500914, "body": "The Linux kernel coding style is mostly a subjective style document, without any rationales. As coding standards go, it is of garage hacker quality. Please don&#39;t use it as reference for how to write C programs. Just as the Linux kernel in itself should never be used as some canonical reference. If you want a serious coding standard written by professionals, use MISRA-C or CERT-C."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548320140, "post_id": 54328266, "comment_id": 95501157, "body": "As for this specific code, you clutter the ctor/dtor of the specific object together with some generic allocation code. I don&#39;t see any reason to do that in the generic case, as it gives no benefits. Although on some embedded systems you&#39;ll want to manually use a memory pool instead of malloc. But that&#39;s implementation details for a specific system."}], "tags": [], "owner": {"reputation": 79, "user_id": 8187195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6mEnU.jpg?s=128&g=1", "display_name": "Matthias Simon", "link": "https://stackoverflow.com/users/8187195/matthias-simon"}, "is_accepted": false, "score": -1, "last_activity_date": 1548249747, "creation_date": 1548249747, "answer_id": 54328266, "question_id": 54324688, "link": "https://stackoverflow.com/questions/54324688/how-to-name-a-good-meaningful-type/54328266#54328266", "title": "How to name a good/meaningful type?", "body": "<p><a href=\"https://www.kernel.org/doc/html/v4.10/process/coding-style.html#typedefs\" rel=\"nofollow noreferrer\">Linux kernel coding style</a> suggests to use typedefs with caution. \"Methods\" or function pointers are usually grouped into a operations struct. For example:</p>\n\n<pre><code>// DeviceManager.h\n//\n\nstruct device_operations;\n\nstruct device {\n    const char *name;\n    const struct device_operations *ops;\n};\n\nstruct device_operations {\n    void (*ctor)(struct device *d, const char *name);\n    void (*dtor)(struct device *d);\n};\n\nstruct device *DeviceManager_new(const char *name);\n\n\n// DeviceManager.c\n//\n\n#include &lt;stdlib.h&gt;\n\nstatic void DeviceManager_ctor(struct device *d, const char *name);\nstatic void DeviceManager_dtor(struct device *d);\n\nstatic struct device_operations DeviceManager_ops = {\n    .ctor = DeviceManager_ctor,\n    .dtor = DeviceManager_dtor,\n};\n\nstruct device *DeviceManager_new(const char *name)\n{\n  struct device *d = malloc(sizeof(*d));\n  if (!d)\n    return NULL;\n\n  d-&gt;ops = &amp;DeviceManager_ops;\n  d-&gt;ops-&gt;ctor(d, name);\n\n  return d;\n}\n\nstatic void DeviceManager_ctor(struct device *d, const char *name) { /* ... */ }\nstatic void DeviceManager_dtor(struct device *d) { /* ... */ }\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 54325058, "answer_count": 2, "score": 0, "last_activity_date": 1551754961, "creation_date": 1548238001, "last_edit_date": 1551754961, "question_id": 54324688, "link": "https://stackoverflow.com/questions/54324688/how-to-name-a-good-meaningful-type", "title": "How to name a good/meaningful type?", "body": "<p>Device_Manager.h</p>\n\n<pre><code>typedef enum\n{\n    DNM = 0x2A,\n\n}TYPE_e;\n\ntypedef struct DEVICE_s* p_DEVICE;\ntypedef p_DEVICE(*FUNC)(char* name, TYPE_e type, uint32_t ip, uint16_t method, uint16_t groupRule);   \n\np_DEVICE DeviceManager_New(void);\np_DEVICE DeviceManager_Ctor(char* name, TYPE_e type, uint32_t ip, uint16_t method, uint16_t groupRule);\np_DEVICE DeviceManager_Dtor(p_DEVICE element);\n</code></pre>\n\n<p>Device_Manager.c</p>\n\n<pre><code>struct DEVICE_s\n{\n    uint32_t IP;\n    TYPE_e Type;\n    uint16_t Method;\n    uint16_t GroupRule;\n    char Name[40];\n    FUNC fp_Ctor, fp_Dtor;    //this line needs modification\n}DeviceSet[32],DeviceTemp;\n\np_DEVICE DeviceManager_InitObject(p_DEVICE* self)\n{\n    (*self) = DeviceManager_New();\n    (*self)-&gt;IP = 0;\n    (*self)-&gt;Type = 0;\n    (*self)-&gt;Method = 0;\n    (*self)-&gt;GroupRule = 0;\n    memset((*self)-&gt;Name, 0, NAME_SIZE);\n    (*self)-&gt;fp_Ctor = DeviceManager_Ctor;\n    (*self)-&gt;fp_Dtor = DeviceManager_Dtor;    // warning: assign to wrong type\n    return (*self);\n}\np_DEVICE DeviceManager_New(void)\n{\n    return &amp;DeviceTemp;\n}\np_DEVICE DeviceManager_Ctor(char* name, TYPE_e type, uint32_t ip, uint16_t method, uint16_t groupRule)\n{\n    memcpy(DeviceTemp.Name, name, sizeof(name));\n    DeviceTemp.Type = type;\n    DeviceTemp.IP = ip;\n    DeviceTemp.Method = method;\n    DeviceTemp.GroupRule = groupRule;\n    return &amp;DeviceTemp;\n}\np_DEVICE DeviceManager_Dtor(p_DEVICE element)\n{\n    element-&gt;IP = 0;\n    element-&gt;Type = 0;\n    element-&gt;Method = 0;\n    element-&gt;GroupRule = 0;\n    memset(element-&gt;Name, 0, NAME_SIZE);\n    return element;\n}\n</code></pre>\n\n<p>This is my first time implementing encapsulation concept and came across some problem.</p>\n\n<p>In header file, I used typedef to define type \"FUNC\" as a function pointer.</p>\n\n<p>I think this name \"FUNC\" is not clear enough, because this naming fashion will result in:</p>\n\n<pre><code>struct DEVICE_s\n{\n    uint32_t IP;\n    TYPE_e Type;\n    uint16_t Method;\n    uint16_t GroupRule;\n    char Name[40];\n    FUNC1 fp_Ctor;    //not clear\n    FUNC2 fp_Dtor;    //not clear\n}DeviceSet[32],DeviceTemp;\n</code></pre>\n\n<p>fp_Ctor and fp_Dtor are both same type(function pointer) and differ in argument's number.</p>\n\n<p>I always struggle in naming type. Can offer some suggestions on naming type?</p>\n"}, {"tags": ["c++", "c", "clion"], "comments": [{"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "edited": false, "score": 0, "creation_date": 1548238127, "post_id": 54324634, "comment_id": 95467999, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35159634/how-to-link-curses-h-in-cmake\">How to link curses.h in Cmake?</a>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1548238958, "post_id": 54324634, "comment_id": 95468489, "body": "Please proofread your writing; it&#39;s hard to understand. There&#39;s no letter el or space in <code>ncurses</code> and  an IDE is an acronym for &quot;Integrated Development Environment&quot;; it only has one e and should be in all caps. We can figure out what you mean, but it&#39;s easier if you write in a more standard way so we don&#39;t need to figure out whether &quot;idee&quot; is &quot;IDE&quot; or &quot;idea&quot; or something."}, {"owner": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "edited": false, "score": 0, "creation_date": 1548239265, "post_id": 54324634, "comment_id": 95468683, "body": "sorry I was wrong writing IDE"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "edited": false, "score": 0, "creation_date": 1548238610, "post_id": 54324710, "comment_id": 95468289, "body": "/opt/clion-2018.2.6/bin/cmake/linux/bin/cmake -DCMAKE_BUILD_TYPE=Debug -G &quot;CodeBlocks - Unix Makefiles&quot; &quot;/home/luca/CLionProjects/backup progetto pipe/progetto_pipe_2&quot; -- Found Curses: /usr/lib/x86_64-linux-gnu/libcurses.so   CMake Error at CMakeLists.txt:8 (target_link_libraries):   Cannot specify link libraries for target &quot;progetto_pipe_2&quot; which is not   built by this project.   -- Configuring incomplete, errors occurred! See also &quot;/home/luca/CLionProjects/backup progetto pipe/progetto_pipe_2/cmake-build-debug/CMakeFiles/CMakeOutpu&zwnj;&#8203;t.log&quot;.  [Finished]"}, {"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "reply_to_user": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "edited": false, "score": 0, "creation_date": 1548239236, "post_id": 54324710, "comment_id": 95468666, "body": "You should link a library after declaring the target. See the modifications."}, {"owner": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "edited": false, "score": 0, "creation_date": 1548239586, "post_id": 54324710, "comment_id": 95468889, "body": "Thanks, but now comes the following error if I try to use debugging  ____  Error opening terminal: unknown.  Process finished with exit code 1"}, {"owner": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "edited": false, "score": 0, "creation_date": 1548239822, "post_id": 54324710, "comment_id": 95469013, "body": "After these commands                                                                                  initscr();     noecho();     curs_set(0)"}, {"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "reply_to_user": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "edited": false, "score": 0, "creation_date": 1548240115, "post_id": 54324710, "comment_id": 95469175, "body": "You should open another question for that. That error is not related to library linkage or the cmake configuration."}], "tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": true, "score": 0, "last_activity_date": 1548239200, "last_edit_date": 1548239200, "creation_date": 1548238086, "answer_id": 54324710, "question_id": 54324634, "link": "https://stackoverflow.com/questions/54324634/lncurses-on-clion-with-ubuntu/54324710#54324710", "title": "lncurses on Clion with Ubuntu", "body": "<p>You need to link the library in your cmake configuration file. Check this post: <a href=\"https://stackoverflow.com/questions/35159634/how-to-link-curses-h-in-cmake\">How to link curses.h in Cmake?</a></p>\n\n<p>Try:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12) \nproject(progetto_pipe_2 C)\nset(CMAKE_C_STANDARD 99)\n\n# Define the target\nadd_executable(progetto_pipe_2 main.c movimento.c movimento.h grafica.c grafica.h area_gioco.c area_gioco.h)\n\n# Look for the package you want to link\nfind_package( Curses REQUIRED )\n\n# Include the directories of the package (to find curses.h for instance)\ntarget_include_directories(progetto_pipe_2 PRIVATE ${CURSES_INCLUDE_DIRS} )\n\n# Link the library\ntarget_link_libraries(progetto_pipe_2 PRIVATE ${CURSES_LIBRARIES} )\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10954917, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289562041300633/picture?type=large", "display_name": "Luca Ladu", "link": "https://stackoverflow.com/users/10954917/luca-ladu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 54324710, "answer_count": 1, "score": 0, "last_activity_date": 1548239588, "creation_date": 1548237862, "last_edit_date": 1548239588, "question_id": 54324634, "link": "https://stackoverflow.com/questions/54324634/lncurses-on-clion-with-ubuntu", "title": "lncurses on Clion with Ubuntu", "body": "<p>I'm doing a project for school with C, i'm using Clion as idee.\nI already installed the ln curses in Ubuntu with the command</p>\n\n<pre><code>sudo apt-get install libncurses&lt;ver&gt;-dev\n</code></pre>\n\n<p>Using the shall, the program works!\nBut I would like to do some debugging with idee.\nMy cmake file is this </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12)\nproject(progetto_pipe_2 C)\n\nset(CMAKE_C_STANDARD 99)\n\nadd_executable(progetto_pipe_2 main.c movimento.c movimento.h grafica.c grafica.h area_gioco.c area_gioco.h)\n</code></pre>\n\n<p>If I start the application from idee , the following error appears is:</p>\n\n<pre><code>undefined reference to `initscr' ecc ecc\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1548237840, "post_id": 54324565, "comment_id": 95467825, "body": "Welcome to the wonderful world of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 1027, "user_id": 4658312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84ae7846ab7b8381cfe9876eeb009326?s=128&d=identicon&r=PG&f=1", "display_name": "krithikaGopalakrisnan", "link": "https://stackoverflow.com/users/4658312/krithikagopalakrisnan"}, "edited": false, "score": 0, "creation_date": 1548237921, "post_id": 54324565, "comment_id": 95467877, "body": "missing &#39;;&#39; in for loop in power()."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548237961, "post_id": 54324565, "comment_id": 95467900, "body": "Try to put some <code>printf(&quot;&quot;);</code> or similar at the end of your <code>power</code> function. I guess your output will change significantly."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1548237980, "post_id": 54324565, "comment_id": 95467908, "body": "Technically that has undefined behaviour and is meaningless to reason about, but in practice those numbers just happened to be in the place where the returned value should have been."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1548238043, "post_id": 54324565, "comment_id": 95467954, "body": "It likely means that your code stores <code>p</code> at <code>EAX</code> register. Since the returned value is stored there, your function accidentally returns what you want."}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1548238058, "post_id": 54324565, "comment_id": 95467962, "body": "If you don&#39;t return any value. It just becomes any random value like it <i>never existed</i>... And that phenomenon is a part of the term <i>undefined behavior</i>..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1548238176, "post_id": 54324565, "comment_id": 95468023, "body": "Looking at this code, you have much bigger problems that you should focus on, rather than the pointless task of analysing the result of undefined behavior. Specifically, you need to figure out why you are writing C according to a 30 years old, 20 years obsolete standard in the year 2019."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1548238318, "post_id": 54324565, "comment_id": 95468103, "body": "Aside: it does not matter to the compiler that the function declaration <code>int power(int m, int n);</code> is different to its implementation but it would make it clearer to people reading the code which way round its arguments are, as in <code>int power(int base, int n)</code>."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1548239239, "post_id": 54324565, "comment_id": 95468670, "body": "To expand on what <code>Lundin</code> was saying, you shouldn&#39;t need to pre-declare your variables (e.g., <code>int i, p</code> at the top of the function instead of declaring them when they&#39;re used), and you should put the type for every function and variable even if it&#39;s <code>int</code> (as in <code>int main()</code>, not <code>main()</code>)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 1, "creation_date": 1548239277, "post_id": 54324565, "comment_id": 95468692, "body": "@Ruks not a random value, rather an undetermined value."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1548239352, "post_id": 54324565, "comment_id": 95468729, "body": "@dyukha The function doesn&#39;t return what was wanted; <code>p</code> should be 1, 2, 4, 8, ... for the second column and 1, -3, 9, -27, ... for the third column. I&#39;d say it seems to store <code>i</code> in EAX, since what it returns is one more than <code>n</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548239364, "post_id": 54324565, "comment_id": 95468734, "body": "Google the term &quot;undefined behaviour&quot;. And be aware that &quot;undefined behaviour&quot; includes &quot;apparently working fine&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1548239925, "post_id": 54324565, "comment_id": 95469076, "body": "@DanielH, you are right. Time to go to sleep."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 3769400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5835f72f822271c387aeebe41e58cf3?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#233;ment", "link": "https://stackoverflow.com/users/3769400/cl%c3%a9ment"}, "is_accepted": false, "score": 0, "last_activity_date": 1548247625, "creation_date": 1548247625, "answer_id": 54327632, "question_id": 54324565, "link": "https://stackoverflow.com/questions/54324565/question-about-omitting-the-return-statement-in-a-function-declaration/54327632#54327632", "title": "Question about omitting the return statement in a function declaration", "body": "<p>As pointed out by @dyukha and @Daniel H, the value returned is \"whatever is in your <code>EAX</code> register\". Your function finishes on a <code>for</code>-loop, hence the last instruction realized before returning (ending the function) probably was a branching test, to check if <code>i &lt;= n</code> (your loop condition). You can actually check on what variable is set to your <code>EAX</code> register by using your compiler to generate the assembly version of your code (option <code>-S</code>). You may try to follow what values are set into your register before the call to </p>\n\n<pre><code>    popq    %rbp\n    retq\n</code></pre>\n\n<p>at the end of your function.</p>\n\n<p>On my computer, I tried with Apple LLVM version 9.0.0 (clang-900.0.39.2), which generate the following for my function:</p>\n\n<pre><code>    movl    %edi, -8(%rbp)\n    movl    %esi, -12(%rbp)\n    movl    $1, -20(%rbp)\n    movl    $1, -16(%rbp)\nLBB2_1:                                 ## =&gt;This Inner Loop Header: Depth=1\n    movl    -12(%rbp), %eax\n    cmpl    -16(%rbp), %eax\n    jl  LBB2_4\n## BB#2:                                ##   in Loop: Header=BB2_1 Depth=1\n    movl    -20(%rbp), %eax\n    imull   -8(%rbp), %eax\n    movl    %eax, -20(%rbp)\n## BB#3:                                ##   in Loop: Header=BB2_1 Depth=1\n    movl    -16(%rbp), %eax\n    addl    $1, %eax\n    movl    %eax, -16(%rbp)\n    jmp LBB2_1\nLBB2_4:\n    movl    -4(%rbp), %eax\n    popq    %rbp\n    retq\n</code></pre>\n\n<p>As you can see, I have 4 remarkable addresses: <code>-8(%rbp)</code>, <code>-12(%rbp)</code>, <code>-16(%rbp)</code> and <code>-20(%rbp)</code>. Given the order of declaration in the C code, and the order of initialisation, <code>-8(%rbp)</code> is <code>base</code>, <code>-12(%rbp)</code> is <code>n</code>, <code>-16(%rbp)</code> is <code>i</code> and <code>-20(%rbp)</code> is <code>p</code>.</p>\n\n<p><code>LBB2_1</code> is your loop condition. The instructions for the check are\n* move value of <code>n</code> in <code>%eax</code>\n* is the value of <code>%eax</code> lower then the value of <code>i</code>, store the result in <code>%eax</code>\n* if <code>%eax</code> says that it was lower, go to label <code>LBB2_4</code> else continue to next instruction</p>\n\n<p>The three instructions after BB#2 are you actual multiplication. The three instructions after BB#3 are your increment of <code>i</code>, which is followed by an unconditional jump to your loop condition at label <code>LBB2_1</code>.</p>\n\n<p>The ending of the power function is to take whatever is in memory address <code>-4(%rbp)</code>, tu put it in <code>%eax</code>, and then leave the function (reset stack pointer, put value in <code>%eax</code> to the proper variable in the previous stack frame).</p>\n\n<p>In the code produced by my compiler, I don't see the same result as you do, as I get every time the last two columns equal to 0 (<code>-4(%rbp)</code> is never set to anything). Except when adding a call to another function <code>foo</code>, taking two integers as parameters, having two local integer variables (to ensure that my new stack frame will be the same size as the power function one). This function actually set the address <code>-4(%rbp)</code>. When calling my function right before entering the loop, I effectively find the value from <code>-4(%rbp)</code> as set in my function <code>foo</code> returned in my function <code>power</code>.</p>\n\n<p>As a colleague just told me, playing with undefined behaviour is dangerous as your compiler is allowed to treat it any way it likes. It could be summoning a demon for what it's worth.</p>\n\n<p>In definitive, or TL;DR, this undefined behaviour is handle in <em>some way</em> by the compiler. Whether some value is moved from one local variable, defined or not, or nothing special is moved to the register <code>%eax</code> is up to the compiler. Anyway, whatever was hanging in there, got returned when <code>retq</code> is called.</p>\n"}], "owner": {"reputation": 393, "user_id": 6470928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ca50db72512cbab0ea4d95c14222d07?s=128&d=identicon&r=PG&f=1", "display_name": "bonehead", "link": "https://stackoverflow.com/users/6470928/bonehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548247625, "creation_date": 1548237696, "last_edit_date": 1548238063, "question_id": 54324565, "link": "https://stackoverflow.com/questions/54324565/question-about-omitting-the-return-statement-in-a-function-declaration", "title": "Question about omitting the return statement in a function declaration", "body": "<p>Consider the following code for producing a list of numbers from 0 to 9 along with values of 2 and -3 raised to the power of the corresponding number from the list:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint power(int m, int n);\n\nmain()\n{\n   int i;\n\n   for (i = 0; i &lt;= 10; ++i)\n      printf(\"%d %d %d\\n\", i, power(2, i), power(-3, i));\n   return 0;\n}\n\nint power(int base, int n)\n{\n   int i, p;\n\n   p = 1;\n   for (i = 1; i &lt;= n; ++i)\n      p = p * base;\n   // return statement purposefully omitted. //\n}\n</code></pre>\n\n<p>Of course the program does not work properly without the return statement for the power function, however by running the written code I get the following output:</p>\n\n<pre><code>0 1 1\n1 2 2\n2 3 3\n3 4 4\n4 5 5\n5 6 6\n6 7 7\n7 8 8\n8 9 9\n9 10 10\n</code></pre>\n\n<p>And I'm wondering where are the numbers in the second and third column of the output coming from? In lack of a valid return value of power, the control transfers back to the calling function, but why does it output these numbers?</p>\n"}, {"tags": ["c", "assembly", "operating-system", "cross-platform"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1548236600, "post_id": 54324207, "comment_id": 95466980, "body": "by compiling the C code for different processors/platforms. You can take the same C code and compile it for x86, for ARM, etc. Sure, one specific, compiled binary won&#39;t magically run on a different architecture, but that&#39;s not what is meant with &quot;cross platform&quot;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1548237071, "post_id": 54324207, "comment_id": 95467286, "body": "How would you expect an OS kernel to run on different processors? it is <i>because</i> there are different processors that the core component of an OS is needed."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 4, "creation_date": 1548237085, "post_id": 54324207, "comment_id": 95467295, "body": "I think the term &quot;portable&quot; is used with C itself more than &quot;cross platform&quot;, which means you can recompile/port C source to other platform.Then there are cross-platform libraries for C, which means they deal with the platform details (usually in #ifdef ... way including replacements for platform-specific parts of functionality/API) to make the library API identical on all platforms, but still the compile-for-particular-target step must be there (some platforms allow for &quot;fat&quot; binaries containing multiple executables for different architectures, but those are like different builds concatenated"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1548237255, "post_id": 54324207, "comment_id": 95467402, "body": "with operating system kernel the situation is more specific, as operating system kernel&#39;s machine code strongly depends on platform specifics, so it&#39;s pretty sure only generic parts of kernel are written in pure C, and there&#39;s highly likely some small chunk of platform specific assembly supporting kernel with specialized tasks like context switching, memory unit management, etc... which is completely platform specific."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1548245658, "post_id": 54324207, "comment_id": 95472140, "body": "All C code isn&#39;t portable. If you write an OS, the lowest level hardware stuff that communicates with the specific CPU isn&#39;t portable. Only the abstraction layers on top of it. Same goes for drivers etc."}], "answers": [{"tags": [], "owner": {"reputation": 11186, "user_id": 266978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/936f8c28b401a914224af1e0e9891633?s=128&d=identicon&r=PG", "display_name": "Baltasarq", "link": "https://stackoverflow.com/users/266978/baltasarq"}, "is_accepted": false, "score": 9, "last_activity_date": 1548241697, "creation_date": 1548241697, "answer_id": 54325856, "question_id": 54324207, "link": "https://stackoverflow.com/questions/54324207/how-is-c-cross-platform/54325856#54325856", "title": "How is C cross platform?", "body": "<p>C is portable at the source code level. This means that you can recompile your program in the platform of choice and have your application running there.</p>\n\n<p>You can find the <a href=\"https://en.wikipedia.org/wiki/C_(programming_language)\" rel=\"noreferrer\">history of C in the wikipedia</a>, for example. At that time, programming was carried out in assembly for each specific machine, so having a high-level (by that time) programming language was a bless: it sped up development and also made possible to port programs from one machine to a new one just by porting the compiler (the C compiler could later be written in C itself, again speeding up the porting process, but that's another story).</p>\n\n<p>Specifically, the idea of porting UNIX between operating systems appeared when they had UNIX running in the PDP-7, and the PDP-11 appeared. Finally, even UNIX's kernel was rewritten in C, so it made the operating system really popular because of the easy porting: there was only the need to write a small amount of assembly for very specific parts of the kernel, so you could have UNIX up and running in a new machine shortly, at least compared to other operating systems of that time.</p>\n"}, {"tags": [], "owner": {"reputation": 1571, "user_id": 9063935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0kpYD.png?s=128&g=1", "display_name": "dantechguy", "link": "https://stackoverflow.com/users/9063935/dantechguy"}, "is_accepted": false, "score": 4, "last_activity_date": 1594234435, "creation_date": 1594234435, "answer_id": 62801766, "question_id": 54324207, "link": "https://stackoverflow.com/questions/54324207/how-is-c-cross-platform/62801766#62801766", "title": "How is C cross platform?", "body": "<p>The language C itself is cross-platform, because you don't directly run C code on machines. The C source code is compiled to assembly, and <em>assembly</em> is the platform specific code. The only non cross-platform part are the compilers and the resulting assembly.</p>\n<p>In essence, you can use the same C code, with different compilers, to create the specific assembly needed. Since you use the same C source code, its deemed cross-platform.</p>\n"}], "owner": {"reputation": 179, "user_id": 6653215, "user_type": "registered", "profile_image": "https://graph.facebook.com/1013405352110559/picture?type=large", "display_name": "Abhishek Sharma", "link": "https://stackoverflow.com/users/6653215/abhishek-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2356, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1594234435, "creation_date": 1548236526, "question_id": 54324207, "link": "https://stackoverflow.com/questions/54324207/how-is-c-cross-platform", "title": "How is C cross platform?", "body": "<p>C language is ultimately compiled to machine specific assembly language. Then how can C be cross platform if every processor has its own assembly language syntax? If I write an operating system kernel in C then how can I make it run across a variety of processors?</p>\n"}, {"tags": ["c", "syntax-error"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 5, "creation_date": 1548236574, "post_id": 54324169, "comment_id": 95466967, "body": "cipher is an array. you need to index it!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1548237048, "post_id": 54324169, "comment_id": 95467268, "body": "In addition to the previous comment: you need to provide more code. You are probably facing an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 2, "last_activity_date": 1548237034, "creation_date": 1548237034, "answer_id": 54324366, "question_id": 54324169, "link": "https://stackoverflow.com/questions/54324169/error-while-compiling-invalid-operands-to-binary-have-short-int-and-i/54324366#54324366", "title": "Error while compiling : &quot;invalid operands to binary / (have \u2018short int *\u2019 and \u2018int\u2019)&quot;", "body": "<p>As gsamaras noted, you defined <code>cipher</code> as an array of 50 <code>short int</code>s. Presumably you want only one number, so you'd define it e. g. as <code>long long cipher;</code> (C is not COBOL or something where one has to specify the number of digits). And don't forget to initialize <code>len</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 9863150, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3LcW7Lte50s/AAAAAAAAAAI/AAAAAAAAo1I/o2kbban2_XA/photo.jpg?sz=128", "display_name": "kirti desai", "link": "https://stackoverflow.com/users/9863150/kirti-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 54324366, "answer_count": 1, "score": 3, "last_activity_date": 1548237034, "creation_date": 1548236399, "last_edit_date": 1548236825, "question_id": 54324169, "link": "https://stackoverflow.com/questions/54324169/error-while-compiling-invalid-operands-to-binary-have-short-int-and-i", "title": "Error while compiling : &quot;invalid operands to binary / (have \u2018short int *\u2019 and \u2018int\u2019)&quot;", "body": "<pre><code>short int cipher[50],len;\nwhile(cipher != 0)\n{  \n    cipher=cipher/10;\n    ++len;\n}\n</code></pre>\n\n<p>Need to count number of digits provided by user.</p>\n\n<pre><code> error: invalid operands to binary / (have \u2018short int *\u2019 and \u2018int\u2019)\n           cipher=cipher/10;\n</code></pre>\n"}, {"tags": ["c", "operating-system"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 6, "creation_date": 1548237354, "post_id": 54324065, "comment_id": 95467487, "body": "It depends on the platform. On modern operating systems all addresses are virtual and you cannot address physical addresses from a normal user mode program, only from drivers but that&#39;s a different story. On the other hand on simple microcontrollers you only can access physical addresses because there is no virtual memory."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1548239007, "post_id": 54324065, "comment_id": 95468520, "body": "<b>A short answer: virtual.</b>"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9738068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239039f7ea0410e7afac004975cccca9?s=128&d=identicon&r=PG&f=1", "display_name": "Sabster", "link": "https://stackoverflow.com/users/9738068/sabster"}, "is_accepted": false, "score": 0, "last_activity_date": 1553274450, "last_edit_date": 1553274450, "creation_date": 1553273214, "answer_id": 55304294, "question_id": 54324065, "link": "https://stackoverflow.com/questions/54324065/is-it-possible-to-access-a-physical-memory-address-using-c-programming/55304294#55304294", "title": "Is it possible to access a physical memory address using C programming?", "body": "<p>In case you are using an operating system, then it is not possible because the OS is using virtual address and whatever you use will be mapped to the physical address via virtual address.</p>\n\n<p>But if you are programming a microcontroller then there is no virtual address and you can access the physical memory location using pointers in C.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 11723094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac107f77117f79c8a615ec70d781bc5?s=128&d=identicon&r=PG&f=1", "display_name": "skumar_121314", "link": "https://stackoverflow.com/users/11723094/skumar-121314"}, "is_accepted": false, "score": 0, "last_activity_date": 1563356418, "creation_date": 1563356418, "answer_id": 57072894, "question_id": 54324065, "link": "https://stackoverflow.com/questions/54324065/is-it-possible-to-access-a-physical-memory-address-using-c-programming/57072894#57072894", "title": "Is it possible to access a physical memory address using C programming?", "body": "<p>The address we get normally, say for example,a pointer in C programming in a PC is <strong>virtual address</strong>. The virtual to physical mapping and the other way round, is handled by the operating system internally. Usually, the user(root or otherwise) will have no say in the address mapping.</p>\n\n<p>On the other hand, simple micro controllers usually have no TLB mapping, so the address you access is the actual physical address of the device, as said in other answer.</p>\n\n<p>Also, if you are planning to use a micro processor from ground-up, you can always have your own physical to virtual address mapping, where you can even set properties to the address blocks.</p>\n"}], "owner": {"reputation": 71, "user_id": 8719173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f284a35900ac72b957eb1321b9cb8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Navneet", "link": "https://stackoverflow.com/users/8719173/navneet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1563356418, "creation_date": 1548236073, "last_edit_date": 1548237327, "question_id": 54324065, "link": "https://stackoverflow.com/questions/54324065/is-it-possible-to-access-a-physical-memory-address-using-c-programming", "title": "Is it possible to access a physical memory address using C programming?", "body": "<p>For example, when we write: <br/>\n<code>int a;</code> <br/>\nand doing <code>&amp;a</code> gives us some address in hex form <code>0x12345678</code> which we call as virtual address. <br/>\nNow when we try to do <br/>\n<code>int *temp = 0xfe000000;</code><br/>\ndoes this address acts like a virtual address or a physical address? As far as I know virtual addresses are given by OS which are further converted to physical addresses by MMU. </p>\n\n<p>As far as I know paging mechanism takes place in between which maps the virtual address to available physical address. What happens when we give an address to a pointer? Does that address acts like virtual address which is then handled by MMU to point to a particular physical address or it acts like a physical address in itself?</p>\n\n<pre><code>int temp;\nprintf(\"%x \\n\", &amp;temp);\nint *temp2 = 0xfe000000; //This is just an example address. It could be any address\n</code></pre>\n\n<p><br/>\nDoes this address (0xfe000000) acts like a real physical address or a virtual address?</p>\n"}, {"tags": ["c", "plugins", "unimrcp"], "owner": {"reputation": 1482, "user_id": 10581216, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VaFWnmD5EQ/AAAAAAAAAAI/AAAAAAAAABQ/dXbj2Va5mj0/photo.jpg?sz=128", "display_name": "suresh bambhaniya", "link": "https://stackoverflow.com/users/10581216/suresh-bambhaniya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1548243877, "creation_date": 1548235776, "last_edit_date": 1548243877, "question_id": 54323972, "link": "https://stackoverflow.com/questions/54323972/how-to-pass-custom-parameters-from-client-to-unimrcp-plugin", "title": "How to pass custom parameters from client to UniMRCP plugin", "body": "<p>Actually I wanted to get custom params in plugin from client I tried  pass params from <strong>extension.conf</strong> like below:</p>\n\n<blockquote>\n  <p>exten => s,2, SynthAndRecog(Welcome to bot,builtin:speech/transcribe,\n  <strong>userdid=user_id</strong>&amp;spl=en-IN&amp;p=speech-nuance5-mrcp2)</p>\n</blockquote>\n\n<p>But I'm not getting it in plugin. Here is the plugin code to get param:</p>\n\n<pre><code>while((header_field = mrcp_message_next_header_field_get(request,header_field)) != NULL ) {\n       printf(\"\\n===============params================\\n\");\n       printf(\"%s: %s\\n\", header_field-&gt;name.buf, header_field-&gt;value.buf);\n\n}\n</code></pre>\n"}, {"tags": ["c", "file", "binary", "structure"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548232097, "post_id": 54322835, "comment_id": 95464407, "body": "You need to show the structure definition. Don&#39;t dexscribe your code, show it. Or best provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548232221, "post_id": 54322835, "comment_id": 95464474, "body": "One possible cause of problem is that you might need to open your file with the <code>&quot;ab&quot;</code> mode instead of <code>&quot;a&quot;</code> mode because you&#39;re reading binary data and not text data."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 2, "creation_date": 1548232307, "post_id": 54322835, "comment_id": 95464526, "body": "@JoeyMallone don&#39;t write &quot;mcve&quot; in a comment but just write <code>[mcve]</code> this will automatically expand to <code>Minimal, Complete, and Verifiable example</code> with the correct link"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1548232436, "post_id": 54322835, "comment_id": 95464606, "body": "So the program prints &quot;err&quot; and terminate! Is that it?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1548232927, "post_id": 54322835, "comment_id": 95464898, "body": "As OP is unresponsive to request for additional information, I&#39;ll vote to close"}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1548233039, "post_id": 54322835, "comment_id": 95464976, "body": "@4386427 no, the code works, it creates the files, but the files cannot be opened."}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548233069, "post_id": 54322835, "comment_id": 95464996, "body": "I just posted the entire code @jabberwocky"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548234215, "post_id": 54322835, "comment_id": 95465629, "body": "@MaryPoppins please show the minimal input that triggers the problem."}, {"owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "edited": false, "score": 0, "creation_date": 1548235135, "post_id": 54322835, "comment_id": 95466125, "body": "Okay. I just did"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548236515, "post_id": 54322835, "comment_id": 95466933, "body": "@MaryPoppins where is the input?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1548236859, "post_id": 54322835, "comment_id": 95467153, "body": "I&#39;m voting to close this question as off-topic because the OP won&#39;t provide the information he is asked for."}, {"owner": {"reputation": 165, "user_id": 10569552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a19bab13980743df8c0947d5969894d?s=128&d=identicon&r=PG&f=1", "display_name": "anand", "link": "https://stackoverflow.com/users/10569552/anand"}, "edited": false, "score": 0, "creation_date": 1548248176, "post_id": 54322835, "comment_id": 95473526, "body": "Checking return of fopen and fwrite may help."}], "owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548235095, "creation_date": 1548231909, "last_edit_date": 1548235095, "question_id": 54322835, "link": "https://stackoverflow.com/questions/54322835/creating-a-file-with-the-name-of-a-structure-i-just-read-from-another-file", "title": "Creating a file with the name of a structure i just read from another file", "body": "<p>I am trying to read a structure from the file f and i need some arrays of that structure ( \"nume\" and \"firma.nrang\") to be written into another file with the name of \"localitate\" which is also an array of the structure i am reading. \nIf two structures from f have the same \"localitate\" array, then their \"nume\" and \"firma.nrang\" fields need to be written in the same file called \"localitate\". I hope i explained well enough. However, i dont know why i cannot open the files i am creating, which i specifically wanted to be text and not binary. What is the problem? \nThis is my code which doesnt work properly: </p>\n\n<pre><code>typedef struct\n{\n    char localitate[10];\n    int nrang;\n} FIRMA;\n\ntypedef struct\n{\n    char nume[20];\n    int varsta;\n    FIRMA firma;\n} ANG;\n\n\n\n\n    ANG x;\n    FILE *p;\n    for (i=0; i&lt;m+n; i++)\n    {\n        fread(&amp;x,sizeof(x),1,f);\n        p=fopen(x.firma.localitate,\"a\");\n        if (p==NULL)\n        {\n            printf(\"eroare\");\n            exit (1);\n        }\n        fwrite(&amp;x.nume,sizeof(x.nume),1,p);\n        fwrite(&amp;x.firma.nrang,sizeof(x.firma.nrang),1,p);\n        fclose(p);\n\n\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc", "realloc"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1548230891, "post_id": 54322483, "comment_id": 95463808, "body": "<code>realloc(A, 2 * sizeof(int));</code> - you realloc for only 2 values. You want <code>2 * freqCount</code> <i>more</i> values. That&#39;s <code>realloc(A, 3 * freqCount * sizeof(int));</code> | <code>for (int i = 1; i &lt; 15; i++)</code> - array numbering starts at <code>0</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548231152, "post_id": 54322483, "comment_id": 95463944, "body": "You <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">should not cast <code>malloc</code> in C</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10798561"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548232992, "post_id": 54322483, "comment_id": 95464939, "body": "@KamilCuk ok, what if i want to expand the array by +freqCount each time, so asuming freqCount=1025, the array A is increased by +1025 each time the function is called ?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548233606, "post_id": 54322483, "comment_id": 95465285, "body": "You need to track the current size. If <code>i want to expand the array by +freqCount</code> then you need to add freqCount to current size and call <code>realloc</code> with the result.  If <code>int *a = malloc(1025 * sizeof(int))</code>, and then you want another 1025, you need <code>int *new_a = realloc(a, 2050 * sizeof(int))</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10798561"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548243978, "post_id": 54322483, "comment_id": 95471297, "body": "@KamilCuk hmmm, ok... but do You have an idea, how could i automate the whole process. What i mean, is to write a function, that whenever is called it will increase the size fo the array of the same size . Would such function need to include a line of code to find out what the current size of array is ?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548246094, "post_id": 54322483, "comment_id": 95472378, "body": "Such function would need to include all the relevant code that are needed to pass along array size. Usually in C you wrap data / objects using structs. <code>struct intarray_s { int *arr; size_t size; }</code> and then <code>int intarray_resize(struct inarray_s *t, ssize_t inc) { void *pnt = realloc(t-&gt;arr, t-&gt;size + inc); .... }</code> You need to do it manually."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10798561"}, "edited": false, "score": 0, "creation_date": 1548231227, "post_id": 54322581, "comment_id": 95463985, "body": "well to be honest i was thinking that when i type 2 * sizeof(int) the array size will increase two times.  so what does that line freqCount * sizeof(int) actualy mean ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548231337, "post_id": 54322581, "comment_id": 95464047, "body": "@kenshin Just like <code>malloc</code>, the size you pass to <a href=\"https://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code></a> is the size in bytes. The <i>new</i> and <i>full</i> size."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10798561"}, "edited": false, "score": 0, "creation_date": 1548231696, "post_id": 54322581, "comment_id": 95464221, "body": "Basically. First the value freqCount was 1025 . Than I created array A of size 1025 . I stored 1025 elements in it. Than I wanted to increase the array A by another &quot;freqCount&quot; (1025) so that it has 2050 arguments. Is my logic ok ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548231769, "post_id": 54322581, "comment_id": 95464255, "body": "@kenshin That&#39;s good logic, and that&#39;s what you do with <code>freqCount = freqCount + freqCount;</code>. The problem is that you need to follow through with the actual reallocation (and remember that is can fail, which you need to check for)."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1548230912, "creation_date": 1548230912, "answer_id": 54322581, "question_id": 54322483, "link": "https://stackoverflow.com/questions/54322483/increased-array-size-after-increasesize-function-some-arguments-of-the-same-arr/54322581#54322581", "title": "Increased array size. after increaseSize function some arguments of the same array are invalid. C lang", "body": "<p>You unconditionally resize your array to only contain <em>two</em> <code>int</code> elements. Always. Any access to elements beyond those two will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>You probably meant to do</p>\n\n<pre><code>return realloc(A, freqCount * sizeof(int));\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10798561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548230912, "creation_date": 1548230501, "question_id": 54322483, "link": "https://stackoverflow.com/questions/54322483/increased-array-size-after-increasesize-function-some-arguments-of-the-same-arr", "title": "Increased array size. after increaseSize function some arguments of the same array are invalid. C lang", "body": "<p>The program takes some txt input from \"numbers.txt\" file.\nIt first counts the <strong><em>amount</em></strong> of all the numbers (freqCount)in that text file, than reads the file again and with the use of malloc it creates two arrays A and B , of which both have size equal to the <strong>amount</strong> of all the numbers in the text file. So far so good. </p>\n\n<p>Now i want to increase the size of the array A, so that I can put \"freqCount\" more arguments in it. In the freqRepeat function I created, there is a function increaseSize which takes that same array A, and uses realloc to add 2*freqCount more arguments in it. </p>\n\n<p>After calling the mentioned function increaseSize there is a problem, because only part of the arguments remain unchanged, and there are few arguments that become some huge number. This is a major issue. Can anyone please provide me with some help ? thanks</p>\n\n<p>ps. I include the expemplary text file input at the end of the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint read_ints(const char *file_name, int *result);\nint *scanFreq(const char *file_name, int *A, int *B, int *resultTab);\nint freqRepeat(int *A, int *B, int freqCount);\nint *increaseSize(int *A, int freqCount);\nvoid calcmalc(int freqCount);\nint *nextArray(int *A, int *B, int freqCount, int freqStart);\n\nint main()\n{\n  int result = 0;\n  int resultTab = 0;\n  int freqCount;\n  freqCount = read_ints(\"numbers.txt\", &amp;result);\n  printf(\"freqCount is %d\", freqCount);\n  int *A = (int *)malloc(freqCount * sizeof(int));\n  int *B = (int *)malloc(freqCount * sizeof(int));\n  scanFreq(\"numbers.txt\", A, B, &amp;resultTab);\n  freqRepeat(A, B, freqCount);\n\n}\nint read_ints(const char *file_name, int *result)\n{\n  FILE *file = fopen(\"numbers.txt\", \"r\");\n  int i = 0;\n  int n = 0; //row number//\n\n  if (file == NULL)\n  {\n    printf(\"unable to open file %s\", file_name);\n  }\n\n  while (fscanf(file, \"%d\", &amp;i) == 1)\n  {\n    n++;\n    printf(\"%d\\n \", i);\n    *result += i;\n    printf(\"\\n we are at row nr. %d sum of this number and all numbers before is: %d\\n\", n, *result);\n  }\n  fclose(file);\n  return n;\n}\nint *scanFreq(const char *file_name, int *A, int *B, int *resultTab)\n{\n  FILE *file = fopen(\"numbers.txt\", \"r\");\n  int i = 0;\n  int n = 0; //row number//\n\n  if (file == NULL)\n  {\n    printf(\"unable to open file %s\", file_name);\n  }\n\n  while (fscanf(file, \"%d\", &amp;i) == 1)\n  {\n    n++;\n    *resultTab += i;\n    B[n] = i;\n    A[n] = *resultTab;\n  }\n  fclose(file);\n  return 0;\n}\n\nint freqRepeat(int *A, int *B, int freqCount)\n{\n  int lastFrequency;\n\n  lastFrequency = freqCount;\n   freqCount = freqCount + freqCount;\n  A = increaseSize(A, freqCount);\n\n  printf(\"\\n\\nwcis enter\\n\\n\");\n  getchar();\n\n  for (int i = 1; i &lt; 15; i++)\n  {\n    printf(\"array argument after increasing array size %d \\n\", A[i]);\n\n    // why some of the arguments have been changed ????????\n    }\nreturn 0;\n}\nint *increaseSize(int *A, int freqCount)\n{\n\n  return realloc(A, 2 * sizeof(int));\n}\n\n\ntext input:\n-14\n+15\n+9\n+19\n+18\n+14\n+14\n-18\n+15\n+4\n-18\n-20\n-2\n+17\n+16\n-7\n-3\n+5\n+1\n-5\n-11\n-1\n-6\n-20\n+1\n+1\n+4\n+18\n+5\n-20\n-10\n+18\n+5\n-4\n-5\n-18\n+9\n+6\n+1\n-19\n+13\n+10\n-22\n-11\n-14\n-17\n-10\n-1\n-13\n+6\n-17\n</code></pre>\n"}, {"tags": ["c", "cmake", "cross-platform", "cross-compiling", "dependency-management"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548231634, "post_id": 54322172, "comment_id": 95464178, "body": "Welcome to Stack Overflow! You ask what is the best (right) structure for your project ... but there is <b>no best</b> CMake project&#39;s structure. You talk about cross-compiling, but this gives a little limitations as CMake itself supports cross-compiling. I see you know some possible approaches, so simply choose one of them and try to follow it. When you will face with a problem (and reveal some additional requirements of your project), then ask about this <b>specific problem</b>. We would gladly to help you in that case."}, {"owner": {"reputation": 13, "user_id": 7519762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c94f4a274bf7ecca6a706fd34f7c44?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik02", "link": "https://stackoverflow.com/users/7519762/tarik02"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548233282, "post_id": 54322172, "comment_id": 95465108, "body": "@Tsyvarev, is my last idea good? Maybe there is some improvements for it or some recommendations?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548233780, "post_id": 54322172, "comment_id": 95465375, "body": "Actually, I don&#39;t see how the last sentence (with a script) correlates with remaining question post. Approaches &quot;git submodule&quot; and ExternalProject implies dependencies to be in a source form, why do want to compile these dependencies?"}, {"owner": {"reputation": 13, "user_id": 7519762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c94f4a274bf7ecca6a706fd34f7c44?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik02", "link": "https://stackoverflow.com/users/7519762/tarik02"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548234117, "post_id": 54322172, "comment_id": 95465566, "body": "@Tsyvarev, I think to put dependencies as submodules, but I still need to include them to the project somehow. <code>add_subdirectory</code> seems to be bad, because I had some problems with <code>libwebp</code> which takes long time to build. Also I need to use luajit (which uses very complex Makefile). I think it will be easier to build all dependencies with script and put binaries and headers somewhere, and add them to CMakeLists of the project."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548234870, "post_id": 54322172, "comment_id": 95465984, "body": "Yes, in most cases pre-built dependencies are better."}, {"owner": {"reputation": 13, "user_id": 7519762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c94f4a274bf7ecca6a706fd34f7c44?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik02", "link": "https://stackoverflow.com/users/7519762/tarik02"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548237624, "post_id": 54322172, "comment_id": 95467681, "body": "@Tsyvarev, thank you!"}], "owner": {"reputation": 13, "user_id": 7519762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c94f4a274bf7ecca6a706fd34f7c44?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik02", "link": "https://stackoverflow.com/users/7519762/tarik02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548229173, "creation_date": 1548229173, "question_id": 54322172, "link": "https://stackoverflow.com/questions/54322172/structure-and-dependencies-of-cross-platform-cmake-project", "title": "Structure and dependencies of cross-platform CMake project", "body": "<p>What is the right way to include external dependencies into CMake project? I've seen in some projects and dependencies, people add dependency as a git submodule, some find-scripts ExternalProject and package managers (conan).</p>\n\n<p>So, the project is cross-platform (Windows, Android, in perspective iOS, macOS, Linux and others) and needs cross-compiling. The project is closed source, so user gets compiled binary. Cross-compiling is very important. Some of platforms require special dependencies (example: desktop needs GLFW).</p>\n\n<p>One of solutions I think about: write a script (I think, python, because I need ability to compile project as in Windows as in Linux), which will compile all the dependencies for given platform (toolchain), put them in right folders and generate a script with paths to the libraries.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548226425, "post_id": 54321474, "comment_id": 95461929, "body": "Can you please add a <code>main()</code> function that shows your code in action &amp; crashing?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1548228898, "post_id": 54321474, "comment_id": 95462951, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also consider to check this list <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2012/11/24/&hellip;</a>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548228937, "post_id": 54321474, "comment_id": 95462980, "body": "@Stefan You better ask for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. To do that write <code>[mcve]</code> in your comment."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 2, "last_activity_date": 1548227577, "creation_date": 1548227577, "answer_id": 54321808, "question_id": 54321474, "link": "https://stackoverflow.com/questions/54321474/getting-bus-error-10-when-looping-through-a-string-array/54321808#54321808", "title": "Getting Bus error: 10 when looping through a string array", "body": "<p>When you declare </p>\n\n<pre><code>char variableName[3][20];\nchar variableValue[3][20];\n</code></pre>\n\n<p>It is not that <code>variableName[0]</code>, <code>variableName[1]</code>, <code>variableName[2]</code> will be holding <code>NULL</code>. Instead they will be holding respective row address.</p>\n\n<p>Thus your check like below,</p>\n\n<pre><code> while(variableName[i]) {\n    .....\n    i++;\n }\n</code></pre>\n\n<p>Will always return true and you access out of bound.</p>\n\n<hr>\n\n<p>Change it as below</p>\n\n<pre><code>while(variableName[i][0] != '\\0') //Loop until empty string.\n</code></pre>\n\n<p>or declare array of pointers.</p>\n\n<pre><code> char *variableName[3] = {NULL,NULL,NULL};\n char *variableValue[3] = {NULL,NULL,NULL};\n</code></pre>\n\n<p>Make sure you allocate memory before dereferencing.</p>\n"}], "owner": {"reputation": 23, "user_id": 10953877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27244b3933ddd2a5147a1b414f0ef152?s=128&d=identicon&r=PG&f=1", "display_name": "newcoder00", "link": "https://stackoverflow.com/users/10953877/newcoder00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1548252327, "accepted_answer_id": 54321808, "answer_count": 1, "score": 0, "last_activity_date": 1548227577, "creation_date": 1548226214, "question_id": 54321474, "link": "https://stackoverflow.com/questions/54321474/getting-bus-error-10-when-looping-through-a-string-array", "closed_reason": "Not suitable for this site", "title": "Getting Bus error: 10 when looping through a string array", "body": "<p>I initialized 2 arrays of strings which I believe is <code>{NULL, NULL, NULL}</code> I am trying to iterate through the array <code>variableName</code> and check is a certain string exists e.g. \"hello\". It doesn't exist in this case so I expect it to print <code>\"not found\"</code> but instead I get a Bus error: 10</p>\n\n<pre><code>char variableName[3][20];\nchar variableValue[3][20];\n\nvoid addVar(char name[], char value[]) {\n\n    if (varDeclared(name, variableName) == 1) {\n\n        printf(\"exists\");\n        int index = getIndex(name, variableName);\n        changeVal(value, variableValue, index);\n\n    }\n    else {\n        printf(\"not found\");\n    }\n}\n\nint varDeclared(char name[], char variableName[][20]) {\n\n    int i = 0;\n\n    while(variableName[i]) {\n        if (strcmp(name, variableName[i]) == 0) {\n            return 1;\n            break;\n        }\n        i++;\n    }\n    return 0;\n}\n\nint getIndex(char name[], char variableName[][20]) {\n\n    int i = 0;\n\n    while(variableName[i]) {\n        if (strcmp(name, variableName[i]) == 0) {\n            return i;\n            break;\n        }\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "compilation", "mingw", "mingw-w64"], "comments": [{"owner": {"reputation": 153, "user_id": 2033775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d2189ecb2b2d02b408d118c6feecb5?s=128&d=identicon&r=PG", "display_name": "user2033775", "link": "https://stackoverflow.com/users/2033775/user2033775"}, "edited": false, "score": 0, "creation_date": 1548229305, "post_id": 54321102, "comment_id": 95463138, "body": "have you tried something like  [this] (<a href=\"https://gist.github.com/cosmo0920/45f5f5cdb6faeb27100d\" rel=\"nofollow noreferrer\">gist.github.com/cosmo0920/45f5f5cdb6faeb27100d</a>) because usually you have to install not only mingw-64 cross-compilers but also win-specific binutils/resource compilers and so on"}], "owner": {"reputation": 391, "user_id": 5938387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7506aece91955da99a9c2bec727e90e9?s=128&d=identicon&r=PG&f=1", "display_name": "airsquared", "link": "https://stackoverflow.com/users/5938387/airsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548224475, "creation_date": 1548224475, "question_id": 54321102, "link": "https://stackoverflow.com/questions/54321102/how-can-i-compile-tsschecker-for-windows", "title": "How can I compile tsschecker for Windows?", "body": "<p>I'm trying to compile the C program <a href=\"https://github.com/s0uthwest/tsschecker\" rel=\"nofollow noreferrer\">tsschecker</a> for Windows(on my Mac). I installed <code>mingw-w64</code> with <code>brew install mingw-w64</code>, but I'm not sure how to use it to compile the program for Windows.</p>\n\n<p>The Github repo for tsschecker includes instructions to compile for macOS and Linux(using <code>make</code>), but not Windows(but it includes Windows in the compatibility list).</p>\n\n<p>I have access to a Windows machine if needed.</p>\n\n<p>How can I compile tsschecker for Windows?</p>\n"}, {"tags": ["c", "openmp"], "answers": [{"comments": [{"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1548231428, "post_id": 54322384, "comment_id": 95464087, "body": "I removed my answer, because this probably goes more to the core of the problem. However I still recommend that OP (or anyone coming across this code) reconsiders the idea creating a billion files in a single directory."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1548231531, "post_id": 54322384, "comment_id": 95464131, "body": "@visibleman In my experience, there is typically no speedup for I/O operations. Unless you have some parallel file system, but even then, speedups are typically achieved only with distributed parallelism (accessing a file system from multiple nodes of some cluster/supercomputer). It depends on the number or I/O controllers per node."}, {"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1548231995, "post_id": 54322384, "comment_id": 95464360, "body": "No My point is that ops current code creates a billion output files. Which seems kind of silly for an omp test."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1548233081, "post_id": 54322384, "comment_id": 95465003, "body": "The most pressing issue after adding <code>parallel</code> is the race condition on <code>test</code>."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1548233237, "post_id": 54322384, "comment_id": 95465087, "body": "@Zulan It depends on where you add it. If <code>#pragma omp parallel</code> is above the declarations of <code>i</code> and <code>test</code>, then it will be ok."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1548234508, "post_id": 54322384, "comment_id": 95465785, "body": "Of course, I think it is critical to include that explanation in the answer."}, {"owner": {"reputation": 127, "user_id": 8947266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hvlx5Gg4cbs/AAAAAAAAAAI/AAAAAAAAAEo/I_jgmJ5YVlc/photo.jpg?sz=128", "display_name": "Romero Azzalini", "link": "https://stackoverflow.com/users/8947266/romero-azzalini"}, "edited": false, "score": 0, "creation_date": 1548273978, "post_id": 54322384, "comment_id": 95487169, "body": "Oh, it worked, thx! And yeah, I need private for test, I was wondering why that would work without the private statement. It wasn&#39;t running parallel before..."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 2, "last_activity_date": 1548238886, "last_edit_date": 1548238886, "creation_date": 1548230101, "answer_id": 54322384, "question_id": 54320907, "link": "https://stackoverflow.com/questions/54320907/openmp-c-fileoutput/54322384#54322384", "title": "OpenMp C Fileoutput", "body": "<p><code>#pragma omp for</code> need to be in a parallel region. Either use <code>#pragma omp parallel</code> followed by <code>#pragma omp for</code> inside, or a shortcut <code>#pragma omp parallel for</code>.</p>\n\n<hr>\n\n<p>Note that you need <code>i</code> and <code>test</code> to be thread-local variables, not shared ones, to prevent data race. There are many ways how to achieve this, such as declaring these variables inside a parallel region, make them <code>private</code>/<code>firstprivate</code> in an OpenMP clause, make them <code>threadprivate</code>, etc.</p>\n"}], "owner": {"reputation": 127, "user_id": 8947266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hvlx5Gg4cbs/AAAAAAAAAAI/AAAAAAAAAEo/I_jgmJ5YVlc/photo.jpg?sz=128", "display_name": "Romero Azzalini", "link": "https://stackoverflow.com/users/8947266/romero-azzalini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 54322384, "answer_count": 1, "score": 0, "last_activity_date": 1548238886, "creation_date": 1548223445, "last_edit_date": 1548231225, "question_id": 54320907, "link": "https://stackoverflow.com/questions/54320907/openmp-c-fileoutput", "title": "OpenMp C Fileoutput", "body": "<p>I remembered to have some trouble with OpenMp and writing into files in parallel, therefore I wrote a simple testprogram that creates files for every for iteration and counts down to zero in the file. Surprisingly it seems to work! \nIf I open the taskmanager with top, I see always just one cpu with a load around 90% and the others around 1%-5%. Is it because the task is not cpu heavy or is there something going wrong (sometimes 2-3 cpus go up to 40%)?</p>\n\n<p>The Testprogram</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;omp.h&gt;\n\nvoid print2file(char filename[],int i){\n  FILE *fp;\n  int j;\n  fp=fopen(strcat(filename,\".txt\"),\"w\");\n  for(j=i;j&gt;=0;j--)\n    fprintf(fp,\"%d\\n\",j);\n  fclose(fp);\n}\n\nint main(){\n  int i;\n  char test[12];\n  #pragma omp for\n  for(i=0;i&lt;1000000000;i++){\n    sprintf(test,\"%d\",i);\n    //printf(\"test %d\",i);\n    print2file(test,i);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "atmega"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1548222992, "post_id": 54320778, "comment_id": 95460704, "body": "We don&#39;t know what <code>libuart_send</code> is doing (what is <code>UDR0</code> ?). You should provide us with some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Notice that per C11 standard <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a> <code>main</code> should return an <code>int</code>. So your code is not written in standard, hosted, C11 (and it should not even compile)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 4, "creation_date": 1548223157, "post_id": 54320778, "comment_id": 95460769, "body": "Perhaps your embedded device doesn&#39;t support passing a <code>float</code> to <code>sprintf</code>? Perhaps it requires you to link a floating point support library for that to work. Check your platform documentation."}, {"owner": {"reputation": 752, "user_id": 7659542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/bCzvu.jpg?s=128&g=1", "display_name": "traducerad", "link": "https://stackoverflow.com/users/7659542/traducerad"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1548223493, "post_id": 54320778, "comment_id": 95460897, "body": "@BasileStarynkevitch see update"}, {"owner": {"reputation": 752, "user_id": 7659542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/bCzvu.jpg?s=128&g=1", "display_name": "traducerad", "link": "https://stackoverflow.com/users/7659542/traducerad"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1548224798, "post_id": 54320778, "comment_id": 95461328, "body": "@DavidSchwartz I already linked against -lprintf_flt , but that doesn&#39;t change anything"}], "answers": [{"comments": [{"owner": {"reputation": 752, "user_id": 7659542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/bCzvu.jpg?s=128&g=1", "display_name": "traducerad", "link": "https://stackoverflow.com/users/7659542/traducerad"}, "edited": false, "score": 0, "creation_date": 1548264350, "post_id": 54323653, "comment_id": 95482936, "body": "Why does this take so much more space?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 752, "user_id": 7659542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/bCzvu.jpg?s=128&g=1", "display_name": "traducerad", "link": "https://stackoverflow.com/users/7659542/traducerad"}, "edited": false, "score": 0, "creation_date": 1548267523, "post_id": 54323653, "comment_id": 95484355, "body": "because it is very complicated function."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1548237210, "last_edit_date": 1548237210, "creation_date": 1548234776, "answer_id": 54323653, "question_id": 54320778, "link": "https://stackoverflow.com/questions/54320778/how-to-print-a-float-via-serial/54323653#54323653", "title": "How to print a float via serial?", "body": "<p>The AVR port does not link any float support by default (BTW many ARM implementations also) because of the size of the functions. Remember that float math support + printf floats may take up to 15k of your 32k program memory!!</p>\n\n<p>you need to add the correct options to print float numbers.</p>\n\n<p><code>-Wl,-u,vfprintf -lprintf_flt -lm</code> and it will print.</p>\n\n<p>BTW try to avoid floats as a plaque. Below you have the table with multiplication operation benchmark (results in cycles)</p>\n\n<blockquote>\n  <p>uint8 22 </p>\n  \n  <p>uint16 98 </p>\n  \n  <p>uint32 102 </p>\n  \n  <p>int8 22 </p>\n  \n  <p>int16  92</p>\n  \n  <p>int32 108</p>\n  \n  <p><strong>float 2986</strong></p>\n</blockquote>\n\n<p>on 1MHz you can only perform 300 float multiplications per second comparing to 10000 int32. Have it always in your maind</p>\n"}], "owner": {"reputation": 752, "user_id": 7659542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/bCzvu.jpg?s=128&g=1", "display_name": "traducerad", "link": "https://stackoverflow.com/users/7659542/traducerad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 54323653, "answer_count": 1, "score": 0, "last_activity_date": 1548265962, "creation_date": 1548222817, "last_edit_date": 1548255767, "question_id": 54320778, "link": "https://stackoverflow.com/questions/54320778/how-to-print-a-float-via-serial", "title": "How to print a float via serial?", "body": "<p>So far I am able to send strings, numbers etc via uart. The code below runs on an embedded device (atmega328p) and sends data to my laptop on which putty runs:</p>\n\n<pre><code>void main(void)\n{\n    /* Works fine */\n    int16_t a = 132;\n    char data[100] = {0};\n\n    sprintf(data, \"%\"PRId16, a);\n    libuart_send(\"a: \", strlen(\"a: \"));  \n    libuart_send(data, strlen(data)); //works fine\n\n    /* Below doesn't work */\n    double l_data = 132.34;\n    char data[100] = {0};\n\n    sprintf(data, \"%f\", l_data);\n    libuart_send(\"f: \", strlen(\"f: \"));  \n    libuart_send(data, strlen(data)); //doesnt work\n}\n\nvoid libuart_send(void *p_data, int p_data_size)\n{\n    assert(p_data != NULL);\n    assert(p_data_size &gt; 0);\n\n    for(int i = 0; i &lt; p_data_size; i++)\n    {\n        /* Wait for empty transmit buffer. */\n        while ( !( UCSR0A &amp; (1&lt;&lt;UDRE0)) );\n\n        /* Put data into buffer, sends the data. */\n        UDR0 = *(((signed char*)(p_data)) + i);\n    }\n}\n</code></pre>\n\n<p>When sending the float to my putty terminal I see a question mark instead of the actual float value. Why?</p>\n\n<p>Thanks</p>\n\n<p>EDIT: This is a pdf version of the datasheet which explains what inter alia UDR0 does (see page 195/452): <a href=\"https://www.sparkfun.com/datasheets/Components/SMD/ATMega328.pdf\" rel=\"nofollow noreferrer\">https://www.sparkfun.com/datasheets/Components/SMD/ATMega328.pdf</a></p>\n"}, {"tags": ["c++", "c", "loops", "undefined-behavior"], "comments": [{"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1548222739, "post_id": 54320734, "comment_id": 95460616, "body": "It only prints <code>1</code> and then exits."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1548222760, "post_id": 54320734, "comment_id": 95460621, "body": "This depends on undefined behaviour. You are not suppose to dereference a memory at <code>(&amp;x+4)</code> when <code>x</code> is just <code>int x</code>."}, {"owner": {"reputation": 61, "user_id": 6135714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7OE9.png?s=128&g=1", "display_name": "TheDeepThinker", "link": "https://stackoverflow.com/users/6135714/thedeepthinker"}, "reply_to_user": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1548222941, "post_id": 54320734, "comment_id": 95460682, "body": "@Deanie I have used gcc compiler. Prints 1 to 10 both in C and C++."}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1548223001, "post_id": 54320734, "comment_id": 95460711, "body": "@TheDeepThinker I have used gcc compiler.  Prints 1 with a space and then exits."}, {"owner": {"reputation": 61, "user_id": 6135714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7OE9.png?s=128&g=1", "display_name": "TheDeepThinker", "link": "https://stackoverflow.com/users/6135714/thedeepthinker"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1548223157, "post_id": 54320734, "comment_id": 95460770, "body": "@SouravGhosh I found the code online. I know- I should not code like that. I simply want to know the <b>explanation</b>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548223330, "post_id": 54320734, "comment_id": 95460841, "body": "Self-modifying code relying on stack layout and HW architecture details. This question is useless without those details provided. F.ex. on my Fedora 29 x86_64 with gcc 8.2.1 I only get a segmentation fault. No bug surprise there, to be honest..."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1548224011, "post_id": 54320734, "comment_id": 95461069, "body": "@StefanBecker It&#39;s not &quot;self-modifying code&quot;, it&#39;s just corrupting its own stack."}, {"owner": {"reputation": 61, "user_id": 6135714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7OE9.png?s=128&g=1", "display_name": "TheDeepThinker", "link": "https://stackoverflow.com/users/6135714/thedeepthinker"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1548224162, "post_id": 54320734, "comment_id": 95461126, "body": "@duskwuff Thanks for you comment. Could you please tell how the stack is being corrupted."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1548224432, "post_id": 54320734, "comment_id": 95461219, "body": "@duskwuff in my book modifying the return address on the stack is self-modifying code."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548226056, "post_id": 54320734, "comment_id": 95461803, "body": "@StefanBecker In my book, it&#39;s only &quot;self-modifying code&quot; if it&#39;s <i>modifying code</i>. The stack is data, not code."}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1548224430, "post_id": 54320808, "comment_id": 95461218, "body": "Just because the code isn&#39;t valid C or C++ doesn&#39;t necessarily mean it&#39;s buggy. If it came with instructions that it is intended to be compiled with a specific version of GCC for Windows 7, then it depends on the behavior of the compiler. It might not even be undocumented behavior."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1548486742, "post_id": 54320808, "comment_id": 95566695, "body": "I&#39;ve never seen any compiler document something like that. If it relies on undocumented behavior, it&#39;s buggy. There&#39;s no way to know under what conditions the behavior will occur or not occur."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1548224106, "last_edit_date": 1548224106, "creation_date": 1548222975, "answer_id": 54320808, "question_id": 54320734, "link": "https://stackoverflow.com/questions/54320734/how-this-code-loops-without-any-loop-statement-or-goto-or-recursion/54320808#54320808", "title": "How This Code Loops Without Any Loop Statement or &#39;goto&#39; or Recursion?", "body": "<p>The behavior of <code>*(&amp;x+4) -= 5;</code> is undefined because it writes outside the bounds of any object allocated by the program. What this does will depend on what happens to be stored at that address, if anything. So the short answer to why your code behaves so strangely is that the code has a bug that results in its behavior being unpredictable.</p>\n\n<p>What is probably happening on your platform is that it likely winds up modifying the address that it returns to, causing it to return to <code>main</code> before the call to <code>foo</code>, resulting in <code>main</code> calling <code>foo</code> again.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7555262"}, "is_accepted": false, "score": 2, "last_activity_date": 1548228502, "creation_date": 1548228502, "answer_id": 54322037, "question_id": 54320734, "link": "https://stackoverflow.com/questions/54320734/how-this-code-loops-without-any-loop-statement-or-goto-or-recursion/54322037#54322037", "title": "How This Code Loops Without Any Loop Statement or &#39;goto&#39; or Recursion?", "body": "<p>David is right. When a code is trying to write or even access something in the memory block that is not allocated to it, it can do anything (even a nuclear explosion if there is, let's say, some function's address that does shit with reactor). It's your responsibility to take care of memory allocations as C is not a strongly-typed language. It's just a co-incidence that its causing a loop. On my system, it works as intended.</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 3733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e39a8a702cb94d44e344727625120f1?s=128&d=identicon&r=PG&f=1", "display_name": "mcabreb", "link": "https://stackoverflow.com/users/3733334/mcabreb"}, "is_accepted": false, "score": 1, "last_activity_date": 1548230557, "creation_date": 1548230557, "answer_id": 54322500, "question_id": 54320734, "link": "https://stackoverflow.com/questions/54320734/how-this-code-loops-without-any-loop-statement-or-goto-or-recursion/54322500#54322500", "title": "How This Code Loops Without Any Loop Statement or &#39;goto&#39; or Recursion?", "body": "<p>You are modifying the stack in <code>*(&amp;x+4) -= 5;</code> That is undefined behaviour, and under undefined behaviour anything is allowed to happen, even to make demons fly out of your nose. See <a href=\"http://catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">http://catb.org/jargon/html/N/nasal-demons.html</a></p>\n\n<p>Maybe for a specific HW with a specific compiler you get always the same behaviour, but it does not need to.</p>\n"}], "owner": {"reputation": 61, "user_id": 6135714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7OE9.png?s=128&g=1", "display_name": "TheDeepThinker", "link": "https://stackoverflow.com/users/6135714/thedeepthinker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "closed_date": 1548252595, "accepted_answer_id": 54320808, "answer_count": 3, "score": 2, "last_activity_date": 1548230557, "creation_date": 1548222571, "last_edit_date": 1548223960, "question_id": 54320734, "link": "https://stackoverflow.com/questions/54320734/how-this-code-loops-without-any-loop-statement-or-goto-or-recursion", "closed_reason": "Not suitable for this site", "title": "How This Code Loops Without Any Loop Statement or &#39;goto&#39; or Recursion?", "body": "<p>The following code does not contain any loop, or <code>goto</code>, or recursion; yet it prints from 1 to 10 in the console.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint n = 1;\n\nvoid foo() {\n    int x;\n\n    printf(\"%d \", n);\n    if (++n&gt;10) return;\n\n    *(&amp;x+4) -= 5;\n}\n\nint main() {\n    foo();\n    return 0;\n}\n</code></pre>\n\n<p>This mysterious code <code>*(&amp;x+4) -= 5;</code> is causing the loop.</p>\n\n<hr>\n\n<p>As much as I have understood- the value of <code>x</code> is being kept in stack memory. So may be, before that <code>(&amp;x+4)</code> there is the pointer of the function <code>foo</code>, and <code>foo</code> is being recursively called.</p>\n\n<p>Then again, I am not sure if my assumptions are right. I also do not understand where that <code>5</code> comes from. I tried to print and analyze the addresses (advised by my colleague) of the function pointer and variables; and match them with my knowledge of <a href=\"https://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">C memory layout</a>. But I got more confused.</p>\n\n<hr>\n\n<p>If there were more variables declared before and after <code>x</code>, how <code>*(&amp;x+4) -= 5;</code> would change?</p>\n\n<hr>\n\n<p><strong>OS:</strong> Windows-7 64 bit, <strong>Compiler:</strong> GNU GCC, <strong>Editor:</strong> CodeBlocks 16.01</p>\n"}, {"tags": ["c", "function", "pointers", "structure"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1548215011, "post_id": 54319696, "comment_id": 95458894, "body": "&quot;I&#39;m not sure where i&#39;m going wrong here&quot; - <code>void noiseremove(bool *s.input , int s.n, int s.count1, int s.count0, bool  s.previousop);</code> is wrong. And that isn&#39;t a function call; that&#39;s an improperly constructed prototype. If the syntax is wrong, it won&#39;t compile (and this won&#39;t). If the logic is wrong (but the syntax is right, which this isn&#39;t) it either won&#39;t run correctly, or at worst, will <i>seem</i> to run correctly but only because undefined behavior is just that; undefined. Go to your book/tutorial and look up how to call functions."}, {"owner": {"reputation": 2217, "user_id": 2903452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c29ac737f4bb84da93c1bc1ea7a931?s=128&d=identicon&r=PG&f=1", "display_name": "Balu", "link": "https://stackoverflow.com/users/2903452/balu"}, "edited": false, "score": 0, "creation_date": 1548221916, "post_id": 54319696, "comment_id": 95460385, "body": "while calling the function , it shoud be like - noiseremove(s.input , s.n, s.count1, s.count0, s.previousop); should not define the argument types etc while calling a function."}], "answers": [{"tags": [], "owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "is_accepted": false, "score": 2, "last_activity_date": 1548218081, "last_edit_date": 1548218081, "creation_date": 1548215057, "answer_id": 54319736, "question_id": 54319696, "link": "https://stackoverflow.com/questions/54319696/error-expected-while-passing-a-pointer-member-of-a-structure-to-a-function/54319736#54319736", "title": "Error expected ) while passing a pointer member of a structure to a function", "body": "<p>Having functions inside another function is <a href=\"https://stackoverflow.com/questions/2608158/nested-function-in-c\">not possible in <strong>C</strong></a>...</p>\n\n<p>So, your code should somewhat look like this:</p>\n\n<pre><code>struct signal\n{\n    bool *input, previousop;\n    int n, count0, count1;\n} s;\n\nvoid noiseremove(bool *input, int n, int count1, int count0, bool previousop)\n{\n    /* Try using multi-line comments since single-line comments can comment out the end\n       braces as well...*/\n}\n\nvoid main()\n{\n    /* Initialize the structure before accessing any of its variables, or it will lead\n       to undefined behavior! */\n    s = {0};\n    /* Don't declare the identifiers again... It is 'syntax error' and \n       your calling convention doesn't in the least look like a calling \n       convention but more like a function declaration with invalid identifiers\n       for the parameters... */\n    noiseremove(s.input , s.n, s.count1, s.count0, s.previousop);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": false, "score": 1, "last_activity_date": 1548215726, "creation_date": 1548215726, "answer_id": 54319803, "question_id": 54319696, "link": "https://stackoverflow.com/questions/54319696/error-expected-while-passing-a-pointer-member-of-a-structure-to-a-function/54319803#54319803", "title": "Error expected ) while passing a pointer member of a structure to a function", "body": "<pre><code>struct signal\n{\n    bool *input, previousop;\n    int n, count1, count0;\n} s; //my structure\n\nvoid noiseremove(bool *input, int n, int count1, int count0, bool previousop) //function i declared and defined before main function\n{\n    // my function here\n}\nvoid main()\n{\n    // this should compile but s has not been initialized\n    noiseremove(s.input , s.n, s.count1, s.count0, s.previousop);\n    // not sure what you were going for here\n    //*s.input \n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10949502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IY0RCc-h3wM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyMlWrmCCTbvRhAlw3ub7VpURljw/mo/photo.jpg?sz=128", "display_name": "Deepshika Handigol", "link": "https://stackoverflow.com/users/10949502/deepshika-handigol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548218081, "creation_date": 1548214709, "question_id": 54319696, "link": "https://stackoverflow.com/questions/54319696/error-expected-while-passing-a-pointer-member-of-a-structure-to-a-function", "title": "Error expected ) while passing a pointer member of a structure to a function", "body": "<p>I am a beginner to C. In my program i have a structure and a function. I'm trying to pass a pointer which is present in the structure as an argument in my function. But it is showing the error \"Expected )\" at the dot operator. This is confusing because the other arguments of my function are from the structure as well but this error is not seen in those.</p>\n\n<p>I tried changing the return type of the function to all types and still nothing.</p>\n\n<pre><code>struct signal\n{\nbool *input;\nint previousop;\nint n;\n}s; //my structure\nvoid noiseremove(bool *input, int n, int count1, int count0, bool \npreviousop)//function i declared and defined before main function\n{//my function here}\nvoid main()\n{\nvoid noiseremove(bool *s.input , int s.n, int s.count1, int s.count0, bool \ns.previousop); //this is where i call the function and facing an error at \n*s.input \n}\n</code></pre>\n\n<p>I'm not sure where i'm going wrong here or if the syntax is wrong. I expect the function to accept the parameters but it isn't.</p>\n"}, {"tags": ["c", "string", "string.h"], "answers": [{"tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": true, "score": 2, "last_activity_date": 1548215257, "last_edit_date": 1548215257, "creation_date": 1548214281, "answer_id": 54319644, "question_id": 54319559, "link": "https://stackoverflow.com/questions/54319559/pointer-to-string-management-in-c-replacing-specific-characters-in-a-string/54319644#54319644", "title": "Pointer to string management in C: Replacing specific characters in a string", "body": "<p>(1) Your \"/n\"s should be \"\\n\"s.</p>\n\n<p>(2) Use strncpy(temp, \",\\n\", 3); or manually add a null char at temp[2] after.</p>\n\n<p>(3) Use strncpy(temp, \",-1,\", 5); or manually add a null char at temp[4] after.</p>\n\n<p>(4) Consider truncating and using strcat over strncpy.</p>\n\n<p>(5) Check for overruns if this is to be used in production.</p>\n\n<p>(6) Just replace the newline with a comma.  puts() will add it back. (thus changing #2)</p>\n\n<p>like this:</p>\n\n<pre><code>// Get line from file\nchar line[70];\nfgets(line, 70, infile);\n\n//Add \",\" to the end of the line\nchar * temp;\ntemp = strstr(line, \"\\n\");\nstrcpy(temp, \",\");\n\n//Process Line\nwhile (strstr(line, \",,\") != NULL) {\n    char * temp; \n    char endTemp[70];\n    temp = strstr(line, \",,\");\n    strcpy(endTemp, temp + 2);\n    temp[0] = '\\0';\n    strncat(line, \",-1,\", 70);\n    strncat(line, endTemp, 70);\n}\nputs(line);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9684167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6935e25c0b59bdfe6e4423410eac4137?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Pelletier", "link": "https://stackoverflow.com/users/9684167/louis-pelletier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54319644, "answer_count": 1, "score": -1, "last_activity_date": 1548215257, "creation_date": 1548213564, "question_id": 54319559, "link": "https://stackoverflow.com/questions/54319559/pointer-to-string-management-in-c-replacing-specific-characters-in-a-string", "title": "Pointer to string management in C: Replacing specific characters in a string", "body": "<p>I want to replace all cases of \",,\" in a line from a .csv file with \",-1,\". Prior to this id also like to add a comma to the end of the line.</p>\n\n<p>I've tried to get it by splitting the line in to two sub strings one of the stuff before the ,, and one after, then concatenating them, but I've probably mess up with the stuff each thing is pointing too. </p>\n\n<p>Also Prior too this operation I'd like to add a additional comma at the end of the file so if there is a missing value at the end as well that gets taken care off.  </p>\n\n<pre><code>//Get line from file\nchar line[70];\nfgets(line, 70, infile);\n\n//Add \",\" to the end of the line\nchar * temp;\ntemp = strstr(line, \"/n\");\nstrncpy(temp, \",/n\", 2);\nputs(line);\n\n//Process Line\nwhile (strstr(line, \",,\") != NULL) {\n    char * temp; \n    char endTemp[50];\n    temp = strstr(line, \",,\");\n    strcpy(endTemp, temp + 2);\n    strncpy(temp, \",-1,\", 4);\n    strcat(temp, endTemp);\n    puts(line);\n}\n</code></pre>\n\n<p>I think I've messed up with the two sub strings I pull out of line, since if the starting string is something like:</p>\n\n<p>ajd43,232,,0,0,0,3</p>\n\n<p>it prints</p>\n\n<p>ajd43,232,-1,0,0,0,3\n,(/n)0,0,0,3</p>\n\n<p>I think the error is in the strcat at the end but if their is an easier way to do this operation I'd like to use that. </p>\n"}, {"tags": ["c", "arrays", "for-loop"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548214149, "post_id": 54319426, "comment_id": 95458748, "body": "Thank you for that but still I cant add two indexes. I cant find the indexes that satisfy the inputed number."}, {"owner": {"reputation": 267, "user_id": 10701340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0618b3acbd10a1ba4495922464febc87?s=128&d=identicon&r=PG&f=1", "display_name": "sri", "link": "https://stackoverflow.com/users/10701340/sri"}, "reply_to_user": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548215658, "post_id": 54319426, "comment_id": 95459008, "body": "Please mention the inputs you have tried. Expected and actual output."}, {"owner": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548216809, "post_id": 54319426, "comment_id": 95459223, "body": "If the two indexes added and the sum is equal to the inputed number, the two indexes will be print. If not, it will print no data match."}, {"owner": {"reputation": 267, "user_id": 10701340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0618b3acbd10a1ba4495922464febc87?s=128&d=identicon&r=PG&f=1", "display_name": "sri", "link": "https://stackoverflow.com/users/10701340/sri"}, "reply_to_user": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548270526, "post_id": 54319426, "comment_id": 95485737, "body": "This link may help <a href=\"https://www.geeksforgeeks.org/given-two-unsorted-arrays-find-pairs-whose-sum-x/\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 267, "user_id": 10701340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0618b3acbd10a1ba4495922464febc87?s=128&d=identicon&r=PG&f=1", "display_name": "sri", "link": "https://stackoverflow.com/users/10701340/sri"}, "is_accepted": false, "score": 1, "last_activity_date": 1548212371, "creation_date": 1548212371, "answer_id": 54319426, "question_id": 54319397, "link": "https://stackoverflow.com/questions/54319397/how-to-get-the-sum-of-two-index-in-an-array-in-c/54319426#54319426", "title": "How to get the sum of two index in an array in C?", "body": "<p>To begin with, the following bug is one of the problem -</p>\n\n<pre><code>scanf(\"%d\",num);\n</code></pre>\n\n<p>should be -</p>\n\n<pre><code>scanf(\"%d\", &amp;num);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548216435, "post_id": 54319731, "comment_id": 95459152, "body": "Is this the right right code for this?                                                                              for(int i= 0; i &lt; size - 1; i++){         for(int j=i+1;j &lt; size -1; j--){             if (array[i] + array[j] == num){                 printf(&quot;%i %i&quot;, array[i],array[j]);             }         }     }"}, {"owner": {"reputation": 166, "user_id": 10938068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3056e94de5646aad27742bf37698c97?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Garg", "link": "https://stackoverflow.com/users/10938068/alok-garg"}, "reply_to_user": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548216604, "post_id": 54319731, "comment_id": 95459188, "body": "That looks good. Just iterate i upto size -2 instead of size -1 ` for(int i=0; i&lt;size-2;i++) {      for(int j=i+1; j&lt; size-1; j++) {       if(array[i] + array[j] == num) {          printf(&quot;%i %i&quot;, array[i],array[j]);       }    } } `"}, {"owner": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548217583, "post_id": 54319731, "comment_id": 95459385, "body": "Got it. thanks.. I got the correct indexes. May I know where to put if no index is match of what I inputed? I put inside the loop but it also print many times."}, {"owner": {"reputation": 166, "user_id": 10938068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3056e94de5646aad27742bf37698c97?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Garg", "link": "https://stackoverflow.com/users/10938068/alok-garg"}, "reply_to_user": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "edited": false, "score": 0, "creation_date": 1548217734, "post_id": 54319731, "comment_id": 95459423, "body": "You could just define a bool variable outside the loop with default value as false. Set it to true inside the loop while printing the match happens.   If the value is still false after the loop finishes, you can print statement saying &#39;no match found&#39;.  In order to avoid printing many times, you can just break once the variable is set to true."}], "tags": [], "owner": {"reputation": 166, "user_id": 10938068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3056e94de5646aad27742bf37698c97?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Garg", "link": "https://stackoverflow.com/users/10938068/alok-garg"}, "is_accepted": true, "score": 0, "last_activity_date": 1548215011, "creation_date": 1548215011, "answer_id": 54319731, "question_id": 54319397, "link": "https://stackoverflow.com/questions/54319397/how-to-get-the-sum-of-two-index-in-an-array-in-c/54319731#54319731", "title": "How to get the sum of two index in an array in C?", "body": "<p>The final loop in printArray is basically iterating through the array one element both upwards &amp; downwards at the same time.</p>\n\n<p>So, for n=6, if sum of either <strong>(a[0]+a[5]),  (a[1]+a[4]) or (a[2]+a[3])</strong> does not equal the required number , it would show up as unmatched.</p>\n\n<p>This loop should be replaced by a nested loop so that inner loop iterates from j=i+1 to size-1 to allow check for <strong>a[i]+a[j] == num</strong>  for all possible permutations of array indexes.</p>\n"}], "owner": {"reputation": 149, "user_id": 10865394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49hqT.jpg?s=128&g=1", "display_name": "RonCajan", "link": "https://stackoverflow.com/users/10865394/roncajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 54319731, "answer_count": 2, "score": 2, "last_activity_date": 1548215011, "creation_date": 1548212040, "question_id": 54319397, "link": "https://stackoverflow.com/questions/54319397/how-to-get-the-sum-of-two-index-in-an-array-in-c", "title": "How to get the sum of two index in an array in C?", "body": "<p>Im making a code for an array that has a dynamic size and filling the array manually.Then, it will print. It will also ask for a number and finding the index that is equal to the two indexes.</p>\n\n<p>I using codeblocks for this code. Id tried for loop to find the two indexes that is eqaul to the inputed number.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid printArray(int *array, int size) {\n    printf(\"[\"); \n    for (int i = 0; i &lt; size - 1; i++) {\n        printf(\"%i,\", array[i]);\n\n    }\n    if (size &gt;= 1)\n        printf(\"%i\", array[size-1]); \n        printf(\"]\\n\");\n\n    int num;\n    printf(\"Enter number to be calculate: \");\n    scanf(\"%d\",num);\n\n    for(int i= 0; i &lt; size - 1; i++){\n        if (array[i] + array[size-1] == num){\n            printf(\"%d  %d\", array[i],array[size-1]);\n        }\n        size--;\n    }\n}\n\nint main(void) {\n    int count;\n    int num;\n    int sum;\n    printf(\"Enter the size of the array:\\n\");\n    scanf(\"%d\", &amp;count);\n\n    int *array = malloc(count * sizeof(*array));\n    if (!array) {\n        printf(\"There was a problem you entered\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"Enter the elements of the array:\\n\");\n    for (int i = 0; i &lt; count; i++)\n    scanf(\"%d\", &amp;array[i]);\n\n    printArray(array, count);\n}\n</code></pre>\n\n<p>I expect the output:</p>\n\n<p>Index 1 and 5 are eqaul to the inputed number. \nbut it gives error.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 2, "creation_date": 1548212195, "post_id": 54319394, "comment_id": 95458353, "body": "What about creating another &quot;list of indices&quot; and use that to perform your pointer chasing?"}, {"owner": {"reputation": 103, "user_id": 10953161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c7c501ab1aff7dd2bbd6b1d7244ced?s=128&d=identicon&r=PG&f=1", "display_name": "R_Moose", "link": "https://stackoverflow.com/users/10953161/r-moose"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1548212442, "post_id": 54319394, "comment_id": 95458403, "body": "Creating another array when I am experimenting with arrays of size 140000 will only consume my cache. I am testing my cache&#39;s performance here."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1548213508, "post_id": 54319394, "comment_id": 95458614, "body": "Modular arithmetic using <a href=\"https://en.wikipedia.org/wiki/Primitive_root_modulo_n\" rel=\"nofollow noreferrer\">primitive roots modulo <code>n</code></a> could get you &quot;random&quot; access that&#39;s actually non-random and exhaustive. Make the array have a prime number length (eases finding a generator), choose a start index that&#39;s a primitive root modulo that length, then access indices based on successive powers of the start index modulo the length."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1548214856, "post_id": 54319394, "comment_id": 95458863, "body": "For an example, you said you have an array of size 140000. Bump that array up to 140071 elements, and use a generator of, say, <code>989</code>. Your first index to access would be <code>989</code>, then <code>137695</code> (<code>989 ** 2 % 140071</code>), then <code>31343</code> (<code>989 ** 3 % 140071</code>), etc. until you reach <code>1</code> (<code>989 ** 140070 % 140071</code>). Note: It never accesses index <code>0</code> as is (generator functions never generate <code>0</code>); if that&#39;s a problem, use the generated value minus one as the index, and use an array of size <code>140070</code>."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10953161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c7c501ab1aff7dd2bbd6b1d7244ced?s=128&d=identicon&r=PG&f=1", "display_name": "R_Moose", "link": "https://stackoverflow.com/users/10953161/r-moose"}, "edited": false, "score": 0, "creation_date": 1548216841, "post_id": 54319616, "comment_id": 95459234, "body": "If I were to use this &quot;for(i = 0; i &lt; n; i++) {     do_stuff(arr[i / 2 + (i % 2) * (n / 2)]); }&quot;  Execution time of random access comes lesser than linear. I get it that it is because not every element gets accessed with this approach.  Am i thinking right ?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 103, "user_id": 10953161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c7c501ab1aff7dd2bbd6b1d7244ced?s=128&d=identicon&r=PG&f=1", "display_name": "R_Moose", "link": "https://stackoverflow.com/users/10953161/r-moose"}, "edited": false, "score": 0, "creation_date": 1548217708, "post_id": 54319616, "comment_id": 95459413, "body": "@R_Moose. As far as I can tell, each element gets accessed exactly once. For example, if <code>n = 10</code>, your indices will be 0, 5, 1, 6, 2, 7, 3, 8, 4, 9."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 1, "last_activity_date": 1548214056, "creation_date": 1548214056, "answer_id": 54319616, "question_id": 54319394, "link": "https://stackoverflow.com/questions/54319394/is-there-an-approach-to-traverse-array-randomly/54319616#54319616", "title": "Is there an approach to traverse array randomly?", "body": "<p>If your goal is to show that sequential access is faster than non-sequential access, simply pointer chasing the latter is not a good way to demonstrate that. You would be comparing access via a single pointer plus simple offset against deterrencing one or more pointers before offsetting. </p>\n\n<p>To use pointer chasing, you'd have to apply it to both cases. Here's an example:</p>\n\n<pre><code>int arr[n], i;\nint *unshuffled[n];\nint *shuffled[n];\n\nfor(i = 0; i &lt; n; i++) {\n    unshuffled[i] = arr + i;\n}\n/* I'll let you figure out how to randomize your indices */\nshuffle(unshuffled, shuffled)\n\n/* Do toning on these two loops */\nfor(i = 0; i &lt; n; i++) {\n    do_stuff(*unshuffled[i]);\n}\nfor(i = 0; i &lt; n; i++) {\n    do_stuff(*shuffled[i]);\n}\n</code></pre>\n\n<p>It you want to time the direct access better though, you could construct some simple formula for advancing the index instead of randomizing the access completely:</p>\n\n<pre><code>for(i = 0; i &lt; n; i++) {\n    do_stuff(arr[i]);\n}\nfor(i = 0; i &lt; n; i++) {\n    do_stuff(arr[i / 2 + (i % 2) * (n / 2)]);\n}\n</code></pre>\n\n<p>This will only work properly for even <code>n</code> as shown, but it illustrates the idea. You could go so far as to compensate for the extra flops in computing the index within <code>do_stuff</code>.</p>\n\n<p>Probably the most apples-to-apples test would be to literally access the indices you want, without loops or additional computations:</p>\n\n<pre><code>do_stuff(arr[0]);\ndo_stuff(arr[1]);\ndo_stuff(arr[2]);\n...\n\ndo_stuff(arr[123]);\ndo_stuff(arr[17]);\ndo_stuff(arr[566]);\n...\n</code></pre>\n\n<p>Since I'd imagine you'd want to test with large arrays, you can write a program to generate the actual test code for you, and possibly compile and run the result.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1548298128, "post_id": 54319913, "comment_id": 95494111, "body": "In idealized, theoretical C, this may be true. But when you have to run on actual hardware, sequential vs. random access matters. Sequential access necessarily means most of your accesses are already in the CPU cache (because no matter how bad the OS/CPU is at prefetch, after reading the first index in a given cache line, the rest of that cache line should be in cache, and the rest of that page should be in RAM, if not necessarily cache). Random access means the opposite (especially if the array is large enough that it doesn&#39;t fit in RAM)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1548298241, "post_id": 54319913, "comment_id": 95494138, "body": "Now I&#39;ll grant that worrying about this is <i>usually</i> premature optimization, but if your hottest code is doing array lookups, random vs. sequential can make a huge difference."}, {"owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1548376135, "post_id": 54319913, "comment_id": 95529561, "body": "@ShadowRanger I&#39;m not going to disagree with anything you said, but there really shouldn&#39;t be any substantial difference unless you are talking about some really huge arrays and if it doesn&#39;t even fit into memory without swapping you probably need to rethink the implementation.  Aside from using swap for a monster array, I would be surprised if the difference was even measurable, let alone huge, but in that case just accessing a single integer from a variable can take a huge amount of time."}], "tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": false, "score": -1, "last_activity_date": 1548216723, "creation_date": 1548216723, "answer_id": 54319913, "question_id": 54319394, "link": "https://stackoverflow.com/questions/54319394/is-there-an-approach-to-traverse-array-randomly/54319913#54319913", "title": "Is there an approach to traverse array randomly?", "body": "<p>I can tell you that for arrays in C the access time is constant regardless of the index being accessed.  There will be no difference between accessing them randomly or sequentially other than the fact that randomizing will in itself introduce additional computations.</p>\n\n<p>But, to really answer your question, you would probably be best off to build some kind of lookup array and shuffle it a few times and use that array to get the next index.  Obviously, you would be accessing two arrays, one sequentially and another randomly, by doing so, thus making the exercise pretty much useless.</p>\n"}], "owner": {"reputation": 103, "user_id": 10953161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c7c501ab1aff7dd2bbd6b1d7244ced?s=128&d=identicon&r=PG&f=1", "display_name": "R_Moose", "link": "https://stackoverflow.com/users/10953161/r-moose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 54319616, "answer_count": 2, "score": 0, "last_activity_date": 1548216723, "creation_date": 1548212017, "last_edit_date": 1548215990, "question_id": 54319394, "link": "https://stackoverflow.com/questions/54319394/is-there-an-approach-to-traverse-array-randomly", "title": "Is there an approach to traverse array randomly?", "body": "<p>I am trying to compare linear memory access to random memory access. I am traversing an array in the order of its indices to log performance of linear memory access. However to log memory's performance with random memory access I want to traverse my array randomly i.e <code>arr[8], arr[17], arr[34], arr[2]</code>...</p>\n\n<p>Can I use pointer chasing to achieve this while ensuring that no index are accessed twice? Is pointer chasing most optimal approach in this case?</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1548211115, "post_id": 54319224, "comment_id": 95458143, "body": "Use <code>strtok</code> to separate the numbers, and <code>strtol</code> to convert each number."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548211733, "post_id": 54319224, "comment_id": 95458263, "body": "Using both <code>strtok</code> and <code>strtol</code> is unnecessary. <code>strtol</code> provides the <code>endptr</code> parameter to allow conversion of multiple values from a single buffer."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548214557, "post_id": 54319224, "comment_id": 95458806, "body": "Are you wanting to limit yourself to only converting single digits <code>0-9</code>? Or do you need to be able to convert any integer value within the buffer (e.g. <code>9231867</code>)?"}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548214780, "post_id": 54319224, "comment_id": 95458849, "body": "@DavidC.Rankin any integer. Its grades so they can range from 0-100."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1548231601, "post_id": 54319224, "comment_id": 95464160, "body": "What is an &quot;overloaded function&quot; in your context? In C there is no such thing as overloading."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548212554, "post_id": 54319343, "comment_id": 95458425, "body": "Ok this works for numbers that are not higher then the 10s place value. If I input anything higher then it separates those numbers. i.e. if input was randomized { &quot;23 103 45 -23 45&quot; }"}], "tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 0, "last_activity_date": 1548211634, "creation_date": 1548211634, "answer_id": 54319343, "question_id": 54319224, "link": "https://stackoverflow.com/questions/54319224/is-there-a-function-that-can-convert-numbers-inputted-from-char-array-to-an-int/54319343#54319343", "title": "Is there a function that can convert numbers inputted from char array to an int array?", "body": "<p>Let simplify your problem. </p>\n\n<p>First suppose we have an char array that holds numbers: <code>char str[100]=\"1 2 3 4 5 6\";</code> instead of fill it from input.</p>\n\n<p>by performing this, and some little change we have:</p>\n\n<hr>\n\n<p><strong><em>Code</em></strong></p>\n\n<pre><code>char str[100]=\"1 2 3 4 5 6\";             //string with inputted ints\nint numStr[100]={0};\nint i = 0;\nint count = 0;\n\nwhile (str[i] != '\\0')\n{\n    if (str[i] != ' ')\n    {\n        numStr[count]=str[i]-'0';\n        count++;\n    }\n    i++;\n}   \nfor (int i = 0; i&lt;count; i++)\n{\n    printf(\"%d \", numStr[i]);\n}\n</code></pre>\n\n<hr>\n\n<p>Now we have numbers indexed from <strong><em>[0:count]</em></strong> in <code>numStr</code> integer array.</p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": false, "score": 0, "last_activity_date": 1548213427, "creation_date": 1548213427, "answer_id": 54319543, "question_id": 54319224, "link": "https://stackoverflow.com/questions/54319224/is-there-a-function-that-can-convert-numbers-inputted-from-char-array-to-an-int/54319543#54319543", "title": "Is there a function that can convert numbers inputted from char array to an int array?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nlong *numbersToArray(const char *str, long *len) {\n    const char *pos;\n    char *endptr;\n    long size, count, *ret, *tmp;\n    size = 4;\n    count = 0;\n    ret = calloc(size, sizeof(long));\n    if (!ret) return NULL;\n    pos = str;\n    while (isspace(pos[0])) ++pos;\n    while (pos[0]) {\n        if (count == size) {\n            size += 4;\n            tmp = realloc(ret, size * sizeof(long));\n            if (tmp) ret = tmp;\n            else {\n                free(ret);\n                return NULL;\n            }\n        }\n        ret[count] = strtol(pos, &amp;endptr, 0);\n        // if (errno) ...\n        ++count;\n        pos = endptr;\n        while (isspace(pos[0])) ++pos;\n    }\n    if (len) *len = count;\n    return ret;\n}\n\nint main(int argc, char **argv) {\n    if (argc &lt; 2) {\n        printf(\"usage: %s numbers\\n\", argv[0]);\n        return 0;\n    }\n    long *arr, len, i;\n    arr = numbersToArray(argv[1], &amp;len);\n    for (i = 0L; i &lt; len; ++i) {\n        printf(\"%ld\\n\", arr[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1548219358, "last_edit_date": 1548219358, "creation_date": 1548218818, "answer_id": 54320175, "question_id": 54319224, "link": "https://stackoverflow.com/questions/54319224/is-there-a-function-that-can-convert-numbers-inputted-from-char-array-to-an-int/54320175#54320175", "title": "Is there a function that can convert numbers inputted from char array to an int array?", "body": "<p>Continuing from your comment on being able to convert any integer value representation in the buffer to an integer, there is no substitute for <code>strtol</code>. While you can use <code>sscanf</code> employing the <code>%n</code> specifier to get the number of characters consumed to know how much to advance a pointer -- why? Any of your <code>scanf</code> conversions have virtually no error reporting capability beyond succeed/fail. <code>strtol</code> has the built in ability to work down a buffer converting values to <code>long</code> as you go.</p>\n\n<p>How? The prototype for <code>strtol</code> is:</p>\n\n<pre><code>long int strtol(const char *nptr, char **endptr, int base);\n</code></pre>\n\n<p>Where the string containing the numbers is provided by <code>nptr</code>, <code>endptr</code> will be set to one character past the last digit used following a successful conversion, and <code>base</code> provides the base of the number of convert (e.g. base <code>2, 8, 10, 16</code>, etc..) where a base of <code>0</code> will allow conversion from octal, decimal or hex depending on whether the string representation begins is <code>0</code> (octal) or <code>0x</code> (hex) or <code>1-9</code> (decimal).</p>\n\n<p>So if you give <code>strtol</code> a string containing a number, on successful conversion, the return is a <code>long</code> value that can be tested against <code>INT_MIN/INT_MAX</code> to determine if it is in the range of <code>int</code>, <code>endptr</code> will be set to one past the last digit converted (set up to use for the next value) and all you need to is set <code>p = endptr;</code> and keep going.</p>\n\n<p>Further, you know if <code>nptr == endptr</code> after the conversion -- no digits were converted. <code>strtol</code> also sets <code>errno</code> on overflow/underflow so you have a way to validate successful conversion to <code>long</code>. Further, should you want to check what is coming next, <code>endptr</code> points to the beginning character of the rest of what is contained in your buffer. You know down to the character what happened with the conversion and what remains to be converted.</p>\n\n<p>So how do you put this into use? It's really straight forward. First let's define a couple of constants for the number of integers in the array and the maximum number of characters in your buffer, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; /* for strtol   */\n#include &lt;limits.h&gt; /* for INT_MIN/INT_MAX */\n#include &lt;errno.h&gt;  /* for errno    */\n\n#define ARSZ  100\n#define MAXC 1024\n</code></pre>\n\n<p>Now declare your array, your buffer to hold your input, and a counter to keep track of the number of integer values converted and stored in the array:</p>\n\n<pre><code>    int arr[ARSZ] = {0};\n    char buf[MAXC] = \"\";\n    size_t n = 0;\n</code></pre>\n\n<p>Now let's open a file for reading with the filename provided as the 1st argument to your program (or read from <code>stdin</code> by default if no argument is provided) and validate we have a valid open file stream, e.g.</p>\n\n<pre><code>    /* use filename provided as 1st argument (stdin by default) */\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n\n    if (!fp) {  /* validate file open for reading */\n        perror (\"file open failed\");\n        return 1;\n    }\n</code></pre>\n\n<p>Now it's time to get down to the business of reading lines of input and converting any character references to numeric values to <code>long</code> with <code>strtol</code>. First, read a line of input into your buffer with <code>fgets</code> and declare your <code>nptr</code> (shortened to <code>p</code>), <code>endptr</code> and a temporary <code>long</code> value <code>tmp</code> to hold the return from <code>strtol</code>, e.g.</p>\n\n<pre><code>    while (fgets (buf, MAXC, fp)) {     /* read each line of input */\n        char *p = buf, *endptr;         /* nptr &amp; endptr for strtol */\n        long tmp;                       /* temp long for strtol */\n</code></pre>\n\n<p>With a line of input, you now proceed to loop converting values with <code>strtol</code>, validating that (1) digits were converted, (2) no overflow/underflow occurred (e.g. the value fit in <code>long</code>), (3) that the value is within the range of <code>int</code>, or (4) warn that the value exceeded the size of <code>int</code>. (we will talk about the <code>nextdigit</code> helper function later):</p>\n\n<pre><code>        /* protect array bounds, loop while not end of buf */\n        while (n &lt; ARSZ &amp;&amp; *p &amp;&amp; *p != '\\n') {\n            errno = 0;                      /* reset errno each iteration */\n            tmp = strtol (p, &amp;endptr, 0);   /* call strtol, update endptr */\n\n            if (p == endptr)    /* validate digits converted */\n                fputs (\"error: no digits converted.\\n\", stderr);\n            else if (errno)     /* validate conversion */\n                fputs (\"error: over/underflow occurred.\\n\", stderr);\n            /* validate tmp is in range of integer */\n            else if (INT_MIN &lt;= tmp &amp;&amp; tmp &lt;= INT_MAX)\n                arr[n++] = tmp;\n            else\n                fputs (\"error: value exceeds range of int.\\n\", stderr);\n\n            if (!(p = (char *)nextdigit (endptr)))  /* get next digit */\n                break;\n        }\n</code></pre>\n\n<p>(<strong>note:</strong> the conditions of the <code>while</code> loop, <code>n &lt; ARSZ</code> -- don't store more integers than you have space for, while <code>*p &amp;&amp; *p != '\\n'</code> (your not at the end of string, e.g. the <em>nul-character</em> or the newline). You can omit the newline check, and it will be harmlessly handled in the body of the loop, but why? A simple check avoids the body of the loop altogether)</p>\n\n<p>What is the <code>nextdigit()</code> helper function? From your reading of the <a href=\"http://man7.org/linux/man-pages/man3/strtol.3.html\" rel=\"nofollow noreferrer\">strtol(3) - Linux manual page</a>, you know that <code>strtol</code> will skip any leading whitespace up to the beginning of the next number to convert, but what if you have a comma-separated file, or other characters between your numbers? Very simple to handle, just scan forward in your buffer, checking characters as you go until your find the next <code>0-9</code>, or you find the next <code>+/-</code> and the next character after the explicit sign is a <code>0-9</code>. </p>\n\n<p>That's all <code>nextdigit</code> does, returning the address of the beginning of the next value to convert, or <code>NULL</code> if there are no further digits to convert. </p>\n\n<pre><code>/* scan forward in 'p' to find next valid signed integer beginning */\nconst char *nextdigit (const char *p)\n{\n    while (*p) {\n        if (('0' &lt;= *p &amp;&amp; *p &lt;= '9') || \n            ((*p == '-' || *p == '+') &amp;&amp; '0' &lt;= *(p + 1) &amp;&amp; *(p + 1) &lt;= '9'))\n            return p;\n        p++;\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> you can, and should, include <code>ctype.h</code> and replace the check of <code>('0' &lt;= *p &amp;&amp; *p &lt;= '9')</code> with a simple <code>isdigit(*p)</code>, and the same with <code>isdigit(*(p+1))</code>, but the complete manual test was shown for illustration purposes)</p>\n\n<p>Note in the code how <code>endptr</code> (the starting address for the scan forward) is passed to <code>nextdigit()</code>, and the result is the assigned to <code>p</code> and validated not <code>NULL</code> before the next iteration begins (with <code>p</code> primed to be passed to <code>strtol</code> again for the next conversion) -- rinse and repeat until you run out of characters in your buffer.</p>\n\n<p>Approaching converting a buffer to integer values in this manner allows you to pick out and convert all integer values in the line -- regardless how messy the format.</p>\n\n<p>Putting it altogether you could do:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; /* for strtol   */\n#include &lt;limits.h&gt; /* for INT_MIN/INT_MAX */\n#include &lt;errno.h&gt;  /* for errno    */\n\n#define ARSZ  100\n#define MAXC 1024\n\n/* scan forward in 'p' to find next valid signed integer beginning */\nconst char *nextdigit (const char *p)\n{\n    while (*p) {\n        if (('0' &lt;= *p &amp;&amp; *p &lt;= '9') || \n            ((*p == '-' || *p == '+') &amp;&amp; '0' &lt;= *(p + 1) &amp;&amp; *(p + 1) &lt;= '9'))\n            return p;\n        p++;\n    }\n    return NULL;\n}\n\nint main (int argc, char **argv) {\n\n    int arr[ARSZ] = {0};\n    char buf[MAXC] = \"\";\n    size_t n = 0;\n    /* use filename provided as 1st argument (stdin by default) */\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n\n    if (!fp) {  /* validate file open for reading */\n        perror (\"file open failed\");\n        return 1;\n    }\n\n    while (fgets (buf, MAXC, fp)) {     /* read each line of input */\n        char *p = buf, *endptr;         /* nptr &amp; endptr for strtol */\n        long tmp;                       /* temp long for strtol */\n\n        /* protect array bounds, loop while not end of buf */\n        while (n &lt; ARSZ &amp;&amp; *p &amp;&amp; *p != '\\n') {\n            errno = 0;                      /* reset errno each iteration */\n            tmp = strtol (p, &amp;endptr, 0);   /* call strtol, update endptr */\n\n            if (p == endptr)    /* validate digits converted */\n                fputs (\"error: no digits converted.\\n\", stderr);\n            else if (errno)     /* validate conversion */\n                fputs (\"error: over/underflow occurred.\\n\", stderr);\n            /* validate tmp is in range of integer */\n            else if (INT_MIN &lt;= tmp &amp;&amp; tmp &lt;= INT_MAX)\n                arr[n++] = tmp;\n            else\n                fputs (\"error: value exceeds range of int.\\n\", stderr);\n\n            if (!(p = (char *)nextdigit (endptr)))  /* get next digit */\n                break;\n        }\n    }\n    if (fp != stdin) fclose (fp);   /* close file if not stdin */\n\n    for (size_t i = 0; i &lt; n; i++) {    /* output results */\n        if (i &amp;&amp; i %10 == 0)            /* 10-values per row */\n            putchar ('\\n');\n        printf (\" %4d\", arr[i]);\n    }\n    putchar ('\\n');     /* tidy up with newline */\n}\n</code></pre>\n\n<p>Now lets looks at the lines this approach can handle converting to integer values, e.g.</p>\n\n<p><strong>Example Input Files</strong></p>\n\n<p>Space separated values:</p>\n\n<pre><code>$ cat dat/10int_space.txt\n8572 -2213 6434 16330 3034 12346 4855 16985 11250 1495\n</code></pre>\n\n<p>Newline separated values:</p>\n\n<pre><code>$ cat dat/10int_nl.txt\n8572\n-2213\n6434\n16330\n3034\n12346\n4855\n16985\n11250\n1495\n</code></pre>\n\n<p>Integers within a mess:</p>\n\n<pre><code>$ cat dat/10intmess.txt\n8572,;a -2213,;--a 6434,;\na- 16330,;a\n\n- The Quick\nBrown%3034 Fox\n12346Jumps Over\nA\n4855,;*;Lazy 16985/,;a\nDog.\n11250\n1495\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>How does the conversion routine fair?</p>\n\n<p>Space separated:</p>\n\n<pre><code>$ ./bin/fgets_strtol_any_fixed &lt;dat/10int_space.txt\n 8572 -2213 6434 16330 3034 12346 4855 16985 11250 1495\n</code></pre>\n\n<p>Newline separated:</p>\n\n<pre><code>$ ./bin/fgets_strtol_any_fixed &lt;dat/10int_nl.txt\n 8572 -2213 6434 16330 3034 12346 4855 16985 11250 1495\n</code></pre>\n\n<p>The unholy mess:</p>\n\n<pre><code>$ ./bin/fgets_strtol_any_fixed &lt;dat/10intmess.txt\nerror: no digits converted.\nerror: no digits converted.\nerror: no digits converted.\nerror: no digits converted.\nerror: no digits converted.\n 8572 -2213 6434 16330 3034 12346 4855 16985 11250 1495\n</code></pre>\n\n<p>All values, whether space separated, newline separated, or whether sprinkled in the middle of \"A quick brown fox...\", were converted correctly.</p>\n\n<p>Take time to digest the man page for <code>strtol</code> and then digest how it is implemented above. Once you master <code>strtol</code> (and <code>strtoul</code> (for <code>unsigned long</code>), <code>strtod</code> (for <code>double</code>), etc.. -- they all work very much the same, there is virtually no numeric conversion you can't handle. Let me know if you have further questions.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548259914, "post_id": 54331362, "comment_id": 95480592, "body": "So taking in all the information that I got from everyone last night this is what I have come up with. Looking at it now it should have been pretty straight forward in my opinion.  I realized that taking the data and separating them into tokens and then converting them to ints using atoi works efficiently and is simple enough to understand and walk through.  Thanks to everyone for you responses, it really helped me!"}], "tags": [], "owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "is_accepted": true, "score": 1, "last_activity_date": 1548259857, "creation_date": 1548259857, "answer_id": 54331362, "question_id": 54319224, "link": "https://stackoverflow.com/questions/54319224/is-there-a-function-that-can-convert-numbers-inputted-from-char-array-to-an-int/54331362#54331362", "title": "Is there a function that can convert numbers inputted from char array to an int array?", "body": "<pre><code>char str[100];\nint numStr[100]; \nchar *token;\nint count = 0;\nint spaceCounter = 0;\n\nfgets(str, 100, stdin);\n\nint i = 0;\nwhile (str[i] != '\\0')\n{\n    if (str[i] == ' ')\n    {\n        spaceCounter++;\n    }\n    i++;\n}\nif (spaceCounter &gt;= 1)       //checks if there is more then one int\n{\n    token = strtok(str, \" \");\n\n    while (token != NULL)\n    {\n        //printf(\"%s \\n\", token);\n        numStr[count] = atoi(token);\n        token = strtok(NULL, \" \");\n        count++;\n    }\n }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54331362, "answer_count": 4, "score": 0, "last_activity_date": 1548259857, "creation_date": 1548210626, "question_id": 54319224, "link": "https://stackoverflow.com/questions/54319224/is-there-a-function-that-can-convert-numbers-inputted-from-char-array-to-an-int", "title": "Is there a function that can convert numbers inputted from char array to an int array?", "body": "<p>I am trying to pass an array through an overloaded function. The array is a string of numbers separated by spaces. I am trying to convert the char array into an int array as I have another function that is being called with a pointer to a char.</p>\n\n<p>Here is my current solution. I tried to copy each element individually to an int array however when I try to read from that array I get a bunch of garbage numbers. \nIt passes into the correct overloaded function that I have created.</p>\n\n<pre><code>  char str[100];             //string with inputted ints\nint numStr[100];\nint i = 0;\nint count = 0;\n\nfgets(str, 100, stdin);\n\nwhile (str[i] != '\\0')\n{\n    if (str[i] == ' ')\n    {\n        count++;\n    }\n    i++;\n}\nif (count &gt;= 1)       //checks if there is more then one int\n{\n    for (int i = 0; str[i] != '\\0'; i++)\n    {\n        numStr[i] = str[i];\n        numStr[i] = numStr[i] - '/0';\n    }\n    printf(\"Going into the int array function\\n\");\n    assessGrade(numStr);    //passing int array\n}\n</code></pre>\n\n<p>The program should get each number that is in between the spaces to copy into another int array together.</p>\n"}, {"tags": ["c", "arrays", "memory"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1548209457, "post_id": 54319082, "comment_id": 95457807, "body": "Small note: In some cases <code>*p</code> is not equivalent to <code>p[0]</code>, though it&#39;s always equivalent to <code>*(p + 0)</code> (note the pointer arithmetic here)."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1548209628, "post_id": 54319082, "comment_id": 95457849, "body": "Try <code>(*fibSequence)[0]</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1548246246, "post_id": 54319082, "comment_id": 95472466, "body": "@iBug: &quot;<i>In some cases *p is not equivalent to p[0]</i>&quot; in which cases, please?"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1548247000, "post_id": 54319082, "comment_id": 95472873, "body": "@alk see the end of <a href=\"https://stackoverflow.com/a/54319099/5958455\">my answer</a> below"}], "answers": [{"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": true, "score": 3, "last_activity_date": 1548209778, "last_edit_date": 1548209778, "creation_date": 1548209329, "answer_id": 54319094, "question_id": 54319082, "link": "https://stackoverflow.com/questions/54319082/difference-between-pointer0-and-pointer-in-c/54319094#54319094", "title": "Difference between pointer[0] and *pointer in C?", "body": "<p>They are not equivalent, because postfix operators have a higher precedence than unary. This means that <code>*fib_sequence[i]</code> actually means <code>*(fib_sequence[i])</code>. Then by the equivalence of <code>*(E)</code> and <code>(E)[0]</code> that you understand correctly, that expression means <code>(fib_sequence[i])[0]</code>, from which we can drop the unnecessary parentheses to get <code>fib_sequence[i][0]</code>.</p>\n\n<p>Remember postfix versus unary/prefix: <code>*E</code>, <code>++E</code>, <code>&amp;E</code> and others are all unary operators. <code>E(...)</code>, <code>E[]</code>, <code>E-&gt;memb</code>, <code>E.memb</code> are postfix.</p>\n\n<p>All unary and postfix can be clumped together as one. When postfix is combined with postfix, it's clear: they go in one direction, from the root expression on the left, toward the right: <code>E[i]-&gt;foo.memb(arg)[blah]</code>. The precedence is all the same and the associativity can obviously only be left to right.</p>\n\n<p>When unaries are combined, same thing in the opposite direction: <code>sizeof (T) &amp;*++E</code>. The precedence is all the same, and the associativity is right-to-left. All of these are higher than the various binary operators. </p>\n\n<p>If we put these two together, we hardly have to think:</p>\n\n<pre><code>sizeof (T) &amp;*++E[i]-&gt;foo.memb(arg)[blah]\n</code></pre>\n\n<p>Once we scan past the unary operators to find the <code>E</code>, the precedence situation is simply this:</p>\n\n<pre><code>sizeof (T) &amp;*++ ( E[i]-&gt;foo.memb(arg)[blah] )\n                ^---------------------------^\n</code></pre>\n\n<p>the postfix cruft all has higher precedence than the unary cruft.</p>\n\n<p>Postfixes have <strong>the</strong> highest precedence, followed by unaries, then everything else.</p>\n"}, {"comments": [{"owner": {"reputation": 1290, "user_id": 2210825, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e6bf054665642464cfba9834709a2758?s=128&d=identicon&r=PG", "display_name": "donkey", "link": "https://stackoverflow.com/users/2210825/donkey"}, "edited": false, "score": 0, "creation_date": 1548209480, "post_id": 54319099, "comment_id": 95457814, "body": "You&#39;re correct however someone answered before you so I marked them as correct."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 1290, "user_id": 2210825, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e6bf054665642464cfba9834709a2758?s=128&d=identicon&r=PG", "display_name": "donkey", "link": "https://stackoverflow.com/users/2210825/donkey"}, "edited": false, "score": 0, "creation_date": 1548209545, "post_id": 54319099, "comment_id": 95457829, "body": "@Ge0rges Yep I know. That&#39;s actually a <a href=\"https://meta.stackexchange.com/a/19533/350567\">meme</a> on this site :)"}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 2, "last_activity_date": 1548209690, "last_edit_date": 1548209690, "creation_date": 1548209389, "answer_id": 54319099, "question_id": 54319082, "link": "https://stackoverflow.com/questions/54319082/difference-between-pointer0-and-pointer-in-c/54319099#54319099", "title": "Difference between pointer[0] and *pointer in C?", "body": "<p>You want to be aware that unary <code>*</code> and <code>[]</code> has different \"precedence\", and your expression</p>\n\n<pre><code>*foo[1]\n</code></pre>\n\n<p>is actually parsed as</p>\n\n<pre><code>*(foo[1])\n</code></pre>\n\n<p>You need to parenthesize your \"preference\" so it functions correctly:</p>\n\n<pre><code>(*foo)[1]\n</code></pre>\n\n<hr>\n\n<p>On a side note: In some cases <code>*p</code> is not equivalent to <code>p[0]</code>, though it's always equivalent to <code>*(p + 0)</code> (note the pointer arithmetic here).</p>\n\n<p>Therefore, you may find <code>p[0]</code> refuses to compile when <code>p</code> is a function pointer, because it cannot participate in pointer arithmetics. For data pointers, <code>*p</code> and <code>p[0]</code> doesn't really make any difference, however.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 1, "last_activity_date": 1548209904, "creation_date": 1548209904, "answer_id": 54319158, "question_id": 54319082, "link": "https://stackoverflow.com/questions/54319082/difference-between-pointer0-and-pointer-in-c/54319158#54319158", "title": "Difference between pointer[0] and *pointer in C?", "body": "<p><code>*pointer</code> and <code>pointer[0]</code> are exactly the same in C.  But that means that <code>*fib_sequence[i]</code> is the same as <code>fib_sequence[i][0]</code>, which is NOT the same as <code>fib_sequence[0][i]</code> (unless <code>i</code> happens to be 0).  Suffix operators in C are all higher precedence than prefix operators.</p>\n"}, {"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 0, "last_activity_date": 1548210428, "creation_date": 1548210428, "answer_id": 54319200, "question_id": 54319082, "link": "https://stackoverflow.com/questions/54319082/difference-between-pointer0-and-pointer-in-c/54319200#54319200", "title": "Difference between pointer[0] and *pointer in C?", "body": "<p>Note that <code>int *fib[]</code> is parsed as <code>int* (fib)[]</code>; that is, an unbounded array of <code>int*</code>. You probably meant <code>int (*fib)[]</code>: a pointer to an unbounded array of integers. Once you make that change, your first example <a href=\"https://godbolt.org/z/AJeSHy\" rel=\"nofollow noreferrer\">no longer compiles</a> (as it should), but <code>(*fib_sequence)[i]</code> and <code>fib_sequence[0][i]</code> both work (also as they should).</p>\n\n<p>However, <code>*fib_sequence = malloc(sizeof(int[count]))</code> is now an error, because you can't assign an array value. That means that you would have to move <code>malloc</code> outside of the function, or give up the <code>int (*fib)[]</code> syntax and use <code>int** fib</code> instead.</p>\n"}], "owner": {"reputation": 1290, "user_id": 2210825, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e6bf054665642464cfba9834709a2758?s=128&d=identicon&r=PG", "display_name": "donkey", "link": "https://stackoverflow.com/users/2210825/donkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54319094, "answer_count": 4, "score": 1, "last_activity_date": 1548210428, "creation_date": 1548209229, "last_edit_date": 1548209376, "question_id": 54319082, "link": "https://stackoverflow.com/questions/54319082/difference-between-pointer0-and-pointer-in-c", "title": "Difference between pointer[0] and *pointer in C?", "body": "<p>So I have the following array <code>fib_sequence</code> in C passed to a function as <code>*fib_sequence[]</code>.</p>\n\n<p>My function segfaults when I access an element by doing:</p>\n\n<pre><code>*fib_sequence[i]\n</code></pre>\n\n<p>However it works when I do:</p>\n\n<pre><code>fib_sequence[0][i]\n</code></pre>\n\n<p>Am I going insane or are these not equivalent?</p>\n\n<p>For reference here is the entire function, it failed when assigned to index 1 <em>only</em>.</p>\n\n<p><strong>Segfault function</strong></p>\n\n<pre><code>void fib(int *fib_sequence[], int count) {\n    *fib_sequence = malloc(sizeof(int[count]));\n\n    for (int i = 0; i &lt; count; i++) {\n        if (i == 0) {\n            *fib_sequence[i] = 0;\n\n        } else if (i == 1) {\n            *fib_sequence[i] = 1;\n\n        } else if (i &gt;= 2) {\n            *fib_sequence[i] = *fib_sequence[i-2] + *fib_sequence[i-1];\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Working Function</strong></p>\n\n<pre><code>void fib(int *fib_sequence[], int count) {\n    *fib_sequence = malloc(sizeof(int[count]));\n\n    for (int i = 0; i &lt; count; i++) {\n        if (i == 0) {\n            fib_sequence[0][i] = 0;\n\n        } else if (i == 1) {\n            fib_sequence[0][i] = 1;\n\n        } else if (i &gt;= 2) {\n            fib_sequence[0][i] = fib_sequence[0][i-2] + fib_sequence[0][i-1];\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "lua", "macros", "block"], "comments": [{"owner": {"reputation": 651, "user_id": 6834680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor   Skriptunoff", "link": "https://stackoverflow.com/users/6834680/egor-skriptunoff"}, "edited": false, "score": 2, "creation_date": 1548229405, "post_id": 54318875, "comment_id": 95463171, "body": "There exist a lot of languages with almost-C syntax.  But in Lua <code>--</code> means &quot;start of a single-line comment&quot;, and <code>{..}</code> is used for a table constructor."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1548241980, "post_id": 54318875, "comment_id": 95470240, "body": "If you want to experiment with alternative syntax for Lua, try <a href=\"http://webserver2.tecgraf.puc-rio.br/~lhf/ftp/lua/index.html#ltokenp\" rel=\"nofollow noreferrer\">ltokenp</a>."}, {"owner": {"reputation": 3359, "user_id": 7396148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yIsr8.jpg?s=128&g=1", "display_name": "Nifim", "link": "https://stackoverflow.com/users/7396148/nifim"}, "edited": false, "score": 0, "creation_date": 1548263960, "post_id": 54318875, "comment_id": 95482785, "body": "I believe the answer to another question explains why lua does not have <code>+=</code> well <a href=\"https://stackoverflow.com/questions/20091779/lua-operators-why-isnt-and-so-on-defined?answertab=oldest#tab-top\" title=\"lua operators why isnt and so on defined\">stackoverflow.com/questions/20091779/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 5863274, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38ac9651bbbdccc321d92840325afbb5?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowblitz16", "link": "https://stackoverflow.com/users/5863274/shadowblitz16"}, "edited": false, "score": 0, "creation_date": 1549148442, "post_id": 54445020, "comment_id": 95801738, "body": "I wanted to use some sort of macros to make it look more like c i know there are a few macro libraries that can achieve += and {} i just don&#39;t know how to use them."}], "tags": [], "owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1548865242, "creation_date": 1548865242, "answer_id": 54445020, "question_id": 54318875, "link": "https://stackoverflow.com/questions/54318875/how-do-i-define-c-style-code-blocks-in-lua/54445020#54445020", "title": "how do I define c style code blocks in lua?", "body": "<p>Just use <code>do..end</code>. <code>+=</code> operator and friends aren't conformant with spirit of Lua. Your code will <strong>not</strong> run. First of all, you need to understand basic Lua syntax. Example of corrected code:</p>\n\n<pre><code>function f()\n   local x = 3\n   if x == 1 then\n      print(\"hi1\")\n   elseif x == 2 then\n      print(\"hi2\")\n   elseif x == 3 then\n      print(\"hi3\")\n   end\nend\n</code></pre>\n\n<p>To create block simply use</p>\n\n<pre><code>do\n  print('Hello, world!')\nend\n</code></pre>\n\n<p>You can check out Lua manual <a href=\"https://www.lua.org/pil/1.html\" rel=\"nofollow noreferrer\">here</a>, whenever you run to trouble.</p>\n"}], "owner": {"reputation": 140, "user_id": 5863274, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38ac9651bbbdccc321d92840325afbb5?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowblitz16", "link": "https://stackoverflow.com/users/5863274/shadowblitz16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1548865242, "creation_date": 1548207506, "question_id": 54318875, "link": "https://stackoverflow.com/questions/54318875/how-do-i-define-c-style-code-blocks-in-lua", "title": "how do I define c style code blocks in lua?", "body": "<p>is there a way to define {} and blankspace as a lua code block?</p>\n\n<p>something like this..</p>\n\n<pre><code>function()\n{\n   local x = 3\n   if     (x == 1) { print(\"hi1\") }\n   elseif (x == 2)   print(\"hi2\") \n   else   (x == 3)   print(\"hi3\") \n}\n</code></pre>\n\n<p>it would also be nice to define things like ++ and += too</p>\n"}, {"tags": ["c", "codelite"], "comments": [{"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 2, "creation_date": 1548209749, "post_id": 54318823, "comment_id": 95457871, "body": "<i>7z</i> is an archive format, use a extractor in this case: <a href=\"https://extract.me/\" rel=\"nofollow noreferrer\">Online Extractor</a>..."}], "answers": [{"tags": [], "owner": {"reputation": 1882, "user_id": 10880993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvxDM.png?s=128&g=1", "display_name": "Beniamin H", "link": "https://stackoverflow.com/users/10880993/beniamin-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1548209240, "creation_date": 1548209240, "answer_id": 54319083, "question_id": 54318823, "link": "https://stackoverflow.com/questions/54318823/codelite-will-not-download-correctly/54319083#54319083", "title": "Codelite will not download correctly?", "body": "<p>7z is an <a href=\"https://www.7-zip.org/7z.html\" rel=\"nofollow noreferrer\">archive file format</a> (like zip or rar). For windows you can use for example <a href=\"https://www.7-zip.org/\" rel=\"nofollow noreferrer\">7-Zip</a> to unpack it.</p>\n"}], "owner": {"reputation": 1, "user_id": 10953123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6da1c2be00947c7de04ecee0092bb0?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10953123/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548209240, "creation_date": 1548207088, "question_id": 54318823, "link": "https://stackoverflow.com/questions/54318823/codelite-will-not-download-correctly", "title": "Codelite will not download correctly?", "body": "<p>I am trying to download Codelite on Windows 10 but only downloads as a \"7z\" file and will not open. I literally have no idea what I'm doing. Thanks!</p>\n"}, {"tags": ["c", "integer", "overflow", "multiplication"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548211952, "post_id": 54318815, "comment_id": 95458309, "body": "<a href=\"https://codereview.stackexchange.com/q/93687/29485\">Test if arithmetic operation will cause undefined behavior</a> may help."}], "answers": [{"comments": [{"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1548226795, "post_id": 54319001, "comment_id": 95462060, "body": "In last version, you probably meant long long instead of long. In most modern computers, long has the same size as int. It could also be possible to use double."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1548246031, "post_id": 54319001, "comment_id": 95472343, "body": "@AlainMerigot At least on my machine (x86_64 linux with gcc) <code>int</code> is <code>32</code> bits and <code>long</code> is <code>64</code> bit, but that of course may differ. Even <code>long long</code> is not guaranteed to be wider than <code>int</code>, but I added it as possibility. Yes but I dislike the idea of solving <code>int</code> problems with floating point math, because in may cases this is a bad idea (currency for example)."}], "tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": false, "score": 2, "last_activity_date": 1548246150, "last_edit_date": 1548246150, "creation_date": 1548208474, "answer_id": 54319001, "question_id": 54318815, "link": "https://stackoverflow.com/questions/54318815/integer-overflow-w-multiplication-in-c/54319001#54319001", "title": "Integer Overflow w/ Multiplication in C", "body": "<p>An integer overflows when <code>a*b &gt; INT_MAX</code> or when <code>a*b &lt; INT_MIN</code>.</p>\n\n<p>This leads to the inequations:</p>\n\n<p>If <code>b &gt; 0</code>: <code>a &gt; INT_MAX/b</code> or <code>a &lt; INT_MIN/b</code><br>\nIf <code>b &lt; 0</code>: <code>a &lt; INT_MAX/b</code> or <code>a &gt; INT_MIN/b</code></p>\n\n<p>So the condition which outputs if an <code>int</code> overflows is:</p>\n\n<pre><code>b&gt;0 &amp;&amp; (a&gt;INT_MAX/b || a&lt;INT_MIN/b) || b&lt;0 &amp;&amp; (a&lt;INT_MAX/b || a&gt;INT_MIN/b)\n</code></pre>\n\n<p>Since here <code>INT_MIN/b</code> could overflow itself (when <code>b=-1</code>) this should be checked seperately.</p>\n\n<p>This is a rather long condition and should maybe be splitted up and put into a function:</p>\n\n<pre><code>int ismultoverflow(int a, int b)\n{\n    if(b &gt; 0)\n    {\n        if(a&gt;INT_MAX/b || a&lt;INT_MIN/b)\n        {\n            return 1;\n        }\n    }\n    else if(b &lt; 0)\n    {\n        if(b == -1)\n        {\n            return a==INT_MIN;\n        }\n\n        if(a&lt;INT_MAX/b || a&gt;INT_MIN/b)\n        {\n            return 1;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Another approach would be to group the inequations into four domains rather than two:</p>\n\n<p>If <code>a &gt; 0</code> and <code>b &gt; 0</code>: <code>a &gt; INT_MAX/b</code><br>\nIf <code>a &gt; 0</code> and <code>b &lt; 0</code>: <code>b &lt; INT_MIN/a</code><br>\nIf <code>a &lt; 0</code> and <code>b &gt; 0</code>: <code>a &lt; INT_MIN/b</code><br>\nIf <code>a &lt; 0</code> and <code>b &lt; 0</code>: <code>b &lt; INT_MAX/a</code></p>\n\n<p>which leads to a function where you do not have to handle a special case:</p>\n\n<pre><code>int ismultoverflow(int a, int b)\n{\n    if(a&gt;0 &amp;&amp; b&gt;0 &amp;&amp; a&gt;INT_MAX/b)\n    {\n        return 1;\n    }\n    if(a&gt;0 &amp;&amp; b&lt;0 &amp;&amp; b&lt;INT_MIN/a)\n    {\n        return 1;\n    }\n    if(a&lt;0 &amp;&amp; b&gt;0 &amp;&amp; a&lt;INT_MIN/b)\n    {\n        return 1;\n    }\n    if(a&lt;0 &amp;&amp; b&lt;0 &amp;&amp; b&lt;INT_MAX/a)\n    {\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Of course if you could use types with larger width it is way less complicated (it is not guaranteed that <code>long</code> or <code>long long</code> are wider than <code>int</code>, but on many platforms this is the case):</p>\n\n<pre><code>int ismultoverflow(int a, int b)\n{\n    long x=a, y=b;\n\n    if(x*y &gt; INT_MAX || x*y &lt; INT_MIN)\n    {\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10792793"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548246150, "creation_date": 1548207041, "question_id": 54318815, "link": "https://stackoverflow.com/questions/54318815/integer-overflow-w-multiplication-in-c", "title": "Integer Overflow w/ Multiplication in C", "body": "<p>I've recently been messing around with C and have come to the concept of integer overloading. I'm trying to create a program that detects whether or not two 32 bit integers multiplied by each other will be able to fit into another 32 bit integer.  </p>\n\n<p>I understand the concept of integer overflow and how integers end up overflowing, but I'm stuck with figuring out the logic for this program. Here's what I have so far:</p>\n\n<pre><code>int main() {    \nint min = INT_MIN;\nint max = INT_MAX;\n\nint num1, num2;\nint x = num1 * num2;\n\nprintf(\"Please enter a number you would like to multiply: \");\nscanf(\"%d\", &amp;num1);\nprintf(\"\\nPlease enter a second number you would like to multiply: \");\nscanf(\"%d\", &amp;num2);\n\nif (num1 &gt; max / num2){\n    printf(\"\\nOverflow! - first case\\n\");\n}\nelse if (num2 &gt; max / num1){\n    printf(\"\\nOverflow! - second case\\n\");\n}\nelse if ((num1 &gt; max - num2 &amp;&amp; num2 &gt; 0 ) || \n     (num1 &lt; max - num2 &amp;&amp; num2 &lt; 0)){\n\n    printf(\"\\nOverflow! - third case\\n\");\n}\nelse\n    printf(\"\\nNot Overflow!\\n\");\n\nreturn 0;\n}\n</code></pre>\n\n<p>As you can see, my program can detect some cases for overflow, but several other cases like -2 * 3 and -2 * -3 will get caught by my conditions.</p>\n\n<p>So what I have will absolutely not work. What are good ways to go about solving this?</p>\n"}, {"tags": ["c", "linux", "dll", "dynamic-linking"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1548208266, "post_id": 54318798, "comment_id": 95457595, "body": "Global data is in the program&#39;s space, so each program will have a copy of any global variables."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 1, "last_activity_date": 1548298252, "creation_date": 1548298252, "answer_id": 54338710, "question_id": 54318798, "link": "https://stackoverflow.com/questions/54318798/dynamic-linking-and-global-variables/54338710#54338710", "title": "Dynamic Linking and global variables", "body": "<blockquote>\n  <p>Even I am not using the multiple function, the whole math.so shared library(include multiple' code and data) will still be loaded in the the memory</p>\n</blockquote>\n\n<p>Not quite correct.</p>\n\n<p>The entire library will be <code>mmap</code>ed into your process. However, most modern OSes use <a href=\"https://en.wikipedia.org/wiki/Demand_paging\" rel=\"nofollow noreferrer\">demand paging</a>, which means that code and data is not <em>actually</em> loaded into memory until accessed.</p>\n\n<p>If the shared library is large (larger than one page, which is typically 4KiB or 8KiB), and only one function from that library is accessed, then it's highly likely that unused portions of the library will in fact <em>not</em> be loaded into memory.</p>\n\n<blockquote>\n  <p>Since math.so is shared in memory, how do we deal with global data in math.so?</p>\n</blockquote>\n\n<p>The global data is also <code>mmap</code>ed into your process, with <a href=\"https://en.wikipedia.org/wiki/Copy-on-write\" rel=\"nofollow noreferrer\">copy on write</a> semantics.</p>\n\n<p>If you have two processes, and each <em>reads</em> the value of <code>number</code> that is a global variable in <code>math.so</code>, both processes will use (share) the same actual physical page of RAM. But as soon as one of the processes <em>writes</em> to <code>number</code>, a new physical page of RAM will be allocated to that process (un-sharing the page), and update will be done only to that (now private) copy.</p>\n"}], "owner": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548298252, "creation_date": 1548206949, "last_edit_date": 1548207598, "question_id": 54318798, "link": "https://stackoverflow.com/questions/54318798/dynamic-linking-and-global-variables", "title": "Dynamic Linking and global variables", "body": "<p>I'm a beginner in C and linking, just have two question on .so share library.</p>\n\n<p>Lets say I have a math.so shared library that originally created from add.c and multiple.c,\nand I have a program test.c that only use add function in add.c.</p>\n\n<p>Q1- Even I am not using the multiple function, the whole math.so shared library(include multiple' code and data) will still be loaded in the the memory, is my understanding correct?</p>\n\n<p>Q2- Since  math.so  is shared in memory, how do we deal with global data in math.so? e.g. there is a global variable number = 0 in add.c, the test.c modifies it by <code>number = 1</code> and another program test2.c modify it by number = 2, so after context switch, test.c tries to print number whose value is 2, not really the value (which should be 1) that is supposed to be for test.c?</p>\n"}, {"tags": ["c", "file", "binary", "structure"], "answers": [{"tags": [], "owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "is_accepted": true, "score": 3, "last_activity_date": 1548207959, "creation_date": 1548207959, "answer_id": 54318937, "question_id": 54318704, "link": "https://stackoverflow.com/questions/54318704/i-cannot-read-a-structure-in-another-one-in-c-language/54318937#54318937", "title": "I cannot read a structure in another one in c language", "body": "<p>Note that <code>sizeof(ANG*)</code> is not the same as <code>sizeof(ANG)</code> (the former is the size of the pointer -- probably 8 -- whereas the latter is the size of the structure -- probably 40), which means you're only allocating about 1/5 of the memory you intend to. As a result, the later code winds up writing and reading past the end of what's been allocated, which has undefined behavior.</p>\n\n<p>One practice that helps people with this is to get into the habit of using <code>sizeof(*ptr)</code> when allocating for a pointer <code>ptr</code>, which will always give you the size of what it points to so you don't have to think of \"do I need <code>sizeof(ANG)</code> or <code>sizeof(ANG*)</code> here?\". This is particularly useful when allocating multi-dimensional arrays (e.g. <code>int ***three_d_array = malloc(n * sizeof(*three_d_array))</code>).</p>\n"}], "owner": {"reputation": 107, "user_id": 10838938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6b3ff8fb52870a5a09dbb81c940145?s=128&d=identicon&r=PG&f=1", "display_name": "Mary Poppins", "link": "https://stackoverflow.com/users/10838938/mary-poppins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54318937, "answer_count": 1, "score": 0, "last_activity_date": 1548207959, "creation_date": 1548206161, "question_id": 54318704, "link": "https://stackoverflow.com/questions/54318704/i-cannot-read-a-structure-in-another-one-in-c-language", "title": "I cannot read a structure in another one in c language", "body": "<p>I am trying to read a structure which contains another structure and then write it in a binary file. However, when i check if the structure was well read from the keyboard, the structure FIRMA is not read correctly. The value of 'nrang' is always 0 and the 'localitate' string is something very odd. \nThis is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\ntypedef struct\n{\n    char localitate[10];\n    int nrang;\n} FIRMA;\n\ntypedef struct\n{\n    char nume[20];\n    int varsta;\n    FIRMA firma;\n} ANG;\n\n\nint main()\n{\n    FILE* f;\n    ANG* a;\n    int n,i;\n    if ((f=fopen(\"fis.txt\",\"wb\"))==NULL) exit(1);\n    printf(\"number?\\n\");\n    scanf(\"%d\",&amp;n);\n    a=(ANG*)malloc(n*sizeof(ANG*));\n    printf (\"Dati valorile\");\n    for (i=0; i&lt;n; i++)\n    {\n        scanf(\"%s%d\",&amp;a[i].nume,&amp;a[i].varsta);\n        scanf(\"%s\",&amp;a[i].firma.localitate);\n        scanf(\"%d\",&amp;a[i].firma.nrang);\n        fwrite(&amp;a[i],sizeof(a[0]),1,f);\n        printf(\"%s\\n%d\\n%s\\n%d\\n\",a[i].nume,a[i].varsta,a[i].firma.localitate,a[i].firma.nrang);\n\n    }\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "objective-c", "enums", "switch-statement"], "comments": [{"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 1, "creation_date": 1548210653, "post_id": 54318565, "comment_id": 95458068, "body": "Tangential, but you might be interested in this blog post (it&#39;s a quick read): <a href=\"https://owensd.io/2014/10/09/building-swift-style-enums-in-objc-part-3/\" rel=\"nofollow noreferrer\">owensd.io/2014/10/09/building-swift-style-enums-in-objc-part&zwnj;&#8203;-3</a>"}, {"owner": {"reputation": 26297, "user_id": 1265393, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2cfb51063c4565abe1d7b308f262e31?s=128&d=identicon&r=PG&f=1", "display_name": "pkamb", "link": "https://stackoverflow.com/users/1265393/pkamb"}, "reply_to_user": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 1, "creation_date": 1548282375, "post_id": 54318565, "comment_id": 95490528, "body": "&quot;But what if some hack comes along and throws an uninitialized int into my beautiful function?&quot; - <a href=\"https://softwareengineering.stackexchange.com/questions/179269/why-does-clang-llvm-warn-me-about-using-default-in-a-switch-statement-where-all\" title=\"why does clang llvm warn me about using default in a switch statement where all\">softwareengineering.stackexchange.com/questions/179269/&hellip;</a>"}, {"owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "edited": false, "score": 0, "creation_date": 1548526917, "post_id": 54318565, "comment_id": 95575856, "body": "Aside: FWIW, when thinking about enums in C (or ObjC), unlike the enums in loads of other languages, they&#39;re not really conceptually &quot;special&quot; types-- think of enums as just being syntactic sugar for integers with <i>some</i> useful compiler warnings around their usage, but other pitfalls. Using some random integer for the value that&#39;s not in the defined enum set is not so much &quot;invalid&quot; as it is just badly written (or designed) code. Enums are kind of a pain in C because of this setup and pretty much every later language (incl Swift) made enums more first-class and useful."}], "answers": [{"comments": [{"owner": {"reputation": 26297, "user_id": 1265393, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2cfb51063c4565abe1d7b308f262e31?s=128&d=identicon&r=PG&f=1", "display_name": "pkamb", "link": "https://stackoverflow.com/users/1265393/pkamb"}, "edited": false, "score": 0, "creation_date": 1548281689, "post_id": 54319209, "comment_id": 95490277, "body": "Great to know about he undefined nature of the <code>nil</code> result I&#39;m getting. Has this exact topic been covered/written up elsewhere, that you&#39;re aware of?"}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "reply_to_user": {"reputation": 26297, "user_id": 1265393, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2cfb51063c4565abe1d7b308f262e31?s=128&d=identicon&r=PG&f=1", "display_name": "pkamb", "link": "https://stackoverflow.com/users/1265393/pkamb"}, "edited": false, "score": 0, "creation_date": 1548282102, "post_id": 54319209, "comment_id": 95490419, "body": "Not sure honestly, but this is straight C behavior; there&#39;s nothing specific to ObjC in this situation, so it&#39;s probably in the C standard somewhere."}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "reply_to_user": {"reputation": 26297, "user_id": 1265393, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2cfb51063c4565abe1d7b308f262e31?s=128&d=identicon&r=PG&f=1", "display_name": "pkamb", "link": "https://stackoverflow.com/users/1265393/pkamb"}, "edited": false, "score": 1, "creation_date": 1548282283, "post_id": 54319209, "comment_id": 95490492, "body": "Actually, now that I think of it, there&#39;s a chance that ARC is guaranteeing the <code>nil</code> because the return type is an object... (as it does for uninitialized object pointers). Not sure about that; I&#39;d have to spend some time looking at the ARC spec."}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "reply_to_user": {"reputation": 26297, "user_id": 1265393, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2cfb51063c4565abe1d7b308f262e31?s=128&d=identicon&r=PG&f=1", "display_name": "pkamb", "link": "https://stackoverflow.com/users/1265393/pkamb"}, "edited": false, "score": 0, "creation_date": 1548437476, "post_id": 54319209, "comment_id": 95554515, "body": "I found a hint in the ARC doc that this might be happening, but I&#39;m uncertain. I&#39;ll take another look at the assembler output and see if I can figure anything out."}], "tags": [], "owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "is_accepted": false, "score": 3, "last_activity_date": 1548210490, "creation_date": 1548210490, "answer_id": 54319209, "question_id": 54318565, "link": "https://stackoverflow.com/questions/54318565/behavior-of-objective-c-enum-exhaustive-switch-without-a-default-case/54319209#54319209", "title": "Behavior of Objective-C enum &quot;exhaustive&quot; switch without a default case", "body": "<p><strong><em>TL;DR</em></strong>, if none of the cases match, the function does return control to the caller, but the return value is <strong>undefined</strong>.</p>\n\n<p>The C/ObjC <code>return</code> statement fundamentally does two things. It causes its value to be put into a specific place, so that the caller knows where to look for it. (The place being defined by the platform/language ABI.) Then it moves control back to the calling function (by popping an address off the stack and jumping to it).</p>\n\n<p>In this case, control is going to walk right past the end of the <code>switch</code>, and no <code>return</code> statment will be executed. The compiler <em>does</em>, however, emit a jump for the end of the method.</p>\n\n<p>(In fact -- I'm not great at reading assembler, but -- the debug-annotated assembler that I see Xcode 10.1 creating for your code funnels all the switch cases to a single exit point for the method. And that exit point is <em>also</em> reached if none of the case comparisons succeed.)</p>\n\n<p>But we get to that jump without having put any value into the return register, which means that it's the same as any other uninitialized value -- garbage. The fact that you're reliably getting <code>nil</code> is likely due to either or both of the simplicity of your test program and building in a debug configuration.</p>\n"}], "owner": {"reputation": 26297, "user_id": 1265393, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2cfb51063c4565abe1d7b308f262e31?s=128&d=identicon&r=PG&f=1", "display_name": "pkamb", "link": "https://stackoverflow.com/users/1265393/pkamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548575455, "creation_date": 1548204950, "last_edit_date": 1548575455, "question_id": 54318565, "link": "https://stackoverflow.com/questions/54318565/behavior-of-objective-c-enum-exhaustive-switch-without-a-default-case", "title": "Behavior of Objective-C enum &quot;exhaustive&quot; switch without a default case", "body": "<p>In Swift, the <code>init(rawValue:)</code> system ensures that casting an <code>Int</code> to an enum either results in a valid enum case or <code>nil</code>.</p>\n\n<p>There is no such safety in Objective-C, where an invalid enum member can be created by casting a non-member \"rawValue\".</p>\n\n<pre><code>typedef NS_ENUM(NSInteger, ExampleEnum) {\n    first = 0,\n    second,\n    third,\n};\n\n+ (NSString *)stringForCase:(ExampleEnum)enumCase {\n    switch (enumCase) {\n        case first:  return @\"first\";\n        case second: return @\"second\";\n        case third:  return @\"third\";\n    }\n}\n\n+ (void)testEnum {\n    ExampleEnum invalidCase = (ExampleEnum)3; // this \"rawValue\" is out of bounds\n    NSString *string = [self stringForCase:invalidCase]; // nil\n}\n</code></pre>\n\n<p>When switching on an enum, the compiler will warn you if an enum case is not handled:</p>\n\n<blockquote>\n  <p>Enumeration value 'third' not handled in switch</p>\n</blockquote>\n\n<p>But once all cases have been handled, there is no similar warning that a \"default\" case is still possible for invalid members of the enum.</p>\n\n<p>What is the behavior in such a situation? The NSString method seems to return <code>nil</code>, and no crash is observed. But there is no <code>return</code> from that method. Is a <code>return nil</code> generated automatically, and under what circumstances?</p>\n\n<p>Note that code statements after the \"exhaustive\" switch do <em>not</em> result in the warning that would normally be generated:</p>\n\n<blockquote>\n  <p>Code will never be executed</p>\n</blockquote>\n"}, {"tags": ["c", "hex"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548201551, "post_id": 54318092, "comment_id": 95456167, "body": "Beware endianess when doing this - different architectures can give different and surprising answers."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1548201990, "post_id": 54318092, "comment_id": 95456303, "body": "@MichaelDorgan Aren&#39;t bit operators endianness proof?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548202249, "post_id": 54318092, "comment_id": 95456365, "body": "Sure, but the location of the high and low bytes in a word after your bit-wise operators most assuredly is not."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548202730, "post_id": 54318092, "comment_id": 95456479, "body": "@MichaelDorgan But how would this effect his code? He is not directly accessing a byte of a word in the memory. For example how could the endianness effect the value of <code>new</code>? I know that it may look different in memory but the value should be the same."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548203130, "post_id": 54318092, "comment_id": 95456573, "body": "Ok, I think you may be right for this case.  Worth the mention and maybe even a quick peek at that printf() output though."}], "answers": [{"tags": [], "owner": {"reputation": 2858, "user_id": 2989920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9719347c255c023c7ebdb2069e1d9b5f?s=128&d=identicon&r=PG", "display_name": "macfij", "link": "https://stackoverflow.com/users/2989920/macfij"}, "is_accepted": true, "score": 2, "last_activity_date": 1548201314, "creation_date": 1548201314, "answer_id": 54318149, "question_id": 54318092, "link": "https://stackoverflow.com/questions/54318092/concatenating-hex-bytes-in-c/54318149#54318149", "title": "Concatenating hex bytes in C", "body": "<p>It's not really clear to me what you want to achieve but from what you're expecting my guess is that you just need to shift the <code>ne</code> by 8 bits, so:</p>\n\n<p><code>new = (one&lt;&lt;24) | (two&lt;&lt;16) | (ne&lt;&lt;8) | (four) ;</code></p>\n"}], "owner": {"reputation": 43, "user_id": 8772493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/470809a23fbd46f2904b865c422d0abb?s=128&d=identicon&r=PG&f=1", "display_name": "AngusOld", "link": "https://stackoverflow.com/users/8772493/angusold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 54318149, "answer_count": 1, "score": -1, "last_activity_date": 1548201314, "creation_date": 1548200913, "question_id": 54318092, "link": "https://stackoverflow.com/questions/54318092/concatenating-hex-bytes-in-c", "title": "Concatenating hex bytes in C", "body": "<p>I am trying to concatenate 4 hex bytes together and am running into some trouble. </p>\n\n<p>I have a 32 bit number represented as 4 hex bytes (<code>x</code>). I have another 4 bit number I taking the 2's complement as (<code>twos_complement</code>) and then turning that into a hex representation (<code>ne</code>). THEN I want to sub the single byte (<code>ne</code>) in as the third byte of the original 32 bit number (<code>x</code>). Here is what I have so far: </p>\n\n<pre><code>unsigned replace_byte(unsigned x, unsigned char b) {\n    unsigned new;\n    unsigned int twos_complement;\n    twos_complement = (~b) +1;\n\nunsigned int ne = (twos_complement &amp; 0xff);\nunsigned int one = (x &gt;&gt; 24) &amp; 0xff;\nunsigned int two = (x &gt;&gt; 16) &amp; 0xff;\nunsigned int three = (x &gt;&gt; 8) &amp; 0xff;\nunsigned int four = x &amp; 0xff;\nprintf(\"one 0x%x, two 0x%x, three 0x%x, four 0x%x\\n\",one, two, three, four);\n\nnew = (one&lt;&lt;24) | (two&lt;&lt;16) | (ne) | (four) ;\nprintf(\"new 0x%x\", new);}\n</code></pre>\n\n<p>When I enter 11123243336 for <code>i</code> and 3 as <code>b</code>, I get my hex values as <code>i = 0x96ff3948</code> and <code>b = 0xfffffffd</code>. When I run this, I get <code>new</code> as <code>0x96ff00fd</code> when im expecting <code>0x96fffd48</code>.\nAny help is appreciated!  </p>\n"}, {"tags": ["c", "string", "struct"], "comments": [{"owner": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548199163, "post_id": 54317756, "comment_id": 95455510, "body": "Note that <code>NULL</code> and <code>\\0</code> are conceptually different. <code>NULL</code> indicates that an address is unset, and <code>\\0</code> indicates the end of a c string, and is called the &quot;null terminator&quot;."}, {"owner": {"reputation": 227, "user_id": 9658580, "user_type": "registered", "profile_image": "https://graph.facebook.com/2236508923032745/picture?type=large", "display_name": "Alexander Voliotis", "link": "https://stackoverflow.com/users/9658580/alexander-voliotis"}, "reply_to_user": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548199594, "post_id": 54317756, "comment_id": 95455633, "body": "@okovko Does that mean that all arrays are by default &lt;code&gt;NULL&lt;/code&gt; if they have no initial values?"}, {"owner": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548199822, "post_id": 54317756, "comment_id": 95455695, "body": "No. Any uninitialized value in C and C++ has an undefined value - it can be anything. Typically, it will be zero when your program begins running, and after it has executed for a while, it&#39;ll be values that you&#39;ve used all over your code."}], "answers": [{"tags": [], "owner": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "is_accepted": false, "score": 1, "last_activity_date": 1548199642, "creation_date": 1548199642, "answer_id": 54317942, "question_id": 54317756, "link": "https://stackoverflow.com/questions/54317756/non-null-user-input/54317942#54317942", "title": "Non-NULL User input", "body": "<p><code>fgets</code> reads until it encounters <code>EOF</code>, <code>\\n</code> or <code>N-1</code> bytes have been read. So if a user of your program presses enter, it will read <code>\\n</code> and stop. Which means that <code>pBook1-&gt;name[0] == '\\n'</code>. That is why your check for equality with <code>\"\"</code> fails and why <code>pBook1-&gt;name[0] == '\\0'</code> fails.</p>\n\n<p>See this <a href=\"https://repl.it/repls/UnfoldedTransparentFlash\" rel=\"nofollow noreferrer\">example</a>.</p>\n\n<p>That means that you need to check for <code>\\n</code> and <code>\\0</code> in case the user entered <code>Ctrl-D</code> which is how you enter <code>EOF</code> on *nix systems.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9737353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-u7oQgZeFpxc/AAAAAAAAAAI/AAAAAAAABRQ/WOYrQzXRIhk/photo.jpg?sz=128", "display_name": "Nael Agliev", "link": "https://stackoverflow.com/users/9737353/nael-agliev"}, "is_accepted": false, "score": 0, "last_activity_date": 1548199706, "creation_date": 1548199706, "answer_id": 54317954, "question_id": 54317756, "link": "https://stackoverflow.com/questions/54317756/non-null-user-input/54317954#54317954", "title": "Non-NULL User input", "body": "<p>When you press enter <code>pBook1-&gt;name[0]</code> will become <code>\\n</code>. You can use some functions as <code>strlen</code> to be sure there something in name.</p>\n"}], "owner": {"reputation": 227, "user_id": 9658580, "user_type": "registered", "profile_image": "https://graph.facebook.com/2236508923032745/picture?type=large", "display_name": "Alexander Voliotis", "link": "https://stackoverflow.com/users/9658580/alexander-voliotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1548199706, "creation_date": 1548198448, "last_edit_date": 1548199394, "question_id": 54317756, "link": "https://stackoverflow.com/questions/54317756/non-null-user-input", "title": "Non-NULL User input", "body": "<blockquote>\n  <p>I'm trying to understand the whole concept of pointers, structures, etc so I've created a program that gets user input for two different books and then swaps the info of the two books. I had no trouble doing that, however, a problem arose- when I pressed <em>enter</em> the name of the book would be plain blank and at the output I would, of course, see a blank space. <strong>My problem is, how am I able to limit the user to input any letter (A-Z, a-z) and not blank space?</strong></p>\n</blockquote>\n\n<p>A string of characters when input to an array, they get saved in consecutive memory addresses. We also know that 'NULL' is represented as '\\0' in arrays. </p>\n\n<p>With the above things in mind, I performed multiple tests in which, <strong>ALL</strong> of them failed to yield the desired results. </p>\n\n<p>Below are some attempts that I made.</p>\n\n<p><strong><em>1st Attempt</em></strong></p>\n\n<pre><code>while (pBook1-&gt;name[0] == '\\0')\n{\n    printf(\"\\n Please enter a valid book name: \");\n    fgets(pBook1-&gt;name, MAX, stdin);\n}\n</code></pre>\n\n<p><strong><em>2nd Attempt</em></strong></p>\n\n<pre><code>while (strcmp(pBook1-&gt;name, \"\"))\n{\n    printf(\"\\n Please enter a valid book name: \");\n    fgets(pBook1-&gt;name, MAX, stdin);\n}\n</code></pre>\n\n<p>Also, consider the following code as the <strong>source code</strong> of my program: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define MAX 50\n\nstruct Books\n{\n    char name[MAX];\n    int ID;\n    float price;\n};\n\nvoid swap(struct Books *, struct Books *);\n\nvoid main()\n{\n\n    struct Books Book1, Book2, *pBook1, *pBook2;\n\n    pBook1 = &amp;Book1;\n    pBook2 = &amp;Book2;\n\n    // Input for the 1st book\n    printf(\"\\n 1st Book \\n ------------------------------\");\n    printf(\"\\n Enter the name: \");\n    fgets(pBook1-&gt;name, MAX, stdin);\n    while (pBook1-&gt;name[0] == '\\0')\n    {\n        printf(\"\\n Please enter a valid book name: \");\n        fgets(pBook1-&gt;name, MAX, stdin);\n    }\n    printf(\"\\n Enter the ID: \");\n    scanf(\"%d\", &amp;pBook1-&gt;ID);\n    printf(\"\\n Enter the price: \");\n    scanf(\"%f\", &amp;pBook1-&gt;price);\n\n    // Input for the 2nd book\n    printf(\"\\n 2nd Book \\n ------------------------------\");\n    printf(\"\\n Enter the name: \");\n    fgets(pBook2-&gt;name, MAX, stdin);\n    while (pBook2-&gt;name[0] == '\\0')\n    {\n        printf(\"\\n Please enter a valid book name: \");\n        fgets(pBook2-&gt;name, MAX, stdin);\n    }\n    printf(\"\\n Enter the ID: \");\n    scanf(\"%d\", &amp;pBook2-&gt;ID);\n    printf(\"\\n Enter the price: \");\n    scanf(\"%f\", &amp;pBook2-&gt;price);\n\n    printf(\"\\n Let's swap the info of the two books...\");\n\n    swap(pBook1, pBook2);\n\n    printf(\"\\n The info of the two books is now:\");\n\n    printf(\"\\n------------------------------ \\n 1st Book \\n ------------------------------------\");\n    printf(\"\\n Name \\t\\t ID \\t Price \\n %s \\t\\t %d \\t %f\", pBook1-&gt;name, pBook1-&gt;ID, pBook1-&gt;price);\n\n    printf(\"\\n------------------------------ \\n 2nd Book \\n ------------------------------------\");\n    printf(\"Name \\t\\t ID \\t Price \\n %s \\t\\t %d \\t %f\", pBook2-&gt;name, pBook2-&gt;ID, pBook2-&gt;price);\n}\n\n void swap(struct Books *pB1, struct Books *pB2)\n {\n   char temp[MAX];\n\n   strcpy(temp, pB1-&gt;name);\n   strcpy(pB1-&gt;name, pB2-&gt;name);\n   strcpy(pB2-&gt;name, temp);\n\n   int tempID = pB1-&gt;ID, tempPrice = pB1-&gt;price;\n\n   pB1-&gt;ID = pB2-&gt;ID;\n   pB2-&gt;ID = tempID;\n\n   pB1-&gt;price = pB2-&gt;price;\n   pB2-&gt;price = tempPrice;\n }\n</code></pre>\n"}, {"tags": ["c", "stm32", "dma", "stm32f4"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1548206623, "post_id": 54317419, "comment_id": 95457266, "body": "The <code>DMA_Cmd(DMA2_Stream1, ENABLE);</code> you do above your <code>while</code> loop seems superfluous because you immediately do one inside the loop. Harmless, perhaps. If necessary, I&#39;d expect to move it into the loop as well."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1548207453, "post_id": 54317419, "comment_id": 95457416, "body": "Maybe you should print out the value returned by <code>DMA_GetFlagStatus</code> to see what changes (e.g. keep the previous value and print if/when it changes). If clearing the flags is valid, would moving this around might help. You could also get the status after the clear and see what it does. You could also remove some of the flags you clear to see if it has an effect"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1548207533, "post_id": 54317419, "comment_id": 95457430, "body": "Do you have to set/clear anything in the GPIO controller in addition to the DMA controller?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1548207716, "post_id": 54317419, "comment_id": 95457476, "body": "BTW, at the top of the loop you&#39;re enabling stream 1. And monitoring flags [and clearing them] in stream 1. At the bottom, you&#39;re disabling stream 2. But, you never enable stream 2 again. Could this be a typo that is causing the problem? That is, did you really mean to use stream 1 throughout this loop?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548285078, "post_id": 54317419, "comment_id": 95491369, "body": "Think once,twice, thrice, and removed my answer and comments."}, {"owner": {"reputation": 1084, "user_id": 3052687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2bc9457ad57919f5ab4abc0007323f1?s=128&d=identicon&r=PG&f=1", "display_name": "HelpingHand", "link": "https://stackoverflow.com/users/3052687/helpinghand"}, "edited": false, "score": 0, "creation_date": 1590855470, "post_id": 54317419, "comment_id": 109841738, "body": "No comment or answer from OP to clarify open questions (comments from Craig Estey) for more than a year now - let&#39;s vote close this abandoned thread..."}], "owner": {"reputation": 31, "user_id": 10952669, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzW2VSDRUkE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaj_7UAFKApRnw0ZHB0RfERHkcYYQ/mo/photo.jpg?sz=128", "display_name": "dlug96", "link": "https://stackoverflow.com/users/10952669/dlug96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1548202156, "creation_date": 1548196312, "last_edit_date": 1548201955, "question_id": 54317419, "link": "https://stackoverflow.com/questions/54317419/dma-transfer-running-only-once", "title": "DMA transfer running only once", "body": "<p>I have Timer configured in Input Capture Mode and DMA2 Channel 6 Stream 1 configured to transfer data from GPIOC to frame_buffer. It works, but only once - after first use there was data and in next transfers there where only zeros. To have it working again I have to load another project and then load this one. Seems like a problem with flags - previously I had an DMA interrupt and program could not get out of it</p>\n\n<p>I'm using STM32F411 Discovery Board</p>\n\n<p>I'm probably doing something wrong with the flags, but I can't find where the problem is</p>\n\n<p>Here's my code:</p>\n\n<p>DMA and Timer config:</p>\n\n<pre><code>void TimerAndDMAConfigure(void){\n\n  GPIO_InitTypeDef gpioPCLK;\n  TIM_ICInitTypeDef icTIM1;\n  DMA_InitTypeDef dmaPerToMem;\n\n  NVIC_InitTypeDef nvic;\n\n  //GPIOE config\n  RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOE, ENABLE);\n\n  gpioPCLK.GPIO_Mode = GPIO_Mode_AF;\n  gpioPCLK.GPIO_OType = GPIO_OType_OD;\n  gpioPCLK.GPIO_Pin = GPIO_Pin_9;\n  gpioPCLK.GPIO_PuPd = GPIO_PuPd_NOPULL;\n  gpioPCLK.GPIO_Speed = GPIO_High_Speed;\n  GPIO_Init(GPIOE, &amp;gpioPCLK);\n  GPIO_PinAFConfig(GPIOE, GPIO_PinSource9, GPIO_AF_TIM1);\n\n\n  //Timer config\n  RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1, ENABLE);\n\n  icTIM1.TIM_Channel = TIM_Channel_1;\n  icTIM1.TIM_ICPolarity = TIM_ICPolarity_Rising;\n  icTIM1.TIM_ICSelection = TIM_ICSelection_DirectTI;\n  icTIM1.TIM_ICPrescaler = TIM_ICPSC_DIV1;\n  icTIM1.TIM_ICFilter = 0;\n  TIM_ICInit(TIM1, &amp;icTIM1);\n\n  TIM_CtrlPWMOutputs(TIM1, ENABLE);\n  TIM_SelectOutputTrigger(TIM8 , TIM_TRGOSource_Reset);\n  TIM_Cmd(TIM1, ENABLE);\n  TIM_DMAConfig(TIM1, TIM_DMABase_CCR1, TIM_DMABurstLength_1Transfer);\n  TIM_DMACmd(TIM1, TIM_DMA_CC1, ENABLE);\n\n\n  //DMA config - peripheral to memory\n  //DMA2 Stream 1 Channel 6\n  RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_DMA2, ENABLE);\n\n  DMA_DeInit(DMA2_Stream1);\n\n  dmaPerToMem.DMA_BufferSize = 174*2;\n  dmaPerToMem.DMA_Channel = DMA_Channel_6;\n  dmaPerToMem.DMA_DIR=DMA_DIR_PeripheralToMemory;\n  dmaPerToMem.DMA_FIFOMode = DMA_FIFOMode_Disable;\n  dmaPerToMem.DMA_FIFOThreshold = DMA_FIFOThreshold_Full;\n  dmaPerToMem.DMA_Memory0BaseAddr = (uint32_t) frame_buffer;\n  dmaPerToMem.DMA_MemoryBurst = DMA_MemoryBurst_Single;\n  dmaPerToMem.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;\n  dmaPerToMem.DMA_MemoryInc = DMA_MemoryInc_Enable;\n  dmaPerToMem.DMA_Mode = DMA_Mode_Normal;\n  dmaPerToMem.DMA_PeripheralBaseAddr = (uint32_t) (&amp;GPIOC-&gt;IDR);\n  dmaPerToMem.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;\n  dmaPerToMem.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;\n  dmaPerToMem.DMA_PeripheralInc = DMA_PeripheralInc_Disable;\n  dmaPerToMem.DMA_Priority = DMA_Priority_Medium;\n  DMA_Init(DMA2_Stream1, &amp;dmaPerToMem);\n\n  DMA_ITConfig(DMA2_Stream1, DMA_IT_TC, ENABLE);\n  //DMA_Cmd(DMA2_Stream1, ENABLE);\n  //DMA2 - Interrupt\n  //nvic.NVIC_IRQChannel = DMA2_Stream1_IRQn;\n  //nvic.NVIC_IRQChannelCmd = ENABLE;\n  //nvic.NVIC_IRQChannelPreemptionPriority = 10;\n  //nvic.NVIC_IRQChannelSubPriority = 10;\n  //NVIC_Init(&amp;nvic);\n}\n</code></pre>\n\n<p>And main loop:</p>\n\n<pre><code>int main(void)\n{\n\n  SystemInit();\n\n  uint8_t value = 10;\n  uint8_t next = 0;\n  uint8_t k = 0;\n\n\n  TimerAndDMAConfigure();\n\n  DMA_Cmd(DMA2_Stream2, DISABLE);\n  while (DMA2_Stream2-&gt;CR &amp; DMA_SxCR_EN);\n\n  DMA_Cmd(DMA2_Stream1, ENABLE);\n  while(1){\n    DMA_Cmd(DMA2_Stream1, ENABLE);\n    while(DMA_GetFlagStatus(DMA2_Stream1, DMA_FLAG_TCIF1) == RESET){\n      continue;\n    }\n    for(int i = k; i&lt;k + 10; i++){\n      value = frame_buffer[i];\n      next = value;\n    }\n    k+=1;\n    if(k==18)k=0;\n    DMA_ClearFlag(DMA2_Stream1, DMA_FLAG_FEIF1|DMA_FLAG_DMEIF1|DMA_FLAG_TEIF1|DMA_FLAG_HTIF1|DMA_FLAG_TCIF1);\n\n    DMA_Cmd(DMA2_Stream2, DISABLE);\n    while (DMA2_Stream2-&gt;CR &amp; DMA_SxCR_EN);\n    Delay(10);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "process", "fork", "wait"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548194427, "post_id": 54317013, "comment_id": 95454061, "body": "After you fork, you need to check if the current process is parent or child. And to the work accordingly. Here you are spanning the whole tree where children have their own children."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1548194635, "post_id": 54317013, "comment_id": 95454127, "body": "You&#39;re forking lots more than 5 times. After the first fork, both the parent and child continue the <code>for</code> loop. The parent forks 5 times, the first child forks 4 times, the second child forks 3 times, and so on. You&#39;re forgetting that the child process runs all the same code, so it continues the <code>for</code> loop that the parent started."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1548197448, "post_id": 54317013, "comment_id": 95455017, "body": "Don&#39;t use <code>printf</code> to print error messages.  Either use <code>perror</code> or <code>fprintf</code> and explicitly write to stderr."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548208699, "post_id": 54317013, "comment_id": 95457671, "body": "See also <a href=\"https://stackoverflow.com/questions/53734028/synchronising-n-sibling-processes-after-fork\">Synchronizing N sibling processes after <code>fork()</code></a>  In this context, you&#39;d have the children all wait for the parent to let them run, and the parent would write all the child PIDs out before letting them run."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1548194667, "creation_date": 1548194667, "answer_id": 54317139, "question_id": 54317013, "link": "https://stackoverflow.com/questions/54317013/how-can-i-list-all-the-child-pids-before-passing-them-control/54317139#54317139", "title": "How can I list all the child pids before passing them control?", "body": "<p>You seem to completely miss the point of <code>fork</code>. It is a very special function - it returns either <code>0</code> or non-negative integer, or -1. The first thing you need to do after the fork is to check the return value.</p>\n\n<p>If it is non-negative, that means, you are executing in a parent and you can continue your parental thing. The return value is a PID of a child process just spawn.</p>\n\n<p>If it is <code>-1</code>, there was an error (very weird case), and if it is 0, it means you are now executing in a child process, and you should do something else - something which child is expected to do.</p>\n\n<p>Any code where result of <code>fork</code> is not checked immediately with branch for parent a child process is always a buggy code.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8780642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b002442d6c42cad43a707ee7d1218f?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Gates", "link": "https://stackoverflow.com/users/8780642/sarah-gates"}, "edited": false, "score": 0, "creation_date": 1548198528, "post_id": 54317586, "comment_id": 95455337, "body": "Thank you! I&#39;ll try to use that!"}], "tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": true, "score": 1, "last_activity_date": 1548197432, "creation_date": 1548197432, "answer_id": 54317586, "question_id": 54317013, "link": "https://stackoverflow.com/questions/54317013/how-can-i-list-all-the-child-pids-before-passing-them-control/54317586#54317586", "title": "How can I list all the child pids before passing them control?", "body": "<p>I don't really want to complete your assignment for you, but I would suggest starting with something similar to this:</p>\n\n<pre><code>void child_func(int readfd) {\n    // read from readfd and do whatever\n}\n\nvoid do_fork(pid_t *childpid, int *pipefd) {\n    int pipefds[2];\n    pid_t pid;\n    pipe(pipefds, 0);\n    if ((pid = fork()) == 0) {\n        child_func(pipefds[0]);\n        exit(0);\n    } else {\n        *childpid = pid;\n        *pipefd = pipefds[1];\n    }\n}\n\nint main() {\n    int i;\n    pid_t children[5];\n    int pipes[5];\n    for (i = 0; i &lt; 5; ++i) {\n        do_fork(&amp;children[i], &amp;pipes[i]);\n    }\n    // whatever\n    return 0;\n}\n</code></pre>\n\n<p>If your child_func reads from the file descriptor at the beginning, it will block until the parent writes to the other 5 descriptors.  That would give you a chance to print out the pids or whatever and then tell them what to do.  Look at the man pages for \"pipe\" and \"fork\" if you don't understand this completely.  I hope that is enough to get you started.</p>\n"}], "owner": {"reputation": 23, "user_id": 8780642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b002442d6c42cad43a707ee7d1218f?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Gates", "link": "https://stackoverflow.com/users/8780642/sarah-gates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 54317586, "answer_count": 2, "score": 2, "last_activity_date": 1548197432, "creation_date": 1548194035, "last_edit_date": 1548196985, "question_id": 54317013, "link": "https://stackoverflow.com/questions/54317013/how-can-i-list-all-the-child-pids-before-passing-them-control", "title": "How can I list all the child pids before passing them control?", "body": "<p>I have an assignment where the professor asks for the parent process to print the process id of each child process before passing control to the child process. </p>\n\n<p>I tried doing something like this:</p>\n\n<pre><code>pid_t cpids[5]; //I want to create 5 child processes\nint n = 0;\n\ndo {\n    cpids[n++] = fork();\n} while(cpids[n] &gt; 0 &amp;&amp; n &lt; 5) ; //This doesn't fork 5 times\n\n//print all the child pids\nprintf(\"The child processes are: %d, %d, %d, %d, %d\\n\", cpids[0]..);\n//(I know this would be printed multiple times, I'm just trying to explain what I need)\n\n//then after printing the ids, tell child processes what to do\nfor(int i = 0; i &lt; 5; i++) {\n\n    //error\n    if(cpids[i] &lt; 0) {\n        printf(\"There was an error with fork()\\n\");\n        exit(1);\n    }\n\n    //child process\n    else if(cpids[i] == 0) {\n    //...reads from pipe sent from parent process\n    }\n\n    //parent process\n    //sends message through pipe to child process\n    //waits for child to terminate\n}\n</code></pre>\n\n<p>So this definitely didn't work :). Is there a simpler way to fork processes without immediately giving it instructions? Thanks!</p>\n\n<p>//UPDATE</p>\n\n<p>So I know I'm doing the fork() thing wrong. This was my original code:</p>\n\n<pre><code>for(int i = 0; i &lt; 5; i++) {\n    //error\n    if((pid = fork()) &lt; 0) {\n        printf(\"There was an error with fork()\\n\");\n        exit(1);\n    }\n\n    //child process\n    else if(pid == 0) {\n        pid = getpid();\n        close(fd[i][1]);\n\n        //read starting position from parent process\n        len = read(fd[i][0], &amp;fpos, sizeof(fpos));\n\n        if(len &gt; 0) {\n            doChild(numArray, fpos, i);\n        }\n\n        printf(\"id: %d\\n\", pid);\n        _exit(1);\n    } \n\n    //parent process\n    else {\n        close(fd[i][0]);\n        fpos = (SIZE/NUM_CHILD) * i;\n        write(fd[i][1], &amp;fpos, sizeof(fpos));\n\n        if ( waitpid(-getpid(), &amp;status, 0) != -1 ) {\n            if ( WIFEXITED(status) ) {\n                int returned = WEXITSTATUS(status);\n                printf(\"child id: %d ended with status %d\\n\\n\", pid, returned);\n            }\n        }\n\n        else {\n            perror(\"waitpid() failed\");\n            exit(EXIT_FAILURE);\n        }\n    }\n\n}\n</code></pre>\n\n<p>However, the parent process has to wait for the child process to terminate before another child process can start. There's no way I can get the child pids before they all start running. I'm basically looking for a way to create all the child processes I need, maybe have them sleep right after they're created, then print out all of their pids from the parent process before they continue.</p>\n"}, {"tags": ["c", "esp32"], "answers": [{"tags": [], "owner": {"reputation": 736, "user_id": 1241224, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1289918063/picture?type=large", "display_name": "Mark McGinty", "link": "https://stackoverflow.com/users/1241224/mark-mcginty"}, "is_accepted": true, "score": 1, "last_activity_date": 1548686481, "creation_date": 1548686481, "answer_id": 54404321, "question_id": 54316980, "link": "https://stackoverflow.com/questions/54316980/esp32-how-to-reset-gpio-pins-used-with-pcnt-so-they-can-also-be-used-for-ext1-w/54404321#54404321", "title": "ESP32 how to reset GPIO pins used with PCNT, so they can also be used for EXT1 wake up from deep sleep?", "body": "<p>The answer is, set both *_gpio_num members of pcnt_config_t to PCNT_PIN_NOT_USED and call pcnt_unit_config again:</p>\n\n<pre><code>pcnt_config_t pcnt_config = {\n    .pulse_gpio_num = PCNT_PIN_NOT_USED,\n    .ctrl_gpio_num = PCNT_PIN_NOT_USED,\n    .channel = PCNT_CHANNEL_0;\n}\npcnt_unit_config(&amp;pcnt_config);\n</code></pre>\n"}], "owner": {"reputation": 736, "user_id": 1241224, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1289918063/picture?type=large", "display_name": "Mark McGinty", "link": "https://stackoverflow.com/users/1241224/mark-mcginty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 54404321, "answer_count": 1, "score": 1, "last_activity_date": 1548686481, "creation_date": 1548193906, "question_id": 54316980, "link": "https://stackoverflow.com/questions/54316980/esp32-how-to-reset-gpio-pins-used-with-pcnt-so-they-can-also-be-used-for-ext1-w", "title": "ESP32 how to reset GPIO pins used with PCNT, so they can also be used for EXT1 wake up from deep sleep?", "body": "<p>I configure 4 gpio pins as pulse counters to read Hall-effect liquid flow sensors, which works fine, but when I try to use those same pins to wake up from a deep sleep, sleep ends immediately.  If I don't configure the pins for PCNT, deep sleep works as expected.</p>\n\n<p>I even went so far as setting a flag in RTC memory so that it sleeps for as long as  5 seconds, wakes up and does not configure PCNT before trying to go back to sleep.  It still wakes from the second sleep immediately, so whatever it is about those pins is retained across deep sleep.</p>\n\n<p>Is there a way to restore the default state of those pins without resetting the entire device?</p>\n"}, {"tags": ["c", "x11", "xcb"], "comments": [{"owner": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548196328, "post_id": 54316515, "comment_id": 95454645, "body": "It&#39;s kind of funny to switch to a library with a different API and vague documentation when nothing was broken in the first place :P"}, {"owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "reply_to_user": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548198056, "post_id": 54316515, "comment_id": 95455207, "body": "The old project was built using a toolkit that is now way out of date, and the Xlib code did have some small problems like I said.  It seems that using XCB will likely result in more efficient code.  Xlib isn&#39;t very well documented, either, to be quite honest.  If I understand correctly, the synchronous Xlib calls are all implemented now as wrappers for the asynchronous XCB functions.  The listing code certainly looks better with xcb, but finding the proper requests for restoring and raising windows has been more difficult than I expected."}, {"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1548377421, "post_id": 54316515, "comment_id": 95529854, "body": "Just a hunch, have you tried moving the map_window above configure_window?"}, {"owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "reply_to_user": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 1, "creation_date": 1548380513, "post_id": 54316515, "comment_id": 95530484, "body": "@visibleman I did that with the Xlib code and it does work better that way, but the XCB version isn&#39;t causing shaded/iconified windows to be mapped again, mapped windows to restack, or anything at all from what I can tell."}], "answers": [{"tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": true, "score": 3, "last_activity_date": 1548532996, "creation_date": 1548532996, "answer_id": 54382231, "question_id": 54316515, "link": "https://stackoverflow.com/questions/54316515/x11-how-to-restore-raise-another-application-window-using-xcb/54382231#54382231", "title": "X11 How to restore/raise another application window using xcb?", "body": "<p>It seems that the code that I posted at the end of my question was correct, aside from atom_cache having a small bug in it.  I also reordered the sequence that I map the window, raise the window, and make it the active window.  I'm thinking that maybe I should post these solutions on github as xcb examples.  I've written a couple of these small cli utilities for interacting with the xserver and window manager like this.  Maybe they will be of some use to others...</p>\n\n<p>xcb_switchto.c:</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;xcb/xcb.h&gt;\n\nint main(int argc, char **argv) {\n    xcb_connection_t *connection;\n    xcb_window_t rootwin, window;\n    xcb_intern_atom_cookie_t atom_cookie;\n    xcb_intern_atom_reply_t *atom_reply;\n    xcb_atom_t net_active_window;\n    xcb_query_tree_cookie_t qtree_cookie;\n    xcb_query_tree_reply_t *qtree_reply;\n    xcb_void_cookie_t void_cookie;\n    xcb_client_message_event_t client_message_event;\n    xcb_generic_error_t *err;\n\n    if (argc &lt; 2)\n    {\n        printf(\"usage: %s windowid\\n\", argv[0]);\n        return EXIT_FAILURE;\n    }\n\n    window = (xcb_window_t)strtoul(argv[1], NULL, 0);\n    printf(\"switch to window: 0x%x\\n\", window);\n\n    // connect to X server\n    connection = xcb_connect(NULL, NULL);\n\n    // get _NET_ACTIVE_WINDOW atom from X server\n    atom_cookie = xcb_intern_atom(connection, 0, 18, \"_NET_ACTIVE_WINDOW\");\n    if (atom_reply = xcb_intern_atom_reply(connection, atom_cookie, &amp;err)) {\n        net_active_window = atom_reply-&gt;atom;\n        free(atom_reply);\n    } else if (err) {\n        printf(\"xcb_intern_atom failed with error code %d\\n\", err-&gt;error_code);\n        return EXIT_FAILURE;\n    }\n\n    // get the window's root window.  can there really be more than one?\n    qtree_cookie = xcb_query_tree(connection, window);\n    if (qtree_reply = xcb_query_tree_reply(connection, qtree_cookie, &amp;err)) {\n        rootwin = qtree_reply-&gt;root;\n    } else if (err) {\n        printf(\"xcb_query_tree failed with error code %d\\n\", err-&gt;error_code);\n        return EXIT_FAILURE;\n    }\n\n    // map the window first\n    xcb_map_window(connection, window);\n\n    // now raise (restack) the window\n    uint32_t values[] = { XCB_STACK_MODE_ABOVE };\n    xcb_configure_window(connection, window, XCB_CONFIG_WINDOW_STACK_MODE, values);\n\n    // and, finally, make it the active window\n    client_message_event.response_type = XCB_CLIENT_MESSAGE;\n    client_message_event.format = 32;\n    client_message_event.sequence = 0;\n    client_message_event.window = window;\n    client_message_event.type = net_active_window;\n    client_message_event.data.data32[0] = 1UL; // source: 1=application 2=pager\n    client_message_event.data.data32[1] = 1UL; // timestamp\n    client_message_event.data.data32[2] = 0UL; // currently active window (none)\n    client_message_event.data.data32[3] = 0UL;\n    client_message_event.data.data32[4] = 0UL;\n    void_cookie = xcb_send_event(connection, 1, rootwin, XCB_EVENT_MASK_SUBSTRUCTURE_REDIRECT, (const char *)&amp;client_message_event);\n\n    // probably unnecessary\n    xcb_flush(connection);\n    // close the connection\n    xcb_disconnect(connection);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>There is a slight issue related to using 1 for the timestamp here.  It would probably be better to query the window for _NET_WM_USER_TIME and use that value, as sometimes it gets ignored using 1 every time.  I'm not sure how you could have more than one root window, either, but I still thought it was best to ask the server which root window it's on.  Maybe a non xinerama multi-headed display...  Anyway, problem solved.</p>\n"}], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1295, "favorite_count": 0, "accepted_answer_id": 54382231, "answer_count": 1, "score": 4, "last_activity_date": 1548532996, "creation_date": 1548191593, "last_edit_date": 1548262557, "question_id": 54316515, "link": "https://stackoverflow.com/questions/54316515/x11-how-to-restore-raise-another-application-window-using-xcb", "title": "X11 How to restore/raise another application window using xcb?", "body": "<p>I am writing a window list into my C application that shows all of the top level windows, including shaded, minimized, and on other desktops.  I would like to restore unmapped (minimized) windows, raise the window, and switch to the window's desktop/workspace when one is selected.</p>\n\n<p>I had written something to accomplish this in the past using Xlib.  I used XSendEvent() to send a ClientMessage event of type _NET_ACTIVE_WINDOW followed by XMapRaised() previously, and it worked fairly well, but not perfectly.</p>\n\n<p>I am now rewriting the application and decided to use XCB for the window list code rather than Xlib and hoped to create a better and more efficient implementation.  XCB has no equivalent to XMapRaised() and xcb_map_window() does not seem to work for me.  I've found a fair amount of documentation on creating and configuring new windows but very little that would be of use for implementing a window manager or utility programs like pagers, iconboxes, taskbars, etc.  The generated documentation for XCB is rather vague about what some of the functions actually do as well.  If anyone is aware of additional documentation that would be of value for this, that would be great, too.</p>\n\n<p>EDIT:</p>\n\n<p>I duplicated a portion of the old code that uses Xlib in a small utility program and it does actually do most of what I want and seems to work consistently:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;X11/Xlib.h&gt;\n\nint main(int argc, char **argv) {\n    Display *display = XOpenDisplay(\"\");\n    Window rootwin = XDefaultRootWindow(display);\n    if (argc &lt; 2)\n    {\n        printf(\"usage: %s windowid\\n\", argv[0]);\n        return 0;\n    }\n    Window window = (Window)strtoul(argv[1], NULL, 0);\n    printf(\"switch to window: 0x%lx\\n\", window);\n    Atom ActiveWindowAtom = XInternAtom(display, \"_NET_ACTIVE_WINDOW\", False);\n    XEvent xev;\n    xev.xclient.type = ClientMessage;\n    xev.xclient.window = window;\n    xev.xclient.message_type = ActiveWindowAtom;\n    xev.xclient.format = 32;\n    xev.xclient.data.l[0] = 1U;\n    xev.xclient.data.l[1] = 1U;\n    xev.xclient.data.l[2] = 0U;\n    xev.xclient.data.l[3] = 0U;\n    xev.xclient.data.l[4] = 0U;\n    XSendEvent(display, rootwin, False, SubstructureRedirectMask, &amp;xev);\n    XMapRaised(display, window);\n    XCloseDisplay(display);\n    return 0;\n}\n</code></pre>\n\n<p>...and then I unpacked the libX11 sources and confirmed that it does just wrap the XCB functions, but the wrappers use some libX11 data structures instead of the ones defined in XCB and there are so many macros being used that it's difficult to see exactly what is going on.  This is the XCB equivalent I came up with, and it does not appear to work:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;xcb/xcb.h&gt;\n#include \"atom_cache.h\"\n\nint main(int argc, char **argv) {\n    xcb_connection_t *connection;\n    const xcb_setup_t *setup;\n    xcb_screen_iterator_t screen_iter;\n    xcb_screen_t *screen;\n    xcb_window_t rootwin, window;\n    xcb_void_cookie_t void_cookie;\n    xcb_client_message_event_t client_message_event;\n\n    if (argc &lt; 2)\n    {\n        printf(\"usage: %s windowid\\n\", argv[0]);\n        return 0;\n    }\n\n    window = (xcb_window_t)strtoul(argv[1], NULL, 0);\n    printf(\"switch to window: 0x%x\\n\", window);\n\n    connection = xcb_connect(NULL, NULL);\n    setup = xcb_get_setup(connection);\n    screen_iter = xcb_setup_roots_iterator(setup);\n    screen = screen_iter.data;\n    rootwin = screen-&gt;root;\n\n    // send _net_active_window request\n    client_message_event.response_type = XCB_CLIENT_MESSAGE;\n    client_message_event.format = 32;\n    client_message_event.sequence = 0;\n    client_message_event.window = window;\n    client_message_event.type = get_atom(connection, \"_NET_ACTIVE_WINDOW\");\n    client_message_event.data.data32[0] = 1UL; // source: 1=application 2=pager\n    client_message_event.data.data32[1] = 1UL; // timestamp\n    client_message_event.data.data32[2] = 0UL; // my currently active window?\n    client_message_event.data.data32[3] = 0UL;\n    client_message_event.data.data32[4] = 0UL;\n\n    void_cookie = xcb_send_event(connection, 1, rootwin, XCB_EVENT_MASK_SUBSTRUCTURE_REDIRECT, (const char *)&amp;client_message_event);\n\n    uint32_t values[] = { XCB_STACK_MODE_ABOVE };\n    xcb_configure_window(connection, window, XCB_CONFIG_WINDOW_STACK_MODE, values);\n    xcb_map_window(connection, window);\n\n    xcb_flush(connection);\n    xcb_disconnect(connection);\n    return 0;\n}\n</code></pre>\n\n<p>I'm still trying to figure this out.</p>\n"}, {"tags": ["c", "keylogger"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1548191557, "post_id": 54316493, "comment_id": 95452926, "body": "In <code>fprintf(fp, (const char*) key);</code> you have not provided a format string. Time to read the man page for the <code>printf</code> family of functions? The cast may defeat a compiler warning but the <code>int</code> will still be treated as an address to be dereferenced."}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1548191644, "post_id": 54316493, "comment_id": 95452962, "body": "Why would you convert a char (in int form) to a char*?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1548192187, "post_id": 54316493, "comment_id": 95453187, "body": "<code>fputc(key, fp);</code> That said, that loop is terrible. It&#39;s basically spinning a CPU waiting for a key hit detection."}], "answers": [{"comments": [{"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "reply_to_user": {"reputation": 155, "user_id": 9975119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-St2zj5dcCvQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2fEUnpQECCYXjFPEfzGbyp3Fngvw/mo/photo.jpg?sz=128", "display_name": "Lol Lol", "link": "https://stackoverflow.com/users/9975119/lol-lol"}, "edited": false, "score": 0, "creation_date": 1548192038, "post_id": 54316532, "comment_id": 95453128, "body": "fprintf syntaxe you should provide. the fprintf(the file, the format , and the variable(s)) in my example the file is fp , the format is &quot;%c&quot; which is the character format and then the variable key"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548193820, "post_id": 54316532, "comment_id": 95453814, "body": "It is worth pointing out that you are passing <code>int</code> for a format specifier which is expecting <code>char</code> type to be passed. the reason it works, is because the <code>char</code> variable, if passed, would be promoted to <code>int</code>, so passing <code>int</code> directly does work."}], "tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1548191638, "creation_date": 1548191638, "answer_id": 54316532, "question_id": 54316493, "link": "https://stackoverflow.com/questions/54316493/c-writing-key-from-kbhit-to-a-file-crashes-the-program/54316532#54316532", "title": "C - Writing key from kbhit to a file crashes the program", "body": "<pre><code>  fprintf(fp, (const char*) key);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>  fprintf(fp,\"%c \",key);\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 9975119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-St2zj5dcCvQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2fEUnpQECCYXjFPEfzGbyp3Fngvw/mo/photo.jpg?sz=128", "display_name": "Lol Lol", "link": "https://stackoverflow.com/users/9975119/lol-lol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548191638, "creation_date": 1548191474, "question_id": 54316493, "link": "https://stackoverflow.com/questions/54316493/c-writing-key-from-kbhit-to-a-file-crashes-the-program", "title": "C - Writing key from kbhit to a file crashes the program", "body": "<p>Writing the <code>key</code> value to the file is making the program crash. I know this because I substituted the <code>key</code> value for a normal <code>String</code> and the program worked fine. Why is the <code>key</code> value making the program crash?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main() {\n\n  FILE *fp;\n  fp = fopen(\"C:\\\\Users\\\\Francisco\\\\Documents\\\\C programs\\\\log.txt\", \"w\");\n\n\n  int key;\n\n  while(1) {\n\n    if(_kbhit()) {\n\n     key = _getch();\n\n      fprintf(fp, (const char*) key);\n\n    }\n\n  }\n\n  fclose(fp);\n\n  return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "printf"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10952411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf52c42ac30df64f9a18dff57ce34cb?s=128&d=identicon&r=PG&f=1", "display_name": "Megan Buckner Hickman", "link": "https://stackoverflow.com/users/10952411/megan-buckner-hickman"}, "edited": false, "score": 0, "creation_date": 1548252649, "post_id": 54316651, "comment_id": 95476199, "body": "get int is the first line of code and I started above that the code was inside the main but i did not include the main"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1548192239, "creation_date": 1548192239, "answer_id": 54316651, "question_id": 54316482, "link": "https://stackoverflow.com/questions/54316482/how-to-create-a-right-and-left-aligned-staircase-with-s-that-are-side-by-side-i/54316651#54316651", "title": "How To Create A Right And Left Aligned Staircase With #s THAT ARE SIDE BY SIDE in C", "body": "<p>I don't understand your code as it is missing some key elements in order to compile (where is <code>main</code>? what is <code>get_int</code>?).</p>\n\n<p>However, this is my approach:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define HEIGHT 6\n\nvoid print_whitespace(int n){printf(\"%*c\", n, ' ');}\nvoid print_hash(int n){while(n--) printf(\"#\");}\n\nint main(void) {\n    for(int h = 1; h &lt; HEIGHT ; h++)\n    {\n        print_whitespace(HEIGHT - h); // left side whitespaces\n        print_hash(offset);           // left side '#'\n        print_whitespace(1);          // center whitespace\n        print_hash(offset);           // right side '#'\n        print_whitespace(HEIGHT - h); // right side whitespaces\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 10952411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf52c42ac30df64f9a18dff57ce34cb?s=128&d=identicon&r=PG&f=1", "display_name": "Megan Buckner Hickman", "link": "https://stackoverflow.com/users/10952411/megan-buckner-hickman"}, "edited": false, "score": 0, "creation_date": 1548252777, "post_id": 54316723, "comment_id": 95476272, "body": "Thank you! This is what I was looking for"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 9, "user_id": 10952411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf52c42ac30df64f9a18dff57ce34cb?s=128&d=identicon&r=PG&f=1", "display_name": "Megan Buckner Hickman", "link": "https://stackoverflow.com/users/10952411/megan-buckner-hickman"}, "edited": false, "score": 0, "creation_date": 1548263233, "post_id": 54316723, "comment_id": 95482419, "body": "You&#39;re welcome! Glad you liked it. Please don&#39;t forget to upvote/accept the answer: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1548193280, "last_edit_date": 1548193280, "creation_date": 1548192651, "answer_id": 54316723, "question_id": 54316482, "link": "https://stackoverflow.com/questions/54316482/how-to-create-a-right-and-left-aligned-staircase-with-s-that-are-side-by-side-i/54316723#54316723", "title": "How To Create A Right And Left Aligned Staircase With #s THAT ARE SIDE BY SIDE in C", "body": "<p>You need to combine your top and bottom loops into one:</p>\n\n<ol>\n<li>First print left whitespace.</li>\n<li>Then print left side of pyramid/triangle</li>\n<li>Print the separater</li>\n<li>Print the right side of the triangle</li>\n<li>Print a newline.</li>\n</ol>\n\n<p>Repeat the above for the number of lines you want.</p>\n\n<hr>\n\n<p>Here is the cleaned up and corrected code. Note that I changed it to take the count from the first program argument (e.g. <code>./mypgm 4</code>) for [my] ease of debugging:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint\nmain(int argc, char **argv)\n{\n    int answer;\n\n    --argc;\n    ++argv;\n\n    if (argc != 1)\n        exit(1);\n\n    answer = atoi(*argv);\n\n    int column = answer - 1;\n\n    for (int i = 1; i &lt;= answer; i++) {\n        // print left margin\n        for (int j = 1; j &lt;= column; j++)\n            printf(\" \");\n\n        // print left pyramid\n        for (int k = 1; k &lt;= i; k++)\n            printf(\"#\");\n\n        // print separater\n        printf(\" \");\n\n        // print right pyramid\n        for (int a = 1; a &lt;= i; a++)\n            printf(\"#\");\n\n        column--;\n\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": false, "score": 0, "last_activity_date": 1548194046, "creation_date": 1548194046, "answer_id": 54317015, "question_id": 54316482, "link": "https://stackoverflow.com/questions/54316482/how-to-create-a-right-and-left-aligned-staircase-with-s-that-are-side-by-side-i/54317015#54317015", "title": "How To Create A Right And Left Aligned Staircase With #s THAT ARE SIDE BY SIDE in C", "body": "<p>The width and precison fields of the <code>%s</code> specifier can be used to print the image.<br>\nThe width field will print at least the desired number of characters and the precision field will print up to the desired number of characters. Values can be used in the specifier or an asterisk can be used to get a value from the arguments.<br>\nEntering the number of times to repeat the line determines the width of the field for the left side. In each iteration, the precision is increased for the number of characters to print within the field.<br>\nThe right side only needs to print the same number of characters as the left side.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SIZE 8\n\nint main( void) {\n    char hash[SIZE + 1] = { [0 ... SIZE] '#'};\n    char input[100] = \"\";\n    int repeat = 0;\n    int result = 0;\n\n    do {\n        printf ( \"input height [1 to %d]\\n\", SIZE);\n        if ( fgets ( input, sizeof input, stdin)) {//get a line\n            result = sscanf ( input, \"%d\", &amp;repeat);//try to scan an integer\n        }\n        else {\n            fprintf ( stderr, \"fgets EOF\\n\");\n            return 0;\n        }\n    } while ( 1 != result || repeat &lt;= 0 || repeat &gt; SIZE);\n\n    for ( int each = 0; each &lt; repeat; ++each) {\n        printf ( \"%*.*s %.*s\\n\", repeat, each + 1, hash, each + 1, hash);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10952411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf52c42ac30df64f9a18dff57ce34cb?s=128&d=identicon&r=PG&f=1", "display_name": "Megan Buckner Hickman", "link": "https://stackoverflow.com/users/10952411/megan-buckner-hickman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1548194046, "creation_date": 1548191419, "question_id": 54316482, "link": "https://stackoverflow.com/questions/54316482/how-to-create-a-right-and-left-aligned-staircase-with-s-that-are-side-by-side-i", "title": "How To Create A Right And Left Aligned Staircase With #s THAT ARE SIDE BY SIDE in C", "body": "<p>I am trying to create something that looks a little like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rFAz2.png\" rel=\"nofollow noreferrer\">mario stairs</a></p>\n\n<p>I know how to create them individually but I cant sort out how to make them side by side...\nmy code is below all in main of course</p>\n\n<pre><code>int answer = get_int(\"Height: \");\n\nwhile( answer &lt; 1 || answer &gt; 8){\n    answer = get_int(\"Height: \");\n\n}\n\nint column = answer -1;\n\nfor(int i = 1; i &lt;=answer; i++){\n    for(int j = 1; j &lt;= column; j++){\n        printf(\" \");\n    }\n    column--;\n    for(int k = 1; k &lt;= i ; k++){\n        printf(\"#\");\n    }\n    printf(\"\\n\");\n}\n\nfor(int a = 1; a &lt;=answer; a++){\n    for(int b = 1; b &lt;=a; b++){\n        printf(\"#\");\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>}</p>\n\n<p>and the output is like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/xKPAy.png\" rel=\"nofollow noreferrer\">output</a></p>\n"}, {"tags": ["c", "enums", "c99", "static-assert", "misra"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1548191405, "post_id": 54316282, "comment_id": 95452858, "body": "It is a constraint (=&gt; a guaranteed compile time error if violated) that enumerator constants must be integer constants expressions representable as an int. The underlying type of the resultant enum type then must be capable of holding all the enumerator constant values. Consequently, casting any enum type to int needs to be safe (as long as the enum type doesn&#39;t store un-enumerable values) regardless of what the underlying type is."}, {"owner": {"reputation": 1133, "user_id": 2344440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A27lB.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2344440/nick"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1548192553, "post_id": 54316282, "comment_id": 95453326, "body": "That was my thinking too even when typing up my little example. My particular implementation might use unsigned char in this case, or signed char, but if I stick with int it doesn&#39;t matter."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1548230132, "post_id": 54316282, "comment_id": 95463477, "body": "Please note that <i>underlying type</i> was a MISRA-C:2004 formal term. It has been retired, MISRA-C:2012 only speaks of <i>essential type</i>. Their definitions are different: the former is &quot;the type the operand would have if not for implicit promotions&quot;, the latter is determined by a listing of groups of operands: signed, unsigned, enum etc."}], "answers": [{"comments": [{"owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1548252755, "post_id": 54323509, "comment_id": 95476260, "body": "IHMO when you decide to bookkeep <i>all</i> enum names in a second list, it would be wiser to also generate the enum from this list."}, {"owner": {"reputation": 4431, "user_id": 460258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e680e343e7f55c62f534e6a640b1f?s=128&d=identicon&r=PG", "display_name": "Jander", "link": "https://stackoverflow.com/users/460258/jander"}, "edited": false, "score": 0, "creation_date": 1548258660, "post_id": 54323509, "comment_id": 95479870, "body": "I think this would catch your &quot;something exotic&quot; after all: <code>(thing_index_t[]){ thing1=123 }</code> would be a syntax error."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 4431, "user_id": 460258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e680e343e7f55c62f534e6a640b1f?s=128&d=identicon&r=PG", "display_name": "Jander", "link": "https://stackoverflow.com/users/460258/jander"}, "edited": false, "score": 0, "creation_date": 1548279150, "post_id": 54323509, "comment_id": 95489259, "body": "@Jander Ah that&#39;s right, the initializers would have to be kept separate. So X macros or something similar after all. I&#39;ll fix this example."}, {"owner": {"reputation": 4431, "user_id": 460258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e680e343e7f55c62f534e6a640b1f?s=128&d=identicon&r=PG", "display_name": "Jander", "link": "https://stackoverflow.com/users/460258/jander"}, "edited": false, "score": 0, "creation_date": 1548491245, "post_id": 54323509, "comment_id": 95567477, "body": "Wait, that syntax error is a good thing! :)  If the OP wants assurance that every number from 0 to thing_num is a valid enum constant, then throwing a compile error if the <code>thing1=123</code> syntax is used is a great idea."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1548279196, "last_edit_date": 1548279196, "creation_date": 1548234355, "answer_id": 54323509, "question_id": 54316282, "link": "https://stackoverflow.com/questions/54316282/staticly-assert-that-enum-is-a-certain-underlying-type/54323509#54323509", "title": "Staticly assert that enum is a certain underlying type", "body": "<p>Rule 10.5 is overall sound, but controlled conversions from <code>enum</code> to signed/unsigned aren't dangerous. MISRAs concern is that you might have an enum like <code>enum {thing1=123, thing2=456, ...</code>. But if you know that the enumerator constants are from 0 to max, it is then mostly safe to go to/from integers.</p>\n\n<p>You don't need a formal deviation for advisory rules. I would rather leave a comment such as </p>\n\n<pre><code>/*  Violates MISRA 10.5 but iterating from thing1 to thing_num is safe. \n    Integer type is used since arithmetic on enums is forbidden by 10.1. */\n</code></pre>\n\n<p>(Or use whatever process you have in place for dealing with advisory rules.)</p>\n\n<hr>\n\n<p>As for static asserts, <code>sizeof(thing_index_t == int)</code> proves nothing, since the allowed enumeration constant values is what matters. And <code>thing1 == 0u</code> is guaranteed by the C standard so you don't need to assert that.</p>\n\n<p>A static assert to ensure enum integrity should rather look like</p>\n\n<pre><code>#define THING_VALUES   \\\n  thing1,              \\\n  thing2,              \\\n  thing_num            \\\n\ntypedef enum { thing1=123, thing2=456, thing_num } thing_index_t;\nconst size_t expected_size = sizeof((thing_index_t[]){ THING_VALUES }) / sizeof(thing_index_t);\n\n_Static_assert( thing_num+1 == expected_size );\n</code></pre>\n\n<p>where the compound literal <code>(thing_index_t[]){ THING_VALUES })</code> gets a size corresponding to the number of enumeration constants in the list. <code>expected_size</code> is the number of items. This asserts that no special initializers such as <code>thing1=123</code> are present.</p>\n\n<p>The only loop hole is something exotic like <code>thing1=123, thing2=1</code>, which this won't catch. To protect against that, you would need to go even further with macros, implementing the whole thing with X macros etc. </p>\n"}], "owner": {"reputation": 1133, "user_id": 2344440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A27lB.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2344440/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 54323509, "answer_count": 1, "score": 2, "last_activity_date": 1549633625, "creation_date": 1548190364, "last_edit_date": 1549633625, "question_id": 54316282, "link": "https://stackoverflow.com/questions/54316282/staticly-assert-that-enum-is-a-certain-underlying-type", "title": "Staticly assert that enum is a certain underlying type", "body": "<p>MISRA 10.1 forbids performing arithmetic on an object of an enumerated type.</p>\n\n<blockquote>\n  <p>An operand of essentially enum type should not be used in an arithmetic operation because\n  an enum object uses an implementation-defined integer type. An operation involving an\n  enum object may therefore yield a result with an unexpected type. Note that an enumeration\n  constant from an anonymous enum has essentially signed type.</p>\n</blockquote>\n\n<p>They also stipulate that the <code>++</code> and <code>--</code> unary operators are treated as binary addition and subtraction for the purpose of this rule.</p>\n\n<p>If I use integers in the loop control structure I'll still need to cast them back to enum later, which will violate Rule 10.5</p>\n\n<blockquote>\n  <p>The value of an expression should not be cast to an inappropriate\n  essential type</p>\n</blockquote>\n\n<p>Is there a way I can use static assertions to guarantee some assumptions about the underlying enum type? This code may be reused in the future on another architecture. I'd like to deviate from 10.5 in this case with confidence that the code will throw a compile time error if some assumption about what the underlying enumerate type is violated.</p>\n\n<p>Contrived example:</p>\n\n<pre><code>enum {thing1, thing2, ... , thing_max } thing_index_t\n...\nfor(int thing_index = 0; thing_index &lt; (int) thing_max; ++thing_index)\n{\n    init_something((thing_index_t) thing_index);\n    //             ^~~~~~~~~~~~~~~~~~~~~~~~~\n    // cannot cast a signed value to an enum type\n    // [MISRA 2012 Rule 10.5, advisory]\n}\n</code></pre>\n\n<p>This should always be a safe cast if I statically assert that <code>sizeof(thing_index_t == int);</code> and that <code>thing1 == 0u</code> right?</p>\n\n<p>Int will always be large enough to hold my whole range of values without promotion FWIW.</p>\n"}, {"tags": ["c", "parameter-passing", "signals"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1548190305, "post_id": 54316224, "comment_id": 95452389, "body": "OT: Why care about memory leaks if the program terminates anyway?"}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1548190427, "post_id": 54316224, "comment_id": 95452437, "body": "@4386427 - Good question.  I dunno, I&#39;m trying to stick to best practices, and ALWAYS free up memory I&#39;ve allocated.  No other reason."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1548190632, "post_id": 54316224, "comment_id": 95452530, "body": "I can&#39;t answer your explicit question but to my knowledge you don&#39;t need to worry about memory leaks as any modern OS will handle the &quot;cleanup&quot; for you when the program terminates."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548191001, "post_id": 54316224, "comment_id": 95452690, "body": "If the memory is actually leaked you can&#39;t free it anyways. Also, it&#39;s not safe to use stdio functions in signal handlers. That way lies undefined behavior."}, {"owner": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548191014, "post_id": 54316224, "comment_id": 95452697, "body": "@Pete That&#39;s actually a bad practice. You&#39;re just slowing down your program and adding maintenance overhead."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1548191051, "post_id": 54316224, "comment_id": 95452710, "body": "don&#39;t think you can using <code>signal</code>. The <a href=\"http://man7.org/linux/man-pages/man2/signal.2.html\" rel=\"nofollow noreferrer\">man page</a> for <code>signal</code> indicates the second argument is a function pointer to a function that returns <code>void</code> and accepts an <code>int</code> (the signal identifier) as the only argument. You&#39;d probably have to figure out a way to hack in a custom signal handler if you really wanted to do this, but seeing as how the OS will clean up your memory anyway, not worth it IMO unless for educational purposes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548191115, "post_id": 54316224, "comment_id": 95452734, "body": "You should check that the signal was not being ignored before installing your signal handler.  There&#39;s no point in installing a signal handler for <code>SIGKILL</code>; it will not be called and your process will die.  You cannot catch <code>SIGKILL</code>."}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "reply_to_user": {"reputation": 1465, "user_id": 5122006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d5d9f38947aef246351984de8786ce8c?s=128&d=identicon&r=PG&f=1", "display_name": "okovko", "link": "https://stackoverflow.com/users/5122006/okovko"}, "edited": false, "score": 0, "creation_date": 1548191138, "post_id": 54316224, "comment_id": 95452739, "body": "@okovko - Huh, thanks for pointing that out.  Its comments like yours which make me a better programmer"}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548191199, "post_id": 54316224, "comment_id": 95452767, "body": "@Shawn Wow, I didn&#39;t know that... thanks!"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1548191757, "post_id": 54316224, "comment_id": 95453005, "body": "Maybe this could be of interest: <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/sigaction.2.html</a> It&#39;s pretty complicated but a fast scan indicates that you can get more information into handler. I didn&#39;t study the details so I can&#39;t tell whether it can do what you need."}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1548192252, "post_id": 54316224, "comment_id": 95453213, "body": "@4386427 Wow, awesome, thanks!  Folks offering helpful tips like this are why I love this site."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548196825, "post_id": 54316224, "comment_id": 95454810, "body": "See also <a href=\"https://stackoverflow.com/questions/16891019/how-to-avoid-using-printf-in-a-signal-handler/16891799#16891799\">How to avoid using <code>printf()</code> in a signal handler?</a> . Note that a number of the string functions (notably <code>strlen()</code>) are now signal safe according to POSIX.1:2017.  Until recently (some time after the original 2008 version), they were not allowed officially."}], "answers": [{"comments": [{"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "edited": false, "score": 0, "creation_date": 1548258791, "post_id": 54316640, "comment_id": 95479938, "body": "Wow, thanks Bob.  Not the answer I was hoping for, but the information I needed.  Much obliged...!"}, {"owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "reply_to_user": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "edited": false, "score": 1, "creation_date": 1548259403, "post_id": 54316640, "comment_id": 95480308, "body": "Yeah.  There&#39;s not much more to say.  It can only get to globals and it only receives the signal number.  I have found that if I am likely to need access to more than one thing there, it&#39;s usually best to just fill a (global) struct with pointers to whatever I need."}], "tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": true, "score": 2, "last_activity_date": 1548192204, "creation_date": 1548192204, "answer_id": 54316640, "question_id": 54316224, "link": "https://stackoverflow.com/questions/54316224/c-program-pass-arguments-into-signal-handler-function/54316640#54316640", "title": "C Program, Pass Arguments into Signal Handler Function?", "body": "<p>You cannot send arguments to a signal handler.  Anything that needs to be accessed from the handler needs to be put into some kind of global struct.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1548193843, "last_edit_date": 1548193843, "creation_date": 1548192725, "answer_id": 54316743, "question_id": 54316224, "link": "https://stackoverflow.com/questions/54316224/c-program-pass-arguments-into-signal-handler-function/54316743#54316743", "title": "C Program, Pass Arguments into Signal Handler Function?", "body": "<p><strong>Your original code is already <em>wrong</em></strong> (even if it appears to work; it still is already <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>). Read first the <a href=\"https://en.wikipedia.org/wiki/Signal_(IPC)\" rel=\"nofollow noreferrer\">signal (IPC)</a> wikipage.</p>\n\n<p>The original signal handler <code>exit_func</code> is already wrong. Read <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a> and <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safety(7)</a>. Neither <code>exit</code>, nor <code>fprintf</code>, can be called, even indirectly from a signal handler, because they are not <strong>async-signal-safe</strong> (and neither is <code>malloc</code>).</p>\n\n<p>You'll better set some <code>volatile sig_atomic_t</code> variable in your signal handler, and test it in your event loops (see <a href=\"https://stackoverflow.com/a/24931828/841108\">this</a> and <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/signal.h.html\" rel=\"nofollow noreferrer\">POSIX documentation on <code>signal.h</code></a>). This is usual practice (and once you do that, which you have to do to be compliant with the <code>signal(7)</code> and <code>signal-safety(7)</code> rules, your question becomes irrelevant).</p>\n\n<p>You might be interested by the Linux-specific <a href=\"http://man7.org/linux/man-pages/man2/signalfd.2.html\" rel=\"nofollow noreferrer\">signalfd(2)</a> (it has some minor flaws. STFW for them).</p>\n\n<p>The Qt documentation has a nice chapter for <a href=\"http://doc.qt.io/qt-5/unix-signals.html\" rel=\"nofollow noreferrer\">Calling Qt functions from Unix signal handlers</a>. Some of the wisdom there (e.g. the <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">pipe(7)</a> to self trick) may apply to your program, even if it does not use Qt.</p>\n"}], "owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1896, "favorite_count": 0, "accepted_answer_id": 54316640, "answer_count": 2, "score": 0, "last_activity_date": 1548193843, "creation_date": 1548190096, "question_id": 54316224, "link": "https://stackoverflow.com/questions/54316224/c-program-pass-arguments-into-signal-handler-function", "title": "C Program, Pass Arguments into Signal Handler Function?", "body": "<p>I have a possible \"<em>It Can't Be Done!</em>\" problem, which I'd like to bounce off the community.</p>\n\n<p>I'm working the libIPFIX program, written in C.  At the start of the code, the program sets up a Signal Handler function:</p>\n\n<pre><code>void exit_func ( int signo )\n{\n    if ( verbose_level &amp;&amp; signo )\n        fprintf( stderr, \"\\n[%s] got signo %d, bye.\\n\\n\", progname, signo );\n\n    ...clean up global variables...\n\n    exit( 1 );\n}\n</code></pre>\n\n<p>Later in main(), the signal handler is wired into the larger code:</p>\n\n<pre><code>int main (int argc, char *argv[])\n{\n    ...\n\n    // signal handler\n    signal( SIGKILL, exit_func );\n    signal( SIGTERM, exit_func );\n    signal( SIGINT,  exit_func );\n\n    ...\n\n    exit(1);\n}\n</code></pre>\n\n<p>Pretty boilerplate, from what I can tell.</p>\n\n<p>Here's my issue:  I'm tracking a lot of extra data in my modified version of the program, using malloc() and linked lists and whatnot.  When the code detects a signal, it would be great if <code>exit_func()</code> could call my cleanup() functions to eliminate memory leaks, blah blah blah.  What I'd love is this:</p>\n\n<pre><code>void exit_func ( int signo, LLNode* myData )\n{\n    ...same...\n\n    cleanUp( myData );\n\n    exit( 1 );\n}\n</code></pre>\n\n<p>But a reading of <a href=\"http://pubs.opengroup.org/onlinepubs/009695299/functions/sigaction.html\" rel=\"nofollow noreferrer\">sigaction</a> plus posts like <a href=\"https://stackoverflow.com/questions/38553036/pass-arguments-to-signal-handler-in-c\">these</a> plus my own experimenting strongly suggest that there isn't a way to pass in an additional argument to <code>exit_func()</code>.  And that the only way to do what I want is to make my data into a global variable.  I'd really hate to do that for other design reasons.</p>\n\n<p>So I thought I'd go for broke and just ask:  Is there was way to pass an argument into <code>exit_func()</code>?  Thanks in advance.</p>\n"}, {"tags": ["c", "haskell", "ffi", "inline-c"], "comments": [{"owner": {"reputation": 1706, "user_id": 1840613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfd4d21060ccd9b972864e0f6cb8c4?s=128&d=identicon&r=PG", "display_name": "Jeremy List", "link": "https://stackoverflow.com/users/1840613/jeremy-list"}, "edited": false, "score": 0, "creation_date": 1548193379, "post_id": 54315942, "comment_id": 95453635, "body": "It doesn&#39;t seem to be possible with any kind of C: inline or otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 5821, "user_id": 1770201, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/46bcb5d2018194c9beb884b6797e57e0?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/1770201/george"}, "is_accepted": false, "score": 0, "last_activity_date": 1548200259, "creation_date": 1548200259, "answer_id": 54318022, "question_id": 54315942, "link": "https://stackoverflow.com/questions/54315942/can-haskells-inline-c-return-a-typedef-to-a-function-pointer/54318022#54318022", "title": "Can Haskell&#39;s inline-C return a typedef to a function pointer?", "body": "<p>The code in my question works. I just forgot to include a C context.</p>\n"}, {"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": false, "score": 6, "last_activity_date": 1548201427, "creation_date": 1548201427, "answer_id": 54318166, "question_id": 54315942, "link": "https://stackoverflow.com/questions/54315942/can-haskells-inline-c-return-a-typedef-to-a-function-pointer/54318166#54318166", "title": "Can Haskell&#39;s inline-C return a typedef to a function pointer?", "body": "\n\n<p>You are using contexts incorrectly.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>C.context :: Context -&gt; Q [Dec]\n</code></pre>\n\n<p>It is meant to be called as a Template Haskell top-level splice. All you've done is define</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>intializeMyCtx :: Q [Dec]\n</code></pre>\n\n<p>Which is a <code>Q</code>-action that <em>would</em> initialize your context if executed, but <em>isn't</em>. So, fix that:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>type NotifyFuncT = FunPtr (Ptr C'WlListener -&gt; Ptr () -&gt; IO ())\n\nC.context $ C.baseCtx &lt;&gt; C.funCtx &lt;&gt; mempty {\n  C.ctxTypesTable = Data.Map.fromList [\n     (C.Struct \"wl_listener\", [t|C'WlListener|])\n  -- ...\n  ,  (C.TypeName \"wl_notify_func_t\", [t|NotifyFuncT|])\n  ]\n}\n</code></pre>\n\n<p>Second, <code>someHaskellFunction</code> is a tad overcomplicated. If you have a more complicated function, then <code>C.block</code> may be warranted, but right now a single <code>C.exp</code> will do everything.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>someHaskellFunction :: Ptr C'WlListener -&gt; IO NotifyFuncT\nsomeHaskellFunction ptr = [C.exp| wl_notify_func_t { $(struct wl_listener *ptr)-&gt;notify } |]\n</code></pre>\n"}], "owner": {"reputation": 5821, "user_id": 1770201, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/46bcb5d2018194c9beb884b6797e57e0?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/1770201/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1548201427, "creation_date": 1548188712, "last_edit_date": 1548194034, "question_id": 54315942, "link": "https://stackoverflow.com/questions/54315942/can-haskells-inline-c-return-a-typedef-to-a-function-pointer", "title": "Can Haskell&#39;s inline-C return a typedef to a function pointer?", "body": "\n\n<p>I'm working with a C code base for which</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef void(* wl_notify_func_t) (struct wl_listener *listener, void *data) \n\n//...\n\nstruct wl_listener {\n  struct wl_list link;\n  wl_notify_func_t notify; //&lt;-- I'd like to return this\n};\n</code></pre>\n\n<p>and have used the Haskell code</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>type NotifyFuncT = FunPtr (Ptr C'WlListener -&gt; Ptr () -&gt; IO ())\n\ninitializeMyCtx = C.context $ C.baseCtx &lt;&gt; C.funCtx &lt;&gt; mempty {\n  C.ctxTypesTable = Data.Map.fromList [\n     (C.Struct \"wl_listener\", [t|C'WlListener|])\n  -- ...\n  ,  (C.TypeName \"wl_notify_func_t\", [t|NotifyFuncT|])\n  ]\n}\n\nsomeHaskellFunction :: Ptr C'WlListener -&gt; IO NotifyFuncT\nsomeHaskellFunction ptrToWlListener = do\n  funPtr &lt;- [C.block| wl_notify_func_t {return $(struct wl_listener * ptrToWlListener)-&gt;notify;}|]\n  return funPtr\n</code></pre>\n\n<p>Unfortunately, I get an error from the inline-C code block which essentially says:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>unexpected identifier  wl_notify_func_t\n</code></pre>\n\n<p>So is what I'm doing even possible with inline-C?</p>\n"}, {"tags": ["python", "c", "sha256"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1548189473, "post_id": 54315881, "comment_id": 95452045, "body": "If you&#39;re using GLIBC, see <code>crypt(3)</code>."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1548189773, "post_id": 54315881, "comment_id": 95452169, "body": "Or otherwise, see the spec (Drepper was GLIBC lead developer for a <i>long</i> time): <a href=\"https://akkadia.org/drepper/SHA-crypt.txt\" rel=\"nofollow noreferrer\">akkadia.org/drepper/SHA-crypt.txt</a>"}], "owner": {"reputation": 1, "user_id": 10952194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnPJ5BdYrrI/AAAAAAAAAAI/AAAAAAAAAEE/dnjdL88DmA0/photo.jpg?sz=128", "display_name": "Armando Leopoldo Keller", "link": "https://stackoverflow.com/users/10952194/armando-leopoldo-keller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548189034, "creation_date": 1548188387, "last_edit_date": 1548189034, "question_id": 54315881, "link": "https://stackoverflow.com/questions/54315881/validate-a-sha256-python-generated-in-c", "title": "Validate a SHA256 (python generated) in C", "body": "<p>I'm trying to validate a hash generated by python using the passlib (<a href=\"https://passlib.readthedocs.io/en/stable/lib/passlib.hash.sha256_crypt.html\" rel=\"nofollow noreferrer\">https://passlib.readthedocs.io/en/stable/lib/passlib.hash.sha256_crypt.html</a>) in C code using openssl/sha.h.</p>\n\n<p>For the password \"senhateste\" the python passlib has generated the following hash: </p>\n\n<pre><code>$5$rounds=535000$e.cy1Y7iWc0OQjNC$7QbwABQMlBdHHd.UURPF.eoc0VTGOtM7yxxrOIe4OxC\n</code></pre>\n\n<p>where there is a number of rounds, a salt and a checksum (separated by $).</p>\n\n<p>I was trying to generate a hash for the raw password in C to compare with the one generated by Python code, but I got only an array of bytes (like the ones of online sha256 hash tools).</p>\n\n<p>I was thinking in make a loop hashing the password for the same number of rounds provided by Pyhton. But I can't figure out where I should use the salt. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;openssl/sha.h&gt;\n\nint main (void) {\n     int i;\n     unsigned char s[] = \"senhateste\";\n     unsigned char *d = (unsigned char *) malloc(SHA256_DIGEST_LENGTH);\n\n    SHA256(s,strlen((char*)s), d);\n\n    for(i=0;i&lt;SHA256_DIGEST_LENGTH;i++)\n    {\n        printf(\"%02x\",d[i]);\n    }\n    printf(\"\\n\");\n\n    free(d);\n   return 0;\n}\n</code></pre>\n\n<p>Any suggestion?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1548187280, "post_id": 54315597, "comment_id": 95451107, "body": "The error is a typo; the <code>;</code> at the end of <code>if (num%2 == 0);</code>"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1548187312, "post_id": 54315597, "comment_id": 95451123, "body": "And your function doesn&#39;t return anything if the input is odd"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1548187414, "post_id": 54315597, "comment_id": 95451170, "body": "@Mat Nope, because of the typo it always returns something, 0."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548187487, "post_id": 54315597, "comment_id": 95451199, "body": "use <code>clang</code> or <code>gcc</code> with the maximum warning level. It detects the kind of error that Weather commented on"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548187661, "post_id": 54315597, "comment_id": 95451285, "body": "Note that using K&amp;R-style functions and &#39;implicit <code>int</code>&#39; for the type of <code>num</code> (in <code>int isEven(num)</code>) is archaic code that was not really approved of 35 years ago, but was allowed for backwards compatibility \u2014 C90 blessed it but marked it obsolescent (a limited sort of blessing), and C99 disallows it.  Do NOT write code like that.  It&#39;s not been legitimate standard C since about the time you were born, or a bit longer, if anything."}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 1, "last_activity_date": 1548187665, "creation_date": 1548187665, "answer_id": 54315715, "question_id": 54315597, "link": "https://stackoverflow.com/questions/54315597/find-even-number-using-function/54315715#54315715", "title": "Find even number using Function", "body": "<p>The ; at the end of your if statement results in the checking of the statement but not entering the if scope you intended it is equal to <em>if(cond){}</em>.</p>\n\n<p>Usually a function isEven should return 1 for true or zero for false.\nyour function also lacks a return value, you must have an int value returned if the condition is true or not</p>\n\n<pre><code>int isEven(num)\n{\n    if (num%2 == 0)\n    {\n        printf(\"even\");\n               return 1;/*True - is even*/\n    }\n    return 0; /*false - not an even number*/\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "is_accepted": false, "score": 0, "last_activity_date": 1548187751, "creation_date": 1548187751, "answer_id": 54315735, "question_id": 54315597, "link": "https://stackoverflow.com/questions/54315597/find-even-number-using-function/54315735#54315735", "title": "Find even number using Function", "body": "<p>There are two issues with your code. The first is the punctuator <code>;</code> following <code>if(num%2 == 0)</code>. The second issue is that there is no flow control in the function so execution will always pass through  <code>return 0;</code></p>\n\n<p>The necessary correction is this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint isEven(num)\n{\n    if (num%2 == 0)\n    {\n        printf(\"even\");\n        return 0;\n    } else {return -1; }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6017987, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S7QCE7KUqNQ/AAAAAAAAAAI/AAAAAAAAACc/Ai2NS_6IItI/photo.jpg?sz=128", "display_name": "Amar Kumar Amar", "link": "https://stackoverflow.com/users/6017987/amar-kumar-amar"}, "edited": false, "score": 0, "creation_date": 1551647184, "post_id": 54315742, "comment_id": 96706582, "body": "Only two error is there . In function when passing parameter use datatype {int isEven(int num) } . And other in line 4 remove semi-colon"}], "tags": [], "owner": {"reputation": 509, "user_id": 4153034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3dafa6807ae73133d3a28f64c97ea660?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/4153034/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1548187781, "creation_date": 1548187781, "answer_id": 54315742, "question_id": 54315597, "link": "https://stackoverflow.com/questions/54315597/find-even-number-using-function/54315742#54315742", "title": "Find even number using Function", "body": "<p>You have several issues with your code:</p>\n\n<p>First, you need to include some headers to make it executable.</p>\n\n<p>Then, as you implemented it, the function <code>isEven</code> either needs to return void or int.  Furthermore you need to specify the datatype for its parameter.But if you specify it to return an int, you need it to be assigned to a variable, like <code>int ret = isEven(num);</code>.</p>\n\n<p>The last things was, that after your if brackets was a <code>;</code>, that indicates the line to terminate.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid isEven(int num)\n{\n    if(num%2 == 0)\n    {\n        printf(\"even\");\n    }\n}\n\nint main()\n{\n    int num;\n    printf(\"Enter number :\");\n    scanf(\"%d\",&amp;num);\n\n    isEven(num);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6017987, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S7QCE7KUqNQ/AAAAAAAAAAI/AAAAAAAAACc/Ai2NS_6IItI/photo.jpg?sz=128", "display_name": "Amar Kumar Amar", "link": "https://stackoverflow.com/users/6017987/amar-kumar-amar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1548187981, "answer_count": 3, "score": 0, "last_activity_date": 1548187781, "creation_date": 1548187148, "last_edit_date": 1548187344, "question_id": 54315597, "link": "https://stackoverflow.com/questions/54315597/find-even-number-using-function", "closed_reason": "Not suitable for this site", "title": "Find even number using Function", "body": "<p>Question: To check whether input number is even or not?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint isEven(num)\n{\n    if (num%2 == 0);\n    {\n        printf(\"even\");\n               return 0;\n    }\n\n}\nint main()\n{\n    int num;\n    printf(\"Enter number :\");\n    scanf(\"%d\",&amp;num);\n\n    isEven(num);\n\n    return 0;\n}\n</code></pre>\n\n<p>This code shows every input number as even. Where I did wrong.</p>\n"}, {"tags": ["c", "memcpy"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1548186624, "post_id": 54315464, "comment_id": 95450836, "body": "Just stick with <code>memmove()</code>"}, {"owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1548186684, "post_id": 54315464, "comment_id": 95450848, "body": "@Fran&#231;oisAndrieux I want to know in general what happens?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548186884, "post_id": 54315464, "comment_id": 95450947, "body": "C. Failure might not cause an access violation, but corrupt the program&#39;s own data causing unexpected results to happen silently. One safety is to verify that the <code>size_t count</code> argument is no larger than the the destination size. But you can&#39;t consider it will pass all the time without any error. It is a brutal function which can (try to) destroy anything in its way."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1548186988, "post_id": 54315464, "comment_id": 95450986, "body": "Null pointers is another failure scenario, writing with pointers to constant (i.e. read only) data is another."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1548189016, "post_id": 54315464, "comment_id": 95451872, "body": "Copying to read-only memory will cause trouble."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1548186897, "creation_date": 1548186897, "answer_id": 54315534, "question_id": 54315464, "link": "https://stackoverflow.com/questions/54315464/failure-scenarios-for-memcpy/54315534#54315534", "title": "failure scenarios for memcpy", "body": "<p>The <code>memcpy</code> has the precondition that the memory areas will not overlap.  You invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> if you violate that precondition.</p>\n\n<p>Similarly, you also invoke undefined behavior if you read past the bounds of the source buffer or write past the bounds of the destination buffer.  This is dictated in the standard.</p>\n\n<p>When you invoke undefined behavior, you can't predict how the program will behave in the future (or even in the past).  It could crash, it could output strange results, or it could appear to work normally.</p>\n\n<p>Using a tool such as valgrind is very helpful in identifying when your program violates various memory constraints, such as reading or writing past the end of a buffer, using an uninitialized value, dereferencing a null pointer, or performing a double free.</p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 10952215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9UO9kISBoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaztEr4sba5AU2HkM-K5ealMubrBg/mo/photo.jpg?sz=128", "display_name": "Bob Shaffer", "link": "https://stackoverflow.com/users/10952215/bob-shaffer"}, "is_accepted": false, "score": 1, "last_activity_date": 1548192580, "creation_date": 1548192580, "answer_id": 54316712, "question_id": 54315464, "link": "https://stackoverflow.com/questions/54315464/failure-scenarios-for-memcpy/54316712#54316712", "title": "failure scenarios for memcpy", "body": "<p>If you give it valid pointers that do not overlap and you do not overrun the buffers with your reads/writes, it will not fail.  If you do some of those things, it may still not fail, but could do unexpected things.  It will always return dest.</p>\n"}, {"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 1, "last_activity_date": 1548195087, "creation_date": 1548195087, "answer_id": 54317214, "question_id": 54315464, "link": "https://stackoverflow.com/questions/54315464/failure-scenarios-for-memcpy/54317214#54317214", "title": "failure scenarios for memcpy", "body": "<blockquote>\n  <p>I am trying to understand the scenarios in which call to memcpy can fail silently because invalid pointers will result in access violation/segfaults.</p>\n</blockquote>\n\n<p>Typically when there's an access violation/segfault, software fails loudly. This can happen if <code>memcpy()</code> is given dodgy pointers or a bad size, which includes \"correct pointers but heap was corrupted\" (e.g. the metadata that <code>malloc()</code>/<code>free()</code> uses to keep track of allocated areas was overwritten by a bug causing <code>free()</code> to give the underlying virtual RAM back to the kernel for an area that should've been kept, and causing <code>memcpy()</code> to fail with an access violation because an area it should've been able to access can't be accessed).</p>\n\n<p>The other cases are external failure conditions. If the OS decided to send some of the data to swap space but gets a read error from the device when trying to fetch the data back from swap space when you try to access it, there's very little to OS can do about it (your process and any other process using that data can't continue correctly). If you're using ECC RAM and the memory controller says there's an uncorrectable error with the RAM you're using it's similar. It's also possible for the OS to use \"lazy page allocation\" (e.g. pages of memory are allocated when you write to them and not when you thought you allocated them) and \"over commit\" (pretend that more pages were allocated than can be provided), so that when <code>memcpy()</code> writes to an area that was allocated the OS can't handle it (e.g. it triggers an \"OOM/out of memory killer\" that terminates a process to free up some RAM). Finally, it's possible for the code to be corrupted (e.g. faulty RAM without ECC, malicious attack like \"Rowhammer\", corrupted shared library, ...) so that (e.g.) using <code>memcpy()</code> causes a <code>SIGILL</code>. Of course all of these things aren't related to <code>memcpy()</code> itself and can just as easily happen anywhere else.</p>\n\n<blockquote>\n  <p>Also, there will be issues in case of overlapping pointers.</p>\n</blockquote>\n\n<p>Yes. Some (most) implementations of <code>memcpy()</code> are optimised to copy larger blocks (e.g. optimised to use SSE on 80x86 and moving 16 bytes at a time) where if the areas overlap the data gets mangled. Some (most) implementations of <code>memcpy()</code> assume that it can copy data in one specific direction which will cause data to be corrupted if areas overlap in the wrong way (e.g. if the implementation uses the \"lowest address first\" direction and the destination area overlaps and is at a higher address than the source, then writes to the destination will overwrite source data that hasn't been copied yet).</p>\n\n<blockquote>\n  <p>Apart from these, are there any other ways the memcpy call can fail?</p>\n</blockquote>\n\n<p>No, I think I covered all the possible failure cases above.</p>\n\n<blockquote>\n  <p>Or we can consider it'll pass all the time without any error. How to verify it?</p>\n</blockquote>\n\n<p>For the \"overlapping areas\" problem it shouldn't be hard to write a wrapper around <code>memcpy()</code> that detects overlap and generates an error (so that it doesn't silently corrupt data). Unfortunately this only finds problems at run-time (after it's too late - e.g. possibly after it's been released and running on the end user's computer). For some of the cases might be easy enough to detect \"overlapping areas\" using a static source code analyser, but these cases are likely to be the \"easily detected by testing at run-time before software is released\" cases.</p>\n\n<p>For some things (dodgy pointers, corrupted heap) there are tools (valgrind) to detect problems. Unfortunately these only detect problems when they actually happen (and don't detect problems that don't happen during testing but do happen when software is running on the end-user's computer).</p>\n\n<p>For the remainder (OS failures and hardware failures), if you can't trust the OS or hardware then you can't assume any code that verifies anything will work properly either.</p>\n"}], "owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1548195087, "creation_date": 1548186528, "last_edit_date": 1548187063, "question_id": 54315464, "link": "https://stackoverflow.com/questions/54315464/failure-scenarios-for-memcpy", "title": "failure scenarios for memcpy", "body": "<p>I am trying to understand the scenarios in which call to memcpy can fail silently because invalid pointers will result in access violation/segfaults. Also, there will be issues in case of overlapping pointers. Apart from these, are there any other ways the memcpy call can fail? Or we can consider it'll pass all the time without any error. How to verify it?</p>\n"}]