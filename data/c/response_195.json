[{"tags": ["c", "time", "runtime", "time-complexity", "analysis"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1538610684, "post_id": 52637059, "comment_id": 92207276, "body": "Change <code>x += a[j]</code> to <code>x++</code> and then check the value of <code>x</code> for various values of <code>n</code>."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1538612554, "creation_date": 1538612554, "answer_id": 52637306, "question_id": 52637059, "link": "https://stackoverflow.com/questions/52637059/how-is-this-basic-algorithm-on/52637306#52637306", "title": "How is this basic algorithm O(n)?", "body": "<p>O(<em>n</em>) means an algorithm ultimately requires at most some number of steps proportional to <em>n</em> when its input size is <em>n</em>. The inner loop is O(<em>n</em>) in this characterization, but its input size is <code>i</code>, so it requires some number of steps proportional to <code>i</code>.</p>\n\n<p>Add up how many iterations of the inner loop are performed. If <code>n</code> is exactly a power of two, that is 1 + 2 + 4 + 8 + \u2026 + <code>n/2</code>. The sum of that series is <code>n-1</code>. Thus, the entire program performs <code>n-1</code> iterations  when its input size is <code>n</code>. So it is O(<em>n</em>).</p>\n\n<p>(If <code>n</code> is not exactly a power of two, the number of iterations is <code>p-1</code>, where <code>p</code> is the least power of 2 not less than <code>n</code>. <code>p-1</code> is less than <code>2*n</code>, which is proportional to <code>n</code>, so the program is still O(<em>n</em>).)</p>\n"}], "owner": {"reputation": 31, "user_id": 8762104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c21b9635059088ab5afb7ee21d9859f?s=128&d=identicon&r=PG&f=1", "display_name": "John Larkos", "link": "https://stackoverflow.com/users/8762104/john-larkos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52637306, "answer_count": 1, "score": 1, "last_activity_date": 1538612554, "creation_date": 1538610084, "last_edit_date": 1538610480, "question_id": 52637059, "link": "https://stackoverflow.com/questions/52637059/how-is-this-basic-algorithm-on", "title": "How is this basic algorithm O(n)?", "body": "<pre><code>int G(int a[], int n) {\nint x=0, i, j;\n\n for(i=1; i&lt;n; i=i*2){\n for(j=0; j&lt;i; j++)\n     x += a[j];\n }\n return x;\n}\n</code></pre>\n\n<p>How is the worst case tight bound on this algorithm O(n). Is the first loop not executed O(log(n) times and the second for loop executed O(n) times giving O(n logn)?</p>\n"}, {"tags": ["c", "pointers", "struct", "sizeof"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1538610063, "post_id": 52636957, "comment_id": 92207166, "body": "Wrong.You are still copying the pointer <i>value</i> . Do you want a <i>deep</i> copy*?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1538610081, "post_id": 52636957, "comment_id": 92207169, "body": "The malloc uses the wrong size"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1538610176, "post_id": 52636957, "comment_id": 92207182, "body": "but <code>sizeof(*y)</code> would  make no sense(and is forbidden) . Deep copy is impossible without knowing the object&#39;s size."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1538611717, "post_id": 52636957, "comment_id": 92207483, "body": "Since the field y of the <code>sample_t</code> struct is a <code>void*</code>, there&#39;s no way to tell how many bytes to allocate for it.  Your call to allocate space via: <code>malloc(sizeof(sample-&gt;y));</code> only allocates enough bytes to hold a pointer, and not the actual data that it points to."}], "answers": [{"tags": [], "owner": {"reputation": 4998, "user_id": 7233423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810e59b837c9e8b352615784397db0ea?s=128&d=identicon&r=PG&f=1", "display_name": "xhienne", "link": "https://stackoverflow.com/users/7233423/xhienne"}, "is_accepted": true, "score": 2, "last_activity_date": 1538610695, "creation_date": 1538610695, "answer_id": 52637112, "question_id": 52636957, "link": "https://stackoverflow.com/questions/52636957/duplicating-a-data-structure-with-pointers/52637112#52637112", "title": "Duplicating a data structure with pointers", "body": "<p>This code copies the content of the structure pointed to <code>sample</code> to a newly allocated structure:</p>\n\n<pre><code>struct sample_t *dup(struct sample_t *sample) {\n    struct sample_t *dup_sample = malloc(sizeof *sample);\n    *dup_sample = *sample;\n    return dup_sample;\n}\n</code></pre>\n\n<p>Note that the memory you are allocating must have enough room for the data and must have the size of <code>*sample</code> (the structure), not the size of <code>sample</code> (an address).</p>\n\n<p>As for the copy, a mere affectation <code>struct1 = struct2</code> is enough.</p>\n"}], "owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 52637112, "answer_count": 1, "score": 1, "last_activity_date": 1538610695, "creation_date": 1538609079, "last_edit_date": 1538609425, "question_id": 52636957, "link": "https://stackoverflow.com/questions/52636957/duplicating-a-data-structure-with-pointers", "title": "Duplicating a data structure with pointers", "body": "<p>I'm trying to duplicate my data structure that contains a pointer and a integer. But I'm not sure if it is the right way to do so.</p>\n\n<p>Here is my structure:</p>\n\n<pre><code>struct sample_t {\n    int x; \n    void *y;   \n};\n</code></pre>\n\n<p>Here is my function:</p>\n\n<pre><code>struct sample_t *dup(struct sample_t *sample){\n\n  struct sample_t *dup_sample = malloc(sizeof (sample));\n\n  dup_sample-&gt;x = sample-&gt;x;\n\n  dup_sample-&gt;y     = malloc(sizeof(sample-&gt;y));\n  dup_sample-&gt;y     = sample-&gt;y\n\n  return dup_sample;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "loops", "bitset"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1538609185, "post_id": 52636890, "comment_id": 92206995, "body": "<code>std::vector&lt;uint64_t&gt; bitset;</code> not in C you aren&#39;t. Be cautious and make sure each language is relevant when  you tag extra languages. If you truly don&#39;t care what language is used, tag as  <code>language-agnostic</code>."}, {"owner": {"reputation": 31, "user_id": 10453729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7134977f46b46b3222441762a4eb66e6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeForFood", "link": "https://stackoverflow.com/users/10453729/codeforfood"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1538609408, "post_id": 52636890, "comment_id": 92207038, "body": "Thanks @user4581301 for your comment. You can replace <code>std::vector&lt;uint64_t&gt; bitset</code> with <code>uint64_t *bitset</code> and it will work in C."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1538703787, "post_id": 52636890, "comment_id": 92245171, "body": "Converting an N-bit signal to M bits where N != M with minimal introduction of noise is actually a huge topic. One big category of research dealing with this problem is Delta-Sigma (also called Sigma-Delta) modulation.  <a href=\"https://en.wikipedia.org/wiki/Delta-sigma_modulation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Delta-sigma_modulation</a>"}, {"owner": {"reputation": 31, "user_id": 10453729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7134977f46b46b3222441762a4eb66e6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeForFood", "link": "https://stackoverflow.com/users/10453729/codeforfood"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1538713805, "post_id": 52636890, "comment_id": 92247166, "body": "This is awesome, thanks @gene for putting a name to this problem! I will be googling this some more now :)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10453729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7134977f46b46b3222441762a4eb66e6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeForFood", "link": "https://stackoverflow.com/users/10453729/codeforfood"}, "edited": false, "score": 0, "creation_date": 1538713383, "post_id": 52657025, "comment_id": 92247075, "body": "Thanks @Phil1970 for your comment. The resolution can be anything, 1/2 or even 2/4 and my bit sequences can range anywhere from 1^9 to 1^15.  I wish the resolution was power of 2, it would make things a bit easier :)"}], "tags": [], "owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "is_accepted": false, "score": 0, "last_activity_date": 1538701859, "creation_date": 1538701859, "answer_id": 52657025, "question_id": 52636890, "link": "https://stackoverflow.com/questions/52636890/c-c-bit-array-resolution-transform-algorithms/52657025#52657025", "title": "C/C++ bit array resolution transform algorithms", "body": "<p>Does the resolution always between 1/2 and 1/64? Or even 1/32? Because if you need very long sequence, you might need more loop nesting which might cause some slow down.</p>\n\n<p>Are you sequence always very long (millions of bits) or this is a maximum but usually your sequences are shorter? When doing high to low resolution, can you assume that data is valid or not.</p>\n\n<p>Here are some tricks:</p>\n\n<pre><code>uint64_t one = 1;\nuint64_t n_one_bits = (one &lt;&lt; n) - 1u; // valid for 0 to 63; not sure for 64\n</code></pre>\n\n<p>If your sequence are so long, you might want to check if <code>n</code> is some power of 2 and have more optimized code for those cases.</p>\n\n<p>You might find some other useful tricks here:</p>\n\n<p><a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow noreferrer\">https://graphics.stanford.edu/~seander/bithacks.html</a></p>\n\n<p>So if your resolution is 1/16, you don't need to loop individual 16 bits but you can check all 16 bits at once. Then you can repeat for next group again and again.</p>\n\n<p>If the number is not an a divider of 64, you can shift bits as appropriate each time you would cross the 64 bits boundary. Say, that your resolution is 1/5, then you could process 60 bits, then shift 4 remaining bit and combine with following 60 bits.</p>\n\n<p>If you can assume that data is valid, then you don't even need to shift the original number as you can pick the value of the appropriate bit each time.</p>\n"}], "owner": {"reputation": 31, "user_id": 10453729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7134977f46b46b3222441762a4eb66e6?s=128&d=identicon&r=PG&f=1", "display_name": "CodeForFood", "link": "https://stackoverflow.com/users/10453729/codeforfood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538701859, "creation_date": 1538608600, "last_edit_date": 1538685814, "question_id": 52636890, "link": "https://stackoverflow.com/questions/52636890/c-c-bit-array-resolution-transform-algorithms", "title": "C/C++ bit array resolution transform algorithms", "body": "<p>Anyone aware of any algorithms to up/down convert bit arrays? </p>\n\n<p>ie: when the resolution is 1/16:</p>\n\n<p>every 1 bit = 16 bits. (low resolution to high resolution)</p>\n\n<pre><code>1010 -&gt; 1111111111111111000000000000000011111111111111110000000000000000\n</code></pre>\n\n<p>and reverse, 16 bits = 1 bit (high resolution to low resolution)</p>\n\n<pre><code>1111111111111111000000000000000011111111111111110000000000000000 -&gt; 1010\n</code></pre>\n\n<p>Right now I am looping bit by bit which is not efficient. Using a whole 64-bit word would be better but run into issues when the word isn't divisible by resolution equally (some bits may spill over to the next word). </p>\n\n<p>C++:</p>\n\n<pre><code>std::vector&lt;uint64_t&gt; bitset; \n</code></pre>\n\n<p>C:</p>\n\n<pre><code>uint64_t *bitset = calloc(total_bits &gt;&gt; 6, sizeof(uint64_t)); // free() when done\n</code></pre>\n\n<p>which is accessed using:</p>\n\n<pre><code>const uint64_t idx = bit &gt;&gt; 6;\nconst uint64_t pos = bit % 64;\n\nconst bool value = (bitset[idx] &gt;&gt; pos) &amp; 1U;\n</code></pre>\n\n<p>and set/clear:</p>\n\n<pre><code>bitset[idx] |= (1UL &lt;&lt; pos);\nbitset[idx] &amp;= ~(1UL &lt;&lt; pos);\n</code></pre>\n\n<p>and the OR (or AND/XOR/AND/NOT) of two bitsets of same resolution are done using the full 64-bit word:</p>\n\n<pre><code>bitset[idx] |= source.bitset[idx];\n</code></pre>\n\n<p>I am dealing with large enough bitsets (2+ billion bits) that I'm looking for any efficiency in the loops. One way I found to optimize the loop is to check each word using <code>__builtin_popcountll</code>, and skip ahead in the loop: </p>\n\n<pre><code>for (uint64_t bit = 0; bit &lt; total_bits; bit++)\n{ \n   const uint64_t idx = bit &gt;&gt; 6;\n   const uint64_t pos = bit % 64;\n\n   const uint64_t bits = __builtin_popcountll(bitset[idx]);\n\n   if (!bits)\n   {\n      i += 63;\n      continue;\n   }\n   // process\n}\n</code></pre>\n\n<p><strong>I'm looking for algorithms/techniques more than code examples. But if you have code to share, I won't say no. Any academic research papers would be appreciated too.</strong></p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "linux", "ncurses", "curses"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1538606653, "post_id": 52636581, "comment_id": 92206375, "body": "Normally, you should not assume anything about the terminal(type) until you have identified it. getty had this -more or less hardcoded- in inittab."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1538680280, "post_id": 52637144, "comment_id": 92238614, "body": "Defining stdin and stdout to stream to the correct place works for ncurses, but fails to support the rest of the software.  The desired result is to have the software running with debug prints going to stdin and stdout while streaming NCurses to the rs232 (&quot;/dev/ttyS0&quot;) as mentioned above."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1538681926, "post_id": 52637144, "comment_id": 92239394, "body": "Sure: I specified <b><i>current</i></b>, because your application can manipulate file descriptors to do what you&#39;re suggesting."}, {"owner": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1539019566, "post_id": 52637144, "comment_id": 92340842, "body": "So I assume this from your comment. 1. Save the current stdin/stdout 2. Set the current stdin/stdout to desired device 3. Start NCurses which copies stdin/stdout in the initscr() function call using the function newterm 4. Restore stdin/stdout to previous values for use by the rest of the software package."}, {"owner": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1539019582, "post_id": 52637144, "comment_id": 92340853, "body": "The result of doing this is that the pointers of stdin/stdout are copied using newterm not the content of the stdin/stdout. After restoring stdin/stdout to the previous values ncurses stops outputting to the desired device and starts outputting on to the current terminal. If newterm used file descriptors instead of FILE * then this approach would work. Is my understanding correct from your suggestion?"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1539021968, "post_id": 52637144, "comment_id": 92341912, "body": "ncurses uses the file descriptors (not the stream).  Manipulating the file-descriptors is what I suggested.  See <b><code>fileno</code></b>"}, {"owner": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1539025178, "post_id": 52637144, "comment_id": 92343285, "body": "Thanks I will look into that."}, {"owner": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "edited": false, "score": 0, "creation_date": 1539811092, "post_id": 52637144, "comment_id": 92641868, "body": "After looking into manipulating the file descriptors I added an update to the main post that captures the essence of what I believe the approach would look like, and as noted it doesn&#39;t work as I had hoped."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 1, "last_activity_date": 1538611076, "creation_date": 1538611076, "answer_id": 52637144, "question_id": 52636581, "link": "https://stackoverflow.com/questions/52636581/how-to-direct-ncurses-output-to-a-serial-terminal-on-boot-from-linux/52637144#52637144", "title": "How to direct NCurses output to a serial terminal on boot from Linux?", "body": "<p><code>initscr</code> doesn't assume anything about the devices: it uses the <em>current</em> input/output <em>stdin</em> and <em>stdout</em> when initializing (and via <code>newterm</code>, <code>setupterm</code>, it copies the file-descriptors).</p>\n\n<p>If your application (or environment/scripting) sets those streams to the device you'd like to connect to, that should be enough for the C++ interface.  ncurses doesn't use the C+ <em>cout</em>, etc.</p>\n"}], "owner": {"reputation": 31, "user_id": 10453694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e6ef80f50c439be1044549608ac1a?s=128&d=identicon&r=PG&f=1", "display_name": "stew.hansen", "link": "https://stackoverflow.com/users/10453694/stew-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539105105, "creation_date": 1538606047, "last_edit_date": 1539105105, "question_id": 52636581, "link": "https://stackoverflow.com/questions/52636581/how-to-direct-ncurses-output-to-a-serial-terminal-on-boot-from-linux", "title": "How to direct NCurses output to a serial terminal on boot from Linux?", "body": "<h1>Overview</h1>\n\n<p>I have been writing code to display menus and screens using the ncurses++ library. The desired result is to have these menus and screens output across a serial terminal interface.</p>\n\n<h1>Current Attempts</h1>\n\n<p>I can successfully do this using the base C ncurses library using calls.</p>\n\n<pre><code>if( (FDTERM = fopen(\"/dev/ttyS0\", \"r+\")) != NULL )\n{\n\n  if(FDTERM == NULL)\n  {\n    fprintf(stderr, \"Error opening device: %s.\\n\", ncurses_device); \n  }\n\n  /* Set Screen */\n  MY_SCREEN = newterm(NULL, FDTERM, FDTERM);\n\n  if(MY_SCREEN != NULL)\n  {\n    /* Set the terminal */\n    set_term(MY_SCREEN);\n  }\n}\n</code></pre>\n\n<p>and for getting this to work in c++ I wrote some intercept.c code to override what the call to ::initscr() in cursesw.cc actually calls to</p>\n\n<pre><code>#define ncurses_device  \"/dev/ttyS0\"\n\nNCURSES_EXPORT(WINDOW *) initscr(void)\n{\n  WINDOW *result;\n\npthread_mutex_lock(&amp;CUSTOM_LOCK);\n\nif (!CUSTOM_INITIALIZED)\n{\n  CUSTOM_INITIALIZED = true;\n\n  if( (FDTERM = fopen(ncurses_device, \"r+\")) != NULL )\n  {\n\n  if(FDTERM == NULL)\n  {\n    fprintf(stderr, \"Error opening device: %s.\\n\", ncurses_device); \n  }\n\n  /* Set Screen */\n  MY_SCREEN = newterm(NULL, FDTERM, FDTERM);\n\n  if(MY_SCREEN != NULL)\n  {\n    /* Set the terminal */\n    set_term(MY_CDU_SCREEN);\n  }\n\n  /* def_shell_mode - done in newterm/_nc_setupscreen */\n  def_prog_mode();\n}\nelse\n{\n  CUSTOM_INITIALIZED = true;\n  NCURSES_CONST char *name;\n  if ((name = getenv(\"TERM\")) == 0 || *name == '\\0')\n  {\n    static char unknown_name[] = \"unknown\";\n    name = unknown_name;\n  }\n\n  if (newterm(name, stdout, stdin) == 0)\n  {\n    fprintf(stderr, \"Error opening terminal: %s.\\n\", name);\n    result = NULL;\n  }\n }\n}\n#if NCURSES_SP_FUNCS\n#ifdef CURRENT_SCREEN\n NCURSES_SP_NAME(def_prog_mode) (CURRENT_SCREEN);\n#else\n NCURSES_SP_NAME(def_prog_mode) (SP);\n#endif\n#else\n def_prog_mode();\n#endif\n result = stdscr;\n\n pthread_mutex_unlock(&amp;CUSTOM_LOCK);\n\n return Win(result);\n}\n</code></pre>\n\n<p>The intercept.c allows the device as defined to be used if available. It \n also allows initscr() to fall back to the default behavior of using the current terminal.</p>\n\n<p>This works when used when for debugging, but I feel there has to be a better way to setup NCurses or the environment to direct NCurses output over the desired serial port.</p>\n\n<p>The above solution now does not work when executing code on boot as there is not a terminal definition available.</p>\n\n<p>This is being developed to support both RHEL 7 and 6. Some research seems to point to creating a new environment service using getty, agetty or by editing start-tty.conf as noted (<a href=\"https://unix.stackexchange.com/a/318647\">https://unix.stackexchange.com/a/318647</a>). </p>\n\n<p>But the other issue is pointing NCurses++ to output to the correct environment. From what I have seen in NCurses source code it appears that the ::initscr() is called by default from cursesw.cc, which makes it harder to just point NCurses to a new environment.</p>\n\n<h1>Questions</h1>\n\n<p>How do I setup NCurses++ to output to a specified tty?</p>\n\n<p>How to properly setup an environment for NCurses to use on system boot?</p>\n\n<h1>Update 1:</h1>\n\n<p>Updated code to do the following:</p>\n\n<pre><code>// Save the current stdin/stdout file descriptors\nint saved_stdin = dup(fileno(stdin));\nint saved_stdout = dup(fileno(stdout));\n\n// Set the stdin/stdout to the desired device\nfreopen(ncurses_device, \"w+\", stdout);\nfreopen(ncurses_device, \"r+\", stdin);\n\n// Initialize the NCursesMenu\nNCursesMenu *m_pMenu =  new NCursesMenu(m_pMenuItems);\n\n// Restore the saved_stdin/stdout to the correct locations\ndup2(saved_stdin, STDIN_FILENO);\ndup2(saved_stdout, STDOUT_FILENO);\n\n// Close the saved_stdin/stdout file descriptors\nclose(saved_stdin);\nclose(saved_stdout);\n</code></pre>\n\n<p>This allows NCurses to copy the current FILE* as defined <a href=\"https://github.com/ThomasDickey/ncurses-snapshots/blob/master/ncurses/base/lib_newterm.c#L174\" rel=\"nofollow noreferrer\">here</a> in <strong>newterm</strong>, but once the stdin/stdout FILE* is restored to the saved file descriptor the manipulation is lost. If the device is only pointed to the new device it works for NCurses, but all debug/test information is not visible because it is overwritten by NCurses in the current terminal.</p>\n"}, {"tags": ["c", "syntax", "formatting"], "comments": [{"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1538602475, "post_id": 52635914, "comment_id": 92205180, "body": "@user3121023 Thanks. Is there any site that has complete list of % usages in C output?"}, {"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1538603029, "post_id": 52635914, "comment_id": 92205377, "body": "@user3121023. No I don&#39;t have Linux and that is because I want a full list on internet. Anyway, if you submit your answer, I can accept it as the best answer. Thanks."}, {"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1538603376, "post_id": 52635914, "comment_id": 92205495, "body": "@user3121023. Thank you."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1538606317, "post_id": 52635914, "comment_id": 92206317, "body": "Doesn&#39;t your textbook explain how to use <code>printf()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1538604962, "last_edit_date": 1592644375, "creation_date": 1538603409, "answer_id": 52636175, "question_id": 52635914, "link": "https://stackoverflow.com/questions/52635914/a-question-about-printing-numbers-in-a-specific-format-in-c/52636175#52636175", "title": "A question about printing numbers in a specific format in C", "body": "<blockquote>\n<p>We want to get a positive integer number in seconds and print it with format HH:MM:SS.</p>\n<p>I know how to get the hour and minute and second numbers but my problem is with the output format.</p>\n</blockquote>\n<p>Use <code>&quot;%02d&quot;</code> <a href=\"https://stackoverflow.com/questions/52635914/a-question-about-printing-numbers-in-a-specific-format-in-c#comment92205078_52635914\">@user3121023</a>.</p>\n<p><code>&quot;2&quot;</code> is the <em>minimum</em> text width.<br />\n<code>&quot;0&quot;</code>  causes padding to use <code>'0'</code> to make up the minimum width.</p>\n<pre><code>printf(&quot;%02d:%02d:%02d&quot;, hour, minute, second);\n</code></pre>\n<hr />\n<p>More interesting is how to print all <code>int total</code>.  That has sign issues with breaking that into <code>hour, minute, second</code> and range issues for <code>hour</code>.</p>\n<p><code>&quot;.2&quot;</code> is the <em>minimum</em> digits width.  This should be used with <code>hour</code> to insure -7 is printed as &quot;-07&quot; and not &quot;-7&quot;.</p>\n<pre><code>#define SECS_PER_MIN 60\n#define MINS_PER_HOUR 60\n\n// Print time, valid for all `int`\nvoid print_hms(int total /* total seconds */) {\n  int sec =  total%SECS_PER_MIN;\n  total /= SECS_PER_MIN;\n  int min =  total%MINS_PER_HOUR;\n  total /= MINS_PER_HOUR;\n  int hour = total;\n\n  // use abs() to print negative, `min,sec` without a sign\n  printf(&quot;%0.2d:%02d:%02d&quot;, hour, abs(min), abs(sec));\n}\n</code></pre>\n<p>Sample</p>\n<pre><code>print_hms(0);\nprint_hms(3600 + 23*60 + 45);\nprint_hms(24*3600);\nprint_hms(-7*3600);\nprint_hms(INT_MIN);\n\n00:00:00\n01:23:45\n24:00:00\n-07:00:00\n-596523:14:08\n</code></pre>\n"}], "owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 52636175, "answer_count": 1, "score": 0, "last_activity_date": 1538604962, "creation_date": 1538602011, "question_id": 52635914, "link": "https://stackoverflow.com/questions/52635914/a-question-about-printing-numbers-in-a-specific-format-in-c", "title": "A question about printing numbers in a specific format in C", "body": "<p>C-Programming Question:</p>\n\n<blockquote>\n  <p>We want to get a positive integer number in seconds and print it with\n  format HH:MM:SS.</p>\n</blockquote>\n\n<p>For example if we get 3600, we must print 01:00:00. or 4201 -> 01:10:01 (The preceding 0s must be printed). I know how to get the hour and minute and second numbers but my problem is with the output format.</p>\n\n<p>Note: We can't use any time related function (for example time.h functions, structs and etc.) and also we cannot use if-statement (in order to check whether the hour or minute or second number is less than 10 or not). How can we do this? Is it possible?</p>\n"}, {"tags": ["c", "debugging", "lldb"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1538601544, "post_id": 52635772, "comment_id": 92204857, "body": "Are you sure you are not somehow confusing the static <code>debug_level</code> variable declared in <code>debug.c</code> with local <code>debug_level</code> variable declared in <code>main</code>?"}, {"owner": {"reputation": 5460, "user_id": 1091751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6994660d273f4125a91c6406f6de5a07?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/1091751/user1234"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1538601797, "post_id": 52635772, "comment_id": 92204933, "body": "@AnT I don&#39;t think so, since they both should be set to 1, and in the second invocation I posted the value is 0 (which is the issue)."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1538601897, "post_id": 52635772, "comment_id": 92204966, "body": "But what is <code>debug_info</code>? According to your description, call to <code>debug_info</code> from line 322 lands in <code>debug_info_real</code>. So, is <code>debug_info</code> some kind of wrapper for <code>debug_info_real</code>? Where is it defined?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1538601944, "post_id": 52635772, "comment_id": 92204978, "body": "Post your code here, not just at a remote site. Please reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> rather than posting the entire thing."}, {"owner": {"reputation": 5460, "user_id": 1091751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6994660d273f4125a91c6406f6de5a07?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/1091751/user1234"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1538601991, "post_id": 52635772, "comment_id": 92204997, "body": "@AnT it&#39;s defined here: <a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/common/debug.h#L29\" rel=\"nofollow noreferrer\">github.com/libimobiledevice/libimobiledevice/blob/&hellip;</a>"}, {"owner": {"reputation": 5460, "user_id": 1091751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6994660d273f4125a91c6406f6de5a07?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/1091751/user1234"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1538602042, "post_id": 52635772, "comment_id": 92205019, "body": "@Barmar I&#39;m not sure how to do that, since it&#39;s not my code (I&#39;m debugging a 3rd party program that I&#39;ve compiled and isn&#39;t working)."}, {"owner": {"reputation": 5460, "user_id": 1091751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6994660d273f4125a91c6406f6de5a07?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/1091751/user1234"}, "edited": false, "score": 0, "creation_date": 1538603359, "post_id": 52635772, "comment_id": 92205492, "body": "I&#39;ve updated the question with inline code examples and the lldb output if it helps. Thanks!"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1538604710, "post_id": 52635772, "comment_id": 92205887, "body": "Maybe you forgot to compile the library with <code>-fPIC</code>. Shared libraries will behave strangely if it gets swapped out, and then restored."}], "answers": [{"tags": [], "owner": {"reputation": 4998, "user_id": 7233423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810e59b837c9e8b352615784397db0ea?s=128&d=identicon&r=PG&f=1", "display_name": "xhienne", "link": "https://stackoverflow.com/users/7233423/xhienne"}, "is_accepted": true, "score": 2, "last_activity_date": 1538606907, "creation_date": 1538606907, "answer_id": 52636699, "question_id": 52635772, "link": "https://stackoverflow.com/questions/52635772/how-does-the-location-in-memory-of-a-static-variable-change-in-this-c-program/52636699#52636699", "title": "How does the location in memory of a static variable change in this C program?", "body": "<p>You have no problem understanding how static variables work.</p>\n\n<p>Nothing sure, but apparently the problem lies with the linking stage. Probably a mix of static/dynamic linking. According to your debugger output, you are including the same code twice :</p>\n\n<ul>\n<li><code>libimobiledevice.la</code> includes <code>common/debug.c</code> (through <code>common/libinternalcommon.la</code>)</li>\n<li><code>idevicedebug</code> seems to include it statically (through <code>libinternalcommon</code> too), and dynamically through <code>libimobiledevice</code>.</li>\n</ul>\n\n<p>I would try removing <code>common/libinternalcommon.la</code> from <code>idevicedebug_LDFLAGS</code> in <code>tools/Makefile.am</code>.</p>\n\n<p><code>autogen.sh</code> fails on my machine, so I can't help more, but you get the idea.</p>\n"}], "owner": {"reputation": 5460, "user_id": 1091751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6994660d273f4125a91c6406f6de5a07?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/1091751/user1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 52636699, "answer_count": 1, "score": 4, "last_activity_date": 1538786550, "creation_date": 1538601185, "last_edit_date": 1538786550, "question_id": 52635772, "link": "https://stackoverflow.com/questions/52635772/how-does-the-location-in-memory-of-a-static-variable-change-in-this-c-program", "title": "How does the location in memory of a static variable change in this C program?", "body": "<p>I'm currently debugging a program (using lldb) that uses a static variable to toggle debug logging on or off.  Weirdly, some of the log messages are not showing (while others are).</p>\n\n<p>I'm setting a hardware breakpoint on the <a href=\"https://stackoverflow.com/questions/4801175/tracking-variable-or-memory-change-in-xcode/15783655#15783655\">address of the variable</a> when it is initially set: <a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/tools/idevicedebug.c#L232\" rel=\"nofollow noreferrer\">idevicedebug.c#L232</a>, <a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/common/debug.c#L46\" rel=\"nofollow noreferrer\">debug.c#L46</a></p>\n\n<p>However, if I step into one of the logging functions that isn't working, not only does the hardware breakpoint not hit, if I print the address of the static variable, it's totally different. </p>\n\n<p>Called here for example: <a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/tools/idevicedebug.c#L322\" rel=\"nofollow noreferrer\">idevicedebug.c#L322</a>, the address of <code>debug_level</code> is different than what it was in <code>internal_set_debug_level</code> initially (and the value is now 0 instead of 1): <a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/common/debug.c#L87\" rel=\"nofollow noreferrer\">debug.c#L87</a></p>\n\n<p>Am I misunderstanding how static variables work?  Could the binary be linked to two versions of the same code somehow? I'm unsure how to debug this further.</p>\n\n<p>EDIT: Here is a rundown of the code in question (edited for brevity) a CLI utility for sending GDB packet commands to an iOS device over a USB connection:</p>\n\n<p><a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/tools/idevicedebug.c\" rel=\"nofollow noreferrer\"><code>idevicedebug.c</code></a>:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    /* ... */\n    int i;\n    int debug_level = 0;\n    /* ... */\n\n\n    /* parse command line arguments */\n    for (i = 1; i &lt; argc; i++) {\n        if (!strcmp(argv[i], \"-d\") || !strcmp(argv[i], \"--debug\")) {\n            debug_level++;\n            idevice_set_debug_level(debug_level); // &lt;- local debug_level is 1\n            continue;\n        }\n    }\n\n    /* ... */\n\n    /* set maximum packet size */\n    debug_info(\"Setting maximum packet size...\"); // &lt;- this does not print to stdout\n\n    /* ... */\n</code></pre>\n\n<p><a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/common/debug.h\" rel=\"nofollow noreferrer\"><code>debug.h</code></a>:</p>\n\n<pre><code>/* ... */\n\n#if defined(__STDC_VERSION__) &amp;&amp; __STDC_VERSION__ &gt;= 199901L &amp;&amp; !defined(STRIP_DEBUG_CODE)\n#define debug_info(...) debug_info_real (__func__, __FILE__, __LINE__, __VA_ARGS__)\n#elif defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 3 &amp;&amp; !defined(STRIP_DEBUG_CODE)\n#define debug_info(...) debug_info_real (__FUNCTION__, __FILE__, __LINE__, __VA_ARGS__)\n#else\n#define debug_info(...)\n#endif\n\nvoid debug_info_real(const char *func,\n                                            const char *file,\n                                            int line,\n                                            const char *format, ...);\n\n/* ... */\n\nvoid internal_set_debug_level(int level);\n\n#endif\n</code></pre>\n\n<p><a href=\"https://github.com/libimobiledevice/libimobiledevice/blob/b34e3435c21d06b3e5a4e7b5246fb6ddb6641a9f/common/debug.c\" rel=\"nofollow noreferrer\"><code>debug.c</code></a>:</p>\n\n<pre><code>/* ... */\n\nstatic int debug_level;\n\nvoid internal_set_debug_level(int level)\n{\n    debug_level = level; // &lt;- static debug_level set to 1\n}\n\n/* ... */\n\nvoid debug_info_real(const char *func, const char *file, int line, const char *format, ...)\n{\n#ifndef STRIP_DEBUG_CODE\n    va_list args;\n    char *buffer = NULL;\n\n    if (!debug_level) // &lt;- this is 0 despite being set previously\n        return;       // breakpoint in internal_set_debug_level shows\n                      // debug_level at 0x00000001000b75fc (== 1), yet\n                      // here at 0x00000001000041b4 (== 0)\n\n    /* run the real fprintf */\n    va_start(args, format);\n    (void)vasprintf(&amp;buffer, format, args);\n    va_end(args);\n\n    debug_print_line(func, file, line, buffer);\n\n    free(buffer);\n#endif\n}\n</code></pre>\n\n<p>lldb output:</p>\n\n<pre><code>Process 29615 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.2\n    frame #0: 0x00000001000ae0c7 libimobiledevice.6.dylib`internal_set_debug_level(level=1) at debug.c:46\n   43\n   44   void internal_set_debug_level(int level)\n   45   {\n-&gt; 46           debug_level = level;\n   47   }\n   48\nTarget 0: (idevicedebug) stopped.\n(lldb) p debug_level\n(int) $0 = 0\n(lldb) p &amp;debug_level\n(int *) $1 = 0x00000001000b75fc\n(lldb) watch set expression (int *)0x00000001000b75fc\nWatchpoint created: Watchpoint 1: addr = 0x1000b75fc size = 8 state = enabled type = w\n    new value: 0x0000000000000000\n(lldb) n\n\nWatchpoint 1 hit:\nold value: 0x0000000000000000\nnew value: 0x0000000000000001\nProcess 29615 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = watchpoint 1\n    frame #0: 0x00000001000ae0d0 libimobiledevice.6.dylib`internal_set_debug_level(level=1) at debug.c:47\n   44   void internal_set_debug_level(int level)\n   45   {\n   46           debug_level = level;\n-&gt; 47   }\nTarget 0: (idevicedebug) stopped.\n(lldb) c\nProcess 29615 resuming\nProcess 29615 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 2.1\n    frame #0: 0x0000000100001e58 idevicedebug`main(argc=4, argv=0x00007fff5fbfef50) at idevicedebug.c:359\n   357\n   358                          /* set maximum packet size */\n-&gt; 359                          debug_info(\"Setting maximum packet size...\");\n   360\nTarget 0: (idevicedebug) stopped.\n(lldb) s\nProcess 29615 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = step in\n    frame #0: 0x0000000100002fff idevicedebug`debug_info_real(func=\"main\", file=\"idevicedebug.c\", line=359, format=\"Setting maximum packet size...\") at debug.c:85\n   82   {\n   83   #ifndef STRIP_DEBUG_CODE\n   84           va_list args;\n-&gt; 85           char *buffer = NULL;\n   86\n   87           if (!debug_level)\n   88                   return;\nTarget 0: (idevicedebug) stopped.\n(lldb) p debug_level\n(int) $3 = 0\n(lldb) p &amp;debug_level\n(int *) $4 = 0x00000001000041b4\n</code></pre>\n"}, {"tags": ["c", "pthreads", "mutex", "semaphore"], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 10406012, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iaNm9BiKDVg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVRA7wmA2x-JgjtPCqHjqv3EF3SoQ/mo/photo.jpg?sz=128", "display_name": "Preeti", "link": "https://stackoverflow.com/users/10406012/preeti"}, "is_accepted": false, "score": 1, "last_activity_date": 1538641099, "creation_date": 1538641099, "answer_id": 52642124, "question_id": 52635670, "link": "https://stackoverflow.com/questions/52635670/thread-main-with-2-sons-thread-to-loop-x-times-product-consumer/52642124#52642124", "title": "Thread main with 2 sons thread to loop x times product &amp; consumer", "body": "<p>Not very clear if you only want to send and receive multiple values.</p>\n\n<p>For sending and receiving multiple values, use for loop in producer and consumer and an array as randomValue. If you want to produce one value and consume it first, the loop will include \"sem_post(&amp;mex);\" in producer and \"sem_wait(&amp;mex);\" in the loop. Otherwise, sem_post() and sem_wait() will be outside loop.</p>\n"}, {"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 1, "last_activity_date": 1538641484, "creation_date": 1538641484, "answer_id": 52642219, "question_id": 52635670, "link": "https://stackoverflow.com/questions/52635670/thread-main-with-2-sons-thread-to-loop-x-times-product-consumer/52642219#52642219", "title": "Thread main with 2 sons thread to loop x times product &amp; consumer", "body": "<p>You can do what you want with a few modifications:</p>\n\n<ul>\n<li>Instead of one semaphore, use two: one semaphore to tell consumer that a \nnumber is ready, one to tell the producer that consumer is ready to consume.</li>\n<li>Have a special value to indicate to the consumer that the producer won't \nproduce anymore.</li>\n</ul>\n\n<p>So, you can change your code this way:</p>\n\n<p><em>Semaphores declaration</em></p>\n\n<pre><code>/*semaphores  */\n/* Set by producer when production is ready */\nsem_t mex_prod;\n/* Set by consumer when ready to consume */\nsem_t mex_cons;\n</code></pre>\n\n<p><em>Semaphores init</em>    </p>\n\n<pre><code>/* by default, nothing produced */\nif (sem_init(&amp;mex_prod,0,0)  != 0){\n    perror(\"sem_init\");\n    exit(EXIT_FAILURE);\n}\n/* by default, consumer is not ready */\nif (sem_init(&amp;mex_cons,0,0)  != 0){\n    perror(\"sem_init\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p><em>producer thread function</em></p>\n\n<p>(I removed your comment)</p>\n\n<pre><code>void *producer(void *arg) {\n    char statearray[256];\n    initstate(time(NULL), statearray, 256);\n\n    /* choose how much to product  */\n    int number_of_productions = 2 + random()%5;\n\n    printf(\"prod: %d to produce\\n\", number_of_productions );\n\n    /* this loop can be replaced by some for (i = 0; i&lt; num; ++i) loop */\n    while(number_of_productions--)\n    {\n        sleep(duration(1,3));           \n\n        /* wait for consumer to be ready */\n        sem_wait(&amp;mex_cons);\n\n        printf(\"prod: producing ...\\n\");\n\n        randomValue = random();\n        randomValue = ((double) randomValue / RAND_MAX)*6+1;\n\n        printf(\"prod: delivering  %ld\\n\", randomValue);\n        sem_post(&amp;mex_prod); \n    }\n\n    sem_wait(&amp;mex_cons);\n\n    /* generate a special value to tell the consumer that no new value\n       will be given */\n    randomValue  = -1;\n\n    sem_post(&amp;mex_prod); \n\n    pthread_exit(NULL);\n}\n</code></pre>\n\n<p><em>consumer thread function</em></p>\n\n<pre><code>void *consumer(void *arg) {\n\n    /* tell producer that consumer is ready */\n    sem_post(&amp;mex_cons);\n\n    /* since we don't know how many value will be generated, we have an\n       infinite loop */\n    while(1)\n    {\n        sleep(duration(1,5));\n        sem_wait(&amp;mex_prod);\n        printf(\"cons: consuming ...\\n\");\n\n        printf(\"cons: received %ld\\n\", randomValue);\n\n        /* value has been consumed, tell producer we are ready for a new one */\n        sem_post(&amp;mex_cons); \n\n        /* if randomValue is -1, we break the loop since no more value will come */\n        if (-1 == randomValue)             \n            break;\n\n    }\n    pthread_exit(NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 9827438, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ana maria", "link": "https://stackoverflow.com/users/9827438/ana-maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 52642219, "answer_count": 2, "score": 0, "last_activity_date": 1538641484, "creation_date": 1538600605, "question_id": 52635670, "link": "https://stackoverflow.com/questions/52635670/thread-main-with-2-sons-thread-to-loop-x-times-product-consumer", "title": "Thread main with 2 sons thread to loop x times product &amp; consumer", "body": "<p>I've wrote a program in which the thread main creates 2 sons threads . One waits a random time then produces a random value between 1 and 6 and puts the value into the randomValue variable . The other waits and reads the global variable randomValue and prints the variable.So I used a single semaphore to be sure that the thread who reads will always read the value written by the other thread.</p>\n\n<p>I want to modify so that each thread does I don't know x loops( 2,3...) so that it can produce x times a random value and put this value into randomValue and the other thread will read the x times the randomValue variable and will print it . Any idea to modify the code is welcomed . Thank you very much .</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n\n/* variable shared by producer and consumer \n (producer writes a value between 1 and 6) */\n\nlong randomValue = 0;\n/**semaphore  **/\nsem_t mex;\n\n\n// function that create a random sleep-time (to induce unpredictability)\nstatic int duration(int min, int max)\n{\n  static int first_time = 1;\n\n  // Seed the random number generator with the current time\n  // of day if we haven't done so yet.\n  if (first_time) {\n    first_time = 0;\n    srand48((int) time(NULL));\n  }\n  return (int) (min + drand48()*(max - min));\n}\n\n/* producer program */\nvoid *producer(void *arg) {\n  char statearray[256];\n\n  // Initialize random generator\n  // Note that initstate and random are not threadsafe\n  initstate(time(NULL), statearray, 256);\n\n   sleep(duration(1,3));\n   printf(\"prod: producing ...\\n\");\n//random value 1 et 6\n   randomValue = random();\n   randomValue = ((double) randomValue / RAND_MAX)*6+1;\n//put the value\n   printf(\"prod: delivering  %ld\\n\", randomValue);\n   sem_post(&amp;mex); \n  pthread_exit(NULL);\n}\n\n/* consumer program */\nvoid *consumer(void *arg) {\n\n\n  sleep(duration(1,5));\n  sem_wait(&amp;mex);\n  printf(\"cons: consuming ...\\n\");\n  // \n\n  printf(\"cons: received %ld\\n\", randomValue);\n\n\n  pthread_exit(NULL);\n}\n\n/* main thread */\nint main(int argc, char *argv[]) {\n  pthread_t tidprod, tidcons;\n\n\n    if (sem_init(&amp;mex,0,0)  != 0){\n    perror(\"sem_init\");\n    exit(EXIT_FAILURE);\n   }\n\n  if (pthread_create(&amp;tidprod, NULL, producer, NULL) != 0) {\n    perror(\"pthread_create\");\n  }\n  if (pthread_create(&amp;tidcons, NULL, consumer, NULL) != 0) {\n    perror(\"pthread_create\");\n  }\n\n\n  if (pthread_join(tidcons, NULL) != 0) {\n    perror(\"pthread_join prod\");\n  }\n\n  if (pthread_join(tidprod, NULL) != 0) {\n    perror(\"pthread_join prod\");\n  }\n\n  fflush(stdout);\n  pthread_exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "centos", "unistd.h", "sbrk"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1538599720, "post_id": 52635400, "comment_id": 92204144, "body": "Also, why are you including the standard malloc.h and then defining your own?"}, {"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1538599859, "post_id": 52635400, "comment_id": 92204212, "body": "I&#39;m including my own malloc.h, denoted by the quotes. The standard lib malloc would be denoted by &lt;&gt;"}, {"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1538599915, "post_id": 52635400, "comment_id": 92204232, "body": "And @user3386109, I&#39;m on CentOS Linux"}], "answers": [{"comments": [{"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 1, "creation_date": 1538600580, "post_id": 52635516, "comment_id": 92204487, "body": "And starting with glibc 2.19, it is declared by default (<code>_DEFAULT_SOURCE</code>), which may have led to the confusion."}, {"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1538600685, "post_id": 52635516, "comment_id": 92204539, "body": "Using your suggested flag worked like a charm. Thanks so much!"}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 1, "last_activity_date": 1538602740, "last_edit_date": 1538602740, "creation_date": 1538599893, "answer_id": 52635516, "question_id": 52635400, "link": "https://stackoverflow.com/questions/52635400/after-importing-unistd-h-compiler-states-that-sbrk-is-an-implicit-declaration/52635516#52635516", "title": "After importing unistd.h, compiler states that sbrk() is an implicit declaration. Why is this?", "body": "<p>Did you take a look at the Feature Test Macro requirements?</p>\n\n<blockquote>\n  <p>Feature Test Macro Requirements for glibc (see\n  feature_test_macros(7)):</p>\n\n<pre><code>   brk(), sbrk():\n       Since glibc 2.12:\n           _BSD_SOURCE || _SVID_SOURCE ||\n               (_XOPEN_SOURCE &gt;= 500 ||\n                   _XOPEN_SOURCE &amp;&amp; _XOPEN_SOURCE_EXTENDED) &amp;&amp;\n               !(_POSIX_C_SOURCE &gt;= 200112L || _XOPEN_SOURCE &gt;= 600)\n       Before glibc 2.12:\n           _BSD_SOURCE || _SVID_SOURCE || _XOPEN_SOURCE &gt;= 500 || _XOPEN_SOURCE &amp;&amp; _XOPEN_SOURCE_EXTENDED\n</code></pre>\n</blockquote>\n\n<p>See if compiling with something like <code>-D_SVID_SOURCE</code> will work (though it looks like there are a number of options based on that macro list)</p>\n\n<p>As of glibc 2.19, a new feature test macro was added, <code>_DEFAULT_SOURCE</code> which is meant to replace <code>_BSD_SOURCE</code> and <code>_SVID_SOURCE</code>.  For more information on <code>_DEFAULT_SOURCE</code>, see this question: <a href=\"https://stackoverflow.com/questions/29201515/what-does-d-default-source-do\">What does -D_DEFAULT_SOURCE do?</a></p>\n"}], "owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 52635516, "answer_count": 1, "score": 0, "last_activity_date": 1538602740, "creation_date": 1538599417, "last_edit_date": 1538600310, "question_id": 52635400, "link": "https://stackoverflow.com/questions/52635400/after-importing-unistd-h-compiler-states-that-sbrk-is-an-implicit-declaration", "title": "After importing unistd.h, compiler states that sbrk() is an implicit declaration. Why is this?", "body": "<p>I'm trying to implement <code>malloc</code> on CentOS, but I keep getting the error:</p>\n\n<pre><code>malloc.c: In function \u2018malloc\u2019:\nmalloc.c:11:5: error: implicit declaration of function \u2018sbrk\u2019 [-Werror=implicit-function-declaration]\n     mem_ptr = sbrk(SIXTY_FOUR_K); /* Allocate 64 kB of memory */\n</code></pre>\n\n<p>Here is the code that the compiler warning is referencing:</p>\n\n<pre><code>#include \"malloc.h\"\n#include &lt;unistd.h&gt;\n\nvoid * malloc(size_t bytes) {\n    uintptr_t mem_ptr;\n\n    if (bytes &lt;= 0) { /* If user passes in bad value, return NULL */\n        return NULL;\n    }\n\n    mem_ptr = sbrk(SIXTY_FOUR_K); /* Allocate 64 kB of memory */\n\n    if (mem_ptr == -1) { /* sbrk() failed */\n        return NULL;\n    }\n\n    return (void *)mem_ptr;\n}\n</code></pre>\n\n<p>According to the documentation on <code>sbrk</code>, you should just have to import <code>unistd.h</code>, which I do. Is there something I'm doing wrong?</p>\n"}, {"tags": ["c", "codeblocks"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1538598231, "post_id": 52635098, "comment_id": 92203483, "body": "Might be a difference in the working directory when you run from the IDE."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1538598362, "post_id": 52635098, "comment_id": 92203545, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please post the image not a link to it. Are you sure you are testing the release target?"}, {"owner": {"reputation": 11, "user_id": 10453394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6388acb14f90bff576f378a2a38d1614?s=128&d=identicon&r=PG&f=1", "display_name": "Kyraz", "link": "https://stackoverflow.com/users/10453394/kyraz"}, "edited": false, "score": 0, "creation_date": 1538598716, "post_id": 52635098, "comment_id": 92203711, "body": "Hi again, thanks for your quick answers ! Moving the image in the project directory worked."}, {"owner": {"reputation": 1022, "user_id": 154911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jYIPt.gif?s=128&g=1", "display_name": "ollydbg23", "link": "https://stackoverflow.com/users/154911/ollydbg23"}, "edited": false, "score": 0, "creation_date": 1538802599, "post_id": 52635098, "comment_id": 92281089, "body": "By default, when your create a Code::Blocks project, the default working directory is the folder where your cbp file exists."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1538603030, "creation_date": 1538603030, "answer_id": 52636106, "question_id": 52635098, "link": "https://stackoverflow.com/questions/52635098/c-codeblocks-set-programs-arguments/52636106#52636106", "title": "C - CodeBlocks - set program&#39;s arguments", "body": "<p>The current working directory is maybe not the directory your <code>oil.exe</code> and <code>lena.ppm</code> are in but the project directory. Try placing the picture there or specify the full path.</p>\n"}], "owner": {"reputation": 11, "user_id": 10453394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6388acb14f90bff576f378a2a38d1614?s=128&d=identicon&r=PG&f=1", "display_name": "Kyraz", "link": "https://stackoverflow.com/users/10453394/kyraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538603030, "creation_date": 1538598086, "last_edit_date": 1538598177, "question_id": 52635098, "link": "https://stackoverflow.com/questions/52635098/c-codeblocks-set-programs-arguments", "title": "C - CodeBlocks - set program&#39;s arguments", "body": "<p>My question is pretty simple, I made a program (oil.exe) in C that applies an oil filter to an image. To make it run, I just type in the command line:</p>\n\n<pre><code>C:\\...\\oil.exe lena.ppm 5 25\n</code></pre>\n\n<p>Where the first argument is the image to edit, that is located in the same folder than oil.exe, the two last arguments are filter parameters. It works fine.</p>\n\n<p>Now I want to directly launch the program from CodeBlocks, where I can set the 3 arguments in Project -> set program's arguments. My problem is that it doesn't work, the program fails to open the file while I am typing my arguments exactly in the same way :</p>\n\n<p><a href=\"https://i.stack.imgur.com/sdXkd.png\" rel=\"nofollow noreferrer\">Example</a></p>\n\n<p>Am I doing a mistake somewhere ?</p>\n"}, {"tags": ["c", "arrays", "string", "function"], "comments": [{"owner": {"reputation": 573, "user_id": 8168483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c739c33f9cbd40c31fed10707f1a8e88?s=128&d=identicon&r=PG&f=1", "display_name": "kerrytazi", "link": "https://stackoverflow.com/users/8168483/kerrytazi"}, "edited": false, "score": 3, "creation_date": 1538597539, "post_id": 52634855, "comment_id": 92203192, "body": "replace <code>&lt;=</code> with <code>&lt;</code> in your loop"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1538597876, "post_id": 52634855, "comment_id": 92203323, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">Tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Please <a href=\"https://stackoverflow.com/posts/52634855/edit\">edit</a> your post and fix your code indentation. It&#39;s nice when an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> includes a <code>main</code> function that calls the function you are debugging."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1538597949, "post_id": 52634855, "comment_id": 92203359, "body": "Also, learn to use whatever debugger is available in your development environment. Buffer overruns are easily detected by stepping through your own code and watching your local variables."}, {"owner": {"reputation": 11, "user_id": 10453005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0435d80df62a65e9d404714f583246?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Tesla", "link": "https://stackoverflow.com/users/10453005/michael-tesla"}, "reply_to_user": {"reputation": 573, "user_id": 8168483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c739c33f9cbd40c31fed10707f1a8e88?s=128&d=identicon&r=PG&f=1", "display_name": "kerrytazi", "link": "https://stackoverflow.com/users/8168483/kerrytazi"}, "edited": false, "score": 0, "creation_date": 1538598275, "post_id": 52634855, "comment_id": 92203509, "body": "Thanks for the suggestion @kerrytazi! However, after I did the above change, the str value is getting printed as null. Can you help me with this?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538598772, "post_id": 52634855, "comment_id": 92203735, "body": "<code>scanf(&quot; %[^\\n]c&quot;, &amp;rchar);</code> is bad"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1538598713, "last_edit_date": 1538598713, "creation_date": 1538598627, "answer_id": 52635216, "question_id": 52634855, "link": "https://stackoverflow.com/questions/52634855/passing-an-array-of-characters-as-function-arguments/52635216#52635216", "title": "Passing an array of characters as function arguments", "body": "<p>Two issues here.</p>\n\n<p>First, when you loop through <code>str</code> and <code>sChar</code>:</p>\n\n<blockquote>\n  <p>I am trying to pass a string as an argument to a function and it throws a Segmentation fault(Core Dumped) error. Could you please let me know what mistake I am making here? Here is the code:</p>\n</blockquote>\n\n<pre><code>for(i = 0; i &lt;= strlen(str); i++)\n{\n    for(j = 0; j &lt;= strlen(sChar); j++)\n    {\n</code></pre>\n\n<p>You use <code>&lt;=</code> as your exit condition.  Array indexes start from 0, so valid indexes are from 0 to length-1.  You're going from 0 to length, so you're stepping of the end of the array.  Reading past the end of an array invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Change the conditions to use <code>&lt;</code>:</p>\n\n<pre><code>for(i = 0; i &lt; strlen(str); i++)\n{\n    for(j = 0; j &lt; strlen(sChar); j++)\n    {\n</code></pre>\n\n<p>The second problem is in how you're reading the values:</p>\n\n<pre><code>scanf(\"%[^\\n]s\", &amp;myString);\n...\nscanf(\" %[^\\n]c\", &amp;schar);\n...\nscanf(\" %[^\\n]c\", &amp;rchar);\n</code></pre>\n\n<p>The <code>%[]</code> format specifier doesn't require any characters after it, and it requires a <code>char *</code> as a parameter which points to the first element of an array of <code>char</code>.  In the first two cases, you're passing the address of an array instead of the array itself (which decays to a pointer) and you have an extra character after the <code>%[]</code> format that isn't needed.  In the third case you pass a pointer to a single <code>char</code> when a pointer to multiple characters is expected by the format.  Because you want to read a single char, you want to use the <code>%c</code> format specifier instead.</p>\n\n<pre><code>scanf(\"%35[^\\n]\", myString);\n...\nscanf(\" %35[^\\n]\", schar);\n...\nscanf(\" %c\", &amp;rchar);\n</code></pre>\n\n<p>Note also that the first two have a field width that limits the number of characters that are read so that you don't overrun the arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1538602993, "creation_date": 1538602993, "answer_id": 52636097, "question_id": 52634855, "link": "https://stackoverflow.com/questions/52634855/passing-an-array-of-characters-as-function-arguments/52636097#52636097", "title": "Passing an array of characters as function arguments", "body": "<blockquote>\n  <p>Could you please let me know what mistake I am making here?</p>\n</blockquote>\n\n<p>In addition to <a href=\"https://stackoverflow.com/a/52635216/2410359\">@dbush</a> good answer, OP's code is unnecessarily inefficient.</p>\n\n<p>Using the corrected code below, and assume the initial length of the <code>str, sChar</code> are <code>S,C</code> respectively.</p>\n\n<pre><code>for(i = 0; i &lt; strlen(str); i++) {\n  for(j = 0; j &lt; strlen(sChar); j++) {\n    if(str[i] == sChar[j]) {\n      str[i] = rChar;\n    }\n  }\n}\n</code></pre>\n\n<p>The <code>for(i = 0; i &lt; strlen(str); i++) {</code> and with the later <code>str[i] = rChar;</code> obliges the code to find the length of <code>str</code> up to S times and each <code>strlen(str)</code> requires O(S) operations.  </p>\n\n<p>If <code>S</code> was a non-trivial value, say 1000, this 1000*1000 could readily affect overall performance.  A simply solution is to calculate the length once or look for the <em>null character</em> instead.</p>\n\n<pre><code>// for(i = 0; i &lt; strlen(str); i++) {\nS = strlen(str);\nfor(i = 0; i &lt; S; i++) {\n// or\nfor(i = 0; str[i]; i++) {\n</code></pre>\n\n<hr>\n\n<p>The same thing happens with the inner loop too.  Yet a smart compiler can see that <code>sChar</code> does not change and may take advantage of understanding  <code>strlen()</code> has no side effects that would cause for a different result.  With such an optimization <code>strlen(sChar)</code> may be truly called once, even if <code>strlen(sChar)</code> in inside the higher <code>for (i...)</code> loop.</p>\n\n<p>Still it is easy and idiomatic to just test for the <em>null character</em>.</p>\n\n<pre><code>    // for(j = 0; j &lt; strlen(sChar); j++)\n    // better as\n    for(j = 0; sChar[j]; j++)\n</code></pre>\n\n<hr>\n\n<p>Yet why does this not apply to the <code>for(i = 0; i &lt; strlen(str); i++)</code> loop?</p>\n\n<p>Within that loop, code can modify <code>str[]</code> and so the compiler cannot make the optimization as with <code>for(j = 0; sChar[j]; j++)</code>.</p>\n\n<p>This also begs the question, what should code do if the replacement character <code>rChar</code> is the <em>null character</em>? </p>\n\n<p>As I see it, code could either continue, replacing with a <code>'\\0</code> multiple times or simple return after this first.</p>\n\n<pre><code>       str[i] = rChar;\n       if (rChar == '\\0') return; // Possible way to handle \\0\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10453005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0435d80df62a65e9d404714f583246?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Tesla", "link": "https://stackoverflow.com/users/10453005/michael-tesla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538602993, "creation_date": 1538597023, "question_id": 52634855, "link": "https://stackoverflow.com/questions/52634855/passing-an-array-of-characters-as-function-arguments", "title": "Passing an array of characters as function arguments", "body": "<p>I am trying to pass a string as an argument to a function and it throws a Segmentation fault(Core Dumped) error. Could you please let me know what mistake I am making here? Here is the code:</p>\n\n<pre><code>replaceChars(char str[], char sChar[], char rChar)\n{\nint i,j;\nprintf(\"rChar is %c\", rChar);\nprintf(\"sChar is %s\", sChar);\n\nfor(i = 0; i &lt;= strlen(str); i++)\n{\n    for(j = 0; j &lt;= strlen(sChar); j++)\n    {\n     if(str[i] == sChar[j])  \n     {\n        str[i] = rChar;\n        //printf(\"The New String is %c\", str[i]);\n     }\n    }\n}\n\nprintf(\"The New String is %s\", str);\n}\nvoid main()\n{\nchar myString[36], schar[36], rchar;\n\nprintf(\"Please enter a string:\");\n\nscanf(\"%[^\\n]s\", &amp;myString);\n\nprintf(\"Which characters to replace?\");\nscanf(\" %[^\\n]c\", &amp;schar);\nprintf(\"With which character?\");\nscanf(\" %[^\\n]c\", &amp;rchar);\n\nreplaceChars(myString, schar, rchar);\n\n}\n</code></pre>\n"}, {"tags": ["c", "fgets", "getchar", "strlen"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1538597041, "post_id": 52634818, "comment_id": 92202946, "body": "Questions should be self-contained (see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Don&#39;t post links to code and don&#39;t post images of code"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 1, "creation_date": 1538597089, "post_id": 52634818, "comment_id": 92202969, "body": "It means your program is trying to read or write a memory location that doesn&#39;t exist."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1538597185, "post_id": 52634818, "comment_id": 92203023, "body": "Your code shouldn&#39;t even compile <code>char</code> and <code>char*</code> are two very different types. Turn on all compiler warnings and never ever ignore them"}, {"owner": {"reputation": 2923, "user_id": 3434508, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/gFffm.png?s=128&g=1", "display_name": "Stavr00", "link": "https://stackoverflow.com/users/3434508/stavr00"}, "edited": false, "score": 1, "creation_date": 1538597325, "post_id": 52634818, "comment_id": 92203084, "body": "<code>text</code> will be terminated by <code>\\0</code> not <code>\\n</code>;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2923, "user_id": 3434508, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/gFffm.png?s=128&g=1", "display_name": "Stavr00", "link": "https://stackoverflow.com/users/3434508/stavr00"}, "edited": false, "score": 0, "creation_date": 1538597358, "post_id": 52634818, "comment_id": 92203097, "body": "@Stavr00 <code>fgets()</code> reads a line and leaves the newline in it, unless the line is longer than <code>MAX</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1538597386, "post_id": 52634818, "comment_id": 92203118, "body": "@UnholySheep Where do you see <code>char*</code> in the code, or where is it missing?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1538597472, "post_id": 52634818, "comment_id": 92203165, "body": "@Barmar in the &quot;my code&quot; part, OP is assigning the result of <code>fgets</code> to a <code>char c</code> variable. They are also calling <code>strlen(c);</code> on the same <code>char</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1538597583, "post_id": 52634818, "comment_id": 92203210, "body": "<code>length = strlen(c);</code> should be <code>length = strlen(text);</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1538597651, "post_id": 52634818, "comment_id": 92203242, "body": "You should assign the return value of <code>fgets()</code> to a pointer variable, then check the value to see if it&#39;s <code>NULL</code>, which means it got an error or EOF."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1538709428, "post_id": 52634818, "comment_id": 92246236, "body": "It\u2019s an error all experienced C programmers become familiar with. It\u2019s usually caused by dereferencing a pointer that was in some way invalid: a null pointer, an uninitialized pointer, a pointer that\u2019s already been freed, an out-of-bounds array access, some garbage cast to a pointer type by mistake, etc."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1538709496, "post_id": 52634818, "comment_id": 92246254, "body": "Step one in debugging this error is to find what input reproduces the crash, compile with degugging symbols and run the program in a debugger. That will tell you, at least, which line of code crashed the program and usually which pointer was invalid."}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1538710809, "last_edit_date": 1538710809, "creation_date": 1538710374, "answer_id": 52657989, "question_id": 52634818, "link": "https://stackoverflow.com/questions/52634818/what-is-segmentation-fault-core-dumped-and-why-is-it-being-returned-in-my-ou/52657989#52657989", "title": "What is &quot;Segmentation Fault (core dumped)&quot; and why is it being returned in my output?", "body": "<p>Your error, or at least one of them, appears to be in the following lines:</p>\n\n<pre><code>char text[MAX], c;\n// ...\n\nc = fgets(text, MAX, stdin);\nlength = strlen(c);\n</code></pre>\n\n<p>The return value of <code>fgets</code> is a <strong>pointer to</strong> <code>char</code>, but you\u2019re storing it in a <code>char</code> and then try to pass the <code>char</code> value to a function that expects a <strong>pointer to</strong> <code>char</code>.  Since <code>char</code> is only 8 bits wide (on any machine you\u2019d be compiling on) and a pointer needs 32 or 64 bits, most of the bits get lost and the result is an invalid pointer.  This will\u2014if you\u2019re lucky\u2014crash the program with a segmentation fault.</p>\n\n<p>This code really should not have compiled at all.  If you didn\u2019t get at least a warning that <code>c</code> cannot hold a <strong>pointer to</strong> <code>char</code>, you need to turn on more warning flags.  (On <code>gcc</code> or <code>clang</code>, I usually compile with <code>-std=c99 -Wall -Wextra -Wpedantic -Wconversion</code>.)  Then, at least while you\u2019re learning the language, treat any warning you get as a bug in your program. Better yet, add <code>-Werror</code> (or the equivalent for your compiler) to make the compiler treat them that way.</p>\n\n<p>The simplest fix is to eliminate <code>c</code> and write instead</p>\n\n<pre><code>fgets( text, MAX, stdin );\nlength = strlen(text);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10453278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d0_6MbetNxk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX3ISixjv4NO4D04Hyl8wJP1B3mig/mo/photo.jpg?sz=128", "display_name": "Schultzie67", "link": "https://stackoverflow.com/users/10453278/schultzie67"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1538710809, "creation_date": 1538596864, "last_edit_date": 1538600683, "question_id": 52634818, "link": "https://stackoverflow.com/questions/52634818/what-is-segmentation-fault-core-dumped-and-why-is-it-being-returned-in-my-ou", "title": "What is &quot;Segmentation Fault (core dumped)&quot; and why is it being returned in my output?", "body": "<p>I am trying to replace the loop containing repeated getchar calls with a single call to fgets</p>\n\n<p>When I try to type an input I get Segmentation Fault (core dumped) and I don't know what that is or why I get it.</p>\n\n<p><strong>Starter Code</strong></p>\n\n<pre><code>/* Example: analysis of text */\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX 1000 /* The maximum number of characters in a line of input */\n\nmain()\n{\n  char text[MAX], c;\n  int i;\n  int lowercase, uppercase, digits, other;\n  int length;\n\n  puts(\"Type some text (then ENTER):\");\n\n  /* Save typed characters in text[]: */\n  // In ex1.c, please implement the following loop with fgets() and use strlen() to compute the length of the string\n  //\n  for (i = 0; i &lt; MAX; i++)\n  {\n    text[i] = getchar();\n    if (text[i] == '\\n')\n      break;\n  }\n  length = i;\n\n  /* Analyse contents of text[]: */\n\n  for (i = lowercase = uppercase = digits = other = 0; i &lt; MAX; i++)\n  {\n    c = text[i];\n    if (c &gt;= 'a' &amp;&amp; c &lt;= 'z')\n      lowercase++;\n    else if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z')\n      uppercase++;\n    else if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n      digits++;\n    else\n    {\n      if (c == '\\n')\n        break;\n      other++;\n    }\n  }\n\n  puts(\"\\nYou typed:\");\n  printf(\"A string with %d characters\\n\", length);\n  printf(\"\\t%d lower case letters\\n\", lowercase);\n  printf(\"\\t%d upper case letters\\n\", uppercase);\n  printf(\"\\t%d digits\\n\", digits);\n  printf(\"\\t%d others\\n\", other);\n}\n</code></pre>\n\n<p><strong>Starter Code Test</strong></p>\n\n<pre><code>Type some text (then ENTER):\nasd213qaIW\n\nYou typed:\nA string with 10 characters\n    5 lower case letters\n    2 upper case letters\n    3 digits\n    0 others\n</code></pre>\n\n<p><strong>My Code</strong></p>\n\n<pre><code>/* Example:  analysis of text */\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define MAX 1000 /* The maximum number of characters in a line of input */\n\nmain()\n{\n  char text[MAX], c;\n  int i;\n  int lowercase, uppercase, digits, other;\n  int length;\n\n  puts(\"Type some text (then ENTER):\");\n\n  /* Save typed characters in text[]: */\n  // In ex1.c, please implement the following loop with fgets() and use strlen() to compute the length of the string\n  //\n  c = fgets(text, MAX, stdin);\n  length = strlen(c);\n\n  /* Analyse contents of text[]: */\n\n  for (i = lowercase = uppercase = digits = other = 0; i &lt; MAX; i++)\n  {\n    c = text[i];\n    if (c &gt;= 'a' &amp;&amp; c &lt;= 'z')\n      lowercase++;\n    else if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z')\n      uppercase++;\n    else if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n      digits++;\n    else\n    {\n      if (c == '\\n')\n        break;\n      other++;\n    }\n  }\n\n  puts(\"\\nYou typed:\");\n  printf(\"A string with %d characters\\n\", length);\n  printf(\"\\t%d lower case letters\\n\", lowercase);\n  printf(\"\\t%d upper case letters\\n\", uppercase);\n  printf(\"\\t%d digits\\n\", digits);\n  printf(\"\\t%d others\\n\", other);\n}\n</code></pre>\n\n<p><strong>My Code Test</strong></p>\n\n<pre><code>Type some text (then ENTER):\nasd213qaIW  \nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Any and all help is greatly appreciated.<br>\nI'm also very new to C so if you could explain as simply as possible.</p>\n\n<p><strong>Changing</strong> <code>length = strlen(c);</code> <strong>to</strong> <code>length = strlen(text);</code> <strong>fixed it.  Thank you!</strong></p>\n"}, {"tags": ["c", "linux", "performance"], "comments": [{"owner": {"reputation": 14722, "user_id": 823738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a13a6ed05bdce33d6bf0f01496b9a044?s=128&d=identicon&r=PG", "display_name": "Zaffy", "link": "https://stackoverflow.com/users/823738/zaffy"}, "edited": false, "score": 1, "creation_date": 1538597245, "post_id": 52634766, "comment_id": 92203052, "body": "Tip: try using <code>strace ps -p &lt;pid&gt; -o %cpu,%mem</code> to see what syscalls <code>ps</code> does use to get the information you want."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 10451077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5612acae3d9ae231f0d9a48ea8cf5469?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael N.", "link": "https://stackoverflow.com/users/10451077/rafael-n"}, "is_accepted": false, "score": 2, "last_activity_date": 1538617176, "last_edit_date": 1538617176, "creation_date": 1538616463, "answer_id": 52637706, "question_id": 52634766, "link": "https://stackoverflow.com/questions/52634766/making-a-program-that-shows-cpu-and-memory-usagekb-using-pid-linux/52637706#52637706", "title": "Making a program that shows CPU(%) and Memory usage(kB) using pid linux", "body": "<p>Already solved it. That's how I did:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include&lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main (int argc, char *argv[], char *envp[]) {\nint pid ; /* Process ID */\nchar mem_usage[50];\nchar cpu_usage[50];\nchar kill[50];\npid = fork () ; /* Process reaplication */\nsprintf(cpu_usage,\"%s%d%s\",\"ps -p \", pid, \" -o %cpu | grep -v %CPU\");\nsprintf(mem_usage, \"%s%d%s\", \"pmap -x \", pid,\" | grep total | awk '{print $3}'\");\nsprintf(kill, \"%s%d\", \"kill -9 \", pid);\n\nif ( pid &lt; 0 ) { /*if fork do not work*/\n    perror (\"Erro: \") ;\n    exit (-1) ; /* Ends process with error: -1 */\n}\nelse if( pid &gt; 0 ) /* If i'm parent process*/\n{\n    for(int i=0;i&lt;10;i++)\n  {\n    system(\"clear\");\n    if(i == 0 || i == 3 || i == 6 || i == 9)\n    {\n    printf(\"Processing.\\n\");\n    }\n    else if(i == 1 || i == 4 || i == 7)\n    {\n      printf(\"Processing..\\n\");\n    }\n    else if(i == 2 || i == 5 || i == 8)\n    {\n      printf(\"Processing...\\n\");\n    }\n    printf(\"%ds\\n\", i+1);\n    printf(\"================\\n\");\n    printf(\"CPU(%%)\\n\");\n    system(cpu_usage);\n    printf(\"MEM(kB)\\n\");\n    system(mem_usage);\n    sleep(1);\n  }\n  system(kill);\n}\nelse /* sen\u00e3o, sou o processo filho (pid == 0) */\n{\n  if(strcmp(argv[1],\"cpu\")==0) /* if argv[1] = cpu -&gt; Execute code using intese cpu*/\n  {\n    for(;;){}\n  }\n  if(strcmp(argv[1],\"cpu-mem\")==0) /* if argv[1] = cpu-mem -&gt; Execute code using intese cpu and memory */\n  {\n    int moment = clock();\n    for (;;) {\n        sleep(0.001); /* makes mem use less intense  */\n    malloc(50* sizeof(int));\n}\n  }\n\n}\nperror (\"Erro: \") ; /* if do not work */\n\nprintf (\"Tchau !\\n\") ;\nexit(0) ; /* Ends process with success (c\u00f3digo 0) */\n\n}\n</code></pre>\n\n<p>I've used <code>ps -p &lt;pid&gt; -o %cpu | grep -v %CPU</code> to get the CPU(%) usage.</p>\n\n<p>To calculate the Memory(kB) usage:<code>pmap -x &lt;pid&gt; \" | grep total | awk '{print $3}'\"</code></p>\n\n<p>In this case, I've used <code>awk '{print $3}'</code> to print the third column from the Comand <code>pmap -x &lt;pid&gt;</code> and <code>grep total</code> to print only the line I needed. </p>\n\n<p>There are two ways to run this code:</p>\n\n<ul>\n<li><ol>\n<li>./filename cpu   ---> Will only \"Force\" your CPU</li>\n</ol></li>\n<li><ol start=\"2\">\n<li>./filename cpu-mem ---> Gonna use your RAM, it may crash your pc.</li>\n</ol></li>\n</ul>\n\n<p>This was a good exercise to learn how CPU and Memory work. </p>\n"}], "owner": {"reputation": 49, "user_id": 10451077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5612acae3d9ae231f0d9a48ea8cf5469?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael N.", "link": "https://stackoverflow.com/users/10451077/rafael-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1538617176, "creation_date": 1538596623, "last_edit_date": 1538600100, "question_id": 52634766, "link": "https://stackoverflow.com/questions/52634766/making-a-program-that-shows-cpu-and-memory-usagekb-using-pid-linux", "title": "Making a program that shows CPU(%) and Memory usage(kB) using pid linux", "body": "<p>I'm trying to create a program that gets the CPU(%) and Memory(kB) usage to show it on Ubuntu Terminal.\nI've been searching for some command that shows me it, and i got that;</p>\n\n<pre><code>ps -p &lt;pid&gt; -o %cpu,%mem\n</code></pre>\n\n<p>When I test it directly on terminal, it works just fine. But on my program it gives me that error:\n<a href=\"https://i.stack.imgur.com/cAuST.png\" rel=\"nofollow noreferrer\">error: garbage option</a></p>\n\n<p>Here's my code: </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include&lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main (int argc, char *argv[], char *envp[]) {\n   int pid ; /* Process ID */\n   char usage[150];\n   char kill[50];\n   pid = fork () ; /* Process reaplication */\n   sprintf(usage,\"%s%d%s\",\"ps -p \", pid,  \" %cpu,%mem\");\n   sprintf(kill, \"%s%d\", \"kill -9 \", pid);\n\n   if ( pid &lt; 0 ) { /*if fork do not work*/\n       perror (\"Erro: \") ;\n       exit (-1) ; /* Ends process with error: -1 */\n   } else if( pid &gt; 0 ) { /* If i'm parent process*/\n       for(int i=0;i&lt;10;i++) {\n          system(\"clear\");\n          printf(\"Processing (%ds)\\n\", i);\n          int aux;\n          for(aux=i;aux&gt;0;aux--) {\n              printf(\"=\");\n          }\n          printf(\"=\\n\");\n          system(usage);\n          sleep(1);\n       }\n       system(kill);\n   } else /* sen\u00e3o, sou o processo filho (pid == 0) { */\n      if(strcmp(argv[1],\"cpu\")==0) { /* if argv[1] = cpu -&gt; Execute code using intese cpu*/\n         for(;;){}\n      }\n      if(strcmp(argv[1],\"cpu-mem\")) { /* if argv[1] = cpu-mem -&gt; Execute code using intese cpu and memory */\n         int moment = clock();\n         for (;;) {\n            while(clock() - moment &lt; 5){} /* makes mem use less intense  */\n            malloc(sizeof(1000));\n         }\n      }\n   }\n   perror (\"Erro: \") ; /* if do not work */\n   printf (\"Tchau !\\n\") ;\n   exit(0) ; /* Ends process with success (c\u00f3digo 0) *\n}\n</code></pre>\n\n<p>So, I'm trying to divide the program in 10 steps. Each one is gonna execute the command. There is one sec between the steps</p>\n\n<p>How can I get this code to work? Is there any other commands that I can use to replace this one?</p>\n"}, {"tags": ["c", "while-loop", "pi"], "comments": [{"owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "edited": false, "score": 1, "creation_date": 1538596585, "post_id": 52634686, "comment_id": 92202738, "body": "Why do you feel like it could be simpler? Which part of the program exactly are you saying is the problem you are concerned with? It is hard to answer very broad questions like this on Stackoverflow because it would mostly be an opinionated answer.  Also, remember to try and format your code so it is spaced well and easy to read, that can make it all the more difficult to follow the code when it is hard to read."}, {"owner": {"reputation": 1493, "user_id": 10032505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/clhpj.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/10032505/mohammad"}, "edited": false, "score": 1, "creation_date": 1538596629, "post_id": 52634686, "comment_id": 92202759, "body": "why not using one For loop?"}, {"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 2, "creation_date": 1538596686, "post_id": 52634686, "comment_id": 92202789, "body": "I think your code is fine. Personally, I&#39;d work on the formatting (it looks like someone else has fixed it for you) and perhaps on giving your variables more descriptive names. Then, if you feel like it, you could read up on increment operators, compound assignments, and <code>for</code> loops."}, {"owner": {"reputation": 398, "user_id": 10412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7782a6cbe4dca019ebe564903960341a?s=128&d=identicon&r=PG&f=1", "display_name": "larn", "link": "https://stackoverflow.com/users/10412159/larn"}, "reply_to_user": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "edited": false, "score": 0, "creation_date": 1538596689, "post_id": 52634686, "comment_id": 92202790, "body": "@Karl I don&#39;t like the fact that I am using two while loops. I was wondering if there was a way to code this program using only one, rather than the two I am currently using."}, {"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 5, "creation_date": 1538596760, "post_id": 52634686, "comment_id": 92202819, "body": "Also, <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> might be worth a mention."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538596776, "post_id": 52634686, "comment_id": 92202823, "body": "looking at the formula it seems to naturally call for 2 loops. Maybe somebody could do fancy (un readable!) code that doesnt but I would not worry."}, {"owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "edited": false, "score": 0, "creation_date": 1538596842, "post_id": 52634686, "comment_id": 92202861, "body": "@Iarn as mentioned you could replace either of your while loops with a for loop, but that would not change the logic of the code because it would still loop the same amount."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538596963, "post_id": 52634686, "comment_id": 92202919, "body": "You could unroll the inner loop yourself, but your code would not be nearly as succinct then. :O)"}, {"owner": {"reputation": 2306, "user_id": 2444435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5TbSK.jpg?s=128&g=1", "display_name": "jhaagsma", "link": "https://stackoverflow.com/users/2444435/jhaagsma"}, "edited": false, "score": 0, "creation_date": 1538597111, "post_id": 52634686, "comment_id": 92202987, "body": "You could use one while loop by putting what&#39;s in the outer loop in an if statement with a break?"}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1538597116, "post_id": 52634686, "comment_id": 92202992, "body": "One improvement - <code>n</code> and <code>count</code> could be <code>int</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538597271, "post_id": 52634686, "comment_id": 92203061, "body": "Could not resist, sorry: <a href=\"https://ideone.com/Q0v9dW\" rel=\"nofollow noreferrer\">ideone.com/Q0v9dW</a> . Converted to single <code>while</code> loop trivially."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1538600754, "last_edit_date": 1592644375, "creation_date": 1538598120, "answer_id": 52635106, "question_id": 52634686, "link": "https://stackoverflow.com/questions/52634686/is-there-a-simpler-way-to-do-this-how-can-i-get-rid-of-one-of-my-while-loops/52635106#52635106", "title": "Is there a simpler way to do this? How can I get rid of one of my while loops?", "body": "<blockquote>\n<p>I just feel like my code could somehow be simpler, but I'm not sure how to simplify it.</p>\n<p>I don't like the fact that I am using two while loops. I was wondering if there was a way to code this program using only one, rather than the two I am currently using</p>\n</blockquote>\n<p>Seems simply enough to use a single loop.</p>\n<p>OP's code, the <code>while (c &lt; t) loop</code>, could be replaced with <code>if (c &lt; t)</code> and achieve the same outcome.  The loop is only executed 1 or 0 times.  With an adjustment of initial <code>c</code> or <code>t</code>, the loop/block could executed exactly once each time.  Thus negating the test completely.</p>\n<p>A few additional adjustments are in <code>Viete()</code>.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble Viete(unsigned n) {\n  const char *pi = &quot;pi   3.141592653589793238462643383...&quot;;\n  puts(pi);\n  printf(&quot;m_pi=%.17f\\n&quot;, acos(-1));\n  double term = sqrt(2.0);\n  double v = 1.0;\n  while (n-- &gt; 0) {\n    v = v * term / 2;\n    printf(&quot;v_pi=%.17f %u\\n&quot;, 2 / v, n);\n    term = sqrt(2 + term);\n  }\n  puts(pi);\n  return 2 / v;\n}\n\nint op_pi(unsigned n) {\n  unsigned c = 1;\n  unsigned t = 0;\n  unsigned count = 1;\n  double out = 1;\n  double x = sqrt(2);\n\n  while (count &lt;= n) {\n    t = t + 1;\n\n    // while (c &lt; t) {\n    // or \n    if (c &lt; t) {\n      x = sqrt(2 + x);\n      c = c + 1;\n    }\n\n    out = out * (x / 2);\n    count = count + 1;\n    printf(&quot;%lf is the approximation of pi %u\\n&quot;, 2 / out, count);\n  }\n\n  double approx = 2 / out;\n  printf(&quot;%lf is the approximation of pi\\n&quot;, approx);\n}\n\nint main(void) {\n  op_pi(5);\n  Viete(5);\n}\n</code></pre>\n<p>Output</p>\n<pre><code>2.828427 is the approximation of pi 2\n3.061467 is the approximation of pi 3\n3.121445 is the approximation of pi 4\n3.136548 is the approximation of pi 5\n3.140331 is the approximation of pi 6\n3.140331 is the approximation of pi\npi   3.141592653589793238462643383...\nm_pi=3.14159265358979312\nv_pi=2.82842712474618985 4\nv_pi=3.06146745892071825 3\nv_pi=3.12144515225805197 2\nv_pi=3.13654849054593887 1\nv_pi=3.14033115695475251 0\npi   3.141592653589793238462643383...\n</code></pre>\n<p>Additional minor simplifications possible.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 0, "last_activity_date": 1538601517, "creation_date": 1538601517, "answer_id": 52635831, "question_id": 52634686, "link": "https://stackoverflow.com/questions/52634686/is-there-a-simpler-way-to-do-this-how-can-i-get-rid-of-one-of-my-while-loops/52635831#52635831", "title": "Is there a simpler way to do this? How can I get rid of one of my while loops?", "body": "<p>Consider how many times the inner loop runs in each iteration of the outer loop</p>\n\n<ul>\n<li>on the first iteration, it does not run at all (c == t == 1)</li>\n<li>on each subsequent iteration, it runs exactly once (as t has been incremented once since the last iteration of the outer loop).</li>\n</ul>\n\n<p>So you could replace this inner while with an if:</p>\n\n<pre><code>    if (count &gt; 1) {\n</code></pre>\n\n<p>once you do that, <code>t</code> and <code>c</code> are completely unnecessary and can be eliminated.</p>\n\n<p>If you change the initial value of <code>x</code> (before the loop), you could have the first iteration calculate it here, thus getting rid of the <code>if</code> too.  That leaves a minimal loop:</p>\n\n<pre><code>out = 1;\ncount = 1;\nx = 0;\nwhile (count&lt;=n) {\n    x=sqrt(2+x);\n    out=out*(x/2);\n    count=count+1; \n}\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 10412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7782a6cbe4dca019ebe564903960341a?s=128&d=identicon&r=PG&f=1", "display_name": "larn", "link": "https://stackoverflow.com/users/10412159/larn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 52635831, "answer_count": 2, "score": 0, "last_activity_date": 1538601517, "creation_date": 1538596248, "last_edit_date": 1538596930, "question_id": 52634686, "link": "https://stackoverflow.com/questions/52634686/is-there-a-simpler-way-to-do-this-how-can-i-get-rid-of-one-of-my-while-loops", "title": "Is there a simpler way to do this? How can I get rid of one of my while loops?", "body": "<p>For my CS assignment we were asked to create a program to approximate pi using <a href=\"https://en.wikipedia.org/wiki/Vi%C3%A8te%27s_formula\" rel=\"nofollow noreferrer\">Viete's Formula</a>. I have done that, however, I don't exactly like my code and was wondering if there was a way I could do it without using two while loops. </p>\n\n<p>(My professor is asking us to use a while loop, so I want to keep at least one!) </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n  double n, x, out, c, t, count, approx;\n  printf(\"enter the number of iterations to approximate pi\\n\");\n  scanf(\"%lf\", &amp;n);\n\n  c = 1;\n  out = 1;\n  t = 0;\n  count = 1;\n  x = sqrt(2);\n\n  while (count&lt;=n)\n  { \n      t=t+1;\n\n      while (c&lt;t)\n      { \n          x=sqrt(2+x);\n          c=c+1; \n      }\n\n      out=out*(x/2);\n      count=count+1; \n  }\n\n  approx=2/out;\n  printf(\"%lf is the approximation of pi\\n\", approx);\n} \n</code></pre>\n\n<p>I just feel like my code could somehow be simpler, but I'm not sure how to simplify it. </p>\n"}, {"tags": ["c", "ubuntu", "compiler-errors", "header", "include"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538595255, "post_id": 52634435, "comment_id": 92202160, "body": "What compiler is it?"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538595270, "post_id": 52634435, "comment_id": 92202167, "body": "Using Ubuntu. Have installed build-essential."}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538595288, "post_id": 52634435, "comment_id": 92202180, "body": "gcc compiler in ubuntu"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1538595334, "post_id": 52634435, "comment_id": 92202195, "body": "There&#39;s nothing wrong with the code here. Your process for compiling and running it must be wrong."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538595336, "post_id": 52634435, "comment_id": 92202196, "body": "How do you invoke the compiler?"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "edited": false, "score": 0, "creation_date": 1538595509, "post_id": 52634435, "comment_id": 92202265, "body": "gcc prog.c -o Prog"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "edited": false, "score": 0, "creation_date": 1538595513, "post_id": 52634435, "comment_id": 92202268, "body": "In file included from /usr/local/include/stdio.h:11:0,                  from binaryWords.c:1: /usr/local/include/thread.h:11:10: fatal error: interrupt.h: No such file or directory  #include &lt;interrupt.h&gt;           ^~~~~~~~~~~~~ compilation terminated."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538596013, "post_id": 52634435, "comment_id": 92202505, "body": "<code>binaryWords.c</code> ? You have never mentioned it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538596017, "post_id": 52634435, "comment_id": 92202507, "body": "It seems you have installed your own version of GCC in a non-standard location. Are your <code>PATH</code> set up correctly?"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538596565, "post_id": 52634435, "comment_id": 92202734, "body": "@Someprogrammerdude I installed the gcc via sudo apt-get install -V gcc"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "edited": false, "score": 0, "creation_date": 1538596589, "post_id": 52634435, "comment_id": 92202740, "body": "binaryWords is the program name, updated the question."}, {"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 0, "creation_date": 1538596658, "post_id": 52634435, "comment_id": 92202779, "body": "by the way, a &quot; &quot; &quot; is missing. Should be <code>printf(&quot;hello World!\\n&quot;);</code>. I would try to reinstall the gcc again, seems to corrupted thread.h or interrupt.h is missing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538597035, "post_id": 52634435, "comment_id": 92202942, "body": "<code>&#47;usr&#47;local&#47;include&#47;stdio.h</code>... That is <i>not</i> the standard location of a system header file on Ubuntu. That means there&#39;s something you&#39;re not telling us, perhaps something you don&#39;t remember doing? If you run <code>which gcc</code> what do you get?"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "reply_to_user": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 0, "creation_date": 1538597114, "post_id": 52634435, "comment_id": 92202991, "body": "@TomKuschel how should I do that ? may you please write a process for that as a possible answer?"}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "edited": false, "score": 0, "creation_date": 1538597163, "post_id": 52634435, "comment_id": 92203014, "body": "I do not have interrupt.h in usr/include directory."}, {"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 0, "creation_date": 1538597487, "post_id": 52634435, "comment_id": 92203168, "body": "@Reinstall: Sorry, I do not run Ubuntu, but I think there are tutorials or Ubuntu forums where you find how to first remove the compiler and afterwards reinstall it. As seen above, run <code>which gcc</code> and we know where the gcc is installed into."}, {"owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "edited": false, "score": 0, "creation_date": 1538600713, "post_id": 52634435, "comment_id": 92204558, "body": "Uninstalled, reinstalled. Same problem, please help."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "is_accepted": true, "score": 0, "last_activity_date": 1538601831, "creation_date": 1538601831, "answer_id": 52635885, "question_id": 52634435, "link": "https://stackoverflow.com/questions/52634435/fatal-error-interrupt-h-no-such-file-or-directory-include-interrupt-h/52635885#52635885", "title": "fatal error: interrupt.h: No such file or directory #include &lt;interrupt.h&gt;", "body": "<p>In Ubuntu system there is directory usr/include and usr/local/include. I had a header stdio.h for a xinu embedded system which implemented a missing interrupt.h header located in usr/local/include, hence \"interrupt.h\" not found error. In usr/include is the standard C library with the standard stdio.h. Once I removed the headers in usr/local/include the simple helloWorld program compiled and I was able to run the program. </p>\n\n<p>possible conclusion, GCC compiler searches in usr/local/include directory before searching in usr/include directory. </p>\n"}], "owner": {"reputation": 33, "user_id": 8930822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563113197089900/picture?type=large", "display_name": "Keegan", "link": "https://stackoverflow.com/users/8930822/keegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 52635885, "answer_count": 1, "score": 0, "last_activity_date": 1538601831, "creation_date": 1538595213, "last_edit_date": 1538596761, "question_id": 52634435, "link": "https://stackoverflow.com/questions/52634435/fatal-error-interrupt-h-no-such-file-or-directory-include-interrupt-h", "title": "fatal error: interrupt.h: No such file or directory #include &lt;interrupt.h&gt;", "body": "<p>I receive the error in the title after running the code below. </p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    int main()\n    {\n        printf(\"hello World!\\n\");\n        return 0;\n    }\n</code></pre>\n\n<p>ADDITIONAL INFO:</p>\n\n<p>header stdio.h is included in usr/include directory.</p>\n\n<p>gcc compiler.</p>\n\n<p>using latest Ubuntu Operating System.</p>\n\n<p>C program.</p>\n\n<p>file name binaryWords.c</p>\n\n<p>command line: \"gcc binaryWords.c -o BinaryWords.\"</p>\n\n<p>ERROR MESSAGE FULL:</p>\n\n<pre><code>In file included from /usr/local/include/stdio.h:11:0,\n                 from binaryWords.c:1:\n/usr/local/include/thread.h:11:10: fatal error: interrupt.h: No such file or directory\n #include &lt;interrupt.h&gt;\n          ^~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>How can I fix this error?\nWhy is interrupt.h needed?</p>\n"}, {"tags": ["c", "data-structures", "syntax", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1538594069, "post_id": 52634156, "comment_id": 92201592, "body": "You can put whatever you want. But if you want a linked list of nodes, the next thing better be a node, no?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538594177, "post_id": 52634156, "comment_id": 92201667, "body": "You don&#39;t have to if you <code>typedef struct tag-name somename;</code> before. Then just use the <code>somename</code>. And this is not a part of the language but kind of design pattern."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538594252, "post_id": 52634156, "comment_id": 92201699, "body": "The posted code does not define the struct and there is no tag. I see only forward declaration and block of code"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1538594683, "post_id": 52634156, "comment_id": 92201907, "body": "This isn&#39;t code. Can you include something that is valid C code?"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1538595033, "creation_date": 1538595033, "answer_id": 52634405, "question_id": 52634156, "link": "https://stackoverflow.com/questions/52634156/challenging-the-node-syntax/52634405#52634405", "title": "Challenging the Node syntax", "body": "<p>for a linked list the <code>next</code> entry (or whatever its named) must point to the next node. In your case the node type is <code>tag-name</code>. </p>\n\n<p>so you need <code>&lt;type&gt; next;</code></p>\n\n<p>in C (different for c++) the way you ask for a pointer to a struct called x is to do <code>struct x *</code>. Hence the code you see that is confusing / upsetting you. Can you simplify it? Yes you can. C has <code>typedef</code>. You can do</p>\n\n<p><code>typedef struct tag-name node;</code></p>\n\n<p>and now you can have</p>\n\n<pre><code>struct tag-name\n{\n   type member1;\n   type member2;\n   .......\n   .......\n   node *next;\n };\n</code></pre>\n\n<p>You ask, can I have <code>void* next</code>. Yes but why do it? You will have to keep casting that pointer to a pointer to the struct (the compiler does not know implicitly what it points to), also a reader of the code will be surprised because they expect the next pointer to be a pointer to a node.</p>\n\n<p>You ask can it be <code>int next</code>. No it cannot, the next object is a node, not an int</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 0, "last_activity_date": 1538604948, "creation_date": 1538604948, "answer_id": 52636432, "question_id": 52634156, "link": "https://stackoverflow.com/questions/52634156/challenging-the-node-syntax/52636432#52636432", "title": "Challenging the Node syntax", "body": "<p>Think about the typical illustration of a linked list:</p>\n\n<pre><code>node                node                node\n+------+------+     +------+------+     +------+------+\n| data | next | --&gt; | data | next | --&gt; | data | next | --&gt; ...\n+------+------+     +------+------+     +------+------+\n</code></pre>\n\n<p>Each item in the list is a <em>node</em> of some type, and that node contains a <code>next</code> member that explicitly points to the next <em>node</em> in the list.  In C, that typically translates to a <code>struct</code> type like</p>\n\n<pre><code>struct node \n{\n  T data; // for some type T\n  struct node *next;\n};\n</code></pre>\n\n<p>IOW, each <code>struct node</code> has a <code>next</code> member that points to another object of type <code>struct node</code> - not <code>int</code>, not <code>void</code>, etc., which is why we don't declare <code>next</code> as an <code>int *</code>, or a <code>void *</code>, or whatever.  </p>\n\n<p>However...</p>\n\n<p>Depending on how you implement your list, you <em>can</em> use something other than a <code>struct node *</code> as your <code>next</code> item.  Normally when we implement a list, we dynamically allocate each node using <code>malloc</code> as we need it.  However, if you know that your list will never get bigger than some known, reasonably small value, you can set aside an <em>array</em> of <code>struct node</code> as your \"heap\", and your <code>next</code> member can be an array index value:</p>\n\n<pre><code>struct node\n{\n  T data;\n  int next; // holds the *index* of the next element\n} heap[SOME_SIZE];\n</code></pre>\n\n<p>You then initialize your \"heap\" so that each element explicitly points to the next in the array:</p>\n\n<pre><code>for ( int i = 0; i &lt; SOME_SIZE-1; i++ )\n{\n  heap[i].next = i+1;\n}\nheap[SOME_SIZE-1].next = -1; // use -1 to indicate \"null\"\n</code></pre>\n\n<p>Now, all you need is a couple of integers, one to point to the first available element in the array, and the other to point to the head of your list:</p>\n\n<pre><code>int avail = 0;  // initially points to the first element in the \"heap\"\nint head  = -1; // initially \"null\"\n</code></pre>\n\n<p>\"Allocating\" a node then just becomes a matter of finding the first free node in the \"heap\":</p>\n\n<pre><code>int node = avail;         // get the index of the next available node in the \"heap\";\navail = heap[avail].next; // update avail to point to the next available node\n</code></pre>\n\n<p>\"Freeing\" a node just means adding that index back to the head of the <code>avail</code> list:</p>\n\n<pre><code>heap[node].next = avail; // set this node point to the first free element\navail = node;            // make this node the first free element;\n</code></pre>\n\n<p>Remember, <code>node</code> and <code>avail</code> are not node objects, they're simply indices into an array of node objects.  </p>\n\n<p>We typically don't do it this way because it's conceptually simpler for <code>next</code> to point to another <code>struct node</code> object directly, rather than be an index into an array.  We can still use a fixed-sized array as our \"heap\", we just use the address of each element instead of its index.  </p>\n"}], "owner": {"reputation": 33, "user_id": 10433957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-99EX3aqu4Rw/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXYGHxH53eacnnqXP67hUBNE8KpLg/mo/photo.jpg?sz=128", "display_name": "Jayesh Sonkusare", "link": "https://stackoverflow.com/users/10433957/jayesh-sonkusare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52636432, "answer_count": 2, "score": -3, "last_activity_date": 1538604948, "creation_date": 1538593942, "last_edit_date": 1538594686, "question_id": 52634156, "link": "https://stackoverflow.com/questions/52634156/challenging-the-node-syntax", "title": "Challenging the Node syntax", "body": "<p>The following is a syntax, part of linked list in C programming language</p>\n\n<pre><code>struct tag-name\n{\n   type member1;\n   type member2;\n   .......\n   .......\n   struct tag-name *next;\n };\n</code></pre>\n\n<p>Why do we have to again write struct tag-name before the pointer variable next.  Why can we not use void *next or int *next or something like that??</p>\n"}, {"tags": ["c", "macos"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1538589782, "post_id": 52633135, "comment_id": 92199521, "body": "Any that are recognized as standard with your current compilers installation."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 2, "creation_date": 1538589825, "post_id": 52633135, "comment_id": 92199540, "body": "I don&#39;t know much about mac in particular but in general, <code>&lt;&gt;</code> is for included <i>directories</i> and standard headers, while <code>&quot;&quot;</code> is for local headers"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1538590080, "post_id": 52633135, "comment_id": 92199666, "body": "@alterigel How do you include a <i>directory</i>?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1538590284, "post_id": 52633135, "comment_id": 92199781, "body": "<b><i>I don&#39;t know where to put it on my Mac such that the header files would be able to locate it using angled brackets &lt;&gt;</i></b> Usually that means the file is in one of the include paths that you told your compiler to look. Depending on the toolchain this is usually done with both environment variables and command line options for your compiler."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1538592060, "post_id": 52633135, "comment_id": 92200613, "body": "Reminder: &quot;on Mac&quot; doesn&#39;t mean anything. Specify your compiler and environment (e.g. Xcode) if any."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1538592891, "post_id": 52633135, "comment_id": 92201028, "body": "You should not put application specific headers in the system header folders.  Instead you should instruct your compiler where to look for your application and third-party library headers."}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1538601085, "post_id": 52633135, "comment_id": 92204707, "body": "Please spare a thought for those trying to assist you! What is the software you are trying to compile? How are you trying to compile it (Xcode, Makefile or just invoking the compiler from the command line)? Which compiler are you using? What command did you use to try and compile it? What error did you get?"}], "owner": {"reputation": 1, "user_id": 10431709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c2b3dc34df766eeb5e8ee0dfe75832c?s=128&d=identicon&r=PG&f=1", "display_name": "user10431709", "link": "https://stackoverflow.com/users/10431709/user10431709"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1538589856, "answer_count": 0, "score": 0, "last_activity_date": 1538592069, "creation_date": 1538589700, "last_edit_date": 1538592069, "question_id": 52633135, "link": "https://stackoverflow.com/questions/52633135/which-directories-does-angle-brackets-search-in-c-c-on-mac", "closed_reason": "Duplicate", "title": "Which directories does angle brackets &lt; &gt; search in C/C++ on mac?", "body": "<p>I am trying to build a software using make launch and it is failing because its header files can't locate particular file. I do have the file but I don't know where to put it on my Mac such that the header files would be able to locate it using angled brackets &lt;>.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "linked-list", "structure", "fread"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1538589981, "post_id": 52633124, "comment_id": 92199614, "body": "Review <code>ul = ul-&gt;next;</code>.  Where does <code>.next</code> value originate?  Consider <code>&quot;ham.txt&quot;</code> was written by another computer."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1538594573, "post_id": 52633918, "comment_id": 92201846, "body": "Minor bits: 1) <code>fseek(fp, (sizeof(struct user) * i), SEEK_SET);</code> is strange in OP&#39;s code and  appears not needed here either.  2) <code>printf(&quot;\\nName:%.*s&quot;,(int) sizeof ul-&gt;uname, ul-&gt;uname);</code> would be resilient to <i>null character</i>-less <code>.uname</code>."}, {"owner": {"reputation": 15, "user_id": 10445620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d4c9426a1e33c23071235ca4cbbb35?s=128&d=identicon&r=PG&f=1", "display_name": "clinnsin", "link": "https://stackoverflow.com/users/10445620/clinnsin"}, "edited": false, "score": 0, "creation_date": 1538640250, "post_id": 52633918, "comment_id": 92215979, "body": "Thanks a ton this is exactly what  was required. !!"}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 1, "last_activity_date": 1538593833, "last_edit_date": 1538593833, "creation_date": 1538592904, "answer_id": 52633918, "question_id": 52633124, "link": "https://stackoverflow.com/questions/52633124/reading-user-information-from-binary-file-to-linked-list/52633918#52633918", "title": "Reading user information from binary file to linked list", "body": "<p>You need to create new user every iteration of your loop while reading users from file:</p>\n\n<p>Delete these lines (it is very unclear, you want to read <code>j</code> users but you allocate memory for only one): </p>\n\n<pre><code>ul=newuser();\nustart=ul;\n</code></pre>\n\n<p>Add these changes:</p>\n\n<pre><code>   user* previousUser = NULL; // to hold previous user from file\n\n   for(i=0;i&lt;j;i++)\n   {\n        ul=newuser(); // create new user with every iteration\n        if (!i)\n            ustart = ul; // set head of list\n\n        fseek(fp, (sizeof(struct user) * i), SEEK_SET);\n        fread(ul,sizeof(struct user),1,fp);\n        printf(\"\\nName:%s\",ul-&gt;uname);\n        printf(\"\\nPassword:%s\",ul-&gt;upass);\n\n        ul-&gt;next = NULL; // set next to NULL for current user\n        if (previousUser)\n            previousUser-&gt;next = ul; // update previous user to point to current one\n        previousUser = ul;\n   }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10445620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d4c9426a1e33c23071235ca4cbbb35?s=128&d=identicon&r=PG&f=1", "display_name": "clinnsin", "link": "https://stackoverflow.com/users/10445620/clinnsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 52633918, "answer_count": 1, "score": 0, "last_activity_date": 1538593833, "creation_date": 1538589665, "question_id": 52633124, "link": "https://stackoverflow.com/questions/52633124/reading-user-information-from-binary-file-to-linked-list", "title": "Reading user information from binary file to linked list", "body": "<p>I was trying to read the node from the binary file but it would only read the first one(i think).When load() is run it shows the following:\n<a href=\"https://i.stack.imgur.com/tamTF.jpg\" rel=\"nofollow noreferrer\">Output of only load execution</a></p>\n\n<p><em>Please note the two printf's were only to check if it it read correctly or not.It wont be there in the final version as is the scanf() statements in void save().\nThere purpose is simply to load and save data to file</em></p>\n\n<p>CODE:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;conio.h&gt;\n\n//function prototypes\nstruct user* newuser();\nvoid save();\nvoid load();\nvoid display();\n\n\nstruct user\n{\n    char uname[50];\n    char upass[15];\n    int uid;\n    int listofbooks[3];\n    struct user *next;\n};\nstruct user *ustart=NULL;\n\n/*struct book\n{\n    int bid;\n    char topic[15];\n    char aut[50];\n    char bname[50];\n    struct book *l;\n    struct book *r;\n};  */\n\nstruct user* newuser()\n{\n  struct user *u;\n  u=(struct user* )malloc(sizeof(struct user))  ;\n  return(u);\n};\n\n/*void save()\n{\n struct user *ul;\n struct user *t;\n int i;\n FILE *fp;\n\n ul=newuser();\n if(ustart==NULL)\n {\n     ustart=ul;\n     ul-&gt;next=NULL;\n\n     printf(\"Enter Name\\n\");\n   scanf(\"%s\",ul-&gt;uname);\n   printf(\"Enter Password\\n\");\n   scanf(\"%s\",ul-&gt;upass);\n   printf(\"Enter ID\\n\");\n   scanf(\"%d\",&amp;ul-&gt;uid);\n   for(i=0;i&lt;4;i++)\n   {\n       ul-&gt;listofbooks[i]=0;\n   }\n\n   if( ( fp=fopen(\"ham.txt\",\"wb+\") )==NULL )\n  {\n      printf(\"FIle opening error\");\n      getch();\n  }\n   fwrite(ul,sizeof(struct user),1,fp);\n   fclose(fp);\n }\n else\n {\n   t=ustart;\n   while(t-&gt;next!=NULL){\n    t=t-&gt;next;\n   }\n   //change\n   t-&gt;next=ul;\n   ul-&gt;next=NULL;\n   printf(\"Enter Name\\n\");\n   scanf(\"%s\",ul-&gt;uname);\n   printf(\"Enter Password\\n\");\n   scanf(\"%s\",ul-&gt;upass);\n   printf(\"Enter ID\\n\");\n   scanf(\"%d\",&amp;ul-&gt;uid);\n   for(i=0;i&lt;4;i++)\n   {\n       ul-&gt;listofbooks[i]=0;\n   }\n\n    if( ( fp=fopen(\"ham.txt\",\"rb+\") )==NULL )\n  {\n       printf(\"FIle opening error\");\n   }\n    fseek(fp, 0, SEEK_END);\n\n   fwrite(ul,sizeof(struct user),1,fp);\n   fclose(fp);\n }\n}*/\n\n\n\nvoid load()\n{\n int i;\n long int j;\n struct user *ul;\n FILE *fp;\n\n ul=newuser();\n ustart=ul;\n\n  if( ( fp=fopen(\"ham.txt\",\"rb+\") )==NULL )\n  {\n      printf(\"FIle opening error\");\n      getch();\n }\n  fseek(fp,0,SEEK_END);\n  j=ftell(fp);\n  j=( j/sizeof(struct user)) ;\n\n   for(i=0;i&lt;j;i++)\n   {\n    fseek(fp, (sizeof(struct user) * i), SEEK_SET);\n    fread(ul,sizeof(struct user),1,fp);\n    printf(\"\\nName:%s\",ul-&gt;uname);\n    printf(\"\\nPassword:%s\",ul-&gt;upass);\n    ul=ul-&gt;next;\n   }\n\n   fclose(fp);\n\n}\n\nvoid display()\n{\n    struct user *t;\n    int i;\n    t=ustart;\n    while(t!=NULL)\n    {\n    printf(\"Name:%s\\nPassword:%s\\nID:%d\\nList of books\",t-&gt;uname,t-&gt;upass,t-&gt;uid);\n    for(i=0;i&lt;4;i++){\n    printf(\"%d\",t-&gt;listofbooks[i]);\n    }\n  }\n}\n\nvoid main()\n{\n   int i,lp=1;\n   do{\n    printf(\"\\n1.load\\n3.exit\\n2.display\\n4.save\\nEnter choice:\");\n    scanf(\"%d\",&amp;i);\n    switch(i)\n    {\n        case 1: load();\n        break;\n\n    case 2:display();\n    break;\n\n    case 3:lp=0;\n    printf(\"Exiting\");\n    break;\n\n    //case 4:save();\n    //break;\n\n    default:printf(\"invalid\");\n    break;\n    }\n     }while(lp);\n\n    }\n</code></pre>\n\n<p>Please help find the error in the code.I have checked many sites tried many different ways of iterating fread() but to no avail.</p>\n\n<p>I don't think there's an issue with fwrite as the string members are there when i open the txt file.(void save() is in comment form as i wish to use it only to change the database/file.)</p>\n\n<p>I use code:blocks.I have been using C for about a year and a half but fairly new to file functions and linked list.Any tips to improve the code ?</p>\n"}, {"tags": ["c", "loops", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 1, "creation_date": 1538589357, "post_id": 52633001, "comment_id": 92199297, "body": "At the end of which one?"}], "answers": [{"comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 1, "creation_date": 1538593103, "post_id": 52633781, "comment_id": 92201135, "body": ":) I see a small bug here... For input like &quot;<code>abc    </code>&quot; no space will be printed at the end."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538593319, "post_id": 52633781, "comment_id": 92201246, "body": "@chux That&#39;s what I meant, <code>abc   </code>*EOF*"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1538638229, "post_id": 52633781, "comment_id": 92214921, "body": "@AlexLop.: I did add a note regarding this issue. It is easy to fix the behavior with an extra test after the <code>while</code> loop, but it is also important to teach the OP that not all text files end with a newline."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1538638877, "post_id": 52633781, "comment_id": 92215271, "body": "yes, later I noticed the note at the end of your answer. Anyway good answer especially that what I thought as a bug is documented."}, {"owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1538681942, "post_id": 52633781, "comment_id": 92239406, "body": "This one does not quite work, but if we combine it with what Alex Lop said, it works. (The last piece of code he wrote in his answer, then set s (insert_space) to 1 while in the loop.)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1538821957, "post_id": 52633781, "comment_id": 92285127, "body": "@FantasyCookie17: What do you mean by <i>This one does not quite work</i>? The program performs exactly as stated in your question: it <i>replaces all tab and spaces with a single space.</i>  The last test ensures that any spaces or tabs present at the end of the file get replaced by a single space."}, {"owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539011338, "post_id": 52633781, "comment_id": 92336901, "body": "@chqrlie It didn&#180;t work asintended as I used it, it just removed a single space or tab. This one does work, however. <code>#include &lt;stdio.h&gt; int main() { int a, s=0; while(a!=EOF) { a=getchar(); while((a!=EOF)&amp;&amp;(a==&#39; &#39; || a==&#39;\\t&#39;)){ s=1; a=getchar();} if (s){ putchar(&#39; &#39;); s=0;}  putchar(a);} if (s) putchar(&#39; &#39;); return 0;}</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539015479, "post_id": 52633781, "comment_id": 92339054, "body": "@FantasyCookie17: you must have tested something else, it does change any sequence of spaces and tabs to a single space. The code in your comment has undefined behavior: <code>a</code> is uninitialized and the code seems nested incorrectly."}, {"owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539016749, "post_id": 52633781, "comment_id": 92339579, "body": "@chqrlie Might be, but it works. You don&#180;t actually have to initialize a variable. You just need to assign a value before you use it for something else."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539067345, "post_id": 52633781, "comment_id": 92355056, "body": "@FantasyCookie17: where do you assign a value before use: <code>int a, s=0; while(a!=EOF)</code>"}, {"owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539164869, "post_id": 52633781, "comment_id": 92399291, "body": "@chqrlie I assign it here: <code>a=getchar()</code> a will not be EOF at the beginning since it is initialized with a random value, like every local variable. Try printing a variable with no value assigned. If it is global, you get 0 (not EOF), if it is local, something like 46903051 or 32963693 might get printed, but never EOF, so the program will enter the loop."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539166000, "post_id": 52633781, "comment_id": 92399979, "body": "@FantasyCookie17: I&#39;m afraid you are mistaken. Local variables are indeed uninitialized, which means even using their value is undefined behavior. How can you be so sure that it cannot be <code>EOF</code> by coincidence?"}, {"owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539170089, "post_id": 52633781, "comment_id": 92402427, "body": "@chqrlie I thought it would not be EOF. If it can be EOF, the probability is about 1/4294967294."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539188902, "post_id": 52633781, "comment_id": 92414189, "body": "@FantasyCookie17: experience tends to show that special values such as <code>0</code> and <code>-1</code> occur far more often than their statistical expectation..."}, {"owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539204100, "post_id": 52633781, "comment_id": 92421401, "body": "Maybe that&#180;s just some random results or it is easier for the CPU to calculate it, so it occurs more often statistically. But is EOF actually a possible value for an unassigned local variable?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "edited": false, "score": 0, "creation_date": 1539212842, "post_id": 52633781, "comment_id": 92424215, "body": "@FantasyCookie17: are you joking? Of course it is. Murphy&#39;s law makes it even likely."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1539015269, "last_edit_date": 1539015269, "creation_date": 1538592242, "answer_id": 52633781, "question_id": 52633001, "link": "https://stackoverflow.com/questions/52633001/how-to-execute-an-instruction-when-loop-ends-in-c/52633781#52633781", "title": "How to execute an instruction when loop ends in C", "body": "<p>Your program is incorrect for multiple reasons:</p>\n\n<ul>\n<li><code>a</code> is unitialized when you first compare it to <code>EOF</code>, so the behavior is undefined.</li>\n<li>you cannot meaningfully compare a character <code>a</code> with a string <code>\" \"</code>. Compare <code>a</code> to a character constant with single quotes: <code>a == ' '</code>.</li>\n<li>you do not read further characters when you detect a space or tab</li>\n<li>you only want to print the space when there is a sequence of white space.</li>\n</ul>\n\n<p>Here is a different approach: read one character at a time, if it is a space, set a space indicator, if not output the character preceded by a space if the indicator is set and reset the indicator.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int c;\n    int insert_space = 0;\n\n    while ((c = getchar()) != EOF) {\n        if (c == ' ' || c == '\\t') {\n            insert_space = 1;\n        } else {\n            if (insert_space) {\n                putchar(' ');\n                insert_space = 0;\n            }\n            putchar(c);\n        }\n    }\n    if (insert_space) {\n        /* there are spaces and/or tabs at the end of the last line\n         *  of the file, which is not newline terminated. It might be\n         *  a good idea to remove these completely.\n         */\n        putchar(' ');\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When run with its own source code as input, the output is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n int c;\n int insert_space = 0;\n\n while ((c = getchar()) != EOF) {\n if (c == ' ' || c == '\\t') {\n insert_space = 1;\n } else {\n if (insert_space) {\n putchar(' ');\n insert_space = 0;\n }\n putchar(c);\n }\n }\n if (insert_space) {\n /* there are spaces and/or tabs at the end of the last line\n * of the file, which is not newline terminated. It might be\n * a good idea to remove these completely.\n */\n putchar(' ');\n }\n return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": true, "score": 1, "last_activity_date": 1538593541, "last_edit_date": 1538593541, "creation_date": 1538592949, "answer_id": 52633931, "question_id": 52633001, "link": "https://stackoverflow.com/questions/52633001/how-to-execute-an-instruction-when-loop-ends-in-c/52633931#52633931", "title": "How to execute an instruction when loop ends in C", "body": "<p>As for your question, I think your posted code won't compile or maby will compile but with warnings.</p>\n\n<p>Let's go through it:</p>\n\n<pre><code>int a;\nwhile (a != EOF)\n</code></pre>\n\n<p>Here you are accessing <code>a</code> without initializing it, this may lead to unpredictable behavior of your program, you probably better write something like:</p>\n\n<pre><code>int a = getchar();\nwhile (a != EOF)\n</code></pre>\n\n<p>Next:</p>\n\n<pre><code>while (a==\" \" || a==\"\\t\")\n</code></pre>\n\n<p><code>a</code> is of type <code>int</code> while <code>\"\"</code> indicate null terminated string in C and are treated as a <em>pointer</em> the the memory where this string is stored. comparing character with a pointer is not a good idea :). What you meant is to compare <code>a</code> against space or tab as a <strong>single</strong> character. This should be done by <code>''</code>:</p>\n\n<pre><code>while (a==' ' || a=='\\t')\n</code></pre>\n\n<p>So now we get</p>\n\n<pre><code>while (a==' ' || a=='\\t')\n    a=EOF;\n</code></pre>\n\n<p>This loop will be executed as long as <code>a</code> either tab or space but what is in the loop body? <code>a = EOF;</code>, so the flow will exit the while loop immediately on the next iteration.\nI guess that what you meant is to read input and skip forward as long as the input is either space or tab so you probably have to read the input through <code>getchar()</code></p>\n\n<pre><code>while (a==' ' || a=='\\t')\n    a = getchar();\n</code></pre>\n\n<p>but don't forget that <code>getchar()</code> may return <code>EOF</code> on end of input or an error and you don't want to get stuck inside this while loop when that happens:</p>\n\n<pre><code>while ((a != EOF) &amp;&amp; (a==' ' || a=='\\t'))\n    a = getchar();\n</code></pre>\n\n<p>Now when you exit this <code>while</code> loop, unlike in your current code, before printing <code>a</code> you need to check if you had spaces or tabs before that and then print a single tab before printing the value in <code>a</code>. How (?), <strong>as per your original question</strong>, a couple of options: <code>printf(\" \");</code> or <code>putchar(' ');</code>, choose what you like the most. And also you don't want to print <code>a</code> if it contains <code>EOF</code>, right? I will leave this part to you for the proper implementation. </p>\n\n<p>Hope it helped and good luck.</p>\n"}], "owner": {"reputation": 59, "user_id": 10452712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6db43890452d20c1c6448cb83d5024?s=128&d=identicon&r=PG&f=1", "display_name": "FantasyCookie17", "link": "https://stackoverflow.com/users/10452712/fantasycookie17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 52633931, "answer_count": 2, "score": 0, "last_activity_date": 1539015269, "creation_date": 1538589233, "last_edit_date": 1538591044, "question_id": 52633001, "link": "https://stackoverflow.com/questions/52633001/how-to-execute-an-instruction-when-loop-ends-in-c", "title": "How to execute an instruction when loop ends in C", "body": "<p>how can I achieve that the instruction </p>\n\n<pre><code> printf(\" \");\n</code></pre>\n\n<p>is triggered then the loop ends? I have to write a program for my course which replaces all tab and space with a single space.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() \n{\n    int a;\n\n    while (a != EOF) \n    {\n        a=getchar();\n        while (a==\" \" || a==\"\\t\")\n            a=EOF;\n        /*I want to put printf(\" \"); here */\n        putchar(a);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "numa", "debian-based", "numactl"], "comments": [{"owner": {"reputation": 630, "user_id": 4036474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d14f2e960a6cee6a3831edfa089d34?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4036474/rich"}, "edited": false, "score": 0, "creation_date": 1538594641, "post_id": 52632754, "comment_id": 92201880, "body": "Have you looked at your numaif.h file to see if MPOL_LOCAL is actually defined?"}], "answers": [{"comments": [{"owner": {"reputation": 1415, "user_id": 4288486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceeebcdab5325a9b458c1af8c51111d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Neto", "link": "https://stackoverflow.com/users/4288486/jo%c3%a3o-neto"}, "edited": false, "score": 1, "creation_date": 1538643057, "post_id": 52634361, "comment_id": 92217526, "body": "Wow. At this stage I&#39;m even more puzzled. I&#39;ve filed an issue on their GitHub (<a href=\"https://github.com/numactl/numactl/issues/38\" rel=\"nofollow noreferrer\">github.com/numactl/numactl/issues/38</a>). I&#39;ll use your workaround in the meantime (or forever) :-) awesome answer; thanks!"}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1538594841, "creation_date": 1538594841, "answer_id": 52634361, "question_id": 52632754, "link": "https://stackoverflow.com/questions/52632754/numaif-h-mpol-local-undeclared-for-use-in-mbind/52634361#52634361", "title": "numaif.h: MPOL_LOCAL undeclared for use in mbind", "body": "<p>MPOL_LOCAL is declared kernel side in <a href=\"https://elixir.bootlin.com/linux/latest/source/include/uapi/linux/mempolicy.h#L20\" rel=\"nofollow noreferrer\">uapi/linux/mempolicy.h</a> and is equal 4. It's in UAPI, so actually you can <code>#include &lt;linux/mempolicy.h&gt;</code>.</p>\n\n<p>MPOL_LOCAL should be declared user side in <a href=\"https://github.com/numactl/numactl/blob/master/numaif.h\" rel=\"nofollow noreferrer\">numaif.h</a> as in the man page. I fail to see why it isn't, alongside with other defines. Also the definition for MPOL_MAX changes - kernel side it is equal to <code>MPOL_LOCAL + 1 = 5</code>, but in numaif.h it's equal to <code>MPOL_INTERLEAVE = 3</code>. I would expect MPOL_MAX to be either one greater then the maximum MPOL or equal maximum value on both sides, but kernel and user space tool define it differently.</p>\n\n<p>I think it deserves to post an issue to <a href=\"https://github.com/numactl/numactl\" rel=\"nofollow noreferrer\">numactl</a> to notify the developers. According to man page it should defined. I don't know why it isn't.</p>\n\n<p>As for now, I would just </p>\n\n<pre><code>#include &lt;numaif.h&gt;\n#ifndef MPOL_LOCAL\n#define MPOL_LOCAL 4\n#endif\n</code></pre>\n\n<p>I have browsed the web to find out how different programs handle this. I think programs just define all MPOL_* symbols themselves, see <a href=\"https://github.com/open-mpi/hwloc/blob/master/hwloc/topology-linux.c\" rel=\"nofollow noreferrer\">hwloc</a> or <a href=\"https://github.com/ColinIanKing/stress-ng/blob/master/stress-numa.c\" rel=\"nofollow noreferrer\">stress-ng</a>. <a href=\"https://github.com/axboe/fio/blob/master/fio.h\" rel=\"nofollow noreferrer\">fio</a> just defined MPOL_LOCAL themself to be equal 4. Open-mpi even marks that <code>numaif.h</code> does not define MPOL_LOCAL and they need to define it, see <a href=\"https://github.com/open-mpi/hwloc-debian/blob/master/src/topology-linux.c#L1400\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1415, "user_id": 4288486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceeebcdab5325a9b458c1af8c51111d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Neto", "link": "https://stackoverflow.com/users/4288486/jo%c3%a3o-neto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 52634361, "answer_count": 1, "score": 1, "last_activity_date": 1538594841, "creation_date": 1538588311, "last_edit_date": 1538591236, "question_id": 52632754, "link": "https://stackoverflow.com/questions/52632754/numaif-h-mpol-local-undeclared-for-use-in-mbind", "title": "numaif.h: MPOL_LOCAL undeclared for use in mbind", "body": "<p>According to the <a href=\"http://man7.org/linux/man-pages/man2/mbind.2.html\" rel=\"nofollow noreferrer\"><code>mbind man page</code></a>, one possible <code>mode</code> is <code>MPOL_LOCAL</code>, which places the memory region in the same node of the CPU that triggered the allocation:</p>\n\n<pre><code>#include &lt;numaif.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;    \n\n#define N 134217728\n\nint main() {\n    uint64_t *a = (uint64_t*) malloc(N*sizeof(uint64_t));\n    mbind(a, N, MPOL_LOCAL, 0, 0, MPOL_MF_STRICT | MPOL_MF_MOVE);\n    printf(\"Hello world!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>However, the symbol is simply not defined.</p>\n\n<pre><code>$ gcc-8 -lnuma example.c\nexample.c: In function \u2018main\u2019:\nexample.c:10:14: error: \u2018MPOL_LOCAL\u2019 undeclared (first use in this function); did you mean \u2018MPOL_MAX\u2019?\n  mbind(a, N, MPOL_LOCAL, 0, 0, MPOL_MF_STRICT | MPOL_MF_MOVE);\n              ^~~~~~~~~~\n              MPOL_MAX\nexample.c:10:14: note: each undeclared identifier is reported only once for each function it appears in\n</code></pre>\n\n<p>Changing to e.g. <code>MPOL_INTERLEAVE</code> makes it compile and display <code>Hello world!</code> just fine.</p>\n\n<p>What's going on here? At this stage I'm 100% puzzled.</p>\n\n<p>I've tried with <code>gcc</code>/<code>g++</code> 4.9.2, 5 and 8; in three different machines running the kernels <code>4.17.12+</code> (no idea where it came from), <code>4.18.10</code> (compiled myself) and <code>4.15.0</code> (included in latest Linux Mint). <code>libnuma-dev</code> is up to date.</p>\n"}, {"tags": ["c", "arrays", "malloc"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538589570, "post_id": 52632639, "comment_id": 92199409, "body": "Note that <code>strncpy(words[i], &amp;alphabet[i], sizeof(char));</code> is the same as <code>words[i][0] = alphabet[i];</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538589639, "post_id": 52632639, "comment_id": 92199444, "body": "<code>printf(&quot;%s\\n&quot;,words[i]);</code> is invalid as <code>words[i]</code> does not point to a <i>string</i>."}, {"owner": {"reputation": 97, "user_id": 4750318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b145b5d7dedc367e2ab6a061c7f57f5?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4750318/daniel"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538591503, "post_id": 52632639, "comment_id": 92200314, "body": "@Chux I know but the compiler recommended to use %s for some reason"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538592235, "post_id": 52632639, "comment_id": 92200706, "body": "<code>&quot;%s&quot;</code> makes sense with a <code>char*</code>, which is the type of <code>words[i]</code>, yet that is only 1 requirement.  Another requirement: <code>&quot;%s&quot;</code> expects that <code>words[i]</code> points to a <i>string</i>, which it does not.  It only points to 1 <code>char</code> that was allocated with <code>malloc(sizeof(char))</code>.  That <code>char</code> was assigned a single character like <code>&#39;a&#39;</code> with  <code>strncpy(words[i], &amp;alphabet[i], sizeof(char));</code>.  Thus that memory is not a <i>string</i>: characters up to and including a <i>null character</i>.  Recommend to review what a <i>string</i> is in C and do not use <code>strncpy()</code> to form <i>strings</i>."}], "owner": {"reputation": 97, "user_id": 4750318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b145b5d7dedc367e2ab6a061c7f57f5?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4750318/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1538588150, "answer_count": 0, "score": 0, "last_activity_date": 1538588191, "creation_date": 1538587854, "question_id": 52632639, "link": "https://stackoverflow.com/questions/52632639/why-does-this-array-assignation-fails-when-the-size-is-high-enough", "closed_reason": "Duplicate", "title": "why does this array assignation fails when the size is high enough?", "body": "<p>I was trying to test an alternative approach to do permutations when I encountered the following problem.</p>\n\n<p>The code works well when the variable size is equal to 26 (the size of alphabet) but fails if its big enough, however if I do the definition as is in the code and remove the two <em>for</em> loops that follow there is no problem. So the assignment is not the problem, the loops seem to be, but only when <em>size</em> is big enough, which shouldn't matter because as the code is right now, I'm only working with the first 26 elements, what's going on? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstatic const char alphabet[] = \"abcdefghijklmnopqrstuvwxyz\";\nstatic const int alphabetSize = sizeof(alphabet) - 1;\n\nint main(void)\n{\n    long size = 8353082582; // 26^6 + 25^5 + 26^4 ...\n    char* words[size];\n\n    for (int i=0; i &lt; strlen(alphabet); ++i)\n    {\n        words[i] = malloc(sizeof(char));\n        if (words[i] == NULL) {\n            printf(\"Memory allocation failed\\n\");\n        }\n        strncpy(words[i], &amp;alphabet[i], sizeof(char));\n    }\n\n    for (int i=0; i &lt; strlen(alphabet); ++i)\n        printf(\"%s\\n\",words[i]);\n\n    return 0;\n}\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>Segmentation fault: 11\n</code></pre>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1538587774, "post_id": 52632505, "comment_id": 92198473, "body": "@tadman It is not undefined behavior.  It is specifically allowed as of C99, and a footnote added in C11 clarifying the legality of it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1538587838, "post_id": 52632505, "comment_id": 92198494, "body": "@ChristianGibbons If you have a citation that&#39;d help. I can&#39;t see how you could define what would happen to <code>i</code> here."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1538588026, "post_id": 52632505, "comment_id": 92198594, "body": "@tadman See Some programmer dude&#39;s answer.  He got to it faster than me."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1538589162, "post_id": 52632505, "comment_id": 92199166, "body": "@ChristianGibbons Thanks for the note. Pulled my answer."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1538589587, "post_id": 52632505, "comment_id": 92199417, "body": "Based on the wording of 6.2.6.1/5 and footnote 95, it&#39;s undefined <i>unless</i> one of the members is of character type, which I interpret to mean either a single character or an array.  There&#39;s no such thing as a trap representation in <code>char</code> or <code>unsigned char</code>, so you should be able to safely write to a member of type <code>T</code> and read from a member of type <code>char</code> or <code>char [N]</code>.  For any other types, all bets are off."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1538604221, "post_id": 52632505, "comment_id": 92205770, "body": "@ChristianGibbons: If some part(s) of the Standard defines the behavior of some action, but another part says it&#39;s undefined, the latter takes precedence (though compilers would be free to extend the language by giving the former parts precedence in cases where that would be useful).  The way N1570 6.5p7 is written, any attempt to access a union object via means other than an lvalue of union type or character type invokes UB.  Since 6.5p7 includes no provision for accessing unions via lvalues of member type, support for such accesses is not part of the Standard, but merely a popular extension."}], "answers": [{"tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": false, "score": 3, "last_activity_date": 1538587820, "creation_date": 1538587820, "answer_id": 52632628, "question_id": 52632505, "link": "https://stackoverflow.com/questions/52632505/is-writing-then-reading-different-union-members-undefined-according-to-the-c-sta/52632628#52632628", "title": "Is writing then reading different union members undefined according to the C standard?", "body": "<blockquote>\n<pre><code>union {\n    int i;\n    short s;\n  } u;  \nu.i = 42;\nu.s = 1;`\n</code></pre>\n</blockquote>\n\n<p>What happens when you assign a value to <code>u.i</code> that's larger than a short can hold? For example, try this:</p>\n\n<pre><code>u.i = 40000;\nu.s = 1;\n</code></pre>\n\n<p>Should the compiler clear out the entire space reserved for <code>u</code> before assigning the short, or should it just write the bytes needed to store the new value? Since it's your responsibility to keep track of how to interpret the value stored in <code>u</code>, storing one type and then reading a different type of a different size seems like a poor plan.</p>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1538588132, "post_id": 52632664, "comment_id": 92198662, "body": "I could imagine an exotic one&#39;s-complement system with &quot;negative zero&quot; being a trap."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1538588441, "post_id": 52632664, "comment_id": 92198812, "body": "@ChristianGibbons Oh those pesky esoteric platforms always throw a wrench in  everything... :)"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1538588512, "post_id": 52632664, "comment_id": 92198853, "body": "Some platforms just want to watch the world burn."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1538588691, "post_id": 52632664, "comment_id": 92198939, "body": "one\u2019s-complement makes multiplication and division a bit cheaper, if there\u2019s no hardware support for those, and also makes long mul/div cheaper if it\u2019s implemented in software."}, {"owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538589291, "post_id": 52632664, "comment_id": 92199248, "body": "in a powerpc prints 65578"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538593110, "post_id": 52632664, "comment_id": 92201139, "body": "@theriver While PowerPC have configurable endianness (IIRC) most are using bid-endian. That means your <code>1</code> would be stored as <code>0x01 0x00</code> in the 16-bit <code>short</code> value, and in the 32-bit <code>int</code> it would be 0x01 0x00 xx xx` (with <code>xx</code> most likely being <code>0</code> due to the previous assignment). That means the value of <code>i</code> would be <code>1</code>. If you get something else then are you sure you&#39;re showing us the actual code you&#39;re running? With the actual values?"}, {"owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538667084, "post_id": 52632664, "comment_id": 92232812, "body": "@Someprogrammerdude my power pc is big endian and the value in memory is 0x00 0x01 0x00 0x2a"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538669019, "post_id": 52632664, "comment_id": 92233919, "body": "Ah yeah damn I mixed it up! I&#39;m sorry, you&#39;re correct and the values you&#39;re telling are also correct. The assignment <code>u.i = 42</code> will set all the memory to <code>0x00 0x00 0x00 0x2a</code>. Then <code>u.s = 1</code> will set the first two bytes to <code>0x00 0x01</code> leaving you with exactly the results you&#39;re seeing."}, {"owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538670132, "post_id": 52632664, "comment_id": 92234494, "body": "@Someprogrammerdude In little endian u.i=32 <b>0x2a 0x00 0x00 0x00</b> and u.s=1 <b>0x01 0x00 0x00 0x00</b> why 0x2a dissapear in memory?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538670261, "post_id": 52632664, "comment_id": 92234560, "body": "@theriver Remember that in a union all members <i>share</i> the memory. The <code>short</code> member <code>s</code> is overlying the <code>int</code> member <code>i</code> in memory."}, {"owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538670569, "post_id": 52632664, "comment_id": 92234724, "body": "@Someprogrammerdude yes, but in big endian 0x2a is in memory and little endian 0x2a dissapear, why?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538670919, "post_id": 52632664, "comment_id": 92234903, "body": "@theriver Again, remember that the memory is <i>shared</i> and that the member <i>overlays</i> each other in memory. Writing to <code>i</code> will modify all four bytes allocated for the union. Writing to <code>s</code> will only modify the two bytes needed for <code>s</code>, leaving the other two bytes untouched. For both little- and big-endian the bytes being untouched is the last two bytes, while the first two will be overwritten."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538671081, "post_id": 52632664, "comment_id": 92234991, "body": "@theriver Try this: On a piece of paper draw four squares next to each other with a pencil. Then in the first square write <code>0x2a</code>, in the second to fourth write <code>0x00</code>. Now, erase the numbers in the first two squares, and write <code>0x01</code> and <code>0x00</code>. That&#39;s basically what happens here on a little-endian system. Is the value <code>0x2a</code> still there? No, it&#39;s been erased and overwritten by <code>0x01</code>."}, {"owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538671943, "post_id": 52632664, "comment_id": 92235439, "body": "@Someprogrammerdude okay, but big endian 0x2a  it is not been erased and overwritten by 0x01 opposite little endian, why? memory in big endian <b>x00 0x01 0x00 0x2a</b>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538682371, "post_id": 52632664, "comment_id": 92239602, "body": "@theriver Draw that out on paper as well. Notice that then the <code>0x2a</code> is in the <i>last</i> square? While you still erase the two <i>first</i>?"}, {"owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "edited": false, "score": 0, "creation_date": 1538685122, "post_id": 52632664, "comment_id": 92240814, "body": "I finally understood the difference, thank you for explaining to me @Someprogrammerdude"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 6, "last_activity_date": 1538592685, "last_edit_date": 1538592685, "creation_date": 1538587953, "answer_id": 52632664, "question_id": 52632505, "link": "https://stackoverflow.com/questions/52632505/is-writing-then-reading-different-union-members-undefined-according-to-the-c-sta/52632664#52632664", "title": "Is writing then reading different union members undefined according to the C standard?", "body": "<p>From the C11 specification, \u00a76.5.2.3 note 95:</p>\n\n<blockquote>\n  <p>If the member used to read the contents of a union object is not the same as the member last used to\n  store a value in the object, the appropriate part of the object representation of the value is reinterpreted\n  as an object representation in the new type as described in 6.2.6 (a process sometimes called \u2018\u2018type\n  punning\u2019\u2019). This might be a trap representation.</p>\n</blockquote>\n\n<p>This says that what you're doing is allowed, but also implies that the value you read may not be what you expect (for example by writing to an <code>int</code> member and reading from a <code>float</code> member).</p>\n\n<p>There's also the caveat about trap representation values in which case the behavior will be undefined. For <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">two's complement</a> systems (which is the vast majority of all computers the last couple of decades) this isn't an issue with integer values though.</p>\n\n<hr>\n\n<p>In your case the result will depends very much on the platforms <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\"><em>endianness</em></a>. Either you will get the value you write (<code>1</code>) or you will get <code>0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538604483, "post_id": 52632688, "comment_id": 92205839, "body": "The expression <code>u.i</code> is an lvalue of type <code>int</code>.  According to N1570 6.5p7, union object <code>u</code> can only be accessed with an lvalue of <code>u</code>&#39;s type or a character type; <code>u.i</code> is neither.  So far as I can tell, the ability to use non-character-type lvalue like <code>u.i</code> to access <code>u</code> isn&#39;t part of the Standard, but merely a (very) popular extension."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1538588058, "creation_date": 1538588058, "answer_id": 52632688, "question_id": 52632505, "link": "https://stackoverflow.com/questions/52632505/is-writing-then-reading-different-union-members-undefined-according-to-the-c-sta/52632688#52632688", "title": "Is writing then reading different union members undefined according to the C standard?", "body": "<p>Writing to one member of a union and reading from another is referred to as <strong>type punning</strong> and is allowed by <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the standard</a>.</p>\n\n<p>This is spelled out in section 6.5.2.3:</p>\n\n<blockquote>\n  <p><em>3</em> A postfix expression followed by the <code>.</code> operator and an identifier designates a member of a structure or union object.  The\n  value is that of the named member, <sup>95)</sup> and is an lvalue if\n  the  first  expression  is  an  lvalue.   If the  first  expression \n  has  qualified  type,  the  result  has the so-qualified version of\n  the type of the designated member.</p>\n  \n  <p>95)   <strong>If the member used to read the contents of a union object is not\n  the same as the member last used to store a value in the object, the\n  appropriate part of the object representation of the value is\n  reinterpreted as  an  object  representation  in  the  new type</strong>  as \n  described  in  6.2.6  (a  process  sometimes  called  \"type\n  punning\").  This might be a trap representation.</p>\n</blockquote>\n"}], "owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "closed_date": 1538588175, "accepted_answer_id": 52632664, "answer_count": 3, "score": 3, "last_activity_date": 1538592685, "creation_date": 1538587291, "last_edit_date": 1538588194, "question_id": 52632505, "link": "https://stackoverflow.com/questions/52632505/is-writing-then-reading-different-union-members-undefined-according-to-the-c-sta", "closed_reason": "Duplicate", "title": "Is writing then reading different union members undefined according to the C standard?", "body": "<p>I read that this code it is undefined according to the c standard but I cant find why.\nIt is compiles without errors in gcc 8.1.0 and clang-6.0 and prints 1.</p>\n\n<p>the code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   union {\n     int i;\n     short s;\n   } u;  \n   u.i = 42;\n   u.s = 1;\n\n   printf(\"%d\\n\", u.i);\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "armadillo"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1538587193, "post_id": 52632340, "comment_id": 92198182, "body": "Come up with a set of functions that can be called from C that wrap the armadillo functions.  Then apply the steps given in the question you linked."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1538587610, "post_id": 52632340, "comment_id": 92198390, "body": "Your code cannot be compiled by a C compiler, it is C++. Everything else in your question is about C. You tagged both. Please explain the special language-duality of your question, i.e. how this is both about C AND C++."}, {"owner": {"reputation": 29, "user_id": 9918046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-55RfEjZGg8E/AAAAAAAAAAI/AAAAAAAAAFU/HZyW3fg-Si8/photo.jpg?sz=128", "display_name": "Sushant S Samuel", "link": "https://stackoverflow.com/users/9918046/sushant-s-samuel"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1538588021, "post_id": 52632340, "comment_id": 92198591, "body": "@Yunnosch my code is written in c but I want to use some of the functions from armadillo which I want to call in my c program."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1538588577, "post_id": 52632340, "comment_id": 92198886, "body": "That should be called &quot;Library Wrapper implementation&quot;. not &quot;Library implementation&quot;.  That code calls the library, it isn&#39;t the library."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1538595782, "post_id": 52632340, "comment_id": 92202393, "body": "Can you post an example call to armadillo library function made in C++?"}, {"owner": {"reputation": 1382, "user_id": 3928744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b904e3280e386d51bd888433c8ab0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "hbrerkere", "link": "https://stackoverflow.com/users/3928744/hbrerkere"}, "edited": false, "score": 0, "creation_date": 1538614011, "post_id": 52632340, "comment_id": 92207902, "body": "The simplest solution would be to treat your C project as a C++ project.  Bar a few minor differences, C++ can be essentially considered as a superset of C."}], "owner": {"reputation": 29, "user_id": 9918046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-55RfEjZGg8E/AAAAAAAAAAI/AAAAAAAAAFU/HZyW3fg-Si8/photo.jpg?sz=128", "display_name": "Sushant S Samuel", "link": "https://stackoverflow.com/users/9918046/sushant-s-samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538586702, "creation_date": 1538586702, "question_id": 52632340, "link": "https://stackoverflow.com/questions/52632340/how-to-call-armadillo-functions-in-c", "title": "how to call armadillo functions in c?", "body": "<p>I am trying to use the complex matrix operations of the armadillo library but my whole code base is in C. How can I make a wrapper for the existing cpp library.</p>\n\n<p>I have gone through examples online and I am able to make the wrapper for my own cpp library but I am a bit confused regarding an existing library such as armadillo. \nI have gone through the link <a href=\"https://stackoverflow.com/questions/26889142/using-eigen-in-a-c-project\">Using Eigen in a C Project</a></p>\n\n<p>Here I am confused with the Library implementation part</p>\n\n<pre><code>/* foo.cpp */\n#include \"foo.h\"\n#include &lt;iostream&gt;\nextern \"C\" {\nvoid foo(int arg) {\n  std::cout &lt;&lt; arg &lt;&lt; std::endl;\n}\n} /* extern \"C\" */\n</code></pre>\n\n<p>How am I supposed to change the library implementation of armadillo and include the wrapper headers to it?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 6510, "user_id": 2196561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac22ef3edb7836c3af11f5511f7942f8?s=128&d=identicon&r=PG", "display_name": "Ebbe M. Pedersen", "link": "https://stackoverflow.com/users/2196561/ebbe-m-pedersen"}, "edited": false, "score": 0, "creation_date": 1538601263, "post_id": 52632027, "comment_id": 92204766, "body": "Is this the result of <code>cout&lt;&lt;ciphertext&lt;&lt;&lt;endl;</code> you are showing ? <code>ciphertext</code> is not modified in the loop you show .. You properly wanted to print the content returned in <code>result</code> ?! If that is the case, you need to find another way to print it, as its binary data that can&#39;t be printed that way .."}, {"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "edited": false, "score": 0, "creation_date": 1538609874, "post_id": 52632027, "comment_id": 92207131, "body": "A very similar question was posed just yesterday, with an answer here: <a href=\"https://stackoverflow.com/a/52620525/1380680\">C - OpenSSL encryption using CBC (Cipher Block Chaining) mode</a>"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1538814525, "post_id": 52632027, "comment_id": 92283264, "body": "And the fact that you see garbage isn&#39;t bothering you? The binary stream is not null-terminated, hence you&#39;ve experiencing undefined behavior."}], "owner": {"reputation": 11, "user_id": 7596905, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JGpmhqUNPUE/AAAAAAAAAAI/AAAAAAAAAK0/DsWiSAyv_o8/photo.jpg?sz=128", "display_name": "Michael Adi G.", "link": "https://stackoverflow.com/users/7596905/michael-adi-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538585519, "creation_date": 1538585519, "question_id": 52632027, "link": "https://stackoverflow.com/questions/52632027/openssl-aes-encryption-with-c-produce-different-output-issue", "title": "OpenSSL AES encryption with C++ produce different output issue", "body": "<p>I have an issue while using Openssl in my C script where I have to encrypt the same string for a set number of loops, but even with the same iv and key, there are times when the encryption process produces different encrypted output than the rest of the other result, and it happens very frequently, because I need to compare the result of the encryption process (using memcmp) with a set of encrypted string, and the result won't be consistent if it keeps happening. can anybody help me figuring out what's wrong with my code?</p>\n\n<p>this is what I did:</p>\n\n<pre><code>for(int i=0;i&lt;20;i++){\n  string target = \"xxx\";\n    unsigned char* result;\n    unsigned char* unzero;\n    unzero = new unsigned char[100];\n    strcpy((char *) unzero, target.c_str());\n    int ciphertext_len;\n    result = new unsigned char[100];\n    // encryption process\n    ciphertext_len = encrypt (unzero, strlen ((char *)unzero), key, iv,result);\n    cout&lt;&lt;ciphertext&lt;&lt;&lt;endl;\n    }\n</code></pre>\n\n<p>and here is the encryption function:</p>\n\n<pre><code>int encrypt(unsigned char *plaintext, int plaintext_len, unsigned char *key,\n      unsigned char *iv, unsigned char *ciphertext)\n    {\n      EVP_CIPHER_CTX *ctx;\n      int len;\n      int ciphertext_len;\n\n      if(!(ctx = EVP_CIPHER_CTX_new())) handleErrors();\n\n      if(1 != EVP_EncryptInit_ex(ctx, EVP_aes_256_cbc(), NULL, key, iv))\n        handleErrors();\n\n      if(1 != EVP_EncryptUpdate(ctx, ciphertext, &amp;len, plaintext, plaintext_len))\n        handleErrors();\n      ciphertext_len = len;\n\n      if(1 != EVP_EncryptFinal_ex(ctx, ciphertext + len, &amp;len)) handleErrors();\n      ciphertext_len += len;\n\n      EVP_CIPHER_CTX_free(ctx);\n\n      return ciphertext_len;\n    }\n</code></pre>\n\n<p>here is the output:</p>\n\n<pre><code>\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdiPK\u0013\ufffd\ufffdU\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n\\p`b\ufffd@J\ufffd\ufffdA\ufffd\ufffd\ufffdi\n</code></pre>\n\n<p>notice that there is a difference in the second row, is there anybody that can help me? Thank you</p>\n"}, {"tags": ["c", "function", "pointers", "printf", "pass-by-reference"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 3, "creation_date": 1538585519, "post_id": 52632009, "comment_id": 92197339, "body": "<code>*q = &amp;x;</code> UB here. It should be <code>q = &amp;x;</code> perhaps you don&#39;t even need <code>int *q</code> you can directly call like <code>cube1(&amp;x)</code>"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1538585751, "post_id": 52632009, "comment_id": 92197443, "body": "<code>cube1</code> expects <code>int *</code> as argument, you are passing <code>int</code>. But I think this line will lead to undefined behavior if you call it with <code>cube1(&amp;x)</code>."}, {"owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538586608, "post_id": 52632009, "comment_id": 92197870, "body": "@kiranBiradar thank you for the suggestion, that appears to do the trick."}, {"owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1538586765, "post_id": 52632009, "comment_id": 92197949, "body": "@Osiris interesting point, you may be right, however I think due to the simplicity of this program, it appears I can get away with calling cube1(&amp;x) and still get the correct output.  However, your suggestion is still valuable to me as a student.  Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": true, "score": 1, "last_activity_date": 1538587228, "creation_date": 1538587228, "answer_id": 52632487, "question_id": 52632009, "link": "https://stackoverflow.com/questions/52632009/using-pointers-to-emulate-pass-by-reference-with-simple-function-but-getting-no/52632487#52632487", "title": "using pointers to emulate pass by reference with simple function but getting no output", "body": "<p>If you emulate pass by reference with pointers you have to pass the pointer to the function, not the variable. <code>*q = &amp;x;</code> should be <code>q = &amp;x;</code> and the function call should be <code>cube1(&amp;x)</code> or <code>cube1(q)</code>.</p>\n\n<p>But even if you do that you would invoke undefined behavior since you are calling <code>cube1(&amp;x)</code>, which modify <code>x</code>, and pass <code>x</code> as parameter without a sequence point in between. There is no guaranteed order of evaluation.</p>\n\n<p>For example on my system it outputs me:</p>\n\n<pre><code>27 cubed using variable passing by reference =  27\n27 cubed using  variable passing by value =  19683\n</code></pre>\n\n<p>To avoid this you should print <code>x</code> and the return value of the function in two seperate statements:</p>\n\n<pre><code>    printf(\"%d cubed using variable passing by reference =  \", x);\n    printf(\"%d\\n\", cube1(&amp;x));\n    printf(\"%d cubed using  variable passing by value =  %d\\n\", x, cube2(x));\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52632487, "answer_count": 1, "score": 0, "last_activity_date": 1538587228, "creation_date": 1538585433, "question_id": 52632009, "link": "https://stackoverflow.com/questions/52632009/using-pointers-to-emulate-pass-by-reference-with-simple-function-but-getting-no", "title": "using pointers to emulate pass by reference with simple function but getting no output", "body": "<p>I have referenced the following question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/46498129/using-pointers-to-emulate-pass-by-reference-in-a-pass-by-value-function-c-and-c\">Using pointers to emulate Pass-by-Reference in a Pass-by-Value function (C and C++)</a></p>\n\n<p>I am attempting a very similar exercise except instead of implementing a 'swap' function, I'm attempting to implement a function that calculates the cube of an integer number.  The perplexing thing for me is I get no output at all, not even the \"hello world\" test output.  In fact all I get is the following:</p>\n\n<pre><code>process exited after 1.967 seconds with return value 3221225477\n</code></pre>\n\n<p>My code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint cube1(int *p);\nint cube2(int a);\n\nint main(int argc, char *argv[]) \n{\nint x;\nint *q;\n\nx = 3;\n*q = &amp;x;\n\n//output test  \nprintf(\"hello world\\n\");\n\nprintf( \"x = %d\\n\", x );    \nprintf( \"q = %p\\n\", q );\n\nprintf(\"%d cubed using variable passing by reference =  %d\\n\", x, cube1(x));\nprintf(\"%d cubed using  variable passing by value =  %d\\n\", x, cube2(x));\n\nsystem(\"pause\");\nreturn 0;\n}\n\n//simulated pass by reference\nint cube1(int *p)\n{\nint temp = *p; \ntemp = temp*temp*temp;\n*p = temp;\n\nreturn *p;\n}\n\n//standard pass by value\nint cube2(int a)\n{\n    return a*a*a;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "multidimensional-array"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1538585348, "post_id": 52631961, "comment_id": 92197243, "body": "It is not clear what the function should do."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1538585429, "post_id": 52631961, "comment_id": 92197287, "body": "<code>strcpy(line[a][b], para);</code> this is wrong, maybe it should be <code>strcpy(line[a], para);</code>?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1538585452, "post_id": 52631961, "comment_id": 92197303, "body": "<code>c</code> is not initialized. first argument of <code>strcpy</code> is of type <code>char</code>. <code>a!=feof(stdin)</code> does not make sense. function does not return anything."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538586229, "post_id": 52631961, "comment_id": 92197679, "body": "@kiranBiradar It would be syntactically correct, but what would be the purpose of <code>b</code> then?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1538586303, "post_id": 52631961, "comment_id": 92197724, "body": "@Osiris Even I&#39;m not sure why op needs 2 for loops. That&#39;s why maybe."}, {"owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 1, "creation_date": 1538586397, "post_id": 52631961, "comment_id": 92197776, "body": "Your code make no sense.It is way too unclear what you want. Besides that, you have many mistakes in your code."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1538587690, "post_id": 52631961, "comment_id": 92198431, "body": "What do you mean by &quot;it still won\u2019t work&quot;? Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to clarify."}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1538590425, "post_id": 52631961, "comment_id": 92199844, "body": "Try using the debugger to see the values of all your variables after each instruction. You should be able to see when things don&#39;t go as expected."}], "owner": {"reputation": 1, "user_id": 10452523, "user_type": "registered", "profile_image": "https://graph.facebook.com/2194673460857963/picture?type=large", "display_name": "Breanna Grubb", "link": "https://stackoverflow.com/users/10452523/breanna-grubb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538585286, "creation_date": 1538585179, "last_edit_date": 1538585286, "question_id": 52631961, "link": "https://stackoverflow.com/questions/52631961/how-to-add-a-word-or-words-to-a-2-d-array", "title": "How to add a word or words to a 2-D array", "body": "<p>I can\u2019t figure out what I\u2019m doing wrong. Another question on Stack Overflow said to use <code>strcpy</code> and I did but it still won\u2019t work. \nThis is the function. Can you guys please help?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar LeftAlignment(int columnWidth) {\n    printf(\"FIXME: LA\");\n\n    char para[20], line[20][20];\n    int a, b, c;\n    printf(\"Enter your text: \");\n    scanf(\"%s\", para);\n\n    for (a=0; a!=feof(stdin); a++) {\n        for (b=0; c &lt; columnWidth; b++) {\n            strcpy(line[a][b], para);\n            c = (strlen(para) + 1) + c;\n        }\n        scanf(\"%s\", para);\n    }\n</code></pre>\n"}, {"tags": ["c", "io"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538584576, "post_id": 52631751, "comment_id": 92196851, "body": "use         <code>scanf(&quot; %c&quot;, &amp;ch);</code>(not space before <code>%c</code>) because <code>%c</code> was reading <code>\\n</code> from previous input."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1538584713, "post_id": 52631751, "comment_id": 92196909, "body": "Also, <code>ch</code> is uninitialized when you use it as the conditional in your while loop.  Try using do...while loop instead.  Also, you are comparing a <code>char</code> to a <code>char *</code> there.  instead it should be <code>ch != &#39;n&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9295579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023de4d4e81c890a3f291eb6c4ef64f3?s=128&d=identicon&r=PG&f=1", "display_name": "pxc3110", "link": "https://stackoverflow.com/users/9295579/pxc3110"}, "edited": false, "score": 0, "creation_date": 1538590530, "post_id": 52631833, "comment_id": 92199883, "body": "The third point you make is interesting but not clear. Can you elaborate on that pls? Thnx"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 11, "user_id": 9295579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023de4d4e81c890a3f291eb6c4ef64f3?s=128&d=identicon&r=PG&f=1", "display_name": "pxc3110", "link": "https://stackoverflow.com/users/9295579/pxc3110"}, "edited": false, "score": 0, "creation_date": 1538592022, "post_id": 52631833, "comment_id": 92200596, "body": "@Zhiwei Liu &#39;n&#39; is a char. &quot;n&quot; is a string (it&#39;s type char*). Since ch is of type char. As a result you should use &#39;n&#39; for the comparison, and not &quot;n&quot;.  Since my answer solves your problem, don&#39;t forget to accept my answer, by clicking on the green mark at it&#39;s left."}, {"owner": {"reputation": 11, "user_id": 9295579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023de4d4e81c890a3f291eb6c4ef64f3?s=128&d=identicon&r=PG&f=1", "display_name": "pxc3110", "link": "https://stackoverflow.com/users/9295579/pxc3110"}, "edited": false, "score": 0, "creation_date": 1538594682, "post_id": 52631833, "comment_id": 92201906, "body": "You mention that I would get this : warning: comparison between pointer and integer      while (ch != &quot;n&quot;) {                ^~              I don&#39;t see any pointer or integer Also, isn&#39;t char* supposed to be a pointer to a character?"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 0, "last_activity_date": 1538584953, "last_edit_date": 1538584953, "creation_date": 1538584622, "answer_id": 52631833, "question_id": 52631751, "link": "https://stackoverflow.com/questions/52631751/io-in-c-standard/52631833#52631833", "title": "IO in C standard", "body": "<p>Change this:</p>\n\n<pre><code>scanf(\"%c\", &amp;ch);\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>scanf(\" %c\", &amp;ch);\n</code></pre>\n\n<p>in order to eat the leftover character (the newline character you pressed when you entered the numbers (<code>seed and</code>Range`) before).</p>\n\n<p>I had wrote more about that issue <a href=\"https://gsamaras.wordpress.com/code/caution-when-reading-char-with-scanf-c/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<p>Moreover, your code invokes <em>Undefined Behavior</em> (UB), since you check <code>ch</code> before it gets initialized here:</p>\n\n<pre><code>char ch;\n\nwhile (ch != \"n\") {\n    ...\n}\n</code></pre>\n\n<p>Use a do-while loop structure instead, like this:</p>\n\n<pre><code>do {\n    ...\n} while (ch != 'n');\n</code></pre>\n\n<hr>\n\n<p>Furthermore, you should get a compiler warning like this:</p>\n\n<pre><code>warning: comparison between pointer and integer\n     while (ch != \"n\") {\n               ^~\nwarning: comparison with string literal results in unspecified behavior [-Waddress]\n</code></pre>\n\n<p>Change <code>\"n\"</code> to <code>'n'</code>, since <code>ch</code> is of type <code>char</code>, not <code>char*</code>.</p>\n\n<hr>\n\n<p>Putting everything together, your code should like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    int seed;\n    int Range;\n    char ch;\n\n    do {\n        printf(\"Enter a seed: \");\n        scanf(\"%d\", &amp;seed);\n        printf(\"Enter a Range: \");\n        scanf(\"%d\", &amp;Range);\n\n        srand(seed);\n\n        for (int i = 0; i &lt; 10; i++) {\n            scheduler(rand() % Range + 1);\n        }\n\n        printf(\"Continue?\\n\");\n        scanf(\" %c\", &amp;ch);\n    } while (ch != 'n');\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1538586333, "creation_date": 1538586333, "answer_id": 52632249, "question_id": 52631751, "link": "https://stackoverflow.com/questions/52631751/io-in-c-standard/52632249#52632249", "title": "IO in C standard", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n   int seed;\n   int Range;\n   char ch = '\\0';    /* initialize ch to something other than 'n' */\n\n   /* if ch not initialized, u take your chances on being able to enter while loop */\n   while (ch != 'n')    / single quote characters, double quote for strings imply null character \\0 after last character in string */\n   {\n       printf(\"Enter a seed: \");\n       fflush( stdout );   /* because of no \\n in printf */\n       scanf(\"%d\", &amp;seed);\n       printf(\"Enter a Range: \");\n       fflush( stdout );   /* because of no \\n in printf */\n       scanf(\"%d\", &amp;Range);\n\n       srand(seed);\n\n       for (int i = 0; i &lt; 10; i++)\n       {\n           scheduler(rand() % Range + 1);\n       }\n\n       printf(\"Continue?\\n\");   /* bet u this works, because of \\n */\n       scanf(\"%c\", &amp;ch);\n   }\n\n   return 0;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 11, "user_id": 9295579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023de4d4e81c890a3f291eb6c4ef64f3?s=128&d=identicon&r=PG&f=1", "display_name": "pxc3110", "link": "https://stackoverflow.com/users/9295579/pxc3110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52631833, "answer_count": 2, "score": 0, "last_activity_date": 1538586333, "creation_date": 1538584281, "question_id": 52631751, "link": "https://stackoverflow.com/questions/52631751/io-in-c-standard", "title": "IO in C standard", "body": "<p>The following program is from a homework assignment. \nI need to write a program where it:</p>\n\n<p>asks a Seed and a Range,</p>\n\n<p>generates and displays a sequence of random numbers based on the seed and range input,</p>\n\n<p>converts the above into a sequence of \"A\"s, \"B\"s, or \"C\"s depending on the generated sequence: turn 1 into A, 2 into B, 3 into C;</p>\n\n<p>asks whether to continue; if user puts \"n\", stop; else starts over again.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    int seed;\n    int Range;\n    char ch;\n\n    while (ch != \"n\") {\n        printf(\"Enter a seed: \");\n        scanf(\"%d\", &amp;seed);\n        printf(\"Enter a Range: \");\n        scanf(\"%d\", &amp;Range);\n\n        srand(seed);\n\n        for (int i = 0; i &lt; 10; i++) {\n            scheduler(rand() % Range + 1);\n        }\n\n        printf(\"Continue?\\n\");\n        scanf(\"%c\", &amp;ch);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I put two arbitrary numbers and it generates a random sequence as expected. But then it just prints \"Continue?\" without taking an input from me and then asks me to enter a seed. What's wrong with my code? What's the proper way to do this?</p>\n"}, {"tags": ["c", "assembly", "x86-16", "bootloader"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1538584475, "post_id": 52631662, "comment_id": 92196804, "body": "Do you want to use C code in the bootloader or in your operating system? Is your operating system a 16 bit or 32 bit operating system?"}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1538584566, "post_id": 52631662, "comment_id": 92196846, "body": "@fuz I am only at the bootloader stage at the moment so am doing this to learn how to mix C and assembly together. My host OS is macOS 64bit and my operating system will be booting in real mode 16 bit."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1538584733, "post_id": 52631662, "comment_id": 92196918, "body": "&quot;bin format&quot; is often used when it really means &quot;no format whatsoever&quot;. That makes sense for bootloaders; there&#39;s nothing yet which could interpret the format. It also means there&#39;s no real way to find <code>Print</code> from C."}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1538584828, "post_id": 52631662, "comment_id": 92196958, "body": "@MSalters At what stage would I be able to do this then? When I load a filesystem?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1538585144, "post_id": 52631662, "comment_id": 92197128, "body": "@iProgram: I would say much, much earlier than that. Remember, I&#39;m looking at some code right now that basically tries to print something <b>immediately</b> after booting."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1538585817, "post_id": 52631662, "comment_id": 92197481, "body": "@iProgram A bootloader is not a really good example for interaction between C and assembly because its size is restricted to 512 bytes and its in 16 bit mode (which only few compilers can generate code for).  If you are programming for 16 bit mode, I&#39;m not quite sure which C compiler you are going to use.  gcc and clang can&#39;t generate code for that for example."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1538585868, "post_id": 52631662, "comment_id": 92197504, "body": "Generally though, you are going to need a linker that links the different object files together to produce a binary.  While it is possible to generate a bootsector this way, it&#39;s not really a good example to illustrate the general principle."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1538588244, "post_id": 52632547, "comment_id": 92198724, "body": "You probably want <code>unsigned char</code>, otherwise sign-extending high-ASCII characters will set AH=0xFF.  (Also maybe worth mentioning that adapting that function for other <code>int 0x10</code> calls requires changing the constraints to account for changing AL or other output registers, unlike AH=0x0e / int 0x10.)"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1538588298, "post_id": 52632547, "comment_id": 92198748, "body": "@PeterCordes You may be right, I&#39;m writing this from top of my head. Be sure to drop an edit if you&#39;d want to improve this answer"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1538588700, "post_id": 52632547, "comment_id": 92198943, "body": "I double-checked that <code>char</code> is signed in the ABI used by x86 gcc.  <a href=\"https://godbolt.org/z/wwxHBA\" rel=\"nofollow noreferrer\">godbolt.org/z/wwxHBA</a>, so signed <code>*s</code> as an operator to binary <code>|</code> would be sign-extended to <code>int</code> according to the default integer promotions."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1538588907, "post_id": 52632547, "comment_id": 92199038, "body": "You should probably compile with <code>-m16</code> instead of manually hacking in a  <code>.code16gcc</code>.  That might be all <code>-m16</code> does, though: I don&#39;t think it changes the ABI, or ever uses 16-bit addressing modes."}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1538673034, "post_id": 52632547, "comment_id": 92235969, "body": "When linking, I am getting the issue <code>ld: unknown option: -Tlinker.ld</code>. What am I meant to do? I pasted the linker code in a file called <code>linker.ld</code>. Also, I don&#39;t think objcopy is for macOS and think it is Windows only?"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1538679628, "post_id": 52632547, "comment_id": 92238329, "body": "objcopy is thing shipped with GCC"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1538679664, "post_id": 52632547, "comment_id": 92238347, "body": "i forgot to put space between -T and linker.ld."}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1538681168, "post_id": 52632547, "comment_id": 92239033, "body": "Now it gives me <code>ld: unknown option: -T</code>. I tried changing it to <code>-t</code> instead and then it gives me <code>ld: unknown option: -nostdlib</code>"}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1538681233, "post_id": 52632547, "comment_id": 92239069, "body": "I also don&#39;t have objcopy. <code>-bash: objcopy: command not found</code>"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1538681294, "post_id": 52632547, "comment_id": 92239099, "body": "You are missing basic system components. Just install them :)"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1538681338, "post_id": 52632547, "comment_id": 92239116, "body": "Also, LD has -nostdlib option: <a href=\"https://linux.die.net/man/1/ld\" rel=\"nofollow noreferrer\">linux.die.net/man/1/ld</a> Better get your hands on linux, it will save you lots of stress and time"}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1538681352, "post_id": 52632547, "comment_id": 92239124, "body": "Might it me that macOS uses clang as the compiler which wraps with gcc?"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1538681395, "post_id": 52632547, "comment_id": 92239141, "body": "No idea, never used macOS."}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "reply_to_user": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1538681457, "post_id": 52632547, "comment_id": 92239177, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181306/discussion-between-iprogram-and-krzysztof-szewczyk\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "is_accepted": false, "score": 3, "last_activity_date": 1538679683, "last_edit_date": 1538679683, "creation_date": 1538587505, "answer_id": 52632547, "question_id": 52631662, "link": "https://stackoverflow.com/questions/52631662/how-to-compile-assembly-and-c-together-as-bin-format/52632547#52632547", "title": "How to compile assembly and C together as bin format", "body": "<p>Basically you have to run <code>gcc</code> with <code>-ffreestanding</code> (don't link) and then link using <code>ld</code> with the flags <code>-static</code>, <code>-nostdlib</code>.</p>\n\n<p>Creating bootloader in C is not exactly good idea. I'd recommend you to get copy of GRUB and work on top of it. OSDEV wiki has explained this incredibly well.</p>\n\n<p>To sum things up, whenever you'll try to create bootloader in C, use these to compile it:</p>\n\n<pre><code>$ gcc -m16 -c -g -Os -march=i686 -ffreestanding -Wall -Werror -I. -o bootloader.o bootloader.c\n$ ld -static -T linker.ld -nostdlib --nmagic -o bootloader.elf bootloader.o\n$ objcopy -O binary bootloader.elf bootloader.bin\n</code></pre>\n\n<p>Second thing, you can't use extern! You didn't set up stack, so C code will probably bail out pretty quickly. C compiler doesn't know in which format do you pass parameters to it, because your function doesn't follow any of usual conventions. Possible linker script:</p>\n\n<pre><code>ENTRY(main);\nSECTIONS\n{    \n    . = 0x7C00;    \n    .text : AT(0x7C00)\n    {\n        _text = .;\n        *(.text);\n        _text_end = .;\n    }\n    .data :\n    {\n        _data = .;\n        *(.bss);\n        *(.bss*);\n        *(.data);\n        *(.rodata*);\n        *(COMMON)\n        _data_end = .;\n    }    \n    .sig : AT(0x7DFE)    \n    {        \n        SHORT(0xaa55);\n    }    \n    /DISCARD/ :\n    {\n        *(.note*);\n        *(.iplt*);\n        *(.igot*);\n        *(.rel*);\n        *(.comment);  \n    }\n}\n</code></pre>\n\n<p>Also, GCC is by default emitting 32-bit code - you need to force it to generate 16-bit code using <code>__asm__(\".code16gcc\\n\")</code> or, as suggested in comments, pass <code>-m16</code> parameter to compilers' commandline.</p>\n\n<p>You can rewrite your function to C (to make it complain any of calling conventions) like so:</p>\n\n<pre><code>void print(const unsigned char * s){\n        while(*s){\n                __asm__ __volatile__ (\"int  $0x10\" : : \"a\"(0x0E00 | *s), \"b\"(7));\n                s++;\n        }\n}\n</code></pre>\n\n<p>And of course, right after <code>.code16gcc</code>, you'd have to jump directly to your bootloader start: <code>__asm__ (\"jmpl  $0, $main\\n\");</code></p>\n"}], "owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1538681474, "creation_date": 1538583947, "last_edit_date": 1538681474, "question_id": 52631662, "link": "https://stackoverflow.com/questions/52631662/how-to-compile-assembly-and-c-together-as-bin-format", "title": "How to compile assembly and C together as bin format", "body": "<p>I am trying to make my own operating system from scratch and am making my own boot loader. I have a function to print a string onto the screen.</p>\n\n<p>Here is some code that I have:</p>\n\n<pre><code>ORG 0x7C00\nBITS 16\n\nmov si, msg\ncall Print\n\ncli\nhlt\n\nPrint:\n  lodsb\n  cmp al, 0\n  je Done\n  mov ah, 0Eh\n  mov bh, 0\n  int 10h\n  jmp Print\n\nDone:\n  ret\n\nmsg db 'Hello World!', 0\ntimes 510-($-$$) db 0\ndw 0xAA55\n</code></pre>\n\n<p>This is then compiled with the following command:</p>\n\n<pre><code>nasm -f bin bootloader.asm -o bootloader.bin\n</code></pre>\n\n<p>The question is, how would I be able to access the print function within C? I know I have to use the extern keyword, but how would I compile this into a binary format file?</p>\n"}, {"tags": ["c", "process", "signals"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1538584131, "post_id": 52631630, "comment_id": 92196635, "body": "Has your child set up its signal handler by the time it receives the signal?  Also, why does your signal handling function call the function that sets a signal handler?"}, {"owner": {"reputation": 11, "user_id": 9221213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc716a3e3fdf825acecb3e7f7558987d?s=128&d=identicon&r=PG&f=1", "display_name": "Poncjusz", "link": "https://stackoverflow.com/users/9221213/poncjusz"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1538584950, "post_id": 52631630, "comment_id": 92197014, "body": "Can you show me this problems in code?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1538585994, "post_id": 52631630, "comment_id": 92197557, "body": "Race condition. You send a signal before the other program has a chance to set up a handler."}, {"owner": {"reputation": 11, "user_id": 9221213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc716a3e3fdf825acecb3e7f7558987d?s=128&d=identicon&r=PG&f=1", "display_name": "Poncjusz", "link": "https://stackoverflow.com/users/9221213/poncjusz"}, "edited": false, "score": 0, "creation_date": 1538586933, "post_id": 52631630, "comment_id": 92198039, "body": "So, I must will add sleep() or something?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1538607448, "post_id": 52631630, "comment_id": 92206566, "body": "Sorry, no, you&#39;ve got a whole bunch of different errors and I have no idea how it ever compiles. 1. <code>signal.h</code> not included. 2 <code>void main</code> 3. <code>send_SIGUSR1()</code> is a wrong argument to <code>signal</code>, you want <code>send_SIGUSR1</code>. 4. A signal handler needs to have an <code>int</code> parameter. <code>I recommend </code>clang -Weverything -Werror<code>. After you&#39;re done with this, add some </code>sleep<code>, and&#47;or call </code>signal` before <code>fork</code>. Oh and indent your code."}], "owner": {"reputation": 11, "user_id": 9221213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc716a3e3fdf825acecb3e7f7558987d?s=128&d=identicon&r=PG&f=1", "display_name": "Poncjusz", "link": "https://stackoverflow.com/users/9221213/poncjusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538584337, "creation_date": 1538583827, "last_edit_date": 1538584337, "question_id": 52631630, "link": "https://stackoverflow.com/questions/52631630/communication-between-two-process-using-signals-in-c", "title": "Communication between two process using signals in C", "body": "<p>I must create a program in C who will be communicate between two process by SIGUSR1. This program must will reply back when send and receive signal. I have the code below, but he just sends a signal, why does the receiving function not work?</p>\n\n<p><a href=\"https://i.stack.imgur.com/qkE3z.jpg\" rel=\"nofollow noreferrer\">IMG</a></p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid send_SIGUSR1();\n\nvoid main()\n{\nint pid;\n\nif ((pid = fork()) &lt; 0) {\n    perror(\"Fork\");\n    exit(1);\n}\n\nif (pid == 0) {\n    signal(SIGUSR1, send_SIGUSR1());\n}\n\nelse\n{\n    printf(\"\\nPARENT: sending SIGUSR1\\n\\n\");\n    kill(pid, SIGUSR1);\n}\n}\n\nvoid send_SIGUSR1()\n\n{\nsignal(SIGUSR1, send_SIGUSR1);\nprintf(\"CHILD: I have received a SIGUSR1\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "decode", "endianness", "undefined-behavior", "decoding"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538583971, "post_id": 52631595, "comment_id": 92196551, "body": "Unfortunately there seem to be no portable or even somewhat standard-complying way in C to serialize and de-serialize doubles. Even if you &quot;swap&quot; the bytes as <code>char</code> array, it would mean that you can&#39;t reinterpret it as <code>double</code> anymore without violation of the strict-aliasing rule. In your example the violation is even more visible, as you reinterpret integer type as <code>double</code>. So yes, technically it is UB."}, {"owner": {"reputation": 52633, "user_id": 3155639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d254eedd932f950213109aa3706aba74?s=128&d=identicon&r=PG", "display_name": "Alexander O&#39;Mara", "link": "https://stackoverflow.com/users/3155639/alexander-omara"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538584226, "post_id": 52631595, "comment_id": 92196685, "body": "@EugeneSh. Are you saying that the byte-swap technique is also undefined behavior?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538584387, "post_id": 52631595, "comment_id": 92196775, "body": "Yes. According to the strict-aliasing rule an object of a specific type can be only accessed using pointer of this type. It is OK to access it through <code>char*</code>, but if modified through this array, it can&#39;t be safely reinterpreted back to the original type."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538584403, "post_id": 52631595, "comment_id": 92196783, "body": "@EugeneSh. <a href=\"https://stackoverflow.com/a/51228315/1708801\">memcpy is the way to avoid strict aliasing</a> whether you have a valid double is a different story but I don&#39;t think the standard could guarantee that."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1538584522, "post_id": 52631595, "comment_id": 92196825, "body": "@ShafikYaghmour <code>memcpy</code> is a way to hide the violation, but not (some of) the rationales behind the rule. It won&#39;t avoid the possible trap representation and alignment issues."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538584731, "post_id": 52631595, "comment_id": 92196916, "body": "@EugeneSh. there are standard ways of dealing <a href=\"https://en.cppreference.com/w/c/language/_Alignas\" rel=\"nofollow noreferrer\">with alignment</a>, valid representation can not be but the standard can never help you there."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1538584803, "post_id": 52631595, "comment_id": 92196944, "body": "@ShafikYaghmour Indeed, a careful programming can reduce the UB to implementation defined behavior. But not farther than that.."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538585773, "post_id": 52631595, "comment_id": 92197461, "body": "@EugeneSh.: There is no code in the question that modifies an object by writing bytes (character types) to it (except for objects that are character types). The code in the question reinterprets bytes via a union, which is permitted by the C standard."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538585977, "post_id": 52631595, "comment_id": 92197551, "body": "@EricPostpischil Reinterpreting an object modified as an object of different type is not permitted, no matter what mechanism is used to modify it. The same as the aliasing is allowed with <code>char*</code> but modification and later reinterpretation is not."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538586024, "post_id": 52631595, "comment_id": 92197579, "body": "@EugeneSh.: Reinterpreting via a union is permitted by C 2018 6.5.2.3 3, and footnote 99 explicitly confirms that is the intended meaning of the text."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538586197, "post_id": 52631595, "comment_id": 92197663, "body": "@EricPostpischil I afraid I don&#39;t have an access to C 2018 standard, and the numbers seem different from C11 I am looking at.."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538586340, "post_id": 52631595, "comment_id": 92197744, "body": "@EugeneSh.: The clause and paragraph are the same in C 2018,C 2011, and C 1999. The note is 99 in C 2018, 95 in C 2011. C 1999 does not have the note."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538586641, "post_id": 52631595, "comment_id": 92197893, "body": "@EugeneSh.: Modifying the bytes of an object through a character type does not violate the aliasing rules. Per C 2018 6.5 7, \u201cAn object shall have its stored value accessed only by\u2026 [various types], or a character type.\u201d Per 3.1 1, \u201caccess\u201d means \u201cto read or modify the value of an object\u201d."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538586888, "post_id": 52631595, "comment_id": 92198008, "body": "@EricPostpischil I was about to cite this paragraph and ask how well does it work with the aforementioned one (about unions). This discussion is arising quite frequently here on SO and every time there seem to be different conclusions from it..."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538587115, "post_id": 52631595, "comment_id": 92198134, "body": "@EugeneSh.: When one reads a member of a union through the <code>structure.member</code> expression, one is reading the object that is that member through its own type, which is compatible with itself, of course. So it does not violate the aliasing rule. It could violate a rule about accessing a member other than the last-written member, if there were such a rule, but there is not."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538587450, "post_id": 52631595, "comment_id": 92198312, "body": "@EricPostpischil So bottom line, if there is say, a 4-byte wide communication channel and the data is received as an array of <code>uint32_t</code> which is a member of a union with some type <code>T</code>, it is safe and standard compliant to read the data as <code>T</code> assuming that it is what was sent?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1538590917, "post_id": 52631595, "comment_id": 92200048, "body": "@ShafikYaghmour: The Effective Type rules limit memcpy&#39;s type-conversion abilities to cases where the destination is of static or automatic duration.  The Standard does not define a reasonable solution to go the other way."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538591242, "post_id": 52631595, "comment_id": 92200204, "body": "@EricPostpischil: An access to a member is also an access to the union itself, as well as to all members thereof.  If an access via lvalue that is freshly derived from an lvalue of union type is recognized as an access to the union, such an access will be entitled to access all union members.  I see nothing in the Standard, however, that would compel such recognition in any case, nor that would suggest that quality implementations shouldn&#39;t make any attempt to recognize more cases than gcc and clang."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538594963, "post_id": 52631595, "comment_id": 92202032, "body": "@supercat I am confused by your wording (it probably me). Do you support Erics answer or object?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538596306, "post_id": 52631595, "comment_id": 92202620, "body": "@EugeneSh.: I should perhaps have said &quot;...is recognized as a <i>legitimate</i> access to the union&quot;.  Does that clear things up?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538597393, "post_id": 52631595, "comment_id": 92203122, "body": "@EugeneSh: Alternatively, if one interprets 6.5p7 as describing the types of things <i>that may alias</i> [hardly an unreasonable interpretation given the footnote], and recognizes that anything that would be allowed to alias an lvalue should also be allowed to access an lvalue which is <i>freshly derived</i> from it, that would also work.  IMHO, the authors of C89 thought the latter point obvious enough that it didn&#39;t need to be mentioned."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1538586846, "last_edit_date": 1538586846, "creation_date": 1538586207, "answer_id": 52632219, "question_id": 52631595, "link": "https://stackoverflow.com/questions/52631595/reading-double-to-platform-endianness-with-union-and-bit-shift-is-it-safe/52632219#52632219", "title": "Reading double to platform endianness with union and bit shift, is it safe?", "body": "<h1>Reinterpreting Through a Union</h1>\n\n<p>Constructing a <code>uint64_t</code> value by shifting and ORing bytes is of course supported by the C standard. (There is some hazard when shifting due to the need to ensure the left operand is the correct size and type to avoid issues with overflow and shift width, but the code in the question correctly converts to <code>uint64_t</code> before shifting.) Then the question remaining for the code is whether reinterpreting through a union is permitted by the C standard. The answer is yes.</p>\n\n<p>C 6.5.2.3 3 says:</p>\n\n<blockquote>\n  <p>A postfix expression followed by the <strong>.</strong> operator and an identifier designates a member of a structure or union object. The value is that of the named member,<sup>99)</sup>\u2026</p>\n</blockquote>\n\n<p>and note 99 says:</p>\n\n<blockquote>\n  <p>If the member used to read the contents of a union object is not the same as the member last used to store a value in the object, the appropriate part of the object representation of the value is reinterpreted as an object representation in the new type as described in 6.2.6 (a process sometimes called \"type punning\")\u2026</p>\n</blockquote>\n\n<p>Such reinterpretation of course relies on the object representations used in the C implementation. Notably the <code>double</code> must use the expected format, matching the bytes read from the input stream.</p>\n\n<h1>Modifying the Bytes of an Object</h1>\n\n<p>Modifying an object by modifying its bytes (as by using a pointer to <code>unsigned char</code>) is permitted by C. C 2018 6.5 7 says:</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of the following types: [list of various types], or a character type.</p>\n</blockquote>\n\n<p>Although one of the comments states that you may \u201caccess\u201d but not \u201cmodify\u201d the bytes of an object this way (apparently interpreting \u201caccess\u201d to mean only reading, not writing), C 2018 3.1 defines \u201caccess\u201d as:</p>\n\n<blockquote>\n  <p>to read or modify the value of an object.</p>\n</blockquote>\n\n<p>Thus, one is permitted to read or write the bytes of an object through character types.</p>\n"}, {"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 0, "last_activity_date": 1538588440, "creation_date": 1538588440, "answer_id": 52632800, "question_id": 52631595, "link": "https://stackoverflow.com/questions/52631595/reading-double-to-platform-endianness-with-union-and-bit-shift-is-it-safe/52632800#52632800", "title": "Reading double to platform endianness with union and bit shift, is it safe?", "body": "<blockquote>\n  <p>Reading double to platform endianness with union and bit shift, is it safe?</p>\n</blockquote>\n\n<p>This kind of thing only makes sense when dealing with data from outside the program (e.g. data from a file or network); where you have a strict format for the data (defined in the file format's specification or the network protocol's specification) that may have nothing to do with the format C uses, may have nothing to do with the CPU uses and may not be IEEE 754 format either.</p>\n\n<p>On the other side C doesn't provide any guarantees at all. For a simple example, it's perfectly legal for the compiler to use a BCD format for <code>float</code> where <code>0x12345e78</code> = <code>1.2345 * 10**78</code>, even if the CPU itself happens to support \"IEEE 754\".</p>\n\n<p>The result is you have \"whatever the spec says format\" from outside the program and you're converting that into a different \"whatever the compiler felt like format\" for use inside the program; and every single assumption you've made (including <code>sizeof(double)</code>) is potentially false.</p>\n"}], "owner": {"reputation": 52633, "user_id": 3155639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d254eedd932f950213109aa3706aba74?s=128&d=identicon&r=PG", "display_name": "Alexander O&#39;Mara", "link": "https://stackoverflow.com/users/3155639/alexander-omara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 52632219, "answer_count": 2, "score": 3, "last_activity_date": 1538588440, "creation_date": 1538583688, "last_edit_date": 1538587970, "question_id": 52631595, "link": "https://stackoverflow.com/questions/52631595/reading-double-to-platform-endianness-with-union-and-bit-shift-is-it-safe", "title": "Reading double to platform endianness with union and bit shift, is it safe?", "body": "<p>All the examples I've seen of reading a double of known endianness from a buffer to the platform endianness involve detecting the current platform's endianess and performing byte-swapping when necessary.</p>\n\n<p>On the other hand, I've seen another way of doing the same thing except for integers that uses bit shifting (<a href=\"https://stackoverflow.com/a/19751155\">one such example</a>).</p>\n\n<p>This got me thinking that it might be possible to use a union and the bitshift technique to read doubles (and floats) from buffers, and a quick test implementation seemed to work (at least with clang on x86_64):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n\ndouble read_double(char * buffer, bool le) {\n    union {\n        double d;\n        uint64_t i;\n    } data;\n    data.i = 0;\n\n    int off = le ? 0 : 7;\n    int add = le ? 1 : -1;\n    for (int i = 0; i &lt; 8; i++) {\n        data.i |= ((uint64_t)(buffer[off] &amp; 0xFF) &lt;&lt; (i * 8));\n        off += add;\n    }\n    return data.d;\n}\n\nint main() {\n    char buffer_le[] = {0x6E, 0x86, 0x1B, 0xF0, 0xF9, 0x21, 0x09, 0x40};\n    printf(\"%f\\n\", read_double(buffer_le, true)); // 3.141590\n\n    char buffer_be[] = {0x40, 0x09, 0x21, 0xF9, 0xF0, 0x1B, 0x86, 0x6E};\n    printf(\"%f\\n\", read_double(buffer_be, false)); // 3.141590\n\n    return 0;\n}\n</code></pre>\n\n<p>My question though is, is this a safe way to do this? Or is there undefined behavior involved here? Or if both this and the byte-swap method involve undefined behavior, is one safer than the other?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1538582901, "post_id": 52631257, "comment_id": 92196008, "body": "what&#39;s your real problem &quot;the other thread is never created &quot; what does it mean? it crashes? it exits? computer catches fire? something else?"}, {"owner": {"reputation": 310, "user_id": 6941400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srsn4.jpg?s=128&g=1", "display_name": "Anshuman Kumar", "link": "https://stackoverflow.com/users/6941400/anshuman-kumar"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1538583492, "post_id": 52631257, "comment_id": 92196320, "body": "What I meant is that the function meant for the thread is never called, and the terminal just stops after printing the sum of the even elements, which was just after pthread_join(&amp;thread,(void**)evensum). It prints the value 0 and stops right there and the main thread doesn&#39;t terminate. Sorry if I confused you cause I had omitted the line for brevity."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1538582808, "post_id": 52631337, "comment_id": 92195950, "body": "do you care to explain why?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538584440, "post_id": 52631337, "comment_id": 92196794, "body": "<code>pthread_join(&amp;thread1, &amp;result);</code> <code>&amp;thread1</code> typo? Syntax goes <code>int pthread_join(pthread_t tid, void **ret);</code>"}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1538582697, "creation_date": 1538582697, "answer_id": 52631337, "question_id": 52631257, "link": "https://stackoverflow.com/questions/52631257/can-someone-tell-me-the-error-as-pthread-join-is-not-working/52631337#52631337", "title": "Can someone tell me the error as pthread_join is not working", "body": "<p>Create all the thread and then join them like below:-</p>\n\n<pre><code>pthread_create(&amp;thread1,0,&amp;evensum,(void*)obj);\npthread_create(&amp;thread2,0,&amp;oddsum,(void*)obj);\n\npthread_join(&amp;thread1,(void**)evensum);\npthread_join(&amp;thread2,(void**)oddsum);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538584412, "post_id": 52631363, "comment_id": 92196788, "body": "<code>pthread_join(&amp;thread, &amp;result);</code>   <code>&amp;thread</code> typo? Syntax goes <code>int pthread_join(pthread_t tid, void **ret);</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538584766, "post_id": 52631363, "comment_id": 92196928, "body": "@kiranBiradar Yes, I missed that.  Updated."}, {"owner": {"reputation": 310, "user_id": 6941400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srsn4.jpg?s=128&g=1", "display_name": "Anshuman Kumar", "link": "https://stackoverflow.com/users/6941400/anshuman-kumar"}, "edited": false, "score": 0, "creation_date": 1538585789, "post_id": 52631363, "comment_id": 92197466, "body": "That fixed the problem related to threads not terminating. Thanks."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1538584749, "last_edit_date": 1538584749, "creation_date": 1538582811, "answer_id": 52631363, "question_id": 52631257, "link": "https://stackoverflow.com/questions/52631257/can-someone-tell-me-the-error-as-pthread-join-is-not-working/52631363#52631363", "title": "Can someone tell me the error as pthread_join is not working", "body": "<p>The second parameter to <code>pthread_join</code> is a <code>void **</code>, i.e. it expects a <em>pointer</em> to a <code>void *</code> which it dereferences to store the value in.  Because you're not passing the address of a variable, this function will attempted to use whatever value you passed in as an address (which would likely be invalid) and dereference it.  This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Also, the first parameter is of type <code>pthread_t</code> but you're passing a <em>pointer</em> to a <code>pthread_t</code>.</p>\n\n<p>You're also declaring local variables with the same names as the functions you're calling.  As a result, when you call <code>pthread_create(&amp;thread2,0,&amp;oddsum,(void*)obj);</code> you're actually passing the local <code>int</code> variable called <code>oddsum</code> and not the function called <code>oddsum</code>.  That's why it hangs.</p>\n\n<p>Changing the name of the variables to hold the results, changing the <code>pthread_join</code> calls to pass the addresses of these variables and passing the thread IDs directly should work:</p>\n\n<pre><code>int evenresult;\npthread_join(thread,(void**)&amp;evenresult);\n...\nint oddresult;\npthread_join(thread2,(void**)&amp;oddresult);\n</code></pre>\n\n<p>The proper way to do retrieve the result however would be to pass the addresses of actual <code>void *</code> variables and converting them:</p>\n\n<pre><code>int evenresult, oddresult;\nvoid *result;\npthread_join(thread, &amp;result);\nevensum = (intptr_t)result;\n...\npthread_join(thread2, &amp;result);\noddsum = (intptr_t)result;\n</code></pre>\n"}], "owner": {"reputation": 310, "user_id": 6941400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srsn4.jpg?s=128&g=1", "display_name": "Anshuman Kumar", "link": "https://stackoverflow.com/users/6941400/anshuman-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52631363, "answer_count": 2, "score": -1, "last_activity_date": 1538584749, "creation_date": 1538582428, "last_edit_date": 1538582767, "question_id": 52631257, "link": "https://stackoverflow.com/questions/52631257/can-someone-tell-me-the-error-as-pthread-join-is-not-working", "title": "Can someone tell me the error as pthread_join is not working", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\nstruct Array \n{\n    //\n};\nvoid* evensum(void* param)\n{\n    //calculated the sum of even elements and returned it\n}\nvoid* oddsum(void* param)\n{ \n  //did the same thing but for odd elements\n}\nint main()\n{\n    struct Array* obj=malloc(sizeof(struct Array));\n    //did all the inputs\n    int evensum,oddsum; \n    pthread_t thread1,thread2;\n    pthread_create(&amp;thread1,0,&amp;evensum,(void*)obj);\n    int evensum,oddsum;\n    pthread_join(&amp;thread,(void**)evensum);\n    pthread_create(&amp;thread2,0,&amp;oddsum,(void*)obj);\n    pthread_join(&amp;thread2,(void**)oddsum);\n    //try to print it using %i but I get or  %d \n    // I get the sum as zero\n}\n</code></pre>\n\n<p>So I created two separate threads and these threads were meant to work asynchronously. I followed the advice mentioned <a href=\"https://stackoverflow.com/questions/26895245/pthread-join-for-asynchronous-threads\">here</a>  but the join still doesn't work as once the thread1 finishes execution, the other thread is never created despite me following the correct syntax. Any idea how to fix this?\nAlso, the value printed is zero, despite showing the correct value if I print it in the function.\nHere is what I wrote in  the return statement of each function:</p>\n\n<pre><code>return (void*)sum;//variable that stores sum\n</code></pre>\n\n<p>Also, I want to add that I don't want to use semaphores or any other synchronization tool to do this.</p>\n"}, {"tags": ["c++", "c", "linux", "makefile"], "comments": [{"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 1, "creation_date": 1538583012, "post_id": 52631072, "comment_id": 92196069, "body": "I don&#39;t believe you can without the source.  shared libraries are compiled compiled with as position independent addressing <code>-fPIC</code> so without the code I think your out of luck.  Unless I&#39;m misunderstanding you.  Is this your code?"}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1538589556, "post_id": 52631072, "comment_id": 92199405, "body": "@jiveturkey No this is not my code. I have source code files but i just need to make some library as static instead of dynamic. i have mentioned libraries which i want to convert to static and i have make file which i need to change."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1538590471, "post_id": 52631072, "comment_id": 92199864, "body": "You need to use <code>ar</code> to create the library after compiling. <a href=\"https://stackoverflow.com/questions/5947067/how-to-create-a-static-library-with-g\" title=\"how to create a static library with g\">stackoverflow.com/questions/5947067/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1538600752, "post_id": 52631072, "comment_id": 92204575, "body": "@jiveturkey i already have .a file in dev package of libevent, i just need to make it as static."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "edited": false, "score": 0, "creation_date": 1538600086, "post_id": 52633851, "comment_id": 92204295, "body": "Thanks for help. You are right, i dont need systemd lib as static. I tried to change my make file as you suggested but i am getting following error when i compile through make -f Makefile : /usr/bin/ld: cannnot find: No such file or directory. Collect2 : error: ld returned 1 exist status."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "edited": false, "score": 0, "creation_date": 1538602043, "post_id": 52633851, "comment_id": 92205020, "body": "@RookieDev <code>&#47;usr&#47;bin&#47;ld: cannnot find:</code> is not the complete error message. You have left out the library that it cannot find."}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "edited": false, "score": 0, "creation_date": 1538683021, "post_id": 52633851, "comment_id": 92239889, "body": "gcc -o aftpd aftpd.o cmd_parse.o fs_malloc.o ftpcmd.o ftpdata.o string.o fs_vector.o ./linux/loglinux.o ./linux/systemd.o  -Wl, -Bstatic -levent_core -levent_extra -levent -levent_pthreads -Wl, -Bdynamic -lsystemd /usr/bin/ld: cannot find : No such file or directory /usr/bin/ld: cannot find : No such file or directory collect2: error: ld returned 1 exit status Makefile:15: recipe for target &#39;aftpd&#39; failed make: *** [aftpd] Error 1   @Mike Kinghan This is my full error message"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "edited": false, "score": 1, "creation_date": 1538688595, "post_id": 52633851, "comment_id": 92242119, "body": "@RookieDev <code>-Wl, -Bstatic</code> is wrong. <code>-Wl,-Bstatic</code> is right. There is no space in the middle. That is the cause of <code>cannot find : No such file or directory</code>. The same with <code>-Wl, -Bdynamic</code>."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 3, "last_activity_date": 1538730451, "last_edit_date": 1538730451, "creation_date": 1538592589, "answer_id": 52633851, "question_id": 52631072, "link": "https://stackoverflow.com/questions/52631072/how-to-use-static-library-in-linux-executable/52633851#52633851", "title": "How to use static library in linux executable", "body": "<p>There is no makefile magic that turns shared libraries into static libraries.\nYou need to install the static versions of the libraries on your system and\nthen, in your makefile, specify that the static versions of the libraries are to\nbe linked.</p>\n\n<p>It appears that the static libraries you would need to install are:</p>\n\n<pre><code>libevent_core.a\nlibevent_extra.a\nlibevent.a\nlibevent_pthreads.a\nlibsystemd.a\n</code></pre>\n\n<p>Having installed those libraries, you would modify your makefile to link them\nstatically by changing:</p>\n\n<pre><code>LIBS    = -levent_core -levent_extra -levent -levent_pthreads -lsystemd\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>LIBS    = -Wl,-Bstatic -levent_core -levent_extra -levent -levent_pthreads -lsystemd -Wl,-Bdynamic\n</code></pre>\n\n<p><em>However</em>, you cannot do exactly that, because there is no static version of <code>libsystemd</code>. <a href=\"https://lists.freedesktop.org/archives/systemd-devel/2014-March/017493.html\" rel=\"nofollow noreferrer\">Here's why</a>.</p>\n\n<p>There are static versions of the other libraries in your list. You can install them\nby installing the <code>libevent</code> development package (probably package <code>libevent-dev</code> or <code>libevent-devel</code>,\ndepending on your linux distro). Then you can link those ones statically with:</p>\n\n<pre><code>LIBS    = -Wl,-Bstatic -levent_core -levent_extra -levent -levent_pthreads -Wl,-Bdynamic -lsystemd\n</code></pre>\n\n<p><em>Note</em> that there are no spaces within <code>-Wl,-Bstatic</code> or <code>-Wl,-Bdynamic</code>. GCC options of the form <code>-Wl,...</code> mean that GCC should pass the options <code>...</code> through to its invocation of the linker.</p>\n\n<p>Here is <a href=\"https://sourceware.org/binutils/docs/ld/Options.html\" rel=\"nofollow noreferrer\">the documentation of the linker options</a></p>\n"}], "owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "accepted_answer_id": 52633851, "answer_count": 1, "score": 0, "last_activity_date": 1538730451, "creation_date": 1538581835, "last_edit_date": 1538695903, "question_id": 52631072, "link": "https://stackoverflow.com/questions/52631072/how-to-use-static-library-in-linux-executable", "title": "How to use static library in linux executable", "body": "<p>I have a project which I compile on Linux. When I run the <code>ldd</code> command against the executable, here's what I get:</p>\n\n<pre><code>libevent_core-2.1.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libevent_core-2.1.so.6 (0x00007fca87a5e000)\nlibevent_pthreads-2.1.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libevent_pthreads-2.1.so.6 (0x00007fca8785b000)\n</code></pre>\n\n<p>Now, I want to make these libraries compile as static libraries. How can I do that?</p>\n\n<p>Here's my make file library:</p>\n\n<pre><code>LIBS    = -levent_core -levent_extra -levent -levent_pthreads -lsystemd\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1538581742, "post_id": 52630930, "comment_id": 92195332, "body": "In <code>{ 121*121, 144*144, 19*19, 161*161, 19*19, 144*144, 362, 11*11 }</code> then 362 you have does not equal 19^2."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1538581820, "post_id": 52630930, "comment_id": 92195379, "body": "Is it C or C++?"}, {"owner": {"reputation": 494, "user_id": 5115471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwTkL.jpg?s=128&g=1", "display_name": "Robindar", "link": "https://stackoverflow.com/users/5115471/robindar"}, "edited": false, "score": 2, "creation_date": 1538581925, "post_id": 52630930, "comment_id": 92195433, "body": "Try sorting both arrays first, this will make your algorithm simpler"}, {"owner": {"reputation": 25, "user_id": 10452120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3GVdFB-5RPQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXEp_A1oGxmEl7JZtvPVcdxKbHAwA/mo/photo.jpg?sz=128", "display_name": "fury", "link": "https://stackoverflow.com/users/10452120/fury"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538582618, "post_id": 52630930, "comment_id": 92195827, "body": "@Jabberwocky it is C Jabber"}, {"owner": {"reputation": 25, "user_id": 10452120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3GVdFB-5RPQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXEp_A1oGxmEl7JZtvPVcdxKbHAwA/mo/photo.jpg?sz=128", "display_name": "fury", "link": "https://stackoverflow.com/users/10452120/fury"}, "reply_to_user": {"reputation": 494, "user_id": 5115471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwTkL.jpg?s=128&g=1", "display_name": "Robindar", "link": "https://stackoverflow.com/users/5115471/robindar"}, "edited": false, "score": 0, "creation_date": 1538582700, "post_id": 52630930, "comment_id": 92195881, "body": "@Robindar thanks for answer. how can i do it?"}, {"owner": {"reputation": 25, "user_id": 10452120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3GVdFB-5RPQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXEp_A1oGxmEl7JZtvPVcdxKbHAwA/mo/photo.jpg?sz=128", "display_name": "fury", "link": "https://stackoverflow.com/users/10452120/fury"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1538582754, "post_id": 52630930, "comment_id": 92195918, "body": "@NathanOliver there is 362. so return should be false."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1538582843, "post_id": 52630930, "comment_id": 92195970, "body": "@fury All of your elements in <code>b</code> are the same element in <code>a</code> squared, right?  If so the 362 should be 361 as 19^2 is 361"}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 10434101, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sL5oIom_PPU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DULSUQxayevcx-LcxGNtI_OwTCg0Q/mo/photo.jpg?sz=128", "display_name": "Nivedhitha N", "link": "https://stackoverflow.com/users/10434101/nivedhitha-n"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1538586036, "post_id": 52632096, "comment_id": 92197586, "body": "@Kevin yeah it should be.changed."}, {"owner": {"reputation": 25, "user_id": 10452120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3GVdFB-5RPQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXEp_A1oGxmEl7JZtvPVcdxKbHAwA/mo/photo.jpg?sz=128", "display_name": "fury", "link": "https://stackoverflow.com/users/10452120/fury"}, "edited": false, "score": 0, "creation_date": 1538588277, "post_id": 52632096, "comment_id": 92198742, "body": "Thanks for your answer Natarajan."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538588503, "post_id": 52632096, "comment_id": 92198849, "body": "Nice improvement - now only the small corner <code>a[k] == -1, b[i] == INT_MIN</code> breaks code."}, {"owner": {"reputation": 168, "user_id": 10434101, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sL5oIom_PPU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DULSUQxayevcx-LcxGNtI_OwTCg0Q/mo/photo.jpg?sz=128", "display_name": "Nivedhitha N", "link": "https://stackoverflow.com/users/10434101/nivedhitha-n"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538588783, "post_id": 52632096, "comment_id": 92198988, "body": "@chux how to handle that case. will it be efficient if I have the result in long and not as int. is there any way of improving it?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538589111, "post_id": 52632096, "comment_id": 92199136, "body": "@NivedhithaNatarajan Note <code>int</code> and <code>long</code> may be the same range, so using <code>long</code> is not a certain solution.  Could use <i>some</i> wider type like <code>long long</code> or <code>intmax_t</code>, yet even those are not certainly wider than <code>int</code> - jut more likely than <code>long</code>.  Highly portable code simply tests to insure <code>a[k] == -1 &amp;&amp; b[i] == INT_MIN</code> is not true before <code>b[i]&#47;a[i]</code> via some means.  Example: <a href=\"https://stackoverflow.com/a/52632380/2410359\"><code>is_aa_square_of_a()</code></a>."}], "tags": [], "owner": {"reputation": 168, "user_id": 10434101, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sL5oIom_PPU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DULSUQxayevcx-LcxGNtI_OwTCg0Q/mo/photo.jpg?sz=128", "display_name": "Nivedhitha N", "link": "https://stackoverflow.com/users/10434101/nivedhitha-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1538590589, "last_edit_date": 1538590589, "creation_date": 1538585762, "answer_id": 52632096, "question_id": 52630930, "link": "https://stackoverflow.com/questions/52630930/my-program-return-sometime-true-but-not-always-codewars-question-are-they-same/52632096#52632096", "title": "My program return sometime true, but not always Codewars question &quot;Are they same&quot;", "body": "<p>One solution would be traversing each element in 'a' for each element in 'b' and check if  square of 'a' is available in 'b'.</p>\n\n<p>Complexity would be <code>O(n^2)</code>.</p>\n\n<pre><code>    bool comp(int *a, int *b, size_t sizeArray)\n    {\n        for (int k = 0; k &lt; sizeArray; k++)\n        {\n            for (int i = 0; i &lt; sizeArray; i++)\n            {\n                if(b[i]&lt;0)\n                  return false;\n                if ((a[k]==0 &amp;&amp; b[i]==0) || (a[k] ==(b[i]/a[k]) &amp;&amp; (b[i]%a[k]==0)))\n                    break;\n                if(i+1==sizeArray)\n                  return false;\n            }\n        }\n       return true;\n    }\n</code></pre>\n\n<p>Another solution would be to sort both the arrays-<code>O(nlogn)</code></p>\n\n<p>and check <code>if a[i]==b[i]/a[i] &amp;&amp; b[i]%a[i]==0</code>  which will be <code>O(n)</code>.</p>\n\n<p>So total Complexity would be <code>O(nlogn)</code></p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10452120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3GVdFB-5RPQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXEp_A1oGxmEl7JZtvPVcdxKbHAwA/mo/photo.jpg?sz=128", "display_name": "fury", "link": "https://stackoverflow.com/users/10452120/fury"}, "edited": false, "score": 0, "creation_date": 1538588246, "post_id": 52632380, "comment_id": 92198725, "body": "Thanks  a lot for your answer and spending your time. It works correctly."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1538587636, "last_edit_date": 1538587636, "creation_date": 1538586822, "answer_id": 52632380, "question_id": 52630930, "link": "https://stackoverflow.com/questions/52630930/my-program-return-sometime-true-but-not-always-codewars-question-are-they-same/52632380#52632380", "title": "My program return sometime true, but not always Codewars question &quot;Are they same&quot;", "body": "<p>OP's code is functionally wrong as the <code>tempVal1</code>, <code>tempVal2</code> only depend on the the final loops <code>a[k] == sqrt(b[i]))</code> and <code>(b[k] == (a[i] * a[i])</code> compares.</p>\n\n<p>Instead the inner <code>for (i...)</code> loop needs to find a match.  When none is found, return <code>false</code>.</p>\n\n<pre><code>bool comp(const int *a, const int *b, size_t sizeArray) {\n  for (size_t k = 0; k &lt; sizeArray; k++) {\n    size_t i;\n    for (i = 0; i &lt; sizeArray; i++) {\n      long long aa = (long long) a[i] * a[i];\n      if (aa == b[k]) {\n        break;\n      }\n    }\n    // Since the loop did not exit early, no match was found, return fasle\n    if (i == sizeArray) {\n      return false;\n    }\n  }\n\n  for (size_t k = 0; k &lt; sizeArray; k++) {\n    size_t i;\n    for (i = 0; i &lt; sizeArray; i++) {\n      long long aa = (long long) a[k] * a[k];\n      if (aa == b[i]) {\n        break;\n      }\n    }\n    // Since the loop did not exit early, no match was found, return fasle\n    if (i == sizeArray) {\n      return false;\n    }\n  }\n\n  return true;\n}\n</code></pre>\n\n<hr>\n\n<p>Using FP math for an integer problem leads to precision, range and round-off issues that are best avoided.</p>\n\n<p>Consider a \"square\" test without those problems</p>\n\n<pre><code>bool is_aa_square_of_a(int aa, int a) {\n  if (aa &lt; 0) return false;\n  if (a == 0) {\n    return aa == 0;\n  }\n  int q = aa/a;\n  int r = aa%a;\n  return q == a &amp;&amp; r == 0; \n}\n</code></pre>\n\n<hr>\n\n<p>Note: Code could be made more time efficient using sorted arrays.</p>\n"}], "owner": {"reputation": 25, "user_id": 10452120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3GVdFB-5RPQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXEp_A1oGxmEl7JZtvPVcdxKbHAwA/mo/photo.jpg?sz=128", "display_name": "fury", "link": "https://stackoverflow.com/users/10452120/fury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 52632380, "answer_count": 2, "score": 0, "last_activity_date": 1538590589, "creation_date": 1538581434, "last_edit_date": 1538582798, "question_id": 52630930, "link": "https://stackoverflow.com/questions/52630930/my-program-return-sometime-true-but-not-always-codewars-question-are-they-same", "title": "My program return sometime true, but not always Codewars question &quot;Are they same&quot;", "body": "<p>i a newbie i am stuck on this question from Codewars. The question is that;</p>\n\n<blockquote>\n  <ul>\n  <li><p>\"Given two arrays a and b write a function comp(a, b) (compSame(a, b) in Clojure) that checks whether the two arrays have the \"same\" elements, with the same multiplicities. \"Same\" means, here, that the elements in b are the elements in a squared, regardless of the order.\"*</p>\n  \n  <p>a = [121, 144, 19, 161, 19, 144, 19, 11]<br>\n    b = [121, 14641, 20736, 361, 25921, 361, 20736, 361]</p>\n  \n  <p>comp(a, b) returns true because in b 121 is the square of 11, 14641 is the \n    square of 121, 20736 the square of 144, 361 the square of 19, 25921 the \n    square of 161, and so on.</p>\n  \n  <p>If we change the first number to something else, comp may not return true \n    anymore:</p>\n  \n  <p>a = [121, 144, 19, 161, 19, 144, 19, 11]<br>\n     b = [132, 14641, 20736, 361, 25921, 361, 20736, 361]</p>\n  \n  <p>comp(a,b) returns false because in b 132 is not the square of any number of a.</p></li>\n  </ul>\n</blockquote>\n\n<p>I think an algorithm with check all array but i can't make it possible.It is C language. I am writing codes on Visual Studio and this is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;math.h&gt;\nint tempVal1;\nint tempVal2;\n\nbool comp(int *a, int *b, size_t sizeArray)\n{\n    if (sizeArray == 0 || sizeArray == 0)\n        return false;\n\n    for (int k = 0; k &lt; sizeArray; k++)\n    {\n\n        for (int i = 0; i &lt; sizeArray; i++)\n        {\n            if (a[k] == sqrt(b[i]))\n                tempVal1 = 1;\n            else\n                tempVal1 = 0;\n            printf(\"%d\", tempVal1);\n        }\n    }\n    for (int k = 0; k &lt; sizeArray; k++)\n    {\n        for (int i = 0; i &lt; sizeArray; i++)\n        {\n            if (b[k] == (a[i] * a[i]))\n                tempVal2 = 1;\n            else\n                tempVal2 = 0;\n            printf(\"%d\", tempVal2);\n        }\n    }\n\n    printf(\" tempval1 : %d\\n\", tempVal1);\n    printf(\" tempval2 : %d\\n\", tempVal2);\n\n    if (tempVal1 * tempVal2)\n        return true;\n    return false;\n}\n\nint main() {\n\n    bool result;\n    int a[8] = { 121, 144, 19, 161, 19, 144, 19, 11 };\n    int b[8] = { 121 * 121, 144 * 144, 19 * 19, 161 * 161, 19 * 19, 144 * 144, 362, 11 * 11 };\n    result = comp(a, b, 8);\n    printf(\"%d\\n\", result);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "graph-algorithm"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1538580953, "post_id": 52630512, "comment_id": 92194878, "body": "What is your question?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538581559, "post_id": 52630512, "comment_id": 92195206, "body": "You are probably looking for this: <a href=\"https://stackoverflow.com/questions/838404/implementing-a-hashmap\" title=\"implementing a hashmap\">stackoverflow.com/questions/838404/implementing-a-hashmap</a>. Also you might want to google &quot;<i>simple hashmap in c</i>&quot;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1538581751, "post_id": 52630512, "comment_id": 92195337, "body": "If your dataset is small, you can write your own naive implementation of a map (mapping strings to integers). That should be  about 15-20 lines of code."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 0, "last_activity_date": 1538583805, "last_edit_date": 1538583805, "creation_date": 1538582447, "answer_id": 52631263, "question_id": 52630512, "link": "https://stackoverflow.com/questions/52630512/convert-vertex-names-of-a-graph-into-indices-in-c/52631263#52631263", "title": "Convert vertex names of a graph into indices in C", "body": "<p>You need to have <em>naive implementation of a map (mapping strings to integers)</em> as suggested by <a href=\"https://stackoverflow.com/users/898348/jabberwocky\">jabberwocky</a>.</p>\n\n<ul>\n<li><p>Define a structure as below to store the strings.</p>\n\n<pre><code>    typedef struct {\n       unsigned int hashed;\n       char **map;\n   } hash;\n</code></pre></li>\n<li><p>Define a function which will insert the string into hashmap if it is not exists and return the index of string in hashmap.</p>\n\n<p><code>int insertInMap(hash *map, char *entry)</code></p></li>\n<li><p>Store the returned index into <code>edge</code> structure.</p>\n\n<p><code>edges[i].first =insertInMap(&amp;map,first_string);\n   edges[i].second =insertInMap(&amp;map,second_string)</code></p></li>\n</ul>\n\n<p><strong>Complete code:</strong></p>\n\n<pre><code>typedef struct {\n    unsigned int first;\n    unsigned int second;\n} edge;\n\n\ntypedef struct {\n    unsigned int hashed;\n     char **map;\n} hash;\n\n\nint insertInMap(hash *map, char *entry)\n{\n  int i =0;\n  for (i=0;i&lt;map-&gt;hashed;i++)\n  {\n    if (strcmp(map-&gt;map[i],entry) == 0)\n    return i;\n  }\n  /* Warning no boundary check is added */\n  map-&gt;map[map-&gt;hashed++] = strdup(entry);   \n  return map-&gt;hashed-1;\n}\n\nint main()\n{   \n    unsigned int order;                   // no.of Vertices\n    unsigned int n;                       // no.of Edges\n    edge *edges;\n    hash map;    \n    scanf(\"%u %u\",&amp;order,&amp;n);\n    edges = malloc(n * sizeof(edge));\n\n    map.map = malloc(n * sizeof(char*));\n    map.hashed = 0;\n\n    char first_string[20];\n    char second_string[20];\n\n    for (int i=0;i&lt;n;i++)\n    {\n        scanf(\"%s %s\",first_string,second_string);\n        edges[i].first =insertInMap(&amp;map,first_string);\n        edges[i].second =insertInMap(&amp;map,second_string);\n\n    }\n\n   for (int i =0;i&lt;n;i++)\n   printf(\"%d-&gt;%d\\n\", edges[i].first, edges[i].second);\n\n   /* Do your work*/\n\n   for (int i=0;i&lt;n;i++)\n     free(map.map[i]);\n     free(map.map);\n     free(edges);\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>0-&gt;1\n2-&gt;3\n4-&gt;5\n1-&gt;6\n7-&gt;4\n8-&gt;4\n1-&gt;2\n5-&gt;8\n</code></pre>\n\n<blockquote>\n  <p>Note:: I have not added boundary checking for hashmap</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10216080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 52631263, "answer_count": 1, "score": 0, "last_activity_date": 1538583805, "creation_date": 1538580202, "question_id": 52630512, "link": "https://stackoverflow.com/questions/52630512/convert-vertex-names-of-a-graph-into-indices-in-c", "title": "Convert vertex names of a graph into indices in C", "body": "<p>I am given the input in the following manner, where the first line contains the number of vertices and edges of the undirected graph; and the lines to follow contain the names of vertices between which there is an edge. </p>\n\n<p>Input:</p>\n\n<pre><code>9 8\nsainteanne fortdefrance\nbassepointe latrinite\nbridgetown jackmans\nfortdefrance ducos\nholetown bridgetown\nshanty bridgetown\nfortdefrance bassepointe\njackmans shanty\n</code></pre>\n\n<p>This means that the graph has 9 vertices and 8 edges. There exist edges between the elements in each of the above mentioned pairs. The end goal is to find connected components in this graph. </p>\n\n<p>However, working with vertices as index numbers is easier than working with strings. Therefore, I am looking for a way to convert the above information into something this:</p>\n\n<pre><code>0 1\n2 3\n4 5\n1 6\n7 4\n8 4\n1 2\n5 8\n</code></pre>\n\n<p>I have written the following C code to read the file and create a structure containing edges in which the vertex id must be stored.</p>\n\n<pre><code>typedef struct {\n    unsigned int first;\n    unsigned int second;\n} edge;\n\nint main()\n{   \n    unsigned int order;                   // no.of Vertices\n    unsigned int n;                       // no.of Edges\n    edge *edges;\n\n    scanf(\"%u %u\",&amp;order,&amp;n);\n    edges = malloc(n * sizeof(edge));\n    char first_string[20];\n    char second_string[20];\n\n    for (int i=0;i&lt;n;i++)\n    {\n        scanf(\"%s %s\",first_string,second_string);\n\n    }\n   }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 5, "creation_date": 1538580644, "post_id": 52630504, "comment_id": 92194678, "body": "Your desired behavior would be for <code>fflush(stdin)</code> to throw away the input buffer? <code>fflush</code> on output buffers has almost the opposite meaning; yes, the buffer is cleared, but only because the data in it has been flushed to the OS for safe storage, it&#39;s not thrown away. Having <code>fflush(stdin)</code> mean &quot;throw away whatever is in the buffer&quot; would be... confusing, especially on pipes/sockets. It wouldn&#39;t even have a particularly useful meaning; the input buffer isn&#39;t the same as whatever is sitting on the OS input handle, so it would never be clear exactly what you were throwing away."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1538580692, "post_id": 52630504, "comment_id": 92194712, "body": "Both the <a href=\"https://linux.die.net/man/3/fflush\" rel=\"nofollow noreferrer\">linux man pages</a> and the <a href=\"https://msdn.microsoft.com/en-us/library/9yky46tz.aspx\" rel=\"nofollow noreferrer\">MSDN docs</a> allow for calling on input streams."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1538580803, "post_id": 52630504, "comment_id": 92194780, "body": "It also looks like that language in the standard goes back to C89."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1538580808, "post_id": 52630504, "comment_id": 92194783, "body": "@dbush: Huh. It has never occurred to me to <i>try</i> doing that. And it&#39;s definitely not the same behavior for both (Linux throws away the buffer, Windows only throws away stuff pushed back in via <code>ungetc</code>, but otherwise keeps the buffer), so I don&#39;t think I&#39;ll be attempting that anytime soon. :-)"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 5, "creation_date": 1538580825, "post_id": 52630504, "comment_id": 92194793, "body": "<code>cin.clear()</code> just clears <code>cin</code>&#39;s error flags.  It doesn&#39;t flush anything.  The C equivalent would be <code>clearerr</code>.  Maybe you&#39;re thinking about <code>cin.ignore()</code>?  Even then, that&#39;s just a fancy <code>fread</code>."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1538581125, "post_id": 52630504, "comment_id": 92194991, "body": "The terminal/console you use already buffers input, you can&#39;t see anything until you press the Enter key.  Like teletypes used to work back in the 1970s.  fflush() can&#39;t clear the terminal buffer, so it usually does nothing.  YMMV."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538582576, "post_id": 52630504, "comment_id": 92195803, "body": "The &quot;fflush on input stream is an extension to the C standard&quot; in <a href=\"https://msdn.microsoft.com/en-us/library/9yky46tz.aspx\" rel=\"nofollow noreferrer\">MSDN docs</a> is consistent with step 2 of a <a href=\"https://en.wikipedia.org/wiki/Embrace%2C_extend%2C_and_extinguish\" rel=\"nofollow noreferrer\">strategy</a>.  With C calling <code>fflush(stdin)</code> UB, it allows that extension without endorsing it."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538582902, "post_id": 52630504, "comment_id": 92196009, "body": "@chux: If the worst thing Microsoft does with <code>fflush(stdin)</code> is make it undo the effects of <code>ungetc</code>, I don&#39;t think they&#39;ll be getting around to step 3 anytime soon. So little software uses <code>ungetc</code> at all that I&#39;d struggle to come up with an example that also needs to undo it without knowing whether it has already happened."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1538583507, "post_id": 52630504, "comment_id": 92196328, "body": "@ShadowRanger The <a href=\"https://msdn.microsoft.com/en-us/library/9yky46tz.aspx\" rel=\"nofollow noreferrer\">linked doc</a> also has the curious <code>&#47;&#47; You must flush the input buffer before using gets.)</code>.  For me, that wrong &quot;must&quot; advice leads a learner into using UB, &#224; la MS, and is a <i>worst thing</i>.  Better to code to standards."}], "answers": [{"comments": [{"owner": {"reputation": 835, "user_id": 5841943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A62rN.png?s=128&g=1", "display_name": "suhdonghwi", "link": "https://stackoverflow.com/users/5841943/suhdonghwi"}, "edited": false, "score": 0, "creation_date": 1538808498, "post_id": 52630840, "comment_id": 92281974, "body": "<code>Just try it on an input stream that isn&#39;t a terminal in line-buffered mode on a platform that does specify its behavior. Then change the size of the buffer and try again.</code> I cannot figure out what to do to. What should I do to test the behavior?"}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 8, "last_activity_date": 1538581123, "creation_date": 1538581123, "answer_id": 52630840, "question_id": 52630504, "link": "https://stackoverflow.com/questions/52630504/why-c-standard-does-not-define-the-behavior-of-fflushstdin/52630840#52630840", "title": "Why C standard does not define the behavior of fflush(stdin)?", "body": "<p>Why <strong>should</strong> <code>fflush(stdin)</code> be defined?  From the program's perspective, buffering is transparent, so <code>fflush(stdin)</code> could discard nothing, or it could consume and discard the entire input data stream. Unlike an output stream, where the program controls what's been emitted, the program has no knowledge of what's in an input buffer.</p>\n\n<p>The result of <code>fflush(stdin)</code> is unclear at best - there's no clear way to say what it will do.  Just try it on an input stream that isn't a terminal in line-buffered mode on a platform that does specify its behavior.  Then change the size of the buffer and try it again.  You'll likely get completely different results in what data you subsequently read.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1610482904, "last_edit_date": 1610482904, "creation_date": 1538585442, "answer_id": 52632011, "question_id": 52630504, "link": "https://stackoverflow.com/questions/52630504/why-c-standard-does-not-define-the-behavior-of-fflushstdin/52632011#52632011", "title": "Why C standard does not define the behavior of fflush(stdin)?", "body": "<p>Contrary to popular belief, it is not clear what <code>fflush(stdin)</code> should do:</p>\n<ul>\n<li>Some programmers seem to assume it should discard any pending input from the terminal, and it does that on some systems.</li>\n<li>Others would expect it to just discard bytes pushed back via <code>ungetc()</code> and indeed some systems implement it this way.</li>\n<li>Yet others would expect something else, and some implementations have another behavior, for example reading and discarding all available input, including from regular files.</li>\n</ul>\n<p>When a function has been implemented in different incompatible ways on various widely available historical platforms, the rationale of the C Standard seems to not try and specify anything as it would make many existing platforms non-conforming. Hence <code>fflush(stdin)</code> is just specified as having <em>undefined behavior</em>.</p>\n<p>Note that the most commonly expected semantics are easy to implement as a function:</p>\n<pre><code>/* discard the rest of a line of pending input,\n * return EOF at end of file.\n */\nint flushline(FILE *fp) {\n    int c;\n    while ((c = getc(fp)) != EOF &amp;&amp; c != '\\n')\n        continue;\n    return c;\n}\n</code></pre>\n"}], "owner": {"reputation": 835, "user_id": 5841943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A62rN.png?s=128&g=1", "display_name": "suhdonghwi", "link": "https://stackoverflow.com/users/5841943/suhdonghwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 52630840, "answer_count": 2, "score": 3, "last_activity_date": 1610482904, "creation_date": 1538580185, "last_edit_date": 1538580309, "question_id": 52630504, "link": "https://stackoverflow.com/questions/52630504/why-c-standard-does-not-define-the-behavior-of-fflushstdin", "title": "Why C standard does not define the behavior of fflush(stdin)?", "body": "<p>I understand that <code>fflush(stdin)</code> causes undefined behavior, because <code>fflush</code> is only defined for output buffers.</p>\n\n<p>But <strong>why?</strong> Is there any historical reasons for not defining <code>fflush</code> for input buffers?</p>\n\n<p>C++ provides a way to clear standard input buffer, <code>cin.clear()</code>, and I don't understand why it is left undefined in C standard.</p>\n"}, {"tags": ["c", "arrays", "android-source"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1538580051, "post_id": 52630441, "comment_id": 92194302, "body": "C or C++?  C++ does not support zero sized arrays"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1538580063, "post_id": 52630441, "comment_id": 92194309, "body": "Standard C++ doesn&#39;t support that, it&#39;s a language extension. A common language extension is to support zero-sized array at <i>the end of</i> a <code>struct</code>. That&#39;s used as a dynamic length array (by allocating more than the direct <code>struct</code> size)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1538580098, "post_id": 52630441, "comment_id": 92194335, "body": "Standard C does not support it as well."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1538580106, "post_id": 52630441, "comment_id": 92194343, "body": "<code>A</code> doesn&#39;t have a constructor."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1538580167, "post_id": 52630441, "comment_id": 92194383, "body": "Bottom line: we&#39;ll need to know the exact compiler being used for anybody to hope to help, since this is only even allowed because that compiler provides an extension to support it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538580876, "post_id": 52630441, "comment_id": 92194828, "body": "@CinderBiscuits first, VLA support is no longer mandatory in C since C11, so it is exactly opposite to what you are saying. Second, there are no VLAs in Eugene&#39;s comment or in the question."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538581030, "post_id": 52630441, "comment_id": 92194927, "body": "An explanation of how zero length arrays work can be found in gcc&#39;s documentation: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Zero-Length.html</a>"}, {"owner": {"reputation": 692, "user_id": 3557842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fgChf.png?s=128&g=1", "display_name": "Proxytype", "link": "https://stackoverflow.com/users/3557842/proxytype"}, "edited": false, "score": 0, "creation_date": 1538581077, "post_id": 52630441, "comment_id": 92194959, "body": "looks like the compiler handle this, as i see it&#39;s just pointer to nothing..."}, {"owner": {"reputation": 143, "user_id": 7053357, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UmB1k.jpg?s=128&g=1", "display_name": "felisimo", "link": "https://stackoverflow.com/users/7053357/felisimo"}, "edited": false, "score": 0, "creation_date": 1538581238, "post_id": 52630441, "comment_id": 92195044, "body": "Thanks for the answers guys but the answer is still unknown. As some have pointed out, this is not the case of a VLA."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1538581437, "post_id": 52630441, "comment_id": 92195142, "body": "@SergeyA, thanks for pointing that out. I had confused the terms <code>flexible array member</code> with <code>variable length array</code>. Still early in the day for me. While a zero-length array is not technically a flexible array member, they serve the same purpose. The difference being flexible array members are standardized in C99, you may only have one in a struct, and it must be the last member."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1538582048, "post_id": 52630441, "comment_id": 92195508, "body": "@felisimo, there is no answer to that. This code is not correct as to C spec, and this code is not correct as to gcc extension spec (<code>Flexible array members may only appear as the last member of a struct that is otherwise non-empty.</code>). You might want to ask the same question to whoever authored (or supports) this code."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538582389, "post_id": 52630441, "comment_id": 92195696, "body": "@felisimo it is just as expressed. <code>uint8_t transformed[0]</code> is basically a pointer to an array with zero elements and behaves like any other result of <code>a[n]</code> including that you cannot access more than <code>[n]</code> elements of the array. Well what does that get you, why not just a pointer to a dynamically sized array? Zero-length arrays are only useful when you have a large struct that requires a dynamic length field and you need to share the structure <i>across systems</i>."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538582551, "post_id": 52630441, "comment_id": 92195782, "body": "Note the <code>length</code> field just below <code>transformed</code> this is most likely the array length of <code>transformed</code>. Effectively, the struct is variable sized. For the receiver to calculate the size of the struct, it would read <code>length</code> and calculate the size of <code>transformed</code> to determine the size of the struct. Since the receiver is a different system than the sender, options are limited. You would not able to alloc pointers inside the struct as they wouldn&#39;t point to memory on the receiver&#39;s system."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538582651, "post_id": 52630441, "comment_id": 92195844, "body": "<code>padded</code> appears to just offset the data in the structure for alignment, but it would be hard to determine exactly what it&#39;s doing without seeing the relevant source."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1538599214, "post_id": 52630441, "comment_id": 92203929, "body": "These zero sized array will always have zero elements because they are not at the end of the struct. And they won&#39;t change the layout of A because of the packed attribute. The only information they provide is two offsets, that divides the structure in three part. The aim may be to provide a stable interface for code using <code>offsetof</code>: <code>memcpy((unsigned char*)(&amp;a_A)+offsetof(A,transformed),a_transformed,sizeof(A)&zwnj;&#8203;-offsetof(A,transfor&zwnj;&#8203;med))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 7053357, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UmB1k.jpg?s=128&g=1", "display_name": "felisimo", "link": "https://stackoverflow.com/users/7053357/felisimo"}, "edited": false, "score": 0, "creation_date": 1538585516, "post_id": 52631460, "comment_id": 92197337, "body": "I am not sure if this comment is relevant to the struct I presented. The zero-sized-arrays in the struct are not in the end."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1538611231, "post_id": 52631460, "comment_id": 92207380, "body": "There&#39;s a difference between &quot;size zero array&quot; and &quot;incomplete array type&quot;.  Strictly speaking, the flexible array member should be declared with <code>[]</code> and NOT with <code>[0]</code> or equivalent."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10451934"}, "is_accepted": false, "score": 2, "last_activity_date": 1538583178, "creation_date": 1538583178, "answer_id": 52631460, "question_id": 52630441, "link": "https://stackoverflow.com/questions/52630441/c-struct-with-zero-sized-array-members/52631460#52631460", "title": "c struct with zero sized array members", "body": "<blockquote>\n  <p>These are few things you should know first about zero-sized arrays in a struct :</p>\n</blockquote>\n\n<ul>\n<li><p>A zero sized array declaration was a constraint violation (this requiring a diagnostic) in ISO C 90 in all contexts: even as a function parameter, where the identifier being declared is actually a pointer and not an array at all!</p></li>\n<li><p>C99 added the \"flexible array member\" feature: the last element of a struct can be an array of size zero: \"As a special case, the last element of a structure with more than one named member may have an incomplete array type; this is called a flexible array member.</p></li>\n<li><p>In C90 code, the \"struct hack\" is implemented using an array of size [1] at the end of a struct. Some compilers allowed zero (like GNU C, I think) before C99.</p></li>\n</ul>\n\n<p>we must use offsetof(type, last_member) so that we exclude [1] from the calculation:</p>\n\n<pre><code>struct foo {\n/* ... */\nint array[ZERO_OR_ONE];\n};\n\n/* Correct in C99, if ZERO_OR_ONE is 0\n Incorrect in C90, (ZERO_OR_ONE can't be zero).  */\nsize_t foo_plus_3_elems = sizeof (struct foo) + 3 * sizeof(int);\n\n/* Correct in C99 whether or not ZERO_OR_ONE is 0 or 1.\n Correct in C90 with ZERO_OR_ONE being 1. */\nsize_t foo_plus_3_elems = offsetof (struct foo, array) + 3 * sizeof(int);\n</code></pre>\n\n<ul>\n<li><p>Here, \"incorrect\" means we calculate slightly more storage than needed, usually without any downside.</p></li>\n<li><p>\"Correct in C90\" means de facto correct, not that it was well-defined behavior. \"Everyone\" was doing it.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "is_accepted": false, "score": 0, "last_activity_date": 1538589474, "creation_date": 1538589474, "answer_id": 52633062, "question_id": 52630441, "link": "https://stackoverflow.com/questions/52630441/c-struct-with-zero-sized-array-members/52633062#52633062", "title": "c struct with zero sized array members", "body": "<p>It is just as expressed.</p>\n\n<p><code>uint8_t transformed[0]</code> is for practical purposes a \"pointer\" to an array with zero elements and behaves like any other result of <code>a[n]</code> including that you cannot access more than <code>[n]</code> elements of the array.</p>\n\n<p>Well what does that get you, why not just a pointer to a dynamically sized array? Zero-length arrays are only useful when you have a large struct that requires a dynamic length field and you need to share the structure across programs, systems, program runs, etc. In these cases, you cannot allocate a pointer inside the struct as they wouldn't point to memory on the receiver's system. Effectively, the struct is variable sized. </p>\n\n<p>Note the field named <code>length</code> just below <code>transformed</code>; This is most likely the array length of <code>transformed</code>. For the receiver to calculate the size of the struct, it would read length and calculate the size of transformed to determine the size of the struct. (<code>length*sizeof(uint8_t)</code>)</p>\n\n<p>You can think of zero-length arrays as a pointer whose contents are inlined at itself and very much like a flexible array member, however it lacks the safety (if you could call it safety) of flexible array members. </p>\n\n<p>You have not provided enough code to delve into what <code>uint8_t padding[0]</code> might be doing, but that combined with <code>__attribute__((packed))</code> would lead me to believe they found it necessary to manually manage the struct's memory layout, but again, the relevant code is missing to deduce that.</p>\n"}], "owner": {"reputation": 143, "user_id": 7053357, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UmB1k.jpg?s=128&g=1", "display_name": "felisimo", "link": "https://stackoverflow.com/users/7053357/felisimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1538610958, "creation_date": 1538580008, "last_edit_date": 1538610958, "question_id": 52630441, "link": "https://stackoverflow.com/questions/52630441/c-struct-with-zero-sized-array-members", "title": "c struct with zero sized array members", "body": "<p>I encountered some syntax in an Android open source code that I can't understand. There is a struct that looks something like this:</p>\n\n<pre><code>    struct __attribute__((packed)) A\n{\n uint8_t bla;\n uint8_t bla2;\n uint8_t someFixedSizeArr[20];\n uint8_t padded[0]; //Marks offset to padded data\n uint8_t someFixedSizeArr2[30];\n uint8_t transformed[0]; //Marks offset to transformed data\n int32_t length;\n uint8_t result[100];\n};\n</code></pre>\n\n<p>I don't understand what padded and transformed are and how they work. Later on, a type B's ctor (which wraps A) doesn't touch them, so they are un-initialized when B is created, yet later on they are referenced as such:</p>\n\n<pre><code>memmove(&amp;A.padded[padLength], &amp;A.result[A.length], 30);\n</code></pre>\n\n<p>And also:</p>\n\n<pre><code>someFunc(A.transformed, 30, A.someFixedSizeArr);\n</code></pre>\n\n<p>So what happens here, memory wise, with these zero sized arrays? Note that I read about zero sized arrays but this doesn't seem to match what I read, because there it stated that the array must be the last field of a struct, which is not the case here.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "double", "mingw"], "comments": [{"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538579287, "post_id": 52629841, "comment_id": 92193772, "body": "Compiling your example on my system with clang and gcc both yield <code>0.999978</code> not <code>-1</code>."}, {"owner": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 0, "creation_date": 1538579533, "post_id": 52629841, "comment_id": 92193938, "body": "Note also that <code>long double</code> may have the same precision as <code>double</code>. This is true for Visual Studio, for example: <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/s3f49ktz.aspx</a>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1538579639, "post_id": 52629841, "comment_id": 92194026, "body": "I also get 0.999978 on my system. Is this a print problem? Perhaps you could add: <code>if (summ &lt; 0) printf(&quot;less zero&quot;) else printf(&quot;not less zero&quot;);</code> and see if this is consistent with the print of the value."}, {"owner": {"reputation": 170, "user_id": 10445919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YD9MX.jpg?s=128&g=1", "display_name": "Moleson", "link": "https://stackoverflow.com/users/10445919/moleson"}, "edited": false, "score": 0, "creation_date": 1538579652, "post_id": 52629841, "comment_id": 92194034, "body": "well, I using Clion on windows with MinGW. I switch now tu linux to see if it works better with gcc."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1538579718, "post_id": 52629841, "comment_id": 92194085, "body": "Perhaps see <a href=\"https://stackoverflow.com/questions/26296058/cant-print-correctly-a-long-double-in-c\" title=\"cant print correctly a long double in c\">stackoverflow.com/questions/26296058/&hellip;</a>"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538579830, "post_id": 52629841, "comment_id": 92194153, "body": "I think 4386427 has got the answer for you."}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 10445919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YD9MX.jpg?s=128&g=1", "display_name": "Moleson", "link": "https://stackoverflow.com/users/10445919/moleson"}, "edited": false, "score": 1, "creation_date": 1538683259, "post_id": 52632049, "comment_id": 92239998, "body": "yeah I think your are right. the strange thing is that if I print the storage they have different values but is like that gcc or even minGW doesn&#39;t care and treat them like normal doubles. (is not a problem of printf function). thanks anyway ;)"}], "tags": [], "owner": {"reputation": 49, "user_id": 5565608, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-keJwr-Iftxc/AAAAAAAAAAI/AAAAAAAAAHA/SLStMUClK7E/photo.jpg?sz=128", "display_name": "Augusto Timm", "link": "https://stackoverflow.com/users/5565608/augusto-timm"}, "is_accepted": false, "score": 0, "last_activity_date": 1538759862, "last_edit_date": 1538759862, "creation_date": 1538585621, "answer_id": 52632049, "question_id": 52629841, "link": "https://stackoverflow.com/questions/52629841/long-double-gives-wrong-result-when-compiled-with-mingw/52632049#52632049", "title": "long double gives wrong result when compiled with MinGW", "body": "<p>If you need more than a double, wich is 8bytes, an array of int or char and create your own arithmethic for this type. This is the only way to be sure that you are capable of storing the number since this way you dont have to worry about number size, since in gcc at least, long double and double are both 8bytes, so both store the same number limits.</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 10445919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YD9MX.jpg?s=128&g=1", "display_name": "Moleson", "link": "https://stackoverflow.com/users/10445919/moleson"}, "is_accepted": false, "score": 0, "last_activity_date": 1538683486, "creation_date": 1538683486, "answer_id": 52654362, "question_id": 52629841, "link": "https://stackoverflow.com/questions/52629841/long-double-gives-wrong-result-when-compiled-with-mingw/52654362#52654362", "title": "long double gives wrong result when compiled with MinGW", "body": "<p>Well, I tryed on linux with default gcc and the problem was similar. It looks like if you wanna use more precision you must use an extern library or implement yourself your aritmetic. Gmp lib is perfect for that. But it would be nice if C developpers or Iso or whatever choose a standard...</p>\n"}], "owner": {"reputation": 170, "user_id": 10445919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YD9MX.jpg?s=128&g=1", "display_name": "Moleson", "link": "https://stackoverflow.com/users/10445919/moleson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "closed_date": 1538683748, "answer_count": 2, "score": 1, "last_activity_date": 1538759862, "creation_date": 1538578311, "last_edit_date": 1538586183, "question_id": 52629841, "link": "https://stackoverflow.com/questions/52629841/long-double-gives-wrong-result-when-compiled-with-mingw", "closed_reason": "Duplicate", "title": "long double gives wrong result when compiled with MinGW", "body": "<p>When I change the <em>long double</em> type by <em>double</em> it works well. The thing is that I need more precision and I don't know why with a <em>long double</em> I have -1 as solution.</p>\n\n<pre><code>typedef long double big_num_t;\ntypedef unsigned int un_i;\n\nlong double suite(big_num_t x, big_num_t a2n_1, un_i n) {\n    return ((-1) * ((a2n_1 * (2 * n - 1)) / (n * (2 * n + 1))) * (x * x));\n}\n\nint main() {\n    big_num_t summ = 3;\n    big_num_t temp = 3;\n    for (un_i n = 1; n &lt; 100; ++n) {\n        temp = suite(3, temp, n);\n        summ += temp;\n    }\n    summ *= (M_2_SQRTPI);\n    printf(\"%Lf\", summ);\n    return 0;\n}\n</code></pre>\n\n<p>Thanks ;)</p>\n"}, {"tags": ["c", "data-structures", "queue"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1538577272, "post_id": 52629399, "comment_id": 92192318, "body": "(1) If the loop breaks when <code>temp == NULL</code>, the assignment <code>temp-&gt;next = newnode;</code> after the loop is erroneous (as is the prior reference to <code>temp-&gt;next</code> in the previous assignment)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1538578751, "post_id": 52629399, "comment_id": 92193391, "body": "Your insert code inserts new equal priority items in reverse order after the first item with that priority. You should make the PQ printing code into a function which takes a tag string (to identify which call it is) and the head pointer, and you should print out both data and priority. And, for pity&#39;s sake, end messages in <code>printf()</code> statements with newlines \u2014 at least in contexts such as  <code>printf(&quot;head in insert is %d&quot;,*addofhead);</code>. And use <code>%p</code> to print addresses, casting the corresponding argument to <code>void *</code> (because <code>%p</code> expects a <code>void *</code>). Also, remove <code>removee()</code> because it&#39;s unused."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1538580455, "post_id": 52629399, "comment_id": 92194562, "body": "@wildplasser: I agree that <a href=\"https://stackoverflow.com/q/52625172/\">Pointer is not modifying in insert in C</a> is a closely related question, albeit asked by a different user.  However, it isn&#39;t an exact duplicate; it deals with a precursor problem to the one addressed here.  Why either question gets multiple up-votes is a little mysterious; they&#39;re not bad questions, but they&#39;re not that good, either.  So, although closely related, I don&#39;t think this is a duplicate of that."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538580687, "post_id": 52629399, "comment_id": 92194708, "body": "@JonathanLeffler How about the <code>removee()</code>  typo?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1538580991, "post_id": 52629399, "comment_id": 92194906, "body": "@wildplasser: The <code>removee()</code> function isn&#39;t used, so I&#39;ve ignored it \u2014 I deleted it when testing.  I agree that the code is almost certainly by the same person (the same team at least) despite the different SO user names; it is too similar not to be.  Nevertheless, the problems to be resolved are different, so the questions aren&#39;t strict duplicates.  This is a corollary or follow-on from the other; this question couldn&#39;t be asked until the previous one was resolved."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538580837, "post_id": 52630138, "comment_id": 92194802, "body": "See also <a href=\"https://stackoverflow.com/users/905902/wildplasser\">wildplasser</a>&#39;s <a href=\"https://stackoverflow.com/a/52626660/15168\">answer</a> to the related question for a rewrite of <code>insert</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538581747, "post_id": 52630138, "comment_id": 92195335, "body": "@JonathanLeffler Yes, that is preferable."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1538581726, "last_edit_date": 1538581726, "creation_date": 1538579161, "answer_id": 52630138, "question_id": 52629399, "link": "https://stackoverflow.com/questions/52629399/priority-queue-not-inserting-element-in-ascending-order/52630138#52630138", "title": "Priority queue not inserting element in ascending order", "body": "<blockquote>\n  <p>why we can not do <code>temp!=NULL</code> in while loop instead of <code>temp-&gt;next!=NULL</code> (?)</p>\n</blockquote>\n\n<p>Because the line after the loop has <code>temp-&gt;next;</code> <a href=\"https://stackoverflow.com/questions/52629399/priority-queue-not-inserting-element-in-ascending-order/52630138#comment92192318_52629399\">@Jonathan Leffler</a>.</p>\n\n<p>The usual goal on marching down a linked list for insertion is to know the pointer of the <em>previous</em> node so its <code>.next</code> member may be updated.</p>\n\n<hr>\n\n<p>Code has 2 functional problems</p>\n\n<p>Comparing wrong priorities</p>\n\n<pre><code>// while(temp-&gt;next!=NULL&amp;&amp;temp-&gt;priority &lt;newnode-&gt;priority ){\nwhile(temp-&gt;next!=NULL&amp;&amp;temp-&gt;next-&gt;priority &lt;newnode-&gt;priority ){\n//                          ^^^^^^    \n</code></pre>\n\n<p>Wrong compare when ==</p>\n\n<pre><code>// while(temp-&gt;next!=NULL&amp;&amp;temp-&gt;next-&gt;priority &lt;newnode-&gt;priority ){\nwhile(temp-&gt;next!=NULL&amp;&amp;temp-&gt;next-&gt;priority &lt;= newnode-&gt;priority ){\n//                          ^^^^^^           ^^\n</code></pre>\n\n<hr>\n\n<p>Also use <code>%p</code> to print a <code>void *</code>, not <code>\"%d\"</code> to print a pointer.</p>\n\n<pre><code>// printf(\"head in insert is %d\",*addofhead);\nprintf(\"head in insert is %p\",(void *) (*addofhead));\n</code></pre>\n\n<hr>\n\n<p>What was very useful to advance this was to create a helper function to print the data.  It was then easy to call it after each insertion to narrow the issues.</p>\n\n<pre><code>void pq(const struct node* p) {\n  while (p) {\n    printf(\"(data %d,pri %d) \", p-&gt;data,  p-&gt;priority);\n    p = p-&gt;next;\n  }\n  puts(\"\");\n}\n</code></pre>\n\n<hr>\n\n<p>I found OP's <code>insert()</code> overly complex.  See <a href=\"https://stackoverflow.com/a/52626660/15168\">@wildplasser</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10238745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1538581744, "creation_date": 1538577029, "last_edit_date": 1538581744, "question_id": 52629399, "link": "https://stackoverflow.com/questions/52629399/priority-queue-not-inserting-element-in-ascending-order", "title": "Priority queue not inserting element in ascending order", "body": "<p>This is the code of priority queue using linked list \ni have two doubts in this code</p>\n\n<p>1)   This code is  part of my insert function</p>\n\n<pre><code> if((*addofhead)-&gt;priority &lt;= newnode-&gt;priority ){\n    struct node* temp=*addofhead;\n    while(temp-&gt;next!=NULL&amp;&amp;temp-&gt;priority &lt;newnode-&gt;priority ){\n        temp=temp-&gt;next;\n    }\n    newnode-&gt;next=temp-&gt;next;\n    temp-&gt;next=newnode;\n    return;\n   }\n</code></pre>\n\n<blockquote>\n  <p>why we can not do temp!=NULL in <code>while</code> loop instead of <code>temp-&gt;next!=NULL</code> because <code>temp!=NULL</code> will also make loop exit in one more iteration but it is crashing what is the reason of crashing</p>\n</blockquote>\n\n<p>2)I want to make a priority queue such that the element which has least priority\nshould be removed first and elements which has same priority then the element will be removed first which was added first\ninput part from <code>main</code> function</p>\n\n<pre><code>    insert(&amp;head,3,5);   \n    insert(&amp;head,2,2);   \n\n    insert(&amp;head,1,1);   \n    insert(&amp;head,7,1);\n    insert(&amp;head,11,1);\n    insert(&amp;head,8,5);   \n    insert(&amp;head,9,5);\n</code></pre>\n\n<p>I am getting output for this  <code>1 2 11 7 3 8 9</code> but its output should be <code>1 7 11 2 3 8 9</code> </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct node{\n    int data;\n    int priority;\n    struct node* next;\n};\nstruct node* getnewnode(int data,int priority){\n    struct node* newnode=malloc(sizeof(struct node));\n    newnode-&gt;data=data;\n    newnode-&gt;next=NULL;\n    newnode-&gt;priority=priority;\n    return newnode;\n}\nvoid insert(struct node** addofhead,int data,int priority){\n\n    struct node* newnode=getnewnode(data,priority);\n    if(*addofhead==NULL){\n        *addofhead=newnode;\n        printf(\"head in insert is %d\",*addofhead);\n        return;\n    }\n\n    if((*addofhead)-&gt;priority &gt; newnode-&gt;priority){\n        newnode-&gt;next=*addofhead;\n        *addofhead=newnode;\n        return;\n    }\n\n    if((*addofhead)-&gt;priority &lt;= newnode-&gt;priority ){\n        struct node* temp=*addofhead;\n        while(temp-&gt;next!=NULL&amp;&amp;temp-&gt;priority &lt;newnode-&gt;priority ){\n            temp=temp-&gt;next;\n        }\n        newnode-&gt;next=temp-&gt;next;\n        temp-&gt;next=newnode;\n        return;\n    }\n}\nint removee(struct node** head){\n    if(*head==NULL)\n        return -1;\n    int temp=(*head)-&gt;data;\n    *head=(*head)-&gt;next;\n    return temp;\n}\nint main(){\n    struct node* head=NULL;\n    insert(&amp;head,3,5);   /// 3\n    insert(&amp;head,2,2);   /// 2,3\n\n    insert(&amp;head,1,1);   /// 1,2,3\n    insert(&amp;head,7,1);\n    insert(&amp;head,11,1);\n    insert(&amp;head,8,5);   /// 1,7,2,3\n    insert(&amp;head,9,5);\n    struct node* temp=head;\n    while(temp)\n    {\n        printf(\" %d \",temp-&gt;data);\n        temp=temp-&gt;next;\n\n    }\n    printf(\"\\n head in main  after insertion is %d\",head);\n\n}\n</code></pre>\n"}, {"tags": ["c", "pow"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 5, "creation_date": 1538576693, "post_id": 52629268, "comment_id": 92191941, "body": "Did you try to add <code>-lm</code> option to your linker?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1538576793, "post_id": 52629268, "comment_id": 92192002, "body": "Although not a requirement, it is good style to use <code>#include &lt;header.h&gt;</code> for library headers, rather than <code>#include &quot;header.h&quot;</code>. The latter will work too, but should only be used for user-defined headers."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1538577073, "post_id": 52629268, "comment_id": 92192193, "body": "You are calling <code>sub_string</code> with <code>end == &#39;\\0&#39;</code> and in the function you are using <code>in_str[end-1]</code>, which is out of bounds."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1538577595, "post_id": 52629268, "comment_id": 92192552, "body": "Besides the problems mention in the answer from purplepsycho notice that <code>if (j == last_index_of) {</code> is also a problem."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9587342"}, "edited": false, "score": 0, "creation_date": 1538594715, "post_id": 52629464, "comment_id": 92201916, "body": "I have made the changes that you suggested, but now when I use my code I am not getting the desired output. When I enter 1101.1011101 I want to get 13 + 1/2 +1/8 +1/16 +1/32, but I am getting 327651/0 + 1/0 +1/0 +1/0 +. Any ideas why I am getting such a different output?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9587342"}, "edited": false, "score": 0, "creation_date": 1538600956, "post_id": 52629464, "comment_id": 92204664, "body": "When I run the code above. The answer I get is a Segmentation Fault (core dumped). Not sure why that is occurring or even what it is?"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 2, "last_activity_date": 1538597916, "last_edit_date": 1538597916, "creation_date": 1538577219, "answer_id": 52629464, "question_id": 52629268, "link": "https://stackoverflow.com/questions/52629268/continued-power-function-message/52629464#52629464", "title": "Continued Power Function Message", "body": "<p>Some problems:</p>\n\n<ul>\n<li>you need <code>-lm</code> option to linker to tell it where to find <code>pow</code> function</li>\n<li><p><code>last_index_of</code> is not correctly written, you use the function name as an internal variable, you can correct it this way:</p>\n\n<pre><code>//Code to find the index of where the string ends\nint last_index_of(char in_str[], char ch) {\n    int ret = 0;\n    for (int i = 0; i &lt; MAX_LENGTH; i++) {\n        if(in_str[i] == ch) {\n            ret = i;\n        }\n    }\n    return ret;\n}\n</code></pre>\n\n<p>Note that you can replace your <code>last_index_of()</code> function by <code>strlen()</code></p></li>\n<li><p>as pointed in comment, <code>sub_string()</code> is not functionnal. A corrected version could be:</p>\n\n<pre><code>//Code to find the start of the fractional aspect\nvoid sub_string(char in_str[], char out_str[], int start, int end){\n    int i = 0;\n    while (start != end) {\n        /* warning, bounds are still not tested...*/\n        out_str[i++] = in_str[start++];            \n    }\n    out_str[i] = '\\0'\n}\n</code></pre></li>\n<li><p>Instead of calling <code>last_index_of()</code> in your exist <code>for</code> loop condition, you should take its value to re-use it:</p>\n\n<pre><code>for (int j = 0; j &lt; last_index_of(input, TERMINATOR); j++) {\n    /* Error here: will never be TRUE */\n    if (j == last_index_of) {\n        /* ... */   \n    }\n    else {\n        /* ... */   \n    }\n}\n</code></pre>\n\n<p>would become:</p>\n\n<pre><code>int last_index = last_index_of(input, TERMINATOR);\nfor (int j = 0; j &lt; last_index; j++) {\n    if (j == last_index) {\n        /* ... */   \n    }\n    else {\n        /* ... */   \n    }\n}\n</code></pre></li>\n<li><p>Another problem, you use <code>number</code> variable without initializing it, you should write <code>int number = 0</code> instead of <code>int number;</code></p></li>\n</ul>\n\n<hr>\n\n<p>After that, there is also a problem with your logic.</p>\n\n<p>You have some idea of what you want to do, but it is not clear in your code.</p>\n\n<p>It seems that you want </p>\n\n<ul>\n<li>the user to input some string in the form <code>10010.100111</code></li>\n<li>to split this string into two parts <code>10010</code> and <code>100111</code></li>\n<li>to convert the first part into integer part <code>10010</code> -> <code>18</code></li>\n<li>to convert the second part into fractional part <code>100111</code> -> <code>0.609...</code></li>\n</ul>\n\n<p>This decomposition may lead you to write this kind of code:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"string.h\"\n\n#define MAX_BITS 32\n#define MAX_LENGTH 49\n\n//Code to find the index of where the string ends\nint last_index_of(char in_str[], char ch)\n{\n    int ret = 0;\n    for (int i = 0; i &lt; MAX_LENGTH; i++) {\n        if (in_str[i] == ch) {\n            ret = i;\n        }\n    }\n    return ret;\n}\n\nvoid sub_string(char in_str[], char out_str[], int start, int end)\n{\n    int i = 0;\n    while (start != end) {\n        /* warning, bounds are still not tested... */\n        out_str[i++] = in_str[start++];\n    }\n    out_str[i] = '\\0';\n}\n\nvoid split(char *input, char *first, char *second)\n{\n    int idx = last_index_of(input, '.');\n\n    sub_string(input, first, 0, idx);\n\n    sub_string(input, second, idx + 1, strlen(input));\n\n}\n\nint main()\n{\n    //Declaration of variable\n    char input[MAX_LENGTH + 1]; // +1 for '\\0'\n    char first[MAX_BITS];\n    char second[MAX_BITS];\n\n    /* Input from the user */\n    printf(\"Enter a floating point value in binary: \");\n    scanf(\"%s\", input);\n\n    /* split integer and fractionnal parts */\n    split(input, first, second);\n\n    /* decode integer part */\n    printf(\"integer part:\\n\");\n    for (int i = strlen(first) - 1, j = 1; i &gt; -1; --i, j &lt;&lt;= 1) {\n        if (first[i] == '1') {\n            printf(\"%d \", j);\n        }\n    }\n\n    /* decode frac part */\n    printf(\"\\nfractionnal part:\\n\");\n    for (int i = 0; i &lt; strlen(second); ++i) {\n        if (second[i] == '1') {\n            printf(\"1/%d \", 2 &lt;&lt; i);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9587342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538597916, "creation_date": 1538576633, "question_id": 52629268, "link": "https://stackoverflow.com/questions/52629268/continued-power-function-message", "title": "Continued Power Function Message", "body": "<p>I keep getting the error message that my I have an undefined reference to the power function, but I'm not really sure where that is occurring or why my code is coming up with that error because I have used to power function before in this way. If anyone could help me figure out why it isn't working now I would really appreciate it.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"string.h\" //Needed for strlen()\n#include \"math.h\"\n\n#define MAX_BITS 32\n#define MAX_LENGTH 49\n#define NUMBER_TWO 2\n#define NUMBER_ONE 1\n#define TERMINATOR '\\0'\n\n//Code to find the index of where the string ends\nint last_index_of(char in_str[], char ch) {\n        for (int i = 0; i &lt; MAX_LENGTH; i++) {\n                if(in_str[i] == ch) {\n                        last_index_of == i;\n                }\n        }\n        return last_index_of;\n}\n\n//Code to find the start of the fractional aspect\nvoid sub_string(char in_str[], char out_str[], int start, int end){\n        int i = 0;\n        while (i &lt; 1) {\n                out_str[i] = in_str[start] + in_str[end-1];\n                i++;\n        }\n}\n\nint main()\n{\n        //Declaration of variable\n        char input[MAX_LENGTH +1]; // +1 for '\\0'\n        int number;\n        double exponent;\n        char output[MAX_BITS];\n        int fraction;\n\n sub_string(input, output, 0, TERMINATOR);\n\n        //Input from the user\n        printf(\"Enter a floating point value in binary: \");\n        scanf(\"%s\", input);\n\n        //Calculates the Decimal Part\n        for (int i = 0; i &lt; last_index_of(input, TERMINATOR) ; i++) {\n                number = number + number + input[i];\n        }\n        printf(\"%d\", number);\n\n        exponent = -1;\n        //Calculates the Fractional Part\n        for (int j = 0; j &lt; last_index_of(input, TERMINATOR); j++) {\n                if (j == last_index_of) {\n                        fraction = NUMBER_ONE/(pow(NUMBER_TWO, exponent));\n                        printf(\"%d/n\", fraction);\n                }\n                else {\n                        fraction = NUMBER_ONE/(pow(NUMBER_TWO, exponent));\n                        printf(\"%d + \", fraction);\n                        exponent--;\n                }\n        }\n\n        return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "undefined-behavior", "hexchat"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1538575415, "post_id": 52628773, "comment_id": 92191134, "body": "I&#39;ve seen libraries where functions take pointers, see if they are NULL and allocate something for those if they are NULL, otherwise just work with where they point at. So, I doubt it&#39;s UB."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 3, "creation_date": 1538575644, "post_id": 52628773, "comment_id": 92191277, "body": "Why is <code>userdata</code> potentially freed? If something can still access it then it should still exist. If it&#39;s freed then another object can get allocated at the same memory location."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1538575650, "post_id": 52628773, "comment_id": 92191280, "body": "Using the value of freed pointer for anything is UB."}, {"owner": {"reputation": 2882, "user_id": 6943197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbce82fcea72325bc7cc3f874b5cf3ab?s=128&d=identicon&r=PG", "display_name": "Hogstrom", "link": "https://stackoverflow.com/users/6943197/hogstrom"}, "edited": false, "score": 0, "creation_date": 1538575651, "post_id": 52628773, "comment_id": 92191282, "body": "Where is the pointer being &quot;freed&quot;.  Are you concerned another function deallocated or dereferenced the location?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1538575666, "post_id": 52628773, "comment_id": 92191291, "body": "The value of the pointer after being freed is indeterminate, as told <a href=\"https://stackoverflow.com/questions/47898934/new-pointer-by-malloc-is-same-as-one-of-the-freed-old-pointers/47902236#47902236\">here</a>, <a href=\"https://stackoverflow.com/questions/11239707/why-are-the-contents-pointed-to-by-a-pointer-not-changed-when-memory-is-dealloca/47385107#47385107\">here</a>, and <a href=\"https://stackoverflow.com/questions/52268868/understanding-dangling-pointer-behaviour-in-this-case/52268958#52268958\">here</a>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 4, "creation_date": 1538575678, "post_id": 52628773, "comment_id": 92191305, "body": "Can you show the relevant code instead of pasting links?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1538576509, "post_id": 52628773, "comment_id": 92191826, "body": "This example is fairly unclear... what is <code>ph</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 5, "creation_date": 1538577303, "post_id": 52628773, "comment_id": 92192331, "body": "In C, a comparison with a free&#39;d pointer is UB (unless the free&#39;d pointer is a <i>null pointer</i>).  Even assignment <code>p = freed_pointer;</code> is UB.  Unknown how this applies within hexchat or OP&#39;s question and code here lacks completeness."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1538577772, "post_id": 52628773, "comment_id": 92192692, "body": "Jerking a pointer that you passed to a library&#39;s init() function is never a very good idea.  Not exactly UB in the library when the usage is obvious, a session would be expected to always survive a chat event."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538581788, "post_id": 52628773, "comment_id": 92195357, "body": "why the hold? This is a very good question. Its clearly stated, with sample code. The answer provided below is very interesting and provides a great answer. I learned something from the exchange"}], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 0, "creation_date": 1538578145, "post_id": 52629163, "comment_id": 92192941, "body": "Was about to answer with exactly the same two paragraphs but from the C17 draft. Would maybe add though that reassigning the variable is okay, since assigning to <code>NULL</code> after <code>free(ptr)</code> is a common pattern."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 0, "creation_date": 1538578816, "post_id": 52629163, "comment_id": 92193435, "body": "@nullp0tr Obviously saying <code>free(p); p = NULL;</code> is okay.  But <code>free(p); q = p;</code> is not.  The latter case is what I think people mean when they say &quot;assigning a freed pointer&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1538579706, "post_id": 52629163, "comment_id": 92194075, "body": "Yeah, using pointer variable to assign it with something else is OK, using it&#39;s content as it&#39;s left by <code>free</code> is not."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538584436, "post_id": 52629163, "comment_id": 92196791, "body": "Note; The narrow exception in the <a href=\"https://stackoverflow.com/questions/52628773/does-comparing-a-pointer-that-has-been-freed-invoke-ub#comment92192331_52628773\">comment</a> was to imply <code>void *p = malloc(something_that_caused_a_return_of_NULL); ... free(p); ... void *q = p;</code> was OK."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538585110, "post_id": 52629163, "comment_id": 92197113, "body": "With UB due to &quot;The value of a pointer to an object whose lifetime has ended is used&quot;, the &quot;value of a pointer becomes indeterminate&quot; seems irrelevant. To me,  the first is enough.  The &quot;is used&quot; includes a simple assignment or reading attempt of its value.  Since these are UB, what does &quot;value of a pointer becomes indeterminate&quot; gain as there is no way, AFAIK, to see that indeterminate value?  I suppose that could be a post-able question."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1538585300, "post_id": 52629163, "comment_id": 92197208, "body": "@chux The first one is from the standard body, which does not directly imply UB. The second one is Annex, which I see as kind of clarification, as the use of indeterminate values might be interpreted as valid in some circumstances."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538592064, "post_id": 52629163, "comment_id": 92200617, "body": "@chux: An access to an Indeterminate Value of a type that has trap representations invokes UB.  Under C89, if a type has no trap representations, an Indeterminate value is equivalent to an Unspecified value (since an Indeterminate Value is defined as being either an Unspecified value or trap representation).  The fact that Annex J specifies a category of actions that generally invoke UB doesn&#39;t imply that all such actions invoke UB."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 7, "last_activity_date": 1538577966, "last_edit_date": 1538577966, "creation_date": 1538576335, "answer_id": 52629163, "question_id": 52628773, "link": "https://stackoverflow.com/questions/52628773/does-comparing-a-pointer-that-has-been-freed-invoke-ub/52629163#52629163", "title": "Does comparing a pointer that has been free&#39;d invoke UB?", "body": "<p>Using a value of a pointer after the object it is pointing to have reached it's lifetime end is <em>indeterminate</em> as stated in the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.4p2\" rel=\"noreferrer\">C11 Standard draft 6.2.4p2 (Storage durations of objects)</a> (the emphasis is mine):</p>\n\n<blockquote>\n  <p>The lifetime of an object is the portion of program execution during\n  which storage is guaranteed to be reserved for it. An object exists,\n  has a constant address, and retains its last-stored value\n  throughout its lifetime. If an object is referred to outside of its\n  lifetime, the behavior is undefined. <strong>The value of a pointer becomes\n  indeterminate</strong> when the object it points to (or just past) reaches the\n  end of its lifetime.</p>\n</blockquote>\n\n<p>And using it's value (just for anything) is an explicit <em>undefined behavior</em> as stated in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"noreferrer\">Annex J.2</a>(Undefined behavior):</p>\n\n<blockquote>\n  <p>The behavior is undefined in the following circumstances: [...] The\n  value of a pointer to an object whose lifetime has ended is used\n  (6.2.4).</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538577807, "post_id": 52629556, "comment_id": 92192716, "body": "Not sure if comparing a freed pointer value is undefined bahaviour, but it is pointless for sure."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1538592151, "post_id": 52629556, "comment_id": 92200668, "body": "@Jabberwocky: In some cases, checking whether <code>realloc()</code> has moved a block may avoid the need to recalculate pointers derived from its address.  In cases where the <code>realloc()</code> is used to shrink a block after the final size becomes known, the scenario where the block stays put may be more common than the one where it moves."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 3, "last_activity_date": 1538577460, "creation_date": 1538577460, "answer_id": 52629556, "question_id": 52628773, "link": "https://stackoverflow.com/questions/52628773/does-comparing-a-pointer-that-has-been-freed-invoke-ub/52629556#52629556", "title": "Does comparing a pointer that has been free&#39;d invoke UB?", "body": "<p>Yes, using a pointer value that has been freed for <em>anything</em> -- even a seemingly-innocuous comparison -- is, strictly speaking, undefined behavior.  It's unlikely to cause any actual problems in practice, but I'd say it's worth avoiding.</p>\n\n<p>See also the <a href=\"http://c-faq.com/\" rel=\"nofollow noreferrer\">C FAQ</a> list, <a href=\"http://c-faq.com/malloc/ptrafterfree.html\" rel=\"nofollow noreferrer\">question 7.21</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1568481790, "post_id": 52632176, "comment_id": 102291246, "body": "&quot;essentially no cost&quot; i.e. keeping the pointer value in registers indefinitely or solving the halting problem to prove that they&#39;re not needed."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1568517927, "post_id": 52632176, "comment_id": 102296802, "body": "@AnttiHaapala: What do you mean?  In most situations either a compiler will be able to see everything that is done with pointers to an allocation, or it will have to perform actual pointer computations with the allocation address.  If either situation applies, the cost would be zero.  The only situation in which there would be any cost would be if pointers could be shown to escape after the associated storage is freed.  Achieving perfect optimization in that case would be difficult, but those cases are rare enough that the overall cost is essentially zero in non-contrived scenarios."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1568759458, "last_edit_date": 1568759458, "creation_date": 1538586029, "answer_id": 52632176, "question_id": 52628773, "link": "https://stackoverflow.com/questions/52628773/does-comparing-a-pointer-that-has-been-freed-invoke-ub/52632176#52632176", "title": "Does comparing a pointer that has been free&#39;d invoke UB?", "body": "<p>tl;dr: <em>The ability to perform certain operations such as comparisons on pointers without regard for the lifetime of objects identified thereby is a popular extension which the vast majority of compilers can be configured to support with optimizations disabled.  Support for it is not mandated by the Standard, however, and aggressive optimizers may break code which relies upon it.</em></p>\n\n<p>When the Standard was written, there were some segmented-memory platforms where attempting to load a pointer into registers would cause the system to retrieve information about the region of memory where the pointer resided.  If such information was no longer available, an attempt to retrieve it could have arbitrary consequences outside the jurisdiction of the Standard.  For the Standard to require that comparisons involving such pointers have no side effects beyond yielding 0 or 1 would have made the language impractical on such platforms.</p>\n\n<p>While the authors of the Standard were no doubt aware that being able to use comparisons with arbitrary pointers (subject to the caveat that the results may not be particularly meaningful) was a useful feature supported by every implementation targeting conventional hardware, they saw no need to treat it as anything more than a \"popular extension\" which quality implementations support whenever doing so would be useful and practical.</p>\n\n<p>From C89 Rationale, p.11 line 23:</p>\n\n<blockquote>\n  <p>The terms unspecified behavior, undefined behavior, and implementation-defined behavior are\n  used to categorize the result of writing programs whose properties the Standard does not, or\n  cannot, completely describe. The goal of adopting this categorization is to allow a certain\n  variety among implementations which permits quality of implementation to be an active force in\n  the marketplace as well as to allow certain popular extensions, without removing the cachet of\n  conformance to the Standard. Informative Annex J of the Standard catalogs those behaviors\n  which fall into one of these three categories.</p>\n</blockquote>\n\n<p>Unfortunately, even though nearly all platforms in use today could support such semantics at essentially zero cost (*), some compiler writers regard their desire to assume that code will never do anything with freed pointers as more important than any value that programmers could receive from what had been an essentially-universally-supported extension on conventional platforms.  Unless one can guarantee that anyone using one's code will disable phony \"optimizations\" imposed by the the authors of over-eager optimizers who seek to rid the language of useful extensions, one may have to write extra code to work around the absence of such extensions.</p>\n\n<p>(*) In some scenarios where a function exposes to outside code multiple pointers to a region of storage it has allocated and freed, a compiler that had to uphold a behavioral guarantee that they such pointers will compare equal would be consequently required to actually perform store operations that would leak the pointers; treating the pointers as indeterminate would allow the stores to be eliminated.  Outside of contrived scenarios, however, the cost savings from eliminating such stores with pointers that are leaked to the outside world would rarely have any meaningful effect on performance.</p>\n"}], "owner": {"reputation": 1434, "user_id": 3691554, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2479edc9e2237ac67d4df87105fbc656?s=128&d=identicon&r=PG&f=1", "display_name": "SoniEx2", "link": "https://stackoverflow.com/users/3691554/soniex2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 52629163, "answer_count": 3, "score": 8, "last_activity_date": 1568759458, "creation_date": 1538575238, "last_edit_date": 1538581833, "question_id": 52628773, "link": "https://stackoverflow.com/questions/52628773/does-comparing-a-pointer-that-has-been-freed-invoke-ub", "title": "Does comparing a pointer that has been free&#39;d invoke UB?", "body": "<p>This seems to be a fairly common pattern e.g. in hexchat (may not compile, see also <a href=\"https://hexchat.readthedocs.io/en/latest/plugins.html\" rel=\"nofollow noreferrer\">plugin docs</a>. also note that <code>hexchat_plugin_get_info</code> hasn't been used in forever so I'm omitting it for simplicity):</p>\n\n<pre><code>static hexchat_plugin *ph;\nstatic int timer_cb(void *userdata) {\n    if (hexchat_set_context(ph, userdata)) { /* &lt;-- is this line UB? */\n        /* omitted */\n    }\n    return 0;\n}\nstatic int do_ub(char *word[], char *word_eol[], void *userdata) {\n    void *context = hexchat_get_context(ph);\n    hexchat_hook_timer(ph, 1000, timer_cb, context);\n    hexchat_command(ph, \"close\"); /* free the context - in practice this would be done by another plugin or by the user, not like this, but for the purposes of this example this simulates the user closing the context. */\n    return HEXCHAT_EAT_ALL;\n}\nint hexchat_plugin_init(hexchat_plugin *plugin_handle, char **plugin_name, char **plugin_desc, char **plugin_version, char *arg) {\n    *plugin_name = \"do_ub\";\n    *plugin_desc = \"does ub when you /do_ub\";\n    *plugin_version = \"1.0.0\";\n    ph = plugin_handle;\n    /* etc */\n    hexchat_hook_command(ph, \"do_ub\", 0, do_ub, \"does UB\", NULL);\n    return 1;\n}\n</code></pre>\n\n<p>The line in <code>timer_cb</code> causes hexchat to compare the (potentially free'd - definitely free'd in this example, see the comment in <code>do_ub</code>) pointer with another pointer, if you follow from <a href=\"https://github.com/hexchat/hexchat/blob/57478b65758e6b697b1d82ce21075e74aa475efc/src/common/plugin.c#L1089\" rel=\"nofollow noreferrer\">here (plugin.c#L1089, hexchat_set_context)</a> you'll end up in <a href=\"https://github.com/hexchat/hexchat/blob/master/src/common/hexchat.c#L191\" rel=\"nofollow noreferrer\">here (hexchat.c#L191, is_session)</a>. To invoke this code, run <code>/do_ub</code> in hexchat.</p>\n\n<p>Relevant code:</p>\n\n<pre><code>int\nhexchat_set_context (hexchat_plugin *ph, hexchat_context *context)\n{\n    if (is_session (context))\n    {\n        ph-&gt;context = context;\n        return 1;\n    }\n    return 0;\n}\n\nint\nis_session (session * sess)\n{\n    return g_slist_find (sess_list, sess) ? 1 : 0;\n}\n</code></pre>\n\n<p>Is this sort of thing UB?</p>\n"}, {"tags": ["c", "pointers", "printf"], "comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 12, "creation_date": 1538574169, "post_id": 52628402, "comment_id": 92190329, "body": "first, i&#39;d recommend replacing <code>%P</code> with <code>%p</code>.  the <code>P</code> format specifier does not exist."}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 1, "creation_date": 1538574241, "post_id": 52628402, "comment_id": 92190383, "body": "i&#39;m surprised that your compiler didn&#39;t give you a warning for having more &quot;objects&quot; than specifiers.  replace the format specifier like i stated above and your problem should be fixed."}, {"owner": {"reputation": 121, "user_id": 5982321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XKg9J.jpg?s=128&g=1", "display_name": "Jishad", "link": "https://stackoverflow.com/users/5982321/jishad"}, "edited": false, "score": 1, "creation_date": 1538574500, "post_id": 52628402, "comment_id": 92190579, "body": "Check out <a href=\"https://stackoverflow.com/a/28194300/5982321\">this answer</a> for knowing why there was no compile errors/warnings."}, {"owner": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "reply_to_user": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1538574502, "post_id": 52628402, "comment_id": 92190580, "body": "@Tau yes my compiler gave warning for %P but if we don&#39;t focus on that then also for *p it should return value of i i.e., 5 and then 6"}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1538574557, "post_id": 52628402, "comment_id": 92190624, "body": "as i stated above, you&#39;re getting a problem with mismatching specifiers and &quot;objects&quot;.  the way that your string is formatted, <code>p</code> will be printed where <code>%d</code> is instead of <code>%P</code>.  fix the latter specifier and your code will work."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1538576115, "post_id": 52628402, "comment_id": 92191562, "body": "It looks like you forgot to enable a good set of warnings.  For GCC, I recommend <code>-Wall -Wextra -Wwrite-strings</code> as a minimum; consider also <code>-Wpedantic -Warray-bounds</code> for identifying some other common mistakes."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 0, "creation_date": 1538574553, "post_id": 52628501, "comment_id": 92190622, "body": "yes my compiler gave warning for %P but if we don&#39;t focus on that then also for *p it should return value of i i.e., 5 and then 6"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 0, "creation_date": 1538574741, "post_id": 52628501, "comment_id": 92190732, "body": "Looking at your output, it worked.  You get <code>i = 5</code> the first time and <code>i = 6</code> the second time."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 2, "creation_date": 1538574865, "post_id": 52628501, "comment_id": 92190810, "body": "@deep_purohit When you messed up the %P, there is no guarantee that printing *p will work as you expect it to. Coding errors can have consequences such that a bug in one place can make code another place do unexpected things, and in this case it has severe consequences."}, {"owner": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 0, "creation_date": 1538574965, "post_id": 52628501, "comment_id": 92190871, "body": "but then why *p is working as p only coz the value returned by *p is the address of i"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1538575095, "post_id": 52628501, "comment_id": 92190942, "body": "<code>%p</code> expects a pointer, so you need to pass <code>p</code>. <code>%d</code> expects an integer, so you can pass <code>i</code> or <code>*p</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 3, "creation_date": 1538576217, "post_id": 52628501, "comment_id": 92191628, "body": "@deep_purohit since <code>%P</code> is not a valid format specifier, <code>p</code> which is the second argument gets used by <code>%d</code>. And printing an address with <code>%d</code> is going to give you weird results."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1538576374, "post_id": 52628501, "comment_id": 92191724, "body": "<code>&quot;%p&quot;</code> expects a <code>void*</code>, not just any pointer."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 2, "creation_date": 1538577063, "post_id": 52628501, "comment_id": 92192182, "body": "@deep_purohit: Never ignore warnings - this particular warning was relevant to why you&#39;re seeing bad output."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 2, "last_activity_date": 1538574363, "creation_date": 1538574363, "answer_id": 52628501, "question_id": 52628402, "link": "https://stackoverflow.com/questions/52628402/printing-values-pointers-and-pointers-to-values/52628501#52628501", "title": "Printing values, pointers and pointers to values", "body": "<p>Your format specifier has a typo, it is not recognized. As a result, you're passing the pointer to be printed as an integer. It should be like this:</p>\n\n<pre><code>printf(\"i = %d, p = %p, *p = %d\\n\",i,p,*p);\n</code></pre>\n\n<p>Most compliers will issue a warning for your code. If yours doesn't, please check if you can change the settings to be more strict with warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 0, "creation_date": 1538574676, "post_id": 52628556, "comment_id": 92190686, "body": "can you please explain the last line"}, {"owner": {"reputation": 805, "user_id": 10424245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0504daecf094f9efeb1e1cf6d231588?s=128&d=identicon&r=PG&f=1", "display_name": "Loufi", "link": "https://stackoverflow.com/users/10424245/loufi"}, "reply_to_user": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "edited": false, "score": 1, "creation_date": 1538575130, "post_id": 52628556, "comment_id": 92190972, "body": "In printf  <code>printf(&quot;i = %d, p = %P, *p = %d\\n&quot;,i,p,*p);</code> you have one %d, one %P and another %d. And three variables: i, p, *p. So printf will display first the %d with his corresponding variable (i), after printf will ignore the %P (because %P doesn&#39;t exits) and finaly printf will print the %d with is corresponding variable (p) because (p) havn&#39;t been used by the %P. The last variable (*p) is unused. To make (*p) used you have to delete the variable (p) in your printf."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538575962, "post_id": 52628556, "comment_id": 92191473, "body": "&quot;so the %P will be ignored and will be print like a string.&quot; --&gt; &quot;%P will be ignored ...&quot; is only one possibility. As <code>&quot;%P&quot;</code> is not a specified <i>print specifier</i>, the result is <i>undefined behavior</i> (UB)."}], "tags": [], "owner": {"reputation": 805, "user_id": 10424245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0504daecf094f9efeb1e1cf6d231588?s=128&d=identicon&r=PG&f=1", "display_name": "Loufi", "link": "https://stackoverflow.com/users/10424245/loufi"}, "is_accepted": false, "score": 4, "last_activity_date": 1538574552, "creation_date": 1538574552, "answer_id": 52628556, "question_id": 52628402, "link": "https://stackoverflow.com/questions/52628402/printing-values-pointers-and-pointers-to-values/52628556#52628556", "title": "Printing values, pointers and pointers to values", "body": "<p>In your printf you try to display <code>p = %P</code> or <code>%P</code> doesn't exist, so the <code>%</code>P will be ignored and will be print like a string. </p>\n\n<p>After, when you try to print <code>*p = %d</code>, you don't print the variable <code>*p</code> but you print <code>p</code> because <code>p</code> havn't been used by the <code>%P</code>.</p>\n\n<p>Correct printf should be:</p>\n\n<pre><code>printf(\"i = %d, *p = %d\\n\",i,*p);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538576188, "post_id": 52629020, "comment_id": 92191612, "body": "Detail: &quot;*p gets ignored and a warning, or possibly an error, is thrown when compiling.&quot; --&gt; Extra parameters in a <code>printf()</code> are OK.  C is well specified to handle that.  Yet some compile will warn (it is usually a coding mistake) and some compiler options treat all warnings as errors."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538576292, "post_id": 52629020, "comment_id": 92191678, "body": "<code>&quot;%p&quot;</code> matches a <code>void*</code>, <code>p</code> is a <code>int*</code>.  A mis-match is UB.  Best to use <code>&quot;%p&quot;</code> and <code>(void*)p</code>."}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538576471, "post_id": 52629020, "comment_id": 92191800, "body": "noted.  i edited the post."}], "tags": [], "owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "is_accepted": false, "score": 4, "last_activity_date": 1538576548, "last_edit_date": 1538576548, "creation_date": 1538575972, "answer_id": 52629020, "question_id": 52628402, "link": "https://stackoverflow.com/questions/52628402/printing-values-pointers-and-pointers-to-values/52629020#52629020", "title": "Printing values, pointers and pointers to values", "body": "<p>You have specified the following string as your formatted string to <code>printf()</code>:</p>\n\n<p><code>i = %d, p = %P, *p = %d</code></p>\n\n<p>Then you specify three elements to be printed:</p>\n\n<p><code>i, p, *p</code></p>\n\n<p>So, <code>%d</code> gets replaced with the value stored in <code>i</code>, as expected:</p>\n\n<p><code>i = 5, p = %P, *p = %d</code></p>\n\n<p>All good so far, except for one thing: the format <code>%P</code> <strong>does not exist</strong>.  Therefore, it gets skipped as a specifier and is instead printed out.</p>\n\n<p>Then the second <code>%d</code> is replaced with the value in <code>p</code>, <em>not</em> <code>*p</code>, since the second <code>%d</code> is the next valid specifier, and <code>p</code> is the next variable to be used:</p>\n\n<p><code>i = 5, p = %P, *p = -1009882308</code></p>\n\n<p>Since there are <em>no more specifiers left to use</em>, <code>*p</code> gets ignored and a warning, or possibly an error, is thrown when compiling.</p>\n\n<p>Congratulations, you just printed the address that <code>p</code> points to as an <code>int</code>, aka <strong>Undefined Behaviour</strong>.</p>\n\n<p><strong>So, how do we remedy this?</strong></p>\n\n<p>Replace <code>%P</code> with the actual valid specifier: <code>%p</code>.  Now <em>all</em> variables and specifiers are used, and your code will run smoothly.</p>\n\n<p>This is what <code>printf()</code> should've printed:</p>\n\n<p><code>i = 5, p = C3CE6B3C, *p = 5</code></p>\n\n<p><strong>Note:</strong> using <code>%p</code> prints the address of <code>p</code>, which will be printed as a hexadecimal number.</p>\n\n<p><strong>EDIT:</strong> As <em>chux</em> stated, <code>%p</code> requires a corresponding <code>void*</code> to work as intended.  Cast <code>p</code> to a <code>(void*)</code> in the <code>printf()</code> statement like so:  <code>(void*)p</code> </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1538576806, "creation_date": 1538576806, "answer_id": 52629324, "question_id": 52628402, "link": "https://stackoverflow.com/questions/52628402/printing-values-pointers-and-pointers-to-values/52629324#52629324", "title": "Printing values, pointers and pointers to values", "body": "<blockquote>\n  <p>Why the output of the following C code is like this?<br>\n  yes my compiler gave warning for %P but if we don't focus on that then also for *p it should return value of i i.e., 5 and then 6  <a href=\"https://stackoverflow.com/questions/52628402/why-the-output-of-the-following-c-code-is-like-this#comment92190580_52628402\">comment</a>.</p>\n</blockquote>\n\n<p>The key problem is assuming that code after a warning should behave well.</p>\n\n<p>That warning was a result of using an invalid print specifier <code>\"%P\"</code>.  That leads to <em>undefined behavior</em> (UB).  The rest of code no longer has any specified behavior.  Thus \"should return value of i i.e., 5 and then 6\" is not support by C.  The output could be anything.</p>\n\n<hr>\n\n<p>Use valid print specifiers and matching arguments.</p>\n\n<p>Use <code>\"%p\"</code> to print a <code>void*</code>.  To convert <code>p</code> to a <code>void*</code>, apply a cast.</p>\n\n<pre><code>// printf(\"i = %d, p = %P, *p = %d\\n\",i,p,*p);\nprintf(\"i = %d, p = %p, *p = %d\\n\", i, (void*)p, *p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1538576967, "creation_date": 1538576967, "answer_id": 52629383, "question_id": 52628402, "link": "https://stackoverflow.com/questions/52628402/printing-values-pointers-and-pointers-to-values/52629383#52629383", "title": "Printing values, pointers and pointers to values", "body": "<p><code>%P</code> is not a valid conversion specifier, so your second argument <code>p</code> is being printed as a decimal integer with <code>%d</code>, and <code>*p</code> is not being printed at all.  </p>\n\n<p>Change both lines to</p>\n\n<pre><code>printf(\"i = %d, p = %p, *p = %d\\n\",i, (void *)p,*p);\n                     ^\n                     |\n                     +---- note lower case p here\n</code></pre>\n\n<p>and you will get the output you expect.  </p>\n"}], "owner": {"reputation": 43, "user_id": 8446883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bade2250d595b702958b6e7cd0eec38b?s=128&d=identicon&r=PG", "display_name": "deep_purohit", "link": "https://stackoverflow.com/users/8446883/deep-purohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1538577693, "answer_count": 5, "score": 0, "last_activity_date": 1571645749, "creation_date": 1538574064, "last_edit_date": 1571645749, "question_id": 52628402, "link": "https://stackoverflow.com/questions/52628402/printing-values-pointers-and-pointers-to-values", "closed_reason": "Not suitable for this site", "title": "Printing values, pointers and pointers to values", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{   int i;\n    int *p;\n    p = &amp;i;\n    i=5;\n\n    printf(\"i = %d, p = %P, *p = %d\\n\",i,p,*p);\n\n    *p=6;\n    printf(\"i = %d, p = %P, *p = %d\\n\",i,p,*p);\n\n    return 0;\n}\n</code></pre>\n\n<p>the output of this code is:</p>\n\n<pre><code>i = 5, p = %P, *p = -1009882308\ni = 6, p = %P, *p = -1009882308\n</code></pre>\n\n<p>where it should give *p=5 in 1st statement and in 2nd statement *p=6</p>\n"}, {"tags": ["c", "arduino", "arm", "stm32", "usart"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1538576946, "post_id": 52628343, "comment_id": 92192108, "body": "What makes you think it is a software problem in the first place? Have you measured the signals?"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538577804, "post_id": 52628343, "comment_id": 92192715, "body": "Yes, I have a logic analyser connected to the tx and rx pins of both the arduino and stm32, and the arduino/adm485 chip is supplying the correct data to the rx pin of the stm board, however using keils debugger and a logic analyser connected to the tx pin, the board is reading the data in as an incorrect value and outputting this incorrect value"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538578060, "post_id": 52628343, "comment_id": 92192891, "body": "Does the ST board have a RS485 transceiver too? It&#39;s a bit unusual for these kind of hobbyist boards. Because if you take one RS485 line and plug it to a UART, it may or may not work, depending on which differential line you happened to pick."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1538578174, "post_id": 52628343, "comment_id": 92192976, "body": "@user10451545 is the baud rate correct?  Is the bit width of the output &#39;incorrect&#39; data exactly the same as the bit width of the incoming &#39;correct&#39; data?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538578264, "post_id": 52628343, "comment_id": 92193038, "body": "@Lundin &#39;RS485&#39;...... ah....."}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "edited": false, "score": 0, "creation_date": 1538578446, "post_id": 52628343, "comment_id": 92193177, "body": "Yes, my current configuration is that I have a arduino Uno board connected to an adm485 IC (rx and tx), this is then connected to another adm485 IC using beldin 8723 cable, the rx and tx pins of that are then connected to the corresponding tx and rx pins of my USART on the STM board"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1538578657, "post_id": 52628343, "comment_id": 92193331, "body": "@MartinJames could you help me with setting the baud rate please? I think I have set it correctly, I can either use pclk or sysclk, the sysclk is 80Mhz, so I then calculated my baud rate using an equation in the stm32 reference manual, in the code I provided I am using the automatic baud rate detector"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538581810, "post_id": 52628343, "comment_id": 92195370, "body": "@Lundin I have just disconnected the adm485 chips and connected the tx, rx pins of the arduinos directly to eachother and it worked perfectly, can you offer advice as to why it is the adm485 chip, because if I replace the stm32 board with an arduino it works no problem with the adm485 chips"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538593463, "post_id": 52628343, "comment_id": 92201309, "body": "Do not use magic numbers and shifts. It is not simple AVR. Who has the time to check everything with the RM. Use human readable decinitions"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538642757, "post_id": 52628343, "comment_id": 92217348, "body": "I think what you should do next is to post at <a href=\"https://electronics.stackexchange.com/\">electronics.stackexchange.com</a>. That site has an easy to use schematic editor. If you could draw a simple schematic how the transceivers are connected to the MCUs and each other, someone will find the problem in no time. Otherwise, the usual culprits with any UART: mixing up tx and rx pins, missing signal ground."}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538643536, "post_id": 52628343, "comment_id": 92217809, "body": "@P__J__ sorry bro I learnt this way at uni, an i use this way as i learn more than just using the standard peripheral libraries, but to make it more readable i have added comments describing the magic numbers and why they are used, i have worked out correct baud rate and the whole system is now working! However i only want it to transmit data when it has received a full byte on RX, because at the moment it is transmitting on TX as soon as it receives on RX, could you help with this please?"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538643924, "post_id": 52628343, "comment_id": 92218059, "body": "@Lundin thankyou for your help, after you told me to look up the transceiver, i figured out because the STM32 was working in full duplex and the RS485 is half duplex, it was pretty much overloading the lines with data, i have now got it to only transmit off TX after it receives on RX, however i want it to transmit on TX when it has received the full byte on RX, can you offer any advice with this? I am trying to avoid delays as it locks up the processor which is bad practise for the long run i have heard"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538644025, "post_id": 52628343, "comment_id": 92218120, "body": "@user10451545 very bad uni. if you change it to do now waste my time I can help you"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538644599, "post_id": 52628343, "comment_id": 92218462, "body": "@P__J__ okay, what style should i change it to? what do u say is best, i am still learning so any advice you give me is appreciated, what is better practise style of coding for this task?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538645387, "post_id": 52628343, "comment_id": 92218957, "body": "@user10451545 You have to specify a protocol. One side should receive a full protocol, and when that is sent, both nodes switch direction (&quot;ping pong&quot;), a pure software solution. Some more cumbersome solutions involve handshaking with RTS/CTS, but that would mean additional transceiver circuits and I see no point of using it here."}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538646485, "post_id": 52628343, "comment_id": 92219659, "body": "@Lundin okay I think I have the right idea then i just need to implement it better in my STM code, currently i have one arduino master, an arduino slave and an stm slave, so the master sends an address, the corresponding slave with that address sends back that address plus the status of a push button connected to it, then the master sends the next address, i had it working fine with 1 arduino master and 2 arduino slaves, i am just now trying to implement it with an stm board instead"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538646852, "post_id": 52628343, "comment_id": 92219886, "body": "Use definitions from the CMSIS"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538647887, "post_id": 52628343, "comment_id": 92220420, "body": "@P__J__ oh yes i see what you mean, we have learnt that way at university too but i thought i would learn more doing register level, would you suggest i always use CMSIS over register level?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538649114, "post_id": 52628343, "comment_id": 92221138, "body": "CMSIS are mostly only human readable definitions. It is not a high level library. It is not HAL or SPL!!!! Your uni teaches strange stuff."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538649185, "post_id": 52628343, "comment_id": 92221176, "body": "You use it anyway because USART3 is a CMSIS define which uses the CMSIS typedef."}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538651350, "post_id": 52628343, "comment_id": 92222439, "body": "@P__J__ i put it down more towards me not paying proper attention at university haha, but thank you for your explanation, i will now use CMSIS over register level so it is more readable, i have managed to alter my code so everything is working now, thanks everyone who helped :)"}, {"owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "edited": false, "score": 0, "creation_date": 1538657878, "post_id": 52628343, "comment_id": 92226425, "body": "@user10451545 Universities teach the microcontroller architectures, for example they show you the registers and the concept that writing to certain bits in certain registers may have an effect in hardware peripherals. That doesn&#39;t necessarily mean that you should be using magic numbers in your code, neither that this is a common practice."}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "edited": false, "score": 0, "creation_date": 1538662066, "post_id": 52628343, "comment_id": 92229416, "body": "@Jacek\u015alimok ahh yes this will be where I getting mixed up, I will use CMSIS from now on, thanks guys"}], "owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538643704, "creation_date": 1538573920, "last_edit_date": 1538643704, "question_id": 52628343, "link": "https://stackoverflow.com/questions/52628343/receiving-and-sending-data-from-arduino-to-stml476rg", "title": "receiving and sending data from arduino to stml476RG", "body": "<p>I am looking to receive serial data from an arduino, and then transmit the data received back to the arduino, however I am having trouble receiving the correct data. Below is my code, I am not sure on where I have gone wrong, can anyone see any problems? \nI am using register level programming and using USART 3 on the STM32L476RG development board, an I am using ADM485 chip to transfer the data between each serial port.</p>\n\n<pre><code>#include \"stm32L476XX.h\"\n#include \"stdio.h\"\n\nint T ;\nint R ;\nuint8_t z;\n\nvoid USART3_init(void)\n{\n\n   USART3-&gt;BRR   |= 26UL&lt;&lt;4;  //BAUD RATE MANTISSA 234UL&lt;&lt;4\n   USART3-&gt;BRR   |= 1UL&lt;&lt;0;   // BAUD RATE FRACTION 6UL&lt;&lt;0  \n   USART3-&gt;CR1   |= 1UL&lt;&lt;0;  //enable USART\n   USART3-&gt;CR1      ^= 0UL&lt;&lt;28; //1 start bit, 8 data bits, n stop bit\n   USART3-&gt;CR1   ^= 0UL&lt;&lt;12; //also sets word length to 8 data bits\n    USART3-&gt;CR1     ^= 0UL&lt;&lt;10; //no parity control\n    USART3-&gt;CR1   |= 1UL&lt;&lt;6;   //Transmission complete interrupt enabled\n   USART3-&gt;CR1      |= 1UL&lt;&lt;7;   //TXE interrupt enable\n    USART3-&gt;CR1   |= 1UL&lt;&lt;5;   //RXNEIE interrupt enable    \n    USART3-&gt;CR2   ^=00UL&lt;&lt;12;    //1 stop bit\n    USART3-&gt;CR1     |= 1UL&lt;&lt;3;   // enable transmitter\n    USART3-&gt;CR1   |= 1UL&lt;&lt;2;  // enable receiver\n\n      NVIC_EnableIRQ(USART3_IRQn); //enable USART interrupts \n\n}\n\n\nvoid Delay(void)\n{\n        uint32_t i=0;\n        for (i=0; i&lt;50000; i++){}\n}\n\n\nvoid USART3_IRQHandler(void)\n{\n //Delay();\n\n    if ((USART3-&gt;ISR&gt;&gt;5)&amp;1UL) //Check if RXNE interrupt is high\n{ \n  z = USART3-&gt;RDR; //put what is on RDR into Z (also clears RXNE flag)\n    GPIOB-&gt;ODR    |= 1UL&lt;&lt;5; //set transceiver into transmit mode       USART3-&gt;TDR = z; // Clears TXIE flag and outputs z on TX\n\n }\n\n if ((USART3-&gt;ISR&gt;&gt;7)&amp;1UL) //Check if TXIE interrupt is high\n {\n\nGPIOB-&gt;ODR    &amp;= 0UL&lt;&lt;5; //sets transceiver in receive mode\n\n } \n\n if  ((USART3-&gt;ISR&gt;&gt;6)&amp;1UL) //Check if TC interrupt is high\n {  \n    USART3-&gt;ICR   |= 1UL&lt;&lt;6; //Clear TC flag\n  GPIOB-&gt;ODR    &amp;= 0UL&lt;&lt;5;  //Set transceiver in receive mode    \n } \n\n}\n\nvoid RCC_GPIO_init(void)\n {\nRCC-&gt;APB1ENR1 |= 1UL&lt;&lt;18; //Enable USART 3 clock\n    RCC-&gt;AHB2ENR    |= 1UL&lt;&lt;1; //Enable GPIOB clock\n\n  GPIOB-&gt;MODER   =  0; //reset all register bits\n  GPIOB-&gt;MODER  |= 2UL&lt;&lt;20; //enable GPIOB pin 10 as alternate function\n  GPIOB-&gt;MODER  |= 2UL&lt;&lt;22; //enable GPIOB pin 11 as alternate function\n  GPIOB-&gt;MODER  |= 1UL&lt;&lt;10; //enable GPIOB pin 5 as output\n\n  GPIOB-&gt;AFR[1]  =  0;   //reset all register bits\n  GPIOB-&gt;AFR[1] |= 7UL&lt;&lt;8; //enable GPIOB pin 10 as TX\n  GPIOB-&gt;AFR[1] |= 7UL&lt;&lt;12; //enable GPIOB pin 10 as RX\n\n  GPIOB-&gt;ODR    ^= 0UL&lt;&lt;5;  //GPIOB pin 5 as low (to put ADM485 transceiver in receive mode)\n}\n\n\nint main (void)\n{\n\n   RCC_GPIO_init();\n USART3_init();\nwhile(1)\n        {                       \n    }       \n\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "gcc", "raw-input"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1538573740, "post_id": 52628204, "comment_id": 92190071, "body": "Use <code>#include &lt;windows.h&gt;</code> because it is not in your current directory."}, {"owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1538576366, "post_id": 52628204, "comment_id": 92191722, "body": "@PaulOgilvie That is not making any difference..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538577225, "post_id": 52628204, "comment_id": 92192293, "body": "How do you compile it? Also, are you using Mingw64 or the old Mingw?"}, {"owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "edited": false, "score": 0, "creation_date": 1538577486, "post_id": 52628204, "comment_id": 92192473, "body": "I compile by doing <code>mkdir o</code> <code>cd o</code> <code>gcc -c ..&#47;src&#47;*.c -Wall</code>. I&#39;m using Mingw and never had problems even though my computer is 64 bit."}, {"owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "edited": false, "score": 0, "creation_date": 1538577560, "post_id": 52628204, "comment_id": 92192527, "body": "Wow! I just read this. &quot;MinGW is a GCC-port for Windows. Not all of the Windows API is supported&quot;"}, {"owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "edited": false, "score": 0, "creation_date": 1538582471, "post_id": 52628204, "comment_id": 92195735, "body": "I switched to mingw64 and everything is now working! Thanks for the help"}], "owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538573504, "creation_date": 1538573504, "question_id": 52628204, "link": "https://stackoverflow.com/questions/52628204/c-unknown-type-name-prawinputdevicelist-even-though-windows-h-is-included", "title": "C - unknown type name PRAWINPUTDEVICELIST even though Windows.h is included", "body": "<p>I am using GCC on Windows 10 to compile C program.</p>\n\n<p>I have included <code>Windows.h</code> to access the Windows Raw Input API.</p>\n\n<pre><code>#include \"Windows.h\"\n</code></pre>\n\n<p>In my <code>main</code> function I am using a few types and functions from that header file.</p>\n\n<pre><code>UINT numDevices;\nPRAWINPUTDEVICELIST devices;\nif (GetRawInputDeviceList(NULL, &amp;numDevices, sizeof(RAWINPUTDEVICELIST)) != 0) return 1\nif ((devices = malloc(sizeof(RAWINPUTDEVICELIST) * numDevices)) == NULL) return 1\nif (GetRawInputDeviceList(devices, &amp;numDevices, sizeof(RAWINPUTDEVICELIST)) == (UINT) -1) return 1\n</code></pre>\n\n<p>When I try to compile it says <code>error: unknown type name 'PRAWINPUTDEVICELIST'</code> even though the header file is working fine... What am I doing wrong?</p>\n"}, {"tags": ["c", "encode", "opus"], "comments": [{"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1538572163, "post_id": 52627657, "comment_id": 92189024, "body": "You&#39;re passing it an out of range argument. <code>#define OPUS_BAD_ARG          -1</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1538577405, "post_id": 52627657, "comment_id": 92192407, "body": "Don&#39;t allocate 1 million bytes on the stack."}], "owner": {"reputation": 11, "user_id": 8591190, "user_type": "registered", "profile_image": "https://graph.facebook.com/270999720059312/picture?type=large", "display_name": "Jacques Payen", "link": "https://stackoverflow.com/users/8591190/jacques-payen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538571712, "creation_date": 1538571712, "question_id": 52627657, "link": "https://stackoverflow.com/questions/52627657/encode-audio-float-opus-c", "title": "Encode audio float opus c", "body": "<p>I'm trying to encode &amp; decode audio with opus, but when I'm running my code the function opus_encode_float return -1.</p>\n\n<pre><code>   int opuscode(float *sound)\n    {\n    unsigned char data[1000000];\n    int *error;\n    int ini;\n    opus_int32  rate = SAMPLE_RATE;\n    int size = opus_encoder_get_size(CHANNELS);\n    OpusEncoder *op = opus_encoder_create(rate, 2, OPUS_APPLICATION_VOIP, error);\n    opus_encoder_ctl(op, OPUS_GET_BANDWIDTH(&amp;rate));\n    int  len = opus_encode_float(op, sound, rate, data, rate);\n    printf(\"%i ici \", len);\n    int decodesize = opus_decoder_get_size(CHANNELS);\n    OpusDecoder *dop = opus_decoder_create(rate, 2, error);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1538570584, "post_id": 52627224, "comment_id": 92187973, "body": "<code>while (n!=0)</code> ??? Sure it is the cause of an endless loop..."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 0, "creation_date": 1538570588, "post_id": 52627224, "comment_id": 92187977, "body": "it doesn&#39;t look like you ever dynamically allocate memory, which would make a leak impossible"}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1538570645, "post_id": 52627224, "comment_id": 92188011, "body": "@Jean-BaptisteYun&#232;s He scans into <code>n</code> each iteration, near the end"}, {"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538570687, "post_id": 52627224, "comment_id": 92188036, "body": "The loop is to continue for multiple runs untill the next &quot;n&quot; is 0. Thats why the while(n!=0). Forgot to add that part"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 0, "creation_date": 1538570755, "post_id": 52627224, "comment_id": 92188090, "body": "@rtpax Oh I see, his formating is to bad and I didn&#39;t correctly interpret the code."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1538570852, "post_id": 52627224, "comment_id": 92188159, "body": "<a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leak</a> happens when a program manages it&#39;s allocated memory (it&#39;s called dynamic allocation). You just allocate 15000 <code>int</code>&#39;s in your program, but the allocation is done by OS, not by your program. The only possibility for a leak is inside <code>scanf</code> and <code>printf</code> function, assuming those are written correctly, there is no possibility of memory leak in your program. Is <code>n</code> lower then <code>MAX_SIZE</code>?"}, {"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538571055, "post_id": 52627224, "comment_id": 92188284, "body": "Yes 1 \u2264 n  \u2264 5000. So what I believe to be the problem is that there is a loop going too many times"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538570948, "post_id": 52627342, "comment_id": 92188210, "body": "How would I solve this? I have tried removing the j=0 part as I too believe thats the leak. But when I remove j=0 the auto correction tells me I get the wrong answer."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 1, "creation_date": 1538571260, "post_id": 52627342, "comment_id": 92188428, "body": "In fact I didn&#39;t analyze your algorithm, I just have a look at what could cause then endless loop. What is the purpose of these two loops? That is not clear to me."}, {"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538571903, "post_id": 52627342, "comment_id": 92188844, "body": "So since I have sorted list11 and list2 in the bubble sorts above. I now want the list2s values in the order of list1. So what these loops are made to do is to sort list2 by the order of list1. And since list11 is the sorted copy of list1 aswell as list2 is sorted I use that to write over list1. Im trying my best to explain."}, {"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538572574, "post_id": 52627342, "comment_id": 92189269, "body": "So lets say we first type 4. That makes n = 4. Now the first 4 numbers we type will go to list1. The 4 after that go to list2. We type 1 2 3 4 9 8 7 6. The order of list1 is smallest to biggest number. Now the numbers of list2 are to be sorted by that order. That would be 6 7 8 9. This is what the input and output would look like:  4 1 2 3 4 9 8 7 6  6 7 8 9 With only one number per row"}, {"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538573466, "post_id": 52627342, "comment_id": 92189873, "body": "Another example would be n=3. First 3 numbers (list1) 1 3 2. Last 3 numbers (list2) 7 8 9. The output would be 7 9 8."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538573711, "post_id": 52627342, "comment_id": 92190053, "body": "I see (I think) so you just need one loop : <code>for (int i=0; i&lt;n; i++) list11[i] = list2[list1[i]-1];</code> The result should be in list11 as list1 is your &quot;order&quot;."}, {"owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538574715, "post_id": 52627342, "comment_id": 92190710, "body": "Hm, it seems to work for some cases but prints a &quot;0&quot; on a extra row. But it doesn&#39;t work for all test cases. When I tried the combination of n = 4. First 4 numbers: 9 61 62 30. Last 4 numbers: 55 73 10 6. All it printed was 5 zeros, 4 + the one extra mentioned at the beginning. When I tried this I changed the printf at the end to print list11 instead of list1"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "edited": false, "score": 0, "creation_date": 1538576237, "post_id": 52627342, "comment_id": 92191636, "body": "@user10445316 Of course you didn&#39;t clearly specified what list1 may contains! Always clearly specify what you want..."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 2, "last_activity_date": 1538570698, "creation_date": 1538570698, "answer_id": 52627342, "question_id": 52627224, "link": "https://stackoverflow.com/questions/52627224/run-time-too-long-possible-loop-leak-c/52627342#52627342", "title": "Run time too long (possible loop leak), C", "body": "<p>Think twice.</p>\n\n<pre><code>if (list1[i]==list11[j])\n   {\n     list1[i]=list2[j];\n     j=0;\n   }\n</code></pre>\n\n<p>You may reset <code>j=0</code> endlessly, because the condition may always be true, if <code>list1[i]</code> equals to <code>list11[j]</code> equals to <code>list2[j]</code>...</p>\n"}], "owner": {"reputation": 1, "user_id": 10445316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3837e109374011548214f563d97b3912?s=128&d=identicon&r=PG&f=1", "display_name": "user10445316", "link": "https://stackoverflow.com/users/10445316/user10445316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538575057, "creation_date": 1538570329, "last_edit_date": 1538570857, "question_id": 52627224, "link": "https://stackoverflow.com/questions/52627224/run-time-too-long-possible-loop-leak-c", "title": "Run time too long (possible loop leak), C", "body": "<p>Ok me and my friend have been working on this task from school where we are to sort one array by the order of another array. We have found a working solution that we can use. The problem is that when we are to hand in the work to auto correction, they don't accept it because of time limit exceeded. So we've made many optimizations by taking away as many loops as possible. Still it has not been enough. I've tried adding a count++ to see if there is a loop running many times. What I found was that the loop after the bubble sorting could be the leak. Removing j=0 would remove the time limit exceeded, but would instead give a wrong answer according to the auto correction. </p>\n\n<p>The code is as follows: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAXSIZE 5000\n\nint main()\n{\n    int i=0, j=0, n=0, tmp=0, tmp1 = 0;\n    int list1[MAXSIZE],list2[MAXSIZE], list11[MAXSIZE];\n    scanf(\"%d\",&amp;n);\n    while (n!=0)\n      {\n        for (i=0; i&lt;n; i++)\n        {\n            scanf(\"%d\",&amp;list1[i]);\n            list11[i]=list1[i]; \n        }\n        for (i=0; i&lt;n; i++)\n        {\n            scanf(\"%d\",&amp;list2[i]);\n        }\n        for (i=0; i&lt;n; i++)\n        {\n            for (j=0; j&lt;n; j++)\n            {\n                if (list11[j] &gt; list11[i]) \n                {\n                    tmp = list11[i]; \n                    list11[i] = list11[j]; \n                    list11[j] = tmp; \n                }\n                tmp1=0;     \n                if (list2[j] &gt; list2[i]) \n                {\n                    tmp1 = list2[i]; \n                    list2[i] = list2[j]; \n                    list2[j] = tmp1; \n                }\n            }   \n       }\n       //Possible leak\n       for (i=0; i&lt;n; i++)\n       {\n        for (j=0; j&lt;n; j++)\n        {\n            if (list1[i]==list11[j])\n            {\n                list1[i]=list2[j];\n                j=0;\n            }\n        }\n       }\n       printf(\"\\n\");\n       for (i=0; i&lt;n; i++)\n       {\n        printf(\"%d\\n\",list1[i]);\n       }\n       scanf(\"%d\", &amp;n);\n       if(n == 0)\n        break;\n       else\n        printf(\"\\n\");\n    } \n  return 0;\n}\n</code></pre>\n\n<p>Could there be a \"leak\" of some sort? Some sort of endless loop or a loop taking a lot of time when numbers are great? This error happens when the code takes more than one second to perform.</p>\n"}, {"tags": ["c", "shell", "unix"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1538570227, "post_id": 52627160, "comment_id": 92187704, "body": "Is it always causing the segfault or only when you input certain values?"}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 1, "creation_date": 1538570371, "post_id": 52627160, "comment_id": 92187828, "body": "In first and second <code>printf</code> you are missing terminating <code>&quot;</code> character, How will it compile?"}, {"owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 0, "creation_date": 1538570676, "post_id": 52627160, "comment_id": 92188030, "body": "Please fix your code snippet and use the correct method to insert code snippets using markdown syntax. As is, your code had too many unrelated problems to wire up a proper answer"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5716646, "user_type": "registered", "profile_image": "https://graph.facebook.com/1719290521623377/picture?type=large", "display_name": "Somaiah Mohd", "link": "https://stackoverflow.com/users/5716646/somaiah-mohd"}, "edited": false, "score": 0, "creation_date": 1538570723, "post_id": 52627290, "comment_id": 92188067, "body": "Thank you so muck this worked!!"}], "tags": [], "owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "is_accepted": false, "score": 1, "last_activity_date": 1538570510, "creation_date": 1538570510, "answer_id": 52627290, "question_id": 52627160, "link": "https://stackoverflow.com/questions/52627160/c-segmentation-fault-after-trying-to-print-data-on-screen/52627290#52627290", "title": "C: Segmentation fault after trying to print data on screen", "body": "<p>You should add an ampersand and proper format specifier to <code>scanf</code><br/> <code>scanf(\"%ld\",&amp;ISBN);</code></p>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 8081675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dXuTKxOVtY/AAAAAAAAAAI/AAAAAAAAAGQ/THtjmsK5fsU/photo.jpg?sz=128", "display_name": "David Narum", "link": "https://stackoverflow.com/users/8081675/david-narum"}, "is_accepted": false, "score": 2, "last_activity_date": 1538570666, "creation_date": 1538570666, "answer_id": 52627333, "question_id": 52627160, "link": "https://stackoverflow.com/questions/52627160/c-segmentation-fault-after-trying-to-print-data-on-screen/52627333#52627333", "title": "C: Segmentation fault after trying to print data on screen", "body": "<p>As you probably have noticed, the segmentation fault happens at the line\n<code>scanf(\"%d\",ISBN);</code></p>\n\n<p><code>scanf</code> requires a pointer to save the result in, but you are passing it the value of the variable ISBN. In order to save the result in the ISBN variable you should send it a pointer to the variable instead: <code>scanf(\"%d\", &amp;ISBN);</code></p>\n\n<p>(arrays already work (more or less) the same way as pointers, so there is no need to use <code>&amp;</code> when reading strings)</p>\n"}, {"tags": [], "owner": {"reputation": 412, "user_id": 10347292, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OhMMolLithM/AAAAAAAAAAI/AAAAAAAAATI/pCcptXjRUQA/photo.jpg?sz=128", "display_name": "Zahreddine Laidi", "link": "https://stackoverflow.com/users/10347292/zahreddine-laidi"}, "is_accepted": false, "score": 1, "last_activity_date": 1538571127, "creation_date": 1538571127, "answer_id": 52627466, "question_id": 52627160, "link": "https://stackoverflow.com/questions/52627160/c-segmentation-fault-after-trying-to-print-data-on-screen/52627466#52627466", "title": "C: Segmentation fault after trying to print data on screen", "body": "<p>Just change the line <code>scanf(\"%d\", ISBN);</code> by <code>scanf(\"%d\", &amp;ISBN);</code> , scan requires a pointer and you are trying to save the result without pointer, so the program will just segfault. But if you give him the adress of the variable, he can reach it and save the result in it.</p>\n"}], "owner": {"reputation": 1, "user_id": 5716646, "user_type": "registered", "profile_image": "https://graph.facebook.com/1719290521623377/picture?type=large", "display_name": "Somaiah Mohd", "link": "https://stackoverflow.com/users/5716646/somaiah-mohd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "closed_date": 1538571632, "answer_count": 3, "score": -1, "last_activity_date": 1538571668, "creation_date": 1538570089, "last_edit_date": 1538570807, "question_id": 52627160, "link": "https://stackoverflow.com/questions/52627160/c-segmentation-fault-after-trying-to-print-data-on-screen", "closed_reason": "Duplicate", "title": "C: Segmentation fault after trying to print data on screen", "body": "<p>I'm new to C language and having this problem alot, the code compiles with no problems yet still get this message: <pre>Segmentation fault\n</pre> when trying to execute my code on UNIX terminal.\nThis is the code: </p>\n\n<pre><code>///MAIN FUNCTION///\nint main() {\n        printf(\"==========================J.U.S.T=======================$\n        printf(\"Enter your option number:\\n1- working with an existing f$\n        char choice[1];\n        scanf(\"%c\",choice);\n        if(choice[0] == '1'){\n                printf(\"first choice\");\n        }\n        else if(choice[0] =='2' ){\n                printf(\"Enter the following data one by one:\");\n                char BookT[50],AUTHORn[50];long int ISBN;\n                printf(\"Book Title:\");\n                scanf(\"%s\",BookT);\n        //      sleep(5);\n                printf(\"Author name:\");\n                scanf(\"%s\",AUTHORn);\n        //      sleep(5);\n                printf(\"Book number:\");\n                scanf(\"%d\",ISBN);\n        //      sleep(5);\n                printf(\"%s\\n%s\\n%d\\n\",BookT,AUTHORn,ISBN);\n        }\n        else printf(\"Wrong choice try again!!\");\n        return 0;\n}\n</code></pre>\n\n<p>I'm using Kali linux to compile the code.</p>\n"}, {"tags": ["c", "visual-studio", "fortran", "intel-fortran"], "comments": [{"owner": {"reputation": 4153, "user_id": 2938526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aba561f633da5f6fe58b227c5e685b6?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Rodrigues", "link": "https://stackoverflow.com/users/2938526/rodrigo-rodrigues"}, "edited": false, "score": 1, "creation_date": 1538569858, "post_id": 52627026, "comment_id": 92187455, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 1, "creation_date": 1538570299, "post_id": 52627026, "comment_id": 92187772, "body": "Yes, we need more details, but note that <code>test_execute</code> is not <code>TEST_mp_EXECUTE</code>.  This latter would be expected to be a procedure <code>execute</code> in the module <code>test</code>, not a procedure called <code>test_execute</code>."}, {"owner": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1538574314, "post_id": 52627026, "comment_id": 92190443, "body": "@francescalus: you are right; I have edited the question to reflect your comment but also because this is what is happening in reality (somehow, I copied and pasted this wrongly in the original question)."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1538575301, "post_id": 52627026, "comment_id": 92191073, "body": "But we still need the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Just changing the name of the function is not enough. The MCVE includes the commands used for the compilation and any other necessary configuration we have to use."}, {"owner": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1538577438, "post_id": 52627026, "comment_id": 92192435, "body": "@VladimirF: I have added the question to include a MCVE."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1538577882, "post_id": 52627026, "comment_id": 92192772, "body": "Have a look with e.g. depends in the dll / lib file to see which name is stored theer ."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1538581381, "post_id": 52627026, "comment_id": 92195109, "body": "Which version of the compiler?  It appears to be a little confused and so a later version, if available, would be a good place to look."}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "edited": false, "score": 0, "creation_date": 1538988713, "post_id": 52631425, "comment_id": 92323688, "body": "Thanks; it worked! I needed to include <code>DEC$ ATTRIBUTES DLLEXPORT :: execute</code> (in file <code>Test.f90</code>) for the shared library to be used properly though. Now, I am trying to build a static library but when using it it fails saying <code>Example.obj : error LNK2019: unresolved external symbol TEST_mp_EXECUTE referenced in function MAIN__</code> (despite having the <code>!DEC$ ...</code> declaration now). Do you have an idea of what is going on?"}, {"owner": {"reputation": 5480, "user_id": 2643582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4109e2c614151bab2fe602ae9a1bc2d7?s=128&d=identicon&r=PG", "display_name": "Steve Lionel", "link": "https://stackoverflow.com/users/2643582/steve-lionel"}, "reply_to_user": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "edited": false, "score": 0, "creation_date": 1539015795, "post_id": 52631425, "comment_id": 92339192, "body": "It is incorrect to add DLLEXPORT of execute in the Fortran source, since execute is a C routine and you already have it exported from C. Not that this does anything for a static library. I suspect that the cause is the same as I wrote before - overwriting object files. Perhaps you can show us what you are using for sources and commands now?"}, {"owner": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "edited": false, "score": 0, "creation_date": 1539017522, "post_id": 52631425, "comment_id": 92339925, "body": "Of course @Steve. The command used to build the static library is <code>lib.exe ctest.obj test.obj &#47;OUT:test_static.lib</code> which runs successfully. The command used to build a Fortran program (<code>example.f90</code>) that uses the static library <code>test_static.lib</code> is <code>ifort.exe example.f90 test_static.lib</code> which fails with the aforementioned error."}], "tags": [], "owner": {"reputation": 5480, "user_id": 2643582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4109e2c614151bab2fe602ae9a1bc2d7?s=128&d=identicon&r=PG", "display_name": "Steve Lionel", "link": "https://stackoverflow.com/users/2643582/steve-lionel"}, "is_accepted": true, "score": 1, "last_activity_date": 1538583039, "creation_date": 1538583039, "answer_id": 52631425, "question_id": 52627026, "link": "https://stackoverflow.com/questions/52627026/name-mismatch-when-using-fortran-shared-library/52631425#52631425", "title": "Name mismatch when using Fortran shared library", "body": "<p>Note that you have two sources that compile to a test.obj - the Fortran and the C. Also, the cl command you showed tries to generate an executable. Here's how to do it right:</p>\n\n<pre><code>cl /c /MD /Foctest.obj test.c\nifort /dll test.f90 ctest.obj\nifort example.f90 test.lib\n</code></pre>\n\n<p>I added /MD to the C compile to get a compatible set of run-time libraries. This generated the executable without errors.</p>\n"}], "owner": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 52631425, "answer_count": 1, "score": 0, "last_activity_date": 1538583039, "creation_date": 1538569638, "last_edit_date": 1538577410, "question_id": 52627026, "link": "https://stackoverflow.com/questions/52627026/name-mismatch-when-using-fortran-shared-library", "title": "Name mismatch when using Fortran shared library", "body": "<p>I managed to successfully compile a shared library using IFORT that contains some .obj files (i.e. dependencies) compiled by Visual Studio C.</p>\n\n<p>When trying to use this shared library in a Fortran program it fails saying <code>Example.obj : error LNK2019: unresolved external symbol TEST_mp_EXECUTE referenced in function MAIN__</code>.</p>\n\n<p>When I use the tool <code>dumpbin.exe</code> I can see that function <code>execute</code> is in the shared library. Any idea why this mismatch of names that is making the compilation of the Fortran program to fail?</p>\n\n<p>Content of file <code>Test.c</code>:</p>\n\n<pre><code>__declspec(dllexport) int execute(void);\n\nint execute(void)\n{\n    return 2 + 3;\n}\n</code></pre>\n\n<p>File <code>Test.c</code> successfully compiled with Microsoft Visual Studio C as follows (the result is an object file named <code>Test.obj</code>):</p>\n\n<pre><code>cl.exe Test.c /FoTest.obj\n</code></pre>\n\n<p>Content of file <code>Test.f90</code>:</p>\n\n<pre><code>MODULE Test\n\n    USE, INTRINSIC :: iso_c_binding, ONLY: c_int\n    IMPLICIT NONE\n\n    INTERFACE\n\n        INTEGER(c_int) FUNCTION execute() BIND(C, name = \"execute\")\n            USE, INTRINSIC :: iso_c_binding, ONLY: c_int\n        END FUNCTION\n\n    END INTERFACE\n\nEND MODULE\n</code></pre>\n\n<p>File <code>Test.f90</code> successfully compiled with IFORT as follows (the result is a shared library named <code>Test_dll.dll</code> along with its header file named <code>Test_dll.lib</code>, and a Fortran module file named <code>test.mod</code>):</p>\n\n<pre><code>ifort.exe Test.obj /Qm64 /LD /FeTest_dll.dll\n</code></pre>\n\n<p>Content of file <code>Example.f90</code>:</p>\n\n<pre><code>PROGRAM Example\n\n    USE test\n\n    state = execute()\n\nEND PROGRAM\n</code></pre>\n\n<p>Now, when trying to compile file <code>Example.f90</code> as <code>ifort.exe Example.f90 Test_dll.lib</code> it fails saying <code>Example.obj : error LNK2019: unresolved external symbol TEST_mp_EXECUTE referenced in function MAIN__</code>. Any idea what is going on?</p>\n"}, {"tags": ["c", "linux", "makefile", "gnu-make"], "answers": [{"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1538569677, "post_id": 52626998, "comment_id": 92187326, "body": "If header file A is including different header file B, and the <code>.c</code> is including the <code>A.h</code>, should I specify <code>B.h</code> too incase <code>B.h</code> changes? or would specifying <code>A.h</code> alone be enough?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1538569924, "post_id": 52626998, "comment_id": 92187511, "body": "@TonyTannous - Personally I&#39;d prefer to have <code>A.h</code> as a dummy target that depend on <code>B.h</code> (by dummy I mean, it doesn&#39;t execute anything, only lists dependencies). This is where managing a makefile can become difficult, and a tool like CMake becomes useful."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1538570026, "post_id": 52626998, "comment_id": 92187575, "body": "I couldn&#39;t fine any paper or a proper article when to write my own make files or to use cmake. I have 4 projects which include quite few source files and header files. If you have any source to read I&#39;d appreciate it."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1538570172, "post_id": 52626998, "comment_id": 92187663, "body": "@TonyTannous - Writing those things is in part art form. It&#39;s hard to figure out what&#39;s best until after you went past the learning curve. What helped me upon starting is <a href=\"https://www.amazon.co.uk/Mastering-CMake-Ken-Martin/dp/1930934319\" rel=\"nofollow noreferrer\">Mastering Cmake (Amazon link)</a>, and the official cmake tutorial/reference. The <code>verbose</code> option for <code>cmake</code> also helped me figure out where I was bungling it up."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1548931849, "post_id": 52626998, "comment_id": 95725685, "body": "Hi there, can&#39;t ask this directly on SO but I respect your opinion so asking in a comment. How would you recommend for a C programmer to learn c++ and then moving to c++14 things? to start immediately in c++14 or learn basics of c++ first?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1548932502, "post_id": 52626998, "comment_id": 95726040, "body": "@TonyTannous - Starting out from C++14 is not a bad idea, might as well get accustomed to current code. The biggest challenge is getting into the mindset of C++. I started out as a C programmer myself. I think <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">books</a> are actually the best way to get up to speed on that. Bjarne&#39;s <i>A Tour of C++</i> is a good place to start. Then the &quot;Effective C++&quot; series is a must, the advice there is always relevant. And then just code, but I don&#39;t need to tell you that :)"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1548932921, "post_id": 52626998, "comment_id": 95726280, "body": "Thanks! I will try to learn as much as possible in the next 2 weeks and then jump in deep water."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1538569695, "last_edit_date": 1538569695, "creation_date": 1538569515, "answer_id": 52626998, "question_id": 52626970, "link": "https://stackoverflow.com/questions/52626970/makefile-better-understanding-rules/52626998#52626998", "title": "Makefile, better understanding rules", "body": "<p>Yes, you should.</p>\n\n<p>The make program uses the list of files to figure out if a dependency changed and the the target should be rebuilt as a result. It needs you to specify that dependency explicitly.</p>\n\n<p>It does not see the inclusion, it only sees the rules you specified. So there is a theoretical possibility that you change the header in a way that may require a  re-compilation of <code>src.o</code>, but <code>make</code> will not know you did that unless you tell it to watch out.</p>\n"}, {"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1538572658, "post_id": 52627099, "comment_id": 92189325, "body": "Thanks for your answer as well. I&#39;ve read it and gave it an upvote."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1538570323, "last_edit_date": 1538570323, "creation_date": 1538569865, "answer_id": 52627099, "question_id": 52626970, "link": "https://stackoverflow.com/questions/52626970/makefile-better-understanding-rules/52627099#52627099", "title": "Makefile, better understanding rules", "body": "<p>The header file should be included in the dependency list.</p>\n\n<p>The first time you use <code>make</code> to build your program, it will compile just the same whether you include <code>myheader.h</code> as a dependency or not.  The difference is what happens when one of the files changes.</p>\n\n<p>If you run <code>make</code> again without changing anything, it will say that \"src\" is up to date and won't compile anything.  However, if you were to modify <code>myheader.h</code> and you <em>didn't</em> include it as a dependency, then <code>make</code> will say that the target is up to date.  It doesn't look at the source file to see what files it includes.  The <code>make</code> utility doesn't know anything about C or C++ source code (or any other source code).  It looks <strong>only</strong> at whether the given files have changes without looking at their content.</p>\n\n<p>When you include <code>myheader.h</code> as a dependency, if you later modify that file then running <code>make</code> will rebuild the program.</p>\n\n<p>If you want to know all the non-system header files that a given source file depends on, you can run gcc with the <code>-MM</code> option.  This will output a make rule listing the header dependencies of a source file.</p>\n\n<p>For example, if you run <code>gcc -MM src.c</code>, you'll get the following output:</p>\n\n<pre><code>src.o: src.c myheader.h\n</code></pre>\n\n<p>You can then include that in your makefile.</p>\n"}], "owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52626998, "answer_count": 2, "score": 1, "last_activity_date": 1538570323, "creation_date": 1538569411, "question_id": 52626970, "link": "https://stackoverflow.com/questions/52626970/makefile-better-understanding-rules", "title": "Makefile, better understanding rules", "body": "<p>Reading the <a href=\"https://www.gnu.org/software/make/manual/html_node/Rule-Introduction.html#Rule-Introduction\" rel=\"nofollow noreferrer\">official documentation</a> </p>\n\n<blockquote>\n  <p>A prerequisite is a file that is used as input to create the target. A\n  target often depends on several files.</p>\n</blockquote>\n\n<p>If my source file already includes the header, should I list the header in the rule? </p>\n\n<p><strong>src.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"myheader.h\"\n\nint main()\n{\n    printMessage();\n    return 0;\n}\n</code></pre>\n\n<p><strong>myheader.h</strong></p>\n\n<pre><code>void printMessage()\n{\n    printf(\"a message to screen\\n\");\n}\n</code></pre>\n\n<p><strong>makefile</strong></p>\n\n<pre><code>src : src.o\n    cc -o src src.o\n\nsrc.o : src.c\n    cc -c src.c\n</code></pre>\n\n<p>If I add <code>myheader.h</code> in the prerequisite it changes nothing, the same message is printed to screen. If a header is explicitly included, should it appear in the prerequisite?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1538568267, "post_id": 52626587, "comment_id": 92186455, "body": "Your string has unescaped <code>&quot;</code>, is that a typo or indicative of your actual debugging session?"}, {"owner": {"reputation": 35, "user_id": 9422107, "user_type": "registered", "profile_image": "https://graph.facebook.com/892297634273705/picture?type=large", "display_name": "Nandar Soe", "link": "https://stackoverflow.com/users/9422107/nandar-soe"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1538568593, "post_id": 52626587, "comment_id": 92186644, "body": "actual debugging session."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1538568627, "post_id": 52626587, "comment_id": 92186666, "body": "And I suspect that when you properly escape things, the problem goes away?"}, {"owner": {"reputation": 35, "user_id": 9422107, "user_type": "registered", "profile_image": "https://graph.facebook.com/892297634273705/picture?type=large", "display_name": "Nandar Soe", "link": "https://stackoverflow.com/users/9422107/nandar-soe"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1538568928, "post_id": 52626587, "comment_id": 92186866, "body": "I don&#39;t quite understand. Is it like this?:"}, {"owner": {"reputation": 35, "user_id": 9422107, "user_type": "registered", "profile_image": "https://graph.facebook.com/892297634273705/picture?type=large", "display_name": "Nandar Soe", "link": "https://stackoverflow.com/users/9422107/nandar-soe"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1538568932, "post_id": 52626587, "comment_id": 92186870, "body": "run $(python -c &quot;print &#39;RUSHKEKEKEzAS\\00\\xa9\\x87\\x04\\x08&#39;&quot;)"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1538730579, "post_id": 52626587, "comment_id": 92254286, "body": "Which version of <code>gdb</code> \u2026?"}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1538572748, "creation_date": 1538572748, "answer_id": 52627985, "question_id": 52626587, "link": "https://stackoverflow.com/questions/52626587/warning-command-substitution-ignored-null-byte-in-input-how-can-i-make-gdb-no/52627985#52627985", "title": "warning: command substitution: ignored null byte in input. How can I make gdb not ignore the null byte in the input?", "body": "<p>It is not possible to put a NUL byte into a command-line argument, because the argument is terminated by the first NUL byte. When <code>execve()</code> copies the <code>argv</code> array into the newly-created memory space for the process to be run, it only copies up to the first NUL byte.</p>\n\n<p>Since shells basically exist in order to feed command-line arguments to command-line utilities, they have no need to deal with embedded NUL bytes, and most of them don't. Bash, in particular, drops any NUL bytes it encounters during command substitution. Other shells might terminate the argument at the first NUL byte; the behaviour is unspecified by the Posix standard. </p>\n\n<p>Since gdb is basically designed to mimic bash, it follows the same rules, as indicated by that warning message.</p>\n"}], "owner": {"reputation": 35, "user_id": 9422107, "user_type": "registered", "profile_image": "https://graph.facebook.com/892297634273705/picture?type=large", "display_name": "Nandar Soe", "link": "https://stackoverflow.com/users/9422107/nandar-soe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2310, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1538572748, "creation_date": 1538568009, "question_id": 52626587, "link": "https://stackoverflow.com/questions/52626587/warning-command-substitution-ignored-null-byte-in-input-how-can-i-make-gdb-no", "title": "warning: command substitution: ignored null byte in input. How can I make gdb not ignore the null byte in the input?", "body": "<p>The buffer overflow assignment I have has this code:</p>\n\n<pre><code>int zerg(char *arg)\n{\n    char buf[12];\n    static int i, sum;\n\n    if (strlen (arg) &gt; 24) /* Argument too long! */\n    {\n        printf (\"String too long!\\n\");\n        return -1;\n}\n</code></pre>\n\n<p>Which is why I used this as an input:</p>\n\n<pre><code>run \"$(python -c \"print 'RUSHKEKEKEzAS\\00\\xa9\\x87\\x04\\x08'\")\"\n</code></pre>\n\n<p>But gdb is ignoring the null byte as input with the error above. How can I get pass this?</p>\n"}, {"tags": ["c", "gcc", "mingw", "glib", "msys2"], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 1, "last_activity_date": 1538580619, "creation_date": 1538580619, "answer_id": 52630662, "question_id": 52626474, "link": "https://stackoverflow.com/questions/52626474/msys2-and-mingw64-system-include-directory-is-incorrect-preventing-the-use-of-gl/52630662#52630662", "title": "Msys2 and Mingw64 system include directory is incorrect preventing the use of GLib", "body": "<p>If you install <code>pkg-config</code>, you can use it to obtain the build flags for glib, like this:</p>\n\n<pre><code>$ pkg-config --cflags glib-2.0\n-I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include\n$ pkg-config --libs glib-2.0       \n$ -lglib-2.0\n</code></pre>\n\n<p>The flags will vary from system to system, but the library name (<code>glib-2.0</code>) is hopefully consistent.</p>\n"}], "owner": {"reputation": 6079, "user_id": 34989, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f16eae47ba215ccc1fe3f05f1750adc?s=128&d=identicon&r=PG", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/34989/gerhard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 2, "accepted_answer_id": 52630662, "answer_count": 1, "score": 1, "last_activity_date": 1538580619, "creation_date": 1538567623, "last_edit_date": 1538569517, "question_id": 52626474, "link": "https://stackoverflow.com/questions/52626474/msys2-and-mingw64-system-include-directory-is-incorrect-preventing-the-use-of-gl", "title": "Msys2 and Mingw64 system include directory is incorrect preventing the use of GLib", "body": "<p>I am doing C development on windows and installed Msys2. With Msys2 <code>pacman</code> I installed 64 bit mingw and Glib. I can use the gcc that was installed to compile. The Glib headers is now at <code>C:\\msys64\\mingw64\\include\\glib-2.0</code> and <code>C:\\msys64\\usr\\include\\glib-2.0</code>.</p>\n\n<p>When adding <code>#include &lt;gmodule.h&gt;</code> to a source file and compiling I get:\n<code>fatal error: gmodule.h: No such file or directory</code></p>\n\n<p>Checking the include paths with <code>gcc -xc -E -v -</code> I see errors:</p>\n\n<pre><code>Using built-in specs.\nCOLLECT_GCC=gcc\nTarget: x86_64-w64-mingw32\nConfigured with: ../gcc-8.2.0/configure --prefix=/mingw64 --with-local-prefix=/mingw64/local --build=x86_64-w64-mingw32 -\n-host=x86_64-w64-mingw32 --target=x86_64-w64-mingw32 --with-native-system-header-dir=/mingw64/x86_64-w64-mingw32/include\n--libexecdir=/mingw64/lib --enable-bootstrap --with-arch=x86-64 --with-tune=generic --enable-languages=ada,c,lto,c++,objc,obj-c++,fortran --enable-shared --enable-static --enable-libatomic --enable-threads=posix --enable-graphite --enable-fully-dynamic-string --enable-libstdcxx-filesystem-ts=yes --enable-libstdcxx-time=yes --disable-libstdcxx-pch --disable-libstdcxx-debug --disable-isl-version-check --enable-lto --enable-libgomp --disable-multilib --enable-checking=release --disable-rpath --disable-win32-registry --disable-nls --disable-werror --disable-symvers --with-libiconv --with-system-zlib --with-gmp=/mingw64 --with-mpfr=/mingw64 --with-mpc=/mingw64 --with-isl=/mingw64 --with-pkgversion='Rev1, Built by MSYS2 project' --with-bugurl=https://sourceforge.net/projects/msys2 --with-gnu-as --with-gnu-ld\nThread model: posix\ngcc version 8.2.0 (Rev1, Built by MSYS2 project)\nCOLLECT_GCC_OPTIONS='-E' '-v' '-mtune=generic' '-march=x86-64'\n C:/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.2.0/cc1.exe -E -quiet -v -iprefix C:/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.2.0/ -D_REENTRANT - -mtune=generic -march=x86-64\nignoring duplicate directory \"C:/msys64/mingw64/lib/gcc/../../lib/gc/x86_64-w64-mingw32/8.2.0/include\"\nignoring nonexistent directory \"F:/msys64/mingw64/include\"\nignoring nonexistent directory \"/mingw64/include\"\nignoring duplicate directory \"C:/msys64/mingw64/lib/gcc/../../lib/gcc/x86_64-w64-mingw32/8.2.0/include-fixed\"\nignoring duplicate directory \"C:/msys64/mingw64/lib/gcc/../../lib/gcc/x86_64-w64-mingw32/8.2.0/../../../../x86_64-w64-mingw32/include\"\nignoring nonexistent directory \"F:/msys64/mingw64/x86_64-w64-mingw32/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n C:/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.2.0/include\n C:/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.2.0/../../../../include\n C:/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.2.0/include-fixed\n C:/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.2.0/../../../../x86_64-w64-mingw32/include\nEnd of search list.\n</code></pre>\n\n<p>How do I fix include paths so that gcc can find the GLib headers? I could add it to a spec file or <code>C_INCLUDE_PATH</code> but I it bypasses the error instead of fixing it.</p>\n"}, {"tags": ["c", "matrix", "multidimensional-array", "struct", "malloc"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 2, "creation_date": 1538566835, "post_id": 52626203, "comment_id": 92185666, "body": "<code>[1][2]</code>? You mean <code>[1][1]</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1538566850, "post_id": 52626203, "comment_id": 92185676, "body": "<code>struct1 -&gt; a = malloc ( 2*sizeof(struct1-&gt;a) );</code> wouldn&#39;t it be <code>struct1 -&gt; a = malloc ( 2*sizeof(*struct1-&gt;a) );</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1538566893, "post_id": 52626203, "comment_id": 92185710, "body": "Note that the <code>2</code> in your declaration is <i>not</i> the number of dimensions."}, {"owner": {"reputation": 5, "user_id": 7838634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0533ea0f786129e195f85a5ca25f30?s=128&d=identicon&r=PG&f=1", "display_name": "ajcoelho", "link": "https://stackoverflow.com/users/7838634/ajcoelho"}, "edited": false, "score": 0, "creation_date": 1538567849, "post_id": 52626203, "comment_id": 92186242, "body": "Yes, I meant [1][1], it was my bad.  @JeanFran&#231;ois Fabre has the right answer! It solved my problem. You should put it in answer so I could accept it."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7838634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0533ea0f786129e195f85a5ca25f30?s=128&d=identicon&r=PG&f=1", "display_name": "ajcoelho", "link": "https://stackoverflow.com/users/7838634/ajcoelho"}, "edited": false, "score": 0, "creation_date": 1538567972, "post_id": 52626427, "comment_id": 92186302, "body": "The second problem no longer applies, I made an EDIT in my post, it was a typo. The first problem Thanks, you solved it!"}, {"owner": {"reputation": 5, "user_id": 7838634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0533ea0f786129e195f85a5ca25f30?s=128&d=identicon&r=PG&f=1", "display_name": "ajcoelho", "link": "https://stackoverflow.com/users/7838634/ajcoelho"}, "edited": false, "score": 0, "creation_date": 1538568794, "post_id": 52626427, "comment_id": 92186776, "body": "Btw, do you know if there is any way of making the complete allocation inside the function update? So inside the struct I would only have double <code>*a</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 5, "user_id": 7838634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0533ea0f786129e195f85a5ca25f30?s=128&d=identicon&r=PG&f=1", "display_name": "ajcoelho", "link": "https://stackoverflow.com/users/7838634/ajcoelho"}, "edited": false, "score": 0, "creation_date": 1538569279, "post_id": 52626427, "comment_id": 92187084, "body": "@ajcoelho If you want a correct allocated 2D array (aka array of array) your method is correct. It can&#39;t be done using <code>double **a;</code> However, you can use a <code>double **a;</code> as an array of pointers and then let each of those pointers point to an array of doubles. The memory layout will not be the same as 2D array but you can use the <code>a[r][c]</code> syntax."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 5, "user_id": 7838634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0533ea0f786129e195f85a5ca25f30?s=128&d=identicon&r=PG&f=1", "display_name": "ajcoelho", "link": "https://stackoverflow.com/users/7838634/ajcoelho"}, "edited": false, "score": 0, "creation_date": 1538569460, "post_id": 52626427, "comment_id": 92187194, "body": "@ajcoelho Read this <a href=\"https://stackoverflow.com/a/42094467/4386427\">stackoverflow.com/a/42094467/4386427</a> for further info. Maybe the section <b>What is the pointer-to-pointer thing, if not an array?</b> is exactly what you are looking for."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1538567459, "creation_date": 1538567459, "answer_id": 52626427, "question_id": 52626203, "link": "https://stackoverflow.com/questions/52626203/cannot-store-values-in-matrix-using-c/52626427#52626427", "title": "Cannot store values in matrix using c", "body": "<p>I can see two problems.</p>\n\n<p>1) Incorrect <code>malloc</code> size</p>\n\n<p><code>struct1-&gt;a</code> is a pointer so <code>sizeof(struct1-&gt;a)</code> is the size of a pointer. What you want is the size of the first element. So use <code>sizeof(struct1-&gt;a[0])</code> (or <code>sizeof(*struct1-&gt;a)</code>)</p>\n\n<p>2) Index out of range</p>\n\n<p>Your code (after correcting malloc size) is creating a 2x2 matrix. So this access <code>struct1 -&gt; a[1][2]</code> is out of range</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1538577283, "creation_date": 1538577283, "answer_id": 52629490, "question_id": 52626203, "link": "https://stackoverflow.com/questions/52626203/cannot-store-values-in-matrix-using-c/52629490#52629490", "title": "Cannot store values in matrix using c", "body": "<p>After adding the necessary includes of <code>&lt;stdio.h&gt;</code> and <code>&lt;stdlib.h&gt;</code>, we can run the code under Valgrind to see what's wrong:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>valgrind -q --leak-check=full ./52626203   \n==1409== Invalid write of size 8\n==1409==    at 0x10919F: update (52626203.c:16)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409==  Address 0x4a39050 is 0 bytes after a block of size 16 alloc'd\n==1409==    at 0x48357BF: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1409==    by 0x10915A: update (52626203.c:12)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409== \n==1409== Invalid write of size 8\n==1409==    at 0x1091B6: update (52626203.c:17)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409==  Address 0x4a39058 is 8 bytes after a block of size 16 alloc'd\n==1409==    at 0x48357BF: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1409==    by 0x10915A: update (52626203.c:12)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409== \n==1409== Invalid read of size 8\n==1409==    at 0x1091C6: update (52626203.c:19)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409==  Address 0x4a39058 is 8 bytes after a block of size 16 alloc'd\n==1409==    at 0x48357BF: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1409==    by 0x10915A: update (52626203.c:12)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409== \n5.000000 10.000000 4.000000\n==1409== Invalid read of size 8\n==1409==    at 0x109212: main (52626203.c:30)\n==1409==  Address 0x4a39058 is 8 bytes after a block of size 16 alloc'd\n==1409==    at 0x48357BF: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1409==    by 0x10915A: update (52626203.c:12)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409== \n5.000000 10.000000 4.000000\n==1409== 16 bytes in 1 blocks are definitely lost in loss record 1 of 1\n==1409==    at 0x48357BF: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1409==    by 0x10915A: update (52626203.c:12)\n==1409==    by 0x109209: main (52626203.c:28)\n==1409== \n</code></pre>\n\n<p>This shows us that it's the attempt to assign to <code>struct1-&gt;a[1][0]</code> that's at fault, suggesting that we allocated only enough space for <code>a[0]</code> and not also <code>a[1]</code>.</p>\n\n<p>That takes us right to the allocation line, where we see we missed a dereference in the argument to <code>sizeof</code>.  It should be</p>\n\n<pre><code>struct1-&gt;a = malloc(2 * sizeof *struct1-&gt;a);\n//                             ^\n</code></pre>\n\n<p>We were allocating space for two pointers to double array, rather than enough for two double arrays of two elements each.</p>\n\n<p>BTW, in real code, don't forget to check the pointer returned from <code>malloc()</code> before you try to use it, and to <code>free()</code> it when you're done.</p>\n"}], "owner": {"reputation": 5, "user_id": 7838634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0533ea0f786129e195f85a5ca25f30?s=128&d=identicon&r=PG&f=1", "display_name": "ajcoelho", "link": "https://stackoverflow.com/users/7838634/ajcoelho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 52626427, "answer_count": 2, "score": 0, "last_activity_date": 1538577283, "creation_date": 1538566646, "last_edit_date": 1538567828, "question_id": 52626203, "link": "https://stackoverflow.com/questions/52626203/cannot-store-values-in-matrix-using-c", "title": "Cannot store values in matrix using c", "body": "<p>Here's my code:</p>\n\n<pre><code>typedef struct{\n\ndouble (*a)[2];\n} my_struct;\n\n\nvoid update(my_struct* struct1){\n\nstruct1 -&gt; a = malloc ( 2*sizeof(struct1-&gt;a) );\n\nstruct1 -&gt; a[0][0] = 5.0;\nstruct1 -&gt; a[0][1] = 10.0;\nstruct1 -&gt; a[1][0] = 3.0;\nstruct1 -&gt; a[1][1] = 4.0;\n\nprintf(\"%f %f %f\\n\", struct1-&gt;a[0][0], struct1-&gt;a[0][1], struct1-&gt;a[1][1]);\n\n}\n\n\nint main(){\n\nmy_struct struct1;\n\nupdate(&amp;struct1);\n\nprintf(\"%f %f %f\\n\", struct1.a[0][0], struct1.a[0][1], struct1.a[1][1]);\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>So basically what I want to do is to have a structure with a matrix (I really want to use this definition of matrix with [r][c] and thus the way I make the allocation).</p>\n\n<p>As you can see I have two printfs to see what's happening. </p>\n\n<p>In the command line what is printed is the following:</p>\n\n<pre><code>5.000000 10.000000 3.000000\n5.000000 10.000000 0.000000\n</code></pre>\n\n<p>So why one of the values printed in main() is zero???</p>\n"}, {"tags": ["c++", "c", "winapi", "typedef"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1538565125, "post_id": 52625739, "comment_id": 92184708, "body": "It&#39;s their naming convention as WinAPI are C interfaces."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1538565173, "post_id": 52625739, "comment_id": 92184735, "body": "Related: <a href=\"https://stackoverflow.com/q/6669078/1606345\">stackoverflow.com/q/6669078/1606345</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1538565226, "post_id": 52625739, "comment_id": 92184762, "body": "@KeineLust - Looks more like a proper dupe to me"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1538566487, "post_id": 52625739, "comment_id": 92185487, "body": "The winapi was released in 1985, meant to run on a 16-bit 8088 processor with 256KB of RAM.  Ported to 32-bit and 64-bit operating systems with a variety of processor types over the years, a C program written in1985 is still pretty likely to compile and run today.  These typedefs made that possible."}], "owner": {"reputation": 135, "user_id": 9307341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1a282cc5d0295589a14d1b72274ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kordnak", "link": "https://stackoverflow.com/users/9307341/kordnak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "closed_date": 1538565232, "answer_count": 0, "score": 0, "last_activity_date": 1538565273, "creation_date": 1538564946, "question_id": 52625739, "link": "https://stackoverflow.com/questions/52625739/why-does-winapi-typedef-basic-datatypes", "closed_reason": "Duplicate", "title": "Why does WinApi typedef basic datatypes?", "body": "<p>So I was reading through some WinApi files and found these:</p>\n\n<pre><code>#define CALLBACK    __stdcall\n#define WINAPI      __stdcall\n#define WINAPIV     __cdecl\n#define APIENTRY    WINAPI\n#define APIPRIVATE  __stdcall\n#define PASCAL      __stdcall\n\n#define FAR                 far\n#define NEAR                near\n\ntypedef float               FLOAT;\ntypedef int                 INT;\ntypedef unsigned int        UINT;\n\n#define VOID void\ntypedef char CHAR;\ntypedef short SHORT;\ntypedef long LONG;\n</code></pre>\n\n<p>I also found this on Gdiplus' files:</p>\n\n<pre><code>typedef float REAL;\n</code></pre>\n\n<p>Why do libraries do this?\nWhy do they want to typedef the most basic things with a new name of just the same but in all caps?\nWhy do they define the same things multiple times?\nSeems really useless to me and just more confusing and annoying.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1538565445, "creation_date": 1538565445, "answer_id": 52625877, "question_id": 52625724, "link": "https://stackoverflow.com/questions/52625724/how-can-i-use-timer-counter2-in-atemga128/52625877#52625877", "title": "How can I use Timer/Counter2 in Atemga128...?", "body": "<p>First of all you switch the led in the interrupt routine . I think your intention is to toggle it. </p>\n\n<p>Secondly the counter has to be volatile.</p>\n"}], "owner": {"reputation": 21, "user_id": 10450857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vagq08qOKw0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWdgSNNXGauA7bqfNmndJcq9gs_6A/mo/photo.jpg?sz=128", "display_name": "\ub0a8\uad00\uc6b0", "link": "https://stackoverflow.com/users/10450857/%eb%82%a8%ea%b4%80%ec%9a%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538565445, "creation_date": 1538564907, "question_id": 52625724, "link": "https://stackoverflow.com/questions/52625724/how-can-i-use-timer-counter2-in-atemga128", "title": "How can I use Timer/Counter2 in Atemga128...?", "body": "<p>I hava a trouble with using Timer/Counter 02\nI use Atmega128 8bit Proccessor and It has 16MHz crystal.\nI know how to use Timer00, but I can't use Timer02</p>\n\n<p>I learned that timer 00 and 02 are so similar.</p>\n\n<p>below, There is my short code..\nPlease see the code.. I need your help..</p>\n\n<p>thanks</p>\n\n<pre><code>#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#define F_CPU 16000000UL\n#include &lt;avr/delay.h&gt;\n\n#define FALSE 0\n#define TRUE 1\n\n/*COUNT VARIABLE, SWITCH VARIABLE*/\nunsigned int cnt_LED= 0; //LED TIMER0 COUNT \nunsigned int cnt_FND= 0; // FND TIMER2 COUNT\nunsigned short FND_sw=0;\n/********************************/\n\n\n/*Function List*/\nvoid LED();\nvoid FND_TURN_ON();\n/***************/\n\n\n\n/**** LED TIMER2 ****/\nISR(TIMER2_OVF_vect) // 0.002*1500= 3s\n{\n    TCNT2 = 0x82;\n    if(++cnt_LED ==1500) {\n       PORTA = 0x00;\n       cnt_LED = 0;\n    }\n}\n/*******************/\n\nint main()\n{\n    sei();\n    LED();\n    while(1)\n    {\n\n    }\n\n}\n    void LED()\n    {\n        /*LED Register*/\n        DDRA = 0xff;\n        TCCR2 = 0x06; //B 0000 0101\n        TCNT2 = 0x82;\n\n        /*************/\n\n    PORTA = 0xff; //led on\n        TIMSK = 0x40;\n\n }\n</code></pre>\n"}, {"tags": ["javascript", "c", "react-native", "matrix"], "comments": [{"owner": {"reputation": 872, "user_id": 7317402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q2t3A1CPNnk/AAAAAAAAAAI/AAAAAAAABNc/cs6gGm0Fj1k/photo.jpg?sz=128", "display_name": "Aman Gupta", "link": "https://stackoverflow.com/users/7317402/aman-gupta"}, "edited": false, "score": 0, "creation_date": 1538602452, "post_id": 52625653, "comment_id": 92205172, "body": "what is the expected output ?"}, {"owner": {"reputation": 241, "user_id": 8668276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614bcae167dbf870d3f83191c81a562d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishu Bhardwaj", "link": "https://stackoverflow.com/users/8668276/vishu-bhardwaj"}, "reply_to_user": {"reputation": 872, "user_id": 7317402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q2t3A1CPNnk/AAAAAAAAAAI/AAAAAAAABNc/cs6gGm0Fj1k/photo.jpg?sz=128", "display_name": "Aman Gupta", "link": "https://stackoverflow.com/users/7317402/aman-gupta"}, "edited": false, "score": 0, "creation_date": 1538628324, "post_id": 52625653, "comment_id": 92210857, "body": "Expected output is : [[3, 3, 9], [undefined, 5, 5], [7, 7, undefined]];"}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 8668276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614bcae167dbf870d3f83191c81a562d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishu Bhardwaj", "link": "https://stackoverflow.com/users/8668276/vishu-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1538566338, "post_id": 52625987, "comment_id": 92185409, "body": "I have days on x axis and events on y axis. I don&#39;t require 3 dimension matrix. Please help with two dimensional matrix."}, {"owner": {"reputation": 35, "user_id": 9055744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GzWtC.jpg?s=128&g=1", "display_name": "MJ007", "link": "https://stackoverflow.com/users/9055744/mj007"}, "reply_to_user": {"reputation": 241, "user_id": 8668276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614bcae167dbf870d3f83191c81a562d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishu Bhardwaj", "link": "https://stackoverflow.com/users/8668276/vishu-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1538566620, "post_id": 52625987, "comment_id": 92185547, "body": "And on z-axis you can add events.. Its easy to handle... If you want difficult method, then reply back."}, {"owner": {"reputation": 241, "user_id": 8668276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614bcae167dbf870d3f83191c81a562d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishu Bhardwaj", "link": "https://stackoverflow.com/users/8668276/vishu-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1538569686, "post_id": 52625987, "comment_id": 92187332, "body": "Events is on y axis (not on z axis). Please check any solution for 2d matrix."}], "tags": [], "owner": {"reputation": 35, "user_id": 9055744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GzWtC.jpg?s=128&g=1", "display_name": "MJ007", "link": "https://stackoverflow.com/users/9055744/mj007"}, "is_accepted": false, "score": 0, "last_activity_date": 1538565848, "creation_date": 1538565848, "answer_id": 52625987, "question_id": 52625653, "link": "https://stackoverflow.com/questions/52625653/distribute-events-on-multiple-dates/52625987#52625987", "title": "Distribute events on multiple dates", "body": "<p>Have you tried with 3 - Dimensional Array ?</p>\n"}, {"tags": [], "owner": {"reputation": 872, "user_id": 7317402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q2t3A1CPNnk/AAAAAAAAAAI/AAAAAAAABNc/cs6gGm0Fj1k/photo.jpg?sz=128", "display_name": "Aman Gupta", "link": "https://stackoverflow.com/users/7317402/aman-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1538630695, "last_edit_date": 1538630695, "creation_date": 1538630282, "answer_id": 52639483, "question_id": 52625653, "link": "https://stackoverflow.com/questions/52625653/distribute-events-on-multiple-dates/52639483#52639483", "title": "Distribute events on multiple dates", "body": "<pre><code>struct EventsModel {\n    var id:Int\n    var name: String\n    var start:Int\n    var end:Int\n}\nlet events = [EventsModel(id: 3, name: \"3\", start: 3, end: 4), EventsModel(id: 5, name: \"5\", start: 4, end: 5 ), EventsModel(id: 7, name: \"7\", start: 3, end: 4), EventsModel(id: 9, name: \"9\", start: 5, end: 9)]\n\nvar dates:[Int] = [3, 4, 5]\nvar finaloutput:[[String]] = []\ndates = dates.sorted()\nfor event in events {\n    var outEventArr:[String] = []\n    for date in dates {\n        if date &gt;= event.start &amp;&amp; date &lt;= event.end {\n            outEventArr.append(event.name)\n        } else {\n            outEventArr.append(\"undefined\")\n        }\n    }\n    finaloutput.append(outEventArr)\n}\nprint(finaloutput)\n</code></pre>\n\n<p><strong>OUTPUT:-</strong> [[\"3\", \"3\", \"undefined\"], [\"undefined\", \"5\", \"5\"], [\"7\", \"7\", \"undefined\"], [\"undefined\", \"undefined\", \"9\"]]</p>\n\n<p>PS:- Pardon me for writing code in swift.</p>\n"}], "owner": {"reputation": 241, "user_id": 8668276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614bcae167dbf870d3f83191c81a562d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishu Bhardwaj", "link": "https://stackoverflow.com/users/8668276/vishu-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 52639483, "answer_count": 2, "score": 2, "last_activity_date": 1538630695, "creation_date": 1538564657, "last_edit_date": 1592644375, "question_id": 52625653, "link": "https://stackoverflow.com/questions/52625653/distribute-events-on-multiple-dates", "title": "Distribute events on multiple dates", "body": "<p>Hello I have a calendar view(3 day view) and I have to display multiple day events on 3 days view. I am unable to generate the matrix of events</p>\n<pre><code>3/10/18 | 4/10/18 | 5/10/18\n3.......|3........|9.......\n........|5........|5.......\n7.......|7........|........\n</code></pre>\n<p>3...., 5...., 9.... and 7.... are multiple date events that are layered out in a 3 by 3 matrix.</p>\n<p>a general event structure is like this</p>\n<pre><code>{ id: 123, name: &quot;3&quot;, startTimestamp: 1538524800 endTimestamp: 1538611200 }\n</code></pre>\n<p>I have tried : -</p>\n<ol>\n<li><p>Looping over date and for each date find events that are in that date.</p>\n</li>\n<li><p>Finding matrix of each date and events</p>\n<p>But I am unable to align the events in the dates like 3 events is aligned at [0][0] and [0][1] and 5 is aligned at [1][1] and [1][2]</p>\n</li>\n</ol>\n<p>also I am having problem in adding 9 to empty space in [0][2] I am taking index of each column and I am left with 9 at [2][2] the space is empty.</p>\n<p>This is my current snippet.</p>\n<pre><code>let events = [{ id: 3, name: &quot;3&quot;, start: 3, end: 4}, { id: 5, name: &quot;5&quot;, start: 4, end: 5}, { id: 7, name: &quot;7&quot;, start: 3, end: 4}, { id: 9, name: &quot;9&quot;, start: 5, end: 9}];\n\nlet dates = [3, 4, 5];\n\nfunction abc1 () {\n let result = [\n  [\n   undefined, undefined, undefined\n  ], [\n   undefined, undefined, undefined\n  ], [\n   undefined, undefined, undefined\n  ]\n ];\n for (let i=0; i&lt;dates.length; i++) {\n  let date = dates[i];\n  let index = 0;\n  for (let j=0; j&lt;events.length; j++) {\n   let event = events[j];\n   if (event.start&lt;= date &amp;&amp; date &lt;= event.end) {\n    result[index][i] = event.id;\n    index ++;\n   }\n  }\n }\n console.log(&quot;Result &quot;, result);\n};\n\nResult  [[3, 3, 5], [7, 5, 9], [undefined, 7, undefined]]\n</code></pre>\n"}, {"tags": ["c", "unions", "logarithm"], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 2, "last_activity_date": 1538564340, "creation_date": 1538564340, "answer_id": 52625565, "question_id": 52625441, "link": "https://stackoverflow.com/questions/52625441/calculating-log2-with-unions/52625565#52625565", "title": "Calculating log2, with unions", "body": "<p>Your <code>float</code> and <code>int</code> share the same memory location. So the bytes occupied by the <code>float</code> are the same as the bytes of the <code>int</code>. But they mean something completelly different as the binary format of float is different than the int. So of you assign the float value it will change the int but the meaning of it will be completely different.</p>\n"}, {"comments": [{"owner": {"reputation": 88, "user_id": 10326194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D8f5X1NNCm4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPptJZKjYykWk2xCvnDCYYVKIWTWw/mo/photo.jpg?sz=128", "display_name": "NewUser", "link": "https://stackoverflow.com/users/10326194/newuser"}, "edited": false, "score": 1, "creation_date": 1538565353, "post_id": 52625566, "comment_id": 92184836, "body": "Thank you very much for the clear explanation. There is actually a problem which to accept. I will upvote 2 and accept the last."}, {"owner": {"reputation": 1057, "user_id": 2675156, "user_type": "registered", "profile_image": "https://graph.facebook.com/834953420/picture?type=large", "display_name": "teroi", "link": "https://stackoverflow.com/users/2675156/teroi"}, "reply_to_user": {"reputation": 88, "user_id": 10326194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D8f5X1NNCm4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPptJZKjYykWk2xCvnDCYYVKIWTWw/mo/photo.jpg?sz=128", "display_name": "NewUser", "link": "https://stackoverflow.com/users/10326194/newuser"}, "edited": false, "score": 1, "creation_date": 1538565505, "post_id": 52625566, "comment_id": 92184915, "body": "@NewUser: Thank you! Regarding unions, there is a fine question which has all kinds of neat tricks in the answers section, that are union related: <a href=\"https://stackoverflow.com/questions/4788965/when-would-anyone-use-a-union-is-it-a-remnant-from-the-c-only-days\" title=\"when would anyone use a union is it a remnant from the c only days\">stackoverflow.com/questions/4788965/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 3, "last_activity_date": 1538564341, "creation_date": 1538564341, "answer_id": 52625566, "question_id": 52625441, "link": "https://stackoverflow.com/questions/52625441/calculating-log2-with-unions/52625566#52625566", "title": "Calculating log2, with unions", "body": "<p>Unions is something that comes from the time when memory was expensive. They are used to save memory.</p>\n\n<p>When you declare a union, it will be large enough to hold the biggest member. So in this case, the size of <code>vx</code> will be <code>max(sizeof(f), sizeof(i))</code>.</p>\n\n<p>So when you use <code>vx = {x}</code>, the value of <code>x</code> will be put in the memory that has been reserved for <code>vx</code>. When you are using <code>vx.f</code>, then whatever is in that memory will be interpreted as a <code>float</code>, but when you are using <code>vx.i</code> will instead be interpreted as an <code>unsigned integer</code>, but the raw binary data is the same.</p>\n"}, {"comments": [{"owner": {"reputation": 88, "user_id": 10326194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D8f5X1NNCm4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPptJZKjYykWk2xCvnDCYYVKIWTWw/mo/photo.jpg?sz=128", "display_name": "NewUser", "link": "https://stackoverflow.com/users/10326194/newuser"}, "edited": false, "score": 1, "creation_date": 1538565346, "post_id": 52625567, "comment_id": 92184833, "body": "Thank you very much for the clear explanation. There is actually a problem which to accept. I will upvote 2 and accept the last."}], "tags": [], "owner": {"reputation": 1057, "user_id": 2675156, "user_type": "registered", "profile_image": "https://graph.facebook.com/834953420/picture?type=large", "display_name": "teroi", "link": "https://stackoverflow.com/users/2675156/teroi"}, "is_accepted": false, "score": 3, "last_activity_date": 1538564342, "creation_date": 1538564342, "answer_id": 52625567, "question_id": 52625441, "link": "https://stackoverflow.com/questions/52625441/calculating-log2-with-unions/52625567#52625567", "title": "Calculating log2, with unions", "body": "<p>union keyword basically means that float f and unsigned int i share the same memory.\ninitializing the union member f and then reading i is basically implementation defined. </p>\n\n<p>What happens is that you get the binary representation of the float variable. The clever coder then uses that binary representation and scales the value so that you get log2 of the input value.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 5, "last_activity_date": 1538565354, "creation_date": 1538565354, "answer_id": 52625848, "question_id": 52625441, "link": "https://stackoverflow.com/questions/52625441/calculating-log2-with-unions/52625848#52625848", "title": "Calculating log2, with unions", "body": "<blockquote>\n  <p>I can not understand how it uses something that is not initialized. </p>\n</blockquote>\n\n<p>Actually <code>vx.i</code> is initialized. A union will occupy the same memory location. Therefore <code>vx.i</code> is initialized at the same time that <code>vx.f</code> is initialized.</p>\n\n<blockquote>\n  <p>And what vx.i value is actually?</p>\n</blockquote>\n\n<p>To get the actual value of <code>vx.i</code> you need to understand how a float is stored in memory. Refer the excellent answer here <a href=\"https://stackoverflow.com/questions/7644699/how-are-floating-point-numbers-are-stored-in-memory]\">How are floating point numbers are stored in memory?</a></p>\n\n<p>From the answer linked,</p>\n\n<p>If <code>vx.f</code> is <code>1.0</code> then <code>vx.i</code> will be <code>3f800000</code> (in hex)</p>\n"}], "owner": {"reputation": 88, "user_id": 10326194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D8f5X1NNCm4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPptJZKjYykWk2xCvnDCYYVKIWTWw/mo/photo.jpg?sz=128", "display_name": "NewUser", "link": "https://stackoverflow.com/users/10326194/newuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 3, "accepted_answer_id": 52625565, "answer_count": 4, "score": 3, "last_activity_date": 1538565354, "creation_date": 1538563887, "last_edit_date": 1538564483, "question_id": 52625441, "link": "https://stackoverflow.com/questions/52625441/calculating-log2-with-unions", "title": "Calculating log2, with unions", "body": "<p>I found the following code which calculates <code>log2</code> of <code>float x</code>:</p>\n\n<pre><code>union { float f; unsigned int i; } vx = { x };\nfloat y = vx.i;\ny *= 1.0 / (1 &lt;&lt; 23);\ny = y - 126.94269504f;\nreturn y;\n</code></pre>\n\n<p>The <code>f</code> parameter of union is initialized to input <code>x</code> and then it uses <code>i</code>? I can not understand how it uses something that is not initialized. And what <code>vx.i</code> value is actually? Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1538563585, "post_id": 52625329, "comment_id": 92183853, "body": "Please show your code."}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 1, "creation_date": 1538563604, "post_id": 52625329, "comment_id": 92183865, "body": "What have you tried? Where is the code ?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1538563627, "post_id": 52625329, "comment_id": 92183875, "body": "Anyway, try <code>strstr</code> to find marker <code>mdn=</code> and then use <code>scanf &#47; %s</code> to read until the next white space."}, {"owner": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1538564587, "post_id": 52625329, "comment_id": 92184423, "body": "@StephanLechner yes it worked with strstr. Will paste the code."}], "answers": [{"comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1538564329, "post_id": 52625510, "comment_id": 92184276, "body": "Adding on: OP will need to use a long integer, as depicted in this answer. Perhaps that was the real problem since OP did not post code."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1538564384, "post_id": 52625510, "comment_id": 92184308, "body": "@nicomp Yes can be."}, {"owner": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "edited": false, "score": 0, "creation_date": 1538564987, "post_id": 52625510, "comment_id": 92184632, "body": "@kiranBiradar I am not getting correct value with this. I got 2147483647 as output"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "edited": false, "score": 0, "creation_date": 1538565123, "post_id": 52625510, "comment_id": 92184706, "body": "@Neha I&#39;m getting the exact output. Are you missing something? How are you reading/printing it? You are supposed to use <code>%ld</code>."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1538565245, "post_id": 52625510, "comment_id": 92184776, "body": "Check the result of  <code>sscanf</code>; otherwise acess to <code>val</code> may introduce undefined behaviour."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "edited": false, "score": 0, "creation_date": 1538565384, "post_id": 52625510, "comment_id": 92184853, "body": "@Neha What <code>sscanf</code> is returning? It is supposed to return <code>2</code>."}, {"owner": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "edited": false, "score": 0, "creation_date": 1538566233, "post_id": 52625510, "comment_id": 92185332, "body": "@kiranBiradar. Yes it is returning 2. I have copied your code as it is. Gettiing a constant output 2147483647."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "edited": false, "score": 0, "creation_date": 1538566964, "post_id": 52625510, "comment_id": 92185766, "body": "@Neha Maybe you are having overflow try declaring <code>val</code>  as <code>long long val</code> and use <code>%lld</code> to read and print."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1538895498, "last_edit_date": 1538895498, "creation_date": 1538564150, "answer_id": 52625510, "question_id": 52625329, "link": "https://stackoverflow.com/questions/52625329/extract-number-from-http-request/52625510#52625510", "title": "extract number from http request", "body": "<p>You can simply use <code>sscanf</code> like below.</p>\n\n<pre><code>char* line = \"GET /getUIKVal?mdn=9860436150 HTTP/1.1\";\nlong long val ;\n\nint ret = sscanf(line, \"%*[^=]=%lld\",&amp;val);\nprintf(\"%lld\\n\", val) ;\n</code></pre>\n\n<p>Where <code>%*[^=]=</code> will read and discard the string until it reaches <code>=</code> \nand <code>%ld</code> will read actual number in <code>val</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1538565147, "creation_date": 1538565147, "answer_id": 52625794, "question_id": 52625329, "link": "https://stackoverflow.com/questions/52625329/extract-number-from-http-request/52625794#52625794", "title": "extract number from http request", "body": "<p>You could use <code>strstr</code> to identify marker <code>mdn=</code> and then either scan a number or a string. Note that for scanning the number you don't need to copy the respective contents; The code below shows how:</p>\n\n<pre><code>const char* content = \"GET /getUIKVal?mdn=9860436150 HTTP/1.1\";\nconst char* startOfNumber = strstr(content,\"mdn=\");\nif (startOfNumber) {\n   startOfNumber += strlen(\"mdn=\");\n   long number;\n   if (scanf(\"%ld\",&amp;number)==1) {\n      printf(\"the number is... %ld\", number);\n   } else {\n      printf(\"no valid number after 'mdn='\");      \n   }\n} else {\n      printf(\"marker 'mdn=' not found.\");      \n}\n</code></pre>\n\n<p>I actually prefer the <code>strstr</code>-solution over a solution where <code>scanf</code> identifies both the marker and the number because it is hard to reason about syntax errors then. </p>\n"}], "owner": {"reputation": 23, "user_id": 4304793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ed0b5c2c805586eab5f24af91f04dd?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/4304793/neha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 52625510, "answer_count": 2, "score": 1, "last_activity_date": 1538895498, "creation_date": 1538563499, "question_id": 52625329, "link": "https://stackoverflow.com/questions/52625329/extract-number-from-http-request", "title": "extract number from http request", "body": "<p>I want to extract some number from HTTP Get requests in C.\nfor example if my HTTP request is like:</p>\n\n<pre><code>GET /getUIKVal?mdn=9860436150 HTTP/1.1\nHost: api.end.point\n</code></pre>\n\n<p>I want number 9860436150 to be printed as output.\nI have already tried with sscanf() and atoi()</p>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 0, "creation_date": 1538563225, "post_id": 52625172, "comment_id": 92183648, "body": "Please edit your questionn with more information, including the exact output of the program"}], "answers": [{"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1538567655, "post_id": 52625235, "comment_id": 92186134, "body": "<code>while(temp-&gt;priority &lt;= newnode-&gt;priority ){             temp=temp-&gt;next;         }</code>This could result in a NULL pointer dereference at the end of the list."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 2, "last_activity_date": 1538567688, "last_edit_date": 1538567688, "creation_date": 1538563188, "answer_id": 52625235, "question_id": 52625172, "link": "https://stackoverflow.com/questions/52625172/pointer-is-not-modifying-in-insert-in-c/52625235#52625235", "title": "Pointer is not modifying in insert in C", "body": "<p><code>head</code> in <code>insert</code> is local to <code>insert</code> function, any modification to it will not effect the <code>head</code> in main and will be destroyed once control exits <code>insert</code> function.</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>You need to pass the pointer of <code>head</code> in <code>main</code> to <code>insert</code>.</p>\n\n<p>Hence your insert will become like below.</p>\n\n<pre><code> void insert(struct node **head,int data,int priority){\n\n    struct node* newnode=getnewnode(data,priority);\n    if(*head==NULL){\n        *head=newnode;\n        printf(\"head in insert is %d\",*head);\n        return;\n    }\n\n    if((*head)-&gt;priority &gt; newnode-&gt;priority){\n        newnode-&gt;next=*head;\n        *head=newnode;\n        return;\n    }\n    if((*head)-&gt;priority &lt;= newnode-&gt;priority ){\n        struct node* temp=*head;\n        while(temp-&gt;priority &lt;= newnode-&gt;priority &amp;&amp; temp-&gt;next != NULL){\n            temp=temp-&gt;next;\n        }\n        newnode-&gt;next=temp-&gt;next;\n        temp-&gt;next=newnode;\n        return;\n    }\n}\n</code></pre>\n\n<p>and you call <code>insert</code> from <code>main</code> as below.</p>\n\n<pre><code>insert(&amp;head,3,5);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538607636, "post_id": 52626660, "comment_id": 92206617, "body": "Or, again avoiding empty loop bodies: <code>while (*head != NULL &amp;&amp; (*head)-&gt;priority &lt;= newnode-&gt;priority) { head = &amp;(*head)-&gt;next; }</code> \u2014 which also avoids a break."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538607973, "post_id": 52626660, "comment_id": 92206696, "body": "Anything goes... It is a matter of style. Personally,I prefer to keep the <i>loop machinery</i>  <code>(init;test;increment)</code> on one line. The rest (<i>business logic</i>)  can be placed into the loop body."}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 3, "last_activity_date": 1538572040, "last_edit_date": 1538572040, "creation_date": 1538568290, "answer_id": 52626660, "question_id": 52625172, "link": "https://stackoverflow.com/questions/52625172/pointer-is-not-modifying-in-insert-in-c/52626660#52626660", "title": "Pointer is not modifying in insert in C", "body": "<p>Super-simplified version without any <code>if()</code> statements:</p>\n\n<hr>\n\n<pre><code>void insert(struct node **head, int data, int priority){\n\n    struct node *newnode = getnewnode(data, priority);\n\n    for( ; *head &amp;&amp; (*head)-&gt;priority &lt;= newnode-&gt;priority; head = &amp;(*head)-&gt;next)\n        {;}\n\n    newnode-&gt;next = *head;\n    *head = newnode;\n\n    return;\n\n}\n</code></pre>\n\n<hr>\n\n<p>... if you don't like empty loops, you could add a <code>if(...) break;</code>:</p>\n\n<hr>\n\n<pre><code>void insert(struct node **head, int data, int priority){\n\n    struct node *newnode = getnewnode(data, priority);\n\n    for( ; *head ; head = &amp;(*head)-&gt;next) {\n        if( (*head)-&gt;priority &gt; newnode-&gt;priority) break;\n        }\n\n    newnode-&gt;next = *head;\n    *head = newnode;\n\n    return;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 52625235, "answer_count": 2, "score": -1, "last_activity_date": 1560944447, "creation_date": 1538562967, "last_edit_date": 1560944447, "question_id": 52625172, "link": "https://stackoverflow.com/questions/52625172/pointer-is-not-modifying-in-insert-in-c", "title": "Pointer is not modifying in insert in C", "body": "<p>Program for priority queue, I have doubt in pointer, I am passing head to insert but its not modifying in insert, as you can see I am printing the head </p>\n\n<ul>\n<li>in insert and main </li>\n<li>in insert it is printing something non zero</li>\n<li>and in head it is zero</li>\n</ul>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    struct node{\n        int data;\n        int priority;\n        struct node* next;\n    };\n    struct node* getnewnode(int data,int priority){\n        struct node* newnode=malloc(sizeof(struct node));\n        newnode-&gt;data=data;\n        newnode-&gt;next=NULL;\n        newnode-&gt;priority=priority;\n        return newnode;\n    }\n    void insert(struct node* head,int data,int priority){\n\n        struct node* newnode=getnewnode(data,priority);\n        if(head==NULL){\n            head=newnode;\n            printf(\"head in insert is %d\",head);\n            return;\n        }\n\n        if(head-&gt;priority &gt; newnode-&gt;priority){\n            newnode-&gt;next=head;\n            head=newnode;\n            return;\n        }\n        if(head-&gt;priority &lt;= newnode-&gt;priority ){\n            struct node* temp=head;\n            while(temp-&gt;priority &lt;= newnode-&gt;priority ){\n                temp=temp-&gt;next;\n            }\n            newnode-&gt;next=temp-&gt;next;\n            temp-&gt;next=newnode;\n            return;\n        }\n    }\n    int removee(struct node* head){\n        if(head==NULL)\n            return -1;\n        int temp=head-&gt;data;\n        head=head-&gt;next;\n        return temp;\n    }\n    int main(){\n        struct node* head=NULL;\n        insert(head,3,5);\n        printf(\"\\n head in main is %d\",head);\n\n    }\n</code></pre>\n"}, {"tags": ["c", "floating-point", "type-conversion", "double", "infinite-loop"], "comments": [{"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 0, "creation_date": 1538561405, "post_id": 52624626, "comment_id": 92182608, "body": "Real numbers are not normally represented with infinite precision, so should never, ever be compared for equality with an number from another source."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538564269, "post_id": 52624626, "comment_id": 92184236, "body": "Sidenote: you should indent your code."}], "owner": {"reputation": 11, "user_id": 10316627, "user_type": "registered", "profile_image": "https://graph.facebook.com/2072874306108295/picture?type=large", "display_name": "Ketan Lambat", "link": "https://stackoverflow.com/users/10316627/ketan-lambat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1538561354, "answer_count": 0, "score": 0, "last_activity_date": 1538565825, "creation_date": 1538561269, "last_edit_date": 1538565825, "question_id": 52624626, "link": "https://stackoverflow.com/questions/52624626/how-does-the-compiler-read-the-double-and-the-float-values", "closed_reason": "Duplicate", "title": "How does the compiler read the double and the float values?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\ndouble a=10.0;\nwhile((float)a!=10.5f)\n{\nprintf(\"This is a line\\n\");\na=a+0.1;\n}\n\ndouble i=2.0;\nwhile((float)i!=(float)(2.8+0.2))\n{\nprintf(\"%lf\\n\", i);\ni=i+0.2f;\n}\nreturn 0;\n}\n</code></pre>\n\n<p>In the above code, in the statements </p>\n\n<p>double a=10.0;\ndouble i=2.0;</p>\n\n<p>if I replace double with float, the printf goes into an infinite loop.</p>\n\n<p>While with the existing statements, it works as desired.</p>\n\n<p>What is the logic behind this?</p>\n"}, {"tags": ["c", "gtk2", "gdk"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1538561276, "post_id": 52624503, "comment_id": 92182526, "body": "Do you have development package for GTK+ (<code>libgtk2.0-dev</code>) installed correctly?"}, {"owner": {"reputation": 19100, "user_id": 21406, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ccdb8e0cb7c20822ce1cb3a0fd21b719?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/21406/luke"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1538562642, "post_id": 52624503, "comment_id": 92183321, "body": "Hmm. Interesting thought. I tried <code>sudo apt-get remove libgtk2.0-dev --purge</code> and then a reinstall <code>sudo apt-get install libgtk2.0-dev</code>. Same problem.."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1538563690, "post_id": 52624503, "comment_id": 92183906, "body": "I am not sure if I have idea about what I am going to say, but does that work if you do <code>guint key = GDK_z;</code> or <code>guint key = GDK_Z;</code>and then =&gt;&gt; <code>gtk_widget_add_accelerator(item, &quot;activate&quot;, group, key, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE); </code> ?"}, {"owner": {"reputation": 19100, "user_id": 21406, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ccdb8e0cb7c20822ce1cb3a0fd21b719?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/21406/luke"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1538564067, "post_id": 52624503, "comment_id": 92184137, "body": "Thanks for that. I tried both, same error. These are the reference docs for <code>gtk_widget_add_accelerator</code>, they speak of <code>accel_key</code> to be <code>GDK keyval of the accelerator</code> but I can&#39;t find any docs for those. I got the <code>GDK_Z</code> example from a GTK 2 book that was popular back in the day. But no reference in there to include anything specific. <a href=\"https://developer.gnome.org/gtk2/stable/GtkWidget.html#gtk-widget-add-accelerator\" rel=\"nofollow noreferrer\">developer.gnome.org/gtk2/stable/&hellip;</a>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1538564179, "post_id": 52624503, "comment_id": 92184194, "body": "The only thing which I found related to this , <a href=\"https://github.com/genesi/gtk2/blob/master/modules/input/imipa.c\" rel=\"nofollow noreferrer\">Is This</a>."}, {"owner": {"reputation": 19100, "user_id": 21406, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ccdb8e0cb7c20822ce1cb3a0fd21b719?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/21406/luke"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1538564370, "post_id": 52624503, "comment_id": 92184300, "body": "Thank you! And <code>#include &lt;gdk&#47;gdkkeysyms.h&gt;</code> it is. If you add it as an answer I will accept it as correct."}], "answers": [{"tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": true, "score": 1, "last_activity_date": 1538564708, "creation_date": 1538564708, "answer_id": 52625662, "question_id": 52624503, "link": "https://stackoverflow.com/questions/52624503/gtk-2-gtk-widget-add-accelerator-error-gdk-z-undeclared/52625662#52625662", "title": "GTK 2 gtk_widget_add_accelerator error: \u2018GDK_Z\u2019 undeclared", "body": "<p>You did not included <code>gdkkeysyms.h</code>:</p>\n\n<pre><code>#include &lt;gdk/gdkkeysyms.h&gt;\n</code></pre>\n\n<p>Which contains <code>GDK_Z</code> needed for your program.</p>\n"}], "owner": {"reputation": 19100, "user_id": 21406, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ccdb8e0cb7c20822ce1cb3a0fd21b719?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/21406/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "accepted_answer_id": 52625662, "answer_count": 1, "score": 1, "last_activity_date": 1538564708, "creation_date": 1538560831, "question_id": 52624503, "link": "https://stackoverflow.com/questions/52624503/gtk-2-gtk-widget-add-accelerator-error-gdk-z-undeclared", "title": "GTK 2 gtk_widget_add_accelerator error: \u2018GDK_Z\u2019 undeclared", "body": "<p>I'm trying to assign an accelerator to a GTK menu item:</p>\n\n<pre><code>group = gtk_accel_group_new();\n\nitem = gtk_image_menu_item_new_from_stock(GTK_STOCK_UNDO, group);\n\ngtk_widget_add_accelerator(item, \"activate\", group, GDK_Z, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE);\n</code></pre>\n\n<p>But when I compile I get the following error:</p>\n\n<pre><code>./src/main.c:171:55: error: \u2018GDK_Z\u2019 undeclared (first use in this function)\n   gtk_widget_add_accelerator(item, \"activate\", group, GDK_Z, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE);\n                                                       ^\n</code></pre>\n\n<p>This is the output from <code>pkg-config --cflags gtk+-2.0</code>:</p>\n\n<pre><code>-pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/gio-unix-2.0/ -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng12 -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/freetype2\n</code></pre>\n\n<p>How can I make the <code>GDK_Z</code> identifier available to my program?</p>\n"}, {"tags": ["c", "arrays", "string", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 2, "creation_date": 1538559095, "post_id": 52623906, "comment_id": 92181232, "body": "Have a glance at <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">Variable-length_array</a>"}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "edited": false, "score": 2, "creation_date": 1538559125, "post_id": 52623906, "comment_id": 92181248, "body": "If the length of the input string is unknown, then you need dynamic memory allocation is you want to allocate the minimum amount of memory. If you have a top bound size, then just define an array of that size."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 3, "creation_date": 1538559355, "post_id": 52623906, "comment_id": 92181372, "body": "Does it find the string or find the length? I.e. do you need to report the string&#39;s content at the end or just the length, and perhaps the line number? Perhaps with those 2 bits of info you could read through the file again to print the string."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 2, "creation_date": 1538559365, "post_id": 52623906, "comment_id": 92181380, "body": "@kiranBiradar It&#39;s not obvious  how to use VLAs to solve the described problem, since you can&#39;t re-allocate them. You&#39;d have to rewind the input and try again with a larger array, which is not possible in general."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1538559608, "post_id": 52623906, "comment_id": 92181526, "body": "@unwind I got your point, maybe it is possible if we declare the array local to the scope(loop) and use <code>strlen</code>?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1538561878, "post_id": 52623906, "comment_id": 92182882, "body": "If there is no requirement to store the string, then simply use <code>fgetc</code> to get char-by-char and count, and remember the largest count."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1538562354, "post_id": 52623906, "comment_id": 92183160, "body": "Create a tempfile and store the line in there. Open a pipe and use pipe&#39;s internal buffer as your string buffer."}, {"owner": {"reputation": 179, "user_id": 4752498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15f50cc41fe1cad71bb3fbd5cdff8e44?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/4752498/ivan"}, "edited": false, "score": 0, "creation_date": 1538565579, "post_id": 52623906, "comment_id": 92184962, "body": "Okay, okay, I&#39;ve just started so files and pipes are overkill   :)"}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1538563759, "post_id": 52625180, "comment_id": 92183945, "body": "I do not encourage giving complete answers for excercises where someone is clearly learning. Just give hints and let them find (learn!) the solution themselves."}, {"owner": {"reputation": 179, "user_id": 4752498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15f50cc41fe1cad71bb3fbd5cdff8e44?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/4752498/ivan"}, "edited": false, "score": 0, "creation_date": 1538565614, "post_id": 52625180, "comment_id": 92184975, "body": "Okay, I got the problem -- I&#39;m using Russian translation of the book. And it seems like this exercise was incorrectly translated (at least in my edition), I will definitely switch to the original book. Thanks for pointing this out, the correct formulation sounds manageable."}, {"owner": {"reputation": 494, "user_id": 5115471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwTkL.jpg?s=128&g=1", "display_name": "Robindar", "link": "https://stackoverflow.com/users/5115471/robindar"}, "edited": false, "score": 0, "creation_date": 1538565687, "post_id": 52625180, "comment_id": 92185019, "body": "I think the issue here was the problem statement, not the solving, and the misinterpretation of &quot;as much as possible&quot;. Since the comments were starting to discuss VLAs, pipes and stack-vs-heap allocation, which are all both off the point and beyond the scope of this exercise, I chose to give a simple answer that does not use nested loops, nor fails on lines of exactly MAXLINE characters, which might not be trivial at first sight and could easily be missed as no test cases are provided. Understanding answers is also learning, and OP seemed able to solve it on his own. I take you point though"}], "tags": [], "owner": {"reputation": 494, "user_id": 5115471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwTkL.jpg?s=128&g=1", "display_name": "Robindar", "link": "https://stackoverflow.com/users/5115471/robindar"}, "is_accepted": true, "score": 2, "last_activity_date": 1538562995, "creation_date": 1538562995, "answer_id": 52625180, "question_id": 52623906, "link": "https://stackoverflow.com/questions/52623906/the-longest-string/52625180#52625180", "title": "The longest string", "body": "<p>I'm assuming you are referring to exercise 1.16 on page 30.\nThe complete statement is</p>\n\n<blockquote>\n  <p><strong>Exercise 1-16.</strong> Revise the main routine of the longest-line program so it will\n  correctly print the length of arbitrarily long input lines, and as much as possible\n  of the text.</p>\n</blockquote>\n\n<p>It is impossible to return the whole string if its length is arbitrary, because you would have to store it, and that would require dynamic memory allocation. However, you can slightly modify the main routine so it will correctly compute the length of the string, and output \"as much as possible\" of the text, i.e. up to a fixed length.</p>\n\n<p>Here is one possible answer:</p>\n\n<pre><code>#define MAXLINE 1000 /* maximum input line size */\n\nmain() {\n    int buf_len; /* current buffer length (&lt;= MAXLINE) */\n    int len = 0; /* current full line length */\n    int max = 0; /* maximum length seen so far */\n    char buffer[MAXLINE];  /* current input line */\n    char line[MAXLINE];    /* prefix of longest-line candidate */\n    char longest[MAXLINE]; /* longest line saved here */\n\n    while ((buf_len = getline(buffer, MAXLINE)) &gt; 0) {\n        if (len == 0) /* this is the first chunk of the string */\n            copy(line, buffer);\n        len += buf_len;\n        if (buf_len &lt; MAXLINE || buffer[MAXLINE-2] == '\\n') {\n            /* the string was terminated */\n            if (len &gt; max) {\n                max = len;\n                copy(longest, line);\n            }\n            /* this line was fully processed */\n            /* now reset len to 0 and process the next string */\n            len = 0;\n        }\n    }\n    if (max &gt; 0)\n        printf(\"%s\", longest);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 4752498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15f50cc41fe1cad71bb3fbd5cdff8e44?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/4752498/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 52625180, "answer_count": 1, "score": 3, "last_activity_date": 1538562995, "creation_date": 1538558948, "question_id": 52623906, "link": "https://stackoverflow.com/questions/52623906/the-longest-string", "title": "The longest string", "body": "<p>I'm going through K&amp;R C programming language book and try to solve all the exercises.</p>\n\n<p>There is a sample program that finds the longest string in the input. It basically reads strings from input one by one and store the longest in the array with pre-defined length. In other words it assumes the upper bound on the length of the longest string.</p>\n\n<p>After this program there is an exercise that asks to change the program such that it does not assume the bound on the length. I have no idea how to achieve this without using dynamic memory allocation (which is discussed in the following chapters of the book).</p>\n\n<p>If I'm correct, arrays in C are defined during the compilation so their length is static unless we allocate memory dynamically.</p>\n"}, {"tags": ["javascript", "c", "emscripten", "webassembly"], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 11042887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e8600c046626371283fc3b11de028a?s=128&d=identicon&r=PG", "display_name": "MaxGraey", "link": "https://stackoverflow.com/users/11042887/maxgraey"}, "edited": false, "score": 1, "creation_date": 1568492614, "post_id": 57938763, "comment_id": 102293441, "body": "Question relate to C and emscripten)"}, {"owner": {"reputation": 291, "user_id": 11042887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e8600c046626371283fc3b11de028a?s=128&d=identicon&r=PG", "display_name": "MaxGraey", "link": "https://stackoverflow.com/users/11042887/maxgraey"}, "edited": false, "score": 0, "creation_date": 1568495437, "post_id": 57938763, "comment_id": 102293932, "body": "I guess this question is not actual anymore due its age"}, {"owner": {"reputation": 13343, "user_id": 1483977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XryCl.jpg?s=128&g=1", "display_name": "Michael Cole", "link": "https://stackoverflow.com/users/1483977/michael-cole"}, "reply_to_user": {"reputation": 291, "user_id": 11042887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e8600c046626371283fc3b11de028a?s=128&d=identicon&r=PG", "display_name": "MaxGraey", "link": "https://stackoverflow.com/users/11042887/maxgraey"}, "edited": false, "score": 0, "creation_date": 1568496074, "post_id": 57938763, "comment_id": 102294025, "body": "Search for that error brings this article.  This error is the same as when trying to use an example for the AssemblyScript loader with the WebAssembly browser instantiate.  The problem wasn&#39;t C/emscripten, it&#39;s not filling in the importObj correctly.  It would be super helpful if there were more examples to work from."}], "tags": [], "owner": {"reputation": 13343, "user_id": 1483977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XryCl.jpg?s=128&g=1", "display_name": "Michael Cole", "link": "https://stackoverflow.com/users/1483977/michael-cole"}, "is_accepted": false, "score": 1, "last_activity_date": 1568495194, "last_edit_date": 1568495194, "creation_date": 1568490513, "answer_id": 57938763, "question_id": 52623743, "link": "https://stackoverflow.com/questions/52623743/wasm-uncaught-in-promise-typeerror-import-0-module-env-error-module-is-n/57938763#57938763", "title": "Wasm: Uncaught (in promise) TypeError: Import #0 module=&quot;env&quot; error: module is not an object or function Promise.then (async) (anonymous) @ (index):9", "body": "<p>I think the challenge is this:  WebAssembly isn't fully baked yet.</p>\n\n<p>The examples show their loader from what looks like an NPM package.  In that package, importObj is optional.</p>\n\n<p>You and I are trying to use WebAssembly.instantiate() - I'm using a web worker.</p>\n\n<p>So we need to pass a more complete imports - specifically an env with an abort methoed.  Here's an example from <a href=\"https://webassembly.studio\" rel=\"nofollow noreferrer\">https://webassembly.studio</a> 's assemblyscript starter project:</p>\n\n<p>main.html</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n&lt;/head&gt;\n&lt;body style=\"background: #fff\"&gt;\n  &lt;span id=\"container\"&gt;&lt;/span&gt;\n  &lt;script src=\"./main.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>main.js</p>\n\n<pre><code>WebAssembly.instantiateStreaming(fetch(\"../out/main.wasm\"), {\n  main: {\n    sayHello() {\n      console.log(\"Hello from WebAssembly!\");\n    }\n  },\n  env: {\n    abort(_msg, _file, line, column) {\n      console.error(\"abort called at main.ts:\" + line + \":\" + column);\n    }\n  },\n}).then(result =&gt; {\n  const exports = result.instance.exports;\n  document.getElementById(\"container\").textContent = \"Result: \" + exports.add(19, 23);\n}).catch(console.error);\n</code></pre>\n\n<p>main.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>declare function sayHello(): void;\n\nsayHello();\n\nexport function add(x: i32, y: i32): i32 {\n  return x + y;\n}\n</code></pre>\n\n<p>Note the env.abort function in importObject</p>\n"}], "owner": {"reputation": 21, "user_id": 10449954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d7581f71834b92bd8514479c076c52?s=128&d=identicon&r=PG&f=1", "display_name": "NonBinary", "link": "https://stackoverflow.com/users/10449954/nonbinary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568495194, "creation_date": 1538558440, "last_edit_date": 1538572049, "question_id": 52623743, "link": "https://stackoverflow.com/questions/52623743/wasm-uncaught-in-promise-typeerror-import-0-module-env-error-module-is-n", "title": "Wasm: Uncaught (in promise) TypeError: Import #0 module=&quot;env&quot; error: module is not an object or function Promise.then (async) (anonymous) @ (index):9", "body": "<p>I'm new to emscripten and find it very hard... I have obligation to work on windows because i have to test .exe versions of my apps. I'm on windows 7.</p>\n\n<p>I can compile wasm but javascript cannot read it. Here's my code.</p>\n\n<p>C code:</p>\n\n<pre><code>char * HelloWorld ()\n{\n    return \"Hello World !\";\n}\n</code></pre>\n\n<p>Emscripten command-line:</p>\n\n<pre><code>emcc hello.c -O2 -s ONLY_MY_CODE=1 -s WASM=1 -s SIDE_MODULE=1 -s EXPORTED_FUNCTIONS=\"['_HelloWorld']\" -o hello.wasm\n</code></pre>\n\n<p>Wat result:</p>\n\n<pre><code>(module\n  (type $t0 (func (result i32)))\n  (type $t1 (func))\n  (import \"env\" \"memory\" (memory $env.memory 256))\n  (import \"env\" \"memoryBase\" (global $env.memoryBase i32))\n  (func $_HelloWorld (export \"_HelloWorld\") (type $t0) (result i32)\n    (get_global $env.memoryBase))\n  (func $__post_instantiate (export \"__post_instantiate\") (type $t1)\n    (set_global $g1\n      (i32.add\n        (get_global $env.memoryBase)\n        (i32.const 16)))\n    (set_global $g2\n      (i32.add\n        (get_global $g1)\n        (i32.const 5242880))))\n  (global $g1 (mut i32) (i32.const 0))\n  (global $g2 (mut i32) (i32.const 0))\n  (data (get_global $env.memoryBase) \"Hello World !\"))\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>importObject = {};\n\nfetch('hello.wasm').then(response =&gt;\n  response.arrayBuffer()\n).then(bytes =&gt;\n  WebAssembly.instantiate(bytes, importObject)\n).then(results =&gt; {\n  console.log(\"loaded\");\n});\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>Uncaught (in promise) TypeError: Import #0 module=\"env\" error: module is not an object or function\nPromise.then (async)\n(anonymous) @ (index):9\n</code></pre>\n\n<p>Can you tell me what's wrong in my code ?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1538558322, "post_id": 52623650, "comment_id": 92180772, "body": "Search for &quot;C struct padding alignment&quot;. (Your code is not portable btw.)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1538558501, "post_id": 52623650, "comment_id": 92180879, "body": "Note the casting and pointer arithmetic. <code>(char*)pa + 4</code> is adding the size of 4 chars. <code>(int*)pa + 2</code> is adding the size of 2 ints."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1538558834, "last_edit_date": 1538558834, "creation_date": 1538558321, "answer_id": 52623696, "question_id": 52623650, "link": "https://stackoverflow.com/questions/52623650/accessing-structure-members-using-base-address/52623696#52623696", "title": "Accessing structure members using base address", "body": "<p>That's because of the padding bytes added to the structure. Three padded bytes will be added after <code>char second;</code>, this is because the <code>char</code> is followed by an <code>int</code> (member with larger alignment) so padding bytes will be inserted to make the alignment multiple of the alignment of larger member. </p>\n"}, {"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 0, "last_activity_date": 1538558809, "last_edit_date": 1538558809, "creation_date": 1538558467, "answer_id": 52623752, "question_id": 52623650, "link": "https://stackoverflow.com/questions/52623650/accessing-structure-members-using-base-address/52623752#52623752", "title": "Accessing structure members using base address", "body": "<p>It is because of <code>structure</code> padding.</p>\n\n<p>After padding your <code>structure</code> will look like below.</p>\n\n<pre><code>struct st\n{\n  int i;\n  char c1;\n  char padding[3]; // for alignment of j.\n  int j;\n  char c2; \n  char padding[3]; // for alignment of structure.\n};\n</code></pre>\n\n<p>Hence </p>\n\n<pre><code>first = *((int*)pa);\n  second = *((char*)pa + 4); /* offset = 4 bytes = sizeof(int) */\n  third = *((int*)pa + 2); /* offset = 8 bytes(pointer arithmetic) to point to int j*/\n  fourth = *((char*)pa + 12); /* offset = 12 bytes to point to char c2*/\n</code></pre>\n\n<blockquote>\n  <p>For more info on structure padding read\n  <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">Data_structure_alignment</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1538715175, "post_id": 52623771, "comment_id": 92247495, "body": "&quot;<i>This also means that the code is not portable</i>&quot; this is not was is commonly understood as being &quot;<i>not portable</i>&quot;. Did not DV, BTW."}], "tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": -1, "last_activity_date": 1538558976, "last_edit_date": 1538558976, "creation_date": 1538558527, "answer_id": 52623771, "question_id": 52623650, "link": "https://stackoverflow.com/questions/52623650/accessing-structure-members-using-base-address/52623771#52623771", "title": "Accessing structure members using base address", "body": "<p>When creating a struct, all variables occupy the same amount of space (32 bits), the remaining unused bits are padding. So even if you define a <code>char</code> in the struct, this will occupy 4 bytes.\nThis is due to the fact that your processor addresses data at 32 bits, even if afterwards less bits are used. The memory on the other side stores 1 byte for each address, but when data is fetched by the CPU, data will be adapted to the bus architecture (that depends on the processor).</p>\n\n<p>Also note that the offset depends on the pointer you are using. a <code>char*</code> in this case will increase by 1, while a <code>int*</code> by 4.</p>\n\n<p>This also means that the code is not portable, since, for example, <code>int</code> may not be defined of the same size on different architectures.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1538559016, "creation_date": 1538559016, "answer_id": 52623929, "question_id": 52623650, "link": "https://stackoverflow.com/questions/52623650/accessing-structure-members-using-base-address/52623929#52623929", "title": "Accessing structure members using base address", "body": "<p>As in another answers - <code>padding</code>.</p>\n\n<p>But some compilers allow you to pack your structures removing (in most cases) the padding.</p>\n\n<p>gcc:</p>\n\n<pre><code>struct __attribute__((packed)) st\n{\n....\n}\n</code></pre>\n\n<p>The code which access the packed structs may be less efficient and longer.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1538715544, "post_id": 52624307, "comment_id": 92247588, "body": "Why not use something else then the member <code>i</code> in your example? <code>i</code> as being the 1st member could very well &quot;<i>reliably</i>&quot; be accessed by doing <code>first = *(int*)pa;</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1538736135, "post_id": 52624307, "comment_id": 92257467, "body": "@alk - I just wanted to concisely show how to obtain the correct offset for any member, and how to use the offset correctly. It&#39;s also reliable to say real code will do for instance <code>pa-&gt;j</code> instead of mucking with offsets and casts."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1538560273, "creation_date": 1538560273, "answer_id": 52624307, "question_id": 52623650, "link": "https://stackoverflow.com/questions/52623650/accessing-structure-members-using-base-address/52624307#52624307", "title": "Accessing structure members using base address", "body": "<blockquote>\n  <p>How can I make above program generalized?</p>\n</blockquote>\n\n<p>The only way to make it work reliably is by not guessing at the offset. Use the standard <a href=\"https://en.cppreference.com/w/c/types/offsetof\" rel=\"nofollow noreferrer\">offsetof</a> macro, and always do the pointer arithmetic with a character pointer:</p>\n\n<pre><code>first = *(int*)((char*)pa + offsetof(struct st, i));\n</code></pre>\n\n<p>You don't have to name the field at the point you do the access, but you should definitely use the macro to compute the offest if you intend to pass it into your function.</p>\n"}], "owner": {"reputation": 525, "user_id": 1612078, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ee1650588ff87aa9599a7e0dd4423e76?s=128&d=identicon&r=PG", "display_name": "user1612078", "link": "https://stackoverflow.com/users/1612078/user1612078"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1538560273, "creation_date": 1538558160, "last_edit_date": 1538558841, "question_id": 52623650, "link": "https://stackoverflow.com/questions/52623650/accessing-structure-members-using-base-address", "title": "Accessing structure members using base address", "body": "<p>Can you please help explain why following program correctly prints the values of all the structure members?</p>\n\n<pre><code>struct st\n{\n  int i;\n  char c1;\n  int j;\n  char c2;\n};\n\nint main()\n{\n  struct st a = {5, 'i', 11, 'H'};\n  struct st * pa = &amp;a;\n\n  int first;\n  char second;\n  int third;\n  char fourth;\n\n  first = *((int*)pa);\n  second = *((char*)pa + 4); /* offset = 4 bytes = sizeof(int) */\n  third = *((int*)pa + 2); /* why (pa + 2) here? */\n  fourth = *((char*)pa + 12); /* why (pa + 12) here? */\n  printf (\"first = %d, second = %c, third = %d, fourth = %c\\n\", first, second, third, fourth);\n  return 0;\n}\n</code></pre>\n\n<p>Output: first = 5, second = i, third = 11, fourth = H </p>\n\n<p>How can I make above program generalized?</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1538555333, "post_id": 52622812, "comment_id": 92179184, "body": "Use strlcat. strcat runs to the first null character of the source operand."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1538555358, "creation_date": 1538555358, "answer_id": 52622838, "question_id": 52622812, "link": "https://stackoverflow.com/questions/52622812/strcat-appends-the-whole-structure-instead-of-one-element/52622838#52622838", "title": "Strcat appends the whole structure instead of one element", "body": "<p>I guess <code>gpsTime</code> is not properly terminated, i.e. it's not a valid C string. This will cause undefined behavior.</p>\n\n<p>If you expect it to be <code>\"083559\"</code> as shown, it cannot be <code>char gpsTime[6]</code> since that leaves no room for the terminator. It has to be <code>char gpsTime[7]</code> or more. This of course goes for all of the strings; a C string with <code>n</code> characters has to have <code>n + 1</code> <code>chars</code> worth of space since the final one must be <code>\\0</code> to terminate the string.</p>\n"}, {"tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": 1, "last_activity_date": 1538555443, "creation_date": 1538555443, "answer_id": 52622861, "question_id": 52622812, "link": "https://stackoverflow.com/questions/52622812/strcat-appends-the-whole-structure-instead-of-one-element/52622861#52622861", "title": "Strcat appends the whole structure instead of one element", "body": "<p><code>strcat</code> copies the string up to the <code>/0</code> termination character. Add the termination char and it should work.</p>\n\n<p><code>083559</code> is already 6 character, so you need to define <code>gpsTime</code> as <code>char gpsTime[7]</code> and add the <code>/0</code> termination character.</p>\n"}], "owner": {"reputation": 340, "user_id": 10341985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d242bfa7a0d328a2830bec3561a0c39b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman H", "link": "https://stackoverflow.com/users/10341985/iman-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 52622838, "answer_count": 2, "score": 0, "last_activity_date": 1538555443, "creation_date": 1538555247, "question_id": 52622812, "link": "https://stackoverflow.com/questions/52622812/strcat-appends-the-whole-structure-instead-of-one-element", "title": "Strcat appends the whole structure instead of one element", "body": "<p>I have a structure like this:</p>\n\n<pre><code>typedef struct {\nchar gpsTime[6];\nchar gpsStatus[1];\nchar gpsLat[10];\nchar gpsLong[10];\nchar gpsSpeed[5];\nchar gpsDate[6];\n} gpsData;\n</code></pre>\n\n<p>and also a string at which I would like to concatenate the elements of this structure:</p>\n\n<pre><code>#define MESSAGESIZE 100\n// Final message to be sent\nchar message[MESSAGESIZE]=\"$STARTOFMSG,23,\";\n</code></pre>\n\n<p>The problem is, when I use \"strcat\" function like this:</p>\n\n<pre><code>strcat(message,data.gpsTime);\n</code></pre>\n\n<p>I expect to have something like this:</p>\n\n<pre><code>\"$STARTOFMSG,23,083559\";\n</code></pre>\n\n<p>but the total elements of structure are concatenated, i.e.:</p>\n\n<pre><code>\"$STARTOFMSG,23,,083559A4717.1143700833.91520.004091202\u000e#@\";\n</code></pre>\n\n<p>I guess this is a problem with pointers. How should I solve this?</p>\n"}, {"tags": ["c", "segmentation-fault", "cs50", "vigenere"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1538555320, "post_id": 52622692, "comment_id": 92179178, "body": "There is no <code>&amp;&amp; isalpha(p[i])</code> code in your code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1538556210, "post_id": 52622692, "comment_id": 92179646, "body": "<code>isalpha(k)</code> is a syntax error anyway - passing a pointer where an <code>int</code> is expected. <i>The behavior of <code>isalpha</code> is undefined if <code>c</code> is not <code>EOF</code> or in the range <code>0</code> through <code>0xFF</code>, inclusive.</i>"}, {"owner": {"reputation": 11, "user_id": 4544935, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gqJ0_n7uPaM/AAAAAAAAAAI/AAAAAAAAABQ/-bN84BmofOs/photo.jpg?sz=128", "display_name": "Jayesh Singh", "link": "https://stackoverflow.com/users/4544935/jayesh-singh"}, "edited": false, "score": 0, "creation_date": 1538979095, "post_id": 52622692, "comment_id": 92318967, "body": "Thanks. I was able to fix the program with some research."}], "owner": {"reputation": 11, "user_id": 4544935, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gqJ0_n7uPaM/AAAAAAAAAAI/AAAAAAAAABQ/-bN84BmofOs/photo.jpg?sz=128", "display_name": "Jayesh Singh", "link": "https://stackoverflow.com/users/4544935/jayesh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545107864, "creation_date": 1538554676, "last_edit_date": 1538555156, "question_id": 52622692, "link": "https://stackoverflow.com/questions/52622692/pset2-vigenere-help-segmentation-fault", "title": "pset2 vigenere help (Segmentation Fault)", "body": "<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;cs50.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;ctype.h&gt;\n\nint main(int argc, string argv[])\n{\nstring k = argv[1];\nif (argc == 2 &amp;&amp; isalpha(k))\n{\nprintf(\"plaintext: \");\nstring p = get_string();\nprintf(\"ciphertext: \");\n\nfor(int i=0, j = 0, n = strlen(p); i&lt; n; i++, j++)\n{\n   if (isupper(p[i]) &amp;&amp; isupper(k[j % strlen(k)]))\n  {\n      printf(\"%c\", (p[i] + (k[j % strlen(k)] - 65)));\n  }\n   if (islower(p[i]) &amp;&amp; isupper(k[j % strlen(k)]))\n  {\n      printf(\"%c\", (p[i] + (k[j % strlen(k)] - 65)));\n  } \n   if (isupper(p[i]) &amp;&amp; islower(k[j % strlen(k)]))      \n  {\n      printf(\"%c\", (p[i] + (k[j % strlen(k)]  - 97)));\n  }\n   if (islower(p[i]) &amp;&amp; islower(k[j % strlen(k)]))\n  {\n      printf(\"%c\", (p[i] + (k[j % strlen(k)]  - 97)));\n  }\n  if (isspace(p[i]))\n  {\n    printf(\" \");\n  }\n  if (ispunct(p[i]))\n  {\n    printf(\"%c\", p[i]);\n  }\n\n}\nprintf(\"\\n\");\n}    \n   else\n    {\n     printf(\"Invalid Key\\n\");\n     return 1;\n     }\n }\n</code></pre>\n\n<p>This is my code for the vigenere cypher from the pset2 of CS50 course.</p>\n\n<p>I get a segmentation fault at run time. But it goes away if I omit the <code>&amp;&amp; isalpha(p[i])</code> in line 10, the program runs with no problem. What is causing this fault ?</p>\n"}, {"tags": ["c", "unix", "concurrency", "posix", "semaphore"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1538553324, "post_id": 52622198, "comment_id": 92178130, "body": "Maybe open is failing to find the <code>tmp&#47;Seq.txt</code> file. Do you need to add <code>&#47;</code> to the path? Something like this <code>fd = open(&quot;&#47;tmp&#47;Seq.txt&quot;, O_RDONLY);</code>. Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 187, "user_id": 1888722, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/164c4309f1b050f8d576d44b57c16d73?s=128&d=identicon&r=PG", "display_name": "Leruce", "link": "https://stackoverflow.com/users/1888722/leruce"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1538553763, "post_id": 52622198, "comment_id": 92178367, "body": "God... dangit. That work. Knew it was something simple. Thank. Odd tho, I would think error checking would catch that."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1538559071, "post_id": 52622198, "comment_id": 92181215, "body": "@Leruce the open() call did not return a negative value when it failed?"}, {"owner": {"reputation": 187, "user_id": 1888722, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/164c4309f1b050f8d576d44b57c16d73?s=128&d=identicon&r=PG", "display_name": "Leruce", "link": "https://stackoverflow.com/users/1888722/leruce"}, "edited": false, "score": 0, "creation_date": 1538559457, "post_id": 52622198, "comment_id": 92181432, "body": "nope, Skipped it and went into fd != -1 next and wrote anyway."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1538556080, "creation_date": 1538556080, "answer_id": 52623019, "question_id": 52622198, "link": "https://stackoverflow.com/questions/52622198/using-semaphores-does-not-work-when-opening-file-in-tmp-folder/52623019#52623019", "title": "Using Semaphores does not work when opening file in tmp folder", "body": "<p>It would be good for you to know how pathnames are resolved so that you can avoid these type of mistakes in the future.  </p>\n\n<p>From the online reference of <a href=\"http://man7.org/linux/man-pages/man7/path_resolution.7.html\" rel=\"nofollow noreferrer\">Path resolution</a> :  </p>\n\n<p>Relevant excerpts: </p>\n\n<blockquote>\n  <p>If the pathname starts with the '/' character, the starting lookup\n     directory is the root directory of the calling process.  (A process\n     inherits its root directory from its parent.  Usually this will be\n     the root directory of the file hierarchy.  </p>\n  \n  <p><strong>If the pathname does not start with the '/' character, the starting\n     lookup directory of the resolution process is the current working\n     directory of the process.</strong>  </p>\n  \n  <p>Pathnames starting with a '/' character are called absolute\n     pathnames.  Pathnames not starting with a '/' are called relative\n     pathnames.</p>\n</blockquote>\n\n<p>You can go through the whole page and it will be quite helpful.</p>\n\n<p>If you want to avoid using the absolute path name because of its length,<br>\nyou can also consider using <a href=\"http://www.tutorialspoint.com/unix_system_calls/openat.htm\" rel=\"nofollow noreferrer\"><code>openat()</code></a> instead of <code>open()</code>.</p>\n"}], "owner": {"reputation": 187, "user_id": 1888722, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/164c4309f1b050f8d576d44b57c16d73?s=128&d=identicon&r=PG", "display_name": "Leruce", "link": "https://stackoverflow.com/users/1888722/leruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538556080, "creation_date": 1538552830, "last_edit_date": 1538553143, "question_id": 52622198, "link": "https://stackoverflow.com/questions/52622198/using-semaphores-does-not-work-when-opening-file-in-tmp-folder", "title": "Using Semaphores does not work when opening file in tmp folder", "body": "<p>So, I'm trying to work with concurrency with multi processes(fork).</p>\n\n<p>I first ran the code in my local folder and the code works fine. However, when I tried setting the file into tmp folder in UNIX, my code does not block with a semaphore. It seems to me that when opening a file from tmp folder, each process will do all the work instead of splitting the work or in some rare case 1 process will do all the work and the other two process somehow never get access to the lock.</p>\n\n<p>Driving me insane, if it works for a local file, then there no reason why it would fail in the tmp folder.</p>\n\n<p>The basic goal is I have a set of children processes from <code>fork()</code>, only 1 process take control over the CS which is open file, read value from file, store value, close file, modify value, open file, write value file, close file, and that end the CS. I'm using <code>POSIX semaphore</code>. </p>\n\n<p>Is there any reason why tmp/file.txt would have issues with <code>sem_wait()/sem_post()</code>. Any pointer would be helpful.</p>\n\n<p>The only different between the two code is:</p>\n\n<pre><code>fd = open(\"Seq.txt\", O_RDONLY);\n</code></pre>\n\n<p>vs </p>\n\n<pre><code>fd = open(\"tmp/Seq.txt\", O_RDONLY);\n</code></pre>\n\n<p>Do I need to post a bigger code snippet?</p>\n"}, {"tags": ["c", "cmd", "makefile", "path-variables"], "comments": [{"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1538574944, "post_id": 52621768, "comment_id": 92190861, "body": "<a href=\"http://www.cygwin.com/\" rel=\"nofollow noreferrer\">cygwin.com</a> can be installed quickly and easily on Windows. It is not a new OS. In the setup, choose gcc to be installed."}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "edited": false, "score": 0, "creation_date": 1538553119, "post_id": 52622148, "comment_id": 92178041, "body": "Thanks, but now &#39;diff&#39; is not recognised."}, {"owner": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "edited": false, "score": 0, "creation_date": 1538553176, "post_id": 52622148, "comment_id": 92178067, "body": "I don&#39;t know if it would be possible to install a shell that can run the Makefile just fine? Or if it would be easier to rewrite the Makefile to work with the cmd, and just replace it with the original when sending it back to the teacher?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "edited": false, "score": 1, "creation_date": 1538553216, "post_id": 52622148, "comment_id": 92178085, "body": "@KeizerHarm <code>diff</code> is another standard unix tool that Windows doesn&#39;t come with. There&#39;s probably a <code>diff.exe</code> around somewhere, but the easiest way would be to just not use Windows."}, {"owner": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "edited": false, "score": 0, "creation_date": 1538554043, "post_id": 52622148, "comment_id": 92178509, "body": "Right, installing an entire new operating system on my already slow-running laptop probably won&#39;t fit with my priorities as well as the deadline for this assignment... I suppose that the best option would be for me to translate this Makefile into windows-speak then. Might teach me some commands too."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "edited": false, "score": 0, "creation_date": 1538554262, "post_id": 52622148, "comment_id": 92178629, "body": "@KeizerHarm By the way, where did you get <code>make</code> and <code>gcc</code> from?"}, {"owner": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "edited": false, "score": 0, "creation_date": 1538555293, "post_id": 52622148, "comment_id": 92179161, "body": "<code>make</code> I found here: <a href=\"http://gnuwin32.sourceforge.net/packages/make.htm\" rel=\"nofollow noreferrer\">gnuwin32.sourceforge.net/packages/make.htm</a> I can&#39;t recall deliberately installing <code>gcc</code>, it must have come with Mingw which I had installed earlier."}, {"owner": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538560761, "post_id": 52622148, "comment_id": 92182211, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181205/discussion-between-keizerharm-and-melpomene\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1538552670, "creation_date": 1538552670, "answer_id": 52622148, "question_id": 52621768, "link": "https://stackoverflow.com/questions/52621768/trying-to-run-a-makefile-from-the-command-line-is-not-recognised/52622148#52622148", "title": "Trying to run a Makefile from the command line - &#39;.&#39; is not recognised", "body": "<p>That Makefile was written for a unix-like shell, not cmd. In particular, cmd needs </p>\n\n<pre><code>.\\func_test1.out &gt; func_test1.youranswer\n</code></pre>\n\n<p>(i.e. <code>\\</code> backslash, not <code>/</code> slash).</p>\n"}], "owner": {"reputation": 300, "user_id": 7224432, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a11a64240afafc7dad72d5e4e0992247?s=128&d=identicon&r=PG&f=1", "display_name": "KeizerHarm", "link": "https://stackoverflow.com/users/7224432/keizerharm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 52622148, "answer_count": 1, "score": 1, "last_activity_date": 1538552670, "creation_date": 1538551269, "question_id": 52621768, "link": "https://stackoverflow.com/questions/52621768/trying-to-run-a-makefile-from-the-command-line-is-not-recognised", "title": "Trying to run a Makefile from the command line - &#39;.&#39; is not recognised", "body": "<p>I need some help with this. I am on Windows 10, and I am trying to run a Makefile to build a little C program. I did not write the Makefile, it is prescribed by the teacher to be used for testing (we cannot write our own tests for some reason).</p>\n\n<p>This is the Makefile, in full:</p>\n\n<pre><code>LIB=./lib/mylist.c\n\nTEST1=func_test1\nTEST2=func_test2\nTEST3=func_test3\nTEST4=func_test4\nTEST5=func_test5\n\nTEST1_EXE=$(TEST1).out\nTEST1_SRC=./tests/$(TEST1).c\nTEST2_EXE=func_test2.out\nTEST2_SRC=./tests/func_test2.c\nTEST3_EXE=func_test3.out\nTEST3_SRC=./tests/func_test3.c\nTEST4_EXE=func_test4.out\nTEST4_SRC=./tests/func_test4.c\nTEST5_EXE=func_test5.out\nTEST5_SRC=./tests/func_test5.c\n\nall:\n    gcc -std=c99 -o $(TEST1_EXE) $(TEST1_SRC) $(LIB) -I./include/\n    gcc -std=c99 -o $(TEST2_EXE) $(TEST2_SRC) $(LIB) -I./include/\n    gcc -std=c99 -o $(TEST3_EXE) $(TEST3_SRC) $(LIB) -I./include/\n    gcc -std=c99 -o $(TEST4_EXE) $(TEST4_SRC) $(LIB) -I./include/\n    gcc -std=c99 -o $(TEST5_EXE) $(TEST5_SRC) $(LIB) -I./include/\n\ntest:\n    ./$(TEST1_EXE) &gt; $(TEST1).youranswer\n    diff $(TEST1).youranswer $(TEST1).answer &gt;&gt; scoring_result\n    ./$(TEST2_EXE) &gt; $(TEST2).youranswer\n    diff $(TEST2).youranswer $(TEST2).answer &gt;&gt; scoring_result\n    ./$(TEST3_EXE) &gt; $(TEST3).youranswer\n    diff $(TEST3).youranswer $(TEST3).answer &gt;&gt; scoring_result\n    ./$(TEST4_EXE) &gt; $(TEST4).youranswer\n    diff $(TEST4).youranswer $(TEST4).answer &gt;&gt; scoring_result\n    ./$(TEST5_EXE) &gt; $(TEST5).youranswer\n    diff $(TEST5).youranswer $(TEST5).answer &gt;&gt; scoring_result\n</code></pre>\n\n<p>So, to be clear, I did not write it. This should be functional.</p>\n\n<p>Anyway, I open up the cmd, go to my directory, say \"make\" and it seems to be working. But when I write \"make test\", again on instructions from the teacher to make the tests run, I get the following response from the cmd:</p>\n\n<pre><code>./func_test1.out &gt; func_test1.youranswer\n'.' is not recognized as an internal or external command, operable program or batch file.\n</code></pre>\n\n<p>So it's probably a missing path variable (I've been having issues with those). But where in the world do I find the folder that the '.' command / lexeme is located?</p>\n"}, {"tags": ["c", "struct", "insert", "hashtable"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 2, "creation_date": 1538549191, "post_id": 52621141, "comment_id": 92176077, "body": "How have you initialized everything? Please provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1538549280, "post_id": 52621141, "comment_id": 92176119, "body": "Shouldn&#39;t you call a hash function somewhere? Otherwise this whole code is kind of meaningless."}, {"owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "edited": false, "score": 2, "creation_date": 1538550687, "post_id": 52621141, "comment_id": 92176804, "body": "<code>while</code> loop in <code>insert()</code> will be infinite when all the cells are filled (this does not apply to the question, but it is important)"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1538552485, "post_id": 52621141, "comment_id": 92177750, "body": "Perhaps some of <code>ht</code> was pointing to a location where the memory was interpreted to be pointing to the same place as your string is stored, however unlikely that may be. Either way, if you&#39;re changing <b>one</b> entry of <code>ht</code> and <b>four</b> of them are not <code>NULL</code>, then obviously something wasn&#39;t initialized properly."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1538552658, "post_id": 52621141, "comment_id": 92177844, "body": "Here&#39;s how I&#39;d do further debugging: add a print before <code>ht[hashIndex] = item;</code> to make 100% sure that only one of them is changed, and change the <code>printf(&quot;\\nThis is what&#39;s inside[...]</code> to also output <code>i</code>. The first one should have a value of 0 and it&#39;s going to be interesting to see what the other ones are."}], "answers": [{"comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1538551133, "post_id": 52621534, "comment_id": 92177028, "body": "You don&#39;t provide the  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the question and you add some fix in the code that is not shown as part of the question and you answer yourself. This does not make sense and not at all useful for further readers."}], "tags": [], "owner": {"reputation": 357, "user_id": 4794247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43ea7318d308e90846522cd2b65f1ceb?s=128&d=identicon&r=PG&f=1", "display_name": "RockAndaHardPlace", "link": "https://stackoverflow.com/users/4794247/rockandahardplace"}, "is_accepted": false, "score": -1, "last_activity_date": 1538550480, "creation_date": 1538550480, "answer_id": 52621534, "question_id": 52621141, "link": "https://stackoverflow.com/questions/52621141/c-inserting-element-into-an-array-of-structs/52621534#52621534", "title": "C: Inserting element into an array of structs", "body": "<p>Turns out that adding an <code>if</code> statement right before my <code>insert</code> method call, to check whether the particular key was already inserted earlier, solved the problem, though this may not be the most ideal fix: </p>\n\n<pre><code>if (!containsKey(trimwhitespace(stringcopy3))) {           \n\n      insert(ctr, trimwhitespace(stringcopy3));\n      printf(\"\\nAdding to ht: String: %s Integer: %d\\n\", trimwhitespace(stringcopy3), ctr);\n\n}\n</code></pre>\n\n<p>I'm still not sure why multiple instances of the key were being inserted in the first place, but this is a temporary solution. </p>\n"}], "owner": {"reputation": 357, "user_id": 4794247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43ea7318d308e90846522cd2b65f1ceb?s=128&d=identicon&r=PG&f=1", "display_name": "RockAndaHardPlace", "link": "https://stackoverflow.com/users/4794247/rockandahardplace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538550480, "creation_date": 1538548989, "question_id": 52621141, "link": "https://stackoverflow.com/questions/52621141/c-inserting-element-into-an-array-of-structs", "title": "C: Inserting element into an array of structs", "body": "<p>I have an array of structs where each array element is: </p>\n\n<pre><code>struct Item {\n  int code;\n  char * label;\n};\n</code></pre>\n\n<p>The array itself is a global variable: </p>\n\n<pre><code>struct Item * ht[SIZE];\n</code></pre>\n\n<p>This is how I currently insert an item into the array: </p>\n\n<pre><code>void insert(int toadd, char *toput) {\n\n   struct Item *item = (struct Item*) malloc(sizeof(struct Item));\n   item-&gt;label = toput;  \n   item-&gt;code = toadd;\n\n   int hashIndex = 0; \n\n   //move in array until an empty or deleted cell\n   while(ht[hashIndex] != NULL &amp;&amp; ht[hashIndex]-&gt;code != -1) {\n      //go to next cell\n      ++hashIndex;\n\n      //wrap around the table\n      hashIndex %= SIZE;\n   }\n\n   ht[hashIndex] = item;\n}\n</code></pre>\n\n<p>In another function, I call the insert method, followed with some printf statements to check what's going on: </p>\n\n<pre><code>insert(ctr, trimwhitespace(line2));\nprintf(\"\\nAdding to ht: String: %s Integer: %d\\n\", trimwhitespace(line2), ctr);\n\nfor (int i = 0; i &lt; SIZE; i++) {\n    if (ht[i] != NULL)\n    printf(\"\\nThis is what's inside ht: String: %s Integer: %d\\n\", ht[i] -&gt; label, ht[i] -&gt; code);            \n}\n</code></pre>\n\n<p>This is an example of the output: </p>\n\n<p>Adding to ht: String: four Integer: 6</p>\n\n<p>This is what's inside ht: String: four Integer: 0</p>\n\n<p>This is what's inside ht: String: four Integer: 4</p>\n\n<p>This is what's inside ht: String: four Integer: 5</p>\n\n<p>This is what's inside ht: String: four Integer: 6</p>\n\n<p>As you can see, the struct is being inserted multiple times, with different integer values. </p>\n\n<p>I think this is unlikely to be an issue with the loops that the <code>insert</code> call is in, as the first print statement would also be printed multiple times if the <code>insert</code> call was being made multiple times. But I may be wrong. </p>\n\n<p>How do I make sure that the <code>insert</code> method only inserts the struct once and not multiple times? \nOr does the problem lie elsewhere? </p>\n"}, {"tags": ["c", "linux", "codeblocks", "raspberry-pi3"], "comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1538556271, "post_id": 52621109, "comment_id": 92179677, "body": "<code>gx_priv_font</code> doesn&#39;t exist, the comment in the source code is wrong. Actual function that gets called is <code>gx_priv_font_init</code> (it <i>should</i> be called when you call <code>gx_graphics_init</code>, but something fails during the init. I&#39;ve added more details below. Are you sure that the path <code>.</code> is correct when calling <code>gx_graphics_init(&quot;.&quot;)</code>? Perhaps the resources are in a different folder? It&#39;s also strange that <code>assert(s == 0);</code> doesn&#39;t fail, because <code>gx_graphics_init</code> should return an error."}, {"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1538556924, "post_id": 52621109, "comment_id": 92179985, "body": "@Groo How can I check <code>.</code> path?"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538556355, "post_id": 52622740, "comment_id": 92179717, "body": "So why inited neccessery? What is mission of it?"}, {"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538558051, "post_id": 52622740, "comment_id": 92180613, "body": "I set breakpoint my code but error on program console this : GDB: Failed to set controlling terminal: Operation not permitted."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538572697, "post_id": 52622740, "comment_id": 92189356, "body": "@F.K\u0131lavuz: the function <code>gx_priv_initialise</code> initializes this graphics library and sets <code>inited</code> to <code>1</code> if everything goes ok. So, this is basically telling you that something went wrong. You should enable logging, go into the <a href=\"https://github.com/raspberrypi/firmware/blob/469f2d8eb88a4ef71f77d4912b8f15ba3a7dd57b/opt/vc/src/hello_pi/libs/vgfont/graphics_x_private.h#L47\" rel=\"nofollow noreferrer\"><code>graphics_x_private.h</code></a> file and remove those <code>if</code>s in the <code>GX_LOG</code> defines, i.e. just write <code>#define GX_LOG(format, arg...) printf( format &quot;\\n&quot;, ##arg)</code>."}, {"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538576209, "post_id": 52622740, "comment_id": 92191626, "body": "I did it but this time I gave Could not open font file &#39;Vera.ttf&#39; error."}, {"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538577428, "post_id": 52622740, "comment_id": 92192426, "body": "Vera.ttf path is <code>&#47;opt&#47;vc&#47;src&#47;hello_pi&#47;hello_font&#47;Vera.ttf</code>. I write this <code>gx_graphics_init(&quot;c:\\\\opt \\\\vc\\\\src\\\\hello_pi\\\\hello_font\\\\Vera.ttf&quot;)</code> but result is same. Also <code>Vera.ttf</code> file is empty."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538597062, "post_id": 52622740, "comment_id": 92202956, "body": "If this is linux then just write <code>&#47;opt&#47;vc&#47;src&#47;hello_pi&#47;hello_font</code>, no filename at the end, just the folder. It&#39;s weird that the file is empty though, <a href=\"https://github.com/adafruit/rpi-firmware/raw/8f305cad54cf725a14551b59a2e33c6fd37d7492/vc/sdk/opt/vc/src/hello_pi/hello_font/Vera.ttf\" rel=\"nofollow noreferrer\">it&#39;s ~64kB on Github</a> -- perhaps this was the problem from the beginning, so try if the <code>&quot;.&quot;</code> path will work after you download the correct file."}, {"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 1, "creation_date": 1538632683, "post_id": 52622740, "comment_id": 92212216, "body": "Also I want added this: If you want use <code>&quot;.&quot;</code>,  you must bring <code>.ttf</code> file where opened you project. Because <code>&quot;.&quot;</code> works here for find <code>.ttf</code> file."}], "tags": [], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "is_accepted": true, "score": 1, "last_activity_date": 1538554925, "creation_date": 1538554925, "answer_id": 52622740, "question_id": 52621109, "link": "https://stackoverflow.com/questions/52621109/i-cant-find-the-function-that-is-pointed-out-in-the-compiler/52622740#52622740", "title": "I can&#39;t find the function that is pointed out in the compiler", "body": "<p>From the <a href=\"https://github.com/adafruit/rpi-firmware/blob/master/vc/sdk/opt/vc/src/hello_pi/libs/vgfont/font.c#L157\" rel=\"nofollow noreferrer\">source code</a> for <code>gx_priv_render_text</code> it appears that the assertion fails because the <code>inited</code> static variable is not set.</p>\n\n<p>This variable is set through <code>gx_graphics_init</code> (it's <a href=\"https://github.com/adafruit/rpi-firmware/blob/8f305cad54cf725a14551b59a2e33c6fd37d7492/vc/sdk/opt/vc/src/hello_pi/libs/vgfont/graphics.c#L972\" rel=\"nofollow noreferrer\">here inside <code>graphics.c</code></a>), which calls <code>gx_priv_font_init</code> if the initialization succeeds.</p>\n\n<p>So, the initialization fails somewhere inside <code>gx_priv_initialise</code>. Set a breakpoint there and go step by step through the function, and check the log also (it should contain one of the error messages found inside that function).</p>\n"}], "owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 52622740, "answer_count": 1, "score": 1, "last_activity_date": 1541766888, "creation_date": 1538548863, "last_edit_date": 1541766888, "question_id": 52621109, "link": "https://stackoverflow.com/questions/52621109/i-cant-find-the-function-that-is-pointed-out-in-the-compiler", "title": "I can&#39;t find the function that is pointed out in the compiler", "body": "<p>I work on openvg library. Actually I worked for run this code with Code Blocks(on raspberry): <a href=\"https://github.com/raspberrypi/firmware/blob/master/opt/vc/src/hello_pi/hello_font/main.c\" rel=\"nofollow noreferrer\">https://github.com/raspberrypi/firmware/blob/master/opt/vc/src/hello_pi/hello_font/main.c</a>  </p>\n\n<p>I achieved render color and I saw aliasing. But I want write text on screen with use same method. I analyzed this library: <a href=\"https://github.com/raspberrypi/firmware/blob/master/opt/vc/src/hello_pi/libs/vgfont/vgfont.h\" rel=\"nofollow noreferrer\">https://github.com/raspberrypi/firmware/blob/master/opt/vc/src/hello_pi/libs/vgfont/vgfont.h</a> and tried use <code>graphics_resource_render_text_ext()</code> function but I took this message on a new terminal window:</p>\n\n<blockquote>\n  <p>assertion failure:font.c:176:gx_priv_render_text():inited aborted</p>\n</blockquote>\n\n<p>My compile build message this:\n<a href=\"https://i.stack.imgur.com/PsIjq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PsIjq.png\" alt=\"enter image description here\"></a></p>\n\n<p>Font.c's path: <a href=\"https://github.com/adafruit/rpi-firmware/blob/master/vc/sdk/opt/vc/src/hello_pi/libs/vgfont/font.c\" rel=\"nofollow noreferrer\">https://github.com/adafruit/rpi-firmware/blob/master/vc/sdk/opt/vc/src/hello_pi/libs/vgfont/font.c</a>. </p>\n\n<p>I went 176. line on font.c and tried call <code>gx_font_init()</code>(terminal window remark this line.) but I couldn't found this function anywhere(I tried find in raspberry's). If I cancel <code>graphics_resource_render_text_ext()</code> command, my code is good work. Why can't I use this function?  My code this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;assert.h&gt;\n#include \"bcm_host.h\"\n#include \"vgfont.h\"\n#include \"openvg.h\"\n#include \"egl.h\"\n#include \"vgu.h\"\n#include \"fontinfo.h\"\n#include \"shapes.h\"\n#include \"eglplatform.h\"\n#include \"graphics_x_private.h\"\n\nint main()\n{       \n    GRAPHICS_RESOURCE_HANDLE img;\n    uint32_t width, height;\n    int LAYER = 1;\n    bcm_host_init();\n\n    int s;\n\n    s = gx_graphics_init(\".\");\n    assert(s == 0);\n    s = graphics_get_display_size(0, &amp;width, &amp;height);\n    assert(s == 0);\n    s = gx_create_window(0, width, height, GRAPHICS_RESOURCE_RGBA32, &amp;img);\n    assert(s == 0);\n\n    graphics_resource_fill(img, 0, 0, width, height, GRAPHICS_RGBA32(0, 0, 0, 0x00));\n    graphics_display_resource(img, 0, LAYER, 0, 0, GRAPHICS_RESOURCE_WIDTH, GRAPHICS_RESOURCE_HEIGHT, VC_DISPMAN_ROT0, 1 );\n\n    while(1)\n    {\n        graphics_resource_fill(img, 0, 0,width, height, GRAPHICS_RGBA32(0,0,0,0x55));\n        graphics_resource_fill(img, 600, 500, 100, 50, GRAPHICS_RGBA32(0,0,0xff,0xaa));\n        graphics_resource_fill(img, 600, 400, 200, 50, GRAPHICS_RGBA32(0,0xff,0,0xaa));\n\n        graphics_resource_render_text_ext( img, 100, 100, 200, 200, GRAPHICS_RGBA32(0xff,0,0,0xdd), GRAPHICS_RGBA32(0, 0xff,0, 0xdd), \"hello\", strlen(\"hello\"), 20);  // This line has problem.\n\n        graphics_update_displayed_resource(img, 0,0,0,0);\n    }\n\n    graphics_display_resource(img, 0, LAYER, 0, 0, GRAPHICS_RESOURCE_WIDTH, GRAPHICS_RESOURCE_HEIGHT, VC_DISPMAN_ROT0, 0); \n    graphics_delete_resource(img);\n\n    printf(\"Hello world!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>NOTE:</strong> did not changed compiler build message when I cancelled <code>graphics_resource_render_text_ext()</code> but code worked good.</p>\n"}, {"tags": ["c", "windows", "filesystems", "driver"], "comments": [{"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1538548427, "post_id": 52620961, "comment_id": 92175675, "body": "how about using cmd command <code>wmic diskdrive get serialnumber</code> or <code>vol c:</code>?"}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1538548653, "post_id": 52620961, "comment_id": 92175787, "body": "Have you tried this <a href=\"https://stackoverflow.com/questions/48250004/how-to-get-a-serial-number-of-a-windows-disk\" title=\"how to get a serial number of a windows disk\">stackoverflow.com/questions/48250004/&hellip;</a>?"}], "owner": {"reputation": 11, "user_id": 10411323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2Rtx2nxuHxg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWHaw57kT4mQLnTqOWFEHJmYQ9ccA/mo/photo.jpg?sz=128", "display_name": "Nikhil V S", "link": "https://stackoverflow.com/users/10411323/nikhil-v-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538559330, "creation_date": 1538548309, "last_edit_date": 1538559330, "question_id": 52620961, "link": "https://stackoverflow.com/questions/52620961/how-to-enumerate-serial-number-of-a-storage-device-in-file-system-driver", "title": "How to Enumerate Serial Number of a Storage Device in File System Driver", "body": "<p>I have created a File system driver to allow or block the external storage devices in windows. For allowing a particular device I need to find out the Serial Number. I am using PSTORAGE_DEVICE_DESCRIPTOR to find out Serial Number but it will not work for all devices(eg: some devices shows the serial number as a special character). Is there any other possible way to find the Serial number in File system driver\nFollowing code section is used for querying serial number</p>\n\n<pre><code>    char szBuff [1024];\n    STORAGE_PROPERTY_QUERY Query;\n    //STORAGE_DEVICE_DESCRIPTOR Buffer[4];\n    NTSTATUS Status = STATUS_SUCCESS;\n\n    PSTORAGE_DEVICE_DESCRIPTOR Descriptor=NULL;\n    PIRP NewIrp2=NULL;\n    PIO_STACK_LOCATION  NextIrpStack=NULL;\n    IO_STATUS_BLOCK IoStatus;\n    char szSptr[2]={'_','\\0'};\n    SIZE_T szLength = 0;\n    Query.PropertyId = StorageDeviceProperty;// first set the query properties \n    Query.QueryType = PropertyStandardQuery;\nKeInitializeEvent(&amp;WaitEvent_newIrp, NotificationEvent, TRUE);// initialize the waitable event\n\n    __try \n    {\n        memset(szBuff,0,1024);\n\n        NewIrp2=IoBuildDeviceIoControlRequest(IOCTL_STORAGE_QUERY_PROPERTY, StorageStackDeviceObject, \n                                               (PVOID)&amp;Query,sizeof(STORAGE_PROPERTY_QUERY),\n                                               szBuff,1024,  \n                                               FALSE,&amp;WaitEvent_newIrp,&amp;IoStatus);\n\n        if(NewIrp2==NULL)\n        {\n            return STATUS_SUCCESS;  \n        }\n\n        Status = IoCallDriver(StorageStackDeviceObject, NewIrp2);// send this irp to the storage device \n\n        if (Status == STATUS_PENDING)\n        {\n            KeWaitForSingleObject(&amp;WaitEvent_newIrp, Executive, KernelMode, FALSE, NULL);\n            Status =IoStatus.Status;\n        }\n    }\n    __finally\n    {\n        //if(NT_SUCCESS(Status))\n        if(szBuff!=NULL)\n        {\n            try\n            {\n                Descriptor = (PSTORAGE_DEVICE_DESCRIPTOR)szBuff;\n                Descriptor-&gt;Size = sizeof(szBuff);\n                uBusType = Descriptor-&gt;BusType; //Get the bus type.\n            }\n            except(EXCEPTION_EXECUTE_HANDLER) \n            {\n                /* Error handling code */\n            }\n        }\n\n         char pszStart[255];    \n\n             if(Descriptor-&gt;SerialNumberOffset!=0)\n\n                {\n                     memset(pszStart,0,255);\n             RtlStringCopyWorkerA(pszStart,255,((char*)(UINT_PTR)Descriptor+(DWORD32)Descriptor-&gt;SerialNumberOffset),255);\n                      //pszStart condains the serial number\n\n                 }\n\n\n        }\n</code></pre>\n"}, {"tags": ["c", "mapreduce"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538548657, "post_id": 52620383, "comment_id": 92175790, "body": "You need to read the chapter dealing with pointers and the one dealing with strings in your C text book. <code>char *str = (char*)malloc((9999)*sizeof(char));</code> followed by <code>str = content;</code> is pointless. You need <code>strcpy(str, content);</code>. But there are more issues, the <code>map</code> function looks like total nonsense to me. Please <a href=\"https://stackoverflow.com/posts/52620383/edit\">edit</a>  your question ans explain what this function supposed to do."}, {"owner": {"reputation": 45, "user_id": 8829050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3aa34e483bc27de533a524133a7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Cur", "link": "https://stackoverflow.com/users/8829050/joe-cur"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538576718, "post_id": 52620383, "comment_id": 92191955, "body": "I understand how malloc works I just put that in there for quick testing... that wasnt even related to the question I asked at all; I am asking how or where I am supposed to be mapping these values to."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538577010, "post_id": 52620383, "comment_id": 92192152, "body": "If you put weird code here, you will most likely get comments like this. Very often people ask a specific question about their code, but there are actually many other problems in their code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538577106, "post_id": 52620383, "comment_id": 92192213, "body": "So is your actual question &quot;How can I implement a map that  in C that allows me to map strings to numbers?&quot;"}, {"owner": {"reputation": 45, "user_id": 8829050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3aa34e483bc27de533a524133a7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Cur", "link": "https://stackoverflow.com/users/8829050/joe-cur"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538578164, "post_id": 52620383, "comment_id": 92192963, "body": "Yes, I am trying to understand what emit is supposed to actually translate to in order to map the tokens to a value"}, {"owner": {"reputation": 9719, "user_id": 670521, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/029440196cca02003b9e6db1e895c19d?s=128&d=identicon&r=PG", "display_name": "DrBeco", "link": "https://stackoverflow.com/users/670521/drbeco"}, "edited": false, "score": 0, "creation_date": 1538618372, "post_id": 52620383, "comment_id": 92208760, "body": "This question is too unclear to be saved by an edit; the code is out of touch with the question and with what is explained/asked in the comments. I believe there should be a better, shorter and clearer way to state what is that you need with a minimum code example (one that, for example, tries to implement &quot;reduce&quot;, and give some meaningful output of some sort, even if a toy problem)"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8829050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3aa34e483bc27de533a524133a7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Cur", "link": "https://stackoverflow.com/users/8829050/joe-cur"}, "edited": false, "score": 0, "creation_date": 1538576742, "post_id": 52620989, "comment_id": 92191969, "body": "I have to use mapreduce"}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1538548431, "creation_date": 1538548431, "answer_id": 52620989, "question_id": 52620383, "link": "https://stackoverflow.com/questions/52620383/using-map-function-to-map-keys-with-values/52620989#52620989", "title": "Using Map Function to Map Keys with Values", "body": "<p>This would usually be solved through a dictionary of some kind (just as the java and pseudo-code examples likely used). You might, for example, use a binary search tree (likely the self-balancing red-black tree) with each node holding a word and count. An unbalanced BST is very easy to create, not so efficient to search. Another solution (easier to implement but likely much slower to run) would be to have a simple struct holding a pointer to a string and a count and have an array of such structs. This would end up requiring a great deal of copying and likely quite a lot of reallocation (and thus the poor running time) regardless of whether you keep the array sorted or not.</p>\n"}], "owner": {"reputation": 45, "user_id": 8829050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3aa34e483bc27de533a524133a7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Cur", "link": "https://stackoverflow.com/users/8829050/joe-cur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538548431, "creation_date": 1538545424, "question_id": 52620383, "link": "https://stackoverflow.com/questions/52620383/using-map-function-to-map-keys-with-values", "title": "Using Map Function to Map Keys with Values", "body": "<p>Looking at the a classic example of the Map() and Reduce() functions, I am writing a program that takes a .txt file as input, then counts the frequency of each word in the document.  I did a lot of research on both functions and found a lot of examples using Java or general pseudocode, but there is one part that I cannot get an understanding of.  This is what I have now:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid map(char *name, char *content){\n        char *str = (char*)malloc((9999)*sizeof(char));\n        str = content;\n        char* token;\n        token = strtok(str, \" ,.\");\n\n        while(token)\n        {\n                token = strtok(NULL, \" ,.\");\n        }\n}\n\nint main(int argc, char *argv[]){\n        int i =0;\n        char line[9999]; //= (char*)malloc((argc)*sizeof(char));\n        FILE *fp = fopen(argv[1], \"r\");\n\n        while (fgets(line, 150, fp) != NULL)\n        {\n                map(argv[1], line);\n        }\n        fclose(fp);\n\nreturn 0;        \n}\n</code></pre>\n\n<p>The map function is capable of tokenizing every word in the document line by line, but the part I do not understand is how to map the values.  How would the typical \"emit(token, 1)\" be translated into C?</p>\n"}, {"tags": ["c", "pointers", "memory-management"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1538545955, "post_id": 52620236, "comment_id": 92174640, "body": "The first thing you should do is stop typedefing pointers. Remove this <code>typedef struct element* List;</code> and write everything in terms of <code>element*</code> and <code>element**</code>. Perhaps some of the errors will become more apparent."}, {"owner": {"reputation": 5, "user_id": 8485660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb531a609c74994cfb38b1d03612616?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8485660/david"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1538586409, "post_id": 52620236, "comment_id": 92197784, "body": "@n.m. Thanks, I&#39;ll review the code and change that."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8485660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb531a609c74994cfb38b1d03612616?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8485660/david"}, "edited": false, "score": 0, "creation_date": 1538586320, "post_id": 52620552, "comment_id": 92197732, "body": "I really did not mind the copy of data by function. The confusion was precisely because it&#39;s using pointers to pointers. As for the list of errors in empty list, I left out to leave the code smaller. Thank you very much! His answer was accurate and enlightening."}], "tags": [], "owner": {"reputation": 88, "user_id": 6945979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65013d72d182bce48d9ab0aae3aecb67?s=128&d=identicon&r=PG&f=1", "display_name": "SevenStarConstellation", "link": "https://stackoverflow.com/users/6945979/sevenstarconstellation"}, "is_accepted": true, "score": 0, "last_activity_date": 1538546318, "creation_date": 1538546318, "answer_id": 52620552, "question_id": 52620236, "link": "https://stackoverflow.com/questions/52620236/why-do-i-get-the-memory-access-violation-error-using-pointer-to-pointer/52620552#52620552", "title": "Why do I get the memory access violation error using pointer to pointer", "body": "<p>C is pass-by-value, not pass-by-reference. Thus, the <code>List* list</code> in the function <code>list_add</code> and the <code>List* list</code> in <code>main</code> refer to two different locations in memory (they initially point to the same place at the start of <code>list_add</code>, but they are two different pointers with initially the same value, not the same pointer): modifying the value of the variable <code>list</code> within <code>list_add</code> does not affect the value of <code>list</code> in <code>main</code>.</p>\n\n<p>To be specific:</p>\n\n<p><code>list = &amp;n1</code> in <code>list_add</code> modifies only the value of <code>list</code> within that function, i.e. the argument value that was copied into <code>list_add</code>'s stack frame on invocation. However, when you try to print it on line 59, still within <code>list_add</code>, the changed value is seen and is thus the pointer printed from, working as you expect.</p>\n\n<p>When you try to print <code>list</code> on line 39, in <code>main</code>, on the other hand, the variable <code>list</code> within the <code>main</code> function did not have its value changed by the assignment <code>list = &amp;n1</code> just before line 39 in <code>list_add</code>, since that only changed the value of the copy in that function's scope. Thus in that case <code>list_print</code> tries to print elements of an empty list (since the value of <code>list</code> is still just what was returned by <code>list_create</code>, which is a pointer to a <code>NULL</code> pointer, and so <code>Elem aux = **list</code> thus dereferences <code>list</code> and then tries to dereference a <code>NULL</code> pointer) and thus leads to an invalid memory access.</p>\n\n<p>The problem in this code, then, is not the placement of the list's printing but rather that <code>list_add</code> is not updating the list properly. In fixing this you need to take into account that it can only modify the list structure by modifying what the reference value it received as an argument is pointing to, rather than by trying to modify the pointer itself. If you do want to modify the address <code>list</code> points to in <code>main</code> from within the function <code>list_add</code> (such as what the line <code>list = &amp;n1</code> seems to be attempting to do), you would need to pass a pointer to <code>list</code> into <code>list_add</code>, rather than just the pointer <code>list</code> itself.</p>\n\n<p>There appear to be other issues in the code itself (<code>list_print</code> prints only one element and has no handling for printing empty lists, for example, which is what causes the error here to be an actual invalid memory access instead of merely incorrectly leaving the list empty after calling <code>list_add</code>), but the issue described above is the cause of this particular problem.</p>\n"}], "owner": {"reputation": 5, "user_id": 8485660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb531a609c74994cfb38b1d03612616?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8485660/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 52620552, "answer_count": 1, "score": 0, "last_activity_date": 1538546318, "creation_date": 1538544531, "question_id": 52620236, "link": "https://stackoverflow.com/questions/52620236/why-do-i-get-the-memory-access-violation-error-using-pointer-to-pointer", "title": "Why do I get the memory access violation error using pointer to pointer", "body": "<p>I created a small program in C to test pointer to pointer.</p>\n\n<p>When I use a function (line 39) to print a list data, after adding an item to the list I get error 3221225477. However, when I comment the line 39, and I remove the comment from line 59 the program works normally.</p>\n\n<p>Why do I get a ACCESS_VIOLATION error from the operating system, in this case Windows, if the program is running from top to bottom?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;windows.h&gt;\n\n\nstruct employee{\n    int id;\n    char name[50];\n    char street[50];\n};\n\ntypedef struct element* List;\n\nstruct element{\n    struct employee data;\n    struct element *next;\n};\n\ntypedef struct element Elem;\n\nList* list_create();\nvoid  list_print(List* list);\nint   list_is_empty(List* list);\nint   list_add(List* list, struct employee a);\n\nint main(){\n\n    List* list = list_create();\n\n    struct employee a1;\n    a1.id = 10;\n    strcpy(a1.name, \"John\");\n    strcpy(a1.street, \"Address XYZ\");\n\n    list_add(list, a1);\n   //Sleep(5000); small pause, I thinking it might have something to do with thread.    \n\n  //list_print(list);   // *****line--39 *****;\n\n    return 0;\n\n}\n\nList* list_create(){\n    List* li = (List *) malloc(sizeof(List));\n    if(li != NULL)\n        *li = NULL;\n    return li;\n}\n\nint  list_add(List* list, struct employee emp){\n\n        Elem* n1 = (Elem *) malloc(sizeof(Elem));\n        n1-&gt;data = emp;\n        n1-&gt;next = *list;\n        list = &amp;n1;\n\n        list_print(list);    // *****line--59 *****;\n\n}\n\nvoid list_print(List* list){\n\n    Elem aux = **list;\n    printf(\" **lista Id:   %d\\n\", aux.data.id);\n    printf(\" **lista name: %s\\n\", aux.data.name);\n    printf(\" **lista name: %s\\n\", aux.data.street);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1538543885, "post_id": 52620091, "comment_id": 92173984, "body": "As the documentation says, if the string is <i>not</i> entirely a number then the pointer is modified. But if it is a number it\u2019s not modified. So it is not pointing at the null in the end"}, {"owner": {"reputation": 365, "user_id": 6087065, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f9fe4e526b5f33fc7ac15297c5767325?s=128&d=identicon&r=PG&f=1", "display_name": "Vasudha Dixit", "link": "https://stackoverflow.com/users/6087065/vasudha-dixit"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1538544575, "post_id": 52620091, "comment_id": 92174200, "body": "@SamiKuhmonen that is what I am asking ,my string is <code>5r</code>, it is not entirely number then the pointer should get modified but it is not."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1538544670, "post_id": 52620091, "comment_id": 92174227, "body": "Your question states the check fails for strings that are numbers and that\u2019s the reason why. If that\u2019s not the case, please edit the question and clarify."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538545267, "post_id": 52620091, "comment_id": 92174413, "body": "Note that you could type blanks before, or after, a valid number.  Do you want to count those?  As the first answer correctly identifies, your problem is that the string from <code>fgets()</code> contains <code>&quot;5r\\n&quot;</code>, and the newline is not the same as a null byte."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538545581, "post_id": 52620091, "comment_id": 92174521, "body": "See also <a href=\"https://stackoverflow.com/questions/14176123/correct-usage-of-strtol\">Correct usage of <code>strtol()</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538545395, "post_id": 52620291, "comment_id": 92174455, "body": "It is often effective to use <code>buf[strcspn(buf, &quot;\\n&quot;)] = &#39;\\0&#39;;</code> to zap the newline (if there is one).  This is safe as written even if there is no newline before the null byte that marks the end of the string (the null byte is overwritten with another).  This avoids a variety of problems with <code>strlen()</code> and so on."}, {"owner": {"reputation": 365, "user_id": 6087065, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f9fe4e526b5f33fc7ac15297c5767325?s=128&d=identicon&r=PG&f=1", "display_name": "Vasudha Dixit", "link": "https://stackoverflow.com/users/6087065/vasudha-dixit"}, "edited": false, "score": 0, "creation_date": 1538545599, "post_id": 52620291, "comment_id": 92174526, "body": "I tried replacing <code>\\n</code> with <code>\\0</code> but this doesn&#39;t resolve the issue. Getting output as <code>Invalid input: not a number</code> for all the input(for number also)"}, {"owner": {"reputation": 141, "user_id": 9976382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jHwjzj1KMcY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HkivfCLfLbSYrjHq2FgXyO2uAQw/mo/photo.jpg?sz=128", "display_name": "Fuel", "link": "https://stackoverflow.com/users/9976382/fuel"}, "edited": false, "score": 0, "creation_date": 1538545861, "post_id": 52620291, "comment_id": 92174603, "body": "I mean why cheking p==buf?"}, {"owner": {"reputation": 365, "user_id": 6087065, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f9fe4e526b5f33fc7ac15297c5767325?s=128&d=identicon&r=PG&f=1", "display_name": "Vasudha Dixit", "link": "https://stackoverflow.com/users/6087065/vasudha-dixit"}, "edited": false, "score": 0, "creation_date": 1538546155, "post_id": 52620291, "comment_id": 92174714, "body": "@EugenioUllauri I don&#39;t see any expression in my code that you have mentioned"}, {"owner": {"reputation": 141, "user_id": 9976382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jHwjzj1KMcY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HkivfCLfLbSYrjHq2FgXyO2uAQw/mo/photo.jpg?sz=128", "display_name": "Fuel", "link": "https://stackoverflow.com/users/9976382/fuel"}, "edited": false, "score": 0, "creation_date": 1538546325, "post_id": 52620291, "comment_id": 92174754, "body": "The line after strtoI,"}, {"owner": {"reputation": 141, "user_id": 9976382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jHwjzj1KMcY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HkivfCLfLbSYrjHq2FgXyO2uAQw/mo/photo.jpg?sz=128", "display_name": "Fuel", "link": "https://stackoverflow.com/users/9976382/fuel"}, "edited": false, "score": 0, "creation_date": 1538546448, "post_id": 52620291, "comment_id": 92174804, "body": "Try strtol(buf, &amp;p, 10)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 365, "user_id": 6087065, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f9fe4e526b5f33fc7ac15297c5767325?s=128&d=identicon&r=PG&f=1", "display_name": "Vasudha Dixit", "link": "https://stackoverflow.com/users/6087065/vasudha-dixit"}, "edited": false, "score": 0, "creation_date": 1538576836, "post_id": 52620291, "comment_id": 92192033, "body": "@VasudhaDixit: When I use <code>value = strtol(buf, &amp;p, 0);          if (p == buf || (*p != &#39;\\n&#39; &amp;&amp; *p != &#39;\\0&#39;))</code> \u2014 a minor modification to your code \u2014 the program works correctly.  Alternatively, if you add <code>buf[strcspn(buf, &quot;\\n&quot;)] = &#39;\\0&#39;;</code> immediately after the <code>if</code> block calling <code>fgets()</code> (and <code>#include &lt;string.h&gt;</code> at the top), your code works.  If neither of these works for you, then you&#39;ve probably made a transcription error.  Note that it is conventional in C to use <code>else if</code> when possible, and to align <code>else if</code> with the <code>if</code>.  Your code nests statements unnecessarily."}], "tags": [], "owner": {"reputation": 141, "user_id": 9976382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jHwjzj1KMcY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HkivfCLfLbSYrjHq2FgXyO2uAQw/mo/photo.jpg?sz=128", "display_name": "Fuel", "link": "https://stackoverflow.com/users/9976382/fuel"}, "is_accepted": true, "score": 2, "last_activity_date": 1538577156, "last_edit_date": 1538577156, "creation_date": 1538544883, "answer_id": 52620291, "question_id": 52620091, "link": "https://stackoverflow.com/questions/52620091/pointer-variable-0-is-not-working-for-the-check-of-unsuccessful-conversio/52620291#52620291", "title": "*pointer_variable != &#39;\\0&#39; is not working for the check of unsuccessful conversion in strtol() function", "body": "<p>The string you get from <code>fgets</code> contains <code>'\\n'</code> as last char because you hit enter, so replace it with <code>'\\0'</code>. That is a common error we C coders sometimes make.</p>\n\n<p>Edit:\nSo I have tested it myself, and you're right, the reason is that strtoI does not mess with line terminator, so now it works fine with the following check:</p>\n\n<pre><code>*p != '\\n' \n</code></pre>\n\n<p>The full working code is this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n\nint display();\nvoid fact_fun(int num_fact);\n\nint main()\n{\n    int num;\n    while ((num = display()) &gt;= 0)\n        {\n        fact_fun(num);\n        }\n    return 0;\n}\n\nint display()\n{\n    char buf[256];\n    char *p;\n    long value;\n    for (;;)\n        {\n        printf(\"\\nEnter number to find factorial or press ENTER KEY to exit: \");\n        if (fgets(buf, sizeof buf, stdin) == NULL || *buf == '\\n')\n            return -1;\n        errno = 0;\n        value = strtol(buf, &amp;p, 0);\n        if (p == buf || *p != '\\n')\n            {\n            printf(\"\\nInvalid input: not a number\\n\");\n            }\n        else\n            {\n            if (value &lt; 0)\n            {\n                printf(\"\\nInvalid input: negative values not allowed\\n\");\n            }\n            else if (errno != 0 || value &gt; INT_MAX)\n                {\n                    printf(\"\\nInvalid input: value too large for type int\\n\");\n                }\n                else\n                    {\n                        return (int)value;\n                    }\n            }\n        }\n}\n\nvoid fact_fun(int num_fact)\n{\n    int fact = 1;\n    for (int i = 1; i &lt;= num_fact; i++)\n        {\n        if (fact &gt; INT_MAX / i)\n        {\n            printf(\"\\nInvalid input: arithmetic overflow\\n\");\n            return;\n        }\n        fact = fact * i;\n    }\n    printf(\"\\nFactorial of %d is %d\\n\", num_fact, fact);\n}\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 6087065, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f9fe4e526b5f33fc7ac15297c5767325?s=128&d=identicon&r=PG&f=1", "display_name": "Vasudha Dixit", "link": "https://stackoverflow.com/users/6087065/vasudha-dixit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52620291, "answer_count": 1, "score": 0, "last_activity_date": 1538577156, "creation_date": 1538543731, "last_edit_date": 1538545506, "question_id": 52620091, "link": "https://stackoverflow.com/questions/52620091/pointer-variable-0-is-not-working-for-the-check-of-unsuccessful-conversio", "title": "*pointer_variable != &#39;\\0&#39; is not working for the check of unsuccessful conversion in strtol() function", "body": "<p>The program was not working for input <code>5r</code> i.e in input when first character is number and remaining next character is any alphabet or negative number. For example when I am giving input as 5r in the output I am getting factorial of 5.</p>\n\n<p>So I tried putting check for <code>strtol</code> unsuccessful conversion :- </p>\n\n<pre><code>if (p == buf || *p != '\\0'){ printf(\"\\nInvalid input: not a number\\n\");}\n</code></pre>\n\n<p>but I am getting output as <code>Invalid input: not a number</code> for all the input. </p>\n\n<p>I found many similar questions in Stack Overflow. However, they don't resolve my issue. I am not understanding what is wrong with this simple check? How can I successfully detect errors from <code>strtol</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n\nint display();\nvoid fact_fun(int num_fact);\n\nint main()\n{\n    int num;\n    while ((num = display()) &gt;= 0)\n        {\n        fact_fun(num);\n        }\n    return 0;\n}\n\nint display()\n{\n    char buf[256];\n    char *p;\n    long value;\n\n\n    for (;;)\n        {\n        printf(\"\\nEnter number to find factorial or press ENTER KEY to exit: \");\n\n        if (fgets(buf, sizeof buf, stdin) == NULL || *buf == '\\n')\n            return -1;\n\n        errno = 0;\n        value = strtol(buf, &amp;p, 0);\n\n        if (p == buf || *p != '\\0')\n            {\n            printf(\"\\nInvalid input: not a number\\n\");\n            }\n        else\n            {\n            if (value &lt; 0)\n            {\n                printf(\"\\nInvalid input: negative values not allowed\\n\");\n            }\n            else if (errno != 0 || value &gt; INT_MAX)\n                {\n                    printf(\"\\nInvalid input: value too large for type int\\n\");\n                }\n                else\n                    {\n                        return (int)value;\n                    }\n            }\n        }\n}\n\nvoid fact_fun(int num_fact)\n{\n    int fact = 1;\n    for (int i = 1; i &lt;= num_fact; i++)\n        {\n        if (fact &gt; INT_MAX / i)\n        {\n            printf(\"\\nInvalid input: arithmetic overflow\\n\");\n            return;\n        }\n        fact = fact * i;\n    }\n    printf(\"\\nFactorial of %d is %d\\n\", num_fact, fact);\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 5, "creation_date": 1538543308, "post_id": 52620016, "comment_id": 92173849, "body": "You can&#39;t safely use stdio functions in signal handlers. See <code>man signal-safety</code> for the ones you can use."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1538544082, "post_id": 52620016, "comment_id": 92174047, "body": "Read this <a href=\"https://stackoverflow.com/questions/16891019/how-to-avoid-using-printf-in-a-signal-handler\">To know why printf should not be used inside signal handler</a>"}], "answers": [{"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 1, "last_activity_date": 1538543847, "creation_date": 1538543847, "answer_id": 52620114, "question_id": 52620016, "link": "https://stackoverflow.com/questions/52620016/interesting-glitch-like-behavior-when-testing-sigint-and-sighup-on-linux/52620114#52620114", "title": "Interesting glitch-like behavior when testing SIGINT and SIGHUP on linux", "body": "<p>It is likely that you are narrowly avoiding horrible bugs by accident.</p>\n\n<p>What I think is happening is that the signal sometimes interrupts while <code>printf</code> is in progress formatting the string into the output buffer. Then the <code>puts</code> in the signal handler inserts more string into the output buffer. Then the handler returns, <code>printf</code> inserts the newline and flushes the buffer.</p>\n\n<p>But guess what would happen if this signal occurred just before the flush of a full 8K output buffer. The buffer positions would be at the end. Then the <code>puts</code> call happens, not realizing that <code>printf</code> is already in process of flushing and clearing the buffer. Where exactly would it be putting the <code>puts</code> string? At the beginning? At the end? Would the excess data <code>printf</code> was in the process of writing write over the string that <code>puts</code> had added? All of those things are possible.</p>\n\n<p>Buffered C output is not reentrant and cannot be used in signal handlers.</p>\n"}], "owner": {"reputation": 1, "user_id": 10447688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1875631642490434/picture?type=large", "display_name": "Bruno T", "link": "https://stackoverflow.com/users/10447688/bruno-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538543847, "creation_date": 1538543174, "question_id": 52620016, "link": "https://stackoverflow.com/questions/52620016/interesting-glitch-like-behavior-when-testing-sigint-and-sighup-on-linux", "title": "Interesting glitch-like behavior when testing SIGINT and SIGHUP on linux", "body": "<p>Lately have been testing out using signals such as SIGINT and SIGHUP and their role on ongoing processes on Linux. Running the following code returned some interesting results.</p>\n\n<blockquote>\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid routine(int p){\n    puts(\"Not finishing\");\n    sleep(2);\n}\n\nmain(){\n    int i = 0;\n    signal(SIGINT, routine);\n    signal(SIGHUP, routine);\n\n    while(1){\n        printf(\"%d \\n\", i++);\n    }\n}\n</code></pre>\n</blockquote>\n\n<p>As you can see, it simply counts from 0 on an infinite loop. Then, by using kill -SIGINT on the process it created, I got the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/E5nrS.png\" rel=\"nofollow noreferrer\">Routine</a></p>\n\n<p>As you can see, before the line I requested the routine to print, the program repeated the last number (and it does not happen always). I would really like to know why.</p>\n"}, {"tags": ["c", "stdin"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1538542574, "post_id": 52619841, "comment_id": 92173662, "body": "A common fairly portable way is simply to loop using <code>getchar()</code> until <code>EOF</code> is encountered, e.g. <code>void clear_stdin(void) { int c = getchar(); while (c != EOF) c = getchar(); }</code> (or the <code>&#39;\\n&#39;</code> if you simply need to erase the remainder of the user input, e.g. <code>while (c != &#39;\\n&#39; &amp;&amp; c != EOF)</code>)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1538542879, "post_id": 52619841, "comment_id": 92173738, "body": "You may want to look at <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">Using <code>fflush(stdin)</code></a>, primarily to look at the alternatives discussed to using <code>fflush(stdin)</code> which is undefined according to standard C but some systems, notably Microsoft&#39;s, provide a defined meaning for."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1538543043, "post_id": 52619841, "comment_id": 92173777, "body": "Silently ignoring stuff that the user has typed is probably not what most users expect from a well behaved program. You probably want to inform them that their input is not what your program expects. At any rate it seems that your program doesn&#39;t like lines that are too long. If so, I woild recommend this pattern: 1 read an <i>entire</i> line; 2 check if it&#39;s too long. Note that <code>fgets</code> may or may not read an entire line. You cannot continue reading to the end of the line without checking whether <code>fgets</code> has already done that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538546928, "post_id": 52619841, "comment_id": 92175020, "body": "For a link to an SO question to show up in the &#39;linked&#39; section on the RHS, it must be a current <code>https:&#47;&#47;</code> URL (e.g. <a href=\"https://stackoverflow.com/questions/2979209/using-fflushstdin\">Using <code>fflush(stdin)</code></a>) and not an <code>http:&#47;&#47;</code> link as I accidentally used in my previous <a href=\"https://stackoverflow.com/questions/52619841/how-can-i-clear-stdin-in-a-c-progam/52620225#comment92173738_52619841\">comment</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1538549063, "post_id": 52619841, "comment_id": 92176003, "body": "<a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\" title=\"how to read parse input in c the faq\">stackoverflow.com/questions/35178520/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 4, "last_activity_date": 1538544278, "last_edit_date": 1538544278, "creation_date": 1538542390, "answer_id": 52619909, "question_id": 52619841, "link": "https://stackoverflow.com/questions/52619841/how-can-i-clear-stdin-in-a-c-progam/52619909#52619909", "title": "How can I clear stdin in a C progam?", "body": "<p><strong>You <em>cannot</em> clear <code>stdin</code></strong> in a portable way (because no function from <a href=\"https://en.cppreference.com/w/c/io\" rel=\"nofollow noreferrer\"><code>&lt;stdio.h&gt;</code></a> is specified doing that). BTW, stdin can usually be not only a terminal, but also a <a href=\"https://en.wikipedia.org/wiki/Redirection_(computing)\" rel=\"nofollow noreferrer\">redirection</a> or a <a href=\"https://en.wikipedia.org/wiki/Pipeline_(Unix)\" rel=\"nofollow noreferrer\">pipe</a> (or even perhaps some <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\" rel=\"nofollow noreferrer\">socket</a>). Details matter of course (e.g. your operating system and/or running environment).</p>\n\n<p>You could avoid stdio and use <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating system</a> specific ways to deal with standard input (e.g. working at the <a href=\"https://en.wikipedia.org/wiki/File_descriptor\" rel=\"nofollow noreferrer\">file descriptor</a> level on POSIX systems).</p>\n\n<p>On Linux (specifically) you might read more about <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow noreferrer\">the Tty demystified</a>, and code low level code based on such knowledge. See <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow noreferrer\">termios(3)</a>. Consider using <a href=\"http://man7.org/linux/man-pages/man3/readline.3.html\" rel=\"nofollow noreferrer\">readline(3)</a>.</p>\n\n<p>You could <a href=\"https://stackoverflow.com/a/9171511/841108\">use</a> (on Linux at least) <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline(3)</a> to read a heap-allocated line buffer.</p>\n"}, {"comments": [{"owner": {"reputation": 88, "user_id": 6945979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65013d72d182bce48d9ab0aae3aecb67?s=128&d=identicon&r=PG&f=1", "display_name": "SevenStarConstellation", "link": "https://stackoverflow.com/users/6945979/sevenstarconstellation"}, "edited": false, "score": 1, "creation_date": 1538544052, "post_id": 52619971, "comment_id": 92174037, "body": "To this I might add mention that in the question&#39;s case, since it sounds as if it is possible for users to enter less than the maximum number of characters as well, <code>fgets</code> will keep the newline in the read input in such cases (regarding not expecting the <code>\\n</code>). Of course dealing with this oneself gets into the manual fringe case handling mentioned in this answer."}], "tags": [], "owner": {"reputation": 363, "user_id": 7576532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QSGdx.jpg?s=128&g=1", "display_name": "schulmaster", "link": "https://stackoverflow.com/users/7576532/schulmaster"}, "is_accepted": false, "score": 2, "last_activity_date": 1538543875, "last_edit_date": 1538543875, "creation_date": 1538542820, "answer_id": 52619971, "question_id": 52619841, "link": "https://stackoverflow.com/questions/52619841/how-can-i-clear-stdin-in-a-c-progam/52619971#52619971", "title": "How can I clear stdin in a C progam?", "body": "<pre><code>while ((getchar()) != '\\n');\n</code></pre>\n\n<p>This will not always work...(<em>but on the bright side, the cases in which it doesn't are just as portable as the cases in which it does</em>). But if stdin has not been redirected, the <strong>terminal char</strong> of the user's input, unless a manual <code>EOF</code>, will <strong>usually</strong> be a newline. After you extract what you expect, assuming you don't expect the <code>\\n</code>, you can drain what's there up until(and including) the '\\n', and then iterate anew. As others have suggested, there are higher level interfaces to deal with this minutia more reliably than manual fringe case handling most of the time.</p>\n\n<p><a href=\"https://www.geeksforgeeks.org/clearing-the-input-buffer-in-cc/\" rel=\"nofollow noreferrer\">More Details on Challenge and Solutions</a>\nThis link contains the cardinal sin of \"C\\C++\" in its heading, which doesn't exist as an entity. Rest assured, <em>separate</em> C examples are given, discrete from alternate C++ ones.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 8285808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fd835b555d40f6fa0c1fc775c0dbe2?s=128&d=identicon&r=PG&f=1", "display_name": "xjka", "link": "https://stackoverflow.com/users/8285808/xjka"}, "edited": false, "score": 1, "creation_date": 1538546699, "post_id": 52620225, "comment_id": 92174913, "body": "Bless your soul. That was the key, I was removing the newline character from the result of fgets and forgot I was doing that, so when I was attempting to look for it it always failed. Your code reminded me I was doing that and that I should check for the newline character in the result of fgets before removing it."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1538544452, "creation_date": 1538544452, "answer_id": 52620225, "question_id": 52619841, "link": "https://stackoverflow.com/questions/52619841/how-can-i-clear-stdin-in-a-c-progam/52620225#52620225", "title": "How can I clear stdin in a C progam?", "body": "<p>To achieve what you want \u2014 reading and ignoring extra characters up to a newline if the buffer you supplied is over-filled \u2014 you need to conditionally read up to the newline, only doing so if there isn't a newline already in the input buffer that was read.</p>\n\n<pre><code>void read_string(char *s, int width)\n{\n    if (fgets(s, width, stdin) != 0)\n    {\n        size_t length = strlen(s);\n        if (length &gt; 0 &amp;&amp; s[length-1] != '\\n')\n        {\n            int c;\n            while ((c = getchar()) != '\\n' &amp;&amp; c != EOF)\n                ;\n        }\n        /* Use the input data */\n    }\n    else\n        /* Handle EOF or error */\n}\n</code></pre>\n\n<p>The other part of the technique is to make sure that you use a big enough buffer that it is unlikely that anyone will overflow it.  Think in terms of <code>char buffer[4096];</code> as an opening bid; you can increase it if you prefer.  That makes it unlikely that anyone will (be able to) type enough data on a single line to overflow the buffer you provide, thus avoiding the problem.</p>\n\n<p>Another option is to use POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a>.  It reads a line into allocated space, allocating more space until the data fits (or you run out of memory).  It has at least one other major advantage over <code>fgets()</code> \u2014 it reports the number of characters in the line it read, which means it is not confused by null bytes (<code>'\\0'</code>, usually typed as <kbd>Control-@</kbd>) in the input.  By contrast, you can't tell whether there was any data entered after the first null byte with <code>fgets()</code>; you have to assume that the input stopped at the first null byte.</p>\n\n<p>Note that the simple loop shown in the question (<code>while (getchar() != '\\n');</code>) becomes infinite if it encounters EOF before reading a newline.</p>\n"}], "owner": {"reputation": 55, "user_id": 8285808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fd835b555d40f6fa0c1fc775c0dbe2?s=128&d=identicon&r=PG&f=1", "display_name": "xjka", "link": "https://stackoverflow.com/users/8285808/xjka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2161, "favorite_count": 1, "accepted_answer_id": 52620225, "answer_count": 3, "score": 3, "last_activity_date": 1538545761, "creation_date": 1538541932, "question_id": 52619841, "link": "https://stackoverflow.com/questions/52619841/how-can-i-clear-stdin-in-a-c-progam", "title": "How can I clear stdin in a C progam?", "body": "<p>This is a seemingly simple question that I have not been able to answer for far too long:</p>\n\n<p>I am trying to read input from a user in a C program using fgets(). However, I am running into the problem that if the user enters more characters than fgets() is set to read, the next call to read a string from the user automatically reads the remaining characters in the stdin buffer, and this is NOT behavior I want. </p>\n\n<p>I have tried many ways to clear the stdin stream, and while I know something like</p>\n\n<p><code>while(getchar()!='\\n');</code>\nwill work, this requires the user to hit enter an additional time which is not something I want.  </p>\n\n<p>The structure of the code looks something like this:</p>\n\n<pre><code>    void read_string(char *s, int width){\n        fgets(s,width,stdin);\n        clear_stdin();\n        .\n        .   \n    }\n\n    while (1){\n        read_string()\n        .\n        .\n    }\n</code></pre>\n\n<p>But I cannot get a clear_stdin() function that works desirably. How on earth can I clear the stdin, without having the user needlessly need to hit enter twice?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1538541557, "post_id": 52619631, "comment_id": 92173440, "body": "<code>for (j = 0; j &lt; 5; j++);</code> -- what does each character in this line do? (are there any that don&#39;t belong that could cause problems?) What is different between this loop declaration and the one before it?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1538543517, "post_id": 52619631, "comment_id": 92173889, "body": "As David C. Rankin already said: Compare your <code>i</code> for-loop with the <code>j</code> for-loop character-by-character and you&#39;ll notice one extra character that shall be removed. For swapping just make one more loop: <code>for (i = 0; i &lt; 5; i++){int tmp = List1[i]; List1[i] = List2[i]; List2[i] = tmp;}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "edited": false, "score": 0, "creation_date": 1538714502, "post_id": 52624812, "comment_id": 92247353, "body": "SO never wanted to implement as a linked list. It was a plain array that he was interested in."}], "tags": [], "owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "is_accepted": false, "score": 0, "last_activity_date": 1538561875, "creation_date": 1538561875, "answer_id": 52624812, "question_id": 52619631, "link": "https://stackoverflow.com/questions/52619631/c-program-to-output-array-lists-and-then-swap-the-elements-between-lists-and-out/52624812#52624812", "title": "C program to output array lists and then swap the elements between lists and output them again", "body": "<p>These are not a linked lists, they're just int vectors, if you want to swap two linked list, here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct Structure\n{\n  int n;\n};\n\nstruct StructureNode\n{\n  struct Structure structure;\n  struct StructureNode * next;\n};\n\ntypedef struct StructureNode * Node;\n\nvoid NewNode(struct Structure s, Node * p )\n{\n  Node temp;\n\n  temp = (Node)malloc(sizeof(struct StructureNode));\n\n  temp-&gt;structure = s;\n\n  temp-&gt;next = *p;\n\n  *p = temp;\n}\n\nvoid Read(struct Structure * p)\n{\n  printf(\"Insert a number in the list:\");\n  scanf(\"%d\", &amp;p-&gt;n);\n}\n\nvoid ViewLists(Node head1, Node head2)\n{\n  printf(\"List1:\\n\");\n  while(head1 != NULL)\n  {\n    printf(\"%d\\n\", head1-&gt;structure.n);\n    head1 = head1-&gt;next;\n  }\n  printf(\"List2:\\n\");\n  while(head2 != NULL)\n  {\n    printf(\"%d\\n\", head2-&gt;structure.n);\n    head2 = head2-&gt;next;\n  }\n}\n\nvoid SwapLists(Node  head1, Node  head2)\n{\n  struct Structure temp;\n  while(head1 != NULL &amp;&amp; head2 != NULL)\n  {\n    temp = head1-&gt;structure;\n    head1-&gt;structure = head2-&gt;structure;\n    head2-&gt;structure = temp;\n\n    head1 = head1-&gt;next;\n    head2 = head2-&gt;next;\n  }\n}\n\nint Menu()\n{\n  int c;\n  printf(\"\\nHow to swap two linked list by St3veR0nix\\n\"\n        \"\\n1) Insert a value in List1\\n\"\n        \"\\n2) Insert a value in List2\\n\"\n        \"\\n3) Swap the lists\\n\"\n        \"\\n4) Print both lists\\n\"\n        \"\\n&gt;&gt;\");\n  scanf(\"%d\", &amp;c);\n  return c;\n}\n\nint main()\n{\n  Node head1 = NULL;\n  Node head2 = NULL;\n  struct Structure s;\n  int c;\n  do {\n    c = Menu();\n    switch(c)\n    {\n      case 1: Read(&amp;s);\n              NewNode(s, &amp;head1);\n              break;\n      case 2: Read(&amp;s);\n              NewNode(s, &amp;head2);\n              break;\n      case 3: SwapLists(head1, head2);\n              break;\n      case 4: ViewLists(head1, head2);\n              break;\n      default: c = 0;\n    }\n  } while(c != 0);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "is_accepted": false, "score": 0, "last_activity_date": 1538718421, "last_edit_date": 1538718421, "creation_date": 1538714868, "answer_id": 52658505, "question_id": 52619631, "link": "https://stackoverflow.com/questions/52619631/c-program-to-output-array-lists-and-then-swap-the-elements-between-lists-and-out/52658505#52658505", "title": "C program to output array lists and then swap the elements between lists and output them again", "body": "<p>Just one glaring error in your code @RTR81. The <code>for</code> loops you have used for the <code>List2</code> array, i.e, the <code>j</code> loop has a semi colon at the end of the <code>for</code> statement. This causes the loop to end even before it moves to the second iteration. Just removing the semicolon(;) at the end would make it possible for you to read the entire input array.</p>\n\n<pre><code>for (j = 0; j &lt; 5; j++);   //this semicolon needs to be removed.\n</code></pre>\n\n<p>And now coming to the swapping part. It is pretty simple buddy. Declare another variable, say <code>temp</code>, which hold the value of <code>List1</code> element at first, while you put the value of <code>List2</code> element in it. Then put the value of <code>temp</code> into the <code>List2</code> element.</p>\n\n<p>I have posted the code below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint List1[5], List2[5];\nint i, j, temp;\n\nprintf(\"Please enter the values to List1 array\\n \");\nfor (i = 0; i &lt; 5; i++)\n{\n    scanf(\"%d\", &amp;List1[i]);\n}\n\nprintf(\"Please enter the values to List2 array\\n\");\nfor (j = 0; j &lt; 5; j++)//removed the semicolon here\n{\n    scanf(\"%d\", &amp;List2[j]);\n}\n\nprintf(\"List1 and List2 before swap\\n\");\n\nprintf(\"\\nList 1:\");\nfor (i = 0; i &lt; 5; i++)\n{\n    printf(\"\\t%d\", List1[i]);\n}\n\nprintf(\"\\nList 2:\");\n\nfor (j = 0; j &lt; 5; j++)//removed the semicolon here\n{\n    printf(\"\\t%d\", List2[j]);\n}\n\nfor(i = 0; i &lt; 5; i++)\n{\n    temp = List1[i];\n    List1[i] = List2[i];\n    List2[i] = temp;\n}\n\n //??? put something here to swap the elements and \n\nprintf(\"\\nList1 and List2 after swap\");\nprintf(\"\\nList 1:\");\nfor (i = 0; i &lt; 5; i++)\n{\n    printf(\"\\t%d\", List1[i]);\n}\n\nprintf(\"\\nList 2:\");\n\nfor (j = 0; j &lt; 5; j++)//removed the semicolon here\n{\n    printf(\"\\t%d\", List2[j]);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>This results in the output as follows: </p>\n\n<blockquote>\n<pre><code>&gt; Please enter the values to List1 array   \n\n&gt;1 2 3 4 5 \n\n&gt;Please enter the values to List2 array\n\n&gt;9 8 7 6 5 \n&gt;\n&gt;List1 and List2 before swap\n&gt; \n&gt; List 1: 1   2   3   4   5 \n\n&gt;List 2:  9   8   7   6   5 \n\n&gt;List1 and List2 after swap \n\n&gt;List 1:  9   8   7   6   5 \n\n&gt;List 2:  1   2   3   4   5\n</code></pre>\n</blockquote>\n\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 1, "user_id": 10439050, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zRQ696JRg-g/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXletfai0Usw7_cXnLWosC_3vhaYw/mo/photo.jpg?sz=128", "display_name": "RTR81", "link": "https://stackoverflow.com/users/10439050/rtr81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1538718421, "creation_date": 1538540392, "last_edit_date": 1538541252, "question_id": 52619631, "link": "https://stackoverflow.com/questions/52619631/c-program-to-output-array-lists-and-then-swap-the-elements-between-lists-and-out", "title": "C program to output array lists and then swap the elements between lists and output them again", "body": "<p>I'm having difficulty printing my second list when inputted by the user. Only the first list prints. Also, I'm not sure how to proceed in swapping the list values and then printing them. My instructor wants us to figure out how to do this without writing a function but I can't see a way without involving that. Here is my code so far</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint List1[5], List2[5];\nint i, j;\n\nprintf(\"Please enter the values to List1 array\\n \");\nfor (i = 0; i &lt; 5; i++)\n{\n    scanf_s(\"%d\", &amp;List1[i]);\n}\n\nprintf(\"Please enter the values to List2 array\\n\");\nfor (j = 0; j &lt; 5; j++);\n{\n    scanf_s(\"%d\", &amp;List2[j]);\n}\n\nprintf(\"List1 and List2 before swap\\n\");\n\nprintf(\"\\nList1\\t\\t List 2\\n\");\nfor (int i = 0; i &lt; 5; i++)\n{\n    printf(\"%d\\n\", List1[i]);\n}\n\nfor (j = 0; j &lt; 5; j++);\n{\n    printf(\"%d\\n\", List2[j]);\n}\n\n\n //??? put something here to swap the elements and \n\nprintf(\"\\nList1 and List2 after swap\");\n\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "while-loop", "pi"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1538539821, "post_id": 52619552, "comment_id": 92173080, "body": "&quot;All the work I have gotten done doesn&#39;t work.&quot; - please post this."}, {"owner": {"reputation": 398, "user_id": 10412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7782a6cbe4dca019ebe564903960341a?s=128&d=identicon&r=PG&f=1", "display_name": "larn", "link": "https://stackoverflow.com/users/10412159/larn"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1538540258, "post_id": 52619552, "comment_id": 92173165, "body": "@Amadan i have added the edit"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1538540474, "post_id": 52619552, "comment_id": 92173212, "body": "Of course it doesn&#39;t work - it is unfinished. Are you using <code>while</code> because the professor has been talking about <code>while</code> a lot, or because you understand that there is something to repeat in the problem? If so, what do you think is it? What do you think should be the purpose of <code>i</code>, and how does it change? <code>pi = 2 &#47; f</code>, you say - but you don&#39;t define <code>f</code> until later, so that can&#39;t possibly work (the statements are correct, but the order is wrong)."}, {"owner": {"reputation": 398, "user_id": 10412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7782a6cbe4dca019ebe564903960341a?s=128&d=identicon&r=PG&f=1", "display_name": "larn", "link": "https://stackoverflow.com/users/10412159/larn"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1538540742, "post_id": 52619552, "comment_id": 92173268, "body": "Yeah, it&#39;s unfinished because I wasn&#39;t sure what else to do with it. I&#39;m using <code>while</code> because I need a way to add the next iteration up to the desired number. The <code>sqrt(2)</code> is repeated throughout the formula. I was thinking <code>i</code> would be used as a counter. I had <code>f = sqrt(2)</code>, but because the formula required multiple <code>sqrt(2)</code> to be added, I&#39;m not sure if that&#39;s entirely correct? @Amadan"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1538542435, "post_id": 52619552, "comment_id": 92173622, "body": "It is correct (just raise <code>f = sqrt(2)</code> above <code>pi = 2 &#47; f</code>). Thinking of <code>i</code> as a counter is fine; but then it needs to <i>count</i>. So incrementing <code>i</code>, at least, should be inside the loop. What else? You&#39;ll probably want to multiply <code>pi</code> with something. What will it be? <a href=\"https://en.wikipedia.org/wiki/Vi%C3%A8te%27s_formula#Interpretation_and_convergence\" rel=\"nofollow noreferrer\">Wikipedia tells you</a> how to get <code>a[i]</code> from <code>a[i - 1]</code>. This might lead you to change your initial definition of <code>pi</code>. Also, if <code>n</code> is a number of iterations and <code>i</code> just counts, should they be <code>double</code>, or something else?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1538546160, "post_id": 52619552, "comment_id": 92174715, "body": "Read also <a href=\"https://www.floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1538546456, "last_edit_date": 1538546456, "creation_date": 1538545952, "answer_id": 52620486, "question_id": 52619552, "link": "https://stackoverflow.com/questions/52619552/approximating-the-value-of-pi-in-c-using-vietes-formula/52620486#52620486", "title": "Approximating the value of pi in C using Viete&#39;s Formula", "body": "<p>To start with the code you posted:</p>\n\n<p>1) You don't want <code>i</code> and <code>n</code> to be of type <code>double</code> Change them to <code>int</code></p>\n\n<p>2) You should always check the value returned by <code>scanf</code> Like: <code>if (scanf(%d) != 1) {// add error handling here ...}</code></p>\n\n<p>3) <code>pi = 2 / f;</code> is undefined behavior as <code>f</code> is uninitialized</p>\n\n<p>Then your assignment:</p>\n\n<p>I'll not give you a complete solution but instead give you a hint so you can continue your work.</p>\n\n<p>The formula needed can be found here: <a href=\"https://en.wikipedia.org/wiki/Vi%C3%A8te%27s_formula#Interpretation_and_convergence\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Vi\u00e8te%27s_formula#Interpretation_and_convergence</a></p>\n\n<p>Your first task is to calculate <code>a[n]</code> given that</p>\n\n<pre><code>a[1] = sqrt(2)\na[n] = sqrt(2 + a[n-1])\n</code></pre>\n\n<p>You can do that using a while-loop (though I would prefer a for-loop). It could be like:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;math.h&gt; \n\nint main() \n{ \n    int n, i;\n    n = 5;\n    i = 1;\n    double an = sqrt(2);\n\n    while(i &lt;= n)\n    {\n        printf(\"a%d = %.10f\\n\", i, an); \n        an = sqrt(2 + an);\n        ++i;\n    }\n    return 0;    \n}\n</code></pre>\n\n<p>This gives you:</p>\n\n<pre><code>a1 = 1.4142135624\na2 = 1.9615705608\na3 = 1.9975909124\na4 = 1.9998494037\na5 = 1.9999905876\n</code></pre>\n\n<p>So now that you know how to calculate a1, a2, a3, ... you just need to put it together using:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DbTJf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DbTJf.png\" alt=\"enter image description here\"></a></p>\n\n<p>(image from: <a href=\"https://en.wikipedia.org/wiki/Vi%C3%A8te%27s_formula#Interpretation_and_convergence\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Vi\u00e8te%27s_formula#Interpretation_and_convergence</a>)</p>\n\n<p>and find pi.</p>\n"}], "owner": {"reputation": 398, "user_id": 10412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7782a6cbe4dca019ebe564903960341a?s=128&d=identicon&r=PG&f=1", "display_name": "larn", "link": "https://stackoverflow.com/users/10412159/larn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 52620486, "answer_count": 1, "score": 0, "last_activity_date": 1538546456, "creation_date": 1538539557, "last_edit_date": 1538540228, "question_id": 52619552, "link": "https://stackoverflow.com/questions/52619552/approximating-the-value-of-pi-in-c-using-vietes-formula", "title": "Approximating the value of pi in C using Viete&#39;s Formula", "body": "<p>My assignment this week in my CS class is create a program to approximate for pi using Vi\u00e8te's Formula. I've been trying to start for the past hour or so, but I'm honestly not even sure how to begin. All the work I have gotten done doesn't work.</p>\n\n<p>I'm assuming my professor wants us to use the \"while\" loop, as we've been using it a lot in class lately. We've also been using \"if\" statements a lot, although I'm not sure if we need to use those here. </p>\n\n<p>Can anyone help me find a starting off point or explain how I could go about doing this? </p>\n\n<pre><code>//here is some of the work i have attempted that doesn't work because i don't know what to do\n#include &lt;stdio.h&gt; \n#include &lt;math.h&gt; \n#include &lt;stdlib.h&gt; \n\nint main() \n\n{ \ndouble n,pi,f,i; \n\nprintf(\"enter the number of iterations to approximate for pi\\n\"); \nscanf(\"%lf\\n\", &amp;n); \n\npi = 2 / f; \ni = 1; \nf = sqrt(2);\n\nwhile (i&lt;=n)\n{ \n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "file", "pointers", "input"], "comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 2, "creation_date": 1538538101, "post_id": 52619348, "comment_id": 92172765, "body": "<a href=\"https://stackoverflow.com/a/34874438/8420233\">This answer</a> may help."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1538539468, "post_id": 52619482, "comment_id": 92173009, "body": "In other words: There&#39;s only so many ASCII characters out there that are easy to type."}], "tags": [], "owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "is_accepted": true, "score": 2, "last_activity_date": 1538538931, "creation_date": 1538538931, "answer_id": 52619482, "question_id": 52619348, "link": "https://stackoverflow.com/questions/52619348/reading-from-a-file-in-c-how-lf-work/52619482#52619482", "title": "Reading from a file in C, how &quot;%*lf&quot; work?", "body": "<p>The use of <code>*</code> is just a string constant chosen arbitrarily.  It has no relation to pointer dereferencing.  How it \"works\" is that the parser in scanf simply parses the type as it would normally then throws away the value rather than looking for a parameter to put it in. </p>\n"}], "owner": {"reputation": 113, "user_id": 7254027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df157841937467bfd8a52b13310c95e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ahijit", "link": "https://stackoverflow.com/users/7254027/ahijit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52619482, "answer_count": 1, "score": 0, "last_activity_date": 1538538931, "creation_date": 1538537931, "question_id": 52619348, "link": "https://stackoverflow.com/questions/52619348/reading-from-a-file-in-c-how-lf-work", "title": "Reading from a file in C, how &quot;%*lf&quot; work?", "body": "<p>While reading from a file in C, I was told that I can add an * after the % to disregard that input. For example:</p>\n\n<pre><code>fscanf(inputfile, \"%lf %lf %*lf\", &amp;num1, &amp;num2);\n</code></pre>\n\n<p>In this example the pointer reads three double values, but only two of them need to be stored (the ones without the * sign after the % sign). </p>\n\n<p>Could someone explain how it works, because as far as I know the * sign is used to initialize or step into a pointer?</p>\n"}, {"tags": ["c", "encryption", "openssl", "cbc-mode"], "answers": [{"tags": [], "owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "is_accepted": false, "score": 2, "last_activity_date": 1538573885, "last_edit_date": 1538573885, "creation_date": 1538546190, "answer_id": 52620525, "question_id": 52619332, "link": "https://stackoverflow.com/questions/52619332/c-openssl-encryption-using-cbc-cipher-block-chaining-mode/52620525#52620525", "title": "C - OpenSSL encryption using CBC (Cipher Block Chaining) mode", "body": "<p>It looks like you are pretty close. By narrowing down the problem to just the encryption, the correct ciphertext can be produced. So in stead of reading the key from the file, define it as an array of unsigned chars, similar to what you did for the other variables:</p>\n\n<pre><code>unsigned char key[]={0x65,0x78,0x61,0x6d,0x70,0x6c,0x65,0x23,0x23,0x23,0x23,0x23,0x23,0x23,0x23,0x23};\n</code></pre>\n\n<p>Then the following code (reusing your variables) shows the successful encryption:</p>\n\n<pre><code>EVP_CIPHER_CTX ctx;\nEVP_CIPHER_CTX_init(&amp;ctx);\nEVP_CipherInit_ex(&amp;ctx, EVP_aes_128_cbc(),NULL, key, iv, 1);\nEVP_CipherUpdate(&amp;ctx, outbuf, &amp;outlen, (unsigned char *)plaintext, strlen(plaintext));\nEVP_CipherFinal_ex(&amp;ctx, outbuf+outlen, &amp;templ);\noutlen+=templ;\nEVP_CIPHER_CTX_cleanup(&amp;ctx);\nint cmpres = memcmp(outbuf, ciphertext, sizeof(ciphertext));\nprintf(\"cmpres is %d, sizeof(ciphertext) is %lu, outlen is %d\\n\",\n    cmpres, sizeof(ciphertext), outlen);\n</code></pre>\n\n<p>because it prints</p>\n\n<pre><code>$ ./main\ncmpres is 0, sizeof(ciphertext) is 32, outlen is 32\n</code></pre>\n\n<p>This means that the problem is in how you read the key from the file. That is much easier to analyze than cryptographic issues :-) and I will leave it up to you to figure out that part...</p>\n\n<p>By the way, make sure to check all return codes for your OpenSSL calls, it will help you to detect error situations.</p>\n"}], "owner": {"reputation": 15, "user_id": 4160148, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f7e3ef3f296b49ae88f04be55bb623?s=128&d=identicon&r=PG&f=1", "display_name": "Peng Zhanglong", "link": "https://stackoverflow.com/users/4160148/peng-zhanglong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538573885, "creation_date": 1538537775, "last_edit_date": 1538559014, "question_id": 52619332, "link": "https://stackoverflow.com/questions/52619332/c-openssl-encryption-using-cbc-cipher-block-chaining-mode", "title": "C - OpenSSL encryption using CBC (Cipher Block Chaining) mode", "body": "<p>I am using C-API of <a href=\"https://en.wikipedia.org/wiki/OpenSSL\" rel=\"nofollow noreferrer\">OpenSSL</a>, but I am confused on how <strong>IV</strong> (<a href=\"https://en.wikipedia.org/wiki/Initialization_vector\" rel=\"nofollow noreferrer\">Initialization Vector</a>) is used in OpenSSL.</p>\n\n<p>Say, I have </p>\n\n<pre><code>plaintext.txt file = \"This is a top secret.\"\nKey                = \"example#########\"\nIV                 = 010203040506070809000a0b0c0d0e0f\n</code></pre>\n\n<p>when I encrypt this using <em>OpenSSL AES-128-CBC</em>, I should get: </p>\n\n<pre><code>e5accdb667e8e569b1b34f423508c15422631198454e104ceb658f5918800c22\n</code></pre>\n\n<p>Which is true when I try this (key converted to hex):</p>\n\n<pre><code>openssl enc -aes-128-cbc -e -in plaintext.txt -out ciphertext.bin \n-K 6578616d706c65232323232323232323 -iv 010203040506070809000a0b0c0d0e0f\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>xxd -p ciphertext.bin \ne5accdb667e8e569b1b34f423508c15422631198454e104ceb658f5918800c22\n</code></pre>\n\n<p>But I got different <a href=\"https://en.wikipedia.org/wiki/Ciphertext\" rel=\"nofollow noreferrer\">ciphertext</a> thing using C</p>\n\n<pre><code>char plaintext[] = \"This is a top secret.\";\n\nunsigned char iv[16] = {\n    0x01, 0x02, 0x03, 0x04, \n    0x05, 0x06, 0x07, 0x08, \n    0x09, 0x00, 0x0A, 0x0B, \n    0x0C, 0x0D, 0x0E, 0x0F\n};\n\nunsigned char ciphertext[] = {\n    0xe5, 0xac, 0xcd, 0xb6, \n    0x67, 0xe8, 0xe5, 0x69, \n    0xb1, 0xb3, 0x4f, 0x42, \n    0x35, 0x08, 0xc1, 0x54, \n    0x22, 0x63, 0x11, 0x98, \n    0x45, 0x4e, 0x10, 0x4c, \n    0xeb, 0x65, 0x8f, 0x59, \n    0x18, 0x80, 0x0c, 0x22\n};\n</code></pre>\n\n<p>key (example) is in a <code>words.txt</code> file.</p>\n\n<hr>\n\n<p><strong>My encryption process:</strong></p>\n\n<pre><code>while(fgets(words, 16, wordsfile)) { //for getting key and padding\n    index = strlen(words) - 1;       //key \"example\" is the last word in words.txt\n    while(index &lt; 16) {\n        words[index] = 0x20;\n        index++;\n    }\n    words[index] = '\\0';\n    EVP_CIPHER_CTX ctx;\n    EVP_CIPHER_CTX_init(&amp;ctx);\n    EVP_CipherInit_ex(&amp;ctx, EVP_aes_128_cbc(), NULL, words, iv, 1);\n    EVP_CipherUpdate(&amp;ctx, outbuf, &amp;outlen, plaintext, strlen(plaintext));\n    EVP_CipherFinal_ex(&amp;ctx, outbuf + outlen, &amp;templ);\n    outlen += templ;\n    EVP_CIPHER_CTX_cleanup(&amp;ctx);\n}\n</code></pre>\n\n<p>When I check the ciphertext matches to key \"example\", I got a completely different ciphertext. Which part I was wrong? I am assuming the format of IV or the way I implemented IV is wrong.</p>\n"}, {"tags": ["c", "arrays", "count"], "comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 1, "creation_date": 1538535757, "post_id": 52619100, "comment_id": 92172270, "body": "first off, i&#39;d recommend doing <code>i &lt; length - 1</code> instead of <code>i &lt; length</code>.  using <code>i + 1</code> when <code>i</code> is <code>length - 1</code> for an array index is UB"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1538535982, "post_id": 52619100, "comment_id": 92172322, "body": "Run through what that does on paper. If [0] == [1] add 1 to the count. If [1] == [2] add 1 to the count. If [2] == [3] ...See what you&#39;re missing? You also run off the end of the array on your last time through the loop."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1538536733, "post_id": 52619100, "comment_id": 92172492, "body": "Whenever you need the &quot;frequency&quot; of occurrence for multiple values, use a &quot;frequency array&quot; with <code>max - min</code> elements (initialized all zero). Then simply loop over each element in <code>buf</code> incrementing the corresponding index of your frequency array, e.g. It will require a pass to determine the max and min, then either allocate or use a VLA. E.g. <code>5-1</code> requires 4 elements. <code>int freq[max-min];</code> With a VLA <code>memset (freq, 0, (max-min) * sizeof *freq);</code> Then <code>for (int i = 0; i &lt; max-min; i++) freq[buf[i]-min]++;</code> Finally <code>for (int i = 0; i &lt; max-min; i++) printf (&quot;%d: %d\\n&quot;, i+min, freq[i]);</code>"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1538537849, "post_id": 52619100, "comment_id": 92172709, "body": "What is the expected value if the array size is 6 and the elements are <code>1,2,5,2,5,5</code>? Should it count no of 2&#39;s or no of 5&#39;s or sum of 2&#39;s + sum of 5&#39;s?"}, {"owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1538538356, "post_id": 52619100, "comment_id": 92172808, "body": "@RishikeshRaje i&#39;ve only limited the array up to the size of 4 since it involves getting values from four adjacent direction, top, left, bottom and right. in that case, if i have 1,2,5,2 and the count is 2, i accept the count value if it&#39;s &gt;= 2."}, {"owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1538538684, "post_id": 52619100, "comment_id": 92172864, "body": "@David C.Rankin sorry i wasn&#39;t being specific earlier on. Please see the updated post."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1538548863, "post_id": 52619100, "comment_id": 92175885, "body": "@DavidC.Rankin I normally suggest frequency array(or hashmap) myself too. But if there will be only 4 elements in array, frequency array will be one of the worst possible approaches because of memory usage(assuming data type of <code>buf</code> is <code>int</code>, he will need an array with <code>sizeof(int)</code> elements)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1538551801, "post_id": 52619100, "comment_id": 92177412, "body": "Yes, they are super handy, and for small problems, the overhead isn&#39;t much more than several nested loops that would be used anyway. However, I do agree in the case of 4-elements, where all you care about is whether 2 match, then a procedural count will work fine as well."}], "answers": [{"tags": [], "owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "is_accepted": false, "score": 0, "last_activity_date": 1538538097, "creation_date": 1538538097, "answer_id": 52619369, "question_id": 52619100, "link": "https://stackoverflow.com/questions/52619100/c-counting-the-occurrence-of-same-number-in-an-array/52619369#52619369", "title": "C - Counting the occurrence of same number in an array", "body": "<p>The first thing that's wrong is that you are only comparing adjacent values in the buf array.  You have to compare all the values to each other.  </p>\n\n<p>How to do this is an architectural question.  The approach suggested by David Rankin in the comments is one, using an array of structs with the value and count count is a second, and using a hash table is a third option.  You've got some coding to do!  Good luck.  Ask for more help as you need it.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538539389, "post_id": 52619500, "comment_id": 92172999, "body": "Suppose the array is defined as <code>int buf[4] = { 1, 1, 1, 1 };</code> \u2014 what count will your code give, and what should it give?  I believe the answers are &quot;your code counts 6&quot; and &quot;the answer should be 4&quot; respectively, so your algorithm is a little na&#239;ve."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1538540198, "last_edit_date": 1538540198, "creation_date": 1538539092, "answer_id": 52619500, "question_id": 52619100, "link": "https://stackoverflow.com/questions/52619100/c-counting-the-occurrence-of-same-number-in-an-array/52619500#52619500", "title": "C - Counting the occurrence of same number in an array", "body": "<p>You are comparing values of <code>buf[i]</code>  and <code>buf[i+1]</code>. i.e. You are comparing <code>buf[0]</code> with  <code>buf[1]</code>, <code>buf[1]</code> with <code>buf[2]</code> etc. </p>\n\n<p>What you need is a nested for loop to compare all <code>buf</code> values with each other.</p>\n\n<pre><code>count = 0;\nfor (i=0; i&lt;4; i++)\n{\n    for (j=i+1; j&lt;4; j++)\n    {\n        if (buf[i]==buf[j])\n        {\n            count++;\n        }\n    }\n}\n</code></pre>\n\n<p>As pointed out by Jonathan Leffler, there is an issue in the above algorithm in case the input has elements <code>{1,1,1,1}</code>. It gives a value of 6 when expected value is 4.</p>\n\n<p>I am keeping it up, as the OP has mentioned that he wants to only check anything above 2. So, this method may still be useful.</p>\n"}, {"comments": [{"owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "edited": false, "score": 0, "creation_date": 1538545477, "post_id": 52619558, "comment_id": 92174481, "body": "C.Rankin in your first example, if i were to have an array of 2,2,5,2 i get the count = 1 which should be 3."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "edited": false, "score": 0, "creation_date": 1538551667, "post_id": 52619558, "comment_id": 92177338, "body": "@Maxxx - yes sorry, replace the <code>break</code> by a <code>goto</code> to jump out of both loops. A <code>break;</code> only exits the current loop and since the loops are nested, <code>same</code> is reset to <code>5</code> in that case. Anytime you need to break more than 1 loop a simple <code>goto</code> is needed. Above, I just <code>goto saved;</code> and if you notice the <i>label</i> for <code>saved</code> is outside both loops -- now it will do what you want with all possible combinations."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1538551933, "last_edit_date": 1538551933, "creation_date": 1538539602, "answer_id": 52619558, "question_id": 52619100, "link": "https://stackoverflow.com/questions/52619100/c-counting-the-occurrence-of-same-number-in-an-array/52619558#52619558", "title": "C - Counting the occurrence of same number in an array", "body": "<p>You are really rather hamstrung by the order the values appear within <code>buf</code>. The only rudimentary way to handle this when limited to 4-values is to make a pass with nested loops to determine what the matching value is, and then make a single pass over <code>buf</code> again counting how many times it occurs (and since you limit to 4-values, even with a pair of matches, your <code>count</code> is limited to <code>2</code> -- so it doesn't make a difference which you count)</p>\n\n<p>A short example would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    int buf[] = {1, 2, 5, 2},\n        length = sizeof(buf) / sizeof(int), \n        count = 0,\n        same = 0;\n\n    for (int i = 0; i &lt; length - 1; i++)    /* identify what value matches */\n        for (int j = i + 1; i &lt; length; i++)\n            if (buf[i] == buf[j]) {\n                same = buf[i];\n                goto saved;     /* jump out of both loops when same found */\n            }\n    saved:;    /* the lowly, but very useful 'goto' saves the day - again */\n\n    for (int i = 0; i &lt; length; i++)    /* count matching numbers */\n        if (buf[i] == same)\n            count++;\n\n    printf (\"count = %d\\n\", count);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/arr_freq_count\ncount = 2\n</code></pre>\n\n<p>While making that many passes over the values, it takes little more to use an actual <em>frequency</em> array to fully determine how often each value occurs, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\nint main (void) {\n\n    int buf[] = {1, 2, 3, 4, 5, 2, 5, 6},\n        n = sizeof buf / sizeof *buf,\n        max = INT_MIN,\n        min = INT_MAX;\n\n    for (int i = 0; i &lt; n; i++) {   /* find max/min for range */\n        if (buf[i] &gt; max)\n            max = buf[i];\n        if (buf[i] &lt; min)\n            min = buf[i];\n    }\n\n    int range = max - min + 1;      /* max-min elements (inclusive) */\n    int freq[range];                /* declare VLA */\n\n    memset (freq, 0, range * sizeof *freq); /* initialize VLA zero */\n\n    for (int i = 0; i &lt; n; i++)     /* loop over buf setting count in freq */\n        freq[buf[i]-min]++;\n\n    for (int i = 0; i &lt; range; i++) /* output frequence of values */\n        printf (\"%d occurs %d times\\n\", i + min, freq[i]);\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> add a sanity check on the range to prevent being surprised by the amount of storage required if <code>min</code> is actually close to <code>INT_MIN</code> and your <code>max</code> is close to <code>INT_MAX</code> -- things could come to quick stop depending on the amount of memory available)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/freq_arr\n1 occurs 1 times\n2 occurs 2 times\n3 occurs 1 times\n4 occurs 1 times\n5 occurs 2 times\n6 occurs 1 times\n</code></pre>\n\n<p>After your edit and explanation that you are limited to 4-values, the compiler should optimize first rudimentary approach just fine. However, for any more than 4-values or when needing the frequency of anything (characters in a file, duplicates in an array, etc..), think <em>frequency</em> array.</p>\n"}], "owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52619558, "answer_count": 3, "score": 0, "last_activity_date": 1538551933, "creation_date": 1538535569, "last_edit_date": 1538548318, "question_id": 52619100, "link": "https://stackoverflow.com/questions/52619100/c-counting-the-occurrence-of-same-number-in-an-array", "title": "C - Counting the occurrence of same number in an array", "body": "<p>I have an array in C where:</p>\n\n<pre><code>int buf[4];\nbuf[0] = 1;\nbuf[1] = 2;\nbuf[2] = 5;\nbuf[3] = 2;\n</code></pre>\n\n<p>and I want to count how many elements in the array that have the same value with a counter.<br>\nIn the above example, the number of elements of similar value is <code>2</code> since there are two <code>2</code>s in the array.</p>\n\n<p><strong>I tried:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int buf[4];\n    int i = 0;\n    int count = 0;\n    buf[0] = 1;\n    buf[1] = 2;\n    buf[2] = 5;\n    buf[3] = 2;\n    int length = sizeof(buf) / sizeof(int); \n\n    for (i=0; i &lt; length; i++) {\n        if (buf[i] == buf[i+1]) {\n            count++;\n        }\n    }\n    printf(\"count = %d\", count);\n    return 0;\n }\n</code></pre>\n\n<p>but I'm getting <code>0</code> as the output. Would appreciate some help on this.</p>\n\n<hr>\n\n<h1>Update</h1>\n\n<p>Apologies for not being clear.</p>\n\n<p><strong>First:</strong>\nthe array is limited to only of size <code>4</code> since it involves <code>4</code> directions, left, bottom, top and right.</p>\n\n<p><strong>Second:</strong>\nif there is at least <code>2</code> elements in the array that have the same value, the <code>count</code> is accepted. Anything less will simply not register.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>1,2,5,2 \ncount = 2 since there are two '2's in the array.\n\n1,2,2,2\ncount = 3 since there are three '2's in the array\n\n1,2,3,4\ncount = 0 since there are no similarities in the array. Hence this is not accepted.\n</code></pre>\n\n<p>Anything less than the <code>count = 2</code> is invalid.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1538535779, "post_id": 52619095, "comment_id": 92172277, "body": "<code>double valeurTotal</code> is created on the function stack of <code>assignValue</code> its <i>address</i> no longer exists after the function returns. (leading to <i>Undefined Behavior</i> when you attempt to access the value at an address that is no longer valid) Don&#39;t assign the address, simply allocate storage for <code>presult</code> and assign the value, e.g. <code>*aData-&gt;presult = valeurTotal;</code> (or change <code>double *presult;</code> to <code>double presult;</code>) Unless you are intending to point to an array, it costs 8-bytes regardless whether it is a pointer or a <code>double</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "is_accepted": true, "score": 2, "last_activity_date": 1538536270, "last_edit_date": 1538536270, "creation_date": 1538535758, "answer_id": 52619122, "question_id": 52619095, "link": "https://stackoverflow.com/questions/52619095/in-c-im-having-trouble-getting-the-pointed-value-of-a-member-structa-double-p/52619122#52619122", "title": "In C, I&#39;m having trouble getting the pointed value of a member struct(a double pointer). The value is lost outside the function assigning the value", "body": "<pre><code>double valeurTotal = 45.50;\naData-&gt;presult = &amp;valeurTotal; //Make the pointer point to the value\n</code></pre>\n\n<p>The memory location assigned to <code>valeurTotal</code> is going to be reused when <code>assignValue</code> goes out scope. </p>\n\n<p>This is most likely the case at</p>\n\n<pre><code>printf(\"%10.3f \\n\", *(myData.presult)); // prints: 0\n</code></pre>\n\n<p>Also at this line you're trying to print a pointer as a floating number, which is wacky.</p>\n\n<pre><code>printf(\"%10.3f \\n\", (myData.presult)); // prints: 0\n</code></pre>\n\n<p>You need to actually store the value in your structure, which you can do by </p>\n\n<pre><code>typedef struct {\n  double presult; // will copy into this when its assigned.\n} SomeData;\n</code></pre>\n\n<p>Obviously, if you only wanted one double value you'd just pass that double as a pointer rather than a strucutre.</p>\n"}], "owner": {"reputation": 13, "user_id": 6094570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f9dcc07513a8a0e0577e9f1e6c13d9?s=128&d=identicon&r=PG", "display_name": "hobomath", "link": "https://stackoverflow.com/users/6094570/hobomath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 52619122, "answer_count": 1, "score": 1, "last_activity_date": 1538536270, "creation_date": 1538535518, "question_id": 52619095, "link": "https://stackoverflow.com/questions/52619095/in-c-im-having-trouble-getting-the-pointed-value-of-a-member-structa-double-p", "title": "In C, I&#39;m having trouble getting the pointed value of a member struct(a double pointer). The value is lost outside the function assigning the value", "body": "<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\ntypedef struct {\n  double *presult;\n} SomeData;\n\n//Fonction that assigns the value to be pointed\nvoid  *assignValue(void *data) {\n    SomeData *aData = (SomeData*)data;\n    double valeurTotal = 45.50;\n\n    aData-&gt;presult = &amp;valeurTotal; //Make the pointer point to the value\n\n    printf(\"%10.3f \\n\",*aData-&gt;presult); //Here it prints the right answer L 45.50\n    pthread_exit(NULL);\n}\n\nint main(int argc, char *argv[]) {\n    SomeData myData; // The struct\n    pthread_t onethread; \n    pthread_create(&amp;onethread, NULL, assignValue,(void *)&amp;myData); \n    pthread_join(onethread, NULL);\n\n    printf(\"**************************************** \\n\");\n    printf(\"%10.3f \\n\", (myData.presult)); // prints: 0\n    printf(\"%10.3f \\n\", *(myData.presult));// prints: 0\n\n    exit(0);\n}\n</code></pre>\n\n<p>Question might be confusing, so hopefully this simplified version of my code can explain better. So basically, I've created a thread that modifies the values of a struct.</p>\n\n<p>Inside the thread function, the struct is passed-on as a pointer. One of the struct's member is a double pointer 'presult'. The thread function makes the 'presult' point to a value and it seems to work, because the print works.</p>\n\n<p>However, back into the main function, I try to print the value of 'presult' again, but it doesn't print 45.50, but 0.0 instead.</p>\n\n<p>In my full code, I actually get Segmentation fault with the last print. But even in this simplified code, it doesn't work. It doesn't print 45.50.</p>\n\n<p>Output is as followed:</p>\n\n<pre><code>45.50\n****************************************\n0.000\n0.000\n</code></pre>\n\n<p>Any help is appreciated. Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1538534332, "post_id": 52618951, "comment_id": 92171963, "body": "How are you creating the processBlock object?"}, {"owner": {"reputation": 152, "user_id": 9495274, "user_type": "registered", "profile_image": "https://graph.facebook.com/1893539594003163/picture?type=large", "display_name": "David Luong", "link": "https://stackoverflow.com/users/9495274/david-luong"}, "reply_to_user": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1538534496, "post_id": 52618951, "comment_id": 92171991, "body": "@MatthewKerian my professor provided that to me. i am trying to write &quot;fillarrayfromfile&quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538538703, "post_id": 52618951, "comment_id": 92172870, "body": "When referring to structure members such as <code>processId</code>, you need to prefix the member name with the name of a variable of the structure, or the name of a pointer to the structure. For example, you might use <code>&amp;processor-&gt;processId</code> or <code>&amp;processor[count].processId</code> for the third argument to <code>fscanf()</code>.  You also need to extract the <code>fPtr</code> from the string: <code>fprintf(fPtr, &quot;%d,%d\u2026&quot;, &amp;processor-&gt;processId, \u2026)</code>.  The <code>&amp;</code> is needed to pass a pointer to <code>fscanf()</code>; otherwise, you can use <code>processor[count].processId</code> as in the assignment \u2014 though overwriting input with a fixed value is a bit pointless."}], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 9495274, "user_type": "registered", "profile_image": "https://graph.facebook.com/1893539594003163/picture?type=large", "display_name": "David Luong", "link": "https://stackoverflow.com/users/9495274/david-luong"}, "edited": false, "score": 0, "creation_date": 1538589839, "post_id": 52624298, "comment_id": 92199548, "body": "Thanks for the example! it was way more than i needed and i understand it! Thank you!"}], "tags": [], "owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "is_accepted": true, "score": 1, "last_activity_date": 1538560252, "creation_date": 1538560252, "answer_id": 52624298, "question_id": 52618951, "link": "https://stackoverflow.com/questions/52618951/variables-undefined-while-using-pointers/52624298#52624298", "title": "variables undefined while using pointers", "body": "<p>You should use a linked list to store the data you need, here there is an example, this code reads the lines of a file named test.txt that has this layout:</p>\n\n<blockquote>\n  <p>100,101,20,1,50,1,0</p>\n  \n  <p>102,105,30,1,55,1,1</p>\n  \n  <p>101,10,40,0,56,1,1</p>\n</blockquote>\n\n<p>and store all the values in a linked list, that contains your structure. I hope you'll learn something new, happy coding!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#define _CRT_SECURE_NO_WARNINGS\n\ntypedef enum States { NEW, READY, RUNNING, BLOCKED, SUSPENDED, EXIT, SUSPEND_READY } State;\n\nchar * stateNames[7] = { \"New\", \"Ready\", \"Running\", \"Blocked\", \"Suspended\", \"Exit\", \"SuspendReady\" };\n\n\nstruct processblock {\n    int processId;\n    int userId;\n    int arrivalTime;\n    int priority;\n    int expectedTimeRemaining;\n    int expectedPctCPU;\n    int realTime;          // scanf can't read boolean\n\n\n    State processState;\n    int currentPriority;\n    int timeWaitingSoFar;\n    int timeProcessingLastRun;\n    int timeProcessingSoFar;\n    int expectedMemoryNeed;\n};\n\nstruct Node\n{\n  struct processblock pblock;\n  struct Node *next;\n};\n\ntypedef struct Node * List;\n\nvoid NewNode(List * p , struct processblock pb) //function that creates new linked list nodes\n{\n    List temp;\n\n    temp = (List)malloc(sizeof(struct Node));\n    temp-&gt;pblock = pb;\n    temp-&gt;next = *p;\n\n    *p = temp;\n}\n\nint fillArrayFromFile(char *filename, List * p) {\n\n  FILE *fPtr;\n  int count = 0;\n  struct processblock pb;\n  char * buffer;\n  buffer = malloc(sizeof(struct processblock));\n\n  if(!(fPtr= fopen(filename, \"r\")))\n  {\n    perror(\"No File\");\n    fclose(fPtr);\n    return 0;\n  }\n\n  while(fgets(buffer,sizeof(struct processblock),fPtr))//read every line of file and store them in a buffer\n      {\n        if(sscanf(buffer,\"%d,%d,%d,%d,%d,%d,%d\", &amp;pb.processId, &amp;pb.userId, &amp;pb.arrivalTime, &amp;pb.priority, &amp;pb.expectedTimeRemaining, &amp;pb.expectedPctCPU, &amp;pb.realTime) == 7 ) // read from the buffer\n        {\n          NewNode(p, pb); // creates new node from filled structure\n          count++;\n        }\n      }\n  free(buffer);\n  fclose(fPtr);\n  return count;\n}\n\nvoid ViewElements(List p)\n{\n  struct processblock pb;\n  while(p != NULL)\n  {\n    pb = p-&gt;pblock;\n    printf(\"%d,%d,%d,%d,%d,%d,%d\\n\", pb.processId, pb.userId, pb.arrivalTime, pb.priority, pb.expectedTimeRemaining, pb.expectedPctCPU, pb.realTime);\n    p = p-&gt;next;\n  }\n\n}\nint main()\n{\n  List HeadNode = NULL;\n\n  printf(\"Loaded %d lines\\n\", fillArrayFromFile(\"test.txt\", &amp;HeadNode));\n  ViewElements(HeadNode);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 9495274, "user_type": "registered", "profile_image": "https://graph.facebook.com/1893539594003163/picture?type=large", "display_name": "David Luong", "link": "https://stackoverflow.com/users/9495274/david-luong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52624298, "answer_count": 1, "score": -3, "last_activity_date": 1538560252, "creation_date": 1538534203, "question_id": 52618951, "link": "https://stackoverflow.com/questions/52618951/variables-undefined-while-using-pointers", "title": "variables undefined while using pointers", "body": "<p>Hello i am slowly learning c and trying my best. \nCan someone tell me why my variables are undefined?\n\"processId, userId, arrivalTime, priority, expectedTimeRemaining, expectedPctCPU, realTime\" are all giving an error!</p>\n\n<p>Please help, i provided my code. I tried reading up about structures and pointers. Followed resources, and now i am trying to implement it myself.\nThanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n#include &lt;string.h&gt; \n#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n#define _CRT_SECURE_NO_WARNINGS\n\ntypedef enum States { NEW, READY, RUNNING, BLOCKED, SUSPENDED, EXIT, SUSPEND_READY } State;\nchar stateNames[7][14] = { \"New\", \"Ready\", \"Running\", \"Blocked\", \"Suspended\", \"Exit\", \"SuspendReady\" };\n\n\n// partial - skips info needed to actually conduct process switch - contents of registers, program counter, stack pointers, ... pointers to page tables ...\n// we ARE going to need some way of indicating IO needs so can decide when they should block\nstruct processblock {\n    int processId;\n    int userId;         // pointer instead?\n    State processState; // Not input - initially NEW\n    int arrivalTime;   // time units in simulation, not actual time\n    int priority;          // base priority\n    int currentPriority;   // can be upped or lowered based on what has happened with the process - not input - initially same as base priority\n    int timeWaitingSoFar;   // Not input - initially zero\n    int timeProcessingLastRun; // Not input - initially zero\n    int timeProcessingSoFar; // Not input - initially zero\n    int expectedTimeRemaining;\n    struct event* waitingOn;   // ??? // Not input - initially zero\n    int expectedMemoryNeed;\n    int expectedPctCPU;     // to get an idea of whether CPU bound or IO bound\n    bool realTime;          // whether a real-time process or not (real-time processes may need immediate attention)\n    struct processblock* nextPtr; // not used in this program - but preparing for linked list version\n};\n\n//fill in the array from file\nint fillArrayFromFile(struct processblock processor[], FILE*fPtr, int maxSize) {\n    int count = 0;\n    //unsure if realtime is a parameter, pls check and confirm with me\n    while ((count &lt; maxSize) &amp;&amp; fscanf(\"fPtr,%d,%d,%d,%d,%d,%d,%d\", processId, userId, arrivalTime, priority, expectedTimeRemaining, expectedPctCPU, realTime) != EOF) {\n        //fill in each part of the array\n        processor[count].processId = count;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 1464, "user_id": 2548145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1f1e38a966a7bfdc223ae886974999?s=128&d=identicon&r=PG", "display_name": "Tagore Smith", "link": "https://stackoverflow.com/users/2548145/tagore-smith"}, "edited": false, "score": 1, "creation_date": 1538533447, "post_id": 52618735, "comment_id": 92171778, "body": "Can you give a bit of context around this (like, what programming language are you using, and what problem are you trying to solve?) Otherwise, I&#39;m going to assume that you have literally posted a homework question here and asked stackoverflow to do your homework for you, from soup to nuts.  I&#39;d be happy to give you a hint, but I won&#39;t do your homework for you, and no one else should either."}, {"owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "edited": false, "score": 0, "creation_date": 1538561678, "post_id": 52618735, "comment_id": 92182763, "body": "Very interesting question. The recurrence comes in two parts - d&#39;n&#39;c part and linear part. I would like to see how it can be solved. For now i see that it is not polynomial, but O(2^n) is not a tight bound."}], "owner": {"reputation": 117, "user_id": 9317121, "user_type": "registered", "profile_image": "https://graph.facebook.com/1215448758559353/picture?type=large", "display_name": "Barton Dong", "link": "https://stackoverflow.com/users/9317121/barton-dong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1538534456, "creation_date": 1538532324, "last_edit_date": 1538534456, "question_id": 52618735, "link": "https://stackoverflow.com/questions/52618735/how-to-find-recurrence-of-an-unsorted-array-a-of-n-integers-with-no-duplicates-a", "title": "How to find recurrence of an unsorted array A of n integers with no duplicates and prove it", "body": "<p>I am trying to understand this sorting algorithm below. This is to be done in C</p>\n\n<pre><code>sort(A, i, j):\n  if i = j then\n    return\n  end if\n  m = floor(i+j/2)\n  sort(A, i, m)\n  sort(A, m + 1, j)\n  if A[m] &gt; A[j] then\n    swap A[m] and A[j]\n  end if\n  sort(A, i, j \u2212 1)\n</code></pre>\n\n<p>First, I am trying to write a recurrence that characterizes the runtime of <code>sort(A, 0, n \u2212 1)</code>. And also, how should I prove the algorithm is correct using induction? Need help, please.</p>\n"}, {"tags": ["c++", "c", "windows", "openssl", "fips"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1538662776, "post_id": 52618540, "comment_id": 92229927, "body": "Did you look at (<i>OpenSSL</i>) build log? Does it mention <i>fips</i>? As a test, what happens if you remove <i>fipscanister.lib</i> from <i>VStudio</i> in your project? Does it build? You seem to have misconfigured it (<i>OpenSSL</i>). <code>perl Configure VC-WIN64A --prefix=C:\\Build-OpenSSL-VC-64</code>: you must also pass <code>fips &#173;&#173;--with&#173;fipsdir=%FIPS_INSTALL_DIR%</code> (where <i>%FIPS_INSTALL_DIR%</i> is the directory where <i>fips</i> is installed (<i>do_fips</i>)) arguments. Is it reproducible if you build <i>OpenSSL</i> dynamic? Check <a href=\"https://www.openssl.org/docs/fips/UserGuide-2.0.pdf\" rel=\"nofollow noreferrer\">openssl.org/docs/fips/UserGuide-2.0.pdf</a>."}], "answers": [{"tags": [], "owner": {"reputation": 469, "user_id": 1306860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amH5V.jpg?s=128&g=1", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/1306860/jake-steele"}, "is_accepted": false, "score": 1, "last_activity_date": 1543260719, "creation_date": 1543260719, "answer_id": 53487814, "question_id": 52618540, "link": "https://stackoverflow.com/questions/52618540/openssl-fips-in-c-wrapper-library-how-to-err-fingerprint-does-not-match/53487814#53487814", "title": "OpenSSL Fips in C++ Wrapper Library How To? Err: fingerprint does not match", "body": "<p>So I had to add the fips_premain.c to my visual studio project. Run fips_premain_dso.exe passing in my new static lib (make sure the fips_premain.c isnt changed or it wont generate the hash) and then put the hash value into the fips_premain.c and then rebuild in visual studio and it works :D</p>\n"}], "owner": {"reputation": 469, "user_id": 1306860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amH5V.jpg?s=128&g=1", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/1306860/jake-steele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543260719, "creation_date": 1538530555, "last_edit_date": 1538553077, "question_id": 52618540, "link": "https://stackoverflow.com/questions/52618540/openssl-fips-in-c-wrapper-library-how-to-err-fingerprint-does-not-match", "title": "OpenSSL Fips in C++ Wrapper Library How To? Err: fingerprint does not match", "body": "<p>I am attempting to compile a static wrapper dll that includes the static OpenSSL Fips libraries.</p>\n\n<p>I have linked:</p>\n\n<pre><code>C:\\Work\\win_x64\\fipscanister.lib\nC:\\Work\\libeayfips32.lib\nC:\\Work\\ssleay32.lib\nws2_32.lib\ncrypt32.lib\n</code></pre>\n\n<p>I also included the directory of the libs in the includes directory.</p>\n\n<p>I have added the fips_premain.c file that was generated during the openssl-fip2.0 build. I adjusted the SHA1_HASH_SIG to equal the value in fips_premain.c.sha1 </p>\n\n<p>I am using Visual Studio 2017 to build my wrapper dll. I include the wrapper dll in my project. When I call, FIPS_mode_set(1), I get the following errors:</p>\n\n<pre><code>17480:error:2D0A3073:FIPS routines:func(163):fips selftest failed:\n.\\crypto\\ecdh\\ech_ossl.c:125: Exception thrown:\n'System.Exception' in Test.OpenSSL.dll [Test][11872][26]\nERROR [Native][-] 2018-10-03T01:13:54.971Z ERROR \nSetting fips mode: fingerprint does not match\n[Native][11872][27] ERROR [Native][-] 2018-10-03T01:13:54.972Z \nERROR Setting fips mode: fingerprint does not match Exception thrown: 'System.Exception'\nin Test.OpenSSL.dll Exception thrown:\n'System.NullReferenceException' in Test.OpenSSL.dll\n</code></pre>\n\n<p>When I ran <strong>nmake \u00adf ms\\nt.mak test</strong> all the tests completed successfully</p>\n\n<p>I must be missing a step somewhere, I am curious how others have gotten this to work.</p>\n\n<p>I built the library like:</p>\n\n<pre><code>perl Configure VC-WIN64A --prefix=C:\\Build-OpenSSL-VC-64 \nms\\do_win64a \nnmake -f ms\\nt.mak  \nnmake -f ms\\nt.mak install\n</code></pre>\n\n<p>Im using openssl-1.0.2p and openssl-fips-2.0.16 Both built properly which makes me think its how I am building my wrapper. Or maybe its unable to process the hash because its been wrapped?</p>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1538530990, "post_id": 52618537, "comment_id": 92171256, "body": "how many times did you run your program ? I tried with 4 MPI tasks and generally get different outputs between runs."}, {"owner": {"reputation": 145, "user_id": 10448841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee631428bfbd476b1ab1c60d534e084?s=128&d=identicon&r=PG&f=1", "display_name": "Maqruis1", "link": "https://stackoverflow.com/users/10448841/maqruis1"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1538531564, "post_id": 52618537, "comment_id": 92171400, "body": "I tried the same amount as you.   Did you get odd-numbered ranks having random values both 0 and 1?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1538532853, "post_id": 52618537, "comment_id": 92171663, "body": "yes I did. Which OS are you running on ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538535695, "post_id": 52618537, "comment_id": 92172254, "body": "Try running again and also report the return values of time and process ID independently.  This will provide greater insight to the issue."}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1538546509, "post_id": 52619649, "comment_id": 92174823, "body": "If the clocks are synchronized, <code>time(NULL)+world_rank</code> is different on all the MPI ranks. Maybe not ideal to have all the seeds in the same range, but that should never lead to 100% reproducible results. FWIW, I get random numbers in my environment (as long as I do not run more than one job per second)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1538540561, "creation_date": 1538540561, "answer_id": 52619649, "question_id": 52618537, "link": "https://stackoverflow.com/questions/52618537/mpi-c-unable-to-correctly-generate-random-numbers/52619649#52619649", "title": "MPI, C - Unable to correctly generate random numbers", "body": "<p>The core issue is <code>time(NULL)+world_rank</code>.</p>\n\n<p>Are these combined well?</p>\n\n<hr>\n\n<p>All even process, of course have the least significant bit  of <code>world_rank</code> as 0 and odd ones 1, by definition.</p>\n\n<p>For a given time of day, in seconds, the value from <code>time()</code> may be the same for each start of the process if started at about the same time.</p>\n\n<p>We can be reasonable sure about the properties of <code>time()</code>: it increases, it is the same each second.</p>\n\n<p>We do <em>not</em> know that the process identifier is independent from <em>time</em>.</p>\n\n<hr>\n\n<p>A first step would be to report the <em>time</em> and <em>process ID</em>.</p>\n\n<pre><code>time_t t = time(NULL);\nprintf(\"time() %lld\\n\", (long long) t);\nprintf(\"process %d\\n\", world_rank);\n</code></pre>\n\n<p>Next, combine <em>time</em> and <em>process ID</em> in some fashion better than <code>+</code>.  Let us hash <code>world_rank</code> or <code>t</code> to insure values are not trivially unrelated.</p>\n\n<p>Example: trivial <a href=\"https://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow noreferrer\">Linear congruential generator</a></p>\n\n<pre><code>const unsigned m = 1664525u;\nconst unsigned c = 1013904223u;\nunsigned t_hashed = (unsigned) t;\nt_hashed = m*t_hashed + c;\n</code></pre>\n\n<p>Now combine:</p>\n\n<pre><code>srand(t_hashed ^ world_rank);\n</code></pre>\n\n<hr>\n\n<p>Should this not provide satisfactory results, other sources of numeric <a href=\"https://en.wikipedia.org/wiki/Entropy_(information_theory)\" rel=\"nofollow noreferrer\">entropy</a> are needed.</p>\n"}], "owner": {"reputation": 145, "user_id": 10448841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee631428bfbd476b1ab1c60d534e084?s=128&d=identicon&r=PG&f=1", "display_name": "Maqruis1", "link": "https://stackoverflow.com/users/10448841/maqruis1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 52619649, "answer_count": 1, "score": 2, "last_activity_date": 1538540561, "creation_date": 1538530506, "question_id": 52618537, "link": "https://stackoverflow.com/questions/52618537/mpi-c-unable-to-correctly-generate-random-numbers", "title": "MPI, C - Unable to correctly generate random numbers", "body": "<p>Hi I am new to Stackoverflow.<br>\nI am using MPI in C. I am running 10 processes.  </p>\n\n<p>Each of my processes contains a random number generator that uniquely generates a random number (0 or 1) for that process.</p>\n\n<p>However, when I run my code, I have found that processes with even numbered ranks (such as rank 0 or rank 2 or rank 4) are only assigned the random number 0. Only 0.<br>\nMeanwhile, processes with odd numbered ranks (such as rank 1 or rank 3 or rank 4) are only assigned the random number 1.  </p>\n\n<p>How do I modify my code such that some even-numbered processes can get assigned the random number 1 and some odd-numbered processes can get assigned the random number 0?   </p>\n\n<p>Here is my code:  </p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char** argv) {\n    // Initialize the MPI environment\n    MPI_Init(NULL, NULL);\n\n    // Get the number of processes\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n    // Get the rank of the process\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n\n    //try to generate unique random number \n    srand(time(NULL)+world_rank);\n    int rando =  rand()%2;\n    // Print off rank with random number\n    printf(\"Rank %d has the random value %d\\n\", world_rank, rando);\n\n    // Finalize the MPI environment.\n    MPI_Finalize();\n}\n</code></pre>\n\n<p>Here is my output:  </p>\n\n<pre><code>Rank 0 has the random value 0\nRank 7 has the random value 1\nRank 8 has the random value 0\nRank 9 has the random value 1\nRank 1 has the random value 1\nRank 2 has the random value 0\nRank 4 has the random value 0\nRank 3 has the random value 1\nRank 5 has the random value 1\nRank 6 has the random value 0\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "lexical-analysis"], "comments": [{"owner": {"reputation": 1464, "user_id": 2548145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1f1e38a966a7bfdc223ae886974999?s=128&d=identicon&r=PG", "display_name": "Tagore Smith", "link": "https://stackoverflow.com/users/2548145/tagore-smith"}, "edited": false, "score": 0, "creation_date": 1538531530, "post_id": 52618517, "comment_id": 92171393, "body": "Is this homework? I wouldn&#39;t be unwilling to answer certain questions about it if it were, but which questions I would be willing to answer would depend on the answer to that question..."}, {"owner": {"reputation": 1079, "user_id": 1884351, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0ccc73c4be038f1bb08243adc61f5550?s=128&d=identicon&r=PG&f=1", "display_name": "fnisi", "link": "https://stackoverflow.com/users/1884351/fnisi"}, "edited": false, "score": 0, "creation_date": 1538531867, "post_id": 52618517, "comment_id": 92171460, "body": "You seem to have two <code>return</code> statements in your function? Also, I spotted to many <code>32</code>s around. Why not define a constant, say <code>#define NUMKW 32</code> and use it instead? Easier to manage"}, {"owner": {"reputation": 3, "user_id": 8879602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0c73b98c0ba3e6226d934e4ca3f826?s=128&d=identicon&r=PG&f=1", "display_name": "saltycode", "link": "https://stackoverflow.com/users/8879602/saltycode"}, "reply_to_user": {"reputation": 1464, "user_id": 2548145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1f1e38a966a7bfdc223ae886974999?s=128&d=identicon&r=PG", "display_name": "Tagore Smith", "link": "https://stackoverflow.com/users/2548145/tagore-smith"}, "edited": false, "score": 0, "creation_date": 1538535852, "post_id": 52618517, "comment_id": 92172297, "body": "@TagoreSmith Yes it is"}, {"owner": {"reputation": 1464, "user_id": 2548145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1f1e38a966a7bfdc223ae886974999?s=128&d=identicon&r=PG", "display_name": "Tagore Smith", "link": "https://stackoverflow.com/users/2548145/tagore-smith"}, "edited": false, "score": 0, "creation_date": 1538539473, "post_id": 52618517, "comment_id": 92173011, "body": "OK- well I have to be honest... this code is hard to follow, because it doesn&#39;t make a lot of sense. But let&#39;s start with a nudge: can the line that reads &#39;return flag2;&#39; ever be reached?"}, {"owner": {"reputation": 1464, "user_id": 2548145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1f1e38a966a7bfdc223ae886974999?s=128&d=identicon&r=PG", "display_name": "Tagore Smith", "link": "https://stackoverflow.com/users/2548145/tagore-smith"}, "edited": false, "score": 0, "creation_date": 1538540025, "post_id": 52618517, "comment_id": 92173113, "body": "Also- can you look at the two loops involved and tell me how they are similar and how they differ (hint: how they index into &#39;keywords&#39;?)"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "is_accepted": false, "score": 0, "last_activity_date": 1543741156, "last_edit_date": 1543741156, "creation_date": 1543740299, "answer_id": 53578749, "question_id": 52618517, "link": "https://stackoverflow.com/questions/52618517/how-can-i-get-my-lexical-analyzer-program-to-print-out-more-than-just-seperators/53578749#53578749", "title": "How can I get my Lexical analyzer program to print out more than just seperators?", "body": "<p>I think this may help.There is no reason to create an additional char ch, or the buffer, when creating the separators. Just add it onto the end of the previous line. I just split it with a comma.This will clean your code up and allow you to keep the separators with the rest of the while loop code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define KEY 32\n#define BUFFER_SIZE 15\n\nint isKeyword(char buffer[])\n{\n    char keywords[KEY][10] = { \"auto\",\"break\",\"case\",\"char\",\"const\",\"continue\",\"default\", \"do\",\"double\",\"else\",\"enum\",\"extern\",\"float\",\"for\",\"goto\",\n    \"if\",\"int\",\"long\",\"register\",\"return\",\"short\",\"signed\", \"sizeof\",\"static\",\"struct\",\"switch\",\"typedef\",\"union\", \"unsigned\",\"void\",\"volatile\",\"while\"};\n\n    int i, flag = 0;\n\n    for (i = 0; i &lt; KEY; ++i)\n    {\n        if (strcmp(keywords[i], buffer) == 0)\n        {\n            flag = 1;\n            break;\n        }\n    }\n    return flag;\n}\n\nint main()\n{\n    char ch, buffer[BUFFER_SIZE], operators[] = \"+-*/%=\", separators[] = \"(){}[]&lt;&gt;,\";\n    FILE *fp;\n    int i, j = 0;\n    fp = fopen(\"Text.txt\", \"r\");\n\n    while ((ch = fgetc(fp)) != EOF)\n    {\n\n        for (i = 0; i &lt; 6; ++i)\n        {\n            if (ch == operators[i])\n            {\n                printf(\" OPERATOR:     %c \\n\", ch);\n            }\n            else if (ch == separators[i])\n                printf(\" SEPARATOR:    %c \\n\", ch);\n        }\n\n        if (isalnum(ch))\n        {\n            buffer[j++] = ch;\n        }\n        else if ((ch == ' ' || ch == '\\n') &amp;&amp; (j != 0))\n        {\n            buffer[j] = '\\0';\n            j = 0;\n            {\n                if (isKeyword(buffer) == 1)\n                    printf(\" KEYWORD:      %s \\n\", buffer);\n                else\n                    printf(\" IDENTIFIER:   %s \\n\", buffer);\n            }\n        }\n    }\n\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qSzNu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qSzNu.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 8879602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0c73b98c0ba3e6226d934e4ca3f826?s=128&d=identicon&r=PG&f=1", "display_name": "saltycode", "link": "https://stackoverflow.com/users/8879602/saltycode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543741156, "creation_date": 1538530365, "question_id": 52618517, "link": "https://stackoverflow.com/questions/52618517/how-can-i-get-my-lexical-analyzer-program-to-print-out-more-than-just-seperators", "title": "How can I get my Lexical analyzer program to print out more than just seperators?", "body": "<p>Im writing a Lexical analyzer to read from a file and describe the text as either identifiers, keywords, separators, or operators. For some reason I am only able to output the separators, unless I delete or comment out the while loop with the print statement for the separators. When I delete that, the program prints out everything else correctly, skipping over the separators.</p>\n\n<pre><code>  #include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;ctype.h&gt;\n\nint isKeyword(char buffer[]){\n    char keywords[32][10] = {\"auto\",\"break\",\"case\",\"char\",\"const\",\"continue\",\"default\",\n                            \"do\",\"double\",\"Else\",\"enum\",\"Function\",\"Float\",\"for\",\"goto\",\n                            \"If\",\"Integer\",\"long\",\"register\",\"Return\",\"short\",\"signed\",\n                            \"sizeof\",\"static\",\"struct\",\"switch\",\"typedef\",\"union\",\n                            \"DOWhile\",\"void\",\"Write\",\"while\"};\n    int i, flag = 0;\n\n    for(i = 0; i &lt; 32; ++i){\n        if(strcmp(keywords[i], buffer) == 0){\n            flag = 1;\n            break;\n        }\n    }\n\n     int k, flag2 = 0;\n\n    for (k = 0; k&lt;32; ++k){\n        if(strcmp(keywords[i], buffer) == 0){\n        flag2 = 1;\n            break;\n        }\n    }\n\n    return flag;\n\n\n    return flag2;\n}\n\nint main(){\n    char ch, buffer2[15], operators[] = \"+-*/%=\";\n\n    char ch2, buffer[15], seperators[] = \"{}(),;\";\n    FILE *fp;\n\n    int i,k,j=0;\n\n    fp = fopen(\"input.txt\",\"r\");\n\n    if(fp == NULL){\n        printf(\"error while opening the file\\n\");\n        exit(0);\n    }\n\n    while((ch = fgetc(fp)) != EOF){\n           for(i = 0; i &lt; 6; ++i){\n               if(ch == operators[i])\n                   printf(\"%c is operator\\n\", ch);\n\n    while((ch2 = fgetc(fp)) != EOF){\n      for(k = 0; k &lt; 6; ++k){\n           if(ch2 == seperators[k])\n           printf(\"%c is seperator\\n\", ch2);\n        }\n           }\n\n           if(isalnum(ch)){\n               buffer[j++] = ch;\n           }\n           else if((ch == ' ' || ch == '\\n') &amp;&amp; (j != 0)){\n                   buffer[j] = '\\0';\n                   j = 0;\n\n                   if(isKeyword(buffer) == 1)\n                       printf(\"%s is keyword\\n\", buffer);\n                   else\n                       printf(\"%s is indentifier\\n\", buffer);\n           }\n\n    }\n }   \n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem seems to be the second while loop containing the separator instructions, but I cant seem to figure out how to print that along with everything else.</p>\n"}, {"tags": ["c", "naming", "stdio"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1538528460, "post_id": 52618248, "comment_id": 92170713, "body": "&quot;<code>type_t</code> : <code>lowercase_t</code>&quot; You should be aware that the suffix <code>_t</code> is reserved by the POSIX standard."}, {"owner": {"reputation": 787, "user_id": 6784916, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0E15Z.png?s=128&g=1", "display_name": "aganm", "link": "https://stackoverflow.com/users/6784916/aganm"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538528705, "post_id": 52618248, "comment_id": 92170763, "body": "@Rob Looking at stdio.h source, FILE is declared as : typedef struct __sFILE FILE"}, {"owner": {"reputation": 787, "user_id": 6784916, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0E15Z.png?s=128&g=1", "display_name": "aganm", "link": "https://stackoverflow.com/users/6784916/aganm"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538528767, "post_id": 52618248, "comment_id": 92170781, "body": "@Swordfish Good to know."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1538537890, "post_id": 52618248, "comment_id": 92172721, "body": "Note that there is also the type <code>DIR</code>, used by <code>opendir()</code> and friends."}], "owner": {"reputation": 787, "user_id": 6784916, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0E15Z.png?s=128&g=1", "display_name": "aganm", "link": "https://stackoverflow.com/users/6784916/aganm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1538550379, "answer_count": 0, "score": 0, "last_activity_date": 1538565139, "creation_date": 1538527886, "question_id": 52618248, "link": "https://stackoverflow.com/questions/52618248/naming-style-of-stdio-h-file", "closed_reason": "Duplicate", "title": "Naming style of stdio.h FILE", "body": "<p>In the C stdio library, why is the type FILE written as such from a coding style perspective?</p>\n\n<p>If I look at stdio.h documentation, the file follows the following naming style:</p>\n\n<ul>\n<li>functions : lowercase</li>\n<li>MACROS : UPPERCASE</li>\n<li>CONSTANTS : UPPERCASE</li>\n<li>type_t : lowercase_t</li>\n<li>FILE : ?</li>\n</ul>\n\n<p>I see other types written like size_t or uint32_t. Why does FILE break the rule?</p>\n"}, {"tags": ["c++", "c", "llvm", "llvm-ir", "llvm-c++-api"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1538527733, "post_id": 52618222, "comment_id": 92170566, "body": "Most modern operating systems randomize the running process&#39;s internal virtual address space, as a security measure."}, {"owner": {"reputation": 30038, "user_id": 16673, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bd7c0e93b52c224e284d18ac34752b8?s=128&d=identicon&r=PG", "display_name": "Suma", "link": "https://stackoverflow.com/users/16673/suma"}, "edited": false, "score": 0, "creation_date": 1538527890, "post_id": 52618222, "comment_id": 92170602, "body": "I think alloca allocates from stack, therefore you cannot control the address, as current stack pointer needs to be used."}, {"owner": {"reputation": 2500, "user_id": 452266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee44db2603eda7d1f62f0317d6b9f8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/452266/brian"}, "edited": false, "score": 0, "creation_date": 1538535073, "post_id": 52618222, "comment_id": 92172128, "body": "Replace the calls to alloca with ones to your own function, linked to the program, that will allocate in your dedicated region."}, {"owner": {"reputation": 51, "user_id": 4463952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c265e92f0852e11508115bf8c4db783d?s=128&d=identicon&r=PG&f=1", "display_name": "putiiii", "link": "https://stackoverflow.com/users/4463952/putiiii"}, "reply_to_user": {"reputation": 2500, "user_id": 452266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee44db2603eda7d1f62f0317d6b9f8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/452266/brian"}, "edited": false, "score": 0, "creation_date": 1538536645, "post_id": 52618222, "comment_id": 92172479, "body": "@Brian But do you know how to use an LLVM pass to dedicate a region of memory for allocation? So far my understanding is that even if I insert alloca instructions, all the memory allocation will occur on the regular stack. I have&#39;t yet figured out how to select a specific region of memory for all allocations to take place."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1538538611, "post_id": 52618222, "comment_id": 92172849, "body": "That transformation would effectively change all variables with automatic <a href=\"https://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">storage duration</a> to static storage duration; you could achieve that effect by declaring the variables <code>static</code>. That&#39;s an incompatible semantic change; I&#39;m not saying LLVM can&#39;t do it, but I&#39;m certain it&#39;s not a standard transformation."}, {"owner": {"reputation": 2500, "user_id": 452266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee44db2603eda7d1f62f0317d6b9f8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/452266/brian"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1538572888, "post_id": 52618222, "comment_id": 92189489, "body": "Replace all calls to alloca with calls to MY_alloca, which will allocate and manage the memory region.  Then as @rici notes, you also need to manage the freeing of these allocations at the end of the function.  So what you want to do is technically feasible..."}, {"owner": {"reputation": 51, "user_id": 4463952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c265e92f0852e11508115bf8c4db783d?s=128&d=identicon&r=PG&f=1", "display_name": "putiiii", "link": "https://stackoverflow.com/users/4463952/putiiii"}, "reply_to_user": {"reputation": 2500, "user_id": 452266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee44db2603eda7d1f62f0317d6b9f8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/452266/brian"}, "edited": false, "score": 0, "creation_date": 1538626980, "post_id": 52618222, "comment_id": 92210523, "body": "@Brian I think I get what you&#39;re saying -- I need a custom implementation of alloca. But I&#39;m not sure of how to implement this, do you have a high level idea of what the implementation might be like? I don&#39;t exactly know how to allocate memory at dedicated memory addresses even in C/C++."}, {"owner": {"reputation": 2500, "user_id": 452266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee44db2603eda7d1f62f0317d6b9f8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/452266/brian"}, "edited": false, "score": 0, "creation_date": 1538673579, "post_id": 52618222, "comment_id": 92236229, "body": "@putiiii, mmap (Linux) and VirtualAllocEx (Windows) both allocate memory and have an optional parameter to place those allocations at a specific address."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4463952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c265e92f0852e11508115bf8c4db783d?s=128&d=identicon&r=PG&f=1", "display_name": "putiiii", "link": "https://stackoverflow.com/users/4463952/putiiii"}, "edited": false, "score": 0, "creation_date": 1538626847, "post_id": 52630753, "comment_id": 92210494, "body": "I looked into linker scripts, and it seems to be that it&#39;s possible to choose where stack memory is allocated too. In your answer you only mention placing global/static variables, but would there be issues with choosing the location of the stack for local variables?"}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "reply_to_user": {"reputation": 51, "user_id": 4463952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c265e92f0852e11508115bf8c4db783d?s=128&d=identicon&r=PG&f=1", "display_name": "putiiii", "link": "https://stackoverflow.com/users/4463952/putiiii"}, "edited": false, "score": 0, "creation_date": 1538634111, "post_id": 52630753, "comment_id": 92212831, "body": "That&#39;s right, you can choose where the stack is, but the linker doesn&#39;t locate individual variables within the stack&#39;s address space. It only locates the stack itself. The address of a stack variable depends on how much stack space has been used by the callers of the function in which the variable is defined."}], "tags": [], "owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "is_accepted": false, "score": 0, "last_activity_date": 1538580844, "creation_date": 1538580844, "answer_id": 52630753, "question_id": 52618222, "link": "https://stackoverflow.com/questions/52618222/llvm-pass-to-allocate-memory-at-specific-addresses/52630753#52630753", "title": "LLVM Pass to allocate memory at specific addresses", "body": "<p>You can use a <a href=\"https://wiki.osdev.org/Linker_Scripts\" rel=\"nofollow noreferrer\">linker script</a> to place a certain section at that address, and then use an LLVM pass to <a href=\"http://llvm.org/doxygen/classllvm_1_1GlobalObject.html#a959c99adbdc7f8375cf866916c6b60f2\" rel=\"nofollow noreferrer\">place the relevant global/static variables at in that section</a>.</p>\n\n<p>However, x and y in your question are local to main(), and tend to live on the stack or perhaps even in a machine register. You know and I know that main() isn't going to call itself recursively, but the compiler tries really hard to allow recursion. Fighting that in a pass will not be simple, so <em>those</em> variables may not be easy to put in a specific section.</p>\n"}], "owner": {"reputation": 51, "user_id": 4463952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c265e92f0852e11508115bf8c4db783d?s=128&d=identicon&r=PG&f=1", "display_name": "putiiii", "link": "https://stackoverflow.com/users/4463952/putiiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1538580844, "creation_date": 1538527635, "question_id": 52618222, "link": "https://stackoverflow.com/questions/52618222/llvm-pass-to-allocate-memory-at-specific-addresses", "title": "LLVM Pass to allocate memory at specific addresses", "body": "<p>I'm trying to use an LLVM pass to transform a C/C++ program so that all memory allocations will occur only in a certain region of memory that I get to decide.</p>\n\n<p>e.g. For the following code, I want to use an LLVM pass to start all memory allocations at address 0x10000:</p>\n\n<pre><code>// Test.cpp\nint main()\n{\n    int x = 5;    // I want to allocate memory for this variable\n                  // starting at address 0x10000\n\n    int y = 6     // Memory allocated at 0x10004, since it's the second int\n\n    return 0;\n}\n</code></pre>\n\n<p>Does anyone know if this is possible to achieve via an LLVM pass? I already know I can use a pass to loop through all instructions in a program to find all alloca instructions, but I don't know how to transform a program so that alloca will allocate memory at a specific address.</p>\n"}, {"tags": ["c", "sorting"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1538526850, "post_id": 52618140, "comment_id": 92170407, "body": "What you need to do is visit stackoverflow.com&#39;s <a href=\"https://stackoverflow.com/help\">help center</a>, take the <a href=\"https://stackoverflow.com/tour\">tour</a>, and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> questions here."}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 5885523, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/a9voU.jpg?s=128&g=1", "display_name": "Judismar Arpini Junior", "link": "https://stackoverflow.com/users/5885523/judismar-arpini-junior"}, "is_accepted": true, "score": 0, "last_activity_date": 1538528091, "creation_date": 1538528091, "answer_id": 52618268, "question_id": 52618140, "link": "https://stackoverflow.com/questions/52618140/sorting-algorithms-using-void-pointers-how-can-i-do-it/52618268#52618268", "title": "Sorting algorithms using void pointers , how can I do it?", "body": "<p>In alphabetic order (or lexicographical order), you need to use the <em>strcmp</em> string function.</p>\n\n<p>Back to the main subject: the idea behind using the void pointer is to create generic code in C.</p>\n\n<p>Assuming you have an array of the type <em>void</em> *, you can assign values to it by simple doing a typecast. However, if you want to assign an <em>int</em> value, you need to assign an <em>int</em> pointer to it:</p>\n\n<pre><code>int x = 3;\nvoid *a = (int*) &amp;x;\n</code></pre>\n\n<p>Doing that in String is even easier, since its beginning is a pointer to <em>char</em>:</p>\n\n<pre><code>char s[] = \"Hello world\";\nvoid *a = (char*) s;\n</code></pre>\n\n<p>When you do <em>strcmp(s1, s2)</em>, you get, as return:</p>\n\n<ul>\n<li>-1, if s1 is behind s2 in lexicographic order;</li>\n<li>1, if s2 is behind s1 in lexicographic order;</li>\n<li>0, if s1 and s2 are the same string.</li>\n</ul>\n\n<p>Hope that helps you get started!</p>\n"}], "owner": {"reputation": 7, "user_id": 10448750, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TvhD-uJZbls/AAAAAAAAAAI/AAAAAAAAAAc/Bi-gCC3fCuM/photo.jpg?sz=128", "display_name": "BRENDON SILVA", "link": "https://stackoverflow.com/users/10448750/brendon-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1538528758, "accepted_answer_id": 52618268, "answer_count": 1, "score": -4, "last_activity_date": 1538528091, "creation_date": 1538526656, "last_edit_date": 1592644375, "question_id": 52618140, "link": "https://stackoverflow.com/questions/52618140/sorting-algorithms-using-void-pointers-how-can-i-do-it", "closed_reason": "Needs details or clarity", "title": "Sorting algorithms using void pointers , how can I do it?", "body": "<p>i'm new in this forum , so.. let's explain what I need to do.\nFirst of all , it's a home work , on this I've to create a schedule. But it's not a normal schedule , or a simple schedule, I need to do it with only one void pointer variable , to store all the memory.</p>\n<p>So everything that I should need, I need to consider that I can only save variables inside the void pointer, and after it I need to use pointer arithmetic to access everything inside the void pointer. And I can only create pointer variables , and this one can only store memory adress .</p>\n<p>So I decided to put only two variables , called name and number. Just to made this more easy to do. And named my void pointer by &quot;pbuffer&quot;.\nAfter it I create two structures , one to save all my variables , and another one to save the name and number.</p>\n<p>Alright I got it , I finished the homework , But now , I need to implement this , put in sorting algorithms , like Bubble sort ,  Selection sort , Merge sort , Quick sort and insertion sort.</p>\n<p>at this point, I've no idea , what I need to do!\nfor example : How can I sort the names by alphabetical sort ?</p>\n<p><a href=\"https://github.com/BrendonHenrique/AED1/blob/master/agenda.c\" rel=\"nofollow noreferrer\">my code in github</a></p>\n"}, {"tags": ["c", "arrays", "input", "io", "scanf"], "comments": [{"owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "edited": false, "score": 0, "creation_date": 1538526328, "post_id": 52618098, "comment_id": 92170300, "body": "I&#39;ve also been told that scanf returns 1 when an item is correctly scanned so I could replace the if statement:  scanf(&quot; %d&quot;, &amp;full_sequence[i]) ==0)  with something like scanf(&quot;%d&quot;, &amp;full_sequence[i] != 1) however this also did not work.  I guess it raises the question, how do I refer to the int value stored at a given array index, versus the value returned to indicate the success of the scanf function itself?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1538528423, "post_id": 52618098, "comment_id": 92170708, "body": "Try and get into the habit of declaring your variables where they&#39;re used so the purpose of them is clear. For example: <code>for (int i = 0; ...)</code> instead of declaring <code>i</code> well in advance. This makes it clear what type <code>i</code> is, as well as where it&#39;s scoped."}, {"owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1538529138, "post_id": 52618098, "comment_id": 92170860, "body": "@tadman good point, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "edited": false, "score": 0, "creation_date": 1538528940, "post_id": 52618180, "comment_id": 92170820, "body": "thank you for your response, particularly for educating me on &#39;size_t&#39; which I was unaware of.  Your answer has helped me immensely, thanks again"}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 2, "last_activity_date": 1538528325, "last_edit_date": 1538528325, "creation_date": 1538527082, "answer_id": 52618180, "question_id": 52618098, "link": "https://stackoverflow.com/questions/52618098/user-entering-zero-to-signal-the-end-of-input-in-c/52618180#52618180", "title": "user entering zero to signal the end of input in C", "body": "<pre><code>#include &lt;stddef.h&gt;  // size_t\n#include &lt;stdio.h&gt;   // puts(), printf(), scanf()\n\nenum { max_elements = 200 };  // don't use magic numers, give them a name\n\nint main(void)\n{\n    int full_sequence[max_elements] = { 0 };\n    size_t num_elements = 0;  // the type for sizes of objects in memory and\n                              // indexes into them is size_t, not int\n\n    puts(\"Enter sequence of integers:\");\n\n    for (size_t i = 0;\n         i &lt; max_elements  // as long as the current index is smaller than the size\n         &amp;&amp; scanf(\"%d\", &amp;full_sequence[i]) == 1  // an integer could sucessfully be read\n         &amp;&amp; full_sequence[i] != 0; // and the integer read is not 0\n         ++i)  // increase the index\n    {\n        num_elements = i + 1;  // keep count of the number of elements\n    }\n\n    puts(\"\\nEnd of input *********************\\n\");\n\n    for (size_t i = 0; i &lt; num_elements; ++i)\n        printf(\"Array element %zu is: %d\\n\", i, full_sequence[i]);\n\n    printf(\"\\nThe number of non-zero elements is: %zu\\n\", num_elements);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538565963, "post_id": 52619079, "comment_id": 92185163, "body": "When <code>stdin</code> reaches <code>EOF</code>, <code>std::cin</code> becomes unusable."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538568868, "post_id": 52619079, "comment_id": 92186831, "body": "@Swordfish And your answer correctly checks for both conditions (as well as filling the array)."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538569148, "post_id": 52619079, "comment_id": 92186994, "body": "Yes, I am just arguing against <code>EOF</code> as sole option to delimit input."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538569193, "post_id": 52619079, "comment_id": 92187024, "body": "@Swordfish As you know, the traditional way to input with <code>cin</code> until end-of-file is <code>while (std::cin &gt;&gt; x)</code>, since the return value of the stream input operator is a stream (by reference) and a stream evaluates to Boolean <code>false</code> after encountering EOF."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538569303, "post_id": 52619079, "comment_id": 92187098, "body": "Cant see your point <code>int foo; std::cin &gt;&gt; foo</code> not only fails for <code>EOF</code>."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538569776, "post_id": 52619079, "comment_id": 92187402, "body": "@Swordfish Just that <code>cin</code> is veey usable with EOF (and there is a way to check that condition specifically if you need to). What other ways there should be to mark the end of input would be domain-specific."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538569871, "post_id": 52619079, "comment_id": 92187470, "body": "Yes. And GScotts domain asks for input to end on <code>0</code>."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1538569915, "post_id": 52619079, "comment_id": 92187506, "body": "I don&#39;t think you got my point, though. After <code>EOF</code> <code>std::cin</code> will be useless for the rest of the program."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 1, "last_activity_date": 1538535405, "creation_date": 1538535405, "answer_id": 52619079, "question_id": 52618098, "link": "https://stackoverflow.com/questions/52618098/user-entering-zero-to-signal-the-end-of-input-in-c/52619079#52619079", "title": "user entering zero to signal the end of input in C", "body": "<p>Since there\u2019s another answer relevant to the coding end of things: the user traditionally signals end of input in a console program by typing the control code for end-of-file.  That\u2019s control-D on UNIX, and therefore Linux and OS X, or control-Z on Windows (and its predecessors going back to the 8-bit era).</p>\n"}], "owner": {"reputation": 199, "user_id": 5457542, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/UkY5n.png?s=128&g=1", "display_name": "Trixie the Cat", "link": "https://stackoverflow.com/users/5457542/trixie-the-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1040, "favorite_count": 0, "accepted_answer_id": 52618180, "answer_count": 2, "score": 0, "last_activity_date": 1538535405, "creation_date": 1538526201, "question_id": 52618098, "link": "https://stackoverflow.com/questions/52618098/user-entering-zero-to-signal-the-end-of-input-in-c", "title": "user entering zero to signal the end of input in C", "body": "<p>Before you flag my question as duplicate, I've already been studying these similar questions and answers:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36543524/c-how-to-signal-end-of-input\">c : How to signal end of input</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/39071321/stop-a-for-loop-when-user-is-finished-entering-input-in-c\">Stop a for loop when user is finished entering input in c</a></p>\n\n<p>According to the above reference questions, my code should be correct but for some reason I cannot get it to break out of the loop and begin printing the output upon a user entered int such as zero or minus one.  </p>\n\n<p>For the record, this is a school assignment and I am not allowed to use 'fgets' for the time being, we are restricted only to using 'scanf' </p>\n\n<p>I'm truly hoping someone can point me in the right direction here.  All I'm trying to do is have the user enter an unspecified number of ints and store them in an array.  I know the maximum number of values allowable which is why I'm using an array, however I want to give the user the option to signal the end of input by entering a zero or perhaps a minus one.  I know it should be exceedingly simple but try as I might I cannot get it to work unless the user enters a character.  </p>\n\n<p>My code is as follows:</p>\n\n<pre><code>int i = 0;\nint j = 0;\nint full_sequence[200] = {0};\nint numElements = 0;\n\nprintf(\"enter sequence of integers: \\n\");\n\n\nfor (i = 0; i &lt; 200; i++)\n{\n    if (scanf(\" %d\", &amp;full_sequence[i]) ==0)\n        break;\n        //i've also tried setting i to the maximum index instead of using break, neither of which worked;\n        else\n        {\n            scanf(\" %d\", &amp;full_sequence[i]);\n            numElements++;\n        }   \n    }\n\nfor (j = 0; j &lt; numElements; j++)\n{\n    printf(\"\\nend of input *********************\");\n    printf(\"\\nArray element %d is: %d\", j, full_sequence[j]);\n    printf(\"\\nthe number of non-zero elements is: %d\", numElements);\n}\n\nreturn 0;\n</code></pre>\n\n<p>I've also tried replacing the for loop with a while loop and attempting to use negative one as the signal of the end of the input as follows:</p>\n\n<pre><code>while (testValue &gt;= 0)\n{\n    scanf(\"%d\", &amp;testValue);\n\n    scanf(\"%d\", &amp;full_sequence[i]);\n    {\n        i++;\n        numElements++;\n    }\n</code></pre>\n\n<p>Still nothing, the console appears to continue expecting input until I enter an alphabetic character, at which point the loop is finally exited and my output prints.  Oddly the scanf function only appears to be capturing every other number that I enter.  </p>\n\n<p>If I try to rewrite the for loop to also make use of a test value to validate the scanf item before adding it to my array similar to the way I had it in my while loop, it looks like the following:</p>\n\n<pre><code>for (i = 0; i &lt; 100; i++)\n    {\n        scanf(\"%d\", &amp;testValue);\n\n        if (testValue == 0)\n            break;\n        else\n        {\n            scanf(\"%d\", &amp;full_sequence[i]);\n            numElements++;\n        }\n    }\n</code></pre>\n\n<p>Still nothing. </p>\n"}, {"tags": ["c", "for-loop", "text"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1538526678, "post_id": 52617960, "comment_id": 92170367, "body": "It looks like you are trying to use the variable <code>fives</code> to detect when the user enters a number that&#39;s too high.  I would change the that line to: <code>limit = (limit &gt;5) ? 5 : limit;</code>"}, {"owner": {"reputation": 4434, "user_id": 5523066, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/897831740252173/picture?type=large", "display_name": "Sunil Lama", "link": "https://stackoverflow.com/users/5523066/sunil-lama"}, "edited": false, "score": 0, "creation_date": 1538530016, "post_id": 52617960, "comment_id": 92171030, "body": "So, you want to be able to input any number and that should produce that number*number matrix right? Can you show what your expected output is for certain numbers"}], "owner": {"reputation": 11, "user_id": 10448723, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kqvAA1gaxhQ/AAAAAAAAAAI/AAAAAAAAJ3M/kzFtU2Bsxoc/photo.jpg?sz=128", "display_name": "Zac DeMelo", "link": "https://stackoverflow.com/users/10448723/zac-demelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538526272, "creation_date": 1538524795, "question_id": 52617960, "link": "https://stackoverflow.com/questions/52617960/having-issues-with-outputting-3x3-blocks-of", "title": "Having issues with outputting 3x3 blocks of &quot;#&quot;", "body": "<p>For one of my assignments in c, we are required to get a number of 3x3 squares of hashtags to print out. </p>\n\n<p>So far I've been able to print out as many as i want horizontally with one space between each block, but I cannot have more than 5 to a row. Here is my current code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\nint i;\nint limit;\nint fives;\nprintf(\"Enter your desired number of squares...\");\nscanf(\"%d\", &amp;limit);\nfives = limit/5;\nfor(i=0; i&lt;limit; i++){\n    printf(\"### \");    \n}\nprintf(\"\\n\");\nfor(i=0; i&lt;limit; i++){\n    printf(\"### \");\n}\nprintf(\"\\n\");\nfor(i=0; i&lt;limit; i++){\n    printf(\"### \");\n}\nprintf(\"\\n\");\n\nreturn 0;\n</code></pre>\n"}, {"tags": ["c", "gcc", "gcc4", "gcc4.7"], "comments": [{"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 7, "creation_date": 1538521065, "post_id": 52617483, "comment_id": 92169187, "body": "Your program is not valid because of undefined behavior - your read invalid memory and you can&#39;t do pointer arithmetic like this."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1538521089, "post_id": 52617483, "comment_id": 92169193, "body": "Different results probably mean your program invokes undefined behaviour.  If so, both results are right and your code is wrong."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1538522615, "post_id": 52617483, "comment_id": 92169549, "body": "There are a small number of optimizations enabled directly by <code>-O</code> rather than via one of the <code>-f</code> switches."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1538522731, "post_id": 52617483, "comment_id": 92169583, "body": "For a compiler, optimizing broken code to be worse is not forbidden."}, {"owner": {"reputation": 1, "user_id": 10448557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363962ca576097de6c0aa572b8e2b691?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Recalde", "link": "https://stackoverflow.com/users/10448557/daniel-recalde"}, "edited": false, "score": 0, "creation_date": 1538523040, "post_id": 52617483, "comment_id": 92169644, "body": "option -O assigns in VAR2 memory before VAR1. If I remove the -O option, the memory allocations are first VAR1, and then VAR2. What happens is that none of the optimizers that activate the -O option (according to the gcc man) do that"}, {"owner": {"reputation": 1, "user_id": 10448557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363962ca576097de6c0aa572b8e2b691?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Recalde", "link": "https://stackoverflow.com/users/10448557/daniel-recalde"}, "edited": false, "score": 0, "creation_date": 1538530258, "post_id": 52617483, "comment_id": 92171087, "body": "= code one would expect = behavior. For some reason the option -O acts different. Before the same code; the logic obtained is different depending on the options of the compiler"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1538560201, "post_id": 52617483, "comment_id": 92181897, "body": "<i>For some reason the option -O acts different.</i> You broke the rules of the language by invoking undefined behavior.  Whatever happens after you invoke undefined behavior is irrelevant and meaningless.  Period.  Full stop."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1538555244, "last_edit_date": 1538555244, "creation_date": 1538537448, "answer_id": 52619304, "question_id": 52617483, "link": "https://stackoverflow.com/questions/52617483/compiler-flag-in-gcc-c/52619304#52619304", "title": "Compiler flag in GCC (C)", "body": "<p>No UB no problems</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunion \n{\n  struct\n  {\n    int var1;\n    int var2;\n  };\n  int arr[2];\n}u;\n\nint main() {\n    int *pntr = &amp;u.arr[1];\n    pntr--;\n    (*pntr) = 99;\n    printf(\"Var1=%d\\n\",u.var1);\n    printf(\"Var2=%d\\n\",u.var2);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10448557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363962ca576097de6c0aa572b8e2b691?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Recalde", "link": "https://stackoverflow.com/users/10448557/daniel-recalde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1319, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1538555244, "creation_date": 1538520718, "last_edit_date": 1538522811, "question_id": 52617483, "link": "https://stackoverflow.com/questions/52617483/compiler-flag-in-gcc-c", "title": "Compiler flag in GCC (C)", "body": "<p>I have read the GCC documentation and man.\nIf I compile the code as \n  (1) gcc -o test test.c \nI get some results when executing it.\nIf I compile it as\n  (2) gcc -O -o test test.c \nI get different results when I run it.</p>\n\n<p>Reading the GCC man, I compile using (instead of -O) all the options that the man says that the option -O active.\nI do not obtain the same result as in the option (2). The result is that of the sentence (1).\nWhat does (and not documented) change the behavior of the generated program?\nThe test code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint var1 = 0;\nint var2 = 0;\n\nint main() {\n    int *pntr = &amp;var2;\n    pntr--;\n    (*pntr) = 99;\n    printf(\"Var1=%d\\n\",var1);\n    printf(\"Var2=%d\\n\",var2);\n}\n</code></pre>\n"}, {"tags": ["c", "input", "malloc"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1538520354, "post_id": 52617342, "comment_id": 92168999, "body": "you could create a linked list of integers where each node is defined as <code>struct node { int n; struct node *next;};</code>"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1538520786, "post_id": 52617342, "comment_id": 92169115, "body": "see <code>realloc</code> for increasing buffer sizes"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538520789, "post_id": 52617342, "comment_id": 92169117, "body": "its not clear if its command line (argv) input or input from a file."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1538521183, "post_id": 52617342, "comment_id": 92169214, "body": "It is mathematically possible to compute the standard deviation of a list of numbers without storing them. The math can be done in a single pass over the numbers, if you know what information you need to accumulate for them."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1538521800, "post_id": 52617342, "comment_id": 92169363, "body": "Never post a picture, or worse just a link to one, when it&#39;s just text. Add the text instead."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1538522105, "post_id": 52617342, "comment_id": 92169437, "body": "(0) You say you must accept \u201can unknown number of integers\u201d, but your sample data shows non-integers. You <b>must</b> clarify the problem statement. (1) You say you need to compute the standard deviation of a sequence of numbers and ask about storing them in memory, but it is not necessary to store numbers in order to calculate their standard deviation (per my comment above). Does the project assignment <b>explicitly</b> require you to store the numbers in memory? (2) You say your program must accept input using <code>argv</code> but also say the input is separated by newlines. Arguments passed by <code>argv</code>\u2026"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1538522113, "post_id": 52617342, "comment_id": 92169438, "body": "\u2026 usually do not include newlines. Usually, newlines appear in input from file streams. Which way are you supposed to get the input from? Is all the input coming from <code>argv</code>? In what format? Or are the numbers being read from standard input? Or from a file? Is there anything in <code>argv</code>? Perhaps a number of numbers or the name of a file to read from?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538522235, "post_id": 52617342, "comment_id": 92169476, "body": "Going back to (1), do you have a formula for computing the standard deviation of a list of numbers? What is it?"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 1, "creation_date": 1538524759, "post_id": 52617342, "comment_id": 92169984, "body": "Take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 7644370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b8d2a1b317a8afcbe9714c8773d9b1?s=128&d=identicon&r=PG&f=1", "display_name": "Singh", "link": "https://stackoverflow.com/users/7644370/singh"}, "edited": false, "score": 0, "creation_date": 1538700494, "post_id": 52617342, "comment_id": 92244704, "body": "Sorry for errors, Just looking for a way to store and allocate input that I don&#39;t know the size of."}, {"owner": {"reputation": 1, "user_id": 7644370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b8d2a1b317a8afcbe9714c8773d9b1?s=128&d=identicon&r=PG&f=1", "display_name": "Singh", "link": "https://stackoverflow.com/users/7644370/singh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538700581, "post_id": 52617342, "comment_id": 92244718, "body": "@EricPostpischil Could you elaborate on how the math could be done in a single pass without storing the numbers?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538708558, "post_id": 52617342, "comment_id": 92246062, "body": "@Singh: Do you have a formula for computing the standard deviation of a list of numbers? What is it? Does your project assignment explicitly require you to store numbers in memory?"}, {"owner": {"reputation": 1, "user_id": 7644370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b8d2a1b317a8afcbe9714c8773d9b1?s=128&d=identicon&r=PG&f=1", "display_name": "Singh", "link": "https://stackoverflow.com/users/7644370/singh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538923202, "post_id": 52617342, "comment_id": 92306026, "body": "@EricPostpischil I do have the formula. The project assignment did not require us to store numbers, but it was implied to us in the instructions. I solved the problem using linked lists and using malloc to store each node."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538923284, "post_id": 52617342, "comment_id": 92306046, "body": "@Singh: What is the formula?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538522057, "post_id": 52617506, "comment_id": 92169420, "body": "A 3rd choice is to only store the one just read.  A list is not needed in OP&#39;s case."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1538522471, "post_id": 52617506, "comment_id": 92169512, "body": "(0) There are not really only two ways. (1) There is no need for a linked list for this simple problem, and it would be wasteful. (2) An array of fixed \u201cmaximum\u201d size does not satisfy the problem requirement of accepting an unknown number of inputs."}], "tags": [], "owner": {"reputation": 341, "user_id": 4364651, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3b816b907ebc7c0492cce44d059b510c?s=128&d=identicon&r=PG&f=1", "display_name": "Elle Nolan", "link": "https://stackoverflow.com/users/4364651/elle-nolan"}, "is_accepted": false, "score": -1, "last_activity_date": 1538520926, "creation_date": 1538520926, "answer_id": 52617506, "question_id": 52617342, "link": "https://stackoverflow.com/questions/52617342/how-to-store-a-sequence-of-numbers-whose-size-is-not-know-in-advance-in-c/52617506#52617506", "title": "How to store a sequence of numbers whose size is not know in advance in C?", "body": "<p>There're really only two ways. The first is to define a <em>struct</em>:</p>\n\n<pre><code>typedef struct {\n    int value;\n    element* next;\n} element;\n</code></pre>\n\n<p>Then, you have what's called a linked list. You can access the nth element by iterating through the linked <code>element</code> structs, and you know you've reached the end when the <code>element.next</code> is a null pointer (and <code>element-&gt;next</code> is a SegFault or returns nonsense). </p>\n\n<p>The second way is to \"play it safe\" and define a fixed-length array that is the maximum size you will need.  Something like:</p>\n\n<pre><code>int my_array[65535];\n</code></pre>\n\n<p>This is advantageous because arrays are much faster than linked lists (you don't have to iterate to access the nth element) but if the array length is highly variable this can allocate much more memory than is necessary. It's up to you which you prefer.</p>\n"}, {"comments": [{"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1538532604, "post_id": 52617747, "comment_id": 92171613, "body": "Who is downvoting answers without commenting what the problem is?"}], "tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 0, "last_activity_date": 1538523028, "creation_date": 1538523028, "answer_id": 52617747, "question_id": 52617342, "link": "https://stackoverflow.com/questions/52617342/how-to-store-a-sequence-of-numbers-whose-size-is-not-know-in-advance-in-c/52617747#52617747", "title": "How to store a sequence of numbers whose size is not know in advance in C?", "body": "<p>You can allocate an array to hold your values, and you can use <code>realloc()</code> to grow that array.</p>\n\n<p>Because <code>realloc()</code> has some overhead, I would probably allocate enough memory for, maybe, 16 values. And when you fill it, then resize it to hold up to an additional 16 values and so on. This way, your code doesn't resize the memory for every value.</p>\n"}], "owner": {"reputation": 1, "user_id": 7644370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b8d2a1b317a8afcbe9714c8773d9b1?s=128&d=identicon&r=PG&f=1", "display_name": "Singh", "link": "https://stackoverflow.com/users/7644370/singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1538700636, "creation_date": 1538519595, "last_edit_date": 1538700636, "question_id": 52617342, "link": "https://stackoverflow.com/questions/52617342/how-to-store-a-sequence-of-numbers-whose-size-is-not-know-in-advance-in-c", "title": "How to store a sequence of numbers whose size is not know in advance in C?", "body": "<p>I am working on a standard deviation program in C and am having difficulty with the intended input. </p>\n\n<p>I must accept an unknown number of floats and I am not sure how to go about storing them and allocating memory for them.</p>\n\n<p>Sample input:</p>\n\n<pre>\n82.5\n1000.6699\n10\n11.11\n-45\n#\n</pre>\n\n<p>Any advice is appreciated. </p>\n\n<p>New user, sorry for little mistakes  </p>\n"}, {"tags": ["c", "linux", "security", "process", "stack"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1538517147, "post_id": 52616928, "comment_id": 92168025, "body": "Such variables will have an <i>indeterminate</i> value."}, {"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538517192, "post_id": 52616928, "comment_id": 92168031, "body": "Yes, but it is <i>possible</i> to access data left by other process?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1538517315, "post_id": 52616928, "comment_id": 92168071, "body": "Maybe, or maybe not. That&#39;s kind of the point with indeterminate values, you just can&#39;t tell what they are or what they come from. Also, for other types that plain integers, the value might be a <i>trap representation</i> and even reading those could lead to crashes."}, {"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538517483, "post_id": 52616928, "comment_id": 92168120, "body": "So in other words, the kernel does not <b>enforce</b> the zeroing procedure of the memory allocated for a new process? I know that there are performance concerns regarding this issue, but it seems a very naive approach to me, from a security standpoint"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1538517543, "post_id": 52616928, "comment_id": 92168139, "body": "Modern operating systems have background tasks to zero memory after it&#39;s released by a process. So no, that <i>indeterminate</i> value is not a value from another process."}, {"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538517757, "post_id": 52616928, "comment_id": 92168208, "body": "If that would be true, then the value of the local variable would always be zero, but it seems that it&#39;s not always zero, even on modern operating systems"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1538517882, "post_id": 52616928, "comment_id": 92168241, "body": "The non-zero values on the stack are left over from the startup code. But those values are from the current process, not from other processes."}, {"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538517911, "post_id": 52616928, "comment_id": 92168246, "body": "Oh, you are just saying that my assumption is correct?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538518007, "post_id": 52616928, "comment_id": 92168272, "body": "Zeroing only the stack leaving other memory ares not zeroed is pointless."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1538518078, "post_id": 52616928, "comment_id": 92168290, "body": "Yup, although the details are slightly different, your general idea is correct. For more about the details search <code>virtual memory zero page</code> here on SO."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1538518604, "post_id": 52616928, "comment_id": 92168455, "body": "@CosminIoni\u021b\u0103 Linux will not ever leave any remains of memory from another process in your process -doing so would be a big security hole. The code could simply use a register for what is a variable in your code, and if left uninitialized you&#39;re left with whatever was in that register from previous operations. However, using uninitialized variables is undefined behavior, the compiler could just generate junk code if your program is that ill formed - so a comprehensive answer is not that straight forward."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1538519348, "post_id": 52616928, "comment_id": 92168672, "body": "Please make a distinction between the OS and the C standard. The latter says an uninitialised variable is exactly that. The OS however might do other things, but the C code must not try to second-guess that. If the C standard says a variable is uninitialised: then you must treat it as such."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1538519554, "post_id": 52616928, "comment_id": 92168742, "body": "What the language defines and what the OS does on loading/terminating are different things.  You are right C is not intrinsically secure, but equally it does not saddle all applications with the overhead of unnecessary security - you add just the security you need, or execute in a secure environment (OS)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538519615, "post_id": 52616928, "comment_id": 92168768, "body": "In C. uninitialized data may contain trap values.  To access them can end the program."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538521279, "post_id": 52616928, "comment_id": 92169242, "body": "@Someprogrammerdude Hmm, Perhaps its UB, not <i>indeterminate</i> &quot;If the lvalue designates an object ..., and that object is uninitialized ..., the behavior is undefined.&quot; C11 &#167;6.3.2.1 2  I think with <code>unsigned char</code>, it is indeterminate."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1538602783, "post_id": 52616928, "comment_id": 92205288, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/1597405/608639\">What happens to a declared, uninitialized variable in C? Does it have a value?</a>"}, {"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538623239, "post_id": 52616928, "comment_id": 92209750, "body": "jww: This question is not duplicated by the one you mentioned. I&#39;m asking specifically if the garbage values in uninitialized variables can have values left by another process and NOT if there is a value or not, as the mentioned question says."}], "answers": [{"comments": [{"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538554625, "post_id": 52617336, "comment_id": 92178816, "body": "This is almost exactly the answer I was expecting. Thank you! However, can you say exactly if this behaviour (erasing data of previous processes) can is used by very commonly used linux distributions? Like Ubuntu / Linux Mint / Fedora / CentOS?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538572026, "post_id": 52617336, "comment_id": 92188931, "body": "@CosminIoni\u021b\u0103: I do not have specific citations for specific OS versions or distributions. Let me explain that your question is equivalent to asking an automotive engineer whether cars have door locks. You do not ask the dealer when buying a car whether it has locks, because it is a known standard feature that every new car sold for general-purpose public-street use has locks. (Special cars like race cars might not.) Similarly, every general-purpose multi-user system protects memory. I have been programming 40 years, I worked 13 years in various OS groups at Digital Equipment Corporation,\u2026"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538572084, "post_id": 52617336, "comment_id": 92188969, "body": "\u2026 and 13 years as a senior software engineer at Apple. Erasing one process\u2019 data from memory before assigning it to another process is simply fundamental; there is no question that any general-purpose multi-user system does that. That said, if you really want specific assurance about particular operating systems, you might try asking questions such as \u201cWhere in the Linux source code does it erase one process\u2019 data from memory before reassigning it to another process?\u201d I would expect the answer is somewhere in the virtual memory subsystem."}, {"owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538572393, "post_id": 52617336, "comment_id": 92189163, "body": "Outstanding! I&#39;m lucky to be part of a community composed of guys like you! Keep up the good work!"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 1, "creation_date": 1538572627, "post_id": 52617336, "comment_id": 92189308, "body": "@CosminIoni\u021b\u0103: I did find <a href=\"https://www.kernel.org/doc/gorman/pdf/understand.pdf\" rel=\"nofollow noreferrer\">this document</a> describing Linux virtual memory management. On page 52, it says that a new page is allocated for a process simply by pointing it to a read-only shared (\u201cglobally visible\u201d) page filled with zeros. When the process tries to write to the page for the first time, a hardware page fault is triggered, and then the system creates a new (non-shared) page, fills it with zeros, and marks it writable for the process. So, anytime a process allocates a new page, it gets a page of zeros."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1538572741, "post_id": 52617336, "comment_id": 92189383, "body": "(I expect there would be additional complications, as when a process is not simply allocating new memory but is mapping a file, including loading code from its own executable file. These requests would fill the newly allocated memory with data from the proper file, thus also erasing any data that memory had from a prior process.)"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 6, "last_activity_date": 1538520745, "last_edit_date": 1538520745, "creation_date": 1538519567, "answer_id": 52617336, "question_id": 52616928, "link": "https://stackoverflow.com/questions/52616928/what-exactly-is-the-value-contained-in-an-uninitialized-local-variable-in-c/52617336#52617336", "title": "What exactly is the value contained in an uninitialized local variable in C?", "body": "<p>This should be separated into two questions:</p>\n\n<ul>\n<li>What does the C standard say about the value of an uninitialized object?</li>\n<li>What is in memory when <code>main</code> is called?</li>\n</ul>\n\n<p>The first question is discussed in other Stack Overflow questions and answers. A full answer is complicated and involves a discussion of a variety of circumstances, and this question does not seem to be asking about that particularly, so I will leave it for the other Stack Overflow questions. For this question, suffice it to say that using the value of an uninitialized object is prone to undefined behavior. Further, this is not simply because the memory of the object might have troublesome values but because the C standard permits a C implementation to treat a program that reads an uninitialized value as a misbehaving program in various ways, and optimizations can then disrupt the program further.</p>\n\n<p>As far as what is in memory is concerned (supposing we have a supported way to examine it, perhaps by using assembly language instead of C), then every multiuser system that provides any sort of security erases (or otherwise initializes) memory before making it available to a process. Any values that are in memory at the time <code>main</code> is called are, as the question contemplates, either the result of the loading process or of initialization by the operating system. (Note that the result of the loading process includes both loading of constant data and program text\u2014so we would expect to find the defined values there\u2014and whatever data is leftover from the work done by the loading code\u2014its variables and so on.)</p>\n\n<p>The question asks for a clear answer, so let me be clear about this: An operating system that provides security for user processes <strong>must</strong> erase data of previous processes from memory before making that memory available to another process. Security <strong>cannot</strong> be provided by trusting a program not to examine the memory it is given and doing whatever it wants with it.</p>\n\n<p>Rudimentary systems not intended for sharing by untrusted users can of course skip the initialization of memory when creating new processes and allocating memory for them.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1538727015, "creation_date": 1538727015, "answer_id": 52661118, "question_id": 52616928, "link": "https://stackoverflow.com/questions/52616928/what-exactly-is-the-value-contained-in-an-uninitialized-local-variable-in-c/52661118#52661118", "title": "What exactly is the value contained in an uninitialized local variable in C?", "body": "<p>Well, the local variables store in stack space, so once you finish the call to the current routine, stack pointer moves up to free all the current routine local variables and, for efficiency reasons, no previous contents are erased (only the stack pointer is moved).</p>\n\n<p>If you enter a new routine, what the compiler does, is to move the stack pointer down (it doesn't push anything on the local variables space, just moves over that space to make room for the new set of local variables) and doesn't use that space until a local variable is needed in the code.  What you are asking for is how to interpret the bit pattern that the stack segment has from previous use, and that depends on how the stack has been used previously to entering the current routine.  This can be:</p>\n\n<ul>\n<li>rests of temporary data used to calculate a complex expression.</li>\n<li>parameter data of a previous call to another routine.</li>\n<li>return addresses of previous called routines.</li>\n<li>local variables of a previously called routine, that, as ended, are not in use anymore.</li>\n<li>any other thing.</li>\n</ul>\n\n<p>As that memory is used now in a different way (as the local space of current routine dictates) there's no valid interpretation of such memory contents, but as <em>trashed data from old code</em>.</p>\n"}], "owner": {"reputation": 2118, "user_id": 2787364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lxZ8k.png?s=128&g=1", "display_name": "Cosmin Ioni\u021b\u0103", "link": "https://stackoverflow.com/users/2787364/cosmin-ioni%c8%9b%c4%83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 52617336, "answer_count": 2, "score": 0, "last_activity_date": 1566707463, "creation_date": 1538517073, "question_id": 52616928, "link": "https://stackoverflow.com/questions/52616928/what-exactly-is-the-value-contained-in-an-uninitialized-local-variable-in-c", "title": "What exactly is the value contained in an uninitialized local variable in C?", "body": "<p>If we have a function in C with a simple unitialized <code>\u00ecnt</code> variable in it, we know that this variable may not be always initialized to zero. Instead, it may contain some \"garbage\" value.</p>\n\n<p>My question is: what exactly <strong>could</strong> represent that value? It can be some information left (unfreed memory) by a process that was terminated before?</p>\n\n<p>If yes, then wouldn't be this an extremely major security breach? Because in that way any process can read information left by processes that used the same address space as the current process (passwords, tokens, etc.).</p>\n\n<p>My assumption is that for each new process, the kernel zeroes the memory allocated for that new process (at least for the stack) and then it loads the executable into memory. Those \"garbage\" values are actually values generated by the <strong>loading procedure</strong> of the <strong>current process</strong> (so that there is no way to access any left data from other processes that used the same address space).</p>\n\n<p>I'm arguing with some fellows on this topic and I really want a clear and comprehensive answer to this (I'm sure there is one). We are assuming that the kernel is debian/centos based. It would be great to know if there are differences in behaviour for different kernels / OS-es.</p>\n\n<p>Thank you respectfully.</p>\n"}, {"tags": ["c", "posix"], "comments": [{"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 1, "creation_date": 1538518323, "post_id": 52616828, "comment_id": 92168370, "body": "The bonus point: each POSIX compliant man page (<code>setpriority</code> <a href=\"https://linux.die.net/man/2/setpriority\" rel=\"nofollow noreferrer\">is not an exception</a> too) shall include the revision of POSIX which the feature it describes conforms to."}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "reply_to_user": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1538520576, "post_id": 52616828, "comment_id": 92169061, "body": "Thanks @hidefromkgb ! Unfortunately, not all man pages are as complete as they should. <code>man setpriority</code> only make a brief mention of BSD 4.2 on my Mac, and for some reason, the doc I used to consult made only mention of posix 2008, which was clearly not the earliest possible conforming edition. The link you provide is much more complete ! I read it as : <code>_POSIX_VERSION &gt;= 200112L</code>"}, {"owner": {"reputation": 735, "user_id": 6558085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fff054575a8264c4947c0018a45e2b?s=128&d=identicon&r=PG", "display_name": "sinback", "link": "https://stackoverflow.com/users/6558085/sinback"}, "edited": false, "score": 1, "creation_date": 1538522089, "post_id": 52616828, "comment_id": 92169431, "body": "In general OSes don&#39;t always ship up-to-date manpages... I often use the website linked above, or <a href=\"http://man7.org/linux/man-pages/index.html\" rel=\"nofollow noreferrer\">man7.org</a>"}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 0, "creation_date": 1538522415, "post_id": 52616828, "comment_id": 92169509, "body": "Thanks ! What about <code>sys&#47;ressource.h</code> itself ? I&#39;m asking as the website mentioned displays a broken page when clicking on <code>sys&#47;ressource.h</code>, and <i>no</i> other documentation I could find on Internet would bother mentioning any pre-requisite to test the presence of this file. And obviously, trying to include a non-existing file breaks preprocessor stage, so better have a proper test for it (even a conservative one). By default, I&#39;m intending to use the same test as <code>setpriority()</code>."}, {"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 1, "creation_date": 1538527678, "post_id": 52616828, "comment_id": 92170555, "body": "The most comprehensive test I can think of is to check whether it is available right inside the Makefile and then pass a <code>#define</code> to the compiler if the check succeeded. <code>[ -f sys&#47;resource.h ] &amp;&amp; prio=-DHAVE_SETPRIORITY || prio=; clang $prio -O2 .&#47;prio.c</code> \u2014 something like that. But my spidey sense is telling me that this is a bit overkill, and it`s sufficient to just check if we are building for Windows."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1538551393, "post_id": 52616828, "comment_id": 92177189, "body": "Regarding manual pages and references, might as well go <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow noreferrer\">to the official Open Group POSIX reference site</a>. It should be complete in regards to all things POSIX."}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "reply_to_user": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1538602840, "post_id": 52616828, "comment_id": 92205315, "body": "@hidefromkgb : yes, a build test would solve that. It can be easily added into <code>Makefile</code> for example. Problem is, whenever the source file is integrated into <i>another</i> build system (XCode, visual, cmake, meson, etc.), the build test will no longer be there, and preprocessing stage will fail. So whenever possible, I try to use build macros, which do not depend on build system test."}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538602996, "post_id": 52616828, "comment_id": 92205363, "body": "@Someprogrammerdude : thanks for the link. Yes, I found that site too. Problem is, it does not mention any way to test presence of a feature. It&#39;s merely a &quot;this is what is in latest version of the standard&quot;. For example : <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_resource.h.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/basedefs/&hellip;</a> describes content of <code>sys&#47;resource.h</code>, but doesn&#39;t tell how to test its presence <i>before</i> using a <code>#include</code>."}], "owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538517747, "creation_date": 1538516543, "last_edit_date": 1538517747, "question_id": 52616828, "link": "https://stackoverflow.com/questions/52616828/posix-version-and-setpriority", "title": "_POSIX_VERSION and setpriority()", "body": "<p>Which version of Posix\nmandates the presence of <code>setpriority()</code> within <code>sys/resource.h</code> ?</p>\n\n<p>I read \"version of Posix\" as in \"value of <a href=\"https://sourceforge.net/p/predef/wiki/Standards/\" rel=\"nofollow noreferrer\"><code>_POSIX_VERSION</code> within <code>unistd.h</code></a>\".</p>\n\n<p>Bonus point if there is a generic way to answer such question as \"which version of posix supports feature X?\", since it happens frequently enough when considering portability.</p>\n"}, {"tags": ["c", "char", "printf"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1538516648, "post_id": 52616801, "comment_id": 92167863, "body": "If you&#39;re running on Linux, run your server process under <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\"><code>strace</code></a> and you&#39;ll see what&#39;s going on, especially if you use <code>strace</code> to emit what data your server process actually reads from the pipe."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1538516658, "post_id": 52616801, "comment_id": 92167865, "body": "<code>strcpy(readbu,&quot;Pepsi\\0&quot;);</code> What is this <code>\\0</code> doing here exactly?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1538516668, "post_id": 52616801, "comment_id": 92167869, "body": "<code>stdout</code> in line buffered. The contents of the buffer are not displayed on the screen until a <code>\\n</code> is printed. So putting the <code>\\n</code> at the end of the <code>printf</code> works correctly."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1538516730, "post_id": 52616801, "comment_id": 92167888, "body": "Also, you shouldn&#39;t have to do <code>fd=open(FIFO_FILE,O_RDONLY);</code> in every loop iteration."}, {"owner": {"reputation": 15, "user_id": 5112343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c581aea9711f4b424921e8bf763869?s=128&d=identicon&r=PG&f=1", "display_name": "dkm", "link": "https://stackoverflow.com/users/5112343/dkm"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1538516878, "post_id": 52616801, "comment_id": 92167945, "body": "@AndrewHenle when I checked in gdb I observed readbuf actually had correct data.  I understand stdout is line buffered. But any printf works if we dont put any \\n there. And why it prints old values when the readbuf actually has the correct data ? from where it got the old data ?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5112343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c581aea9711f4b424921e8bf763869?s=128&d=identicon&r=PG&f=1", "display_name": "dkm", "link": "https://stackoverflow.com/users/5112343/dkm"}, "edited": false, "score": 0, "creation_date": 1538518014, "post_id": 52616874, "comment_id": 92168275, "body": "Thank you @Clifford for this answer. It helped me a lot. I verified and it worked."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 2, "last_activity_date": 1538516762, "creation_date": 1538516762, "answer_id": 52616874, "question_id": 52616801, "link": "https://stackoverflow.com/questions/52616801/why-n-in-printf-prints-no-value-or-old-value-of-char-array/52616874#52616874", "title": "why \\n in printf prints no value or old value of char array?", "body": "<p>The output buffer is not normally flushed until it is either full, a newline is inserted, or an explicit <code>fflush( stdout )</code> call.</p>\n\n<p>When you have the newline at the start of the output, it flushes the previously buffered data, and buffers the following data.</p>\n\n<p>The following will resolve the issue:</p>\n\n<pre><code>printf(\"\\nRec str = %s of len %d\", readbuf,(int)strlen(readbuf));\nfflush( stdout ) ;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5112343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c581aea9711f4b424921e8bf763869?s=128&d=identicon&r=PG&f=1", "display_name": "dkm", "link": "https://stackoverflow.com/users/5112343/dkm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 52616874, "answer_count": 1, "score": 0, "last_activity_date": 1538516762, "creation_date": 1538516422, "question_id": 52616801, "link": "https://stackoverflow.com/questions/52616801/why-n-in-printf-prints-no-value-or-old-value-of-char-array", "title": "why \\n in printf prints no value or old value of char array?", "body": "<p>I was trying to test named pipe when i encountered this error. \nI have a file named client.c who writes to a named pipe.\nAnd I have a file named server.c who reads from a named pipe and print its value. \nLooks like there is some issue with server.c</p>\n\n<p>Client code.</p>\n\n<pre><code>//-------CLIENT-----------\n#include&lt;stdio.h&gt;\n#include&lt;sys/stat.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#define FIFO_FILE \"MYFIFO\"\nint main()\n{\n    int fd, ch;\n    char readbu[80];\n    int write_byte;\n    fd=open(FIFO_FILE,O_WRONLY);\n    while(1)\n    {\n        printf(\"Enter choice \\n1.Pepsi\\n2.Coke\\n3.Limca\\n4.Maza\\n\");\n        scanf(\"%d\",&amp;ch);\n        switch(ch)\n        {\n            case 1: strcpy(readbu,\"Pepsi\\0\");  \n            write_byte=write(fd,readbu,sizeof(readbu));\n            break;\n            case 2: strcpy(readbu,\"Coke\\0\");  \n            write_byte=write(fd,readbu,sizeof(readbu));\n            break;\n            case 3: strcpy(readbu,\"Limca\\0\");  \n            write_byte=write(fd,readbu,sizeof(readbu));\n            break;\n            case 4: strcpy(readbu,\"Maza\\0\");  \n            write_byte=write(fd,readbu,sizeof(readbu));\n            break;\n            default:printf(\"Invalid\");\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Server code: </p>\n\n<pre><code>// Server code    \n#include&lt;sys/stat.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#define FIFO_FILE \"MYFIFO\"\nint main()\n{\n    int fd;\n    char readbuf[80];\n    char end[10];\n    int to_end;\n    int read_bytes;\n    mknod(FIFO_FILE,S_IFIFO|0640,0);\n    strcpy(end,\"end\");\n    while(1)\n    {\n        fd=open(FIFO_FILE,O_RDONLY);\n        read_bytes=read(fd,readbuf,sizeof(readbuf));\n        readbuf[read_bytes]='\\0';\n        printf(\"Rec str = %s of len %d\", readbuf,(int)strlen(readbuf));\n        to_end=strcmp(readbuf,end);\n        if(to_end==0)\n        { close(fd);\n            break;\n        }`enter code here`\n    }\n    return 0;\n}\n</code></pre>\n\n<p>At server side above code does not print any output. </p>\n\n<p>If i change the printf statements to below then I observe that first iteration it prints blank line and then for other iteration it print old values.  </p>\n\n<pre><code>printf(\"\\nRec str = %s of len %d\", readbuf,(int)strlen(readbuf));\n</code></pre>\n\n<p>If i change the printf statements to below then I observe that it prints correct values.  </p>\n\n<pre><code>printf(\"Rec str = %s of len %d\\n\", readbuf,(int)strlen(readbuf));\n</code></pre>\n\n<p>I am completely confused how the \\n makes so much difference. </p>\n\n<p>I tried to check the value in readbuf using gdb and it actually contains the correct values.\nKindly help me understand the trick here. </p>\n"}, {"tags": ["c", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 1036, "user_id": 8209813, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-50FvkCZNkNA/AAAAAAAAAAI/AAAAAAAAABM/kJBPktdQ6uQ/photo.jpg?sz=128", "display_name": "Nick S", "link": "https://stackoverflow.com/users/8209813/nick-s"}, "is_accepted": false, "score": 6, "last_activity_date": 1538516232, "creation_date": 1538516232, "answer_id": 52616767, "question_id": 52616677, "link": "https://stackoverflow.com/questions/52616677/thread-parent-and-son-to-print-a-text-c-language/52616767#52616767", "title": "Thread parent and son to print a text C language", "body": "<p>Your program end execution before your thread start.</p>\n\n<p>add <code>pthread_join(leThread, NULL);</code> at the end of <code>main()</code></p>\n\n<p>or add <code>sleep(1);</code> and don't forget to include <code>&lt;unistd.h&gt;</code> for <code>sleep()</code></p>\n"}, {"comments": [{"owner": {"reputation": 281, "user_id": 9827438, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ana maria", "link": "https://stackoverflow.com/users/9827438/ana-maria"}, "edited": false, "score": 0, "creation_date": 1538516847, "post_id": 52616768, "comment_id": 92167928, "body": "Thank you very much for all your explanation . :)"}], "tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": true, "score": 4, "last_activity_date": 1538516235, "creation_date": 1538516235, "answer_id": 52616768, "question_id": 52616677, "link": "https://stackoverflow.com/questions/52616677/thread-parent-and-son-to-print-a-text-c-language/52616768#52616768", "title": "Thread parent and son to print a text C language", "body": "<p>The issue is that your <code>main</code> function is immediately returning. When it returns, the C standard library then causes a process exit. The process exit kills both the main thread and any other threads. Hence, your sub-thread never gets a chance to start before the main thread has effectively killed it. </p>\n\n<p>Add a <code>sleep(1)</code> just before the closing brace in <code>main</code> to delay the process exit a bit and you'll see your sub-thread's <code>printf</code> fire.</p>\n\n<p>+1 to @Nick-s' answer: one ought to <code>pthread_join</code> in order to reap the sub-thread. However, leaving my answer here for its explanation.</p>\n"}], "owner": {"reputation": 281, "user_id": 9827438, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ana maria", "link": "https://stackoverflow.com/users/9827438/ana-maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 52616768, "answer_count": 2, "score": 2, "last_activity_date": 1538516235, "creation_date": 1538515774, "last_edit_date": 1538515941, "question_id": 52616677, "link": "https://stackoverflow.com/questions/52616677/thread-parent-and-son-to-print-a-text-c-language", "title": "Thread parent and son to print a text C language", "body": "<p>I've wrote a program in which I create a thread in main that has a son who calls maFunction to show a text message . The problem is that when I execute this it doesn't work and I don't understand why . Any idea is welcomed . Thank you very much .</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\nvoid * maFonction (void * val) {\n    char * chaine = (char *) val;\n    printf (\"text received: %s\\n\", chaine);\n}\n\nint main(void) {\n    pthread_t leThread;\n    int ret = pthread_create (&amp;leThread, NULL, maFonction, \"First program with Pthreads\");\n    if (ret != 0) {\n        perror (\"pthread_create\");\n        exit(EXIT_FAILURE) ;\n    }\n} \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1538518957, "post_id": 52616639, "comment_id": 92168580, "body": "<code>strcat</code> <code>strcat</code>"}, {"owner": {"reputation": 3, "user_id": 7598952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180069656151815463d1ab7b8f6cc4ba?s=128&d=identicon&r=PG&f=1", "display_name": "tanqNting", "link": "https://stackoverflow.com/users/7598952/tanqnting"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1538519269, "post_id": 52616639, "comment_id": 92168653, "body": "@P__J__ can I do that with a array of string pointers though?"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1538526784, "post_id": 52616639, "comment_id": 92170393, "body": "It is very unclear what you want to achieve. Are you looking for an array of character arrays or just a copy of the array of string pointers?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7598952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180069656151815463d1ab7b8f6cc4ba?s=128&d=identicon&r=PG&f=1", "display_name": "tanqNting", "link": "https://stackoverflow.com/users/7598952/tanqnting"}, "edited": false, "score": 0, "creation_date": 1538519401, "post_id": 52617287, "comment_id": 92168689, "body": "You&#39;re right. I would like to have the spaces as well if possible and I would like to have multiple strings inside of array1; each index would have a different string that I could access like array1[1].... array1[n]."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 3, "user_id": 7598952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180069656151815463d1ab7b8f6cc4ba?s=128&d=identicon&r=PG&f=1", "display_name": "tanqNting", "link": "https://stackoverflow.com/users/7598952/tanqnting"}, "edited": false, "score": 0, "creation_date": 1538519681, "post_id": 52617287, "comment_id": 92168786, "body": "In that case, I don&#39;t know what you would put into each element of array1.  Perhaps you should update your question with sample input, like: <code>hello my name is tanq</code> and show what you want in the elements of <code>array1</code>."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 0, "last_activity_date": 1538519240, "creation_date": 1538519240, "answer_id": 52617287, "question_id": 52616639, "link": "https://stackoverflow.com/questions/52616639/combining-array-of-string-pointers-into-one-array/52617287#52617287", "title": "Combining array of string pointers into one array", "body": "<p>If I understand your question, you want to copy all of the tokens into a new string without the spaces.  If that's what you want, you could do something like this.  First declare your array1 like this: </p>\n\n<pre><code>char *array1;\n</code></pre>\n\n<p>Then allocate memory for it after your initial loop before you reset <code>i</code>:</p>\n\n<pre><code>array1 = malloc(i + 1);\n</code></pre>\n\n<p>Then after tokenizing, you can copy the strings:</p>\n\n<pre><code>            strcpy(array1, cmd);\n            for (i = 0; i &lt; spaces; i++) {\n                    strcat(array1, token[i]);\n            }\n            printf(\"concat: %s\\n\", array1);\n</code></pre>\n\n<p>One thing to take care of is to verify that your tokenization handles the scenario where there are no spaces.</p>\n"}], "owner": {"reputation": 3, "user_id": 7598952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180069656151815463d1ab7b8f6cc4ba?s=128&d=identicon&r=PG&f=1", "display_name": "tanqNting", "link": "https://stackoverflow.com/users/7598952/tanqnting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538519240, "creation_date": 1538515605, "last_edit_date": 1538515885, "question_id": 52616639, "link": "https://stackoverflow.com/questions/52616639/combining-array-of-string-pointers-into-one-array", "title": "Combining array of string pointers into one array", "body": "<p>My Code works properly it's just a matter of implementing another segment. Is it possible to take all string pointers in token and concatenate them into one index of another array? For example have another array or array of pointers called *array1[32] that stores all the \"concatenations\" of token into one of the indexes of array1 if that makes any sense.</p>\n\n<pre><code> printf(\"Enter text:\\n\");\n while((ch = getchar()) != '\\n')\n     str[i++] = ch;\n\n str[i] = '\\0';\n i = 0;\n\n int spaces = 0;\n for(int counter = 0; counter &lt; strlen(str) + 1; counter++){\n     if(str[counter] == ' '){\n         spaces++;\n     }\n }\n\n cmd = strtok(str, \" \");\n while(n &lt;= spaces + 1 &amp;&amp; (act_token = strtok(NULL, \" \"))){\n     token[n] = act_token;\n     n++;\n }\n token[n] = NULL;\n n = 1;\n</code></pre>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1538515908, "post_id": 52616582, "comment_id": 92167583, "body": "In your <code>search</code> function, the variable <code>p</code> is pointing to the first element of <code>magic</code>. And <code>magic</code> is a local variable which will go out of scope and cease to exist when the function returns. That will leave you with an invalid pointer, and <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 35, "user_id": 9423329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ivan Stimac", "link": "https://stackoverflow.com/users/9423329/ivan-stimac"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538516381, "post_id": 52616582, "comment_id": 92167763, "body": "what you say is logical but when you comment out free(buffer) code works. Why does it work now?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1538516521, "post_id": 52616582, "comment_id": 92167815, "body": "Seemingly working is one of the possibilities of undefined behavior. It probably works when removing the <code>free</code> call because that call might clobber the memory where the pointer is pointing."}, {"owner": {"reputation": 35, "user_id": 9423329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ivan Stimac", "link": "https://stackoverflow.com/users/9423329/ivan-stimac"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538516632, "post_id": 52616582, "comment_id": 92167856, "body": "Thanks for explanation. I will try instead of using local variable to put it on heap."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538516872, "post_id": 52616582, "comment_id": 92167942, "body": "If the array is static and non-changing, consider marking it as such. If you make the array <code>static</code> then its life-time is for the whole program and it will always exist."}, {"owner": {"reputation": 35, "user_id": 9423329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ivan Stimac", "link": "https://stackoverflow.com/users/9423329/ivan-stimac"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1538517004, "post_id": 52616582, "comment_id": 92167985, "body": "I think this is better solution because I don&#39;t know how would I free memory when I return from function"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1538517162, "post_id": 52616582, "comment_id": 92168026, "body": "Note that <code>sizeof(char)</code> is always 1 by definition."}, {"owner": {"reputation": 35, "user_id": 9423329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ivan Stimac", "link": "https://stackoverflow.com/users/9423329/ivan-stimac"}, "edited": false, "score": 0, "creation_date": 1538517319, "post_id": 52616582, "comment_id": 92168074, "body": "I know but just to be verbose I guess. Maybe it&#39;s better to keep it short though."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9423329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ivan Stimac", "link": "https://stackoverflow.com/users/9423329/ivan-stimac"}, "edited": false, "score": 0, "creation_date": 1538518771, "post_id": 52617171, "comment_id": 92168517, "body": "Thanks for deeper explanation."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 0, "last_activity_date": 1538518785, "last_edit_date": 1538518785, "creation_date": 1538518413, "answer_id": 52617171, "question_id": 52616582, "link": "https://stackoverflow.com/questions/52616582/infinite-loop-when-using-free-in-while-loop/52617171#52617171", "title": "infinite loop when using free() in while loop", "body": "<p>You cannot return a pointer to a local variable.  How you resolve that will depend on the required semantics.  In this case, declaring <code>magic</code> static will resolve the issue:</p>\n\n<pre><code>char* search(char *s)\n{\n    static char magic[3] = {0xff, 0xd8, 0xff};\n    char *p = magic;\n\n    ...\n\n    return p;  //return value should satisfie while condition\n}\n</code></pre>\n\n<p>Though if the data referenced by <code>magic</code> and <code>s</code> should not change then the following might be preferred:</p>\n\n<pre><code>const char* search( const char* s )\n{\n    static const char magic[3] = {0xff, 0xd8, 0xff};\n    const char* p = magic;\n\n    ...\n\n    return p;  \n}\n</code></pre>\n\n<p>Another issue is that your while loop does not compare the third element.</p>\n\n<pre><code>while( extractMagicNum[0]va != magicNum[0] || \n       extractMagicNum[1] != magicNum[1] || \n       extractMagicNum[1] != magicNum[1] )   // &lt;&lt; index should be 2 here perhaps?\n</code></pre>\n\n<p>Note also that a simpler method of suppressing unused variable warnings is to use self-assignment:  <code>s = s ;</code>.  The compiler will likely recognise the idiom and generate no code.</p>\n\n<p>Regarding the <code>malloc</code>/<code>free</code>, while these are not the direct cause of your problem, it nontheless serves no purpose to thrash the heap by constantly allocating and freeing the buffer of invariant size.  Just allocate the buffer once, and reuse it:</p>\n\n<pre><code>char *buffer = malloc(512);\n\nwhile( extractMagicNum[0] != magicNum[0] || \n       extractMagicNum[1] != magicNum[1] || \n       extractMagicNum[2] != magicNum[2] )\n{\n\n    ...\n}\n\nfree(buffer);\n</code></pre>\n\n<p>You could further simplify the while condition thus:</p>\n\n<pre><code>while( memcmp( extractMagicNum, \n               magicNum, \n               sizeof(magicNum) ) !=0 )\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9423329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ivan Stimac", "link": "https://stackoverflow.com/users/9423329/ivan-stimac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 52617171, "answer_count": 1, "score": 0, "last_activity_date": 1538518785, "creation_date": 1538515296, "last_edit_date": 1538515808, "question_id": 52616582, "link": "https://stackoverflow.com/questions/52616582/infinite-loop-when-using-free-in-while-loop", "title": "infinite loop when using free() in while loop", "body": "<p>I am writing a code which should read 512B from file into a buffer and then check if it found 3 specific bytes and if true break from while loop. \nI am early in my code and I am testing each sub part when I found that when I am using free() to release buffer memory from heap I get stuck in infinite loop. But my test doesn't include buffer at all and when I remove free() then test passes and I get out of loop.But I think that I have to free buffer in the loop so at each pass I can load new block. My code is here: </p>\n\n<pre><code>// input: read in a card.raw file\n// output: 50 jpg images\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar* search(char *s);\n\nint main(int argc, char *argv[])\n{\n    // ensure correct usage\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage --&gt; recover card.raw\\n\");\n        return 1;\n    }\n\n    // try to open a file for reading\n    char *infile = argv[1];\n    FILE *fp = fopen(infile,\"r\");\n    if (fp == NULL)\n    {\n        fprintf(stderr,\"Can't open file: %s\\n\", infile);\n    }\n\n    // read a 512B block process it and\n    char magicNum[3] = {0xff, 0xd8, 0xff};\n    char testNum[3] = {0xfa, 0xd8, 0xff};\n    char *extractMagicNum = testNum;\n    while (extractMagicNum[0] != magicNum[0] || extractMagicNum[1] != magicNum[1] || extractMagicNum[1] != magicNum[1])\n    {\n        char *buffer = malloc(sizeof(char) * 512);\n        fread(buffer, sizeof(char),512, fp);\n        // now search buffer for 0xff and when found check next two bytes if magic number break\n        printf(\"I am in while loop\\n\");\n        extractMagicNum = search(buffer);\n        // used for checking if return value is right\n        for (int i = 0; i &lt; 3; i++)\n        {\n            printf(\"%i.Element is %i\\n\",i,*(extractMagicNum + i));\n        }\n\n        free(buffer);\n    }\n\n    printf(\"End...\\n\");\n\n\n    // close infile\n    fclose(fp);\n\n}\n\n// use bisection search to find 0xff and next two bytes\nchar* search(char *s)\n{\n    char magic[3] = {0xff, 0xd8, 0xff};\n    char *p = magic;\n    // just not to get unused error\n    s++;\n    s--;\n    printf(\"I am in search \\n\");\n\n    return p;  //return value should satisfie while condition\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel"], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 6558085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fff054575a8264c4947c0018a45e2b?s=128&d=identicon&r=PG", "display_name": "sinback", "link": "https://stackoverflow.com/users/6558085/sinback"}, "is_accepted": true, "score": 8, "last_activity_date": 1538515707, "last_edit_date": 1538515707, "creation_date": 1538514936, "answer_id": 52616508, "question_id": 52616271, "link": "https://stackoverflow.com/questions/52616271/timing-clocks-in-the-linux-kernel/52616508#52616508", "title": "Timing/Clocks in the Linux Kernel", "body": "<p>Are you comparing measurements you're making in the kernel directly with measurements you've made in userspace? I'm wondering about your choice to use <code>CLOCK_MONOTONIC_RAW</code> as the timebase in the kernel, since you chose to use <code>CLOCK_MONOTONIC</code> in userspace. If you're looking for an analogous and non-coarse function in the kernel which returns <code>CLOCK_MONOTONIC</code> (and not <code>CLOCK_MONOTONIC_RAW</code>) time, look at <code>ktime_get_ts()</code>.</p>\n\n<p>It's possible you could also be using raw kernel ticks to be measuring what you're trying to measure (rather than jiffies, which represent multiple kernel ticks), but I do not know how to do that off the top of my head.</p>\n\n<p>In general if you're trying to find documentation about Linux timekeeping, you can take a look at <code>Documentation/timers/timekeeping.txt</code>. Usually when I try to figure out kernel timekeeping I also unfortunately just spend a lot of time reading through the kernel source in <code>time/</code> (<code>time/timekeeping.c</code> is where most of the functions you're thinking of using right now live... it's not super well-commented, but you can probably wrap your head around it with a little bit of time). And if you're feeling altruistic after learning, remember that updating documentation is a good way to contribute to the kernel :)</p>\n\n<p>To your question at the end about how clocks are affected by timing adjustments and what epochs are used:</p>\n\n<p><code>CLOCK_REALTIME</code> always starts at Jan 01, 1970 at midnight (colloquially known as the Unix Epoch) if there are no RTC's present or if it hasn't already been set by an application in userspace (or I guess a kernel module if you want to be weird). Usually the userspace application which sets this is the ntp daemon, <code>ntpd</code> or <code>chrony</code> or similar. Its value represents the number of seconds passed since 1970.</p>\n\n<p><code>CLOCK_MONTONIC</code> represents the number of seconds passed since the device was booted up, and if the device is suspended at a <code>CLOCK_MONOTONIC</code> value of <code>x</code>, when it's resumed, it resumes with <code>CLOCK_MONOTONIC</code> set to <code>x</code> as well. It's not supported on ancient kernels.</p>\n\n<p><code>CLOCK_BOOTTIME</code> is like <code>CLOCK_MONOTONIC</code>, but has time added to it across suspend/resume -- so if you suspend at a <code>CLOCK_BOOTTIME</code> value of <code>x</code>, for 5 seconds, you'll come back with a <code>CLOCK_BOOTTIME</code> value of <code>x+5</code>. It's not supported on old kernels (its support came about after <code>CLOCK_MONOTONIC</code>).</p>\n\n<p>Fully-fleshed NTP daemons (not SNTP daemons -- that's a more lightweight and less accuracy-creating protocol) set the system clock, or <code>CLOCK_REALTIME</code>, using <code>settimeofday()</code> for large adjustments (\"steps\" or \"jumps\") -- these immediately affect the total value of <code>CLOCK_REALTIME</code>, and using <code>adjtime()</code> for smaller adjustments (\"slewing\" or \"skewing\") -- these affect the rate at which <code>CLOCK_REALTIME</code> moves forward per CPU clock cycle. I think for some architectures you can actually tune the CPU clock cycle through some means or other, and the kernel implements <code>adjtime()</code> this way if possible, but don't quote me on that. From both the bulk of the kernel's perspective and userspace's perspective, it doesn't actually matter.</p>\n\n<p><code>CLOCK_MONOTONIC</code>, <code>CLOCK_BOOTTIME</code>, and all other friends slew at the same rate as <code>CLOCK_REALTIME</code>, which is actually fairly convenient in most situations. They're not affected by steps in <code>CLOCK_REALTIME</code>, only by slews.</p>\n\n<p><code>CLOCK_MONOTONIC_RAW</code>, <code>CLOCK_BOOTTIME_RAW</code>, and friends do NOT slew at the same rate as <code>CLOCK_REALTIME</code>, <code>CLOCK_MONOTONIC</code>, and <code>CLOCK_BOOTIME</code>. I guess this is useful sometimes.</p>\n\n<p>Linux provides some process/thread-specific clocks to userspace (<code>CLOCK_PROCESS_CPUTIME_ID</code>, <code>CLOCK_THREAD_CPUTIME_ID</code>), which I know nothing about. I do not know if they're easily accessible in the kernel.</p>\n"}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "accepted_answer_id": 52616508, "answer_count": 1, "score": 4, "last_activity_date": 1538515707, "creation_date": 1538513716, "question_id": 52616271, "link": "https://stackoverflow.com/questions/52616271/timing-clocks-in-the-linux-kernel", "title": "Timing/Clocks in the Linux Kernel", "body": "<p>I am writing a device driver and want to benchmark a few pieces of code to get a feel for where I could be experiencing some bottlenecks. As a result, I want to time a few segments of code.</p>\n\n<p>In userspace, I'm used to using <code>clock_gettime()</code> with <code>CLOCK_MONOTONIC</code>. Looking at the kernel sources (note that I am running kernel 4.4, but will be upgrading eventually), it appears I have a few choices:</p>\n\n<ul>\n<li><code>getnstimeofday()</code></li>\n<li><code>getrawmonotonic()</code></li>\n<li><code>get_monotonic_coarse()</code></li>\n<li><code>getboottime()</code></li>\n</ul>\n\n<p>For convenience, I have written a function (see below) to get me the current time. I am currently using <code>getrawmonotonic()</code> because I figured this is what I wanted. My function returns the current time as a <code>ktime_t</code>, so then I can use <code>ktime_sub()</code> to get the elapsed time between two times.</p>\n\n<pre><code>static ktime_t get_time_now(void) {\n   struct timespec time_now;\n   getrawmonotonic(&amp;time_now);\n   return timespec_to_ktime(time_now);\n}\n</code></pre>\n\n<p>Given the available high resolution clocking functions (jiffies won't work for me), what is the best function for my given application? More generally, I'm interested in any/all documentation about these functions and the underlying clocks. Primarily, I am curious if the clocks are affected by any timing adjustments and what their epochs are.</p>\n"}, {"tags": ["c", "winapi", "assembly"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538514135, "post_id": 52616221, "comment_id": 92166936, "body": "you want programming for windows without windows header files ? wwhy you not want include <code>windows.h</code> ? you of course can use <code>__readfsdword</code> and <code>__readgsqword</code>, etc. but what sense in all this ?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1538514778, "post_id": 52616221, "comment_id": 92167148, "body": "<code>__asm</code> is not supported in 64 bit builds"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538514915, "post_id": 52616221, "comment_id": 92167204, "body": "<code>__readfsdword</code> not macro but inline function for <i>cl</i> compiler. how not use windows headers or <code>__readfsdword</code> help you <i>to deep dive in API and ABI.</i> ?"}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1538519729, "post_id": 52616221, "comment_id": 92168804, "body": "You have this marked as both &#39;assembly&#39; and &#39;c.&#39;  Does that mean you are coding in assembler?  Using VStudio?  Gcc?  Using hardware specific features (like <code>gs:</code> or <code>fs:</code>) isn&#39;t going to have a generic solution."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1538524868, "post_id": 52617931, "comment_id": 92170009, "body": "for what need link against ntdll.dll ? <code>NtCurrentTeb()</code> not require this. if implement <code>NtCurrentPeb()</code> by read <code>ProcessEnvironmentBlock</code> value from teb - again - for what <code>ntdll.dll</code> here if we nothing call from it ?"}], "tags": [], "owner": {"reputation": 11, "user_id": 9693774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18958929cc9126077a0bca388cf36c48?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo121", "link": "https://stackoverflow.com/users/9693774/jozo121"}, "is_accepted": false, "score": 1, "last_activity_date": 1538524553, "creation_date": 1538524553, "answer_id": 52617931, "question_id": 52616221, "link": "https://stackoverflow.com/questions/52616221/how-to-use-ntcurrentteb-without-windows-header-files/52617931#52617931", "title": "How to use NtCurrentTeb() without Windows header files?", "body": "<p>Declare function prototype and link against ntdll.dll.</p>\n"}, {"tags": [], "owner": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "is_accepted": true, "score": 0, "last_activity_date": 1543554496, "creation_date": 1543554496, "answer_id": 53551572, "question_id": 52616221, "link": "https://stackoverflow.com/questions/52616221/how-to-use-ntcurrentteb-without-windows-header-files/53551572#53551572", "title": "How to use NtCurrentTeb() without Windows header files?", "body": "<p>To read from <code>gs</code> or <code>fs</code> segment register, I have used this assembly in Visual Studio. Create a C/C++ empty project in Visual Studio with <a href=\"https://stackoverflow.com/a/33757749/8928481\">these settings enabled</a>. <code>fs</code> or <code>gs</code> segment register provides <a href=\"https://en.wikipedia.org/wiki/Win32_Thread_Information_Block\" rel=\"nofollow noreferrer\">NT_TIB</a> structure in 32 bit and 64 bit Windows respectively. TEB is at <code>0x30</code> offset in NT_TIB structure. So the assembly in 64 bit will be: <code>mov rax, gs:[30h]</code>.</p>\n\n<p>Here is a sample source code to get current directory of an executable file: </p>\n\n<ul>\n<li>ProcParam.asm:</li>\n</ul>\n\n\n\n<pre><code>.code\n\nProcParam PROC\n\nmov rax, gs:[30h]      ; TEB from gs in 64 bit only\nmov rax, [rax+60h]     ; PEB\nmov rax, [rax+20h]     ; RTL_USER_PROCESS_PARAMETERS\nret\n\nProcParam ENDP\n\nend\n</code></pre>\n\n<ul>\n<li>main.c:</li>\n</ul>\n\n\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct _UNICODE_STRING {\n    unsigned short Length;\n    unsigned short MaximumLength;\n    wchar_t* Buffer;\n} UNICODE_STRING, *PUNICODE_STRING;\n\ntypedef struct _CURDIR {\n    UNICODE_STRING DosPath;\n    void* Handle;\n} CURDIR, *PCURDIR;\n\n/*Extracted from ntdll.pdb file*/\n\ntypedef struct _RTL_USER_PROCESS_PARAMETERS {\n    unsigned int MaximumLength;\n    unsigned int Length;\n    unsigned int Flags;\n    unsigned int DebugFlags;\n    void* ConsoleHandle;\n    unsigned int ConsoleFlags;\n    void* StandardInput;\n    void* StandardOutput;\n    void* StandardError;\n    CURDIR CurrentDirectory;\n    /*Many more*/\n} RTL_USER_PROCESS_PARAMETERS, *PRTL_USER_PROCESS_PARAMETERS;\n\nPRTL_USER_PROCESS_PARAMETERS ProcParam(void);\n\nint main(void)\n{\n    wprintf(L\"%s\\n\", ProcParam()-&gt;CurrentDirectory.DosPath.Buffer);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "is_accepted": false, "score": 1, "last_activity_date": 1586431343, "creation_date": 1586431343, "answer_id": 61120012, "question_id": 52616221, "link": "https://stackoverflow.com/questions/52616221/how-to-use-ntcurrentteb-without-windows-header-files/61120012#61120012", "title": "How to use NtCurrentTeb() without Windows header files?", "body": "<p>I really do not understand why you answered your own question incompletely. This confuses further readers because you did not provide the appropriate answer to <strong>the question itself</strong>.</p>\n\n<p>You do not need to use ASM for this, you can use <a href=\"https://docs.microsoft.com/en-us/cpp/intrinsics/compiler-intrinsics?view=vs-2019\" rel=\"nofollow noreferrer\">intrinsic functions</a> like so:</p>\n\n<pre><code>#ifdef _M_X64\n    auto pPEB = (PPEB)__readgsqword(0x60);\n#elif _M_IX86\n    auto pPEB = (PPEB)__readfsdword(0x30);\n#else\n    #error \"PPEB Architecture Unsupported\"\n#endif\n</code></pre>\n\n<p>But to answer <strong>the actual question</strong>, here is how to do is via ASM:</p>\n\n<p><strong>x64 ASM (TEB/PEB):</strong></p>\n\n<pre><code>GetTEBAsm64 proc\n    push rbx\n    xor rbx,rbx\n    xor rax,rax\n    mov rbx, qword ptr gs:[00000030h]\n    mov rax, rbx\n    pop rbx\n    ret\nGetTEBAsm64 endp\n\nGetPEBAsm64 proc\n    push rbx\n    xor rbx,rbx\n    xor rax,rax\n    mov rbx, qword ptr gs:[00000060h]\n    mov rax, rbx\n    pop rbx\n    ret\nGetPEBAsm64 endp\n</code></pre>\n\n<p><strong>x86 - PEB:</strong></p>\n\n<pre><code>__asm\n    {\n    mov eax, dword ptr fs : [00000030h]\n    mov peb, eax\n}\n</code></pre>\n\n<p><strong>x86 - TEB:</strong></p>\n\n<pre><code>__asm\n    {\n        mov eax, dword ptr fs : [00000018h]\n        mov teb, eax\n    }\n</code></pre>\n\n<p>I strongly hope that my answer is clear and that someone else in the future can benefit from it.</p>\n"}], "owner": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1539, "favorite_count": 0, "accepted_answer_id": 53551572, "answer_count": 3, "score": 0, "last_activity_date": 1586431343, "creation_date": 1538513521, "question_id": 52616221, "link": "https://stackoverflow.com/questions/52616221/how-to-use-ntcurrentteb-without-windows-header-files", "title": "How to use NtCurrentTeb() without Windows header files?", "body": "<p>Windows stores the <a href=\"https://en.wikipedia.org/wiki/Win32_Thread_Information_Block\" rel=\"nofollow noreferrer\">TEB</a> in FS (32bit) or GS (64bit) segment register. In a program using <code>NtCurrentPeb()</code> the x86 instruction is <code>mov rax, gs:60h</code>. The <code>0x60</code> value is <code>offsetof(TEB, ProcessEnvironmentBlock)</code>. </p>\n\n<p>To use this in a program I've to include both <code>Windows.h</code> and <code>Winternl.h</code> header file which has bunch of other <code>#define</code>. As the question said I want to use the function without these header file and by directly accessing the segment register. I've also made a separate header file with the TEB and PEB structure. So how can I do that? I was thinking with <code>__asm</code> keyword and a <code>typedef NtCurrentTeb()</code> or something.</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 1, "creation_date": 1538514249, "post_id": 52616215, "comment_id": 92166970, "body": "Don&#39;t read files from kernel space. Don&#39;t do it. Don&#39;t you do it!"}, {"owner": {"reputation": 11, "user_id": 6859284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eW7Aj.jpg?s=128&g=1", "display_name": "TheFrozenDuck", "link": "https://stackoverflow.com/users/6859284/thefrozenduck"}, "reply_to_user": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1538520791, "post_id": 52616215, "comment_id": 92169118, "body": "It&#39;s just an exercise for me. I could easily do this by also writing a userland client, but it does not have the same charm for me as playing around with the kernel."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6859284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eW7Aj.jpg?s=128&g=1", "display_name": "TheFrozenDuck", "link": "https://stackoverflow.com/users/6859284/thefrozenduck"}, "edited": false, "score": 1, "creation_date": 1538517287, "post_id": 52616284, "comment_id": 92168063, "body": "I&#39;m indeed trying to access <b>dev/sda</b>. I programmed a tool that reads the GPT table, which works fine for the userspace. I&#39;m having problems to reimplement this in the kernelspace as <b>open</b>, <b>read/write</b> and <b>close</b> are missing"}, {"owner": {"reputation": 735, "user_id": 6558085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fff054575a8264c4947c0018a45e2b?s=128&d=identicon&r=PG", "display_name": "sinback", "link": "https://stackoverflow.com/users/6558085/sinback"}, "reply_to_user": {"reputation": 11, "user_id": 6859284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eW7Aj.jpg?s=128&g=1", "display_name": "TheFrozenDuck", "link": "https://stackoverflow.com/users/6859284/thefrozenduck"}, "edited": false, "score": 0, "creation_date": 1538518256, "post_id": 52616284, "comment_id": 92168344, "body": "I&#39;m no expert on the code managing the GPT table, but I think it&#39;s in <code>block&#47;partitions&#47;efi.*</code>. Maybe this exposes some functions that could help you. Doesn&#39;t look like there&#39;s a ton of documentation on it tracked with the kernel repository.  If you specify you&#39;re trying to read the GPT table in the question text or perhaps the title, it might get more visibility with folks familiar with this part of the kernel."}, {"owner": {"reputation": 11, "user_id": 6859284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eW7Aj.jpg?s=128&g=1", "display_name": "TheFrozenDuck", "link": "https://stackoverflow.com/users/6859284/thefrozenduck"}, "edited": false, "score": 0, "creation_date": 1538520639, "post_id": 52616284, "comment_id": 92169078, "body": "The problem is I need to directly access the storage, as I need to check the GPT for certain values that might not show up accessing it the official way."}], "tags": [], "owner": {"reputation": 735, "user_id": 6558085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fff054575a8264c4947c0018a45e2b?s=128&d=identicon&r=PG", "display_name": "sinback", "link": "https://stackoverflow.com/users/6558085/sinback"}, "is_accepted": false, "score": 3, "last_activity_date": 1538514169, "last_edit_date": 1538514169, "creation_date": 1538513767, "answer_id": 52616284, "question_id": 52616215, "link": "https://stackoverflow.com/questions/52616215/linux-kernel-read-write-to-a-file/52616284#52616284", "title": "Linux Kernel - Read/Write to a File", "body": "<p>This is strongly discouraged in most situations.</p>\n\n<p><a href=\"https://www.linuxjournal.com/article/8110\" rel=\"nofollow noreferrer\">https://www.linuxjournal.com/article/8110</a> was a really good read for me the first time I thought I had to do this as well.</p>\n\n<blockquote>\n  <p>From within the Linux kernel, however, reading data out of a file for configuration information is considered to be forbidden. This is due to a vast array of different problems that could result if a developer tries to do this. </p>\n</blockquote>\n\n<p>Indeed this is possible to do using system calls from within the kernel, but the practice of calling system calls from within the kernel is also generally discouraged. They're designed as interfaces for userspace applications to ask things of the kernel, not for the kernel to get itself to do work.</p>\n\n<p>What kind of files do you want to manipulate from within the kernel? If the kind of file you'd like to manipulate is provided by the proc filesystem or the sysfs filesystem or the dev filesystem, you can modify the contents of the file from within the kernel (since the kernel provides these to userspace itself) -- this should be done NOT with file manipulation calls. If it's a normal userspace file, almost never do you want the kernel to be able to modify it.</p>\n\n<p>If you provide more specifics I'd be interested to hear them, but this is usually a bad idea.</p>\n"}], "owner": {"reputation": 11, "user_id": 6859284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eW7Aj.jpg?s=128&g=1", "display_name": "TheFrozenDuck", "link": "https://stackoverflow.com/users/6859284/thefrozenduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538514181, "creation_date": 1538513501, "last_edit_date": 1538514181, "question_id": 52616215, "link": "https://stackoverflow.com/questions/52616215/linux-kernel-read-write-to-a-file", "title": "Linux Kernel - Read/Write to a File", "body": "<p>I'm working on a LKM which needs to retrieve and write a certain set of information to files. I looked up common ways to do so, but could not find a working one for Linux 4.x. I also found out that it is possible to retrieve system calls from memory and effectively call them.</p>\n\n<p>As I found currently no better way I'd be interested if it'd be feasible to find the system call table, and call <strong>open</strong>, <strong>read/write</strong> and <strong>close</strong> this way.</p>\n"}]