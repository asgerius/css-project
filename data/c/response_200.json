[{"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1541634157, "post_id": 53199548, "comment_id": 93287667, "body": "Read the manual: <a href=\"http://www.manpagez.com/man/3/scanf/\" rel=\"nofollow noreferrer\">White space (such as blanks, tabs, or newlines) in the <i>format</i> string match any amount of white space, including none, in the input.</a>"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541634227, "post_id": 53199548, "comment_id": 93287686, "body": "You just need <code>scanf(&quot; &lt;%d ;%d &gt; %c&quot;, &amp;lo, &amp;hi, &amp;op);</code> i think."}, {"owner": {"reputation": 1865, "user_id": 4480179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/402c73696935000510e2d09c0ef746ef?s=128&d=identicon&r=PG", "display_name": "Jozef Cipa", "link": "https://stackoverflow.com/users/4480179/jozef-cipa"}, "edited": false, "score": 0, "creation_date": 1541634401, "post_id": 53199548, "comment_id": 93287733, "body": "Thanks! It solved my problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1541655206, "last_edit_date": 1541655206, "creation_date": 1541638321, "answer_id": 53200072, "question_id": 53199548, "link": "https://stackoverflow.com/questions/53199548/ignore-whitespaces-in-scanf-format/53200072#53200072", "title": "Ignore whitespaces in scanf format", "body": "<p>Put spaces before the literal characters in the format string for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/scanf.html\" rel=\"nofollow noreferrer\"><code>scanf()</code></a>.  You don't actually need spaces before most <code>%</code> conversion specifications (<code>%c</code>, <code>%n</code> and <code>%[\u2026]</code> are the exceptions; they do <em>not</em> skip white space), but they may as well be there for symmetry (they do not harm).  Hence:</p>\n\n<pre><code>if (scanf(\" &lt; %d ; %d &gt; %c\", &amp;lo, &amp;hi, &amp;op) == 3)\n    \u2026all OK \u2014 at least, three values were read OK\u2026\n</code></pre>\n\n<p>If you were matching a <code>%</code> symbol in the input, you'd use <code>%%</code> in the format string; that'll <a href=\"https://stackoverflow.com/q/53200858/2410359\">skip leading white space</a> too.</p>\n"}], "owner": {"reputation": 1865, "user_id": 4480179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/402c73696935000510e2d09c0ef746ef?s=128&d=identicon&r=PG", "display_name": "Jozef Cipa", "link": "https://stackoverflow.com/users/4480179/jozef-cipa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 53200072, "answer_count": 1, "score": -1, "last_activity_date": 1541655206, "creation_date": 1541633959, "question_id": 53199548, "link": "https://stackoverflow.com/questions/53199548/ignore-whitespaces-in-scanf-format", "title": "Ignore whitespaces in scanf format", "body": "<p>I read input using <code>scanf</code> in given format:</p>\n\n<pre><code>scanf(\"&lt;%d;%d&gt;%c\", &amp;lo, &amp;hi, &amp;op);\n</code></pre>\n\n<p>This accepts some string like <code>&lt;1;10&gt;k</code>. This works when I enter exactly in that syntax, but it doesn't work with whitespaces, so e.g. this won't work: </p>\n\n<pre><code>    &lt;      1 ;\n3 &gt;      \n k\n</code></pre>\n\n<p>So how do I make <code>scanf</code> ignore these whitespaces?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1541633856, "post_id": 53199478, "comment_id": 93287588, "body": "&quot;Is such declaration allow&quot; \u2013 yes. All numbers are: <code>0700</code>, <code>&#39;B&#39;</code>, <code>42</code>. They are all just numbers."}, {"owner": {"reputation": 1081, "user_id": 2178427, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gymYO.png?s=128&g=1", "display_name": "hyperum", "link": "https://stackoverflow.com/users/2178427/hyperum"}, "edited": false, "score": 2, "creation_date": 1541636893, "post_id": 53199478, "comment_id": 93288298, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8186965/what-do-numbers-using-0x-notation-mean\">What do numbers using 0x notation mean?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 56, "user_id": 6844146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a79cebd7c697458fce7ebe7ba44f1eb?s=128&d=identicon&r=PG&f=1", "display_name": "hess", "link": "https://stackoverflow.com/users/6844146/hess"}, "edited": false, "score": 0, "creation_date": 1541634135, "post_id": 53199518, "comment_id": 93287660, "body": "You can also check the conversion here: <a href=\"https://www.wolframalpha.com/input/?i=dec(0x400)\" rel=\"nofollow noreferrer\">wolframalpha.com/input/?i=dec(0x400)</a>"}], "tags": [], "owner": {"reputation": 56, "user_id": 6844146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a79cebd7c697458fce7ebe7ba44f1eb?s=128&d=identicon&r=PG&f=1", "display_name": "hess", "link": "https://stackoverflow.com/users/6844146/hess"}, "is_accepted": false, "score": 0, "last_activity_date": 1541634108, "last_edit_date": 1541634108, "creation_date": 1541633676, "answer_id": 53199518, "question_id": 53199478, "link": "https://stackoverflow.com/questions/53199478/char-array-declared-with-0x/53199518#53199518", "title": "Char array declared with [0x...]", "body": "<p><code>0x400</code> is a <a href=\"https://en.wikipedia.org/wiki/Hexadecimal\" rel=\"nofollow noreferrer\">hexadecimal</a> representation. Usually, when you see a number in this format <code>0x&lt;number&gt;</code> it means the number is represented as an hexadecimal.</p>\n\n<p>Also, <a href=\"https://i.stack.imgur.com/bwIDV.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bwIDV.gif\" alt=\"https://www.wolframalpha.com/input/?i=dec(0x400)\"></a>.\nSo yes, the first array is (624 positions) bigger.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1541634061, "creation_date": 1541634061, "answer_id": 53199561, "question_id": 53199478, "link": "https://stackoverflow.com/questions/53199478/char-array-declared-with-0x/53199561#53199561", "title": "Char array declared with [0x...]", "body": "<p>Values starting with <code>0x</code> are interpreted as hexadecimal values in C and C++. So</p>\n\n<blockquote>\n<pre><code>char line[0x400];\n</code></pre>\n</blockquote>\n\n<p>declares an Array of <code>char</code> of 1024 elements and</p>\n\n<blockquote>\n<pre><code>char line[400];\n</code></pre>\n</blockquote>\n\n<p>an Array of <code>char</code> of 400 elements.</p>\n"}], "owner": {"reputation": 31, "user_id": 10615877, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pMug-YAF-yw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAKaPP7gVPMpYJ6z-r82i9TTVibQA/mo/photo.jpg?sz=128", "display_name": "Don Kielon", "link": "https://stackoverflow.com/users/10615877/don-kielon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541634108, "creation_date": 1541633470, "question_id": 53199478, "link": "https://stackoverflow.com/questions/53199478/char-array-declared-with-0x", "title": "Char array declared with [0x...]", "body": "<p>In program that put data by fgets to char array, array is declared like that:</p>\n\n<pre><code>char line[0x400];\n</code></pre>\n\n<p>Is such declaration allow to input more data to array? I dont understand why not to use:</p>\n\n<pre><code>char line[400];\n</code></pre>\n"}, {"tags": ["c", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1541632690, "post_id": 53199340, "comment_id": 93287288, "body": "Have you consulted the instruction set reference? <code>cmovb %edi, %eax</code> is equivalent to <code>if (below) eax = edi</code> where of course &quot;below&quot; refers to a particular condition set previously by the <code>cmp</code>. You just need to follow what&#39;s in each register."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1541640994, "post_id": 53199340, "comment_id": 93289296, "body": "<a href=\"http://www.felixcloutier.com/x86/CMOVcc.html\" rel=\"nofollow noreferrer\">felixcloutier.com/x86/CMOVcc.html</a> possible duplicate: <a href=\"https://stackoverflow.com/q/53011701/995714\">What does the instruction sete do in assembly?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1541634274, "post_id": 53199536, "comment_id": 93287698, "body": "Bit of a brainfart there; mixing up ARM and x86 assembly. :|"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1541634318, "last_edit_date": 1541634318, "creation_date": 1541633791, "answer_id": 53199536, "question_id": 53199340, "link": "https://stackoverflow.com/questions/53199340/assembly-cmovb-instruction-in-intel-x86-64-assembly/53199536#53199536", "title": "Assembly: CMOVB instruction in Intel x86-64 assembly", "body": "<p><code>C MOV B</code> = Conditional MOVe if Below (Carry Flag Set). It literally does what it says, if the condition is met then move. The condition is <code>a&lt;b</code> and the value moved is <code>2*b</code></p>\n\n<p>The ABI stores the return value in <code>%edi</code>, so it first stores <code>a</code> and then conditionally overwrites it with <code>2*b</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1541634543, "post_id": 53199600, "comment_id": 93287768, "body": "&quot;cmovb, cmovnae, and cmovc all perform the same way&quot;. Yeah, no wonder. It&#39;s the exact same instruction. (<code>0F 42</code>)"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1541635312, "post_id": 53199600, "comment_id": 93287934, "body": "@MSalters: Yup. It&#39;s very common/typical in this particular instruction set."}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 0, "last_activity_date": 1541634308, "creation_date": 1541634308, "answer_id": 53199600, "question_id": 53199340, "link": "https://stackoverflow.com/questions/53199340/assembly-cmovb-instruction-in-intel-x86-64-assembly/53199600#53199600", "title": "Assembly: CMOVB instruction in Intel x86-64 assembly", "body": "<p>Like Jester commented to the question, the <code>cmov*</code> family of instructions are conditional moves, paired via the <em>flags</em> register with a previous (comparison) operation.</p>\n\n<p>You can use for example the <a href=\"https://software.intel.com/en-us/download/intel-64-and-ia-32-architectures-sdm-combined-volumes-1-2a-2b-2c-2d-3a-3b-3c-3d-and-4\" rel=\"nofollow noreferrer\">Intel documentation</a> as a reference for the x86-64/AMD64 instruction set. The conditional move instructions are shown on page 172 of the combined volume.</p>\n\n<p><code>cmovb</code>, <code>cmovnae</code>, and <code>cmovc</code> all perform the same way: If the carry flag is set, they move the source operand to the destination operand. Otherwise they do nothing.</p>\n\n<p>If we then look at the preceding instructions that affect flags, we'll see that the <code>cmp</code> instruction (the <code>l</code> suffix is part of AT&amp;T syntax, and means the arguments are \"longs\") changes the set of flags depending on the difference between the two arguments. In particular, if the second is smaller than the first (in AT&amp;T syntax), the carry flag is set, otherwise the carry flag is cleared; just as if a subtraction was performed without storing the result anywhere.  (The <code>cmp</code> instruction affects other flags as well, but they are ignored by the code.)</p>\n"}], "owner": {"reputation": 79, "user_id": 10480006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UxEMRoFuY_c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXESgHoUGwL10mCkmJYrpwF3jBwVg/mo/photo.jpg?sz=128", "display_name": "boomken", "link": "https://stackoverflow.com/users/10480006/boomken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 53199600, "answer_count": 2, "score": 1, "last_activity_date": 1541634318, "creation_date": 1541632529, "last_edit_date": 1541633430, "question_id": 53199340, "link": "https://stackoverflow.com/questions/53199340/assembly-cmovb-instruction-in-intel-x86-64-assembly", "title": "Assembly: CMOVB instruction in Intel x86-64 assembly", "body": "<p>I'm a little confused about what \"cmovb\" does in this assembly code</p>\n\n<pre><code>leal   (%rsi, %rsi), %eax  // %eax &lt;- %rsi + %rsi\ncmpl   %esi, %edi          // compare %edi and %esi\ncmovb  %edi, %eax\nret\n</code></pre>\n\n<p>and the C code for this is:</p>\n\n<pre><code>int foo(unsigned int a, unsigned int b)\n{\n    if(a &lt; b) \n        return a;\n    else\n        return 2*b;\n}\n</code></pre>\n\n<p>Can anyone help me understand how <code>cmovb</code> works here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 8, "creation_date": 1541632594, "post_id": 53199337, "comment_id": 93287253, "body": "What does not work? Your input request is not inside the loop."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1541634496, "post_id": 53199337, "comment_id": 93287754, "body": "<code>#define EXIT_SUCCESS 0;</code> what is this supposed to do?"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1541634663, "post_id": 53199337, "comment_id": 93287798, "body": "Just put <code>getchar()</code> before the <code>return 0;</code>"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 1, "creation_date": 1541635097, "post_id": 53199337, "comment_id": 93287887, "body": "you say &quot;until a teacher types in exit&quot;, but you have not prepared to accept &quot;exit&quot; as input -- you are only scanning for numerical input ...  and not checking to see if the input was successfully parsed as numerical ..."}, {"owner": {"reputation": 441, "user_id": 5325067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0de99c01c9c50323415b1498fb0e2ae?s=128&d=identicon&r=PG&f=1", "display_name": "ad3angel1s", "link": "https://stackoverflow.com/users/5325067/ad3angel1s"}, "reply_to_user": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1541635201, "post_id": 53199337, "comment_id": 93287913, "body": "@landru27 exit is defined as -1."}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1541635428, "post_id": 53199337, "comment_id": 93287955, "body": "<code>EXIT_SUCCESS</code> is already <code>#define</code>&#39;d in <code>&lt;stdlib.h&gt;</code>;  your line <code>#define EXIT_SUCCESS 0;</code> is not doing whatever you think it&#39;s doing, and the trailing <code>;</code> would almost certainly cause a compile-time error if you did try to use it in the way it looks like it is meant to be used (to mean &#39;zero&#39;)"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "reply_to_user": {"reputation": 441, "user_id": 5325067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0de99c01c9c50323415b1498fb0e2ae?s=128&d=identicon&r=PG&f=1", "display_name": "ad3angel1s", "link": "https://stackoverflow.com/users/5325067/ad3angel1s"}, "edited": false, "score": 0, "creation_date": 1541635846, "post_id": 53199337, "comment_id": 93288046, "body": "@ad3angel1s :  right; so if the teacher types in <code>-1</code>, that will mean something, but there is nothing in this program that causes the string value <code>exit</code> to equate to the numerical value <code>-1</code>"}, {"owner": {"reputation": 538, "user_id": 10443568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c1364c6ab0f7ad2840ed8abf37d09b?s=128&d=identicon&r=PG", "display_name": "Parkofadown", "link": "https://stackoverflow.com/users/10443568/parkofadown"}, "edited": false, "score": 0, "creation_date": 1541636417, "post_id": 53199337, "comment_id": 93288178, "body": "I keep getting LNK1120 and LNK2019 errors. VS 2015."}, {"owner": {"reputation": 538, "user_id": 10443568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c1364c6ab0f7ad2840ed8abf37d09b?s=128&d=identicon&r=PG", "display_name": "Parkofadown", "link": "https://stackoverflow.com/users/10443568/parkofadown"}, "edited": false, "score": 0, "creation_date": 1541636457, "post_id": 53199337, "comment_id": 93288189, "body": "How do you make exit as an input to exit the program? Wouldn&#39;t you have two different data types?"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 1, "creation_date": 1541636979, "post_id": 53199337, "comment_id": 93288314, "body": "there are a few approaches to coping with input that might be a string or might be a number; e.g., you could input a string, and then test to see if that string can be parsed as a number ...  but I strongly feel you should just prompt the user with <code>Enter student grade or &#39;-1&#39; to exit</code> and focus on more fundamental matters, such as error checking your function call return values, putting the input logic in the right place to have it repeated, re-thinking what you were attempting with <code>EXIT_SUCCESS</code>, and other basic things"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541640950, "post_id": 53199337, "comment_id": 93289288, "body": "when compiling, always enable the warnings, then fix those warnings.  ( for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -Werror -pedantic -std=gnu11</code> )  Note: other compilers use different options to perform the same functionality."}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 10443568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c1364c6ab0f7ad2840ed8abf37d09b?s=128&d=identicon&r=PG", "display_name": "Parkofadown", "link": "https://stackoverflow.com/users/10443568/parkofadown"}, "is_accepted": false, "score": 0, "last_activity_date": 1541642283, "creation_date": 1541642283, "answer_id": 53200502, "question_id": 53199337, "link": "https://stackoverflow.com/questions/53199337/c-teacher-usage-grading-program/53200502#53200502", "title": "C Teacher Usage Grading Program", "body": "<p>Figured it out, thanks for your help.     </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#define exit -1\n\nint main(void) {\n\n    int grade;\n\n\n    printf(\"Enter student grade , or '-1' to exit \\n\");\n    scanf_s(\"%d\", &amp;grade);\n    while (grade != exit) {\n        printf(\"Students grade is: %d\", grade);\n        if (grade &lt; 65)\n        {\n            printf(\"\\nStudent grade is: F\\n\");\n        }\n        else if (grade &lt;= 69)\n        {\n            printf(\"\\nStudent grade is: D\\n\");\n        }\n        else if (grade &lt;= 79)\n        {\n            printf(\"\\nStudent grade is: C\\n\");\n        }\n        else if (grade &lt;= 89)\n        {\n            printf(\"\\nStudent grade is: B\\n\");\n\n        }\n        else if (grade &lt;= 100)\n        {\n            printf(\"\\nStudent grade is: A\\n\");\n        }\n        else if (grade == exit) {\n            exit;\n        }\n        printf(\"Enter student grade , or '-1' to exit \\n\");\n        scanf_s(\"%d\", &amp;grade);\n    }\n    fgetc(stdin);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 10457872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa5e120d8d4d1f1f39f3b1aff06eeb4?s=128&d=identicon&r=PG&f=1", "display_name": "Davidwestcoast", "link": "https://stackoverflow.com/users/10457872/davidwestcoast"}, "reply_to_user": {"reputation": 538, "user_id": 10443568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c1364c6ab0f7ad2840ed8abf37d09b?s=128&d=identicon&r=PG", "display_name": "Parkofadown", "link": "https://stackoverflow.com/users/10443568/parkofadown"}, "edited": false, "score": 0, "creation_date": 1558350946, "post_id": 53200504, "comment_id": 99060043, "body": "I double checked it on onlinegdb seems to work fine on there."}], "tags": [], "owner": {"reputation": 17, "user_id": 10457872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa5e120d8d4d1f1f39f3b1aff06eeb4?s=128&d=identicon&r=PG&f=1", "display_name": "Davidwestcoast", "link": "https://stackoverflow.com/users/10457872/davidwestcoast"}, "is_accepted": false, "score": -1, "last_activity_date": 1541643736, "last_edit_date": 1541643736, "creation_date": 1541642305, "answer_id": 53200504, "question_id": 53199337, "link": "https://stackoverflow.com/questions/53199337/c-teacher-usage-grading-program/53200504#53200504", "title": "C Teacher Usage Grading Program", "body": "<p>A few things before the answer: Please do some research, learn, and understand this code before you submit it. I'm not saying you will, but lots of students I went to school with would blindly copy and paste their homework and this only hurts you in the long run. It's not as complicated as you think, once you learn the logic it becomes way easier.</p>\n\n<p>Some Resources that I recommend you study for this homework: <a href=\"https://stackoverflow.com/questions/10204471/convert-char-array-to-a-int-number-in-c\">Convert char array to a int number in C</a>, <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_sscanf.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/c_standard_library/c_function_sscanf.htm</a></p>\n\n<p>If you want to be able to enter the word \"exit\" or an int in the same array, you need to write it to a char array. The idea is to convert the string to an int if it is a number. You can do This with something like sscanf or atoi.</p>\n\n<p>If you were to type \"exit\" it is case sensitive. You can make all the cases lower or upper case using a for loop. In my case I take the user input and compare it to my array exit_Array. If it returns 0 ( It matches) it moves on to the next stage which is exiting the program.</p>\n\n<p>If it is an int it moves on to phase 1, which is grading. Once it is graded it lowers the phase by 1 so it becomes 0 (enters the first loop again). It will do this over and over until the user enters \"exit\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\nchar input_Array[3];\nchar exit_Array[] = \"exit\";\n\nint grade;\nint phase = -1;\n\nphase++;\nwhile(phase == 0)\n{\n    printf(\"Enter student grade: \");\n    scanf(\"%s\", input_Array);\n\n    // Converts all letters to lower case so it can be Exit, eXiT, etc.\n    for(int i = 0; i &lt;= strlen(input_Array); i++)\n    {\n        input_Array[i] = tolower(input_Array[i]);\n    }\n\n    // Exit Input\n    if(strcmp(input_Array, exit_Array) == 0)\n    {\n        printf(\"Goodbye!\");\n        exit(0);\n    }\n    else\n    {\n        // Convert String to Number\n        grade = atoi(input_Array);\n    }\n    phase++;\n\n    while(phase == 1)\n        {\n            if (grade &lt; 65)\n                {\n                    printf(\"Student grade is: F\\n\");\n                }\n            else if (grade &lt;= 69)\n                {\n                    printf(\"Student grade is: D\\n\");\n                }\n            else if (grade &lt;= 79)\n                {\n                    printf(\"Student grade is: C\\n\");\n                }\n            else if (grade &lt;= 89)\n                {\n                    printf(\"Student grade is: B\\n\");\n                }\n            else if (grade &lt;= 100)\n                {\n                    printf(\"Student grade is: A\\n\");\n                }\n            phase--;\n        }\n}\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 538, "user_id": 10443568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c1364c6ab0f7ad2840ed8abf37d09b?s=128&d=identicon&r=PG", "display_name": "Parkofadown", "link": "https://stackoverflow.com/users/10443568/parkofadown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1541643736, "creation_date": 1541632490, "question_id": 53199337, "link": "https://stackoverflow.com/questions/53199337/c-teacher-usage-grading-program", "title": "C Teacher Usage Grading Program", "body": "<p>I am trying to make a program so that the teacher can type in a number and it will output the corresponding alphabetical grade in C. Here is what I have so far, I am trying to make the console program stay open until a teacher types in exit or clicks the X icon. I appreciate any help. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#define exit -1\n\nint main(void) {\n\n    int grade;\n\n\n    printf(\"Enter student grade: \");\n    scanf_s(\"%d\", &amp;grade);\n    printf(\"Students grade is: %d\", grade);\n\n    while (grade != exit) {\n\n        if (grade &lt; 65)\n        {\n            printf(\"\\nStudent grade is: F\\n\");\n        }\n        else if (grade &lt;= 69)\n        {\n            printf(\"\\nStudent grade is: D\\n\");\n        }\n        else if (grade &lt;= 79)\n        {\n            printf(\"\\nStudent grade is: C\\n\");\n        }\n        else if (grade &lt;= 89)\n        {\n            printf(\"\\nStudent grade is: B\\n\");\n\n        }\n        else if (grade &lt;= 100)\n        {\n            printf(\"\\nStudent grade is: A\\n\");\n        }\n        else if (grade == exit) {\n        #define EXIT_SUCCESS 0;\n        }\n        break;\n    }\n    printf(\"Enter student grade: \");\n    scanf_s(\"%d\", &amp;grade);\n    printf(\"Students grade is: %d\", grade);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 4, "creation_date": 1541631328, "post_id": 53199124, "comment_id": 93286809, "body": "Does <code>fopen</code> lead to a segmentation fault, or don&#39;t you check the return value and just used it? In the latter case the question should be why you can not open this file."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1541631435, "post_id": 53199124, "comment_id": 93286858, "body": "No, <code>fopen()</code> doesn&#39;t give you a segmentation fault error.  The code that you <i>didn&#39;t</i> post that uses <code>f</code> after <code>fopen()</code> failed and you didn&#39;t check for errors is what&#39;s giving you a segmentation fault."}], "answers": [{"comments": [{"owner": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 0, "creation_date": 1541631548, "post_id": 53199152, "comment_id": 93286887, "body": "Then fopen returns NULL, which is probably the reason of the segmentation fault. You should elaborate on this, since this is the actual question..."}], "tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": false, "score": 3, "last_activity_date": 1541631351, "creation_date": 1541631351, "answer_id": 53199152, "question_id": 53199124, "link": "https://stackoverflow.com/questions/53199124/segmentation-fault-when-writting-full-location-of-the-file/53199152#53199152", "title": "Segmentation fault when writting full location of the file", "body": "<p><code>~</code> is a notation that is expanded by your shell (e.g. Bash) into your home directory, so if you invoke a program like <code>vim ~/proj/viagens.txt</code>, the shell will expand the parameter into <code>/home/ventura/proj/viagens.txt</code> <em>before</em> the program <code>vim</code> ever sees it. <code>~</code> is <em>not</em> understood by <code>fopen</code>, which requires an absolute path path or a path relative to the current working directory.</p>\n\n<p>(As @Osiris and @AndrewHenle point out in their comments, <code>fopen</code> doesn't segfault, but it will return null when it can't find the file, which will cause a segfault down the line when you try to use <code>f</code> as a file descriptor.)</p>\n"}], "owner": {"reputation": 65, "user_id": 10597941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1696addb2161767a46f3b50ead41503?s=128&d=identicon&r=PG&f=1", "display_name": "Ventura", "link": "https://stackoverflow.com/users/10597941/ventura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1541631351, "creation_date": 1541631156, "question_id": 53199124, "link": "https://stackoverflow.com/questions/53199124/segmentation-fault-when-writting-full-location-of-the-file", "title": "Segmentation fault when writting full location of the file", "body": "<p>Quick question\nThis code gives me Segmentation fault error</p>\n\n<pre><code>f = fopen(\"~/proj/viagens.txt\", \"r\");\n</code></pre>\n\n<p>But this one doesnt</p>\n\n<pre><code>f = fopen(\"viagens.txt\", \"r\");\n</code></pre>\n\n<p>Why's that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 5, "creation_date": 1541631029, "post_id": 53199080, "comment_id": 93286721, "body": "please post code and output as text, not as image."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1541631142, "post_id": 53199080, "comment_id": 93286753, "body": "No, here we don&#39;t have code. We have an image of your screen. Code is text (unless you&#39;re writing yours in an image editor), and that&#39;s how it needs to be posted here."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1541631147, "post_id": 53199080, "comment_id": 93286756, "body": "&amp;&amp; everytime you use global variables a kitty dies :("}, {"owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1541631177, "post_id": 53199080, "comment_id": 93286765, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7769998/how-to-return-local-array-in-c\">How to return local array in C++?</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1541631338, "post_id": 53199080, "comment_id": 93286814, "body": "Does the compiler warn you that you assign a 2D array to pointer to <code>int</code>? Whatever, you&#39;ll get the array&#39;s first element. I can&#39;t check the compiler warnings because I can&#39;t compile the code because an image of code can&#39;t be compiled."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1541631369, "post_id": 53199080, "comment_id": 93286830, "body": "@The Dark: dup shows how to allocate a 1D array; might be more tricky in case of a 2d array."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541631718, "post_id": 53199080, "comment_id": 93286935, "body": "Ah, now I get <i>warning C4047: &#39;=&#39;: &#39;int *&#39; differs in levels of indirection from &#39;int (</i>)[10]&#39;*"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541631873, "post_id": 53199080, "comment_id": 93286992, "body": "@WeatherVane You are telling fairytales. C4047 is a warning of the Microsoft C/C++-compiler. But the Microsoft C/C++-compiler doesn&#39;t support variable-length arrays in the first place. (and doesn&#39;t know of <code>&lt;array.h&gt;</code>)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1541631944, "post_id": 53199080, "comment_id": 93287016, "body": "@Swordfish you are right, I hard coded the array definition as <code>int num[10][10];</code> but the same applies."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1541632009, "post_id": 53199080, "comment_id": 93287043, "body": "See my answer. First thing is that you have your <code>point</code> refer to an address of a function-local variable, 2nd is that the types don&#39;t match."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1541632173, "post_id": 53199080, "comment_id": 93287102, "body": "how was i rude??"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1541633522, "post_id": 53199080, "comment_id": 93287486, "body": "The code you have shown us will generate lots of compiler warnings and cannot possibly give the output you show. Show us real code and real output."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 2, "last_activity_date": 1541631643, "creation_date": 1541631643, "answer_id": 53199205, "question_id": 53199080, "link": "https://stackoverflow.com/questions/53199080/do-not-understand-memory-surfing-in-c/53199205#53199205", "title": "Do not understand memory surfing in C", "body": "<p>With</p>\n\n<blockquote>\n<pre><code>point = num;\n</code></pre>\n</blockquote>\n\n<p>you are setting <code>point</code> to an address of a function local variable. All further access of that will be undefined behaviour.</p>\n"}], "owner": {"reputation": 25, "user_id": 10278225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf77a277f950e9852899daaa8a648895?s=128&d=identicon&r=PG&f=1", "display_name": "Wage", "link": "https://stackoverflow.com/users/10278225/wage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1541632364, "answer_count": 1, "score": -3, "last_activity_date": 1541631643, "creation_date": 1541630878, "last_edit_date": 1541631568, "question_id": 53199080, "link": "https://stackoverflow.com/questions/53199080/do-not-understand-memory-surfing-in-c", "closed_reason": "Needs details or clarity", "title": "Do not understand memory surfing in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;array.h&gt;\n\nint col, str;\nint *point;\n\nvoid setArr()\n{\n    printf(\"Input columns=\"); scanf(\"%d\", &amp;col);\n    printf(\"Input strings=\"); scanf(\"%d\", &amp;str);\n    int num[str][col];\n    for(int i = 0; i &lt; str; ++i)\n    {\n        for(int j = 0; j &lt; col; ++j)\n        {\n            scanf(\"%d\", &amp;num[i][j];\n        }\n    }\n    point = num;\n}\n\nint main(void)\n{\n    setArr();\n    printf(\"First=%d\\n\", *point);\n    printf(\"Number=%d\", *point);\n}\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>Input columns=2\nInput strings=2\n1\n2\n3\n4\nFirst=1\nNumber=1740639104\n</code></pre>\n\n<p>Here we have code in C, that have to get exact number from array using pointer, but during many attempts I understand that there is something I do not understand or just do not know.So there is a problem(or it have to be like this), namely, I refer to pointer ,which points on first element two times and I get different results in each case. Why it happened and in which way I could solve it? Thanks,everyone. </p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541630308, "post_id": 53198944, "comment_id": 93286459, "body": "<code>scanf(&quot;%s&quot;,&amp;input);</code> -&gt; <code>scanf(&quot;%s&quot;,input);</code> , <code>strArray[i] = input;</code> -&gt; <code>strcpy(strArray[i], input);</code>"}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541630359, "post_id": 53198944, "comment_id": 93286483, "body": "@Osiris that&#39;s the same thing right? the array works as a pointer but &amp; works too right?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541630391, "post_id": 53198944, "comment_id": 93286496, "body": "<code>input</code> decays to a pointer to <code>char</code> while <code>&amp;input</code> is a pointer to <code>char[100]</code>. So it is not the same, and <code>%s</code> expects a pointer to <code>char</code>."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541630475, "post_id": 53198944, "comment_id": 93286520, "body": "Oh i see, and as for the strcpy() function, is that the only way for this &quot;procedure&quot; to be done? Can it also be done with pointers?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541630531, "post_id": 53198944, "comment_id": 93286541, "body": "You can loop over the array and copy it element wise. Or you can use <code>memcpy</code>. You can not copy arrays with the <code>=</code> operator."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541630608, "post_id": 53198944, "comment_id": 93286571, "body": "@Osiris understood, thank you very much."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1541630778, "last_edit_date": 1541630778, "creation_date": 1541630458, "answer_id": 53198999, "question_id": 53198944, "link": "https://stackoverflow.com/questions/53198944/populating-an-array-of-chars-with-strings-dynamically/53198999#53198999", "title": "Populating an array of chars with strings dynamically", "body": "<p>In C, you cannot assign arrays in the sense of <code>char input1[100], input2[100]; input1 = input2</code>.  You can just copy the contents using, for example, <code>strcpy</code> for strings or <code>memcpy</code> for arbitrary memory chunks.</p>\n\n<p>So you'd have to write <code>strcpy(strArray[i],input)</code>, provided that <code>i</code> is an integral value between <code>0</code> and <code>99</code> in your case.</p>\n\n<p>Further, you'll have to omit the <code>&amp;</code> in <code>scanf(\"%s\",&amp;input)</code> (i.e. write <code>scanf(\"%s\",input)</code>), because <code>input</code> already decays to a pointer to char.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 9301209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/858c777efaf3e214794653dc699aa6a1?s=128&d=identicon&r=PG&f=1", "display_name": "aokellermann", "link": "https://stackoverflow.com/users/9301209/aokellermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1541630467, "creation_date": 1541630467, "answer_id": 53199001, "question_id": 53198944, "link": "https://stackoverflow.com/questions/53198944/populating-an-array-of-chars-with-strings-dynamically/53199001#53199001", "title": "Populating an array of chars with strings dynamically", "body": "<p>You can use strcpy() to copy each char in input to strArray[i]. In this case you would use </p>\n\n<pre><code>strcpy(strArray[i], input);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1541630554, "post_id": 53199006, "comment_id": 93286552, "body": "That&#39;s an awesome tip, i had no idea i could limit the number of chars that the user can enter by specifying a number between % and s within scanf. Awesome"}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 2, "last_activity_date": 1541632457, "last_edit_date": 1541632457, "creation_date": 1541630470, "answer_id": 53199006, "question_id": 53198944, "link": "https://stackoverflow.com/questions/53198944/populating-an-array-of-chars-with-strings-dynamically/53199006#53199006", "title": "Populating an array of chars with strings dynamically", "body": "<p>You'd have to use <code>strcpy()</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char strArray[100][100];\n    char input[100];\n    scanf(\"%s\", input);\n    strcpy(strArray[0], input);\n}\n</code></pre>\n\n<p>But never, really: never! use <code>scanf()</code> with <code>\"%s\"</code> without limiting the number of characters to read (field width):</p>\n\n<pre><code> scanf(\"%99s\", input);\n</code></pre>\n"}], "owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53199006, "answer_count": 3, "score": 0, "last_activity_date": 1541632457, "creation_date": 1541630205, "question_id": 53198944, "link": "https://stackoverflow.com/questions/53198944/populating-an-array-of-chars-with-strings-dynamically", "title": "Populating an array of chars with strings dynamically", "body": "<p>I'm new to C and i'm trying to store some strings inside a 2D array of chars.Here's what i have:</p>\n\n<pre><code>char strArray[100][100];\nchar input[100];\nscanf(\"%s\",&amp;input);\nstrArray[i] = input; //this is where i get the incompatible types assignment error\n</code></pre>\n\n<p>As shown in the comment i get an <code>incompatible types in assignment</code> error.Do i need to use an array of <code>char *strArray[100][100]</code> ? Aren't <code>strArray</code> and <code>input</code> both of the same type (char [])? The one's 1D and the other is 2D obviously but i just didn't specify the 2nd dimension in the assignment since each string is stored in a new line. What am i doing wrong?</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 3305, "user_id": 1428695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a843c704cdb7e32a93769cddfed4747?s=128&d=identicon&r=PG", "display_name": "yhyrcanus", "link": "https://stackoverflow.com/users/1428695/yhyrcanus"}, "edited": false, "score": 0, "creation_date": 1541631852, "post_id": 53198923, "comment_id": 93286987, "body": "Dumb question, but are you 1000% sure wnum works? have you tried doing sprintf instead?"}, {"owner": {"reputation": 323, "user_id": 9371607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFpiK.png?s=128&g=1", "display_name": "Joshua Yonathan", "link": "https://stackoverflow.com/users/9371607/joshua-yonathan"}, "reply_to_user": {"reputation": 3305, "user_id": 1428695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a843c704cdb7e32a93769cddfed4747?s=128&d=identicon&r=PG", "display_name": "yhyrcanus", "link": "https://stackoverflow.com/users/1428695/yhyrcanus"}, "edited": false, "score": 0, "creation_date": 1541632144, "post_id": 53198923, "comment_id": 93287089, "body": "@yhyrcanus yes it does work. I forgot to mention in my question that I was trying to avoid <code>stdio.h</code> functions and stick to <code>io.h</code> functions only. <code>fsize</code> is assigned a value of 0 after <code>_filelengthi64()</code> as seen from the debugger in visual studio."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541642887, "post_id": 53198923, "comment_id": 93289738, "body": "regarding: <code>if (_sopen_s(&amp;fhandle, argv[1], _O_RDONLY | _O_BINARY, _SH_DENYWR, _S_IWRITE)</code>  doesn&#39;t that <code>_S_IWRITE</code> say your trying to open the file for write?  If so, then, naturally, the file would be truncated to 0 length"}, {"owner": {"reputation": 323, "user_id": 9371607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFpiK.png?s=128&g=1", "display_name": "Joshua Yonathan", "link": "https://stackoverflow.com/users/9371607/joshua-yonathan"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541654362, "post_id": 53198923, "comment_id": 93292188, "body": "@user3629249 That is the <code>pmode</code> parameter of the function which is used to set the permission settings of the file if it is a new file indicated by the <code>_O_CREATE</code> flag. I am not using this flag so that parameter is ignored. <a href=\"https://msdn.microsoft.com/en-us/library/w64k0ytk.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/w64k0ytk.aspx</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1541672357, "post_id": 53204359, "comment_id": 93299457, "body": "<i>it is generally a good idea to isolate normal code logic from error handling</i>  Indeed.  This question is just <b>another</b> example of why stuffing an assignment and error checking into one conditional clause is really just bad code.  &quot;Brevity of code&quot; does not mean &quot;stuff as much crap as you can into one line until you can&#39;t understand what you wrote&quot;, which is clearly what happened here."}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 2, "last_activity_date": 1541668132, "last_edit_date": 1541668132, "creation_date": 1541667532, "answer_id": 53204359, "question_id": 53198923, "link": "https://stackoverflow.com/questions/53198923/io-h-filelength-and-filelengthi64-always-returns-0/53204359#53204359", "title": "&lt;io.h&gt;_filelength and _filelengthi64 always returns 0", "body": "<p><code>_filelengthi64(fhandle)</code> doesn't return 0. The expression <code>_filelengthi64(fhandle) == -1</code>, however, will (assuming a successful call), which is then assigned to <code>fsize</code>. You are ignoring the <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">C operator precedence</a>, dictating that <code>==</code> has higher precedence than <code>=</code>. You will have to use parentheses to change the precedence:</p>\n\n<pre><code>if ((fsize = _filelengthi64(fhandle)) == -1)\n{\n    ...\n</code></pre>\n\n<p>If you want to reduce the amount of mental energy required to write (and especially read) code, it is generally a good idea to isolate normal code logic from error handling, e.g.:</p>\n\n<pre><code>// Normal code flow\nfsize = _filelengthi64(fhandle);\n// Error handling code\nif (fsize == -1)\n{\n    ...\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 9371607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFpiK.png?s=128&g=1", "display_name": "Joshua Yonathan", "link": "https://stackoverflow.com/users/9371607/joshua-yonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 53204359, "answer_count": 1, "score": 0, "last_activity_date": 1541668132, "creation_date": 1541630078, "question_id": 53198923, "link": "https://stackoverflow.com/questions/53198923/io-h-filelength-and-filelengthi64-always-returns-0", "title": "&lt;io.h&gt;_filelength and _filelengthi64 always returns 0", "body": "<p>I am using low level io functions to fetch the size of a file in bytes and write it to stdout. I am using windows 7 64bit, and I am using visual studio 2017, x64 debugging mode. The functions _filelength and _filelengthi64 are exclusive to the windows operating system however when I use them they both return a 0 for any file I open. Here is the full code, but the issue should only lie with <code>_sopen_s()</code> or <code>_filelengthi64()</code>:</p>\n\n<p><strong>Header</strong></p>\n\n<pre><code>#pragma once\n\n// Headers\n#include &lt;io.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys\\stat.h&gt;\n#include &lt;share.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n\n//  Constants\n#define stdout  1\n#define stderr  2\n\n//  Macros\n#define werror_exit     { werror(); return 1; }\n#define werr_exit(s)    { _write(stderr, (s), (unsigned int)strlen((s))); return 1; }\n\n//  Declarations\nextern void werror();\nextern void wnum(__int64 num);\n</code></pre>\n\n<p><strong>Source</strong></p>\n\n<pre><code>#include \"readbinaryfile.h\"\n\nint main(int argc, char **argv)\n{\n    int     fhandle;\n    __int64 fsize;\n\n    // open binary file as read only. deny sharing write permissions. allow write permissions if new file\n    if (_sopen_s(&amp;fhandle, argv[1], _O_RDONLY | _O_BINARY, _SH_DENYWR, _S_IWRITE) == -1)\n        werror_exit\n    else if (fhandle == -1)\n        werr_exit(\"\\nERROR: file does not exist...\\n\")\n\n    if (fsize = _filelengthi64(fhandle) == -1)\n    {\n        if (_close(fhandle) == -1)\n            werror_exit\n        werror_exit\n    }\n\n    if (_close(fhandle) == -1)\n        werror_exit\n\n    // write the file size to stdout\n    wnum(fsize);\n\n    return 0;\n}\n\n// fetch the string representation of the errno global variable and write it to stderr\nvoid werror()\n{\n    char    bufstr[95];\n    size_t  buflen = 95; // MSDN suggested number for errno string length\n\n    strerror_s(bufstr, buflen, errno);\n    _write(stderr, bufstr, (unsigned int)buflen);\n\n    _set_errno(0);\n}\n\n// recursively write the ascii value of each digit in a number to stdout\nvoid wnum(__int64 num)\n{\n    if (num / 10 == 0)\n    {\n        _write(stdout, &amp;(num += 48), 1);\n        return;\n    }\n\n    wnum(num / 10);\n    _write(stdout, &amp;((num %= 10) += 48), 1);\n}\n</code></pre>\n\n<p>I have tried passing many different filepaths to <code>argv[1]</code> yet they all still show an <code>fsize</code> of 0. In all of those cases, <code>fhandle</code> was assigned a value of 3 after using <code>_sopen_s()</code> which indicates no errors when opening the files. I have verified the operation of <code>wnum()</code> and <code>werror()</code>. I appreciate the help!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541630159, "post_id": 53198895, "comment_id": 93286403, "body": "You should post the exercise as well."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541633207, "post_id": 53198895, "comment_id": 93287427, "body": "What is <code>ok1</code>? You use it in the <code>for</code> loop, but never declare it or assign it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541633374, "post_id": 53198895, "comment_id": 93287458, "body": "It&#39;s not clear what your question is. Are you trying to figure out how to tell if brackets are properly balanced? So <code>({})</code> is good but <code>(}){</code> is bad?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1541633502, "post_id": 53198895, "comment_id": 93287480, "body": "You should create another array that you use as a stack. Whenever you see an opening bracket, you push it onto the stack. When you see a closing bracket, pop the top element off the stack and check if it&#39;s the correct opening for the current close bracket."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1541638330, "post_id": 53198895, "comment_id": 93288652, "body": "<code>void main()</code> should be <code>int main(void)</code>. I guarantee that K&amp;R (&quot;The C Programming Language&quot;) does <i>not</i> define <code>main</code> with a <code>void</code> return type. You&#39;ve picked up that bad habit from somewhere else."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1541683066, "post_id": 53198895, "comment_id": 93305008, "body": "In addition to the stack suggested by Barmar, you should add a flag to indicate when you are within a string. In that case don&#39;t push any new characters on the stack,"}], "owner": {"reputation": 11, "user_id": 9099544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be07ef6a9b63c3b1d00cb41119ad083?s=128&d=identicon&r=PG&f=1", "display_name": "TheMole", "link": "https://stackoverflow.com/users/9099544/themole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541678242, "creation_date": 1541629924, "last_edit_date": 1541632507, "question_id": 53198895, "link": "https://stackoverflow.com/questions/53198895/exercise-1-24-from-the-c-programming-language", "title": "Exercise 1.24 from The c programming language", "body": "<pre><code>#define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main()\n{\n    char brackets[20];\n    int frequency[100];\n\n    for (int i = 0; i &lt; 100; i++)\n        frequency[i] = 0;\n\n    printf(\"the array: \");\n    scanf(\"%s\", brackets);\n\n\n\n    for (char ch = '!'; ch &lt;= '}';  ch++)\n    {\n\n        for (int i = 0; i &lt; strlen(brackets) &amp;&amp;  ok1; i++)\n        {\n\n            if (ch == brackets[i])\n                frequency[ch-'0']++; // we keep increase the character position frequency.\n\n        }\n\n\n    }\n\n    int ok = 1;\n    int a[100], l=0;\n\n    for (int i = 0; i &lt; 100; i++)\n    if (frequency[i] &gt; 0)\n    {\n\n        printf(\"frec %d appears on %d\\n\", frequency[i], i);\n        a[l] = frequency[i];\n        l++;\n    }\n\n    for (int i = 0; i &lt; l-1; i++)\n    {\n        printf(\"%d \", a[i]);\n        if (a[i] != a[i + 1])\n            ok = 0;\n    }\n    if (ok)\n        printf(\"yes\");\n    else \n        printf(\"no\");\n\n    _getch();\n\n}\n</code></pre>\n\n<p>Hi guys,\nI am learning C from The C Programming Language and I have to solve a problem that tells me the rudimentary syntax errors. I decided to use a frequency vector that keeps track of my parentheses s.a ( ) [ ]. The problem that I face is how i can figure it out if for example ) is before (. I tried using ASCII table, but it was not good. First point was to see if they appear in an equal number. Now I have to see if they  are placed correctly.\nThank you guys !!!</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "char"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541632609, "post_id": 53198424, "comment_id": 93287259, "body": "Design question: why use a fixed array size <code>char name[10]</code> for band names, yet a character pointer for band members?  I&#39;d expect something like <code>char *name; char  *members[20];</code> or <code>char name[10];  char members[20][30];</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541632857, "post_id": 53198424, "comment_id": 93287339, "body": "The first line is a syntax error"}], "answers": [{"tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": false, "score": 0, "last_activity_date": 1541627981, "creation_date": 1541627981, "answer_id": 53198489, "question_id": 53198424, "link": "https://stackoverflow.com/questions/53198424/two-dimensional-array-with-char-pointer-in-c/53198489#53198489", "title": "Two dimensional array with char pointer in c", "body": "<p>For numMembers = sizeof(bands[0]) / sizeof(bands[0].members);</p>\n\n<p>sizeofband(bands[0]) will give the size of one band struct - that is the 10 bytes for name, and then 20 * the size of a pointer.</p>\n\n<p>sizeof(bands[0].members); will give 20*thesizeof a pointer</p>\n\n<p>Not what you want, as sizeof doesn't take into consideration the content of whatever the pointer points to.</p>\n\n<p>It also doesn't take into consideration that some of those members pointers will be NULL so you don't want to count them.</p>\n\n<p>Perhaps better doing:</p>\n\n<pre><code>for ( j = 0; j &lt; 20 &amp;&amp;  bands[i].members[j] != NULL; ++j )\n        printf (\"\\t%s\", bands[i].members[j]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1541629209, "last_edit_date": 1541629209, "creation_date": 1541628091, "answer_id": 53198519, "question_id": 53198424, "link": "https://stackoverflow.com/questions/53198424/two-dimensional-array-with-char-pointer-in-c/53198519#53198519", "title": "Two dimensional array with char pointer in c", "body": "<blockquote>\n  <p>what I'm doing wrong</p>\n</blockquote>\n\n<p><strong>Wrong <code>numMembers</code> calculation</strong></p>\n\n<p><code>numMembers</code> should be the number of elements in the array. (20)</p>\n\n<p>Each <code>bands[i].member</code> has 20 elements given <code>char *members[20]</code>.  Several elements are populated with pointers to <em>string literals</em>.  Most elements remain 0 (<code>NULL</code>).</p>\n\n<pre><code>// numMembers = sizeof(bands[0]) / sizeof(bands[0].members);\nnumMembers    = sizeof(bands[0].members) / sizeof(bands[0].members[0]);\n</code></pre>\n\n<hr>\n\n<p><strong>Attempting to print <code>NULL</code> as a string</strong></p>\n\n<p><code>printf (\"\\t%s\", bands[i].members[j]);</code> not valid when <code>bands[i].members[j]</code> is <code>NULL</code>.</p>\n\n<p>Not all <code>bands[i].members[j]</code> are set to a non-<code>NULL</code> value.</p>\n\n<pre><code>numBands = sizeof(bands) / sizeof(bands[0]);\n\nfor ( i = 0; i &lt; numBands; ++i ) { \n  printf (\"%s\\n\", bands[i].name);\n  numMembers = sizeof(bands[i].members) / sizeof(bands[i].members[0]);\n\n  for ( j = 0; j &lt; numMembers; ++j ) {\n    if (bands[i].members[j]) {\n      printf (\"\\t%s\", bands[i].members[j]);\n    } \n  }\n\n  printf (\"\\n\");\n  }\n} \n</code></pre>\n\n<hr>\n\n<p>Deeper: </p>\n\n<p><code>const struct band bands[] = { {\"Beatles\", ...</code> forms <code>bands</code> and sizes <code>bands[]</code> based on the number of initializers.</p>\n\n<p><code>char *members[20];</code> is a fixed size even if the initialization did not supply 20 <em>strings</em>.  The first elements <code>members[20]</code> are initialized per the list, the remaining elements have a pointer value of 0.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541631878, "post_id": 53198824, "comment_id": 93286994, "body": "<code>while (bands[i].members[j])             printf (&quot; %s&quot;, bands[i].members[j++]);</code> this is UB when the initialization had 20 band members.  Maybe <code>while (j &lt; MAXMB &amp;&amp; bands[i].members[j])</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541632977, "post_id": 53198824, "comment_id": 93287373, "body": "I don&#39;t think the <code>MAXNM</code> and <code>MAXNB</code> improve the code . It&#39;s obvious what the numbers mean in their original context, and the use of <code>sizeof</code> avoids the possibility of errors due to code duplication"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541637205, "post_id": 53198824, "comment_id": 93288368, "body": "@chux while the check for <code>j &lt; MAXMB</code> is a fine addition, the check as it sits is <code>while (bands[i].members[j] != NULL)</code> which is not UB based on the initialization rules. See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p10\" rel=\"nofollow noreferrer\">&#167; 6.7.9 Initialization (p10)</a> and <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p19\" rel=\"nofollow noreferrer\">&#167; 6.7.9 Initialization (p19)</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541637441, "post_id": 53198824, "comment_id": 93288422, "body": "@M.M agreed for this short snippet. The addition was to address future programming where the &quot;code length grows&quot;. I try to address all points and what could become bad habits. Sometimes what seems obvious to veterans is useful information for those just learning."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541638246, "post_id": 53198824, "comment_id": 93288632, "body": "@chux - yes, I see your point, if all 20 band members were later filled, then UB. (but no UB in the code as written)"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1541638468, "last_edit_date": 1541638468, "creation_date": 1541629586, "answer_id": 53198824, "question_id": 53198424, "link": "https://stackoverflow.com/questions/53198424/two-dimensional-array-with-char-pointer-in-c/53198824#53198824", "title": "Two dimensional array with char pointer in c", "body": "<p>You don't have a \"two dimensional array\". What you have is a simple <em>array of</em> <code>struct band</code> which contains two simple character arrays as its members.</p>\n\n<p>There is actually no need to compute the number of <code>\"members\"</code> in each bands. All you need to compute is the number of <code>bands</code>, e.g.</p>\n\n<pre><code>    int nbands = sizeof bands / sizeof *bands;\n</code></pre>\n\n<p>Since you have declared <code>members</code> as an <em>array of pointers</em> and have used an initializer to initialize the first four, the remaining pointers will have all bytes set <code>0</code> resulting in each being <code>NULL</code>. You can simply loop for the <code>members</code> with <code>while (bands[i].members[j])</code>, incrementing <code>j</code> each iteration, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct band {\n    char    name[10];\n    char    *members[20];\n};\n\nint main(void) {\n\n    const struct band bands[] = {\n        {\"Beatles\", {\"John\", \"George\", \"Paul\", \"Ringo\", \"Pete\", \"George\"} },\n        {\"Stones\",  {\"Mick\", \"Keith\", \"Bill\", \"Charlie\", \"Brian\"} },\n        {\"Who\",     {\"Pete\", \"Roger\", \"Keith\", \"John\"} },\n        {\"JHE\",     {\"Jimmy\", \"Noel\", \"Mitch\"} } };  \n\n    int nbands = sizeof bands / sizeof *bands;\n\n    for (int i = 0; i &lt; nbands; i++) {\n        int j = 0;\n        puts (bands[i].name);\n        while (j &lt; 20 &amp;&amp; bands[i].members[j])\n            printf (\" %s\", bands[i].members[j++]);\n        putchar ('\\n');\n    }\n}\n</code></pre>\n\n<p>(<strong>note</strong> addition of <code>j &lt; 20</code>, which as pointed out by @chux in the comments, the test of <code>while (bands[i].members[j])</code> alone could result in Undefined Behavior in the case where there were additional bands added <code>bands</code> after initialization and all <code>20</code> pointers of the <code>members</code> struct member were filled)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/bandmembers\nBeatles\n John George Paul Ringo Pete George\nStones\n Mick Keith Bill Charlie Brian\nWho\n Pete Roger Keith John\nJHE\n Jimmy Noel Mitch\n</code></pre>\n\n<p>Additionally, don't use <em>magic numbers</em> in your code. Instead, If you need a constant, <code>#define</code> one (or more), e.g.</p>\n\n<pre><code>#define MAXNM 10\n#define MAXMB 20\n</code></pre>\n\n<p>or use a global <code>enum</code> to do the same thing, e.g.</p>\n\n<pre><code>enum { MAXNM = 10, MAXMB = 20 };\n</code></pre>\n\n<p>That will allow you to eliminate the <em>magic numbers</em>, e.g.</p>\n\n<pre><code>struct band {\n    char    name[MAXNM];\n    char    *members[MAXMB];\n};\n</code></pre>\n\n<p>This becomes very important for maintainability as your code length grows.</p>\n"}], "owner": {"reputation": 33, "user_id": 9791286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791a11dd9840a8cce6303e9a09ec3416?s=128&d=identicon&r=PG&f=1", "display_name": "Griffau", "link": "https://stackoverflow.com/users/9791286/griffau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 53198824, "answer_count": 3, "score": 0, "last_activity_date": 1541638468, "creation_date": 1541627650, "question_id": 53198424, "link": "https://stackoverflow.com/questions/53198424/two-dimensional-array-with-char-pointer-in-c", "title": "Two dimensional array with char pointer in c", "body": "<p>In the following code I am trying for each band to get the number of band members.  I've tried a number of things but nothing works.  The following looks like it should but doesn't.</p>\n\n<p>If any one could point out what I'm doing wrong it would be greatly appreciated.</p>\n\n<pre><code>numMembers = sizeof(bands[0]) / sizeof(bands[0].members);\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    int         i;  \n    int         j;  \n    int         numBands;\n    int         numMembers;\n    int         limit = 4;\n\n    struct band {\n        char        name[10];\n        char        *members[20];\n    };  \n\n    const struct band bands[] =\n        {   {\"Beatles\", {\"John\", \"George\", \"Paul\", \"Ringo\", \"Pete\", \"George\"} },\n            {\"Stones\",  {\"Mick\", \"Keith\", \"Bill\", \"Charlie\", \"Brian\"} },\n            {\"Who\",     {\"Pete\", \"Roger\", \"Keith\", \"John\"} },\n            {\"JHE\",     {\"Jimmy\", \"Noel\", \"Mitch\"} }  };  \n\n    numBands   = sizeof(bands) / sizeof(bands[0]);\n\n    for ( i = 0; i &lt; numBands; ++i ) { \n        printf (\"%s\\n\", bands[i].name);\n        numMembers = sizeof(bands[0]) / sizeof(bands[0].members);\n        for ( j = 0; j &lt; numMembers; ++j )\n            printf (\"\\t%s\", bands[i].members[j]);\n        printf (\"\\n\");\n    }   \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "multithreading", "multiprocessing", "cpu-usage"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1541627814, "post_id": 53198329, "comment_id": 93285524, "body": "highly doubt it, your CPUs are already maxed out, what else can they do? The overhead for creating a thread is less than the overhead for creating a process, but in the big scheme of things (your code is executing for hours), the savings in this overhead completely insignificant. Maybe increasing the priority of your processes/threads will help speed things up."}, {"owner": {"reputation": 29, "user_id": 9615764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d924daa8db42adff176f131229fd6160?s=128&d=identicon&r=PG&f=1", "display_name": "g319909.nwytg.coM", "link": "https://stackoverflow.com/users/9615764/g319909-nwytg-com"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1541627967, "post_id": 53198329, "comment_id": 93285592, "body": "Maybe process have diffrent scheduler or something else so thread will running faster. When you see 100% ,that no mean you can faster it.   Maybe lot of process slow down the os vs lot of thread in 1 process"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1541629196, "post_id": 53198329, "comment_id": 93286049, "body": "Again, I doubt it. Boiled down, there&#39;s not going to be any difference between a thread of execution from a thread and a thread of execution from a process, certainly not from the CPU&#39;s perspective anyway. Admittedly, I don&#39;t know a thing about Windows scheduler, but it&#39;s going to schedule processes and threads based on availability and priority. But code it up and find out, it shouldn&#39;t be a huge effort to convert multi-process to multi-threaded. If you really want speedup, you&#39;ll need faster hardware or more efficient algorithms. Maybe you could use a GPU?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9615764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d924daa8db42adff176f131229fd6160?s=128&d=identicon&r=PG&f=1", "display_name": "g319909.nwytg.coM", "link": "https://stackoverflow.com/users/9615764/g319909-nwytg-com"}, "edited": false, "score": 0, "creation_date": 1541628427, "post_id": 53198527, "comment_id": 93285778, "body": "How can I use SSE instructions in c code on windows? Is that really  speed up code?  By the way windows will not be slower when I allocate 10 processes vs allocate 10 threads?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 29, "user_id": 9615764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d924daa8db42adff176f131229fd6160?s=128&d=identicon&r=PG&f=1", "display_name": "g319909.nwytg.coM", "link": "https://stackoverflow.com/users/9615764/g319909-nwytg-com"}, "edited": false, "score": 0, "creation_date": 1541630050, "post_id": 53198527, "comment_id": 93286356, "body": "I can&#39;t think of any reason <i>why</i> Windows would be slower with 10 processes than it would be with 10 threads, at least not when running on a 10-core machine.  The same code is running either way.  As for SSE instructions, that is a whole different topic, you&#39;ll have to google it."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 0, "last_activity_date": 1541628113, "creation_date": 1541628113, "answer_id": 53198527, "question_id": 53198329, "link": "https://stackoverflow.com/questions/53198329/multithreading-vs-multiprocessing-with-massive-cpu/53198527#53198527", "title": "Multithreading vs multiprocessing with massive cpu", "body": "<blockquote>\n  <p>If I will create thread for each core(not process for each core) , I\n  know that os will know to seperate thread to cores, is that will be\n  faster?</p>\n</blockquote>\n\n<p>The OS knows how to allocate threads to cores in an efficient manner -- however, the OS also knows how to allocate processes to cores in an efficient manner, so it's unlikely that you would see any difference in performance simply by switching from a multi-process module to a multi-threaded model.  That is, you're already getting the benefit you're hoping to obtain.</p>\n\n<p>For a problem like this, you'd probably be better off looking for ways to optimize your processing loops (e.g. maybe you can use SSE instructions, or find a more efficient algorithm?)</p>\n"}, {"comments": [{"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "edited": false, "score": 0, "creation_date": 1541630135, "post_id": 53198809, "comment_id": 93286394, "body": "<i>I have c code that I want running fast as I can on windows.</i>  That&#39;s problem 1, use linux.  sorry, couldn&#39;t resist"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541706254, "post_id": 53198809, "comment_id": 93317637, "body": "<i>&quot;use linux&quot;</i> - Which distribution? Which version? What configuration? Why does this improve a compute-bound operating? Be specific, please."}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541781020, "post_id": 53198809, "comment_id": 93346117, "body": "&quot;compute-bound&quot; is still completely controlled by the operating system (windows or linux or other)  Much overhead &amp; inefficiency can happen at the level of multi thread (or multi process) execution, my description of CPU affinity for one.  As an example Linux you <i>can</i> modify the kernel and rebuild , go to run level 3 vs run level 5, disable various services and strip unneeded things out of the kernel to have the kernel focus more on just your code... to run it as fast as possible as was initially asked."}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541781071, "post_id": 53198809, "comment_id": 93346140, "body": "Let me know how you might to do anything like that with Windows, this is also stackoverflow <b>Unix &amp; Linux</b>, not Windows.  And"}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541781156, "post_id": 53198809, "comment_id": 93346193, "body": "<i>90 percent of the world&#39;s top 500 fastest supercomputers, while Windows runs 1 percent of them</i>.  www.zdnet.com/article/fast-faster-fastest-linux-rules-superc&zwnj;&#8203;omputing/"}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541781884, "post_id": 53198809, "comment_id": 93346595, "body": "Anonymous MSFT developer admits Linux is faster than Windows  <a href=\"https://www.zdnet.com/article/anonymous-msft-developer-admits-linux-is-faster-than-windows/\" rel=\"nofollow noreferrer\">zdnet.com/article/&hellip;</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541783298, "post_id": 53198809, "comment_id": 93347361, "body": "I&#39;m sorry, I couldn&#39;t make much sense out of those comments. It seems like most sentences are cut off or presented out of context. It&#39;s still unclear, how <i>&quot;using Linux&quot;</i> would magically increase the throughput of a compute-bound operation. Changing the Linux kernel and recompiling it is hardly feasible in the vast majority of cases, and the potential performance improvements are probably not even worth mentioning when confronted with the problem outlined in this question. Reasons for using Linux to drive custom hardware are more likely the ability to actually make it run on that hardware."}], "tags": [], "owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "is_accepted": false, "score": -1, "last_activity_date": 1541630070, "last_edit_date": 1592644375, "creation_date": 1541629518, "answer_id": 53198809, "question_id": 53198329, "link": "https://stackoverflow.com/questions/53198329/multithreading-vs-multiprocessing-with-massive-cpu/53198809#53198809", "title": "Multithreading vs multiprocessing with massive cpu", "body": "<blockquote>\n<p>simple explanation: <a href=\"https://www.techopedia.com/definition/24297/multithreading-computer-architecture\" rel=\"nofollow noreferrer\">https://www.techopedia.com/definition/24297/multithreading-computer-architecture</a></p>\n<p>Multithreading is a type of execution model that allows multiple threads to exist within the context of a process such that they execute independently but share their process resources. A thread maintains a list of information relevant to its execution including the priority schedule, exception handlers, a set of CPU registers, and stack state in the address space of its hosting process.</p>\n<p>Threading can be useful in a single-processor system by allowing the main execution thread to be responsive to user input, while the additional worker thread can execute long-running tasks that do not need user intervention in the background. Threading in a multiprocessor system results in true concurrent execution of threads across multiple processors and is therefore faster. However, it requires more careful programming to avoid non-intuitive behavior such as racing conditions, deadlocks, etc.</p>\n<p>Operating systems use threading in two ways:</p>\n<p><strong>Pre-emptive multithreading</strong> in which the context switch is controlled by the operating system. Context switching might be performed at an inappropriate time, Hence, a high priority thread could be indirectly pre-empted by a low priority thread.</p>\n<p><strong>Cooperative multithreading</strong> in which context switching is controlled by the thread. This could lead to problems, such as deadlocks, if a thread is blocked waiting for a resource to become free.</p>\n<p><strong>The 32- and 64-bit versions of Windows use pre-emptive multithreading</strong> in which the available processor time is shared such that all the threads get an equal time slice and are serviced in a queue-based mode. During thread switching, the context of a pre-empted thread is stored and reloaded in the next thread in the queue. The time slice is so short that the running threads seem to be executing in parallel.</p>\n</blockquote>\n<p>Your question I think quickly gets into the realm of parallel programming, and to a lesser extent how a given Operating System behaves and handles processes, or threads.</p>\n<p>To take a stab at an answer, to run as fast as possible</p>\n<ul>\n<li>you would NOT want to kick off multiple instances of an executable, certainly not in Windows</li>\n<li>I don't know about in Windows, but in Linux there what is known as <strong>CPU affinity</strong> which will lock a given thread to a specific core for the life of the thread, otherwise the linux operating system  can bounce it around to different cores... as linux thinks it's managing everything going on as efficient as possible; this is not the case when the goal is to run only your code as fast as possible since there is overhead moving threads to different CPU cores</li>\n<li>you would want to reprogram your C code using either <strong>OpenMP</strong>, or <strong>PTH</strong> known as pthreads.  Openmp is a higher level language using directives in C and handled by the C compiler and makes parallel programming relatively easy.  PTH is more fine grained programming and can be harder to learn and write code for, but using PTH <em>may</em> allow you to write code that would run the fastest.  Whether parallel programming in PTH is faster than OpenMP is debated and in my opinion very dependent on the algorithm you are trying to implement.</li>\n<li>and depending on your algorithm, the fastest way may be with GPU cores using CUDA provided you have an NVidia graphics card.  <em>I believe ATI/AMD cards can also do something similar now but i don't know their terminology.</em></li>\n<li>also multi process is basically for applications or the execution of completely separate programs at the same time; multi thread is smaller multi tasks of the same program or process and has less overhead and would be faster for what you want; look up difference between multiprocess and multithread.  Inter-process communication is resource intensive, and should be avoided in your case, don't create multiple processes.</li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 9615764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d924daa8db42adff176f131229fd6160?s=128&d=identicon&r=PG&f=1", "display_name": "g319909.nwytg.coM", "link": "https://stackoverflow.com/users/9615764/g319909-nwytg-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 884, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1541630070, "creation_date": 1541627193, "last_edit_date": 1541627817, "question_id": 53198329, "link": "https://stackoverflow.com/questions/53198329/multithreading-vs-multiprocessing-with-massive-cpu", "title": "Multithreading vs multiprocessing with massive cpu", "body": "<p>I have c code that I want running fast as I can on windows</p>\n\n<p>This code in running on range of number, and for each number ,do massive cpu work.</p>\n\n<p>Each nunber is independent on the another numbers.</p>\n\n<p>Because I want it fastest, I want running it on all of my cpu cores.</p>\n\n<p>What I do now is ,for example I need running at range of 0-1000  and I have 10 cores , I create 10 processes of my c code , and seperate the work between them.</p>\n\n<p>Process1 running in range 0-100 , process2 running in range 100-200 and so on.</p>\n\n<p>Os know to seperate each process to diffrent core(because each process use lot of cpu) , so when I look at task manager all of my cores is 100% usage.</p>\n\n<p>In this way each process run like 5 hours (so the allocation time is negligible)</p>\n\n<p>If I will create thread for each core(not process for each core) , I know that os will know to seperate thread to cores, is that will be faster?</p>\n\n<p>Maybe process have diffrent scheduler or something else so thread will running faster.</p>\n\n<p>Maybe lot of process slow down the os vs lot of thread in 1 process </p>\n"}, {"tags": ["c", "bash"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1541626991, "post_id": 53198234, "comment_id": 93285178, "body": "<code>scanf</code> stops at whitespace."}, {"owner": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1541627152, "post_id": 53198234, "comment_id": 93285241, "body": "<code>scanf</code> is good for simple parsing. The pattern you want is, I think, <code>fgets</code> in a loop."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541627239, "post_id": 53198234, "comment_id": 93285268, "body": "Or fread followed by zero termination"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541627308, "post_id": 53198234, "comment_id": 93285286, "body": "... so when I run your program (in Windows console) as <code>dir | my_c_program</code> the output is simply <code>Volume</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541627393, "post_id": 53198234, "comment_id": 93285335, "body": "@WeatherVane - <code>cat &#47;etc&#47;passwd | .&#47;my_c_program</code> in Windows console??"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541627430, "post_id": 53198234, "comment_id": 93285349, "body": "@DavidC.Rankin the equivalent as commented. C behaves the same."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541627519, "post_id": 53198234, "comment_id": 93285384, "body": "Oh, OK, yes, any term or xterm on Linux makes sense. I was thinking &quot;windows would be dumbfounded by <code>cat</code>, <code>&#47;etc&#47;passwd</code>, etc...&quot;."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541627841, "post_id": 53198234, "comment_id": 93285538, "body": "I guess the questioner got it sorted."}], "answers": [{"tags": [], "owner": {"reputation": 4764, "user_id": 4375327, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/042f10749eae61fea5ac7994f23961ed?s=128&d=identicon&r=PG&f=1", "display_name": "Amessihel", "link": "https://stackoverflow.com/users/4375327/amessihel"}, "is_accepted": true, "score": 1, "last_activity_date": 1541631279, "last_edit_date": 1592644375, "creation_date": 1541627893, "answer_id": 53198470, "question_id": 53198234, "link": "https://stackoverflow.com/questions/53198234/pass-data-via-a-pipe-to-a-c-program/53198470#53198470", "title": "Pass data via a pipe to a C program", "body": "<p>One of the easiest way is to use <strong><code>getline()</code></strong>. The <code>man</code> page describes the function as below:</p>\n<blockquote>\n<p><code>ssize_t getline(char **lineptr, size_t *n, FILE *stream);</code></p>\n<p><code>getline()</code>  reads  an  entire line from stream, storing the address of the buffer containing the text into <code>*lineptr</code>.  The buffer is null-terminated and includes the newline character, if one was found.</p>\n</blockquote>\n<p>By the way, keep in mind this paragraph:</p>\n<blockquote>\n<p>If <code>*lineptr</code> is <strong>set to NULL</strong> and <code>*n</code> is <strong>set 0 before the call</strong>, then <code>getline()</code> will <strong>allocate a buffer</strong> for storing the line.  <strong>This buffer should  be  freed</strong>  by the user program <strong>even if getline() failed.</strong></p>\n</blockquote>\n<p>Below a working sample.</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char* argv)\n{\n  char* l = NULL;\n  size_t n;\n  while (getline(&amp;l,&amp;n, stdin) != -1 )\n    {\n      printf(&quot;%s&quot;,l);\n    }\n  free(l); // don't forget to release the allocated memory\n           // mmh, yes, here it's not useful since the program\n           // ends.\n}\n</code></pre>\n<p>This answer is inspired by this <a href=\"https://stackoverflow.com/questions/3501338/c-read-file-line-by-line\">SO reply</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10548749"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "closed_date": 1541627512, "accepted_answer_id": 53198470, "answer_count": 1, "score": 0, "last_activity_date": 1541631279, "creation_date": 1541626785, "last_edit_date": 1541627074, "question_id": 53198234, "link": "https://stackoverflow.com/questions/53198234/pass-data-via-a-pipe-to-a-c-program", "closed_reason": "Duplicate", "title": "Pass data via a pipe to a C program", "body": "<p>I want to send data through a pipe to a simple c program:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char const *argv[])\n{\nchar message[100000];\nscanf(\"%s\", message);\nprintf(\"%s\", message);\nreturn 0;\n}\n</code></pre>\n\n<p>For instance, I want to print to the terminal all the data from /etc/passwd. To do so, I type: </p>\n\n<pre><code>cat /etc/passwd | ./my_c_program\n</code></pre>\n\n<p>But it is not working, it just prints \"##\". </p>\n"}, {"tags": ["c++", "c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 5, "creation_date": 1541624864, "post_id": 53197810, "comment_id": 93284230, "body": "So you try to complie <code>C</code> code with a <code>C++</code> compiler? These are different languages."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 4, "creation_date": 1541624869, "post_id": 53197810, "comment_id": 93284233, "body": "Did you include the necessary headers (<code>unistd.h</code> and <code>sys&#47;types.h</code> per the Linux man page)? Older C specifications allow implicit function declarations; newer standards, and C++, do not."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 9, "creation_date": 1541624894, "post_id": 53197810, "comment_id": 93284243, "body": "Why are you commenting out this <code>&#47;&#47;#include &lt;unistd.h&gt;</code>?"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1541624955, "post_id": 53197810, "comment_id": 93284273, "body": "My view of your code was scrolled down and I didn&#39;t see the includes - but as Fiddling Bits asked, why is it commented out? You need it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541625040, "post_id": 53197810, "comment_id": 93284313, "body": "Note: C is <i>not</i> a subset of C++ these days. You <i>can</i> write code that is accepted by both a C and C++ compiler but does different things. You need to pick a language - they are <i>not</i> interchangeable."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1541625213, "post_id": 53197872, "comment_id": 93284385, "body": "C <i>had</i> the concept. It doesn&#39;t have any more."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541625428, "post_id": 53197872, "comment_id": 93284486, "body": "@AnttiHaapala Depends on what version of the C language OP is compiling with. And we don&#39;t know that."}, {"owner": {"reputation": 1, "user_id": 10620452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09b62973be6e1ea3fc923629314a6db?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10620452/user"}, "edited": false, "score": 0, "creation_date": 1541625533, "post_id": 53197872, "comment_id": 93284530, "body": "Thanks a lot for the quick &amp; helpful response/explaination. Works now"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 10620452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09b62973be6e1ea3fc923629314a6db?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10620452/user"}, "edited": false, "score": 0, "creation_date": 1541625572, "post_id": 53197872, "comment_id": 93284551, "body": "@user Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541625614, "post_id": 53197872, "comment_id": 93284570, "body": "@AnttiHaapala you&#39;d be surprised about how many compilers continue to support it even in standards modes"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541625667, "post_id": 53197872, "comment_id": 93284604, "body": "I have gcc 5.4.0 and it allows it (with warnings) even with <code>-std=c11 -pedantic</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1541625679, "post_id": 53197872, "comment_id": 93284606, "body": "@Mgetz they can support it. A compiler is allowed to successfully compile an invalid program. (provided that it issues required diagnostics)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541625781, "post_id": 53197872, "comment_id": 93284647, "body": "As for claiming that the &quot;version matters&quot; it is like telling that you can write &quot;&#254;e olde pizza parlor&quot; and that is proper English. Only the version matters."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1541626438, "last_edit_date": 1541626438, "creation_date": 1541625084, "answer_id": 53197872, "question_id": 53197810, "link": "https://stackoverflow.com/questions/53197810/same-programm-works-in-c-but-not-in-c-uses-linux-system-calls/53197872#53197872", "title": "Same programm works in C, but not in C++ (uses linux system calls)", "body": "<p>Older versions of C (that most compilers still support by default) had the concept of a default type for undeclared functions.  If a function is used before it is declared, C assumes the type of the function is <code>int (*)()</code>, i.e. a function that takes an unknown number of arguments and returns an <code>int</code>.  The actual types of the functions in question are more-or-less compatible with that definition so it seems to work.</p>\n\n<p>C++ on the other hand does not have a default type for undeclared functions, so it throws an error right away when a function is used without being declared.</p>\n\n<p>For the <code>fork</code> and <code>exec</code> functions you need to <code>#include &lt;unistd.h&gt;</code>, and for <code>wait</code> you need to <code>#include &lt;sys/types.h&gt;</code> and <code>#include &lt;sys/wait.h&gt;</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10620452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09b62973be6e1ea3fc923629314a6db?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10620452/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 53197872, "answer_count": 1, "score": -4, "last_activity_date": 1541626438, "creation_date": 1541624766, "last_edit_date": 1541625892, "question_id": 53197810, "link": "https://stackoverflow.com/questions/53197810/same-programm-works-in-c-but-not-in-c-uses-linux-system-calls", "title": "Same programm works in C, but not in C++ (uses linux system calls)", "body": "<p>I'm supposed to write a (very basic) shell for linux for school. Currently i'm only trying to execute a programm with it at all (via fork and execv), and only plan on adding user-input later. I started writing in C (which i do not know at all/only know the some parts that it shares with C++) because  the slides were using it, but we can use either C or C++ and i planned on using C++ as soon as i learned how C handles/doesn't handle input/output/strings. (I took parts of the code (mostly lines where status, fork, execv, and wait are used) from the prof's slides and added parts of it myself.)<br>\nHowever, currently when using C the programm compiles, runs and seems to shows the expected output (printing out \"testdesecho\" by calling the echo function). But when copy-pasting the same code to C++ and trying to compile this, i get several errors (not just warnings) and so can't even compile the code.</p>\n\n<p>This is the code</p>\n\n<pre><code>//#include &lt;iostream&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;stdio.h&gt;  \n#include &lt;ctype.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n//#include &lt;unistd.h&gt; \n/*\nreadparsefunc() {\n\n}\n*/\n\n\nint main() {\n    int childPid;\n\n    int status;\n    char befehlstr[20] = \"/bin/echo\";                                                   //location              \n    char* parameterstr[61] = { \"echo\", \"testdesecho\" };                                 //argv\n\n\n    childPid = fork();\n\n    //befehlstr = \"\";                                       \n    //parameterstr = \" \";\n    //cout &lt;&lt; parameterstr[1];\n    printf(\"%d\", childPid);     printf(\"&lt;- childPid(test) \\n\");\n    printf(befehlstr);          printf(\"&lt;- befehlstr(test) \\n\");\n    printf(*parameterstr);      printf(\"&lt;- parameterstr(test) \\n\");\n\n    if (childPid == -1) { printf(\"Konnte keinen neuen Prozess erstellen\"); }            \n    else if (childPid == 0) {                           \n        printf(\"child process \\n\");\n\n        int testintueberlagerung = 0;\n        testintueberlagerung = execv(befehlstr, parameterstr);\n        if (testintueberlagerung != 0) {\n            printf(\"%d\" \"&lt;- testueberlagerungswert \\n\", testintueberlagerung);\n        }\n        //execv(befehlstr, parameterstr);                   \n\n        exit(0);                                        \n    }\n    else if (childPid &gt; 0) {\n        printf(\"parent process \\n\");\n        wait(&amp;status);                                  \n        printf(\"parent process beendet sich nun auch \\n\");\n    }\n\n    /*\n    while (1 != 0) {\n\n    }\n    */\n\n\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>And these are the errors:</p>\n\n<pre><code>testmitcanders.cpp:27:13: error: \u2018fork\u2019 was not declared in this scope\n  childPid = fork();\n             ^~~~\ntestmitcanders.cpp:41:26: error: \u2018execv\u2019 was not declared in this scope\n   testintueberlagerung = execv(befehlstr, parameterstr);\n                          ^~~~~\ntestmitcanders.cpp:51:3: error: \u2018wait\u2019 was not declared in this scope\n   wait(&amp;status);        \n   ^~~~\ntestmitcanders.cpp:51:3: note: suggested alternative: \u2018main\u2019\n   wait(&amp;status);        \n   ^~~~\n   main\n</code></pre>\n\n<p>As far as i understand these all pertain to system calls and i do not understand why they would need to be declared in C++. but not in C?\n(And how to declare them if i have to?)</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["c", "windows", "send", "ftdi"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 8057767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a4630a9a0a0606a00b1867ab9252cb?s=128&d=identicon&r=PG&f=1", "display_name": "luci88filter", "link": "https://stackoverflow.com/users/8057767/luci88filter"}, "is_accepted": false, "score": 1, "last_activity_date": 1541687529, "creation_date": 1541687529, "answer_id": 53209850, "question_id": 53197582, "link": "https://stackoverflow.com/questions/53197582/ftdi-would-need-to-know-more-details-about-the-ft-write-function/53209850#53209850", "title": "FTDI. Would need to know more details about the FT_Write() function", "body": "<p>dwBytesToWrite is a double word, that is 32 bits. A rather large number of bytes to write. My guess is that the function can return FT_OK even if the number of bytes written is &lt; the number of bytes to write. It is useful to know how many bytes have been written, so that the next time you call the function, you know exactly where to set your transmit pointer in the buffer.</p>\n"}, {"comments": [{"owner": {"reputation": 642, "user_id": 427237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3fe3eb1034230583a36c9b0f59b534c?s=128&d=identicon&r=PG", "display_name": "Frederic Torres", "link": "https://stackoverflow.com/users/427237/frederic-torres"}, "edited": false, "score": 0, "creation_date": 1542043040, "post_id": 53215576, "comment_id": 93418226, "body": "And how much data can I send in one call to FT_Write? 64k, though it depend on the chip and mode. I was able to FT_Write 32k and 48k buffer of bit banging data in one call using my device name Nusbio based on a FT232R."}], "tags": [], "owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "is_accepted": false, "score": 2, "last_activity_date": 1541708909, "last_edit_date": 1541708909, "creation_date": 1541708542, "answer_id": 53215576, "question_id": 53197582, "link": "https://stackoverflow.com/questions/53197582/ftdi-would-need-to-know-more-details-about-the-ft-write-function/53215576#53215576", "title": "FTDI. Would need to know more details about the FT_Write() function", "body": "<p><code>FT_Write</code> returns  status other than <code>FT_OK</code> on \"critical\" errors.</p>\n\n<p>This function (as well as <code>FT_Read</code>) might return <code>FT_OK</code> and put in <code>*lpdwBytesWritten</code> any number from <code>0</code> (timeout) to <code>dwBytesToWrite</code> (transmission finished).</p>\n\n<p>Intermediate values means that not all data transferred yet but transmission process can be continued.</p>\n\n<p>Transmission loop might be like this:</p>\n\n<pre><code>BYTE *buf = pointer_to_data;\nDWORD len = length_of_data;\n\nFT_STATUS status;\nDWORD written;\n\nfor (;;) {\n    status = FT_Write(handle, buf, len, &amp;written);\n    if (status != FT_OK)\n        return status;\n    if (written == 0)\n        return -1;   // or FT_OTHER_ERROR if no special timeout handling required\n    if (written == len)\n        return FT_OK;\n    len -= written;\n    buf += written;\n}\n</code></pre>\n\n<p>See also <a href=\"https://www.ftdichip.com/Support/SoftwareExamples/CodeExamples/CplusplusBuilder.htm\" rel=\"nofollow noreferrer\">Example 3, FT2232C Test Application</a> (file t_titan.cpp, function <code>DoRxTest</code> at line 289)</p>\n"}], "owner": {"reputation": 41, "user_id": 8543044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c92993b6b5f1666a683e2cafe84fb68?s=128&d=identicon&r=PG&f=1", "display_name": "Eerik", "link": "https://stackoverflow.com/users/8543044/eerik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1541718809, "creation_date": 1541623722, "last_edit_date": 1541718809, "question_id": 53197582, "link": "https://stackoverflow.com/questions/53197582/ftdi-would-need-to-know-more-details-about-the-ft-write-function", "title": "FTDI. Would need to know more details about the FT_Write() function", "body": "<p>A question about the <code>FT_Write()</code> function.</p>\n\n<pre><code>FT_STATUS FT_Write (FT_HANDLE ftHandle, LPVOID lpBuffer, DWORD dwBytesToWrite, LPDWORD lpdwBytesWritten)\n</code></pre>\n\n<p>I wonder about the <code>lpdwBytesWritten</code>.</p>\n\n<p>When will it ever return <code>*lpdwBytesWritten &lt; dwBytesToWrite</code>? Would <code>FT_Write</code> return other than <code>FT_OK</code> in that case?</p>\n\n<p>And how much data can I send in one call to <code>FT_Write</code>? What limit has the <code>dwBytesToWrite</code> parameter?</p>\n\n<p>I have not been able to find the answers to these questions. Have read in the <a href=\"https://www.ftdichip.com/Support/Knowledgebase/index.html?ft_write.htm\" rel=\"nofollow noreferrer\">FTDI Knowledgebase</a> and also in the <a href=\"https://www.ftdichip.com/Support/Documents/ProgramGuides/D2XX_Programmer&#39;s_Guide(FT_000071).pdf\" rel=\"nofollow noreferrer\">D2XX Programmer's Guide</a>.</p>\n"}, {"tags": ["c", "client", "response", "esp8266", "arduino-esp8266"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 3, "creation_date": 1541623221, "post_id": 53197443, "comment_id": 93283426, "body": "<code>char payload[] = &quot;&quot;;</code> defines a <code>char</code> array of size one. You can not write into it."}, {"owner": {"reputation": 135, "user_id": 1493344, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/704a6bc3c299850d47e6f64146f6a6f9?s=128&d=identicon&r=PG", "display_name": "pavolve", "link": "https://stackoverflow.com/users/1493344/pavolve"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541623517, "post_id": 53197443, "comment_id": 93283557, "body": "Make sense, but what if I don&#39;t know the payload&#39;s size? Does the solution for the case?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541623616, "post_id": 53197443, "comment_id": 93283603, "body": "On arduino you can use <code>String</code> or you can either set a max value <code>char payload[MAX];</code> or you dynamically reallocated it with <code>malloc</code> and <code>realloc</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": true, "score": 2, "last_activity_date": 1541624127, "creation_date": 1541624127, "answer_id": 53197670, "question_id": 53197443, "link": "https://stackoverflow.com/questions/53197443/esp8266-exception-3/53197670#53197670", "title": "ESP8266 Exception 3", "body": "<p>The problem is that you define <code>payload</code> as an array of size <code>1</code>. You can not store your data into it.</p>\n\n<p>On Arduino you can use the <code>String</code> type: </p>\n\n<pre><code>String payload;\n\nwhile (client.connected())\n{\n  if (client.available())\n  {\n    char data = client.read();\n    payload += data;\n  }\n}\n\nSerial.println(payload);\nclient.stop();\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 1493344, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/704a6bc3c299850d47e6f64146f6a6f9?s=128&d=identicon&r=PG", "display_name": "pavolve", "link": "https://stackoverflow.com/users/1493344/pavolve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5318, "favorite_count": 0, "accepted_answer_id": 53197670, "answer_count": 1, "score": 1, "last_activity_date": 1541624127, "creation_date": 1541623050, "question_id": 53197443, "link": "https://stackoverflow.com/questions/53197443/esp8266-exception-3", "title": "ESP8266 Exception 3", "body": "<p>I use the WiFiClient to connect to an external host and read the payload. That part of the code works fine until I've tried to collect the chars into one string to parse it after.</p>\n\n<p>There is the code</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n\nconst char* ssid = \"***\";\nconst char* password = \"***\";\n\nconst char* host = \"host.com\";\n\nvoid setup()\n{\n  Serial.begin(115200);\n  Serial.println();\n\n  Serial.printf(\"Connecting to %s \", ssid);\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED)\n  {\n    delay(500);\n    Serial.print(\".\");\n  }\n  Serial.println(\" connected\");\n  pinMode(D5, OUTPUT);\n}\n\nvoid runBullshit()\n{\n  digitalWrite(D5, true);\n  delay(500);\n  digitalWrite(D5, false);\n}\n\n\nvoid loop()\n{\n  WiFiClient client;\n\n  if (client.connect(host, 80))\n  {\n    client.print(String(\"GET /path\") + \" HTTP/1.1\\r\\n\" +\n             \"Host: \" + host + \"\\r\\n\" +\n             \"Connection: close\\r\\n\" +\n             \"\\r\\n\"\n            );\n\n    char payload[] = \"\";\n    int size = 0;\n\n    while (client.connected())\n    {\n      if (client.available())\n      {\n        char data = client.read();\n        payload[size] = data;\n      }\n      size++;\n    }\n    payload[sizeof(payload)] = '\\0';\n    Serial.println(payload);\n    client.stop();\n  }\n  else\n  {\n    Serial.println(\"connection failed!]\");\n    client.stop();\n  }\n  delay(3000);\n}\n</code></pre>\n\n<p>And there are the errors</p>\n\n<pre><code>Connecting to MikroTik-35C8D8 . connected\n\nException (3):\nepc1=0x40202611 epc2=0x00000000 epc3=0x00000000 excvaddr=0x40016d7f        depc=0x00000000\n\nctx: cont \nsp: 3ffffd80 end: 3fffffd0 offset: 01a0\n\n&gt;&gt;&gt;stack&gt;&gt;&gt;\n3fffff20:  00000000 40203ce8 3ffe8510 00000000  \n3fffff30:  3fffdad0 3ffeeab4 40203e0c 3fffefb0  \n3fffff40:  3fffdad0 00000000 00000064 40203ec6  \n3fffff50:  3fffdad0 00000000 3fffff98 40203f09  \n3fffff60:  3fffdad0 00000000 00000048 40203482  \n3fffff70:  3ffe88b9 00000000 40016d7f 40202611  \n3fffff80:  40204348 00000000 00001388 40203908  \n3fffff90:  00000000 3ffef77c 00000000 00000000  \n3fffffa0:  00000000 00000000 00000000 00000000  \n3fffffb0:  3fffdad0 00000000 3ffeeaac 40203e98  \n3fffffc0:  feefeffe feefeffe 3ffe8510 40100739  \n&lt;&lt;&lt;stack&lt;&lt;&lt;\n\nets Jan  8 2013,rst cause:2, boot mode:(3,7)\n\nload 0x4010f000, len 1384, room 16 \ntail 8\nchksum 0x2d\ncsum 0x2d\nvbb28d4a3\n~ld\n</code></pre>\n\n<p>So, if I'll just put the <code>data</code> into the Serial I'll see the whole payload with no errors, but in the case, up above I catch the Exception 3 and cause 2.</p>\n\n<p>PS And yeah, in my code I have digitalWrite and so on because I'm going to use the response to decide set the pin to HIGH or not</p>\n"}, {"tags": ["c", "while-loop", "binary", "numbers", "long-integer"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541622768, "post_id": 53197323, "comment_id": 93283232, "body": "Okay, why don&#39;t you try it? I think you can use the basic structure you have already. I think you&#39;ll need to add two variables, one to count the number of zeros currently visible, and one to keep track of the longest sequence seen. You just need to decide what to do when <code>(binn &amp; 1)</code> is true, and what to do when it&#39;s false."}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1541623801, "post_id": 53197403, "comment_id": 93283716, "body": "@DavidSchwartz Good point.  Actually, I&#39;ll move the <code>count &gt; maxcount</code> check into the &quot;0&quot; case to account for that."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1541623761, "last_edit_date": 1541623761, "creation_date": 1541622884, "answer_id": 53197403, "question_id": 53197323, "link": "https://stackoverflow.com/questions/53197323/c-how-can-i-count-length-of-the-longest-continuous-sequence-of-0s-in-long-variab/53197403#53197403", "title": "C How can I count length of the longest continuous sequence of 0s in long variable?", "body": "<p>You're actually counting the <em>total</em> number of zeros you find.  You need to increase the counter when you find a 0 and set the counter to 0 when you find a 1, and you have to keep track of the largest value of the counter.</p>\n\n<pre><code>int nullSeq(long binn)\n{\n    int count=0, maxcount=0;\n\n    if(binn==0) {\n        return 1;\n    }\n\n    while(binn!=0) {\n        if ((binn &amp; 1) == 0) {\n            count++;\n            if (count &gt; maxcount) {\n                maxcount = count;\n            }\n        } else {\n            count = 0;\n        }\n        binn=binn &gt;&gt; 1;\n    }\n    return maxcount;\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8585029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d13eb60f466ebadbb315f31deee439?s=128&d=identicon&r=PG&f=1", "display_name": "jirick", "link": "https://stackoverflow.com/users/8585029/jirick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 53197403, "answer_count": 1, "score": 2, "last_activity_date": 1541643418, "creation_date": 1541622497, "last_edit_date": 1541623550, "question_id": 53197323, "link": "https://stackoverflow.com/questions/53197323/c-how-can-i-count-length-of-the-longest-continuous-sequence-of-0s-in-long-variab", "title": "C How can I count length of the longest continuous sequence of 0s in long variable?", "body": "<p>I have a simple function which counts me how many 0s are in long variable where is a binary representation of some positive integer value. But I need to implement a new feature which will return the length of the longest continuous sequence of 0s... </p>\n\n<p>Function for count of 0s:</p>\n\n<pre><code>int nullSeq(long binn)\n{\n    int count=0;\n\n    if(binn==0)\n        return 1;\n\n    while(binn!=0)\n    {\n        if ((binn &amp; 1) == 0)\n        {\n            count++;\n        }\n        binn=binn &gt;&gt; 1;\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>F.e. the number 559. The binary representations of 559 is 1000101111. The 0 count function will return 4. The longest continuous sequence of zeros should be 3. Until now I unconsciously used the value of all zeros as a longest sequence. It worked for some numbers. But I need to implement a new function which will find the longest zero sequence.     </p>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 6, "creation_date": 1541622294, "post_id": 53197204, "comment_id": 93283025, "body": "Passing value to <code>x</code> is pointless because you change it in first statement: <code>x = *y;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1541622639, "creation_date": 1541622639, "answer_id": 53197349, "question_id": 53197204, "link": "https://stackoverflow.com/questions/53197204/understanding-pointed-value-assignment-c/53197349#53197349", "title": "Understanding pointed value-assignment C", "body": "<p>The first thing to notice is that the parameter <code>x</code> to the function is immediately overwritten with the value of <code>*y</code>.  So whatever value is given for this parameter is irrelevant to the result.</p>\n\n<p>The function is swapping <code>*y</code> and <code>*(y + 1)</code> using <code>x</code> as a temporary.  Because the parameter <code>y</code> corresponds to <code>&amp;a[1]</code> in <code>main</code>, that's the first location that gets swapped.  If you then swap in <code>&amp;a[1]</code> for <code>y</code> in the expression <code>*(y + 1)</code>, you get  <code>*(&amp;a[1]+ 1)</code> == <code>*((a + 1) + 1)</code> = <code>*(a + 2)</code> = <code>a[2]</code>.  So <code>a[1]</code> and <code>a[2]</code> are getting swapped, which it what you'll see if you print the contents of the array after calling <code>Boh</code>.</p>\n"}], "owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53197349, "answer_count": 1, "score": 0, "last_activity_date": 1541622639, "creation_date": 1541622003, "last_edit_date": 1541622045, "question_id": 53197204, "link": "https://stackoverflow.com/questions/53197204/understanding-pointed-value-assignment-c", "title": "Understanding pointed value-assignment C", "body": "<p>Good morning/evening everyone,</p>\n\n<p>I'd like to clear the following pointer-concept,</p>\n\n<p>In this prototype I'm passing the first value copying this first parameter x given in the main,and the second one I'm passing it through reference so I'm directly access its memory cell to change it permanently.</p>\n\n<p>What I don't get (in the function) is how the function manages the values,</p>\n\n<p>I'll try to be more specific, i don't understand how much those assignments are ''cyclic''.</p>\n\n<p>For example this function seems a kind of swap function to me because takes x that is and integer and assign to x the value pointed by y, that is the value pointed in turn by y+1, and so on.</p>\n\n<p>So I'd like to know when this sequence of assignments starts and ends, to understand why whether i print it in the main or in the function it printf always If I'm not mistaken {11,33,22,44}</p>\n\n<pre><code>void Boh(int x,int *y)\n{\n    x = *y;\n    *y = *(y+1);\n    *(y+1) = x;\n}\n\nint main()\n{\n    int a[] = {11,22,33,44};\n    Boh(a[0],&amp;a[1]); \\* (Point 1) *\\\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "malloc", "c-strings"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1541621514, "post_id": 53197071, "comment_id": 93282697, "body": "I&#39;d say its time to learn how to use a debugger."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541621557, "post_id": 53197071, "comment_id": 93282718, "body": "Why 10 in <code>malloc(sizeof(char) * 10)</code>?"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541621561, "post_id": 53197071, "comment_id": 93282720, "body": "This doesn&#39;t make sense: <code>printf(&quot;%2i &lt;&lt; %#08x adress has %s in it\\n&quot;, j, uniquNodes[j], uniquNodes[j]);</code>"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 8, "creation_date": 1541621611, "post_id": 53197071, "comment_id": 93282741, "body": "<code>uniquNodes = malloc(0);</code> Ahm ..."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1541621666, "post_id": 53197071, "comment_id": 93282776, "body": "Can you explain what your code is supposed to do, and how it&#39;s supposed to do it? Compare what you&#39;ve posted with the idea of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1541621732, "post_id": 53197071, "comment_id": 93282806, "body": "<code>uniquNodes = malloc(0); ...                uniquNodes[count] = ...</code>  is UB as <code>uniquNodes</code> does not point to sufficient memory."}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 0, "creation_date": 1541621818, "post_id": 53197071, "comment_id": 93282839, "body": "<code>if (uniquNodes == NULL) { free(uniquNodes); }</code>.."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1541621903, "post_id": 53197071, "comment_id": 93282872, "body": "Not sure what you&#39;re doing, but I can&#39;t remember the last time I used four nested <code>for</code> loops. Make sure you understand your algorithm before coding,, and I&#39;d recommend splitting that up into multiple functions... there&#39;s a whole lot going on in <code>relationTest</code>"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 2, "creation_date": 1541622209, "post_id": 53197071, "comment_id": 93282981, "body": "@TormundGiantsbane While it is nonsense it is actually still legal."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1541622346, "post_id": 53197071, "comment_id": 93283056, "body": "<code>char pairs[numPairs][2][10];</code> seems like a recipe for disaster. Have you considered using an <i>array of struct</i> containing the pairs?"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1541627192, "post_id": 53197071, "comment_id": 93285251, "body": "Subclause 7.22.3 C Standard [ISO/IEC 9899:2011]: &quot;If the size of the space requested is zero, the behavior is implementation-defined: either a null pointer is returned, or the behavior is as if the size were some nonzero value, except that the returned pointer shall not be used to access an object.&quot; Have you tried <code>realloc</code>?"}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541631982, "post_id": 53197071, "comment_id": 93287028, "body": "@chux because I want 10 to be the max size of the character array, I could probably dynamically allocate just enough by getting the length of the string, but I want to get this working first."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541632270, "post_id": 53197071, "comment_id": 93287153, "body": "@SpeedrunnerG55 Do you see now that <code>uniquNodes = malloc(0);</code> is insufficient memory allocation?"}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541633292, "post_id": 53197071, "comment_id": 93287445, "body": "@FiddlingBits that line is supposed to print the address of the character array and the string it contains, so I can make sure that my pointer didn&#39;t change and i can see if the value changed. normally I would not have that in the function it&#39;s just me trying to see why the string became what it is"}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541633489, "post_id": 53197071, "comment_id": 93287475, "body": "@chux yes, but every time before i try to assign it any data i do <code>uniquNodes[count] = malloc(sizeof(char) * 10);</code> to allocate it 10 more bytes for each new string i add, it starts out as 0, and should grow as needed. unless im missing something"}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "reply_to_user": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1541633864, "post_id": 53197071, "comment_id": 93287592, "body": "@NeilEdelman ive tried <code>if(realloc(uniquNodes,(count+1) * sizeof(char) * 10) == NULL){           free(uniquNodes);           printf(&quot;REALLOC FAILLED&quot;);           exit(0);         }</code> the error message still says &quot;REALLOC&quot; from when i tried to use this but it wont even run"}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541634052, "post_id": 53197071, "comment_id": 93287634, "body": "@TimRandall ill cut down the part of the function down and give it example data so it can run by itself"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541635716, "post_id": 53197071, "comment_id": 93288010, "body": "It&#39;s very easy to slip up in memory allocation with your current system. Encourage you to follow @DavidC.Rankin&#39;s advice; use <code>struct</code>s that enforce your meaning. See <a href=\"https://stackoverflow.com/questions/21006707/proper-usage-of-realloc\" title=\"proper usage of realloc\">stackoverflow.com/questions/21006707/proper-usage-of-realloc</a>&zwnj;&#8203;."}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "reply_to_user": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1541648738, "post_id": 53197071, "comment_id": 93290936, "body": "@NeilEdelman using <code>struct Pair{   char p[2][10]; };</code> seems good idea but declaring each value manually for the shortened example is a lot more tedious than just using the 3d array, ill keep it in mind once i get the rest working tho"}, {"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541668884, "post_id": 53197071, "comment_id": 93297476, "body": "The edit changed <code>uniquNodes = malloc(0);</code> to <code>words = malloc(0);</code> so the first comment made by @Osiris, above, that shows a big error still applies."}], "answers": [{"comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "edited": false, "score": 0, "creation_date": 1541695251, "post_id": 53210705, "comment_id": 93312336, "body": "@SpeedrunnerG55 Its similar to that, but i have adjusted my answer. Note that the return value of <code>realloc</code> needs to be assigned to the pointer since the place can change."}, {"owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "edited": false, "score": 0, "creation_date": 1541699824, "post_id": 53210705, "comment_id": 93314669, "body": "since i believe <code>*words[i]</code> is a char would <code>sizeof *words[i]</code> always be 1, could just do <code>words[i] = malloc(max_len)</code>?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "edited": false, "score": 1, "creation_date": 1541700472, "post_id": 53210705, "comment_id": 93315007, "body": "@SpeedrunnerG55 Yes i only wrote it like that to be consistent."}], "tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": true, "score": 1, "last_activity_date": 1541695188, "last_edit_date": 1541695188, "creation_date": 1541690245, "answer_id": 53210705, "question_id": 53197071, "link": "https://stackoverflow.com/questions/53197071/allocate-memory-to-2d-character-array-on-the-fly/53210705#53210705", "title": "allocate memory to 2d character array on the fly", "body": "<p>It is actually not a 2D array, it is a pointer to a character pointer (<code>char **</code>).</p>\n\n<p><code>words</code> point to a block of <code>char *</code>, where each element of this block points to a <code>char</code> block. You only have allocated memory for the <code>char</code> blocks, but not for the <code>char *</code> block. (You have allocated it with size 0 so you can not access it). You also need to free every block you allocated, otherwise the memory is leaked. It would be also good practice to check the return value of <code>malloc</code>, since it returns <code>NULL</code> if it fails and further dereferencing a <code>NULL</code> pointer will lead to undefined behavior.</p>\n\n<p>This should work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int count = 6, max_len = 10, words_n = 0;\n    char **words = NULL;\n\n    for(int i=0; i&lt;count; i++)\n    {\n        words = realloc(words, ++words_n * sizeof *words);\n        if(!words)\n        {\n            //Error handling\n            return -1;\n        }\n        words[i] = malloc(max_len * sizeof *words[i]); \n        if(!words[i])\n        {\n            //Error handling\n            return -1;\n        }\n        strncpy(words[i], \"3\", max_len); //Better to protect against overflows.\n        words[i][max_len-1] = '\\0';\n        printf(\"%p -&gt; %s\\n\", (void*)words[0], words[0]); //\"%p\" for printing pointers.\n    }\n\n    for(int i=0; i&lt;count; i++)\n    {\n        free(words[i]); //Free every allocated element.\n    }\n    free(words);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8184482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc5af4ed702db27a99d0ab703fc3cb?s=128&d=identicon&r=PG", "display_name": "SpeedrunnerG55", "link": "https://stackoverflow.com/users/8184482/speedrunnerg55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1541714695, "accepted_answer_id": 53210705, "answer_count": 1, "score": -1, "last_activity_date": 1541695188, "creation_date": 1541621342, "last_edit_date": 1541663656, "question_id": 53197071, "link": "https://stackoverflow.com/questions/53197071/allocate-memory-to-2d-character-array-on-the-fly", "closed_reason": "Not suitable for this site", "title": "allocate memory to 2d character array on the fly", "body": "<p>I am trying to allocate memory to a 2d character array as I determine its size. (the count is assumed to be an unknown value) it seems to work until something starts to reassign garbage data to the array</p>\n\n<pre><code>0xd28fe280 -&gt; 3\n0xd28fe280 -&gt; 3\n0xd28fe280 -&gt; 3\n0xd28fe280 -&gt; 3\n0xd28fe280 -&gt; \ufffd\ufffd\ufffd[U\n0xd28fe280 -&gt; \ufffd\ufffd\ufffd[U\n</code></pre>\n\n<p>what essentially what I want to do is allocate memory just before I populate the array with strings.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n  int count = 6;\n  char **words;\n  words = malloc(0);\n  for(int i = 0;i &lt; count; i++){\n    words[i] = malloc(10);\n    strcpy(words[i],\"3\");\n    printf(\"%#08x -&gt; %s\\n\",words[0],words[0]);\n  }\n  free(words);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "unix", "process", "signals"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541621185, "post_id": 53196981, "comment_id": 93282538, "body": "Please format your code."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1541621191, "post_id": 53196981, "comment_id": 93282540, "body": "You can only safely make async-signal-safe function calls from within a signal handler.  <code>printf()</code> is not async-signal-safe.  See <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541621195, "post_id": 53196981, "comment_id": 93282545, "body": "Is there a difference between <code>sigaction</code> and <code>Sigaction</code>?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 3, "creation_date": 1541621340, "post_id": 53196981, "comment_id": 93282611, "body": "I see no <code>case</code>, and no <code>switch</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541621452, "post_id": 53196981, "comment_id": 93282659, "body": "@WeatherVane <code>Sigaction</code> is how you call the function if you&#39;re calling it at the beginning of a sentence. :)"}, {"owner": {"reputation": 45, "user_id": 9169719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eba984c502b7497469f24fa4ee38fbf?s=128&d=identicon&r=PG&f=1", "display_name": "M. Chakhtoura", "link": "https://stackoverflow.com/users/9169719/m-chakhtoura"}, "edited": false, "score": 0, "creation_date": 1541621524, "post_id": 53196981, "comment_id": 93282700, "body": "Sorry guys, I re-edited the whole thing"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541621633, "post_id": 53196981, "comment_id": 93282757, "body": "@Barmar they are all at the beginning of a sentence."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541622071, "post_id": 53196981, "comment_id": 93282931, "body": "@WeatherVane I didn&#39;t see the use in the code before, I thought you were just making a snarky comment about the title."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1541622192, "post_id": 53196981, "comment_id": 93282978, "body": "@TimRandall He&#39;s edited that out of the question, but now I think he was asking why it switched from lowercase <code>sigaction</code> to mixed case <code>Sigaction</code>, not about <code>case</code> and <code>switch</code> statements."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541622255, "post_id": 53196981, "comment_id": 93283004, "body": "It seems like you have a bunch of typos. I <code>Sigaction</code> is probably a typo for <code>sigaction</code>, the initial capital was not intended. And there shouldn&#39;t be a space in <code>old_ treatment</code>."}, {"owner": {"reputation": 45, "user_id": 9169719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eba984c502b7497469f24fa4ee38fbf?s=128&d=identicon&r=PG&f=1", "display_name": "M. Chakhtoura", "link": "https://stackoverflow.com/users/9169719/m-chakhtoura"}, "edited": false, "score": 0, "creation_date": 1541622321, "post_id": 53196981, "comment_id": 93283048, "body": "It&#39;s just from copy and paste, and that doesn&#39;t even affect the code, come on guys"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1541622424, "post_id": 53196981, "comment_id": 93283095, "body": "Yes, but the point about the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> is that we don&#39;t have to fumble around asking whether a typo is a real typo or an accidental typo, or whether the code is the <i>actual</i> code or only <i>resembles</i> it."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9169719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eba984c502b7497469f24fa4ee38fbf?s=128&d=identicon&r=PG&f=1", "display_name": "M. Chakhtoura", "link": "https://stackoverflow.com/users/9169719/m-chakhtoura"}, "edited": false, "score": 0, "creation_date": 1541623157, "post_id": 53197356, "comment_id": 93283397, "body": "Thanks a lot, dude!"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1541622658, "creation_date": 1541622658, "answer_id": 53197356, "question_id": 53196981, "link": "https://stackoverflow.com/questions/53196981/sigaction-handler-in-c/53197356#53197356", "title": "Sigaction handler in C", "body": "<p>The purpose of this is to temporarily change the action for <code>SIGTSTP</code>, then restore it back.</p>\n\n<pre><code>sigaction(SIGTSTP, &amp;rien, &amp;old_handler);\n</code></pre>\n\n<p>sets it to the default action, and saves the previous action in <code>old_handler</code>.</p>\n\n<p>Then it sends itself a <code>SIGSTOP</code> signal to actually suspend the process.</p>\n\n<p>When that returns, it means that the process has been continued, so it puts back the old action with:</p>\n\n<pre><code>sigaction(SIGTSTOP, &amp;old_handler, NULL);\n</code></pre>\n\n<p>It's not clear why this is needed, though. It would make more sense if it suspended the process by sending a <code>SIGTSTP</code> signal rather than <code>SIGSTOP</code>. In that case, it needs to set the default action, otherwise it would just recurse infinitely.</p>\n"}], "owner": {"reputation": 45, "user_id": 9169719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eba984c502b7497469f24fa4ee38fbf?s=128&d=identicon&r=PG&f=1", "display_name": "M. Chakhtoura", "link": "https://stackoverflow.com/users/9169719/m-chakhtoura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 53197356, "answer_count": 1, "score": 0, "last_activity_date": 1541622658, "creation_date": 1541620975, "last_edit_date": 1541621494, "question_id": 53196981, "link": "https://stackoverflow.com/questions/53196981/sigaction-handler-in-c", "title": "Sigaction handler in C", "body": "<p>We have an assignment to explain this text of code. My only problem is understanding the handle_signal function, why did we use 2 new sigaction and then used \"old_treatment\" with \"rien\"?</p>\n\n<pre><code>#define DELAY 1\n#define NB_ITERATIONS 60\nvoid handle_signal (int num_signal){\n    struct sigaction rien, old_ treatment;\n    printf (\"Signal %d =&gt; \", num_signal);\n    printf (\"I have received a SIGTSTP.\\n\");\n    rien.sa_handler = SIG_DFL;\n    rien.sa_flags = 0;\n    sigemptyset (&amp;rien.sa_mask);\n    sigaction (SIGTSTP, &amp;rien, &amp;old_ treatment);\n    printf (\"Then I sleep....\\n\");\n    kill (getpid(), SIGSTOP);\n    printf (\"They wakes me?\\n\");\n    Sigaction (SIGTSTP, &amp;old_ treatment, NULL);\n    printf (\"Here we go again!\\n\");\n}\n\nint main (void){\n    struct sigaction a;\n    int i;\n    a.sa_handler = handle_signal;\n    sigemptyset (&amp;a.sa_mask);\n    sigaction (SIGTSTP, &amp;a, NULL);\n    for (i = 1; i &lt; NB_ITERATIONS; i++) {\n    sleep (DELAY);\n    printf (\"%d\", i % 10);\n    fflush (stdout);}\n    printf (\"End\\n\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 5557, "user_id": 821995, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6b1634f2193887994408ae8d024f52f?s=128&d=identicon&r=PG", "display_name": "F.X.", "link": "https://stackoverflow.com/users/821995/f-x"}, "edited": false, "score": 5, "creation_date": 1541621039, "post_id": 53196962, "comment_id": 93282458, "body": "Can you look at the output of <code>gcc -E</code> (right after preprocessor)? It might give you a hint as to what goes wrong."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 4, "creation_date": 1541621118, "post_id": 53196962, "comment_id": 93282498, "body": "Is it just the name <code>si_value</code>? Smells like a macro is getting substituted into your code. What about something like <code>si_vy1ghad563nvy43wd</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541621170, "post_id": 53196962, "comment_id": 93282531, "body": "it&#39;s not possible that <code>si_</code> prefix is interpreted. <code>si_value</code>, that&#39;s another story."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1541621263, "post_id": 53196962, "comment_id": 93282573, "body": "It is time to use some IDE which immediately highlights <code>si_value</code> as a macro and allows to jump to definition point..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 4, "creation_date": 1541621322, "post_id": 53196962, "comment_id": 93282599, "body": "@alterigel sorry, <code>si_vy1ghad563nvy43wd</code> is also a reserved keyword."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1541621510, "post_id": 53196962, "comment_id": 93282693, "body": "I forgot to mention that using other names with the <code>si</code> prefix work, for some reason. For instance, <code>si_addr</code> also reproduces the error, but as @alterigel has pointed out, <code>si_addr2</code> or even <code>si_value2</code> doesn&#39;t."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1541621593, "post_id": 53196962, "comment_id": 93282731, "body": "@Jean-Fran&#231;oisFabre <i>sorry, <code>si_vy1ghad563nvy43wd</code> is also a reserved keyword</i>  Where is that a reserved keyword?  If it exists, I can&#39;t find that in POSIX nor the C standard.  Offhand, I don&#39;t even see how <code>si_value</code> fits into the POSIX &quot;functions and external identifiers&quot; reservation of identifiers."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541621609, "post_id": 53196962, "comment_id": 93282740, "body": "so the title of your question is misleading. It&#39;s like saying that using variable names starting with <code>i</code> doesn&#39;t work when you only tried <code>int</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1541621636, "post_id": 53196962, "comment_id": 93282758, "body": "@AndrewHenle okay this was a joke."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "reply_to_user": {"reputation": 5557, "user_id": 821995, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6b1634f2193887994408ae8d024f52f?s=128&d=identicon&r=PG", "display_name": "F.X.", "link": "https://stackoverflow.com/users/821995/f-x"}, "edited": false, "score": 1, "creation_date": 1541621966, "post_id": 53196962, "comment_id": 93282897, "body": "@F.X. Thank you very much for the suggestion! I actually get <code>_sifields._rt.si_sigval</code> where my <code>si_value</code> variable should be. That explains the <code>expected expression before \u2018.\u2019 token</code> error."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 3, "creation_date": 1541627328, "post_id": 53196962, "comment_id": 93285297, "body": "<a href=\"https://code.woboq.org/userspace/glibc/sysdeps/unix/sysv/linux/bits/types/siginfo_t.h.html#135\" rel=\"nofollow noreferrer\">#define si_value        _sifields._rt.si_sigval</a>"}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1541627670, "post_id": 53196962, "comment_id": 93285454, "body": "Good catch, @MarkPlotnick!"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 1, "creation_date": 1541630510, "post_id": 53196962, "comment_id": 93286531, "body": "When you see an error in C that doesn&#39;t make sense, there&#39;s a macro hidden somewhere :)"}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1541621409, "post_id": 53197025, "comment_id": 93282637, "body": "Where does it say that <code>si_value</code> is a reserved name? All I see is references to a field of that name in the <code>siginfo_t</code> structure, but that&#39;s not at all the same thing?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1541621477, "post_id": 53197025, "comment_id": 93282674, "body": "@unwind, the prefix <code>si_</code> is reserved when using <code>&lt;signal.h&gt;</code>"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1541621496, "post_id": 53197025, "comment_id": 93282680, "body": "@unwind  2.2.2 The namespace"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541621556, "post_id": 53197025, "comment_id": 93282717, "body": "how can a <i>prefix</i> be reserved?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1541621641, "post_id": 53197025, "comment_id": 93282760, "body": "@RSahu Ah, okay. That was extremely hard to figure out from that page. Thanks."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1541621667, "post_id": 53197025, "comment_id": 93282778, "body": "@Jean-Fran&#231;oisFabre Probably in the same manner they&#39;ve reserved a <code>_t</code> suffix"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1541621710, "post_id": 53197025, "comment_id": 93282794, "body": "okay, just avoid this naming or there <i>could</i> be collisions. Or always code in german."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1541621913, "post_id": 53197025, "comment_id": 93282875, "body": "@Jean-Fran&#231;oisFabre -- it&#39;s reserved because POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html\" rel=\"nofollow noreferrer\">says it is</a> (search for si_)."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 0, "creation_date": 1541622631, "post_id": 53197025, "comment_id": 93283183, "body": "Thank you for the answer, @baummitaugen! I&#39;m sorry for not marking yours as the answer for my question, do not take it personal. I just found the answer by @barmar more self-explanatory for future visitors (but, once again, thank you very much for the help)."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 4, "creation_date": 1541628254, "post_id": 53197025, "comment_id": 93285705, "body": "@SRG No worries; your vote, your judgement, that&#39;s by design."}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 12, "last_activity_date": 1541621160, "creation_date": 1541621160, "answer_id": 53197025, "question_id": 53196962, "link": "https://stackoverflow.com/questions/53196962/why-does-signal-h-prevent-the-use-of-si-as-prefix-for-the-name-of-some-vari/53197025#53197025", "title": "Why does &lt;signal.h&gt; prevent the use of &quot;si_&quot; as prefix for the name of some variables?", "body": "<blockquote>\n  <p>how could I elegantly avoid this type of issues in the future?</p>\n</blockquote>\n\n<p>You check some <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html\" rel=\"noreferrer\">documentation</a> for the headers you are using and avoid the names that are documented as reserved.</p>\n"}, {"comments": [{"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 0, "creation_date": 1541622458, "post_id": 53197207, "comment_id": 93283111, "body": "Thank you Barmar, this answer is exactly what I was looking for!"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1541623824, "post_id": 53197207, "comment_id": 93283733, "body": "Aren&#39;t identifiers starting with &#39;__&#39; reserved for the implementation? Can&#39;t it use that instead? Or is that something else?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1541624125, "post_id": 53197207, "comment_id": 93283882, "body": "I think this is actually a POSIX thing, while <code>__</code> is a C thing. So POSIX is trying to avoid names that are reserved to the C implementation."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1541624219, "post_id": 53197207, "comment_id": 93283934, "body": "But isn&#39;t <code>signal.h</code> a standard header?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541624333, "post_id": 53197207, "comment_id": 93283984, "body": "It may also be a backward compatibility issue -- <code>signal.h</code> had already been using lots of <code>si_</code> names. Rather than list all these existing names as reserved, it just made the whole prefix reserved."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1541624499, "post_id": 53197207, "comment_id": 93284046, "body": "C11 reserves names starting <code>SIG</code> followed by a capital letter, or <code>SIG_</code> followed by a capital letter (C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.14p4\" rel=\"nofollow noreferrer\">&#167;7.14 Signal handling <code>&lt;signal.h&gt;</code></a>). POSIX reserves a lot more symbol prefixes when <code>&lt;signal.h&gt;</code> is included \u2014 <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_02_02\" rel=\"nofollow noreferrer\">&#167;2.2.2 The Name Space</a>. The C standard reserves leading <code>__</code> for use by the implementation (C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">&#167;7.1.3 Reserved identifiers</a>). Read and take care to avoid conflicts. Or fix &#39;em when they arise."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1541624676, "post_id": 53197207, "comment_id": 93284136, "body": "@Kevin: The <code>&lt;signal.h&gt;</code> header is both a standard C header and a standard POSIX header.  Since you didn&#39;t specify <code>-std=c11</code> or similar when you invoked GCC, it enabled all the GNU extensions, which includes the POSIX functions and symbols.  If you specified <code>-std=c11</code>, you might need to write <code>-D_XOPEN_SOURCE=700</code> on the compiler command line, or a similar <code>#define</code> in a header or your code (I recommend doing it in a header, having used it in code once upon a decade ago, and having spent a fair amount of time undoing it since then)."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1541624804, "post_id": 53197207, "comment_id": 93284204, "body": "I never ran GCC for this :). Just curious and asking questions that have now been answered. +1&#39;d the answer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541629121, "post_id": 53197207, "comment_id": 93286020, "body": "I am still not sure if the Linux header is compliant! The <code>si_value</code> is not reserved as a macro as such. There&#39;s a <i>separate</i> list of macro prefixes."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541636813, "post_id": 53197207, "comment_id": 93288281, "body": "@JonathanLeffler: GCC <i>always</i> enables not just POSIX, but full <code>_GNU_SOURCE</code> extensions, when compiling C++. This is a known bug that&#39;s a major pain for them to fix..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541638052, "post_id": 53197207, "comment_id": 93288573, "body": "@AnttiHaapala: In &#39;The Name Space&#39; section (previously linked), POSIX says: <i>Applications shall not declare or define identifiers with the same name as an identifier reserved in the same context. Since macro names are replaced whenever found, independent of scope and name space, macro names matching any of the reserved identifier names shall not be defined by an application if any associated header is included.</i>  Since <code>si_value</code> uses one of the reserved prefixes (<code>si_</code>), the header is allowed (by POSIX) to define a macro for <code>si_value</code>.  Does that explain enough?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 24, "last_activity_date": 1541624767, "last_edit_date": 1541624767, "creation_date": 1541622020, "answer_id": 53197207, "question_id": 53196962, "link": "https://stackoverflow.com/questions/53196962/why-does-signal-h-prevent-the-use-of-si-as-prefix-for-the-name-of-some-vari/53197207#53197207", "title": "Why does &lt;signal.h&gt; prevent the use of &quot;si_&quot; as prefix for the name of some variables?", "body": "<p><code>&lt;signal.h&gt;</code> doesn't actually prevent using <code>si_</code> as a prefix on your variables. However, the POSIX specification states that this prefix is reserved, in order to allow the header and the library functions that it declares to use these names, without having to worry that they'll conflict with your own variables.</p>\n\n<p>So what's happening here is that <code>si_value</code> is defined in some way in the header file, perhaps as a macro or typedef, and your attempt to use the same name conflicts with this. If you used <code>si_vy1ghad563nvy43wd</code> it probably would work, but theoretically the header could use that name (thinking that it would be unlikely to conflict with anything an application programmer would use).</p>\n\n<p>C doesn't have real namespaces, so naming conventions like this are used as a simple substitute.</p>\n"}], "owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1473, "favorite_count": 2, "accepted_answer_id": 53197207, "answer_count": 2, "score": 25, "last_activity_date": 1541628628, "creation_date": 1541620918, "last_edit_date": 1541628628, "question_id": 53196962, "link": "https://stackoverflow.com/questions/53196962/why-does-signal-h-prevent-the-use-of-si-as-prefix-for-the-name-of-some-vari", "title": "Why does &lt;signal.h&gt; prevent the use of &quot;si_&quot; as prefix for the name of some variables?", "body": "<p>I have been debugging a strange compilation error that I was getting inside my code, and I ended up finding out that I cannot use the prefix <code>si_</code> for some variable names (of any type) if <code>&lt;signal.h&gt;</code> is included.</p>\n\n<p>Here is a very simple source code example that reproduces the issue:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n\nint main(void)\n{\n    int si_value = 0;\n\n    return 0;\n}\n</code></pre>\n\n<p>If I try to compile this with the GNU C Compiler <code>gcc</code>, I get the following error:</p>\n\n<pre><code>&gt; gcc example.c\nIn file included from /usr/include/signal.h:57:0,\n                 from example.c:2:\nexample.c: In function \u2018main\u2019:\nexample.c:6:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018.\u2019 token\n     int si_value = 0;\n         ^\nexample.c:6:9: error: expected expression before \u2018.\u2019 token\n</code></pre>\n\n<p>Nonetheless, if I use another name such as <code>si_value2</code>, the error doesn't show up. As a reference, I'm using GCC v7.3.0 on Ubuntu Mate 18.04.1 LTS. The same problem is observed with <code>g++</code>.</p>\n\n<p>I suppose that this behaviour is due to some macro definition inside the <code>&lt;signal.h&gt;</code> header, but after going through it briefly, I couldn't seem to find anything really related.</p>\n\n<p>I honestly can fix it by just using another name. However, my concern is: <strong>how could I elegantly avoid this type of issue in the future?</strong></p>\n\n<hr>\n\n<p><strong>Update:</strong> As @F.X. has suggested, using <code>gcc -E example.c</code> shows that the variable name is expanded (hence, the error):</p>\n\n<pre><code>...\n    int \n# 6 \"example.c\" 3 4\n       _sifields._rt.si_sigval \n# 6 \"example.c\"\n                = 0;\n...\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "pthreads"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8005412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PrJsiVxQUn0/AAAAAAAAAAI/AAAAAAAAAGc/R-DVHmV-Emo/photo.jpg?sz=128", "display_name": "Devin M", "link": "https://stackoverflow.com/users/8005412/devin-m"}, "edited": false, "score": 0, "creation_date": 1541620157, "post_id": 53196634, "comment_id": 93282011, "body": "I&#39;m confused then. I ran the code without using pthreads at all (just simply making a call to iterate_dir instead of creating a pthread for it) and it works completely fine. So its within the scope when a make a recursive call but not when a make a call using a pthread?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 5, "user_id": 8005412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PrJsiVxQUn0/AAAAAAAAAAI/AAAAAAAAAGc/R-DVHmV-Emo/photo.jpg?sz=128", "display_name": "Devin M", "link": "https://stackoverflow.com/users/8005412/devin-m"}, "edited": false, "score": 1, "creation_date": 1541621267, "post_id": 53196634, "comment_id": 93282579, "body": "@DevinM <code>pthread_create</code> &quot;immediately&quot; returns, and the thread that called <code>pthread_create</code> continues to execute. <code>new_path</code> is only valid for as long as the calling thread stays in the <code>if(curr-&gt;d_type==DT_DIR){ ... }</code> block. If you replace <code>pthread_create</code> with a call to <code>iterate_dir</code>, then you only have one thread of execution and the calling thread waits for <code>iterate_dir</code> to return before it continues on, all the while it&#39;s waiting in the <code>if(curr-&gt;d_type==DT_DIR){ ... }</code> block so <code>new_path</code> is still in scope."}, {"owner": {"reputation": 4145, "user_id": 4135421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9JYKd.png?s=128&g=1", "display_name": "Gillsoft AB", "link": "https://stackoverflow.com/users/4135421/gillsoft-ab"}, "edited": false, "score": 0, "creation_date": 1541621599, "post_id": 53196634, "comment_id": 93282735, "body": "&quot;and it works completely fine&quot;, yes because you have only one thread when executing. cleblanc says that you should pass the memory address to the executing thread."}, {"owner": {"reputation": 5, "user_id": 8005412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PrJsiVxQUn0/AAAAAAAAAAI/AAAAAAAAAGc/R-DVHmV-Emo/photo.jpg?sz=128", "display_name": "Devin M", "link": "https://stackoverflow.com/users/8005412/devin-m"}, "edited": false, "score": 0, "creation_date": 1541621966, "post_id": 53196634, "comment_id": 93282896, "body": "Ok I used malloc to create each string I pass and it seemed to do the trick. Thanks for the help and explanations!"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": true, "score": 3, "last_activity_date": 1541619630, "creation_date": 1541619630, "answer_id": 53196634, "question_id": 53196590, "link": "https://stackoverflow.com/questions/53196590/how-do-pthreads-cause-a-segmentation-fault-in-c-despite-not-allocating-memory/53196634#53196634", "title": "How do pthreads cause a segmentation fault in c (despite not allocating memory)?", "body": "<pre><code>char new_path[strlen(curr-&gt;d_name)+strlen((char*)args)+2];\n</code></pre>\n\n<p>This memory address is invalid as soon as you leave the scope it was declared in, yet you pass that address to a new pthread.</p>\n"}], "owner": {"reputation": 5, "user_id": 8005412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PrJsiVxQUn0/AAAAAAAAAAI/AAAAAAAAAGc/R-DVHmV-Emo/photo.jpg?sz=128", "display_name": "Devin M", "link": "https://stackoverflow.com/users/8005412/devin-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53196634, "answer_count": 1, "score": -1, "last_activity_date": 1541619630, "creation_date": 1541619450, "question_id": 53196590, "link": "https://stackoverflow.com/questions/53196590/how-do-pthreads-cause-a-segmentation-fault-in-c-despite-not-allocating-memory", "title": "How do pthreads cause a segmentation fault in c (despite not allocating memory)?", "body": "<p>So I'm trying to iterate recursively through some given directory and copy all the contents of each file within each subdirectory to an output file. I'm required to create a new thread to copy the file as well as to iterate any subdirectories. What I do is iterate through a directory given from the terminal. With each call to iterate_dir, an array of pthreads is created and a counter for it, so I can close the directory after all threads created have been joined. So if a subdirectory was found, I create a pthread to call iterate_dir and pass it a new path, grow the pthread array by one and store the created pthread in it. If a file was found, I create a pthread to call copy_file, which opens the file reads its content, storing each character into a shared string (which is mutexed and dynamic in size). However, I keep getting some unexplained segmentation fault. I input a directory with 2 files and 2 subdirectories, with 1 subdirectory being empty, and the other containing 1 file. I tried removing copy_file and with it the pthread that called it, but I still got a segfault. I tried removing the array of pthreads I created, yet it still segfaulted. I tried stepping through it using gdb to no conclusive answer. I'll provide both cases, one without copy_file and the pthread array, one with them. They both segfault. My question is, how does a pthread segfault despite not even allocating anything (as is the case with the code without copy_file and the pthread array)? I'm really puzzled and was wondering if anyone had any ideas or even advice on any of the other code. Thanks.</p>\n\n<p>Without pthread array and copy_file (EASIER TO READ)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;fcntl.h&gt;\n\nvoid* iterate_dir(void* args);\n\n\nint main(int argc, char** argv){\n\n    char current_path[strlen(argv[1])+1];\n    strcpy(current_path,argv[1]);\n\n\n    pthread_t start;\n    pthread_create(&amp;start,NULL,&amp;iterate_dir,current_path);\n    pthread_join(start,NULL);\n\n}\n\n\n\nvoid* iterate_dir(void *args){\n\n\n    DIR *dd = opendir((char*)args);\n    struct dirent *curr;\n\n\n    while((curr = readdir(dd))!=NULL){\n\n        if(curr-&gt;d_type==DT_DIR &amp;&amp; (strcmp(curr-&gt;d_name,\".\")==0 || strcmp(curr-&gt;d_name,\"..\")==0)){\n\n            continue;\n\n        }   \n\n        if(curr-&gt;d_type==DT_DIR){\n\n\n            char new_path[strlen(curr-&gt;d_name)+strlen((char*)args)+2];\n            sprintf(new_path,\"%s/%s\",(char*)args,curr-&gt;d_name);\n            pthread_t new_thread;\n            pthread_create(&amp;new_thread,NULL,&amp;iterate_dir,new_path);\n\n\n        }else{\n\n\n\n        }\n\n\n    }\n\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>With copy_file and pthread array (HARDER TO READ)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;fcntl.h&gt;\n\nvoid* iterate_dir(void* args);\nvoid* copy_file(void* args);\n\npthread_mutex_t mut_for_final_string;\npthread_mutex_t mut_for_current_string_position;\nchar* final_string;\nint current_string_position;\n\n\nint main(int argc, char** argv){\n\n    char current_path[strlen(argv[1])+1];\n    strcpy(current_path,argv[1]);\n    char new_file_path[strlen(argv[2])+15+1];\n    sprintf(new_file_path,\"%s/%s\",argv[2],\"AllFiles-sorted\");\n    int output = open(new_file_path, O_WRONLY|O_CREAT, 0666);\n\n    final_string = (char*)malloc(sizeof(char));\n    current_string_position = 0;\n\n    pthread_mutex_init(&amp;mut_for_final_string,NULL);\n    pthread_mutex_init(&amp;mut_for_current_string_position,NULL);\n\n    pthread_t start;\n    pthread_create(&amp;start,NULL,&amp;iterate_dir,current_path);\n    pthread_join(start,NULL);\n\n    write(output,final_string,current_string_position);\n\n    pthread_mutex_destroy(&amp;mut_for_final_string);\n    pthread_mutex_destroy(&amp;mut_for_current_string_position);\n\n}\n\n\nvoid* copy_file(void *args){\n\n    int input = open((char*)args,O_RDONLY);\n    char c;\n\n    while(read(input,&amp;c,1)&gt;0){\n\n        pthread_mutex_lock(&amp;mut_for_final_string);\n        pthread_mutex_lock(&amp;mut_for_current_string_position);\n        final_string[current_string_position] = c;\n        char* tmp = NULL;\n        tmp = realloc(final_string,(current_string_position)+2);\n        while(tmp==NULL){}\n        final_string = tmp;\n        (current_string_position)++;\n        pthread_mutex_unlock(&amp;mut_for_current_string_position);\n        pthread_mutex_unlock(&amp;mut_for_final_string);\n\n    }\n\n    close(input);\n\n    return NULL;\n\n}\n\n\nvoid* iterate_dir(void *args){\n\n\n    DIR *dd = opendir((char*)args);\n    struct dirent *curr;\n    pthread_t* tids = (pthread_t*)malloc(sizeof(pthread_t));\n    int tids_counter = 0;\n\n\n\n    while((curr = readdir(dd))!=NULL){\n\n        if(curr-&gt;d_type==DT_DIR &amp;&amp; (strcmp(curr-&gt;d_name,\".\")==0 || strcmp(curr-&gt;d_name,\"..\")==0)){\n\n            continue;\n\n        }   \n\n        if(curr-&gt;d_type==DT_DIR){\n\n\n            char new_path[strlen(curr-&gt;d_name)+strlen((char*)args)+2];\n            sprintf(new_path,\"%s/%s\",(char*)args,curr-&gt;d_name);\n            pthread_t new_thread;\n            pthread_create(&amp;new_thread,NULL,&amp;iterate_dir,new_path);\n            tids[tids_counter] = new_thread;\n            tids_counter++;\n\n            pthread_t* tmp_ptr = NULL;\n            tmp_ptr = realloc(tids, (sizeof(pthread_t)*(tids_counter+1)));\n            while(tmp_ptr==NULL){}\n            tids = tmp_ptr;\n\n\n        }else{\n\n            char old_path[strlen(curr-&gt;d_name)+strlen((char*)args)+2];\n            sprintf(old_path,\"%s/%s\",(char*)args,curr-&gt;d_name);\n            pthread_t new_thread;\n            pthread_create(&amp;new_thread,NULL,&amp;copy_file,old_path);\n            tids[tids_counter] = new_thread;\n            tids_counter++;\n\n            pthread_t* tmp_ptr = NULL;\n            tmp_ptr = realloc(tids, (sizeof(pthread_t)*(tids_counter+1)));\n            while(tmp_ptr==NULL){}\n            tids = tmp_ptr;\n\n\n        }\n\n\n    }\n\n    int i;\n    for(i=0;i&lt;tids_counter;i++){\n\n        pthread_join(tids[i],NULL);\n\n    }\n\n    closedir(dd);\n\n    return NULL;\n\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "volatile", "cpu-registers"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1541617617, "post_id": 53196091, "comment_id": 93280809, "body": "I find this interesting, but from an academic point of view only. Do you have a real-world example where this presumed stall is causing measurable slowdown despite your CPU&#39;s pipelining?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1541617693, "post_id": 53196091, "comment_id": 93280845, "body": "Take a step back, explain what your <i>actual</i> problem is, because this is almost certainly an XY problem."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1541617881, "post_id": 53196091, "comment_id": 93280928, "body": "I don&#39;t think this is possible as this breaks the transparency of caching."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1541617950, "post_id": 53196091, "comment_id": 93280960, "body": "Your register won&#39;t magically be updated at some later time for obvious reasons. What you can do is use prefetching but if that doesn&#39;t provide the data by the time you actually need it, it will stall."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1541618128, "post_id": 53196091, "comment_id": 93281027, "body": "Wouldn&#39;t it be faster to accumulate in a register and then periodically decide where to write it?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1541619001, "post_id": 53196091, "comment_id": 93281465, "body": "On the Mill you can (to an extent): <a href=\"https://www.youtube.com/watch?v=8E4qs2irmpc&amp;t=1604\" rel=\"nofollow noreferrer\">youtube.com/watch?v=8E4qs2irmpc&amp;t=1604</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1541634804, "post_id": 53196091, "comment_id": 93287820, "body": "@stark: according to C&#39;s &quot;as-if&quot; optimization rules, this code will already optimize the <code>*accumulator = do_work();</code> into a register, if <code>do_work()</code> can inline and can be proven not to read from whatever <code>accumulator</code> points to.  (alias analysis).  <code>int *accumulator</code> is not <code>volatile</code>, so actual memory access is not a side-effect that needs to be preserved, only correctness of the final result."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1541634986, "post_id": 53196091, "comment_id": 93287865, "body": "@ajp: out-of-order execution attempts to solve the problem of hiding cache-miss latency in a much more general way, without changing correctness.  Most CPU architectures don&#39;t have anything like this where the results are timing-dependent."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1541645090, "post_id": 53196091, "comment_id": 93290183, "body": "Related: <a href=\"https://stackoverflow.com/q/52221575\">Is it possible to \u201cabort\u201d when loading a register from memory rather the triggering a page fault?</a> (not very efficiently, but there is kind of a hack you can use on Intel x86 CPUs with transactional memory)."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1542423133, "post_id": 53196091, "comment_id": 93574118, "body": "Are you targeting x86?"}], "owner": {"reputation": 1431, "user_id": 1553741, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6daac35161547a75785e69de774334b8?s=128&d=identicon&r=PG", "display_name": "ajp", "link": "https://stackoverflow.com/users/1553741/ajp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1541617342, "creation_date": 1541617342, "question_id": 53196091, "link": "https://stackoverflow.com/questions/53196091/can-i-load-a-value-into-a-register-without-stalling-until-it-is-fetched-from-mem", "title": "Can I load a value into a register without stalling until it is fetched from memory?", "body": "<p>I'd like to kick off a main memory access, but as long as I get the new value at some point, I'm not too fussy about exactly when the new value arrives. In the meantime, I'd like to continue using the value that's currently in the register, rather than stalling until the memory fetch completes.</p>\n\n<p>Here is a motivating toy example in C. I have a worker loop that continually does some work, and accumulates the results into some storage. Every so often, I'd like to swap where the values are being accumulated to (analogous to log rotation on a Linux server). As long as each computed value gets accumulated to exactly one storage location, I'm happy.</p>\n\n<p>As written, the cpu will stall while the memory fetch happens, because I haven't expressed that I want to use the pre-existing, \"wrong/stale\" value in the register until the memory fetch completes.</p>\n\n<p>How can I make that clear to the compiler/cpu? It's fine if it requires directly writing assembly. I'm interested in answers that work on any/all architectures.</p>\n\n<pre><code>// does unspecified work and returns an int.\ninline int do_work();\n\n// where our main thread accumulates its work\nint * accumulator;\n\n// assume that some other thread is concurrently updating this.\n// Every so often, we want to switch our accumulator to be a\n// newer value taken from here, but we're not fussy about exactly\n// when that switch happens.\nint * volatile * current_accumulator;\n\n\nvoid work_loop() {\n    int * accumulator = *current_accumulator;\n    // Here, I want to block once until `*current_accumulator`\n    // is loaded into a register.\n    while (1) {\n        for (int i = 0; i &lt; 100; ++i) {\n            // This has a dependency on the memory load, and so\n            // it will stall until the new value is loaded into\n            // the register. However I don't want that. I want the\n            // register to update eventually, but I want to always\n            // be using the value that happens to currently be there.\n            *accumulator += do_work();\n        }\n        accumulator = *current_accumulator;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "struct", "malloc"], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 0, "last_activity_date": 1541616897, "last_edit_date": 1541616897, "creation_date": 1541616747, "answer_id": 53195941, "question_id": 53195779, "link": "https://stackoverflow.com/questions/53195779/unable-to-free-a-child-of-a-parent-struct/53195941#53195941", "title": "Unable to free a child of a parent struct", "body": "<p><code>memcpy(&amp;_parent-&gt;_child, &amp;list, sizeof(list));</code> is the problem.</p>\n\n<p>Try with:</p>\n\n<p><code>memcpy(_parent-&gt;_child, list, sizeof(list));</code></p>\n\n<p>The signature of <code>memcpy</code> is:</p>\n\n<p><code>void *memcpy(void *str1, const void *str2, size_t n)</code></p>\n\n<p>and you are passing a pointer to a pointer instead.</p>\n\n<p>This triggers undefined behaviour because your buffers contains trash basically which <code>free()</code> can't use.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10620041, "user_type": "registered", "profile_image": "https://graph.facebook.com/1932659146815989/picture?type=large", "display_name": "Neethan", "link": "https://stackoverflow.com/users/10620041/neethan"}, "edited": false, "score": 0, "creation_date": 1541617229, "post_id": 53195954, "comment_id": 93280632, "body": "Ah, so I would only need <code>&amp;_parent-&gt;child</code> and <code>&amp;list</code> if <code>_parent-&gt;child</code> wasn&#39;t a pointer and <code>list</code> wasn&#39;t an array?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3, "user_id": 10620041, "user_type": "registered", "profile_image": "https://graph.facebook.com/1932659146815989/picture?type=large", "display_name": "Neethan", "link": "https://stackoverflow.com/users/10620041/neethan"}, "edited": false, "score": 0, "creation_date": 1541617400, "post_id": 53195954, "comment_id": 93280724, "body": "Well yes, if they were simple types, but with <code>memcpy</code> the arguments will almost always be an array, or a pointer, because you don&#39;t need <code>memcpy</code> for a simple type. A <code>struct</code> could be passed to <code>memcpy</code> and in that case you would need the <code>&amp;</code> because a <code>struct</code> can be passed by value. But anyway, you can assign a <code>struct</code> value with <code>=</code> just like with a simple type."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 6, "last_activity_date": 1541616776, "creation_date": 1541616776, "answer_id": 53195954, "question_id": 53195779, "link": "https://stackoverflow.com/questions/53195779/unable-to-free-a-child-of-a-parent-struct/53195954#53195954", "title": "Unable to free a child of a parent struct", "body": "<p>You should remove the <code>&amp;</code>s from the <code>memcpy</code> statement. <code>_parent-&gt;_child</code> is already an address, and the array <code>list[]</code> will decay to a pointer. The effect of what you are doing is to overwrite the pointer member itself (and other) instead of the memory it is pointing to.</p>\n\n<pre><code>memcpy(_parent-&gt;_child, list, sizeof(list));\n</code></pre>\n\n<p>That is why you can't</p>\n\n<pre><code>free(_parent-&gt;_child);\n</code></pre>\n\n<p>because you trashed the pointer you are trying to <code>free</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10620041, "user_type": "registered", "profile_image": "https://graph.facebook.com/1932659146815989/picture?type=large", "display_name": "Neethan", "link": "https://stackoverflow.com/users/10620041/neethan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 53195954, "answer_count": 2, "score": 0, "last_activity_date": 1541616897, "creation_date": 1541616081, "question_id": 53195779, "link": "https://stackoverflow.com/questions/53195779/unable-to-free-a-child-of-a-parent-struct", "title": "Unable to free a child of a parent struct", "body": "<p>I'm having a weird bug where I can't free() a struct that I malloc()'d RAM for.</p>\n\n<p>I have a struct parent and child, where child is a struct of int. I use malloc() to allocate ram for both the parent and the child structs (where the child struct is malloc() to the size of an array of the child struct). I then use memcpy to copy the array over to the parent struct. </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; \n\ntypedef struct child child_t;\ntypedef struct parent parent_t;\n\nstruct child {\n    int item;\n};\n\nstruct parent {\n    child_t *_child;\n};\n\nchild_t list[] = {\n    { .item = 1 },\n    { .item = 2 },\n    { .item = 3 },\n};\n\nint main(void) {\n    parent_t *_parent = malloc(sizeof(parent_t));\n\n    _parent-&gt;_child = malloc(sizeof(list));\n    memcpy(&amp;_parent-&gt;_child, &amp;list, sizeof(list));\n\n    free(_parent-&gt;_child);\n    free(_parent);\n    printf(\"success\\n\");\n    return 1;\n}\n</code></pre>\n\n<p><code>free(_parent-&gt;_child);</code> just ends up giving me Aborted (core dumped) as an error. I've checked the ram usage, and I can tell that I should be freeing the child, but I'm not sure how to do so.</p>\n"}, {"tags": ["c", "clang"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1541616187, "post_id": 53195724, "comment_id": 93280165, "body": "OT: when calling any of the heap allocation functions: <code>malloc</code> <code>calloc</code> <code>realloc</code>  1) always check (!=NULL) the returned value to assure the operation was successful. 2) in C, the returned value has type <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc"}, {"owner": {"reputation": 49, "user_id": 10468832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84daf47354cfcadc170da53aa2018c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Obsessive", "link": "https://stackoverflow.com/users/10468832/obsessive"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541655894, "post_id": 53195724, "comment_id": 93292549, "body": "Thank u! Especially for the rule 2 :)"}], "answers": [{"comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541616718, "post_id": 53195823, "comment_id": 93280402, "body": "I think it is not good to say it &quot;overflows to&quot; since it is undefined behavior."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541616887, "post_id": 53195823, "comment_id": 93280493, "body": "@Osiris yes its undefined according to the standard but in this actual case this is the value obtained when running on a PC in the debugger and explains the observed behaviour of the rest of the program"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541617241, "post_id": 53195823, "comment_id": 93280639, "body": "But doesn&#39;t undefined mean that you can not rely on the outcome? You may get this result, but you also may not. Same as you not always get a segmentation fault if you write out of bounds."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541617721, "post_id": 53195823, "comment_id": 93280860, "body": "Yes in theory you can&#39;t rely on the outcome but in reality as far as I know on any x86 processor if you multiply 46349 by 46349 you will always get -2146737495. The behaviour is undefined in the standard in order to not put unnecessary restrictions on compiler implementers which might not be implementable in the target CPU."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541617897, "post_id": 53195823, "comment_id": 93280938, "body": "Even if signed overflow was well-defined, the large negative array index going way past the bounds of <code>flag</code> most certainly is not."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 5, "last_activity_date": 1541616244, "creation_date": 1541616244, "answer_id": 53195823, "question_id": 53195724, "link": "https://stackoverflow.com/questions/53195724/weird-segmentation-fault-in-c-big-array-with-clang/53195823#53195823", "title": "Weird segmentation fault in C big array with clang", "body": "<p>When <code>i</code> is <code>46349</code>, <code>i*i</code> is <code>2148229801</code>, this is more than fits in an integer so overflows to <code>-2146737495</code>, as this is less than <code>maxn</code>, <code>flag[j] = 0</code> is executed which is out of bounds of the array so crashes.</p>\n\n<p>Changing <code>j</code> to <code>long long</code> fixes the bug:</p>\n\n<pre><code>for (long long j = (long long)i * i; j &lt; maxn; j += i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1541616482, "creation_date": 1541616482, "answer_id": 53195879, "question_id": 53195724, "link": "https://stackoverflow.com/questions/53195724/weird-segmentation-fault-in-c-big-array-with-clang/53195879#53195879", "title": "Weird segmentation fault in C big array with clang", "body": "<p>You're overflowing an <code>int</code> here:</p>\n\n<pre><code>for (int j = i * i; j &lt; maxn; j+=i)\n</code></pre>\n\n<p>Since <code>i</code> goes up to 2000000, <code>i*i</code> can be larger than 2<sup>31</sup>, resulting in overflow and <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>You can address this in the outer loop:</p>\n\n<pre><code>for(int i = 2; i &lt; maxn; i++)\n</code></pre>\n\n<p>You only need to check up to the square root of <code>maxn</code>, so change it to:</p>\n\n<pre><code>for(int i = 2; i * i &lt; maxn; i++)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10468832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84daf47354cfcadc170da53aa2018c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Obsessive", "link": "https://stackoverflow.com/users/10468832/obsessive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 53195823, "answer_count": 2, "score": 0, "last_activity_date": 1541616543, "creation_date": 1541615852, "last_edit_date": 1541616543, "question_id": 53195724, "link": "https://stackoverflow.com/questions/53195724/weird-segmentation-fault-in-c-big-array-with-clang", "title": "Weird segmentation fault in C big array with clang", "body": "<p>Here i want to find the sum of all the primes below two million.\nI use sieve of Eratosthenes so i need a two million array.</p>\n\n<p>At first, i only declare the array as a global variable, but zsh give me a segmentation fault.So i tried malloc but the error still there.\nI already test small array the program works fine.</p>\n\n<p>Besides, i use clang-1000.10.44.2, with -O2 the program can work but the answer is incorrect.The code is below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXN 2000000\n\nunsigned long long sum;\nvoid erat(int maxn, char *flag)\n{\n    flag[0] = 0;\n    flag[1] = 0;\n    for(int i = 2; i &lt; maxn; i++)\n        if(flag[i])\n            for(int j = i * i; j &lt; maxn; j+=i)\n                flag[j] = 0;\n}\n\nint main()\n{\n    int i;\n    char *flag = (char*) malloc(MAXN * sizeof(char));\n    for(i = 0; i &lt; MAXN; i++)\n        flag[i] = 1;\n    erat(MAXN, flag);\n    for(i = 0; i &lt; MAXN; i++)\n        if(flag[i]) sum+=i;\n    printf(\"%llu\\n\", sum);\n    return 0;\n}\n</code></pre>\n\n<p>Hope someone can help me, thanks for your time!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1541616123, "post_id": 53195598, "comment_id": 93280136, "body": "Who <code>free()</code>s all the memory <code>getline()</code> allocates? Why not just read an integer using <code>scanf()</code>? Also, whats the purpose of the return value of <code>show_menu()</code> since it only ever returns <code>0</code> which doesn&#39;t get evaluated by <code>show_menu()</code>? You are calling <code>show_menu()</code> recursively from <code>exit_program()</code> ... why do you do that? if you wouldn&#39;t it would return to <code>show_menu()</code> anyway."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1541617639, "post_id": 53195598, "comment_id": 93280820, "body": "What is <code>get_char()</code>? Does it read just one character? If so, you will have problems because you won&#39;t read the end-of-line after the y/n reply. When you ask a question and expect a reply from the user, you are probably expecting the reply to take the form of a line. if so, you should use some function that reads a line. If the user pushes &quot;y&lt;enter&gt;&quot; and you only read the &quot;y&quot;, the enter is stuck in the input buffer to be read later when you don&#39;t expect it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1541620745, "post_id": 53195598, "comment_id": 93282315, "body": "That Pico-esque (but not even consistently Pico) style of indentation is abominable \u2014 do not use it in C code posted to SO.  Use either Allman (my preferred style) or a variant of 1TBS \u2014 see Wikipedia on <a href=\"https://en.wikipedia.org/wiki/Indentation_style\" rel=\"nofollow noreferrer\">Indentation Style</a>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541621285, "post_id": 53195598, "comment_id": 93282585, "body": "Do not use <code>num = atoi(input);</code>, <code>atoi</code> provides ZERO error checking for the conversion. Instead use <code>strtol</code> or <code>sscanf</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541621660, "post_id": 53195598, "comment_id": 93282771, "body": "@DavidC.Rankin: <code>scanf()</code> and family don&#39;t handle integer overflow any better than <code>atoi()</code> does.  Using <code>strtol()</code> or one of its variants is reasonable."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541621966, "post_id": 53195598, "comment_id": 93282898, "body": "Good point, but at least <code>sscanf</code> knows the difference between <code>&quot;abc&quot;</code> and <code>&quot;123&quot;</code> and provides a return to discern between the two."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541622474, "post_id": 53195598, "comment_id": 93283115, "body": "@JonathanLeffler you can limit the number of digits to read and thus artificially limit the value to something &lt; INT_MAX"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541621433, "post_id": 53196034, "comment_id": 93282649, "body": "Good clean up. Only nit is <code>EOF</code> (user canceling input with Ctrl+d, or Ctrl+z on windows) isn&#39;t handled."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541621737, "post_id": 53196034, "comment_id": 93282808, "body": "@DavidC.Rankin <code>^d</code> and <code>^z</code> are not valid options ;p"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541621865, "post_id": 53196034, "comment_id": 93282860, "body": "No, but that doesn&#39;t stop the user from pressing them thinking he can cancel that input. Either way you are covered with the invalid input error that&#39;s why I said it was just a &quot;nit&quot;."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1541619628, "last_edit_date": 1541619628, "creation_date": 1541617076, "answer_id": 53196034, "question_id": 53195598, "link": "https://stackoverflow.com/questions/53195598/second-use-of-getline/53196034#53196034", "title": "Second use of getline", "body": "<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid clear_stream(FILE *is)  // clears garbage from the stream after\n{                            // a failed input operation\n    int ch;\n    while ((ch = fgetc(is)) != EOF &amp;&amp; ch != '\\n');\n}\n\n// reads an integer from stdin until it is within the range min, max\nint get_int(int min, int max, char const *prompt)\n{\n    int number;\n    while (prompt &amp;&amp; printf(\"%s\", prompt),\n           scanf(\"%d\", &amp;number) != 1 || number &lt; min || max &lt; number)\n    {\n        fputs(\"Input error :(\\n\\n\", stderr);\n        clear_stream(stdin);\n    }\n    return number;\n}\n\n// reads a character from stdin until it is within range (if range != null)\nchar get_char(char const *range, char const *prompt)\n{\n    char ch;\n    while (prompt &amp;&amp; printf(\"%s\", prompt),\n           scanf(\" %c\", &amp;ch) != 1 || range &amp;&amp; !strchr(range, ch) )\n           //     ^ skips leading whitespace\n    {\n        fputs(\"Input error :(\\n\\n\", stderr);\n        clear_stream(stdin);\n    }\n    return ch;\n}\n\n// asks user if he is sure to exit the program and returns true if that is so\nbool exit_program()\n{\n    char choice = get_char(\"yYnN\",\n        \"\\nAre you sure you want to exit?\\n\"\n        \"[y] Yes\\n\"\n        \"[n] No\\n\\n\"\n        \"&gt; \");\n    return choice == 'y' || choice == 'Y';\n}\n\nvoid show_menu()\n{\n    bool do_exit = false;  // false until the user decides otherwise.\n    do {\n        int choice = get_int(1, 4,\n            \"\\n[1] Exit\\n\"\n            \"[2] Function A\\n\"\n            \"[3] Function B\\n\"\n            \"[4] Function C\\n\\n\"\n            \"&gt; \");\n\n        switch (choice) {\n        case 1:\n            do_exit = exit_program();\n            break;\n\n        case 2:\n            puts(\"Function A\\n\");\n            break;\n\n        case 3:\n            puts(\"Function B\\n\");\n            break;\n\n        case 4:\n            puts(\"Function C\\n\");\n            break;\n        }\n    } while (!do_exit);\n}\n\nint main(void)\n{\n    show_menu();\n}\n</code></pre>\n\n<h3>Sample output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 1\n\nAre you sure you want to exit?\n[y] Yes\n[n] No\n\n&gt; f\nInput error :(\n\n\nAre you sure you want to exit?\n[y] Yes\n[n] No\n\n&gt; asldjkflkasdjf\nInput error :(\n\n\nAre you sure you want to exit?\n[y] Yes\n[n] No\n\n&gt; n\n\n[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 2\nFunction A\n\n\n[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 3\nFunction B\n\n\n[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 4\nFunction C\n\n\n[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 1\n\nAre you sure you want to exit?\n[y] Yes\n[n] No\n\n&gt; n\n\n[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 2\nFunction A\n\n\n[1] Exit\n[2] Function A\n[3] Function B\n[4] Function C\n\nType an option: 1\n\nAre you sure you want to exit?\n[y] Yes\n[n] No\n\n&gt; y\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10619962, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uqHiI1sr9ag/AAAAAAAAAAI/AAAAAAAAHNk/F6TvVmGImks/photo.jpg?sz=128", "display_name": "Delia S&#225;nchez", "link": "https://stackoverflow.com/users/10619962/delia-s%c3%a1nchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541619628, "creation_date": 1541615263, "question_id": 53195598, "link": "https://stackoverflow.com/questions/53195598/second-use-of-getline", "title": "Second use of getline", "body": "<pre><code>int get_int(){//gets an integer \n  size_t readint;\n  size_t numbytes;\n\n  char *input;\n  int inint;\n  int num;\n\n  input = NULL;\n  numbytes = 0;\n  readint = getline(&amp;input, &amp;numbytes, stdin);\n  if (readint == 0){\n    num = 0;\n\n  }else{\n    num = atoi(input);//string to integer\n\n  }\n  return num;\n   }\nint exit_program(){//allows to finish and exit the program\n\n  char c;\n  printf(\"\\nAre you sure you want to exit?(y/n) \");\n  c = get_char();\n  if(c == 'y' || c == 'Y'){\n    exit(0);}else{\n if(c =='n' || c == 'N'){\n      show_menu(); \n     }}return 0;\n}\n\nvoid show_menu(){//choose the option\n  int option; \nprintf(\"Type an option: \\n\");\n    option = get_int();     \n    switch(option){\n        case 1: exit_program(); break;\n        case 2: //create_jedi(&amp;head); break;\n\n        case 3: //show_jedis(head); break;\n\n        case 4: puts(\"To be implemented\"); break;\n\n        case 5: puts(\"To be implemented\"); break;\n\n        default: printf(\"Invalid option\"); break;\n    }}\n\nmain(){\nshow_menu();}\n</code></pre>\n\n<p>The code is supposed to ask for a value. If you select '1', it asks you if you want to exit the program. If the answer is no, the program must ask you again for a value, however, it asigns 0 as an option, so it is an invalid option. \nI couldn't find the mistake, please help.</p>\n"}, {"tags": ["c", "netbeans"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1541615146, "post_id": 53195526, "comment_id": 93279699, "body": "Where is <code>isPrime</code> defined?  There&#39;s only a declaration shown."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1541625712, "post_id": 53195526, "comment_id": 93284622, "body": "<code>prime == true</code> may be simplified to <code>prime</code>"}], "owner": {"reputation": 9, "user_id": 9435903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c583dcdb1537afaab66aa26c664e6a6?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J.", "link": "https://stackoverflow.com/users/9435903/doe-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541648091, "creation_date": 1541614987, "last_edit_date": 1541648091, "question_id": 53195526, "link": "https://stackoverflow.com/questions/53195526/truncation-issue-while-using-netbeans-to-run-a-isprime-program", "title": "Truncation issue while using netbeans to run a isPrime program", "body": "<p>When trying to debug a isPrime program, i started running into an warning that would not allowing me to run the program. The warning states <code>Relocation truncated to fit: R_X86_64PC32 against undefined symbol \"isPrime(int)\"</code>. I had ran into this problem a while ago but have since forgotten exactly how to deal with it. Is it a problem with  the program that usually causes this, or is it a problem with netbeans and the compiler it uses for C.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool isPrime(int userInput);\n\nint main(int argc, char** argv) \n{\n    int userInput;\n    bool prime = false;\n    int again = 0;\n\n    printf(\"This program will check if a number is Prime\\n\");\n\n    while(again == 0)\n    {\n        printf(\" Enter number: \\n \");\n        scanf(\"%d\",&amp;userInput);\n\n        prime = isPrime(userInput);\n\n        if( prime )\n            printf(\"%d is prime.\",userInput);\n        else\n            printf(\"%d is not prime\",userInput);\n\n        printf(\"again? \\n 0 for yes \\n 1 for no\");\n        scanf(\"%d\", &amp;again);\n    }\n    return 0;\n}\n\nbool isPrime(int userInput)\n{\n    int tmp = 0;\n    bool result = true; \n\n    while(tmp != 1 &amp;&amp; result == true)\n    {\n        if( userInput % tmp == 0)\n            result = false;\n\n        tmp--;\n    }\n    return true;\n}\n</code></pre>\n\n<p>\\</p>\n\n<p>Code has been edited</p>\n"}, {"tags": ["c", "io"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541644605, "post_id": 53196974, "comment_id": 93290101, "body": "What i want my code to is read a command from file, then compile it and print output to a file."}], "tags": [], "owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1541620940, "creation_date": 1541620940, "answer_id": 53196974, "question_id": 53195524, "link": "https://stackoverflow.com/questions/53195524/redirecting-stdin-and-stdout/53196974#53196974", "title": "Redirecting stdin and stdout?", "body": "<p>With <code>functionOutput()</code> you have a good first attempt at capturing the output of a system command to a file. Actually, <em>that</em> is the function called when the first argument is <code>1</code>, so you might want to update your comment. Also, you're creating a file with the name stored in <code>argv[1]</code>, which we already know is <code>1</code> so it's probably not doing what you expect, and you probably want:</p>\n\n<pre><code>ofd = open(argv[2], O_CREAT|O_TRUNC|O_WRONLY);\n</code></pre>\n\n<p>With <code>functionInput()</code> you're reading the first non-whitespace entry from the file. If you're telling it to read the file which you output using the <code>functionOutput()</code> function, that is likely to be (some of) the name of the first file which was listed by <code>ls</code>.</p>\n\n<p>I'm finding it unclear what you're wanting to do which isn't that. If you want to find out what the command was which you ran to generate the output, that information is not available from the file itself, because you didn't write it there. If that's what you want, you may want to consider writing the command as the first line of the file, followed by the output. Then when you read it, you can assume that the first line is the command run, followed by the output of that command.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541643694, "post_id": 53200024, "comment_id": 93289909, "body": "yeah but how do i do it if the user wants to enter input in one command and output in anther command"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541643929, "post_id": 53200024, "comment_id": 93289950, "body": "I don&#39;t know what you mean"}, {"owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541644387, "post_id": 53200024, "comment_id": 93290051, "body": "sorry. what i meant was, this code does not compile whats in the input text, it just does the print statement. How do i compile, for example, &#39;ls&#39; which is written in the input file."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541644968, "post_id": 53200024, "comment_id": 93290167, "body": "If the code does not compile on your system then explain the error. I changed the format so it should handle any redirection. See the modified usage."}, {"owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541645456, "post_id": 53200024, "comment_id": 93290277, "body": "its compiling but when it runs to does not do anything. I ran the gcc to fie c file, ran ./.out then wrote &lt;text.txt but it prints write: text.txt and thats it"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541647740, "post_id": 53200024, "comment_id": 93290736, "body": "@NeverSleepAlwaysCode you would need to attempt a non-blocking read of <code>STDIN_FILENO</code> using, e.g. <code>select</code> or <code>poll</code> to test whether there was input waiting."}, {"owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541647765, "post_id": 53200024, "comment_id": 93290743, "body": "how would i use that?"}, {"owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "edited": false, "score": 0, "creation_date": 1541647774, "post_id": 53200024, "comment_id": 93290746, "body": "sorry not familiar with it"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541647936, "post_id": 53200024, "comment_id": 93290775, "body": "See <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\">select(2) - Linux manual page</a> (it has an example at the end). You can also see the man page for <code>poll</code>. Basically they tell you if input is ready on a given file descriptor allowing you to tell if there is input to read. (if not, the user wants to output in your case)"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 0, "last_activity_date": 1541645902, "last_edit_date": 1541645902, "creation_date": 1541637837, "answer_id": 53200024, "question_id": 53195524, "link": "https://stackoverflow.com/questions/53195524/redirecting-stdin-and-stdout/53200024#53200024", "title": "Redirecting stdin and stdout?", "body": "<p>To redirect input and output, use this format</p>\n\n<blockquote>\n<pre><code>myprogram &gt; out.txt &lt; in.txt //read from in.txt, write to out.txt\nmyprogram &lt; in.txt &gt; out.txt //read from in.txt, write to out.txt\nmyprogram &lt; in.txt //redirect stdin only\nmyprogram &gt; out.txt //redirect stdout only\nmyprogram //no redirection\n...\n</code></pre>\n</blockquote>\n\n<p>This should work with any program. Example:</p>\n\n<pre><code>int main(void)\n{\n    char buf[1000];\n    if(fgets(buf, sizeof(buf), stdin))\n        printf(\"write: %s\\n\", buf);\n    return 0;\n}\n</code></pre>\n\n<p>To redirect stdin/stdout in the program, use the standard method</p>\n\n<pre><code>freopen(\"output.txt\", \"w\", stdout);\nprintf(\"Testing...\");\nfclose(stdout);\n\nfreopen(\"input.txt\", \"r\", stdin);\nchar buf[100];\nfgets(buf, sizeof(buf), stdin);\nfclose(stdin);\n</code></pre>\n\n<p>Alternatively, set <code>FILE *fin = stdin; FILE* fout = stdout;</code> to redirect the opposite way.</p>\n\n<p>Next, to write a program using <code>argv</code> elements, always test <code>argc</code> first. The code below shows an example. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint redirect(int argc, char **argv, int *index)\n{\n    //no more redirection!\n    if(*index &gt;= argc)\n        return 1;\n\n    //not enough parameters\n    if(*index + 1 &gt;= argc)\n    {\n        printf(\"wrong usage\\n\");\n        return 0;\n    }\n\n    if(strcmp(argv[*index], \"&lt;\") == 0)\n    {\n        *index++; //next parameter is to redirect input\n        if(!freopen(argv[*index], \"r\", stdin))\n            printf(\"error, redirect input failed\");\n    }\n    else if(strcmp(argv[*index], \"&gt;\") == 0)\n    {\n        *index++; //next parameter is to redirect output\n        if(!freopen(argv[*index], \"w\", stdout))\n            printf(\"error, redirect output failed\");\n    }\n    else\n    {\n        printf(\"wrong usage\\n\");\n        return 0;\n    }\n\n    return 1;\n}\n\nint main(int argc, char **argv)\n{\n    int index = 1;\n    if(!redirect(argc, argv, &amp;index))\n        return 1;\n\n    if(!redirect(argc, argv, &amp;index))\n        return 1;\n\n    //read\n    char buf[1000];\n    if(fgets(buf, sizeof(buf), stdin))\n    {\n        //write\n        printf(\"write: %s\\n\", buf);\n    }\n\n    fclose(stdin);\n    fclose(stdout);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1541649794, "creation_date": 1541649794, "answer_id": 53201401, "question_id": 53195524, "link": "https://stackoverflow.com/questions/53195524/redirecting-stdin-and-stdout/53201401#53201401", "title": "Redirecting stdin and stdout?", "body": "<p>If I understand your question, and you want to run your program in essentially two different modes, (1) you want to take input if there is input to be taken on <code>stdin</code>; and (2) if there is no input waiting, you want to do an output, then <code>select/pselect</code> or <code>poll</code> are what you are looking for.</p>\n\n<p>For example <code>select</code> allows you to check whether there is input ready to be read on a file descriptor (or set of descriptors) and it will return the number of descriptors with input waiting (or <code>-1</code> and set <code>errno</code> on error). You could simply use the <code>STDIN_FILENO</code> (a/k/a fd <code>0</code>) to check if there is input on <code>stdin</code>, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;         /* for STDIN_FILENO */\n#include &lt;sys/select.h&gt;     /* for pselect   */\n\nint input (int filedes)\n{\n    fd_set set;\n\n    /* declare/initialize zero timeout */\n    struct timespec timeout = { .tv_sec = 0 };\n\n    /* Initialize the file descriptor set. */\n    FD_ZERO (&amp;set);\n    FD_SET (filedes, &amp;set);\n\n    /* check whether input is ready on filedes */\n    return pselect (filedes + 1, &amp;set, NULL, NULL, &amp;timeout, NULL);\n}\n\nint main (void)\n{\n    if (input (STDIN_FILENO))\n        puts (\"doing input routine\");\n    else\n        puts (\"doing output routine\");\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> from the man page \"<code>select()</code> uses a timeout that is a <code>struct timeval</code> (with seconds and microseconds), while <code>pselect()</code> uses a <code>struct timespec</code> (with seconds and nanoseconds).\")</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/select_peekstdin &lt; file\ndoing input routine\n\n$ ./bin/select_peekstdin\ndoing output routine\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10538841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2f62de66f475ea5387df03c5fd715?s=128&d=identicon&r=PG&f=1", "display_name": "NeverSleepAlwaysCode", "link": "https://stackoverflow.com/users/10538841/neversleepalwayscode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 53200024, "answer_count": 3, "score": 0, "last_activity_date": 1541649794, "creation_date": 1541614972, "question_id": 53195524, "link": "https://stackoverflow.com/questions/53195524/redirecting-stdin-and-stdout", "title": "Redirecting stdin and stdout?", "body": "<p>So im trying to redirect the I/O to read command from file then when user runs the output command it will print the compiled command to output file.</p>\n\n<p>For example on the terminal:</p>\n\n<pre><code>./run 2 &lt; test.txt // This would take file using dup and take the input\n</code></pre>\n\n<p>Then when you want to output the compile:</p>\n\n<pre><code>./run 1 &gt; output.txt // and it would put into an output file\n</code></pre>\n\n<p>So far i know how to output to a file but my problem is with the input. how do i get the command from the file using the <code>dup2()</code> function? I tried researching this but no luck.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nchar inputForOutput[100];\n\nvoid functionOutput(int argc, char **argv){\n\n    int ofd; //Init of file desc.\n\n    ofd = open(argv[1], O_CREAT|O_TRUNC|O_WRONLY);\n\n    dup2(ofd, 1);//Duplicates to stdout\n\n    system(\"ls\");//Copies commnd given to output_file\n}\n\n//Function is called when argument number is == 1\nvoid functionInput(int argc, char **argv){\n    FILE *ifd;\n        printf(\"\\n %s \\n \", argv[2]);\n    ifd = fopen(argv[2] , \"r\");\n    if (ifd == NULL){\n        perror(\"No file found\");\n        exit(1);\n    }\n    fscanf(ifd,\"%s\",inputForOutput);\n    printf(\"\\n**%s**\\n\",inputForOutput);\n}\n\nint main(int argc, char **argv)\n{\n    int output;\n    int input;\n    output = strcmp(\"1\", argv[1]);\n    input = strcmp(\"2\" ,argv[1]);\n    if (output == 0 ) { //Fail safe for number of arguments\n        functionOutput(argc, argv);\n    }\n    else if ( input == 0){\n        functionInput(argc, argv);\n    }\n    else{\n        fprintf(stderr, \"How to use: %s function output_file\\n\", argv[0]); // FAIL SAFE IF INPUT DOES NOT MATCH BOTH FUNCTIONS\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "clang", "language-lawyer", "bit-shift"], "answers": [{"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1541614454, "post_id": 53195379, "comment_id": 93279400, "body": "Oops must have missed that one. Thanks!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1541614458, "last_edit_date": 1541614458, "creation_date": 1541614402, "answer_id": 53195379, "question_id": 53195325, "link": "https://stackoverflow.com/questions/53195325/silencing-a-wshift-count-overflow-warning-in-a-generic-bitmask-macro/53195379#53195379", "title": "Silencing a -Wshift-count-overflow warning in a generic bitmask macro", "body": "<p>Bit shifting by an amount equal to the bit size of the type is <strong>undefined</strong>.</p>\n\n<p>Section 6.5.7p3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard states</a>:</p>\n\n<blockquote>\n  <p>The integer promotions are performed on each of the operands.  The\n  type of the result is that  of  the  promoted  left  operand.   <strong>If \n  the  value  of  the  right  operand  is  negative  or  is greater than\n  or equal to the width of the promoted left operand, the behavior is\n  undefined.</strong></p>\n</blockquote>\n\n<p>So you can't perform <code>((uint_least32_t)1)&lt;&lt;32</code> or <code>((uint32_t)1)&lt;&lt;32</code> safely.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 53195379, "answer_count": 1, "score": 1, "last_activity_date": 1541614458, "creation_date": 1541614219, "question_id": 53195325, "link": "https://stackoverflow.com/questions/53195325/silencing-a-wshift-count-overflow-warning-in-a-generic-bitmask-macro", "title": "Silencing a -Wshift-count-overflow warning in a generic bitmask macro", "body": "<p>I wrote this macro to get a bitmask generically:</p>\n\n<pre><code>#define BX_uint_least(Bits,Val) _Generic((char(*)[Bits]){0}, \\\n                                    char (*)[8]: (uint_least8_t)(Val), \\\n                                    char (*)[16]: (uint_least16_t)(Val), \\\n                                    char (*)[32]: (uint_least32_t)(Val), \\\n                                    char (*)[64]: (uint_least64_t)(Val))\n#define BX_bitmask(Bits) ((BX_uint_least(Bits,1)&lt;&lt;Bits)-1)\n</code></pre>\n\n<p>but when I use it, it's generating <code>-Wshift-count-overflow</code> warnings.</p>\n\n<p>Can these warnings be silenced from within the macro?</p>\n\n<p>I don't want to silence them altogether because e.g., the UB-causing\n<code>((int32_t)1)&lt;&lt;32</code> should still get a warning, but <code>((uint_least32_t)1)&lt;&lt;32</code> overflowing to 0 is completely harmless and intended.</p>\n\n<p>Example program:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#define BX_uint_least(Bits,Val) _Generic((char(*)[Bits]){0}, \\\n                                    char (*)[8]: (uint_least8_t)(Val), \\\n                                    char (*)[16]: (uint_least16_t)(Val), \\\n                                    char (*)[32]: (uint_least32_t)(Val), \\\n                                    char (*)[64]: (uint_least64_t)(Val))\n#define BX_bitmask(Bits) ((BX_uint_least(Bits,1)&lt;&lt;Bits)-1)\n\nint main() \n{\n\n    //(void)((int32_t)1&lt;&lt;32); //UB; should warn\n    (void)BX_bitmask(32); //shouldn't warn\n    (void)(((uint32_t)1)&lt;&lt;32); //I don't care if it warns or not\n}\n</code></pre>\n\n<p>By the way, the warning comes up with both gcc and clang without having to add any flags (such as <code>-Wall</code> or <code>-Wextra</code>), but by my reading of <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.7p4\" rel=\"nofollow noreferrer\">6.5.7p4</a>:</p>\n\n<blockquote>\n  <p>The result of E1 &lt;&lt; E2 is E1 left-shifted E2 bit positions; vacated\n  bits are filled with zeros. If E1 has an unsigned type, the value of\n  the result is E1 x 2E2 , reduced modulo one more than the maximum\n  value representable in the result type. If E1 has a signed type and\n  nonnegative value, and E1 x 2E2 is representable in the result type,\n  then that is the resulting value; otherwise, the behavior is\n  undefined.</p>\n</blockquote>\n\n<p>the result of e.g., <code>((uint32_t)1)&lt;&lt;32</code> is perfectly well-defined (to be <code>+(uint32_t)0</code>) so I think it's a little weird that a perfectly well defined operation should ellicit a warning in compiler invocation that doesn't requests extra warnings.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1541613282, "post_id": 53194948, "comment_id": 93278853, "body": "When you decript you need to substract the key. Seems like you made a copy paste mistake(sorry for the comment answer switching)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10619731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52c3b50e07a735032d6f5257e1023a8?s=128&d=identicon&r=PG&f=1", "display_name": "SgtCheespuffs", "link": "https://stackoverflow.com/users/10619731/sgtcheespuffs"}, "edited": false, "score": 0, "creation_date": 1541615395, "post_id": 53195164, "comment_id": 93279818, "body": "I thought I did that, can&#39;t believe I didn&#39;t. Thank you!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 23, "user_id": 10619731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52c3b50e07a735032d6f5257e1023a8?s=128&d=identicon&r=PG&f=1", "display_name": "SgtCheespuffs", "link": "https://stackoverflow.com/users/10619731/sgtcheespuffs"}, "edited": false, "score": 0, "creation_date": 1541615447, "post_id": 53195164, "comment_id": 93279842, "body": "@SgtCheespuffs Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1541613666, "creation_date": 1541613666, "answer_id": 53195164, "question_id": 53194948, "link": "https://stackoverflow.com/questions/53194948/caesar-cipher-not-decrypting/53195164#53195164", "title": "Caesar cipher not decrypting", "body": "<p>Your encryption logic and decryption logic are the same, i.e. for decryption you're adding the key when you should be subtracting.  You also need to change the overflow check for going below <code>'a'</code>:</p>\n\n<pre><code>case 'd':\n    {\n        for(int i = 0; phrase[i] != '\\0'; i++){\n                //~ phrase[i] = phrase[i] + 3;\n            ph = phrase[i];\n                if(ph &gt;= 'a' &amp;&amp; ph &lt;= 'z'){\n                    ph = ph - key;   // subtract\n\n                    if(ph &lt; 'a'){    // switch wraparound check\n                        ph = ph + 'z' - 'a' - 1;\n                    }\n                    phrase[i] = ph;\n                } // end of if\n                else if(ph &gt;= 'A' &amp;&amp; ph &lt;= 'Z'){\n                    ph = ph - key;   // subtract\n\n\n                    if(ph &lt; 'a'){    // switch wraparound check\n                        ph = ph + 'Z' - 'A' - 1;\n                    } // end of if\n                    phrase[i] = ph;\n                } // end of else if\n            } // end of for\n            printf(\"Decrypted message: %s\\n\", phrase);\n                break;\n            } // end of case 'd'\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10619731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52c3b50e07a735032d6f5257e1023a8?s=128&d=identicon&r=PG&f=1", "display_name": "SgtCheespuffs", "link": "https://stackoverflow.com/users/10619731/sgtcheespuffs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53195164, "answer_count": 1, "score": 1, "last_activity_date": 1541613666, "creation_date": 1541612749, "last_edit_date": 1541613080, "question_id": 53194948, "link": "https://stackoverflow.com/questions/53194948/caesar-cipher-not-decrypting", "title": "Caesar cipher not decrypting", "body": "<p>When I try to decrypt a message, the output isn't what it should be. I looked up Caesar Cipher and I understand the concept, but from what I looked at everything seems to be right. Could it be that I'm using a switch statement?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n\n\nint main(void){\n   char phrase[100], option, ph;\n   int key;\n\n\nprintf(\"Would you like to encrypt (e) or decrypt (d)? \\n\");\nscanf(\" %c\", &amp;option);\n    printf(\"Enter a message (100 characters or less): \\n\");\nscanf(\" %s\", phrase);\n\n            printf(\"Enter key: \\n\");\n            scanf(\" %i\", &amp;key);\nswitch(option){\n    case 'e':\n     {\n        for(int i = 0; phrase[i] != '\\0'; i++){\n                ph = phrase[i];\n                    if(ph &gt;= 'a' &amp;&amp; ph &lt;= 'z'){\n                        ph = ph + key;\n\n                        if(ph &gt; 'z'){\n                            ph = ph - 'z' + 'a' - 1;\n                        } //end of if\n                        phrase[i] = ph;\n                    } // end of if\n                    else if(ph &gt;= 'A' &amp;&amp; ph &lt;= 'Z'){\n                        ph = ph + key;\n\n                        if(ph &gt; 'Z'){\n                            ph = ph - 'Z' + 'A' - 1;\n                        }\n                        phrase[i] = ph;\n                    } // end of else if\n                } // end of for\n                printf(\"Encrypted message: %s\\n\", phrase);\n                break;\n            } // end of case 'e'\n    case 'd':\n        { \n            for(int i = 0; phrase[i] != '\\0'; i++){\n                    //~ phrase[i] = phrase[i] + 3;\n                ph = phrase[i];\n                    if(ph &gt;= 'a' &amp;&amp; ph &lt;= 'z'){\n                        ph = ph + key;\n\n                        if(ph &gt; 'z'){\n                            ph = ph - 'z' + 'a' + 1;\n                        }\n                        phrase[i] = ph;\n                    } // end of if\n                    else if(ph &gt;= 'A' &amp;&amp; ph &lt;= 'Z'){\n                        ph = ph + key;\n\n                        if(ph &gt; 'Z'){\n                            ph = ph - 'Z' + 'A' + 1;\n                        } // end of if\n                        phrase[i] = ph;\n                    } // end of else if\n                } // end of for\n                printf(\"Decrypted message: %s\\n\", phrase);\n                    break;\n                } // end of case 'd'\n\n\n    } // end of switch\n} // end of function\n</code></pre>\n\n<p>GCC output for encrypting:</p>\n\n<p>Would you like to encrypt (e) or decrypt (d)? \ne</p>\n\n<p>Enter a message (100 characters or less): \nhello</p>\n\n<p>Enter key: \n3</p>\n\n<p>Encrypted message: khoor</p>\n\n<hr>\n\n<p>GCC output for decrypting:</p>\n\n<p>Would you like to encrypt (e) or decrypt (d)? \nd</p>\n\n<p>Enter a message (100 characters or less): \nkhoor</p>\n\n<p>Enter key: \n3</p>\n\n<p>Decrypted message: nkrru</p>\n\n<hr>\n"}, {"tags": ["c", "winapi", "windows-10-desktop"], "comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1541612147, "post_id": 53194771, "comment_id": 93278322, "body": "What does <code>GetLastError()</code> return?"}], "answers": [{"tags": [], "owner": {"reputation": 1035, "user_id": 10504230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wfkm8.jpg?s=128&g=1", "display_name": "Arush Agarampur", "link": "https://stackoverflow.com/users/10504230/arush-agarampur"}, "is_accepted": false, "score": 0, "last_activity_date": 1541651171, "creation_date": 1541651171, "answer_id": 53201552, "question_id": 53194771, "link": "https://stackoverflow.com/questions/53194771/how-to-launch-an-universal-app-as-another-user-with-winapi/53201552#53201552", "title": "How to launch an Universal App as another user with WinAPI?", "body": "<p>This is impossible. No matter what user the UWP app is run under, it will always run under a sandboxed AppContainer user that is different for every user session. You can't run a UWP app as another user using the Win32 api.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 3164323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3eb1ead22b923d1f2b3f2f58d7365?s=128&d=identicon&r=PG&f=1", "display_name": "user3164323", "link": "https://stackoverflow.com/users/3164323/user3164323"}, "is_accepted": false, "score": 0, "last_activity_date": 1541671515, "creation_date": 1541671515, "answer_id": 53205433, "question_id": 53194771, "link": "https://stackoverflow.com/questions/53194771/how-to-launch-an-universal-app-as-another-user-with-winapi/53205433#53205433", "title": "How to launch an Universal App as another user with WinAPI?", "body": "<p>This is possible depending on what you mean by different user. For example, in our product we have a windows service which runs under 'Local System' account and from this we are able to launch a UWP app in the currently logged on user account. For this, we have used <a href=\"https://www.pinvoke.net/default.aspx/advapi32.createprocessasuser\" rel=\"nofollow noreferrer\">CreateProcessAsUser</a> to launch a process in the logged on user account with command to open the protocol supported by the UWP app. Sample code :</p>\n\n<pre><code>        string uwpAppLaunchCmdLine = string.Format(\"/c start {0}\", PROTOCOL_SUPPORTED_BY_UWP_APP);\n        int processId;\n        IntPtr hErrorReadOut = IntPtr.Zero;\n        ProcessMetadata processMetadata;\n        if (!StartAsCurrentUser(\"cmd.exe\", false, out processId,out processMetadata, coreAppLaunchCmdLine))\n        {\n            //Failed to launch\n        }\n        else\n        {\n           //success!\n        }   \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10604539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a9ac6deb2996f91379dcb23553bde6?s=128&d=identicon&r=PG&f=1", "display_name": "Janet Weston", "link": "https://stackoverflow.com/users/10604539/janet-weston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1541671515, "creation_date": 1541611929, "question_id": 53194771, "link": "https://stackoverflow.com/questions/53194771/how-to-launch-an-universal-app-as-another-user-with-winapi", "title": "How to launch an Universal App as another user with WinAPI?", "body": "<p>How can I launch an Universal App as another user using <code>CreateProcessWithLogonW()</code>? I cannot get it to launch using <code>C:\\\\Windows\\\\System32\\\\cmd.exe /c start skype:</code> even though <code>start skype:</code> does launch in the terminal.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;lmcons.h&gt;\n\nint main(void)\n{\n    PROCESS_INFORMATION pi = { 0 };\n    STARTUPINFOW        si = { 0 };\n    si.cb = sizeof(STARTUPINFOW);\n\n    /*\n    not working:\n    L\"C:\\\\Windows\\\\System32\\\\cmd.exe /c start skype\"        error: \"The filename, directory name, or volume label syntax is incorrect.\"\n    L\"C:\\\\Windows\\\\System32\\\\cmd.exe /c start skype:\"       no error but a pop-up with text: \"You'll need a new app to open this\"\n    */\n    wchar_t lpCommandLine[] = L\"C:\\\\Windows\\\\System32\\\\cmd.exe /c start skype:\"; // lpCommandLine must be writable memory\n    if (!CreateProcessWithLogonW(L\"username\", L\".\", L\"password\", LOGON_WITH_PROFILE, NULL, lpCommandLine, 0, NULL, NULL, &amp;si, &amp;pi))\n    {\n        printf(\"GetLastError(): %i\\n\", GetLastError());\n        char buf[UNLEN + 1] = { 0 };\n        FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), (LPTSTR)&amp;buf, sizeof(buf), NULL);\n        puts(buf);\n\n        return 1;\n    }\n    else\n    {\n        // do stuff only while skype is running\n        puts(\"skype is running.\");\n\n        if (WaitForSingleObject(pi.hProcess, INFINITE) == WAIT_FAILED)\n            puts(\"WaitForSingleObject() failed\");\n\n        // do stuff only after skype exits\n        puts(\"skype is NOT running.\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "video", "ffmpeg", "video-streaming", "rtsp"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1541611692, "post_id": 53194349, "comment_id": 93278115, "body": "Are you expecting something to be listening for connections on 127.0.0.1:554? This implies you have started some service that binds to port 554 on the local machine. Whatever &quot;muxing&quot; does, it seems to require this service being up, so you should make sure you have actually started such a service on the local host."}, {"owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "edited": false, "score": 0, "creation_date": 1541612369, "post_id": 53194349, "comment_id": 93278433, "body": "I think it will act as server, so I dont require other service to run on 554 port."}, {"owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "edited": false, "score": 0, "creation_date": 1541612420, "post_id": 53194349, "comment_id": 93278463, "body": "And in this code I have given data into rtsp output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1541612546, "post_id": 53194349, "comment_id": 93278531, "body": "Well, it&#39;s not bound to port 554 on this host. You need to solve that first. Since your code doesn&#39;t seem to contain any refs to binding TCP/UDP services to any hosts, there must be some other part at play. Check that this service is running. Check that it is not blocked by a local firewall or other permissions related issue."}, {"owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "edited": false, "score": 0, "creation_date": 1541612780, "post_id": 53194349, "comment_id": 93278633, "body": "Firewall was already disabled and I tried to run binary as root user but not get success."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1541613487, "post_id": 53194349, "comment_id": 93278949, "body": "I don&#39;t think anyone can help you with this highly environmental issue without way more information. What action starts this service? What keeps it running? How do you know it is running? One thing seems for sure: the code you show here does not start a service or listen to this port on any host, unless the libraries it uses does this for you. It&#39;s unclear to me, and probably to others, what this code does in the context of some service we don&#39;t know about."}, {"owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1541618215, "post_id": 53194349, "comment_id": 93281073, "body": "@Harshil, the code you posted does not act as a server. Please search the internet on how to set up e.g. nginx on port 554 as rtsp server, that will lead you to success."}, {"owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "edited": false, "score": 0, "creation_date": 1541641697, "post_id": 53194349, "comment_id": 93289478, "body": "Thanks Harry, I am looking for example on how to setup rtsp server using ffmpeg, but not find any example.  Do you have any example?"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "is_accepted": true, "score": 0, "last_activity_date": 1541922882, "last_edit_date": 1541922882, "creation_date": 1541907659, "answer_id": 53245640, "question_id": 53194349, "link": "https://stackoverflow.com/questions/53194349/ffmpeg-rtsp-server-using-muxing-doc-example/53245640#53245640", "title": "FFMPEG RTSP Server using muxing doc example", "body": "<p>I created this repository for rtsp server using ffserver code:</p>\n\n<p><a href=\"https://github.com/harshil1991/ffserver.git\" rel=\"nofollow noreferrer\">https://github.com/harshil1991/ffserver.git</a></p>\n\n<p>Now I can able to integrate this source code in my existing repo.</p>\n"}], "owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "accepted_answer_id": 53245640, "answer_count": 1, "score": 1, "last_activity_date": 1541922882, "creation_date": 1541610327, "last_edit_date": 1541633909, "question_id": 53194349, "link": "https://stackoverflow.com/questions/53194349/ffmpeg-rtsp-server-using-muxing-doc-example", "title": "FFMPEG RTSP Server using muxing doc example", "body": "<p>I am trying to develop RTSP server using FFMPEG. For that I slightly modified muxing file located at <code>doc/example/</code> folder inside FFMPEG repository.</p>\n\n<p>Giving my source code of RTSP server example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\n#include &lt;libavutil/avassert.h&gt;\n#include &lt;libavutil/channel_layout.h&gt;\n#include &lt;libavutil/opt.h&gt;\n#include &lt;libavutil/mathematics.h&gt;\n#include &lt;libavutil/timestamp.h&gt;\n#include &lt;libavformat/avformat.h&gt;\n#include &lt;libswscale/swscale.h&gt;\n#include &lt;libswresample/swresample.h&gt;\n\n#define STREAM_DURATION   10.0\n#define STREAM_FRAME_RATE 25 /* 25 images/s */\n#define STREAM_PIX_FMT    AV_PIX_FMT_YUV420P /* default pix_fmt */\n\n#define SCALE_FLAGS SWS_BICUBIC\n\n// a wrapper around a single output AVStream\ntypedef struct OutputStream {\n    AVStream *st;\n    AVCodecContext *enc;\n\n    /* pts of the next frame that will be generated */\n    int64_t next_pts;\n    int samples_count;\n\n    AVFrame *frame;\n    AVFrame *tmp_frame;\n\n    float t, tincr, tincr2;\n\n    struct SwsContext *sws_ctx;\n    struct SwrContext *swr_ctx;\n} OutputStream;\n\nstatic void log_packet(const AVFormatContext *fmt_ctx, const AVPacket *pkt)\n{\n    AVRational *time_base = &amp;fmt_ctx-&gt;streams[pkt-&gt;stream_index]-&gt;time_base;\n\n    printf(\"pts:%s pts_time:%s dts:%s dts_time:%s duration:%s duration_time:%s stream_index:%d\\n\",\n           av_ts2str(pkt-&gt;pts), av_ts2timestr(pkt-&gt;pts, time_base),\n           av_ts2str(pkt-&gt;dts), av_ts2timestr(pkt-&gt;dts, time_base),\n           av_ts2str(pkt-&gt;duration), av_ts2timestr(pkt-&gt;duration, time_base),\n           pkt-&gt;stream_index);\n}\n\nstatic int write_frame(AVFormatContext *fmt_ctx, const AVRational *time_base, AVStream *st, AVPacket *pkt)\n{\n    /* rescale output packet timestamp values from codec to stream timebase */\n    av_packet_rescale_ts(pkt, *time_base, st-&gt;time_base);\n    pkt-&gt;stream_index = st-&gt;index;\n\n    /* Write the compressed frame to the media file. */\n    log_packet(fmt_ctx, pkt);\n    return av_interleaved_write_frame(fmt_ctx, pkt);\n}\n\n/* Add an output stream. */\nstatic void add_stream(OutputStream *ost, AVFormatContext *oc,\n                       AVCodec **codec,\n                       enum AVCodecID codec_id)\n{\n    AVCodecContext *c;\n    int i;\n\n    /* find the encoder */\n    *codec = avcodec_find_encoder(codec_id);\n    if (!(*codec)) {\n        fprintf(stderr, \"Could not find encoder for '%s'\\n\",\n                avcodec_get_name(codec_id));\n        exit(1);\n    }\n\n    ost-&gt;st = avformat_new_stream(oc, NULL);\n    if (!ost-&gt;st) {\n        fprintf(stderr, \"Could not allocate stream\\n\");\n        exit(1);\n    }\n    ost-&gt;st-&gt;id = oc-&gt;nb_streams-1;\n    c = avcodec_alloc_context3(*codec);\n    if (!c) {\n        fprintf(stderr, \"Could not alloc an encoding context\\n\");\n        exit(1);\n    }\n    ost-&gt;enc = c;\n\n    switch ((*codec)-&gt;type) {\n    case AVMEDIA_TYPE_AUDIO:\n        c-&gt;sample_fmt  = (*codec)-&gt;sample_fmts ?\n            (*codec)-&gt;sample_fmts[0] : AV_SAMPLE_FMT_FLTP;\n        c-&gt;bit_rate    = 64000;\n        c-&gt;sample_rate = 44100;\n        if ((*codec)-&gt;supported_samplerates) {\n            c-&gt;sample_rate = (*codec)-&gt;supported_samplerates[0];\n            for (i = 0; (*codec)-&gt;supported_samplerates[i]; i++) {\n                if ((*codec)-&gt;supported_samplerates[i] == 44100)\n                    c-&gt;sample_rate = 44100;\n            }\n        }\n        c-&gt;channels        = av_get_channel_layout_nb_channels(c-&gt;channel_layout);\n        c-&gt;channel_layout = AV_CH_LAYOUT_STEREO;\n        if ((*codec)-&gt;channel_layouts) {\n            c-&gt;channel_layout = (*codec)-&gt;channel_layouts[0];\n            for (i = 0; (*codec)-&gt;channel_layouts[i]; i++) {\n                if ((*codec)-&gt;channel_layouts[i] == AV_CH_LAYOUT_STEREO)\n                    c-&gt;channel_layout = AV_CH_LAYOUT_STEREO;\n            }\n        }\n        c-&gt;channels        = av_get_channel_layout_nb_channels(c-&gt;channel_layout);\n        ost-&gt;st-&gt;time_base = (AVRational){ 1, c-&gt;sample_rate };\n        break;\n\n    case AVMEDIA_TYPE_VIDEO:\n        c-&gt;codec_id = codec_id;\n\n        c-&gt;bit_rate = 400000;\n        /* Resolution must be a multiple of two. */\n        c-&gt;width    = 352;\n        c-&gt;height   = 288;\n        /* timebase: This is the fundamental unit of time (in seconds) in terms\n         * of which frame timestamps are represented. For fixed-fps content,\n         * timebase should be 1/framerate and timestamp increments should be\n         * identical to 1. */\n        ost-&gt;st-&gt;time_base = (AVRational){ 1, STREAM_FRAME_RATE };\n        c-&gt;time_base       = ost-&gt;st-&gt;time_base;\n\n        c-&gt;gop_size      = 12; /* emit one intra frame every twelve frames at most */\n        c-&gt;pix_fmt       = STREAM_PIX_FMT;\n        if (c-&gt;codec_id == AV_CODEC_ID_MPEG2VIDEO) {\n            /* just for testing, we also add B-frames */\n            c-&gt;max_b_frames = 2;\n        }\n        if (c-&gt;codec_id == AV_CODEC_ID_MPEG1VIDEO) {\n            /* Needed to avoid using macroblocks in which some coeffs overflow.\n             * This does not happen with normal video, it just happens here as\n             * the motion of the chroma plane does not match the luma plane. */\n            c-&gt;mb_decision = 2;\n        }\n   break;\n\n    default:\n        break;\n    }\n\n    /* Some formats want stream headers to be separate. */\n    if (oc-&gt;oformat-&gt;flags &amp; AVFMT_GLOBALHEADER)\n        c-&gt;flags |= AV_CODEC_FLAG_GLOBAL_HEADER;\n}\n\n/**************************************************************/\n/* audio output */\n\nstatic AVFrame *alloc_audio_frame(enum AVSampleFormat sample_fmt,\n                                  uint64_t channel_layout,\n                                  int sample_rate, int nb_samples)\n{\n    AVFrame *frame = av_frame_alloc();\n    int ret;\n\n    if (!frame) {\n        fprintf(stderr, \"Error allocating an audio frame\\n\");\n        exit(1);\n    }\n\n    frame-&gt;format = sample_fmt;\n    frame-&gt;channel_layout = channel_layout;\n    frame-&gt;sample_rate = sample_rate;\n    frame-&gt;nb_samples = nb_samples;\n\n    if (nb_samples) {\n        ret = av_frame_get_buffer(frame, 0);\n        if (ret &lt; 0) {\n            fprintf(stderr, \"Error allocating an audio buffer\\n\");\n            exit(1);\n        }\n    }\n\n    return frame;\n}\n\nstatic void open_audio(AVFormatContext *oc, AVCodec *codec, OutputStream *ost, AVDictionary *opt_arg)\n{\n    AVCodecContext *c;\n    int nb_samples;\n    int ret;\n   AVDictionary *opt = NULL;\n\n    c = ost-&gt;enc;\n\n    /* open it */\n    av_dict_copy(&amp;opt, opt_arg, 0);\n    ret = avcodec_open2(c, codec, &amp;opt);\n    av_dict_free(&amp;opt);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Could not open audio codec: %s\\n\", av_err2str(ret));\n        exit(1);\n    }\n\n    /* init signal generator */\n    ost-&gt;t     = 0;\n    ost-&gt;tincr = 2 * M_PI * 110.0 / c-&gt;sample_rate;\n    /* increment frequency by 110 Hz per second */\n    ost-&gt;tincr2 = 2 * M_PI * 110.0 / c-&gt;sample_rate / c-&gt;sample_rate;\n\n    if (c-&gt;codec-&gt;capabilities &amp; AV_CODEC_CAP_VARIABLE_FRAME_SIZE)\n        nb_samples = 10000;\n    else\n        nb_samples = c-&gt;frame_size;\n\n    ost-&gt;frame     = alloc_audio_frame(c-&gt;sample_fmt, c-&gt;channel_layout,\n                                       c-&gt;sample_rate, nb_samples);\n    ost-&gt;tmp_frame = alloc_audio_frame(AV_SAMPLE_FMT_S16, c-&gt;channel_layout,\n                                       c-&gt;sample_rate, nb_samples);\n\n    /* copy the stream parameters to the muxer */\n    ret = avcodec_parameters_from_context(ost-&gt;st-&gt;codecpar, c);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Could not copy the stream parameters\\n\");\n        exit(1);\n    }\n\n    /* create resampler context */\n        ost-&gt;swr_ctx = swr_alloc();\n        if (!ost-&gt;swr_ctx) {\n            fprintf(stderr, \"Could not allocate resampler context\\n\");\n            exit(1);\n        }\n\n        /* set options */\n        av_opt_set_int       (ost-&gt;swr_ctx, \"in_channel_count\",   c-&gt;channels,       0);\n        av_opt_set_int       (ost-&gt;swr_ctx, \"in_sample_rate\",     c-&gt;sample_rate,    0);\n        av_opt_set_sample_fmt(ost-&gt;swr_ctx, \"in_sample_fmt\",      AV_SAMPLE_FMT_S16, 0);\n        av_opt_set_int       (ost-&gt;swr_ctx, \"out_channel_count\",  c-&gt;channels,       0);\n        av_opt_set_int       (ost-&gt;swr_ctx, \"out_sample_rate\",    c-&gt;sample_rate,    0);\n        av_opt_set_sample_fmt(ost-&gt;swr_ctx, \"out_sample_fmt\",     c-&gt;sample_fmt,     0);\n\n        /* initialize the resampling context */\n        if ((ret = swr_init(ost-&gt;swr_ctx)) &lt; 0) {\n            fprintf(stderr, \"Failed to initialize the resampling context\\n\");\n            exit(1);\n        }\n}\n\n/* Prepare a 16 bit dummy audio frame of 'frame_size' samples and\n * 'nb_channels' channels. */\nstatic AVFrame *get_audio_frame(OutputStream *ost)\n{\n    AVFrame *frame = ost-&gt;tmp_frame;\n    int j, i, v;\n    int16_t *q = (int16_t*)frame-&gt;data[0];\n\n    /* check if we want to generate more frames */\n    if (av_compare_ts(ost-&gt;next_pts, ost-&gt;enc-&gt;time_base,\n                      STREAM_DURATION, (AVRational){ 1, 1 }) &gt;= 0)\n        return NULL;\n\n    for (j = 0; j &lt;frame-&gt;nb_samples; j++) {\n        v = (int)(sin(ost-&gt;t) * 10000);\n        for (i = 0; i &lt; ost-&gt;enc-&gt;channels; i++)\n            *q++ = v;\n        ost-&gt;t     += ost-&gt;tincr;\n        ost-&gt;tincr += ost-&gt;tincr2;\n    }\n\n    frame-&gt;pts = ost-&gt;next_pts;\n    ost-&gt;next_pts  += frame-&gt;nb_samples;\n\n    return frame;\n}\n\n/*\n * encode one audio frame and send it to the muxer\n * return 1 when encoding is finished, 0 otherwise\n */\nstatic int write_audio_frame(AVFormatContext *oc, OutputStream *ost)\n{\n    AVCodecContext *c;\n    AVPacket pkt = { 0 }; // data and size must be 0;\n    AVFrame *frame;\n    int ret;\n    int got_packet;\n    int dst_nb_samples;\n\n    av_init_packet(&amp;pkt);\n    c = ost-&gt;enc;\n\n    frame = get_audio_frame(ost);\n\n    if (frame) {\n        /* convert samples from native format to destination codec format, using the resampler */\n            /* compute destination number of samples */\n            dst_nb_samples = av_rescale_rnd(swr_get_delay(ost-&gt;swr_ctx, c-&gt;sample_rate) + frame-&gt;nb_samples,\n                                            c-&gt;sample_rate, c-&gt;sample_rate, AV_ROUND_UP);\n            av_assert0(dst_nb_samples == frame-&gt;nb_samples);\n\n        /* when we pass a frame to the encoder, it may keep a reference to it\n         * internally;\n        * make sure we do not overwrite it here\n         */\n        ret = av_frame_make_writable(ost-&gt;frame);\n        if (ret &lt; 0)\n            exit(1);\n\n        /* convert to destination format */\n        ret = swr_convert(ost-&gt;swr_ctx,\n                          ost-&gt;frame-&gt;data, dst_nb_samples,\n                          (const uint8_t **)frame-&gt;data, frame-&gt;nb_samples);\n        if (ret &lt; 0) {\n            fprintf(stderr, \"Error while converting\\n\");\n            exit(1);\n        }\n        frame = ost-&gt;frame;\n\n        frame-&gt;pts = av_rescale_q(ost-&gt;samples_count, (AVRational){1, c-&gt;sample_rate}, c-&gt;time_base);\n        ost-&gt;samples_count += dst_nb_samples;\n    }\n\n    ret = avcodec_encode_audio2(c, &amp;pkt, frame, &amp;got_packet);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Error encoding audio frame: %s\\n\", av_err2str(ret));\n        exit(1);\n    }\n\n    if (got_packet) {\n        ret = write_frame(oc, &amp;c-&gt;time_base, ost-&gt;st, &amp;pkt);\n        if (ret &lt; 0) {\n            fprintf(stderr, \"Error while writing audio frame: %s\\n\",\n                    av_err2str(ret));\n            exit(1);\n        }\n    }\n\n    return (frame || got_packet) ? 0 : 1;\n}\n\n/**************************************************************/\n/* video output */\n\nstatic AVFrame *alloc_picture(enum AVPixelFormat pix_fmt, int width, int height)\n{\n    AVFrame *picture;\n    int ret;\n\n    picture = av_frame_alloc();\n    if (!picture)\n        return NULL;\n\n    picture-&gt;format = pix_fmt;\n    picture-&gt;width  = width;\n    picture-&gt;height = height;\n\n    /* allocate the buffers for the frame data */\n    ret = av_frame_get_buffer(picture, 32);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Could not allocate frame data.\\n\");\n        exit(1);\n    }\n\n    return picture;\n}\n\nstatic void open_video(AVFormatContext *oc, AVCodec *codec, OutputStream *ost, AVDictionary *opt_arg)\n{\n    int ret;\n    AVCodecContext *c = ost-&gt;enc;\n    AVDictionary *opt = NULL;\n\n    av_dict_copy(&amp;opt, opt_arg, 0);\n\n    /* open the codec */\n    ret = avcodec_open2(c, codec, &amp;opt);\n    av_dict_free(&amp;opt);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Could not open video codec: %s\\n\", av_err2str(ret));\n        exit(1);\n    }\n\n    /* allocate and init a re-usable frame */\n    ost-&gt;frame = alloc_picture(c-&gt;pix_fmt, c-&gt;width, c-&gt;height);\n    if (!ost-&gt;frame) {\n        fprintf(stderr, \"Could not allocate video frame\\n\");\n        exit(1);\n    }\n\n    /* If the output format is not YUV420P, then a temporary YUV420P\n     * picture is needed too. It is then converted to the required\n     * output format. */\n    ost-&gt;tmp_frame = NULL;\n    if (c-&gt;pix_fmt != AV_PIX_FMT_YUV420P) {\n        ost-&gt;tmp_frame = alloc_picture(AV_PIX_FMT_YUV420P, c-&gt;width, c-&gt;height);\n        if (!ost-&gt;tmp_frame) {\n            fprintf(stderr, \"Could not allocate temporary picture\\n\");\n            exit(1);\n        }\n    }\n\n    /* copy the stream parameters to the muxer */\n    ret = avcodec_parameters_from_context(ost-&gt;st-&gt;codecpar, c);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Could not copy the stream parameters\\n\");\n        exit(1);\n    }\n}\n\n/* Prepare a dummy image. */\nstatic void fill_yuv_image(AVFrame *pict, int frame_index,\n                           int width, int height)\n{\n    int x, y, i;\n\n    i = frame_index;\n\n    /* Y */\n    for (y = 0; y &lt; height; y++)\n        for (x = 0; x &lt; width; x++)\n            pict-&gt;data[0][y * pict-&gt;linesize[0] + x] = x + y + i * 3;\n\n    /* Cb and Cr */\n    for (y = 0; y &lt; height / 2; y++) {\n        for (x = 0; x &lt; width / 2; x++) {\n            pict-&gt;data[1][y * pict-&gt;linesize[1] + x] = 128 + y + i * 2;\n            pict-&gt;data[2][y * pict-&gt;linesize[2] + x] = 64 + x + i * 5;\n        }\n    }\n}\n\nstatic AVFrame *get_video_frame(OutputStream *ost)\n{\n    AVCodecContext *c = ost-&gt;enc;\n\n    /* check if we want to generate more frames */\n    if (av_compare_ts(ost-&gt;next_pts, c-&gt;time_base,\n                      STREAM_DURATION, (AVRational){ 1, 1 }) &gt;= 0)\n        return NULL;\n\n    /* when we pass a frame to the encoder, it may keep a reference to it\n     * internally; make sure we do not overwrite it here */\n    if (av_frame_make_writable(ost-&gt;frame) &lt; 0)\n        exit(1);\n\n    if (c-&gt;pix_fmt != AV_PIX_FMT_YUV420P) {\n        /* as we only generate a YUV420P picture, we must convert it\n         * to the codec pixel format if needed */\n        if (!ost-&gt;sws_ctx) {\n            ost-&gt;sws_ctx = sws_getContext(c-&gt;width, c-&gt;height,\n                                          AV_PIX_FMT_YUV420P,\n                                          c-&gt;width, c-&gt;height,\n                                          c-&gt;pix_fmt,\n                                          SCALE_FLAGS, NULL, NULL, NULL);\n            if (!ost-&gt;sws_ctx) {\n                fprintf(stderr,\n                        \"Could not initialize the conversion context\\n\");\n                exit(1);\n            }\n        }\n        fill_yuv_image(ost-&gt;tmp_frame, ost-&gt;next_pts, c-&gt;width, c-&gt;height);\n        sws_scale(ost-&gt;sws_ctx,\n                  (const uint8_t * const *)ost-&gt;tmp_frame-&gt;data, ost-&gt;tmp_frame-&gt;linesize,\n                  0, c-&gt;height, ost-&gt;frame-&gt;data, ost-&gt;frame-&gt;linesize);\n    } else {\n        fill_yuv_image(ost-&gt;frame, ost-&gt;next_pts, c-&gt;width, c-&gt;height);\n    }\n\n    ost-&gt;frame-&gt;pts = ost-&gt;next_pts++;\n\n    return ost-&gt;frame;\n}\n\n/*\n * encode one video frame and send it to the muxer\n * return 1 when encoding is finished, 0 otherwise\n */\nstatic int write_video_frame(AVFormatContext *oc, OutputStream *ost)\n{\n    int ret;\n    AVCodecContext *c;\n    AVFrame *frame;\n    int got_packet = 0;\n    AVPacket pkt = { 0 };\n\n    c = ost-&gt;enc;\n\n    frame = get_video_frame(ost);\n\n    av_init_packet(&amp;pkt);\n\n    /* encode the image */\n    ret = avcodec_encode_video2(c, &amp;pkt, frame, &amp;got_packet);\n    if (ret &lt; 0) {\n      fprintf(stderr, \"Error encoding video frame: %s\\n\", av_err2str(ret));\n        exit(1);\n    }\n\n    if (got_packet) {\n        ret = write_frame(oc, &amp;c-&gt;time_base, ost-&gt;st, &amp;pkt);\n    } else {\n        ret = 0;\n    }\n\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Error while writing video frame: %s\\n\", av_err2str(ret));\n        exit(1);\n    }\n\n    return (frame || got_packet) ? 0 : 1;\n}\n\nstatic void close_stream(AVFormatContext *oc, OutputStream *ost)\n{\n    avcodec_free_context(&amp;ost-&gt;enc);\n    av_frame_free(&amp;ost-&gt;frame);\n    av_frame_free(&amp;ost-&gt;tmp_frame);\n    sws_freeContext(ost-&gt;sws_ctx);\n    swr_free(&amp;ost-&gt;swr_ctx);\n}\n\n/**************************************************************/\n/* media file output */\n\nint main(int argc, char **argv)\n{\n    OutputStream video_st = { 0 }, audio_st = { 0 };\n    const char *filename;\n    AVOutputFormat *fmt;\n    AVFormatContext *oc;\n    AVCodec *audio_codec, *video_codec;\n    int ret;\n    int have_video = 0, have_audio = 0;\n    int encode_video = 0, encode_audio = 0;\n    AVDictionary *opt = NULL;\n    int i;\n\n    /* Initialize libavcodec, and register all codecs and formats. */\n    av_register_all();\n    avformat_network_init();\n    if (argc &lt; 2) {\n        printf(\"usage: %s output_file\\n\"\n               \"API example program to output a media file with libavformat.\\n\"\n               \"This program generates a synthetic audio and video stream, encodes and\\n\"\n               \"muxes them into a file named output_file.\\n\"\n               \"The output format is automatically guessed according to the file extension.\\n\"\n               \"Raw images can also be output by using '%%d' in the filename.\\n\"\n               \"\\n\", argv[0]);\n        return 1;\n    }\n\n    filename = argv[1];\n    for (i = 2; i+1 &lt; argc; i+=2) {\n        if (!strcmp(argv[i], \"-flags\") || !strcmp(argv[i], \"-fflags\"))\n            av_dict_set(&amp;opt, argv[i]+1, argv[i+1], 0);\n    }\n   /* allocate the output media context */\n    avformat_alloc_output_context2(&amp;oc, NULL, \"rtsp\", filename);\n    if (!oc) {\n        printf(\"Could not deduce output format from file extension: using MPEG.\\n\");\n        avformat_alloc_output_context2(&amp;oc, NULL, \"mpeg\", filename);\n    }\n    if (!oc)\n        return 1;\n\n    fmt = oc-&gt;oformat;\n\n    /* Add the audio and video streams using the default format codecs\n     * and initialize the codecs. */\n    if (fmt-&gt;video_codec != AV_CODEC_ID_NONE) {\n        add_stream(&amp;video_st, oc, &amp;video_codec, fmt-&gt;video_codec);\n        have_video = 1;\n        encode_video = 1;\n    }\n    if (fmt-&gt;audio_codec != AV_CODEC_ID_NONE) {\n        add_stream(&amp;audio_st, oc, &amp;audio_codec, fmt-&gt;audio_codec);\n        have_audio = 1;\n        encode_audio = 1;\n    }\n\n    /* Now that all the parameters are set, we can open the audio and\n     * video codecs and allocate the necessary encode buffers. */\n    if (have_video)\n        open_video(oc, video_codec, &amp;video_st, opt);\n\n    if (have_audio)\n        open_audio(oc, audio_codec, &amp;audio_st, opt);\n\n    av_dump_format(oc, 0, filename, 1);\n\n    /* open the output file, if needed */\n    if (!(fmt-&gt;flags &amp; AVFMT_NOFILE)) {\n        ret = avio_open(&amp;oc-&gt;pb, filename, AVIO_FLAG_WRITE);\n        if (ret &lt; 0) {\n            fprintf(stderr, \"Could not open '%s': %s\\n\", filename,\n                    av_err2str(ret));\n            return 1;\n        }\n    }\n\n    /* Write the stream header, if any. */\n    ret = avformat_write_header(oc, &amp;opt);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Error occurred when opening output file: %s\\n\",\n                av_err2str(ret));\n        return 1;\n    }\n\n    while (encode_video || encode_audio) {\n        /* select the stream to encode */\n        if (encode_video &amp;&amp;\n           (!encode_audio || av_compare_ts(video_st.next_pts, video_st.enc-&gt;time_base,\n                                            audio_st.next_pts, audio_st.enc-&gt;time_base) &lt;= 0)) {\n            encode_video = !write_video_frame(oc, &amp;video_st);\n        } else {\n            encode_audio = !write_audio_frame(oc, &amp;audio_st);\n        }\n    }\n\n    /* Write the trailer, if any. The trailer must be written before you\n     * close the CodecContexts open when you wrote the header; otherwise\n     * av_write_trailer() may try to use memory that was freed on\n     * av_codec_close(). */\n    av_write_trailer(oc);\n\n    /* Close each codec. */\n    if (have_video)\n        close_stream(oc, &amp;video_st);\n    if (have_audio)\n        close_stream(oc, &amp;audio_st);\n\n    if (!(fmt-&gt;flags &amp; AVFMT_NOFILE))\n        /* Close the output file. */\n        avio_closep(&amp;oc-&gt;pb);\n\n    /* free the stream */\n    avformat_free_context(oc);\n\n    return 0;\n}\n</code></pre>\n\n<p>After compiling it, I am running binary:</p>\n\n<pre><code>$ ./muxing rtsp://127.0.0.1/test\nOutput #0, rtsp, to 'rtsp://127.0.0.1/test':\n    Stream #0:0: Video: mpeg4, yuv420p, 352x288, q=2-31, 400 kb/s, 25 tbn\n    Stream #0:1: Audio: aac (LC), 44100 Hz, stereo, fltp, 64 kb/s\n[tcp @ 0x2b9d220] Connection to tcp://127.0.0.1:554?timeout=0 failed: Connection refused\nError occurred when opening output file: Connection refused\n</code></pre>\n\n<p>But getting Connection refused error,</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541609855, "post_id": 53194179, "comment_id": 93277143, "body": "are you sure <code>-fPIC</code> is taken into account? and your command line looks suspcious. Can you fix various typos in your question? what is <code>a.file</code> ? this isn&#39;t C???"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1541609904, "post_id": 53194179, "comment_id": 93277173, "body": "the filling in of the offsets is part of the linking process.  The compiler does not know where the other item will be located"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1541609956, "post_id": 53194179, "comment_id": 93277201, "body": "the point is, if I understand correctly, since both functions are in the same file, it could use relative BSR instead of absolute (which needs linker)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1541610761, "post_id": 53194179, "comment_id": 93277622, "body": "it&#39;s not &quot;process independent code&quot; it&#39;s &quot;position-independent code&quot;. And what you describe means that -fPIC doesn&#39;t work, because the code isn&#39;t really position independent. So we&#39;re waiting to see your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> because there are too many errors in your question."}, {"owner": {"reputation": 101, "user_id": 6387713, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4xmkhGjMjag/AAAAAAAAAAI/AAAAAAAAACU/sRGJQrZi96g/photo.jpg?sz=128", "display_name": "mikel bubi", "link": "https://stackoverflow.com/users/6387713/mikel-bubi"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1541630397, "post_id": 53194179, "comment_id": 93286497, "body": "@Jean-Fran&#231;ois Fabre Yes im sure. The fPIC flag make things easier with .got.plt, but doesny solves the relocation &quot;problem&quot;. Srry for the typos. Fixed what i could.."}, {"owner": {"reputation": 101, "user_id": 6387713, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4xmkhGjMjag/AAAAAAAAAAI/AAAAAAAAACU/sRGJQrZi96g/photo.jpg?sz=128", "display_name": "mikel bubi", "link": "https://stackoverflow.com/users/6387713/mikel-bubi"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541630684, "post_id": 53194179, "comment_id": 93286601, "body": "@user3629249 the compiler puts the functions in a fixed order. Then why couldn&#39;t it also referring one function referece in the second function to be relative to each other?!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541640158, "post_id": 53194179, "comment_id": 93289103, "body": "@mikelbubi. because the linking is the job of the linker"}], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1541643035, "creation_date": 1541643035, "answer_id": 53200573, "question_id": 53194179, "link": "https://stackoverflow.com/questions/53194179/elegant-way-of-modifying-object-file-function-xref-in-linux/53200573#53200573", "title": "Elegant way of modifying object file&#39; function xref in linux", "body": "<p>Consider this freestanding <strong>hello.c</strong> for x86-64/AMD64 architecture on Linux:</p>\n\n<pre><code>/* Freestanding Hello World example in Linux on x86_64/x86.\n * Compile using\n *      gcc -Wall -O2 -fPIC -pie -march=x86-64 -mtune=generic -m64 -ffreestanding -nostdlib -nostartfiles hello.c -o hello\n*/\n#define STDOUT_FILENO 1\n#define EXIT_SUCCESS  0\n\n#ifndef __x86_64__\n#error  This program only works on x86_64 architecture!\n#endif\n\n#define SYS_write    1\n#define SYS_exit    60\n\n#define SYSCALL1_NORET(nr, arg1) \\\n    __asm__ volatile ( \"syscall\\n\\t\" \\\n                     : \\\n                     : \"a\" (nr), \"D\" (arg1) \\\n                     : \"rcx\", \"r11\" )\n\n#define SYSCALL3(retval, nr, arg1, arg2, arg3) \\\n    __asm__ volatile ( \"syscall\\n\\t\" \\\n                     : \"=a\" (retval) \\\n                     : \"a\" (nr), \"D\" (arg1), \"S\" (arg2), \"d\" (arg3) \\\n                     : \"rcx\", \"r11\" )\n\nstatic void my_exit(int retval)\n{\n    SYSCALL1_NORET(SYS_exit, retval);\n}\n\nstatic int my_write(int fd, const void *data, int len)\n{\n    int retval;\n\n    if (fd == -1 || !data || len &lt; 0)\n        return -1;\n\n    SYSCALL3(retval, SYS_write, fd, data, len);\n\n    if (retval &lt; 0)\n        return -1;\n\n    return retval;\n}\n\nstatic int my_strlen(const char *str)\n{\n    int len = 0L;\n\n    if (!str)\n        return -1;\n\n    while (*str++)\n        len++;\n\n    return len;\n}\n\nstatic int wrout(const char *str)\n{\n    if (str &amp;&amp; *str)\n        return my_write(STDOUT_FILENO, str, my_strlen(str));\n    else\n        return 0;\n}\n\nvoid _start(void)\n{\n    const char *msg = \"Hello, world!\\n\";\n    wrout(msg);\n    my_exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Note that it fulfills OP's scenario: <code>_start()</code> calls <code>wrout()</code>, which calls <code>my_strlen()</code> and <code>my_write()</code>.</p>\n\n<p>(Why freestanding, without all the niceties of the standard C library? Because the standard library is not compiled with <code>-fPIC</code> and <code>-pie</code>, so it'd have to be dynamically linked to the standard library; and those calls would have relocations, clouding my point. Being freestanding, we get a Minimal, Complete, Verifiable Example, that yields clear, unambiguous results.) </p>\n\n<p>Compile it using</p>\n\n<pre><code>gcc -Wall -O2 -fPIC -pie -march=x86-64 -mtune=generic -m64 -ffreestanding -nostdlib -nostartfiles hello.c -o hello\n</code></pre>\n\n<p>and run using <code>./hello</code>. It prints out \"Hello, world!\" as it should.</p>\n\n<p>Next, examine it using <code>objdump -x hello</code>:</p>\n\n<pre><code>hello:     file format elf64-x86-64\nhello\narchitecture: i386:x86-64, flags 0x00000150:\nHAS_SYMS, DYNAMIC, D_PAGED\nstart address 0x0000000000000340\n\nProgram Header:\n    PHDR off    0x0000000000000040 vaddr 0x0000000000000040 paddr 0x0000000000000040 align 2**3\n         filesz 0x00000000000001f8 memsz 0x00000000000001f8 flags r-x\n  INTERP off    0x0000000000000238 vaddr 0x0000000000000238 paddr 0x0000000000000238 align 2**0\n         filesz 0x000000000000001c memsz 0x000000000000001c flags r--\n    LOAD off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**21\n         filesz 0x00000000000003d0 memsz 0x00000000000003d0 flags r-x\n    LOAD off    0x0000000000000f30 vaddr 0x0000000000200f30 paddr 0x0000000000200f30 align 2**21\n         filesz 0x00000000000000d0 memsz 0x00000000000000d0 flags rw-\n DYNAMIC off    0x0000000000000f30 vaddr 0x0000000000200f30 paddr 0x0000000000200f30 align 2**3\n         filesz 0x00000000000000d0 memsz 0x00000000000000d0 flags rw-\n    NOTE off    0x0000000000000254 vaddr 0x0000000000000254 paddr 0x0000000000000254 align 2**2\n         filesz 0x0000000000000024 memsz 0x0000000000000024 flags r--\nEH_FRAME off    0x0000000000000388 vaddr 0x0000000000000388 paddr 0x0000000000000388 align 2**2\n         filesz 0x0000000000000014 memsz 0x0000000000000014 flags r--\n   STACK off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**4\n         filesz 0x0000000000000000 memsz 0x0000000000000000 flags rw-\n   RELRO off    0x0000000000000f30 vaddr 0x0000000000200f30 paddr 0x0000000000200f30 align 2**0\n         filesz 0x00000000000000d0 memsz 0x00000000000000d0 flags r--\n\nDynamic Section:\n  GNU_HASH             0x0000000000000278\n  STRTAB               0x0000000000000320\n  SYMTAB               0x00000000000002a8\n  STRSZ                0x0000000000000019\n  SYMENT               0x0000000000000018\n  DEBUG                0x0000000000000000\n  FLAGS_1              0x0000000008000000\n\nSections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  0 .interp       0000001c  0000000000000238  0000000000000238  00000238  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  1 .note.gnu.build-id 00000024  0000000000000254  0000000000000254  00000254  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  2 .gnu.hash     00000030  0000000000000278  0000000000000278  00000278  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  3 .dynsym       00000078  00000000000002a8  00000000000002a8  000002a8  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  4 .dynstr       00000019  0000000000000320  0000000000000320  00000320  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  5 .text         00000037  0000000000000340  0000000000000340  00000340  2**4\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n  6 .rodata       0000000f  0000000000000377  0000000000000377  00000377  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  7 .eh_frame_hdr 00000014  0000000000000388  0000000000000388  00000388  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  8 .eh_frame     00000030  00000000000003a0  00000000000003a0  000003a0  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  9 .dynamic      000000d0  0000000000200f30  0000000000200f30  00000f30  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 10 .comment      00000035  0000000000000000  0000000000000000  00001000  2**0\n                  CONTENTS, READONLY\nSYMBOL TABLE:\n0000000000000238 l    d  .interp            0000000000000000 .interp\n0000000000000254 l    d  .note.gnu.build-id 0000000000000000 .note.gnu.build-id\n0000000000000278 l    d  .gnu.hash          0000000000000000 .gnu.hash\n00000000000002a8 l    d  .dynsym            0000000000000000 .dynsym\n0000000000000320 l    d  .dynstr            0000000000000000 .dynstr\n0000000000000340 l    d  .text              0000000000000000 .text\n0000000000000377 l    d  .rodata            0000000000000000 .rodata\n0000000000000388 l    d  .eh_frame_hdr      0000000000000000 .eh_frame_hdr\n00000000000003a0 l    d  .eh_frame          0000000000000000 .eh_frame\n0000000000200f30 l    d  .dynamic           0000000000000000 .dynamic\n0000000000000000 l    d  .comment           0000000000000000 .comment\n0000000000000000 l    df *ABS*              0000000000000000 hello.c\n0000000000000000 l    df *ABS*              0000000000000000 \n0000000000200f30 l     O .dynamic           0000000000000000 _DYNAMIC\n0000000000000388 l       .eh_frame_hdr      0000000000000000 __GNU_EH_FRAME_HDR\n0000000000201000 l     O .dynamic           0000000000000000 _GLOBAL_OFFSET_TABLE_\n0000000000000340 g     F .text              0000000000000037 _start\n0000000000201000 g       .dynamic           0000000000000000 __bss_start\n0000000000201000 g       .dynamic           0000000000000000 _edata\n0000000000201000 g       .dynamic           0000000000000000 _end\n</code></pre>\n\n<p>and it has only the basic symbols. You can even strip it, <code>strip --strip-unneeded hello</code>, after which it has no symbols at all. (The start address does not need to be a symbol in ELF files.)  Looking at the assembly, <code>objdump -d hello</code>,</p>\n\n<pre><code>hello:     file format elf64-x86-64\n\nDisassembly of section .text:\n\n0000000000000340 &lt;_start&gt;:\n 340:  48 8d 0d 31 00 00 00   lea    0x31(%rip),%rcx        # 378 &lt;_start+0x38&gt;\n 347:  31 d2                  xor    %edx,%edx\n 349:  0f 1f 80 00 00 00 00   nopl   0x0(%rax)\n 350:  48 83 c1 01            add    $0x1,%rcx\n 354:  83 c2 01               add    $0x1,%edx\n 357:  80 79 ff 00            cmpb   $0x0,-0x1(%rcx)\n 35b:  75 f3                  jne    350 &lt;_start+0x10&gt;\n 35d:  b8 01 00 00 00         mov    $0x1,%eax\n 362:  48 8d 35 0e 00 00 00   lea    0xe(%rip),%rsi        # 377 &lt;_start+0x37&gt;\n 369:  89 c7                  mov    %eax,%edi\n 36b:  0f 05                  syscall \n 36d:  31 ff                  xor    %edi,%edi\n 36f:  b8 3c 00 00 00         mov    $0x3c,%eax\n 374:  0f 05                  syscall \n 376:  c3                     retq   \n</code></pre>\n\n<p>and you'll see all addressing is relative to <code>%rip</code>, including the conditional jumps. For example, <code>75 f3</code> encodes a jump 13 bytes before the start of the next opcode (0xF3 = -13).</p>\n\n<p>If you omit optimization (<code>-O2</code>), GCC tries to be helpful and includes the <em>local</em> symbols in the ELF file; you can remove those using <code>strip --strip-unneeded hello</code>.</p>\n\n<p>So, when you compile to an object file without optimization, <code>gcc -Wall -fPIC -pie -march=x86-64 -mtune=generic -m64 -ffreestanding -nostdlib -nostartfiles -c hello.c</code>, and examine the resulting <code>hello.o</code> using <code>objdump -x hello.o</code>, you'll se both the local symbols (<code>l</code> in the second column),</p>\n\n<pre><code>SYMBOL TABLE:\n0000000000000000 l    df *ABS*              0000000000000000 hello.c\n0000000000000000 l    d  .text              0000000000000000 .text\n0000000000000000 l    d  .data              0000000000000000 .data\n0000000000000000 l    d  .bss               0000000000000000 .bss\n0000000000000000 l     F .text              0000000000000016 my_exit\n0000000000000016 l     F .text              000000000000004e my_write\n0000000000000064 l     F .text              0000000000000039 my_strlen\n000000000000009d l     F .text              0000000000000046 wrout\n0000000000000000 l    d  .rodata            0000000000000000 .rodata\n0000000000000000 l    d  .note.GNU-stack    0000000000000000 .note.GNU-stack\n0000000000000000 l    d  .eh_frame          0000000000000000 .eh_frame\n0000000000000000 l    d  .comment           0000000000000000 .comment\n00000000000000e3 g     F .text              000000000000002c _start\n</code></pre>\n\n<p>and that there is one relocation record for <code>.text</code>,</p>\n\n<pre><code>RELOCATION RECORDS FOR [.text]:\nOFFSET           TYPE              VALUE \n00000000000000ee R_X86_64_PC32     .rodata-0x0000000000000004\n</code></pre>\n\n<p>which being of <code>R_X86_64_PC32</code> type, is instruction pointer relative 32-bit constant. When linked into a binary (executable or library), these relocations will be applied, and the final binary will be position independent.</p>\n\n<p>The only symbols needed in the file are those that need to be accessible from outside, excluding <code>_start</code>, whose address is stored as the start address in the ELF file.  If a function or a global variable is not needed outside a compilation unit, you mark them <code>static</code>.  Then, we tell the compiler to generate position independent code (<code>-fPIC</code>) and a position independent executable (<code>-pie</code>). I personally always enable warnings and optimization (<code>-Wall -O2</code>), but that's up to you.</p>\n\n<p>So, the answer to OP's question as to <em>\"how to do this\"</em>:</p>\n\n<ol>\n<li><p>Use <code>static</code> for all functions and global variables that do not need to be accessible outside the current compilation unit.</p></li>\n<li><p>Compile the object and/or binary with <code>-fPIC</code> <code>-pie</code>.  This should avoid the need of runtime relocations, and use <code>%rip</code>-relative addressing or similar on all architectures that support it.</p></li>\n<li><p>Optionally, strip unneeded symbols from the binary using <code>strip --strip-unneeded</code>. This does not affect relocations, but makes the binary smaller, by removing the unneeded symbol information.</p></li>\n</ol>\n"}], "owner": {"reputation": 101, "user_id": 6387713, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4xmkhGjMjag/AAAAAAAAAAI/AAAAAAAAACU/sRGJQrZi96g/photo.jpg?sz=128", "display_name": "mikel bubi", "link": "https://stackoverflow.com/users/6387713/mikel-bubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1541643035, "creation_date": 1541609641, "last_edit_date": 1541630187, "question_id": 53194179, "link": "https://stackoverflow.com/questions/53194179/elegant-way-of-modifying-object-file-function-xref-in-linux", "title": "Elegant way of modifying object file&#39; function xref in linux", "body": "<p>I wondered if there is a way of making a \"realy position independent code\".</p>\n\n<p>Imagine this situation (the implementation is realy unimportant here.):\nYou have a file called 'a.c', which contains a simple two functions of <code>c</code> code - functin <code>a</code> and function <code>b</code>, when fnction <code>a</code> calls function `b'..</p>\n\n<p>When compiling this simple situation by doing:\n<code>gcc -c -o a.out a.c -fPIC</code>\nAnd then observing the <code>text</code> section, ill see that function <code>a</code>, within the assembly, on the place where it calls function <code>b</code> - a hold place zeros.\nThis zeros us we all know, will be simply replaced on runtime acording the value in the relocation table.</p>\n\n<p>Well, here is my question - I found it unnecacery part of the independency.\nThe reason is, because already before the running, I can determine the distance between <code>a</code> and <code>b</code>, hence I can rewrite the place holding zeros that meant to be <code>b</code> address, with the relative call to the real function.\nI found this method of manualy changing the bytes - very long when we tallk about big programs.</p>\n\n<p>So, is there any elegant way to do the same thing I do manually, by a flag from <code>gcc</code>/<code>objdump</code> or somthing?</p>\n"}, {"tags": ["c", "pointers", "math"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1541609716, "post_id": 53194142, "comment_id": 93277065, "body": "You may want to format your code by indenting it by four spaces, and to add a language tag, such as C. Use the edit button beneath your question, hilight your code, and press the <code>{}</code> toolbar button."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1541609786, "post_id": 53194142, "comment_id": 93277106, "body": "I fixed it this time, but it does really help to use the code format.  Good job delivering a complete code example."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1541609848, "post_id": 53194142, "comment_id": 93277140, "body": "I am not sure I understand why you say &quot;It seems to work&quot; when the remainder of the question shows quite the opposite. Overall nicely written question though. +1"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1541610005, "post_id": 53194142, "comment_id": 93277232, "body": "What is <code>b</code> for?  Why is <code>maxAddress</code> ?  Most important question, what does <code>a++</code> do to the pointer of the beginning of your array ?"}, {"owner": {"reputation": 27, "user_id": 9099946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LQc31.jpg?s=128&g=1", "display_name": "KylaM26", "link": "https://stackoverflow.com/users/9099946/kylam26"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1541610639, "post_id": 53194142, "comment_id": 93277562, "body": "@DanFarrell, You are correct I don&#39;t need b, max address is just a variable that stores the the last address in the array. a++ increments as long as the a &lt; maxAddress is true."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1541611072, "post_id": 53194142, "comment_id": 93277786, "body": "<a href=\"https://stackoverflow.com/q/605845/995714\">don&#39;t cast the result of <code>malloc</code> in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9099946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LQc31.jpg?s=128&g=1", "display_name": "KylaM26", "link": "https://stackoverflow.com/users/9099946/kylam26"}, "edited": false, "score": 0, "creation_date": 1541610790, "post_id": 53194328, "comment_id": 93277638, "body": "Thanks Mad Physicist"}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1541610229, "creation_date": 1541610229, "answer_id": 53194328, "question_id": 53194142, "link": "https://stackoverflow.com/questions/53194142/pointer-arithmetic-with-an-array/53194328#53194328", "title": "Pointer arithmetic with an array", "body": "<p>You have two independent increments going on. In the for loop you do <code>index++</code>, while in the end of the loop you increment <code>a++</code>. That means your first write is to <code>a[0]</code>, your next is to <code>a[1 + 1]</code>, etc. Basically, you are skipping every other element.</p>\n\n<p>To avoid doing this increment <code>a</code> or <code>index</code>, but not both. Since you want the values of <code>index</code> to progress, I would recommend removing the line <code>a++</code>.</p>\n\n<p>The variable <code>b</code> is not used except in the beginning of the loop, so the condition <code>b = a, b &lt; maxAddress</code> seems pointless. It could be written as <code>a &lt; maxAddress</code>. If I had so guess, <code>b</code> was being used in a fuller version of the code to retain the previous value of <code>a</code> for the next iteration.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 9099946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LQc31.jpg?s=128&g=1", "display_name": "KylaM26", "link": "https://stackoverflow.com/users/9099946/kylam26"}, "edited": false, "score": 1, "creation_date": 1541611295, "post_id": 53194484, "comment_id": 93277897, "body": "Thanks for your response Paul :)"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1541614234, "post_id": 53194484, "comment_id": 93279298, "body": "Note here that <code>a</code> isn&#39;t incremented.  If you increment <code>a</code>, you lose track of where the original array started.  That&#39;s where the weird values came  from."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1541619096, "post_id": 53194484, "comment_id": 93281502, "body": "Note that even though this code does check for the null-ness of <code>a</code> when it is being populated, that is not checked for when the contents of <code>a</code> are printed in the next loop.  This is best handled by checking <code>if(a == NULL) { &#47;* report alllocation error and exit *&#47; }</code> rather than <code>if(a != NULL) { &#47;* do stuff *&#47; } </code>"}], "tags": [], "owner": {"reputation": 912, "user_id": 2359895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9X5ZI.jpg?s=128&g=1", "display_name": "Paul Baxter", "link": "https://stackoverflow.com/users/2359895/paul-baxter"}, "is_accepted": true, "score": 0, "last_activity_date": 1541610825, "creation_date": 1541610825, "answer_id": 53194484, "question_id": 53194142, "link": "https://stackoverflow.com/questions/53194142/pointer-arithmetic-with-an-array/53194484#53194484", "title": "Pointer arithmetic with an array", "body": "<p>Here is the corrected code:\nb should be initialized before the the loop.\nthe for loop was incorrect\nyou should increment b not a in the loop</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX 5\n\nint main(int argc, char const *argv[]) {\n\n    int* a = (int*)malloc(MAX * sizeof(int));\n    int* b = a;\n    int* const maxAddress = a + MAX;\n\n    if (a != NULL) {\n        for (int index = 0; b &lt; maxAddress; index++) {\n            *(a + index) = index;\n            printf(\"Value: %d, Index: %d\\n\", *(a + index), index);\n            b++;\n        }\n    }\n\n    printf(\"\\n\\n\");\n\n    for (int index = 0; index &lt; MAX; index++) // Getting junk values here\n        printf(\"Index: %d, Value: %d, Address: %p\\n\", index, *(a + index), a + index * sizeof(int));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1541612743, "last_edit_date": 1541612743, "creation_date": 1541611458, "answer_id": 53194658, "question_id": 53194142, "link": "https://stackoverflow.com/questions/53194142/pointer-arithmetic-with-an-array/53194658#53194658", "title": "Pointer arithmetic with an array", "body": "<p>The syntax <code>*(a + index)</code> is equivalent to <code>a[index]</code>; the latter indicates your intent with the code more clearly.</p>\n\n<p>If we break down what you're doing with the lines <code>index++</code> (in your <code>for</code> loop declaration) and <code>a++</code> in the body of your loop, you will observe that you're accessing memory you didn't actually allocate for <code>a</code>:</p>\n\n<p><strong>Loop Iteration #0 (a = allocated address index = 0):</strong></p>\n\n<pre><code>*(a + index) accesses a[0]\na[0]   a[1]   a[2]    a[3]    a[4]\n 0      ?      ?       ?        ?\n</code></pre>\n\n<p><strong>Loop Iteration #1 (a = alloc+1 index = 1):</strong></p>\n\n<pre><code>*(a + index) accesses a[2]\na[0]   a[1]   a[2]    a[3]    a[4]\n 0      ?      1       ?       ?\n</code></pre>\n\n<p>You begin to write past the array at iteration #3:</p>\n\n<pre><code>*(a + index) accesses a[6]\na[0]   a[1]   a[2]    a[3]    a[4]     | MEMORY NOT BELONGING TO a\n 0      ?      1       ?       ?                   3?\n</code></pre>\n\n<p>Also, after your initial <code>for</code> loop where you incremented the pointer <code>a</code> to the end of your allocated amount, you try to access it again without resetting it to its initial value, so the values you access are not even the ones you (thought you had) assigned.</p>\n\n<p>This is especially bad for memory allocated with <code>malloc</code> since you usually later <code>free</code> it, but you can't do that without a pointer to the beginning of your allocated memory block.</p>\n\n<p>Solution:</p>\n\n<p>Do not increment <code>a</code> in your initial <code>for</code> loop and use the correct truth condition:</p>\n\n<pre><code>for(int index = 0; (a + index) &lt; maxAddress; index++) \n// Also valid: ...; index &lt; MAX; ...\n{\n        *(a + index) = index;\n        printf(\"Value: %d, Index: %d\\n\", *(a + index), index);\n} \n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9099946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LQc31.jpg?s=128&g=1", "display_name": "KylaM26", "link": "https://stackoverflow.com/users/9099946/kylam26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53194484, "answer_count": 3, "score": 0, "last_activity_date": 1541612743, "creation_date": 1541609505, "last_edit_date": 1541610533, "question_id": 53194142, "link": "https://stackoverflow.com/questions/53194142/pointer-arithmetic-with-an-array", "title": "Pointer arithmetic with an array", "body": "<p>I am trying to write a simple program in C that stores elements in a pointer. I am getting junk values when I print the elements of the array.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX 5\n\nint main(int argc, char const *argv[]) {\n\n    int* a = (int*)malloc(MAX * sizeof(int));\n    int* b = NULL;\n    int* const maxAddress = a + MAX;\n\n    if(a != NULL) {\n        for(int index = 0; b = a, b &lt; maxAddress; index++) {\n            *(a + index) = index;\n            printf(\"Value: %d, Index: %d\\n\", *(a + index), index);\n            a++;\n        } \n    }   \n\n    printf(\"\\n\\n\");\n\n    for(int index = 0; index &lt; MAX; index++) // Getting junk values here\n        printf(\"Index: %d, Value: %d, Address: %p\\n\", index, *(a + index), a + index);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "binary", "long-integer", "signed"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541608244, "post_id": 53193708, "comment_id": 93276252, "body": "On some platforms <code>long</code> is only 32 bits, it can not itself store the binary representation of another 32-bit type (like <code>int</code> usually is) as it&#39;s much to large. If you want to display binary values, I recommend you use strings instead, with one character per binary digit (plus the null-terminator of course)."}, {"owner": {"reputation": 71, "user_id": 8585029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d13eb60f466ebadbb315f31deee439?s=128&d=identicon&r=PG&f=1", "display_name": "jirick", "link": "https://stackoverflow.com/users/8585029/jirick"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541608560, "post_id": 53193708, "comment_id": 93276421, "body": "It&#39;ll be used just for smaller integers, so there should not be a problem...."}, {"owner": {"reputation": 71, "user_id": 8585029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d13eb60f466ebadbb315f31deee439?s=128&d=identicon&r=PG&f=1", "display_name": "jirick", "link": "https://stackoverflow.com/users/8585029/jirick"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541608730, "post_id": 53193708, "comment_id": 93276521, "body": "I tried it, but there was some problem... Could you please just modify my functional function for using string? I mean returning string..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541608966, "post_id": 53193708, "comment_id": 93276655, "body": "When you say &quot;smaller integers&quot; what do you mean by that? How many bits do you need?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541609078, "post_id": 53193708, "comment_id": 93276711, "body": "As for your problem, treat even negative numbers as unsigned. It will make it much easier to get the bits out of the numbers (but then you might get a <i>lot</i> more bits than can fit in your <code>binn</code> variable)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541609865, "post_id": 53193708, "comment_id": 93277148, "body": "@Someprogrammerdude &quot;with one character per binary digit (plus the null-terminator of course).&quot; is off-by-1 for negative values as typical <code>INT_MIN</code> needs a 34 byte string.   <code>&quot;-10000000000000000000000000000000&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1541609434, "last_edit_date": 1541609434, "creation_date": 1541608737, "answer_id": 53193926, "question_id": 53193708, "link": "https://stackoverflow.com/questions/53193708/c-conversion-of-signed-int-as-binary-to-long/53193926#53193926", "title": "C conversion of signed int as binary to long", "body": "<blockquote>\n  <p>Is there a way?</p>\n</blockquote>\n\n<p>Consider code re-use since you have a working <code>convertToBin()</code> for positive values.</p>\n\n<pre><code>long NegAndPosConvertToBin(int decn) {\n  if (decn &lt; 0) return -convertToBin(-decn);\n  return convertToBin(decn);\n}\n</code></pre>\n\n<p>If OP still wants a stand-alone <code>long negConvertToBin(int decn)</code>, then</p>\n\n<pre><code>long negConvertToBin(int decn) {\n  decn = -decn;\n\n  // same body as convertToBin() without the return\n\n  return -binn;\n}\n</code></pre>\n\n<p>As well commented by <a href=\"https://stackoverflow.com/questions/53193708/c-conversion-of-signed-int-as-binary-to-long/53193926#comment93276252_53193708\">@Some programmer dude</a>, OP's approach has limited useful <code>int</code> range as overflow occur with large values.</p>\n\n<hr>\n\n<p>For a textual conversion for all <code>int</code> to various bases including 2, see <a href=\"https://stackoverflow.com/a/29933810/2410359\"><code>char* itostr(char *dest, size_t size, int a, int base)</code></a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "is_accepted": false, "score": 1, "last_activity_date": 1541608831, "creation_date": 1541608831, "answer_id": 53193957, "question_id": 53193708, "link": "https://stackoverflow.com/questions/53193708/c-conversion-of-signed-int-as-binary-to-long/53193957#53193957", "title": "C conversion of signed int as binary to long", "body": "<p>i can't comment but <strong>sprintf</strong> function do works for you :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ( void )\n{\n    char temp[128] ;\n    int num = -1  ;\n    sprintf  ( temp , \"%x\" , num );\n    puts ( temp ) ;\n    return 0 ;\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8585029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d13eb60f466ebadbb315f31deee439?s=128&d=identicon&r=PG&f=1", "display_name": "jirick", "link": "https://stackoverflow.com/users/8585029/jirick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 53193926, "answer_count": 2, "score": 1, "last_activity_date": 1541609434, "creation_date": 1541608097, "question_id": 53193708, "link": "https://stackoverflow.com/questions/53193708/c-conversion-of-signed-int-as-binary-to-long", "title": "C conversion of signed int as binary to long", "body": "<p>I have a function which converts an integer to its binary representation and its stored in a long variable. My problem is that my function converts only positive integers so I need to implement a new function which will be slightly changed to do just that. I still need to store the bin. rep. in a long variable because that depends on the other features. Is there a way? </p>\n\n<p>My function which successfully converts only positive integers:</p>\n\n<pre><code>long convertToBin(int decn)\n{\n  long binn = 0;\n  long rem;\n  long a = 1;\n  while(decn != 0)\n  {\n    rem = decn % 2;\n    binn = binn + rem * a;\n    a = a * 10;\n    decn = decn / 2;\n  }\nreturn binn;\n}\n</code></pre>\n\n<p>I've tried it like this, but there is something wrong - doesn't work... </p>\n\n<pre><code>long negConvertToBin(int decn)\n{\n  long binn = 0;\n  decn = abs(decn);\n  decn = decn - 1;\n  decn = ~decn;\n  long rem;\n  long a = 1;\n  while(decn != 0)\n  {\n      rem = decn % 2;\n      binn = binn + rem * a;\n      a = a * 10;\n      decn = decn / 2;\n  }\n\nreturn binn;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1541608112, "post_id": 53193701, "comment_id": 93276178, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1541608137, "post_id": 53193701, "comment_id": 93276194, "body": "As for your <i>possible</i> question: Keep a variable that you increase each iteration?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541610000, "post_id": 53193701, "comment_id": 93277228, "body": "<code>int n=0; do{ ... n++;}while(...);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541610412, "post_id": 53193701, "comment_id": 93277433, "body": "Consider re-trying code with 3, rather than 21 items.  Review that and if still having troubles, post that <i>simplified</i> code.  That is part of M in <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1541610732, "creation_date": 1541610732, "answer_id": 53194460, "question_id": 53193701, "link": "https://stackoverflow.com/questions/53193701/how-do-i-print-the-number-of-time-a-do-while-loop-is-executed/53194460#53194460", "title": "How do i print the number of time a do while loop is executed?", "body": "<p>Something like this should do it.</p>\n\n<p>Change</p>\n\n<pre><code>do{\n    printf(\"Menu: \\n\\n\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int items_in_order = 0;\ndo{\n    ++items_in_order;\n    printf(\"Menu: \\n\\n\");\n</code></pre>\n\n<p>and\n change this</p>\n\n<pre><code>    case 21:\n        printf(\"Than you for ordering at delTaco Restaurant! \\n\");\n        break;\n    default:\n        printf(\"*** Error:  This is not on the menu. \\n\");\n        break;\n    }\n\n    printf(\"Total so far: Rs %.2lf\\n\\n\", totalPrice);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    case 21:\n        printf(\"Than you for ordering at delTaco Restaurant! \\n\");\n        --items_in_order;\n        break;\n    default:\n        printf(\"*** Error:  This is not on the menu. \\n\");\n        --items_in_order;\n        break;\n    }\n\n    printf(\"Total so far: Rs %.2lf\\n\\n\", totalPrice);\n    printf(\"No. of items far: %d\\n\\n\", items_in_order);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10619380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37c0b3e644c1a755692bd580ffdaa353?s=128&d=identicon&r=PG&f=1", "display_name": "Dhvanil", "link": "https://stackoverflow.com/users/10619380/dhvanil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1541610732, "creation_date": 1541608053, "last_edit_date": 1541608251, "question_id": 53193701, "link": "https://stackoverflow.com/questions/53193701/how-do-i-print-the-number-of-time-a-do-while-loop-is-executed", "title": "How do i print the number of time a do while loop is executed?", "body": "<p>I'm developing a program for a restaurant in C:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define CAPPUCCINO_PRICE 129.00\n#define FILTERCOFFEE_PRICE 110.00\n#define CAFELATTE_PRICE 128.00\n#define ESPRESSO_PRICE 135.00\n#define MACCHIATO_PRICE 137.00\n#define CAFEMOCHA_PRICE 130.00\n#define VANILLALATTE_PRICE 140.00\n#define ASSAMTEA_PRICE 120.00\n#define MASALACHAI_PRICE 120.00\n#define GREENTEA_PRICE 126.00\n#define LEMONADE_PRICE 147.00\n#define COOLBLUE_PRICE 154.00\n#define CAFEFRAPPE_PRICE 161.00\n#define VEGANSHAKE_PRICE 198.00\n#define COLDCOFFEE_PRICE 161.00\n#define CRUNCHYFRAPPE_PRICE 155.00\n#define TOFFEESMOOTHIE_PRICE 182.00\n#define DETOXWATER_PRICE 127.00\n#define BLUESPARKLER_PRICE 161.00\n#define VIRGINMOJITO_PRICE 198.00\nint main()\n{\n\n    int choice = 0;\n    double totalPrice = 0;\n\n    printf(\"Welcome to delTaco restaurant!\\n\");\n    printf(\"May I take your order? \\n\\n\");\n\n    do{\n        printf(\"Menu: \\n\\n\");\n        printf(\"1.  Cappuccino       Rs %.2lf \\n\", CAPPUCCINO_PRICE);\n        printf(\"2.  Filter Cofee     Rs %.2lf \\n\", FILTERCOFFEE_PRICE);\n        printf(\"3.  Cafe Latte       Rs %.2lf \\n\", CAFELATTE_PRICE);\n        printf(\"4.  Espresso         Rs %.2lf \\n\", ESPRESSO_PRICE);\n        printf(\"5.  Macchiato        Rs %.2lf \\n\", MACCHIATO_PRICE);\n        printf(\"6.  Cafe Mocha       Rs %.2lf \\n\", CAFEMOCHA_PRICE);\n        printf(\"7.  Vanilla Latte    Rs %.2lf \\n\", VANILLALATTE_PRICE);\n        printf(\"8.  Assam Tea        Rs %.2lf \\n\", ASSAMTEA_PRICE);\n        printf(\"9.  Masala Chai      Rs %.2lf \\n\", MASALACHAI_PRICE);\n        printf(\"10. Green Tea        Rs %.2lf \\n\", GREENTEA_PRICE);\n        printf(\"11. Lemonade         Rs %.2lf \\n\", LEMONADE_PRICE);\n        printf(\"12. Cool Blue        Rs %.2lf \\n\", COOLBLUE_PRICE);\n        printf(\"13. Cafe Frappe      Rs %.2lf \\n\", CAFEFRAPPE_PRICE);\n        printf(\"14. Vegan Shake      Rs %.2lf \\n\", VEGANSHAKE_PRICE);\n        printf(\"15. Cold Coffee      Rs %.2lf \\n\", COLDCOFFEE_PRICE);\n        printf(\"16. Crunchy Frappe   Rs %.2lf \\n\", CRUNCHYFRAPPE_PRICE);\n        printf(\"17. Toffee Smoothie  Rs %.2lf \\n\", TOFFEESMOOTHIE_PRICE);\n        printf(\"18. Detox Water      Rs %.2lf \\n\", DETOXWATER_PRICE);\n        printf(\"19. Blue Sparkler    Rs %.2lf \\n\", BLUESPARKLER_PRICE);\n        printf(\"20. Virgin Mojito    Rs %.2lf \\n\", VIRGINMOJITO_PRICE);\n        printf(\"21. Exit\\n\\n\");\n        printf(\"Enter an item: \");\n        scanf(\"%i\", &amp;choice);\n\n        switch(choice){\n        case 1:\n            totalPrice += CAPPUCCINO_PRICE;\n            break;\n        case 2:\n            totalPrice += FILTERCOFFEE_PRICE;\n            break;\n        case 3:\n            totalPrice += CAFELATTE_PRICE;\n            break;\n        case 4:\n            totalPrice += ESPRESSO_PRICE;\n            break;\n        case 5:\n            totalPrice += MACCHIATO_PRICE;\n            break;\n        case 6:\n            totalPrice += CAFEMOCHA_PRICE;\n            break;\n        case 7:\n            totalPrice += VANILLALATTE_PRICE;\n            break;\n        case 8:\n            totalPrice += ASSAMTEA_PRICE;\n            break;\n        case 9:\n            totalPrice += MASALACHAI_PRICE;\n            break;\n        case 10:\n            totalPrice += GREENTEA_PRICE;\n            break;\n        case 11:\n            totalPrice += LEMONADE_PRICE;\n            break;\n        case 12:\n            totalPrice += COOLBLUE_PRICE;\n            break;\n        case 13:\n            totalPrice += CAFEFRAPPE_PRICE;\n            break;\n        case 14:\n            totalPrice += VEGANSHAKE_PRICE;\n            break;\n        case 15:\n            totalPrice += COLDCOFFEE_PRICE;\n            break;\n        case 16:\n            totalPrice += CRUNCHYFRAPPE_PRICE;\n            break;\n        case 17:\n            totalPrice += TOFFEESMOOTHIE_PRICE;\n            break;\n        case 18:\n            totalPrice += DETOXWATER_PRICE;\n            break;\n        case 19:\n            totalPrice += BLUESPARKLER_PRICE;\n            break;\n        case 20:\n            totalPrice += VIRGINMOJITO_PRICE;\n            break;\n        case 21:\n            printf(\"Than you for ordering at delTaco Restaurant! \\n\");\n            break;\n        default:\n            printf(\"*** Error:  This is not on the menu. \\n\");\n            break;\n        }\n\n        printf(\"Total so far: Rs %.2lf\\n\\n\", totalPrice);\n\n    } while (choice != 21);\n\n    printf(\"Your order is Rs %.2lf \\n\\n\", totalPrice);\n    printf(\"Thank you for coming to delTaco Restaurant.\\n\");\n    printf(\"Have a nice day!.\\n\\n\");\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>The user has to enter a digit defined to a food item, as soon as he presses enter, the total amount for the food item is displayed, but it doesnt show the number of items selected, </p>\n\n<p><a href=\"https://i.stack.imgur.com/VGnqk.png\" rel=\"nofollow noreferrer\">Image 1 shows the interface</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/axyBW.png\" rel=\"nofollow noreferrer\">Image 2 shows the total amount calculated</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ZlTCT.png\" rel=\"nofollow noreferrer\">In image 3, i tried calculating the number of items selected but failed.</a></p>\n\n<p>How can i do that?</p>\n"}, {"tags": ["c", "pointers", "struct", "crash"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541607688, "post_id": 53193516, "comment_id": 93275938, "body": "<code>&amp;c</code> is a pointer to <code>cane[20]</code>. <code>cane *c[20]</code> is an array of 20 pointers to <code>cane</code>."}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 1, "creation_date": 1541607704, "post_id": 53193516, "comment_id": 93275949, "body": "With arrays in <code>C</code> the array name <code>c</code> is already a pointer so there&#39;s no need to pass <code>&amp;c</code> to <code>leggi(...)</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1541607732, "post_id": 53193516, "comment_id": 93275960, "body": "GCC says: <code>error: passing argument 1 of \u2018leggi\u2019 from incompatible pointer type [-Werror=incompatible-pointer-types]</code> \u2014\u2014 <code>leggi(&amp;c);</code>  \u2014\u2014 <code>note: expected \u2018cane **\u2019 {aka \u2018struct cane **\u2019} but argument is of type \u2018cane (*)[20]\u2019 {aka \u2018struct cane (*)[20]\u2019}</code>"}, {"owner": {"reputation": 15, "user_id": 10502114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q6Pj8Uetqm4/AAAAAAAAAAI/AAAAAAAAAd8/nAVwxEiSnM4/photo.jpg?sz=128", "display_name": "orion", "link": "https://stackoverflow.com/users/10502114/orion"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1541608049, "post_id": 53193516, "comment_id": 93276146, "body": "right thanks! @cleblanc"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 2, "creation_date": 1541608201, "post_id": 53193516, "comment_id": 93276227, "body": "@cleblanc <code>c</code> is <i>not</i> a pointer. But it does decay to a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541608141, "post_id": 53193664, "comment_id": 93276197, "body": "Why the parentheses in <code>&amp;(c[i].a)</code>?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541608193, "post_id": 53193664, "comment_id": 93276223, "body": "@JonathanLeffler They are not necessary, but i thought it is maybe clearer to read."}], "tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": true, "score": 3, "last_activity_date": 1541607932, "creation_date": 1541607932, "answer_id": 53193664, "question_id": 53193516, "link": "https://stackoverflow.com/questions/53193516/scanf-of-struct-makes-program-crash/53193664#53193664", "title": "scanf of struct makes program crash", "body": "<p>You pass the wrong type to the function.</p>\n\n<p>If you want to pass an array to a function the array name decays to a pointer to its first element, therefore the argument is only a pointer to the type:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct cane{\n    int a;\n}cane;\n\nvoid leggi(cane *c){\n    int i;\n    for(i=0;i&lt;5;i++)\n        scanf(\"%d\", &amp;(c[i].a) );\n}\n\nint main(){\n    int i;\n    cane c[20];\n\n    leggi(c);\n\n    for(i=0;i&lt;5;i++)\n        printf(\"%d\",c[i].a);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1541608646, "last_edit_date": 1541608646, "creation_date": 1541607990, "answer_id": 53193681, "question_id": 53193516, "link": "https://stackoverflow.com/questions/53193516/scanf-of-struct-makes-program-crash/53193681#53193681", "title": "scanf of struct makes program crash", "body": "<p>The type of <code>&amp;c</code> is <code>cane (*)[20]</code> i.e. a pointer to an array. You've declared the argument of the function to be <code>cane *[20]</code> which is (as a function argument) a <code>cane**</code> which is a pointer to a pointer.</p>\n\n<p>You may have intended to pass a pointer to an element of the array instead:</p>\n\n<pre><code>void leggi(cane *c)\n    // ...\n    scanf(\"%d\", &amp;c[i].a );\n\n//\nleggi(c);\n</code></pre>\n\n<p>Or possibly you really intended to pass a pointer to the array instead:</p>\n\n<pre><code>void leggi(cane (*c)[20])\n    scanf(\"%d\", &amp;(*c)[i].a )\n\n//\nleggi(&amp;c);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10502114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q6Pj8Uetqm4/AAAAAAAAAAI/AAAAAAAAAd8/nAVwxEiSnM4/photo.jpg?sz=128", "display_name": "orion", "link": "https://stackoverflow.com/users/10502114/orion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53193664, "answer_count": 2, "score": 0, "last_activity_date": 1541608646, "creation_date": 1541607487, "last_edit_date": 1541607595, "question_id": 53193516, "link": "https://stackoverflow.com/questions/53193516/scanf-of-struct-makes-program-crash", "title": "scanf of struct makes program crash", "body": "<p>this is the code. the function \"leggi\" is supposed to read the value of c[i].a but when I type the first number in the console the program crashes.\nIt's probably a pointers issue but i can't figure it out</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct cane{\n    int a;\n}cane;\n\nvoid leggi(cane *c[20]){\n    int i;\n    for(i=0;i&lt;5;i++)\n        scanf(\"%d\", &amp;c[i]-&gt;a );\n}\n\nint main(){\n    int i;\n    cane c[20];\n\n    leggi(&amp;c);\n\n    for(i=0;i&lt;5;i++)\n        printf(\"%d\",c[i].a);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "signals", "parent-child"], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1541615597, "creation_date": 1541615597, "answer_id": 53195663, "question_id": 53193465, "link": "https://stackoverflow.com/questions/53193465/signal-from-parent-to-its-child-processes-in-linux/53195663#53195663", "title": "Signal from parent to its child processes in Linux", "body": "<p>the following proposed code::</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>performs the desired functionality</li>\n<li>properly checks for errors</li>\n<li>uses proper variable typing</li>\n<li>eliminates the 'magic' numbers by giving them meaningful names</li>\n</ol>\n\n<p>and now the proposed code:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;wait.h&gt;\n\n\n#define BUF_SIZE     100\n#define NUM_CHILDREN 2\n\n\nvoid my_handler(int signo);\n\nint main( void )\n{\n    //signal(SIGCHLD,my_handler);\n    pid_t pid[ NUM_CHILDREN ] = {0};\n    char buffer[ BUF_SIZE +1];\n\n    for ( int i=0; i&lt;NUM_CHILDREN; i++ )\n    {\n        if((pid[i]=fork())==0)\n        { // then child\n            signal(SIGUSR1,my_handler);\n            int fd;\n            ssize_t nbyte;\n            pause();\n\n            if(i==0)\n            {\n                if( (fd=open(\"child1.txt\",O_RDONLY) ) == -1 )\n                {\n                    perror( \"open to read child1.txt failed\" );\n                    exit( EXIT_FAILURE );\n                }\n            }\n\n            else\n            {\n                if( (fd=open(\"child2.txt\",O_RDONLY) ) == -1 )\n                {\n                    perror( \"open to read child2.txt failed\" );\n                    exit( EXIT_FAILURE );\n                }\n            }\n\n            if( (nbyte=read(fd,buffer,100) ) ==-1 || nbyte == 0 )\n            {\n                perror( \"read failed\" );\n                exit( EXIT_FAILURE );\n            }\n\n            buffer[nbyte]='\\0';\n\n            write(STDOUT_FILENO,buffer,strlen(buffer));\n            fflush( stdout );\n            close( fd ); \n\n            exit( EXIT_SUCCESS );\n        }\n\n        else if( pid[i] &gt; 0 )\n        { // then parent \n            sprintf( buffer,\"Child %d PID %d\\n\", i, (int)pid[i] );\n            write( STDOUT_FILENO, buffer, strlen(buffer) );\n            fflush( stdout );\n        }\n\n        else\n        { // fork failed\n            perror( \"fork failed\" );\n        }\n    }\n\n    sleep(1);  // allow all child processes to be ready for signal\n\n    if( pid[0] &gt; 0 )\n    {\n        kill(pid[0],SIGUSR1); //send a signal to unpause child 0\n        wait( NULL ); \n    }\n\n    if( pid[1] &gt;  0 )\n    {\n        kill(pid[1],SIGUSR1); //unpause child 1\n        wait( NULL ); \n    }\n}\n\n\nvoid my_handler(int signo)\n{\n    (void)signo;\n}\n</code></pre>\n\n<p>contents of child1.txt   (note I used all lower case for the file name)</p>\n\n<p>123</p>\n\n<p>contents of child2.txt   (note I used all lower case for the file name)</p>\n\n<p>456</p>\n\n<p>a run of the code results in:</p>\n\n<pre><code>Child 0 6630\nChild 1 6631\n123\n\n456\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7649252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42c5fb50c1f9f2f0c68eb416da159ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Diablo3000", "link": "https://stackoverflow.com/users/7649252/diablo3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53195663, "answer_count": 1, "score": 2, "last_activity_date": 1541615597, "creation_date": 1541607283, "last_edit_date": 1541610599, "question_id": 53193465, "link": "https://stackoverflow.com/questions/53193465/signal-from-parent-to-its-child-processes-in-linux", "title": "Signal from parent to its child processes in Linux", "body": "<p>I will write shortly what i want to do with my code and what's the real output.\nI have a parent process which creates two child processes. Each of the two process read 100 bytes from a different file, child 1 read from \"child1.txt\", child 2 read from \"child2.txt\". I want to force to execute child 2 before child 1 through the use of signals.</p>\n\n<p>I created the two child process and paused them (pause end when they receive a signal). So I sent a signal to the child 2, then i sent a signal to the child 1. In this way I expect they will do what i want but they don't (it shows always child1.txt content)and i do not understand why.</p>\n\n<p>This is the code</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;wait.h&gt;\n\nvoid my_handler(int signo);\n\nint main(int argc, char *argv[]){\n    signal(SIGCHLD,my_handler);\n    pid_t pid[2]; //here is where I save child pid\n    char buffer[100];\n    for (int i=0;i&lt;2;i++){\n        if((pid[i]=fork())==0){\n            signal(SIGUSR1,my_handler);\n            int fd,nbyte;\n            pause();\n            if(i==0){\n                fd=open(\"Child1.txt\",O_RDONLY);\n            }else{\n                fd=open(\"Child2.txt\",O_RDONLY);\n            }\n            nbyte=read(fd,buffer,100);\n            buffer[nbyte-1]='\\0';\n            write(STDOUT_FILENO,buffer,strlen(buffer));\n            exit(1);\n        }\n        sprintf(buffer,\"Child %d\\n\",(int)pid[i]);\n        write(STDOUT_FILENO,buffer,strlen(buffer));\n    }\n    kill(pid[1],SIGUSR1); //I send a signal to unpause child2\n    wait(NULL); // wait child 2 to terminate\n    kill(pid[0],SIGUSR1); //unpause child 1\n    wait(NULL); // wait child 1 to terminate\n\n}\n\n\nvoid my_handler(int signo){\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541607361, "post_id": 53193417, "comment_id": 93275774, "body": "Please show how you call <code>stringICmp</code>, the origin of the problem is most likely <i>there</i>. Also a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful here. And what is <code>stringCmp</code>?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1541607451, "post_id": 53193417, "comment_id": 93275803, "body": "Also avoid magic numbers such as <code>65</code>, write  <code>&#39;A&#39;</code>  instead of <code>65</code> etc."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541607530, "post_id": 53193417, "comment_id": 93275850, "body": "You also should consider functions like <a href=\"https://www.programiz.com/c-programming/library-function/ctype.h/tolower\" rel=\"nofollow noreferrer\">tolower</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541607650, "post_id": 53193417, "comment_id": 93275905, "body": "Another hint: <code>char *s1cpy = s1</code> isn&#39;t making a copy of the string, it just copies the <i>pointer</i>  to the string which is pointless here."}, {"owner": {"reputation": 23, "user_id": 10619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc20781ccdcd0539f8cc3df6515b708e?s=128&d=identicon&r=PG&f=1", "display_name": "user316860", "link": "https://stackoverflow.com/users/10619356/user316860"}, "edited": false, "score": 0, "creation_date": 1541607944, "post_id": 53193417, "comment_id": 93276085, "body": "When I used tolower(), I&#39;ve also got the same Error."}, {"owner": {"reputation": 23, "user_id": 10619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc20781ccdcd0539f8cc3df6515b708e?s=128&d=identicon&r=PG&f=1", "display_name": "user316860", "link": "https://stackoverflow.com/users/10619356/user316860"}, "edited": false, "score": 0, "creation_date": 1541608212, "post_id": 53193417, "comment_id": 93276233, "body": "And yeah, I know that <code>char *s1cpy = s1;</code> just makes a copy of the pointer. I need the starting address at the end. Or not? I&#39;m a bit confused now."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541609042, "post_id": 53193417, "comment_id": 93276696, "body": "The actual reason why you&#39;ve got the SIGSEGV is explained in <a href=\"https://stackoverflow.com/q/164194/898348\">this SO article</a>. Please <a href=\"https://stackoverflow.com/posts/53193417/edit\">edit</a> your question and show also <code>stringCmp</code>"}, {"owner": {"reputation": 23, "user_id": 10619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc20781ccdcd0539f8cc3df6515b708e?s=128&d=identicon&r=PG&f=1", "display_name": "user316860", "link": "https://stackoverflow.com/users/10619356/user316860"}, "edited": false, "score": 0, "creation_date": 1541609550, "post_id": 53193417, "comment_id": 93276979, "body": "Okay, thank you guys for your help."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1541609847, "post_id": 53193417, "comment_id": 93277138, "body": "Hint: throw away the <code>stringICmp</code> function and rewrite it from scratch based on <code>stringCmp</code>."}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1541610995, "post_id": 53193417, "comment_id": 93277748, "body": "+1 to @Jabberwocky &#39;s hint to base <code>stringICmp</code> on your existing <code>stringCmp</code>; one small change is all you need to make the comparison case-insensitive; I see your motivation to re-use <code>stringCmp</code> from inside <code>stringICmp</code>, but the string duplication and manipulation is costing you more in terms of code complexity than having a nearly-identical <code>stringICmp</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 0, "last_activity_date": 1541697080, "last_edit_date": 1541697080, "creation_date": 1541610504, "answer_id": 53194402, "question_id": 53193417, "link": "https://stackoverflow.com/questions/53193417/stringicompare-with-char-pointers-not-working/53194402#53194402", "title": "StringICompare with char Pointers not working", "body": "<p>the reason your code is failing is because you are trying to modify a character constant</p>\n\n<pre><code>int main() {\n    char *str1 = \"Hallo\";\n\n..\nint sicmp = stringICmp(str1, cmpstring);\n..\n\nint stringICmp(char *s1, char *s2) {\n    char *s1cpy = s1, *s2cpy = s2;\n    while(*s1cpy != '\\0' &amp;&amp; *s2cpy != '\\0'){\n        if(*s1cpy &gt;= 65 &amp;&amp; *s1cpy &lt;= 90) {\n            (*s1cpy) += 32; &lt;&lt;&lt;&lt; right here you try to overwrite your inpout\n</code></pre>\n\n<p>THis is not allowed. You should operate on a copy of the string (also you are destroying your input, not a polite thing to do)</p>\n\n<p>Use strdup to copy the input string.</p>\n\n<pre><code>int stringICmp(char *s1, char *s2) {\n    char *s1cpy = strdup(s1), *s2cpy = strdup(s2);\n    while(*s1cpy != '\\0' &amp;&amp; *s2cpy != '\\0'){\n        if(*s1cpy &gt;= 65 &amp;&amp; *s1cpy &lt;= 90) {\n            (*s1cpy) += 32;\n....\nfree(s1cpy);\nfree(s2cpy);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc20781ccdcd0539f8cc3df6515b708e?s=128&d=identicon&r=PG&f=1", "display_name": "user316860", "link": "https://stackoverflow.com/users/10619356/user316860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53194402, "answer_count": 1, "score": 0, "last_activity_date": 1541697080, "creation_date": 1541607154, "last_edit_date": 1541609298, "question_id": 53193417, "link": "https://stackoverflow.com/questions/53193417/stringicompare-with-char-pointers-not-working", "title": "StringICompare with char Pointers not working", "body": "<p>I have a problem with this code.\nI want to make stringICmp with two char pointers, but I get an error after the first if (<strong>Program received SIGSEGV, Segmentation fault.</strong>).\nI use Windows 10 with GDB Compiler.\nI googled SIGSEGV, but I've no clue how to solve that correctly, thanks for help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX_STR 20\n\nint stringICmp(char *s1, char *s2);\n\nint main() {\n    char *str1 = \"Hallo\";\n    char cmpstring[MAX_STR] = \"HaLlo\";\n\n    int sicmp = stringICmp(str1, cmpstring);\n    printf(\"\\n\\nString Compare non case-sensitive:\\n\");\n    printStringCmp(sicmp);\n}\nvoid printStringCmp(int scmp) {\n    printf(\"\\nThe String Compare Result is: %d\\n\", scmp);\n    if(scmp &gt; 0) {\n        printf(\"String 1 is bigger than String 2.\");\n    } else if(scmp &lt; 0) {\n        printf(\"String 1 is smaller than String 2.\");\n    } else if(scmp == 0) {\n        printf(\"String 1 is equal to String 2.\");\n    }\n}\nint stringCmp(char *s1, char *s2) {\n    while(*s1 == *s2 &amp;&amp; *s1 != '\\0' &amp;&amp; *s2 != '\\0') {\n        s1++;\n        s2++;\n    }\n    if(*s1 &gt; *s2) {\n        return 1;\n    } else if(*s1 &lt; *s2) {\n        return -1;\n    }\n    return 0;\n}\nint stringICmp(char *s1, char *s2) {\n    char *s1cpy = s1, *s2cpy = s2;\n    while(*s1cpy != '\\0' &amp;&amp; *s2cpy != '\\0'){\n        if(*s1cpy &gt;= 65 &amp;&amp; *s1cpy &lt;= 90) {\n            (*s1cpy) += 32;\n        }\n        if(*s2cpy &gt;= 65 &amp;&amp; *s2cpy &lt;= 90) {\n            (*s2cpy) += 32;\n        }\n        s1cpy++;\n        s2cpy++;\n    }\n    s1 = s1cpy;\n    s2 = s2cpy;\n\n    int scmp = stringCmp(s1, s2);\n    return scmp;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "for-loop"], "comments": [{"owner": {"reputation": 971, "user_id": 10335421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZnBu.jpg?s=128&g=1", "display_name": "Ali Hussam", "link": "https://stackoverflow.com/users/10335421/ali-hussam"}, "edited": false, "score": 1, "creation_date": 1541606710, "post_id": 53193229, "comment_id": 93275373, "body": "Be specific on what you are trying to ask."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 4, "creation_date": 1541607131, "post_id": 53193229, "comment_id": 93275630, "body": "<code>for (i=1;i&gt;=1;i++)</code> looks like an awful loop."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1541607275, "post_id": 53193229, "comment_id": 93275720, "body": "Even if you break out of the loop, you should make something like <code>while(1)</code> or <code>for(;;)</code> then. <code>i</code> might overflow otherwise at some point."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10619111, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1KW4nU1XaTA/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDJFImmgBX8ijgKIEG3QawrQ_9fxQ/mo/photo.jpg?sz=128", "display_name": "buttercup Thereese", "link": "https://stackoverflow.com/users/10619111/buttercup-thereese"}, "edited": false, "score": 0, "creation_date": 1541609454, "post_id": 53193819, "comment_id": 93276924, "body": "Thanks  That was a huge help"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1541608435, "creation_date": 1541608435, "answer_id": 53193819, "question_id": 53193229, "link": "https://stackoverflow.com/questions/53193229/how-to-keep-the-running-total/53193819#53193819", "title": "how to keep the running total", "body": "<p>You're already keeping track of the running total in <code>sum</code>.  You just need to use that:</p>\n\n<pre><code>float sum = 0;\n...\n\nprintf(\"The total balance you have for now is: %.2f\\n\",sum ); //\nif (sum &lt;=5000)\n{\n    printf(\"\\nCongratulations!\\n You only have %.2f debt left\\n\",sum );\n}\nelse\n{\n    printf(\"\\nWork harder because out of DEBT is out of DANGER\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10619111, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1KW4nU1XaTA/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDJFImmgBX8ijgKIEG3QawrQ_9fxQ/mo/photo.jpg?sz=128", "display_name": "buttercup Thereese", "link": "https://stackoverflow.com/users/10619111/buttercup-thereese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 53193819, "answer_count": 1, "score": -2, "last_activity_date": 1541608435, "creation_date": 1541606536, "last_edit_date": 1541607607, "question_id": 53193229, "link": "https://stackoverflow.com/questions/53193229/how-to-keep-the-running-total", "title": "how to keep the running total", "body": "<p><a href=\"https://i.stack.imgur.com/49P9r.png\" rel=\"nofollow noreferrer\">here is the picture of result of this program</a>/My question is about how to keep the running total in loop?\nbecause in my program, the total debt would only based on the last input of the user before the loop gets terminated instead getting the total debt from all creditors</p>\n\n<pre><code>/This program is for calculating the total debt\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    float cb,ir,si,totaldebt; //local declaration\n    int time,i,sum=0;\n    char c[25];\n    printf(\"------------Welcome to Debt Management System-------------\");\n    printf(\"\\nNOTE:\\nDear users,\\n\\tYou have to enter the creditor's name if you have a debt. But if you have nothing debt left, just enter none\");\n    for (i=1;i&gt;=1;i++)\n    {\n        printf(\"\\n%d)Name of the creditor: \",i); \n//the user inputs the name of the creditor\n        scanf(\"%s\", c);\n        if (strcmp(c, \"none\") == 0) // condition wherein if the user inputs \"none\" in the name of the creditor, the loop will terminate\n        {\n            break;\n        }\n        printf(\"Enter your current balance: \");//the user inputs current balance from the said creditor\n        scanf(\"%f\",&amp;cb);\n        printf(\"Enter its interest rate: \"); //the user inputs the interest rate of of the debt\n        scanf(\"%f\",&amp;ir);\n        printf(\"Enter time for the loan: \");//the user inputs month\n        scanf(\"%d\",&amp;time);\n        si=cb*ir*time/100;//simple interest\n        totaldebt=si+cb; //simple interest + current balance\n        sum+=totaldebt;\n    }\n    printf(\"The total balance you have for now is: %.2f\\n\",totaldebt); //\n    if (totaldebt&lt;=5000)\n    {\n        printf(\"\\nCongratulations!\\n You only have %.2f debt left\\n\",totaldebt);\n    }\n    else\n    {\n        printf(\"\\nWork harder because out of DEBT is out of DANGER\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "typedef"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1541606464, "post_id": 53193116, "comment_id": 93275223, "body": "typedef creates a type SOMESTRUCT.  You declare an instance struct1.  You set the function in struct1 and then call it."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1541606775, "post_id": 53193116, "comment_id": 93275411, "body": "The answer beneith this post might help <a href=\"https://stackoverflow.com/questions/1591361/understanding-typedefs-for-function-pointers-in-c\" title=\"understanding typedefs for function pointers in c\">stackoverflow.com/questions/1591361/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 1, "last_activity_date": 1541606743, "creation_date": 1541606743, "answer_id": 53193291, "question_id": 53193116, "link": "https://stackoverflow.com/questions/53193116/function-typedef-and-call-to-function-from-struct-in-c/53193291#53193291", "title": "function typedef and call to function from struct in C", "body": "<p>The line...</p>\n\n<pre><code>typedef void (foo2)(int var1, int var2); // what is this exactly?\n</code></pre>\n\n<p>...declares a new type, <code>foo2</code>, as a function that takes two <code>int</code> parameters and returns void.</p>\n\n<p>Later in the code, the address of function <code>foo1</code> (which matches the function signature) is stored in the <code>somefunc</code> member of <code>struct1</code>, and then it's called. with parameters 1 and 5.</p>\n"}, {"tags": [], "owner": {"reputation": 1025, "user_id": 1683793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384cc6ed9450635fc4189e1a5a840dd5?s=128&d=identicon&r=PG", "display_name": "user1683793", "link": "https://stackoverflow.com/users/1683793/user1683793"}, "is_accepted": false, "score": 0, "last_activity_date": 1541607704, "creation_date": 1541607704, "answer_id": 53193592, "question_id": 53193116, "link": "https://stackoverflow.com/questions/53193116/function-typedef-and-call-to-function-from-struct-in-c/53193592#53193592", "title": "function typedef and call to function from struct in C", "body": "<p>Tim Randall's explanation is pretty good but let me add this.</p>\n\n<p>The <code>typedef</code> keyword defines a new data type that can be used in place of its original definitions.  If you did not want to use <code>typedef</code>, the structure could have been defined as:</p>\n\n<pre><code>typedef struct somestruct{\n    void(*somefunc)(int a,int b);\n}SOMESTRUCT;\n</code></pre>\n\n<p>In this case, we don't save much but if we had more than one function pointer, the use of the <code>typedef</code> saves quite a bit and makes the program easier to read.</p>\n"}], "owner": {"reputation": 67, "user_id": 9063916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34074635e7dc40e63babdc90c2dc48d1?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Surizon", "link": "https://stackoverflow.com/users/9063916/daniel-surizon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53193291, "answer_count": 2, "score": 1, "last_activity_date": 1541607704, "creation_date": 1541606264, "question_id": 53193116, "link": "https://stackoverflow.com/questions/53193116/function-typedef-and-call-to-function-from-struct-in-c", "title": "function typedef and call to function from struct in C", "body": "<p>I'm trying to figure out the following code.\nEspecially the part that relates to the function typedef.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid foo1(int var1, int var2); // foo1 decleration\ntypedef void (foo2)(int var1, int var2); // what is this exactly?\n\ntypedef struct somestruct{\n    foo2* somefunc;\n}SOMESTRUCT;\n\nint main()\n{\n    SOMESTRUCT struct1;\n    struct1.somefunc = &amp;foo1; \n    struct1.somefunc(1,5);\n    return 0;\n}\n\nvoid foo1(int var1, int var2){\n    printf(\"this is function inside struct var1 = %d var2 = %d\",var1, var2);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1541606217, "post_id": 53193024, "comment_id": 93275105, "body": "a <code>char[n][m]</code> is not synonymous with <code>char**</code>. Whatever tutorial or book said otherwise... burn it."}, {"owner": {"reputation": 883, "user_id": 10096436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKBUJ.png?s=128&g=1", "display_name": "Micromuncher", "link": "https://stackoverflow.com/users/10096436/micromuncher"}, "edited": false, "score": 0, "creation_date": 1541606733, "post_id": 53193024, "comment_id": 93275389, "body": "This is pretty unsafe.  You&#39;ve made a 2d array of char, and then you call scanf on a string. This is asking for segfault overruns.  And As Whoz said, char[][] is not char**."}], "answers": [{"tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": 1, "last_activity_date": 1541606743, "creation_date": 1541606743, "answer_id": 53193289, "question_id": 53193024, "link": "https://stackoverflow.com/questions/53193024/passing-a-2d-array-with-pointers-and-accessing-it-gives-segmentation-fault/53193289#53193289", "title": "Passing a 2d array with pointers and accessing it gives segmentation fault", "body": "<p>You should use char <code>p[2][10]</code> not <code>char** p</code></p>\n\n<p>The following <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid ArrPrintMatrix(char p[2][10], int n) {\n    int i;\n    for (i = 0; i &lt; n; ++i)\n        printf(\"%s\\n\",p[i]);\n}\n\nint main() {\n    int i;\n    char c[2][10];\n    puts(\"enter two strings\");\n    for(i=0;i&lt;2;i++)\n        scanf(\"%s\",c[i]);\n\n    ArrPrintMatrix(c,2);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 1, "last_activity_date": 1541649845, "last_edit_date": 1541649845, "creation_date": 1541608769, "answer_id": 53193936, "question_id": 53193024, "link": "https://stackoverflow.com/questions/53193024/passing-a-2d-array-with-pointers-and-accessing-it-gives-segmentation-fault/53193936#53193936", "title": "Passing a 2d array with pointers and accessing it gives segmentation fault", "body": "<p>you need to change the type of the p var in the print function, and you should also set the array to zero so if the strings that are printing are less than 10 chars with terminator- garbage values are not displayed.</p>\n\n<pre><code>void ArrPrintMatrix(char p[][10],int n) {\nint i,j;\nfor(i=0;i&lt;n;i++) {\n    for(j=0;j&lt;10;j++) {\n        printf(\"%c \",p[i][j]);\n    }\n  }\n}\n\nint main() {\n int i;\n char c[2][10]= {0};\n puts(\"enter two strings\");\n for(i=0;i&lt;2;i++)\n scanf(\"%s\",c[i]);\n\n ArrPrintMatrix( c,2);\n return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541649845, "creation_date": 1541605970, "question_id": 53193024, "link": "https://stackoverflow.com/questions/53193024/passing-a-2d-array-with-pointers-and-accessing-it-gives-segmentation-fault", "title": "Passing a 2d array with pointers and accessing it gives segmentation fault", "body": "<p>im trying to pass a 2D array from main to a function and trying to print it letter by letter\nbut it keeps giving me segmentation fault</p>\n\n<p>note: the question im trying to solve as mentioned a function with parameter { ArrPrintMatrix(char *(p)[7]) }\nso help me by keeping the above thing in mind</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\nArrPrintMatrix(char **p,int n) {\n    int i,j;\n    for(i=0;i&lt;n;i++) {\n        for(j=0;j&lt;10;j++) {\n            printf(\"%c \",p[i][j]);\n        }\n    }\n}\n\nmain() {\n    int i;\n    char c[2][10];\n    puts(\"enter two strings\");\n    for(i=0;i&lt;2;i++)\n    scanf(\"%s\",c[i]);\n\n    ArrPrintMatrix((char **) c,2);\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "bison", "yacc", "rules"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1541606575, "post_id": 53192991, "comment_id": 93275288, "body": "Please be clearer about how the parse failed to meet your expectations. If the issue you have is that your stack is filled in backwards, that is to be expected because of the order in which the reductions are made."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1541607097, "post_id": 53192991, "comment_id": 93275610, "body": "the problem is that when I use the right recursive rule, the internal array a[2,3] returns 4 dimensions instead of 2. else with left recursive rules both dimension or array are right. ( update question )"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "edited": false, "score": 0, "creation_date": 1541674828, "post_id": 53199107, "comment_id": 93300734, "body": "I have implemented a local stack and now work (right or left recursive ), as you indicated to me, thank you."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 1, "last_activity_date": 1541638604, "last_edit_date": 1541638604, "creation_date": 1541631040, "answer_id": 53199107, "question_id": 53192991, "link": "https://stackoverflow.com/questions/53192991/problem-with-right-recursive-rules-with-bison/53199107#53199107", "title": "Problem with right recursive rules with Bison", "body": "<p>The problem is that you use the global varaibles <code>stackNode</code> and <code>kstack</code> to track argument lists.  This is not reentrant, so when you have nested argument lists, processing the inner list absorbs and corrupts the state of the outer list, resulting in garbage.  This is independent of left- vs right- recursion, though the two cases will show different corruption.</p>\n\n<p>The solution is to not use globals -- return the necessary values in <code>$$</code>:</p>\n\n<pre><code>argList\n    : expr              { $$ = new_empty_deque();\n                          push_back($$, $1);  }\n    | expr ',' argList  { $$ = $3; push_front($$, $1); }\n;   \n</code></pre>\n\n<p>alternately (and superior), use a left-recursive rule:</p>\n\n<pre><code>argList\n    : expr              { $$ = new_empty_deque();\n                          push_back($$, $1);  }\n    | argList ',' expr  { $$ = $1; push_back($$, $3); }\n;   \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 53199107, "answer_count": 1, "score": 0, "last_activity_date": 1541638604, "creation_date": 1541605879, "last_edit_date": 1541607294, "question_id": 53192991, "link": "https://stackoverflow.com/questions/53192991/problem-with-right-recursive-rules-with-bison", "title": "Problem with right recursive rules with Bison", "body": "<p>I have implemented with bison the management of a multidimensional array\nthis piece of code works, using the left recursive rules\nhowever. The manual indicates that it is preferable to use those on the right. link : <a href=\"https://perso.esiee.fr/~najmanl/compil/Bison/bison_toc.html#SEC42\" rel=\"nofollow noreferrer\">Bison Recursive Rules</a></p>\n\n<p>now, however, if I use the right rule, the array is not parsed correctly.\nthe problem is that when I use the right rule, the internal array a[2,3] returns 4 dimensions instead of 2 and the other array x[,] have no dimension.</p>\n\n<p>my question is : why this piece of code does not work with right recursive rule ?</p>\n\n<p>incorrect recursive erroneous rule:</p>\n\n<pre><code>argList\n    : expr              {stackNode [ kstack++ ] = $1 ;  }\n    | argList ',' expr  {stackNode [ kstack++ ] = $3 ;  }\n</code></pre>\n\n<p>sample source:</p>\n\n<pre><code>xy[1, a[2,3] ] =  4  ;\n</code></pre>\n\n<p>grammar of bison:</p>\n\n<pre><code>argList\n    : expr              {stackNode [ kstack++ ] = $1 ;  }\n    | expr ',' argList  {stackNode [ kstack++ ] = $1 ;  }\n;   \n\nstatement                                                \n    : tPV\n    | expr tPV  { $$=$1; } \n;\n\nexpr\n    : tINTEGER                  { $$ = new_tINTEGER ( $1 ) ;    }\n    | tID '[' argList ']'\n    {   \n        void** n=(void**) malloc ( sizeof(void**)*kstack ) ;    \n        for(int j=0,  i=kstack-1    ;   i&gt;=0    ;   i-- )   n[j++] = (void*) stackNode[i] ;\n        $$ = new_tArrayArgList ( $1,kstack,n ) ;\n        kstack=0;\n    }   \n    | expr tEQ      expr            { $$ = new_tBINOP ( tEQ,$1,$3) ;    /*  =   */} \n</code></pre>\n\n<p>reference link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1429794/how-to-build-an-array-with-bison-yacc-and-a-recursive-rule\">How to build an Array with Bison/Yacc and a Recursive Rule</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9198080/left-recursive-rules-in-context-free-grammar\">Left Recursive Rules in Context Free Grammar</a></p>\n\n<p>Regards\nClaudio</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 21, "user_id": 10619093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIz7.png?s=128&g=1", "display_name": "Alexander Brown", "link": "https://stackoverflow.com/users/10619093/alexander-brown"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1541604983, "post_id": 53192675, "comment_id": 93274366, "body": "basically in short, my question is, why is t-&gt;capacity equal to 24 after the append function in main, since the print statement while append is running shows that t-&gt;capacity is 48."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1541605109, "post_id": 53192675, "comment_id": 93274452, "body": "Definitely a duplicate of that @UnholySheep"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1541605487, "post_id": 53192675, "comment_id": 93274662, "body": "In order to modify and pass back a pointer you have to pass the address of the pointer, so change your prototype to **"}, {"owner": {"reputation": 4270, "user_id": 26074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0fe832e8f56443852c5360f14c0b2bac?s=128&d=identicon&r=PG", "display_name": "calandoa", "link": "https://stackoverflow.com/users/26074/calandoa"}, "edited": false, "score": 1, "creation_date": 1541605560, "post_id": 53192675, "comment_id": 93274703, "body": "Note also that there is some memory leak in your code: at the beginning of main(), you assign t and t1 with a malloc, then you overwrite their value with newText(). You should let them uninitialized, or set them to NULL, or call free() before newText()."}, {"owner": {"reputation": 21, "user_id": 10619093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIz7.png?s=128&g=1", "display_name": "Alexander Brown", "link": "https://stackoverflow.com/users/10619093/alexander-brown"}, "edited": false, "score": 1, "creation_date": 1541606533, "post_id": 53192675, "comment_id": 93275256, "body": "thanks for the responses, i am aware that its a similar question but since i am unable to change the function signatures (as this is a practice assignment where the signatures are given and we are only allowed to modify the bodies) i cannot use the answers provided in the other question of changing the function so it takes a pointer to a pointer or so that it returns a pointer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541663865, "post_id": 53192675, "comment_id": 93295146, "body": "the <code>append</code> function should work without calling <code>newText</code>. You&#39;re meant to grow the existing text of <code>t1</code> .   Also the <code>main</code> function has memory leaks since you call <code>malloc</code> unnecessarily."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10619093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIz7.png?s=128&g=1", "display_name": "Alexander Brown", "link": "https://stackoverflow.com/users/10619093/alexander-brown"}, "edited": false, "score": 0, "creation_date": 1541606154, "post_id": 53192744, "comment_id": 93275069, "body": "Oh great now i understand why this happens. Thanks for the response, however, this code is part of a larger assignment program where the function signatures are provided to us and we need to complete the bodies. Hence i am unable to change it so that it returns a text pointer. How would you suggest i fix it?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 21, "user_id": 10619093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIz7.png?s=128&g=1", "display_name": "Alexander Brown", "link": "https://stackoverflow.com/users/10619093/alexander-brown"}, "edited": false, "score": 0, "creation_date": 1541663184, "post_id": 53192744, "comment_id": 93294858, "body": "Alright, I added a solution that lets you append to <code>t1</code> without making a new <code>text</code>."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 1, "last_activity_date": 1541663132, "last_edit_date": 1541663132, "creation_date": 1541605106, "answer_id": 53192744, "question_id": 53192675, "link": "https://stackoverflow.com/questions/53192675/struct-pointer-value-doesnt-change-after-function-call/53192744#53192744", "title": "Struct pointer value doesnt change after function call", "body": "<pre><code> t1 = newText(text);\n</code></pre>\n\n<p>Here you're setting <code>t1</code> to a new <code>text</code>. However, the original <code>text</code> that <code>t1</code> was pointing to doesn't change here. It still points to the same place. The pointer that you passed to the function is a copy of the original pointer, so even though <code>t1</code> points to the new <code>text</code>, the original doesn't.</p>\n\n<p>So when you do the print here</p>\n\n<pre><code>  printf(\"%d\\n\", t-&gt;capacity);\n</code></pre>\n\n<p>You still get the old value for capacity. Or rather, the capacity of the <strong>old</strong> <code>t1</code>. Whereas here</p>\n\n<pre><code>printf(\"%s \\n\", t1-&gt;content);\nprintf(\"%d \\n\", t1-&gt;capacity);\n</code></pre>\n\n<p>You are printing the <code>content</code> and <code>capacity</code> of the new <code>t1</code>, to which you are losing the pointer after the function ends.</p>\n\n<p>You could fix that, for instance, by returning that pointer. Change the signature to</p>\n\n<pre><code>text* append(text *t1, text *t2)\n</code></pre>\n\n<p>And at the end of the function:</p>\n\n<pre><code>return t1;\n</code></pre>\n\n<p>And then you update <code>t1</code>, so change this</p>\n\n<pre><code>append(t, t1);\n</code></pre>\n\n<p>To</p>\n\n<pre><code>t1 = append(t, t1);\n</code></pre>\n\n<p>Also, watch out for memory leaks. As it is now, in <code>append</code>, you're taking the pointers to two valid <code>text</code> and you're allocating a new <code>text</code>, and at the end of the function, you still only have two pointers to <code>text</code> and you didn't <code>free</code> any. This shows us that one was leaked.</p>\n\n<p>Edit:</p>\n\n<p>If you can't change the signature of the function, then you can't return a new <code>text</code> or pass one out using a double pointer. In this case, I would suggest not making a new <code>text</code> and just changing <code>t1</code> instead. Using <code>realloc</code> you can change the size of the buffer (in reality, it might just allocate a new buffer, copy over the data and free the old buffer) so you can append the content of <code>t2</code>.</p>\n\n<pre><code>void append(text *t1, text *t2) {\n    int length1 = strlen(t1-&gt;content);\n    int length2 = strlen(t2-&gt;content);\n    int lengths = length1 + length2;                // calculate the required length. You can change this to have some \"reserve\" such as in newText. In this example, it will be 24\n\n    t1-&gt;content = realloc(t1-&gt;content, lengths);        // set the correct size for the buffer\n\n    for (int i = length1; i &lt; length1 + length2; i++) {\n        t1-&gt;content[i] = t2-&gt;content[i - length1];\n        t1-&gt;content[i + 1] = '\\0';\n    }   // append the second string\n\n    t1-&gt;capacity = lengths;\n    printf(\"%s \\n\", t1-&gt;content);\n    printf(\"%d \\n\", t1-&gt;capacity);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "is_accepted": false, "score": 1, "last_activity_date": 1600445175, "last_edit_date": 1600445175, "creation_date": 1541605732, "answer_id": 53192937, "question_id": 53192675, "link": "https://stackoverflow.com/questions/53192675/struct-pointer-value-doesnt-change-after-function-call/53192937#53192937", "title": "Struct pointer value doesnt change after function call", "body": "<p>In order to modify a pointer in a function and pass it back you have to pass the address of the pointer for example:</p>\n<pre><code>void test(char** ppTest) {\n    //Is anything valid passed?\n    if ( ppTest == NULL ) {\n        return;\n    }\n    *ppTest = &quot;Hello World&quot;;\n}\n\nint main(void) {\n    char* pTest = NULL;\n    printf(&quot;Before function call pTest: %s\\n&quot;, (pTest == NULL) ? &quot;NULL&quot; : pTest);\n    test(&amp;pTest); // Must pass the address of the pointer\n    printf(&quot;After function call pTest: %s\\n&quot;, (pTest == NULL) ? &quot;NULL&quot; : pTest);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10619093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIz7.png?s=128&g=1", "display_name": "Alexander Brown", "link": "https://stackoverflow.com/users/10619093/alexander-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1600445175, "creation_date": 1541604866, "last_edit_date": 1541606692, "question_id": 53192675, "link": "https://stackoverflow.com/questions/53192675/struct-pointer-value-doesnt-change-after-function-call", "title": "Struct pointer value doesnt change after function call", "body": "<p>EDIT*: I am aware there are similar questions, but since this is a practice assignment, the function signatures are given and i am only allowed to change the function bodies. Hence i cannot change the function parameters or the return types as say the answers on similar threads. Thanks in advance!</p>\n\n<p>i am really confused about a program i am writing. I am basically writing a function that takes two pointers to structures, the structures have an int component and a character array component. The function appends the two character array components to return a struct (something like the strcat). The thing is, while the array part of the struct get updated by the function, the int part does not. Can anyone explain why? The function newText creates a new struct text and sets the array of the struct as the parameter of the function. It also sets the capacity = 24. If the length of the string parameter is larger than 24, it doubles the capacity until it fits. The append function appends the two strings, then calls newText with the new appended string and sets the t1 equal to the return value of newText. I have print statements at the end of the append function to show me that it works and the values are correct, however in main after i call the function, t->capacity becomes 24 again instead of 48 while t-> content is correct. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n\n\nstruct text { int capacity; char *content; };\n\ntypedef struct text text;\n\n\ntext *newText(char *s) {\n\n  text *t = malloc(sizeof(text));\n  t-&gt;capacity = 24;\n\n  while (strlen(s) + 1 &gt; t-&gt;capacity) {t-&gt;capacity = t-&gt;capacity * 2;} \n  t-&gt;content = malloc(t-&gt;capacity);\n  strcpy(t-&gt;content, s);\n\n  return t; \n}\n\nvoid append(text *t1, text *t2) {\n  int length1 = strlen(t1-&gt;content);\n  int length2 = strlen(t2-&gt;content);\n  int lengths = length1 + length2;\n\n\n  for (int i = length1; i &lt; length1 + length2; i++){\n  t1-&gt;content[i] = t2-&gt;content[i - length1];\n  t1-&gt;content[i + 1] = '\\0';                }\n\n  char text[100];\n  strcpy(text, t1-&gt;content);\n\n\n  t1 = newText(text);\n\n  printf(\"%s \\n\", t1-&gt;content);\n  printf(\"%d \\n\", t1-&gt;capacity);\n\n}\n\nint main () {\n  text *t = malloc(sizeof(text));\n  text *t1 = malloc(sizeof(text));\n\n  t = newText(\"carpet\");\n  t1 = newText(\"789012345678901234\");\n  append(t, t1);\n  printf(\"%d\\n\", t-&gt;capacity);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "ipc"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541603589, "post_id": 53192201, "comment_id": 93273422, "body": "I have no experience of using these, but for re-entrancy reasons you&#39;ll need some means of synchronization between the processes. Perhaps that synchronization &quot;thing&quot; (shared mutex?) includes a memory barrier? Having to declare the whole buffer as volatile sounds a bit drastic."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1541603784, "post_id": 53192201, "comment_id": 93273549, "body": "Yeah, I&#39;m not &quot;cozy&quot; with this idea \u2013 not at all.  Timing problems could abound."}, {"owner": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "edited": false, "score": 0, "creation_date": 1541603799, "post_id": 53192201, "comment_id": 93273557, "body": "Even for a 1 byte semaphore I need the modified value to be instantly available to the child process. As I said the child process is very limited (runs inside an emulator)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541604406, "post_id": 53192201, "comment_id": 93273971, "body": "I suspect that the answer will be quite different for each OS, so perhaps you can restrict it to just one OS? Then later ask several questions if needed."}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "edited": false, "score": 0, "creation_date": 1541605340, "post_id": 53192704, "comment_id": 93274572, "body": "So if I access shared data via volatile pointers and add memory barriers I&#39;m somewhat on the safe side? Ignoring that semaphores need to be read / written atomically."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "edited": false, "score": 0, "creation_date": 1541633563, "post_id": 53192704, "comment_id": 93287499, "body": "@HenrikS: If you have that level of control, build a proper IPC channel. Hoping that the compiler does exactly what you think it might do is not a solid basis for software engineering."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1541604981, "creation_date": 1541604981, "answer_id": 53192704, "question_id": 53192201, "link": "https://stackoverflow.com/questions/53192201/do-writeprocessmemory-and-similiar-functions-invalidate-the-possibly-cached-data/53192704#53192704", "title": "Do WriteProcessMemory and similiar functions invalidate the possibly cached data?", "body": "<p><code>WriteProcessMemory</code> will happily do exactly what it's told. It writes to memory, and the CPU cache(s) will end up in a logically valid (but unspecified) state afterwards. </p>\n\n<p>However, be aware that the other program is not made aware of those writes. And if it has its own idea of caching, including such mechanisms as caching variable values in registers, then those copies will NOT be updated. There is no way in which the OS can know how each language implements such caching mechanisms, but performance concerns dictate that most serious programming languages have mechanisms like this. </p>\n\n<p>If the written-to program uses C or C++ <code>volatile</code> pointers, this is partially mitigated. The compiler cannot eliminate the reads entirely. However, such reads can be reordered with other instructions as long as those are not <em>observable</em>. That might affect their timing, which gives an effect similar to caching - your <code>WriteProcessMemory</code> might be too late.</p>\n"}], "owner": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1541604981, "creation_date": 1541603254, "question_id": 53192201, "link": "https://stackoverflow.com/questions/53192201/do-writeprocessmemory-and-similiar-functions-invalidate-the-possibly-cached-data", "title": "Do WriteProcessMemory and similiar functions invalidate the possibly cached data?", "body": "<p>I have an existing program which I need to communicate with over IPC. I can modify small parts of it but can't add any fancy solutions like shared memory, pipes or sockets. So I'd like to communicate with functions that directly read / write into the programs address space:</p>\n\n<ul>\n<li><code>process_vm_writev</code> on linux</li>\n<li><code>WriteProcessMemory</code> on windows</li>\n<li><code>mach_vm_write</code> on macOS</li>\n</ul>\n\n<p>If I modify a value in memory with one of these functions is the possibly cached copy of the old value invalidated? If not is a volatile pointer enough to instantly retrieve the new value?</p>\n"}, {"tags": ["c", "function", "linked-list", "structure"], "comments": [{"owner": {"reputation": 2295, "user_id": 792779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99528e625676b23a593f5a3daa005793?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/792779/john"}, "edited": false, "score": 1, "creation_date": 1541602862, "post_id": 53192017, "comment_id": 93272874, "body": "What is the error you&#39;re getting? How are you calling the function?"}, {"owner": {"reputation": 33, "user_id": 10106131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jgOLYsZnZSM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oXjyj3GjqA5hbhJOsssx9NQqzKHQ/mo/photo.jpg?sz=128", "display_name": "Low Voon Hao", "link": "https://stackoverflow.com/users/10106131/low-voon-hao"}, "reply_to_user": {"reputation": 2295, "user_id": 792779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99528e625676b23a593f5a3daa005793?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/792779/john"}, "edited": false, "score": 0, "creation_date": 1541602961, "post_id": 53192017, "comment_id": 93272969, "body": "i am using a online compiler and it just exit with status -1"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541603100, "post_id": 53192017, "comment_id": 93273081, "body": "Welcome to Stack Overflow. Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "edited": false, "score": 0, "creation_date": 1541603265, "post_id": 53192017, "comment_id": 93273199, "body": "If you use an online compiler, are you sure that it is able to read the file <code>list.txt</code>? It sounds more like a compilation problem to me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541603889, "post_id": 53192017, "comment_id": 93273620, "body": "You need to post <code>struct List</code> definition and sample data read."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1541603993, "post_id": 53192017, "comment_id": 93273687, "body": "You forget to set <code>temp.next= NULL;</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1541604547, "post_id": 53192017, "comment_id": 93274076, "body": "You don&#39;t appear to deal with the situation of <code>navigator</code> being <code>NULL</code> either"}, {"owner": {"reputation": 33, "user_id": 10106131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jgOLYsZnZSM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oXjyj3GjqA5hbhJOsssx9NQqzKHQ/mo/photo.jpg?sz=128", "display_name": "Low Voon Hao", "link": "https://stackoverflow.com/users/10106131/low-voon-hao"}, "edited": false, "score": 0, "creation_date": 1541605070, "post_id": 53192017, "comment_id": 93274427, "body": "it seems like doesn&#39;t work too when <code>navigator</code> contains value"}], "owner": {"reputation": 33, "user_id": 10106131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jgOLYsZnZSM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oXjyj3GjqA5hbhJOsssx9NQqzKHQ/mo/photo.jpg?sz=128", "display_name": "Low Voon Hao", "link": "https://stackoverflow.com/users/10106131/low-voon-hao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541604482, "creation_date": 1541602697, "last_edit_date": 1541604482, "question_id": 53192017, "link": "https://stackoverflow.com/questions/53192017/function-unable-to-run-multiple-time", "title": "Function unable to run multiple time", "body": "<p>below is the function that I called to read the file and store to my linked list</p>\n\n<pre><code>void getList(struct List **head)\n{\n  struct List *navigator = *head;\n  FILE *fptr;\n\n  fptr = fopen(\"list.txt\", \"r\");\n\n  for(int i = 0; i &lt; MAX; i ++)\n  {\n    struct List *temp = malloc(sizeof(struct List));\n\n    fscanf(fptr, \"%d %s %s %s %d %d %d %d\\n\", &amp;temp-&gt;id, temp-&gt;name, temp-&gt;type, temp-&gt;desc, &amp;temp-&gt;point1, &amp;temp-&gt;point2, &amp;temp-&gt;point3, &amp;temp-&gt;point4);\n\n    if(navigator-&gt;next == NULL)\n      navigator-&gt;next = temp;\n    else\n    {\n      while(navigator-&gt;next != NULL)\n        navigator = navigator-&gt;next;\n\n      navigator-&gt;next = temp;\n    }\n  }\n\n  rewind(fptr);\n  fclose(fptr);\n}\n</code></pre>\n\n<p>below is the struct List i build</p>\n\n<pre><code>struct List\n{\n  int id;\n  char name[30];\n  char type[6];\n  char desc[7];\n  int point1;\n  int point2;\n  int point3;\n  int point4;\n  int point5;\n  struct List *next;\n};\n</code></pre>\n\n<p>i call the function to read the data below</p>\n\n<pre><code>1 cabbage vege green 1 2 3 4\n2 cucumber vege green 2 4 6 8\n3 celery vege green 3 4 5 6\n</code></pre>\n\n<p>this function worked when run the 1st time but it will comes out with error when i run it second time, and i m sure the first time it able to read all the data.\nWhy and how to improve it?</p>\n"}, {"tags": ["c", "variables", "size-t"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541602526, "post_id": 53191941, "comment_id": 93272627, "body": "<code>sizeof</code> is an operator, not a function."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541602578, "post_id": 53191941, "comment_id": 93272664, "body": "Where did you look? The first header to check is <code>stddef.h</code>"}, {"owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "edited": false, "score": 0, "creation_date": 1541602605, "post_id": 53191941, "comment_id": 93272684, "body": "checked it cannot see can you copy"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1541602630, "post_id": 53191941, "comment_id": 93272701, "body": "&quot;I am trying to understand how this is defined because I believe it is system dependent.&quot; Indeed. &quot;Can someone direct/show the actual definition code.&quot;  No, because it is system dependent..."}, {"owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "edited": false, "score": 0, "creation_date": 1541602680, "post_id": 53191941, "comment_id": 93272729, "body": "But it is defined somewhere in the header or am I wrong?"}, {"owner": {"reputation": 3306, "user_id": 1951463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZ8Ii.jpg?s=128&g=1", "display_name": "Terry Carmen", "link": "https://stackoverflow.com/users/1951463/terry-carmen"}, "edited": false, "score": 0, "creation_date": 1541602710, "post_id": 53191941, "comment_id": 93272749, "body": "@YinonDotan You need to be able to find the stddef.h file and look inside it. If you can not find the file or the definition of size_T, your compiler installation is broken."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541602716, "post_id": 53191941, "comment_id": 93272754, "body": "If you really took a peek inside the header, you probably noticed it includes other system specific headers. So your search continues..."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1541602756, "post_id": 53191941, "comment_id": 93272790, "body": "size_t is a type definition of unsigned."}, {"owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "edited": false, "score": 0, "creation_date": 1541602819, "post_id": 53191941, "comment_id": 93272840, "body": "But nowhere in the header I see a line starting with  typedef size_t ."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1541602857, "post_id": 53191941, "comment_id": 93272869, "body": "What compiler are you using?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1541602872, "post_id": 53191941, "comment_id": 93272886, "body": "It doesn&#39;t have to be <i>directly</i> in that header. It could be added by a system specific header <code>stddef.h</code> includes itself."}, {"owner": {"reputation": 995, "user_id": 2679327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9Gmc3.png?s=128&g=1", "display_name": "Milack27", "link": "https://stackoverflow.com/users/2679327/milack27"}, "edited": false, "score": 0, "creation_date": 1541602915, "post_id": 53191941, "comment_id": 93272930, "body": "@YinonDotan You shouldn&#39;t expect <code>typedef size_t whatever</code>, but <code>typedef whatever size_t</code>."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541602916, "post_id": 53191941, "comment_id": 93272933, "body": "@StoryTeller, that&#39;s not correct, the header my be included by another header but if not defined then a compiler error will result."}, {"owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "edited": false, "score": 0, "creation_date": 1541602929, "post_id": 53191941, "comment_id": 93272943, "body": "I looked at the code in github"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 1, "creation_date": 1541602982, "post_id": 53191941, "comment_id": 93272984, "body": "@SPlatten - I suspect you misunderstood my comment."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1541603022, "post_id": 53191941, "comment_id": 93273016, "body": "<a href=\"https://github.com/gcc-mirror/gcc/blob/master/gcc/ginclude/stddef.h\" rel=\"nofollow noreferrer\">github.com/gcc-mirror/gcc/blob/master/gcc/ginclude/stddef.h</a>. These aren&#39;t exactly user-friendly reading, as they are portable to all manner of systems. It says <code>typedef __SIZE_TYPE__ size_t;</code> and then in turn you have <code>#define __SIZE_TYPE__ long unsigned int</code> before that. For whatever system this was intended."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541603034, "post_id": 53191941, "comment_id": 93273028, "body": "@StoryTeller, fair enough."}, {"owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "edited": false, "score": 0, "creation_date": 1541603044, "post_id": 53191941, "comment_id": 93273036, "body": "I there a code or no that is the question."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 1, "creation_date": 1541603085, "post_id": 53191941, "comment_id": 93273070, "body": "@YinonDotan, its compiler and language dependant, c or c++ and compiler would be helpful."}, {"owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "edited": false, "score": 0, "creation_date": 1541603133, "post_id": 53191941, "comment_id": 93273101, "body": "Lundin THank you  ."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541603427, "post_id": 53191941, "comment_id": 93273304, "body": "@StoryTeller: it doesn&#39;t have to be physically present in any header file. It could be added automatically by the compiler when it notices the inclusion of a system header."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1541603511, "post_id": 53191941, "comment_id": 93273368, "body": "@rici - It could. Are you familiar with an implementation that does it like that? Would be an interesting case study"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541604910, "post_id": 53191941, "comment_id": 93274312, "body": "@StoryTeller: not an extent example, but there are (or were) embedded compilers in which all systems headers are virtual to avoid filesystem dependency. But more common is for the compiler to have a builtin <code>__size_t</code> or some such and for <code>stddef.h</code> to have <code>typedef __size_t size_t</code> which provides no useful information for OP."}], "owner": {"reputation": 127, "user_id": 5629544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdnwI.png?s=128&g=1", "display_name": "Yinon Dotan", "link": "https://stackoverflow.com/users/5629544/yinon-dotan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1541602683, "answer_count": 0, "score": 0, "last_activity_date": 1541602655, "creation_date": 1541602454, "question_id": 53191941, "link": "https://stackoverflow.com/questions/53191941/what-is-the-typdef-size-t-actual-code-definition", "closed_reason": "Duplicate", "title": "What is the typdef size_t actual code definition", "body": "<p>I am starting to learn c now ,after looking all over I cannot find the actual code definition for <strong>size_t</strong> in the header files.</p>\n\n<p>I am trying to understand how this is defined because I believe it is system dependent.</p>\n\n<p>Can someone direct/show the actual definition code.</p>\n"}, {"tags": ["c", "url"], "comments": [{"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 2, "creation_date": 1541602413, "post_id": 53191769, "comment_id": 93272560, "body": "When the image is delivered, it will be in its binary form. You will need to know its mime type to convert the bytes to an image of the correct type."}], "owner": {"reputation": 11, "user_id": 10618838, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8wLP951oUR0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCJAz5P_QyfVVc7OnDHko29mxfzGg/mo/photo.jpg?sz=128", "display_name": "atilla okumus", "link": "https://stackoverflow.com/users/10618838/atilla-okumus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541636923, "creation_date": 1541601944, "last_edit_date": 1541636923, "question_id": 53191769, "link": "https://stackoverflow.com/questions/53191769/getting-a-picture-from-urlserver-as-client-with-c", "title": "Getting a picture from url(server) as client with c", "body": "<p>using send and recv functions to get the buffer from server(url). I can connect to the server  with</p>\n\n<pre><code>sprintf (buffer, \"GET /%s HTTP/1.1\\r\\nHOST:%s\\r\\n\\r\\n\", ip, host);\n</code></pre>\n\n<p>When i use send and recv functions, i can succesfully get the buffer as text with </p>\n\n<pre><code>printf(\"\\n%s\", buffer);\n</code></pre>\n\n<p>But i cant get the buffer as a picture(when there isnt a text, when there is a jpg in the url). How can i get the picture from the url.</p>\n"}, {"tags": ["c", "openmp"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1541604626, "post_id": 53191636, "comment_id": 93274128, "body": "Be aware that your code is wrong - you cannot just increment a shared index like <code>cdt</code>. See <a href=\"https://stackoverflow.com/questions/43057426/openmp-multiple-threads-update-same-array\" title=\"openmp multiple threads update same array\">stackoverflow.com/questions/43057426/&hellip;</a>"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1541625510, "post_id": 53191636, "comment_id": 93284522, "body": "Zulan is correct. Because <code>ctd</code> is a shared variable, your algorithm is fundamentally sequential. There&#39;s not going to be any way to parallelize this effectively if condition holds true many times. Moreover, if you later need to know exactly which index of <code>D</code> corresponded to which record, then there would be no way to parallelize this algorithm at all."}, {"owner": {"reputation": 11, "user_id": 10416374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0551a29442945f822b6f25ed8632ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10416374/nancy"}, "reply_to_user": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1541797768, "post_id": 53191636, "comment_id": 93353484, "body": "@NoseKnowsAll The condition which i have is used to join the three tables, A,B and C based on join attributes and put the result in table D. Counter is used to provide me the matched number of records in the resultant table. Thats why, I feel the counter should be shared. please let me know your comments."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1541820717, "post_id": 53191636, "comment_id": 93358075, "body": "@Nancy ah well then in that case you can rewrite the entire thing by keeping separate D arrays for each processor. That way, the work in this for loop in embarrassingly parallel. Then at the end, you can sequentially merge the arrays into one large <code>D</code> array."}, {"owner": {"reputation": 11, "user_id": 10416374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0551a29442945f822b6f25ed8632ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10416374/nancy"}, "reply_to_user": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1541832272, "post_id": 53191636, "comment_id": 93359566, "body": "@NoseKnowsAll I have one more question. I am running my code on cluster, its running fine but on my local machine. its giving memory issue. Since its running without any memory issue on cluster, do i need to worry why its not running on local machine."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1541873165, "post_id": 53191636, "comment_id": 93369377, "body": "@Nancy That very well could be the sign of a bug. It&#39;s probably worth the effort to figure out why it&#39;s not working on your local machine. It might save you a lot of headache later."}], "answers": [{"tags": [], "owner": {"reputation": 976, "user_id": 3565017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ca9b87bfc80f0428240ea6b8c0b5be?s=128&d=identicon&r=PG&f=1", "display_name": "L.C.", "link": "https://stackoverflow.com/users/3565017/l-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1541602729, "last_edit_date": 1541602729, "creation_date": 1541602283, "answer_id": 53191895, "question_id": 53191636, "link": "https://stackoverflow.com/questions/53191636/parallelize-nested-loops-using-openmp/53191895#53191895", "title": "Parallelize Nested Loops using OpenMP", "body": "<p>You can use the collapse clause, in your case you have 3 consecutive for loops so it would be something like:\n#pragma omp parallel for default(none), private(j,k,l), shared(A,B,C,D,ctd) <strong>collapse(3)</strong></p>\n\n<p>It will work if the for loops are consecutive and the code is in the inner-most loop (it's the case in the code you posted). It noofrecords is much bigger than your max thread count, the speedup won't be impressive. If it's slow even in parallel it probably means the bottleneck is not your processing power (more probably it's the ram already working at 100%).</p>\n\n<p>Also, I'm not so sure you really want that private(j,k,l)...</p>\n"}, {"tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": false, "score": 0, "last_activity_date": 1541770901, "last_edit_date": 1541770901, "creation_date": 1541769422, "answer_id": 53226437, "question_id": 53191636, "link": "https://stackoverflow.com/questions/53191636/parallelize-nested-loops-using-openmp/53226437#53226437", "title": "Parallelize Nested Loops using OpenMP", "body": "<ol>\n<li>create a temporary array of <code>a1</code> of type <code>D.a1</code> with a number of elements equal to the maximum value expected of <code>ctd</code>.</li>\n<li>create a temporary array <code>a2</code> of <code>a1</code> for each thread.</li>\n<li>Fill <code>a2</code> in parallel and use <code>ctd2</code> to count the size of a2</li>\n<li>Fill the array <code>a1</code> in order from <code>a2</code> and add <code>ctd2</code> to <code>ctd</code></li>\n<li>Write to D.a1 in parallel from a1</li>\n</ol>\n\n<p>Something like this</p>\n\n<pre><code>int ctd=0;\ndouble *a1 = malloc(sizeof *a1 * N);                       //Step 1\n#pragma omp parallel\n{\n  int ctd2 = 0;\n  double *a2 = malloc(sizeof *a2 * N);                     //step 2\n\n  #pragma omp for nowait\n  for(int j=0; j&lt;noofrecords; j++)\n  for(int k=0; k&lt;noofrecords; k++)\n  for(int l=0; l&lt;noofrecords; l++)\n    if(condition) a2[ctd2++] = A[i].a1;                    //step 3\n\n  #pragma omp for schedule(static) ordered\n  for(int i=0; i&lt;omp_get_num_threads(); i++)\n    #pragma omp ordered\n    memcpy(&amp;a1[ctd], a2, sizeof *a1 * ctd2), ctd += ctd2;  //step 4\n\n  #pragma omp for\n  for(int j=0; j&lt;ctd; j++) D[j].a1 = a1[j];                // step 5\n  free(a2);\n}\nfree(a1);\n</code></pre>\n\n<p><code>N</code> should be the maximum size you expect ctd to have.  One memory inefficieny in this method is that <code>a2</code> is allocated with size <code>N</code> as well which may be too large.  A dynamic vector like <code>std::vector</code> in C++ or <code>GArray</code> in glib would be more memory efficient.  </p>\n"}], "owner": {"reputation": 11, "user_id": 10416374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0551a29442945f822b6f25ed8632ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10416374/nancy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541770901, "creation_date": 1541601496, "question_id": 53191636, "link": "https://stackoverflow.com/questions/53191636/parallelize-nested-loops-using-openmp", "title": "Parallelize Nested Loops using OpenMP", "body": "<p>I tried to parallelize the nested loop using OpenMP, but I am not sure if this is the correct way to do that. \nHere is the part of the code having nested loops. This is just a generic code. \nI am giving noofrecords as 50k, it takes a lot of time even after parallelization. Can someone suggest any better idea to parallelize the code.\nI am just parallelizing the outer loop in the below code.</p>\n\n<pre><code>int ctd=0;\n#pragma omp parallel for default(none), private(j,k,l), shared(A,B,C,D,ctd)\nfor(int j=0; j &lt;noofrecords; j++)\n{\n    for( int k=0; k&lt;noofrecords; k++)\n    {\n        for( int l=0; l&lt;noofrecords; l++)\n        {\n            if(condition)\n            {\nD[ctd].a1=A[i].a1;\nctd++;\n              }}}}\n</code></pre>\n"}, {"tags": ["c", "memory-leaks", "malloc", "free", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541601022, "post_id": 53191462, "comment_id": 93271681, "body": "Have you heard of <code>realloc</code>?"}, {"owner": {"reputation": 1078, "user_id": 2584427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8190dcf4b994b0a5f0edd8d3cc4e0859?s=128&d=identicon&r=PG", "display_name": "Louis Tran", "link": "https://stackoverflow.com/users/2584427/louis-tran"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541601058, "post_id": 53191462, "comment_id": 93271698, "body": "@FiddlingBits I don&#39;t want to use realloc because it&#39;s not permitted."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 2, "creation_date": 1541601076, "post_id": 53191462, "comment_id": 93271708, "body": "<code>carArray = &amp;newCarArray;</code> should be <code>*carArray = newCarArray;</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541601077, "post_id": 53191462, "comment_id": 93271709, "body": "<code>memcpy(newCarArray, carArray, sizeof(struct car));</code> copies <i>one</i> structure. Better learn how to use <a href=\"https://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code></a>."}, {"owner": {"reputation": 1078, "user_id": 2584427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8190dcf4b994b0a5f0edd8d3cc4e0859?s=128&d=identicon&r=PG", "display_name": "Louis Tran", "link": "https://stackoverflow.com/users/2584427/louis-tran"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541601150, "post_id": 53191462, "comment_id": 93271761, "body": "@Someprogrammerdude memcpy works even with array of struct, (tested)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541601329, "post_id": 53191462, "comment_id": 93271870, "body": "This is just an uninteresting syntax bug where you assign the passed pointer incorrectly: <code>carArray = &amp;newCarArray;</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541601958, "post_id": 53191462, "comment_id": 93272247, "body": "On a slightly related note, I think you&#39;re going about it all wrong. Instead of assigning structures explicitly, and then have a function to increase the capacity, I think you should create a &quot;car container&quot; structure, which have the information needed like capacity and the current size, and of course the pointer to the &quot;array&quot; itself. Then create a function to add a single car, passing name and quantity as arguments. That function will create the array if needed, or increase the size (through a separate function, like you do now)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541601965, "post_id": 53191462, "comment_id": 93272251, "body": "[Continued] That makes it easier to abstract away the inner workings of the container, and makes it easier to test as well as easier to read, understand and maintain."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1541602814, "post_id": 53191462, "comment_id": 93272834, "body": "Not really related to your question, but you double the capacity of the array on each call without taking into account how many elements are used. You should first check if <code>size</code> is as large as <code>cap</code> and only then allocate a new array. Otherwise you will have many unused elements"}], "answers": [{"comments": [{"owner": {"reputation": 1078, "user_id": 2584427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8190dcf4b994b0a5f0edd8d3cc4e0859?s=128&d=identicon&r=PG", "display_name": "Louis Tran", "link": "https://stackoverflow.com/users/2584427/louis-tran"}, "edited": false, "score": 0, "creation_date": 1541602551, "post_id": 53191605, "comment_id": 93272646, "body": "Thank you for your answer, but after changing above, the problem is still, it&#39;s still printing incorrect results."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 1078, "user_id": 2584427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8190dcf4b994b0a5f0edd8d3cc4e0859?s=128&d=identicon&r=PG", "display_name": "Louis Tran", "link": "https://stackoverflow.com/users/2584427/louis-tran"}, "edited": false, "score": 0, "creation_date": 1541602960, "post_id": 53191605, "comment_id": 93272968, "body": "@LouisTran Please add missing important information: What output do you get and what do you expect. Please add it to the question. There you can also add the updated code. Please do not delete the old code which would invalidate all existing comments and answers."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1078, "user_id": 2584427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8190dcf4b994b0a5f0edd8d3cc4e0859?s=128&d=identicon&r=PG", "display_name": "Louis Tran", "link": "https://stackoverflow.com/users/2584427/louis-tran"}, "edited": false, "score": 0, "creation_date": 1541603018, "post_id": 53191605, "comment_id": 93273012, "body": "@LouisTran You also need to dereference <code>carArray</code> in the <code>memcpy</code> call.  See my edit."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1541602982, "last_edit_date": 1541602982, "creation_date": 1541601418, "answer_id": 53191605, "question_id": 53191462, "link": "https://stackoverflow.com/questions/53191462/how-to-free-memory-of-a-double-pointer-in-this-case-properly/53191605#53191605", "title": "How to free memory of a double pointer in this case properly?", "body": "<p>Two issues here.</p>\n\n<p>First, you're only copying a <em>single</em> structure, not the whole array:</p>\n\n<pre><code>memcpy(newCarArray, carArray, sizeof(struct car));\n</code></pre>\n\n<p>Here, you're saying to copy <code>sizeof(struct car)</code> bytes, which is enough for one structure.  You're also not copying the right thing, since <code>carArray</code> is a pointer-to-pointer.  You need to multiply by the original size to copy the whole array, and you need to dereference <code>carArray</code>:</p>\n\n<pre><code>memcpy(newCarArray, *carArray, (*cap / 2) * sizeof(struct car));\n</code></pre>\n\n<p>The other problem is here:</p>\n\n<pre><code>carArray = &amp;newCarArray;\n</code></pre>\n\n<p>Here, you're only modifying the parameter <code>carArray</code>, so changes to it aren't reflected in the caller.  You need to dereference it like you do <code>car</code>:</p>\n\n<pre><code>*carArray = newCarArray;\n</code></pre>\n"}], "owner": {"reputation": 1078, "user_id": 2584427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8190dcf4b994b0a5f0edd8d3cc4e0859?s=128&d=identicon&r=PG", "display_name": "Louis Tran", "link": "https://stackoverflow.com/users/2584427/louis-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1541602982, "creation_date": 1541600947, "last_edit_date": 1541601088, "question_id": 53191462, "link": "https://stackoverflow.com/questions/53191462/how-to-free-memory-of-a-double-pointer-in-this-case-properly", "title": "How to free memory of a double pointer in this case properly?", "body": "<p>My program is to increase a size of a struct array by creating new arr with a new size then assign the double pointer of the old array to the new one. I have been struggling with releasing memory of the old array before or after assigning it to the new one. If I don't fee(), it gives correct results, otherwise, it automatically pickup and print out some trash values. Please help, Thank you.</p>\n\n<p>*realloc is not allowed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct car {\n    char name[30];\n    int quantity;\n};\n\nvoid increaseSize(int *cap, int size, struct car **carArray) {\n    printf(\"cap = %d size = %d\\n\", *cap, size);\n    *cap *= 2;\n    printf(\"cap x 2 = %d\\n\", *cap);\n    struct car *newCarArray = (struct car * ) malloc(*cap * sizeof(struct car));\n    memcpy(newCarArray, carArray, sizeof(struct car));\n    free(*carArray); // If I free old carArray here, it will give incorrect results. How can I release/clear/delete/free the memory of the old array here?\n    carArray = &amp;newCarArray;\n    printf(\"increased cap = %d size = %d\\n\", *cap, size);\n}\n\nvoid printArray(int cap, int size, struct car *carArray) {\n    printf(\"Capacity = %d, Size = %d \\n\", cap, size);\n    for(int i = 0; i &lt; size; i++) {\n        printf(\"Car %d, Name: %s, Quantity: %d\\n\", i, carArray[i].name, carArray[i].quantity);\n    }\n}\n\nint main() {\n\n    int cap = 2;\n    int size = 0;\n    struct car *carArray = (struct car *) malloc(cap * sizeof(struct car));\n\n    struct car car_0 = {\"Corolla\", 5};\n    carArray[0] = car_0;\n    size++;\n\n    struct car car_1 = {\"Accord\", 8};\n    carArray[1] = car_1;\n    size++;\n\n    printArray(cap, size, carArray);\n\n    increaseSize(&amp;cap, size, &amp;carArray);\n\n    struct car car_2 = {\"Forte\", 3};\n    carArray[2] = car_2;\n    size++;\n\n    printArray(cap, size, carArray);\n    free(carArray);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 1, "creation_date": 1541600291, "post_id": 53191235, "comment_id": 93271267, "body": "Downvoted for sloppy typos."}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1541600770, "post_id": 53191235, "comment_id": 93271545, "body": "@TomZych ... Where should I improve my typos ?I tried to explain my problem and my code too . What more should I do ?"}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1541600949, "post_id": 53191235, "comment_id": 93271639, "body": "Just proofread carefully. You\u2019ve demonstrated that you know how to spell \u201cbinary\u201d and \u201cordered\u201d, so a lot of this is just carelessness."}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1541601004, "post_id": 53191235, "comment_id": 93271671, "body": "It\u2019s also a good idea to link to the original problem, so people can refer to it for clarification."}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1541601022, "post_id": 53191235, "comment_id": 93271682, "body": "your punctuation is off.  commas and periods only need a space <b><i>after</i></b> them"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1541601075, "post_id": 53191235, "comment_id": 93271707, "body": "You might consider adding some comments to your example to show what the intent of each section is. It might also help you figure out where you&#39;ve gone wrong when you try to explain what the code does and you have an &#39;aha!&#39; moment."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1541601077, "post_id": 53191235, "comment_id": 93271710, "body": "Hint: print the values in each of your arrays after they&#39;ve been filled."}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1541601092, "post_id": 53191235, "comment_id": 93271722, "body": "Looks like it\u2019s this one? <a href=\"https://www.hackerrank.com/challenges/bitwise-operators-in-c/problem\" rel=\"nofollow noreferrer\">hackerrank.com/challenges/bitwise-operators-in-c/problem</a>"}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541601247, "post_id": 53191235, "comment_id": 93271822, "body": "@dbush .. thanks for the suggestion ..I&#39;ll try doing it..."}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1541601626, "post_id": 53191235, "comment_id": 93272039, "body": "@TomZych ..yes it is ..."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1541602118, "post_id": 53191235, "comment_id": 93272347, "body": "I feel like you made this really complicated but it doesn&#39;t need to be. This passed the tests. <a href=\"https://ideone.com/Id7Vl1\" rel=\"nofollow noreferrer\">ideone.com/Id7Vl1</a>"}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1541602538, "post_id": 53191235, "comment_id": 93272636, "body": "@RetiredNinja ... That&#39;s more simplified ... I just dragged it too long ....thanks"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1541603785, "post_id": 53191235, "comment_id": 93273550, "body": "If they gave awards for going off into the weeds on some of their questions I&#39;d have more than one. :)"}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "edited": false, "score": 0, "creation_date": 1541602409, "post_id": 53191675, "comment_id": 93272557, "body": "I understood everything,except <i>If n is 3, then, the assignment to Aarr will only be done for a==1.</i> .... And I&#39;ve put my own review in the question .Please check ."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "edited": false, "score": 0, "creation_date": 1541602957, "post_id": 53191675, "comment_id": 93272964, "body": "Yes, I was going to write an answer using <code>i++</code> after doing all the checks. But then I realized that you don&#39;t need to store the values, just accumulate the maximum"}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 3, "last_activity_date": 1541603011, "last_edit_date": 1541603011, "creation_date": 1541601631, "answer_id": 53191675, "question_id": 53191235, "link": "https://stackoverflow.com/questions/53191235/code-on-generating-possible-ordered-pairs-up-to-a-number-and-finding-maximum-val/53191675#53191675", "title": "Code on generating possible ordered pairs up to a number and finding maximum value of binary operations of the pairs", "body": "<p>Here's a couple of problems:</p>\n\n<pre><code>for(a=1;a&lt;=n;a++){\n  for(b=a+1;b&lt;n;b++){\n     for(i=0;i&lt;(n*(n-1)/2);i++){\n         Aarr[i]=(a&amp;b);\n     }\n     ...\n</code></pre>\n\n<p>This code is storing the same value in every element of the <code>Aarr</code> array, because the values of <code>a</code> and <code>b</code> do not change as <code>i</code> changes. You need to store a different value in each element. Looking at it another way, you need to store each value in a different element.</p>\n\n<p>The good news is that you just need the result of very combination of <code>a</code> and <code>b</code>. Since all you're interested in is the maximum value, you don't need to save them all.</p>\n\n<pre><code>for(a=1;a&lt;n;a++){\n  for(b=a+1;b&lt;=n;b++){\n     result_and = a&amp;b;\n     if(max_and &lt; result_and)\n         max_and = result_and;\n     }\n     result_or = a|b;\n     if(max_or &lt; result_or)\n     ...\n</code></pre>\n\n<p>Note that I've also revised the logic on the <code>for</code> loops, because the conditions were the wrong way around. If <code>n</code> is <code>3</code>, for example, you want to do the following tests: 1 and 2, 1 and 3, 2 and 3. So the first <code>for</code> should <em>not</em> execute if a==n, but the second <code>for</code> <em>should</em>.</p>\n\n<p>Another point. Don't forget to initialize the variables <code>max_and</code> <em>etc.</em> to a number that's going to be smaller than any test result.</p>\n"}], "owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53191675, "answer_count": 1, "score": -3, "last_activity_date": 1550320853, "creation_date": 1541600143, "last_edit_date": 1550320853, "question_id": 53191235, "link": "https://stackoverflow.com/questions/53191235/code-on-generating-possible-ordered-pairs-up-to-a-number-and-finding-maximum-val", "title": "Code on generating possible ordered pairs up to a number and finding maximum value of binary operations of the pairs", "body": "<p>I got a question at hackerrank which states that a user should input a larger  number (say 5) and a smaller number (say 4). Then. taking each pair from the ordered list {1,2,3,4,5}, the binary AND (<code>&amp;</code>), binary OR (<code>|</code>), and binary X-OR (<code>^</code>) are performed. Here, 10 such values of each binary operation are found. The maximum value among the 10 values for a particular operation which is less than 4 is to be printed. My code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\nint n,k,i,a,b;\nprintf(\"ENTER VALUE OF n AND k:\");\nscanf(\"%d%d\",&amp;n,&amp;k);\nint Aarr[n*(n-1)/2] , Oarr[n*(n-1)/2], Xarr[n*(n-1)/2];\nfor(a=1;a&lt;=n;a++){\n  for(b=a+1;b&lt;n;b++){\n     for(i=0;i&lt;(n*(n-1)/2);i++){\n         Aarr[i]=(a&amp;b);\n     }\n     for(i=0;i&lt;(n*(n-1)/2);i++){\n         Oarr[i]=(a|b);\n     }\n     for(i=0;i&lt;(n*(n-1)/2);i++){\n         Xarr[i]=(a^b);\n     }\n  }\n}\nint Amax=1,Omax=1,Xmax=1;\nfor(i=0;i&lt;(n*(n-1)/2);i++){\n   if((Aarr[i]&gt;Amax)&amp;&amp;(Aarr[i]&lt;k)){\n      Amax=Aarr[i];\n   }\n}\nfor(i=0;i&lt;(n*(n-1)/2);i++){\n   if((Oarr[i]&gt;Omax)&amp;&amp;(Oarr[i]&lt;k)){\n      Omax=Oarr[i];\n   }\n}\nfor(i=0;i&lt;(n*(n-1)/2);i++){\n   if((Xarr[i]&gt;Xmax)&amp;&amp;(Xarr[i]&lt;k)){\n      Xmax=Xarr[i];\n   }\n}\nprintf(\"\\n%d\\n%d\\n%d\",Amax,Omax,Xmax);\ngetchar();\n</code></pre>\n\n<p>}</p>\n\n<p><strong>EXPECTED OUTPUT:</strong></p>\n\n<pre><code>2\n2\n3\n</code></pre>\n\n<p><strong>MY OUTPUT:</strong></p>\n\n<pre><code>1\n1\n1\n</code></pre>\n\n<p>My code is run in the <strong>CODE BLOCKS</strong> IDE. The code just produces the values of <code>Amax</code>, <code>Omax</code>, and <code>Xmax</code> as defined. I at first tried to find all the possible ordered pairs and store them in an array. I think the condition applied to find the maximum value of a particular operation is correct. I've done many debuggings and at last have sought your help. I'm new to C programming. So, my code seem to be too long to you.</p>\n\n<p><strong>MY EDIT:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\nint n,k,i=0,a,b;\nprintf(\"ENTER VALUE OF n AND k:\");\nscanf(\"%d%d\",&amp;n,&amp;k);\nint Aarr[n*(n-1)/2] , Oarr[n*(n-1)/2], Xarr[n*(n-1)/2];\nfor(a=1;a&lt;=n;a++){\n  for(b=a+1;b&lt;n;b++){\n\n     Aarr[i]=a&amp;b;\n     printf(\"%d\\n\",Aarr[i]);\n\n\n     Oarr[i]=a|b;\n     printf(\"%d\\n\",Oarr[i]);\n\n     Xarr[i]=a^b;\n     printf(\"%d\\n\",Xarr[i]);\n\n     i++;\n      }\n     printf(\"\\n\");\n    }\nint Amax=1,Omax=1,Xmax=1;\n    for(i=0;i&lt;(n*(n-1)/2);i++){\n   if((Aarr[i]&gt;Amax)&amp;&amp;(Aarr[i]&lt;k)){\n      Amax=Aarr[i];\n   }\n }\n     for(i=0;i&lt;(n*(n-1)/2);i++){\n   if((Oarr[i]&gt;Omax)&amp;&amp;(Oarr[i]&lt;k)){\n      Omax=Oarr[i];\n   }\n  }\nfor(i=0;i&lt;(n*(n-1)/2);i++){\n   if((Xarr[i]&gt;Xmax)&amp;&amp;(Xarr[i]&lt;k)){\n      Xmax=Xarr[i];\n   }\n }\nprintf(\"\\n%d\\n%d\\n%d\",Amax,Omax,Xmax);\ngetchar();\n }\n</code></pre>\n\n<p>The above revised code works. I hope it's ok.</p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541600101, "post_id": 53191175, "comment_id": 93271153, "body": "Are you generating the visual studio or using something like CMake?"}, {"owner": {"reputation": 31, "user_id": 10618563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BkXdsLeG8cc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBuUX7Qu70TtXt7xWNrFqPF8hlgQg/mo/photo.jpg?sz=128", "display_name": "Dario D&#39;Avino", "link": "https://stackoverflow.com/users/10618563/dario-davino"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541669513, "post_id": 53191175, "comment_id": 93297828, "body": "No. The files are generated using a completely different tool that allows to draw a behavioral model of what you want to do, then it automatically generates the .c and .h files with the functional code."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10618563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BkXdsLeG8cc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBuUX7Qu70TtXt7xWNrFqPF8hlgQg/mo/photo.jpg?sz=128", "display_name": "Dario D&#39;Avino", "link": "https://stackoverflow.com/users/10618563/dario-davino"}, "edited": false, "score": 1, "creation_date": 1541670199, "post_id": 53191435, "comment_id": 93298250, "body": "Thanks. I found the latter suggestion very helpful. In fact, I added this line to the .vcxproj file   &lt;ClCompile Include=&quot;&lt;path-to-generated-code&gt;*.c&quot; /&gt;  Then I reloaded the solution and I found the generated files inside the project explorer.  Nevertheless, I will keep going deep in the Visual Studio documentation to better understand how user .props and .target files can be used. That way, I can build up a simple procedure to follow that can be helpful for other team members, in order to prevent them manual editing of the .vcxproj file."}, {"owner": {"reputation": 31, "user_id": 10618563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BkXdsLeG8cc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBuUX7Qu70TtXt7xWNrFqPF8hlgQg/mo/photo.jpg?sz=128", "display_name": "Dario D&#39;Avino", "link": "https://stackoverflow.com/users/10618563/dario-davino"}, "edited": false, "score": 0, "creation_date": 1541683527, "post_id": 53191435, "comment_id": 93305229, "body": "Sure, already did. But I haven&#39;t enough reputation to show my score publicly."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 4, "last_activity_date": 1561546581, "last_edit_date": 1561546581, "creation_date": 1541600842, "answer_id": 53191435, "question_id": 53191175, "link": "https://stackoverflow.com/questions/53191175/how-to-include-header-and-source-files-folder-in-visual-studio/53191435#53191435", "title": "How to include header AND source files folder in Visual Studio", "body": "<p>If you look at <a href=\"https://docs.microsoft.com/en-us/cpp/ide/working-with-project-properties?view=vs-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/ide/working-with-project-properties?view=vs-2017</a> then you see there is a <code>Source Directories</code> property that has <code>$(VC_SourcePath)</code> as a default but (I think) to which you can add additional paths. The documentation is unclear whether that means all source files in such a path will be included for compilation.</p>\n\n<p>At the bottom of the documentation it explains how to override certain project properties by providing an external properties file. It seems you can override the targets/sources using such a file. You can generate the file using a small tool that reads the filenames in those directories and adds them to the file.</p>\n\n<p>You could also analyze the <code>.vcproj</code> file and build a small tool that wil re-write the part with your generated source directories, reading the filenames in those directories and adding them to the section in the <code>.vcproj</code> file.</p>\n"}], "owner": {"reputation": 31, "user_id": 10618563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BkXdsLeG8cc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBuUX7Qu70TtXt7xWNrFqPF8hlgQg/mo/photo.jpg?sz=128", "display_name": "Dario D&#39;Avino", "link": "https://stackoverflow.com/users/10618563/dario-davino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2224, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1561546581, "creation_date": 1541599954, "last_edit_date": 1541600242, "question_id": 53191175, "link": "https://stackoverflow.com/questions/53191175/how-to-include-header-and-source-files-folder-in-visual-studio", "title": "How to include header AND source files folder in Visual Studio", "body": "<p>I am using Visual Studio (2017) and I need the following.</p>\n\n<p>I have a folder where a code generator puts the .h and .c files obtained from a formal model. This folder is not controlled by me, e.g. I cannot write in it, but it is updated by another team member.</p>\n\n<p>By using the /I compiler options (or Additional include directories in the project properties) I managed to import all the generated header files in my VS project. What I am supposed to do is to integrate this generated code into a specific platform, this means that I have to compile both the generated code and the integration code on the target platform. The problem is, the compiler is not able to resolve the generated function definitions of the generated code as it only sees the .h files. What I got is a linking error (external symbol  not resolved)</p>\n\n<p>To solve the problem, I added the existing .c files manually, one by one. The obvious problems that comes with this solution are</p>\n\n<ul>\n<li>manual boring work</li>\n<li>when new files are generated, I need to manually import the new files</li>\n</ul>\n\n<p>Question is: is there an option that can be set in order to specify the path of the source files without passing them one by one?</p>\n\n<p>note: just copying and pasting the generated code in the VS project folder is not an acceptable solution.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "linux", "gcc", "rhel", "fortify"], "comments": [{"owner": {"reputation": 1982, "user_id": 1684458, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aaaabfcedd46ef01e1db8984e37498e7?s=128&d=identicon&r=PG&f=1", "display_name": "p4r1", "link": "https://stackoverflow.com/users/1684458/p4r1"}, "edited": false, "score": 0, "creation_date": 1541610614, "post_id": 53190992, "comment_id": 93277549, "body": "Does the kernel build in your environment without using <code>sourceanalyzer.exe</code>?"}, {"owner": {"reputation": 73, "user_id": 4158039, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8e6e8a27e8d5f6b31489c236204a55d?s=128&d=identicon&r=PG&f=1", "display_name": "2redgoose", "link": "https://stackoverflow.com/users/4158039/2redgoose"}, "reply_to_user": {"reputation": 1982, "user_id": 1684458, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aaaabfcedd46ef01e1db8984e37498e7?s=128&d=identicon&r=PG&f=1", "display_name": "p4r1", "link": "https://stackoverflow.com/users/1684458/p4r1"}, "edited": false, "score": 0, "creation_date": 1541616500, "post_id": 53190992, "comment_id": 93280289, "body": "Yes. That&#39;s why I&#39;m confused as to what the problem is."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1945816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3450f3b1a849d45e4e55585fc96da9f1?s=128&d=identicon&r=PG", "display_name": "David Svoboda", "link": "https://stackoverflow.com/users/1945816/david-svoboda"}, "is_accepted": false, "score": 0, "last_activity_date": 1553846654, "creation_date": 1553846654, "answer_id": 55412929, "question_id": 53190992, "link": "https://stackoverflow.com/questions/53190992/using-hp-fortify-sca-to-scan-linux-kernel/55412929#55412929", "title": "Using HP Fortify SCA to scan Linux Kernel", "body": "<p>The short answer is that when Fortify (or any other static analyzer) fails to get along with your build system, you should integrate it into the compiler. That is, tell the Makefile to use your shell script for the compiler:</p>\n\n<pre><code>make GCC=gcc_and_fortify.sh\n</code></pre>\n\n<p>The gcc_and_fortify.sh script should look like this:</p>\n\n<pre><code>#!/bin/sh\nARGS=$@\n# run GCC\ngcc $ARGS\n# run Fortify\nsourceanalyzer -b my_project $ARGS\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4158039, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8e6e8a27e8d5f6b31489c236204a55d?s=128&d=identicon&r=PG&f=1", "display_name": "2redgoose", "link": "https://stackoverflow.com/users/4158039/2redgoose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1593167601, "creation_date": 1541599264, "question_id": 53190992, "link": "https://stackoverflow.com/questions/53190992/using-hp-fortify-sca-to-scan-linux-kernel", "title": "Using HP Fortify SCA to scan Linux Kernel", "body": "<p>I'm trying to use HP Fortify SCA to scan RHEL7.5 server kernel [linux-3.10.0-862.el7]. I'm on the RHEL workstation OS which is on virtualbox.</p>\n\n<p>In the working dir I'm doing:</p>\n\n<blockquote>\n  <p>\"sourceanalyzer -b mybuild touchless make\"</p>\n</blockquote>\n\n<p>The kernel compiles using \"make\" by itself. The sourceanalyzer goes through some of the code but it seems to error out when it comes to:  </p>\n\n<blockquote>\n  <p>CC arch/x86/purgatory/purgatory.o</p>\n</blockquote>\n\n<p>Is Fortify capable of scanning the kernel? Do I need to use more complex commands to scan it?</p>\n\n<p>The output error segment is: </p>\n\n<blockquote>\n  <p>touchless-script\n  /home/sail/.fortify/sca18.1/build/myscan/build6382721854835965459/gcc\n  called with args: -Wp,-MD,arch/x86/purgatory/.purgatory.o.d -nostdinc\n  -isystem touchless-script /home/sail/.fortify/sca18.1/build/myscan/build6382721854835965459/gcc\n  called with args: -print-file-name=include\n  /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I./arch/x86/include\n  -Iarch/x86/include/generated -Iinclude -I./arch/x86/include/uapi -Iarch/x86/include/generated/uapi -I./include/uapi -Iinclude/generated/uapi -include ./include/linux/kconfig.h -D__KERNEL__ -fno-strict-aliasing -Wall -Wstrict-prototypes -fno-zero-initialized-in-bss -fno-builtin -ffreestanding -c -MD -Os -mcmodel=large -m64 -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(purgatory) -DKBUILD_MODNAME=KBUILD_STR(purgatory) -c -o arch/x86/purgatory/.tmp_purgatory.o arch/x86/purgatory/purgatory.c\n  /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include [warning]: File called\n  not found [warning]: File with not found [warning]: File args: not\n  found [warning]: File /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include\n  not found gcc: error: called: No such file or directory gcc: error:\n  with: No such file or directory gcc: error: args:: No such file or\n  directory objdump: 'arch/x86/purgatory/.tmp_purgatory.o': No such file\n  mv: cannot stat \u2018arch/x86/purgatory/.tmp_purgatory.o\u2019: No such file or\n  directory \n  make[1]: <strong>* [arch/x86/purgatory/purgatory.o] Error 1 make:\n  *</strong> [archprepare] Error 2</p>\n</blockquote>\n"}, {"tags": ["c", "mplab"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541600454, "post_id": 53190962, "comment_id": 93271360, "body": "You can pass a <code>struct</code> with an array inside. e.g. <code>struct{int num[10]} array;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 3, "last_activity_date": 1541599407, "creation_date": 1541599407, "answer_id": 53191043, "question_id": 53190962, "link": "https://stackoverflow.com/questions/53190962/pass-array-in-method-and-get-its-size/53191043#53191043", "title": "Pass array in method and get it&#39;s size", "body": "<p><code>Array</code> will be passed as a pointer and <code>sizeof</code> will not know the size of the actual object. It will give you the size of the pointer.</p>\n\n<p>To make your method (called a function in C) generic, you <em>must</em> pass the size of the array:</p>\n\n<pre><code>void SaveValue(volatile unsigned char Array[], size_t size);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "edited": false, "score": 0, "creation_date": 1541599678, "post_id": 53191050, "comment_id": 93270933, "body": "Thank you sir. I just wondering if i can avoid to pass a second parameter."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1541599440, "creation_date": 1541599440, "answer_id": 53191050, "question_id": 53190962, "link": "https://stackoverflow.com/questions/53190962/pass-array-in-method-and-get-its-size/53191050#53191050", "title": "Pass array in method and get it&#39;s size", "body": "<p>In most contexts, an array when used in an expression will <strong>decay</strong> into a pointer to its first element.  In particular, when an array is an argument to a function, what actually gets passed is a pointer to the first element.</p>\n\n<p>In fact your function declaration:</p>\n\n<pre><code>void SaveValue(volatile unsigned char Array[])\n</code></pre>\n\n<p>Is exactly equivalent to:</p>\n\n<pre><code>void SaveValue(volatile unsigned char *Array)\n</code></pre>\n\n<p>So the function is receiving a pointer, not an actual array, so <code>sizeof</code> evaluates to the size of a pointer.</p>\n\n<p>When passing an array to a function, you need to explicitly pass the length as a separate parameter.</p>\n"}], "owner": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1541600106, "answer_count": 2, "score": 0, "last_activity_date": 1541600114, "creation_date": 1541599183, "question_id": 53190962, "link": "https://stackoverflow.com/questions/53190962/pass-array-in-method-and-get-its-size", "closed_reason": "Duplicate", "title": "Pass array in method and get it&#39;s size", "body": "<p>I need to pass an array inside a routine and then to read its size.</p>\n\n<pre><code>typedef struct\n{  \n   unsigned char Name[20];\n}Sensors_;\nextern volatile Sensors_ Sensor;\n</code></pre>\n\n<p>then inside source file</p>\n\n<p>I'm using this method </p>\n\n<pre><code>void Save(){\n\n   SaveValue(Sensor.Name)\n} \n\nvoid SaveValue(volatile unsigned char Array[]){\n\nprintf(\"%d\",sizeof(Array));\n}\n</code></pre>\n\n<p>The real size of my array is 20 characters, but i'm getting in output number 2.\nWhy this is happening? I'm passing my array inside my method, so isn't the size same as my first array?</p>\n\n<p>Also i don't want to pass it  as Sensors_ cause it's a generic method for other names too.</p>\n"}, {"tags": ["python", "c", "performance", "cython"], "answers": [{"comments": [{"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 1, "creation_date": 1541693995, "post_id": 53211339, "comment_id": 93311635, "body": "Most of the slow pow calls are not necessary. eg Hs*Hs is much faster than pow(Hs,2). <a href=\"https://stackoverflow.com/a/53172561/4045774\">stackoverflow.com/a/53172561/4045774</a> It should also make quite some difference if you have pow(w[i], -5) instead of pow(w[i], -5.0) or even 1./(w[i]*w[i]*w[i]*w[i]*w[i])"}], "tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": false, "score": 2, "last_activity_date": 1541692178, "creation_date": 1541692178, "answer_id": 53211339, "question_id": 53190952, "link": "https://stackoverflow.com/questions/53190952/how-can-i-optimize-jonswap-spectrum-in-cython/53211339#53211339", "title": "how can I optimize jonswap spectrum in cython", "body": "<p>Your original code is all vectorized numpy ops, so the room for improvement is limited.  Running cython with the annotate flag (<code>-a</code>) points out the following possible improvements.</p>\n\n<ul>\n<li>use the libc <code>pow</code> instead of the python builtin</li>\n<li>elide boundschecking/wraparound semantics</li>\n<li>use c division to turn off divide by 0 checking (if this is safe to do!)</li>\n</ul>\n\n<p>New cython version</p>\n\n<pre><code>from libc.math cimport exp, pow\nfrom libc.stdlib cimport malloc\nimport numpy as np\ncimport numpy as np\ncimport cython\n\nDTYPE_float = np.float64\nctypedef np.float64_t DTYPE_float_t\n\n@cython.boundscheck(False)\n@cython.wraparound(False)\n@cython.cdivision(True)\ndef cy_jonswap(np.ndarray[DTYPE_float_t, ndim=1, mode ='c'] w, double Hs, double Tp, double gamma = 3.7):\n    '''\n    get Jonswap spectra\n    :param w: np.ndarray Angular Frequency\n    '''\n    cdef:\n        int n = w.shape[0]\n        double *sigma = &lt;double*&gt;malloc(n * sizeof(double)) \n        double *a = &lt;double*&gt;malloc(n * sizeof(double)) \n        int i \n    cdef double wp\n    cdef np.ndarray[DTYPE_float_t, ndim=1, mode='c'] sj = np.ones(n, dtype=DTYPE_float)\n\n    wp = 2 * np.pi / Tp\n    with nogil:\n        for i in range(n):\n            sigma[i] = 0.07 if w[i] &lt; wp else 0.09\n            a[i] = exp(-0.5 * pow((w[i] - wp) / (sigma[i] * w[i]), 2.0))\n            sj[i] = 320 * pow(Hs, 2) * pow(w[i], -5.0) / pow(Tp, 4) * exp(-1950 * pow(w[i], -4) / pow(Tp, 4)) * pow(gamma, a[i])\n\n    return sj\n</code></pre>\n\n<p>Timings</p>\n\n<pre><code>w = np.random.randn(1_000_000)\n\n%timeit cy_jonswap(w, .5, .5)\n289 ms \u00b1 7.34 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n%timeit jonswap(w, .5, .5)\n411 ms \u00b1 26.3 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n\n<p>Also, note that in your cython version you are leaking memory for <code>sigma</code> and <code>a</code></p>\n"}], "owner": {"reputation": 21, "user_id": 10618643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4716616bf04c6cae9b5333d763f096c?s=128&d=identicon&r=PG&f=1", "display_name": "kneehow", "link": "https://stackoverflow.com/users/10618643/kneehow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541692178, "creation_date": 1541599157, "question_id": 53190952, "link": "https://stackoverflow.com/questions/53190952/how-can-i-optimize-jonswap-spectrum-in-cython", "title": "how can I optimize jonswap spectrum in cython", "body": "<p>I am trying to improve the performance of calculating the Jonswap spectrum using cython. But it seems like much slower than the original code. How can I improve this?</p>\n\n<p>cython code:</p>\n\n<pre><code>from libc.math cimport exp\nfrom libc.stdlib cimport malloc\nimport numpy as np\ncimport numpy as np\n\nDTYPE_float = np.float64\nctypedef np.float64_t DTYPE_float_t\n\ndef jonswap(np.ndarray[DTYPE_float_t, ndim=1, mode ='c'] w, double Hs, double Tp, double gamma = 3.7):\n    '''\n    get Jonswap spectra\n    :param w: np.ndarray Angular Frequency\n    '''\n    cdef:\n        int n = w.shape[0]\n        double *sigma = &lt;double*&gt;malloc(n * sizeof(double)) \n        double *a = &lt;double*&gt;malloc(n * sizeof(double)) \n        int i \n    cdef double wp\n    cdef np.ndarray[DTYPE_float_t, ndim=1, mode='c'] sj = np.ones(n, dtype=DTYPE_float)\n\n    wp = 2 * np.pi / Tp\n    for i in range(n):\n        sigma[i] = 0.07 if w[i] &lt; wp else 0.09\n        a[i] = exp(-0.5 * pow((w[i] - wp) / (sigma[i] * w[i]), 2.0))\n        sj[i] = 320 * pow(Hs, 2) * pow(w[i], -5.0) / pow(Tp, 4) * exp(-1950 * pow(w[i], -4) / pow(Tp, 4)) * pow(gamma, a[i])\n\n    return sj\n</code></pre>\n\n<p>original code:</p>\n\n<pre><code>def jonswap(w: np.ndarray, Hs: float, Tp: float, gamma: float = 3.7) -&gt; np.ndarray:\n    '''\n    get Jonswap spectra\n    :param w: np.ndarray Angular Frequency\n    '''\n    omega = w\n    wp = 2 * np.pi / Tp\n    sigma = np.where(omega &lt; wp, 0.07, 0.09)\n    a = np.exp(-0.5 * np.power((omega - wp) / (sigma * omega), 2.0))\n    sj = 320 * np.power(Hs, 2) * np.power(omega, -5.0) / np.power(Tp, 4) * \\\n          np.exp(-1950 * np.power(omega, -4) / np.power(Tp, 4)) * np.power(gamma, a)\n\n    return sj\n</code></pre>\n"}, {"tags": ["c", "strncmp"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1541599118, "post_id": 53190911, "comment_id": 93270590, "body": "<code>scanf(&quot;%c&quot;,&amp;input);</code> can&#39;t be correct, no matter the input"}, {"owner": {"reputation": 1412, "user_id": 3809561, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RTS59.jpg?s=128&g=1", "display_name": "yyny", "link": "https://stackoverflow.com/users/3809561/yyny"}, "edited": false, "score": 0, "creation_date": 1541599123, "post_id": 53190911, "comment_id": 93270592, "body": "probably scanf includes a newline?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 2, "creation_date": 1541599131, "post_id": 53190911, "comment_id": 93270597, "body": "What if you replace <code>%c</code> with <code>%s</code>?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1541599151, "post_id": 53190911, "comment_id": 93270604, "body": "Use <code>scanf(&quot;%s&quot;,input);</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541599187, "post_id": 53190911, "comment_id": 93270632, "body": "The <code>&quot;%c&quot;</code> format is to read a <i>single character</i>. It will be written into the first position of an array that is full of <i>indeterminate data</i> (which will seem random) without the ending null-terminator needed by all string functions."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1541599248, "post_id": 53190911, "comment_id": 93270661, "body": "Yes you were right @MathieuBunel it should be %s, thank you!"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541599379, "post_id": 53190911, "comment_id": 93270755, "body": "@Someprogrammerdude <i>The &quot;%c&quot; format is to read a single character.</i>  Maybe.  By passing the address of an array for a <code>%c</code> format specifier, undefined behavior is invoked.  It <i>probably</i> does read a single <code>char</code> into the first element of the array."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541599608, "post_id": 53190911, "comment_id": 93270889, "body": "You have an infinite loop since <code>flag</code> is never changed."}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 3, "last_activity_date": 1541599264, "creation_date": 1541599264, "answer_id": 53190991, "question_id": 53190911, "link": "https://stackoverflow.com/questions/53190911/strncmp-doesnt-return-0-on-equal-strings/53190991#53190991", "title": "strncmp doesn&#39;t return 0 on equal strings", "body": "<p>This</p>\n\n<pre><code>scanf(\"%c\",&amp;input);\n</code></pre>\n\n<p>reads just a single <code>char</code> - maybe. It's wrong - pay attention to the errors and warnings you get from your compiler.</p>\n\n<p>The format specifier is not correct - <code>%c</code> means <code>scanf()</code> will attempt to read a <code>char</code>, but you're passing the address of a <code>char[100]</code> array.  That's undefined behavior, so anything might happen.</p>\n\n<p>You're also not checking the return value to see if <code>scanf()</code> worked at all, so you don't really know what's in <code>input</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 585, "user_id": 4617334, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/GwUnw.jpg?s=128&g=1", "display_name": "Madhusoodan P", "link": "https://stackoverflow.com/users/4617334/madhusoodan-p"}, "edited": false, "score": 3, "creation_date": 1541599951, "post_id": 53191005, "comment_id": 93271065, "body": "<code>&amp;input</code> is still incorrect. You need to use just <code>input</code>"}], "tags": [], "owner": {"reputation": 834, "user_id": 7116608, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7b4348cb1cc2d16ddd557311af382e4?s=128&d=identicon&r=PG&f=1", "display_name": "Capie", "link": "https://stackoverflow.com/users/7116608/capie"}, "is_accepted": false, "score": -1, "last_activity_date": 1541774199, "last_edit_date": 1541774199, "creation_date": 1541599308, "answer_id": 53191005, "question_id": 53190911, "link": "https://stackoverflow.com/questions/53190911/strncmp-doesnt-return-0-on-equal-strings/53191005#53191005", "title": "strncmp doesn&#39;t return 0 on equal strings", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  char *strArray[100];\n  int strLengths[100];\n  char input[100];\n  int flag = 0;\n  do {\n    scanf(\"%s\",input);  //%c is for a single char and %s is for strings.\n      if(strncmp(\"end\",input,3) == 0) {\n        printf(\"end\\n\");\n      }\n      printf(\"%d\\n\",strncmp(\"end\",input,3));\n    } while(flag !=0);\n  return 0;\n}\n</code></pre>\n\n<p>Next time print the input before continuing to confirm that you are doing it correct.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541601688, "post_id": 53191047, "comment_id": 93272075, "body": "Accurate diagnosis.  Pity there\u2019s no explicit prescription."}], "tags": [], "owner": {"reputation": 48, "user_id": 9624270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd376a44ee28bc9911d79bd0f53e670?s=128&d=identicon&r=PG&f=1", "display_name": "CimCim", "link": "https://stackoverflow.com/users/9624270/cimcim"}, "is_accepted": false, "score": 0, "last_activity_date": 1541599424, "creation_date": 1541599424, "answer_id": 53191047, "question_id": 53190911, "link": "https://stackoverflow.com/questions/53190911/strncmp-doesnt-return-0-on-equal-strings/53191047#53191047", "title": "strncmp doesn&#39;t return 0 on equal strings", "body": "<p>In your case, the strings compared with <code>strncmp(\"end\",input,3) == 0</code> will never match as <code>input</code> will contains only one character.</p>\n\n<p>The call <code>scanf(\"%c\",&amp;input);</code> will read only the 1st character entered, and will store it in <code>input</code></p>\n"}], "owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53190991, "answer_count": 3, "score": -4, "last_activity_date": 1541774199, "creation_date": 1541599025, "last_edit_date": 1541599091, "question_id": 53190911, "link": "https://stackoverflow.com/questions/53190911/strncmp-doesnt-return-0-on-equal-strings", "title": "strncmp doesn&#39;t return 0 on equal strings", "body": "<p>Shouldn't the <code>strncmp(\"end\",input,3) == 0</code> return 0 if the input is end? It returns a number > 0 though. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  char *strArray[100];\n  int strLengths[100];\n  char input[100];\n  int flag = 0;\n  do {\n    scanf(\"%c\",&amp;input);\n      if(strncmp(\"end\",input,3) == 0) {\n        printf(\"end\\n\");\n      }\n      printf(\"%d\\n\",strncmp(\"end\",input,3));\n    } while(flag !=0);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "nodes", "singly-linked-list"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1541598697, "post_id": 53190809, "comment_id": 93270381, "body": "Welcome to Stack Overflow! Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/help/how-to-ask\"><i>How To Ask A Good Question</i></a> and <a href=\"https://stackoverflow.com/help/mcve\"><i>How To Create A Minimal, Complete, And Verifiable Example</i></a>."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541598872, "post_id": 53190809, "comment_id": 93270465, "body": "You should probably have a pointer named <code>head</code>. <code>free</code> memory of single element than set <code>head</code> to <code>NULL</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541599033, "post_id": 53190809, "comment_id": 93270554, "body": "When dealing with linked lists, I really recommend you do it all on paper first, using boxes for the nodes and arrows for the links. Draw up all your cases (there are really only four cases: node first in list, node last in list, node only in list, and node in middle of list), and attempt to &quot;remove&quot; the node by redrawing the arrows. When you think you got it, <i>then</i> write code to do it. And always test your newly written code <i>before</i> you continue with the next bit. Do this for all operations on your list, starting with adding nodes."}], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 9744901, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sXGi62RFook/AAAAAAAAAAI/AAAAAAAAACE/bxtGurO5Q50/photo.jpg?sz=128", "display_name": "theredcap", "link": "https://stackoverflow.com/users/9744901/theredcap"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1541673654, "post_id": 53192103, "comment_id": 93300176, "body": "Thank you for the review"}], "tags": [], "owner": {"reputation": 502, "user_id": 9744901, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sXGi62RFook/AAAAAAAAAAI/AAAAAAAAACE/bxtGurO5Q50/photo.jpg?sz=128", "display_name": "theredcap", "link": "https://stackoverflow.com/users/9744901/theredcap"}, "is_accepted": false, "score": 0, "last_activity_date": 1541673755, "last_edit_date": 1541673755, "creation_date": 1541602982, "answer_id": 53192103, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list/53192103#53192103", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>In linked list, deletion of node can be done in different way. </p>\n\n<h3>A) Deletion of first node</h3>\n\n<p>Algorithm:</p>\n\n<pre><code>Step1: temp = head\nStep2: temp = temp-&gt;next\nStep3: free(temp)\nStep4: head = NULL\n</code></pre>\n\n<h3>B) Deletion of Last node</h3>\n\n<p>Algorithm</p>\n\n<pre><code>Step1: p = head\nStep2: while p-&gt;next-&gt;next != NULL \n         p = p-&gt;next\nStep3: temp = p-&gt;next\nStep4: p-&gt;next = NULL\nStep5: free(temp)\n</code></pre>\n\n<h3>C) Deletion of node in between.</h3>\n\n<p>Algorithm:</p>\n\n<pre><code>Step1: p = head\nStep2: while POSITION &gt; 2 #Indexing from 1\n         p = p-&gt;next\n         POSITION = POSITION - 1\nStep3: temp = p-&gt;next\nStep4: p-&gt;next = p-&gt;next-&gt;next\nStep5: free(temp)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1082, "user_id": 10575208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGzxv.png?s=128&g=1", "display_name": "iElden", "link": "https://stackoverflow.com/users/10575208/ielden"}, "is_accepted": false, "score": 0, "last_activity_date": 1541603326, "creation_date": 1541603326, "answer_id": 53192218, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list/53192218#53192218", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>Your \"linked list\" is just a pointer on the first element of your list.</p>\n\n<pre><code>MyStruct *my_list;\n</code></pre>\n\n<p>So, if my_list->next is null, it's means it's you have only one element in your list.\nIf you want remove him, it's simple :</p>\n\n<pre><code>free(my_list)\nmy_list = NULL;\n</code></pre>\n\n<p>Your list is now empty (don't try to read this ;) )</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1541604354, "last_edit_date": 1541604354, "creation_date": 1541603914, "answer_id": 53192387, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list/53192387#53192387", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>When removing an element from a list, there are two special cases to worry about: the first element and the last element, and sometimes they are the same element.</p>\n\n<p>Both can be handled like this:</p>\n\n<pre><code>typedef struct node {\n    int val;\n    struct node *next;\n} node;\n\nvoid deleteNode(node **head, int value) {\n    node *prev = NULL, *curr = *head;\n\n    // look for the node to delete\n    while (curr &amp;&amp; curr-&gt;value != value) {\n        prev = curr;\n        curr = curr-&gt;next;\n    }\n\n    if (curr == NULL) {\n        printf(\"node to delete not found\\n\");\n    } else if (prev == NULL) {\n        // need to delete the first node, so repoint head to next node\n        *head = (*head)-&gt;next;\n    } else {\n        // deleting an internal node, so have the previous point to the current's next\n        prev-&gt;next = curr-&gt;next;\n    }\n    // no need to check for the last node \n    // since we're copying next which may or may not be NULL\n\n    free(curr);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 0, "last_activity_date": 1541605077, "last_edit_date": 1541605077, "creation_date": 1541604552, "answer_id": 53192590, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list/53192590#53192590", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>It totally depends on your implementation of linked list.</p>\n\n<p>A few possible implementations are possible.</p>\n\n<ul>\n<li>linear linked list with external pointer to start node \n\n<ul>\n<li>pointer to NULL if empty</li>\n<li>last node NULL</li>\n</ul></li>\n<li>circular linked lists with external pointer to the start node\n\n<ul>\n<li>if only one element, it points to itself and the external element points to the only element</li>\n<li>if no element the external pointer is NULL</li>\n</ul></li>\n<li>circular linked lists with one element as the head element\n\n<ul>\n<li>if empty the head-element points to itself</li>\n</ul></li>\n<li>encapsulated into structure\n\n<ul>\n<li>one of the above link schemes </li>\n<li>with additional end pointer for faster end-insertion</li>\n</ul></li>\n</ul>\n\n<p>Depending on the structure of the list the implementation may differ.</p>\n\n<p>On general base you can say, that you start with a pointer <code>H</code>, that points to an element <code>E</code> and that element has a <code>next</code> pointer to the successor <code>S</code>.</p>\n\n<p>You are right that you set <code>H</code> to content of <code>next</code>. since <code>H</code> and <code>E</code> has to be valid, there should no segmentation fault.</p>\n\n<p>On the most simple form (unchecked/uncompiled code - should just show the principle):</p>\n\n<pre><code>typedef struct ListNode{\n  void* data,\n  struct ListNode* next;\n}ListNode;\n\n/**\n  *  \\brief  removes an element from the linked list \n  *\n  *  \\param  io_el  the 'next' pointer of the previous \n  *                 element or the pointer to the head\n  *  \\return the pointer to the removed element\n  *  \n  *  \\details\n  *  uses the io_el pointer to advance to the next list element and \n  *  sets the io_el pointer to the content of the next pointer of\n  *  this element. This effectivly removes the element from the chain.\n  *  The removed element is returned so that it may be free'd if necessary. \n  */\nNode* ListDeleteElement(Node** io_el){\n  Node* res = NULL;\n  if( io_el &amp;&amp; *io_el){\n    res = *io_el;\n    *io_el = (*io_el)-&gt;next;\n  }\n}\n</code></pre>\n\n<p>considering the following list.</p>\n\n<pre><code>Node E1 ,E2,E3;\nNode* H = &amp;E1;\nE1.next = &amp;E2;\nE2.next = &amp;E3;\nE3.next = NULL;\n\n// (H = ) E1 -&gt; E2 -&gt; E3 -&gt; NULL\n\n// remove E3;\nListDeleteElement( &amp;(H-&gt;next-&gt;next) ); // passes pointer to the nextpointer of E2, \n// E2.next should be NULL now\n// (H = ) E1 -&gt; E2 -&gt; NULL\n\n// remove E1\nListDeleteElement( &amp;H ); \n// *H should now be E2\n// (H = ) E2 -&gt; NULL\n\n// again remove first element\nListDeleteElement( &amp;H ); \n// (H = ) NULL\n</code></pre>\n\n<p>This implementation is kind of dangerous - it is absolutely necessary that the passed pointer is the pointer to head or a pointer to a <code>next</code> pointer of an actual element of the list.</p>\n\n<p>Passing addresses of arbitrary pointer into the list structure damages the list.</p>\n\n<p>So this code should be used as internal helper function that is been wrapped by some more high level function or should be used in small local lists in that are not passed to other program parts. In this case i would design a more robust list class.</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1541606311, "creation_date": 1541606311, "answer_id": 53193135, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list/53193135#53193135", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>When you delete a node which is <strong>not</strong> the first node the steps are</p>\n\n<p>1) <code>previous_node-&gt;next = node_to_delete-&gt;next;</code></p>\n\n<p>2) <code>free(node_to_delete)</code></p>\n\n<p>When you delete a node which <strong>is</strong> the first node you <strong>skip step 1</strong> as there is no previous_node. Instead you have to update the head of the list like:</p>\n\n<p>3) <code>head = node_to_delete-&gt;next;</code></p>\n\n<p>This can be implemented in many ways. For instance something like:</p>\n\n<pre><code>node* delete(node* head, int n)\n{\n    node* prev = NULL;\n    node* temp = head;\n\n    while (temp)\n    {\n        if (temp-&gt;value == n) \n        {\n            if (prev)\n            {\n                // All except first node\n                prev-&gt;next = temp-&gt;next;\n            }\n            else\n            {\n                // First node\n                head = temp-&gt;next;\n            }\n            free(temp);\n            return head;\n        }\n        prev = temp;\n        temp = temp-&gt;next;\n    }\n\n    return head;\n}\n</code></pre>\n\n<p>and call it like:</p>\n\n<pre><code>head = delete(head, 42);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 836, "user_id": 7972621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbR4t.jpg?s=128&g=1", "display_name": "Ankit Sharma", "link": "https://stackoverflow.com/users/7972621/ankit-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1541833356, "creation_date": 1541833356, "answer_id": 53236751, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list/53236751#53236751", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>1: If the element is the head.</p>\n\n<pre><code>   nodeptr deleteBeginning(nodeptr head){\n        nodeptr current = head;\n        head= head-&gt;next;\n        free(current);\n        return head;\n   }\n</code></pre>\n\n<p>2: For the rest of the elements.</p>\n\n<pre><code>   nodeptr deleteNode(nodeptr head, int value){\n    if(value == head-&gt;data) {\n        head = deleteBeginning(head);\n        return head;\n    }\n\n    nodeptr current = head;\n    nodeptr previous;\n\n    while(current-&gt;data != value){\n        previous = current;\n        current = current-&gt;next;\n    }\n\n    previous-&gt;next = current-&gt;next;\n    free(current);\n    return head;\n   }\n</code></pre>\n\n<p>nodeptr is just the typedef for struct Node*</p>\n"}], "owner": {"reputation": 51, "user_id": 10618506, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156036148965885/picture?type=large", "display_name": "Somron Touch", "link": "https://stackoverflow.com/users/10618506/somron-touch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1018, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1541833356, "creation_date": 1541598640, "last_edit_date": 1541609166, "question_id": 53190809, "link": "https://stackoverflow.com/questions/53190809/c-deleting-node-when-theres-only-1-element-in-a-single-linked-list", "title": "C - Deleting Node when there&#39;s only 1 element in a single Linked List", "body": "<p>\nHey guys, So I understand that to delete nodes when there are multiple elements in a linked list, you take the previous node from the current node which you want to be deleted and point it to <code>current-&gt;next</code>, and then you <code>free()</code> the current Node. </p>\n\n<p>But my issue is when I only have one element in a single Linked List, I seem to get segmentation fault(core dump) when I try to delete the node, I'm assuming it is because in this scenario <code>current-&gt;next</code> would point to <code>NULL</code> (I might be wrong here). Also Let's say I have a node that stores a value of 5, a common problem I run into is instead of deleting the node, it changes the value to 0.</p>\n\n<p>Question:\nI am not asking anyone to fix my code, which is why I decided not to post code, but my question is how would I approach this deleting a node when it is the only element in the linked list? How does deleting a node that only has one element in the linked list different to when there are multiple elements. </p>\n\n<p>Thank you so much for your help, I am sorry if things are unclear, but I really wanted to give context first before asking my question.</p>\n"}, {"tags": ["c++", "c", "pthreads"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1541598639, "post_id": 53190760, "comment_id": 93270350, "body": "If you call a function within a thread everything the function does is also within the thread. Is that what you&#39;re asking?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1541598657, "post_id": 53190760, "comment_id": 93270369, "body": "I&#39;m not sure what you are asking. But if you are asking whether or not it&#39;s safe to try to lock a mutex from multiple threads then my response would be that I don&#39;t see how a mutex could be useful if you couldn&#39;t try to lock it from multiple threads."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1541598794, "post_id": 53190760, "comment_id": 93270426, "body": "Provide some code - to show the problem. Because taking what you are asking from the current wording -  the answers are already in comments"}, {"owner": {"reputation": 153, "user_id": 7452686, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404472329603931/picture?type=large", "display_name": "Jake McLaughlin", "link": "https://stackoverflow.com/users/7452686/jake-mclaughlin"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1541598849, "post_id": 53190760, "comment_id": 93270458, "body": "@Kevin yeah basically thankyou"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598859, "post_id": 53190760, "comment_id": 93270461, "body": "Yes, mutexs protect against data races.  A code example could let use know if you are using it correctly."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1541601395, "post_id": 53190760, "comment_id": 93271900, "body": "&quot;will it act accordingly?&quot; ... what do you think is &quot;accordingly&quot; ?"}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1541836471, "post_id": 53190760, "comment_id": 93360232, "body": "I have the feeling you think code that is running within a thread you have started is different from other code. However all code is running within a thread. Only the first thread that call&#39;s your main is created for you by the OS so it can start executing your program. So yes regardless from where you call lock_thread() it will work the same."}], "owner": {"reputation": 153, "user_id": 7452686, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404472329603931/picture?type=large", "display_name": "Jake McLaughlin", "link": "https://stackoverflow.com/users/7452686/jake-mclaughlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541846992, "creation_date": 1541598468, "last_edit_date": 1541624989, "question_id": 53190760, "link": "https://stackoverflow.com/questions/53190760/will-mutex-locking-outside-the-thread-function-still-lock-the-thread", "title": "Will mutex locking outside the thread function still lock the thread?", "body": "<p>I was wondering if I have a mutex lock variable shared by multiple classes, and within a thread I call a method on an object and I lock the mutex variable within that method will it act accordingly?</p>\n\n<p>I have the following header included in all files in my project so that I can use the mutex lock globally</p>\n\n<pre><code>#ifndef THREADS\n#define THREADS\n#include &lt;pthread.h&gt;\nextern pthread_mutex_t lock;\n#define lock_thread() pthread_mutex_lock(&amp;lock);\n#define unlock_thread() pthread_mutex_unlock(&amp;lock);\n#endif\n</code></pre>\n\n<p>So within my thread function I can lock and unlock when accessing critical sections:</p>\n\n<pre><code>lock_thread();\nuser = create_user(username, password, ID++, license_num, preg, disability, vehicle_type);\nunlock_thread();\n</code></pre>\n\n<p>Now after I create a user the user can access specific \"Actions\" that they have permissions for. Each Action is its own class with a \"perform\" method.</p>\n\n<p>For example:</p>\n\n<pre><code>Action newaction;\nnewaction.perform(socket, user.getID);\n</code></pre>\n\n<p>I pass in the socket for the current thread and users ID since it will interact with the database. Now if I choose to perform a \"lock_thread()\" within a perform method will it perform similarly to locking it within the thread function itself?</p>\n"}, {"tags": ["c", "loops", "scanf"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1541597813, "post_id": 53190532, "comment_id": 93269825, "body": "Some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is needed: what is <code>name</code>, for instance?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1541598059, "post_id": 53190532, "comment_id": 93269964, "body": "What do you expect <code>scanf(&quot;%[^\\n]*c&quot;,&amp;name);</code> to match? Scanf patterns are not regular expressions; both <code>*</code> and <code>c</code> will match only themselves (and that is guaranteed to fail)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541598158, "post_id": 53190532, "comment_id": 93270039, "body": "People... you are answering in the comment section!"}, {"owner": {"reputation": 19, "user_id": 10618562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1462170793819486/picture?type=large", "display_name": "Jomarie Cajes", "link": "https://stackoverflow.com/users/10618562/jomarie-cajes"}, "edited": false, "score": 0, "creation_date": 1541598270, "post_id": 53190532, "comment_id": 93270116, "body": "forgot to add the initialization sorry.."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541604354, "post_id": 53190688, "comment_id": 93273933, "body": "&quot;should be %[^\\n]%*c&quot; --&gt; <code>scanf(&quot;%[^\\n]%*c&quot;,name)</code>; is akin to <code>gets(name);</code> and neither should be used."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541604534, "post_id": 53190688, "comment_id": 93274067, "body": "@chux - Not quite like <code>gets</code>, because <code>scanf(&quot;%25[^\\n]%*c&quot;,name)</code>, but there is <i>no</i> way to make <code>gets</code> safe. And besides, I conclude with <code>fgets</code> being a superior alternative anywhere."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541604773, "post_id": 53190688, "comment_id": 93274224, "body": "<code>scanf(&quot;%25[^\\n]%*c&quot;,name)</code> is not safe either and it can overfill <code>char name[25];</code> and also has trouble with the corner case with input like <code>&quot;\\n&quot;</code>, leaving <code>name[]</code> unassigned.  Yes <code>fgets()</code> is better, yet then obliges<code>fgets()</code> with other input to do something to consume the <code>\\n</code> after <code>scanf(&quot;%d&quot;,&amp;time);</code> - which is what is suggested here - yet IMO, not clearly for all lines."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541604953, "post_id": 53190688, "comment_id": 93274342, "body": "@chux - You know you can post another answer, right?"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1541604576, "last_edit_date": 1541604576, "creation_date": 1541598253, "answer_id": 53190688, "question_id": 53190532, "link": "https://stackoverflow.com/questions/53190532/cant-understand-why-i-cant-loop-n/53190688#53190688", "title": "Can&#39;t understand why I can&#39;t loop %[^/n]", "body": "<p>To get the effect you seem to be after, <code>%[^\\n]*c</code> should be <code>%[^\\n]%*c</code>. You need a specifier for the first pattern and then a specifier for a single character. The way you have it written now has you asking <code>scanf</code> to match everything up to a newline, and then read the sequence <code>*c</code>.</p>\n\n<p>It can't read that sequence, but it matches the first specifier. So you end up with an unconsumed newline that is probably tripping your other input.</p>\n\n<p>There's also the potential problem of your <code>for (i=1;i&gt;=1;i++)</code>, that condition is fishy, and likely to go on for a while.</p>\n\n<p>Now, while this is all probably a fun exercise, I suggest you ditch <code>scanf</code> and switch to <code>fgets</code> to read lines of input. It's less cryptic, and it forces you to pass a buffer size, which makes using it somewhat easier and safer compared to <code>scanf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1541600247, "post_id": 53190929, "comment_id": 93271237, "body": "you could also do <code>if(!strcmp(name, &quot;none&quot;))</code> since <code>0</code> is treated the same as <code>false</code> in condition statements"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 2, "creation_date": 1541602047, "post_id": 53190929, "comment_id": 93272298, "body": "@Tau: it\u2019s better to use the explicit relational operators with <code>strcmp()</code> on the left as the operator then reflects the test the comparison is making. That is, <code>strcmp(a, b) == 0</code> tests for equality, <code>strcmp(a, b) &gt;= 0</code> tests whether <code>a</code> is greater than (sorts after) <code>b</code>, etc.  the comparison is always with0, of course."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1541605568, "post_id": 53190929, "comment_id": 93274708, "body": "The lack of <code>strcmp()</code> in <code>if (name == &#39;none&#39;)</code> is only half of the problem. The other half is that <code>&#39;none&#39;</code> is not a C string constant but a character constant (and rather a strange one): <a href=\"https://ideone.com/EnI9Rm\" rel=\"nofollow noreferrer\"><b>Live Demo on ideone</b></a>. (And this said, I ignore that <code>char*</code> is compared with <code>char</code> - I wonder that the compiler accepted it at all. To my surprise, it did.)"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 3, "last_activity_date": 1541606167, "last_edit_date": 1541606167, "creation_date": 1541599088, "answer_id": 53190929, "question_id": 53190532, "link": "https://stackoverflow.com/questions/53190532/cant-understand-why-i-cant-loop-n/53190929#53190929", "title": "Can&#39;t understand why I can&#39;t loop %[^/n]", "body": "<p>To complete the first answer, I noticed this problem:</p>\n\n<pre><code>if (name=='none')\n{\n    break;\n}\n</code></pre>\n\n<p>This form is not correct in C, you should:</p>\n\n<ul>\n<li>use <a href=\"https://linux.die.net/man/3/strcmp\" rel=\"nofollow noreferrer\"><code>strcmp</code></a> \nfunction,</li>\n<li>use <code>\"</code> instead of <code>'</code> to define a string:</li>\n</ul>\n\n<p><br></p>\n\n<pre><code>/* if two strings are the same --but not necessary at the same adress-- strcmp return 0*/\nif (0 == strcmp(name, \"none\"))\n{        \n    break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10365841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_Bjz4-hFTKA/AAAAAAAAAAI/AAAAAAAAAFo/GZGeLyB7DDk/photo.jpg?sz=128", "display_name": "Deep Chaudhary", "link": "https://stackoverflow.com/users/10365841/deep-chaudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1541605652, "last_edit_date": 1541605652, "creation_date": 1541605321, "answer_id": 53192811, "question_id": 53190532, "link": "https://stackoverflow.com/questions/53190532/cant-understand-why-i-cant-loop-n/53192811#53192811", "title": "Can&#39;t understand why I can&#39;t loop %[^/n]", "body": "<p>While taking a string input you are not required to use the reference operator '&amp;'. That's why in your first scanf statement use name instead of &amp;name. Also modify the input statement with %*c if you want to take newline character in the input as shown below. Other errors have been stated in the above answers.\nscanf(\"%[^\\n]\",name); OR\nscanf(\"%[^\\n]%*c\",name);</p>\n"}], "owner": {"reputation": 19, "user_id": 10618562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1462170793819486/picture?type=large", "display_name": "Jomarie Cajes", "link": "https://stackoverflow.com/users/10618562/jomarie-cajes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1541612627, "creation_date": 1541597750, "last_edit_date": 1541612627, "question_id": 53190532, "link": "https://stackoverflow.com/questions/53190532/cant-understand-why-i-cant-loop-n", "title": "Can&#39;t understand why I can&#39;t loop %[^/n]", "body": "<p>I can't seem to find where the problem is in here. </p>\n\n<p>During the first loop, I can enter the name of the creditor but I can't do that during the second loop.</p>\n\n<pre><code>int main(){\n    float cb,ir,si,sum=0,totaldebt;\n    int time,i;\n    char name[25];\n    printf(\"------------Welcome to Debt Management System-------------\");\n\n    for (i=1;i&gt;=1;i++){\n        printf(\"\\n%d)Name of the creditor: \",i);\n        scanf(\"%[^\\n]\",&amp;name);\n        printf(\"Enter your current balance: \");\n        scanf(\"%f\",&amp;cb);\n        printf(\"Enter its interest rate: \");\n        scanf(\"%f\",&amp;ir);\n        printf(\"Enter time for the loan: \");\n        scanf(\"%d\",&amp;time);\n        si=cb*ir*time/100;//simple interest\n        totaldebt=si+cb; //simple interest + current balance\n\n        if (name=='none'){\n            break;\n        }\n    sum+=totaldebt;\n}\n</code></pre>\n\n<p>It skip the <code>scanf</code> part and I somewhat guess that the reading part seems stuck by it's previous reading.</p>\n"}, {"tags": ["c", "serial-port", "embedded", "microcontroller"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1541596641, "post_id": 53190105, "comment_id": 93269251, "body": "Note that saying you want as fast and safe as possible is meaningless. You need to pick one that is more important, because to solution can differ based on your choice."}, {"owner": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1541599256, "post_id": 53190105, "comment_id": 93270668, "body": "Are you sure you want to have a buffer size of 65535 elements on a microcontroller??"}, {"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "reply_to_user": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1541604863, "post_id": 53190105, "comment_id": 93274272, "body": "@A.R.C. well when it has 1mb ram its ok I think!"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1541605425, "post_id": 53190105, "comment_id": 93274625, "body": "A packet approach for this type of interface is always a good idea.  You have to establish the buffer start in some way anyway.  My preference is start indicator, length and some sort of checksum.  If the length is always known/fixed then skip that."}, {"owner": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1541660904, "post_id": 53190105, "comment_id": 93293983, "body": "@DEKKER 1mb ram ok, which model are you using?"}, {"owner": {"reputation": 51497, "user_id": 49246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c421b43470bb8d3c099c5a847e588549?s=128&d=identicon&r=PG", "display_name": "starblue", "link": "https://stackoverflow.com/users/49246/starblue"}, "edited": false, "score": 0, "creation_date": 1541686340, "post_id": 53190105, "comment_id": 93306843, "body": "Why do you use 0xffff (65535 elements) and not 0x10000 (65536)?"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1541597568, "creation_date": 1541597568, "answer_id": 53190490, "question_id": 53190105, "link": "https://stackoverflow.com/questions/53190105/transfering-a-block-of-data-from-a-microcontroller-to-a-pc-using-the-serial-port/53190490#53190490", "title": "Transfering a block of data from a microcontroller to a PC using the serial port", "body": "<blockquote>\n  <p>Do I need a synchronous or asynchronous connection?</p>\n</blockquote>\n\n<p>UART is always asynchronous, hence the name Universal Asynchronous Receiver-Transmitter.</p>\n\n<blockquote>\n  <p>Should I send each element one by one and wait for a ACK from PC for next transmit?</p>\n</blockquote>\n\n<p>This is a safe way to do it. If the PC echoes each character received, the MCU can verify that the data went through correctly. That way you can usually skip checksums. The downside is that you lose half the speed.</p>\n\n<blockquote>\n  <p>How it can be implemented in burst mode?\n  Do I need to make a kind of packet, e.g. 6 bytes </p>\n</blockquote>\n\n<p>With some manner of carrier protocol, containing synch, size, data, checksum etc. Might be a bit overkill here.</p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 822279, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9043a8082fb439bfcb6599d029ce108c?s=128&d=identicon&r=PG", "display_name": "Spectrem", "link": "https://stackoverflow.com/users/822279/spectrem"}, "is_accepted": false, "score": 2, "last_activity_date": 1541618234, "creation_date": 1541618234, "answer_id": 53196304, "question_id": 53190105, "link": "https://stackoverflow.com/questions/53190105/transfering-a-block-of-data-from-a-microcontroller-to-a-pc-using-the-serial-port/53196304#53196304", "title": "Transfering a block of data from a microcontroller to a PC using the serial port", "body": "<p>You need to connect a USB cable from your PC to the UART peripheral. </p>\n\n<p>Something like this will work</p>\n\n<p><a href=\"https://rads.stackoverflow.com/amzn/click/com/B07FXT9YZ5\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">https://www.amazon.com/3-3V-Serial-Cable-Terminated-Header/dp/B07FXT9YZ5/ref=sr_1_2_sspa?ie=UTF8&amp;qid=1541617175&amp;sr=8-2-spons&amp;keywords=uart+usb&amp;psc=1</a></p>\n\n<p>To capture the data, you can have a terminal program such as realterm to log the data.</p>\n\n<blockquote>\n  <p>Do I need a synchronous or asynchronous connection?</p>\n</blockquote>\n\n<p>Asynchronous</p>\n\n<blockquote>\n  <p>Should I send each element one by one and wait for a ACK from PC for next transmit?</p>\n</blockquote>\n\n<p>This will be more complicated than its worth. Your PC is much faster than the micro. It should be able to handle CRC calculations if you decide to use them.</p>\n\n<blockquote>\n  <p>How it can be implemented in burst mode?</p>\n</blockquote>\n\n<p>Do you need a burst mode? Unless the analog device you are gathering this information is not gathering data at a constant speed, then burst does not make sense, b/c you can increase the baud up to 921600 baud rate.</p>\n\n<blockquote>\n  <p>Do I need to make a kind of packet, e.g. 6 bytes</p>\n</blockquote>\n\n<p>If you are using some type of terminal program such as Realterm, then it handles all that for you since the STM outputs a UART protocol depending on how you initialized the peripheral. </p>\n\n<p>I am not familiar with qt to know if there is a library you can pull from to capture UART protocol. </p>\n\n<p>If you do not need a live graph, you can log the data using Realterm, and then analyze the data later via excel or any other preferred method.</p>\n\n<p>I know that python has great libraries for real time graphing and capturing COM port data.</p>\n"}], "owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541754188, "creation_date": 1541596108, "last_edit_date": 1541754188, "question_id": 53190105, "link": "https://stackoverflow.com/questions/53190105/transfering-a-block-of-data-from-a-microcontroller-to-a-pc-using-the-serial-port", "title": "Transfering a block of data from a microcontroller to a PC using the serial port", "body": "<p>In my project I have a microcontroller that I need to query for a fixed amount of data. The MCU is and STM32 and my GUI application is based on Qt framework.</p>\n\n<p>There is a buffer of 16bit data in the microcontroller that gets filled by some data. I have defined it like this:</p>\n\n<pre><code>uint16_t buffer[0xFFFF] = { 0 };\n</code></pre>\n\n<p>Everything works fine in the micro and debugger shows that the buffer contains correct data after some operation/calculation phase.</p>\n\n<p>But now I need to transfer this buffer into a PC using serial port. My question is what would be the correct approach to make sure I get each and every data of this buffer correctly in my GUI application?</p>\n\n<p>This should be as fast as possible (the baud rate is 115200) and as safe as possible e.g. all the 65536 elements should be transferred into the PC in correct order (to draw a waveform out of them).</p>\n\n<p>So, how should I approach this? e.g:</p>\n\n<ul>\n<li>Do I need a synchronous or asynchronous connection?</li>\n<li>Should I send each element one by one and wait for a ACK from PC for next transmit?</li>\n<li>How it can be implemented in burst mode?</li>\n<li>Do I need to make a kind of packet, e.g. 6 bytes\n\n<ul>\n<li>_START_BYTE_ . _COUNTER_H_ . _COUNTER_L_ .  _DATA_H_ . _DATA_L_ . _END_BYTE_ </li>\n</ul></li>\n</ul>\n\n<p>I am not asking for code (yet I appreciate it). I am interested to know the best possible approach!</p>\n"}, {"tags": ["c", "makefile", "build"], "comments": [{"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1541594499, "post_id": 53189582, "comment_id": 93268232, "body": "A third party library could be provided as source code you compile with your application, as a static library, or as a dynamic library.  How you would work with it depends which type of library you use.  As for checking dependencies, something like the autotools autoconfig can check things in the environment"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 6551258, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-Ee61haPeFP8/AAAAAAAAAAI/AAAAAAAAAQ0/jUHcOrjj5Ew/photo.jpg?sz=128", "display_name": "Evgeny Ignatik", "link": "https://stackoverflow.com/users/6551258/evgeny-ignatik"}, "is_accepted": false, "score": 1, "last_activity_date": 1541594789, "creation_date": 1541594789, "answer_id": 53189733, "question_id": 53189582, "link": "https://stackoverflow.com/questions/53189582/installing-a-3rd-party-libraries-to-use-in-my-c-program/53189733#53189733", "title": "Installing a 3rd-party libraries to use in my C program", "body": "<p>If you are under the Linux that this might be helpful. There is a canonical way. This is \u201cautotools\u201d. It provides you with possibility to write some script to check that library exists and then use it. I\u2019m not much familiar with this process, but it\u2019s pretty configurable and you can find dozens of examples and tutorials regarding \u201cautotools\u201d. So, if this is a case of yours, I suggest you to check that.</p>\n\n<p>In my experience, I always used CMake. </p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 337156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228e002fe5d793c790597502a4bd9255?s=128&d=identicon&r=PG", "display_name": "comrad", "link": "https://stackoverflow.com/users/337156/comrad"}, "is_accepted": false, "score": 2, "last_activity_date": 1541595007, "creation_date": 1541595007, "answer_id": 53189791, "question_id": 53189582, "link": "https://stackoverflow.com/questions/53189582/installing-a-3rd-party-libraries-to-use-in-my-c-program/53189791#53189791", "title": "Installing a 3rd-party libraries to use in my C program", "body": "<p>When you build on Linux using the autotools it will check if the given library is present on the System. If it is missing the configure will stop and notice the user. The user then has the Chance to install the Software library with the system's repository.</p>\n\n<p>Same with cmake where you can define the dependency and when trying to build with the missing library, cmake will notify you.</p>\n\n<p>This is somewhat different than e.g. Maven in the Java world which automatically downloads the dependencies. This is not the case with make or cmake.</p>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541595007, "creation_date": 1541594052, "question_id": 53189582, "link": "https://stackoverflow.com/questions/53189582/installing-a-3rd-party-libraries-to-use-in-my-c-program", "title": "Installing a 3rd-party libraries to use in my C program", "body": "<p>I'm very new to <code>C</code> programming and I'm trying to understand what is the \"idiomatic way\" to install a 3rd-part library that I'm planning to use in my project. </p>\n\n<p>In the JVM world I came from we have a public repositories and a build system does all the dependency downloading for us. Is it the way to go when it comes to developing native application in <code>C</code>?</p>\n\n<p>In my particular case it is <code>libcurl</code> and I want to make sure it is installed correctly. As a build system I use <code>Make</code> (not <code>CMake</code>).</p>\n\n<p>Would it be correct to add a specific target (e.g. <code>bootstrap</code> which is to setup all the necessary dependencies) for that?</p>\n\n<p>I'm strictly speaking not sure if such a \"dependencies-installation\" is a <code>Makefile</code> responsibility.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1541593352, "post_id": 53189369, "comment_id": 93267637, "body": "<code>strlen(str)</code> on its own isn&#39;t a useful condition in your <code>for</code> loop -- it&#39;s always true, because any non-zero value will evaluate to true. You want <code>i &lt; strlen(str)</code> or better yet, <code>*p != &#39;\\0&#39;</code>."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1541593479, "post_id": 53189369, "comment_id": 93267709, "body": "@MOehm Shouldn&#39;t <code>strlen</code> become 0 when <code>p</code> reaches the end of the string? Of course it should be <code>strlen(p)</code>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1541593547, "post_id": 53189369, "comment_id": 93267767, "body": "@Osiris: Yes, that would be true if it were <code>strlen(p)</code>, but the code says <code>strlen(str)</code>. This code uses an unholy mix of indices and pointers."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10618245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd6d582c65525950f7b6149af109345?s=128&d=identicon&r=PG&f=1", "display_name": "Paul James", "link": "https://stackoverflow.com/users/10618245/paul-james"}, "edited": false, "score": 0, "creation_date": 1541593865, "post_id": 53189453, "comment_id": 93267943, "body": "Thank you Lundin :D"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1541593540, "creation_date": 1541593540, "answer_id": 53189453, "question_id": 53189369, "link": "https://stackoverflow.com/questions/53189369/trying-to-remove-whitespaces-and-replace-with-a-dash-c/53189453#53189453", "title": "Trying to remove whitespaces and replace with a dash - C", "body": "<p>Some problems: </p>\n\n<ul>\n<li><code>for (i; strlen(str); i++)</code> should be <code>for (i; i&lt;strlen(str); i++)</code>. Though preferably the <code>strlen</code> call should just be made once, before the loop.</li>\n<li><code>if (*p == ' ')</code> should result in <code>str2[i] = '-';</code>, <code>else</code> ... <code>str2[i] = *p;</code>.</li>\n<li><code>printf(\"%s\", &amp;str2);</code> should be <code>str2</code>.</li>\n</ul>\n\n<p>Enable compiler warnings, then read &amp; fix them when you encounter them.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 10618245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd6d582c65525950f7b6149af109345?s=128&d=identicon&r=PG&f=1", "display_name": "Paul James", "link": "https://stackoverflow.com/users/10618245/paul-james"}, "edited": false, "score": 0, "creation_date": 1541593850, "post_id": 53189466, "comment_id": 93267933, "body": "Thanks very much ! :D much appreicated"}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 3, "last_activity_date": 1541593599, "creation_date": 1541593599, "answer_id": 53189466, "question_id": 53189369, "link": "https://stackoverflow.com/questions/53189369/trying-to-remove-whitespaces-and-replace-with-a-dash-c/53189466#53189466", "title": "Trying to remove whitespaces and replace with a dash - C", "body": "<ol>\n<li><p>Your for condition is not correct.</p>\n\n<pre><code>for (i; strlen(str); i++) {\n</code></pre></li>\n</ol>\n\n<p>The first item is the initiaizer and the second item is the condition. The condition should be <code>i&lt;strlen(str)</code></p>\n\n<pre><code>for (i=0; i&lt; strlen(str); i++) {\n</code></pre>\n\n<ol start=\"2\">\n<li><p>The if condition is inverted. In the current case, you are replacing non space characters with space and space with <code>-</code>. Change it to.</p>\n\n<pre><code>if (*p != ' ') {\n</code></pre></li>\n<li><p><code>printf(\"%s\", &amp;str2);</code> printf with the <code>%s</code> takes address of the array, which is simply <code>str2</code>.  Change it to </p>\n\n<pre><code>printf(\"%s\", str2);\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1541596450, "last_edit_date": 1541596450, "creation_date": 1541594919, "answer_id": 53189774, "question_id": 53189369, "link": "https://stackoverflow.com/questions/53189369/trying-to-remove-whitespaces-and-replace-with-a-dash-c/53189774#53189774", "title": "Trying to remove whitespaces and replace with a dash - C", "body": "<p><code>*p == ' '</code> is backwards, should be <code>*p != ' '</code>.  </p>\n\n<p>Further, to remove \"whitepace\" and not just a <code>' '</code>, use the standard library <code>isspace()</code> function.  from <code>&lt;ctype.h&gt;</code>. It expects a value in the <code>unsigned char</code> range or <code>EOF</code>.</p>\n\n<pre><code>//if (*p == ' ') {\n//  str2[i] = *p;\nif (isspace((unsigned char) *p) {\n  str2[i] = '-';\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>I am not sure why this is not working for myself.</p>\n</blockquote>\n\n<p>The loop never ends.</p>\n\n<p><code>strlen(str)</code> in <code>for (i; strlen(str); i++)</code> only tests it the original string is not empty.  Not a useful loop test <a href=\"https://stackoverflow.com/questions/53189369/trying-to-remove-whitespaces-and-replace-with-a-dash-c#comment93267637_53189369\">@M Oehm</a>.</p>\n\n<p>Instead simply test if the <em>null character</em> is indexed.</p>\n\n<pre><code>// for (i; strlen(str); i++) {\nfor (i; str[i]; i++) {\n// or \nfor (i; str[i] != '\\0'; i++) {\n// or \nfor (i; *p; i++) {\n// or \nfor (i; *p != '\\0'; i++) {\n</code></pre>\n\n<p><strong>Important</strong>: After the loop, <em>null character</em> terminate <code>str2[]</code>.</p>\n\n<pre><code>str2[i] = '\\0';\n</code></pre>\n\n<hr>\n\n<p>Along with some other improvements, a candidate solution:</p>\n\n<pre><code>int main() {\n  const char str[] = \"hello this is a test\";\n  char str2[sizeof str];\n\n  size_t i = 0;\n  do {\n    str2[i] = isspace((unsigned char) str[i]) ? '-' : str[i];\n  } while (str[i++]);\n\n  printf(\"%s\\n\", str2);\n  _getch();\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10618245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd6d582c65525950f7b6149af109345?s=128&d=identicon&r=PG&f=1", "display_name": "Paul James", "link": "https://stackoverflow.com/users/10618245/paul-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53189466, "answer_count": 3, "score": 0, "last_activity_date": 1541596450, "creation_date": 1541593232, "question_id": 53189369, "link": "https://stackoverflow.com/questions/53189369/trying-to-remove-whitespaces-and-replace-with-a-dash-c", "title": "Trying to remove whitespaces and replace with a dash - C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n   char str[] = \"hello this is a test\";\n   char str2[100];\n   int i = 0;\n   char *p = str;\n   for (i; strlen(str); i++) {\n    if (*p == ' ') {\n        str2[i] = *p;\n        p++;\n    }\n    else {\n        str2[i] = '-';\n        p++;\n    }\n   }\n printf(\"%s\", &amp;str2);\n _getch();\n}\n</code></pre>\n\n<p>I am trying to replace blankspaces with dashes using pointers. I am not sure why this is not working for myself. Any help would be much appreciated.</p>\n"}, {"tags": ["c", "gcc", "arm"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 4, "creation_date": 1541592512, "post_id": 53188894, "comment_id": 93267256, "body": "Not sure if dupe, but at least relevant: <a href=\"https://stackoverflow.com/q/19527897/694733\">How undefined are __builtin_ctz(0) or __builtin_clz(0)?</a>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1541595187, "post_id": 53188894, "comment_id": 93268523, "body": "Hmmm ... fix syntax and use <code>asm &quot;clz&quot;;</code>?"}, {"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1541595342, "post_id": 53188894, "comment_id": 93268590, "body": "@pmg i&#39;m afraid that using inline assembly tends to worsen compilers ability to optimize code. I might be wrong though."}], "answers": [{"comments": [{"owner": {"reputation": 2084, "user_id": 605307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0701a0034bcc346a1cf8399932a7cfd0?s=128&d=identicon&r=PG", "display_name": "cooperised", "link": "https://stackoverflow.com/users/605307/cooperised"}, "edited": false, "score": 0, "creation_date": 1541594961, "post_id": 53189237, "comment_id": 93268430, "body": "Presumably you mean &quot;you can <i>not</i> expect the compiler will provide your desired behavior&quot; at the end of the 1st paragraph?"}, {"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "edited": false, "score": 0, "creation_date": 1541595181, "post_id": 53189237, "comment_id": 93268519, "body": "Your answer does make sense but is that &quot;They are not guaranteed to compile to specific instructions.&quot; some kind of &#39;common knowledge&#39; or it is explicitly said in the docs somewhere?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "edited": false, "score": 0, "creation_date": 1541595443, "post_id": 53189237, "comment_id": 93268638, "body": "@Amomum: The GCC documentation specifies them as functions, not as instructions. See my new second paragraph."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "edited": false, "score": 2, "creation_date": 1541595565, "post_id": 53189237, "comment_id": 93268696, "body": "@Amomum, this is in the realm of &quot;why would you expect otherwise?&quot;  Just as Eric says, the documentation specifies these as <i>functions</i>.  What the compiler actually does with them is an implementation detail.  It is not safe or reasonable to assume anything more or different about them than the documentation says."}, {"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "edited": false, "score": 0, "creation_date": 1541596134, "post_id": 53189237, "comment_id": 93269011, "body": "Fair enough. Thanks!"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 7, "last_activity_date": 1541595402, "last_edit_date": 1541595402, "creation_date": 1541592725, "answer_id": 53189237, "question_id": 53188894, "link": "https://stackoverflow.com/questions/53188894/are-gcc-builtin-functions-guaranteed-to-be-replaced-by-matching-assembly-instr/53189237#53189237", "title": "Are gcc __builtin functions guaranteed to be replaced by matching assembly instructions?", "body": "<p>The builtins provide the functions described for them. They are not guaranteed to compile to specific instructions.</p>\n\n<p>Note that the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"noreferrer\">GCC documentation</a> says these are functions: \u201cGCC provides a large number of built-in functions.\u201d It does not tell you they generate specific instructions. For <code>__builtin_clz</code>, it says \u201cReturns the number of leading 0-bits in x, starting at the most significant bit position. If x is 0, the result is undefined.\u201d The documentation here simply means what it says: <code>__builtin_clz</code> is a function that returns the number of leading 0-bits in x, starting at the most significant bit position, and, if x is 0, the result is undefined. There is no statement in the documentation that <code>__builtin_clz</code> provides a count-leading-zeros instruction, so you cannot expect that it provides a count-leading-zeros instruction.</p>\n\n<p>The compiler is free to implement builtins in any way that provides the specified functions. Since the specified function has undefined behavior for zero, you cannot expect the compiler will provide your desired behavior for zero, via a <code>clz</code> instruction or otherwise.</p>\n\n<p>We can expect that optimization will generally use the obvious instructions when suitable. But the compiler may also combine the builtin functions with other code (possibly resulting in a code sequence in which the usual instruction is not needed or another instruction is better), evaluate constant expressions at compile-time, and make other non-obvious optimizations. Consider that, if the compiler recognizes a code path in which the argument to <code>__builtin_clz</code> is zero, it may replace that code path with anything, including deleting it entirely, since its behavior is undefined.</p>\n"}], "owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 53189237, "answer_count": 1, "score": 5, "last_activity_date": 1541595402, "creation_date": 1541591401, "question_id": 53188894, "link": "https://stackoverflow.com/questions/53188894/are-gcc-builtin-functions-guaranteed-to-be-replaced-by-matching-assembly-instr", "title": "Are gcc __builtin functions guaranteed to be replaced by matching assembly instructions?", "body": "<p>On ARM Cortex-M3, for example, <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0552a/BABBBJGA.html\" rel=\"noreferrer\">CLZ instruction is present</a>, it counts leading zeros of an 32 bit integer.\nIf integer is zero, result is 32.</p>\n\n<p>In gcc, on the other hand, I can use a __builtin_clz function. However, according to gcc documentation:</p>\n\n<blockquote>\n  <p>Built-in Function: int __builtin_clz (unsigned int x).<br>\n  Returns the number of leading 0-bits in x, starting at the most significant bit position. <strong>If x is 0, the result is undefined</strong>.</p>\n</blockquote>\n\n<p>So if using this builtin I should manually handle zero? Or is it guaranted to be compiled to CLZ instruction if such an instruction is present on target machine?</p>\n\n<p>Quotes from gcc documentation are highly appritiated!</p>\n"}, {"tags": ["c", "string", "malloc"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1541591482, "post_id": 53188796, "comment_id": 93266739, "body": "You&#39;re not allocating enough memory - you&#39;ve forgotten to take into account there are spaces in your string and also that you need space for the NUL terminating character too."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1541591666, "post_id": 53188796, "comment_id": 93266830, "body": "You have mixed up your variables: <code>memory</code> is an unsigned integer that should hold the number of bytes you need; <code>string</code> is a pointer to char that will be used as the handle to allocated memory,i.e. the return value of <code>malloc</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541594015, "post_id": 53188796, "comment_id": 93268012, "body": "Use <a href=\"http://man7.org/linux/man-pages/man3/asprintf.3.html\" rel=\"nofollow noreferrer\">asprintf</a>. If you don&#39;t have it, get the memory <i>size</i> of the string from <code>memory = snprintf(NULL, 0, ...</code>, see <a href=\"https://stackoverflow.com/questions/3774417/sprintf-with-automatic-memory-allocation\">this thread</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541601641, "post_id": 53188796, "comment_id": 93272048, "body": "<code>memory = malloc(...</code> This will not even compile cleanly. Did you actually read the compiler warnings?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "edited": false, "score": 0, "creation_date": 1541593160, "post_id": 53189014, "comment_id": 93267550, "body": "thanks for the answer. I always get an error, that intlen is invalid, but strlen is working, do you know what else can i use for that. I&#39;ve used your code now and it says: caanot assign to variable &quot;memory&quot; with const_qualified type const size_t (aka const unsigend long)"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541593638, "post_id": 53189014, "comment_id": 93267825, "body": "This is just pseudocode. It is expected that You to remove the <code>const</code> from <code>memory</code> variable declaration, also it is expected that you write <code>intlen</code> function which returns the length of representation of an number in a decimal system (base 10)."}, {"owner": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "edited": false, "score": 0, "creation_date": 1541595092, "post_id": 53189014, "comment_id": 93268483, "body": "sorry for asking, im completely new to this. How can i make such a intlen function. Something like int intlen = length of int?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1541595693, "post_id": 53189014, "comment_id": 93268766, "body": "I assumed you&#39;d written <code>intlen</code> already, but not included it. You could forget about using <code>intlen()</code> entirely since you know that the day will be at most 2 digits and year would be 4 (at least for the next 8000ish years)."}, {"owner": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "edited": false, "score": 0, "creation_date": 1541596162, "post_id": 53189014, "comment_id": 93269026, "body": "so i can just go for (strlen(dayofweek)+strlen(monat)+14) 14 bcause of 8 for spaces etc 4 for year and 2 for day, right?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1541596687, "post_id": 53189014, "comment_id": 93269275, "body": "Sure. You could even go further and use the length of the longest month and dayofweek too instead of <code>strlen()</code>- it depends on whether your task requires you to allocate the exact amount of memory required or not."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541596786, "post_id": 53189014, "comment_id": 93269327, "body": "Off by 1. Review <code>8</code>.  I&#39;d suggest <code>define FMT  &quot;%s der %d.%s %d\\n&quot; memory = malloc(strlen(dayofweek)+strlen(month)+intlen(day)+intlen(ye&zwnj;&#8203;ar) + sizeof FMT):  snprintf(string, memory, FMT, dayofweek, day, month, year);</code> and not worry about slightly over allocating.  Avoid magic numbers."}, {"owner": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "edited": false, "score": 0, "creation_date": 1541596796, "post_id": 53189014, "comment_id": 93269330, "body": "so chris, i dont know how to write code in the comments section, but it seems to work now. Sadly it is ignoring my memory allocation. I have declared &quot;size_t memory;&quot; and under that i wrote &quot;memory = (strlen(dayofweek)+strlen(month)+14); string=malloc(memory);&quot; if i change my number at the end to f.e. +7 it is still printing out everything just fine, so it is ignoring my  malloc."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1541597198, "post_id": 53189014, "comment_id": 93269529, "body": "if it is working, it can&#39;t be ignoring your memory allocation - it&#39;s the 2nd parameter to <code>snprintf</code> that limits how much is added to <code>string</code> - if you set it to less than enough it should truncate it"}, {"owner": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "edited": false, "score": 0, "creation_date": 1541598005, "post_id": 53189014, "comment_id": 93269928, "body": "whoops, was using sprintf, now everything works perfectly. Thank you very much chris!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541598997, "post_id": 53189014, "comment_id": 93270538, "body": "Use of magic numbers twice here 8 and 14 resulted in insufficient memory allocation and demonstrates how easily manual calculations can be wrong.  Should have been at least 9,15.  OP may not see this as <code>printf(&quot;%s\\n&quot;, string);</code> lacks sentinels to show the the <code>&#39;\\n&#39;</code> from the format was not written."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1541595778, "last_edit_date": 1541595778, "creation_date": 1541591831, "answer_id": 53189014, "question_id": 53188796, "link": "https://stackoverflow.com/questions/53188796/different-datatypes-how-to-store-them-all-in-one-string-and-how-to-allocate-dyn/53189014#53189014", "title": "Different datatypes: how to store them all in one string and how to allocate dynamic memory to it?", "body": "<p>Aside from not allocating enough memory, you've confused what <code>size_t</code> is for - it's for storing the size of things, not for storing memory. So you want to store the amount of memory you want to allocate in <code>memory</code>. And store the results of <code>malloc</code> in <code>string</code>.</p>\n\n<p>So you want something like this. The extra 8 is for the spaces and other characters in your output and the NUL terminating character.</p>\n\n<pre><code>memory = strlen(dayofweek)+strlen(month)+intlen(day)+intlen(year)+8;\nstring = malloc(memory);\n</code></pre>\n\n<p>Or if you don't write yourself <code>intlen</code></p>\n\n<pre><code>memory = strlen(dayofweek)+strlen(month)+14;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "edited": false, "score": 0, "creation_date": 1541620490, "post_id": 53190668, "comment_id": 93282195, "body": "@ManuelTietz This code has problems.   <code>size_t *memory</code> is a pointer assign spaced with <code>memory = (size_t*)malloc(...)</code>.  It should be an integer. What is needed here is <code>size_t memory = strlen(dayofweek) + (sizeof(char)*MONTH_BYTE_SIZE) +     (sizeof(char) * DAY_BYTE_SIZE) + (sizeof(char) * YEAR_BYTE_SIZE + some_more;</code>  If code works, it is due to <i>undefined behavior</i>."}], "tags": [], "owner": {"reputation": 80, "user_id": 2926044, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/532702508/picture?type=large", "display_name": "Cagri Candan", "link": "https://stackoverflow.com/users/2926044/cagri-candan"}, "is_accepted": true, "score": 0, "last_activity_date": 1541598205, "creation_date": 1541598205, "answer_id": 53190668, "question_id": 53188796, "link": "https://stackoverflow.com/questions/53188796/different-datatypes-how-to-store-them-all-in-one-string-and-how-to-allocate-dyn/53190668#53190668", "title": "Different datatypes: how to store them all in one string and how to allocate dynamic memory to it?", "body": "<p>As far as I know you C does not have intlen() function , at least not in the header files which you include your project. strlen() returns the length of  string but for others, you have to decide the needed amount of space for char by your self. Beside of this to able to use pointer you need to specify a memory block; otherwise you cannot use pointer like the definition of yours  char*string.To explain myself I attached two piece of code please check </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\nint intlen(int data4_allocate) {\n return floor(log10(abs(data4_allocate))) + 1;\n}\nint main() {\n\n    char dayofweek[] = \"Friday\";\n    int day = 13;\n    char month[] = \"May\";\n    int year = 1927;\n    char *string; //I want to save my date into this string\n    const size_t *memory;\n    //trying to allocate memory\n    memory = (size_t*)malloc(strlen(dayofweek) + strlen(month) + intlen(day) + \n    intlen(year));\n    string = (char*)malloc(sizeof(memory)+1);\n    //trying to write my strings and ints into one string\n    snprintf(string, (size_t)memory, \"%s der %d.%s %d\\n\", dayofweek, day, month, \n    year);\n\n    printf(\"%s\\n\", string);\n\n   free((char*)string);\n   return 0;\n}\n</code></pre>\n\n<p>or you can define a macro which determines the maximum byte length of given numbers  in that case your code might be like following code </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\nint main() {\n    #define MONTH_BYTE_SIZE 2 // 0 -- 12  max 2 char needed \n    #define DAY_BYTE_SIZE 2 // 0-31 max 2 char needed\n    #define YEAR_BYTE_SIZE 4 // 0--2999 max 4 char needed \n\n    char dayofweek[] = \"Friday\";\n    int day = 13;\n    char month[] = \"May\";\n    int year = 1927;\n    char *string; //I want to save my date into this string\n    const size_t *memory;\n\n   //trying to allocate memory\n   memory = (size_t*)malloc(strlen(dayofweek) + (sizeof(char)*MONTH_BYTE_SIZE) + \n   (sizeof(char) * DAY_BYTE_SIZE) + (sizeof(char) * YEAR_BYTE_SIZE));\n   string = (char*)malloc(sizeof(memory)+1);\n   //trying to write my strings and ints into one string\n   snprintf(string, (size_t)memory, \"%s der %d.%s %d\\n\", dayofweek, day, month, \n   year);\n   printf(\"%s\\n\", string);\n   free((char*)string);\n   return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>the result should be like </p>\n\n<p><a href=\"https://i.stack.imgur.com/g8Gsi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g8Gsi.png\" alt=\"this\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1541599181, "last_edit_date": 1541599181, "creation_date": 1541598787, "answer_id": 53190856, "question_id": 53188796, "link": "https://stackoverflow.com/questions/53188796/different-datatypes-how-to-store-them-all-in-one-string-and-how-to-allocate-dyn/53190856#53190856", "title": "Different datatypes: how to store them all in one string and how to allocate dynamic memory to it?", "body": "<blockquote>\n  <p>how to store them all in one string and how to allocate dynamic memory to it?</p>\n</blockquote>\n\n<p>Call <code>snprintf()</code> twice.  First to determine memory needs.  <a href=\"https://stackoverflow.com/questions/53188796/different-datatypes-how-to-store-them-all-in-one-string-and-how-to-allocate-dyn/53190856#comment93268012_53188796\">@Kamil Cuk</a></p>\n\n<blockquote>\n  <p>The <code>snprintf</code> function returns the number of characters that would have been written\n  had <code>n</code> been sufficiently large, not counting the terminating null character, or a negative value if an encoding error occurred. C11 \u00a77.21.6.5 3</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n  char dayofweek[] = \"Friday\";\n  int day = 13;\n  char month[] = \"May\";\n  int year = 1927; \n\n  int len = snprintf(NULL, 0, \"%s der %d.%s %d\\n\", dayofweek, day, month, year);\n  size_t memory = len + 1u;\n  char *string = malloc(memory);\n  len = snprintf(string, memory, \"%s der %d.%s %d\\n\", dayofweek, day, month, year);\n\n  printf(\"&lt;%s&gt;\\n\", string);\n\n  free(string);\n  return 0;\n}\n</code></pre>\n\n<p>Pedantic code would add checks to insure <code>len &gt;= 0</code> (2 places) and if allocation succeeded.</p>\n"}], "owner": {"reputation": 19, "user_id": 10618038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6B3NO4MNdI0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA0Vs7A7fZ4urnrGtMdBHS5pXXwuQ/mo/photo.jpg?sz=128", "display_name": "manu.kanu", "link": "https://stackoverflow.com/users/10618038/manu-kanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53190668, "answer_count": 3, "score": 0, "last_activity_date": 1541599181, "creation_date": 1541590966, "question_id": 53188796, "link": "https://stackoverflow.com/questions/53188796/different-datatypes-how-to-store-them-all-in-one-string-and-how-to-allocate-dyn", "title": "Different datatypes: how to store them all in one string and how to allocate dynamic memory to it?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n  char dayofweek[] = \"Friday\";\n  int day = 13;\n  char month[] = \"May\";\n  int year = 1927; \n  char *string; //I want to save my date into this string\n  const size_t memory;\n\n\n//trying to allocate memory\nmemory = malloc(strlen(dayofweek)+strlen(month)+intlen(day)+intlen(year));\n\n//trying to write my strings and ints into one string\nsnprintf(string, memory, \"%s der %d.%s %d\\n\", dayofweek, day, month, year);\n\n\nprintf(\"%s\\n\", string);\n\n\nfree(string);\nreturn 0;\n}\n</code></pre>\n\n<p>Hey guys, im completely new to programming, and i'm trying to find out how to save all my variables into one string, while allocating the needed memory. \nThe trainingtask was to learn how to use the snprintf function. The \"const size_t memory;\" was also given, but i dont know where i have to use it.</p>\n\n<p>hope you guys can help me, greetings!</p>\n"}, {"tags": ["c", "linux", "logrotate"], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1541597125, "post_id": 53189048, "comment_id": 93269497, "body": "Note that that this needs the &quot;copytruncate&quot; configuration for logrotate - is the fallback solution to be used if the logging program cannot be told to re-open it&#39;s log file. The program have to have opened the log file in append mode for it to work - and it can lose log messages. A better way is to have logrotate interact with the program (e.g. send it a unix signal, or use other program specifics) to have the program close and re-open the log file when it is rotated."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": true, "score": 2, "last_activity_date": 1541591956, "creation_date": 1541591956, "answer_id": 53189048, "question_id": 53188731, "link": "https://stackoverflow.com/questions/53188731/logging-compatibly-with-logrotate/53189048#53189048", "title": "Logging compatibly with logrotate", "body": "<blockquote>\n  <p>Normally, my program would open the log file when it starts, then\n  write entries as needed and then, finally, close the log file on exit.</p>\n  \n  <p>What do I need to do differently in order to support log rotation\n  using logrotate?</p>\n</blockquote>\n\n<p>No, your program should work as if it doesn't know anything about logrotate.</p>\n\n<blockquote>\n  <p>Do I need to do something about the old file and can I just create another file with the same name? </p>\n</blockquote>\n\n<p>No. There should be only one log file to be opened and be written. Logrotate will check that file and if it becomes too large, it does copy/save the old part, and truncate the current log file. Therefore, your program should work completely transparent - it doesn't need to know anything about logrotate.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 7, "last_activity_date": 1541596898, "last_edit_date": 1541596898, "creation_date": 1541596478, "answer_id": 53190212, "question_id": 53188731, "link": "https://stackoverflow.com/questions/53188731/logging-compatibly-with-logrotate/53190212#53190212", "title": "Logging compatibly with logrotate", "body": "<p>There are several common ways:</p>\n\n<ol>\n<li>you use <code>logrotate</code> and your program should be able to catch a signal (usually SIGHUP) as a request to close and reopen its log file. Then <code>logrotate</code> sends the signal in a postrotate script</li>\n<li>you use <code>logrotate</code> and your program is not aware of it, but can be restarted. Then <code>logrotate</code> restarts your program in a postrotate script. Cons: if the start of the program is expensive, this may be suboptimal</li>\n<li><p>you use <code>logrotate</code> and your program is not aware of it, but you pass the copytruncate option to <code>logrotate</code>. Then <code>logrotate</code> copies the file and then truncates it. Cons: in race conditions you can lose messages. From <code>rotatelog.conf</code> manpage</p>\n\n<blockquote>\n  <p>... Note that there is a very small time slice between copying the file and truncating it, so some logging data might be lost...</p>\n</blockquote></li>\n<li><p>you use <code>rotatelogs</code>, an utility for httpd Apache. Instead of writing directly to a file, you programs pipes its logs to <code>rotatelogs</code>. Then <code>rotatelogs</code> manages the different log files. Cons: your program should be able to log to a pipe or you will need to install a named fifo.</p></li>\n</ol>\n\n<p>But beware, for critical logs, it may be interesting to close the files after each message, because it ensures that everything has reached the disk in case of an application crash.</p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 4, "last_activity_date": 1541647087, "creation_date": 1541647087, "answer_id": 53201067, "question_id": 53188731, "link": "https://stackoverflow.com/questions/53188731/logging-compatibly-with-logrotate/53201067#53201067", "title": "Logging compatibly with logrotate", "body": "<p>Although <code>man logrotate</code> examples use the HUP signal, I recommend using <code>USR1</code> or <code>USR2</code>, as it is common to use HUP for \"reload configuration\". So, in logrotate configuration file, you'd have for example</p>\n\n<pre><code>/var/log/yourapp/log {\n    rotate 7\n    weekly\n    postrotate\n        /usr/bin/killall -USR1 yourapp\n    endscript\n}\n</code></pre>\n\n<p>The tricky bit is to handle the case where the signal arrives in the middle of logging. The fact that none of the locking primitives (other than <code>sem_post()</code>, which does not help here) are <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">async-signal safe</a> makes it an interesting issue.</p>\n\n<p>The easiest way to do it is to use a dedicated thread, waiting in <a href=\"http://man7.org/linux/man-pages/man2/sigwaitinfo.2.html\" rel=\"nofollow noreferrer\"><code>sigwaitinfo()</code></a>, with the signal blocked in all threads. At exit time, the process sends the signal itself, and joins the dedicated thread. For example,</p>\n\n<pre><code>#define  ROTATE_SIGNAL  SIGUSR1\n\nstatic pthread_t        log_thread;\nstatic pthread_mutex_t  log_lock = PTHREAD_MUTEX_INITIALIZER;\nstatic char            *log_path = NULL;\nstatic FILE *volatile   log_file = NULL;\n\nint log(const char *format, ...)\n{\n    va_list  args;\n    int      retval;\n\n    if (!format)\n        return -1;\n    if (!*format)\n        return 0;\n\n    va_start(args, format);\n    pthread_mutex_lock(&amp;log_lock);\n    if (!log_file)\n        return -1;\n    retval = vfprintf(log_file, format, args);\n    pthread_mutex_unlock(&amp;log_lock);\n    va_end(args);\n\n    return retval;\n}\n\nvoid *log_sighandler(void *unused)\n{\n    siginfo_t info;\n    sigset_t  sigs;\n    int       signum;\n\n    sigemptyset(&amp;sigs);\n    sigaddset(&amp;sigs, ROTATE_SIGNAL);\n\n    while (1) {\n\n        signum = sigwaitinfo(&amp;sigs, &amp;info);\n        if (signum != ROTATE_SIGNAL)\n            continue;\n\n        /* Sent by this process itself, for exiting? */\n        if (info.si_pid == getpid())\n            break;\n\n        pthread_mutex_lock(&amp;log_lock);\n        if (log_file) {\n            fflush(log_file);\n            fclose(log_file);\n            log_file = NULL;\n        }\n        if (log_path) {\n            log_file = fopen(log_path, \"a\");\n        }\n        pthread_mutex_unlock(&amp;log_lock);\n    }\n\n    /* Close time. */\n    pthread_mutex_lock(&amp;log_lock);\n    if (log_file) {\n        fflush(log_file);\n        fclose(log_file);\n        log_file = NULL;\n    }\n    pthread_mutex_unlock(&amp;log_lock);\n\n    return NULL;\n}\n\n/* Initialize logging to the specified path.\n   Returns 0 if successful, errno otherwise. */\nint log_init(const char *path)\n{\n    sigset_t          sigs;\n    pthread_attr_t    attrs;\n    int               retval;\n\n    /* Block the rotate signal in all threads. */\n    sigemptyset(&amp;sigs);\n    sigaddset(&amp;sigs, ROTATE_SIGNAL);\n    pthread_sigmask(SIG_BLOCK, &amp;sigs, NULL);\n\n    /* Open the log file. Since this is in the main thread,\n       before the rotate signal thread, no need to use log_lock. */\n    if (log_file) {\n        /* You're using this wrong. */\n        fflush(log_file);\n        fclose(log_file);\n    }\n    log_file = fopen(path, \"a\");\n    if (!log_file)\n        return errno;\n\n    log_path = strdup(path);\n\n    /* Create a thread to handle the rotate signal, with a tiny stack. */\n    pthread_attr_init(&amp;attrs);\n    pthread_attr_setstacksize(65536);\n    retval = pthread_create(&amp;log_thread, &amp;attrs, log_sighandler, NULL);\n    pthread_attr_destroy(&amp;attrs);\n    if (retval)\n        return errno = retval;\n\n    return 0;       \n}\n\nvoid log_done(void)\n{\n    pthread_kill(log_thread, ROTATE_SIGNAL);\n    pthread_join(log_thread, NULL);\n    free(log_path);\n    log_path = NULL;\n}\n</code></pre>\n\n<p>The idea is that in <code>main()</code>, before logging or creating any other threads, you call <code>log_init(path-to-log-file)</code>, noting that a copy of the log file path is saved. It sets up the signal mask (inherited by any threads you might create), and creates the helper thread.  Before exiting, you call <code>log_done()</code>.  To log something to the log file, use <code>log()</code> like you would use <code>printf()</code>.</p>\n\n<p>I'd personally also add a timestamp before the <code>vfprintf()</code> line, automatically:</p>\n\n<pre><code>    struct timespec  ts;\n    struct tm        tm;\n\n    if (clock_gettime(CLOCK_REALTIME, &amp;ts) == 0 &amp;&amp;\n        localtime_r(&amp;(ts.tv_sec), &amp;tm) == &amp;tm)\n        fprintf(log_file, \"%04d-%02d-%02d %02d:%02d:%02d.%03ld: \",\n                          tm.tm_year + 1900, tm.tm_mon + 1, tm.tm_mday,\n                          tm.tm_hour, tm.tm_min, tm.tm_sec,\n                          ts.tv_nsec / 1000000L);\n</code></pre>\n\n<p>This <code>YYYY-MM-DD HH:MM:SS.sss</code> format has the nice benefit that it is close to a worldwide standard (<a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a>) and sorts in the correct order.</p>\n"}], "owner": {"reputation": 125, "user_id": 3118379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff4b6c9559e2e09114ff60650dfa1852?s=128&d=identicon&r=PG&f=1", "display_name": "TheAG", "link": "https://stackoverflow.com/users/3118379/theag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "accepted_answer_id": 53189048, "answer_count": 3, "score": 3, "last_activity_date": 1541647087, "creation_date": 1541590713, "question_id": 53188731, "link": "https://stackoverflow.com/questions/53188731/logging-compatibly-with-logrotate", "title": "Logging compatibly with logrotate", "body": "<p>I am writing a Linux daemon that writes a log. I'd like the log to be rotated by logrotate. The program is written in C.</p>\n\n<p>Normally, my program would open the log file when it starts, then write entries as needed and then, finally, close the log file on exit.</p>\n\n<p>What do I need to do differently in order to support log rotation using logrotate? As far as I have understood, my program should be able to reopen the log file each time logrotate has finished it's work. The sources that I googled didn't, however, specify what reopening the log file exactly means. Do I need to do something about the old file and can I just create another file with the same name? I'd prefer quite specific instructions, like some simple sample code.</p>\n\n<p>I also understood that there should be a way to tell my program when it is time to do the reopening. My program already has a D-Bus interface and I thought of using that for those notifications.</p>\n\n<p>Note: I don't need instructions on how to configure logrotate. This question is only about how to make my own software compatible with it.</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1541592637, "post_id": 53188708, "comment_id": 93267320, "body": "I would much rather prefer to see <code>delay_ms(5);</code> instead of <code>DO_LOOP(10, __NOP);</code>. Using macros can sometimes create hard-to-identify bugs, so I&#39;d suggest staying away from such unneeded constructs. But, anyway, since <code>i</code> is a common identifier, you might get collisions if you use this inside a parent <code>for</code> loop (i.e. you would get a nested loop with the same identifier), so you might want to use a somewhat mangled loop variable (e.g. <code>i__</code> or something weird)."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1541592957, "post_id": 53188708, "comment_id": 93267446, "body": "@Groo DO_LOOP is a good identifier for the loop counter.  I always derive my macro-local variables from the name of the macro (i.e., either use the name of the macro directly or something like THE_MACRO__var1, etc.). I think it&#39;s a bit more robust than names like i__, because if I&#39;m already treating e.g., THE_MACRO as a macro, I&#39;m extremely unlikely to make a variable named THE_MACRO much less also pass it to the THE_MACRO macro."}, {"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1541593882, "post_id": 53188708, "comment_id": 93267951, "body": "@Groo You are right but in my case I want to avoid a function call because of performance and I need exact cycle delays not a time based delay."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1541597243, "post_id": 53188708, "comment_id": 93269553, "body": "@DEKKER: time based or cycle based was just a suggestion to point out, obviously you can easily have <code>static inline void delay_cycles(int);</code> and it will be inlined and do what you&#39;re asking (unless you have a really old compiler). I just don&#39;t see much justification for introducing this macro, but that&#39;s just me - I feel the code would quickly become obfuscated if every developer on the team decided to introduce their own &quot;smart macros&quot; for these simple constructs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541598646, "post_id": 53188708, "comment_id": 93270357, "body": "Your original for loop is already the ideal way. The other macros are horrible obfuscation. Please don&#39;t invite your own secret macro languages. Other programmers know C. They don&#39;t know your secret macro language."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "edited": false, "score": 0, "creation_date": 1541593358, "post_id": 53188959, "comment_id": 93267642, "body": "Thanks. Why should it not work with inline assembly? any ideas?"}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "reply_to_user": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "edited": false, "score": 0, "creation_date": 1541593657, "post_id": 53188959, "comment_id": 93267837, "body": "The syntax mandates a semicolon after the inline assembly and here we have a comma. Updated."}], "tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": true, "score": 1, "last_activity_date": 1541593690, "last_edit_date": 1541593690, "creation_date": 1541591660, "answer_id": 53188959, "question_id": 53188708, "link": "https://stackoverflow.com/questions/53188708/creating-macro-to-execute-a-single-operation-n-times/53188959#53188959", "title": "Creating macro to execute a single operation n times", "body": "<pre><code>#define DO_LOOP(x, ...) for (int i = 0; i &lt; x; ++i) { __VA_ARGS__; } \n\nvoid f1() { printf(\"test\\n\"); }\nvoid f2() { printf(\"a\\n\"); }   \nint main()                     \n{                              \n  DO_LOOP(10, f1(), f2());     \n  return 0;                    \n}                              \n</code></pre>\n\n<p><code>gcc -E test.c</code>:</p>\n\n<pre><code>void f1() { printf(\"test\\n\"); }\nvoid f2() { printf(\"a\\n\"); }\nint main()\n{\n  for (int i = 0; i &lt; 10; ++i) { f1(), f2(); };\n  return 0;\n}\n</code></pre>\n\n<p>This doesn't work with inline assembly though. You can do something like:</p>\n\n<pre><code>#define DO2(x, a, b) for (int i = 0; i &lt; x; ++i) { a; b;}\n</code></pre>\n\n<p>and use:</p>\n\n<pre><code>DO2(10, __NOP(), f1());\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 53188959, "answer_count": 1, "score": 0, "last_activity_date": 1541593690, "creation_date": 1541590608, "question_id": 53188708, "link": "https://stackoverflow.com/questions/53188708/creating-macro-to-execute-a-single-operation-n-times", "title": "Creating macro to execute a single operation n times", "body": "<p>In my code I often have a for loop for doing a single operation n times. E.g:</p>\n\n<pre><code>// Wait for settle\n    int delayLoop = 0;\n    int count = 0;\n    for(delayLoop = 0; delayLoop &lt; count; delayLoop++) {\n    __NOP(); // operation to do\n}\n</code></pre>\n\n<p>At first I wanted to make this as an function....but then I realized I do not know how to pass in the operations as a function argument.</p>\n\n<p>In the above example the <code>__NOP()</code> is itself a macro that expands to:</p>\n\n<pre><code>__ASM volatile (\"nop\")\n</code></pre>\n\n<p>So how can I come up with a macro that I can call like this:</p>\n\n<pre><code>DO_LOOP(10, __NOP)\n</code></pre>\n\n<p>and what if I need to do more operations? e.g.</p>\n\n<pre><code>DO_LOOP(8, __NOP, myFunction(arg1)) \n</code></pre>\n\n<p>that would expand to:</p>\n\n<pre><code>for(int i = 0; i &lt; 8; i++) {\n__NOP;\nmyFunction(arg1);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1541588786, "post_id": 53188042, "comment_id": 93265572, "body": "You can&#39;t just <code>strcat</code> to a command line argument!"}, {"owner": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 1, "creation_date": 1541588856, "post_id": 53188042, "comment_id": 93265600, "body": "Please: turn on, read and try to understand the compiler warnings."}, {"owner": {"reputation": 392, "user_id": 9284794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gfgBM.jpg?s=128&g=1", "display_name": "Fanatique", "link": "https://stackoverflow.com/users/9284794/fanatique"}, "reply_to_user": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 1, "creation_date": 1541589475, "post_id": 53188042, "comment_id": 93265877, "body": "@GiovanniCerretani You&#39;re right that I tried to fix most of them without understanding them first. However, they&#39;re turned on, the code I&#39;ve posted here got me no warnings."}, {"owner": {"reputation": 392, "user_id": 9284794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gfgBM.jpg?s=128&g=1", "display_name": "Fanatique", "link": "https://stackoverflow.com/users/9284794/fanatique"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1541589477, "post_id": 53188042, "comment_id": 93265880, "body": "@PaulOgilvie Yes, sorry, I&#39;m quite new to C, I see that I&#39;ve understood some things wrong. Thanks anyways."}, {"owner": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 2, "creation_date": 1541590673, "post_id": 53188042, "comment_id": 93266386, "body": "@Fanatique you&#39;re right, by default GCC (if you&#39;re using it) does now show the uninitialized variable used. Always compile with a decent warning level, like <code>gcc -Wall</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 0, "creation_date": 1541589204, "post_id": 53188253, "comment_id": 93265742, "body": "<code>strcat</code> needs a null terminator in the string, but you are using it in uninitialized memory."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 0, "creation_date": 1541589301, "post_id": 53188253, "comment_id": 93265793, "body": "Oops! Good call, @GiovanniCerretani"}, {"owner": {"reputation": 392, "user_id": 9284794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gfgBM.jpg?s=128&g=1", "display_name": "Fanatique", "link": "https://stackoverflow.com/users/9284794/fanatique"}, "edited": false, "score": 0, "creation_date": 1541589669, "post_id": 53188253, "comment_id": 93265957, "body": "I don&#39;t even know how I haven&#39;t noticed that I&#39;ve used <code>strcat</code> the wrong way around. And yeah, I understand now that memory management is something important in C. Thank you for your answer, I understand it perfectly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541605887, "post_id": 53188253, "comment_id": 93274906, "body": "Note: For other <a href=\"https://en.wikipedia.org/wiki/Morse_code#Symbol_representations\" rel=\"nofollow noreferrer\">Morse code</a> characters, like <code>&#39;?&#39;</code>, <code>(strlen(str)*6)+1)</code> needed."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 4, "last_activity_date": 1541589314, "last_edit_date": 1541589314, "creation_date": 1541588776, "answer_id": 53188253, "question_id": 53188042, "link": "https://stackoverflow.com/questions/53188042/c-segmentation-fault-in-a-string-to-morse-code-program/53188253#53188253", "title": "C - Segmentation fault in a string to morse code program", "body": "<p>There is so much going wrong with your code.</p>\n\n<p>Firstly, <code>strcat</code> takes 2 parameters - a destination and then a source. In all cases that you're using it, you've got them the wrong way around.</p>\n\n<p>Secondly, your function <code>to_morse</code> returns an <code>int</code> when you want it to return a <code>char *</code>. That would be how you pass around pointers.</p>\n\n<p>Thirdly, you don't allocate any memory for <code>output</code> in that function, so even if you had the <code>strcat</code> the right way around, you've not got anywhere to store the morse code. That'll also be where the code is crashing as you're passing in an uninitialised pointer to <code>strcat</code>.</p>\n\n<p>Finally, you should probably check that the character you're trying to convert to morse is a letter, otherwise you'll go out of bounds on your array.</p>\n\n<p>Here is how your code should look. I've also tweaked it so that you put a space between each morse \"letter\" as otherwise you'd not be able to tell where one begins and another ends.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *to_morse(char *);\n\nint main(int argc, char **argv)\n{\n    char *temp;\n    for (int counter = 1; counter &lt; argc; counter++)\n    {\n        temp = to_morse(argv[counter]);\n        printf(\"%s\", temp);\n        free(temp); // Always remember to free memory you allocate\n    }\n\n    return 0;\n}\n\nchar *to_morse(char *str)\n{\n    char *morse[27] =  {\".-\",\"-...\",\"-.-.\",\"-..\",\".\",\"..-.\",\"--.\",\"....\",\"..\",\".---\",\"-.-\",\".-..\",\"--\",\"-.\",\"---\",\".--.\",\"--.-\",\".-.\",\"...\",\"-\",\"..-\",\"...-\",\".--\",\"-..-\",\"-.--\",\"--..\"};\n    char *output=malloc((strlen(str)*5)+1); // Always remember to allocate 1 more char than you need to store the NUL terminate when allocating memory for strings.\n    output[0] = '\\0'; // strcat need a null terminator in the string.\n    char character;\n\n    for (int counter = 0; str[counter] != '\\0'; counter++)\n    {\n        if(isalpha(str[counter]))\n        {\n            character = toupper(str[counter]);\n            strcat(output,morse[character-'A']);\n            strcat(output,\" \");\n        }\n    }\n\n    return output;\n}\n</code></pre>\n"}], "owner": {"reputation": 392, "user_id": 9284794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gfgBM.jpg?s=128&g=1", "display_name": "Fanatique", "link": "https://stackoverflow.com/users/9284794/fanatique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 53188253, "answer_count": 1, "score": -4, "last_activity_date": 1541589314, "creation_date": 1541587998, "question_id": 53188042, "link": "https://stackoverflow.com/questions/53188042/c-segmentation-fault-in-a-string-to-morse-code-program", "title": "C - Segmentation fault in a string to morse code program", "body": "<p>I've been trying to code a really simple string to morse code converter in C for a few hours now and I finally got it to compile without any warnings. I'm a beginner in C so I really cannot understand how to fix my code. I believe the problem should be in how I pass strings around with pointers and etc, since this is the part I do not understand the most. I found an example on how to do it, but I still couldn't understand it, and there wasn't any specific case that would be similar to mine, since I want it to read strings from the arguments (all arguments are strings/words).</p>\n\n<p>And now I'm getting a segmentation fault when trying to run it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint to_morse(char *);\n\nint main(int argc, char **argv)\n{\n    char morse[80];\n    char *temp;\n    for (int counter = 1; counter &lt; argc; counter++)\n    {\n        *temp = to_morse(argv[counter]);\n        strcat(temp, morse);\n        printf(\"%s\", morse);\n    }\n\n    return 0;\n}\n\nint to_morse(char *str)\n{\n    char *morse[27] =  {\".-\",\"-...\",\"-.-.\",\"-..\",\".\",\"..-.\",\"--.\",\"....\",\"..\",\".---\",\"-.-\",\".-..\",\"--\",\"-.\",\"---\",\".--.\",\"--.-\",\".-.\",\"...\",\"-\",\"..-\",\"...-\",\".--\",\"-..-\",\"-.--\",\"--..\"};\n    char *output;\n    char character;\n\n    for (int counter = 0; str[counter] != '\\0'; counter++)\n    {\n        character = toupper(str[counter]);\n        strcat(morse[character-'A'], output);\n    }\n\n    return *output;\n}\n</code></pre>\n\n<p>I believe this is not a correct way to pass around strings using pointers, but I cannot figure out the right way. How would I be able to make my code work?</p>\n\n<p>Note: I'm aware this might have a duplicate somewhere.. however, there are tons of segmentation fault questions and all of them are really specific and do not cover my scenario, so I couldn't find one.</p>\n"}, {"tags": ["c", "makefile", "dependencies", "circular-dependency"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1541587827, "post_id": 53187948, "comment_id": 93265139, "body": "Why do you have <code>PhotoLab: PhotoLab</code> in there?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541587980, "post_id": 53187948, "comment_id": 93265214, "body": "On an unrelated note, I suggest you do some research about <a href=\"https://ftp.gnu.org/old-gnu/Manuals/make-3.79.1/html_chapter/make_10.html\" rel=\"nofollow noreferrer\"><i>implicit rules</i></a>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10617830, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212620016165280/picture?type=large", "display_name": "Nicholas Chiu", "link": "https://stackoverflow.com/users/10617830/nicholas-chiu"}, "edited": false, "score": 1, "creation_date": 1541588502, "post_id": 53188070, "comment_id": 93265459, "body": "Obviously my understanding of targets is not complete. I thought that the first section &quot;PhotoLab: &quot; would be naming my command, such as &quot;make PhotoLab&quot;, and after the &quot;:&quot; would be the the rule I&#39;m trying to run. Thank you so much for your help! I&#39;ve a lot to learn."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1541588059, "creation_date": 1541588059, "answer_id": 53188070, "question_id": 53187948, "link": "https://stackoverflow.com/questions/53187948/why-am-i-getting-a-make-circular-dependency-dropped-warning/53188070#53188070", "title": "Why am I getting a Make: Circular Dependency Dropped warning?", "body": "<p>These two lines are the problem. They're saying that \"PhotoLab\" depends on \"PhotoLab\" (for example) which is obviously going to be a circular dependency.</p>\n\n<pre><code>PhotoLab: PhotoLab\n\nPhotoLabTest: PhotoLabTest\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10617830, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212620016165280/picture?type=large", "display_name": "Nicholas Chiu", "link": "https://stackoverflow.com/users/10617830/nicholas-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2983, "favorite_count": 0, "accepted_answer_id": 53188070, "answer_count": 1, "score": 0, "last_activity_date": 1545227559, "creation_date": 1541587705, "last_edit_date": 1545227559, "question_id": 53187948, "link": "https://stackoverflow.com/questions/53187948/why-am-i-getting-a-make-circular-dependency-dropped-warning", "title": "Why am I getting a Make: Circular Dependency Dropped warning?", "body": "<p>This is my first time using Makefile. I've had to write one for my school assignment, and run into the error \"make: Circular PhotoLab &lt;- PhotoLab dependency dropped.\" I've tried researching, as I've found <a href=\"https://stackoverflow.com/questions/24904906/make-circular-dependency-dropped\">make: Circular dependency dropped</a> and <a href=\"https://stackoverflow.com/questions/40697867/make-circular-dependency-dropped-c\">Make: circular dependency dropped c++</a>, and from what I understand, circular dependency is when you're creating something from itself, so it will run forever unless stopped. If my logic is correct, I build my .o files from my .c &amp; .h files, then link my .o files together to build my executables. So I don't really understand why I get the circular dependency error. Where is my logic going wrong?</p>\n\n<p>just for clarification in the linking stage, I have a file called libfilter.a which is just made of DIPs.o and Advanced.o</p>\n\n<pre><code>#variable definitions\nCC = gcc\nDEBUG = -g\nCFLAGS = -Wall -ansi -std=c99 $(DEBUG) -c\nLFLAGS = -Wall $(DEBUG)\n\n#convenience targets\nall: PhotoLab PhotoLabTest\n\nPhotoLab: PhotoLab\n\nPhotoLabTest: PhotoLabTest\n\nclean:\n\n        rm -f *.o\n        rm -f PhotoLab\n        rm -f PhotoLabTest\n        rm -f bw.ppm\n        rm -f edge.ppm\n        rm -f shuffle.ppm\n        rm -f brightness.ppm\n        rm -f hmirror.ppm\n        rm -f hue.ppm\n\ntest: PhotoLab\n        ./PhotoLab\n\n#compilation rules\nPhotoLab: FileIO.o Advanced.o DIPs.o Main.o\n        $(CC) $(LFLAGS) FileIO.o Main.o -lm -lfilter -L. -o PhotoLab\n\nPhotoLabTest: FileIO.o Advanced.o DIPs.o Main2.o\n        $(CC) $(LFLAGS) FileIO.o Main2.o -lm -lfilter -L. -o PhotoLabTest\n\nMain.o: PhotoLab.c Constants.h FileIO.h DIPs.h Advanced.h\n        $(CC) $(CFLAGS) PhotoLab.c -o Main.o\n\nMain2.o: PhotoLab.c Constants.h FileIO.h DIPs.h Advanced.h\n        $(CC) -Wall -ansi -std=c99 -DDEBUG -c PhotoLab.c -o Main2.o\n\nFileIO.o: FileIO.c FileIO.h Constants.h\n        $(CC) $(CFLAGS) FileIO.c -o FileIO.o\n\nDIPs.o: DIPs.c DIPs.h Constants.h\n        $(CC) $(CFLAGS) DIPs.c -o DIPs.o\n\nAdvanced.o: Advanced.c Advanced.h Constants.h\n        $(CC) $(CFLAGS) Advanced.c -o Advanced.o\n</code></pre>\n"}, {"tags": ["c", "gcc", "openssl", "musl"], "comments": [{"owner": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 1, "creation_date": 1541600014, "post_id": 53187897, "comment_id": 93271104, "body": "Are you sure that libcrypto in /usr/local/musl was built with musl-gcc?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 0, "creation_date": 1541601681, "post_id": 53187897, "comment_id": 93272072, "body": "@arved Thanks. Looks like I was doing <code>.&#47;config ... &amp;&amp; CC=musl-gcc make</code> when it should&#39;ve been <code>CC=musl-gcc .&#47;config ... &amp;&amp; make</code>. But now it won&#39;t build because of an ENOENT on <code>&lt;linux&#47;mman.h&gt;</code>."}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 688, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1541587502, "creation_date": 1541587502, "question_id": 53187897, "link": "https://stackoverflow.com/questions/53187897/fixing-dynamic-linker-errors-when-using-libc-with-openssl", "title": "Fixing dynamic linker errors when using libc with openssl", "body": "<p>Here's a simple hello world sha1-hasher that's using the openssl library.</p>\n\n<pre><code>#include &lt;openssl/sha.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    system(\"printf '%s' 'hello world' | sha1sum\");\n\n    unsigned char digest[SHA_DIGEST_LENGTH];\n    char digest_pr[(SHA_DIGEST_LENGTH)*2+1];\n    SHA_CTX ctx;\n    if(!SHA1_Init(&amp;ctx)) return 1;\n#define STR_STRLEN(A) A, (sizeof(A)/sizeof(*(A))-1)\n    if(!SHA1_Update(&amp;ctx,STR_STRLEN(\"hello\"))) return EXIT_FAILURE;\n    if(!SHA1_Update(&amp;ctx,STR_STRLEN(\" world\"))) return EXIT_FAILURE;\n    if(!SHA1_Final(digest,&amp;ctx)) return EXIT_FAILURE;\n    #define DIGITS \"0123456789abcdef\"\n    for(size_t i=0;i&lt;sizeof(digest);i++){\n        digest_pr[i*2+0]=DIGITS[digest[i]/16];\n        digest_pr[i*2+1]=DIGITS[digest[i]%16];\n    }\n    digest_pr[(SHA_DIGEST_LENGTH)*2]='\\0';\n    puts(digest_pr);\n}\n</code></pre>\n\n<p>On a Mint/Ubuntu with libssl-dev installed, I can compile and link it with <code>$CC sha.c</code> (where CC is one of gcc, tcc, or clang) and then successfully run it, but this didn't work with musl so I grabbed the openssl source (<code>git clone https://github.com/openssl/openssl</code>), configured it with <code>./config --prefix=/usr/local/musl</code>, built it and installed it and now <code>musl-gcc sha.c -lcrypto works</code> but running <code>LD_LIBRARY_PATH=/usr/local/musl/lib a.out</code> gets me:</p>\n\n<pre><code>Error relocating /usr/local/musl/lib/libcrypto.so.1.1: __fprintf_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: makecontext: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: setcontext: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __register_atfork: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __memcpy_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __strcat_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: secure_getenv: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __vfprintf_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __syslog_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __memset_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __fread_chk: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: getcontext: symbol not found\nError relocating /usr/local/musl/lib/libcrypto.so.1.1: __sprintf_chk: symbol not found\n</code></pre>\n\n<p>What's causing this and how can I fix it? </p>\n"}, {"tags": ["c", "image", "rotation"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 6, "creation_date": 1541587602, "post_id": 53187855, "comment_id": 93265035, "body": "You calculate the position in the rotated image X&#39; from each pixel in the original image X, but you should do it the other way round: For each pixel in the rotated image X&#39; calculate the respective position in the original image and copy it if it exists, that is if it isn&#39;t outside the original image. That way you have every pixel in X&#39; covered."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 2, "last_activity_date": 1541587611, "creation_date": 1541587611, "answer_id": 53187921, "question_id": 53187855, "link": "https://stackoverflow.com/questions/53187855/rotating-an-image-by-x-angle-in-c/53187921#53187921", "title": "Rotating an image by x angle in c", "body": "<p>Rather than looping over the un-rotated image's pixels, loop over the rotated image instead. This will mean you won't miss pixels due to rounding the rotated coordinates to <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1541607799, "last_edit_date": 1541607799, "creation_date": 1541606486, "answer_id": 53193215, "question_id": 53187855, "link": "https://stackoverflow.com/questions/53187855/rotating-an-image-by-x-angle-in-c/53193215#53193215", "title": "Rotating an image by x angle in c", "body": "<p><code>sin((M_PI/4)*(180.0/M_PI));</code> is not the the sine of \"45 degrees\".  It is the sine of 45 radians. Same about <code>double cosx</code></p>\n\n<p>Suggest <code>double sinx = sin(45.0/180.0*M_PI);</code></p>\n\n<hr>\n\n<p>Also consider <code>lround()</code> vs. <code>(int) round()</code>.  </p>\n\n<p>Further, the range of <code>xRotate, yRotate</code> is about sqrt(2) time more than the range of <code>height, width</code>.  Code should watch out for integer overflow when converting from <code>double</code>.</p>\n\n<hr>\n\n<p>Iterate as answered by <a href=\"https://stackoverflow.com/a/53187921/2410359\">@Chris Turner</a> and commented by <a href=\"https://stackoverflow.com/questions/53187855/rotating-an-image-by-x-angle-in-c/53193215#comment93265035_53187855\">@M Oehm</a></p>\n\n<p>Below uses OP-like code but with a -45 rotation as code is mapping <em>from</em> <code>inputImage</code>.</p>\n\n<pre><code>#defined SIND(a) (sin((a)/180.0 * M_PI)\n#defined COSD(a) (cos((a)/180.0 * M_PI)\ndouble sinx = SIND(-45);  // -degrees\ndouble cosx = COSD(-45);\n\nxCenter = height;        // Rotate image by its center.\nyCenter = width;\n\nfor(x=0; x&lt;height; x++) {\n    xt = x - xCenter;\n    double xt_cosx = xt*cosx;\n    double xt_sinx = xt*sinx;\n    for(y=0; y&lt;width; y++) {\n        yt = y - yCenter;\n        long xRotate = lround(xt_cosx - (yt*sinx)) + xCenter;\n        long yRotate = lround((yt*cosx) + xt_sinx) + yCenter;   \n\n        if( (xRotate &gt;= 0) &amp;&amp; (xRotate &lt; height) &amp;&amp; (yRotate &gt;= 0) &amp;&amp; (yRotate &lt; width) ) {\n          rotatedImage[x][y] = inputImage[xRotate][yRotate];\n        } else {\n          rotatedImage[x][y] = Default_Pixel;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9206963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d51b4603ad8960cfbbe1572b81ef5d5?s=128&d=identicon&r=PG&f=1", "display_name": "chandu mvm ", "link": "https://stackoverflow.com/users/9206963/chandu-mvm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541607799, "creation_date": 1541587343, "question_id": 53187855, "link": "https://stackoverflow.com/questions/53187855/rotating-an-image-by-x-angle-in-c", "title": "Rotating an image by x angle in c", "body": "<p>I am rotating the image by x(45 degres) angle, But I am getting some black spots in the rotated image.</p>\n\n<p>How to avoid those black spots!!</p>\n\n<p>The logic I have used as below</p>\n\n<pre><code>double sinx = sin((M_PI/4)*(180.0/M_PI));  //45 degrees\ndouble cosx = cos((M_PI/4)*(180.0/M_PI));\n\nxCenter = height/2;        // Rotate image by its center.\nyCenter = width/2;\n\nfor(x=0; x&lt;height; x++) {\n    for(y=0; y&lt;width; y++) {\n\n        xt = x-xCenter; yt=y-yCenter;\n        xRotate = (int) round( ((xt*cosx)-(yt*sinx)) + xCenter );\n        yRotate = (int) round( ((yt*cosx)+(xt*sinx)) + yCenter );   \n\n        if( (x &gt;= 0) &amp;&amp; (x &lt; height) &amp;&amp; (y &gt;= 0) &amp;&amp; (y &lt; width) ) {\n                rotatedImage[xRotate][yRotate] = inputImage[x][y];\n        }       \n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541587535, "post_id": 53187805, "comment_id": 93265001, "body": "32 (64?) players but only 10 elements in array."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1541587632, "post_id": 53187805, "comment_id": 93265052, "body": "<code>while (getline(&amp;line, &amp;len, fp) != -1) {</code>==&gt; <code>while (i &lt; 10 &amp;&amp; getline(&amp;line, &amp;len, fp) != -1) {</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1541587715, "post_id": 53187805, "comment_id": 93265088, "body": "<code>player[it]-&gt;</code> ==&gt; <code>player[i]-&gt;</code>. Variable <code>it</code> is already indexing out-of-bounds after the previous loop it was used in."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1541587816, "post_id": 53187805, "comment_id": 93265134, "body": "You return <code>player</code>, which is a local array and will go out of scope. (You&#39;ve probably been told to allocate memory on the heap to avoid this, but you must allocate <code>player</code> itself, not its elements.)"}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1541594739, "creation_date": 1541594739, "answer_id": 53189725, "question_id": 53187805, "link": "https://stackoverflow.com/questions/53187805/why-am-i-getting-segmentation-fault-while-mallocing/53189725#53189725", "title": "Why am I getting segmentation fault while mallocing?", "body": "<p>As pointed out to you in your comments, you have some errors in yor code:</p>\n\n<ul>\n<li>You return the address of a local array. This is a array of poiters. You allocate to these pointers, but the array itself will go out of scope once you leave the function (and the allocated memory will be leaked). Also <code>player</code> is a <code>Player **</code> after decaying into a pointer, ot a <code>Player *</code>, which is the return type of the function.</li>\n<li>You confuse various indices in your loop.</li>\n<li>Your allocatios are premature. For example, you don't need to allocate memory for all ten players when you don't know yet how many there are. Allocating 50 chars because \"that's probably enough\" is another case: Allocate according to string length when you copy the string. (The non-standard function <code>strdup</code> does this for you.)</li>\n</ul>\n\n<p>Your function should read all players of a certain team from a file into a list of players. The calling function needs to see the array and how many elements there are in that array.</p>\n\n<p>One way to do that is to return the allocated array of players and alter the number of players via a pointer. The caller must free the memory (and the memory for the first and last names) after use. This function should re-allocate the array before appending another player.)</p>\n\n<p>Here's a program that does this:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct Player Player;\n\nstruct Player {\n    int team;\n    char *first;\n    char *last;\n    int number;\n    int offensive;\n    int defensive;\n};\n\nPlayer *draftPlayers(char *filename, int team, int *nplayer)\n{\n    Player *player = NULL;\n\n    FILE *fp;\n    char *line = NULL;\n    size_t len = 0;\n\n    fp = fopen(filename, \"r\");\n\n    *nplayer = 0;\n\n    while (getline(&amp;line, &amp;len, fp) != -1) {\n        char *tk;\n        char *token[6];\n        int j = 0;\n\n        tk = strtok(line, \",\");\n        while (tk &amp;&amp; j &lt; 6) {\n            token[j++] = tk;\n            tk = strtok(NULL, \",\");\n        }\n\n        if (j == 6 &amp;&amp; team == atoi(token[0])) {\n            player = realloc(player, (*nplayer + 1) * sizeof(*player));\n\n            player[*nplayer].team = atoi(token[0]);\n            player[*nplayer].first = strdup(token[1]);\n            player[*nplayer].last = strdup(token[2]);\n            player[*nplayer].number = atoi(token[3]);\n            player[*nplayer].offensive = atoi(token[4]);\n            player[*nplayer].defensive = atoi(token[5]);\n            (*nplayer)++;\n        }\n    }\n\n    fclose(fp);\n    free(line);\n\n    return player;\n}\n\nint main()\n{\n    int t;\n\n    for (t = 1; t &lt; 36; t++) {\n        int n;\n        Player *player = draftPlayers(\"kk\", t, &amp;n);\n\n        if (n) {\n            int i;\n\n            printf(\"Team %d\\n\", t);\n\n            for (i = 0; i &lt; n; i++) {\n                Player *p = player + i;\n\n                printf(\"%d: %s %s (%d, %d, %d)\\n\",\n                    i + 1, p-&gt;first, p-&gt;last,\n                    p-&gt;number, p-&gt;offensive,p-&gt;defensive);\n\n                free(p-&gt;first);\n                free(p-&gt;last);\n            }\n\n            free(player);\n            puts(\"\");\n        }        \n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>(This isn't ideal, but I've tried to be as close to your original function as possible. In the real code, all calls to <code>fopen</code> and <code>realloc</code> should have proper error checking, of course.)</p>\n"}], "owner": {"reputation": 11, "user_id": 5366949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745395545f277e83e2e6588a99f3f006?s=128&d=identicon&r=PG&f=1", "display_name": "Krishan Pal", "link": "https://stackoverflow.com/users/5366949/krishan-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541594739, "creation_date": 1541587193, "question_id": 53187805, "link": "https://stackoverflow.com/questions/53187805/why-am-i-getting-segmentation-fault-while-mallocing", "title": "Why am I getting segmentation fault while mallocing?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"tournament.h\"\nPlayer * draftPlayers(char * filename, int team, int num_players){\nPlayer *player[10];\nint it;\nfor(it=0;it&lt;10;it++)\n{\n    player[it]=malloc(sizeof(Player));\n\n}\nFILE *fp;\nchar *line = NULL;\nsize_t len = 0;\nssize_t read;\nchar *token[100];\nint  i=0,j,k;\nfp = fopen(filename, \"r\");\nwhile (getline(&amp;line, &amp;len, fp) != -1) {\n    player[it]-&gt;first=malloc(sizeof(char)*50);\n    player[it]-&gt;last=malloc(sizeof(char)*50);\n    j=0;\n    token[0] = strtok(line, \",\");\n    while(token[j] != NULL ) {\n        j++;\n        token[j] = strtok(NULL, \",\");\n    }\n\n    if(team==atoi(token[0])){\n        player[i]-&gt;team=atoi(token[0]);\n        printf(\"%s\\n\",\"Here3\");\n        strcpy(player[i]-&gt;first,token[1]);\n        printf(\"%s\\n\",\"Here3\");\n        strcpy(player[i]-&gt;last,token[2]);\n        printf(\"%s\\n\",\"Here3\");\n        player[i]-&gt;number=atoi(token[3]);\n        printf(\"%s\\n\",\"Here3\");\n        player[i]-&gt;offensive=atoi(token[4]);\n        printf(\"%s\\n\",\"Here3\");\n        player[i]-&gt;defensive=atoi(token[5]);    \n        printf(\"%s\\n\",\"Here3\");\n    }\n\n    i++;    \n}\n\nprintf(\"%s\\n\",\"Here4\");\nfclose(fp);\nprintf(\"%s\\n\",\"Here5\");\nif (line){\n    printf(\"%s\\n\",\"Here6\");\n    free(line);}\nprintf(\"%s\\n\",\"Here7\");\nreturn player;\n\n}\n</code></pre>\n\n<p>I am getting the output:</p>\n\n<pre><code>Here3\nHere3\nHere3\nHere3\nHere3\nHere3\nHere4\nHere5\nHere6\nHere7\nHere3\nHere3\nHere3\nHere3\nHere3\nHere3\nSegmentation fault\n</code></pre>\n\n<p>Please let me know my mistake. I have tried everything but I am unable to get the root of error. I want to know what I am doing wrong here. I am unable to get why there is a segmentation fault.</p>\n\n<p>I am calling main as:\nBasically I am calling the same function as above.</p>\n\n<pre><code>#include\"tournament.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main(){\n  Player * draft = draftPlayers(\"players.dat\", 1, 10);\n}\n</code></pre>\n\n<p>The struct that I have implemented is:</p>\n\n<p>Tournament.h:</p>\n\n<pre><code>typedef struct {\n  int offensive;\n  int defensive;\n  int number;\n  int team;\n  char * first;\n  char * last;\n}Player;\n</code></pre>\n\n<p>players.dat:</p>\n\n<pre><code>0,Mei,Fellgatt,24,8,2\n1,Richmound,Beazley,45,6,7\n2,Gunther,Fackney,73,6,7\n3,Stewart,Frowing,19,3,3\n4,Sallee,Cuffley,70,2,4\n5,Axel,Stollwerk,73,7,2\n6,Othilie,Grigoliis,28,8,1\n7,Igor,Claffey,28,8,3\n8,Bruce,Schruur,73,5,2\n9,Clovis,Wynes,59,8,4\n10,Silvie,Thiolier,5,4,5\n11,Maxie,Treher,57,6,6\n12,Margette,Wraighte,44,8,2\n13,Chryste,Byrnes,41,10,3\n14,Ulysses,Sturmey,68,9,7\n15,Woodman,Powrie,81,4,4\n16,Zitella,Reddel,14,6,4\n17,Bronny,McMearty,42,2,5\n18,Jewel,Cheyney,14,2,4\n19,Adelaida,Gunney,44,6,2\n20,Adrienne,O'Looney,21,5,6\n21,Branden,Wilcott,27,7,5\n22,Etta,Nuth,41,8,2\n23,Karney,Lightbowne,80,3,6\n24,Pierson,Crippell,6,1,4\n25,Lutero,Filchagin,26,3,7\n26,Roth,Ferrierio,66,5,1\n27,Gothart,Thickens,16,1,4\n28,Dwain,Josuweit,4,5,2\n29,Nanice,Eady,47,2,6\n30,Zahara,Ousley,79,10,4\n31,Nichols,Earle,7,8,6\n0,Jodee,Sharple,42,2,3\n1,Cordy,Tuckwood,29,6,1\n2,Jillian,Neligan,22,9,3\n3,Shirlene,Wrought,23,4,4\n4,Shoshana,Wais,14,7,2\n5,Julissa,Edinburough,26,8,3\n6,Gerome,Hallbord,2,7,5\n7,Vere,Riste,7,1,3\n8,Dexter,Gecke,3,3,5\n9,Jacintha,Cessford,96,3,1\n10,Kerry,Cramphorn,1,2,6\n11,L;urette,McCluskey,37,6,2\n12,Birch,Jagoe,37,6,2\n13,Lenore,Norvel,55,1,4\n14,Eilis,Klink,88,3,4\n15,Neil,Darrel,37,1,5\n16,Imelda,Donner,26,7,4\n17,Alexandro,Kilbee,10,7,6\n18,Gram,Tregunna,28,10,7\n19,Jdavie,Bampford,26,4,4\n20,Robyn,Spinola,43,9,5\n21,Yance,Cochern,16,7,6\n22,Rogers,Blyden,15,5,3\n23,Jerrilee,Tremlett,1,2,3\n24,Nickie,Winsome,14,4,7\n25,Andrew,Duetsche,63,4,2\n26,Dewey,Mitten,6,2,1\n27,Aldon,Dunkirk,43,4,3\n28,Curtice,Egginson,54,3,1\n29,Carly,Loisi,98,7,4\n30,Chrissie,Keppe,1,5,6\n31,Jenny,Harbidge,81,2,5\n</code></pre>\n"}, {"tags": ["c", "while-loop", "operator-keyword"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 2, "creation_date": 1541584939, "post_id": 53187178, "comment_id": 93263693, "body": "You really need to study C. <code>1=0</code> does not make any sense, whatsoever."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541585040, "post_id": 53187178, "comment_id": 93263738, "body": "&quot;First i&gt;12 will be checked to return value 1. Then ++(increment operator) must be performed on the return value &#39;1&#39; &quot;  I don&#39;t understand what you mean here. Do you mean that the &gt; check returns value 1 or that i++ returns value 1? Where did you get 2 from?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1541585041, "post_id": 53187178, "comment_id": 93263740, "body": "is that <code>1=0</code> a typo for <code>i=0</code>?"}, {"owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "edited": false, "score": 1, "creation_date": 1541585122, "post_id": 53187178, "comment_id": 93263778, "body": "Yes. Sorry I am beginner for the forums. I will try to not make mistakes again"}, {"owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "edited": false, "score": 0, "creation_date": 1541585614, "post_id": 53187178, "comment_id": 93264073, "body": "I mean that &lt; returns the value 1 and ++ will be operated on the value returned by &lt; which in this case is 1."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1541585684, "post_id": 53187178, "comment_id": 93264103, "body": "No, <code>i++</code> means that <code>i</code> is incremented after the comparison <code>i &lt; 12</code>."}, {"owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "edited": false, "score": 0, "creation_date": 1541585990, "post_id": 53187178, "comment_id": 93264258, "body": "can you tell me the reason why i is incremented after comparing of i&lt;12? because if you go with operator priority in c first we must go with ++ then &lt;. This is what is bugging me."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1541586575, "post_id": 53187178, "comment_id": 93264559, "body": "The operator priority isn&#39;t about the order of execution, it&#39;s about what they attach to, or where you write the parentheses. The <code>++</code> attaches to the <code>i</code> because there are no other options in this case, but if you&#39;d had the equivalent <code>12&gt;i++</code>, then <code>++</code> would still attach to <code>i</code> instead of the full <code>12&gt;i</code> expression. That is, the table tells you that <code>12&gt;i++</code> means <code>12 &gt; (i++)</code>, not <code>(12&gt;i) ++</code>. Again, in your original, the <code>++</code> attaches to <code>i</code> because there&#39;s no other expression available it could be connected to and precedence doesn&#39;t matter."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1541587007, "post_id": 53187178, "comment_id": 93264774, "body": "@KRISHNAI because the language says so, that is what the syntax means. Variable <code>i</code> is compared and then incremented. It is called <i>post-increment</i> as dictinct from <code>++i</code> where <code>i</code> is incremented before the comparison: <i>pre-increment</i>."}, {"owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "edited": false, "score": 0, "creation_date": 1541592950, "post_id": 53187178, "comment_id": 93267441, "body": "Thanks Daniel H, You have got me corrected. Thanks guys for all the help because everyone of your answers helpful to further improve my understanding of c language."}, {"owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "edited": false, "score": 0, "creation_date": 1541594426, "post_id": 53187178, "comment_id": 93268201, "body": "oops! I forgot one final question. while(i++&lt;12): why isn&#39;t i incremented first before &lt; comparison. As I have mentioned as per operator preference order ++ takes priority &lt;."}, {"owner": {"reputation": 989, "user_id": 5016244, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bdZPE.jpg?s=128&g=1", "display_name": "Theophile Dano", "link": "https://stackoverflow.com/users/5016244/theophile-dano"}, "edited": false, "score": 0, "creation_date": 1541601913, "post_id": 53187178, "comment_id": 93272217, "body": "precedence* not preference"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "edited": false, "score": 0, "creation_date": 1541591691, "post_id": 53187746, "comment_id": 93266845, "body": "Thanks Mike. I know the procedure you explained. What I want to say is: while(i++&lt;12) is in the code I expected that both ++ and &lt; will be evaluated before passing the value to while."}], "tags": [], "owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1541587001, "creation_date": 1541587001, "answer_id": 53187746, "question_id": 53187178, "link": "https://stackoverflow.com/questions/53187178/working-of-operators-in-while-loopc-programming/53187746#53187746", "title": "working of operators in while loop(c programming)", "body": "<p>An example:</p>\n\n<pre><code>i = 0;\nwhile(i&lt;12)       //compare i with 12\n    printf(\"%d\\n\",i);\n\ni = 0; \nwhile(i++&lt;12)        //compare i with 12 and THEN i=i+1\n    printf(\"%d\\n\",i);\n\ni = 0;\nwhile(++i&lt;12)        //first i=i+1 and then compare i with 12\n    printf(\"%d\\n\",i);\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10602769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sb0Sk4R9KH0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBCyTntY_ZBE6lXbeVieWH3yHn55Q/mo/photo.jpg?sz=128", "display_name": "KRISHNA I", "link": "https://stackoverflow.com/users/10602769/krishna-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541592692, "creation_date": 1541584858, "last_edit_date": 1541592692, "question_id": 53187178, "link": "https://stackoverflow.com/questions/53187178/working-of-operators-in-while-loopc-programming", "title": "working of operators in while loop(c programming)", "body": "<p>I am beginner to c programming. Hope you guys can help me.</p>\n\n<pre><code>i=0;\nwhile(i++&lt;12)\nprintf(\"%d\\n\",i);\n</code></pre>\n\n<p>My question not regarding operators or how the code works. I have checked various forms so i know what this piece of code does and the final value in i will be 13. What I want to know is this:</p>\n\n<p>From my perspective operators must follow operator priority(preference). So ++ must be evaluated before &lt;. \nOperator priority link: <a href=\"https://www.geeksforgeeks.org/c-operator-precedence-associativity/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/c-operator-precedence-associativity/</a> </p>\n\n<p>lets i=3 for now,</p>\n\n<pre><code>Step 1:while(i++&lt;12)\nStep 2:while((i+1)&lt;12)\nStep 3:while(4&lt;12)\nStep 4:true and enters while loop\n</code></pre>\n\n<p>If operator preference is neglected(but I don't know why):</p>\n\n<pre><code>Step 1:while(i++&lt;12)\nStep 2:while(i&lt;12)\nStep 3:while(3&lt;12) which returns value 1\nStep 4:while(1++) operator ++ on the return value 1 from above step\nStep 5:while(2) which is true and enters while loop\n</code></pre>\n\n<p>I hope you guys can understand my question. Please help.</p>\n"}, {"tags": ["c++", "c", "gcc", "optimization"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1541584680, "post_id": 53187083, "comment_id": 93263560, "body": "This is low-hanging fruit for a compiler.  The answer is: yes, the compiler will compute this -- it will not be calculated at runtime."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1541584834, "post_id": 53187083, "comment_id": 93263649, "body": "sizeof is always compile-time except for the very special case of VLA."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1541584839, "post_id": 53187083, "comment_id": 93263650, "body": "<code>sizeof</code> isn&#39;t a function, btw, it&#39;s a keyword."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541584905, "post_id": 53187083, "comment_id": 93263684, "body": "@Shawn <a href=\"http://eel.is/c++draft/expr.sizeof#1\" rel=\"nofollow noreferrer\">it&#39;s an operator</a> ;) So one might argue it&#39;s a special kind of function."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 6, "creation_date": 1541585150, "post_id": 53187083, "comment_id": 93263798, "body": "Please <i>pick</i> <i>one</i> programming language. I answered before noticing this. Is this C or C++. There is already one answer that is right in C++ and wrong in C!"}, {"owner": {"reputation": 19, "user_id": 10616278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67408fbc9ab5c9b3834dae7d2aa57e9?s=128&d=identicon&r=PG&f=1", "display_name": "Branislav Brzak", "link": "https://stackoverflow.com/users/10616278/branislav-brzak"}, "edited": false, "score": 0, "creation_date": 1541585335, "post_id": 53187083, "comment_id": 93263899, "body": "That is the part that confused me because people say that sizeof is a operator, i thought it would be the same for both C and C++. I apologize for confusion but i&#39;m interested what happens in both cases."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541585398, "post_id": 53187083, "comment_id": 93263940, "body": "@BranislavBrzak yes, the answer to this <i>incidentally</i> happens to be mostly the same in C and C++. But that&#39;s not a good excuse!"}, {"owner": {"reputation": 19, "user_id": 10616278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67408fbc9ab5c9b3834dae7d2aa57e9?s=128&d=identicon&r=PG&f=1", "display_name": "Branislav Brzak", "link": "https://stackoverflow.com/users/10616278/branislav-brzak"}, "edited": false, "score": 0, "creation_date": 1541585467, "post_id": 53187083, "comment_id": 93263982, "body": "Still have a lot to learn, i will keep that in mind."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1541599360, "post_id": 53187083, "comment_id": 93270740, "body": "<a href=\"https://stackoverflow.com/a/21995718/1708801\">sizeof is evaluated at compile time unless we are dealing with VLA</a> which some compilers support in C++ as an extension."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10616278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67408fbc9ab5c9b3834dae7d2aa57e9?s=128&d=identicon&r=PG&f=1", "display_name": "Branislav Brzak", "link": "https://stackoverflow.com/users/10616278/branislav-brzak"}, "edited": false, "score": 0, "creation_date": 1541584840, "post_id": 53187124, "comment_id": 93263652, "body": "Thank you for the answer. And i know that about assembly, it would be better if i phrased the question &quot;will the operation happen compile or run time&quot;."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 19, "user_id": 10616278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67408fbc9ab5c9b3834dae7d2aa57e9?s=128&d=identicon&r=PG&f=1", "display_name": "Branislav Brzak", "link": "https://stackoverflow.com/users/10616278/branislav-brzak"}, "edited": false, "score": 0, "creation_date": 1541584874, "post_id": 53187124, "comment_id": 93263666, "body": "@BranislavBrzak that is different question and that <i>too</i> has been answered here."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 4, "last_activity_date": 1541584848, "last_edit_date": 1541584848, "creation_date": 1541584679, "answer_id": 53187124, "question_id": 53187083, "link": "https://stackoverflow.com/questions/53187083/does-gcc-automatically-perform-a-mathematical-operations-on-const-values-during/53187124#53187124", "title": "Does gcc automatically perform a mathematical operations on const values during compilation", "body": "<p>This is called \"constant-folding\" and yes, it will happen before assembly. Assembly in itself is usually not optimized at all.</p>\n\n<p>Consider the minimal program</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    malloc(4 * sizeof(int));\n}\n</code></pre>\n\n<p>We can compile it into assembly with <code>gcc -S</code>. On my computer, the resulting assembly says:</p>\n\n<pre><code>main:\n        pushq   %rbp\n        movq    %rsp, %rbp\n        movl    $16, %edi\n        call    malloc@PLT\n        movl    $0, %eax\n        popq    %rbp\n        ret\n</code></pre>\n\n<p>I.e. the only constants you see in there are <code>16</code> (<code>4 * sizeof(int)</code>), and <code>0</code> (the implicit return value from <code>main()</code>).</p>\n\n<hr>\n\n<p>Note that in C there is a class of expressions that are called \"integer constant expressions\" that are supposed to be evaluated at the compilation time. You can use <code>4 * sizeof(int)</code> as the size of an array - or even within a <code>_Static_assert</code> clause - naturally then it <em>must</em> be evaluated during the compilation, but in general case, such as here, the C standard does not require one or the other.</p>\n"}], "owner": {"reputation": 19, "user_id": 10616278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67408fbc9ab5c9b3834dae7d2aa57e9?s=128&d=identicon&r=PG&f=1", "display_name": "Branislav Brzak", "link": "https://stackoverflow.com/users/10616278/branislav-brzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53187124, "answer_count": 1, "score": 0, "last_activity_date": 1541584915, "creation_date": 1541584528, "last_edit_date": 1541584787, "question_id": 53187083, "link": "https://stackoverflow.com/questions/53187083/does-gcc-automatically-perform-a-mathematical-operations-on-const-values-during", "title": "Does gcc automatically perform a mathematical operations on const values during compilation", "body": "<p>Lets say we perform</p>\n\n<pre><code>malloc(4 * sizeof(int))\n</code></pre>\n\n<p>Now, the number 4 is a constant and from my understanding <code>sizeof</code> is actually compile time function (unless you have a variable inside of it).</p>\n\n<p>In this case (considering x86) <code>sizeof(int)</code> would also be 4. My question is: will the gcc optimization perform the calculation itself or will the equation be generated in the asm?</p>\n"}, {"tags": ["c", "assembly", "mips"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 7, "creation_date": 1541583840, "post_id": 53186867, "comment_id": 93263133, "body": "If this is not a homework assignment please use a compiler to turn C code into assembler."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1541585535, "post_id": 53186867, "comment_id": 93264026, "body": "There are multiple bugs and most of them you should find when using debugger to single step over your code, for example your logic around <code>i</code> and <code>for</code> termination by <code>(i &lt; row)</code> is not correct, etc... Did you even try to debug it? Seems like not."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1541585931, "post_id": 53186867, "comment_id": 93264220, "body": "<code>addi $s0, $s0, -1</code> &lt;-- here you&#39;re making assumptions about <code>$s0</code>&#39;s initial value. Also, the code you&#39;ve posted doesn&#39;t even assemble because you&#39;ve left out the declarations of <code>i</code>, <code>j</code> and <code>row</code>, and you have multiple comments with line breaks in them."}, {"owner": {"reputation": 7, "user_id": 10497698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-awfav3nY5PM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUXJFi0CA2jcXziUnCBUbbRXSQfBg/mo/photo.jpg?sz=128", "display_name": "Beginner_S", "link": "https://stackoverflow.com/users/10497698/beginner-s"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1541593715, "post_id": 53186867, "comment_id": 93267872, "body": "@Yunnosch Thx for noticing that, unfortunately this is my assignment project."}, {"owner": {"reputation": 1378, "user_id": 2107661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ac06ad72e445e7ca9a3b0cfc08d1e0?s=128&d=identicon&r=PG", "display_name": "b00n12", "link": "https://stackoverflow.com/users/2107661/b00n12"}, "edited": false, "score": 0, "creation_date": 1541769146, "post_id": 53186867, "comment_id": 93339488, "body": "If you want real help and not just the community doing your assignment for you I suggest you try to debug it your self and if this does not work for you, come back with more a more specific question;) hint: <a href=\"http://courses.missouristate.edu/kenvollmar/mars/Help/Help_4_1/MarsHelpIntro.html\" rel=\"nofollow noreferrer\">courses.missouristate.edu/kenvollmar/mars/Help/Help_4_1/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1378, "user_id": 2107661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ac06ad72e445e7ca9a3b0cfc08d1e0?s=128&d=identicon&r=PG", "display_name": "b00n12", "link": "https://stackoverflow.com/users/2107661/b00n12"}, "edited": false, "score": 0, "creation_date": 1542013392, "post_id": 53227540, "comment_id": 93402042, "body": "Is it really necessary to do his assignment for him? I mean super nice that you invested your time and pointed out all of his mistakes and explained it to him, yet posting the resulting code is kind of pointless. Additionally, this question lacks universality and is of no help to other users. No offense though, neither to you nor the questioner...."}], "tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": true, "score": -1, "last_activity_date": 1541773427, "creation_date": 1541773427, "answer_id": 53227540, "question_id": 53186867, "link": "https://stackoverflow.com/questions/53186867/interpreting-from-c-language-to-mips/53227540#53227540", "title": "Interpreting from C language to MIPS", "body": "<p>Your logic is incorrect in a  few places, and comments are also wrong, which is probally a large part of the confusion.</p>\n\n<p>Issues I see (hopefully not missing any):</p>\n\n<pre><code>main:   \n    la $a0, word        # load word\n    li $v0, 4           # print integer\n</code></pre>\n\n<ul>\n<li><p>This is print string not  so the comment is wrong.</p></li>\n<li><p>Perhaps also because of that you don't read the integer that would correspond to the C scanf(\"%d\", &amp;row); line, so need add:</p>\n\n<pre><code>li $v0, 5\nsyscall\nmove $s3, $v0\n</code></pre></li>\n</ul>\n\n<p>Next:</p>\n\n<pre><code>addi $s0, $s0, -1    # for accommodating loop condition\nlw $s1, i           # set i = 1\nlw $s2, j           # set j = 1\nlw $s3, row     # load row\n</code></pre>\n\n<ul>\n<li>not sure what s0 is for as you have variables for I, j and row</li>\n<li><p>you want to allocate a register for I and j and row, so don't need to load I or j into it (you don't have labels for them anyway) so the should real be something like:</p>\n\n<pre><code>li $s1, 1           # set i = 1 \nli $s2, 1           # set j = 1\n</code></pre>\n\n<ul>\n<li>s3 (row) will need be loaded as part of the scanf addition</li>\n</ul></li>\n</ul>\n\n<p>Next:</p>\n\n<pre><code>loop1:\n    blt $s0, $s1, exit  # for(i = 0; i &lt; row; i++)\n\n    addi $s1, $s1, 1     # i++\n</code></pre>\n\n<ul>\n<li>blt $s0, $s1, exit has wrong comment, has no exit label, need to compare I(s1) and row(s3) not s0.</li>\n<li>addi $s1, $s1, 1 should be after the loop 2 has completed as I is used in loop2 aos if incremented here will be wrong for the next loop.</li>\n<li><p>change to:</p>\n\n<pre><code>loop1:\n    blt $s3, $s1, exit_loop1  # for(i = 1; i &lt;= row; i++)\n</code></pre></li>\n</ul>\n\n<p>Next:</p>\n\n<pre><code>move $a0, $t0        # move register to be printed into argument register $a0\nj loop2            # executing the nested for loop - this does nothing as next instruction is loop2\n</code></pre>\n\n<ul>\n<li><p>t0 is not set to anything and a0 is not being used here, so seems pointless</p></li>\n<li><p>j loop2 is jumping to next instruction, so not needed</p></li>\n</ul>\n\n<p>Next:</p>\n\n<pre><code>loop2:\n    blt $s1, $s2, loop1 # for(i = 0; i &lt; j; i++)\n</code></pre>\n\n<ul>\n<li>comment is wrong should be (j=1; j &lt;= i; j++)</li>\n<li>need to print a newline and increment I from loop1 at end of loop2, so need to jump to an intermediate step before going back to loop1</li>\n</ul>\n\n<p>Next:</p>\n\n<pre><code>li  $v0, 1          # read_double =&gt; scanf(\"%d\")\nmove $a0, $t0        # move register to be printed into argument register $a0\nsyscall\n</code></pre>\n\n<ul>\n<li>wrong comment for li - its print int</li>\n<li>you need to also increment j after the print</li>\n</ul>\n\n<p>next:</p>\n\n<ul>\n<li>you don't print the newline after the end of loop2</li>\n</ul>\n\n<p>So with all those changes I get:</p>\n\n<pre><code>  .data\nword:   .asciiz \"Please enter a random row: \\n\"\nnewline: .asciiz \"\\n\" # added\n  .text\n  .globl main\n\nmain:   \n  la $a0, word        # load word\n  li $v0, 4           # print prompt\n  syscall\n\n  # read integer scanf(%d), save to s3\n  li $v0, 5\n  syscall\n  move $s3, $v0\n\n  li $s1, 1           # set i = 1 for loop 1\nloop1:\n  blt $s3, $s1, exit_loop1  # for(i = 1; i &lt;= row; i++)\n\n  # set up loop2 stuff\n  li $s2, 1           # resets j to 1 after every iteration of for  loop\n\nloop2:\n  blt $s1, $s2, exit_loop2 \n\n  li  $v0, 1          # print int j\n  move $a0, $s2   \n  syscall\n\n  # increment j\n  addi $s2, $s2, 1 \n\n  j loop2\n\nexit_loop2:\n  # printf(\"\\n\");\n  la $a0, newline        # load newline string\n  li $v0, 4         \n  syscall\n\n  # increment loop1 i\n  addi $s1, $s1, 1     # i++\n\n  j loop1\n\nexit_loop1:\n  li $v0, 10           # loading exit code\n  syscall             # execute exit\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10497698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-awfav3nY5PM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUXJFi0CA2jcXziUnCBUbbRXSQfBg/mo/photo.jpg?sz=128", "display_name": "Beginner_S", "link": "https://stackoverflow.com/users/10497698/beginner-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 53227540, "answer_count": 1, "score": -2, "last_activity_date": 1541773427, "creation_date": 1541583724, "last_edit_date": 1541768679, "question_id": 53186867, "link": "https://stackoverflow.com/questions/53186867/interpreting-from-c-language-to-mips", "title": "Interpreting from C language to MIPS", "body": "<p>I would like to create a MIPS program.\nHere is my C code shown below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int i, j, row;\n\n    printf(\"\\nEnter a random row\\n\");\n    scanf(\"%d\", &amp;row);\n\n    for (i=1; i &lt;= row; i++)\n    {\n        for (j=1; j &lt;= i; j++)\n        {\n            printf(\"%d\", j);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Then the code shown below is how I translate from C to MIPS:</p>\n\n<pre><code>    .data\nword:   .asciiz \"Please enter a random row: \\n\"\n    .text\n    .globl main\n\nmain:   \n    la $a0, word        # load word\n    li $v0, 4           # print integer\n    syscall\n\n    addi $s0, $s0, -1    # for accommodating loop condition\n    lw $s1, i           # set i = 1\n    lw $s2, j           # set j = 1\n    lw $s3, row     # load row\n\n\nloop1:\n    blt $s0, $s1, exit  # for(i = 0; i &lt; row; i++)\n    addi $s1, $s1, 1     # i++\n    li $s2, 1           # resets j to 1 after every iteration of for  loop\n    move $a0, $t0        # move register to be printed into argument register $a0\n    j loop2            # executing the nested for loop\n\n\nloop2:\n    blt $s1, $s2, loop1 # for(i = 0; i &lt; j; i++)\n    li  $v0, 1          # read_double =&gt; scanf(\"%d\")\n    move $a0, $t0        # move register to be printed into argument register $a0\n    syscall\n    j loop2\n\n\n   li $v0, 10           # loading exit code\n   syscall             # execute exit\n</code></pre>\n\n<p>In the beginning, although I did create the expected outcome, which is to ask user to insert the input random number, there is an upcoming issue which is the loop did not go through the whole program successfully. I was stuck in the loop 1.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1541581984, "post_id": 53186394, "comment_id": 93262210, "body": "Can 0 be a factor?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10527787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C1ZB-YuWiJs/AAAAAAAAAAI/AAAAAAAABME/tUveQRnOhsI/photo.jpg?sz=128", "display_name": "Kohila", "link": "https://stackoverflow.com/users/10527787/kohila"}, "edited": false, "score": 0, "creation_date": 1541582657, "post_id": 53186457, "comment_id": 93262580, "body": "Got it. Thanks."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1541582791, "post_id": 53186457, "comment_id": 93262647, "body": "I don&#39;t think it&#39;s a good idea to include 0 and 1 in the outer loop."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1541582142, "creation_date": 1541582142, "answer_id": 53186457, "question_id": 53186394, "link": "https://stackoverflow.com/questions/53186394/need-help-to-store-integer-values-from-a-loop-into-an-array/53186457#53186457", "title": "Need help to store integer values from a loop into an array", "body": "<p>I think what you are looking for is:</p>\n\n<pre><code>for(i=0, j=0;i&lt;n;i++)\n    if(n%i==0)\n        a[j++] = i;\n\n// print it\nfor (i=0; i&lt;j; i++)\n    printf(\"%d \",a[i]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10527787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C1ZB-YuWiJs/AAAAAAAAAAI/AAAAAAAABME/tUveQRnOhsI/photo.jpg?sz=128", "display_name": "Kohila", "link": "https://stackoverflow.com/users/10527787/kohila"}, "edited": false, "score": 0, "creation_date": 1541582643, "post_id": 53186470, "comment_id": 93262572, "body": "I didn&#39;t know that we can use increment operator as a subscript of an array. Thanks."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 15, "user_id": 10527787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C1ZB-YuWiJs/AAAAAAAAAAI/AAAAAAAABME/tUveQRnOhsI/photo.jpg?sz=128", "display_name": "Kohila", "link": "https://stackoverflow.com/users/10527787/kohila"}, "edited": false, "score": 0, "creation_date": 1541582767, "post_id": 53186470, "comment_id": 93262635, "body": "@Kohila The index needs to be an integer expression, and you can use any operator in any expression, being an array index is not a special case."}, {"owner": {"reputation": 15, "user_id": 10527787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C1ZB-YuWiJs/AAAAAAAAAAI/AAAAAAAABME/tUveQRnOhsI/photo.jpg?sz=128", "display_name": "Kohila", "link": "https://stackoverflow.com/users/10527787/kohila"}, "edited": false, "score": 0, "creation_date": 1541584131, "post_id": 53186470, "comment_id": 93263300, "body": "Check the second snippet of code @unwind Now, I have a problem. I&#39;m trying to print and show the factors but I cannot come up with the good condition for the second for loop. If I give j&lt;n as condition, then some garbage values are being printed."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 15, "user_id": 10527787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C1ZB-YuWiJs/AAAAAAAAAAI/AAAAAAAABME/tUveQRnOhsI/photo.jpg?sz=128", "display_name": "Kohila", "link": "https://stackoverflow.com/users/10527787/kohila"}, "edited": false, "score": 0, "creation_date": 1541585501, "post_id": 53186470, "comment_id": 93264009, "body": "@Kohila You should just use a loop from 0 to <code>j</code>, not including <code>j</code>, i.e. <code>for (int k = 0; k &lt; n; ++k) { printf(&quot;%d\\n&quot;, a[k]); }</code>."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 0, "last_activity_date": 1541582206, "creation_date": 1541582206, "answer_id": 53186470, "question_id": 53186394, "link": "https://stackoverflow.com/questions/53186394/need-help-to-store-integer-values-from-a-loop-into-an-array/53186470#53186470", "title": "Need help to store integer values from a loop into an array", "body": "<p>You are quite close, but the inner loop seems pointless. Once you've found a factor, just store it and keep track of how many you've found:</p>\n\n<pre><code> int factors(int n, int *factors)\n {\n  int j = 0;\n  for (int i = 2; i &lt; n; ++i)\n  {\n    if (n % i == 0)\n    {\n      factors[j++] = i;\n    }\n  } \n  return j;\n}\n</code></pre>\n\n<p>I ran this on <code>471113</code>, and got <code>[193, 2441]</code> which checks out.</p>\n\n<p>Do note that this is quite limited by the max precision of <code>int</code> (and should use <code>unsigned long</code> and be safer for real code).</p>\n"}], "owner": {"reputation": 15, "user_id": 10527787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C1ZB-YuWiJs/AAAAAAAAAAI/AAAAAAAABME/tUveQRnOhsI/photo.jpg?sz=128", "display_name": "Kohila", "link": "https://stackoverflow.com/users/10527787/kohila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 53186470, "answer_count": 2, "score": -4, "last_activity_date": 1541584223, "creation_date": 1541581887, "last_edit_date": 1541584223, "question_id": 53186394, "link": "https://stackoverflow.com/questions/53186394/need-help-to-store-integer-values-from-a-loop-into-an-array", "title": "Need help to store integer values from a loop into an array", "body": "<p>I want to list all the factors of a number into an array. So, here's my try at it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define n1 10\nint main()\n{\n     int n,i,j,a[n1];\n     printf(\"Enter num: \");\n     scanf(\"%d\",&amp;num);\n     for(i=1;i&lt;n;i++){\n        if(n%i==0){\n           for(j=0;j&lt;n;j++)\n</code></pre>\n\n<p>I don't know how to proceed from here. I'm confused. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define n1 10\nint main()\n{\n        int n,i,j,a[n1];\n        printf(\"Enter number : \");\n        scanf(\"%d\",&amp;n);\n        j = 0;\n        for(i=1;i&lt;n;i++){\n                if(n%i==0)\n                        a[j++] = i;\n        }\n        printf(\"The factors of the number are: \");\n        for(j=0;j;j++)\n                printf(\"%d\\n\",a[j]);\n}\n</code></pre>\n"}, {"tags": ["c", "malloc", "bare-metal"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541578154, "post_id": 53185539, "comment_id": 93260537, "body": "Perhaps you should rename your function to something else? It might be a good idea anyway, since it then will help readers of your code to understand that it&#39;s not the standard <code>malloc</code> function, and that will help the maintainability as well."}, {"owner": {"reputation": 13903, "user_id": 86388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cPl84.jpg?s=128&g=1", "display_name": "Tarion", "link": "https://stackoverflow.com/users/86388/tarion"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541578880, "post_id": 53185539, "comment_id": 93260819, "body": "It&#39;s not about using my own malloc implementation, it&#39;s about not using the default anywhere. I want the linker to fail when ever someone is calling the default <code>malloc</code> implementation to avoid issues with the RTOS we are using."}, {"owner": {"reputation": 13903, "user_id": 86388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cPl84.jpg?s=128&g=1", "display_name": "Tarion", "link": "https://stackoverflow.com/users/86388/tarion"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541578955, "post_id": 53185539, "comment_id": 93260848, "body": "Currently I think the only way is to recompile newlib my self without malloc and link against it. The arm-none-eabi toolchain seems to to provide options to use newlib without malloc."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541579097, "post_id": 53185539, "comment_id": 93260908, "body": "That&#39;s one solution. Other possibilities include linker flags to either undefine certain symbols (I don&#39;t know if such exits) or override or replace the standard <code>malloc</code> with your own (I know there are ways to do it but I don&#39;t know how)."}, {"owner": {"reputation": 13903, "user_id": 86388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cPl84.jpg?s=128&g=1", "display_name": "Tarion", "link": "https://stackoverflow.com/users/86388/tarion"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541580507, "post_id": 53185539, "comment_id": 93261491, "body": "@Someprogrammerdude about linker flags: That&#39;s what I&#39;m looking for, I will also dig into it later. Providing my own malloc would only work it the newlib implementation is declared weak, but it is not. Maybe I can also handle the issue somehow in my linker file?"}], "answers": [{"comments": [{"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 1, "creation_date": 1541579962, "post_id": 53185812, "comment_id": 93261271, "body": "Unless you want all binaries to use your version of malloc."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1541580111, "post_id": 53185812, "comment_id": 93261325, "body": "Yes that would be one case @perreal, that&#39;s why I said almost."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1541579497, "creation_date": 1541579497, "answer_id": 53185812, "question_id": 53185539, "link": "https://stackoverflow.com/questions/53185539/disable-default-malloc-with-arm-none-eabi-on-cortex-m3-bare-metal/53185812#53185812", "title": "Disable default malloc with arm-none-eabi on cortex m3 (bare metal)", "body": "<p>Using the same name as a standard function's name is almost always a bad idea.</p>\n\n<p>Even you, after some time not working on that project, will not remember that this <code>malloc()</code> you are reading in your code is not the <code>malloc()</code> that we all know and loved. Let aside anyone else.</p>\n\n<p>So, for maintainability and readability, I suggest you name your function differently, plain example: <code>my_malloc()</code>.</p>\n\n<p>PS: You might want to read <a href=\"https://stackoverflow.com/questions/45857844/gcc-how-to-stop-malloc-being-linked\">GCC - How to stop malloc being linked?</a></p>\n"}], "owner": {"reputation": 13903, "user_id": 86388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cPl84.jpg?s=128&g=1", "display_name": "Tarion", "link": "https://stackoverflow.com/users/86388/tarion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1541580452, "creation_date": 1541577994, "last_edit_date": 1541580452, "question_id": 53185539, "link": "https://stackoverflow.com/questions/53185539/disable-default-malloc-with-arm-none-eabi-on-cortex-m3-bare-metal", "title": "Disable default malloc with arm-none-eabi on cortex m3 (bare metal)", "body": "<p>I want to provide my own or better no malloc function. So I want to make sure it's not linked at all.</p>\n\n<p>I already pass <code>-nostdlib</code> and <code>--specs=nano.specs</code> to the linker. </p>\n\n<p>When providing my own malloc function I get:<br>\n<code>../lib/gcc/arm-none-eabi/7.2.1/../../../../arm-none-eabi/lib/thumb/v7-m\\libc_nano.a(lib_a-malloc.o): In function `malloc':\nmalloc.c:(.text.malloc+0x0): multiple definition of `malloc'\n</code></p>\n\n<p>I'm looking for a way to skip linking of the <code>lib_a-malloc.o</code></p>\n\n<p><strong>As a clarification:</strong> It's more about having no <code>malloc</code> at all than about providing my own implementation. Providing my own implementation was just to check if there already is one or for debugging purpose.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 9, "creation_date": 1541577935, "post_id": 53185496, "comment_id": 93260463, "body": "It&#39;s (most likely) part of a code documentation generator (looks like Doxygen). That is not part of the C language, it&#39;s an external tool"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541577975, "post_id": 53185496, "comment_id": 93260473, "body": "There are tools which can go through your source and extract documentation from it, including special &quot;tags&quot; in comments. It is very likely that what you&#39;re seeing is such a special tag that will be handled such a tool."}, {"owner": {"reputation": 467, "user_id": 9950378, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bMztUomG68Y/AAAAAAAAAAI/AAAAAAAAABE/FcXN1FGD0cQ/photo.jpg?sz=128", "display_name": "Jean-Marc Zimmer", "link": "https://stackoverflow.com/users/9950378/jean-marc-zimmer"}, "edited": false, "score": 1, "creation_date": 1541578057, "post_id": 53185496, "comment_id": 93260504, "body": "It looks like this question (not saying it&#39;s duplicate, though) <a href=\"https://stackoverflow.com/questions/36192264\">stackoverflow.com/questions/36192264</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1541578068, "post_id": 53185496, "comment_id": 93260509, "body": "There are various annotation schemes using different markers in comments to provide extra structured information about the code.  The <code>@</code> will be another.  AFAICR, it works for <a href=\"http://www.doxygen.org/manual/docblocks.html\" rel=\"nofollow noreferrer\">Doxygen</a> \u2014 though the manual shows <code>@</code> with Python but not in C as far as I can see.  (More accurately, the <code>&#47;**</code> marks the start of a Doxygen comment block.  The <code>@</code> notation will require more research.)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541580118, "post_id": 53185496, "comment_id": 93261330, "body": "Please copy a complete example, not just &quot;@that&quot;"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541581904, "post_id": 53185496, "comment_id": 93262158, "body": "@JonathanLeffler @ works for any language. The usual default is \\ but @ works just as well."}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1541581809, "post_id": 53185926, "comment_id": 93262110, "body": "The important thing to note is that the C preprocessor doesn&#39;t care much about what goes into a comment block. The extra annotations are of note only to the documentation tool."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 6, "last_activity_date": 1541582732, "last_edit_date": 1541582732, "creation_date": 1541579995, "answer_id": 53185926, "question_id": 53185496, "link": "https://stackoverflow.com/questions/53185496/the-significance-of-in-comments/53185926#53185926", "title": "The significance of @ in comments", "body": "<p>It's not by chance that you see that in a header file, since it's related to <strong><em>documentation</em></strong>.</p>\n\n<p>It is not part of the C language itself, like for example using <code>/*</code> for comments, but most of the times, it is used for annotating a function, or/and (as in your case) a parameter.</p>\n\n<p>Example:</p>\n\n<pre><code>/**\n * @annotateThatFunctionAsInvokable\n * Add two integers\n *\n * @param   [in]    a    first addend\n * @param   [in]    b    second addend\n * @param   [out]   sum of 'a' and 'b'\n*/\nvoid add(int a, int b);\n</code></pre>\n\n<hr>\n\n<p>Note: C preprocessor pretty much <a href=\"https://stackoverflow.com/questions/2009526/are-comments-always-processed-before-the-preprocessor\">ignores</a> the contents of a comment, thus any annotations will be taken into account by the documentation tool only.</p>\n\n<p>PS: A really wide used documentation tool is <a href=\"http://www.doxygen.org/\" rel=\"nofollow noreferrer\">Doxygen</a>, which in order to understand your documentation and parse it correctly, uses these <code>@</code>.</p>\n"}], "owner": {"reputation": 176, "user_id": 9547499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f750ec95f648257533a9272eec7f589?s=128&d=identicon&r=PG&f=1", "display_name": "TRoa", "link": "https://stackoverflow.com/users/9547499/troa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1541582732, "creation_date": 1541577768, "question_id": 53185496, "link": "https://stackoverflow.com/questions/53185496/the-significance-of-in-comments", "title": "The significance of @ in comments", "body": "<p>I have a header file. That file is filled with multi line comments. In comments there are many time some words appear with @ e.g</p>\n\n<pre><code>/** @that\n\n\n*/\n</code></pre>\n\n<p>Now this \"that\" changes color from green to orange(in Keil IDE). These comments doesn't seem affecting anything. Is there any thing significant behind changing color of this text? Or this is just another thing about comments that I don't know, and it is harmless? Please note that when I remove one star behind \"that\", it changes color to green as well. </p>\n"}, {"tags": ["java", "c", "java-native-interface", "openbsd"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541579556, "post_id": 53185449, "comment_id": 93261107, "body": "What does ulimit say your process memory limits are?"}, {"owner": {"reputation": 1, "user_id": 8101390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e628e64768d7c8bbf2da65046d8709ac?s=128&d=identicon&r=PG&f=1", "display_name": "Roman A.", "link": "https://stackoverflow.com/users/8101390/roman-a"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541580538, "post_id": 53185449, "comment_id": 93261510, "body": "There is <code>ulimit -a</code> output: data seg size (kbytes, -d) 33554432, max locked memory (kbytes, -l) 671061, max memory size (kbytes, -m) 2011444, stack size (kbytes, -s) 8192, virtual memory  (kbytes, -v) 33562624"}], "owner": {"reputation": 1, "user_id": 8101390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e628e64768d7c8bbf2da65046d8709ac?s=128&d=identicon&r=PG&f=1", "display_name": "Roman A.", "link": "https://stackoverflow.com/users/8101390/roman-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541577527, "creation_date": 1541577527, "question_id": 53185449, "link": "https://stackoverflow.com/questions/53185449/jni-createjavavm-could-not-reserve-enough-space-for-code-cache-on-openbsd", "title": "JNI_CreateJavaVM: &quot;Could not reserve enough space for code cache&quot; on OpenBSD", "body": "<p>I try to invoke Java code from C using OpenJDK 1.8 on OpenBSD 6.1 virtual machine </p>\n\n<p>There is my test program source code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;jni.h&gt;\nint main(int argc, char *argv[])\n{\n\n    JavaVMInitArgs args;\n\n    JavaVM *jvm;\n    JNIEnv *env;\n    JavaVMOption options[1];\n\n    args.version = JNI_VERSION_1_6;\n\n    options[0].optionString = \"-Djava.class.path=.\";\n    args.options = options;\n    args.nOptions = 1;\n\n    if ( JNI_CreateJavaVM(&amp;jvm, (void **) &amp;env, (void *) &amp;args))\n    {\n        fprintf(stderr, \"Failed to create the JVM\\n\");\n        exit(1);\n    }\n\n    (*jvm)-&gt;DestroyJavaVM(jvm);\n    return 0;\n}\n</code></pre>\n\n<p>compilation: </p>\n\n<pre><code>gcc -I/usr/local/jdk-1.8.0/include -I/usr/local/jdk-1.8.0/include/openbsd -L/usr/local/jdk-1.8.0/jre/lib/amd64/server -ljvm main.c\n</code></pre>\n\n<p>run: </p>\n\n<pre><code># LD_LIBRARY_PATH=/usr/local/jdk-1.8.0/jre/lib/amd64/server/ ./a.out\nError occurred during initialization of VM\nCould not reserve enough space for code cache\n</code></pre>\n\n<p>I tried to add <code>-XX:ReservedCodeCacheSize=200m</code> option, but the result is always the same</p>\n\n<p>When I run the test code on Linux, everything works fine</p>\n"}, {"tags": ["c", "character"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1541577219, "post_id": 53185370, "comment_id": 93260210, "body": "What have you tried? How did your attempt work or not work? Please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1541577222, "post_id": 53185370, "comment_id": 93260211, "body": "Apart from asking on SO and being told?  <a href=\"http://mattgemmell.com/2008/12/08/what-have-you-tried/\" rel=\"nofollow noreferrer\">What have you tried</a>, and what problems did you run into?  Show us your code for your best effort so far and we can help set you in the right direction.  The interesting part is how you allocate the storage for the string containing the answer.  There are many ways to do it, depending in part on how much you know of C and mostly depending on whether the code is in a function or in <code>main()</code> \u2014 another reason we need to see your best effort.  Please read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541577242, "post_id": 53185370, "comment_id": 93260218, "body": "As a couple of hints: The modulo operator (<code>%</code>) and the <a href=\"https://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a> function could be useful here."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1541578556, "post_id": 53185370, "comment_id": 93260703, "body": "<code>char *mystr</code> does <i>not</i> define a &quot;string&quot;, but just a pointer to a <code>char</code>. Defining it does not allocate any space to store any <code>char</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 1, "last_activity_date": 1541577794, "last_edit_date": 1541577794, "creation_date": 1541577339, "answer_id": 53185412, "question_id": 53185370, "link": "https://stackoverflow.com/questions/53185370/return-two-last-digits-of-an-integer-as-string-in-c/53185412#53185412", "title": "Return two last digits of an integer as string in C", "body": "<p>You could try something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main(int argc, char **argv){\n    int myInt = 809;\n    char buf[16];  // buffer big enough to hold the string representation\n    sprintf(buf, \"%d\", myInt); // write the string to the buffer\n    char* myStr = &amp;buf[strlen(buf) - 2]; // set a pointer to the second last position\n    printf(\"myStr is %s\\n\", myStr);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78, "user_id": 9769705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qYq0gD8B-ow/AAAAAAAAAAI/AAAAAAAAACQ/p5kjblPP-bU/photo.jpg?sz=128", "display_name": "MasovyKnedlicek", "link": "https://stackoverflow.com/users/9769705/masovyknedlicek"}, "edited": false, "score": 0, "creation_date": 1541577687, "post_id": 53185434, "comment_id": 93260374, "body": "Amazing! Thank you!"}, {"owner": {"reputation": 1400, "user_id": 3287591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec170ce77ff19649edf457377421bb8?s=128&d=identicon&r=PG", "display_name": "Giovanni Cerretani", "link": "https://stackoverflow.com/users/3287591/giovanni-cerretani"}, "edited": false, "score": 1, "creation_date": 1541581371, "post_id": 53185434, "comment_id": 93261886, "body": "<code>20</code> is a magic number, here. It is sufficient for the current architectures where <code>sizeof(int) &lt;= 4</code>, but it may be wrong in a theoretical architecture where <code>sizeof(int )== 8</code>. It would be better to put the actual maximum length if an int, like the size needed to print <code>INT_MIN</code>."}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": 4, "last_activity_date": 1541582271, "last_edit_date": 1541582271, "creation_date": 1541577465, "answer_id": 53185434, "question_id": 53185370, "link": "https://stackoverflow.com/questions/53185370/return-two-last-digits-of-an-integer-as-string-in-c/53185434#53185434", "title": "Return two last digits of an integer as string in C", "body": "<p>You can do like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv)\n{\n    char buf[32];\n    int myInt = 809;\n    char* mystr;\n    snprintf(buf, sizeof buf, \"%d\", myInt);\n    if (strlen(buf) &gt; 2)\n        mystr = buf + strlen(buf) - 2;\n    else\n        mystr = buf;\n    fputs(mystr, stdout);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 2, "last_activity_date": 1541659707, "last_edit_date": 1541659707, "creation_date": 1541579558, "answer_id": 53185830, "question_id": 53185370, "link": "https://stackoverflow.com/questions/53185370/return-two-last-digits-of-an-integer-as-string-in-c/53185830#53185830", "title": "Return two last digits of an integer as string in C", "body": "<p>No pointer magic necessary here. Just use plain math (the <a href=\"https://stackoverflow.com/q/11720656/694576\">remainder operator</a>: <code>%</code>), along with some suitable formatting:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  char a[3]; /* 2 characters for any value &gt;= 0 and &lt; 100. So we rely on the 100 below.\n                +1 character for the `0`-terminator to make this a C-string*/\n  int i = 809;\n\n  assert(i &gt;= 0); \n\n  sprintf(a, \"%02d\", i % 100);\n\n  puts(a);\n}\n</code></pre>\n\n<p>or avoiding magic numbers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nlong long power_integer(int base, int x)\n{\n  if (0 == x)\n  {\n    return 1;\n  }\n\n  return base * power_integer(x - 1);\n}\n\n#define CUTOFF_BASE (10)\n#define CUTOFF_DIGITS (2)\n\nint main(void)\n{\n  char a[3]; \n  char f[8]; /* To hold \"%01lld\" to \"%019lld\". \n                (A 64 bit integer in decimal uses max 19 digits) */\n\n  int i = 809;\n\n  assert(i &gt;= 0); \n\n  sprintf(f, \"%%0%dlld*, CUTOFF_DIGITS);\n  sprintf(a, f, i % power_integer(CUTOFF_BASE, CUTOFF_DIGITS));\n\n  puts(a);\n}\n</code></pre>\n\n<p>Output would be:</p>\n\n<pre><code>09\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1541579606, "creation_date": 1541579606, "answer_id": 53185854, "question_id": 53185370, "link": "https://stackoverflow.com/questions/53185370/return-two-last-digits-of-an-integer-as-string-in-c/53185854#53185854", "title": "Return two last digits of an integer as string in C", "body": "<p>Here is a simple solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char buf[3];\n    char *myStr;\n    unsigned int myInt = 809;\n\n    buf[0] = myInt / 10 % 10 + '0';  /* tens digit */\n    buf[1] = myInt % 10 + '0';       /* unit digit */\n    buf[2] = '\\0';                   /* null terminator */\n    myStr = buf;\n\n    puts(mystr);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541581456, "post_id": 53186126, "comment_id": 93261926, "body": "Your substr does not count backwards. But it too can be done; you could show it :D"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541583942, "post_id": 53186126, "comment_id": 93263178, "body": "@AnttiHaapala The OP didn&#39;t request that, but of course doing so in the pre-processor is <i>trivial</i> :) For your amusement: <a href=\"https://www.onlinegdb.com/BJkeNVgTX\" rel=\"nofollow noreferrer\">onlinegdb.com/BJkeNVgTX</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541584381, "post_id": 53186126, "comment_id": 93263422, "body": "So what&#39;s wrong with <code>&amp;STRINGIFY(i)[sizeof (STRINGIFY (i)) - n - 1]</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541584625, "post_id": 53186126, "comment_id": 93263530, "body": "@AnttiHaapala It reads out of bounds of the string literal...? Not sure if I understand what you mean."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541586063, "post_id": 53186126, "comment_id": 93264293, "body": "<code>#define RIGHT(i, n) &amp;(STRINGIFY(i))[sizeof STRINGIFY(i) - 1 - n]</code> <code>puts(RIGHT(VAL, 2));</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541586583, "post_id": 53186126, "comment_id": 93264564, "body": "@AnttiHaapala That&#39;s just changing the way the index counter works. The code I posted reverses the whole string literal. As for what that&#39;s good for, I don&#39;t know! But it was fun to write."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1541580820, "creation_date": 1541580820, "answer_id": 53186126, "question_id": 53185370, "link": "https://stackoverflow.com/questions/53185370/return-two-last-digits-of-an-integer-as-string-in-c/53186126#53186126", "title": "Return two last digits of an integer as string in C", "body": "<p>For the specific case of turning \"magic numbers\" into strings, you can as well do that at compile-time. That is, when you have an integer constant rather than a run-time value:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define VAL 809\n\n#define STRINGIFY(x) #x\n#define STR(i) STRINGIFY(i)\n#define SUBSTR(i, n) &amp;(STRINGIFY(i))[n]\n\nint main (void)\n{\n  int whatever = VAL;\n\n  puts(STR(VAL));\n  puts(SUBSTR(VAL, 1));\n\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>809\n09\n</code></pre>\n"}], "owner": {"reputation": 78, "user_id": 9769705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qYq0gD8B-ow/AAAAAAAAAAI/AAAAAAAAACQ/p5kjblPP-bU/photo.jpg?sz=128", "display_name": "MasovyKnedlicek", "link": "https://stackoverflow.com/users/9769705/masovyknedlicek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 1, "accepted_answer_id": 53185854, "answer_count": 5, "score": 2, "last_activity_date": 1541659707, "creation_date": 1541577106, "last_edit_date": 1541581380, "question_id": 53185370, "link": "https://stackoverflow.com/questions/53185370/return-two-last-digits-of-an-integer-as-string-in-c", "title": "Return two last digits of an integer as string in C", "body": "<p>I have a 3 digit integer <code>myInt</code>:</p>\n\n<pre><code>int myInt = 809;\n</code></pre>\n\n<p>I need an output string <code>*myStr</code> which consists of the 2 last digits. Therefore </p>\n\n<pre><code>char *mystr = \"09\";\n</code></pre>\n\n<p>What would be the easiest solution to do that?</p>\n"}, {"tags": ["c", "pointers", "go", "type-conversion", "cgo"], "comments": [{"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1541577248, "post_id": 53185257, "comment_id": 93260220, "body": "function parameter <code>uint8_t *data</code> is incompatible with local variable <code>uint8_t *data[BUF_SIZE];</code> so it should probably be <code>uint8_t data[BUF_SIZE];</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9502084, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Vincent Em", "link": "https://stackoverflow.com/users/9502084/vincent-em"}, "is_accepted": true, "score": 1, "last_activity_date": 1541578076, "last_edit_date": 1541578076, "creation_date": 1541577236, "answer_id": 53185394, "question_id": 53185257, "link": "https://stackoverflow.com/questions/53185257/direct-c-pointer-conversion/53185394#53185394", "title": "Direct C pointer conversion", "body": "<p>Sorry guys, I found my own mistake:</p>\n\n<pre><code>// convert unsafePtr to a pointer of the type *[1 &lt;&lt; 30]C.uint8_t\narrayPtr := (*[1 &lt;&lt; 30]C.uint8_t)(unsafePtr)\n</code></pre>\n\n<p>==> to</p>\n\n<pre><code>// convert unsafePtr to a pointer of the type *[1 &lt;&lt; 30]uint8\narrayPtr := (*[1 &lt;&lt; 30]uint8)(unsafePtr)\n</code></pre>\n\n<p>Problem solved!</p>\n\n<p>Thanks ;)</p>\n"}], "owner": {"reputation": 11, "user_id": 9502084, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Vincent Em", "link": "https://stackoverflow.com/users/9502084/vincent-em"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 53185394, "answer_count": 1, "score": -1, "last_activity_date": 1541578076, "creation_date": 1541576541, "last_edit_date": 1541577022, "question_id": 53185257, "link": "https://stackoverflow.com/questions/53185257/direct-c-pointer-conversion", "title": "Direct C pointer conversion", "body": "<p>I have this C code:</p>\n\n<pre><code>uint8_t *data[BUF_SIZE];\ndata = ...;\n\n// extern void goReadData(uint8_t *data, int bufferSize);\ngoReadData(data, BUF_SIZE)\n</code></pre>\n\n<p>And in the GO Code I'm trying to use the <code>data</code> pointer as a GO array or slice, I want to retrieve an []uint8 from the *C.uint8_t. I know the size of the <code>data</code></p>\n\n<pre><code>//export goReadData\nfunc goReadData(data *C.uint8_t, bufferSize C.int) {\n\n    fmt.Printf(\"Data type %v\\n\", reflect.TypeOf(data))\n    // print 1: Data type *main._Ctype_uchar\n\n\n    // Solution 1: GoBytes\n    // works but really slow (memory copy I think)\n    goBytes := C.GoBytes(unsafe.Pointer(data), bufferSize)\n    fmt.Printf(\"goBytes type %v\\n\", reflect.TypeOf(goBytes))\n    // print 2: goBytes type []uint8\n\n\n    // Solution 2: direct pointer\n    // Really fast, but wrong type at the end\n    // unsafe.Pointer to the C array\n    unsafePtr := unsafe.Pointer(data)\n\n    // convert unsafePtr to a pointer of the type *[1 &lt;&lt; 30]C.uint8_t\n    arrayPtr := (*[1 &lt;&lt; 30]C.uint8_t)(unsafePtr)\n\n    // slice the array into a Go slice, with the same backing array\n    // as data, making sure to specify the capacity as well as\n    // the length.\n    length := int(bufferSize)\n    slice := arrayPtr[0:length:length]\n\n    fmt.Printf(\"Direct slice type %v\\n\", reflect.TypeOf(slice))\n    //Print 3: Direct type []main._Ctype_uchar\n}\n</code></pre>\n\n<p>How could I do to recover an <code>[]uint8</code> instead of []main._Ctype_uchar with the second solution? Or do you have another solution to do that without a bytes copy?</p>\n"}, {"tags": ["c", "png", "rgb", "libpng"], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 3, "last_activity_date": 1541576976, "creation_date": 1541576976, "answer_id": 53185352, "question_id": 53185114, "link": "https://stackoverflow.com/questions/53185114/how-to-change-rgb-values-from-a-png-image-with-libpng-using-c/53185352#53185352", "title": "How to change rgb values from a png image with libpng using c?", "body": "<p>To modify the image, you have to do some work on <code>px</code> data.</p>\n\n<p>For instance, if you want to set image to RED, you can do this</p>\n\n<pre><code>static void process_png(void) {\n\n    /* set wanted color as red */\n    png_byte wanted_color[] = {255,0,0};\n\n    for (unsigned int y = 0; y &lt; height; y++) {\n        png_bytep row = row_pointers[y];\n        for (unsigned int x = 0; x &lt; width; x++) {\n            png_bytep px = &amp;(row[x * 4]);\n\n            /* set pixel to wanted color*/\n            for(int i = 0; i &lt; 3; ++i)\n                px[i] = wanted_color[i];\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10617032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttt44.jpg?s=128&g=1", "display_name": "Emiliano P&#233;rez", "link": "https://stackoverflow.com/users/10617032/emiliano-p%c3%a9rez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 53185352, "answer_count": 1, "score": 3, "last_activity_date": 1541576976, "creation_date": 1541575800, "last_edit_date": 1541576152, "question_id": 53185114, "link": "https://stackoverflow.com/questions/53185114/how-to-change-rgb-values-from-a-png-image-with-libpng-using-c", "title": "How to change rgb values from a png image with libpng using c?", "body": "<p>What is a recommendable way to change the rgb values of a png image? Right now I'm using an example code to see the way libpng works, it only opens a png image and writes another png image, however I would like to change the RGB values of this new image so that it gets to be all blue, green or red, whatever is my choice, is there an efficient way to do it?</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;png.h&gt;\n\nint width, height;\npng_byte color_type;\npng_byte bit_depth;\npng_bytep *row_pointers;\n\nvoid read_png_file(char *filename) {\n  FILE *fp = fopen(filename, \"rb\");\n  if(!fp) abort();\n  png_structp png = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);\n  if(!png) abort();\n  png_infop info = png_create_info_struct(png);\n  if(!info) abort();\n  if(setjmp(png_jmpbuf(png))) abort();\n  png_init_io(png, fp);\n  png_read_info(png, info);\n  width      = png_get_image_width(png, info);\n  height     = png_get_image_height(png, info);\n  color_type = png_get_color_type(png, info);\n  bit_depth  = png_get_bit_depth(png, info);\n\n  if(bit_depth == 16)\n    png_set_strip_16(png);\n\n  if(color_type == PNG_COLOR_TYPE_PALETTE)\n    png_set_palette_to_rgb(png);\n\n  if(color_type == PNG_COLOR_TYPE_GRAY &amp;&amp; bit_depth &lt; 8)\n    png_set_expand_gray_1_2_4_to_8(png);\n\n  if(png_get_valid(png, info, PNG_INFO_tRNS))\n    png_set_tRNS_to_alpha(png);\n\n  if(color_type == PNG_COLOR_TYPE_RGB ||\n     color_type == PNG_COLOR_TYPE_GRAY ||\n     color_type == PNG_COLOR_TYPE_PALETTE)\n    png_set_filler(png, 0xFF, PNG_FILLER_AFTER);\n\n  if(color_type == PNG_COLOR_TYPE_GRAY ||\n     color_type == PNG_COLOR_TYPE_GRAY_ALPHA)\n    png_set_gray_to_rgb(png);\n\n  png_read_update_info(png, info);\n\n  row_pointers = (png_bytep*)malloc(sizeof(png_bytep) * height);\n  for(int y = 0; y &lt; height; y++) {\n    row_pointers[y] = (png_byte*)malloc(png_get_rowbytes(png,info));\n  }\n\n  png_read_image(png, row_pointers);\n\n  fclose(fp);\n}\n\nvoid write_png_file(char *filename) {\n  int y;\n\n  FILE *fp = fopen(filename, \"wb\");\n  if(!fp) abort();\n\n  png_structp png = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);\n  if (!png) abort();\n\n  png_infop info = png_create_info_struct(png);\n  if (!info) abort();\n\n  if (setjmp(png_jmpbuf(png))) abort();\n\n  png_init_io(png, fp);\n\n  png_set_IHDR(\n    png,\n    info,\n    width, height,\n    8,\n    PNG_COLOR_TYPE_RGBA,\n    PNG_INTERLACE_NONE,\n    PNG_COMPRESSION_TYPE_DEFAULT,\n    PNG_FILTER_TYPE_DEFAULT\n  );\n\n  png_set_expand(png);\n  png_write_info(png, info);\n  png_write_image(png, row_pointers);\n  png_write_end(png, NULL);\n\n  for(int y = 0; y &lt; height; y++) {\n    free(row_pointers[y]);\n  }\n  free(row_pointers);\n\n  fclose(fp);\n}\n\nvoid process_png_file() {\n  for(int y = 0; y &lt; height; y++) {\n    png_bytep row = row_pointers[y];\n    for(int x = 0; x &lt; width; x++) {\n      png_bytep px = &amp;(row[x * 4]);\n    }\n  }\n}\n\nint main(int argc, char *argv[]) {\n  if(argc != 3) abort();\n\n  read_png_file(argv[1]);\n  process_png_file();\n  write_png_file(argv[2]);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory-management"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1541573281, "post_id": 53184677, "comment_id": 93258804, "body": "Three stars, two mallocs, off by one. Usually that cursory observation indicates problems. Each star means one level of pointing. For each level you need to be able to explain how the memory it is pointing to gets allocated. Please do so in your question to improve clarity."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541573364, "post_id": 53184677, "comment_id": 93258832, "body": "You never make <code>sheet</code> point anywhere."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541573453, "post_id": 53184677, "comment_id": 93258860, "body": "And <code>sizeof(char(*))</code> is the size of a <i>pointer</i> to <code>char</code>. That is equal to <code>4</code> or <code>8</code> (depending on 32 or 64 bit system). If you want space for three characters (<b><i>including</i></b> the null-terminator) then that&#39;s just <code>3</code>."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1541575985, "creation_date": 1541575985, "answer_id": 53185147, "question_id": 53184677, "link": "https://stackoverflow.com/questions/53184677/allocating-memory-to-a-2d-array-in-c/53185147#53185147", "title": "Allocating memory to a 2D array in C", "body": "<p>I think that what you are looking for is this:</p>\n\n<pre><code>typedef struct\n{\n  int columns;\n  int rows;\n  char sheet[];\n} SPREADSHEET;\n\nSPREADSHEET *sp = malloc( sizeof(SPREADSHEET) + sizeof(char[columns][rows]) );\nsp-&gt;columns = columns;\nsp-&gt;rows = rows;\n\nfor(size_t i=0; i&lt;columns; i++)\n{\n  for(size_t j=0; j&lt;rows; j++)\n  {\n    sp-&gt;sheet[i*rows + j] = something;\n  }\n}\n\n...\nfree(sp);\n</code></pre>\n\n<p>Where <code>sheet</code> is a so-called <em>flexible array member</em>. It has to be declared last in the struct, and it's guaranteed to behave deterministically when you allocate trailing memory after the struct itself. The variable in itself does not add to the size of the struct.</p>\n\n<p>Unfortunately C only allows single row flexible array members, so you have to use a \"mangled 2D array\" if you wish to use it as in your case. It means we calculate the array index manually in run-time, in order to access the array items.</p>\n\n<p>Alternatively, you can access the items through a temporary array pointer, which is also well-defined:</p>\n\n<pre><code>char (*arr)[rows] = (void*) sp-&gt;sheet;\nfor(size_t i=0; i&lt;columns; i++)\n{\n  for(size_t j=0; j&lt;rows; j++)\n  {\n    arr[i][j] = something;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7995321, "user_type": "registered", "profile_image": "https://graph.facebook.com/1311911288898130/picture?type=large", "display_name": "nugh", "link": "https://stackoverflow.com/users/7995321/nugh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 53185147, "answer_count": 1, "score": 1, "last_activity_date": 1541576787, "creation_date": 1541573056, "question_id": 53184677, "link": "https://stackoverflow.com/questions/53184677/allocating-memory-to-a-2d-array-in-c", "title": "Allocating memory to a 2D array in C", "body": "<p>Why can't I allocate each index of a 2D array individually.\nIs there any correct and proper way to allocate memory if you want to use a dynamically allocated array in C?\nI am getting a segmentation error for this code\nhere is my code:</p>\n\n<pre><code> typedef struct\n {\n    char ***sheet;\n    int columns;\n    int rows;\n } SPREADSHEET;  // to access data sheet[COL][ROW]\n\n\n\n SPREADSHEET *createSpreadSheet(int columns, int rows) {\n    if (columns &lt;= 0 || rows &lt;= 0){  // Disallow 0 or negative rows/columns\n        return NULL;\n    }\n    SPREADSHEET *sp = malloc(sizeof(SPREADSHEET));\n    sp-&gt;columns = columns;\n    sp-&gt;rows = rows;\n\n\n\n    for(int i=0; i&lt;rows; i++){\n        for(int j=0; j&lt;columns; j++){\n            printf(\"i: %i, j: %i\\n\", i, j);\n            sp-&gt;sheet[i][j] = malloc(sizeof(char(*))+2);\n        }\n    }\n    return sp;\n }\n</code></pre>\n"}, {"tags": ["java", "c", "static"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541573016, "post_id": 53184640, "comment_id": 93258735, "body": "No. No. And yes. C and Java are <i>very</i> different languages, and for semantic details like this it&#39;s not really possible to do direct comparisons."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1541573048, "post_id": 53184640, "comment_id": 93258741, "body": "This might be seen as asking several questions in one, which is not appreciated by many StackOverflow users. On the other hand, they can be seen as only different aspects of one question. You might want to rephrase a little to increase that second impression."}, {"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1541574733, "post_id": 53184640, "comment_id": 93259271, "body": "Apart from the same spelling, these keywords have little in common."}], "owner": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "closed_date": 1541576461, "answer_count": 0, "score": 0, "last_activity_date": 1541578364, "creation_date": 1541572776, "last_edit_date": 1541578364, "question_id": 53184640, "link": "https://stackoverflow.com/questions/53184640/difference-of-static-keyword-in-c-and-java", "closed_reason": "Duplicate", "title": "difference of static keyword in C and Java", "body": "<p>just have some questions about static keyword in C, I know static variables/functions cannot be referenced by other modules and they are stored in relocatable object's .data section</p>\n\n<p>Q1. Is 'static' keyword in C equivalent to 'private' in Java? </p>\n\n<p>Q2. A global variable in C is equivalent to a static variable in Java</p>\n\n<p>Q3. My understanding is that: static keyword has different context in C and Java( if answers to Q1 and Q2 are 'yes')\nAnd programmers said that static variables considered evil, do they actually mean using static variables in Java is bad but using it in C is good?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1541572394, "post_id": 53184546, "comment_id": 93258596, "body": "You have to store the printed elements and compare every time before next printing."}, {"owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1541572784, "post_id": 53184546, "comment_id": 93258685, "body": "@SouravGhosh No need to store them. Just compare with all previous. I.e. <code>for (j = 0; j &lt; i; j++) { if (argv[1][j] == argv[1][i]) { doPrint = false; break; }}</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "edited": false, "score": 1, "creation_date": 1541572864, "post_id": 53184546, "comment_id": 93258698, "body": "@SaniSinghHuttunen only useful if <code>i</code> is a lower number..."}, {"owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1541573054, "post_id": 53184546, "comment_id": 93258743, "body": "@SouravGhosh: I don&#39;t follow you... What do you mean?"}], "answers": [{"comments": [{"owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "edited": false, "score": 2, "creation_date": 1541573247, "post_id": 53184670, "comment_id": 93258799, "body": "And here we have a textbook example of a buffer overflow vulnerability."}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "edited": false, "score": 0, "creation_date": 1541573628, "post_id": 53184670, "comment_id": 93258907, "body": "I&#39;m sorry, what?@SaniSinghHuttunen"}, {"owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "edited": false, "score": 0, "creation_date": 1541574024, "post_id": 53184670, "comment_id": 93259015, "body": "Try using any extended ASCII characters (i.e. ASCII codes &gt; 127) and you&#39;ll be out of bounds of the <code>f</code>-array."}, {"owner": {"reputation": 2077, "user_id": 3009636, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/04e0f94443ae5d17f977cb09ccde315b?s=128&d=identicon&r=PG&f=1", "display_name": "quant", "link": "https://stackoverflow.com/users/3009636/quant"}, "edited": false, "score": 0, "creation_date": 1541574039, "post_id": 53184670, "comment_id": 93259022, "body": "@YunbinLiu Buffer overflows are explained here <a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Buffer_overflow</a>"}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": -1, "last_activity_date": 1541573012, "creation_date": 1541573012, "answer_id": 53184670, "question_id": 53184546, "link": "https://stackoverflow.com/questions/53184546/how-would-i-only-print-out-characters-that-have-not-appeared-before-in-an-argume/53184670#53184670", "title": "How would I only print out characters that have not appeared before in an argument?", "body": "<p>You can do like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    int i;\n    char f[128];\n    unsigned char ch;\n    if (argc != 2) {\n        printf(\"use : ./a.out str\");\n        return -1;\n    }\n    for (i = 0; i != sizeof(f); ++i)\n        f[i] = 0;\n    for (i = 0; argv[1][i] != '\\0'; ++i) {\n        ch = argv[1][i];\n        if (f[ch] == 0) {\n            putchar(ch);\n            f[ch] = 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1732, "user_id": 9994983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/932949dc143ce7e96b7f4704594c9e84?s=128&d=identicon&r=PG&f=1", "display_name": "Alex G", "link": "https://stackoverflow.com/users/9994983/alex-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1541582743, "creation_date": 1541582743, "answer_id": 53186602, "question_id": 53184546, "link": "https://stackoverflow.com/questions/53184546/how-would-i-only-print-out-characters-that-have-not-appeared-before-in-an-argume/53186602#53186602", "title": "How would I only print out characters that have not appeared before in an argument?", "body": "<p>You can try this. You need an array with the length of the <a href=\"https://theasciicode.com.ar/\" rel=\"nofollow noreferrer\">max possible ascii code</a>, to handle the <em>seen</em> characters. Hope this helps.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    int * seen = calloc(256, sizeof(char));\n\n    if (argv[1] == NULL) {\n\n        printf(\"No argument.\\n\");\n\n        return 0;\n    }\n\n    for (int i = 0 ; i &lt; strlen(argv[1]) ; i++) {\n\n        if (seen[argv[1][i]] != 1) {\n\n            seen[argv[1][i]] = 1;\n\n            putchar(argv[1][i]);\n        }\n    }\n\n    free(seen);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10616827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1f6666ef66c9cf8ce53b2be3878d3e5?s=128&d=identicon&r=PG&f=1", "display_name": "truffordd", "link": "https://stackoverflow.com/users/10616827/truffordd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541583226, "creation_date": 1541572164, "last_edit_date": 1541583226, "question_id": 53184546, "link": "https://stackoverflow.com/questions/53184546/how-would-i-only-print-out-characters-that-have-not-appeared-before-in-an-argume", "title": "How would I only print out characters that have not appeared before in an argument?", "body": "<p>I'm trying to figure out a way to only print out the characters without getting duplicates in C. Any help is appreciated.</p>\n\n<p>For example, if i pass in 'Hello', i would like 'Helo' returned. </p>\n\n<p>My current code that just prints out the passed in argument:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint     main(int argc, char **argv)\n{\n    int i;\n\n    i = 0;\n    while (argv[1][i] != '\\0')\n    {\n        putchar(argv[1][i]);\n        i++;\n    }\n    return (0);\n}\n</code></pre>\n\n<p>Edit: preferably without the use of any extra functions / #includes\u2019s </p>\n"}, {"tags": ["c++", "c", "floating-point", "double", "type-punning"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1541571427, "post_id": 53184403, "comment_id": 93258349, "body": "Does not <code>*(unsigned long long *) &amp;a;</code> violate strict aliasing?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1541571535, "post_id": 53184403, "comment_id": 93258381, "body": "@SouravGhosh Yes, see <a href=\"https://stackoverflow.com/a/51228315/1708801\">What is strict aliasing</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1541571627, "post_id": 53184403, "comment_id": 93258402, "body": "@ShafikYaghmour Thanks for the confirmation sir, that was more of a rhetorical q. :)"}, {"owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "edited": false, "score": 1, "creation_date": 1541571679, "post_id": 53184403, "comment_id": 93258412, "body": "<code>printf(&quot;Double a = %f (0x%llx)&quot;, a, b);</code>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1541571688, "post_id": 53184403, "comment_id": 93258414, "body": "@SouravGhosh the information was for the general audience who may not understand ;-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1541604043, "post_id": 53184403, "comment_id": 93273717, "body": "I really don&#39;t see how this is <i>not</i> a dupe of the strict aliasing question. If we are to keep it open, the question needs to be narrowed down to C or C++. Currently it is too broad. It would be helpful if high rep users with gold badges did an effort in moderating the cross-posting aspect of C and C++ tags <i>before</i> writing answers."}], "answers": [{"comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1541573038, "post_id": 53184576, "comment_id": 93258739, "body": "A minor addition: The type-punning is standard conform in C11 but not allowed in C++. You dedicated your answer to C. Hopefully, OP did notice this."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 3, "last_activity_date": 1541573145, "last_edit_date": 1541573145, "creation_date": 1541572362, "answer_id": 53184576, "question_id": 53184403, "link": "https://stackoverflow.com/questions/53184403/display-bit-pattern-of-double-as-hex/53184576#53184576", "title": "Display bit pattern of double as hex?", "body": "<p>In C, code like</p>\n\n<pre><code>unsigned long long b = *(unsigned long long *) &amp;a;\n</code></pre>\n\n<p>is illegal as it violates a rule called strict aliasing about pointers of one type referencing objects of a different type.</p>\n\n<p>However, there is on exception: <strong>a char pointer may alias any object</strong></p>\n\n<p>So using char pointer, you can do something like this in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    double a = 4.75;\n    unsigned char* p;\n\n    // Method 1 - direct memory read\n    p = (unsigned char*)&amp;a;\n    for (size_t i=0; i &lt; sizeof(double); ++i)\n    {\n        printf(\"%02x \", *p);\n        ++p;\n    }\n    printf(\"\\n\");\n\n    // Method 2 - reversed memory read\n    size_t i = sizeof(double);\n    p = (unsigned char*)&amp;a + i - 1;\n    do\n    {\n        printf(\"%02x \", *p);\n        --p;\n        --i;\n    } while(i &gt; 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>00 00 00 00 00 00 13 40 \n40 13 00 00 00 00 00 00\n</code></pre>\n\n<p>The two methods prints with different endianness.</p>\n\n<p>If you don't like pointers, you can as an alternative use a union. Like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    union\n    {\n        double a;\n        char c[sizeof(double)];\n    } d;\n    d.a = 4.75;\n\n    for (size_t i=0; i &lt; sizeof(double); ++i)\n    {\n        printf(\"%02x \", d.c[i]);\n    }\n    printf(\"\\n\");\n\n    size_t i = sizeof(double);\n    do\n    {\n        --i;\n        printf(\"%02x \", d.c[i]);\n    }\n    while (i &gt; 0);\n    printf(\"\\n\");\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>00 00 00 00 00 00 13 40 \n40 13 00 00 00 00 00 00 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 3, "last_activity_date": 1541573312, "last_edit_date": 1541573312, "creation_date": 1541572366, "answer_id": 53184577, "question_id": 53184403, "link": "https://stackoverflow.com/questions/53184403/display-bit-pattern-of-double-as-hex/53184577#53184577", "title": "Display bit pattern of double as hex?", "body": "<p>Your code has two issues, the simple one is that you are using the wrong format specifier <code>%llx</code> is the correct specifier for <em>unsigned long long</em>. Both clang and gcc provide a warning for this using <code>-Wall</code>, <a href=\"https://godbolt.org/z/Yfmsd2\" rel=\"nofollow noreferrer\">see it live</a>.</p>\n\n<p>The second issue is that you are violating the <a href=\"https://stackoverflow.com/a/51228315/1708801\">strict aliasing rule</a> here:</p>\n\n<pre><code>unsigned long long b = *(unsigned long long *) &amp;a;\n</code></pre>\n\n<p>the correct way to type-pun (in both C and C++) is to use memcpy (<a href=\"https://wandbox.org/permlink/7y0RHfA6n6XwAR8y\" rel=\"nofollow noreferrer\">see it working live</a>):</p>\n\n<pre><code>std::memcpy( &amp;b, &amp;a, sizeof(double));\n</code></pre>\n\n<p>At the strict aliasing link above notes in C++20 we should get <code>bit_cast</code> which will simplify type-punning e.g.:</p>\n\n<pre><code>b = bit_cast&lt;unsigned long long&gt;(a);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 2, "last_activity_date": 1541572426, "creation_date": 1541572426, "answer_id": 53184585, "question_id": 53184403, "link": "https://stackoverflow.com/questions/53184403/display-bit-pattern-of-double-as-hex/53184585#53184585", "title": "Display bit pattern of double as hex?", "body": "<p>In C++:</p>\n\n<pre><code>double a = 4.75;\nchar tmp[sizeof(double)];\nmemcpy(tmp, &amp;a, sizeof(double));\n... // print individual bytes as hex\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>double a = 4.75;\nunsigned char* tmp = reinterpret_cast&lt;unsigned char*&gt;(&amp;a);\nfor (int i = 0; i &lt; sizeof(double); i++)\n  ... // print *(tmp + i) as hex\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 5594612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TmyD.jpg?s=128&g=1", "display_name": "zicameau", "link": "https://stackoverflow.com/users/5594612/zicameau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 53184577, "answer_count": 3, "score": 2, "last_activity_date": 1541592364, "creation_date": 1541571295, "last_edit_date": 1541573570, "question_id": 53184403, "link": "https://stackoverflow.com/questions/53184403/display-bit-pattern-of-double-as-hex", "title": "Display bit pattern of double as hex?", "body": "<p>I am trying to use <code>printf</code> in order to print the binary representation of a double onto the console. Here is the code that I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    double a = 4.75;\n    unsigned long long b = *(unsigned long long *) &amp;a;\n    printf(\"Double a = %f (0x%x)\" a, b);\n}\n</code></pre>\n\n<p>I also tried changing it from a long long to a long instead. Here is the result that I get from doing this in gcc linux:</p>\n\n<pre><code>Double a = 4.750000 (0x0)\n</code></pre>\n\n<p>I'm pretty sure since my system is little endian that it is only grabbing the first 32 bits which are all zeroes. However, I'm not sure how to fix this. </p>\n\n<p>I thought it might have been because long is 64 bit in linux but after testing that I got the same result again. Maybe I'm printing it incorrectly? Not sure, let me know and thanks for your time.</p>\n"}, {"tags": ["c", "bison", "flex-lexer", "yacc", "lexical-analysis"], "comments": [{"owner": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "edited": false, "score": 2, "creation_date": 1541593304, "post_id": 53184359, "comment_id": 93267614, "body": "You know you can just come and ask me about my assessed coursework. I&#39;m just here...."}], "answers": [{"comments": [{"owner": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "edited": false, "score": 0, "creation_date": 1541593487, "post_id": 53184584, "comment_id": 93267717, "body": "I have not taught them about the POSIX [[:alpha:]] so they wouldn&#39;t know that from class, but of course you are correct. I&#39;ll also answer as they person who is running the student labs! Brian"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "edited": false, "score": 0, "creation_date": 1541601673, "post_id": 53184584, "comment_id": 93272068, "body": "@brian: frankly, I think you would be doing them a better favour by teaching them about character classes and leaving &quot;definitions&quot; (i.e. macros) for some other moment. In the unicode world, <code>a-z</code> is bereft of meaning and at some point its use will be an automatic demerit. (Yes, flex is different. But still.) Meanwhile, definitions are badly- and over-used and your student&#39;s <code>character</code> is just one more example. It is called <code>character</code> but it&#39;s an <code>alpha</code>; with the proper name, the error in <code>&#39;[[:alpha:]]&#39;</code> becomes evident."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "edited": false, "score": 0, "creation_date": 1541601728, "post_id": 53184584, "comment_id": 93272095, "body": "We can continue in chat if you like but I&#39;m going to reluctantly board an airplane soon."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1541572419, "creation_date": 1541572419, "answer_id": 53184584, "question_id": 53184359, "link": "https://stackoverflow.com/questions/53184359/parser-y79-33-41-symbol-character-is-used-but-is-not-defined-as-a-token-and-h/53184584#53184584", "title": "parser.y:79.33-41: symbol character is used, but is not defined as a token and has no rules", "body": "<p>The message means exactly what it says. You use the symbol <code>character</code> but you have neither declared it to be a token nor have you provided a production for it. So it is neither a terminal nor a non-terminal, and the parser generator complains when it is used.</p>\n\n<p>What happens in your lexer is not visible to the parser generator. So the fact that you have (pointlessly, IMHO) created a lexer definition of <code>{character}</code> is only of interest inside the lexer file. (It's pointless because you could equivalently use the Posix character class <code>[[:alpha:]]</code> which has a clear meaning and is just as readable as <code>{character}</code>.) And really the parser doesn't need to know anything about how the lexer comes up with the token code value. So when you declare a token in the parser definition, the parser generator puts a definition for that symbol in a header file; the lexer <code>#include</code>s that header file, and that lets it use that symbol as a return value for the parser. No other communication is necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1541602574, "post_id": 53189519, "comment_id": 93272663, "body": "<code>APOSTROPHE</code> will be returned if <code>&#39;{character}&#39;</code> doesn&#39;t match (for example <code>&#39;0&#39;</code>). <code>CHARACTER</code> will be returned instead of <code>ID</code> for the literal identifier <code>character</code>; if that were &quot;corrected&quot; to the macro expansion, it would be favoured for single-character identifiers like <code>x</code>. Of course, you are right about removing <code>character_constant</code> from the grammar, but I don&#39;t think either of our answers provides a solid didactic explanation. :-("}], "tags": [], "owner": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1541593817, "creation_date": 1541593817, "answer_id": 53189519, "question_id": 53184359, "link": "https://stackoverflow.com/questions/53184359/parser-y79-33-41-symbol-character-is-used-but-is-not-defined-as-a-token-and-h/53189519#53189519", "title": "parser.y:79.33-41: symbol character is used, but is not defined as a token and has no rules", "body": "<p>The fault is that the single character cannot be differentiated from an identifier in the lexer. You have correctly added a lexer rule to match it which returns a token named <code>character_constant</code>, however you have also put a parser rule for character constant which is not needed, as its already matched in the lexer. The lexer should not be returning an <code>APOSTROPHE</code> as a token as it would have been matched in the <code>character_constant</code> token.</p>\n\n<p>You should just delete the rule from bison for <code>character_constant</code> and add <code>character_constant</code> to the list of tokens matched by the lexer in the <code>%token</code> declaration.</p>\n\n<p>I'd normally recommend using uppercase for the token names to avoid any ambiguity of which is a terminal and which a non-terminal.</p>\n"}], "owner": {"reputation": 65, "user_id": 4460986, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0d2474fdcafae49e19d0e420d1bedf81?s=128&d=identicon&r=PG&f=1", "display_name": "Master Chef", "link": "https://stackoverflow.com/users/4460986/master-chef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 53189519, "answer_count": 2, "score": 1, "last_activity_date": 1541593817, "creation_date": 1541571048, "last_edit_date": 1541572061, "question_id": 53184359, "link": "https://stackoverflow.com/questions/53184359/parser-y79-33-41-symbol-character-is-used-but-is-not-defined-as-a-token-and-h", "title": "parser.y:79.33-41: symbol character is used, but is not defined as a token and has no rules", "body": "<p>Having an issue with my parser and I just can't wrap my head around it. I keep getting the <strong>error: parser.y:79.33-41: symbol character is used, but is not defined as a token and has no rules</strong>. I've put the line in ** **.</p>\n\n<p>Below is my parser code:</p>\n\n<pre><code>%token          PLUS TIMES DIVIDE SUBTRACT BRA KET EQUALS NOT_EQUAL LESS_THAN GREATER_THAN GREATER_THAN_OR_EQUAL\n%token          COMA SEMICOLON ARROW DECIMAL ENDDO ENDFOR ENDIF ENDP ENDWHILE ELSE CODE OF TYPE DECLARATIONS CHARACTER \n%token          INTEGER REAL IF THEN DO WHILE FOR IS BY TO WRITE NEWLINE READ NOT AND OR ID LESS_THAN_OR_EQUAL APOSTROPHE \n\n%%\nProgram : block \n            | ENDP \n            | ID\n    ;\nblock : DECLARATIONS declaration_block  CODE  statement_list \n        | CODE statement_list\n    ;\ndeclaration_block : ID OF TYPE SEMICOLON \n                    | ID_list OF TYPE SEMICOLON                     \n                    | ID_list OF TYPE SEMICOLON declaration_block\n    ;               \nID_list :           ID \n                    | ID COMA ID_list\n    ;               \ntype :  CHARACTER \n        | INTEGER \n        | REAL\n    ;   \nstatement_list : statement \n                    | statement_list SEMICOLON statement\n    ;               \nstatement : assignment_statement \n                | if_statement\n                | do_statement \n                | while_statement \n                | for_statement \n                | write_statement \n                | read_statement\n    ;\nassignment_statement : expression ARROW ID\n    ;\nif_statement : IF  conditional  THEN  statement_list  ELSE  statement_list  ENDIF\n    ;\ndo_statement : DO statement_list WHILE  conditional  ENDDO\n    ;\nwhile_statement : WHILE conditional  DO statement_list  ENDWHILE\n    ;\nfor_statement : FOR  ID  IS  expression  BY  expression  TO  expression  DO  statement_list ENDFOR\n    ;\nwrite_statement : WRITE BRA output_list KET  write_statement NEWLINE\n    ;\nread_statement : READ BRA ID KET\n    ;\noutput_list : value \n                | output_list COMA value\n    ;\nconditional : expression comparator expression \n                | NOT conditional               \n                | expression comparator expression AND conditional          \n                | expression comparator expression OR conditional           \n    ;\ncomparator : EQUALS \n                | NOT_EQUAL \n                | LESS_THAN \n                | GREATER_THAN \n                | LESS_THAN_OR_EQUAL \n                | GREATER_THAN_OR_EQUAL\n    ;               \nexpression : term \n                | expression PLUS term \n                | expression SUBTRACT term\n    ;           \nterm : value \n        | term TIMES value \n        | term DIVIDE value\n    ;   \nvalue : ID \n            | constant \n            | BRA expression KET\n    ;       \nconstant : number_constant \n            | character_constant\n    ;       \n**character_constant : APOSTROPHE character APOSTROPHE**\n    ;\nnumber_constant : INTEGER \n                    | SUBTRACT INTEGER \n                    | SUBTRACT INTEGER DECIMAL INTEGER \n                    | INTEGER DECIMAL INTEGER\n    ;           \n%%\n</code></pre>\n\n<p>Below is my lexical analyser:</p>\n\n<pre><code>%{\n#ifdef PRINT\n#define TOKEN(i) printf(\"Token: \" #i \"\\n\");\n#else\n#define TOKEN(i) return (i);\n#endif\n%}\n\ndelim           [ \\r\\n\\t]\nws              {delim}+\ndigit           [0-9]\ncharacter       [a-zA-Z]\nINTEGER         {digit}+\nid              {character}({character}|{digit})*\ncharacter_constant ('{character}')\n\n\n%%\n{ws}            ; /* Do Nothing */\n\n\"+\"             TOKEN(PLUS)\n\"*\"             TOKEN(TIMES)\n\"/\"             TOKEN(DIVIDE)\n\"-\"             TOKEN(SUBTRACT)\n\"(\"             TOKEN(BRA)\n\")\"             TOKEN(KET)\n...\n\"'\"             TOKEN(APOSTROPHE)\nENDP            TOKEN(ENDP)\nCODE            TOKEN(CODE)\nOF              TOKEN(OF)\nTYPE            TOKEN(TYPE)\nDECLARATIONS    TOKEN(DECLARATIONS)\ncharacter       TOKEN(CHARACTER)\n{INTEGER}       TOKEN(INTEGER)\n...\n{id}            TOKEN(ID)\n{character_constant} TOKEN(character_constant)\n%%\n</code></pre>\n\n<p>The spelling is correct throughout my files from my BNF to my parser, does anyone know what seems to be the issue here. I've tried changing it to letter instead of character but that just gives me another error.</p>\n"}, {"tags": ["c", "pointers", "type-conversion"], "comments": [{"owner": {"reputation": 304, "user_id": 1519409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc3ec2682d7b030fba056d7c716e666?s=128&d=identicon&r=PG", "display_name": "inavda", "link": "https://stackoverflow.com/users/1519409/inavda"}, "edited": false, "score": 0, "creation_date": 1541570501, "post_id": 53184259, "comment_id": 93258089, "body": "What error do you get?"}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1541570559, "post_id": 53184259, "comment_id": 93258110, "body": "Would you tell me how this line compiles: <code>pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code>... Have you typo&#39;d <code>(void (*)())</code> to <code>(void*)</code>?"}, {"owner": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541570799, "post_id": 53184259, "comment_id": 93258160, "body": "did you try debugging you code to see where it crashes?"}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 304, "user_id": 1519409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc3ec2682d7b030fba056d7c716e666?s=128&d=identicon&r=PG", "display_name": "inavda", "link": "https://stackoverflow.com/users/1519409/inavda"}, "edited": false, "score": 0, "creation_date": 1541570912, "post_id": 53184259, "comment_id": 93258194, "body": "@inavda I&#39;m using online compiler &quot;IDEONE&quot;. The error i get is: Runtime error\t#stdin #stdout 0s 9288KB"}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1541571120, "post_id": 53184259, "comment_id": 93258243, "body": "@Ruks C_FLASH_FUNCTION_ADDRESS is a value, which is type casted to (uint32_t) pointer. and then dereference the pointer to get value at location C_FLASH_FUNCTION_ADDRESS, an then convert this to function pointer. This is what i undersatnd"}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1541571212, "post_id": 53184259, "comment_id": 93258274, "body": "@MSharathHegde You have a wrong idea about <code>void*</code>, it is <b>not a function pointer</b>... <code>void (*)()</code> is..."}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541571220, "post_id": 53184259, "comment_id": 93258279, "body": "@tod I&#39;m using an online compiler. Would it be possible to debug? I&#39;m Sure it is crashing at line &quot;pPointerToFunc();&quot; Link: <a href=\"https://ideone.com/Z8MmSS\" rel=\"nofollow noreferrer\">ideone.com/Z8MmSS</a>"}, {"owner": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541571417, "post_id": 53184259, "comment_id": 93258347, "body": "Then, may be you are messing up with memory... it is not easy to help you without having the better picture of what you are trying to achieve."}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541571674, "post_id": 53184259, "comment_id": 93258409, "body": "@tod I don&#39;t want to change the line -- &quot;pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;&quot;  ..and I should be able to call Testing_pOP_Start() using pPointerToFunc. I don&#39;t know how do i define C_FLASH_FUNCTION_ADDRESS to achieve what i need."}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1541571802, "post_id": 53184259, "comment_id": 93258444, "body": "@Ruks Can you tell me what does this line <code>pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code>?"}, {"owner": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541572025, "post_id": 53184259, "comment_id": 93258510, "body": "well, what do you want to achieve in this line?"}, {"owner": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541572168, "post_id": 53184259, "comment_id": 93258552, "body": "what is this line doing? <code>void (*pPointerToFunc)(void);</code>"}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541572469, "post_id": 53184259, "comment_id": 93258613, "body": "@tod declaration of pPointerToFunction"}], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541573362, "post_id": 53184596, "comment_id": 93258831, "body": "Whatever I do I must not change this line -- <code>pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code> Could this be possible?"}, {"owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "reply_to_user": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541575015, "post_id": 53184596, "comment_id": 93259379, "body": "Use first approash with <code>(&amp;ptemp)</code> but declare <code>ptemp</code> as <code>uint32_t</code> and be sure that <code>sizeof (void*) == sizeof(uint32_t)</code> (use 32 bit system)"}], "tags": [], "owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "is_accepted": false, "score": 1, "last_activity_date": 1541575549, "last_edit_date": 1541575549, "creation_date": 1541572524, "answer_id": 53184596, "question_id": 53184259, "link": "https://stackoverflow.com/questions/53184259/remap-function-pointer/53184596#53184596", "title": "Remap function pointer", "body": "<blockquote>\n  <p><code>C_FLASH_FUNCTION_ADDRESS</code> is some location in FLASH memory</p>\n</blockquote>\n\n<p>So that, <code>C_FLASH_FUNCTION_ADDRESS</code> is an <em>address</em> in flash memory.</p>\n\n<p>But <code>#define C_FLASH_FUNCTION_ADDRESS (ptemp)</code> reads <em>value</em> stored in <code>ptemp</code>.</p>\n\n<p>You need one of this two changes.\nGet <em>address</em> of <code>ptemp</code> (but it was casted to another type, <code>uint32_t</code> instead of <code>unsigned long</code>, type must be the same and sufficient to store address, use <code>intptr_t</code>).</p>\n\n<pre><code>#define C_FLASH_FUNCTION_ADDRESS (&amp;ptemp)\n...\npPointerToFunc = (void *)*C_FLASH_FUNCTION_ADDRESS;\n</code></pre>\n\n<p>or read and cast the value itself</p>\n\n<pre><code>#define C_FLASH_FUNCTION_ADDRESS (ptemp)\n...\npPointerToFunc = (void *)C_FLASH_FUNCTION_ADDRESS;\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>Whatever I do I must not change this line -- \n  <code>pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code>\n  Could this be possible?</p>\n</blockquote>\n\n<p>Use the first approash but <code>ptemp</code> <em>must</em> be <code>uint32_t</code> \u2014 the same type as cast in the (fixed) line.</p>\n\n<pre><code>#define C_FLASH_FUNCTION_ADDRESS (&amp;ptemp)\n...\nuint32_t long ptemp;\n...\npPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;\n</code></pre>\n\n<p>Ensure 32-bit pointers (use 32 bit programming environment, for 64-bit OS and gcc one can use <code>-m32</code> if 32-bit support installed).</p>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541574116, "post_id": 53184775, "comment_id": 93259054, "body": "not only this, I should also retain this line -- <code>pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code>"}, {"owner": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "reply_to_user": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541575407, "post_id": 53184775, "comment_id": 93259522, "body": "@MSharathHegde Well, in that case you can follow Serge Ballesta&#39;s solution, that works. But to me this one does the job in a much cleaner way than what you are trying."}], "tags": [], "owner": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "is_accepted": false, "score": 0, "last_activity_date": 1541573763, "creation_date": 1541573763, "answer_id": 53184775, "question_id": 53184259, "link": "https://stackoverflow.com/questions/53184259/remap-function-pointer/53184775#53184775", "title": "Remap function pointer", "body": "<p>From part of your reply to my comment: </p>\n\n<p><strong>\"I should be able to call Testing_pOP_Start() using pPointerToFunc\"</strong></p>\n\n<p>I assume, you are trying to achieve this: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid Testing_pOP_Start(void)\n{\n    printf(\"Inside\");\n    return;\n}\n\ntypedef void (*C_FLASH_FUNCTION_ADDRESS)(void);\nC_FLASH_FUNCTION_ADDRESS pPointerToFunc= &amp;Testing_pOP_Start;\n\nint main(void)\n{\n     // your code goes here\n\n    pPointerToFunc();\n\n    return 0;\n}\n</code></pre>\n\n<p>Try this code and let me know so that i can add more details or otherwise. </p>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541574850, "post_id": 53184887, "comment_id": 93259305, "body": "Only changing <code>#define C_FLASH_FUNCTION_ADDRESS (&amp;ptemp)</code> should fix the issue right? For me still it sin&#39;t working (<a href=\"https://ideone.com/PtUj75\" rel=\"nofollow noreferrer\">ideone.com/PtUj75</a>). Can you post the full code that worked for you?"}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541575838, "post_id": 53184887, "comment_id": 93259673, "body": "@Serge Ballesta I&#39;m going to install a compiler soon. Currently i&#39;m confined to use only online compiler. The solution is still not working for me though I&#39;ve made the changes. Link to code: <a href=\"https://ideone.com/82SbQx\" rel=\"nofollow noreferrer\">ideone.com/82SbQx</a>"}, {"owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "reply_to_user": {"reputation": 1437, "user_id": 2249026, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b19ab2d879b5b7e40278cf2b0bacca68?s=128&d=identicon&r=PG", "display_name": "tod", "link": "https://stackoverflow.com/users/2249026/tod"}, "edited": false, "score": 0, "creation_date": 1541576066, "post_id": 53184887, "comment_id": 93259762, "body": "@tod  this code <i>can&#39;t</i> work if <code>sizeof(void*) != sizeof(uint32_t)</code>"}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "edited": false, "score": 0, "creation_date": 1541576259, "post_id": 53184887, "comment_id": 93259823, "body": "@ReAl I checked <code>sizeof(void*) != sizeof(uint32_t)</code> sizeof(void*) is 8 and sizeof(uint32_t) is 4. that is why I defined ptemp as <code>unsigned long</code>"}, {"owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "reply_to_user": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "edited": false, "score": 0, "creation_date": 1541576483, "post_id": 53184887, "comment_id": 93259919, "body": "@MSharathHegde some time ago I updated my answer and especially pointed to this problem. Use 32 bit compiler (compiler mode) if you want to keep <code>(void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code> as is."}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "edited": false, "score": 0, "creation_date": 1541580593, "post_id": 53184887, "comment_id": 93261528, "body": "@ReAl, Serge Ballesta I tried a different online compiler and it worked. This helped a lot, thanks for spending time on this."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1541574438, "creation_date": 1541574438, "answer_id": 53184887, "question_id": 53184259, "link": "https://stackoverflow.com/questions/53184259/remap-function-pointer/53184887#53184887", "title": "Remap function pointer", "body": "<p>You should learn how to use a debugger.</p>\n\n<p>I just run your code under a debugger, and the error was immediately evident: after the call to <code>execute_this</code>, the values of <code>ptemp</code> and <code>pPointerToFunc</code> were different.</p>\n\n<p>I then realized that <code>C_FLASH_FUNCTION_ADDRESS</code> was not directly the address of a function, but the address of a pointer to a function (1 more indirection level).</p>\n\n<p>The fix was then evident:</p>\n\n<pre><code>#define C_FLASH_FUNCTION_ADDRESS (&amp;ptemp)\n</code></pre>\n\n<p>That's all...</p>\n\n<hr>\n\n<p><em>I'm using an online compiler</em> is not a valid reason not to learn to use a debugger. You can find free compilers around, and a debugger is an essential tool.</p>\n"}], "owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 53184887, "answer_count": 3, "score": -1, "last_activity_date": 1541575549, "creation_date": 1541570326, "question_id": 53184259, "link": "https://stackoverflow.com/questions/53184259/remap-function-pointer", "title": "Remap function pointer", "body": "<p>I have below code where I need to remap(redefine) C_FLASH_FUNCTION_ADDRESS.</p>\n\n<pre><code>int main(void) {\n    // your code goes here\n\n    execute_this();\n\n    pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;\n\n    pPointerToFunc();\n\n    return 0;\n}\n</code></pre>\n\n<p>The reason why I need to redefine <code>C_FLASH_FUNCTION_ADDRESS</code> is, <code>C_FLASH_FUNCTION_ADDRESS</code> is some location in FLASH memory where address of some other function is stored. Since I don't have FLASH, I want to redefine C_FLASH_FUNCTION_ADDRESS to some address in RAM. For any reason I Shouldn't have to change the line: <code>pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;</code></p>\n\n<p>I've tried below code to do this, this compiles however run-time error occurs.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid Testing_pOP_Start(void)\n{\n    printf(\"Inside\");\n    return;\n}\n\ntypedef unsigned int uint32_t;\n\n#define C_FLASH_FUNCTION_ADDRESS (ptemp)\n\nvoid (*pPointerToFunc)(void);\n\nunsigned long ptemp;\n\nvoid execute_this(void)\n{\n    ptemp = (unsigned long)(&amp;Testing_pOP_Start);\n}\n\n\nint main(void) {\n    // your code goes here\n\n    execute_this();\n\n    pPointerToFunc = (void *)*(uint32_t *)C_FLASH_FUNCTION_ADDRESS;\n\n    pPointerToFunc();\n\n    return 0;\n}\n</code></pre>\n\n<p>Please help me find out what is wrong and how do I achieve this. </p>\n"}, {"tags": ["python", "c", "random", "cryptography"], "answers": [{"comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "reply_to_user": {"reputation": 599, "user_id": 6753906, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/5a688c7a31298e7d379d572d2cd6409b?s=128&d=identicon&r=PG&f=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6753906/shannon"}, "edited": false, "score": 0, "creation_date": 1541641929, "post_id": 53184202, "comment_id": 93289529, "body": "Glad I could help."}], "tags": [], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "is_accepted": true, "score": 2, "last_activity_date": 1541569921, "creation_date": 1541569921, "answer_id": 53184202, "question_id": 53184142, "link": "https://stackoverflow.com/questions/53184142/how-can-i-use-nist-software-in-non-interactive-way/53184202#53184202", "title": "How can I use NIST software in non-interactive way?", "body": "<p>You can automate interactive interfaces with <a href=\"https://pypi.org/project/pexpect/\" rel=\"nofollow noreferrer\">pexpect</a>, which is a python library for expect. expect is also an NIST product.</p>\n"}, {"tags": [], "owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "is_accepted": false, "score": 1, "last_activity_date": 1541615795, "last_edit_date": 1541615795, "creation_date": 1541583508, "answer_id": 53186809, "question_id": 53184142, "link": "https://stackoverflow.com/questions/53184142/how-can-i-use-nist-software-in-non-interactive-way/53186809#53186809", "title": "How can I use NIST software in non-interactive way?", "body": "<p>NIST STS is open source, so you can download and modify it;</p>\n\n<p>the main in asses.c</p>\n\n<pre><code>tp.n = atoi(argv[1]); // gets the size from command line.\n\ngeneratorOptions() in the utilities.c , case option tell you how to enter your file.\n</code></pre>\n\n<p>So, one you can fix your parameters, desing and compile.</p>\n\n<p>In the documentation NIST also says that;</p>\n\n<blockquote>\n  <p>In the event that storage space is a problem, the user may want to modify the reference implementation and plug-in their implementation of the PRNG under evaluation. The bit streams will be stored directly\n  in the epsilon data structure, which contains binary sequences. </p>\n</blockquote>\n\n<p>Note: Depending on your need, The Red Cricket's answer may be better to suits you.</p>\n"}], "owner": {"reputation": 599, "user_id": 6753906, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/5a688c7a31298e7d379d572d2cd6409b?s=128&d=identicon&r=PG&f=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6753906/shannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 53184202, "answer_count": 2, "score": 1, "last_activity_date": 1541788914, "creation_date": 1541569467, "last_edit_date": 1541788914, "question_id": 53184142, "link": "https://stackoverflow.com/questions/53184142/how-can-i-use-nist-software-in-non-interactive-way", "title": "How can I use NIST software in non-interactive way?", "body": "<p>I am using NIST software. This tool (written in C) has interactive mode. It gets an input file, asks user some questions about test type and parameters, and then runs the test. I want to run it on several files, so I want to automate the whole process in Python. Is there anyway to use this software in non-interactive mode?</p>\n\n<p>For documentation and code: <a href=\"http://csrc.nist.gov/groups/ST/toolkit/rng/documentation_software.html\" rel=\"nofollow noreferrer\">http://csrc.nist.gov/groups/ST/toolkit/rng/documentation_software.html</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1541569218, "post_id": 53184088, "comment_id": 93257793, "body": "What is the question?"}, {"owner": {"reputation": 5478, "user_id": 8268644, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9Crzt.jpg?s=128&g=1", "display_name": "core114", "link": "https://stackoverflow.com/users/8268644/core114"}, "edited": false, "score": 0, "creation_date": 1541569283, "post_id": 53184088, "comment_id": 93257810, "body": "Hi , Welcome to stack overflow  .Please take the time to read to see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 11, "user_id": 10592740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed596c16ceb813648cbb0516e4c6a898?s=128&d=identicon&r=PG&f=1", "display_name": "RChuDChu", "link": "https://stackoverflow.com/users/10592740/rchudchu"}, "edited": false, "score": 0, "creation_date": 1541570034, "post_id": 53184088, "comment_id": 93257970, "body": "Sorry, I made some edits to clarify what I am asking"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1541570326, "post_id": 53184088, "comment_id": 93258033, "body": "If the compiler did not warn even once, it&#39;s time to throw it away and get a new one."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1541570393, "post_id": 53184088, "comment_id": 93258050, "body": "Undefined Behavior"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541576793, "post_id": 53184088, "comment_id": 93260038, "body": "This code is just nonsense. Try compiling it, to begin with. Then  <code>*x=&quot;check\\0&quot;;</code> would for example point at a string literal instead of the malloced memory. Then you print various parts of a pointer with undefined behavior printf calls..."}], "answers": [{"tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 0, "last_activity_date": 1541570759, "creation_date": 1541570759, "answer_id": 53184335, "question_id": 53184088, "link": "https://stackoverflow.com/questions/53184088/question-about-casting-char-as-char/53184335#53184335", "title": "Question about casting char ** as (char *)", "body": "<p>This code doesn't work.</p>\n\n<p>If it is compiled with warnings, there's <em>lots</em> of warnings letting the user know.</p>\n\n<p>The reason it can actually compile is that mostly the manipulation involves pointers. Pointers are just numbers, so it's possible to put a char** pointer into the space for a char*.  This doesn't help the program actually work of course.</p>\n\n<p>The C Standard doesn't define these operations as errors, so the compiler lets them pass.</p>\n\n<pre><code>$ gcc -g -Wall  example.c -o example\nm.c: In function \u2018main\u2019:\nm.c:7:12: warning: initialization from incompatible pointer type [-Wincompatible-pointer-types]\n  char **x= (char *)malloc(1000);\n            ^\nm.c:11:10: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char **\u2019 [-Wformat=]\n printf(\"%s\",x); //random bits in memory\n         ~^\nm.c:13:10: warning: format \u2018%c\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018char **\u2019 [-Wformat=]\n printf(\"%c\",x); //random bits in memory\n         ~^\nm.c:15:5: warning: assignment makes pointer from integer without a cast [-Wint-conversion]\n x[0]='w';\n     ^\nm.c:17:5: warning: assignment makes pointer from integer without a cast [-Wint-conversion]\n x[1]='t';\n     ^\nm.c:19:5: warning: assignment makes pointer from integer without a cast [-Wint-conversion]\n x[2]='f';\n     ^\nm.c:23:10: warning: format \u2018%c\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018char **\u2019 [-Wformat=]\n printf(\"%c\",x); //random bits in memory\n         ~^\nm.c:25:10: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char **\u2019 [-Wformat=]\n printf(\"%s\",x); //w\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10592740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed596c16ceb813648cbb0516e4c6a898?s=128&d=identicon&r=PG&f=1", "display_name": "RChuDChu", "link": "https://stackoverflow.com/users/10592740/rchudchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541570759, "creation_date": 1541569077, "last_edit_date": 1541570112, "question_id": 53184088, "link": "https://stackoverflow.com/questions/53184088/question-about-casting-char-as-char", "title": "Question about casting char ** as (char *)", "body": "<p>If I had the following piece of code, why and how does it work? Specifically, what is x (like what was created in the malloc line?) and why does the compiler allow me to cast a char ** to a (char *) with malloc. </p>\n\n<pre><code>char **x= (char *)malloc(1000);\n\n*x=\"check\\0\";\n\nprintf(\"%s\",x); //random bits in memory\n\nprintf(\"%c\",x); //random bits in memory\n\nx[0]='w';\n\nx[1]='t';\n\nx[2]='f';\n\nx[3]='\\0';\n\nprintf(\"%c\",x); //random bits in memory\n\nprintf(\"%s\",x); //w\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 2, "creation_date": 1541569546, "post_id": 53183987, "comment_id": 93257867, "body": "Welcome to StackOverflow.  Please read the <a href=\"https://stackoverflow.com/help/how-to-ask\">&quot;How to Ask&quot;</a> section for an understanding of what is considered a good question here.  Good questions generally contain code, and not a complete upload of your entire project...but a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a> that you&#39;ve built which focuses directly on the specific point you want to ask about.  But also, optimization questions may not be appropriate here...see <a href=\"https://meta.stackoverflow.com/q/261841/211160\">&quot;Can I post questions about optimizing code&quot;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10616622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2721216e31ccf9c8f1a9f4406104f2f3?s=128&d=identicon&r=PG&f=1", "display_name": "snoozeee", "link": "https://stackoverflow.com/users/10616622/snoozeee"}, "edited": false, "score": 0, "creation_date": 1541587024, "post_id": 53186665, "comment_id": 93264780, "body": "Thanks for advise. I will try this method."}], "tags": [], "owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "is_accepted": false, "score": 1, "last_activity_date": 1541592249, "last_edit_date": 1541592249, "creation_date": 1541583017, "answer_id": 53186665, "question_id": 53183987, "link": "https://stackoverflow.com/questions/53183987/how-to-read-tcp-packets-more-quick-manner/53186665#53186665", "title": "How to read TCP packets more quick manner?", "body": "<p>Try RAW sockets and <code>recvfrom()</code>. It should be pretty fast. Example:</p>\n\n<pre><code>int fd = socket(AF_INET, SOCK_RAW, IPPROTO_TCP);\nif (fd != -1)\n{\n    char buf[2345];\n    struct sockaddr_in addr;\n\n    for (int i = 0; i &lt; 10; i++)\n    {\n        socklen_t addrlen = sizeof(addr);\n        int len = recvfrom(fd, buf, sizeof(buf), 0, (struct sockaddr*)&amp;addr, &amp;addrlen);\n        printf(\"len = %d\\n\", len);\n    }\n    close(fd);\n}\n</code></pre>\n\n<p>Example code receives all incoming TCP packets with IP headers. \nYou can bind it to loopback-interface, if needed.\nYou must implement other filtering by yourself.</p>\n\n<p>For binding to loopback-interface:</p>\n\n<pre><code>struct ifreq ifr;\n\nmemset(&amp;ifr, 0, sizeof(ifr));\nstrncpy(ifr.ifr_name, \"lo\", sizeof(ifr.ifr_name));\nsetsockopt(fd, SOL_SOCKET, SO_BINDTODEVICE, &amp;ifr, sizeof(ifr));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10616622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2721216e31ccf9c8f1a9f4406104f2f3?s=128&d=identicon&r=PG&f=1", "display_name": "snoozeee", "link": "https://stackoverflow.com/users/10616622/snoozeee"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1541597279, "answer_count": 1, "score": -6, "last_activity_date": 1541592249, "creation_date": 1541568258, "last_edit_date": 1541587279, "question_id": 53183987, "link": "https://stackoverflow.com/questions/53183987/how-to-read-tcp-packets-more-quick-manner", "closed_reason": "Not suitable for this site", "title": "How to read TCP packets more quick manner?", "body": "<p>Here I sent TCP packets into loopback interface. Simultaneously I tried to capture those packets from that interface using pcap library. But that capturing took some time and causes to slow down whole process. So I need to find out way to read TCP packets quickly.(code is in c language)</p>\n\n<pre><code>while (1) {\n    u_int max_len = 1514 - sizeof (packet_hdr);\n    if (max_len &lt; (tot_len - data_send))len = max_len;\n    else len = tot_len - data_send;\n\n    packet = finalize(packet_hdr, arr, len, tmp_len, src_port, src_ip, dst_port, dsts_ip, eth_src, eth_dst);  //initialize TCP header fields.\n\n    u_char *buff_cpy = (u_char*) malloc(sizeof (packet));\n    memcpy(buff_cpy, (const u_char*) &amp;packet, sizeof (packet));\n\n    int send = pcap_sendpacket(conn_handler, buff_cpy, sizeof (packet_hdr) + packet.len);  //send TCP packets into loopback interface.\n\n    free(buff_cpy);\n    packet1 = pcap_next(conn_handler, &amp;packet_header);  //capture sent packets into loopback interface\n    printf(\"capture: %d\\n\", packet_header.caplen);\n\n    if (send == -1) printf(\"PACKET NOT SEND\");\n    data_send += packet.len;\n    if (data_send == tot_len) break;\n}\n</code></pre>\n\n<p>here is part of my code and used pcap_next() to capture packet.But it took some time.So I need to speedup that.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1541565898, "post_id": 53183649, "comment_id": 93257176, "body": "You&#39;re lucky this works at all.  Start by using function prototypes, or at least declaring <code>fun2</code> before <code>fun1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1541565908, "creation_date": 1541565908, "answer_id": 53183685, "question_id": 53183649, "link": "https://stackoverflow.com/questions/53183649/why-my-pointer-code-is-giving-me-wrong-output-in-c/53183685#53183685", "title": "Why my pointer code is giving me wrong output in C?", "body": "<p>In <code>fun1</code> the expression <code>&amp;x</code> is a pointer <em>to the pointer</em>. It's of type <code>int **</code>.</p>\n\n<p>You should not use the address-of operator there, since <code>x</code> and <code>y</code> already are pointers.</p>\n\n<p>An easy way to get the compiler to warn you about this is to declare thje function <code>fun2</code> before you use it:</p>\n\n<pre><code>// Declare fun2 prototype\nvoid fun2(int *x, int *y);\n\nvoid fun1(int *x, int *y)\n{\n    ...\n}\n\n// Define fun2 implementation\nvoid fun2(int *x, int *y)\n{\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1541566144, "creation_date": 1541566144, "answer_id": 53183712, "question_id": 53183649, "link": "https://stackoverflow.com/questions/53183649/why-my-pointer-code-is-giving-me-wrong-output-in-c/53183712#53183712", "title": "Why my pointer code is giving me wrong output in C?", "body": "<ol>\n<li>Before use <code>void fun2(int*, int*)</code>, you must declare or define it</li>\n<li>In funxtion <code>fun1</code>, the line <code>printf(\"%d %d \", x, y);</code> should be <code>printf(\"%d %d \", *x, *y);</code>, for <code>x</code> and <code>y</code> are <code>int*</code></li>\n<li>In function <code>fun1</code>, the line <code>fun2(&amp;x, &amp;y);</code> should be <code>fun2(x, y);</code> for <code>x</code> and <code>y</code> are <code>int*</code></li>\n</ol>\n\n<p>The following <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid fun2(int *x, int *y){\n    *x = 6;\n    *y = 7;\n}\n\nvoid fun1(int *x, int *y){\n    *x = 50;\n    *y = 100;\n    fun2(x, y);\n    printf(\"%d %d\\n\", *x, *y);\n}\n\nint main()\n{\n    int x = 5;\n    int y = 10;\n    fun1(&amp;x, &amp;y);\n    printf(\"%d %d\\n\",x,y);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10383631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNshkbs4TJs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNbP9Lzj1IGfXf5nlxDhESdI_QK3w/mo/photo.jpg?sz=128", "display_name": "JY Lee", "link": "https://stackoverflow.com/users/10383631/jy-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1541566778, "creation_date": 1541566778, "answer_id": 53183788, "question_id": 53183649, "link": "https://stackoverflow.com/questions/53183649/why-my-pointer-code-is-giving-me-wrong-output-in-c/53183788#53183788", "title": "Why my pointer code is giving me wrong output in C?", "body": "<pre><code>Method 1. Point To Point To Int \n\nvoid fun1(int *x, int *y){\n    *x = 50;\n    *y = 100;\n    fun2(&amp;x, &amp;y);\n    printf(\"%d %d \", *x, *y);\n}\n\nvoid fun2(int **x, int **y){\n    **x = 6;\n    **y = 7;\n}\n\nvoid main()\n{\n    int x = 5;\n    int y = 10;\n    fun1(&amp;x, &amp;y);\n    printf(\"%d %d\",x,y);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9515325"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53183685, "answer_count": 3, "score": 0, "last_activity_date": 1541567172, "creation_date": 1541565583, "last_edit_date": 1541567172, "question_id": 53183649, "link": "https://stackoverflow.com/questions/53183649/why-my-pointer-code-is-giving-me-wrong-output-in-c", "title": "Why my pointer code is giving me wrong output in C?", "body": "<p>Why my pointer code is giving me wrong output ?.</p>\n\n<p>Where, my actual <strong>code</strong> is :</p>\n\n<pre><code> void fun1(int *x, int *y){\n    *x = 50;\n    *y = 100;\n    fun2(&amp;x, &amp;y);\n    printf(\"%d %d \", x, y);\n}\n\nvoid fun2(int *x, int *y){\n    *x = 6;\n    *y = 7;\n}\n\nvoid main()\n{\n    int x = 5;\n    int y = 10;\n    fun1(&amp;x, &amp;y);\n    printf(\"%d %d\",x,y);\n}\n</code></pre>\n\n<p>My expected output is like this : 6 7 6 7</p>\n\n<p>It's giving me output like this : 6 7 50 100</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23, "user_id": 7693220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-me8TQVpxiXk/AAAAAAAAAAI/AAAAAAAAABA/4wFHB3WDfu8/photo.jpg?sz=128", "display_name": "Jkae11", "link": "https://stackoverflow.com/users/7693220/jkae11"}, "edited": false, "score": 0, "creation_date": 1541563323, "post_id": 53183396, "comment_id": 93256769, "body": "sorry if its written poorly its my first time posting here"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541563870, "post_id": 53183396, "comment_id": 93256844, "body": "Review <code>double w0,x0,y0,z0;     scanf(&quot;%f%f%f%f&quot;,&amp;w0,&amp;x0,&amp;y0,&amp;z0);</code>  Enable all compiler warnings."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1541565706, "last_edit_date": 1541565706, "creation_date": 1541565335, "answer_id": 53183625, "question_id": 53183396, "link": "https://stackoverflow.com/questions/53183396/i-wrote-this-c-program-for-jacobi-iterative-method-but-i-am-getting-nan-and-infi/53183625#53183625", "title": "I wrote this C program for Jacobi iterative method but I am getting Nan and infinity as output I tried changing from", "body": "<p>You are trying to read into <code>double</code>s using a conversion specifier used for <code>float</code> . \nThis can lead to undefined behavior</p>\n\n<pre><code>scanf(\"%f%f%f%f\",&amp;w0,&amp;x0,&amp;y0,&amp;z0);\n</code></pre>\n\n<p>You need to use <code>%lf</code> instead of <code>%f</code>.</p>\n\n<p>Some compilers with an appropriate option will give a warning (GCC does this with <code>-Wall</code> option).</p>\n\n<pre><code>warning: format '%f' expects argument of type 'float *', but argument 2 has type 'double *' [-Wformat=]    \n   scanf(\"%f%f%f%f\",&amp;w0,&amp;x0,&amp;y0,&amp;z0);\n\n          ~^        ~~~    \n          %lf\n</code></pre>\n\n<p>The C standard states:</p>\n\n<blockquote>\n  <p>If a conversion specification is invalid, the behavior is undefined. If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 7693220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-me8TQVpxiXk/AAAAAAAAAAI/AAAAAAAAABA/4wFHB3WDfu8/photo.jpg?sz=128", "display_name": "Jkae11", "link": "https://stackoverflow.com/users/7693220/jkae11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541565706, "creation_date": 1541563276, "last_edit_date": 1541563831, "question_id": 53183396, "link": "https://stackoverflow.com/questions/53183396/i-wrote-this-c-program-for-jacobi-iterative-method-but-i-am-getting-nan-and-infi", "title": "I wrote this C program for Jacobi iterative method but I am getting Nan and infinity as output I tried changing from", "body": "<ol>\n<li>I am getting Nan and infinity as output I tried changing  from <code>float</code> to <code>double</code></li>\n<li><p>Maybe error is in accuracy ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;math.h&gt;\n\ndouble u(double w,double x,double y,double z)\n{\n  return ( (-22*x+2*y-4*z+3)/3);\n}\n\ndouble f(double w,double x,double y,double z)\n{\n  return ((36*w+y-3*z-4)/2);\n\n}\n\ndouble s(double w,double x,double y,double z)\n{\n  return ((w-2*x-40*z+6)/4);\n\n}\n\ndouble t(double w,double x,double y,double z)\n{\n  return ((-2*w-3*x-38*y+8)/2);\n\n}\n\nvoid main()\n{\n  double w0,x0,y0,z0,w1=0,x1=0,y1=0,z1=0,tempw,tempx,tempy,tempz,acc=0.000001;\n  int iteration=0;\n  printf(\"Enter initial guesses:\\n\");\n  scanf(\"%f%f%f%f\",&amp;w0,&amp;x0,&amp;y0,&amp;z0);\n  do\n  {\n    tempw=w1;\n    tempx=x1;\n    tempy=y1;\n    tempz=z1;\n    w1=u(w0,x0,y0,z0);\n    x1=f(w0,x0,y0,z0);\n    y1=s(w0,x0,y0,z0);\n    z1=t(w0,x0,y0,z0);\n\n    iteration++;\n    w0=w1;\n    x0=x1;\n    y0=y1;\n    z0=z1;\n  }while(fabs(tempw-w1)&gt;acc &amp;&amp;fabs(tempx-x1)&gt;acc &amp;&amp; fabs(tempy-y1)&gt;acc \n      &amp;&amp; fabs(tempz-z1)&gt;acc);\n\n  printf(\"\\n\\nFinally,\\n\");\n  printf(\"w=%f Ans\\nx=%f Ans\\ny=%f Ans\\nz=%f Ans\\n\",w1,x1,y1,z1);\n  printf(\"Iteration=%d\",iteration);\n  getch();\n\n}\n</code></pre></li>\n</ol>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": false, "score": 0, "last_activity_date": 1541566652, "creation_date": 1541566652, "answer_id": 53183776, "question_id": 53183383, "link": "https://stackoverflow.com/questions/53183383/program-to-run-function/53183776#53183776", "title": "Program to run function", "body": "<blockquote>\n  <p>The function should not change the contents of the array in any way.</p>\n</blockquote>\n\n<p>Use a temporary <code>array</code> to perform all the operations. Simply copy the elements from the old <code>array</code> to the new temp <code>array</code>.</p>\n\n<blockquote>\n  <p>Write a function called second which takes, as parameters, an array of\n  positive integers and also an integer representing the size of the\n  array</p>\n</blockquote>\n\n<p>Case 1: if the array is unsorted <br>\nYou could just <code>sort</code> the elements(ascending order) and return the <code>second last</code> element.</p>\n\n<p>Case 2: If the array is sorted\nJust return the <code>second last</code> element.</p>\n\n<p>There are lots of sorting algorithms like <code>quicksort</code> and <code>mergesort</code> which give you a better runtime but you could use <code>bubble</code> sort as well if there is no constraint on time complexity.</p>\n\n<p>Additional Hint:</p>\n\n<pre><code>int second(const int arr[], int size)\n{\n  int temp[size]; //&lt;-----use a temporary array as you're not allowed to modify the original array\n   int i;\n   for(i=0;i&lt;size;i++)\n         {\n              //copy the elements\n          }\n\n       //sort the temp array in ascending order  \n\n    return temp[size-2];  //&lt;----return the second last elements       \n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1541566989, "creation_date": 1541566989, "answer_id": 53183821, "question_id": 53183383, "link": "https://stackoverflow.com/questions/53183383/program-to-run-function/53183821#53183821", "title": "Program to run function", "body": "<p>I am not looking at your function <code>second</code>. I will leave that to you as an exercise. </p>\n\n<p>To run this function, you will need to make a main program which will create this array and call this function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint second(const int arr[], int size);\n\nint main(void)\n{\n    int arr[] = {1,2,3,4,6,7};\n    int N = sizeof(arr)/sizeof(arr[0]);\n\n    printf (\"%d \", second(arr, N));\n}    \n</code></pre>\n\n<p>You can add your code below the code here and compile.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10596419, "user_type": "registered", "profile_image": "https://graph.facebook.com/543366602795587/picture?type=large", "display_name": "Uvaish Zafri", "link": "https://stackoverflow.com/users/10596419/uvaish-zafri"}, "is_accepted": false, "score": 0, "last_activity_date": 1541569333, "creation_date": 1541569333, "answer_id": 53184120, "question_id": 53183383, "link": "https://stackoverflow.com/questions/53183383/program-to-run-function/53184120#53184120", "title": "Program to run function", "body": "<p>you can first traverse the control to find the first highest number and then go for for second one ..if the result of traversal finds the same number as the second highest then it should print it..</p>\n\n<pre><code>int second(int array[],int n)\n{\nint num1,num2;\nint pos=0;   //for  storing the position of first highest number\nnum1=array[0];\nnum2=array[1];\nfor(int i=0;i&lt;n;i++)\n{\nif(num1&lt;array[i])\nnum1=array[i]; pos=i;\n}\n\nfor(i=0;i&lt;n;i++)\n{\nif(num2&lt;&gt;array[i]&amp;&amp;i!=pos)\nnum2=array[i]\n} \nreturn num2;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10616478, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--cdkFGy27tQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC03AqHzFUcQWffHKJwNppaZFImrw/mo/photo.jpg?sz=128", "display_name": "RedBorusse", "link": "https://stackoverflow.com/users/10616478/redborusse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1541569333, "creation_date": 1541563170, "last_edit_date": 1541563646, "question_id": 53183383, "link": "https://stackoverflow.com/questions/53183383/program-to-run-function", "title": "Program to run function", "body": "<p>I have a question for my assignment:</p>\n\n<blockquote>\n  <p>Write a function called second which takes, as parameters, an array of\n  positive integers and also an integer representing the size of the\n  array. The function returns the value of the second largest integer in\n  the array. If the largest integer in the array repeats, then the\n  second largest integer is also the largest. For example, if we have\n  {1, 2, 3, 4, 5, 5 }, the second largest integer is\n  5. The function should not change the contents of the array in any way. You can assume that the size of the array is at least two.</p>\n</blockquote>\n\n<p>What I've done:</p>\n\n<pre><code>int second(const int arr[], int size)\n{\n    int num1,num2;\n    int i;\n\n    if(arr[0]&gt;arr[1])\n    {\n        num1=arr[0];num2=arr[1];\n\n    }\n    else \n    {\n        num1=arr[1];num2=arr[0];\n    }\n\n    for (i=2; i&lt;size; i++)\n    {\n        if (arr[i]&gt;num1)\n        {\n            num2=num1;\n            num1=arr[i];\n        }\n        else if (arr[i] &gt; num2)\n        {\n            num2=arr[i];\n        }\n    }\n\n   return num2;\n}\n</code></pre>\n\n<p>I have no idea how to type a program that can run the above function and display the integer '5'</p>\n"}, {"tags": ["c", "linux", "windows"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1541562842, "post_id": 53183323, "comment_id": 93256670, "body": "Maybe you\u2019re using 32-bit compilation on Windows and 64-bit on Linux .  The behaviour is undefined, so both responses are correct (well, permitted; neither is disallowed)."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1541562864, "post_id": 53183323, "comment_id": 93256673, "body": "Please never say &quot;not working&quot; without indicating exactly in which way. In this case, I assume Segmentation fault; but in a larger program or a more complex question, we might not be able to guess."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1541562912, "post_id": 53183323, "comment_id": 93256686, "body": "Being pedantic, I think &quot;neither is wrong&quot; is more accurate than &quot;both are correct&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 48, "user_id": 10616416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcf30579489647bd362e4f1a063286b?s=128&d=identicon&r=PG&f=1", "display_name": "Prithvish", "link": "https://stackoverflow.com/users/10616416/prithvish"}, "edited": false, "score": 0, "creation_date": 1541566115, "post_id": 53183367, "comment_id": 93257215, "body": "Since you don&#39;t actually state what you want to do, <code>printf(&quot;%s&quot;, b)</code> is a correct equivalent of your code. If you really need to convert a pointer to an integer and back, <code>size_t</code> is an integral type that is guaranteed to of appropriate size; don&#39;t use <code>int</code> for pointers."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 48, "user_id": 10616416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcf30579489647bd362e4f1a063286b?s=128&d=identicon&r=PG&f=1", "display_name": "Prithvish", "link": "https://stackoverflow.com/users/10616416/prithvish"}, "edited": false, "score": 0, "creation_date": 1541566985, "post_id": 53183367, "comment_id": 93257396, "body": "You can&#39;t. C is strongly typed; integers are integers, and strings are strings (well, pointers to characters are pointers to characters). When you print an integer, you can&#39;t use <code>%s</code> in <code>printf</code>. Either have a variable that holds the <i>string</i> <code>10</code>, which can get replaced by the string <code>&quot;hello&quot;</code>, or have a flag that determines whether you <code>printf(&quot;%d&quot;, numbervar)</code> or <code>printf(&quot;%s&quot;, stringvar)</code>. You cannot solve it with a typecast."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 48, "user_id": 10616416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcf30579489647bd362e4f1a063286b?s=128&d=identicon&r=PG&f=1", "display_name": "Prithvish", "link": "https://stackoverflow.com/users/10616416/prithvish"}, "edited": false, "score": 0, "creation_date": 1541567529, "post_id": 53183367, "comment_id": 93257474, "body": "It wouldn&#39;t work. Take out <code>a=(char*)b</code> and note that what is printed is <i>not</i> <code>30</code>. It is just not throwing an error; doesn&#39;t mean your logic is correct."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 48, "user_id": 10616416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcf30579489647bd362e4f1a063286b?s=128&d=identicon&r=PG&f=1", "display_name": "Prithvish", "link": "https://stackoverflow.com/users/10616416/prithvish"}, "edited": false, "score": 0, "creation_date": 1541569048, "post_id": 53183367, "comment_id": 93257759, "body": "That&#39;s tough, but I still won&#39;t chat outside Stack Overflow. Anyway - please reread my comment. I know it prints <code>hi</code> for you, but it wouldn&#39;t print it <code>if you don&#39;t reassign</code> <code>a</code> from its original value of <code>30</code>. You expect it would print <code>30</code> if the value is unchanged. It would not. You need <code>print(&#39;%d&#39;, a)</code> to print <code>30</code>, not <code>printf(&quot;%s&quot;, a)</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 48, "user_id": 10616416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcf30579489647bd362e4f1a063286b?s=128&d=identicon&r=PG&f=1", "display_name": "Prithvish", "link": "https://stackoverflow.com/users/10616416/prithvish"}, "edited": false, "score": 0, "creation_date": 1541572108, "post_id": 53183367, "comment_id": 93258532, "body": "If you have another question, ask another question. There&#39;s many people besides me that will try to answer to their best ability. But please stop trying to get a contact outside Stack Overflow. It is inappropriate. While I am glad to answer your questions you post here, I am not your employee, and you do not have a claim on my time. I will not be contacting you at gmail."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 0, "last_activity_date": 1541562993, "creation_date": 1541562993, "answer_id": 53183367, "question_id": 53183323, "link": "https://stackoverflow.com/questions/53183323/why-this-c-program-gives-o-p-in-windows-not-in-linux/53183367#53183367", "title": "Why this C program gives o/p in windows not in Linux?", "body": "<p>The better question is why it works at all: coincidence that <code>int</code> and <code>char*</code> both have the same size. You should never assume it, and should avoid spurious type assumptions and always use correct types.</p>\n\n<p>On my Mac, <code>int</code> is 4 bytes, but <code>char*</code> is 8 bytes. Thus, putting 4 bytes on stack and popping 8 bytes off, then using that as an address, is the reason for Segmentation fault.</p>\n"}], "owner": {"reputation": 48, "user_id": 10616416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcf30579489647bd362e4f1a063286b?s=128&d=identicon&r=PG&f=1", "display_name": "Prithvish", "link": "https://stackoverflow.com/users/10616416/prithvish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53183367, "answer_count": 1, "score": -4, "last_activity_date": 1541577452, "creation_date": 1541562567, "last_edit_date": 1541577452, "question_id": 53183323, "link": "https://stackoverflow.com/questions/53183323/why-this-c-program-gives-o-p-in-windows-not-in-linux", "title": "Why this C program gives o/p in windows not in Linux?", "body": "<p>Here is a C program of type casting. It works in windows but not in linux. Why?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n  int a = 30; \n  char b[10] = \"hi\";\n  a=(char*)b;\n  printf(\"%s\",a);\n}\n</code></pre>\n"}, {"tags": ["c", "list"], "answers": [{"tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": true, "score": 1, "last_activity_date": 1541561610, "creation_date": 1541561610, "answer_id": 53183234, "question_id": 53183172, "link": "https://stackoverflow.com/questions/53183172/double-linked-list-with-c/53183234#53183234", "title": "double linked list with c", "body": "<p>The part where you insert at index has problems:</p>\n\n<p><code>temp = malloc</code> is wrong, it should start with <code>temp = head</code>.</p>\n\n<p>in the insertion:</p>\n\n<pre><code>temp-&gt;val = newnode-&gt;val;\ntemp-&gt;next = list-&gt;head-&gt;next;\nlist-&gt;head-&gt;next = temp;\ntemp-&gt;prev = list-&gt;head;\n</code></pre>\n\n<p><code>temp-&gt;next</code> should not be <code>head-&gt;next</code>, it should be <code>newnode</code>. <code>newnode-&gt;next</code> should be <code>temp-&gt;next</code> etc. </p>\n"}], "owner": {"reputation": 9, "user_id": 10437641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-im6QtVKTSr4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXftGnhzC3My1O1wELY0sKRS6Re2g/mo/photo.jpg?sz=128", "display_name": "sk j", "link": "https://stackoverflow.com/users/10437641/sk-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53183234, "answer_count": 1, "score": -1, "last_activity_date": 1541561610, "creation_date": 1541560968, "question_id": 53183172, "link": "https://stackoverflow.com/questions/53183172/double-linked-list-with-c", "title": "double linked list with c", "body": "<p>ok, now i have to make double linked list on c.\nthere are 7 functions which act on main.</p>\n\n<p><strong>append.\ninsertAt.\ndeleteAt.\nprint.\nprint_revers.</strong>\nnewnode.\nnewDLL.</p>\n\n<p>i can amend only 5 functions\nappend, insertAt, deleteAt, print, print_reverse</p>\n\n<p>finally i can make append,print,print_reverse\nhowever, i can't make insertAt,deleteAt, because of index.</p>\n\n<p><strong>1.</strong> i can't understand why the code</p>\n\n<pre><code>else {\n    while (index-- &gt;= 0) {\n      temp = temp-&gt;next;\n    }\n</code></pre>\n\n<p>make memory collide. for using index, i need to move node to collect position and connect to newnode. but it doesn't work...</p>\n\n<p><strong>2.</strong> also what's return; 's role? i have not seen such type of return.</p>\n\n<p><strong>3.</strong> how can i make deleteAt using index? i think deleteAt and insertAt have quiet similar algoritum. so i try to make insertAt first and deleteAt last. but what i write doesn't work well..</p>\n\n<p>i can find a lot of data of doublelinkedlist on internet. but i can't find using index.... i have been listening c language lecture on only two month, so sorry about the spagettii code...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct Node {\n    int val;\n    struct Node *prev;\n    struct Node *next;\n} Node;\n\ntypedef struct {\n    Node *head;\n    int size;\n} DLL;\n\nNode *newnode(int n)\n{\n    Node *temp = (Node *)malloc(sizeof(Node));\n    temp-&gt;val = n;\n    temp-&gt;prev = NULL;\n    temp-&gt;next = NULL;\n    return temp;\n}\n\nDLL *newDLL() {\n    DLL *temp = (DLL *)malloc(sizeof(DLL));\n    temp-&gt;head = NULL;\n    temp-&gt;size = 0;\n    return temp;\n}\n\nvoid append(DLL *list, Node *newnode) {\n    struct Node* temp = list-&gt;head;\n    struct Node* newNode = newnode;\n    if (list-&gt;head == NULL) {\n        list-&gt;head = newNode;\n        list-&gt;size++;\n        return;\n    }\n    while (temp-&gt;next != NULL) {\n        temp = temp-&gt;next;\n    }\n    list-&gt;size++;\n    temp-&gt;next = newNode;\n    newNode-&gt;prev = temp;\n}\n\nvoid insertAt(DLL *list, int index, Node *newnode) {\n\n    struct Node* temp = (Node *)malloc(sizeof(Node));\n\n    if (index &lt; 0 || index &gt;= list-&gt;size + 1) {\n        printf(\"out of range\\n\");\n    }\n    else if (index == 0) {\n        newnode-&gt;next = list-&gt;head;\n        list-&gt;head-&gt;prev = newnode;\n        list-&gt;head = newnode;\n    }\n    else {\n        while (index-- &gt;= 0) {\n          temp = temp-&gt;next;\n        }\n\n    temp-&gt;val = newnode-&gt;val;\n    temp-&gt;next = list-&gt;head-&gt;next;\n    list-&gt;head-&gt;next = temp;\n    temp-&gt;prev = list-&gt;head;\n\n    if (temp-&gt;next != NULL)\n        temp-&gt;next-&gt;prev = temp;\n    }\n}\n\nvoid deleteAt(DLL *list, int index) {\n    //save reference to first link\n\n    struct Node* temp = (Node *)malloc(sizeof(Node));\n\n    //if only one link\n    if (list-&gt;head-&gt;next == NULL) {\n        list-&gt;head-&gt;prev = NULL;\n    }\n    else {\n        list-&gt;head-&gt;next-&gt;prev = NULL;\n    }\n\n    list-&gt;head = list-&gt;head-&gt;next;\n    //return the deleted link\n    return;\n}\n\nvoid print(DLL *list) {\n    struct Node* temp = list-&gt;head;\n    printf(\"Forward: \");\n    while (temp != NULL) {\n        printf(\"[%d] \", temp-&gt;val);\n        temp = temp-&gt;next;\n    }\n    printf(\"\\n\");\n}\n\nvoid print_reverse(DLL *list) {\n    struct Node* temp = list-&gt;head;\n    if (temp == NULL) return; // empty list, exit\n    // Going to last Node\n    while (temp-&gt;next != NULL) {\n        temp = temp-&gt;next;\n    }\n    // Traversing backward using prev pointer\n    printf(\"Reverse: \");\n    while (temp != NULL) {\n        printf(\"[%d] \", temp-&gt;val);\n        temp = temp-&gt;prev;\n    }\n    printf(\"\\n\");\n}\n\nint main() {\n    DLL *list = newDLL();\n    int i;\n    for (i = 1; i &lt; 6; i++) {\n        append(list, newnode(i));\n    }\n\n    print(list);\n    deleteAt(list, -1);\n    deleteAt(list, 5);\n    deleteAt(list, 0);\n    print(list);\n    deleteAt(list, 2);\n    print(list);\n    deleteAt(list, 2);\n    print(list);\n    insertAt(list, -1, newnode(6));\n    insertAt(list, 3, newnode(6));\n    insertAt(list, 0, newnode(7));\n    print(list);\n    insertAt(list, 1, newnode(8));\n    print(list);\n    insertAt(list, 4, newnode(9));\n    print(list);\n    print_reverse(list);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "hardy-ramanujan"], "comments": [{"owner": {"reputation": 189, "user_id": 8850585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P7zcm.jpg?s=128&g=1", "display_name": "Gaurav Bahadur", "link": "https://stackoverflow.com/users/8850585/gaurav-bahadur"}, "edited": false, "score": 2, "creation_date": 1541558903, "post_id": 53182909, "comment_id": 93255939, "body": "Show us what you have tried,then we will help.<a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 77, "user_id": 10522191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ij3Cu.jpg?s=128&g=1", "display_name": "Vartika", "link": "https://stackoverflow.com/users/10522191/vartika"}, "reply_to_user": {"reputation": 189, "user_id": 8850585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P7zcm.jpg?s=128&g=1", "display_name": "Gaurav Bahadur", "link": "https://stackoverflow.com/users/8850585/gaurav-bahadur"}, "edited": false, "score": 0, "creation_date": 1541559118, "post_id": 53182909, "comment_id": 93255983, "body": "@Gaurav Bahadur Yes I will add my code"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 10072093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xd8M7.jpg?s=128&g=1", "display_name": "GIRISH", "link": "https://stackoverflow.com/users/10072093/girish"}, "is_accepted": true, "score": 3, "last_activity_date": 1543157388, "last_edit_date": 1543157388, "creation_date": 1541558897, "answer_id": 53182955, "question_id": 53182909, "link": "https://stackoverflow.com/questions/53182909/c-program-for-ramanujan-like-number-series/53182955#53182955", "title": "C Program for Ramanujan-like Number Series", "body": "<p>Although, You must have shown your work.<br>\nTry it:   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\nint i, a, b, x, y, k;\n\nprintf(\"Input nos. between which you want to find Ramanujan No.: \");\nscanf(\"%d %d\", &amp;a, &amp;b);\n\nfor(i=a;i&lt;b;i++){\n    k=0;\n    for(x=1;x*x*x&lt;i;x++){\n        for(y=x+1;x*x*x+y*y*y&lt;=i;y++){\n\n            if(x*x*x+y*y*y==i){\n                 k++;\n                 x++;           \n            }\n        }\n\n    }\n     if(k==2){\n            printf(\"%d \", i);\n        }\n    }\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10522191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ij3Cu.jpg?s=128&g=1", "display_name": "Vartika", "link": "https://stackoverflow.com/users/10522191/vartika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3330, "favorite_count": 0, "closed_date": 1541560532, "accepted_answer_id": 53182955, "answer_count": 1, "score": -2, "last_activity_date": 1543157388, "creation_date": 1541558496, "question_id": 53182909, "link": "https://stackoverflow.com/questions/53182909/c-program-for-ramanujan-like-number-series", "closed_reason": "Needs details or clarity", "title": "C Program for Ramanujan-like Number Series", "body": "<p><strong>1729</strong> is known as the <strong>Ramanujan number</strong>, after an anecdote of the British mathematician <em>G. H. Hardy</em> when he visited Indian mathematician <em>Srinivasa Ramanujan</em> in hospital. He related their conversation:<br>\n\"I remember once going to see him when he was ill at Putney. I had ridden in taxi cab number 1729 and remarked that the number seemed to me rather a dull one, and that I hoped it was not an unfavourable omen. \"No,\" he replied, \"it is a very interesting number; it is the smallest number expressible as the sum of two cubes in two different ways.\" <br>\nThe two different ways are:<br> \n<em>1729 = 1^3 + 12^3 = 9^3 + 10^3</em><br>\n(Source: <a href=\"https://en.wikipedia.org/wiki/1729_(number)\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/1729_(number)</a>)<br>\nNext such number is <strong>4104</strong>.<br>\n<em>4104 = 16^3 + 2^3 = 9^3 + 15^3</em><br>\nI want to find more such numbers. I have tried several time but not able to write code for it. The codes I have written didn't run.</p>\n"}, {"tags": ["python", "c", "python-3.x", "windows", "ctypes"], "comments": [{"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1541557479, "post_id": 53182796, "comment_id": 93255671, "body": "Are you able to post the code?"}, {"owner": {"reputation": 45, "user_id": 2855674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1fca5a7b4db306436df0f364184fa3?s=128&d=identicon&r=PG&f=1", "display_name": "newman", "link": "https://stackoverflow.com/users/2855674/newman"}, "reply_to_user": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1541559570, "post_id": 53182796, "comment_id": 93256074, "body": "I&#39;ve reedited the post, see if any unclear statements? Thanks"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1541574817, "post_id": 53182796, "comment_id": 93259297, "body": "Yes you might be right. Your <i>python</i>s are 64bit? Could you also post the 2 functions prototypes (in <i>C</i>), and also <code>FTRSCAN_IMAGE_SIZE</code>? I suspect that <code>hDevice = lib.ftrScanOpenDevice()</code> truncated the value. <a href=\"https://stackoverflow.com/questions/52268294/python-ctypes-cdll-loadlibrary-instantiate-an-object-execute-its-method-priva/52272969#52272969\" title=\"python ctypes cdll loadlibrary instantiate an object execute its method priva\">stackoverflow.com/questions/52268294/&hellip;</a>. Please also post the chunk of code where you assign <i>argtypes</i> and <i>restype</i>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541579482, "post_id": 53182796, "comment_id": 93261073, "body": "a) please <i>no</i> images. You <i>must</i> copy the output as text into your question. Also the second output does not match your code! (Doesn&#39;t print the handle!)"}], "answers": [{"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1541696386, "last_edit_date": 1541696386, "creation_date": 1541576464, "answer_id": 53185244, "question_id": 53182796, "link": "https://stackoverflow.com/questions/53182796/python-ctypes-issue-on-different-oses/53185244#53185244", "title": "python ctypes issue on different OSes", "body": "<p>You should show your .argtypes and .restype attempts, but give this a try:</p>\n\n<pre><code>from ctypes import wintypes as w\n\nclass FTRSCAN_IMAGE_SIZE(ctypes.Structure):\n    _fields_ = [('nWidth', ctypes.c_int),\n                ('nHeight', ctypes.c_int),\n                ('nImageSize', ctypes.c_int)]\n\nFTRHANDLE = ctypes.c_void_p\n\nlib = ctypes.WinDLL('ftrScanAPI.dll')\nlib.ftrScanOpenDevice.argtypes = None\nlib.ftrScanOpenDevice.restype = FTRHANDLE\nlib.ftrScanGetImageSize.argtypes = FTRHANDLE,ctypes.POINTER(FTRSCAN_IMAGE_SIZE)\nlib.ftrScanGetImageSize.restype = w.BOOL\n</code></pre>\n\n<p>Check the use of <code>WinDLL</code> vs. <code>CDLL</code>.  It won't matter if your <em>Python</em> is 64-bit, but it makes a difference on 32-bit Python.  Use <code>CDLL</code> if the functions use C calling convention (__cdecl) and <code>WinDLL</code> if the functions use __stdcall calling convention.  If the header file isn't clear, the default is usually __cdecl.  <strong>Edit:</strong> from the API link in another answer, it is <code>__stdcall</code> and <code>WinDLL</code> should be used.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541579367, "post_id": 53185316, "comment_id": 93261029, "body": "pack should not be needed as <i>that</i> structure is already properly packed"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541636635, "post_id": 53185316, "comment_id": 93288237, "body": "@AnttiHaapala: Thank you for the comment. I updated my answer accordingly."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 4, "last_activity_date": 1592742189, "last_edit_date": 1592742189, "creation_date": 1541576816, "answer_id": 53185316, "question_id": 53182796, "link": "https://stackoverflow.com/questions/53182796/python-ctypes-issue-on-different-oses/53185316#53185316", "title": "python ctypes issue on different OSes", "body": "<p>In <em>99%</em> of the cases, inconsistencies between arguments (and / or return) type inconsistencies are the cause (check <a href=\"https://stackoverflow.com/questions/58610333/c-function-called-from-python-via-ctypes-returns-incorrect-value/58611011#58611011\">[SO]: C function called from Python via ctypes returns incorrect value (@CristiFati's answer)</a> for more details).</p>\n<p>Always have <a href=\"https://docs.python.org/3/library/ctypes.html\" rel=\"nofollow noreferrer\">[Python 3.Docs]: ctypes - A foreign function library for Python</a> open when working with <em>ctypes</em>.</p>\n<p>I found <a href=\"https://github.com/erikssm/futronics-fingerprint-reader/blob/master/ftrScanAPI.h\" rel=\"nofollow noreferrer\">[GitHub]: erikssm/futronics-fingerprint-reader - (master) futronics-fingerprint-reader/ftrScanAPI.h</a> (I don't know how different it's from what you currently have, but things you posted so far seem to match), and I did some changes to your code:</p>\n<ul>\n<li><strong>Define <em>argtypes</em> and <em>restype</em> for functions</strong></li>\n<li>Define missing types (for clarity only)</li>\n<li>Some other insignificant changes (renames)</li>\n<li>One other thing that I noticed in the above file, is a <code>#pragma pack(push, 1)</code> macro (check <a href=\"https://docs.microsoft.com/en-us/cpp/preprocessor/pack\" rel=\"nofollow noreferrer\">[MS.Docs]: pack</a> for more details). For this structure it makes no difference (thanks @AnttiHaapala for the hint), as the 3 <em>int</em> (<em>4</em> byte) members alignment doesn't change, but for other structures (with &quot;smaller&quot; member types (e.g. <em>char</em>, <em>short</em>)) you might want to add: <code>_pack_ = 1</code></li>\n</ul>\n<p>Your modified code (needless to say, I didn't run it as I don't have the <em>.dll</em>):</p>\n<pre class=\"lang-py prettyprint-override\"><code>from ctypes import wintypes\n\n# ...\n\nlib = ctypes.WinDLL('ftrScanAPI.dll') # provided by fingerprint scanner\nclass FTRSCAN_IMAGE_SIZE(ctypes.Structure):\n    # _pack_ = 1\n    _fields_ = [\n        (&quot;nWidth&quot;, ctypes.c_int),\n        (&quot;nHeight&quot;, ctypes.c_int),\n        (&quot;nImageSize&quot;, ctypes.c_int),\n    ]\n\nPFTRSCAN_IMAGE_SIZE = ctypes.POINTER(FTRSCAN_IMAGE_SIZE)\nFTRHANDLE = ctypes.c_void_p\n\nprint('Open device and get device handle...')\n\nlib.ftrScanOpenDevice.argtypes = []\nlib.ftrScanOpenDevice.restype = FTRHANDLE\n\nh_device = lib.ftrScanOpenDevice()\nprint('handle is', h_device)\nprint('Get image size...')\nimage_size = FTRSCAN_IMAGE_SIZE(0, 0, 0)\n\nlib.ftrScanGetImageSize.argtypes = [FTRHANDLE, PFTRSCAN_IMAGE_SIZE]\nlib.ftrScanGetImageSize.restype = wintypes.BOOL\n\nif lib.ftrScanGetImageSize(h_device, ctypes.byref(image_size)):\n    print('Get image size succeed...')\n    print('  W', image_size.nWidth)\n    print('  H', image_size.nHeight)\n    print('  Size', image_size.nImageSize)\nelse:\n    print('Get image size failed...')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1541579984, "creation_date": 1541579984, "answer_id": 53185924, "question_id": 53182796, "link": "https://stackoverflow.com/questions/53182796/python-ctypes-issue-on-different-oses/53185924#53185924", "title": "python ctypes issue on different OSes", "body": "<p>The problem seems to simply be that the device handle is a 64-bit entity (a typedef'd pointer to void). That it works in your Windows 7 was just a fluke, as the upper 33 bits of the handle were correctly zero. </p>\n\n<p>The return type of all functions in ctypes defaults to 32-bit <code>int</code>. Now in Windows 10 it seems that the 32th bit (sign bit) was set, which causes a sign extension somewhere when the handle-coerced-to-int is pushed on the 64-bit stack for function call. The resulting address has all upper bits set (0xFFFFFFFFA...) which points to kernel space and not in the user space.</p>\n\n<p>Thus perhaps you can get your code \"working\" with just</p>\n\n<pre><code>lib.ftrScanOpenDevice.restype = c_void_p\n</code></pre>\n\n<p>That is not to say that you shouldn't define the argument and return types for <em>all</em> functions - you should, otherwise they will follow just the default argument promotion rules of the C language, and work... or totally fail to work, depending on whether the function's prototype itself is compatible with default argument promotions. For example any function that accepts <em><code>float</code>s</em> as arguments cannot be called correctly without defining the prototype.</p>\n"}], "owner": {"reputation": 45, "user_id": 2855674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1fca5a7b4db306436df0f364184fa3?s=128&d=identicon&r=PG&f=1", "display_name": "newman", "link": "https://stackoverflow.com/users/2855674/newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1417, "favorite_count": 0, "accepted_answer_id": 53185316, "answer_count": 3, "score": 2, "last_activity_date": 1592742189, "creation_date": 1541557251, "last_edit_date": 1541580383, "question_id": 53182796, "link": "https://stackoverflow.com/questions/53182796/python-ctypes-issue-on-different-oses", "title": "python ctypes issue on different OSes", "body": "<p>I'm trying to convert C function for python 3.6 use.  </p>\n\n<p>code as below:  </p>\n\n<pre><code>lib = ctypes.WinDLL('ftrScanAPI.dll') # provided by fingerprint scanner\nclass FTRSCAN_IMAGE_SIZE(ctypes.Structure):\n    _fields_ = [\n    (\"nWidth\", ctypes.c_int),\n    (\"nHeight\", ctypes.c_int),\n    (\"nImageSize\", ctypes.c_int)\n]\n\nprint('Open device and get device handle...')\nhDevice = lib.ftrScanOpenDevice()\nprint('handle is', hDevice)\nprint('Get image size...')\nImage_size = FTRSCAN_IMAGE_SIZE(0, 0, 0)\nif lib.ftrScanGetImageSize(hDevice, ctypes.byref(Image_size)):\n    print('Get image size succeed...')\n    print('  W', Image_size.nWidth)\n    print('  H', Image_size.nHeight)\n    print('  Size', Image_size.nImageSize)\nelse:\n    print('Get image size failed...')\n</code></pre>\n\n<p>function definition:  </p>\n\n<pre><code>typedef struct FTR_PACKED __FTRSCAN_IMAGE_SIZE {\n    int nWidth;\n    int nHeight;\n    int nImageSize;\n} FTRSCAN_IMAGE_SIZE, *PFTRSCAN_IMAGE_SIZE;\nFTRHANDLE ftrScanOpenDevice();  # typedef void *  FTRHANDLE;\nBOOL ftrScanGetImageSize(FTRHANDLE ftrHandle, \n    PFTR_SCAN_IMAGE_SIZE pImageSize);\n</code></pre>\n\n<p>But <b>different OSes with the same code</b> seems to have different result:<br>\n<li>On Windows 7 64 bit<br>\n<a href=\"https://i.stack.imgur.com/7NiXW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7NiXW.png\" alt=\"output1\"></a></p>\n\n<p><li>On Windows 10 64 bit<br>\nI don't print \"handle is here\"\n<a href=\"https://i.stack.imgur.com/P6RLD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P6RLD.png\" alt=\"output2\"></a></p>\n\n<p>What I've tried:<br>\nAccording to some answers on stack overflow, this may be caused by not assigning function argtypes and restype explicitly, so I tried and failed.</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1541555588, "post_id": 53182601, "comment_id": 93255350, "body": "<a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "is_accepted": false, "score": 1, "last_activity_date": 1541555588, "creation_date": 1541555588, "answer_id": 53182645, "question_id": 53182601, "link": "https://stackoverflow.com/questions/53182601/final-line-of-a-text-file-is-printed-twice/53182645#53182645", "title": "Final Line of a Text File is Printed Twice", "body": "<p>You need to change your loop to:</p>\n\n<pre><code>while ( fgets(string, 30, file) != NULL ) {\n    printf(\"%s\", string);\n}\n</code></pre>\n\n<p><code>fgets()</code> will fail and return <code>NULL</code> before <code>feof(file)</code> becomes true, and it won't update <code>string</code>. So right now you're successfully calling <code>fgets()</code> on the last line, printing it, unsuccessfully calling <code>fgets()</code>, printing the last line again, then terminating your loop.</p>\n\n<p>The key thing to understand here is that you only know you're at the end of the file when you've tried to read from it and your read has failed. Until then, someone might have appended data to the end of the file since the last time you read it, for all you know, for example.</p>\n"}], "owner": {"reputation": 29, "user_id": 9034866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f388ab7bf6a2839c9c4f778c988f84b0?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/9034866/joshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "closed_date": 1541558249, "answer_count": 1, "score": 0, "last_activity_date": 1541555588, "creation_date": 1541555191, "question_id": 53182601, "link": "https://stackoverflow.com/questions/53182601/final-line-of-a-text-file-is-printed-twice", "closed_reason": "Duplicate", "title": "Final Line of a Text File is Printed Twice", "body": "<p>Assume FILE_NAME is a global constant,</p>\n\n<p>If I have the following code</p>\n\n<pre><code>FILE *file;\nfile = fopen(FILE_NAME, \"r\");\nchar string[30];\ndo\n{\n    fgets(string, 30, file);\n    printf(\"%s\", string);\n}\nwhile ( !feof(file) );\n</code></pre>\n\n<p>It prints all the lines in the txt file but the last one is printed twice. How do I prevent it from printing twice?</p>\n"}, {"tags": ["c", "debugging", "mpi"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1541553431, "post_id": 53182402, "comment_id": 93254922, "body": "Have you tried monitoring your system performance to check things like memory use?"}, {"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1541553487, "post_id": 53182402, "comment_id": 93254935, "body": "You will get better answers if you post some relevant code."}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1541554356, "post_id": 53182402, "comment_id": 93255107, "body": "@Bwebb I wasn&#39;t sure what to post as I don&#39;t think this is my code that is preventing it from starting. I put a print statement as the first thing that happens when the program starts, before MPI is even initialized and the print statement does not occur, which means my program isn&#39;t even starting. Is there a specific segment you would like to see?"}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1541556261, "post_id": 53182402, "comment_id": 93255458, "body": "@paddy Just tried this. As soon as I start the program, the processes are shown (500/1000 of them). Each process has &lt;2% CPU, and each process has 0% memory. The program however isn&#39;t running yet (after ~40 seconds) and hasn&#39;t printed out the print statement the line after main(), so each program hasn&#39;t actually started."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1541556741, "post_id": 53182402, "comment_id": 93255551, "body": "are you trying to <code>mpirun -n 1000 .&#47;morra</code> ? if yes how many cores are available (local host or total cores per your machinefile ? try to simply <code>mpirun -n 1000 hostname</code> and check how long it takes. which MPI (vendor &amp; version) are you running ?"}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1541557689, "post_id": 53182402, "comment_id": 93255710, "body": "@GillesGouaillardet I tried mpirun, but no difference. I have always been using mpiexec, if that makes a difference. each computer I&#39;m running on has 4 cores. mpirun -n 1000 hostname runes fine, not able to start though as a program isn&#39;t specified. It still reports back quickly that it failed to start 1000 processes because not program was specified. MPICH2"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1541557821, "post_id": 53182402, "comment_id": 93255731, "body": "On many Linux distributions, you could run into process limits. For example, to be able to run <code>mpiexec -n 1000 true</code>, I need to first adjust the limits using e.g <code>ulimit -n 8192 -s 1024</code>. (On this Core i5-7200U laptop, <code>mpiexec -n 1000 true</code> takes about 4.5 seconds wall clock time.) Note that <code>true</code> (<code>&#47;bin&#47;true</code>) is a simple program that does nothing."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1541557890, "post_id": 53182402, "comment_id": 93255752, "body": "sorry for the typo, it should be <code>mpirun -np 1000 hostname</code> or <code>mpiexec -n 1000 hostname</code> (but definitely not <code>mpiexec -n .&#47;morra</code> as written in the question)"}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541558127, "post_id": 53182402, "comment_id": 93255794, "body": "@NominalAnimal The limit is set to unlimited"}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541558179, "post_id": 53182402, "comment_id": 93255805, "body": "@NominalAnimal When running the program in valgrind, I get spammed with this: warning: invalid file descriptor 199990/5, with the last digit being 0-5. This happens when the program does run correctly with only 10 processes starting and also when running with 1000 processes. However, the difference is 10 finishes after spamming that and 1000 just spams it for a long time."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541558225, "post_id": 53182402, "comment_id": 93255810, "body": "@DevinK: By process limits, I didn&#39;t mean the number of processes, but any per-process limit. The stack size (<code>-s</code>) and the maximum number of open files (<code>-n</code>) are the most typical ones you hit. You definitely should use at least <code>ulimit -s 1024</code>, to limit the amount of virtual memory needed for stacks."}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541558368, "post_id": 53182402, "comment_id": 93255845, "body": "@NominalAnimal -s = 8192, -n = 200000, however I cannot change these values as this is a university server I don&#39;t have permissions to change that kind of stuff on"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541558554, "post_id": 53182402, "comment_id": 93255875, "body": "@DevinK: You are allowed to temporarily set e.g <code>ulimit -s 1024</code>, because it only reduces the default stack size. It only affects the current session, and will be reset to default when you next log in. What you are not allowed to do, is raise the limits. (You are allowed to <i>try</i>; your shell will just tell you you cannot, because you don&#39;t have the privileges.)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1541558804, "post_id": 53182402, "comment_id": 93255918, "body": "I would expect to see a filename and line number in the messages from valgrind."}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1541559208, "post_id": 53182402, "comment_id": 93256003, "body": "@user3386109 &quot;==3609== Warning: invalid file descriptor 199990 in syscall close()&quot; That&#39;s all it says, it just repeats that"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541559570, "post_id": 53182402, "comment_id": 93256075, "body": "@DevinK: It looks like some part just makes a pre-emptive <code>close()</code> on all descriptors first, nothing to worry about. I wrote a trivial MPI test program with <code>MPI_Barrier()</code> and outputting the rank and size of MPI_COMM_WORLD, and while <code>mpiexec -n 150 .&#47;example</code> runs in three seconds of wall clock time, <code>mpiexec -n 200 .&#47;example</code> takes about fifteen seconds, and <code>mpiexec -n 250 .&#47;example</code> a minute or so; my single four-core system with 16 GiB of RAM just cannot handle that many MPI processes passing messages to and fro. Don&#39;t you have a cluster to submit jobs to?"}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541560006, "post_id": 53182402, "comment_id": 93256147, "body": "@NominalAnimal I do, I have 8 computers that I specified in the hostfile that can be used to run the program on. However, when I do this, the same problem happens where it just takes a long long long time to start. I&#39;m not really sure why"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541560220, "post_id": 53182402, "comment_id": 93256197, "body": "@DevinK: Then do what I did: write a trivial test program, and check that first. If you use barriers, include one.  Include some output as well. That will give you a basis benchmark to compare against."}, {"owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541560997, "post_id": 53182402, "comment_id": 93256328, "body": "@NominalAnimal running &quot;mpiexec -n 10 ./test&quot; runs under 1-2 seconds, however when running: &quot;mpiexec --hostfile ./hostfile -n 10 ./test&quot; it takes &gt;20 seconds (on 4 nodes) to finish. I have a good connection to the servers, and I&#39;m able to logon to each one very fast (so I&#39;m guessing no bandwidth problems). What does that tell us?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1541564096, "post_id": 53182402, "comment_id": 93256881, "body": "do you have firewalls ?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541613899, "post_id": 53182402, "comment_id": 93279144, "body": "@DevinK: Maybe bandwidth, connectivity, or load issues between the cluster machines? I&#39;d next write a minimal test case where root node sends a short message (say, just an int) to each other node (who immediately respond back), in turn, and measure the roundtrip times (using eg. <code>MPI_Wtime()</code>) on the root node for each, separately. After measuring them all, print them out. If they&#39;re in the millisecond or sub-millisecond range, the net between the nodes is OK. Otherwise, the net or the nodes themselves is overloaded or is otherwise wonky."}], "owner": {"reputation": 352, "user_id": 2694488, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8e4cf3cc6febc7240138c307d9ddeb43?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2694488/some-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541553185, "creation_date": 1541553185, "question_id": 53182402, "link": "https://stackoverflow.com/questions/53182402/c-mpi-program-taking-forever-to-start", "title": "C MPI program taking forever to start", "body": "<p>I have a project that I've been working on but have hit a road block. The game we have to implement is the <a href=\"https://en.wikipedia.org/wiki/Morra_(game)\" rel=\"nofollow noreferrer\">game of morra</a>. Basically, every process is a player and then we specify how many rounds of the game to do. So to run the program we use the following command:</p>\n\n<p>mpiexec -n  ./morra </p>\n\n<p>I believe I have the program logic down for this as it works fine for smaller amounts of players. I was testing with 4, 6, 10, 25 players and everything was good. However, the requirements of the project included testing up to 500 or 1000 players.</p>\n\n<p>When I tried this, my program just hangs and doesn't even start. I put a printf statement as the first thing after main() and ran the game with 500 players and after a minute or two it finally printed out the statement and ran the program. What is going on here? Is the system waiting and trying to allocate enough resources to continue?</p>\n\n<p>Also, another requirement is to run the program on a cluster of nodes we have available to us. I created the host file and made sure i could login keyless into all of the servers and ran it, yet I had the same wait time problem and often the server's would disconnect. I understand that there might be rules on the servers that kick someone off under certain conditions but that still doesn't explain when it does not kick me off, the program won't start either.</p>\n\n<p>Wondering if anyone can provide any insight on these problems. I can provide code/sections of code I've written or the general layout of my program or any information I might have left out. </p>\n\n<p>Thank you so much.</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86", "calling-convention"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1541552563, "post_id": 53182257, "comment_id": 93254733, "body": "The compiler is allowed to do whatever it wants for its local variables, especially if you forgot to enable optimizations. When calling other functions it must follow the calling convention which indeed prescribes 16 byte alignment. The pushing of the return address is only done in <code>main</code> because the compiler can not rely on incoming stack pointer being aligned so it does the alignment itself and puts the return address on top."}, {"owner": {"reputation": 133, "user_id": 4075432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rXam6AGBIqo/AAAAAAAAAAI/AAAAAAAAAAw/jN4Nka45YwA/photo.jpg?sz=128", "display_name": "Joontaek Oh", "link": "https://stackoverflow.com/users/4075432/joontaek-oh"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1541553271, "post_id": 53182257, "comment_id": 93254877, "body": "Thank you very much! Then, reason of all my questions is 16 byte alignment. But, why the local variables are saved in esp+4, not esp? And why the address of argc is pushed above old ebp? Is that start address of parameter? Could you tell me?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1541553499, "post_id": 53182257, "comment_id": 93254937, "body": "<code>ecx</code> is pushed because it&#39;s a caller-saved register and it&#39;s normally needed to restore the stack. Since your code invokes <code>exit</code> that isn&#39;t used here. The layout of locals is left to the compiler."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1541554082, "post_id": 53182257, "comment_id": 93255060, "body": "re: the 2nd part: gcc does sometimes reserve an extra 16 bytes of space for no apparent reason, even when you compile with optimization enabled.  But without optimization it&#39;s not even trying to be efficient."}], "owner": {"reputation": 133, "user_id": 4075432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rXam6AGBIqo/AAAAAAAAAAI/AAAAAAAAAAw/jN4Nka45YwA/photo.jpg?sz=128", "display_name": "Joontaek Oh", "link": "https://stackoverflow.com/users/4075432/joontaek-oh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "closed_date": 1541553677, "answer_count": 0, "score": 0, "last_activity_date": 1541554090, "creation_date": 1541551941, "last_edit_date": 1541552273, "question_id": 53182257, "link": "https://stackoverflow.com/questions/53182257/stack-allocation-is-too-big", "closed_reason": "Duplicate", "title": "Stack allocation is too big", "body": "<p>I wrote below code.</p>\n\n<pre><code>int main (int argc, char *argv[])\n{\n  char *uargv[3];\n\n  uargv[0] = \"echo\";\n  uargv[1] = \"hello!\";\n  uargv[2] = 0;\n\n  exec(\"echo\", uargv);\n\n  exit();\n}\n</code></pre>\n\n<p>And compiled with gcc 5.4.</p>\n\n<p>Below is assembly code of above program.</p>\n\n<pre><code>0x00: lea    0x4(%esp),%ecx\n0x04: and    $0xfffffff0,%esp\n0x07: pushl  -0x4(%ecx)\n0x0a: push   %ebp \n0x0b: mov    %esp,%ebp\n0x0d: push   %ecx \n0x0e: sub    $0x14,%esp\n0x11: movl   $0x7c3,-0x14(%ebp)\n0x18: movl   $0x7c8,-0x10(%ebp)\n0x1f: movl   $0x0,-0xc(%ebp)\n0x26: sub    $0x8,%esp\n0x29: lea    -0x14(%ebp),%eax\n0x2c: push   %eax \n0x2d: push   $0x7c3\n0x32: call   2ce &lt;exec&gt;\n0x37: add    $0x10,%esp\n0x3a: call   296 &lt;exit&gt;\n</code></pre>\n\n<p>I can't understand three part of above assembly code.</p>\n\n<p>First, in the code that is in 0x00, 0x04, 0x07, 0x0a, 0x0b, 0x0d works as follows.</p>\n\n<pre><code>0x00: save ebp+4 to ecx, and it is address of argc.\n0x04: align esp with 16 byte\n0x07: push ecx-4 to stack, and it is return address.\n0x0a ~ 0x0b: setup ebp\n0x0d: push ecx to stack, and it is address of argc.\n</code></pre>\n\n<p>I wonder why it push return address again and why it push address of argc.</p>\n\n<p>It was my first question.</p>\n\n<p>Second, it allocate stack in 0x0e instruction for local variable, uargv.</p>\n\n<p>However, the size of uargv is only 12 byte.</p>\n\n<p>But it allocate 20 byte.</p>\n\n<p>If it is because of 16 byte alignment, why local variables are saved in esp+4, not esp (ebp+0x14 is same with esp+4).</p>\n\n<p>Third, why 0x26 instruction allocate more 8 byte for stack?</p>\n\n<p>More space in stack is no needed, because arguments of exec are saved in stack by push instruction.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "macros", "clang", "c-preprocessor", "armclang"], "answers": [{"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1541560442, "post_id": 53182860, "comment_id": 93256233, "body": "GCC-5.4.0 also appears to obey the request as well. (Of course, one needs to use <code>&#39;-D__TIME__=&quot;foo&quot;&#39; &#39;-D__DATE__=&quot;bar&quot;&#39;</code>, as the macros should expand to a string literal.)"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1541557949, "creation_date": 1541557949, "answer_id": 53182860, "question_id": 53182242, "link": "https://stackoverflow.com/questions/53182242/how-to-override-the-value-of-time-and-date-macros-using-command-line-opt/53182860#53182860", "title": "How to override the value of __TIME__ and __DATE__ macros using command line options?", "body": "<p>Compile with the switch <code>-Wno-builtin-macro-redefined</code>.</p>\n\n<p>That will disable the warning (including the error you get because you are also compiling with <code>-Werror</code>). I cannot assure you what it will do with the macro definition\u2014Clang appears to be obeying the request to use the command-line definition, but I do not know it will do so in all circumstances.</p>\n"}], "owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 53182860, "answer_count": 1, "score": 2, "last_activity_date": 1541557949, "creation_date": 1541551814, "question_id": 53182242, "link": "https://stackoverflow.com/questions/53182242/how-to-override-the-value-of-time-and-date-macros-using-command-line-opt", "title": "How to override the value of __TIME__ and __DATE__ macros using command line options?", "body": "<p>In a project where the <code>__FILE__</code> and <code>__DATE__</code> macros are used in one of the modules, I am trying to redefine the values of these macros to explicit values during build time. Trying to use the <code>-D</code> option, like <code>-D__TIME__=01:23:45</code> gave me a compilation error.</p>\n\n<pre><code>Compiling ./Console.c\nIn file included from &lt;built-in&gt;:324:\n&lt;command line&gt;:41:9: error: redefining builtin macro [-Werror,-Wbuiltin-macro-redefined]\n#define __TIME__ 01:23:45\n        ^\n1 error generated.\n</code></pre>\n\n<p>Is there a way to set these macros (and similar predefined macros) from the command line, w/o altering the source code itself?</p>\n"}]